machine:
  timezone: Europe/Zurich
  environment:
    NODE_ENV: development
    # TOOL_NODE_FLAGS: "--max_old_space_size=4096"
  node:
    version: 4.8.0

dependencies:
  override:
    # Install & cache Meteor
    - .test/install-meteor.sh

    #Â Install all dependencies
    - meteor npm install

  cache-directories:
    - "~/.meteor"
    - "~/.npm"
    - "node_modules"

test:
  override:
    - meteor npm run test-CI:
        timeout: 1200

deployment:
  staging:
    branch: staging
    commands:
      - meteor npm run deploy:staging
  production:
    branch: master
    commands:
      - meteor npm run deploy:production
