import { CANTONS } from '../api/loans/loanConstants';

// Each zipcode has a corresponding number, which is the index of all
// cantons in an array, sorted by short form ('GE', 'ZH')
export const zipcodes = {
  1000: 22,
  1200: 7, // Edited to allow 1200 to be used as a zipcode in geneva
  1260: 22,
  1281: 7,
  1291: 22,
  1292: 7,
  1295: 22,
  1298: 7,
  1299: 22,
  1468: 6,
  1509: 22,
  1527: 6,
  1530: 22,
  1532: 6,
  1534: 22,
  1541: 6,
  1543: 22,
  1544: 6,
  1545: 22,
  1553: 6,
  1554: 22,
  1563: 6,
  1580: 22,
  1583: 6,
  1584: 22,
  1609: 6,
  1610: 22,
  1611: 6,
  1612: 22,
  1614: 6,
  1657: 5,
  1658: 22,
  1661: 6,
  1682: 22,
  1684: 6,
  1738: 5,
  1740: 6,
  1797: 5,
  1800: 22,
  1868: 23,
  1880: 22,
  1890: 23,
  1892: 22,
  1893: 23,
  2000: 12,
  2333: 5,
  2336: 10,
  2400: 12,
  2502: 5,
  2523: 12,
  2532: 5,
  2540: 18,
  2542: 5,
  2544: 18,
  2552: 5,
  2714: 10,
  2715: 5,
  2718: 10,
  2720: 5,
  2800: 10,
  2814: 3,
  2822: 10,
  2827: 5,
  2828: 10,
  3004: 5,
  3175: 6,
  3176: 5,
  3178: 6,
  3179: 5,
  3182: 6,
  3183: 5,
  3184: 6,
  3202: 5,
  3206: 6,
  3207: 5,
  3210: 6,
  3225: 5,
  3253: 18,
  3255: 5,
  3280: 6,
  3282: 5,
  3284: 6,
  3292: 5,
  3307: 18,
  3308: 5,
  3801: 23,
  3803: 5,
  3900: 23,
  4001: 4,
  4101: 3,
  4108: 18,
  4117: 3,
  4118: 18,
  4123: 3,
  4125: 4,
  4127: 3,
  4143: 18,
  4144: 3,
  4145: 18,
  4147: 3,
  4204: 18,
  4207: 3,
  4208: 18,
  4222: 3,
  4226: 18,
  4242: 3,
  4245: 18,
  4246: 3,
  4247: 18,
  4253: 3,
  4303: 0,
  4304: 3,
  4305: 0,
  4402: 3,
  4412: 18,
  4414: 3,
  4421: 18,
  4422: 3,
  4468: 18,
  4469: 3,
  4500: 18,
  4536: 5,
  4542: 18,
  4564: 5,
  4565: 18,
  4663: 0,
  4702: 18,
  4704: 5,
  4710: 18,
  4800: 0,
  4806: 11,
  4812: 0,
  4900: 5,
  4915: 11,
  4916: 5,
  5000: 0,
  5012: 18,
  5017: 0,
  5735: 11,
  5736: 0,
  5746: 18,
  6003: 11,
  6042: 0,
  6043: 11,
  6052: 13,
  6053: 14,
  6083: 5,
  6102: 11,
  6197: 5,
  6203: 11,
  6300: 24,
  6344: 11,
  6345: 24,
  6353: 11,
  6362: 13,
  6377: 21,
  6382: 13,
  6388: 14,
  6402: 17,
  6404: 11,
  6405: 17,
  6441: 21,
  6442: 17,
  6452: 21,
  6500: 20,
  6534: 9,
  6571: 20,
  7000: 9,
  7310: 15,
  7402: 9,
  8001: 25,
  8109: 0,
  8112: 25,
  8200: 16,
  8212: 25,
  8213: 16,
  8245: 25,
  8252: 19,
  8260: 16,
  8264: 19,
  8302: 25,
  8355: 19,
  8400: 25,
  8454: 16,
  8457: 25,
  8500: 19,
  8523: 25,
  8524: 19,
  8542: 25,
  8547: 19,
  8548: 25,
  8552: 19,
  8600: 25,
  8638: 15,
  8700: 25,
  8715: 15,
  8750: 8,
  8751: 21,
  8752: 8,
  8800: 25,
  8806: 17,
  8810: 25,
  8832: 17,
  8833: 25,
  8834: 17,
  8865: 8,
  8872: 15,
  8874: 8,
  8877: 15,
  8902: 25,
  8905: 0,
  8906: 25,
  8916: 0,
  8925: 25,
  8956: 0,
  9000: 15,
  9035: 1,
  9036: 15,
  9037: 1,
  9050: 2,
  9052: 1,
  9054: 2,
  9055: 1,
  9057: 2,
  9062: 1,
  9108: 2,
  9112: 1,
  9113: 15,
  9213: 19,
  9230: 15,
  9306: 19,
  9308: 15,
  9314: 19,
  9323: 15,
  9325: 19,
  9327: 15,
  9405: 1,
  9413: 2,
  9414: 1,
  9422: 15,
  9426: 1,
  9430: 15,
  9442: 2,
  9443: 15,
  9485: 26,
  9500: 15,
  9502: 19,
  9512: 15,
  9514: 19,
  9523: 15,
  9532: 19,
  9533: 15,
  9535: 19,
  9536: 15,
  9542: 19,
  9552: 15,
  9553: 19,
  9601: 15,
  9999: 5,
};

export default zipcode => {
  let result;

  if (zipcode > 9999 || zipcode < 1000) {
    return null;
  }

  Object.keys(zipcodes).some(code => {
    if (zipcode >= code) {
      result = code;
      return false;
    }
    return true;
  });

  const cantonIndex = zipcodes[result];

  const canton = Object.keys(CANTONS)[cantonIndex];
  return canton;
};

/**
 * Returns the first zipcode that matches the given canton
 *
 * @param {String} canton
 * @returns Number
 */
export const getZipcodeForCanton = canton => {
  const cantonIndex = Object.keys(CANTONS).findIndex(c => c === canton);

  return Object.keys(zipcodes).find(zipcode => {
    const cantonIndexForZipcode = zipcodes[zipcode];
    return cantonIndexForZipcode === cantonIndex;
  });
};
