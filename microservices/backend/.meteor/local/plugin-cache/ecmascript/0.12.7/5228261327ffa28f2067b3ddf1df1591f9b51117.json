{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/Impersonate/ImpersonatePage/ImpersonatePage.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties",["flow",{}],"dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"imports/core/components/Impersonate/ImpersonatePage/ImpersonatePage.jsx","filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/Impersonate/ImpersonatePage/ImpersonatePage.jsx","inputSourceMap":{"version":3,"sources":["imports/core/components/Impersonate/ImpersonatePage/ImpersonatePage.jsx"],"names":["Meteor","React","Component","PropTypes","impersonateUser","impersonate","userId","authToken","history","run","then","emails","connection","setUserId","default","notification","success","message","description","address","duration","push","isDevelopment","sessionStorage","setItem","ImpersonatePage","location","props","paramsQuery","URLSearchParams","search","get","render","object","isRequired"],"mappings":";;AAAA,SAASA,MAAT,QAAuB,eAAvB;AAEA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEA,SAASC,eAAT;AAEA,OAAO,MAAMC,WAAW,GAAG,CAAC;AAAEC,EAAAA,MAAF;AAAUC,EAAAA,SAAV;AAAqBC,EAAAA;AAArB,CAAD,KAAoC;AAC7DJ,EAAAA,eAAe,CACZK,GADH,CACO;AAAEH,IAAAA,MAAF;AAAUC,IAAAA;AAAV,GADP,EAEGG,IAFH,CAEQ,CAAC;AAAEC,IAAAA;AAAF,GAAD,KAAgB;AACpBX,IAAAA,MAAM,CAACY,UAAP,CAAkBC,SAAlB,CAA4BP,MAA5B;AACA,0CAAsCI,IAAtC,CAA2C,CAAC;AAAEI,MAAAA,OAAO,EAAEC;AAAX,KAAD,KAA+B;AACxEA,MAAAA,YAAY,CAACC,OAAb,CAAqB;AACnBC,QAAAA,OAAO,EAAE,CAAC,IAAD,CAAM,GAAG,+BAAT,CAAyC,GAAG,EAAE,IAAF,CADlC;AAEnBC,QAAAA,WAAW,EAAG,+BAA8BP,MAAM,CAAC,CAAD,CAAN,CAAUQ,OAAQ,EAF3C;AAGnBC,QAAAA,QAAQ,EAAE;AAHS,OAArB;AAKD,KAND;;AAOA,QAAIZ,OAAJ,EAAa;AACXA,MAAAA,OAAO,CAACa,IAAR,CAAa,GAAb;AACD;AACF,GAdH,EAeGX,IAfH,CAeQ,MAAM;AACV,QAAIV,MAAM,CAACsB,aAAX,EAA0B;AACxBC,MAAAA,cAAc,CAACC,OAAf,CAAuB,wBAAvB,EAAiDlB,MAAjD;AACAiB,MAAAA,cAAc,CAACC,OAAf,CAAuB,2BAAvB,EAAoDjB,SAApD;AACD;AACF,GApBH;AAqBD,CAtBM;;AAwBP,MAAMkB,eAAN,SAA8BvB,SAA9B,CAAwC;AAAA;AAAA;;AAAA,+CAMlB,MAAM;AACxB,YAAM;AAAEwB,QAAAA,QAAF;AAAYlB,QAAAA;AAAZ,UAAwB,KAAKmB,KAAnC;AACA,YAAMC,WAAW,GAAG,IAAIC,eAAJ,CAAoBH,QAAQ,CAACI,MAA7B,CAApB;AACA,YAAMxB,MAAM,GAAGsB,WAAW,CAACG,GAAZ,CAAgB,QAAhB,CAAf;AACA,YAAMxB,SAAS,GAAGqB,WAAW,CAACG,GAAZ,CAAgB,WAAhB,CAAlB;AAEA1B,MAAAA,WAAW,CAAC;AAAEC,QAAAA,MAAF;AAAUC,QAAAA,SAAV;AAAqBC,QAAAA;AAArB,OAAD,CAAX;AACD,KAbqC;AAAA;;AAetCwB,EAAAA,MAAM,GAAG;AACP,WAAO,CAAC,OAAD,CAAS,UAAU,kBAAnB,CAAsC,gBAAgB,EAAE,OAAF,CAA7D;AACD;;AAjBqC;;gBAAlCP,e,eACe;AACjBjB,EAAAA,OAAO,EAAEL,SAAS,CAAC8B,MAAV,CAAiBC,UADT;AAEjBR,EAAAA,QAAQ,EAAEvB,SAAS,CAAC8B,MAAV,CAAiBC;AAFV,C;;AAmBrB,eAAeT,eAAf","sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { impersonateUser } from '../../../api/methods';\n\nexport const impersonate = ({ userId, authToken, history }) => {\n  impersonateUser\n    .run({ userId, authToken })\n    .then(({ emails }) => {\n      Meteor.connection.setUserId(userId);\n      import('../../../utils/notification').then(({ default: notification }) => {\n        notification.success({\n          message: <span id=\"impersonation-success-message\">Yay</span>,\n          description: `Actuellement connecté comme ${emails[0].address}`,\n          duration: 5,\n        });\n      });\n      if (history) {\n        history.push('/');\n      }\n    })\n    .then(() => {\n      if (Meteor.isDevelopment) {\n        sessionStorage.setItem('dev_impersonate_userId', userId);\n        sessionStorage.setItem('dev_impersonate_authToken', authToken);\n      }\n    });\n};\n\nclass ImpersonatePage extends Component {\n  static propTypes = {\n    history: PropTypes.object.isRequired,\n    location: PropTypes.object.isRequired,\n  };\n\n  componentDidMount = () => {\n    const { location, history } = this.props;\n    const paramsQuery = new URLSearchParams(location.search);\n    const userId = paramsQuery.get('userId');\n    const authToken = paramsQuery.get('authToken');\n\n    impersonate({ userId, authToken, history });\n  };\n\n  render() {\n    return <section className=\"impersonate-page\">Impersonating...</section>;\n  }\n}\n\nexport default ImpersonatePage;\n"]},"passPerPreset":false,"envName":"development","cwd":"/Users/Florian/dev/epotek/microservices/backend","root":"/Users/Florian/dev/epotek/microservices/backend","plugins":[{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/Impersonate/ImpersonatePage/ImpersonatePage.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/core/components/Impersonate/ImpersonatePage/ImpersonatePage.jsx"}},"code":"module.export({\n  impersonate: () => impersonate\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 2);\nlet impersonateUser;\nmodule.link(\"../../../api/methods\", {\n  impersonateUser(v) {\n    impersonateUser = v;\n  }\n\n}, 3);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nconst impersonate = (_ref) => {\n  let {\n    userId,\n    authToken,\n    history\n  } = _ref;\n  impersonateUser.run({\n    userId,\n    authToken\n  }).then((_ref2) => {\n    let {\n      emails\n    } = _ref2;\n    Meteor.connection.setUserId(userId);\n    module.dynamicImport(\"../../../utils/notification\").then((_ref3) => {\n      let {\n        default: notification\n      } = _ref3;\n      notification.success({\n        message: React.createElement(\"span\", {\n          id: \"impersonation-success-message\"\n        }, \"Yay\"),\n        description: \"Actuellement connect\\xE9 comme \".concat(emails[0].address),\n        duration: 5\n      });\n    });\n\n    if (history) {\n      history.push('/');\n    }\n  }).then(() => {\n    if (Meteor.isDevelopment) {\n      sessionStorage.setItem('dev_impersonate_userId', userId);\n      sessionStorage.setItem('dev_impersonate_authToken', authToken);\n    }\n  });\n};\n\nclass ImpersonatePage extends Component {\n  constructor() {\n    super(...arguments);\n\n    _defineProperty(this, \"componentDidMount\", () => {\n      const {\n        location,\n        history\n      } = this.props;\n      const paramsQuery = new URLSearchParams(location.search);\n      const userId = paramsQuery.get('userId');\n      const authToken = paramsQuery.get('authToken');\n      impersonate({\n        userId,\n        authToken,\n        history\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"section\", {\n      className: \"impersonate-page\"\n    }, \"Impersonating...\");\n  }\n\n}\n\n_defineProperty(ImpersonatePage, \"propTypes\", {\n  history: PropTypes.object.isRequired,\n  location: PropTypes.object.isRequired\n});\n\nmodule.exportDefault(ImpersonatePage);","map":{"version":3,"sources":["imports/core/components/Impersonate/ImpersonatePage/ImpersonatePage.jsx"],"names":["impersonate","history","impersonateUser","authToken","emails","Meteor","default","notification","message","description","duration","sessionStorage","ImpersonatePage","PropTypes","location","isRequired","paramsQuery","userId","render"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOO,MAAMA,WAAW,GAAG,UAAoC;AAAA,MAAnC;AAAA,IAAA,MAAA;AAAA,IAAA,SAAA;AAAqBC,IAAAA;AAArB,GAAmC;AAC7DC,EAAAA,eAAe,CAAfA,GAAAA,CACO;AAAA,IAAA,MAAA;AAAUC,IAAAA;AAAV,GADPD,EAAAA,IAAAA,CAEQ,WAAgB;AAAA,QAAf;AAAEE,MAAAA;AAAF,KAAe;AACpBC,IAAAA,MAAM,CAANA,UAAAA,CAAAA,SAAAA,CAAAA,MAAAA;AACA,yBAAA,6BAAA,EAAA,IAAA,CAA2C,WAA+B;AAAA,UAA9B;AAAEC,QAAAA,OAAO,EAAEC;AAAX,OAA8B;AACxEA,MAAAA,YAAY,CAAZA,OAAAA,CAAqB;AACnBC,QAAAA,OAAO,EAAE;AAAM,UAAA,EAAA,EADI;AACV,iBADU;AAEnBC,QAAAA,WAAW,2CAAiCL,MAAM,CAANA,CAAM,CAANA,CAFzB,OAER,CAFQ;AAGnBM,QAAAA,QAAQ,EAAE;AAHS,OAArBH;AADF,KAAA;;AAOA,QAAA,OAAA,EAAa;AACXN,MAAAA,OAAO,CAAPA,IAAAA,CAAAA,GAAAA;AACD;AAbLC,GAAAA,EAAAA,IAAAA,CAeQ,MAAM;AACV,QAAIG,MAAM,CAAV,aAAA,EAA0B;AACxBM,MAAAA,cAAc,CAAdA,OAAAA,CAAAA,wBAAAA,EAAAA,MAAAA;AACAA,MAAAA,cAAc,CAAdA,OAAAA,CAAAA,2BAAAA,EAAAA,SAAAA;AACD;AAnBLT,GAAAA;AADK,CAAA;;AAwBP,MAAA,eAAA,SAAA,SAAA,CAAwC;AAAA,EAAA,WAAA,GAAA;AAAA,UAAA,YAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,mBAAA,EAMlB,MAAM;AACxB,YAAM;AAAA,QAAA,QAAA;AAAYD,QAAAA;AAAZ,UAAwB,KAA9B,KAAA;AACA,YAAMe,WAAW,GAAG,IAAA,eAAA,CAAoBF,QAAQ,CAAhD,MAAoB,CAApB;AACA,YAAMG,MAAM,GAAGD,WAAW,CAAXA,GAAAA,CAAf,QAAeA,CAAf;AACA,YAAMb,SAAS,GAAGa,WAAW,CAAXA,GAAAA,CAAlB,WAAkBA,CAAlB;AAEAhB,MAAAA,WAAW,CAAC;AAAA,QAAA,MAAA;AAAA,QAAA,SAAA;AAAqBC,QAAAA;AAArB,OAAD,CAAXD;AAZoC,KAAA,CAAA;AAAA;;AAetCkB,EAAAA,MAAM,GAAG;AACP,WAAO;AAAS,MAAA,SAAA,EAAhB;AAAO,0BAAP;AACD;;AAjBqC;;gBAAlCN,e,eACe;AACjBX,EAAAA,OAAO,EAAEY,SAAS,CAATA,MAAAA,CADQ,UAAA;AAEjBC,EAAAA,QAAQ,EAAED,SAAS,CAATA,MAAAA,CAAiBE;AAFV,C;;qBAmBrB,e","sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { impersonateUser } from '../../../api/methods';\n\nexport const impersonate = ({ userId, authToken, history }) => {\n  impersonateUser\n    .run({ userId, authToken })\n    .then(({ emails }) => {\n      Meteor.connection.setUserId(userId);\n      import('../../../utils/notification').then(({ default: notification }) => {\n        notification.success({\n          message: <span id=\"impersonation-success-message\">Yay</span>,\n          description: `Actuellement connecté comme ${emails[0].address}`,\n          duration: 5,\n        });\n      });\n      if (history) {\n        history.push('/');\n      }\n    })\n    .then(() => {\n      if (Meteor.isDevelopment) {\n        sessionStorage.setItem('dev_impersonate_userId', userId);\n        sessionStorage.setItem('dev_impersonate_authToken', authToken);\n      }\n    });\n};\n\nclass ImpersonatePage extends Component {\n  static propTypes = {\n    history: PropTypes.object.isRequired,\n    location: PropTypes.object.isRequired,\n  };\n\n  componentDidMount = () => {\n    const { location, history } = this.props;\n    const paramsQuery = new URLSearchParams(location.search);\n    const userId = paramsQuery.get('userId');\n    const authToken = paramsQuery.get('authToken');\n\n    impersonate({ userId, authToken, history });\n  };\n\n  render() {\n    return <section className=\"impersonate-page\">Impersonating...</section>;\n  }\n}\n\nexport default ImpersonatePage;\n"]},"sourceType":"script","hash":"5228261327ffa28f2067b3ddf1df1591f9b51117"}
