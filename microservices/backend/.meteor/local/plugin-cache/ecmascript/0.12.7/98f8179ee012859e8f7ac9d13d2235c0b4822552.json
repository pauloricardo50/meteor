{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/Florian/dev/epotek/microservices/backend/imports/core/api/loans/schemas/LoanSchema.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties",["flow",{}],"jsx",["flow",{}],["flow",{}],"objectRestSpread","objectRestSpread","dynamicImport","asyncGenerators","classProperties","classPrivateProperties"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.x86_64"},"sourceFileName":"imports/core/api/loans/schemas/LoanSchema.js","filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/api/loans/schemas/LoanSchema.js","inputSourceMap":{"version":3,"sources":["imports/core/api/loans/schemas/LoanSchema.js"],"names":["SimpleSchema","createdAt","updatedAt","contactsSchema","additionalDocuments","documentsField","cacheField","LOAN_STATUS","LOAN_VERIFICATION_STATUS","PURCHASE_TYPE","OWNER","CANTONS","STEPS","APPLICATION_TYPES","LOAN_CATEGORIES","RESIDENCE_TYPE","StructureSchema","promotionSchema","borrowerIdsSchema","propertyIdsSchema","previousLoanTranchesSchema","maxPropertyValueSchema","LoanSchema","userId","type","String","optional","status","defaultValue","LEAD","allowedValues","Object","values","general","blackbox","name","unique","regEx","adminValidation","userFormsEnabled","Boolean","structures","Array","selectedStructure","verificationStatus","NONE","uniforms","displayEmpty","purchaseType","ACQUISITION","residenceType","canton","keys","currentOwner","FIRST","futureOwner","otherOwner","enableOffers","previousLender","customName","applicationType","SIMPLE","placeholder","revenueLinks","userCache","step","SOLVENCY","displayWelcomeScreen","shareSolvency","documents","anonymous","referralId","category","STANDARD","adminNote","lendersCache","tasksCache","financedPromotionLink","simpleBorrowersForm"],"mappings":"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","sourcesContent":["// @flow\nimport SimpleSchema from 'simpl-schema';\n\nimport {\n  createdAt,\n  updatedAt,\n  contactsSchema,\n  additionalDocuments,\n  documentsField,\n  cacheField,\n} from '../../helpers/sharedSchemas';\nimport {\n  LOAN_STATUS,\n  LOAN_VERIFICATION_STATUS,\n  PURCHASE_TYPE,\n  OWNER,\n  CANTONS,\n  STEPS,\n  APPLICATION_TYPES,\n  LOAN_CATEGORIES,\n} from '../loanConstants';\nimport { RESIDENCE_TYPE } from '../../constants';\nimport StructureSchema from './StructureSchema';\nimport promotionSchema from './promotionSchema';\nimport {\n  borrowerIdsSchema,\n  propertyIdsSchema,\n  previousLoanTranchesSchema,\n  maxPropertyValueSchema,\n} from './otherSchemas';\n\nconst LoanSchema = new SimpleSchema({\n  userId: {\n    type: String,\n    optional: true,\n  },\n  createdAt,\n  updatedAt,\n  status: {\n    type: String,\n    defaultValue: LOAN_STATUS.LEAD,\n    allowedValues: Object.values(LOAN_STATUS),\n  },\n  general: { type: Object, optional: true, blackbox: true, defaultValue: {} }, // To be removed once migrations are done\n  name: { type: String, unique: true, regEx: /^\\d{2}-\\d{4}$/ },\n  adminValidation: { type: Object, defaultValue: {}, blackbox: true },\n  userFormsEnabled: { type: Boolean, defaultValue: true, optional: true },\n  structures: { type: Array, defaultValue: [] },\n  'structures.$': StructureSchema,\n  selectedStructure: { type: String, optional: true },\n  verificationStatus: {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(LOAN_VERIFICATION_STATUS),\n    defaultValue: LOAN_VERIFICATION_STATUS.NONE,\n    uniforms: { displayEmpty: false },\n  },\n  purchaseType: {\n    type: String,\n    defaultValue: PURCHASE_TYPE.ACQUISITION,\n    allowedValues: Object.values(PURCHASE_TYPE),\n    uniforms: { displayEmpty: false },\n  },\n  residenceType: {\n    type: String,\n    allowedValues: Object.values(RESIDENCE_TYPE),\n    optional: true,\n    uniforms: { displayEmpty: false },\n  },\n  canton: {\n    type: String,\n    optional: true,\n    allowedValues: Object.keys(CANTONS),\n  },\n  currentOwner: {\n    type: String,\n    defaultValue: OWNER.FIRST,\n    allowedValues: Object.values(OWNER),\n  },\n  futureOwner: {\n    type: String,\n    defaultValue: OWNER.FIRST,\n    allowedValues: Object.values(OWNER),\n  },\n  otherOwner: {\n    type: String,\n    optional: true,\n  },\n  enableOffers: { type: Boolean, optional: true, defaultValue: false },\n  previousLender: { type: String, optional: true },\n  customName: { type: String, optional: true },\n  applicationType: {\n    type: String,\n    allowedValues: Object.values(APPLICATION_TYPES),\n    defaultValue: APPLICATION_TYPES.SIMPLE,\n    uniforms: { placeholder: null },\n  },\n  ...promotionSchema,\n  ...borrowerIdsSchema,\n  ...propertyIdsSchema,\n  ...contactsSchema,\n  ...previousLoanTranchesSchema,\n  ...additionalDocuments([]),\n  revenueLinks: { type: Array, optional: true },\n  'revenueLinks.$': String,\n  userCache: cacheField,\n  step: {\n    type: String,\n    defaultValue: STEPS.SOLVENCY,\n    allowedValues: Object.values(STEPS),\n    uniforms: { placeholder: '' },\n  },\n  displayWelcomeScreen: {\n    type: Boolean,\n    defaultValue: true,\n    optional: true,\n  },\n  ...maxPropertyValueSchema,\n  shareSolvency: { type: Boolean, optional: true },\n  documents: documentsField,\n  anonymous: { type: Boolean, optional: true, defaultValue: false },\n  referralId: { type: String, optional: true },\n  category: {\n    type: String,\n    defaultValue: LOAN_CATEGORIES.STANDARD,\n    allowedValues: Object.values(LOAN_CATEGORIES),\n    uniforms: { placeholder: null },\n  },\n  adminNote: {\n    type: String,\n    optional: true,\n  },\n  lendersCache: { type: Array, optional: true },\n  'lendersCache.$': cacheField,\n  tasksCache: { type: Array, optional: true },\n  'tasksCache.$': cacheField,\n  financedPromotionLink: { type: Object, optional: true },\n  'financedPromotionLink._id': { type: String, optional: true },\n  simpleBorrowersForm: { type: Boolean, defaultValue: true },\n});\n\nexport default LoanSchema;\n"]},"passPerPreset":false,"envName":"development","cwd":"/Users/Florian/dev/epotek/microservices/backend","root":"/Users/Florian/dev/epotek/microservices/backend","plugins":[{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}}],"presets":[],"generatorOpts":{"filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/api/loans/schemas/LoanSchema.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/core/api/loans/schemas/LoanSchema.js"}},"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\nlet createdAt, updatedAt, contactsSchema, additionalDocuments, documentsField, cacheField;\nmodule.link(\"../../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  },\n\n  contactsSchema(v) {\n    contactsSchema = v;\n  },\n\n  additionalDocuments(v) {\n    additionalDocuments = v;\n  },\n\n  documentsField(v) {\n    documentsField = v;\n  },\n\n  cacheField(v) {\n    cacheField = v;\n  }\n\n}, 1);\nlet LOAN_STATUS, LOAN_VERIFICATION_STATUS, PURCHASE_TYPE, OWNER, CANTONS, STEPS, APPLICATION_TYPES, LOAN_CATEGORIES;\nmodule.link(\"../loanConstants\", {\n  LOAN_STATUS(v) {\n    LOAN_STATUS = v;\n  },\n\n  LOAN_VERIFICATION_STATUS(v) {\n    LOAN_VERIFICATION_STATUS = v;\n  },\n\n  PURCHASE_TYPE(v) {\n    PURCHASE_TYPE = v;\n  },\n\n  OWNER(v) {\n    OWNER = v;\n  },\n\n  CANTONS(v) {\n    CANTONS = v;\n  },\n\n  STEPS(v) {\n    STEPS = v;\n  },\n\n  APPLICATION_TYPES(v) {\n    APPLICATION_TYPES = v;\n  },\n\n  LOAN_CATEGORIES(v) {\n    LOAN_CATEGORIES = v;\n  }\n\n}, 2);\nlet RESIDENCE_TYPE;\nmodule.link(\"../../constants\", {\n  RESIDENCE_TYPE(v) {\n    RESIDENCE_TYPE = v;\n  }\n\n}, 3);\nlet StructureSchema;\nmodule.link(\"./StructureSchema\", {\n  default(v) {\n    StructureSchema = v;\n  }\n\n}, 4);\nlet promotionSchema;\nmodule.link(\"./promotionSchema\", {\n  default(v) {\n    promotionSchema = v;\n  }\n\n}, 5);\nlet borrowerIdsSchema, propertyIdsSchema, previousLoanTranchesSchema, maxPropertyValueSchema;\nmodule.link(\"./otherSchemas\", {\n  borrowerIdsSchema(v) {\n    borrowerIdsSchema = v;\n  },\n\n  propertyIdsSchema(v) {\n    propertyIdsSchema = v;\n  },\n\n  previousLoanTranchesSchema(v) {\n    previousLoanTranchesSchema = v;\n  },\n\n  maxPropertyValueSchema(v) {\n    maxPropertyValueSchema = v;\n  }\n\n}, 6);\nconst LoanSchema = new SimpleSchema((0, _objectSpread2.default)({\n  userId: {\n    type: String,\n    optional: true\n  },\n  createdAt,\n  updatedAt,\n  status: {\n    type: String,\n    defaultValue: LOAN_STATUS.LEAD,\n    allowedValues: Object.values(LOAN_STATUS)\n  },\n  general: {\n    type: Object,\n    optional: true,\n    blackbox: true,\n    defaultValue: {}\n  },\n  // To be removed once migrations are done\n  name: {\n    type: String,\n    unique: true,\n    regEx: /^\\d{2}-\\d{4}$/\n  },\n  adminValidation: {\n    type: Object,\n    defaultValue: {},\n    blackbox: true\n  },\n  userFormsEnabled: {\n    type: Boolean,\n    defaultValue: true,\n    optional: true\n  },\n  structures: {\n    type: Array,\n    defaultValue: []\n  },\n  'structures.$': StructureSchema,\n  selectedStructure: {\n    type: String,\n    optional: true\n  },\n  verificationStatus: {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(LOAN_VERIFICATION_STATUS),\n    defaultValue: LOAN_VERIFICATION_STATUS.NONE,\n    uniforms: {\n      displayEmpty: false\n    }\n  },\n  purchaseType: {\n    type: String,\n    defaultValue: PURCHASE_TYPE.ACQUISITION,\n    allowedValues: Object.values(PURCHASE_TYPE),\n    uniforms: {\n      displayEmpty: false\n    }\n  },\n  residenceType: {\n    type: String,\n    allowedValues: Object.values(RESIDENCE_TYPE),\n    optional: true,\n    uniforms: {\n      displayEmpty: false\n    }\n  },\n  canton: {\n    type: String,\n    optional: true,\n    allowedValues: Object.keys(CANTONS)\n  },\n  currentOwner: {\n    type: String,\n    defaultValue: OWNER.FIRST,\n    allowedValues: Object.values(OWNER)\n  },\n  futureOwner: {\n    type: String,\n    defaultValue: OWNER.FIRST,\n    allowedValues: Object.values(OWNER)\n  },\n  otherOwner: {\n    type: String,\n    optional: true\n  },\n  enableOffers: {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  previousLender: {\n    type: String,\n    optional: true\n  },\n  customName: {\n    type: String,\n    optional: true\n  },\n  applicationType: {\n    type: String,\n    allowedValues: Object.values(APPLICATION_TYPES),\n    defaultValue: APPLICATION_TYPES.SIMPLE,\n    uniforms: {\n      placeholder: null\n    }\n  }\n}, promotionSchema, borrowerIdsSchema, propertyIdsSchema, contactsSchema, previousLoanTranchesSchema, additionalDocuments([]), {\n  revenueLinks: {\n    type: Array,\n    optional: true\n  },\n  'revenueLinks.$': String,\n  userCache: cacheField,\n  step: {\n    type: String,\n    defaultValue: STEPS.SOLVENCY,\n    allowedValues: Object.values(STEPS),\n    uniforms: {\n      placeholder: ''\n    }\n  },\n  displayWelcomeScreen: {\n    type: Boolean,\n    defaultValue: true,\n    optional: true\n  }\n}, maxPropertyValueSchema, {\n  shareSolvency: {\n    type: Boolean,\n    optional: true\n  },\n  documents: documentsField,\n  anonymous: {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  referralId: {\n    type: String,\n    optional: true\n  },\n  category: {\n    type: String,\n    defaultValue: LOAN_CATEGORIES.STANDARD,\n    allowedValues: Object.values(LOAN_CATEGORIES),\n    uniforms: {\n      placeholder: null\n    }\n  },\n  adminNote: {\n    type: String,\n    optional: true\n  },\n  lendersCache: {\n    type: Array,\n    optional: true\n  },\n  'lendersCache.$': cacheField,\n  tasksCache: {\n    type: Array,\n    optional: true\n  },\n  'tasksCache.$': cacheField,\n  financedPromotionLink: {\n    type: Object,\n    optional: true\n  },\n  'financedPromotionLink._id': {\n    type: String,\n    optional: true\n  },\n  simpleBorrowersForm: {\n    type: Boolean,\n    defaultValue: true\n  }\n}));\nmodule.exportDefault(LoanSchema);","map":{"version":3,"sources":["imports/core/api/loans/schemas/LoanSchema.js"],"names":["LoanSchema","userId","type","optional","status","defaultValue","LOAN_STATUS","allowedValues","Object","general","blackbox","name","unique","regEx","adminValidation","userFormsEnabled","structures","selectedStructure","verificationStatus","LOAN_VERIFICATION_STATUS","uniforms","displayEmpty","purchaseType","PURCHASE_TYPE","residenceType","canton","currentOwner","OWNER","futureOwner","otherOwner","enableOffers","previousLender","customName","applicationType","APPLICATION_TYPES","placeholder","additionalDocuments","revenueLinks","userCache","step","STEPS","displayWelcomeScreen","shareSolvency","documents","anonymous","referralId","category","LOAN_CATEGORIES","adminNote","lendersCache","tasksCache","financedPromotionLink","simpleBorrowersForm"],"mappings":"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","sourcesContent":["// @flow\nimport SimpleSchema from 'simpl-schema';\n\nimport {\n  createdAt,\n  updatedAt,\n  contactsSchema,\n  additionalDocuments,\n  documentsField,\n  cacheField,\n} from '../../helpers/sharedSchemas';\nimport {\n  LOAN_STATUS,\n  LOAN_VERIFICATION_STATUS,\n  PURCHASE_TYPE,\n  OWNER,\n  CANTONS,\n  STEPS,\n  APPLICATION_TYPES,\n  LOAN_CATEGORIES,\n} from '../loanConstants';\nimport { RESIDENCE_TYPE } from '../../constants';\nimport StructureSchema from './StructureSchema';\nimport promotionSchema from './promotionSchema';\nimport {\n  borrowerIdsSchema,\n  propertyIdsSchema,\n  previousLoanTranchesSchema,\n  maxPropertyValueSchema,\n} from './otherSchemas';\n\nconst LoanSchema = new SimpleSchema({\n  userId: {\n    type: String,\n    optional: true,\n  },\n  createdAt,\n  updatedAt,\n  status: {\n    type: String,\n    defaultValue: LOAN_STATUS.LEAD,\n    allowedValues: Object.values(LOAN_STATUS),\n  },\n  general: { type: Object, optional: true, blackbox: true, defaultValue: {} }, // To be removed once migrations are done\n  name: { type: String, unique: true, regEx: /^\\d{2}-\\d{4}$/ },\n  adminValidation: { type: Object, defaultValue: {}, blackbox: true },\n  userFormsEnabled: { type: Boolean, defaultValue: true, optional: true },\n  structures: { type: Array, defaultValue: [] },\n  'structures.$': StructureSchema,\n  selectedStructure: { type: String, optional: true },\n  verificationStatus: {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(LOAN_VERIFICATION_STATUS),\n    defaultValue: LOAN_VERIFICATION_STATUS.NONE,\n    uniforms: { displayEmpty: false },\n  },\n  purchaseType: {\n    type: String,\n    defaultValue: PURCHASE_TYPE.ACQUISITION,\n    allowedValues: Object.values(PURCHASE_TYPE),\n    uniforms: { displayEmpty: false },\n  },\n  residenceType: {\n    type: String,\n    allowedValues: Object.values(RESIDENCE_TYPE),\n    optional: true,\n    uniforms: { displayEmpty: false },\n  },\n  canton: {\n    type: String,\n    optional: true,\n    allowedValues: Object.keys(CANTONS),\n  },\n  currentOwner: {\n    type: String,\n    defaultValue: OWNER.FIRST,\n    allowedValues: Object.values(OWNER),\n  },\n  futureOwner: {\n    type: String,\n    defaultValue: OWNER.FIRST,\n    allowedValues: Object.values(OWNER),\n  },\n  otherOwner: {\n    type: String,\n    optional: true,\n  },\n  enableOffers: { type: Boolean, optional: true, defaultValue: false },\n  previousLender: { type: String, optional: true },\n  customName: { type: String, optional: true },\n  applicationType: {\n    type: String,\n    allowedValues: Object.values(APPLICATION_TYPES),\n    defaultValue: APPLICATION_TYPES.SIMPLE,\n    uniforms: { placeholder: null },\n  },\n  ...promotionSchema,\n  ...borrowerIdsSchema,\n  ...propertyIdsSchema,\n  ...contactsSchema,\n  ...previousLoanTranchesSchema,\n  ...additionalDocuments([]),\n  revenueLinks: { type: Array, optional: true },\n  'revenueLinks.$': String,\n  userCache: cacheField,\n  step: {\n    type: String,\n    defaultValue: STEPS.SOLVENCY,\n    allowedValues: Object.values(STEPS),\n    uniforms: { placeholder: '' },\n  },\n  displayWelcomeScreen: {\n    type: Boolean,\n    defaultValue: true,\n    optional: true,\n  },\n  ...maxPropertyValueSchema,\n  shareSolvency: { type: Boolean, optional: true },\n  documents: documentsField,\n  anonymous: { type: Boolean, optional: true, defaultValue: false },\n  referralId: { type: String, optional: true },\n  category: {\n    type: String,\n    defaultValue: LOAN_CATEGORIES.STANDARD,\n    allowedValues: Object.values(LOAN_CATEGORIES),\n    uniforms: { placeholder: null },\n  },\n  adminNote: {\n    type: String,\n    optional: true,\n  },\n  lendersCache: { type: Array, optional: true },\n  'lendersCache.$': cacheField,\n  tasksCache: { type: Array, optional: true },\n  'tasksCache.$': cacheField,\n  financedPromotionLink: { type: Object, optional: true },\n  'financedPromotionLink._id': { type: String, optional: true },\n  simpleBorrowersForm: { type: Boolean, defaultValue: true },\n});\n\nexport default LoanSchema;\n"]},"sourceType":"script","hash":"98f8179ee012859e8f7ac9d13d2235c0b4822552"}
