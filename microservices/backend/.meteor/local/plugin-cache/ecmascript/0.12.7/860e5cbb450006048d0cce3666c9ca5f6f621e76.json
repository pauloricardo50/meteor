{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/Florian/dev/epotek/microservices/backend/imports/core/api/promotionLots/server/methods.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties",["flow",{}],"jsx",["flow",{}],["flow",{}],"objectRestSpread","objectRestSpread","dynamicImport","asyncGenerators","classProperties","classPrivateProperties"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.x86_64"},"sourceFileName":"imports/core/api/promotionLots/server/methods.js","filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/api/promotionLots/server/methods.js","inputSourceMap":{"version":3,"sources":["imports/core/api/promotionLots/server/methods.js"],"names":["SecurityService","PromotionLotService","promotionLotInsert","promotionLotUpdate","promotionLotRemove","addLotToPromotionLot","removeLotLink","bookPromotionLot","cancelPromotionLotBooking","sellPromotionLot","setHandler","userId","promotionLot","promotionId","promotions","isAllowedToAddLots","insert","promotionLotId","object","isAllowedToModifyPromotionLot","update","isAllowedToRemovePromotionLot","remove","params","loanId","isAllowedToBookLotToCustomer","isAllowedToCancelLotBooking","isAllowedToSellLotToCustomer"],"mappings":"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","sourcesContent":["import SecurityService from '../../security';\nimport PromotionLotService from './PromotionLotService';\nimport {\n  promotionLotInsert,\n  promotionLotUpdate,\n  promotionLotRemove,\n  addLotToPromotionLot,\n  removeLotLink,\n  bookPromotionLot,\n  cancelPromotionLotBooking,\n  sellPromotionLot,\n} from '../methodDefinitions';\n\npromotionLotInsert.setHandler(({ userId }, { promotionLot, promotionId }) => {\n  SecurityService.promotions.isAllowedToAddLots({ promotionId, userId });\n  return PromotionLotService.insert({ promotionLot, promotionId });\n});\n\npromotionLotUpdate.setHandler(({ userId }, { promotionLotId, object }) => {\n  SecurityService.promotions.isAllowedToModifyPromotionLot({\n    promotionLotId,\n    userId,\n  });\n  return PromotionLotService.update({ promotionLotId, object });\n});\n\npromotionLotRemove.setHandler(({ userId }, { promotionLotId }) => {\n  SecurityService.promotions.isAllowedToRemovePromotionLot({\n    promotionLotId,\n    userId,\n  });\n  return PromotionLotService.remove(promotionLotId);\n});\n\naddLotToPromotionLot.setHandler(({ userId }, params) => {\n  SecurityService.promotions.isAllowedToModifyPromotionLot({\n    ...params,\n    userId,\n  });\n  return PromotionLotService.addLotToPromotionLot(params);\n});\n\nremoveLotLink.setHandler(({ userId }, params) => {\n  SecurityService.promotions.isAllowedToModifyPromotionLot({\n    ...params,\n    userId,\n  });\n  return PromotionLotService.removeLotLink(params);\n});\n\nbookPromotionLot.setHandler(({ userId }, params) => {\n  const { promotionLotId, loanId } = params;\n  SecurityService.promotions.isAllowedToBookLotToCustomer({\n    promotionLotId,\n    loanId,\n    userId,\n  });\n  return PromotionLotService.bookPromotionLot(params);\n});\n\ncancelPromotionLotBooking.setHandler(({ userId }, params) => {\n  const { promotionLotId } = params;\n  SecurityService.promotions.isAllowedToCancelLotBooking({\n    promotionLotId,\n    userId,\n  });\n  return PromotionLotService.cancelPromotionLotBooking(params);\n});\n\nsellPromotionLot.setHandler(({ userId }, params) => {\n  const { promotionLotId } = params;\n  SecurityService.promotions.isAllowedToSellLotToCustomer({\n    promotionLotId,\n    userId,\n  });\n  return PromotionLotService.sellPromotionLot(params);\n});\n"]},"passPerPreset":false,"envName":"development","cwd":"/Users/Florian/dev/epotek/microservices/backend","root":"/Users/Florian/dev/epotek/microservices/backend","plugins":[{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}}],"presets":[],"generatorOpts":{"filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/api/promotionLots/server/methods.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/core/api/promotionLots/server/methods.js"}},"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet SecurityService;\nmodule.link(\"../../security\", {\n  default(v) {\n    SecurityService = v;\n  }\n\n}, 0);\nlet PromotionLotService;\nmodule.link(\"./PromotionLotService\", {\n  default(v) {\n    PromotionLotService = v;\n  }\n\n}, 1);\nlet promotionLotInsert, promotionLotUpdate, promotionLotRemove, addLotToPromotionLot, removeLotLink, bookPromotionLot, cancelPromotionLotBooking, sellPromotionLot;\nmodule.link(\"../methodDefinitions\", {\n  promotionLotInsert(v) {\n    promotionLotInsert = v;\n  },\n\n  promotionLotUpdate(v) {\n    promotionLotUpdate = v;\n  },\n\n  promotionLotRemove(v) {\n    promotionLotRemove = v;\n  },\n\n  addLotToPromotionLot(v) {\n    addLotToPromotionLot = v;\n  },\n\n  removeLotLink(v) {\n    removeLotLink = v;\n  },\n\n  bookPromotionLot(v) {\n    bookPromotionLot = v;\n  },\n\n  cancelPromotionLotBooking(v) {\n    cancelPromotionLotBooking = v;\n  },\n\n  sellPromotionLot(v) {\n    sellPromotionLot = v;\n  }\n\n}, 2);\npromotionLotInsert.setHandler(({\n  userId\n}, {\n  promotionLot,\n  promotionId\n}) => {\n  SecurityService.promotions.isAllowedToAddLots({\n    promotionId,\n    userId\n  });\n  return PromotionLotService.insert({\n    promotionLot,\n    promotionId\n  });\n});\npromotionLotUpdate.setHandler(({\n  userId\n}, {\n  promotionLotId,\n  object\n}) => {\n  SecurityService.promotions.isAllowedToModifyPromotionLot({\n    promotionLotId,\n    userId\n  });\n  return PromotionLotService.update({\n    promotionLotId,\n    object\n  });\n});\npromotionLotRemove.setHandler(({\n  userId\n}, {\n  promotionLotId\n}) => {\n  SecurityService.promotions.isAllowedToRemovePromotionLot({\n    promotionLotId,\n    userId\n  });\n  return PromotionLotService.remove(promotionLotId);\n});\naddLotToPromotionLot.setHandler(({\n  userId\n}, params) => {\n  SecurityService.promotions.isAllowedToModifyPromotionLot((0, _objectSpread2.default)({}, params, {\n    userId\n  }));\n  return PromotionLotService.addLotToPromotionLot(params);\n});\nremoveLotLink.setHandler(({\n  userId\n}, params) => {\n  SecurityService.promotions.isAllowedToModifyPromotionLot((0, _objectSpread2.default)({}, params, {\n    userId\n  }));\n  return PromotionLotService.removeLotLink(params);\n});\nbookPromotionLot.setHandler(({\n  userId\n}, params) => {\n  const {\n    promotionLotId,\n    loanId\n  } = params;\n  SecurityService.promotions.isAllowedToBookLotToCustomer({\n    promotionLotId,\n    loanId,\n    userId\n  });\n  return PromotionLotService.bookPromotionLot(params);\n});\ncancelPromotionLotBooking.setHandler(({\n  userId\n}, params) => {\n  const {\n    promotionLotId\n  } = params;\n  SecurityService.promotions.isAllowedToCancelLotBooking({\n    promotionLotId,\n    userId\n  });\n  return PromotionLotService.cancelPromotionLotBooking(params);\n});\nsellPromotionLot.setHandler(({\n  userId\n}, params) => {\n  const {\n    promotionLotId\n  } = params;\n  SecurityService.promotions.isAllowedToSellLotToCustomer({\n    promotionLotId,\n    userId\n  });\n  return PromotionLotService.sellPromotionLot(params);\n});","map":{"version":3,"sources":["imports/core/api/promotionLots/server/methods.js"],"names":["promotionLotInsert","userId","promotionId","SecurityService","promotionLotUpdate","object","promotionLotRemove","promotionLotId","PromotionLotService","addLotToPromotionLot","removeLotLink","bookPromotionLot","loanId","cancelPromotionLotBooking","sellPromotionLot"],"mappings":"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","sourcesContent":["import SecurityService from '../../security';\nimport PromotionLotService from './PromotionLotService';\nimport {\n  promotionLotInsert,\n  promotionLotUpdate,\n  promotionLotRemove,\n  addLotToPromotionLot,\n  removeLotLink,\n  bookPromotionLot,\n  cancelPromotionLotBooking,\n  sellPromotionLot,\n} from '../methodDefinitions';\n\npromotionLotInsert.setHandler(({ userId }, { promotionLot, promotionId }) => {\n  SecurityService.promotions.isAllowedToAddLots({ promotionId, userId });\n  return PromotionLotService.insert({ promotionLot, promotionId });\n});\n\npromotionLotUpdate.setHandler(({ userId }, { promotionLotId, object }) => {\n  SecurityService.promotions.isAllowedToModifyPromotionLot({\n    promotionLotId,\n    userId,\n  });\n  return PromotionLotService.update({ promotionLotId, object });\n});\n\npromotionLotRemove.setHandler(({ userId }, { promotionLotId }) => {\n  SecurityService.promotions.isAllowedToRemovePromotionLot({\n    promotionLotId,\n    userId,\n  });\n  return PromotionLotService.remove(promotionLotId);\n});\n\naddLotToPromotionLot.setHandler(({ userId }, params) => {\n  SecurityService.promotions.isAllowedToModifyPromotionLot({\n    ...params,\n    userId,\n  });\n  return PromotionLotService.addLotToPromotionLot(params);\n});\n\nremoveLotLink.setHandler(({ userId }, params) => {\n  SecurityService.promotions.isAllowedToModifyPromotionLot({\n    ...params,\n    userId,\n  });\n  return PromotionLotService.removeLotLink(params);\n});\n\nbookPromotionLot.setHandler(({ userId }, params) => {\n  const { promotionLotId, loanId } = params;\n  SecurityService.promotions.isAllowedToBookLotToCustomer({\n    promotionLotId,\n    loanId,\n    userId,\n  });\n  return PromotionLotService.bookPromotionLot(params);\n});\n\ncancelPromotionLotBooking.setHandler(({ userId }, params) => {\n  const { promotionLotId } = params;\n  SecurityService.promotions.isAllowedToCancelLotBooking({\n    promotionLotId,\n    userId,\n  });\n  return PromotionLotService.cancelPromotionLotBooking(params);\n});\n\nsellPromotionLot.setHandler(({ userId }, params) => {\n  const { promotionLotId } = params;\n  SecurityService.promotions.isAllowedToSellLotToCustomer({\n    promotionLotId,\n    userId,\n  });\n  return PromotionLotService.sellPromotionLot(params);\n});\n"]},"sourceType":"script","hash":"860e5cbb450006048d0cce3666c9ca5f6f621e76"}
