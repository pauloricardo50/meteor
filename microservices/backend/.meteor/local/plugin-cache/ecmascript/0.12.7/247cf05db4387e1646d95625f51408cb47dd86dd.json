{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/Florian/dev/epotek/microservices/backend/imports/core/utils/testHelpers/getMountedComponent.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties",["flow",{}],"dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"imports/core/utils/testHelpers/getMountedComponent.jsx","filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/utils/testHelpers/getMountedComponent.jsx","inputSourceMap":{"version":3,"sources":["imports/core/utils/testHelpers/getMountedComponent.jsx"],"names":["Meteor","React","MemoryRouter","IntlProvider","intlShape","mount","getUserLocale","getFormats","messages","customMount","Component","props","withRouter","withStore","customMountData","intlProvider","locale","formats","defaultLocale","intl","getChildContext","testComponent","cloneElement","history","location","pathname","configureStore","require","default","Provider","mockStore","initialState","store","mountedComponent","context","childContextTypes","getMountedComponent","getData","reset","undefined","isServer","global","document","window","jsdom","JSDOM","defaultView","performance","now"],"mappings":"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","sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport React from 'react';\nimport { MemoryRouter } from 'react-router-dom';\nimport { IntlProvider, intlShape } from 'react-intl';\n\nimport { mount } from './enzyme';\nimport { getUserLocale, getFormats } from '../localization';\nimport messages from '../../lang/fr.json';\n\n// Mounts a component for testing, and wraps it around everything it needs\nconst customMount = ({ Component, props = {}, withRouter, withStore }) => {\n  const customMountData = {};\n  const intlProvider = new IntlProvider({\n    locale: getUserLocale(),\n    messages,\n    formats: getFormats(),\n    defaultLocale: 'fr',\n  });\n  const { intl } = intlProvider.getChildContext();\n\n  let testComponent = <Component {...props} />;\n\n  if (withRouter) {\n    testComponent = (\n      <MemoryRouter>\n        {React.cloneElement(testComponent, {\n          history: { location: { pathname: '' } },\n        })}\n      </MemoryRouter>\n    );\n  }\n\n  if (withStore) {\n    const configureStore = require('redux-mock-store').default;\n    const { Provider } = require('react-redux');\n    const mockStore = configureStore();\n    const initialState = withStore;\n    const store = mockStore(initialState);\n    testComponent = <Provider store={store}>{testComponent}</Provider>;\n    customMountData.store = store;\n  }\n\n  return {\n    mountedComponent: mount(testComponent, {\n      context: { intl },\n      childContextTypes: { intl: intlShape },\n    }),\n    customMountData,\n  };\n};\n\n/**\n * getMountedComponent - Returns a mounted component with all the required\n * wrappers for testing\n *\n * @param {object} Component  A React component\n * @param {object} props      optional props to be passed into the component\n * @param {boolean} withRouter Wraps the component with a mocked router if this\n * component uses any of the react-router-dom components, like Link or NavLink\n *\n * @return {object} A mounted component, ready for testing with Enzyme\n */\nconst getMountedComponent = ({ Component, props, withRouter, withStore }) => {\n  if (!getMountedComponent.mountedComponent) {\n    const { mountedComponent, customMountData } = customMount({\n      Component,\n      props,\n      withRouter,\n      withStore,\n    });\n    getMountedComponent.getData = () => customMountData;\n    getMountedComponent.mountedComponent = mountedComponent;\n  }\n  return getMountedComponent.mountedComponent;\n};\n\n/**\n * Unknown - Resets the component, to be called in beforeEach hooks\n *\n * @return {type} undefined\n */\ngetMountedComponent.reset = () => {\n  getMountedComponent.mountedComponent = undefined;\n  if (Meteor.isServer) {\n    global.document = undefined;\n    global.window = undefined;\n    const jsdom = require('jsdom');\n    const { JSDOM } = jsdom;\n    const { document } = new JSDOM('<!doctype html><html><body></body></html>').window;\n    global.document = document;\n    global.window = document.defaultView;\n    // Do this to avoid an annoying bug resulting of the mix of jsdom and kadira\n    // https://github.com/kadirahq/node-eventloop-monitor/blob/master/lib/index.js:73\n    // https://github.com/jsdom/jsdom/blob/master/lib/jsdom/living/hr-time/Performance-impl.js:13\n    global.window.performance.now = () => {};\n  }\n};\n\nexport default getMountedComponent;\n"]},"passPerPreset":false,"envName":"development","cwd":"/Users/Florian/dev/epotek/microservices/backend","root":"/Users/Florian/dev/epotek/microservices/backend","plugins":[{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/utils/testHelpers/getMountedComponent.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/core/utils/testHelpers/getMountedComponent.jsx"}},"code":"let Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet MemoryRouter;\nmodule.link(\"react-router-dom\", {\n  MemoryRouter(v) {\n    MemoryRouter = v;\n  }\n\n}, 2);\nlet IntlProvider, intlShape;\nmodule.link(\"react-intl\", {\n  IntlProvider(v) {\n    IntlProvider = v;\n  },\n\n  intlShape(v) {\n    intlShape = v;\n  }\n\n}, 3);\nlet mount;\nmodule.link(\"./enzyme\", {\n  mount(v) {\n    mount = v;\n  }\n\n}, 4);\nlet getUserLocale, getFormats;\nmodule.link(\"../localization\", {\n  getUserLocale(v) {\n    getUserLocale = v;\n  },\n\n  getFormats(v) {\n    getFormats = v;\n  }\n\n}, 5);\nlet messages;\nmodule.link(\"../../lang/fr.json\", {\n  default(v) {\n    messages = v;\n  }\n\n}, 6);\n\n// Mounts a component for testing, and wraps it around everything it needs\nconst customMount = (_ref) => {\n  let {\n    Component,\n    props = {},\n    withRouter,\n    withStore\n  } = _ref;\n  const customMountData = {};\n  const intlProvider = new IntlProvider({\n    locale: getUserLocale(),\n    messages,\n    formats: getFormats(),\n    defaultLocale: 'fr'\n  });\n  const {\n    intl\n  } = intlProvider.getChildContext();\n  let testComponent = React.createElement(Component, props);\n\n  if (withRouter) {\n    testComponent = React.createElement(MemoryRouter, null, React.cloneElement(testComponent, {\n      history: {\n        location: {\n          pathname: ''\n        }\n      }\n    }));\n  }\n\n  if (withStore) {\n    const configureStore = require('redux-mock-store').default;\n\n    const {\n      Provider\n    } = require('react-redux');\n\n    const mockStore = configureStore();\n    const initialState = withStore;\n    const store = mockStore(initialState);\n    testComponent = React.createElement(Provider, {\n      store: store\n    }, testComponent);\n    customMountData.store = store;\n  }\n\n  return {\n    mountedComponent: mount(testComponent, {\n      context: {\n        intl\n      },\n      childContextTypes: {\n        intl: intlShape\n      }\n    }),\n    customMountData\n  };\n};\n/**\n * getMountedComponent - Returns a mounted component with all the required\n * wrappers for testing\n *\n * @param {object} Component  A React component\n * @param {object} props      optional props to be passed into the component\n * @param {boolean} withRouter Wraps the component with a mocked router if this\n * component uses any of the react-router-dom components, like Link or NavLink\n *\n * @return {object} A mounted component, ready for testing with Enzyme\n */\n\n\nconst getMountedComponent = (_ref2) => {\n  let {\n    Component,\n    props,\n    withRouter,\n    withStore\n  } = _ref2;\n\n  if (!getMountedComponent.mountedComponent) {\n    const {\n      mountedComponent,\n      customMountData\n    } = customMount({\n      Component,\n      props,\n      withRouter,\n      withStore\n    });\n\n    getMountedComponent.getData = () => customMountData;\n\n    getMountedComponent.mountedComponent = mountedComponent;\n  }\n\n  return getMountedComponent.mountedComponent;\n};\n/**\n * Unknown - Resets the component, to be called in beforeEach hooks\n *\n * @return {type} undefined\n */\n\n\ngetMountedComponent.reset = () => {\n  getMountedComponent.mountedComponent = undefined;\n\n  if (Meteor.isServer) {\n    global.document = undefined;\n    global.window = undefined;\n\n    const jsdom = require('jsdom');\n\n    const {\n      JSDOM\n    } = jsdom;\n    const {\n      document\n    } = new JSDOM('<!doctype html><html><body></body></html>').window;\n    global.document = document;\n    global.window = document.defaultView; // Do this to avoid an annoying bug resulting of the mix of jsdom and kadira\n    // https://github.com/kadirahq/node-eventloop-monitor/blob/master/lib/index.js:73\n    // https://github.com/jsdom/jsdom/blob/master/lib/jsdom/living/hr-time/Performance-impl.js:13\n\n    global.window.performance.now = () => {};\n  }\n};\n\nmodule.exportDefault(getMountedComponent);","map":{"version":3,"sources":["imports/core/utils/testHelpers/getMountedComponent.jsx"],"names":["customMount","props","withStore","customMountData","intlProvider","locale","getUserLocale","formats","getFormats","defaultLocale","intl","testComponent","history","location","pathname","configureStore","require","Provider","mockStore","initialState","store","mountedComponent","mount","context","childContextTypes","intlShape","getMountedComponent","Meteor","global","jsdom","JSDOM","document"],"mappings":"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","sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport React from 'react';\nimport { MemoryRouter } from 'react-router-dom';\nimport { IntlProvider, intlShape } from 'react-intl';\n\nimport { mount } from './enzyme';\nimport { getUserLocale, getFormats } from '../localization';\nimport messages from '../../lang/fr.json';\n\n// Mounts a component for testing, and wraps it around everything it needs\nconst customMount = ({ Component, props = {}, withRouter, withStore }) => {\n  const customMountData = {};\n  const intlProvider = new IntlProvider({\n    locale: getUserLocale(),\n    messages,\n    formats: getFormats(),\n    defaultLocale: 'fr',\n  });\n  const { intl } = intlProvider.getChildContext();\n\n  let testComponent = <Component {...props} />;\n\n  if (withRouter) {\n    testComponent = (\n      <MemoryRouter>\n        {React.cloneElement(testComponent, {\n          history: { location: { pathname: '' } },\n        })}\n      </MemoryRouter>\n    );\n  }\n\n  if (withStore) {\n    const configureStore = require('redux-mock-store').default;\n    const { Provider } = require('react-redux');\n    const mockStore = configureStore();\n    const initialState = withStore;\n    const store = mockStore(initialState);\n    testComponent = <Provider store={store}>{testComponent}</Provider>;\n    customMountData.store = store;\n  }\n\n  return {\n    mountedComponent: mount(testComponent, {\n      context: { intl },\n      childContextTypes: { intl: intlShape },\n    }),\n    customMountData,\n  };\n};\n\n/**\n * getMountedComponent - Returns a mounted component with all the required\n * wrappers for testing\n *\n * @param {object} Component  A React component\n * @param {object} props      optional props to be passed into the component\n * @param {boolean} withRouter Wraps the component with a mocked router if this\n * component uses any of the react-router-dom components, like Link or NavLink\n *\n * @return {object} A mounted component, ready for testing with Enzyme\n */\nconst getMountedComponent = ({ Component, props, withRouter, withStore }) => {\n  if (!getMountedComponent.mountedComponent) {\n    const { mountedComponent, customMountData } = customMount({\n      Component,\n      props,\n      withRouter,\n      withStore,\n    });\n    getMountedComponent.getData = () => customMountData;\n    getMountedComponent.mountedComponent = mountedComponent;\n  }\n  return getMountedComponent.mountedComponent;\n};\n\n/**\n * Unknown - Resets the component, to be called in beforeEach hooks\n *\n * @return {type} undefined\n */\ngetMountedComponent.reset = () => {\n  getMountedComponent.mountedComponent = undefined;\n  if (Meteor.isServer) {\n    global.document = undefined;\n    global.window = undefined;\n    const jsdom = require('jsdom');\n    const { JSDOM } = jsdom;\n    const { document } = new JSDOM('<!doctype html><html><body></body></html>').window;\n    global.document = document;\n    global.window = document.defaultView;\n    // Do this to avoid an annoying bug resulting of the mix of jsdom and kadira\n    // https://github.com/kadirahq/node-eventloop-monitor/blob/master/lib/index.js:73\n    // https://github.com/jsdom/jsdom/blob/master/lib/jsdom/living/hr-time/Performance-impl.js:13\n    global.window.performance.now = () => {};\n  }\n};\n\nexport default getMountedComponent;\n"]},"sourceType":"script","hash":"247cf05db4387e1646d95625f51408cb47dd86dd"}
