{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/Impersonate/ImpersonatePage/ImpersonatePage.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties",["flow",{}],"dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"imports/core/components/Impersonate/ImpersonatePage/ImpersonatePage.jsx","filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/Impersonate/ImpersonatePage/ImpersonatePage.jsx","inputSourceMap":{"version":3,"sources":["imports/core/components/Impersonate/ImpersonatePage/ImpersonatePage.jsx"],"names":["Meteor","React","Component","PropTypes","impersonateUser","impersonate","userId","authToken","history","run","then","emails","connection","setUserId","default","notification","success","message","description","address","duration","push","isDevelopment","sessionStorage","setItem","ImpersonatePage","location","props","paramsQuery","URLSearchParams","search","get","render","object","isRequired"],"mappings":";;AAAA,SAASA,MAAT,QAAuB,eAAvB;AAEA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEA,SAASC,eAAT;AAEA,OAAO,MAAMC,WAAW,GAAG,CAAC;AAAEC,EAAAA,MAAF;AAAUC,EAAAA,SAAV;AAAqBC,EAAAA;AAArB,CAAD,KAAoC;AAC7DJ,EAAAA,eAAe,CACZK,GADH,CACO;AAAEH,IAAAA,MAAF;AAAUC,IAAAA;AAAV,GADP,EAEGG,IAFH,CAEQ,CAAC;AAAEC,IAAAA;AAAF,GAAD,KAAgB;AACpBX,IAAAA,MAAM,CAACY,UAAP,CAAkBC,SAAlB,CAA4BP,MAA5B;AACA,0CAAsCI,IAAtC,CAA2C,CAAC;AAAEI,MAAAA,OAAO,EAAEC;AAAX,KAAD,KAA+B;AACxEA,MAAAA,YAAY,CAACC,OAAb,CAAqB;AACnBC,QAAAA,OAAO,EAAE,CAAC,IAAD,CAAM,GAAG,+BAAT,CAAyC,GAAG,EAAE,IAAF,CADlC;AAEnBC,QAAAA,WAAW,EAAG,+BAA8BP,MAAM,CAAC,CAAD,CAAN,CAAUQ,OAAQ,EAF3C;AAGnBC,QAAAA,QAAQ,EAAE;AAHS,OAArB;AAKD,KAND;;AAOA,QAAIZ,OAAJ,EAAa;AACXA,MAAAA,OAAO,CAACa,IAAR,CAAa,GAAb;AACD;AACF,GAdH,EAeGX,IAfH,CAeQ,MAAM;AACV,QAAIV,MAAM,CAACsB,aAAX,EAA0B;AACxBC,MAAAA,cAAc,CAACC,OAAf,CAAuB,wBAAvB,EAAiDlB,MAAjD;AACAiB,MAAAA,cAAc,CAACC,OAAf,CAAuB,2BAAvB,EAAoDjB,SAApD;AACD;AACF,GApBH;AAqBD,CAtBM;;AAwBP,MAAMkB,eAAN,SAA8BvB,SAA9B,CAAwC;AAAA;AAAA;;AAAA,+CAMlB,MAAM;AACxB,YAAM;AAAEwB,QAAAA,QAAF;AAAYlB,QAAAA;AAAZ,UAAwB,KAAKmB,KAAnC;AACA,YAAMC,WAAW,GAAG,IAAIC,eAAJ,CAAoBH,QAAQ,CAACI,MAA7B,CAApB;AACA,YAAMxB,MAAM,GAAGsB,WAAW,CAACG,GAAZ,CAAgB,QAAhB,CAAf;AACA,YAAMxB,SAAS,GAAGqB,WAAW,CAACG,GAAZ,CAAgB,WAAhB,CAAlB;AAEA1B,MAAAA,WAAW,CAAC;AAAEC,QAAAA,MAAF;AAAUC,QAAAA,SAAV;AAAqBC,QAAAA;AAArB,OAAD,CAAX;AACD,KAbqC;AAAA;;AAetCwB,EAAAA,MAAM,GAAG;AACP,WAAO,CAAC,OAAD,CAAS,UAAU,kBAAnB,CAAsC,gBAAgB,EAAE,OAAF,CAA7D;AACD;;AAjBqC;;gBAAlCP,e,eACe;AACjBjB,EAAAA,OAAO,EAAEL,SAAS,CAAC8B,MAAV,CAAiBC,UADT;AAEjBR,EAAAA,QAAQ,EAAEvB,SAAS,CAAC8B,MAAV,CAAiBC;AAFV,C;;AAmBrB,eAAeT,eAAf","sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { impersonateUser } from '../../../api/methods';\n\nexport const impersonate = ({ userId, authToken, history }) => {\n  impersonateUser\n    .run({ userId, authToken })\n    .then(({ emails }) => {\n      Meteor.connection.setUserId(userId);\n      import('../../../utils/notification').then(({ default: notification }) => {\n        notification.success({\n          message: <span id=\"impersonation-success-message\">Yay</span>,\n          description: `Actuellement connecté comme ${emails[0].address}`,\n          duration: 5,\n        });\n      });\n      if (history) {\n        history.push('/');\n      }\n    })\n    .then(() => {\n      if (Meteor.isDevelopment) {\n        sessionStorage.setItem('dev_impersonate_userId', userId);\n        sessionStorage.setItem('dev_impersonate_authToken', authToken);\n      }\n    });\n};\n\nclass ImpersonatePage extends Component {\n  static propTypes = {\n    history: PropTypes.object.isRequired,\n    location: PropTypes.object.isRequired,\n  };\n\n  componentDidMount = () => {\n    const { location, history } = this.props;\n    const paramsQuery = new URLSearchParams(location.search);\n    const userId = paramsQuery.get('userId');\n    const authToken = paramsQuery.get('authToken');\n\n    impersonate({ userId, authToken, history });\n  };\n\n  render() {\n    return <section className=\"impersonate-page\">Impersonating...</section>;\n  }\n}\n\nexport default ImpersonatePage;\n"]},"passPerPreset":false,"envName":"development","cwd":"/Users/Florian/dev/epotek/microservices/backend","root":"/Users/Florian/dev/epotek/microservices/backend","plugins":[{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/Impersonate/ImpersonatePage/ImpersonatePage.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/core/components/Impersonate/ImpersonatePage/ImpersonatePage.jsx"}},"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nmodule.export({\n  impersonate: function () {\n    return impersonate;\n  }\n});\nvar Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\nvar React, Component;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  }\n}, 1);\nvar PropTypes;\nmodule.link(\"prop-types\", {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 2);\nvar impersonateUser;\nmodule.link(\"../../../api/methods\", {\n  impersonateUser: function (v) {\n    impersonateUser = v;\n  }\n}, 3);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar impersonate = function (_ref) {\n  var userId = _ref.userId,\n      authToken = _ref.authToken,\n      history = _ref.history;\n  impersonateUser.run({\n    userId: userId,\n    authToken: authToken\n  }).then(function (_ref2) {\n    var emails = _ref2.emails;\n    Meteor.connection.setUserId(userId);\n    module.dynamicImport(\"../../../utils/notification\").then(function (_ref3) {\n      var notification = _ref3.default;\n      notification.success({\n        message: React.createElement(\"span\", {\n          id: \"impersonation-success-message\"\n        }, \"Yay\"),\n        description: \"Actuellement connect\\xE9 comme \" + emails[0].address,\n        duration: 5\n      });\n    });\n\n    if (history) {\n      history.push('/');\n    }\n  }).then(function () {\n    if (Meteor.isDevelopment) {\n      sessionStorage.setItem('dev_impersonate_userId', userId);\n      sessionStorage.setItem('dev_impersonate_authToken', authToken);\n    }\n  });\n};\n\nvar ImpersonatePage =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inheritsLoose2.default)(ImpersonatePage, _Component);\n\n  function ImpersonatePage() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _defineProperty((0, _assertThisInitialized2.default)(_this), \"componentDidMount\", function () {\n      var _this$props = _this.props,\n          location = _this$props.location,\n          history = _this$props.history;\n      var paramsQuery = new URLSearchParams(location.search);\n      var userId = paramsQuery.get('userId');\n      var authToken = paramsQuery.get('authToken');\n      impersonate({\n        userId: userId,\n        authToken: authToken,\n        history: history\n      });\n    });\n\n    return _this;\n  }\n\n  var _proto = ImpersonatePage.prototype;\n\n  _proto.render = function () {\n    function render() {\n      return React.createElement(\"section\", {\n        className: \"impersonate-page\"\n      }, \"Impersonating...\");\n    }\n\n    return render;\n  }();\n\n  return ImpersonatePage;\n}(Component);\n\n_defineProperty(ImpersonatePage, \"propTypes\", {\n  history: PropTypes.object.isRequired,\n  location: PropTypes.object.isRequired\n});\n\nmodule.exportDefault(ImpersonatePage);","map":{"version":3,"sources":["imports/core/components/Impersonate/ImpersonatePage/ImpersonatePage.jsx"],"names":["impersonate","history","impersonateUser","userId","authToken","emails","Meteor","default","notification","message","description","duration","sessionStorage","ImpersonatePage","PropTypes","location","isRequired","paramsQuery","render"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOO,IAAMA,WAAW,GAAG,gBAAoC;AAAA,MAAnC,MAAmC,QAAnC,MAAmC;AAAA,MAAnC,SAAmC,QAAnC,SAAmC;AAAA,MAAdC,OAAc,QAAdA,OAAc;AAC7DC,EAAAA,eAAe,CAAfA,GAAAA,CACO;AAAEC,IAAAA,MAAF,EAAEA,MAAF;AAAUC,IAAAA,SAAAA,EAAAA;AAAV,GADPF,EAAAA,IAAAA,CAEQ,iBAAgB;AAAA,QAAbG,MAAa,SAAbA,MAAa;AACpBC,IAAAA,MAAM,CAANA,UAAAA,CAAAA,SAAAA,CAAAA,MAAAA;AACA,yBAAA,6BAAA,EAAA,IAAA,CAA2C,iBAA+B;AAAA,UAAnBE,YAAmB,SAA5BD,OAA4B;AACxEC,MAAAA,YAAY,CAAZA,OAAAA,CAAqB;AACnBC,QAAAA,OAAO,EAAE;AAAM,UAAA,EAAA,EADI;AACV,iBADU;AAEnBC,QAAAA,WAAW,sCAAiCL,MAAM,CAANA,CAAM,CAANA,CAFzB,OAAA;AAGnBM,QAAAA,QAAQ,EAAE;AAHS,OAArBH;AADF,KAAA;;AAOA,QAAA,OAAA,EAAa;AACXP,MAAAA,OAAO,CAAPA,IAAAA,CAAAA,GAAAA;AACD;AAbLC,GAAAA,EAAAA,IAAAA,CAeQ,YAAM;AACV,QAAII,MAAM,CAAV,aAAA,EAA0B;AACxBM,MAAAA,cAAc,CAAdA,OAAAA,CAAAA,wBAAAA,EAAAA,MAAAA;AACAA,MAAAA,cAAc,CAAdA,OAAAA,CAAAA,2BAAAA,EAAAA,SAAAA;AACD;AAnBLV,GAAAA;AADK,CAAA;;IAwBP,e;;;;;AAAwC,6BAAA;AAAA;;AAAA,sCAAA,IAAA;AAAA,MAAA,IAAA;AAAA;;AAAA,4DAAA,IAAA;;AAAA,IAAA,eAAA,8CAAA,mBAAA,EAMlB,YAAM;AAAA,wBACM,MAA9B,KADwB;AAAA,UAClB,QADkB,eAClB,QADkB;AAAA,UACND,OADM,eACNA,OADM;AAExB,UAAMgB,WAAW,GAAG,IAAA,eAAA,CAAoBF,QAAQ,CAAhD,MAAoB,CAApB;AACA,UAAMZ,MAAM,GAAGc,WAAW,CAAXA,GAAAA,CAAf,QAAeA,CAAf;AACA,UAAMb,SAAS,GAAGa,WAAW,CAAXA,GAAAA,CAAlB,WAAkBA,CAAlB;AAEAjB,MAAAA,WAAW,CAAC;AAAEG,QAAAA,MAAF,EAAEA,MAAF;AAAUC,QAAAA,SAAV,EAAUA,SAAV;AAAqBH,QAAAA,OAAAA,EAAAA;AAArB,OAAD,CAAXD;AAZoC,KAAA,CAAA;;AAAA;AAAA;;;;SAetCkB,M;AAAAA,sBAAS;AACP,aAAO;AAAS,QAAA,SAAA,EAAhB;AAAO,4BAAP;AACD;;;;;;EAjBH,S;;gBAAML,e,eACe;AACjBZ,EAAAA,OAAO,EAAEa,SAAS,CAATA,MAAAA,CADQ,UAAA;AAEjBC,EAAAA,QAAQ,EAAED,SAAS,CAATA,MAAAA,CAAiBE;AAFV,C;;qBAmBrB,e","sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { impersonateUser } from '../../../api/methods';\n\nexport const impersonate = ({ userId, authToken, history }) => {\n  impersonateUser\n    .run({ userId, authToken })\n    .then(({ emails }) => {\n      Meteor.connection.setUserId(userId);\n      import('../../../utils/notification').then(({ default: notification }) => {\n        notification.success({\n          message: <span id=\"impersonation-success-message\">Yay</span>,\n          description: `Actuellement connecté comme ${emails[0].address}`,\n          duration: 5,\n        });\n      });\n      if (history) {\n        history.push('/');\n      }\n    })\n    .then(() => {\n      if (Meteor.isDevelopment) {\n        sessionStorage.setItem('dev_impersonate_userId', userId);\n        sessionStorage.setItem('dev_impersonate_authToken', authToken);\n      }\n    });\n};\n\nclass ImpersonatePage extends Component {\n  static propTypes = {\n    history: PropTypes.object.isRequired,\n    location: PropTypes.object.isRequired,\n  };\n\n  componentDidMount = () => {\n    const { location, history } = this.props;\n    const paramsQuery = new URLSearchParams(location.search);\n    const userId = paramsQuery.get('userId');\n    const authToken = paramsQuery.get('authToken');\n\n    impersonate({ userId, authToken, history });\n  };\n\n  render() {\n    return <section className=\"impersonate-page\">Impersonating...</section>;\n  }\n}\n\nexport default ImpersonatePage;\n"]},"sourceType":"script","hash":"e669d4c37975fce6c07b15c5bd2bc2a0a45aa705"}
