{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/ModalManager/ModalManager.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties",["flow",{}],"dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"imports/core/components/ModalManager/ModalManager.jsx","filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/ModalManager/ModalManager.jsx","inputSourceMap":{"version":3,"sources":["imports/core/components/ModalManager/ModalManager.jsx"],"names":["React","useReducer","Dialog","ModalManagerContext","DialogComponents","ModalManagerProps","initialState","activeModal","id","openFirstModal","state","payload","modals","firstModal","length","Error","newState","reduce","obj","modal","index","modalId","reducer","action","type","Array","isArray","removedModal","pendingModals","Object","keys","nextModal","Math","min","returnValue","ModalManager","children","dispatch","title","actions","description","content","dialogProps","openModal","closeModal","closeAll"],"mappings":"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","sourcesContent":["// @flow\nimport React, { useReducer } from 'react';\nimport Dialog from '@material-ui/core/Dialog';\n\nimport ModalManagerContext from './ModalManagerContext';\nimport DialogComponents from './DialogComponents';\n\ntype ModalManagerProps = {};\n\nconst initialState = { activeModal: null };\n\nlet id = 0;\n\nconst openFirstModal = (state, { payload: modals }) => {\n  let firstModal;\n\n  if (modals.length === 0) {\n    throw new Error('Cannot pass an empty array to ModalManager');\n  }\n\n  const newState = modals.reduce((obj, modal, index) => {\n    const modalId = id;\n\n    if (index === 0) {\n      firstModal = modalId;\n    }\n\n    id += 1;\n    return { ...obj, [modalId]: modal };\n  }, state);\n\n  return { ...newState, activeModal: firstModal };\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n  case 'OPEN_MODAL': {\n    if (Array.isArray(action.payload)) {\n      return openFirstModal(state, action);\n    }\n\n    const modalId = id;\n    id += 1;\n    if (state.activeModal === null) {\n      return { ...state, [modalId]: action.payload, activeModal: modalId };\n    }\n    return { ...state, [modalId]: action.payload };\n  }\n  case 'CLOSE_MODAL': {\n    const {\n      [action.payload.activeModal]: removedModal,\n      activeModal,\n      ...newState\n    } = state;\n    const pendingModals = Object.keys(newState);\n    if (pendingModals.length > 0) {\n      const nextModal = Math.min(...pendingModals);\n      return {\n        ...newState,\n        activeModal: nextModal,\n        [nextModal]: {\n          ...newState[nextModal],\n          returnValue: action.payload.returnValue,\n        },\n      };\n    }\n    return { ...newState, activeModal: null };\n  }\n  case 'CLOSE_ALL': {\n    return initialState;\n  }\n\n  default:\n    return state;\n  }\n};\n\nconst ModalManager = ({ children }: ModalManagerProps) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const { activeModal } = state;\n  const { title, actions, description, content, ...dialogProps } = state[activeModal] || {};\n\n  const openModal = (payload) => {\n    dispatch({ type: 'OPEN_MODAL', payload });\n  };\n\n  const closeModal = returnValue =>\n    dispatch({ type: 'CLOSE_MODAL', payload: { activeModal, returnValue } });\n\n  const closeAll = () => dispatch({ type: 'CLOSE_ALL' });\n\n  return (\n    <ModalManagerContext.Provider value={{ openModal }}>\n      {children}\n      <Dialog {...dialogProps} open={activeModal !== null} onClose={closeModal}>\n        <DialogComponents\n          returnValue={state[activeModal] && state[activeModal].returnValue}\n          dialogContent={state[activeModal]}\n          closeModal={closeModal}\n          closeAll={closeAll}\n        />\n      </Dialog>\n    </ModalManagerContext.Provider>\n  );\n};\n\nexport default ModalManager;\n"]},"passPerPreset":false,"envName":"development","cwd":"/Users/Florian/dev/epotek/microservices/backend","root":"/Users/Florian/dev/epotek/microservices/backend","plugins":[{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/ModalManager/ModalManager.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/core/components/ModalManager/ModalManager.jsx"}},"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _objectSpread6 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return (0, _typeof2.default)(key) === \"symbol\" ? key : String(key); }\n\nfunction _toPrimitive(input, hint) { if ((0, _typeof2.default)(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if ((0, _typeof2.default)(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nvar React, useReducer;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useReducer: function (v) {\n    useReducer = v;\n  }\n}, 0);\nvar Dialog;\nmodule.link(\"@material-ui/core/Dialog\", {\n  \"default\": function (v) {\n    Dialog = v;\n  }\n}, 1);\nvar ModalManagerContext;\nmodule.link(\"./ModalManagerContext\", {\n  \"default\": function (v) {\n    ModalManagerContext = v;\n  }\n}, 2);\nvar DialogComponents;\nmodule.link(\"./DialogComponents\", {\n  \"default\": function (v) {\n    DialogComponents = v;\n  }\n}, 3);\nvar initialState = {\n  activeModal: null\n};\nvar id = 0;\n\nvar openFirstModal = function (state, _ref) {\n  var modals = _ref.payload;\n  var firstModal;\n\n  if (modals.length === 0) {\n    throw new Error('Cannot pass an empty array to ModalManager');\n  }\n\n  var newState = modals.reduce(function (obj, modal, index) {\n    var _objectSpread2;\n\n    var modalId = id;\n\n    if (index === 0) {\n      firstModal = modalId;\n    }\n\n    id += 1;\n    return (0, _objectSpread6.default)({}, obj, (_objectSpread2 = {}, _objectSpread2[modalId] = modal, _objectSpread2));\n  }, state);\n  return (0, _objectSpread6.default)({}, newState, {\n    activeModal: firstModal\n  });\n};\n\nvar reducer = function (state, action) {\n  switch (action.type) {\n    case 'OPEN_MODAL':\n      {\n        var _objectSpread4;\n\n        if (Array.isArray(action.payload)) {\n          return openFirstModal(state, action);\n        }\n\n        var modalId = id;\n        id += 1;\n\n        if (state.activeModal === null) {\n          var _objectSpread3;\n\n          return (0, _objectSpread6.default)({}, state, (_objectSpread3 = {}, _objectSpread3[modalId] = action.payload, _objectSpread3.activeModal = modalId, _objectSpread3));\n        }\n\n        return (0, _objectSpread6.default)({}, state, (_objectSpread4 = {}, _objectSpread4[modalId] = action.payload, _objectSpread4));\n      }\n\n    case 'CLOSE_MODAL':\n      {\n        var removedModal = state[action.payload.activeModal],\n            activeModal = state.activeModal,\n            newState = (0, _objectWithoutProperties2.default)(state, [action.payload.activeModal, \"activeModal\"].map(_toPropertyKey));\n        var pendingModals = Object.keys(newState);\n\n        if (pendingModals.length > 0) {\n          var _objectSpread5;\n\n          var nextModal = Math.min.apply(Math, (0, _toConsumableArray2.default)(pendingModals));\n          return (0, _objectSpread6.default)({}, newState, (_objectSpread5 = {\n            activeModal: nextModal\n          }, _objectSpread5[nextModal] = (0, _objectSpread6.default)({}, newState[nextModal], {\n            returnValue: action.payload.returnValue\n          }), _objectSpread5));\n        }\n\n        return (0, _objectSpread6.default)({}, newState, {\n          activeModal: null\n        });\n      }\n\n    case 'CLOSE_ALL':\n      {\n        return initialState;\n      }\n\n    default:\n      return state;\n  }\n};\n\nvar ModalManager = function (_ref2) {\n  var children = _ref2.children;\n\n  var _useReducer = useReducer(reducer, initialState),\n      _useReducer2 = (0, _slicedToArray2.default)(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var activeModal = state.activeModal;\n\n  var _ref3 = state[activeModal] || {},\n      title = _ref3.title,\n      actions = _ref3.actions,\n      description = _ref3.description,\n      content = _ref3.content,\n      dialogProps = (0, _objectWithoutProperties2.default)(_ref3, [\"title\", \"actions\", \"description\", \"content\"]);\n\n  var openModal = function (payload) {\n    dispatch({\n      type: 'OPEN_MODAL',\n      payload: payload\n    });\n  };\n\n  var closeModal = function (returnValue) {\n    return dispatch({\n      type: 'CLOSE_MODAL',\n      payload: {\n        activeModal: activeModal,\n        returnValue: returnValue\n      }\n    });\n  };\n\n  var closeAll = function () {\n    return dispatch({\n      type: 'CLOSE_ALL'\n    });\n  };\n\n  return React.createElement(ModalManagerContext.Provider, {\n    value: {\n      openModal: openModal\n    }\n  }, children, React.createElement(Dialog, (0, _extends2.default)({}, dialogProps, {\n    open: activeModal !== null,\n    onClose: closeModal\n  }), React.createElement(DialogComponents, {\n    returnValue: state[activeModal] && state[activeModal].returnValue,\n    dialogContent: state[activeModal],\n    closeModal: closeModal,\n    closeAll: closeAll\n  })));\n};\n\nmodule.exportDefault(ModalManager);","map":{"version":3,"sources":["imports/core/components/ModalManager/ModalManager.jsx"],"names":["initialState","activeModal","id","openFirstModal","payload","modals","newState","modalId","index","firstModal","modal","reducer","action","Array","state","pendingModals","Object","nextModal","Math","returnValue","ModalManager","children","useReducer","dialogProps","openModal","dispatch","type","closeModal","closeAll"],"mappings":"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","sourcesContent":["// @flow\nimport React, { useReducer } from 'react';\nimport Dialog from '@material-ui/core/Dialog';\n\nimport ModalManagerContext from './ModalManagerContext';\nimport DialogComponents from './DialogComponents';\n\ntype ModalManagerProps = {};\n\nconst initialState = { activeModal: null };\n\nlet id = 0;\n\nconst openFirstModal = (state, { payload: modals }) => {\n  let firstModal;\n\n  if (modals.length === 0) {\n    throw new Error('Cannot pass an empty array to ModalManager');\n  }\n\n  const newState = modals.reduce((obj, modal, index) => {\n    const modalId = id;\n\n    if (index === 0) {\n      firstModal = modalId;\n    }\n\n    id += 1;\n    return { ...obj, [modalId]: modal };\n  }, state);\n\n  return { ...newState, activeModal: firstModal };\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n  case 'OPEN_MODAL': {\n    if (Array.isArray(action.payload)) {\n      return openFirstModal(state, action);\n    }\n\n    const modalId = id;\n    id += 1;\n    if (state.activeModal === null) {\n      return { ...state, [modalId]: action.payload, activeModal: modalId };\n    }\n    return { ...state, [modalId]: action.payload };\n  }\n  case 'CLOSE_MODAL': {\n    const {\n      [action.payload.activeModal]: removedModal,\n      activeModal,\n      ...newState\n    } = state;\n    const pendingModals = Object.keys(newState);\n    if (pendingModals.length > 0) {\n      const nextModal = Math.min(...pendingModals);\n      return {\n        ...newState,\n        activeModal: nextModal,\n        [nextModal]: {\n          ...newState[nextModal],\n          returnValue: action.payload.returnValue,\n        },\n      };\n    }\n    return { ...newState, activeModal: null };\n  }\n  case 'CLOSE_ALL': {\n    return initialState;\n  }\n\n  default:\n    return state;\n  }\n};\n\nconst ModalManager = ({ children }: ModalManagerProps) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const { activeModal } = state;\n  const { title, actions, description, content, ...dialogProps } = state[activeModal] || {};\n\n  const openModal = (payload) => {\n    dispatch({ type: 'OPEN_MODAL', payload });\n  };\n\n  const closeModal = returnValue =>\n    dispatch({ type: 'CLOSE_MODAL', payload: { activeModal, returnValue } });\n\n  const closeAll = () => dispatch({ type: 'CLOSE_ALL' });\n\n  return (\n    <ModalManagerContext.Provider value={{ openModal }}>\n      {children}\n      <Dialog {...dialogProps} open={activeModal !== null} onClose={closeModal}>\n        <DialogComponents\n          returnValue={state[activeModal] && state[activeModal].returnValue}\n          dialogContent={state[activeModal]}\n          closeModal={closeModal}\n          closeAll={closeAll}\n        />\n      </Dialog>\n    </ModalManagerContext.Provider>\n  );\n};\n\nexport default ModalManager;\n"]},"sourceType":"script","hash":"0499b066af312490957704d4a3b786e0649f497e"}
