{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/StatusLabel/StatusLabel.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties",["flow",{}],"jsx",["flow",{}],["flow",{}],"objectRestSpread","objectRestSpread","dynamicImport","asyncGenerators","classProperties","classPrivateProperties"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.x86_64"},"sourceFileName":"imports/core/components/StatusLabel/StatusLabel.jsx","filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/StatusLabel/StatusLabel.jsx","inputSourceMap":{"version":3,"sources":["imports/core/components/StatusLabel/StatusLabel.jsx"],"names":["React","cx","Tooltip","colors","PROMOTION_STATUS","PROMOTIONS_COLLECTION","PROMOTION_LOTS_COLLECTION","PROMOTION_LOT_STATUS","PROMOTION_LOT_REDUCED_STATUS","TASKS_COLLECTION","TASK_STATUS","LOANS_COLLECTION","LOAN_STATUS","LENDERS_COLLECTION","LENDER_STATUS","PROPERTIES_COLLECTION","PROPERTY_STATUS","REVENUES_COLLECTION","REVENUE_STATUS","COMMISSION_STATUS","T","DropdownMenu","updateDocument","StatusLabelProps","status","collection","suffix","label","Node","color","getStatuses","LEAD","secondary","ONGOING","primary","PENDING","warning","CLOSING","tertiary","BILLING","success","FINALIZED","UNSUCCESSFUL","error","TEST","CANCELLED","FINISHED","OPEN","PREPARATION","AVAILABLE","BOOKED","SOLD","SOLD_TO_ME","BOOKED_FOR_ME","NOT_AVAILABLE","ACTIVE","COMPLETED","TO_BE_CONTACTED","CONTACTED","OFFER_RECEIVED","TO_EXCLUDE","FOR_SALE","EXPECTED","CLOSED","TO_BE_PAID","PAID","Error","getLabel","allowModify","statuses","variant","props","backgroundColor","showTooltip","StatusLabel","docId","additionalActions","Promise","resolve","statusLabel","handleOpen","onClick","Object","keys","map","stat","id","then","run","object"],"mappings":"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","sourcesContent":["// @flow\nimport React from 'react';\nimport cx from 'classnames';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport colors from '../../config/colors';\nimport {\n  PROMOTION_STATUS,\n  PROMOTIONS_COLLECTION,\n  PROMOTION_LOTS_COLLECTION,\n  PROMOTION_LOT_STATUS,\n  PROMOTION_LOT_REDUCED_STATUS,\n  TASKS_COLLECTION,\n  TASK_STATUS,\n  LOANS_COLLECTION,\n  LOAN_STATUS,\n  LENDERS_COLLECTION,\n  LENDER_STATUS,\n  PROPERTIES_COLLECTION,\n  PROPERTY_STATUS,\n  REVENUES_COLLECTION,\n  REVENUE_STATUS,\n  COMMISSION_STATUS,\n} from '../../api/constants';\nimport T from '../Translation';\nimport DropdownMenu from '../DropdownMenu';\nimport { updateDocument } from '../../api/methods/methodDefinitions';\n\ntype StatusLabelProps = {\n  status: string,\n  collection: string,\n  suffix?: string,\n  label: React.Node,\n  color: string,\n};\n\nconst getStatuses = (collection) => {\n  switch (collection) {\n  case LOANS_COLLECTION:\n    return {\n      [LOAN_STATUS.LEAD]: colors.secondary,\n      [LOAN_STATUS.ONGOING]: colors.primary,\n      [LOAN_STATUS.PENDING]: colors.warning,\n      [LOAN_STATUS.CLOSING]: colors.tertiary,\n      [LOAN_STATUS.BILLING]: colors.success,\n      [LOAN_STATUS.FINALIZED]: colors.success,\n      [LOAN_STATUS.UNSUCCESSFUL]: colors.error,\n      [LOAN_STATUS.TEST]: colors.warning,\n    };\n\n  case PROMOTIONS_COLLECTION:\n    return {\n      [PROMOTION_STATUS.CANCELLED]: colors.warning,\n      [PROMOTION_STATUS.FINISHED]: colors.error,\n      [PROMOTION_STATUS.OPEN]: colors.success,\n      [PROMOTION_STATUS.PREPARATION]: colors.primary,\n    };\n\n  case PROMOTION_LOTS_COLLECTION:\n    return {\n      [PROMOTION_LOT_STATUS.AVAILABLE]: colors.success,\n      [PROMOTION_LOT_STATUS.BOOKED]: colors.primary,\n      [PROMOTION_LOT_STATUS.SOLD]: colors.error,\n      [PROMOTION_LOT_REDUCED_STATUS.SOLD_TO_ME]: colors.tertiary,\n      [PROMOTION_LOT_REDUCED_STATUS.BOOKED_FOR_ME]: colors.primary,\n      [PROMOTION_LOT_REDUCED_STATUS.NOT_AVAILABLE]: colors.warning,\n    };\n\n  case TASKS_COLLECTION:\n    return {\n      [TASK_STATUS.ACTIVE]: colors.primary,\n      [TASK_STATUS.COMPLETED]: colors.success,\n      [TASK_STATUS.CANCELLED]: colors.error,\n    };\n\n  case LENDERS_COLLECTION:\n    return {\n      [LENDER_STATUS.TO_BE_CONTACTED]: colors.warning,\n      [LENDER_STATUS.CONTACTED]: colors.primary,\n      [LENDER_STATUS.OFFER_RECEIVED]: colors.success,\n      [LENDER_STATUS.TO_EXCLUDE]: colors.error,\n    };\n\n  case PROPERTIES_COLLECTION:\n    return {\n      [PROPERTY_STATUS.FOR_SALE]: colors.success,\n      [PROPERTY_STATUS.BOOKED]: colors.primary,\n      [PROPERTY_STATUS.SOLD]: colors.error,\n    };\n\n  case REVENUES_COLLECTION:\n    return {\n      [REVENUE_STATUS.EXPECTED]: colors.primary,\n      [REVENUE_STATUS.CLOSED]: colors.success,\n      [COMMISSION_STATUS.TO_BE_PAID]: colors.primary,\n      [COMMISSION_STATUS.PAID]: colors.success,\n    };\n\n  default:\n    throw new Error(`Unknown collection \"${collection}\" in StatusLabel`);\n  }\n};\nconst getLabel = ({\n  allowModify,\n  color,\n  label,\n  status,\n  statuses,\n  suffix,\n  variant,\n}) => {\n  switch (variant) {\n  case 'full':\n    return props => (\n      <span\n        className={cx({ allowModify, 'status-label': true })}\n        style={{ backgroundColor: color || statuses[status] }}\n        {...props}\n      >\n        <span>\n          {label || <T id={`Forms.status.${status}`} />}\n          {suffix}\n        </span>\n      </span>\n    );\n  case 'dot':\n    return ({ showTooltip, ...props }) =>\n      (showTooltip ? (\n        <Tooltip title={label || <T id={`Forms.status.${status}`} />}>\n          <span\n            className={cx({ allowModify, 'status-label-dot': true })}\n            {...props}\n          >\n            <span style={{ backgroundColor: color || statuses[status] }} />\n          </span>\n        </Tooltip>\n      ) : (\n        <span\n          className={cx({ allowModify, 'status-label-dot': true })}\n          {...props}\n        >\n          <span style={{ backgroundColor: color || statuses[status] }} />\n        </span>\n      ));\n\n  default:\n    break;\n  }\n};\n\nconst StatusLabel = ({\n  status,\n  collection,\n  suffix = '',\n  label = null,\n  color = null,\n  allowModify,\n  docId,\n  additionalActions = () => Promise.resolve(),\n  variant = 'full',\n  showTooltip = true,\n}: StatusLabelProps) => {\n  const statuses = getStatuses(collection);\n  const statusLabel = getLabel({\n    allowModify,\n    color,\n    docId,\n    label,\n    status,\n    statuses,\n    suffix,\n    variant,\n  });\n\n  if (allowModify) {\n    return (\n      <DropdownMenu\n        noWrapper\n        renderTrigger={({ handleOpen }) =>\n          statusLabel({ onClick: handleOpen, showTooltip })\n        }\n        options={Object.keys(statuses).map(stat => ({\n          id: stat,\n          label: <T id={`Forms.status.${stat}`} />,\n          onClick: () =>\n            additionalActions(stat, status).then(() =>\n              updateDocument.run({\n                collection,\n                object: { status: stat },\n                docId,\n              })),\n        }))}\n      />\n    );\n  }\n\n  return statusLabel({ showTooltip });\n};\n\nexport default StatusLabel;\n"]},"passPerPreset":false,"envName":"development","cwd":"/Users/Florian/dev/epotek/microservices/backend","root":"/Users/Florian/dev/epotek/microservices/backend","plugins":[{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}}],"presets":[],"generatorOpts":{"filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/StatusLabel/StatusLabel.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/core/components/StatusLabel/StatusLabel.jsx"}},"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet cx;\nmodule.link(\"classnames\", {\n  default(v) {\n    cx = v;\n  }\n\n}, 1);\nlet Tooltip;\nmodule.link(\"@material-ui/core/Tooltip\", {\n  default(v) {\n    Tooltip = v;\n  }\n\n}, 2);\nlet colors;\nmodule.link(\"../../config/colors\", {\n  default(v) {\n    colors = v;\n  }\n\n}, 3);\nlet PROMOTION_STATUS, PROMOTIONS_COLLECTION, PROMOTION_LOTS_COLLECTION, PROMOTION_LOT_STATUS, PROMOTION_LOT_REDUCED_STATUS, TASKS_COLLECTION, TASK_STATUS, LOANS_COLLECTION, LOAN_STATUS, LENDERS_COLLECTION, LENDER_STATUS, PROPERTIES_COLLECTION, PROPERTY_STATUS, REVENUES_COLLECTION, REVENUE_STATUS, COMMISSION_STATUS;\nmodule.link(\"../../api/constants\", {\n  PROMOTION_STATUS(v) {\n    PROMOTION_STATUS = v;\n  },\n\n  PROMOTIONS_COLLECTION(v) {\n    PROMOTIONS_COLLECTION = v;\n  },\n\n  PROMOTION_LOTS_COLLECTION(v) {\n    PROMOTION_LOTS_COLLECTION = v;\n  },\n\n  PROMOTION_LOT_STATUS(v) {\n    PROMOTION_LOT_STATUS = v;\n  },\n\n  PROMOTION_LOT_REDUCED_STATUS(v) {\n    PROMOTION_LOT_REDUCED_STATUS = v;\n  },\n\n  TASKS_COLLECTION(v) {\n    TASKS_COLLECTION = v;\n  },\n\n  TASK_STATUS(v) {\n    TASK_STATUS = v;\n  },\n\n  LOANS_COLLECTION(v) {\n    LOANS_COLLECTION = v;\n  },\n\n  LOAN_STATUS(v) {\n    LOAN_STATUS = v;\n  },\n\n  LENDERS_COLLECTION(v) {\n    LENDERS_COLLECTION = v;\n  },\n\n  LENDER_STATUS(v) {\n    LENDER_STATUS = v;\n  },\n\n  PROPERTIES_COLLECTION(v) {\n    PROPERTIES_COLLECTION = v;\n  },\n\n  PROPERTY_STATUS(v) {\n    PROPERTY_STATUS = v;\n  },\n\n  REVENUES_COLLECTION(v) {\n    REVENUES_COLLECTION = v;\n  },\n\n  REVENUE_STATUS(v) {\n    REVENUE_STATUS = v;\n  },\n\n  COMMISSION_STATUS(v) {\n    COMMISSION_STATUS = v;\n  }\n\n}, 4);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 5);\nlet DropdownMenu;\nmodule.link(\"../DropdownMenu\", {\n  default(v) {\n    DropdownMenu = v;\n  }\n\n}, 6);\nlet updateDocument;\nmodule.link(\"../../api/methods/methodDefinitions\", {\n  updateDocument(v) {\n    updateDocument = v;\n  }\n\n}, 7);\n\nconst getStatuses = collection => {\n  switch (collection) {\n    case LOANS_COLLECTION:\n      return {\n        [LOAN_STATUS.LEAD]: colors.secondary,\n        [LOAN_STATUS.ONGOING]: colors.primary,\n        [LOAN_STATUS.PENDING]: colors.warning,\n        [LOAN_STATUS.CLOSING]: colors.tertiary,\n        [LOAN_STATUS.BILLING]: colors.success,\n        [LOAN_STATUS.FINALIZED]: colors.success,\n        [LOAN_STATUS.UNSUCCESSFUL]: colors.error,\n        [LOAN_STATUS.TEST]: colors.warning\n      };\n\n    case PROMOTIONS_COLLECTION:\n      return {\n        [PROMOTION_STATUS.CANCELLED]: colors.warning,\n        [PROMOTION_STATUS.FINISHED]: colors.error,\n        [PROMOTION_STATUS.OPEN]: colors.success,\n        [PROMOTION_STATUS.PREPARATION]: colors.primary\n      };\n\n    case PROMOTION_LOTS_COLLECTION:\n      return {\n        [PROMOTION_LOT_STATUS.AVAILABLE]: colors.success,\n        [PROMOTION_LOT_STATUS.BOOKED]: colors.primary,\n        [PROMOTION_LOT_STATUS.SOLD]: colors.error,\n        [PROMOTION_LOT_REDUCED_STATUS.SOLD_TO_ME]: colors.tertiary,\n        [PROMOTION_LOT_REDUCED_STATUS.BOOKED_FOR_ME]: colors.primary,\n        [PROMOTION_LOT_REDUCED_STATUS.NOT_AVAILABLE]: colors.warning\n      };\n\n    case TASKS_COLLECTION:\n      return {\n        [TASK_STATUS.ACTIVE]: colors.primary,\n        [TASK_STATUS.COMPLETED]: colors.success,\n        [TASK_STATUS.CANCELLED]: colors.error\n      };\n\n    case LENDERS_COLLECTION:\n      return {\n        [LENDER_STATUS.TO_BE_CONTACTED]: colors.warning,\n        [LENDER_STATUS.CONTACTED]: colors.primary,\n        [LENDER_STATUS.OFFER_RECEIVED]: colors.success,\n        [LENDER_STATUS.TO_EXCLUDE]: colors.error\n      };\n\n    case PROPERTIES_COLLECTION:\n      return {\n        [PROPERTY_STATUS.FOR_SALE]: colors.success,\n        [PROPERTY_STATUS.BOOKED]: colors.primary,\n        [PROPERTY_STATUS.SOLD]: colors.error\n      };\n\n    case REVENUES_COLLECTION:\n      return {\n        [REVENUE_STATUS.EXPECTED]: colors.primary,\n        [REVENUE_STATUS.CLOSED]: colors.success,\n        [COMMISSION_STATUS.TO_BE_PAID]: colors.primary,\n        [COMMISSION_STATUS.PAID]: colors.success\n      };\n\n    default:\n      throw new Error(`Unknown collection \"${collection}\" in StatusLabel`);\n  }\n};\n\nconst getLabel = ({\n  allowModify,\n  color,\n  label,\n  status,\n  statuses,\n  suffix,\n  variant\n}) => {\n  switch (variant) {\n    case 'full':\n      return props => React.createElement(\"span\", (0, _extends2.default)({\n        className: cx({\n          allowModify,\n          'status-label': true\n        }),\n        style: {\n          backgroundColor: color || statuses[status]\n        }\n      }, props), React.createElement(\"span\", null, label || React.createElement(T, {\n        id: `Forms.status.${status}`\n      }), suffix));\n\n    case 'dot':\n      return (_ref) => {\n        let {\n          showTooltip\n        } = _ref,\n            props = (0, _objectWithoutProperties2.default)(_ref, [\"showTooltip\"]);\n        return showTooltip ? React.createElement(Tooltip, {\n          title: label || React.createElement(T, {\n            id: `Forms.status.${status}`\n          })\n        }, React.createElement(\"span\", (0, _extends2.default)({\n          className: cx({\n            allowModify,\n            'status-label-dot': true\n          })\n        }, props), React.createElement(\"span\", {\n          style: {\n            backgroundColor: color || statuses[status]\n          }\n        }))) : React.createElement(\"span\", (0, _extends2.default)({\n          className: cx({\n            allowModify,\n            'status-label-dot': true\n          })\n        }, props), React.createElement(\"span\", {\n          style: {\n            backgroundColor: color || statuses[status]\n          }\n        }));\n      };\n\n    default:\n      break;\n  }\n};\n\nconst StatusLabel = ({\n  status,\n  collection,\n  suffix = '',\n  label = null,\n  color = null,\n  allowModify,\n  docId,\n  additionalActions = () => Promise.resolve(),\n  variant = 'full',\n  showTooltip = true\n}) => {\n  const statuses = getStatuses(collection);\n  const statusLabel = getLabel({\n    allowModify,\n    color,\n    docId,\n    label,\n    status,\n    statuses,\n    suffix,\n    variant\n  });\n\n  if (allowModify) {\n    return React.createElement(DropdownMenu, {\n      noWrapper: true,\n      renderTrigger: ({\n        handleOpen\n      }) => statusLabel({\n        onClick: handleOpen,\n        showTooltip\n      }),\n      options: Object.keys(statuses).map(stat => ({\n        id: stat,\n        label: React.createElement(T, {\n          id: `Forms.status.${stat}`\n        }),\n        onClick: () => additionalActions(stat, status).then(() => updateDocument.run({\n          collection,\n          object: {\n            status: stat\n          },\n          docId\n        }))\n      }))\n    });\n  }\n\n  return statusLabel({\n    showTooltip\n  });\n};\n\nmodule.exportDefault(StatusLabel);","map":{"version":3,"sources":["imports/core/components/StatusLabel/StatusLabel.jsx"],"names":["getStatuses","collection","LOAN_STATUS","colors","warning","PROMOTION_STATUS","primary","PROMOTION_LOT_STATUS","PROMOTION_LOT_REDUCED_STATUS","TASK_STATUS","error","LENDER_STATUS","PROPERTY_STATUS","REVENUE_STATUS","COMMISSION_STATUS","success","getLabel","variant","props","cx","backgroundColor","color","statuses","label","status","showTooltip","StatusLabel","suffix","additionalActions","Promise","statusLabel","handleOpen","onClick","stat","id","object","docId"],"mappings":"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","sourcesContent":["// @flow\nimport React from 'react';\nimport cx from 'classnames';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport colors from '../../config/colors';\nimport {\n  PROMOTION_STATUS,\n  PROMOTIONS_COLLECTION,\n  PROMOTION_LOTS_COLLECTION,\n  PROMOTION_LOT_STATUS,\n  PROMOTION_LOT_REDUCED_STATUS,\n  TASKS_COLLECTION,\n  TASK_STATUS,\n  LOANS_COLLECTION,\n  LOAN_STATUS,\n  LENDERS_COLLECTION,\n  LENDER_STATUS,\n  PROPERTIES_COLLECTION,\n  PROPERTY_STATUS,\n  REVENUES_COLLECTION,\n  REVENUE_STATUS,\n  COMMISSION_STATUS,\n} from '../../api/constants';\nimport T from '../Translation';\nimport DropdownMenu from '../DropdownMenu';\nimport { updateDocument } from '../../api/methods/methodDefinitions';\n\ntype StatusLabelProps = {\n  status: string,\n  collection: string,\n  suffix?: string,\n  label: React.Node,\n  color: string,\n};\n\nconst getStatuses = (collection) => {\n  switch (collection) {\n  case LOANS_COLLECTION:\n    return {\n      [LOAN_STATUS.LEAD]: colors.secondary,\n      [LOAN_STATUS.ONGOING]: colors.primary,\n      [LOAN_STATUS.PENDING]: colors.warning,\n      [LOAN_STATUS.CLOSING]: colors.tertiary,\n      [LOAN_STATUS.BILLING]: colors.success,\n      [LOAN_STATUS.FINALIZED]: colors.success,\n      [LOAN_STATUS.UNSUCCESSFUL]: colors.error,\n      [LOAN_STATUS.TEST]: colors.warning,\n    };\n\n  case PROMOTIONS_COLLECTION:\n    return {\n      [PROMOTION_STATUS.CANCELLED]: colors.warning,\n      [PROMOTION_STATUS.FINISHED]: colors.error,\n      [PROMOTION_STATUS.OPEN]: colors.success,\n      [PROMOTION_STATUS.PREPARATION]: colors.primary,\n    };\n\n  case PROMOTION_LOTS_COLLECTION:\n    return {\n      [PROMOTION_LOT_STATUS.AVAILABLE]: colors.success,\n      [PROMOTION_LOT_STATUS.BOOKED]: colors.primary,\n      [PROMOTION_LOT_STATUS.SOLD]: colors.error,\n      [PROMOTION_LOT_REDUCED_STATUS.SOLD_TO_ME]: colors.tertiary,\n      [PROMOTION_LOT_REDUCED_STATUS.BOOKED_FOR_ME]: colors.primary,\n      [PROMOTION_LOT_REDUCED_STATUS.NOT_AVAILABLE]: colors.warning,\n    };\n\n  case TASKS_COLLECTION:\n    return {\n      [TASK_STATUS.ACTIVE]: colors.primary,\n      [TASK_STATUS.COMPLETED]: colors.success,\n      [TASK_STATUS.CANCELLED]: colors.error,\n    };\n\n  case LENDERS_COLLECTION:\n    return {\n      [LENDER_STATUS.TO_BE_CONTACTED]: colors.warning,\n      [LENDER_STATUS.CONTACTED]: colors.primary,\n      [LENDER_STATUS.OFFER_RECEIVED]: colors.success,\n      [LENDER_STATUS.TO_EXCLUDE]: colors.error,\n    };\n\n  case PROPERTIES_COLLECTION:\n    return {\n      [PROPERTY_STATUS.FOR_SALE]: colors.success,\n      [PROPERTY_STATUS.BOOKED]: colors.primary,\n      [PROPERTY_STATUS.SOLD]: colors.error,\n    };\n\n  case REVENUES_COLLECTION:\n    return {\n      [REVENUE_STATUS.EXPECTED]: colors.primary,\n      [REVENUE_STATUS.CLOSED]: colors.success,\n      [COMMISSION_STATUS.TO_BE_PAID]: colors.primary,\n      [COMMISSION_STATUS.PAID]: colors.success,\n    };\n\n  default:\n    throw new Error(`Unknown collection \"${collection}\" in StatusLabel`);\n  }\n};\nconst getLabel = ({\n  allowModify,\n  color,\n  label,\n  status,\n  statuses,\n  suffix,\n  variant,\n}) => {\n  switch (variant) {\n  case 'full':\n    return props => (\n      <span\n        className={cx({ allowModify, 'status-label': true })}\n        style={{ backgroundColor: color || statuses[status] }}\n        {...props}\n      >\n        <span>\n          {label || <T id={`Forms.status.${status}`} />}\n          {suffix}\n        </span>\n      </span>\n    );\n  case 'dot':\n    return ({ showTooltip, ...props }) =>\n      (showTooltip ? (\n        <Tooltip title={label || <T id={`Forms.status.${status}`} />}>\n          <span\n            className={cx({ allowModify, 'status-label-dot': true })}\n            {...props}\n          >\n            <span style={{ backgroundColor: color || statuses[status] }} />\n          </span>\n        </Tooltip>\n      ) : (\n        <span\n          className={cx({ allowModify, 'status-label-dot': true })}\n          {...props}\n        >\n          <span style={{ backgroundColor: color || statuses[status] }} />\n        </span>\n      ));\n\n  default:\n    break;\n  }\n};\n\nconst StatusLabel = ({\n  status,\n  collection,\n  suffix = '',\n  label = null,\n  color = null,\n  allowModify,\n  docId,\n  additionalActions = () => Promise.resolve(),\n  variant = 'full',\n  showTooltip = true,\n}: StatusLabelProps) => {\n  const statuses = getStatuses(collection);\n  const statusLabel = getLabel({\n    allowModify,\n    color,\n    docId,\n    label,\n    status,\n    statuses,\n    suffix,\n    variant,\n  });\n\n  if (allowModify) {\n    return (\n      <DropdownMenu\n        noWrapper\n        renderTrigger={({ handleOpen }) =>\n          statusLabel({ onClick: handleOpen, showTooltip })\n        }\n        options={Object.keys(statuses).map(stat => ({\n          id: stat,\n          label: <T id={`Forms.status.${stat}`} />,\n          onClick: () =>\n            additionalActions(stat, status).then(() =>\n              updateDocument.run({\n                collection,\n                object: { status: stat },\n                docId,\n              })),\n        }))}\n      />\n    );\n  }\n\n  return statusLabel({ showTooltip });\n};\n\nexport default StatusLabel;\n"]},"sourceType":"script","hash":"8ea3f9828f29a663d8646c428af3384f90ba050d"}
