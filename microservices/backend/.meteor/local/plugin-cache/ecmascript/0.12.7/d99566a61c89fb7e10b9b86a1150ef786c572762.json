{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/Florian/dev/epotek/microservices/backend/imports/core/utils/Calculator/test/classes.spec.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties",["flow",{}],"dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"imports/core/utils/Calculator/test/classes.spec.js","filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/utils/Calculator/test/classes.spec.js","inputSourceMap":{"version":3,"sources":["imports/core/utils/Calculator/test/classes.spec.js"],"names":["expect","compose","memoizeOne","memoizeOneObjectArg","MiddlewareManager","borrowerExtractorMiddleware","precisionMiddleware","RootCalculator","constructor","initializer","add","a","b","returnVarParent","var","return2","parentFunc","childFunc","staticFunc","addClass","SuperClass","withCalc2","increment","setVar","value","withCalc3","multiply","returnVarChild","UberClass","describe","it","MyClass","to","equal","Calc2","Calc","undefined","returnNumber","props","myClass","returnNumber2","memoizeMiddleware","calc","next","memoFunc","args","memo","preMiddleware","postMiddleware","MemoizedClass","count","init","middlewareManager","applyToAllMethods","div","stuff","borrowers","nothing","stringArg","index","loan"],"mappings":"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","sourcesContent":["// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\nimport { compose } from 'recompose';\nimport memoizeOne, { memoizeOneObjectArg } from '../../memoizeOne';\nimport MiddlewareManager from '../../MiddlewareManager';\nimport { borrowerExtractorMiddleware } from '../middleware';\nimport { precisionMiddleware } from '../../FinanceCalculator/financeCalculatorMiddlewares';\n\nclass RootCalculator {\n  constructor() {\n    this.initializer = 2;\n  }\n\n  add(a: number, b: number): number {\n    return a + b;\n  }\n\n  returnVarParent() {\n    return this.var;\n  }\n\n  return2(): number {\n    return 2;\n  }\n\n  parentFunc() {\n    return this.childFunc();\n  }\n\n  static staticFunc() {\n    return 'hi';\n  }\n}\n\nconst addClass = SuperClass => class extends SuperClass {};\n\nconst withCalc2 = (SuperClass = class {}) =>\n  class extends SuperClass {\n    constructor() {\n      super();\n      this.initializer = this.initializer * 2;\n    }\n\n    increment(a: number): number {\n      return a + 1;\n    }\n\n    setVar(value): void {\n      this.var = value;\n    }\n  };\n\nconst withCalc3 = SuperClass =>\n  class extends SuperClass {\n    constructor() {\n      super();\n      this.initializer = this.initializer + 1;\n    }\n\n    multiply(a: number, b: number): number {\n      return a * b;\n    }\n\n    returnVarChild(): void {\n      return this.var;\n    }\n\n    return2(): number {\n      return -2;\n    }\n\n    childFunc() {\n      return 'it works';\n    }\n  };\n\nconst UberClass = compose(\n  withCalc3,\n  withCalc2,\n)(RootCalculator);\n\ndescribe('Class composition', () => {\n  it('extends properly', () => {\n    class MyClass extends RootCalculator {}\n\n    expect(new MyClass().add(1, 2)).to.equal(3);\n  });\n\n  it('combines classes with the mixin', () => {\n    const Calc2 = withCalc2();\n    class MyClass extends addClass(Calc2) {}\n\n    expect(new MyClass().increment(1)).to.equal(2);\n  });\n\n  it('combines multiple classes', () => {\n    class MyClass extends withCalc3(withCalc2(RootCalculator)) {}\n\n    expect(new MyClass().increment(1)).to.equal(2);\n    expect(new MyClass().add(1, 2)).to.equal(3);\n    expect(new MyClass().multiply(2, 3)).to.equal(6);\n  });\n\n  it('combines multiple classes with compose', () => {\n    class MyClass extends compose(\n      withCalc3,\n      withCalc2,\n    )(RootCalculator) {}\n\n    expect(new MyClass().increment(1)).to.equal(2);\n    expect(new MyClass().add(1, 2)).to.equal(3);\n    expect(new MyClass().multiply(2, 3)).to.equal(6);\n  });\n\n  it('combines multiple classes with compose hidden away', () => {\n    const MyClass = class extends UberClass {};\n\n    expect(new MyClass().increment(1)).to.equal(2);\n    expect(new MyClass().add(1, 2)).to.equal(3);\n    expect(new MyClass().multiply(2, 3)).to.equal(6);\n  });\n\n  it('calls the constructor chain from Root to Calc3', () => {\n    class MyClass extends UberClass {}\n\n    expect(new MyClass().initializer).to.equal(5);\n  });\n\n  it('autocompletion works', () => {\n    class MyClass extends compose(\n      withCalc3,\n      withCalc2,\n    )(RootCalculator) {}\n\n    const Calc = new MyClass();\n\n    // Play around here..\n  });\n\n  it('can use instance variables across calculators', () => {\n    class MyClass extends UberClass {}\n\n    const Calc = new MyClass();\n\n    expect(Calc.returnVarParent()).to.equal(undefined);\n    expect(Calc.returnVarChild()).to.equal(undefined);\n\n    Calc.setVar(2);\n\n    expect(Calc.var).to.equal(2);\n    expect(Calc.returnVarParent()).to.equal(2);\n    expect(Calc.returnVarChild()).to.equal(2);\n  });\n\n  it('overwrites parent methods ', () => {\n    class MyClass extends UberClass {\n      add(a, b) {\n        return a - b;\n      }\n    }\n\n    expect(new MyClass().add(2, 3)).to.equal(-1);\n  });\n\n  it('overwrites in the right order', () => {\n    expect(new UberClass().return2()).to.equal(-2);\n  });\n\n  it('can call super', () => {\n    class MyClass extends UberClass {\n      add = super.multiply;\n\n      increment(a) {\n        return super.increment(a - 1);\n      }\n    }\n\n    expect(new MyClass().add(2, 3)).to.equal(6);\n    expect(new MyClass().increment(2)).to.equal(2);\n  });\n\n  it('shows the right types with flow-type', () => {\n    class MyClass extends UberClass {\n      return2(): string {\n        return '2';\n      }\n\n      returnNumber() {\n        return super.return2();\n      }\n    }\n\n    // Inspect types here to make sure they are correct\n    expect(new MyClass().return2()).to.equal('2');\n    expect(new MyClass().returnNumber()).to.equal(-2);\n  });\n\n  it('parent can call child funcs', () => {\n    expect(new UberClass().parentFunc()).to.equal('it works');\n  });\n\n  it('does not inherit static methods as expected', () => {\n    class MyClass extends UberClass {\n      constructor(props) {\n        super(props);\n      }\n\n      return2(): string {\n        return '2';\n      }\n\n      static returnNumber() {\n        return 5;\n      }\n\n      static returnNumber2 = () => 5;\n    }\n\n    const myClass = new MyClass();\n    expect(myClass.returnNumber2).to.equal(undefined);\n    expect(myClass.returnNumber).to.equal(undefined);\n    expect(myClass.staticFunc).to.equal(undefined);\n  });\n\n  describe('memoization', () => {\n    const memoizeMiddleware = calc => (next) => {\n      const memoFunc = memoizeOne(next);\n      return (...args) => {\n        calc.memo += 1;\n        return memoFunc(...args);\n      };\n    };\n\n    const preMiddleware = precisionMiddleware;\n    const postMiddleware = borrowerExtractorMiddleware;\n\n    class MemoizedClass {\n      constructor() {\n        this.count = 0;\n        this.memo = 0;\n        this.init();\n      }\n\n      init() {\n        const middlewareManager = new MiddlewareManager(this);\n        middlewareManager.applyToAllMethods([\n          preMiddleware,\n          memoizeMiddleware,\n          postMiddleware,\n        ]);\n      }\n\n      add({ a, b }) {\n        this.count += 1;\n        return a + b;\n      }\n\n      div({ a, b }) {\n        this.count += 1;\n        return a / b;\n      }\n\n      stuff({ borrowers }) {\n        this.count += 1;\n        return borrowers.a;\n      }\n\n      nothing() {\n        this.count += 1;\n        return 'yo';\n      }\n\n      stringArg(index) {\n        this.count += 1;\n        return [1, 2, 3][index];\n      }\n    }\n\n    it('memoizes additions once', () => {\n      const myClass = new MemoizedClass();\n\n      expect(myClass.add({ a: 1, b: 2 })).to.equal(3);\n      expect(myClass.add({ a: 1, b: 2 })).to.equal(3);\n      expect(myClass.add({ a: 2, b: 2 })).to.equal(4);\n      expect(myClass.add({ a: 1, b: 2 })).to.equal(3);\n\n      expect(myClass.memo).to.equal(4);\n      expect(myClass.count).to.equal(3);\n    });\n\n    it('memoizes divisions', () => {\n      const myClass = new MemoizedClass();\n\n      expect(myClass.div({ a: 2, b: 3 })).to.equal(0.6666666667);\n      expect(myClass.div({ a: 2, b: 3 })).to.equal(0.6666666667);\n\n      expect(myClass.memo).to.equal(2);\n      expect(myClass.count).to.equal(1);\n    });\n\n    it('does not care about other middlewares', () => {\n      const loan = { borrowers: { a: 3 } };\n      const myClass = new MemoizedClass();\n\n      expect(myClass.stuff({ loan })).to.equal(3);\n      expect(myClass.stuff({ loan })).to.equal(3);\n\n      expect(myClass.memo).to.equal(2);\n      expect(myClass.count).to.equal(1);\n    });\n\n    it('works for functions without arguments', () => {\n      const loan = { borrowers: { a: 3 } };\n      const myClass = new MemoizedClass();\n\n      expect(myClass.nothing({ loan })).to.equal('yo');\n      expect(myClass.nothing({ loan })).to.equal('yo');\n\n      expect(myClass.memo).to.equal(2);\n      expect(myClass.count).to.equal(1);\n    });\n\n    it('works for regular functions', () => {\n      const myClass = new MemoizedClass();\n\n      expect(myClass.stringArg(0)).to.equal(1);\n      expect(myClass.stringArg(1)).to.equal(2);\n      expect(myClass.stringArg(1)).to.equal(2);\n      expect(myClass.stringArg(2)).to.equal(3);\n\n      expect(myClass.memo).to.equal(4);\n      expect(myClass.count).to.equal(3);\n    });\n  });\n});\n"]},"passPerPreset":false,"envName":"development","cwd":"/Users/Florian/dev/epotek/microservices/backend","root":"/Users/Florian/dev/epotek/microservices/backend","plugins":[{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/utils/Calculator/test/classes.spec.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/core/utils/Calculator/test/classes.spec.js"}},"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar expect;\nmodule.link(\"chai\", {\n  expect: function (v) {\n    expect = v;\n  }\n}, 0);\nvar compose;\nmodule.link(\"recompose\", {\n  compose: function (v) {\n    compose = v;\n  }\n}, 1);\nvar memoizeOne, memoizeOneObjectArg;\nmodule.link(\"../../memoizeOne\", {\n  \"default\": function (v) {\n    memoizeOne = v;\n  },\n  memoizeOneObjectArg: function (v) {\n    memoizeOneObjectArg = v;\n  }\n}, 2);\nvar MiddlewareManager;\nmodule.link(\"../../MiddlewareManager\", {\n  \"default\": function (v) {\n    MiddlewareManager = v;\n  }\n}, 3);\nvar borrowerExtractorMiddleware;\nmodule.link(\"../middleware\", {\n  borrowerExtractorMiddleware: function (v) {\n    borrowerExtractorMiddleware = v;\n  }\n}, 4);\nvar precisionMiddleware;\nmodule.link(\"../../FinanceCalculator/financeCalculatorMiddlewares\", {\n  precisionMiddleware: function (v) {\n    precisionMiddleware = v;\n  }\n}, 5);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/* eslint-env mocha */\n\n\nvar RootCalculator =\n/*#__PURE__*/\nfunction () {\n  function RootCalculator() {\n    this.initializer = 2;\n  }\n\n  var _proto = RootCalculator.prototype;\n\n  _proto.add = function () {\n    function add(a, b) {\n      return a + b;\n    }\n\n    return add;\n  }();\n\n  _proto.returnVarParent = function () {\n    function returnVarParent() {\n      return this.var;\n    }\n\n    return returnVarParent;\n  }();\n\n  _proto.return2 = function () {\n    function return2() {\n      return 2;\n    }\n\n    return return2;\n  }();\n\n  _proto.parentFunc = function () {\n    function parentFunc() {\n      return this.childFunc();\n    }\n\n    return parentFunc;\n  }();\n\n  RootCalculator.staticFunc = function () {\n    function staticFunc() {\n      return 'hi';\n    }\n\n    return staticFunc;\n  }();\n\n  return RootCalculator;\n}();\n\nvar addClass = function (SuperClass) {\n  return (\n    /*#__PURE__*/\n    function (_SuperClass) {\n      (0, _inheritsLoose2.default)(_class, _SuperClass);\n\n      function _class() {\n        return _SuperClass.apply(this, arguments) || this;\n      }\n\n      return _class;\n    }(SuperClass)\n  );\n};\n\nvar withCalc2 = function () {\n  var SuperClass = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] :\n  /*#__PURE__*/\n  function () {\n    function _class2() {}\n\n    return _class2;\n  }();\n  return (\n    /*#__PURE__*/\n    function (_SuperClass2) {\n      (0, _inheritsLoose2.default)(_class3, _SuperClass2);\n\n      function _class3() {\n        var _this;\n\n        _this = _SuperClass2.call(this) || this;\n        _this.initializer = _this.initializer * 2;\n        return _this;\n      }\n\n      var _proto2 = _class3.prototype;\n\n      _proto2.increment = function () {\n        function increment(a) {\n          return a + 1;\n        }\n\n        return increment;\n      }();\n\n      _proto2.setVar = function () {\n        function setVar(value) {\n          this.var = value;\n        }\n\n        return setVar;\n      }();\n\n      return _class3;\n    }(SuperClass)\n  );\n};\n\nvar withCalc3 = function (SuperClass) {\n  return (\n    /*#__PURE__*/\n    function (_SuperClass3) {\n      (0, _inheritsLoose2.default)(_class4, _SuperClass3);\n\n      function _class4() {\n        var _this2;\n\n        _this2 = _SuperClass3.call(this) || this;\n        _this2.initializer = _this2.initializer + 1;\n        return _this2;\n      }\n\n      var _proto3 = _class4.prototype;\n\n      _proto3.multiply = function () {\n        function multiply(a, b) {\n          return a * b;\n        }\n\n        return multiply;\n      }();\n\n      _proto3.returnVarChild = function () {\n        function returnVarChild() {\n          return this.var;\n        }\n\n        return returnVarChild;\n      }();\n\n      _proto3.return2 = function () {\n        function return2() {\n          return -2;\n        }\n\n        return return2;\n      }();\n\n      _proto3.childFunc = function () {\n        function childFunc() {\n          return 'it works';\n        }\n\n        return childFunc;\n      }();\n\n      return _class4;\n    }(SuperClass)\n  );\n};\n\nvar UberClass = compose(withCalc3, withCalc2)(RootCalculator);\ndescribe('Class composition', function () {\n  it('extends properly', function () {\n    var MyClass =\n    /*#__PURE__*/\n    function (_RootCalculator) {\n      (0, _inheritsLoose2.default)(MyClass, _RootCalculator);\n\n      function MyClass() {\n        return _RootCalculator.apply(this, arguments) || this;\n      }\n\n      return MyClass;\n    }(RootCalculator);\n\n    expect(new MyClass().add(1, 2)).to.equal(3);\n  });\n  it('combines classes with the mixin', function () {\n    var Calc2 = withCalc2();\n\n    var MyClass =\n    /*#__PURE__*/\n    function (_addClass) {\n      (0, _inheritsLoose2.default)(MyClass, _addClass);\n\n      function MyClass() {\n        return _addClass.apply(this, arguments) || this;\n      }\n\n      return MyClass;\n    }(addClass(Calc2));\n\n    expect(new MyClass().increment(1)).to.equal(2);\n  });\n  it('combines multiple classes', function () {\n    var MyClass =\n    /*#__PURE__*/\n    function (_withCalc) {\n      (0, _inheritsLoose2.default)(MyClass, _withCalc);\n\n      function MyClass() {\n        return _withCalc.apply(this, arguments) || this;\n      }\n\n      return MyClass;\n    }(withCalc3(withCalc2(RootCalculator)));\n\n    expect(new MyClass().increment(1)).to.equal(2);\n    expect(new MyClass().add(1, 2)).to.equal(3);\n    expect(new MyClass().multiply(2, 3)).to.equal(6);\n  });\n  it('combines multiple classes with compose', function () {\n    var MyClass =\n    /*#__PURE__*/\n    function (_compose) {\n      (0, _inheritsLoose2.default)(MyClass, _compose);\n\n      function MyClass() {\n        return _compose.apply(this, arguments) || this;\n      }\n\n      return MyClass;\n    }(compose(withCalc3, withCalc2)(RootCalculator));\n\n    expect(new MyClass().increment(1)).to.equal(2);\n    expect(new MyClass().add(1, 2)).to.equal(3);\n    expect(new MyClass().multiply(2, 3)).to.equal(6);\n  });\n  it('combines multiple classes with compose hidden away', function () {\n    var MyClass =\n    /*#__PURE__*/\n    function (_UberClass) {\n      (0, _inheritsLoose2.default)(MyClass, _UberClass);\n\n      function MyClass() {\n        return _UberClass.apply(this, arguments) || this;\n      }\n\n      return MyClass;\n    }(UberClass);\n\n    expect(new MyClass().increment(1)).to.equal(2);\n    expect(new MyClass().add(1, 2)).to.equal(3);\n    expect(new MyClass().multiply(2, 3)).to.equal(6);\n  });\n  it('calls the constructor chain from Root to Calc3', function () {\n    var MyClass =\n    /*#__PURE__*/\n    function (_UberClass2) {\n      (0, _inheritsLoose2.default)(MyClass, _UberClass2);\n\n      function MyClass() {\n        return _UberClass2.apply(this, arguments) || this;\n      }\n\n      return MyClass;\n    }(UberClass);\n\n    expect(new MyClass().initializer).to.equal(5);\n  });\n  it('autocompletion works', function () {\n    var MyClass =\n    /*#__PURE__*/\n    function (_compose2) {\n      (0, _inheritsLoose2.default)(MyClass, _compose2);\n\n      function MyClass() {\n        return _compose2.apply(this, arguments) || this;\n      }\n\n      return MyClass;\n    }(compose(withCalc3, withCalc2)(RootCalculator));\n\n    var Calc = new MyClass(); // Play around here..\n  });\n  it('can use instance variables across calculators', function () {\n    var MyClass =\n    /*#__PURE__*/\n    function (_UberClass3) {\n      (0, _inheritsLoose2.default)(MyClass, _UberClass3);\n\n      function MyClass() {\n        return _UberClass3.apply(this, arguments) || this;\n      }\n\n      return MyClass;\n    }(UberClass);\n\n    var Calc = new MyClass();\n    expect(Calc.returnVarParent()).to.equal(undefined);\n    expect(Calc.returnVarChild()).to.equal(undefined);\n    Calc.setVar(2);\n    expect(Calc.var).to.equal(2);\n    expect(Calc.returnVarParent()).to.equal(2);\n    expect(Calc.returnVarChild()).to.equal(2);\n  });\n  it('overwrites parent methods ', function () {\n    var MyClass =\n    /*#__PURE__*/\n    function (_UberClass4) {\n      (0, _inheritsLoose2.default)(MyClass, _UberClass4);\n\n      function MyClass() {\n        return _UberClass4.apply(this, arguments) || this;\n      }\n\n      var _proto4 = MyClass.prototype;\n\n      _proto4.add = function () {\n        function add(a, b) {\n          return a - b;\n        }\n\n        return add;\n      }();\n\n      return MyClass;\n    }(UberClass);\n\n    expect(new MyClass().add(2, 3)).to.equal(-1);\n  });\n  it('overwrites in the right order', function () {\n    expect(new UberClass().return2()).to.equal(-2);\n  });\n  it('can call super', function () {\n    var MyClass =\n    /*#__PURE__*/\n    function (_UberClass5) {\n      (0, _inheritsLoose2.default)(MyClass, _UberClass5);\n\n      function MyClass() {\n        var _this3;\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this3 = _UberClass5.call.apply(_UberClass5, [this].concat(args)) || this;\n\n        _defineProperty((0, _assertThisInitialized2.default)(_this3), \"add\", _UberClass5.prototype.multiply);\n\n        return _this3;\n      }\n\n      var _proto5 = MyClass.prototype;\n\n      _proto5.increment = function () {\n        function increment(a) {\n          return _UberClass5.prototype.increment.call(this, a - 1);\n        }\n\n        return increment;\n      }();\n\n      return MyClass;\n    }(UberClass);\n\n    expect(new MyClass().add(2, 3)).to.equal(6);\n    expect(new MyClass().increment(2)).to.equal(2);\n  });\n  it('shows the right types with flow-type', function () {\n    var MyClass =\n    /*#__PURE__*/\n    function (_UberClass6) {\n      (0, _inheritsLoose2.default)(MyClass, _UberClass6);\n\n      function MyClass() {\n        return _UberClass6.apply(this, arguments) || this;\n      }\n\n      var _proto6 = MyClass.prototype;\n\n      _proto6.return2 = function () {\n        function return2() {\n          return '2';\n        }\n\n        return return2;\n      }();\n\n      _proto6.returnNumber = function () {\n        function returnNumber() {\n          return _UberClass6.prototype.return2.call(this);\n        }\n\n        return returnNumber;\n      }();\n\n      return MyClass;\n    }(UberClass); // Inspect types here to make sure they are correct\n\n\n    expect(new MyClass().return2()).to.equal('2');\n    expect(new MyClass().returnNumber()).to.equal(-2);\n  });\n  it('parent can call child funcs', function () {\n    expect(new UberClass().parentFunc()).to.equal('it works');\n  });\n  it('does not inherit static methods as expected', function () {\n    var MyClass =\n    /*#__PURE__*/\n    function (_UberClass7) {\n      (0, _inheritsLoose2.default)(MyClass, _UberClass7);\n\n      function MyClass(props) {\n        return _UberClass7.call(this, props) || this;\n      }\n\n      var _proto7 = MyClass.prototype;\n\n      _proto7.return2 = function () {\n        function return2() {\n          return '2';\n        }\n\n        return return2;\n      }();\n\n      MyClass.returnNumber = function () {\n        function returnNumber() {\n          return 5;\n        }\n\n        return returnNumber;\n      }();\n\n      return MyClass;\n    }(UberClass);\n\n    _defineProperty(MyClass, \"returnNumber2\", function () {\n      return 5;\n    });\n\n    var myClass = new MyClass();\n    expect(myClass.returnNumber2).to.equal(undefined);\n    expect(myClass.returnNumber).to.equal(undefined);\n    expect(myClass.staticFunc).to.equal(undefined);\n  });\n  describe('memoization', function () {\n    var memoizeMiddleware = function (calc) {\n      return function (next) {\n        var memoFunc = memoizeOne(next);\n        return function () {\n          calc.memo += 1;\n          return memoFunc.apply(void 0, arguments);\n        };\n      };\n    };\n\n    var preMiddleware = precisionMiddleware;\n    var postMiddleware = borrowerExtractorMiddleware;\n\n    var MemoizedClass =\n    /*#__PURE__*/\n    function () {\n      function MemoizedClass() {\n        this.count = 0;\n        this.memo = 0;\n        this.init();\n      }\n\n      var _proto8 = MemoizedClass.prototype;\n\n      _proto8.init = function () {\n        function init() {\n          var middlewareManager = new MiddlewareManager(this);\n          middlewareManager.applyToAllMethods([preMiddleware, memoizeMiddleware, postMiddleware]);\n        }\n\n        return init;\n      }();\n\n      _proto8.add = function () {\n        function add(_ref) {\n          var a = _ref.a,\n              b = _ref.b;\n          this.count += 1;\n          return a + b;\n        }\n\n        return add;\n      }();\n\n      _proto8.div = function () {\n        function div(_ref2) {\n          var a = _ref2.a,\n              b = _ref2.b;\n          this.count += 1;\n          return a / b;\n        }\n\n        return div;\n      }();\n\n      _proto8.stuff = function () {\n        function stuff(_ref3) {\n          var borrowers = _ref3.borrowers;\n          this.count += 1;\n          return borrowers.a;\n        }\n\n        return stuff;\n      }();\n\n      _proto8.nothing = function () {\n        function nothing() {\n          this.count += 1;\n          return 'yo';\n        }\n\n        return nothing;\n      }();\n\n      _proto8.stringArg = function () {\n        function stringArg(index) {\n          this.count += 1;\n          return [1, 2, 3][index];\n        }\n\n        return stringArg;\n      }();\n\n      return MemoizedClass;\n    }();\n\n    it('memoizes additions once', function () {\n      var myClass = new MemoizedClass();\n      expect(myClass.add({\n        a: 1,\n        b: 2\n      })).to.equal(3);\n      expect(myClass.add({\n        a: 1,\n        b: 2\n      })).to.equal(3);\n      expect(myClass.add({\n        a: 2,\n        b: 2\n      })).to.equal(4);\n      expect(myClass.add({\n        a: 1,\n        b: 2\n      })).to.equal(3);\n      expect(myClass.memo).to.equal(4);\n      expect(myClass.count).to.equal(3);\n    });\n    it('memoizes divisions', function () {\n      var myClass = new MemoizedClass();\n      expect(myClass.div({\n        a: 2,\n        b: 3\n      })).to.equal(0.6666666667);\n      expect(myClass.div({\n        a: 2,\n        b: 3\n      })).to.equal(0.6666666667);\n      expect(myClass.memo).to.equal(2);\n      expect(myClass.count).to.equal(1);\n    });\n    it('does not care about other middlewares', function () {\n      var loan = {\n        borrowers: {\n          a: 3\n        }\n      };\n      var myClass = new MemoizedClass();\n      expect(myClass.stuff({\n        loan: loan\n      })).to.equal(3);\n      expect(myClass.stuff({\n        loan: loan\n      })).to.equal(3);\n      expect(myClass.memo).to.equal(2);\n      expect(myClass.count).to.equal(1);\n    });\n    it('works for functions without arguments', function () {\n      var loan = {\n        borrowers: {\n          a: 3\n        }\n      };\n      var myClass = new MemoizedClass();\n      expect(myClass.nothing({\n        loan: loan\n      })).to.equal('yo');\n      expect(myClass.nothing({\n        loan: loan\n      })).to.equal('yo');\n      expect(myClass.memo).to.equal(2);\n      expect(myClass.count).to.equal(1);\n    });\n    it('works for regular functions', function () {\n      var myClass = new MemoizedClass();\n      expect(myClass.stringArg(0)).to.equal(1);\n      expect(myClass.stringArg(1)).to.equal(2);\n      expect(myClass.stringArg(1)).to.equal(2);\n      expect(myClass.stringArg(2)).to.equal(3);\n      expect(myClass.memo).to.equal(4);\n      expect(myClass.count).to.equal(3);\n    });\n  });\n});","map":{"version":3,"sources":["imports/core/utils/Calculator/test/classes.spec.js"],"names":["constructor","add","a","returnVarParent","return2","parentFunc","addClass","SuperClass","withCalc2","increment","setVar","withCalc3","multiply","returnVarChild","childFunc","UberClass","compose","describe","it","expect","Calc2","MyClass","Calc","returnNumber","myClass","memoizeMiddleware","calc","next","memoFunc","memoizeOne","preMiddleware","postMiddleware","init","middlewareManager","b","div","stuff","borrowers","nothing","stringArg","loan"],"mappings":"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","sourcesContent":["// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\nimport { compose } from 'recompose';\nimport memoizeOne, { memoizeOneObjectArg } from '../../memoizeOne';\nimport MiddlewareManager from '../../MiddlewareManager';\nimport { borrowerExtractorMiddleware } from '../middleware';\nimport { precisionMiddleware } from '../../FinanceCalculator/financeCalculatorMiddlewares';\n\nclass RootCalculator {\n  constructor() {\n    this.initializer = 2;\n  }\n\n  add(a: number, b: number): number {\n    return a + b;\n  }\n\n  returnVarParent() {\n    return this.var;\n  }\n\n  return2(): number {\n    return 2;\n  }\n\n  parentFunc() {\n    return this.childFunc();\n  }\n\n  static staticFunc() {\n    return 'hi';\n  }\n}\n\nconst addClass = SuperClass => class extends SuperClass {};\n\nconst withCalc2 = (SuperClass = class {}) =>\n  class extends SuperClass {\n    constructor() {\n      super();\n      this.initializer = this.initializer * 2;\n    }\n\n    increment(a: number): number {\n      return a + 1;\n    }\n\n    setVar(value): void {\n      this.var = value;\n    }\n  };\n\nconst withCalc3 = SuperClass =>\n  class extends SuperClass {\n    constructor() {\n      super();\n      this.initializer = this.initializer + 1;\n    }\n\n    multiply(a: number, b: number): number {\n      return a * b;\n    }\n\n    returnVarChild(): void {\n      return this.var;\n    }\n\n    return2(): number {\n      return -2;\n    }\n\n    childFunc() {\n      return 'it works';\n    }\n  };\n\nconst UberClass = compose(\n  withCalc3,\n  withCalc2,\n)(RootCalculator);\n\ndescribe('Class composition', () => {\n  it('extends properly', () => {\n    class MyClass extends RootCalculator {}\n\n    expect(new MyClass().add(1, 2)).to.equal(3);\n  });\n\n  it('combines classes with the mixin', () => {\n    const Calc2 = withCalc2();\n    class MyClass extends addClass(Calc2) {}\n\n    expect(new MyClass().increment(1)).to.equal(2);\n  });\n\n  it('combines multiple classes', () => {\n    class MyClass extends withCalc3(withCalc2(RootCalculator)) {}\n\n    expect(new MyClass().increment(1)).to.equal(2);\n    expect(new MyClass().add(1, 2)).to.equal(3);\n    expect(new MyClass().multiply(2, 3)).to.equal(6);\n  });\n\n  it('combines multiple classes with compose', () => {\n    class MyClass extends compose(\n      withCalc3,\n      withCalc2,\n    )(RootCalculator) {}\n\n    expect(new MyClass().increment(1)).to.equal(2);\n    expect(new MyClass().add(1, 2)).to.equal(3);\n    expect(new MyClass().multiply(2, 3)).to.equal(6);\n  });\n\n  it('combines multiple classes with compose hidden away', () => {\n    const MyClass = class extends UberClass {};\n\n    expect(new MyClass().increment(1)).to.equal(2);\n    expect(new MyClass().add(1, 2)).to.equal(3);\n    expect(new MyClass().multiply(2, 3)).to.equal(6);\n  });\n\n  it('calls the constructor chain from Root to Calc3', () => {\n    class MyClass extends UberClass {}\n\n    expect(new MyClass().initializer).to.equal(5);\n  });\n\n  it('autocompletion works', () => {\n    class MyClass extends compose(\n      withCalc3,\n      withCalc2,\n    )(RootCalculator) {}\n\n    const Calc = new MyClass();\n\n    // Play around here..\n  });\n\n  it('can use instance variables across calculators', () => {\n    class MyClass extends UberClass {}\n\n    const Calc = new MyClass();\n\n    expect(Calc.returnVarParent()).to.equal(undefined);\n    expect(Calc.returnVarChild()).to.equal(undefined);\n\n    Calc.setVar(2);\n\n    expect(Calc.var).to.equal(2);\n    expect(Calc.returnVarParent()).to.equal(2);\n    expect(Calc.returnVarChild()).to.equal(2);\n  });\n\n  it('overwrites parent methods ', () => {\n    class MyClass extends UberClass {\n      add(a, b) {\n        return a - b;\n      }\n    }\n\n    expect(new MyClass().add(2, 3)).to.equal(-1);\n  });\n\n  it('overwrites in the right order', () => {\n    expect(new UberClass().return2()).to.equal(-2);\n  });\n\n  it('can call super', () => {\n    class MyClass extends UberClass {\n      add = super.multiply;\n\n      increment(a) {\n        return super.increment(a - 1);\n      }\n    }\n\n    expect(new MyClass().add(2, 3)).to.equal(6);\n    expect(new MyClass().increment(2)).to.equal(2);\n  });\n\n  it('shows the right types with flow-type', () => {\n    class MyClass extends UberClass {\n      return2(): string {\n        return '2';\n      }\n\n      returnNumber() {\n        return super.return2();\n      }\n    }\n\n    // Inspect types here to make sure they are correct\n    expect(new MyClass().return2()).to.equal('2');\n    expect(new MyClass().returnNumber()).to.equal(-2);\n  });\n\n  it('parent can call child funcs', () => {\n    expect(new UberClass().parentFunc()).to.equal('it works');\n  });\n\n  it('does not inherit static methods as expected', () => {\n    class MyClass extends UberClass {\n      constructor(props) {\n        super(props);\n      }\n\n      return2(): string {\n        return '2';\n      }\n\n      static returnNumber() {\n        return 5;\n      }\n\n      static returnNumber2 = () => 5;\n    }\n\n    const myClass = new MyClass();\n    expect(myClass.returnNumber2).to.equal(undefined);\n    expect(myClass.returnNumber).to.equal(undefined);\n    expect(myClass.staticFunc).to.equal(undefined);\n  });\n\n  describe('memoization', () => {\n    const memoizeMiddleware = calc => (next) => {\n      const memoFunc = memoizeOne(next);\n      return (...args) => {\n        calc.memo += 1;\n        return memoFunc(...args);\n      };\n    };\n\n    const preMiddleware = precisionMiddleware;\n    const postMiddleware = borrowerExtractorMiddleware;\n\n    class MemoizedClass {\n      constructor() {\n        this.count = 0;\n        this.memo = 0;\n        this.init();\n      }\n\n      init() {\n        const middlewareManager = new MiddlewareManager(this);\n        middlewareManager.applyToAllMethods([\n          preMiddleware,\n          memoizeMiddleware,\n          postMiddleware,\n        ]);\n      }\n\n      add({ a, b }) {\n        this.count += 1;\n        return a + b;\n      }\n\n      div({ a, b }) {\n        this.count += 1;\n        return a / b;\n      }\n\n      stuff({ borrowers }) {\n        this.count += 1;\n        return borrowers.a;\n      }\n\n      nothing() {\n        this.count += 1;\n        return 'yo';\n      }\n\n      stringArg(index) {\n        this.count += 1;\n        return [1, 2, 3][index];\n      }\n    }\n\n    it('memoizes additions once', () => {\n      const myClass = new MemoizedClass();\n\n      expect(myClass.add({ a: 1, b: 2 })).to.equal(3);\n      expect(myClass.add({ a: 1, b: 2 })).to.equal(3);\n      expect(myClass.add({ a: 2, b: 2 })).to.equal(4);\n      expect(myClass.add({ a: 1, b: 2 })).to.equal(3);\n\n      expect(myClass.memo).to.equal(4);\n      expect(myClass.count).to.equal(3);\n    });\n\n    it('memoizes divisions', () => {\n      const myClass = new MemoizedClass();\n\n      expect(myClass.div({ a: 2, b: 3 })).to.equal(0.6666666667);\n      expect(myClass.div({ a: 2, b: 3 })).to.equal(0.6666666667);\n\n      expect(myClass.memo).to.equal(2);\n      expect(myClass.count).to.equal(1);\n    });\n\n    it('does not care about other middlewares', () => {\n      const loan = { borrowers: { a: 3 } };\n      const myClass = new MemoizedClass();\n\n      expect(myClass.stuff({ loan })).to.equal(3);\n      expect(myClass.stuff({ loan })).to.equal(3);\n\n      expect(myClass.memo).to.equal(2);\n      expect(myClass.count).to.equal(1);\n    });\n\n    it('works for functions without arguments', () => {\n      const loan = { borrowers: { a: 3 } };\n      const myClass = new MemoizedClass();\n\n      expect(myClass.nothing({ loan })).to.equal('yo');\n      expect(myClass.nothing({ loan })).to.equal('yo');\n\n      expect(myClass.memo).to.equal(2);\n      expect(myClass.count).to.equal(1);\n    });\n\n    it('works for regular functions', () => {\n      const myClass = new MemoizedClass();\n\n      expect(myClass.stringArg(0)).to.equal(1);\n      expect(myClass.stringArg(1)).to.equal(2);\n      expect(myClass.stringArg(1)).to.equal(2);\n      expect(myClass.stringArg(2)).to.equal(3);\n\n      expect(myClass.memo).to.equal(4);\n      expect(myClass.count).to.equal(3);\n    });\n  });\n});\n"]},"sourceType":"script","hash":"d99566a61c89fb7e10b9b86a1150ef786c572762"}
