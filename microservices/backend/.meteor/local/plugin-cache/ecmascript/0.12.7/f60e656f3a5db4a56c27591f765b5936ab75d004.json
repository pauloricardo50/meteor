{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/AutoForm/ValidIcon/ValidIconContainer.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties",["flow",{}],"jsx",["flow",{}],["flow",{}],"objectRestSpread","objectRestSpread","dynamicImport","asyncGenerators","classProperties","classPrivateProperties"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.x86_64"},"sourceFileName":"imports/core/components/AutoForm/ValidIcon/ValidIconContainer.jsx","filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/AutoForm/ValidIcon/ValidIconContainer.jsx","inputSourceMap":{"version":3,"sources":["imports/core/components/AutoForm/ValidIcon/ValidIconContainer.jsx"],"names":["Meteor","React","Component","STATUS","ERROR","VALID","HIDE","TODO","SAVING_ANIMATION_DURATION_MS","WrappedComponent","constructor","props","error","required","value","todo","undefined","includes","state","status","getStatus","timer","componentWillReceiveProps","saving","nextSaving","setState","setTimeout","clearTimeout","render"],"mappings":";;AAAA,SAASA,MAAT,QAAuB,eAAvB;AAEA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,OAAO,MAAMC,MAAM,GAAG;AACpBC,EAAAA,KAAK,EAAE,OADa;AAEpBC,EAAAA,KAAK,EAAE,OAFa;AAGpBC,EAAAA,IAAI,EAAE,MAHc;AAIpBC,EAAAA,IAAI,EAAE;AAJc,CAAf;AAOP,MAAMC,4BAA4B,GAAG,GAArC;AAEA,gBAAeC,gBAAgB;AAAA;;AAAA,iBAC7B,cAAcP,SAAd,CAAwB;AACtBQ,IAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,YAAMA,KAAN;;AADiB,yCA8BP,MAAM;AAChB,cAAM;AAAEC,UAAAA,KAAF;AAASC,UAAAA,QAAT;AAAmBC,UAAAA,KAAnB;AAA0BC,UAAAA;AAA1B,YAAmC,KAAKJ,KAA9C;;AAEA,YAAIC,KAAJ,EAAW;AACT,iBAAOT,MAAM,CAACC,KAAd;AACD;;AACD,YACEW,IAAI,IACAF,QAAQ,KAAK,IAAb,IAAqB,CAACG,SAAD,EAAY,EAAZ,EAAgB,IAAhB,EAAsBC,QAAtB,CAA+BH,KAA/B,CAF3B,EAGE;AACA,iBAAOX,MAAM,CAACI,IAAd;AACD;;AAED,eAAOJ,MAAM,CAACE,KAAd;AACD,OA5CkB;;AAEjB,WAAKa,KAAL,GAAa;AACXC,QAAAA,MAAM,EAAE,KAAKC,SAAL;AADG,OAAb;AAIA,WAAKC,KAAL,GAAa,IAAb;AACD;;AAEDC,IAAAA,yBAAyB,CAAC;AAAEC,MAAAA,MAAM,EAAEC;AAAV,KAAD,EAAyB;AAChD;AACA,UAAI,KAAKH,KAAT,EAAgB;AACd;AACD;;AAED,YAAM;AAAEE,QAAAA;AAAF,UAAa,KAAKZ,KAAxB;;AAEA,UAAIY,MAAM,KAAK,KAAX,IAAoBC,UAAU,KAAK,IAAvC,EAA6C;AAC3C;AACA,aAAKC,QAAL,CAAc;AAAEN,UAAAA,MAAM,EAAEhB,MAAM,CAACG;AAAjB,SAAd,EAAuC,MAAM;AAC3C,eAAKe,KAAL,GAAarB,MAAM,CAAC0B,UAAP,CAAkB,MAAM;AACnC1B,YAAAA,MAAM,CAAC2B,YAAP,CAAoB,KAAKN,KAAzB;AACA,iBAAKA,KAAL,GAAa,IAAb;AACD,WAHY,EAGVb,4BAHU,CAAb;AAKA,eAAKiB,QAAL,CAAc;AAAEN,YAAAA,MAAM,EAAE,KAAKC,SAAL;AAAV,WAAd;AACD,SAPD;AAQD;AACF;;AAkBDQ,IAAAA,MAAM,GAAG;AACP,YAAM;AAAET,QAAAA;AAAF,UAAa,KAAKD,KAAxB;AACA,aAAO,CAAC,gBAAD,CAAkB,IAAI,KAAKP,KAAT,CAAlB,CAAkC,OAAO,CAACQ,MAAD,CAAzC,GAAP;AACD;;AAlDqB,GADK;AAAA,CAA/B","sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport React, { Component } from 'react';\n\nexport const STATUS = {\n  ERROR: 'ERROR',\n  VALID: 'VALID',\n  HIDE: 'HIDE',\n  TODO: 'TODO',\n};\n\nconst SAVING_ANIMATION_DURATION_MS = 900;\n\nexport default WrappedComponent =>\n  class extends Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        status: this.getStatus(),\n      };\n\n      this.timer = null;\n    }\n\n    componentWillReceiveProps({ saving: nextSaving }) {\n      // If the animation is going on, don't trigger this again\n      if (this.timer) {\n        return;\n      }\n\n      const { saving } = this.props;\n\n      if (saving === false && nextSaving === true) {\n        // If saving is happening, hide the icon, and then make it reappear\n        this.setState({ status: STATUS.HIDE }, () => {\n          this.timer = Meteor.setTimeout(() => {\n            Meteor.clearTimeout(this.timer);\n            this.timer = null;\n          }, SAVING_ANIMATION_DURATION_MS);\n\n          this.setState({ status: this.getStatus() });\n        });\n      }\n    }\n\n    getStatus = () => {\n      const { error, required, value, todo } = this.props;\n\n      if (error) {\n        return STATUS.ERROR;\n      }\n      if (\n        todo\n        || (required === true && [undefined, '', null].includes(value))\n      ) {\n        return STATUS.TODO;\n      }\n\n      return STATUS.VALID;\n    };\n\n    render() {\n      const { status } = this.state;\n      return <WrappedComponent {...this.props} status={status} />;\n    }\n  };\n"]},"passPerPreset":false,"envName":"development","cwd":"/Users/Florian/dev/epotek/microservices/backend","root":"/Users/Florian/dev/epotek/microservices/backend","plugins":[{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}}],"presets":[],"generatorOpts":{"filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/AutoForm/ValidIcon/ValidIconContainer.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/core/components/AutoForm/ValidIcon/ValidIconContainer.jsx"}},"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nmodule.export({\n  STATUS: () => STATUS\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nconst STATUS = {\n  ERROR: 'ERROR',\n  VALID: 'VALID',\n  HIDE: 'HIDE',\n  TODO: 'TODO'\n};\nconst SAVING_ANIMATION_DURATION_MS = 900;\nmodule.exportDefault(WrappedComponent => {\n  var _temp;\n\n  return _temp = class extends Component {\n    constructor(props) {\n      super(props);\n\n      _defineProperty(this, \"getStatus\", () => {\n        const {\n          error,\n          required,\n          value,\n          todo\n        } = this.props;\n\n        if (error) {\n          return STATUS.ERROR;\n        }\n\n        if (todo || required === true && [undefined, '', null].includes(value)) {\n          return STATUS.TODO;\n        }\n\n        return STATUS.VALID;\n      });\n\n      this.state = {\n        status: this.getStatus()\n      };\n      this.timer = null;\n    }\n\n    componentWillReceiveProps({\n      saving: nextSaving\n    }) {\n      // If the animation is going on, don't trigger this again\n      if (this.timer) {\n        return;\n      }\n\n      const {\n        saving\n      } = this.props;\n\n      if (saving === false && nextSaving === true) {\n        // If saving is happening, hide the icon, and then make it reappear\n        this.setState({\n          status: STATUS.HIDE\n        }, () => {\n          this.timer = Meteor.setTimeout(() => {\n            Meteor.clearTimeout(this.timer);\n            this.timer = null;\n          }, SAVING_ANIMATION_DURATION_MS);\n          this.setState({\n            status: this.getStatus()\n          });\n        });\n      }\n    }\n\n    render() {\n      const {\n        status\n      } = this.state;\n      return React.createElement(WrappedComponent, (0, _extends2.default)({}, this.props, {\n        status: status\n      }));\n    }\n\n  }, _temp;\n});","map":{"version":3,"sources":["imports/core/components/AutoForm/ValidIcon/ValidIconContainer.jsx"],"names":["STATUS","ERROR","VALID","HIDE","TODO","SAVING_ANIMATION_DURATION_MS","WrappedComponent","constructor","status","componentWillReceiveProps","saving","nextSaving","Meteor","todo","required","render"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIO,MAAMA,MAAM,GAAG;AACpBC,EAAAA,KAAK,EADe,OAAA;AAEpBC,EAAAA,KAAK,EAFe,OAAA;AAGpBC,EAAAA,IAAI,EAHgB,MAAA;AAIpBC,EAAAA,IAAI,EAAE;AAJc,CAAf;AAOP,MAAMC,4BAA4B,GAAlC,GAAA;qBAEeC,gBAAgB,IAAA;AAAA,MAAA,KAAA;;AAAA,SAAA,KAAA,GAC7B,cAAA,SAAA,CAAwB;AACtBC,IAAAA,WAAW,CAAA,KAAA,EAAQ;AACjB,YAAA,KAAA;;AADiB,MAAA,eAAA,CAAA,IAAA,EAAA,WAAA,EA8BP,MAAM;AAChB,cAAM;AAAA,UAAA,KAAA;AAAA,UAAA,QAAA;AAAA,UAAA,KAAA;AAA0BM,UAAAA;AAA1B,YAAmC,KAAzC,KAAA;;AAEA,YAAA,KAAA,EAAW;AACT,iBAAOb,MAAM,CAAb,KAAA;AACD;;AACD,YACEa,IAAI,IACAC,QAAQ,KAARA,IAAAA,IAAqB,CAAA,SAAA,EAAA,EAAA,EAAA,IAAA,EAAA,QAAA,CAF3B,KAE2B,CAF3B,EAGE;AACA,iBAAOd,MAAM,CAAb,IAAA;AACD;;AAED,eAAOA,MAAM,CAAb,KAAA;AA3CiB,OAAA,CAAA;;AAEjB,WAAA,KAAA,GAAa;AACXQ,QAAAA,MAAM,EAAE,KAAA,SAAA;AADG,OAAb;AAIA,WAAA,KAAA,GAAA,IAAA;AACD;;AAEDC,IAAAA,yBAAyB,CAAC;AAAEC,MAAAA,MAAM,EAAEC;AAAV,KAAD,EAAyB;AAChD;AACA,UAAI,KAAJ,KAAA,EAAgB;AACd;AACD;;AAED,YAAM;AAAED,QAAAA;AAAF,UAAa,KAAnB,KAAA;;AAEA,UAAIA,MAAM,KAANA,KAAAA,IAAoBC,UAAU,KAAlC,IAAA,EAA6C;AAC3C;AACA,aAAA,QAAA,CAAc;AAAEH,UAAAA,MAAM,EAAER,MAAM,CAACG;AAAjB,SAAd,EAAuC,MAAM;AAC3C,eAAA,KAAA,GAAa,MAAM,CAAN,UAAA,CAAkB,MAAM;AACnCS,YAAAA,MAAM,CAANA,YAAAA,CAAoB,KAApBA,KAAAA;AACA,iBAAA,KAAA,GAAA,IAAA;AAFW,WAAA,EAAb,4BAAa,CAAb;AAKA,eAAA,QAAA,CAAc;AAAEJ,YAAAA,MAAM,EAAE,KAAA,SAAA;AAAV,WAAd;AANF,SAAA;AAQD;AACF;;AAkBDO,IAAAA,MAAM,GAAG;AACP,YAAM;AAAEP,QAAAA;AAAF,UAAa,KAAnB,KAAA;AACA,aAAO,oBAAA,gBAAA,6BAAsB,KAAtB,KAAA;AAAkC,QAAA,MAAA,EAAzC;AAAO,SAAP;AACD;;AAlDqB,GADK,EAAA,KAAA;AAA/B,C","sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport React, { Component } from 'react';\n\nexport const STATUS = {\n  ERROR: 'ERROR',\n  VALID: 'VALID',\n  HIDE: 'HIDE',\n  TODO: 'TODO',\n};\n\nconst SAVING_ANIMATION_DURATION_MS = 900;\n\nexport default WrappedComponent =>\n  class extends Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        status: this.getStatus(),\n      };\n\n      this.timer = null;\n    }\n\n    componentWillReceiveProps({ saving: nextSaving }) {\n      // If the animation is going on, don't trigger this again\n      if (this.timer) {\n        return;\n      }\n\n      const { saving } = this.props;\n\n      if (saving === false && nextSaving === true) {\n        // If saving is happening, hide the icon, and then make it reappear\n        this.setState({ status: STATUS.HIDE }, () => {\n          this.timer = Meteor.setTimeout(() => {\n            Meteor.clearTimeout(this.timer);\n            this.timer = null;\n          }, SAVING_ANIMATION_DURATION_MS);\n\n          this.setState({ status: this.getStatus() });\n        });\n      }\n    }\n\n    getStatus = () => {\n      const { error, required, value, todo } = this.props;\n\n      if (error) {\n        return STATUS.ERROR;\n      }\n      if (\n        todo\n        || (required === true && [undefined, '', null].includes(value))\n      ) {\n        return STATUS.TODO;\n      }\n\n      return STATUS.VALID;\n    };\n\n    render() {\n      const { status } = this.state;\n      return <WrappedComponent {...this.props} status={status} />;\n    }\n  };\n"]},"sourceType":"script","hash":"f60e656f3a5db4a56c27591f765b5936ab75d004"}
