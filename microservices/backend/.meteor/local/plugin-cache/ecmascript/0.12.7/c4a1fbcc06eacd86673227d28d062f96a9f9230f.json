{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/StatusLabel/StatusLabel.jsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties",["flow",{}],"dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"imports/core/components/StatusLabel/StatusLabel.jsx","filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/StatusLabel/StatusLabel.jsx","inputSourceMap":{"version":3,"sources":["imports/core/components/StatusLabel/StatusLabel.jsx"],"names":["React","cx","Tooltip","colors","PROMOTION_STATUS","PROMOTIONS_COLLECTION","PROMOTION_LOTS_COLLECTION","PROMOTION_LOT_STATUS","PROMOTION_LOT_REDUCED_STATUS","TASKS_COLLECTION","TASK_STATUS","LOANS_COLLECTION","LOAN_STATUS","LENDERS_COLLECTION","LENDER_STATUS","PROPERTIES_COLLECTION","PROPERTY_STATUS","REVENUES_COLLECTION","REVENUE_STATUS","COMMISSION_STATUS","T","DropdownMenu","updateDocument","StatusLabelProps","status","collection","suffix","label","Node","color","getStatuses","LEAD","secondary","ONGOING","primary","PENDING","warning","CLOSING","tertiary","BILLING","success","FINALIZED","UNSUCCESSFUL","error","TEST","CANCELLED","FINISHED","OPEN","PREPARATION","AVAILABLE","BOOKED","SOLD","SOLD_TO_ME","BOOKED_FOR_ME","NOT_AVAILABLE","ACTIVE","COMPLETED","TO_BE_CONTACTED","CONTACTED","OFFER_RECEIVED","TO_EXCLUDE","FOR_SALE","EXPECTED","CLOSED","TO_BE_PAID","PAID","Error","getLabel","allowModify","statuses","variant","props","backgroundColor","showTooltip","StatusLabel","docId","additionalActions","Promise","resolve","statusLabel","handleOpen","onClick","Object","keys","map","stat","id","then","run","object"],"mappings":"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","sourcesContent":["// @flow\nimport React from 'react';\nimport cx from 'classnames';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport colors from '../../config/colors';\nimport {\n  PROMOTION_STATUS,\n  PROMOTIONS_COLLECTION,\n  PROMOTION_LOTS_COLLECTION,\n  PROMOTION_LOT_STATUS,\n  PROMOTION_LOT_REDUCED_STATUS,\n  TASKS_COLLECTION,\n  TASK_STATUS,\n  LOANS_COLLECTION,\n  LOAN_STATUS,\n  LENDERS_COLLECTION,\n  LENDER_STATUS,\n  PROPERTIES_COLLECTION,\n  PROPERTY_STATUS,\n  REVENUES_COLLECTION,\n  REVENUE_STATUS,\n  COMMISSION_STATUS,\n} from '../../api/constants';\nimport T from '../Translation';\nimport DropdownMenu from '../DropdownMenu';\nimport { updateDocument } from '../../api/methods/methodDefinitions';\n\ntype StatusLabelProps = {\n  status: string,\n  collection: string,\n  suffix?: string,\n  label: React.Node,\n  color: string,\n};\n\nconst getStatuses = (collection) => {\n  switch (collection) {\n  case LOANS_COLLECTION:\n    return {\n      [LOAN_STATUS.LEAD]: colors.secondary,\n      [LOAN_STATUS.ONGOING]: colors.primary,\n      [LOAN_STATUS.PENDING]: colors.warning,\n      [LOAN_STATUS.CLOSING]: colors.tertiary,\n      [LOAN_STATUS.BILLING]: colors.success,\n      [LOAN_STATUS.FINALIZED]: colors.success,\n      [LOAN_STATUS.UNSUCCESSFUL]: colors.error,\n      [LOAN_STATUS.TEST]: colors.warning,\n    };\n\n  case PROMOTIONS_COLLECTION:\n    return {\n      [PROMOTION_STATUS.CANCELLED]: colors.warning,\n      [PROMOTION_STATUS.FINISHED]: colors.error,\n      [PROMOTION_STATUS.OPEN]: colors.success,\n      [PROMOTION_STATUS.PREPARATION]: colors.primary,\n    };\n\n  case PROMOTION_LOTS_COLLECTION:\n    return {\n      [PROMOTION_LOT_STATUS.AVAILABLE]: colors.success,\n      [PROMOTION_LOT_STATUS.BOOKED]: colors.primary,\n      [PROMOTION_LOT_STATUS.SOLD]: colors.error,\n      [PROMOTION_LOT_REDUCED_STATUS.SOLD_TO_ME]: colors.tertiary,\n      [PROMOTION_LOT_REDUCED_STATUS.BOOKED_FOR_ME]: colors.primary,\n      [PROMOTION_LOT_REDUCED_STATUS.NOT_AVAILABLE]: colors.warning,\n    };\n\n  case TASKS_COLLECTION:\n    return {\n      [TASK_STATUS.ACTIVE]: colors.primary,\n      [TASK_STATUS.COMPLETED]: colors.success,\n      [TASK_STATUS.CANCELLED]: colors.error,\n    };\n\n  case LENDERS_COLLECTION:\n    return {\n      [LENDER_STATUS.TO_BE_CONTACTED]: colors.warning,\n      [LENDER_STATUS.CONTACTED]: colors.primary,\n      [LENDER_STATUS.OFFER_RECEIVED]: colors.success,\n      [LENDER_STATUS.TO_EXCLUDE]: colors.error,\n    };\n\n  case PROPERTIES_COLLECTION:\n    return {\n      [PROPERTY_STATUS.FOR_SALE]: colors.success,\n      [PROPERTY_STATUS.BOOKED]: colors.primary,\n      [PROPERTY_STATUS.SOLD]: colors.error,\n    };\n\n  case REVENUES_COLLECTION:\n    return {\n      [REVENUE_STATUS.EXPECTED]: colors.primary,\n      [REVENUE_STATUS.CLOSED]: colors.success,\n      [COMMISSION_STATUS.TO_BE_PAID]: colors.primary,\n      [COMMISSION_STATUS.PAID]: colors.success,\n    };\n\n  default:\n    throw new Error(`Unknown collection \"${collection}\" in StatusLabel`);\n  }\n};\nconst getLabel = ({\n  allowModify,\n  color,\n  label,\n  status,\n  statuses,\n  suffix,\n  variant,\n}) => {\n  switch (variant) {\n  case 'full':\n    return props => (\n      <span\n        className={cx({ allowModify, 'status-label': true })}\n        style={{ backgroundColor: color || statuses[status] }}\n        {...props}\n      >\n        <span>\n          {label || <T id={`Forms.status.${status}`} />}\n          {suffix}\n        </span>\n      </span>\n    );\n  case 'dot':\n    return ({ showTooltip, ...props }) =>\n      (showTooltip ? (\n        <Tooltip title={label || <T id={`Forms.status.${status}`} />}>\n          <span\n            className={cx({ allowModify, 'status-label-dot': true })}\n            {...props}\n          >\n            <span style={{ backgroundColor: color || statuses[status] }} />\n          </span>\n        </Tooltip>\n      ) : (\n        <span\n          className={cx({ allowModify, 'status-label-dot': true })}\n          {...props}\n        >\n          <span style={{ backgroundColor: color || statuses[status] }} />\n        </span>\n      ));\n\n  default:\n    break;\n  }\n};\n\nconst StatusLabel = ({\n  status,\n  collection,\n  suffix = '',\n  label = null,\n  color = null,\n  allowModify,\n  docId,\n  additionalActions = () => Promise.resolve(),\n  variant = 'full',\n  showTooltip = true,\n}: StatusLabelProps) => {\n  const statuses = getStatuses(collection);\n  const statusLabel = getLabel({\n    allowModify,\n    color,\n    docId,\n    label,\n    status,\n    statuses,\n    suffix,\n    variant,\n  });\n\n  if (allowModify) {\n    return (\n      <DropdownMenu\n        noWrapper\n        renderTrigger={({ handleOpen }) =>\n          statusLabel({ onClick: handleOpen, showTooltip })\n        }\n        options={Object.keys(statuses).map(stat => ({\n          id: stat,\n          label: <T id={`Forms.status.${stat}`} />,\n          onClick: () =>\n            additionalActions(stat, status).then(() =>\n              updateDocument.run({\n                collection,\n                object: { status: stat },\n                docId,\n              })),\n        }))}\n      />\n    );\n  }\n\n  return statusLabel({ showTooltip });\n};\n\nexport default StatusLabel;\n"]},"passPerPreset":false,"envName":"development","cwd":"/Users/Florian/dev/epotek/microservices/backend","root":"/Users/Florian/dev/epotek/microservices/backend","plugins":[{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/StatusLabel/StatusLabel.jsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/core/components/StatusLabel/StatusLabel.jsx"}},"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar React;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  }\n}, 0);\nvar cx;\nmodule.link(\"classnames\", {\n  \"default\": function (v) {\n    cx = v;\n  }\n}, 1);\nvar Tooltip;\nmodule.link(\"@material-ui/core/Tooltip\", {\n  \"default\": function (v) {\n    Tooltip = v;\n  }\n}, 2);\nvar colors;\nmodule.link(\"../../config/colors\", {\n  \"default\": function (v) {\n    colors = v;\n  }\n}, 3);\nvar PROMOTION_STATUS, PROMOTIONS_COLLECTION, PROMOTION_LOTS_COLLECTION, PROMOTION_LOT_STATUS, PROMOTION_LOT_REDUCED_STATUS, TASKS_COLLECTION, TASK_STATUS, LOANS_COLLECTION, LOAN_STATUS, LENDERS_COLLECTION, LENDER_STATUS, PROPERTIES_COLLECTION, PROPERTY_STATUS, REVENUES_COLLECTION, REVENUE_STATUS, COMMISSION_STATUS;\nmodule.link(\"../../api/constants\", {\n  PROMOTION_STATUS: function (v) {\n    PROMOTION_STATUS = v;\n  },\n  PROMOTIONS_COLLECTION: function (v) {\n    PROMOTIONS_COLLECTION = v;\n  },\n  PROMOTION_LOTS_COLLECTION: function (v) {\n    PROMOTION_LOTS_COLLECTION = v;\n  },\n  PROMOTION_LOT_STATUS: function (v) {\n    PROMOTION_LOT_STATUS = v;\n  },\n  PROMOTION_LOT_REDUCED_STATUS: function (v) {\n    PROMOTION_LOT_REDUCED_STATUS = v;\n  },\n  TASKS_COLLECTION: function (v) {\n    TASKS_COLLECTION = v;\n  },\n  TASK_STATUS: function (v) {\n    TASK_STATUS = v;\n  },\n  LOANS_COLLECTION: function (v) {\n    LOANS_COLLECTION = v;\n  },\n  LOAN_STATUS: function (v) {\n    LOAN_STATUS = v;\n  },\n  LENDERS_COLLECTION: function (v) {\n    LENDERS_COLLECTION = v;\n  },\n  LENDER_STATUS: function (v) {\n    LENDER_STATUS = v;\n  },\n  PROPERTIES_COLLECTION: function (v) {\n    PROPERTIES_COLLECTION = v;\n  },\n  PROPERTY_STATUS: function (v) {\n    PROPERTY_STATUS = v;\n  },\n  REVENUES_COLLECTION: function (v) {\n    REVENUES_COLLECTION = v;\n  },\n  REVENUE_STATUS: function (v) {\n    REVENUE_STATUS = v;\n  },\n  COMMISSION_STATUS: function (v) {\n    COMMISSION_STATUS = v;\n  }\n}, 4);\nvar T;\nmodule.link(\"../Translation\", {\n  \"default\": function (v) {\n    T = v;\n  }\n}, 5);\nvar DropdownMenu;\nmodule.link(\"../DropdownMenu\", {\n  \"default\": function (v) {\n    DropdownMenu = v;\n  }\n}, 6);\nvar updateDocument;\nmodule.link(\"../../api/methods/methodDefinitions\", {\n  updateDocument: function (v) {\n    updateDocument = v;\n  }\n}, 7);\n\nvar getStatuses = function (collection) {\n  var _ref, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7;\n\n  switch (collection) {\n    case LOANS_COLLECTION:\n      return _ref = {}, _ref[LOAN_STATUS.LEAD] = colors.secondary, _ref[LOAN_STATUS.ONGOING] = colors.primary, _ref[LOAN_STATUS.PENDING] = colors.warning, _ref[LOAN_STATUS.CLOSING] = colors.tertiary, _ref[LOAN_STATUS.BILLING] = colors.success, _ref[LOAN_STATUS.FINALIZED] = colors.success, _ref[LOAN_STATUS.UNSUCCESSFUL] = colors.error, _ref[LOAN_STATUS.TEST] = colors.warning, _ref;\n\n    case PROMOTIONS_COLLECTION:\n      return _ref2 = {}, _ref2[PROMOTION_STATUS.CANCELLED] = colors.warning, _ref2[PROMOTION_STATUS.FINISHED] = colors.error, _ref2[PROMOTION_STATUS.OPEN] = colors.success, _ref2[PROMOTION_STATUS.PREPARATION] = colors.primary, _ref2;\n\n    case PROMOTION_LOTS_COLLECTION:\n      return _ref3 = {}, _ref3[PROMOTION_LOT_STATUS.AVAILABLE] = colors.success, _ref3[PROMOTION_LOT_STATUS.BOOKED] = colors.primary, _ref3[PROMOTION_LOT_STATUS.SOLD] = colors.error, _ref3[PROMOTION_LOT_REDUCED_STATUS.SOLD_TO_ME] = colors.tertiary, _ref3[PROMOTION_LOT_REDUCED_STATUS.BOOKED_FOR_ME] = colors.primary, _ref3[PROMOTION_LOT_REDUCED_STATUS.NOT_AVAILABLE] = colors.warning, _ref3;\n\n    case TASKS_COLLECTION:\n      return _ref4 = {}, _ref4[TASK_STATUS.ACTIVE] = colors.primary, _ref4[TASK_STATUS.COMPLETED] = colors.success, _ref4[TASK_STATUS.CANCELLED] = colors.error, _ref4;\n\n    case LENDERS_COLLECTION:\n      return _ref5 = {}, _ref5[LENDER_STATUS.TO_BE_CONTACTED] = colors.warning, _ref5[LENDER_STATUS.CONTACTED] = colors.primary, _ref5[LENDER_STATUS.OFFER_RECEIVED] = colors.success, _ref5[LENDER_STATUS.TO_EXCLUDE] = colors.error, _ref5;\n\n    case PROPERTIES_COLLECTION:\n      return _ref6 = {}, _ref6[PROPERTY_STATUS.FOR_SALE] = colors.success, _ref6[PROPERTY_STATUS.BOOKED] = colors.primary, _ref6[PROPERTY_STATUS.SOLD] = colors.error, _ref6;\n\n    case REVENUES_COLLECTION:\n      return _ref7 = {}, _ref7[REVENUE_STATUS.EXPECTED] = colors.primary, _ref7[REVENUE_STATUS.CLOSED] = colors.success, _ref7[COMMISSION_STATUS.TO_BE_PAID] = colors.primary, _ref7[COMMISSION_STATUS.PAID] = colors.success, _ref7;\n\n    default:\n      throw new Error(\"Unknown collection \\\"\" + collection + \"\\\" in StatusLabel\");\n  }\n};\n\nvar getLabel = function (_ref8) {\n  var allowModify = _ref8.allowModify,\n      color = _ref8.color,\n      label = _ref8.label,\n      status = _ref8.status,\n      statuses = _ref8.statuses,\n      suffix = _ref8.suffix,\n      variant = _ref8.variant;\n\n  switch (variant) {\n    case 'full':\n      return function (props) {\n        return React.createElement(\"span\", (0, _extends2.default)({\n          className: cx({\n            allowModify: allowModify,\n            'status-label': true\n          }),\n          style: {\n            backgroundColor: color || statuses[status]\n          }\n        }, props), React.createElement(\"span\", null, label || React.createElement(T, {\n          id: \"Forms.status.\" + status\n        }), suffix));\n      };\n\n    case 'dot':\n      return function (_ref9) {\n        var showTooltip = _ref9.showTooltip,\n            props = (0, _objectWithoutProperties2.default)(_ref9, [\"showTooltip\"]);\n        return showTooltip ? React.createElement(Tooltip, {\n          title: label || React.createElement(T, {\n            id: \"Forms.status.\" + status\n          })\n        }, React.createElement(\"span\", (0, _extends2.default)({\n          className: cx({\n            allowModify: allowModify,\n            'status-label-dot': true\n          })\n        }, props), React.createElement(\"span\", {\n          style: {\n            backgroundColor: color || statuses[status]\n          }\n        }))) : React.createElement(\"span\", (0, _extends2.default)({\n          className: cx({\n            allowModify: allowModify,\n            'status-label-dot': true\n          })\n        }, props), React.createElement(\"span\", {\n          style: {\n            backgroundColor: color || statuses[status]\n          }\n        }));\n      };\n\n    default:\n      break;\n  }\n};\n\nvar StatusLabel = function (_ref10) {\n  var status = _ref10.status,\n      collection = _ref10.collection,\n      _ref10$suffix = _ref10.suffix,\n      suffix = _ref10$suffix === void 0 ? '' : _ref10$suffix,\n      _ref10$label = _ref10.label,\n      label = _ref10$label === void 0 ? null : _ref10$label,\n      _ref10$color = _ref10.color,\n      color = _ref10$color === void 0 ? null : _ref10$color,\n      allowModify = _ref10.allowModify,\n      docId = _ref10.docId,\n      _ref10$additionalActi = _ref10.additionalActions,\n      additionalActions = _ref10$additionalActi === void 0 ? function () {\n    return Promise.resolve();\n  } : _ref10$additionalActi,\n      _ref10$variant = _ref10.variant,\n      variant = _ref10$variant === void 0 ? 'full' : _ref10$variant,\n      _ref10$showTooltip = _ref10.showTooltip,\n      showTooltip = _ref10$showTooltip === void 0 ? true : _ref10$showTooltip;\n  var statuses = getStatuses(collection);\n  var statusLabel = getLabel({\n    allowModify: allowModify,\n    color: color,\n    docId: docId,\n    label: label,\n    status: status,\n    statuses: statuses,\n    suffix: suffix,\n    variant: variant\n  });\n\n  if (allowModify) {\n    return React.createElement(DropdownMenu, {\n      noWrapper: true,\n      renderTrigger: function (_ref11) {\n        var handleOpen = _ref11.handleOpen;\n        return statusLabel({\n          onClick: handleOpen,\n          showTooltip: showTooltip\n        });\n      },\n      options: Object.keys(statuses).map(function (stat) {\n        return {\n          id: stat,\n          label: React.createElement(T, {\n            id: \"Forms.status.\" + stat\n          }),\n          onClick: function () {\n            return additionalActions(stat, status).then(function () {\n              return updateDocument.run({\n                collection: collection,\n                object: {\n                  status: stat\n                },\n                docId: docId\n              });\n            });\n          }\n        };\n      })\n    });\n  }\n\n  return statusLabel({\n    showTooltip: showTooltip\n  });\n};\n\nmodule.exportDefault(StatusLabel);","map":{"version":3,"sources":["imports/core/components/StatusLabel/StatusLabel.jsx"],"names":["getStatuses","collection","LOAN_STATUS","colors","warning","PROMOTION_STATUS","primary","PROMOTION_LOT_STATUS","PROMOTION_LOT_REDUCED_STATUS","TASK_STATUS","error","LENDER_STATUS","PROPERTY_STATUS","REVENUE_STATUS","COMMISSION_STATUS","success","getLabel","variant","props","cx","allowModify","backgroundColor","color","statuses","label","showTooltip","StatusLabel","suffix","additionalActions","Promise","statusLabel","docId","status","handleOpen","onClick","stat","id","object"],"mappings":"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","sourcesContent":["// @flow\nimport React from 'react';\nimport cx from 'classnames';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport colors from '../../config/colors';\nimport {\n  PROMOTION_STATUS,\n  PROMOTIONS_COLLECTION,\n  PROMOTION_LOTS_COLLECTION,\n  PROMOTION_LOT_STATUS,\n  PROMOTION_LOT_REDUCED_STATUS,\n  TASKS_COLLECTION,\n  TASK_STATUS,\n  LOANS_COLLECTION,\n  LOAN_STATUS,\n  LENDERS_COLLECTION,\n  LENDER_STATUS,\n  PROPERTIES_COLLECTION,\n  PROPERTY_STATUS,\n  REVENUES_COLLECTION,\n  REVENUE_STATUS,\n  COMMISSION_STATUS,\n} from '../../api/constants';\nimport T from '../Translation';\nimport DropdownMenu from '../DropdownMenu';\nimport { updateDocument } from '../../api/methods/methodDefinitions';\n\ntype StatusLabelProps = {\n  status: string,\n  collection: string,\n  suffix?: string,\n  label: React.Node,\n  color: string,\n};\n\nconst getStatuses = (collection) => {\n  switch (collection) {\n  case LOANS_COLLECTION:\n    return {\n      [LOAN_STATUS.LEAD]: colors.secondary,\n      [LOAN_STATUS.ONGOING]: colors.primary,\n      [LOAN_STATUS.PENDING]: colors.warning,\n      [LOAN_STATUS.CLOSING]: colors.tertiary,\n      [LOAN_STATUS.BILLING]: colors.success,\n      [LOAN_STATUS.FINALIZED]: colors.success,\n      [LOAN_STATUS.UNSUCCESSFUL]: colors.error,\n      [LOAN_STATUS.TEST]: colors.warning,\n    };\n\n  case PROMOTIONS_COLLECTION:\n    return {\n      [PROMOTION_STATUS.CANCELLED]: colors.warning,\n      [PROMOTION_STATUS.FINISHED]: colors.error,\n      [PROMOTION_STATUS.OPEN]: colors.success,\n      [PROMOTION_STATUS.PREPARATION]: colors.primary,\n    };\n\n  case PROMOTION_LOTS_COLLECTION:\n    return {\n      [PROMOTION_LOT_STATUS.AVAILABLE]: colors.success,\n      [PROMOTION_LOT_STATUS.BOOKED]: colors.primary,\n      [PROMOTION_LOT_STATUS.SOLD]: colors.error,\n      [PROMOTION_LOT_REDUCED_STATUS.SOLD_TO_ME]: colors.tertiary,\n      [PROMOTION_LOT_REDUCED_STATUS.BOOKED_FOR_ME]: colors.primary,\n      [PROMOTION_LOT_REDUCED_STATUS.NOT_AVAILABLE]: colors.warning,\n    };\n\n  case TASKS_COLLECTION:\n    return {\n      [TASK_STATUS.ACTIVE]: colors.primary,\n      [TASK_STATUS.COMPLETED]: colors.success,\n      [TASK_STATUS.CANCELLED]: colors.error,\n    };\n\n  case LENDERS_COLLECTION:\n    return {\n      [LENDER_STATUS.TO_BE_CONTACTED]: colors.warning,\n      [LENDER_STATUS.CONTACTED]: colors.primary,\n      [LENDER_STATUS.OFFER_RECEIVED]: colors.success,\n      [LENDER_STATUS.TO_EXCLUDE]: colors.error,\n    };\n\n  case PROPERTIES_COLLECTION:\n    return {\n      [PROPERTY_STATUS.FOR_SALE]: colors.success,\n      [PROPERTY_STATUS.BOOKED]: colors.primary,\n      [PROPERTY_STATUS.SOLD]: colors.error,\n    };\n\n  case REVENUES_COLLECTION:\n    return {\n      [REVENUE_STATUS.EXPECTED]: colors.primary,\n      [REVENUE_STATUS.CLOSED]: colors.success,\n      [COMMISSION_STATUS.TO_BE_PAID]: colors.primary,\n      [COMMISSION_STATUS.PAID]: colors.success,\n    };\n\n  default:\n    throw new Error(`Unknown collection \"${collection}\" in StatusLabel`);\n  }\n};\nconst getLabel = ({\n  allowModify,\n  color,\n  label,\n  status,\n  statuses,\n  suffix,\n  variant,\n}) => {\n  switch (variant) {\n  case 'full':\n    return props => (\n      <span\n        className={cx({ allowModify, 'status-label': true })}\n        style={{ backgroundColor: color || statuses[status] }}\n        {...props}\n      >\n        <span>\n          {label || <T id={`Forms.status.${status}`} />}\n          {suffix}\n        </span>\n      </span>\n    );\n  case 'dot':\n    return ({ showTooltip, ...props }) =>\n      (showTooltip ? (\n        <Tooltip title={label || <T id={`Forms.status.${status}`} />}>\n          <span\n            className={cx({ allowModify, 'status-label-dot': true })}\n            {...props}\n          >\n            <span style={{ backgroundColor: color || statuses[status] }} />\n          </span>\n        </Tooltip>\n      ) : (\n        <span\n          className={cx({ allowModify, 'status-label-dot': true })}\n          {...props}\n        >\n          <span style={{ backgroundColor: color || statuses[status] }} />\n        </span>\n      ));\n\n  default:\n    break;\n  }\n};\n\nconst StatusLabel = ({\n  status,\n  collection,\n  suffix = '',\n  label = null,\n  color = null,\n  allowModify,\n  docId,\n  additionalActions = () => Promise.resolve(),\n  variant = 'full',\n  showTooltip = true,\n}: StatusLabelProps) => {\n  const statuses = getStatuses(collection);\n  const statusLabel = getLabel({\n    allowModify,\n    color,\n    docId,\n    label,\n    status,\n    statuses,\n    suffix,\n    variant,\n  });\n\n  if (allowModify) {\n    return (\n      <DropdownMenu\n        noWrapper\n        renderTrigger={({ handleOpen }) =>\n          statusLabel({ onClick: handleOpen, showTooltip })\n        }\n        options={Object.keys(statuses).map(stat => ({\n          id: stat,\n          label: <T id={`Forms.status.${stat}`} />,\n          onClick: () =>\n            additionalActions(stat, status).then(() =>\n              updateDocument.run({\n                collection,\n                object: { status: stat },\n                docId,\n              })),\n        }))}\n      />\n    );\n  }\n\n  return statusLabel({ showTooltip });\n};\n\nexport default StatusLabel;\n"]},"sourceType":"script","hash":"c4a1fbcc06eacd86673227d28d062f96a9f9230f"}
