{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/Florian/dev/epotek/microservices/backend/packages/epotek:accounts-ui/imports/accounts_ui.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"packages/epotek:accounts-ui/imports/accounts_ui.js","filename":"/Users/Florian/dev/epotek/microservices/backend/packages/epotek:accounts-ui/imports/accounts_ui.js","passPerPreset":false,"envName":"development","cwd":"/Users/Florian/dev/epotek/microservices/backend","root":"/Users/Florian/dev/epotek/microservices/backend","plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/Florian/dev/epotek/microservices/backend/packages/epotek:accounts-ui/imports/accounts_ui.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/epotek:accounts-ui/imports/accounts_ui.js"}},"code":"var Accounts;\nmodule.link(\"meteor/accounts-base\", {\n  Accounts: function (v) {\n    Accounts = v;\n  }\n}, 0);\nvar redirect, validatePassword, validateEmail, validateUsername;\nmodule.link(\"./helpers.js\", {\n  redirect: function (v) {\n    redirect = v;\n  },\n  validatePassword: function (v) {\n    validatePassword = v;\n  },\n  validateEmail: function (v) {\n    validateEmail = v;\n  },\n  validateUsername: function (v) {\n    validateUsername = v;\n  }\n}, 1);\n\n/**\n * @summary Accounts UI\n * @namespace\n * @memberOf Accounts\n */\nAccounts.ui = {};\nAccounts.ui._options = {\n  requestPermissions: [],\n  requestOfflineToken: {},\n  forceApprovalPrompt: {},\n  requireEmailVerification: false,\n  passwordSignupFields: 'EMAIL_ONLY_NO_PASSWORD',\n  minimumPasswordLength: 7,\n  loginPath: '/',\n  signUpPath: null,\n  resetPasswordPath: null,\n  profilePath: '/',\n  changePasswordPath: null,\n  homeRoutePath: '/',\n  onSubmitHook: function () {},\n  onPreSignUpHook: function () {\n    return new Promise(function (resolve) {\n      return resolve();\n    });\n  },\n  onPostSignUpHook: function () {},\n  onEnrollAccountHook: function () {\n    return redirect(\"\" + Accounts.ui._options.loginPath);\n  },\n  onResetPasswordHook: function () {\n    return redirect(\"\" + Accounts.ui._options.loginPath);\n  },\n  onVerifyEmailHook: function () {\n    return redirect(\"\" + Accounts.ui._options.profilePath);\n  },\n  onSignedInHook: function () {\n    return redirect(\"\" + Accounts.ui._options.homeRoutePath);\n  },\n  onSignedOutHook: function () {\n    return redirect(\"\" + Accounts.ui._options.homeRoutePath);\n  },\n  emailPattern: new RegExp('[^@]+@[^@.]{2,}.[^.@]+')\n};\n/**\n * @summary Configure the behavior of [`<Accounts.ui.LoginForm />`](#react-accounts-ui).\n * @anywhere\n * @param {Object} options\n * @param {Object} options.requestPermissions Which [permissions](#requestpermissions) to request from the user for each external service.\n * @param {Object} options.requestOfflineToken To ask the user for permission to act on their behalf when offline, map the relevant external service to `true`. Currently only supported with Google. See [Meteor.loginWithExternalService](#meteor_loginwithexternalservice) for more details.\n * @param {Object} options.forceApprovalPrompt If true, forces the user to approve the app's permissions, even if previously approved. Currently only supported with Google.\n * @param {String} options.passwordSignupFields Which fields to display in the user creation form. One of '`USERNAME_AND_EMAIL`', '`USERNAME_AND_OPTIONAL_EMAIL`', '`USERNAME_ONLY`', '`EMAIL_ONLY`', or '`NO_PASSWORD`' (default).\n */\n\nAccounts.ui.config = function (options) {\n  // validate options keys\n  var VALID_KEYS = ['passwordSignupFields', 'requestPermissions', 'requestOfflineToken', 'forbidClientAccountCreation', 'requireEmailVerification', 'minimumPasswordLength', 'loginPath', 'signUpPath', 'resetPasswordPath', 'profilePath', 'changePasswordPath', 'homeRoutePath', 'onSubmitHook', 'onPreSignUpHook', 'onPostSignUpHook', 'onEnrollAccountHook', 'onResetPasswordHook', 'onVerifyEmailHook', 'onSignedInHook', 'onSignedOutHook', 'validateField', 'emailPattern'];\n  Object.keys(options).forEach(function (key) {\n    if (!VALID_KEYS.includes(key)) throw new Error('Accounts.ui.config: Invalid key: ' + key);\n  }); // Deal with `passwordSignupFields`\n\n  if (options.passwordSignupFields) {\n    if (['USERNAME_AND_EMAIL', 'USERNAME_AND_OPTIONAL_EMAIL', 'USERNAME_ONLY', 'EMAIL_ONLY', 'EMAIL_ONLY_NO_PASSWORD', 'USERNAME_AND_EMAIL_NO_PASSWORD'].includes(options.passwordSignupFields)) {\n      Accounts.ui._options.passwordSignupFields = options.passwordSignupFields;\n    } else {\n      throw new Error('Accounts.ui.config: Invalid option for `passwordSignupFields`: ' + options.passwordSignupFields);\n    }\n  } // Deal with `requestPermissions`\n\n\n  if (options.requestPermissions) {\n    Object.keys(options.requestPermissions).forEach(function (service) {\n      var scope = options.requestPermissions[service];\n\n      if (Accounts.ui._options.requestPermissions[service]) {\n        throw new Error(\"Accounts.ui.config: Can't set `requestPermissions` more than once for \" + service);\n      } else if (!(scope instanceof Array)) {\n        throw new Error('Accounts.ui.config: Value for `requestPermissions` must be an array');\n      } else {\n        Accounts.ui._options.requestPermissions[service] = scope;\n      }\n    });\n  } // Deal with `requestOfflineToken`\n\n\n  if (options.requestOfflineToken) {\n    Object.keys(options.requestOfflineToken).forEach(function (service) {\n      var value = options.requestOfflineToken[service];\n      if (service !== 'google') throw new Error('Accounts.ui.config: `requestOfflineToken` only supported for Google login at the moment.');\n\n      if (Accounts.ui._options.requestOfflineToken[service]) {\n        throw new Error(\"Accounts.ui.config: Can't set `requestOfflineToken` more than once for \" + service);\n      } else {\n        Accounts.ui._options.requestOfflineToken[service] = value;\n      }\n    });\n  } // Deal with `forceApprovalPrompt`\n\n\n  if (options.forceApprovalPrompt) {\n    Object.keys(options.forceApprovalPrompt).forEach(function (service) {\n      var value = options.forceApprovalPrompt[service];\n      if (service !== 'google') throw new Error('Accounts.ui.config: `forceApprovalPrompt` only supported for Google login at the moment.');\n\n      if (Accounts.ui._options.forceApprovalPrompt[service]) {\n        throw new Error(\"Accounts.ui.config: Can't set `forceApprovalPrompt` more than once for \" + service);\n      } else {\n        Accounts.ui._options.forceApprovalPrompt[service] = value;\n      }\n    });\n  } // Deal with `requireEmailVerification`\n\n\n  if (options.requireEmailVerification) {\n    if (typeof options.requireEmailVerification != 'boolean') {\n      throw new Error(\"Accounts.ui.config: \\\"requireEmailVerification\\\" not a boolean\");\n    } else {\n      Accounts.ui._options.requireEmailVerification = options.requireEmailVerification;\n    }\n  } // Deal with `minimumPasswordLength`\n\n\n  if (options.minimumPasswordLength) {\n    if (typeof options.minimumPasswordLength != 'number') {\n      throw new Error(\"Accounts.ui.config: \\\"minimumPasswordLength\\\" not a number\");\n    } else {\n      Accounts.ui._options.minimumPasswordLength = options.minimumPasswordLength;\n    }\n  } // Deal with the hooks.\n\n\n  var _arr = ['onSubmitHook', 'onPreSignUpHook', 'onPostSignUpHook'];\n\n  for (var _i = 0; _i < _arr.length; _i++) {\n    var hook = _arr[_i];\n\n    if (options[hook]) {\n      if (typeof options[hook] != 'function') {\n        throw new Error(\"Accounts.ui.config: \\\"\" + hook + \"\\\" not a function\");\n      } else {\n        Accounts.ui._options[hook] = options[hook];\n      }\n    }\n  } // Deal with pattern.\n\n\n  var _arr2 = ['emailPattern'];\n\n  for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n    var _hook = _arr2[_i2];\n\n    if (options[_hook]) {\n      if (!(options[_hook] instanceof RegExp)) {\n        throw new Error(\"Accounts.ui.config: \\\"\" + _hook + \"\\\" not a Regular Expression\");\n      } else {\n        Accounts.ui._options[_hook] = options[_hook];\n      }\n    }\n  } // deal with the paths.\n\n\n  var _arr3 = ['loginPath', 'signUpPath', 'resetPasswordPath', 'profilePath', 'changePasswordPath', 'homeRoutePath'];\n\n  for (var _i3 = 0; _i3 < _arr3.length; _i3++) {\n    var path = _arr3[_i3];\n\n    if (typeof options[path] !== 'undefined') {\n      if (options[path] !== null && typeof options[path] !== 'string') {\n        throw new Error(\"Accounts.ui.config: \" + path + \" is not a string or null\");\n      } else {\n        Accounts.ui._options[path] = options[path];\n      }\n    }\n  } // deal with redirect hooks.\n\n\n  var _loop = function (_hook2) {\n    if (options[_hook2]) {\n      if (typeof options[_hook2] == 'function') {\n        Accounts.ui._options[_hook2] = options[_hook2];\n      } else if (typeof options[_hook2] == 'string') {\n        Accounts.ui._options[_hook2] = function () {\n          return redirect(options[_hook2]);\n        };\n      } else {\n        throw new Error(\"Accounts.ui.config: \\\"\" + _hook2 + \"\\\" not a function or an absolute or relative path\");\n      }\n    }\n  };\n\n  var _arr4 = ['onEnrollAccountHook', 'onResetPasswordHook', 'onVerifyEmailHook', 'onSignedInHook', 'onSignedOutHook'];\n\n  for (var _i4 = 0; _i4 < _arr4.length; _i4++) {\n    var _hook2 = _arr4[_i4];\n\n    _loop(_hook2);\n  }\n};\n\nmodule.exportDefault(Accounts);","map":{"version":3,"sources":["packages/epotek:accounts-ui/imports/accounts_ui.js"],"names":["Accounts","module","link","v","redirect","validatePassword","validateEmail","validateUsername","ui","_options","requestPermissions","requestOfflineToken","forceApprovalPrompt","requireEmailVerification","passwordSignupFields","minimumPasswordLength","loginPath","signUpPath","resetPasswordPath","profilePath","changePasswordPath","homeRoutePath","onSubmitHook","onPreSignUpHook","Promise","resolve","onPostSignUpHook","onEnrollAccountHook","onResetPasswordHook","onVerifyEmailHook","onSignedInHook","onSignedOutHook","emailPattern","RegExp","config","options","VALID_KEYS","Object","keys","forEach","key","includes","Error","service","scope","Array","value","hook","path","exportDefault"],"mappings":"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","sourcesContent":["import { Accounts } from 'meteor/accounts-base';\nimport {\n  redirect,\n  validatePassword,\n  validateEmail,\n  validateUsername\n} from './helpers.js';\n\n/**\n * @summary Accounts UI\n * @namespace\n * @memberOf Accounts\n */\nAccounts.ui = {};\n\nAccounts.ui._options = {\n  requestPermissions: [],\n  requestOfflineToken: {},\n  forceApprovalPrompt: {},\n  requireEmailVerification: false,\n  passwordSignupFields: 'EMAIL_ONLY_NO_PASSWORD',\n  minimumPasswordLength: 7,\n  loginPath: '/',\n  signUpPath: null,\n  resetPasswordPath: null,\n  profilePath: '/',\n  changePasswordPath: null,\n  homeRoutePath: '/',\n  onSubmitHook: () => {},\n  onPreSignUpHook: () => new Promise(resolve => resolve()),\n  onPostSignUpHook: () => {},\n  onEnrollAccountHook: () => redirect(`${Accounts.ui._options.loginPath}`),\n  onResetPasswordHook: () => redirect(`${Accounts.ui._options.loginPath}`),\n  onVerifyEmailHook: () => redirect(`${Accounts.ui._options.profilePath}`),\n  onSignedInHook: () => redirect(`${Accounts.ui._options.homeRoutePath}`),\n  onSignedOutHook: () => redirect(`${Accounts.ui._options.homeRoutePath}`),\n  emailPattern: new RegExp('[^@]+@[^@.]{2,}.[^.@]+')\n};\n\n/**\n * @summary Configure the behavior of [`<Accounts.ui.LoginForm />`](#react-accounts-ui).\n * @anywhere\n * @param {Object} options\n * @param {Object} options.requestPermissions Which [permissions](#requestpermissions) to request from the user for each external service.\n * @param {Object} options.requestOfflineToken To ask the user for permission to act on their behalf when offline, map the relevant external service to `true`. Currently only supported with Google. See [Meteor.loginWithExternalService](#meteor_loginwithexternalservice) for more details.\n * @param {Object} options.forceApprovalPrompt If true, forces the user to approve the app's permissions, even if previously approved. Currently only supported with Google.\n * @param {String} options.passwordSignupFields Which fields to display in the user creation form. One of '`USERNAME_AND_EMAIL`', '`USERNAME_AND_OPTIONAL_EMAIL`', '`USERNAME_ONLY`', '`EMAIL_ONLY`', or '`NO_PASSWORD`' (default).\n */\nAccounts.ui.config = function(options) {\n  // validate options keys\n  const VALID_KEYS = [\n    'passwordSignupFields',\n    'requestPermissions',\n    'requestOfflineToken',\n    'forbidClientAccountCreation',\n    'requireEmailVerification',\n    'minimumPasswordLength',\n    'loginPath',\n    'signUpPath',\n    'resetPasswordPath',\n    'profilePath',\n    'changePasswordPath',\n    'homeRoutePath',\n    'onSubmitHook',\n    'onPreSignUpHook',\n    'onPostSignUpHook',\n    'onEnrollAccountHook',\n    'onResetPasswordHook',\n    'onVerifyEmailHook',\n    'onSignedInHook',\n    'onSignedOutHook',\n    'validateField',\n    'emailPattern'\n  ];\n\n  Object.keys(options).forEach(function(key) {\n    if (!VALID_KEYS.includes(key))\n      throw new Error('Accounts.ui.config: Invalid key: ' + key);\n  });\n\n  // Deal with `passwordSignupFields`\n  if (options.passwordSignupFields) {\n    if (\n      [\n        'USERNAME_AND_EMAIL',\n        'USERNAME_AND_OPTIONAL_EMAIL',\n        'USERNAME_ONLY',\n        'EMAIL_ONLY',\n        'EMAIL_ONLY_NO_PASSWORD',\n        'USERNAME_AND_EMAIL_NO_PASSWORD'\n      ].includes(options.passwordSignupFields)\n    ) {\n      Accounts.ui._options.passwordSignupFields = options.passwordSignupFields;\n    } else {\n      throw new Error(\n        'Accounts.ui.config: Invalid option for `passwordSignupFields`: ' +\n          options.passwordSignupFields\n      );\n    }\n  }\n\n  // Deal with `requestPermissions`\n  if (options.requestPermissions) {\n    Object.keys(options.requestPermissions).forEach(service => {\n      const scope = options.requestPermissions[service];\n      if (Accounts.ui._options.requestPermissions[service]) {\n        throw new Error(\n          \"Accounts.ui.config: Can't set `requestPermissions` more than once for \" +\n            service\n        );\n      } else if (!(scope instanceof Array)) {\n        throw new Error(\n          'Accounts.ui.config: Value for `requestPermissions` must be an array'\n        );\n      } else {\n        Accounts.ui._options.requestPermissions[service] = scope;\n      }\n    });\n  }\n\n  // Deal with `requestOfflineToken`\n  if (options.requestOfflineToken) {\n    Object.keys(options.requestOfflineToken).forEach(service => {\n      const value = options.requestOfflineToken[service];\n      if (service !== 'google')\n        throw new Error(\n          'Accounts.ui.config: `requestOfflineToken` only supported for Google login at the moment.'\n        );\n\n      if (Accounts.ui._options.requestOfflineToken[service]) {\n        throw new Error(\n          \"Accounts.ui.config: Can't set `requestOfflineToken` more than once for \" +\n            service\n        );\n      } else {\n        Accounts.ui._options.requestOfflineToken[service] = value;\n      }\n    });\n  }\n\n  // Deal with `forceApprovalPrompt`\n  if (options.forceApprovalPrompt) {\n    Object.keys(options.forceApprovalPrompt).forEach(service => {\n      const value = options.forceApprovalPrompt[service];\n      if (service !== 'google')\n        throw new Error(\n          'Accounts.ui.config: `forceApprovalPrompt` only supported for Google login at the moment.'\n        );\n\n      if (Accounts.ui._options.forceApprovalPrompt[service]) {\n        throw new Error(\n          \"Accounts.ui.config: Can't set `forceApprovalPrompt` more than once for \" +\n            service\n        );\n      } else {\n        Accounts.ui._options.forceApprovalPrompt[service] = value;\n      }\n    });\n  }\n\n  // Deal with `requireEmailVerification`\n  if (options.requireEmailVerification) {\n    if (typeof options.requireEmailVerification != 'boolean') {\n      throw new Error(\n        `Accounts.ui.config: \"requireEmailVerification\" not a boolean`\n      );\n    } else {\n      Accounts.ui._options.requireEmailVerification =\n        options.requireEmailVerification;\n    }\n  }\n\n  // Deal with `minimumPasswordLength`\n  if (options.minimumPasswordLength) {\n    if (typeof options.minimumPasswordLength != 'number') {\n      throw new Error(\n        `Accounts.ui.config: \"minimumPasswordLength\" not a number`\n      );\n    } else {\n      Accounts.ui._options.minimumPasswordLength =\n        options.minimumPasswordLength;\n    }\n  }\n\n  // Deal with the hooks.\n  for (let hook of ['onSubmitHook', 'onPreSignUpHook', 'onPostSignUpHook']) {\n    if (options[hook]) {\n      if (typeof options[hook] != 'function') {\n        throw new Error(`Accounts.ui.config: \"${hook}\" not a function`);\n      } else {\n        Accounts.ui._options[hook] = options[hook];\n      }\n    }\n  }\n\n  // Deal with pattern.\n  for (let hook of ['emailPattern']) {\n    if (options[hook]) {\n      if (!(options[hook] instanceof RegExp)) {\n        throw new Error(\n          `Accounts.ui.config: \"${hook}\" not a Regular Expression`\n        );\n      } else {\n        Accounts.ui._options[hook] = options[hook];\n      }\n    }\n  }\n\n  // deal with the paths.\n  for (let path of [\n    'loginPath',\n    'signUpPath',\n    'resetPasswordPath',\n    'profilePath',\n    'changePasswordPath',\n    'homeRoutePath'\n  ]) {\n    if (typeof options[path] !== 'undefined') {\n      if (options[path] !== null && typeof options[path] !== 'string') {\n        throw new Error(`Accounts.ui.config: ${path} is not a string or null`);\n      } else {\n        Accounts.ui._options[path] = options[path];\n      }\n    }\n  }\n\n  // deal with redirect hooks.\n  for (let hook of [\n    'onEnrollAccountHook',\n    'onResetPasswordHook',\n    'onVerifyEmailHook',\n    'onSignedInHook',\n    'onSignedOutHook'\n  ]) {\n    if (options[hook]) {\n      if (typeof options[hook] == 'function') {\n        Accounts.ui._options[hook] = options[hook];\n      } else if (typeof options[hook] == 'string') {\n        Accounts.ui._options[hook] = () => redirect(options[hook]);\n      } else {\n        throw new Error(\n          `Accounts.ui.config: \"${hook}\" not a function or an absolute or relative path`\n        );\n      }\n    }\n  }\n};\n\nexport default Accounts;\n"]},"sourceType":"script","hash":"a49151b9f67d24885b0ae3bb5989c6d3793f3da5"}
