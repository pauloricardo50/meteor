{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/Florian/dev/epotek/microservices/backend/imports/core/utils/general.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties",["flow",{}],"jsx",["flow",{}],["flow",{}],"objectRestSpread","objectRestSpread","dynamicImport","asyncGenerators","classProperties","classPrivateProperties"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.x86_64"},"sourceFileName":"imports/core/utils/general.js","filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/utils/general.js","inputSourceMap":{"version":3,"sources":["imports/core/utils/general.js"],"names":["isArray","arrayify","value","getPercent","array","length","percent","reduce","tot","val","undefined","Number","isFinite","getAggregatePercent","percentageObjects","aggregatePercent","count","aggregateCount","obj","normalize","item","id","_id","simpleHash","data","string","JSON","stringify","hash","i","char","charCodeAt"],"mappings":"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","sourcesContent":["// @flow\nimport isArray from 'lodash/isArray';\n\nexport const arrayify = (value) => {\n  if (value) {\n    if (isArray(value)) {\n      return value;\n    }\n    return [value];\n  }\n\n  return [];\n};\n\n/**\n * getPercent - Given an array of values, any value that is undefined or null\n * will be counted as incomplete, make sure we don't divide by 0\n *\n * @param {array} array Array of numbers, strings, or dates\n *\n * @return {number} a value between 0 and 1\n */\nexport const getPercent = (array) => {\n  if (!array) {\n    return 0;\n  }\n  if (array.length === 0) {\n    // If array is empty, return 100%\n    return 1;\n  }\n\n  const percent = array.reduce((tot, val) => {\n    if (isArray(val)) {\n      // Empty arrays need to be filled\n      return tot + (val.length ? 1 : 0);\n    }\n    if (val !== undefined && val !== null) {\n      return tot + 1;\n    }\n    return tot;\n  }, 0) / array.length;\n  return Number.isFinite(percent) ? percent : 0;\n};\n\n// Given multiple objects of the form { percent, count },\n// Merge them together with a single count and percent\nexport const getAggregatePercent = (percentageObjects) => {\n  const {\n    percent: aggregatePercent,\n    count: aggregateCount,\n  } = percentageObjects.reduce(\n    (obj, { percent, count }) => ({\n      percent: obj.percent + percent * count,\n      count: obj.count + count,\n    }),\n    { percent: 0, count: 0 },\n  );\n\n  return {\n    count: aggregateCount,\n    percent: aggregateCount === 0 ? 0 : aggregatePercent / aggregateCount,\n  };\n};\n\nexport const normalize = array =>\n  array.reduce((obj, item) => ({ ...obj, [item.id || item._id]: item }), {});\n\nexport const simpleHash = (data) => {\n  let string = data;\n  if (typeof data !== 'string') {\n    string = JSON.stringify(data);\n  }\n\n  let hash = 0;\n  if (string.length === 0) {\n    return hash;\n  }\n  for (let i = 0; i < string.length; i++) {\n    const char = string.charCodeAt(i);\n    hash = (hash << 5) - hash + char;\n    hash &= hash; // Convert to 32bit integer\n  }\n  return hash;\n};\n"]},"passPerPreset":false,"envName":"development","cwd":"/Users/Florian/dev/epotek/microservices/backend","root":"/Users/Florian/dev/epotek/microservices/backend","plugins":[{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}}],"presets":[],"generatorOpts":{"filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/utils/general.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/core/utils/general.js"}},"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  arrayify: () => arrayify,\n  getPercent: () => getPercent,\n  getAggregatePercent: () => getAggregatePercent,\n  normalize: () => normalize,\n  simpleHash: () => simpleHash\n});\nlet isArray;\nmodule.link(\"lodash/isArray\", {\n  default(v) {\n    isArray = v;\n  }\n\n}, 0);\n\nconst arrayify = value => {\n  if (value) {\n    if (isArray(value)) {\n      return value;\n    }\n\n    return [value];\n  }\n\n  return [];\n};\n\nconst getPercent = array => {\n  if (!array) {\n    return 0;\n  }\n\n  if (array.length === 0) {\n    // If array is empty, return 100%\n    return 1;\n  }\n\n  const percent = array.reduce((tot, val) => {\n    if (isArray(val)) {\n      // Empty arrays need to be filled\n      return tot + (val.length ? 1 : 0);\n    }\n\n    if (val !== undefined && val !== null) {\n      return tot + 1;\n    }\n\n    return tot;\n  }, 0) / array.length;\n  return Number.isFinite(percent) ? percent : 0;\n};\n\nconst getAggregatePercent = percentageObjects => {\n  const {\n    percent: aggregatePercent,\n    count: aggregateCount\n  } = percentageObjects.reduce((obj, {\n    percent,\n    count\n  }) => ({\n    percent: obj.percent + percent * count,\n    count: obj.count + count\n  }), {\n    percent: 0,\n    count: 0\n  });\n  return {\n    count: aggregateCount,\n    percent: aggregateCount === 0 ? 0 : aggregatePercent / aggregateCount\n  };\n};\n\nconst normalize = array => array.reduce((obj, item) => (0, _objectSpread2.default)({}, obj, {\n  [item.id || item._id]: item\n}), {});\n\nconst simpleHash = data => {\n  let string = data;\n\n  if (typeof data !== 'string') {\n    string = JSON.stringify(data);\n  }\n\n  let hash = 0;\n\n  if (string.length === 0) {\n    return hash;\n  }\n\n  for (let i = 0; i < string.length; i++) {\n    const char = string.charCodeAt(i);\n    hash = (hash << 5) - hash + char;\n    hash &= hash; // Convert to 32bit integer\n  }\n\n  return hash;\n};","map":{"version":3,"sources":["imports/core/utils/general.js"],"names":["arrayify","value","isArray","getPercent","array","percent","tot","val","Number","getAggregatePercent","percentageObjects","count","aggregateCount","obj","aggregatePercent","normalize","item","simpleHash","data","string","JSON","hash","i","char"],"mappings":"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","sourcesContent":["// @flow\nimport isArray from 'lodash/isArray';\n\nexport const arrayify = (value) => {\n  if (value) {\n    if (isArray(value)) {\n      return value;\n    }\n    return [value];\n  }\n\n  return [];\n};\n\n/**\n * getPercent - Given an array of values, any value that is undefined or null\n * will be counted as incomplete, make sure we don't divide by 0\n *\n * @param {array} array Array of numbers, strings, or dates\n *\n * @return {number} a value between 0 and 1\n */\nexport const getPercent = (array) => {\n  if (!array) {\n    return 0;\n  }\n  if (array.length === 0) {\n    // If array is empty, return 100%\n    return 1;\n  }\n\n  const percent = array.reduce((tot, val) => {\n    if (isArray(val)) {\n      // Empty arrays need to be filled\n      return tot + (val.length ? 1 : 0);\n    }\n    if (val !== undefined && val !== null) {\n      return tot + 1;\n    }\n    return tot;\n  }, 0) / array.length;\n  return Number.isFinite(percent) ? percent : 0;\n};\n\n// Given multiple objects of the form { percent, count },\n// Merge them together with a single count and percent\nexport const getAggregatePercent = (percentageObjects) => {\n  const {\n    percent: aggregatePercent,\n    count: aggregateCount,\n  } = percentageObjects.reduce(\n    (obj, { percent, count }) => ({\n      percent: obj.percent + percent * count,\n      count: obj.count + count,\n    }),\n    { percent: 0, count: 0 },\n  );\n\n  return {\n    count: aggregateCount,\n    percent: aggregateCount === 0 ? 0 : aggregatePercent / aggregateCount,\n  };\n};\n\nexport const normalize = array =>\n  array.reduce((obj, item) => ({ ...obj, [item.id || item._id]: item }), {});\n\nexport const simpleHash = (data) => {\n  let string = data;\n  if (typeof data !== 'string') {\n    string = JSON.stringify(data);\n  }\n\n  let hash = 0;\n  if (string.length === 0) {\n    return hash;\n  }\n  for (let i = 0; i < string.length; i++) {\n    const char = string.charCodeAt(i);\n    hash = (hash << 5) - hash + char;\n    hash &= hash; // Convert to 32bit integer\n  }\n  return hash;\n};\n"]},"sourceType":"script","hash":"f2269cb98bf7eed47263b821a73579c7eaec85d1"}
