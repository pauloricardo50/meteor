{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/widget1/widget1Math.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties",["flow",{}],"dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"imports/core/components/widget1/widget1Math.js","filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/widget1/widget1Math.js","inputSourceMap":{"version":3,"sources":["imports/core/components/widget1/widget1Math.js"],"names":["SUCCESS","WARNING","ERROR","NOTARY_FEES","AMORTIZATION_STOP","MAINTENANCE_REAL","MAINTENANCE_FINMA","INTERESTS_FINMA","MAX_BORROW_RATIO_PRIMARY_PROPERTY","MAX_BORROW_RATIO_OTHER","MAX_BORROW_RATIO_WITH_PLEDGE","FORTUNE_WARNING_TIGHT","INCOME_WARNING_TIGHT","FORTUNE_ERROR","INCOME_ERROR","MAX_INCOME_RATIO","MAX_INCOME_RATIO_TIGHT","getLoanValue","propertyValue","fortune","getRefinancingBorrowRatio","loan","getBorrowRatio","getYearlyAmortization","loanValue","yearsToRetirement","borrowValue","percentToAmortize","getSimpleYearlyInterests","interests","getSimpleYearlyMaintenance","maintenanceRate","getIncomeRatio","yearlySalary","monthlyCost","getFinmaMonthlyCost","wantedLoan","maintenanceMonthly","interestsMonthly","amortizationMonthly","totalMonthly","validateIncomeRatio","incomeRatio","safeIncomeRatio","status","error","undefined","validateBorrowRatio","borrowRatio","isPrimary","allowInsurance","maxRatio"],"mappings":"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","sourcesContent":["import { SUCCESS, WARNING, ERROR } from 'core/api/constants';\n\nimport {\n  NOTARY_FEES,\n  AMORTIZATION_STOP,\n  MAINTENANCE_REAL,\n  MAINTENANCE_FINMA,\n  INTERESTS_FINMA,\n  MAX_BORROW_RATIO_PRIMARY_PROPERTY,\n  MAX_BORROW_RATIO_OTHER,\n  MAX_BORROW_RATIO_WITH_PLEDGE,\n  FORTUNE_WARNING_TIGHT,\n  INCOME_WARNING_TIGHT,\n  FORTUNE_ERROR,\n  INCOME_ERROR,\n  MAX_INCOME_RATIO,\n  MAX_INCOME_RATIO_TIGHT,\n} from 'core/config/financeConstants';\n\nexport const getLoanValue = (propertyValue, fortune) =>\n  propertyValue * (1 + NOTARY_FEES) - fortune;\n\nexport const getRefinancingBorrowRatio = (propertyValue, loan) =>\n  loan / propertyValue;\n\nexport const getBorrowRatio = (propertyValue, fortune) =>\n  getRefinancingBorrowRatio(\n    propertyValue,\n    getLoanValue(propertyValue, fortune),\n  );\n\nexport const getYearlyAmortization = ({\n  propertyValue,\n  loanValue,\n  yearsToRetirement = 15,\n}) => {\n  const borrowValue = loanValue / propertyValue;\n  const percentToAmortize = borrowValue - AMORTIZATION_STOP;\n\n  if (percentToAmortize <= 0) {\n    // If you're below the cut-off value, no need to amortize\n    return 0;\n  }\n\n  // borrowValue is above 65%\n  // 15 years amortization is the default, but if you're older, you'll\n  // have to amortize faster\n  return (percentToAmortize * propertyValue) / yearsToRetirement;\n};\n\n// Given the value of a property, the down payment and interest rate,\n// return the yearly interests to pay.\n// This includes the money lost through NOTARY_FEES\nexport const getSimpleYearlyInterests = (loanValue, interests) =>\n  loanValue * interests;\n\nexport const getSimpleYearlyMaintenance = (\n  propertyValue,\n  maintenanceRate = MAINTENANCE_REAL,\n) => maintenanceRate * propertyValue;\n\nexport const getIncomeRatio = (yearlySalary, monthlyCost) =>\n  monthlyCost / (yearlySalary / 12);\n\nexport const getFinmaMonthlyCost = (propertyValue, fortune, wantedLoan) => {\n  const maintenanceMonthly = getSimpleYearlyMaintenance(propertyValue, MAINTENANCE_FINMA) / 12;\n  const loanValue = wantedLoan || getLoanValue(propertyValue, fortune);\n  const interestsMonthly = getSimpleYearlyInterests(loanValue, INTERESTS_FINMA) / 12;\n  const amortizationMonthly = getYearlyAmortization({ propertyValue, loanValue }) / 12;\n\n  return {\n    maintenanceMonthly,\n    interestsMonthly,\n    amortizationMonthly,\n    totalMonthly: maintenanceMonthly + interestsMonthly + amortizationMonthly,\n  };\n};\n\nexport const validateIncomeRatio = (incomeRatio) => {\n  // add 0.01% to avoid rounding issues\n  const safeIncomeRatio = incomeRatio - 0.0001;\n  if (safeIncomeRatio <= MAX_INCOME_RATIO) {\n    return { status: SUCCESS, error: undefined };\n  }\n  if (safeIncomeRatio <= MAX_INCOME_RATIO_TIGHT) {\n    return { status: WARNING, error: INCOME_WARNING_TIGHT };\n  }\n\n  return { status: ERROR, error: INCOME_ERROR };\n};\n\nexport const validateBorrowRatio = (\n  borrowRatio,\n  isPrimary = true,\n  allowInsurance = true,\n) => {\n  const maxRatio = isPrimary\n    ? MAX_BORROW_RATIO_PRIMARY_PROPERTY\n    : MAX_BORROW_RATIO_OTHER;\n\n  if (borrowRatio <= maxRatio) {\n    return { status: SUCCESS, error: undefined };\n  }\n  if (allowInsurance && borrowRatio <= MAX_BORROW_RATIO_WITH_PLEDGE) {\n    return { status: WARNING, error: FORTUNE_WARNING_TIGHT };\n  }\n\n  return { status: ERROR, error: FORTUNE_ERROR };\n};\n"]},"passPerPreset":false,"envName":"development","cwd":"/Users/Florian/dev/epotek/microservices/backend","root":"/Users/Florian/dev/epotek/microservices/backend","plugins":[{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/components/widget1/widget1Math.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/core/components/widget1/widget1Math.js"}},"code":"module.export({\n  getLoanValue: function () {\n    return getLoanValue;\n  },\n  getRefinancingBorrowRatio: function () {\n    return getRefinancingBorrowRatio;\n  },\n  getBorrowRatio: function () {\n    return getBorrowRatio;\n  },\n  getYearlyAmortization: function () {\n    return getYearlyAmortization;\n  },\n  getSimpleYearlyInterests: function () {\n    return getSimpleYearlyInterests;\n  },\n  getSimpleYearlyMaintenance: function () {\n    return getSimpleYearlyMaintenance;\n  },\n  getIncomeRatio: function () {\n    return getIncomeRatio;\n  },\n  getFinmaMonthlyCost: function () {\n    return getFinmaMonthlyCost;\n  },\n  validateIncomeRatio: function () {\n    return validateIncomeRatio;\n  },\n  validateBorrowRatio: function () {\n    return validateBorrowRatio;\n  }\n});\nvar SUCCESS, WARNING, ERROR;\nmodule.link(\"../../api/constants\", {\n  SUCCESS: function (v) {\n    SUCCESS = v;\n  },\n  WARNING: function (v) {\n    WARNING = v;\n  },\n  ERROR: function (v) {\n    ERROR = v;\n  }\n}, 0);\nvar NOTARY_FEES, AMORTIZATION_STOP, MAINTENANCE_REAL, MAINTENANCE_FINMA, INTERESTS_FINMA, MAX_BORROW_RATIO_PRIMARY_PROPERTY, MAX_BORROW_RATIO_OTHER, MAX_BORROW_RATIO_WITH_PLEDGE, FORTUNE_WARNING_TIGHT, INCOME_WARNING_TIGHT, FORTUNE_ERROR, INCOME_ERROR, MAX_INCOME_RATIO, MAX_INCOME_RATIO_TIGHT;\nmodule.link(\"../../config/financeConstants\", {\n  NOTARY_FEES: function (v) {\n    NOTARY_FEES = v;\n  },\n  AMORTIZATION_STOP: function (v) {\n    AMORTIZATION_STOP = v;\n  },\n  MAINTENANCE_REAL: function (v) {\n    MAINTENANCE_REAL = v;\n  },\n  MAINTENANCE_FINMA: function (v) {\n    MAINTENANCE_FINMA = v;\n  },\n  INTERESTS_FINMA: function (v) {\n    INTERESTS_FINMA = v;\n  },\n  MAX_BORROW_RATIO_PRIMARY_PROPERTY: function (v) {\n    MAX_BORROW_RATIO_PRIMARY_PROPERTY = v;\n  },\n  MAX_BORROW_RATIO_OTHER: function (v) {\n    MAX_BORROW_RATIO_OTHER = v;\n  },\n  MAX_BORROW_RATIO_WITH_PLEDGE: function (v) {\n    MAX_BORROW_RATIO_WITH_PLEDGE = v;\n  },\n  FORTUNE_WARNING_TIGHT: function (v) {\n    FORTUNE_WARNING_TIGHT = v;\n  },\n  INCOME_WARNING_TIGHT: function (v) {\n    INCOME_WARNING_TIGHT = v;\n  },\n  FORTUNE_ERROR: function (v) {\n    FORTUNE_ERROR = v;\n  },\n  INCOME_ERROR: function (v) {\n    INCOME_ERROR = v;\n  },\n  MAX_INCOME_RATIO: function (v) {\n    MAX_INCOME_RATIO = v;\n  },\n  MAX_INCOME_RATIO_TIGHT: function (v) {\n    MAX_INCOME_RATIO_TIGHT = v;\n  }\n}, 1);\n\nvar getLoanValue = function (propertyValue, fortune) {\n  return propertyValue * (1 + NOTARY_FEES) - fortune;\n};\n\nvar getRefinancingBorrowRatio = function (propertyValue, loan) {\n  return loan / propertyValue;\n};\n\nvar getBorrowRatio = function (propertyValue, fortune) {\n  return getRefinancingBorrowRatio(propertyValue, getLoanValue(propertyValue, fortune));\n};\n\nvar getYearlyAmortization = function (_ref) {\n  var propertyValue = _ref.propertyValue,\n      loanValue = _ref.loanValue,\n      _ref$yearsToRetiremen = _ref.yearsToRetirement,\n      yearsToRetirement = _ref$yearsToRetiremen === void 0 ? 15 : _ref$yearsToRetiremen;\n  var borrowValue = loanValue / propertyValue;\n  var percentToAmortize = borrowValue - AMORTIZATION_STOP;\n\n  if (percentToAmortize <= 0) {\n    // If you're below the cut-off value, no need to amortize\n    return 0;\n  } // borrowValue is above 65%\n  // 15 years amortization is the default, but if you're older, you'll\n  // have to amortize faster\n\n\n  return percentToAmortize * propertyValue / yearsToRetirement;\n};\n\nvar getSimpleYearlyInterests = function (loanValue, interests) {\n  return loanValue * interests;\n};\n\nvar getSimpleYearlyMaintenance = function (propertyValue) {\n  var maintenanceRate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : MAINTENANCE_REAL;\n  return maintenanceRate * propertyValue;\n};\n\nvar getIncomeRatio = function (yearlySalary, monthlyCost) {\n  return monthlyCost / (yearlySalary / 12);\n};\n\nvar getFinmaMonthlyCost = function (propertyValue, fortune, wantedLoan) {\n  var maintenanceMonthly = getSimpleYearlyMaintenance(propertyValue, MAINTENANCE_FINMA) / 12;\n  var loanValue = wantedLoan || getLoanValue(propertyValue, fortune);\n  var interestsMonthly = getSimpleYearlyInterests(loanValue, INTERESTS_FINMA) / 12;\n  var amortizationMonthly = getYearlyAmortization({\n    propertyValue: propertyValue,\n    loanValue: loanValue\n  }) / 12;\n  return {\n    maintenanceMonthly: maintenanceMonthly,\n    interestsMonthly: interestsMonthly,\n    amortizationMonthly: amortizationMonthly,\n    totalMonthly: maintenanceMonthly + interestsMonthly + amortizationMonthly\n  };\n};\n\nvar validateIncomeRatio = function (incomeRatio) {\n  // add 0.01% to avoid rounding issues\n  var safeIncomeRatio = incomeRatio - 0.0001;\n\n  if (safeIncomeRatio <= MAX_INCOME_RATIO) {\n    return {\n      status: SUCCESS,\n      error: undefined\n    };\n  }\n\n  if (safeIncomeRatio <= MAX_INCOME_RATIO_TIGHT) {\n    return {\n      status: WARNING,\n      error: INCOME_WARNING_TIGHT\n    };\n  }\n\n  return {\n    status: ERROR,\n    error: INCOME_ERROR\n  };\n};\n\nvar validateBorrowRatio = function (borrowRatio) {\n  var isPrimary = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var allowInsurance = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var maxRatio = isPrimary ? MAX_BORROW_RATIO_PRIMARY_PROPERTY : MAX_BORROW_RATIO_OTHER;\n\n  if (borrowRatio <= maxRatio) {\n    return {\n      status: SUCCESS,\n      error: undefined\n    };\n  }\n\n  if (allowInsurance && borrowRatio <= MAX_BORROW_RATIO_WITH_PLEDGE) {\n    return {\n      status: WARNING,\n      error: FORTUNE_WARNING_TIGHT\n    };\n  }\n\n  return {\n    status: ERROR,\n    error: FORTUNE_ERROR\n  };\n};","map":{"version":3,"sources":["imports/core/components/widget1/widget1Math.js"],"names":["SUCCESS","ERROR","getLoanValue","propertyValue","getRefinancingBorrowRatio","loan","getBorrowRatio","getYearlyAmortization","yearsToRetirement","borrowValue","loanValue","percentToAmortize","getSimpleYearlyInterests","getSimpleYearlyMaintenance","maintenanceRate","getIncomeRatio","monthlyCost","yearlySalary","getFinmaMonthlyCost","maintenanceMonthly","wantedLoan","interestsMonthly","amortizationMonthly","totalMonthly","validateIncomeRatio","incomeRatio","safeIncomeRatio","status","error","undefined","INCOME_WARNING_TIGHT","INCOME_ERROR","validateBorrowRatio","isPrimary","allowInsurance","maxRatio","borrowRatio","FORTUNE_WARNING_TIGHT","FORTUNE_ERROR"],"mappings":"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","sourcesContent":["import { SUCCESS, WARNING, ERROR } from 'core/api/constants';\n\nimport {\n  NOTARY_FEES,\n  AMORTIZATION_STOP,\n  MAINTENANCE_REAL,\n  MAINTENANCE_FINMA,\n  INTERESTS_FINMA,\n  MAX_BORROW_RATIO_PRIMARY_PROPERTY,\n  MAX_BORROW_RATIO_OTHER,\n  MAX_BORROW_RATIO_WITH_PLEDGE,\n  FORTUNE_WARNING_TIGHT,\n  INCOME_WARNING_TIGHT,\n  FORTUNE_ERROR,\n  INCOME_ERROR,\n  MAX_INCOME_RATIO,\n  MAX_INCOME_RATIO_TIGHT,\n} from 'core/config/financeConstants';\n\nexport const getLoanValue = (propertyValue, fortune) =>\n  propertyValue * (1 + NOTARY_FEES) - fortune;\n\nexport const getRefinancingBorrowRatio = (propertyValue, loan) =>\n  loan / propertyValue;\n\nexport const getBorrowRatio = (propertyValue, fortune) =>\n  getRefinancingBorrowRatio(\n    propertyValue,\n    getLoanValue(propertyValue, fortune),\n  );\n\nexport const getYearlyAmortization = ({\n  propertyValue,\n  loanValue,\n  yearsToRetirement = 15,\n}) => {\n  const borrowValue = loanValue / propertyValue;\n  const percentToAmortize = borrowValue - AMORTIZATION_STOP;\n\n  if (percentToAmortize <= 0) {\n    // If you're below the cut-off value, no need to amortize\n    return 0;\n  }\n\n  // borrowValue is above 65%\n  // 15 years amortization is the default, but if you're older, you'll\n  // have to amortize faster\n  return (percentToAmortize * propertyValue) / yearsToRetirement;\n};\n\n// Given the value of a property, the down payment and interest rate,\n// return the yearly interests to pay.\n// This includes the money lost through NOTARY_FEES\nexport const getSimpleYearlyInterests = (loanValue, interests) =>\n  loanValue * interests;\n\nexport const getSimpleYearlyMaintenance = (\n  propertyValue,\n  maintenanceRate = MAINTENANCE_REAL,\n) => maintenanceRate * propertyValue;\n\nexport const getIncomeRatio = (yearlySalary, monthlyCost) =>\n  monthlyCost / (yearlySalary / 12);\n\nexport const getFinmaMonthlyCost = (propertyValue, fortune, wantedLoan) => {\n  const maintenanceMonthly = getSimpleYearlyMaintenance(propertyValue, MAINTENANCE_FINMA) / 12;\n  const loanValue = wantedLoan || getLoanValue(propertyValue, fortune);\n  const interestsMonthly = getSimpleYearlyInterests(loanValue, INTERESTS_FINMA) / 12;\n  const amortizationMonthly = getYearlyAmortization({ propertyValue, loanValue }) / 12;\n\n  return {\n    maintenanceMonthly,\n    interestsMonthly,\n    amortizationMonthly,\n    totalMonthly: maintenanceMonthly + interestsMonthly + amortizationMonthly,\n  };\n};\n\nexport const validateIncomeRatio = (incomeRatio) => {\n  // add 0.01% to avoid rounding issues\n  const safeIncomeRatio = incomeRatio - 0.0001;\n  if (safeIncomeRatio <= MAX_INCOME_RATIO) {\n    return { status: SUCCESS, error: undefined };\n  }\n  if (safeIncomeRatio <= MAX_INCOME_RATIO_TIGHT) {\n    return { status: WARNING, error: INCOME_WARNING_TIGHT };\n  }\n\n  return { status: ERROR, error: INCOME_ERROR };\n};\n\nexport const validateBorrowRatio = (\n  borrowRatio,\n  isPrimary = true,\n  allowInsurance = true,\n) => {\n  const maxRatio = isPrimary\n    ? MAX_BORROW_RATIO_PRIMARY_PROPERTY\n    : MAX_BORROW_RATIO_OTHER;\n\n  if (borrowRatio <= maxRatio) {\n    return { status: SUCCESS, error: undefined };\n  }\n  if (allowInsurance && borrowRatio <= MAX_BORROW_RATIO_WITH_PLEDGE) {\n    return { status: WARNING, error: FORTUNE_WARNING_TIGHT };\n  }\n\n  return { status: ERROR, error: FORTUNE_ERROR };\n};\n"]},"sourceType":"script","hash":"a74e2023484445ff698bc3bd9f2a26fcc114480d"}
