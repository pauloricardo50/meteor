{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/Florian/dev/epotek/microservices/backend/imports/core/utils/notaryFees/NotaryFeesCalculator.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties",["flow",{}],"dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"imports/core/utils/notaryFees/NotaryFeesCalculator.js","filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/utils/notaryFees/NotaryFeesCalculator.js","inputSourceMap":{"version":3,"sources":["imports/core/utils/notaryFees/NotaryFeesCalculator.js"],"names":["cantonConfigs","Calculator","NOTARY_FEES","PURCHASE_TYPE","roundToCents","val","Number","toFixed","roundObjectKeys","obj","Object","keys","reduce","newObj","key","NotaryFeesCalculator","constructor","canton","init","config","assign","hasDetailedConfig","shouldUseConstructionMath","loan","structureId","hasDetailedValue","hasDetailedPropertyValue","shouldUseConstructionNotaryFees","getNotaryFeesForLoan","propertyValue","selectPropertyValue","getDefaultFees","residenceType","mortgageNoteIncrease","getMortgageNoteIncrease","buyersContractFees","mortgageNoteFees","deductions","getDeductions","propertyTransferTax","propertyRegistrationTax","roundedResult","total","estimate","getNotaryFeesWithoutLoan","buyersContractFeesAcquisition","purchaseType","REFINANCING","landValue","constructionValue","additionalMargin","selectProperty","buyersContractFeesConstruction","notaryIncomeFromProperty","landRegistryPropertyTax","additionalFees","propertyConstructionTax","mortgageNoteRegistrationTax","notaryIncomeFromMortgageNote","landRegistryMortgageNoteTax","buyersContractDeductions","transferTax","mortgageNoteDeductions"],"mappings":"AAAA,OAAO,KAAKA,aAAZ;AACA,OAAOC,UAAP;AACA,SAASC,WAAT;AACA,SAASC,aAAT;;AAEA,MAAMC,YAAY,GAAGC,GAAG,IAAIC,MAAM,CAACD,GAAG,CAACE,OAAJ,CAAY,CAAZ,CAAD,CAAlC;;AAEA,MAAMC,eAAe,GAAGC,GAAG,IACzBC,MAAM,CAACC,IAAP,CAAYF,GAAZ,EAAiBG,MAAjB,CACE,CAACC,MAAD,EAASC,GAAT,MAAkB,EAChB,GAAGD,MADa;AAEhB,GAACC,GAAD,GAAO,OAAOL,GAAG,CAACK,GAAD,CAAV,KAAoB,QAApB,GAA+BV,YAAY,CAACK,GAAG,CAACK,GAAD,CAAJ,CAA3C,GAAwDL,GAAG,CAACK,GAAD;AAFlD,CAAlB,CADF,EAKE,EALF,CADF;;AASA,MAAMC,oBAAN,CAA2B;AACzBC,EAAAA,WAAW,CAAC;AAAEC,IAAAA;AAAF,GAAD,EAAa;AACtB,SAAKC,IAAL,CAAUD,MAAV;AACD;;AAEDC,EAAAA,IAAI,CAACD,MAAD,EAAS;AACX,UAAME,MAAM,GAAGnB,aAAa,CAACiB,MAAD,CAA5B;AACA,SAAKA,MAAL,GAAcA,MAAd;AAEAP,IAAAA,MAAM,CAACU,MAAP,CAAc,IAAd,EAAoBD,MAApB;AACD;;AAEDE,EAAAA,iBAAiB,GAAG;AAClB,WAAOrB,aAAa,CAAC,KAAKiB,MAAN,CAApB;AACD;;AAEDK,EAAAA,yBAAyB,CAAC;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,GAAD,EAAwB;AAC/C,UAAMC,gBAAgB,GAAGxB,UAAU,CAACyB,wBAAX,CAAoC;AAC3DH,MAAAA,IAD2D;AAE3DC,MAAAA;AAF2D,KAApC,CAAzB;AAIA,UAAMG,+BAA+B,GAAG1B,UAAU,CAAC0B,+BAAX,CAA2C;AAAEJ,MAAAA,IAAF;AAAQC,MAAAA;AAAR,KAA3C,CAAxC;AAEA,WAAOC,gBAAgB,IAAIE,+BAA3B;AACD;;AAEDC,EAAAA,oBAAoB,CAAC;AAAEL,IAAAA,IAAF;AAAQC,IAAAA;AAAR,GAAD,EAAwB;AAC1C,UAAMK,aAAa,GAAG5B,UAAU,CAAC6B,mBAAX,CAA+B;AAAEP,MAAAA,IAAF;AAAQC,MAAAA;AAAR,KAA/B,CAAtB;;AAEA,QAAI,CAAC,KAAKH,iBAAL,EAAL,EAA+B;AAC7B,aAAO,KAAKU,cAAL,CAAoB;AAAEF,QAAAA;AAAF,OAApB,CAAP;AACD;;AAED,UAAM;AAAEG,MAAAA;AAAF,QAAoBT,IAA1B;AAEA,UAAMU,oBAAoB,GAAGhC,UAAU,CAACiC,uBAAX,CAAmC;AAC9DX,MAAAA,IAD8D;AAE9DC,MAAAA;AAF8D,KAAnC,CAA7B,CAT0C,CAc1C;;AACA,UAAMW,kBAAkB,GAAG,KAAKA,kBAAL,CAAwB;AAAEZ,MAAAA,IAAF;AAAQC,MAAAA;AAAR,KAAxB,CAA3B,CAf0C,CAiB1C;;AACA,UAAMY,gBAAgB,GAAG,KAAKA,gBAAL,CAAsB;AAAEH,MAAAA;AAAF,KAAtB,CAAzB,CAlB0C,CAoB1C;;AACA,UAAMI,UAAU,GAAG,KAAKC,aAAL,CAAmB;AACpCT,MAAAA,aADoC;AAEpCO,MAAAA,gBAFoC;AAGpCJ,MAAAA,aAHoC;AAIpCC,MAAAA,oBAJoC;AAKpCM,MAAAA,mBAAmB,EAAEJ,kBAAkB,CAACK;AALJ,KAAnB,CAAnB;AAQA,UAAMC,aAAa,GAAGjC,eAAe,CAAC;AACpCkC,MAAAA,KAAK,EACHP,kBAAkB,CAACO,KAAnB,GAA2BN,gBAAgB,CAACM,KAA5C,GAAoDL,UAAU,CAACK,KAF7B;AAGpCP,MAAAA,kBAAkB,EAAE3B,eAAe,CAAC2B,kBAAD,CAHC;AAIpCC,MAAAA,gBAAgB,EAAE5B,eAAe,CAAC4B,gBAAD,CAJG;AAKpCC,MAAAA,UAAU,EAAE7B,eAAe,CAAC6B,UAAD,CALS;AAMpCpB,MAAAA,MAAM,EAAE,KAAKA,MANuB;AAOpC0B,MAAAA,QAAQ,EAAE;AAP0B,KAAD,CAArC;AAUA,WAAOF,aAAP;AACD;;AAEDG,EAAAA,wBAAwB,CAAC;AACvBf,IAAAA,aADuB;AAEvBI,IAAAA,oBAFuB;AAGvBD,IAAAA;AAHuB,GAAD,EAIrB;AACD,QAAI,CAAC,KAAKX,iBAAL,EAAL,EAA+B;AAC7B,aAAO,KAAKU,cAAL,CAAoB;AAAEF,QAAAA;AAAF,OAApB,CAAP;AACD,KAHA,CAKD;;;AACA,UAAMM,kBAAkB,GAAG,KAAKU,6BAAL,CAAmC;AAC5DhB,MAAAA;AAD4D,KAAnC,CAA3B,CANC,CAUD;;AACA,UAAMO,gBAAgB,GAAG,KAAKA,gBAAL,CAAsB;AAAEH,MAAAA;AAAF,KAAtB,CAAzB,CAXC,CAaD;;AACA,UAAMI,UAAU,GAAG,KAAKC,aAAL,CAAmB;AACpCT,MAAAA,aADoC;AAEpCI,MAAAA,oBAFoC;AAGpCD,MAAAA,aAHoC;AAIpCO,MAAAA,mBAAmB,EAAE,KAAKC,uBAAL,CAA6B;AAAEX,QAAAA;AAAF,OAA7B;AAJe,KAAnB,CAAnB;AAOA,UAAMY,aAAa,GAAGjC,eAAe,CAAC;AACpCkC,MAAAA,KAAK,EACHP,kBAAkB,CAACO,KAAnB,GAA2BN,gBAAgB,CAACM,KAA5C,GAAoDL,UAAU,CAACK,KAF7B;AAGpCP,MAAAA,kBAAkB,EAAE3B,eAAe,CAAC2B,kBAAD,CAHC;AAIpCC,MAAAA,gBAAgB,EAAE5B,eAAe,CAAC4B,gBAAD,CAJG;AAKpCC,MAAAA,UAAU,EAAE7B,eAAe,CAAC6B,UAAD,CALS;AAMpCpB,MAAAA,MAAM,EAAE,KAAKA,MANuB;AAOpC0B,MAAAA,QAAQ,EAAE;AAP0B,KAAD,CAArC;AAUA,WAAOF,aAAP;AACD;;AAEDN,EAAAA,kBAAkB,CAAC;AAAEZ,IAAAA,IAAF;AAAQC,IAAAA;AAAR,GAAD,EAAwB;AACxC,QAAID,IAAI,CAACuB,YAAL,KAAsB3C,aAAa,CAAC4C,WAAxC,EAAqD;AACnD,aAAO;AAAEL,QAAAA,KAAK,EAAE;AAAT,OAAP;AACD;;AAED,QAAI,KAAKpB,yBAAL,CAA+B;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,KAA/B,CAAJ,EAA2D;AACzD,YAAM;AACJwB,QAAAA,SAAS,GAAG,CADR;AAEJC,QAAAA,iBAAiB,GAAG,CAFhB;AAGJC,QAAAA,gBAAgB,GAAG;AAHf,UAIFjD,UAAU,CAACkD,cAAX,CAA0B;AAAE5B,QAAAA,IAAF;AAAQC,QAAAA;AAAR,OAA1B,CAJJ;AAKA,aAAO,KAAK4B,8BAAL,CAAoC;AACzCJ,QAAAA,SADyC;AAEzCC,QAAAA,iBAFyC;AAGzCC,QAAAA;AAHyC,OAApC,CAAP;AAKD;;AAED,UAAMrB,aAAa,GAAG5B,UAAU,CAAC6B,mBAAX,CAA+B;AAAEP,MAAAA,IAAF;AAAQC,MAAAA;AAAR,KAA/B,CAAtB;AACA,WAAO,KAAKqB,6BAAL,CAAmC;AAAEhB,MAAAA;AAAF,KAAnC,CAAP;AACD;;AAEDgB,EAAAA,6BAA6B,CAAC;AAAEhB,IAAAA;AAAF,GAAD,EAAoB;AAC/C;AACA,UAAMW,uBAAuB,GAAG,KAAKA,uBAAL,CAA6B;AAC3DX,MAAAA;AAD2D,KAA7B,CAAhC,CAF+C,CAK/C;;AACA,UAAMwB,wBAAwB,GAAG,KAAKA,wBAAL,CAA8B;AAC7DxB,MAAAA;AAD6D,KAA9B,CAAjC,CAN+C,CAS/C;;AACA,UAAMyB,uBAAuB,GAAG,KAAKA,uBAAL,CAA6B;AAC3DzB,MAAAA;AAD2D,KAA7B,CAAhC,CAV+C,CAa/C;;AACA,UAAM0B,cAAc,GAAG,KAAKA,cAAL,EAAvB;AAEA,WAAO;AACLb,MAAAA,KAAK,EACHF,uBAAuB,GACrBa,wBADF,GAEEC,uBAFF,GAGEC,cALC;AAMLf,MAAAA,uBANK;AAOLc,MAAAA,uBAPK;AAQLD,MAAAA,wBARK;AASLE,MAAAA;AATK,KAAP;AAWD;;AAEDH,EAAAA,8BAA8B,CAAC;AAC7BJ,IAAAA,SAD6B;AAE7BC,IAAAA,iBAF6B;AAG7BC,IAAAA;AAH6B,GAAD,EAI3B;AACD;AACA,UAAMV,uBAAuB,GAAG,KAAKA,uBAAL,CAA6B;AAC3DX,MAAAA,aAAa,EAAEmB,SAAS,GAAGE;AADgC,KAA7B,CAAhC,CAFC,CAMD;;AACA,UAAMG,wBAAwB,GAAG,KAAKA,wBAAL,CAA8B;AAC7DxB,MAAAA,aAAa,EAAEmB,SAAS,GAAGE;AADkC,KAA9B,CAAjC,CAPC,CAWD;;AACA,UAAMI,uBAAuB,GAAG,KAAKA,uBAAL,CAA6B;AAC3DzB,MAAAA,aAAa,EAAEmB,SAAS,GAAGE;AADgC,KAA7B,CAAhC,CAZC,CAgBD;;AACA,UAAMM,uBAAuB,GAAG,KAAKA,uBAAL,CAA6B;AAC3DP,MAAAA;AAD2D,KAA7B,CAAhC,CAjBC,CAqBD;;AACA,UAAMM,cAAc,GAAG,KAAKA,cAAL,EAAvB;AAEA,WAAO;AACLb,MAAAA,KAAK,EACHF,uBAAuB,GACrBa,wBADF,GAEEC,uBAFF,GAGEE,uBAHF,GAIED,cANC;AAOLf,MAAAA,uBAPK;AAQLgB,MAAAA,uBARK;AASLF,MAAAA,uBATK;AAULD,MAAAA,wBAVK;AAWLE,MAAAA;AAXK,KAAP;AAaD;;AAEDnB,EAAAA,gBAAgB,CAAC;AAAEH,IAAAA;AAAF,GAAD,EAA2B;AACzC;AACA,UAAMwB,2BAA2B,GAAG,KAAKA,2BAAL,CAAiC;AACnExB,MAAAA;AADmE,KAAjC,CAApC,CAFyC,CAKzC;;AACA,UAAMyB,4BAA4B,GAAG,KAAKA,4BAAL,CAAkC;AACrEzB,MAAAA;AADqE,KAAlC,CAArC,CANyC,CASzC;;AACA,UAAM0B,2BAA2B,GAAG,KAAKA,2BAAL,CAAiC;AACnE1B,MAAAA;AADmE,KAAjC,CAApC,CAVyC,CAazC;AACA;;AACA,UAAMsB,cAAc,GAAGtB,oBAAoB,GAAG,CAAvB,GAA2B,KAAKsB,cAAL,EAA3B,GAAmD,CAA1E;AAEA,WAAO;AACLb,MAAAA,KAAK,EACHe,2BAA2B,GACzBE,2BADF,GAEED,4BAFF,GAGEH,cALC;AAMLE,MAAAA,2BANK;AAOLE,MAAAA,2BAPK;AAQLD,MAAAA,4BARK;AASLH,MAAAA;AATK,KAAP;AAWD;;AAEDjB,EAAAA,aAAa,CAAC;AACZT,IAAAA,aADY;AAEZI,IAAAA,oBAFY;AAGZD,IAAAA,aAHY;AAIZO,IAAAA;AAJY,GAAD,EAKV;AACD,UAAMqB,wBAAwB,GAAG,KAAKA,wBAAL,GAC7B,KAAKA,wBAAL,CAA8B;AAC9B5B,MAAAA,aAD8B;AAE9BH,MAAAA,aAF8B;AAG9BgC,MAAAA,WAAW,EAAEtB;AAHiB,KAA9B,CAD6B,GAM7B,CANJ;AAQA,UAAMuB,sBAAsB,GAAG,KAAKA,sBAAL,GAC3B,KAAKA,sBAAL,CAA4B;AAC5B9B,MAAAA,aAD4B;AAE5BH,MAAAA,aAF4B;AAG5B4B,MAAAA,2BAA2B,EAAE,KAAKA,2BAAL,CAAiC;AAC5DxB,QAAAA;AAD4D,OAAjC;AAHD,KAA5B,CAD2B,GAQ3B,CARJ;AAUA,WAAO;AACL2B,MAAAA,wBADK;AAELE,MAAAA,sBAFK;AAGLpB,MAAAA,KAAK,EAAEkB,wBAAwB,GAAGE;AAH7B,KAAP;AAKD;;AAED/B,EAAAA,cAAc,CAAC;AAAEF,IAAAA;AAAF,GAAD,EAAoB;AAChC,WAAO;AACLa,MAAAA,KAAK,EAAEb,aAAa,GAAG3B,WADlB;AAELe,MAAAA,MAAM,EAAE,KAAKA,MAFR;AAGL0B,MAAAA,QAAQ,EAAE;AAHL,KAAP;AAKD;;AA3QwB;;AA8Q3B,eAAe5B,oBAAf","sourcesContent":["import * as cantonConfigs from './cantonConfigs';\nimport Calculator from '../Calculator';\nimport { NOTARY_FEES } from '../../config/financeConstants';\nimport { PURCHASE_TYPE } from '../../api/constants';\n\nconst roundToCents = val => Number(val.toFixed(2));\n\nconst roundObjectKeys = obj =>\n  Object.keys(obj).reduce(\n    (newObj, key) => ({\n      ...newObj,\n      [key]: typeof obj[key] === 'number' ? roundToCents(obj[key]) : obj[key],\n    }),\n    {},\n  );\n\nclass NotaryFeesCalculator {\n  constructor({ canton }) {\n    this.init(canton);\n  }\n\n  init(canton) {\n    const config = cantonConfigs[canton];\n    this.canton = canton;\n\n    Object.assign(this, config);\n  }\n\n  hasDetailedConfig() {\n    return cantonConfigs[this.canton];\n  }\n\n  shouldUseConstructionMath({ loan, structureId }) {\n    const hasDetailedValue = Calculator.hasDetailedPropertyValue({\n      loan,\n      structureId,\n    });\n    const shouldUseConstructionNotaryFees = Calculator.shouldUseConstructionNotaryFees({ loan, structureId });\n\n    return hasDetailedValue && shouldUseConstructionNotaryFees;\n  }\n\n  getNotaryFeesForLoan({ loan, structureId }) {\n    const propertyValue = Calculator.selectPropertyValue({ loan, structureId });\n\n    if (!this.hasDetailedConfig()) {\n      return this.getDefaultFees({ propertyValue });\n    }\n\n    const { residenceType } = loan;\n\n    const mortgageNoteIncrease = Calculator.getMortgageNoteIncrease({\n      loan,\n      structureId,\n    });\n\n    // Acte d'achat\n    const buyersContractFees = this.buyersContractFees({ loan, structureId });\n\n    // Cédule hypothécaire\n    const mortgageNoteFees = this.mortgageNoteFees({ mortgageNoteIncrease });\n\n    // Déductions\n    const deductions = this.getDeductions({\n      propertyValue,\n      mortgageNoteFees,\n      residenceType,\n      mortgageNoteIncrease,\n      propertyTransferTax: buyersContractFees.propertyRegistrationTax,\n    });\n\n    const roundedResult = roundObjectKeys({\n      total:\n        buyersContractFees.total + mortgageNoteFees.total - deductions.total,\n      buyersContractFees: roundObjectKeys(buyersContractFees),\n      mortgageNoteFees: roundObjectKeys(mortgageNoteFees),\n      deductions: roundObjectKeys(deductions),\n      canton: this.canton,\n      estimate: false,\n    });\n\n    return roundedResult;\n  }\n\n  getNotaryFeesWithoutLoan({\n    propertyValue,\n    mortgageNoteIncrease,\n    residenceType,\n  }) {\n    if (!this.hasDetailedConfig()) {\n      return this.getDefaultFees({ propertyValue });\n    }\n\n    // Acte d'achat\n    const buyersContractFees = this.buyersContractFeesAcquisition({\n      propertyValue,\n    });\n\n    // Cédule hypothécaire\n    const mortgageNoteFees = this.mortgageNoteFees({ mortgageNoteIncrease });\n\n    // Déductions\n    const deductions = this.getDeductions({\n      propertyValue,\n      mortgageNoteIncrease,\n      residenceType,\n      propertyTransferTax: this.propertyRegistrationTax({ propertyValue }),\n    });\n\n    const roundedResult = roundObjectKeys({\n      total:\n        buyersContractFees.total + mortgageNoteFees.total - deductions.total,\n      buyersContractFees: roundObjectKeys(buyersContractFees),\n      mortgageNoteFees: roundObjectKeys(mortgageNoteFees),\n      deductions: roundObjectKeys(deductions),\n      canton: this.canton,\n      estimate: false,\n    });\n\n    return roundedResult;\n  }\n\n  buyersContractFees({ loan, structureId }) {\n    if (loan.purchaseType === PURCHASE_TYPE.REFINANCING) {\n      return { total: 0 };\n    }\n\n    if (this.shouldUseConstructionMath({ loan, structureId })) {\n      const {\n        landValue = 0,\n        constructionValue = 0,\n        additionalMargin = 0,\n      } = Calculator.selectProperty({ loan, structureId });\n      return this.buyersContractFeesConstruction({\n        landValue,\n        constructionValue,\n        additionalMargin,\n      });\n    }\n\n    const propertyValue = Calculator.selectPropertyValue({ loan, structureId });\n    return this.buyersContractFeesAcquisition({ propertyValue });\n  }\n\n  buyersContractFeesAcquisition({ propertyValue }) {\n    // Frais d'enregistrement/Droits de mutation\n    const propertyRegistrationTax = this.propertyRegistrationTax({\n      propertyValue,\n    });\n    // Emoluments du notaire\n    const notaryIncomeFromProperty = this.notaryIncomeFromProperty({\n      propertyValue,\n    });\n    // Registre foncier\n    const landRegistryPropertyTax = this.landRegistryPropertyTax({\n      propertyValue,\n    });\n    // Frais du notaire additionnels estimés\n    const additionalFees = this.additionalFees();\n\n    return {\n      total:\n        propertyRegistrationTax\n        + notaryIncomeFromProperty\n        + landRegistryPropertyTax\n        + additionalFees,\n      propertyRegistrationTax,\n      landRegistryPropertyTax,\n      notaryIncomeFromProperty,\n      additionalFees,\n    };\n  }\n\n  buyersContractFeesConstruction({\n    landValue,\n    constructionValue,\n    additionalMargin,\n  }) {\n    // Frais d'enregistrement/Droits de mutation\n    const propertyRegistrationTax = this.propertyRegistrationTax({\n      propertyValue: landValue + additionalMargin,\n    });\n\n    // Emoluments du notaire\n    const notaryIncomeFromProperty = this.notaryIncomeFromProperty({\n      propertyValue: landValue + additionalMargin,\n    });\n\n    // Registre foncier\n    const landRegistryPropertyTax = this.landRegistryPropertyTax({\n      propertyValue: landValue + additionalMargin,\n    });\n\n    // Contrat de construction\n    const propertyConstructionTax = this.propertyConstructionTax({\n      constructionValue,\n    });\n\n    // Frais du notaire additionnels estimés\n    const additionalFees = this.additionalFees();\n\n    return {\n      total:\n        propertyRegistrationTax\n        + notaryIncomeFromProperty\n        + landRegistryPropertyTax\n        + propertyConstructionTax\n        + additionalFees,\n      propertyRegistrationTax,\n      propertyConstructionTax,\n      landRegistryPropertyTax,\n      notaryIncomeFromProperty,\n      additionalFees,\n    };\n  }\n\n  mortgageNoteFees({ mortgageNoteIncrease }) {\n    // Frais d'enregistrement\n    const mortgageNoteRegistrationTax = this.mortgageNoteRegistrationTax({\n      mortgageNoteIncrease,\n    });\n    // Emoluments du notaire\n    const notaryIncomeFromMortgageNote = this.notaryIncomeFromMortgageNote({\n      mortgageNoteIncrease,\n    });\n    // Registre foncier\n    const landRegistryMortgageNoteTax = this.landRegistryMortgageNoteTax({\n      mortgageNoteIncrease,\n    });\n    // Frais du notaire additionnels estimés\n    // Nuls si aucune cédule nécessaire\n    const additionalFees = mortgageNoteIncrease > 0 ? this.additionalFees() : 0;\n\n    return {\n      total:\n        mortgageNoteRegistrationTax\n        + landRegistryMortgageNoteTax\n        + notaryIncomeFromMortgageNote\n        + additionalFees,\n      mortgageNoteRegistrationTax,\n      landRegistryMortgageNoteTax,\n      notaryIncomeFromMortgageNote,\n      additionalFees,\n    };\n  }\n\n  getDeductions({\n    propertyValue,\n    mortgageNoteIncrease,\n    residenceType,\n    propertyTransferTax,\n  }) {\n    const buyersContractDeductions = this.buyersContractDeductions\n      ? this.buyersContractDeductions({\n        residenceType,\n        propertyValue,\n        transferTax: propertyTransferTax,\n      })\n      : 0;\n\n    const mortgageNoteDeductions = this.mortgageNoteDeductions\n      ? this.mortgageNoteDeductions({\n        residenceType,\n        propertyValue,\n        mortgageNoteRegistrationTax: this.mortgageNoteRegistrationTax({\n          mortgageNoteIncrease,\n        }),\n      })\n      : 0;\n\n    return {\n      buyersContractDeductions,\n      mortgageNoteDeductions,\n      total: buyersContractDeductions + mortgageNoteDeductions,\n    };\n  }\n\n  getDefaultFees({ propertyValue }) {\n    return {\n      total: propertyValue * NOTARY_FEES,\n      canton: this.canton,\n      estimate: true,\n    };\n  }\n}\n\nexport default NotaryFeesCalculator;\n"]},"passPerPreset":false,"envName":"development","cwd":"/Users/Florian/dev/epotek/microservices/backend","root":"/Users/Florian/dev/epotek/microservices/backend","plugins":[{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/Florian/dev/epotek/microservices/backend/imports/core/utils/notaryFees/NotaryFeesCalculator.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/core/utils/notaryFees/NotaryFeesCalculator.js"}},"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet cantonConfigs;\nmodule.link(\"./cantonConfigs\", {\n  \"*\"(v) {\n    cantonConfigs = v;\n  }\n\n}, 0);\nlet Calculator;\nmodule.link(\"../Calculator\", {\n  default(v) {\n    Calculator = v;\n  }\n\n}, 1);\nlet NOTARY_FEES;\nmodule.link(\"../../config/financeConstants\", {\n  NOTARY_FEES(v) {\n    NOTARY_FEES = v;\n  }\n\n}, 2);\nlet PURCHASE_TYPE;\nmodule.link(\"../../api/constants\", {\n  PURCHASE_TYPE(v) {\n    PURCHASE_TYPE = v;\n  }\n\n}, 3);\n\nconst roundToCents = val => Number(val.toFixed(2));\n\nconst roundObjectKeys = obj => Object.keys(obj).reduce((newObj, key) => (0, _objectSpread2.default)({}, newObj, {\n  [key]: typeof obj[key] === 'number' ? roundToCents(obj[key]) : obj[key]\n}), {});\n\nclass NotaryFeesCalculator {\n  constructor(_ref) {\n    let {\n      canton\n    } = _ref;\n    this.init(canton);\n  }\n\n  init(canton) {\n    const config = cantonConfigs[canton];\n    this.canton = canton;\n    Object.assign(this, config);\n  }\n\n  hasDetailedConfig() {\n    return cantonConfigs[this.canton];\n  }\n\n  shouldUseConstructionMath(_ref2) {\n    let {\n      loan,\n      structureId\n    } = _ref2;\n    const hasDetailedValue = Calculator.hasDetailedPropertyValue({\n      loan,\n      structureId\n    });\n    const shouldUseConstructionNotaryFees = Calculator.shouldUseConstructionNotaryFees({\n      loan,\n      structureId\n    });\n    return hasDetailedValue && shouldUseConstructionNotaryFees;\n  }\n\n  getNotaryFeesForLoan(_ref3) {\n    let {\n      loan,\n      structureId\n    } = _ref3;\n    const propertyValue = Calculator.selectPropertyValue({\n      loan,\n      structureId\n    });\n\n    if (!this.hasDetailedConfig()) {\n      return this.getDefaultFees({\n        propertyValue\n      });\n    }\n\n    const {\n      residenceType\n    } = loan;\n    const mortgageNoteIncrease = Calculator.getMortgageNoteIncrease({\n      loan,\n      structureId\n    }); // Acte d'achat\n\n    const buyersContractFees = this.buyersContractFees({\n      loan,\n      structureId\n    }); // Cédule hypothécaire\n\n    const mortgageNoteFees = this.mortgageNoteFees({\n      mortgageNoteIncrease\n    }); // Déductions\n\n    const deductions = this.getDeductions({\n      propertyValue,\n      mortgageNoteFees,\n      residenceType,\n      mortgageNoteIncrease,\n      propertyTransferTax: buyersContractFees.propertyRegistrationTax\n    });\n    const roundedResult = roundObjectKeys({\n      total: buyersContractFees.total + mortgageNoteFees.total - deductions.total,\n      buyersContractFees: roundObjectKeys(buyersContractFees),\n      mortgageNoteFees: roundObjectKeys(mortgageNoteFees),\n      deductions: roundObjectKeys(deductions),\n      canton: this.canton,\n      estimate: false\n    });\n    return roundedResult;\n  }\n\n  getNotaryFeesWithoutLoan(_ref4) {\n    let {\n      propertyValue,\n      mortgageNoteIncrease,\n      residenceType\n    } = _ref4;\n\n    if (!this.hasDetailedConfig()) {\n      return this.getDefaultFees({\n        propertyValue\n      });\n    } // Acte d'achat\n\n\n    const buyersContractFees = this.buyersContractFeesAcquisition({\n      propertyValue\n    }); // Cédule hypothécaire\n\n    const mortgageNoteFees = this.mortgageNoteFees({\n      mortgageNoteIncrease\n    }); // Déductions\n\n    const deductions = this.getDeductions({\n      propertyValue,\n      mortgageNoteIncrease,\n      residenceType,\n      propertyTransferTax: this.propertyRegistrationTax({\n        propertyValue\n      })\n    });\n    const roundedResult = roundObjectKeys({\n      total: buyersContractFees.total + mortgageNoteFees.total - deductions.total,\n      buyersContractFees: roundObjectKeys(buyersContractFees),\n      mortgageNoteFees: roundObjectKeys(mortgageNoteFees),\n      deductions: roundObjectKeys(deductions),\n      canton: this.canton,\n      estimate: false\n    });\n    return roundedResult;\n  }\n\n  buyersContractFees(_ref5) {\n    let {\n      loan,\n      structureId\n    } = _ref5;\n\n    if (loan.purchaseType === PURCHASE_TYPE.REFINANCING) {\n      return {\n        total: 0\n      };\n    }\n\n    if (this.shouldUseConstructionMath({\n      loan,\n      structureId\n    })) {\n      const {\n        landValue = 0,\n        constructionValue = 0,\n        additionalMargin = 0\n      } = Calculator.selectProperty({\n        loan,\n        structureId\n      });\n      return this.buyersContractFeesConstruction({\n        landValue,\n        constructionValue,\n        additionalMargin\n      });\n    }\n\n    const propertyValue = Calculator.selectPropertyValue({\n      loan,\n      structureId\n    });\n    return this.buyersContractFeesAcquisition({\n      propertyValue\n    });\n  }\n\n  buyersContractFeesAcquisition(_ref6) {\n    let {\n      propertyValue\n    } = _ref6;\n    // Frais d'enregistrement/Droits de mutation\n    const propertyRegistrationTax = this.propertyRegistrationTax({\n      propertyValue\n    }); // Emoluments du notaire\n\n    const notaryIncomeFromProperty = this.notaryIncomeFromProperty({\n      propertyValue\n    }); // Registre foncier\n\n    const landRegistryPropertyTax = this.landRegistryPropertyTax({\n      propertyValue\n    }); // Frais du notaire additionnels estimés\n\n    const additionalFees = this.additionalFees();\n    return {\n      total: propertyRegistrationTax + notaryIncomeFromProperty + landRegistryPropertyTax + additionalFees,\n      propertyRegistrationTax,\n      landRegistryPropertyTax,\n      notaryIncomeFromProperty,\n      additionalFees\n    };\n  }\n\n  buyersContractFeesConstruction(_ref7) {\n    let {\n      landValue,\n      constructionValue,\n      additionalMargin\n    } = _ref7;\n    // Frais d'enregistrement/Droits de mutation\n    const propertyRegistrationTax = this.propertyRegistrationTax({\n      propertyValue: landValue + additionalMargin\n    }); // Emoluments du notaire\n\n    const notaryIncomeFromProperty = this.notaryIncomeFromProperty({\n      propertyValue: landValue + additionalMargin\n    }); // Registre foncier\n\n    const landRegistryPropertyTax = this.landRegistryPropertyTax({\n      propertyValue: landValue + additionalMargin\n    }); // Contrat de construction\n\n    const propertyConstructionTax = this.propertyConstructionTax({\n      constructionValue\n    }); // Frais du notaire additionnels estimés\n\n    const additionalFees = this.additionalFees();\n    return {\n      total: propertyRegistrationTax + notaryIncomeFromProperty + landRegistryPropertyTax + propertyConstructionTax + additionalFees,\n      propertyRegistrationTax,\n      propertyConstructionTax,\n      landRegistryPropertyTax,\n      notaryIncomeFromProperty,\n      additionalFees\n    };\n  }\n\n  mortgageNoteFees(_ref8) {\n    let {\n      mortgageNoteIncrease\n    } = _ref8;\n    // Frais d'enregistrement\n    const mortgageNoteRegistrationTax = this.mortgageNoteRegistrationTax({\n      mortgageNoteIncrease\n    }); // Emoluments du notaire\n\n    const notaryIncomeFromMortgageNote = this.notaryIncomeFromMortgageNote({\n      mortgageNoteIncrease\n    }); // Registre foncier\n\n    const landRegistryMortgageNoteTax = this.landRegistryMortgageNoteTax({\n      mortgageNoteIncrease\n    }); // Frais du notaire additionnels estimés\n    // Nuls si aucune cédule nécessaire\n\n    const additionalFees = mortgageNoteIncrease > 0 ? this.additionalFees() : 0;\n    return {\n      total: mortgageNoteRegistrationTax + landRegistryMortgageNoteTax + notaryIncomeFromMortgageNote + additionalFees,\n      mortgageNoteRegistrationTax,\n      landRegistryMortgageNoteTax,\n      notaryIncomeFromMortgageNote,\n      additionalFees\n    };\n  }\n\n  getDeductions(_ref9) {\n    let {\n      propertyValue,\n      mortgageNoteIncrease,\n      residenceType,\n      propertyTransferTax\n    } = _ref9;\n    const buyersContractDeductions = this.buyersContractDeductions ? this.buyersContractDeductions({\n      residenceType,\n      propertyValue,\n      transferTax: propertyTransferTax\n    }) : 0;\n    const mortgageNoteDeductions = this.mortgageNoteDeductions ? this.mortgageNoteDeductions({\n      residenceType,\n      propertyValue,\n      mortgageNoteRegistrationTax: this.mortgageNoteRegistrationTax({\n        mortgageNoteIncrease\n      })\n    }) : 0;\n    return {\n      buyersContractDeductions,\n      mortgageNoteDeductions,\n      total: buyersContractDeductions + mortgageNoteDeductions\n    };\n  }\n\n  getDefaultFees(_ref10) {\n    let {\n      propertyValue\n    } = _ref10;\n    return {\n      total: propertyValue * NOTARY_FEES,\n      canton: this.canton,\n      estimate: true\n    };\n  }\n\n}\n\nmodule.exportDefault(NotaryFeesCalculator);","map":{"version":3,"sources":["imports/core/utils/notaryFees/NotaryFeesCalculator.js"],"names":["cantonConfigs","roundToCents","val","Number","roundObjectKeys","obj","constructor","canton","init","config","Object","hasDetailedConfig","shouldUseConstructionMath","structureId","hasDetailedValue","shouldUseConstructionNotaryFees","getNotaryFeesForLoan","propertyValue","residenceType","mortgageNoteIncrease","buyersContractFees","mortgageNoteFees","deductions","propertyTransferTax","propertyRegistrationTax","roundedResult","total","estimate","getNotaryFeesWithoutLoan","loan","PURCHASE_TYPE","landValue","constructionValue","additionalMargin","buyersContractFeesAcquisition","notaryIncomeFromProperty","landRegistryPropertyTax","additionalFees","buyersContractFeesConstruction","propertyConstructionTax","mortgageNoteRegistrationTax","notaryIncomeFromMortgageNote","landRegistryMortgageNoteTax","getDeductions","buyersContractDeductions","transferTax","mortgageNoteDeductions","getDefaultFees"],"mappings":"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","sourcesContent":["import * as cantonConfigs from './cantonConfigs';\nimport Calculator from '../Calculator';\nimport { NOTARY_FEES } from '../../config/financeConstants';\nimport { PURCHASE_TYPE } from '../../api/constants';\n\nconst roundToCents = val => Number(val.toFixed(2));\n\nconst roundObjectKeys = obj =>\n  Object.keys(obj).reduce(\n    (newObj, key) => ({\n      ...newObj,\n      [key]: typeof obj[key] === 'number' ? roundToCents(obj[key]) : obj[key],\n    }),\n    {},\n  );\n\nclass NotaryFeesCalculator {\n  constructor({ canton }) {\n    this.init(canton);\n  }\n\n  init(canton) {\n    const config = cantonConfigs[canton];\n    this.canton = canton;\n\n    Object.assign(this, config);\n  }\n\n  hasDetailedConfig() {\n    return cantonConfigs[this.canton];\n  }\n\n  shouldUseConstructionMath({ loan, structureId }) {\n    const hasDetailedValue = Calculator.hasDetailedPropertyValue({\n      loan,\n      structureId,\n    });\n    const shouldUseConstructionNotaryFees = Calculator.shouldUseConstructionNotaryFees({ loan, structureId });\n\n    return hasDetailedValue && shouldUseConstructionNotaryFees;\n  }\n\n  getNotaryFeesForLoan({ loan, structureId }) {\n    const propertyValue = Calculator.selectPropertyValue({ loan, structureId });\n\n    if (!this.hasDetailedConfig()) {\n      return this.getDefaultFees({ propertyValue });\n    }\n\n    const { residenceType } = loan;\n\n    const mortgageNoteIncrease = Calculator.getMortgageNoteIncrease({\n      loan,\n      structureId,\n    });\n\n    // Acte d'achat\n    const buyersContractFees = this.buyersContractFees({ loan, structureId });\n\n    // Cédule hypothécaire\n    const mortgageNoteFees = this.mortgageNoteFees({ mortgageNoteIncrease });\n\n    // Déductions\n    const deductions = this.getDeductions({\n      propertyValue,\n      mortgageNoteFees,\n      residenceType,\n      mortgageNoteIncrease,\n      propertyTransferTax: buyersContractFees.propertyRegistrationTax,\n    });\n\n    const roundedResult = roundObjectKeys({\n      total:\n        buyersContractFees.total + mortgageNoteFees.total - deductions.total,\n      buyersContractFees: roundObjectKeys(buyersContractFees),\n      mortgageNoteFees: roundObjectKeys(mortgageNoteFees),\n      deductions: roundObjectKeys(deductions),\n      canton: this.canton,\n      estimate: false,\n    });\n\n    return roundedResult;\n  }\n\n  getNotaryFeesWithoutLoan({\n    propertyValue,\n    mortgageNoteIncrease,\n    residenceType,\n  }) {\n    if (!this.hasDetailedConfig()) {\n      return this.getDefaultFees({ propertyValue });\n    }\n\n    // Acte d'achat\n    const buyersContractFees = this.buyersContractFeesAcquisition({\n      propertyValue,\n    });\n\n    // Cédule hypothécaire\n    const mortgageNoteFees = this.mortgageNoteFees({ mortgageNoteIncrease });\n\n    // Déductions\n    const deductions = this.getDeductions({\n      propertyValue,\n      mortgageNoteIncrease,\n      residenceType,\n      propertyTransferTax: this.propertyRegistrationTax({ propertyValue }),\n    });\n\n    const roundedResult = roundObjectKeys({\n      total:\n        buyersContractFees.total + mortgageNoteFees.total - deductions.total,\n      buyersContractFees: roundObjectKeys(buyersContractFees),\n      mortgageNoteFees: roundObjectKeys(mortgageNoteFees),\n      deductions: roundObjectKeys(deductions),\n      canton: this.canton,\n      estimate: false,\n    });\n\n    return roundedResult;\n  }\n\n  buyersContractFees({ loan, structureId }) {\n    if (loan.purchaseType === PURCHASE_TYPE.REFINANCING) {\n      return { total: 0 };\n    }\n\n    if (this.shouldUseConstructionMath({ loan, structureId })) {\n      const {\n        landValue = 0,\n        constructionValue = 0,\n        additionalMargin = 0,\n      } = Calculator.selectProperty({ loan, structureId });\n      return this.buyersContractFeesConstruction({\n        landValue,\n        constructionValue,\n        additionalMargin,\n      });\n    }\n\n    const propertyValue = Calculator.selectPropertyValue({ loan, structureId });\n    return this.buyersContractFeesAcquisition({ propertyValue });\n  }\n\n  buyersContractFeesAcquisition({ propertyValue }) {\n    // Frais d'enregistrement/Droits de mutation\n    const propertyRegistrationTax = this.propertyRegistrationTax({\n      propertyValue,\n    });\n    // Emoluments du notaire\n    const notaryIncomeFromProperty = this.notaryIncomeFromProperty({\n      propertyValue,\n    });\n    // Registre foncier\n    const landRegistryPropertyTax = this.landRegistryPropertyTax({\n      propertyValue,\n    });\n    // Frais du notaire additionnels estimés\n    const additionalFees = this.additionalFees();\n\n    return {\n      total:\n        propertyRegistrationTax\n        + notaryIncomeFromProperty\n        + landRegistryPropertyTax\n        + additionalFees,\n      propertyRegistrationTax,\n      landRegistryPropertyTax,\n      notaryIncomeFromProperty,\n      additionalFees,\n    };\n  }\n\n  buyersContractFeesConstruction({\n    landValue,\n    constructionValue,\n    additionalMargin,\n  }) {\n    // Frais d'enregistrement/Droits de mutation\n    const propertyRegistrationTax = this.propertyRegistrationTax({\n      propertyValue: landValue + additionalMargin,\n    });\n\n    // Emoluments du notaire\n    const notaryIncomeFromProperty = this.notaryIncomeFromProperty({\n      propertyValue: landValue + additionalMargin,\n    });\n\n    // Registre foncier\n    const landRegistryPropertyTax = this.landRegistryPropertyTax({\n      propertyValue: landValue + additionalMargin,\n    });\n\n    // Contrat de construction\n    const propertyConstructionTax = this.propertyConstructionTax({\n      constructionValue,\n    });\n\n    // Frais du notaire additionnels estimés\n    const additionalFees = this.additionalFees();\n\n    return {\n      total:\n        propertyRegistrationTax\n        + notaryIncomeFromProperty\n        + landRegistryPropertyTax\n        + propertyConstructionTax\n        + additionalFees,\n      propertyRegistrationTax,\n      propertyConstructionTax,\n      landRegistryPropertyTax,\n      notaryIncomeFromProperty,\n      additionalFees,\n    };\n  }\n\n  mortgageNoteFees({ mortgageNoteIncrease }) {\n    // Frais d'enregistrement\n    const mortgageNoteRegistrationTax = this.mortgageNoteRegistrationTax({\n      mortgageNoteIncrease,\n    });\n    // Emoluments du notaire\n    const notaryIncomeFromMortgageNote = this.notaryIncomeFromMortgageNote({\n      mortgageNoteIncrease,\n    });\n    // Registre foncier\n    const landRegistryMortgageNoteTax = this.landRegistryMortgageNoteTax({\n      mortgageNoteIncrease,\n    });\n    // Frais du notaire additionnels estimés\n    // Nuls si aucune cédule nécessaire\n    const additionalFees = mortgageNoteIncrease > 0 ? this.additionalFees() : 0;\n\n    return {\n      total:\n        mortgageNoteRegistrationTax\n        + landRegistryMortgageNoteTax\n        + notaryIncomeFromMortgageNote\n        + additionalFees,\n      mortgageNoteRegistrationTax,\n      landRegistryMortgageNoteTax,\n      notaryIncomeFromMortgageNote,\n      additionalFees,\n    };\n  }\n\n  getDeductions({\n    propertyValue,\n    mortgageNoteIncrease,\n    residenceType,\n    propertyTransferTax,\n  }) {\n    const buyersContractDeductions = this.buyersContractDeductions\n      ? this.buyersContractDeductions({\n        residenceType,\n        propertyValue,\n        transferTax: propertyTransferTax,\n      })\n      : 0;\n\n    const mortgageNoteDeductions = this.mortgageNoteDeductions\n      ? this.mortgageNoteDeductions({\n        residenceType,\n        propertyValue,\n        mortgageNoteRegistrationTax: this.mortgageNoteRegistrationTax({\n          mortgageNoteIncrease,\n        }),\n      })\n      : 0;\n\n    return {\n      buyersContractDeductions,\n      mortgageNoteDeductions,\n      total: buyersContractDeductions + mortgageNoteDeductions,\n    };\n  }\n\n  getDefaultFees({ propertyValue }) {\n    return {\n      total: propertyValue * NOTARY_FEES,\n      canton: this.canton,\n      estimate: true,\n    };\n  }\n}\n\nexport default NotaryFeesCalculator;\n"]},"sourceType":"script","hash":"f903dbabc8f4d79ddb036b82efe1b46bad5b92a1"}
