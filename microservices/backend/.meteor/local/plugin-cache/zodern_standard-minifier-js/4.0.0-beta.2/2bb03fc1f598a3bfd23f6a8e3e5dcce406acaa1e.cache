{"code":"!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,r=Package.mongo.Mongo,i=Package.minimongo.LocalCollection,o=Package.minimongo.Minimongo,u=Package[\"raix:eventemitter\"].EventEmitter,a=Package.modules.meteorInstall,c=Package[\"babel-runtime\"].meteorBabelHelpers,s=Package.promise.Promise,l,f,p,l=a({node_modules:{meteor:{\"aldeed:collection2\":{\"collection2.js\":function(e,t,n){var r,o=e(\"@babel/runtime/helpers/interopRequireDefault\")(e(\"@babel/runtime/helpers/objectSpread\"));let u,a,c,s,l,f,p,h,v;n.link(\"meteor/raix:eventemitter\",{EventEmitter(e){u=e}},0),n.link(\"meteor/meteor\",{Meteor(e){a=e}},1),n.link(\"meteor/mongo\",{Mongo(e){c=e}},2),n.link(\"meteor/tmeasday:check-npm-versions\",{checkNpmVersions(e){s=e}},3),n.link(\"clone\",{default(e){l=e}},4),n.link(\"ejson\",{default(e){f=e}},5),n.link(\"lodash.isempty\",{default(e){p=e}},6),n.link(\"lodash.isequal\",{default(e){h=e}},7),n.link(\"lodash.isobject\",{default(e){v=e}},8),s({\"simpl-schema\":\">=0.0.0\"},\"aldeed:collection2\");const d=e(\"simpl-schema\").default,y=new u,m={filter:!0,autoConvert:!0,removeEmptyStrings:!0,trimStrings:!0,removeNullsFromArrays:!1};function g(e,t,n,r,i,u){var s,f,h,d,y,g,b,w;if(!n.length)throw new Error(t+\" requires an argument\");if(\"insert\"===t)s=n[0],d=n[1],f=n[2],n=\"function\"==typeof d?[s,d]:\"function\"==typeof f?[s,f]:[s];else{if(\"update\"!==t)throw new Error(\"invalid type argument\");g=n[0],s=n[1],d=n[2],f=n[3]}var S=p(s);f||\"function\"!=typeof d||(f=d,d={}),d=d||{},w=\"function\"==typeof n[b=n.length-1],y=\"update\"===t&&!0===d.upsert;var x=e.simpleSchema(s,d,g),A=null===e._connection;(a.isServer||A)&&!1===d.getAutoValues&&(r=!1);var k=d.validationContext;k?\"string\"==typeof k&&(k=x.namedContext(k)):k=x.namedContext(),a.isClient&&!f&&(f=function(e){e&&a._debug(t+\" failed: \"+(e.reason||e.stack))}),a.isClient&&w&&(f=n[b]=O(k,f));var E=x.allowsKey(\"_id\"),N,V;\"insert\"===t&&!s._id&&E&&(s._id=e._makeNewID()),\"insert\"===t?N=s._id:\"update\"===t&&g&&(N=\"string\"==typeof g||g instanceof c.ObjectID?g:g._id),s._id&&!E&&(V=s._id,delete s._id);const C={isInsert:\"insert\"===t,isUpdate:\"update\"===t&&!0!==d.upsert,isUpsert:y,userId:i,isFromTrustedCode:u,docId:N,isLocalCollection:A},I=(0,o.default)({},(x._cleanOptions||{}).extendAutoValueContext||{},C,d.extendAutoValueContext),$={};[\"autoConvert\",\"filter\",\"removeEmptyStrings\",\"removeNullsFromArrays\",\"trimStrings\"].forEach(e=>{\"boolean\"==typeof d[e]&&($[e]=d[e])}),x.clean(s,(0,o.default)({mutate:!0,isModifier:\"insert\"!==t},m,x._cleanOptions||{},$,{extendAutoValueContext:I,getAutoValues:r}));var P={},z;for(var F in s)Object.prototype.hasOwnProperty.call(s,F)&&(P[F]=s[F]);if(a.isServer&&y&&v(g)){var J=P.$set||{};if(Array.isArray(g.$and)){const e={};g.$and.forEach(t=>{Object.assign(e,t)}),P.$set=e}else P.$set=l(g);E||delete P.$set._id,Object.assign(P.$set,J)}if(a.isClient&&!A&&x.clean(P,{autoConvert:!1,extendAutoValueContext:I,filter:!1,getAutoValues:!0,isModifier:\"insert\"!==t,mutate:!0,removeEmptyStrings:!1,removeNullsFromArrays:!1,trimStrings:!1}),!S&&p(P))throw new Error(\"After filtering out keys not in the schema, your \"+(\"update\"===t?\"modifier\":\"object\")+\" is now empty\");if(z=!1===d.validate||k.validate(P,{modifier:\"update\"===t||\"upsert\"===t,upsert:y,extendedCustomContext:(0,o.default)({isInsert:\"insert\"===t,isUpdate:\"update\"===t&&!0!==d.upsert,isUpsert:y,userId:i,isFromTrustedCode:u,docId:N,isLocalCollection:A},d.extendedCustomContext||{})}))return V&&(s._id=V),\"insert\"===t?n[0]=s:n[1]=s,a.isServer&&w&&(n[b]=j(k,n[b])),n;if(h=_(k,\"in \".concat(e._name,\" \").concat(t)),!f)throw h;f(h,!1)}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",n;const r=\"function\"==typeof e.validationErrors?e.validationErrors():e.invalidKeys();if(r.length){const t=r[0].name,i=e.keyErrorMessage(t);n=-1===t.indexOf(\".\")?i:\"\".concat(i,\" (\").concat(t,\")\")}else n=\"Failed validation\";n=\"\".concat(n,\" \").concat(t).trim();const i=new Error(n);return i.invalidKeys=r,i.validationContext=e,a.isServer&&(i.sanitizedError=new a.Error(400,n,f.stringify(i.invalidKeys))),i}function b(e,t){var n=t.split(\"c2_\")[1].split(\" \")[0],r=t.split(\"dup key:\")[1].split('\"')[1],i;e[\"function\"==typeof e.addValidationErrors?\"addValidationErrors\":\"addInvalidKeys\"]([{name:n,type:\"notUnique\",value:r}])}function j(e,t){return function n(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];const u=i[0];return u&&(\"MongoError\"===u.name&&11001===u.code||u.message.indexOf(!0))&&-1!==u.message.indexOf(\"c2_\")&&(b(e,u.message),i[0]=_(e)),t.apply(this,i)}}function O(e,t){var n=\"function\"==typeof e.addValidationErrors?\"addValidationErrors\":\"addInvalidKeys\";return function r(){for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];const c=o[0];if(c instanceof a.Error&&400===c.error&&\"INVALID\"===c.reason&&\"string\"==typeof c.details){var s=f.parse(c.details);e[n](s),o[0]=_(e)}else c instanceof a.Error&&409===c.error&&c.reason&&-1!==c.reason.indexOf(\"E11000\")&&-1!==c.reason.indexOf(\"c2_\")&&(b(e,c.reason),o[0]=_(e));return t.apply(this,o)}}c.Collection.prototype.attachSchema=function e(t,n){if(n=n||{},d.isSimpleSchema(t)||(t=new d(t)),this._c2=this._c2||{},this._c2._simpleSchema&&!0!==n.replace)if(t.version>=2){var r=new d(this._c2._simpleSchema);r.extend(t),t=r}else t=new d([this._c2._simpleSchema,t]);var o=n.selector;function u(e){if(\"object\"==typeof o){var r=-1;e._c2._simpleSchemas=e._c2._simpleSchemas||[],e._c2._simpleSchemas.forEach((e,t)=>{h(e.selector,o)&&(r=t)}),-1===r?e._c2._simpleSchemas.push({schema:d.isSimpleSchema(t)?t:new d(t),selector:o}):!0!==n.replace?e._c2._simpleSchemas[r].schema.version>=2?e._c2._simpleSchemas[r].schema.extend(t):e._c2._simpleSchemas[r].schema=new d([e._c2._simpleSchemas[r].schema,t]):e._c2._simpleSchemas[r].schema=t,delete e._c2._simpleSchema}else e._c2._simpleSchema=t,delete e._c2._simpleSchemas}u(this),this._collection instanceof i&&(this._collection._c2=this._collection._c2||{},u(this._collection)),A(this,n),S(this),y.emit(\"schema.attached\",this,t,n)},[c.Collection,i].forEach(e=>{e.prototype.simpleSchema=function(e,t,n){if(!this._c2)return null;if(this._c2._simpleSchema)return this._c2._simpleSchema;var r=this._c2._simpleSchemas;if(r&&r.length>0){if(!e)throw new Error(\"collection.simpleSchema() requires doc argument when there are multiple schemas\");for(var i,o,u,a=0;a<r.length;a++)if(i=r[a],o=Object.keys(i.selector)[0],u=void 0,e.$set&&void 0!==e.$set[o]?u=e.$set[o]:void 0!==e[o]?u=e[o]:t&&t.selector?u=t.selector[o]:n&&n[o]&&(u=n[o]),void 0!==u&&u===i.selector[o])return i.schema}return null}}),[\"insert\",\"update\"].forEach(e=>{const t=c.Collection.prototype[e];c.Collection.prototype[e]=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];let o=\"insert\"===e?r[1]:r[2];if(o&&\"function\"!=typeof o||(o={}),this._c2&&!0!==o.bypassCollection2){var u=null;try{u=a.userId()}catch(e){}if(!(r=g(this,e,r,a.isServer||null===this._connection,u,a.isServer)))return\"insert\"===e?this._makeNewID():void 0}else\"insert\"===e&&\"function\"!=typeof r[1]&&r.splice(1,1);return t.apply(this,r)}});var w={};function S(e){Package&&Package.insecure&&!w[e._name]&&(e.allow({insert:function(){return!0},update:function(){return!0},remove:function(){return!0},fetch:[],transform:null}),w[e._name]=!0)}var x={};function A(e,t){if(!x[e._name]){var n=null===e._connection;e.deny({insert:function(t,r){return e.simpleSchema(r).clean(r,{mutate:!0,isModifier:!1,filter:!1,autoConvert:!1,removeEmptyStrings:!1,trimStrings:!1,extendAutoValueContext:{isInsert:!0,isUpdate:!1,isUpsert:!1,userId:t,isFromTrustedCode:!1,docId:r._id,isLocalCollection:n}}),!1},update:function(t,r,i,o){return e.simpleSchema(o).clean(o,{mutate:!0,isModifier:!0,filter:!1,autoConvert:!1,removeEmptyStrings:!1,trimStrings:!1,extendAutoValueContext:{isInsert:!1,isUpdate:!0,isUpsert:!1,userId:t,isFromTrustedCode:!1,docId:r&&r._id,isLocalCollection:n}}),!1},fetch:[\"_id\"],transform:null}),e.deny((0,o.default)({insert:function(t,n){return g(e,\"insert\",[n,{trimStrings:!1,removeEmptyStrings:!1,filter:!1,autoConvert:!1},function(e){if(e)throw new a.Error(400,\"INVALID\",f.stringify(e.invalidKeys))}],!1,t,!1),!1},update:function(t,n,r,i){return g(e,\"update\",[{_id:n&&n._id},i,{trimStrings:!1,removeEmptyStrings:!1,filter:!1,autoConvert:!1},function(e){if(e)throw new a.Error(400,\"INVALID\",f.stringify(e.invalidKeys))}],!1,t,!1),!1},fetch:[\"_id\"]},!0===t.transform?{}:{transform:null})),x[e._name]=!0}}n.exportDefault(y)},node_modules:{clone:{\"package.json\":function(e,t,n){n.exports={name:\"clone\",version:\"2.1.1\",main:\"clone.js\"}},\"clone.js\":function(e,t,n){var r=function(){\"use strict\";function e(e,t){return null!=t&&e instanceof t}var t,n,r;try{t=Map}catch(e){t=function(){}}try{n=Set}catch(e){n=function(){}}try{r=s}catch(e){r=function(){}}function i(o,u,a,c,s){\"object\"==typeof u&&(a=u.depth,c=u.prototype,s=u.includeNonEnumerable,u=u.circular);var f=[],p=[],h=\"undefined\"!=typeof Buffer;function v(o,a){if(null===o)return null;if(0===a)return o;var d,y;if(\"object\"!=typeof o)return o;if(e(o,t))d=new t;else if(e(o,n))d=new n;else if(e(o,r))d=new r(function(e,t){o.then(function(t){e(v(t,a-1))},function(e){t(v(e,a-1))})});else if(i.__isArray(o))d=[];else if(i.__isRegExp(o))d=new RegExp(o.source,l(o)),o.lastIndex&&(d.lastIndex=o.lastIndex);else if(i.__isDate(o))d=new Date(o.getTime());else{if(h&&Buffer.isBuffer(o))return d=new Buffer(o.length),o.copy(d),d;e(o,Error)?d=Object.create(o):void 0===c?(y=Object.getPrototypeOf(o),d=Object.create(y)):(d=Object.create(c),y=c)}if(u){var m=f.indexOf(o);if(-1!=m)return p[m];f.push(o),p.push(d)}for(var g in e(o,t)&&o.forEach(function(e,t){var n=v(t,a-1),r=v(e,a-1);d.set(n,r)}),e(o,n)&&o.forEach(function(e){var t=v(e,a-1);d.add(t)}),o){var _;y&&(_=Object.getOwnPropertyDescriptor(y,g)),_&&null==_.set||(d[g]=v(o[g],a-1))}if(Object.getOwnPropertySymbols)for(var b=Object.getOwnPropertySymbols(o),g=0;g<b.length;g++){var j=b[g],O;(!(O=Object.getOwnPropertyDescriptor(o,j))||O.enumerable||s)&&(d[j]=v(o[j],a-1),O.enumerable||Object.defineProperty(d,j,{enumerable:!1}))}if(s)for(var w=Object.getOwnPropertyNames(o),g=0;g<w.length;g++){var S=w[g],O;(O=Object.getOwnPropertyDescriptor(o,S))&&O.enumerable||(d[S]=v(o[S],a-1),Object.defineProperty(d,S,{enumerable:!1}))}return d}return void 0===u&&(u=!0),void 0===a&&(a=1/0),v(o,a)}function o(e){return Object.prototype.toString.call(e)}function u(e){return\"object\"==typeof e&&\"[object Date]\"===o(e)}function a(e){return\"object\"==typeof e&&\"[object Array]\"===o(e)}function c(e){return\"object\"==typeof e&&\"[object RegExp]\"===o(e)}function l(e){var t=\"\";return e.global&&(t+=\"g\"),e.ignoreCase&&(t+=\"i\"),e.multiline&&(t+=\"m\"),t}return i.clonePrototype=function e(t){if(null===t)return null;var n=function(){};return n.prototype=t,new n},i.__objToStr=o,i.__isDate=u,i.__isArray=a,i.__isRegExp=c,i.__getRegExpFlags=l,i}();\"object\"==typeof n&&n.exports&&(n.exports=r)}},ejson:{\"package.json\":function(e,t,n){n.exports={name:\"ejson\",version:\"2.1.2\",main:\"index.js\"}},\"index.js\":function(e,t,n){n.exports=function(){\"use strict\";for(var t=function e(t){return t()},n,r,i,o,u=e(\"underscore\"),a=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",c={},i=0;i<a.length;i++)c[a.charAt(i)]=i;(o={}).encode=function(e){if(\"string\"==typeof e){var t=e;e=o.newBinary(t.length);for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r>255)throw new Error(\"Not ascii. Base64.encode can only take ascii strings.\");e[n]=r}}for(var i=[],u=null,a=null,c=null,l=null,n=0;n<e.length;n++)switch(n%3){case 0:u=e[n]>>2&63,a=(3&e[n])<<4;break;case 1:a|=e[n]>>4&15,c=(15&e[n])<<2;break;case 2:c|=e[n]>>6&3,l=63&e[n],i.push(s(u)),i.push(s(a)),i.push(s(c)),i.push(s(l)),u=null,a=null,c=null,l=null}return null!=u&&(i.push(s(u)),i.push(s(a)),null==c?i.push(\"=\"):i.push(s(c)),null==l&&i.push(\"=\")),i.join(\"\")};var s=function(e){return a.charAt(e)},l=function(e){return\"=\"===e?-1:c[e]};o.newBinary=function(e){if(\"undefined\"==typeof Uint8Array||\"undefined\"==typeof ArrayBuffer){for(var t=[],n=0;n<e;n++)t.push(0);return t.$Uint8ArrayPolyfill=!0,t}return new Uint8Array(new ArrayBuffer(e))},o.decode=function(e){var t=Math.floor(3*e.length/4);\"=\"==e.charAt(e.length-1)&&(t--,\"=\"==e.charAt(e.length-2)&&t--);for(var n=o.newBinary(t),r=null,i=null,u=null,a=0,c=0;c<e.length;c++){var s=e.charAt(c),f=l(s);switch(c%4){case 0:if(f<0)throw new Error(\"invalid base64 string\");r=f<<2;break;case 1:if(f<0)throw new Error(\"invalid base64 string\");r|=f>>4,n[a++]=r,i=(15&f)<<4;break;case 2:f>=0&&(i|=f>>2,n[a++]=i,u=(3&f)<<6);break;case 3:f>=0&&(n[a++]=u|f)}}return n},r={};var f={};(n={}).addType=function(e,t){if(u.has(f,e))throw new Error(\"Type \"+e+\" already present\");f[e]=t};var p=function(e){return u.isNaN(e)||e===1/0||e===-1/0},h=[{matchJSONValue:function(e){return u.has(e,\"$date\")&&1===u.size(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return u.has(e,\"$InfNaN\")&&1===u.size(e)},matchObject:p,toJSONValue:function(e){var t;return{$InfNaN:t=u.isNaN(e)?0:e===1/0?1:-1}},fromJSONValue:function(e){return e.$InfNaN/0}},{matchJSONValue:function(e){return u.has(e,\"$binary\")&&1===u.size(e)},matchObject:function(e){return\"undefined\"!=typeof Uint8Array&&e instanceof Uint8Array||e&&u.has(e,\"$Uint8ArrayPolyfill\")},toJSONValue:function(e){return{$binary:o.encode(e)}},fromJSONValue:function(e){return o.decode(e.$binary)}},{matchJSONValue:function(e){return u.has(e,\"$escape\")&&1===u.size(e)},matchObject:function(e){return!(u.isEmpty(e)||u.size(e)>2)&&u.any(h,function(t){return t.matchJSONValue(e)})},toJSONValue:function(e){var t={};return u.each(e,function(e,r){t[r]=n.toJSONValue(e)}),{$escape:t}},fromJSONValue:function(e){var t={};return u.each(e.$escape,function(e,r){t[r]=n.fromJSONValue(e)}),t}},{matchJSONValue:function(e){return u.has(e,\"$type\")&&u.has(e,\"$value\")&&2===u.size(e)},matchObject:function(e){return n._isCustomType(e)},toJSONValue:function(e){var n=t(function(){return e.toJSONValue()});return{$type:e.typeName(),$value:n}},fromJSONValue:function(e){var n=e.$type;if(!u.has(f,n))throw new Error(\"Custom EJSON type \"+n+\" is not defined\");var r=f[n];return t(function(){return r(e.$value)})}}];n._isCustomType=function(e){return e&&\"function\"==typeof e.toJSONValue&&\"function\"==typeof e.typeName&&u.has(f,e.typeName())},n._getTypes=function(){return f},n._getConverters=function(){return h};var v=n._adjustTypesToJSONValue=function(e){if(null===e)return null;var t=d(e);return void 0!==t?t:\"object\"!=typeof e?e:(u.each(e,function(t,n){if(\"object\"==typeof t||void 0===t||p(t)){var r=d(t);r?e[n]=r:v(t)}}),e)},d=function(e){for(var t=0;t<h.length;t++){var n=h[t];if(n.matchObject(e))return n.toJSONValue(e)}};n.toJSONValue=function(e){var t=d(e);return void 0!==t?t:(\"object\"==typeof e&&(e=n.clone(e),v(e)),e)};var y=n._adjustTypesFromJSONValue=function(e){if(null===e)return null;var t=m(e);return t!==e?t:\"object\"!=typeof e?e:(u.each(e,function(t,n){if(\"object\"==typeof t){var r=m(t);if(t!==r)return void(e[n]=r);y(t)}}),e)},m=function(e){if(\"object\"==typeof e&&null!==e&&u.size(e)<=2&&u.all(e,function(e,t){return\"string\"==typeof t&&\"$\"===t.substr(0,1)}))for(var t=0;t<h.length;t++){var n=h[t];if(n.matchJSONValue(e))return n.fromJSONValue(e)}return e};function g(e){return JSON.stringify(e)}n.fromJSONValue=function(e){var t=m(e);return t===e&&\"object\"==typeof e?(e=n.clone(e),y(e),e):t},n.stringify=function(e,t){var r=n.toJSONValue(e);return t&&(t.canonical||t.indent)?n._canonicalStringify(r,t):JSON.stringify(r)},n.parse=function(e){if(\"string\"!=typeof e)throw new Error(\"EJSON.parse argument should be a string\");return n.fromJSONValue(JSON.parse(e))},n.isBinary=function(e){return!!(\"undefined\"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},n.equals=function(e,t,r){var i,o=!(!r||!r.keyOrderSensitive),a;if(e===t)return!0;if(u.isNaN(e)&&u.isNaN(t))return!0;if(!e||!t)return!1;if(\"object\"!=typeof e||\"object\"!=typeof t)return!1;if(e instanceof Date&&t instanceof Date)return e.valueOf()===t.valueOf();if(n.isBinary(e)&&n.isBinary(t)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}if(\"function\"==typeof e.equals)return e.equals(t,r);if(\"function\"==typeof t.equals)return t.equals(e,r);if(e instanceof Array){if(!(t instanceof Array))return!1;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!n.equals(e[i],t[i],r))return!1;return!0}switch(n._isCustomType(e)+n._isCustomType(t)){case 1:return!1;case 2:return n.equals(n.toJSONValue(e),n.toJSONValue(t))}if(o){var c=[];return u.each(t,function(e,t){c.push(t)}),i=0,(a=u.all(e,function(e,o){return!(i>=c.length)&&(o===c[i]&&(!!n.equals(e,t[c[i]],r)&&(i++,!0)))}))&&i===c.length}return i=0,(a=u.all(e,function(e,o){return!!u.has(t,o)&&(!!n.equals(e,t[o],r)&&(i++,!0))}))&&u.size(t)===i},n.clone=function(e){var t;if(\"object\"!=typeof e)return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return e;if(n.isBinary(e)){t=n.newBinary(e.length);for(var r=0;r<e.length;r++)t[r]=e[r];return t}if(u.isArray(e)||u.isArguments(e)){for(t=[],r=0;r<e.length;r++)t[r]=n.clone(e[r]);return t}return\"function\"==typeof e.clone?e.clone():n._isCustomType(e)?n.fromJSONValue(n.clone(n.toJSONValue(e)),!0):(t={},u.each(e,function(e,r){t[r]=n.clone(e)}),t)},n.newBinary=o.newBinary;var _=function(e,t,n,r,i){var o,a,c,s,l=r,f,p=t[e];switch(typeof p){case\"string\":return g(p);case\"number\":return isFinite(p)?String(p):\"null\";case\"boolean\":return String(p);case\"object\":if(!p)return\"null\";if(l=r+n,f=[],u.isArray(p)||u.isArguments(p)){for(s=p.length,o=0;o<s;o+=1)f[o]=_(o,p,n,l,i)||\"null\";return c=0===f.length?\"[]\":l?\"[\\n\"+l+f.join(\",\\n\"+l)+\"\\n\"+r+\"]\":\"[\"+f.join(\",\")+\"]\"}var h=u.keys(p);return i&&(h=h.sort()),u.each(h,function(e){(c=_(e,p,n,l,i))&&f.push(g(e)+(l?\": \":\":\")+c)}),c=0===f.length?\"{}\":l?\"{\\n\"+l+f.join(\",\\n\"+l)+\"\\n\"+r+\"}\":\"{\"+f.join(\",\")+\"}\"}};return n._canonicalStringify=function(e,t){if(!0===(t=u.extend({indent:\"\",canonical:!1},t)).indent)t.indent=\"  \";else if(\"number\"==typeof t.indent){for(var n=\"\",r=0;r<t.indent;r++)n+=\" \";t.indent=n}return _(\"\",{\"\":e},t.indent,\"\",t.canonical)},n}.call(this)}},underscore:{\"package.json\":function(e,t,n){n.exports={name:\"underscore\",version:\"1.8.3\",main:\"underscore.js\"}},\"underscore.js\":function(e,t,n){(function(){var e=this,r=e._,i=Array.prototype,o=Object.prototype,u=Function.prototype,a=i.push,c=i.slice,s=o.toString,l=o.hasOwnProperty,f=Array.isArray,p=Object.keys,h=u.bind,v=Object.create,d=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};void 0!==t?(void 0!==n&&n.exports&&(t=n.exports=y),t._=y):e._=y,y.VERSION=\"1.8.3\";var m=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},g=function(e,t,n){return null==e?y.identity:y.isFunction(e)?m(e,t,n):y.isObject(e)?y.matcher(e):y.property(e)};y.iteratee=function(e,t){return g(e,t,1/0)};var _=function(e,t){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],u=e(o),a=u.length,c=0;c<a;c++){var s=u[c];t&&void 0!==n[s]||(n[s]=o[s])}return n}},b=function(e){if(!y.isObject(e))return{};if(v)return v(e);d.prototype=e;var t=new d;return d.prototype=null,t},j=function(e){return function(t){return null==t?void 0:t[e]}},O=Math.pow(2,53)-1,w=j(\"length\"),S=function(e){var t=w(e);return\"number\"==typeof t&&t>=0&&t<=O};function x(e){function t(t,n,r,i,o,u){for(;o>=0&&o<u;o+=e){var a=i?i[o]:o;r=n(r,t[a],a,t)}return r}return function(n,r,i,o){r=m(r,o,4);var u=!S(n)&&y.keys(n),a=(u||n).length,c=e>0?0:a-1;return arguments.length<3&&(i=n[u?u[c]:c],c+=e),t(n,r,i,u,c,a)}}y.each=y.forEach=function(e,t,n){var r,i;if(t=m(t,n),S(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=y.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},y.map=y.collect=function(e,t,n){t=g(t,n);for(var r=!S(e)&&y.keys(e),i=(r||e).length,o=Array(i),u=0;u<i;u++){var a=r?r[u]:u;o[u]=t(e[a],a,e)}return o},y.reduce=y.foldl=y.inject=x(1),y.reduceRight=y.foldr=x(-1),y.find=y.detect=function(e,t,n){var r;if(void 0!==(r=S(e)?y.findIndex(e,t,n):y.findKey(e,t,n))&&-1!==r)return e[r]},y.filter=y.select=function(e,t,n){var r=[];return t=g(t,n),y.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},y.reject=function(e,t,n){return y.filter(e,y.negate(g(t)),n)},y.every=y.all=function(e,t,n){t=g(t,n);for(var r=!S(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var u=r?r[o]:o;if(!t(e[u],u,e))return!1}return!0},y.some=y.any=function(e,t,n){t=g(t,n);for(var r=!S(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var u=r?r[o]:o;if(t(e[u],u,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,r){return S(e)||(e=y.values(e)),(\"number\"!=typeof n||r)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=function(e,t){var n=c.call(arguments,2),r=y.isFunction(t);return y.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var r=-1/0,i=-1/0,o,u;if(null==t&&null!=e)for(var a=0,c=(e=S(e)?e:y.values(e)).length;a<c;a++)(o=e[a])>r&&(r=o);else t=g(t,n),y.each(e,function(e,n,o){((u=t(e,n,o))>i||u===-1/0&&r===-1/0)&&(r=e,i=u)});return r},y.min=function(e,t,n){var r=1/0,i=1/0,o,u;if(null==t&&null!=e)for(var a=0,c=(e=S(e)?e:y.values(e)).length;a<c;a++)(o=e[a])<r&&(r=o);else t=g(t,n),y.each(e,function(e,n,o){((u=t(e,n,o))<i||u===1/0&&r===1/0)&&(r=e,i=u)});return r},y.shuffle=function(e){for(var t=S(e)?e:y.values(e),n=t.length,r=Array(n),i=0,o;i<n;i++)(o=y.random(0,i))!==i&&(r[i]=r[o]),r[o]=t[i];return r},y.sample=function(e,t,n){return null==t||n?(S(e)||(e=y.values(e)),e[y.random(e.length-1)]):y.shuffle(e).slice(0,Math.max(0,t))},y.sortBy=function(e,t,n){return t=g(t,n),y.pluck(y.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),\"value\")};var A=function(e){return function(t,n,r){var i={};return n=g(n,r),y.each(t,function(r,o){var u=n(r,o,t);e(i,r,u)}),i}};y.groupBy=A(function(e,t,n){y.has(e,n)?e[n].push(t):e[n]=[t]}),y.indexBy=A(function(e,t,n){e[n]=t}),y.countBy=A(function(e,t,n){y.has(e,n)?e[n]++:e[n]=1}),y.toArray=function(e){return e?y.isArray(e)?c.call(e):S(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:S(e)?e.length:y.keys(e).length},y.partition=function(e,t,n){t=g(t,n);var r=[],i=[];return y.each(e,function(e,n,o){(t(e,n,o)?r:i).push(e)}),[r,i]},y.first=y.head=y.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return c.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,y.identity)};var k=function(e,t,n,r){for(var i=[],o=0,u=r||0,a=w(e);u<a;u++){var c=e[u];if(S(c)&&(y.isArray(c)||y.isArguments(c))){t||(c=k(c,t,n));var s=0,l=c.length;for(i.length+=l;s<l;)i[o++]=c[s++]}else n||(i[o++]=c)}return i};function E(e){return function(t,n,r){n=g(n,r);for(var i=w(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}}function N(e,t,n){return function(r,i,o){var u=0,a=w(r);if(\"number\"==typeof o)e>0?u=o>=0?o:Math.max(o+a,u):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=t(c.call(r,u,a),y.isNaN))>=0?o+u:-1;for(o=e>0?u:a-1;o>=0&&o<a;o+=e)if(r[o]===i)return o;return-1}}y.flatten=function(e,t){return k(e,t,!1)},y.without=function(e){return y.difference(e,c.call(arguments,1))},y.uniq=y.unique=function(e,t,n,r){y.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=g(n,r));for(var i=[],o=[],u=0,a=w(e);u<a;u++){var c=e[u],s=n?n(c,u,e):c;t?(u&&o===s||i.push(c),o=s):n?y.contains(o,s)||(o.push(s),i.push(c)):y.contains(i,c)||i.push(c)}return i},y.union=function(){return y.uniq(k(arguments,!0,!0))},y.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=w(e);r<i;r++){var o=e[r];if(!y.contains(t,o)){for(var u=1;u<n&&y.contains(arguments[u],o);u++);u===n&&t.push(o)}}return t},y.difference=function(e){var t=k(arguments,!0,!0,1);return y.filter(e,function(e){return!y.contains(t,e)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(e){for(var t=e&&y.max(e,w).length||0,n=Array(t),r=0;r<t;r++)n[r]=y.pluck(e,r);return n},y.object=function(e,t){for(var n={},r=0,i=w(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},y.findIndex=E(1),y.findLastIndex=E(-1),y.sortedIndex=function(e,t,n,r){for(var i=(n=g(n,r,1))(t),o=0,u=w(e);o<u;){var a=Math.floor((o+u)/2);n(e[a])<i?o=a+1:u=a}return o},y.indexOf=N(1,y.findIndex,y.sortedIndex),y.lastIndexOf=N(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i};var V=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=b(e.prototype),u=e.apply(o,i);return y.isObject(u)?u:o};y.bind=function(e,t){if(h&&e.bind===h)return h.apply(e,c.call(arguments,1));if(!y.isFunction(e))throw new TypeError(\"Bind must be called on a function\");var n=c.call(arguments,2),r=function(){return V(e,r,t,this,n.concat(c.call(arguments)))};return r},y.partial=function(e){var t=c.call(arguments,1),n=function(){for(var r=0,i=t.length,o=Array(i),u=0;u<i;u++)o[u]=t[u]===y?arguments[r++]:t[u];for(;r<arguments.length;)o.push(arguments[r++]);return V(e,n,this,this,o)};return n},y.bindAll=function(e){var t,n=arguments.length,r;if(n<=1)throw new Error(\"bindAll must be passed function names\");for(t=1;t<n;t++)e[r=arguments[t]]=y.bind(e[r],e);return e},y.memoize=function(e,t){var n=function(r){var i=n.cache,o=\"\"+(t?t.apply(this,arguments):r);return y.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},y.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var r,i,o,u=null,a=0;n||(n={});var c=function(){a=!1===n.leading?0:y.now(),u=null,o=e.apply(r,i),u||(r=i=null)};return function(){var s=y.now();a||!1!==n.leading||(a=s);var l=t-(s-a);return r=this,i=arguments,l<=0||l>t?(u&&(clearTimeout(u),u=null),a=s,o=e.apply(r,i),u||(r=i=null)):u||!1===n.trailing||(u=setTimeout(c,l)),o}},y.debounce=function(e,t,n){var r,i,o,u,a,c=function(){var s=y.now()-u;s<t&&s>=0?r=setTimeout(c,t-s):(r=null,n||(a=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,u=y.now();var s=n&&!r;return r||(r=setTimeout(c,t)),s&&(a=e.apply(o,i),o=i=null),a}},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},y.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},y.once=y.partial(y.before,2);var C=!{toString:null}.propertyIsEnumerable(\"toString\"),I=[\"valueOf\",\"isPrototypeOf\",\"toString\",\"propertyIsEnumerable\",\"hasOwnProperty\",\"toLocaleString\"];function $(e,t){var n=I.length,r=e.constructor,i=y.isFunction(r)&&r.prototype||o,u=\"constructor\";for(y.has(e,u)&&!y.contains(t,u)&&t.push(u);n--;)(u=I[n])in e&&e[u]!==i[u]&&!y.contains(t,u)&&t.push(u)}y.keys=function(e){if(!y.isObject(e))return[];if(p)return p(e);var t=[];for(var n in e)y.has(e,n)&&t.push(n);return C&&$(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return C&&$(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},y.mapObject=function(e,t,n){t=g(t,n);for(var r=y.keys(e),i=r.length,o={},u,a=0;a<i;a++)o[u=r[a]]=t(e[u],u,e);return o},y.pairs=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},y.invert=function(e){for(var t={},n=y.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()},y.extend=_(y.allKeys),y.extendOwn=y.assign=_(y.keys),y.findKey=function(e,t,n){t=g(t,n);for(var r=y.keys(e),i,o=0,u=r.length;o<u;o++)if(t(e[i=r[o]],i,e))return i},y.pick=function(e,t,n){var r={},i=e,o,u;if(null==i)return r;y.isFunction(t)?(u=y.allKeys(i),o=m(t,n)):(u=k(arguments,!1,!1,1),o=function(e,t,n){return t in n},i=Object(i));for(var a=0,c=u.length;a<c;a++){var s=u[a],l=i[s];o(l,s,i)&&(r[s]=l)}return r},y.omit=function(e,t,n){if(y.isFunction(t))t=y.negate(t);else{var r=y.map(k(arguments,!1,!1,1),String);t=function(e,t){return!y.contains(r,t)}}return y.pick(e,t,n)},y.defaults=_(y.allKeys,!0),y.create=function(e,t){var n=b(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var u=n[o];if(t[u]!==i[u]||!(u in i))return!1}return!0};var P=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var i=s.call(e);if(i!==s.call(t))return!1;switch(i){case\"[object RegExp]\":case\"[object String]\":return\"\"+e==\"\"+t;case\"[object Number]\":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case\"[object Date]\":case\"[object Boolean]\":return+e==+t}var o=\"[object Array]\"===i;if(!o){if(\"object\"!=typeof e||\"object\"!=typeof t)return!1;var u=e.constructor,a=t.constructor;if(u!==a&&!(y.isFunction(u)&&u instanceof u&&y.isFunction(a)&&a instanceof a)&&\"constructor\"in e&&\"constructor\"in t)return!1}r=r||[];for(var c=(n=n||[]).length;c--;)if(n[c]===e)return r[c]===t;if(n.push(e),r.push(t),o){if((c=e.length)!==t.length)return!1;for(;c--;)if(!P(e[c],t[c],n,r))return!1}else{var l=y.keys(e),f;if(c=l.length,y.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!y.has(t,f)||!P(e[f],t[f],n,r))return!1}return n.pop(),r.pop(),!0};y.isEqual=function(e,t){return P(e,t)},y.isEmpty=function(e){return null==e||(S(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=f||function(e){return\"[object Array]\"===s.call(e)},y.isObject=function(e){var t=typeof e;return\"function\"===t||\"object\"===t&&!!e},y.each([\"Arguments\",\"Function\",\"String\",\"Number\",\"Date\",\"RegExp\",\"Error\"],function(e){y[\"is\"+e]=function(t){return s.call(t)===\"[object \"+e+\"]\"}}),y.isArguments(arguments)||(y.isArguments=function(e){return y.has(e,\"callee\")}),\"function\"!=typeof/./&&\"object\"!=typeof Int8Array&&(y.isFunction=function(e){return\"function\"==typeof e||!1}),y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!==+e},y.isBoolean=function(e){return!0===e||!1===e||\"[object Boolean]\"===s.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return null!=e&&l.call(e,t)},y.noConflict=function(){return e._=r,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=j,y.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var r=Array(Math.max(0,e));t=m(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var z={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#x27;\",\"`\":\"&#x60;\"},F=y.invert(z),J=function(e){var t=function(t){return e[t]},n=\"(?:\"+y.keys(e).join(\"|\")+\")\",r=RegExp(n),i=RegExp(n,\"g\");return function(e){return e=null==e?\"\":\"\"+e,r.test(e)?e.replace(i,t):e}};y.escape=J(z),y.unescape=J(F),y.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),y.isFunction(r)?r.call(e):r};var B=0;y.uniqueId=function(e){var t=++B+\"\";return e?e+t:t},y.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g};var M=/(.)^/,T={\"'\":\"'\",\"\\\\\":\"\\\\\",\"\\r\":\"r\",\"\\n\":\"n\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},D=/\\\\|'|\\r|\\n|\\u2028|\\u2029/g,U=function(e){return\"\\\\\"+T[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var r=RegExp([(t.escape||M).source,(t.interpolate||M).source,(t.evaluate||M).source].join(\"|\")+\"|$\",\"g\"),i=0,o=\"__p+='\";e.replace(r,function(t,n,r,u,a){return o+=e.slice(i,a).replace(D,U),i=a+t.length,n?o+=\"'+\\n((__t=(\"+n+\"))==null?'':_.escape(__t))+\\n'\":r?o+=\"'+\\n((__t=(\"+r+\"))==null?'':__t)+\\n'\":u&&(o+=\"';\\n\"+u+\"\\n__p+='\"),t}),o+=\"';\\n\",t.variable||(o=\"with(obj||{}){\\n\"+o+\"}\\n\"),o=\"var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\\n\"+o+\"return __p;\\n\";try{var u=new Function(t.variable||\"obj\",\"_\",o)}catch(e){throw e.source=o,e}var a=function(e){return u.call(this,e,y)},c=t.variable||\"obj\";return a.source=\"function(\"+c+\"){\\n\"+o+\"}\",a},y.chain=function(e){var t=y(e);return t._chain=!0,t};var q=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){y.each(y.functions(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),q(this,n.apply(y,e))}})},y.mixin(y),y.each([\"pop\",\"push\",\"reverse\",\"shift\",\"sort\",\"splice\",\"unshift\"],function(e){var t=i[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),\"shift\"!==e&&\"splice\"!==e||0!==n.length||delete n[0],q(this,n)}}),y.each([\"concat\",\"join\",\"slice\"],function(e){var t=i[e];y.prototype[e]=function(){return q(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return\"\"+this._wrapped},\"function\"==typeof define&&define.amd&&define(\"underscore\",[],function(){return y})}).call(this)}},\"lodash.isempty\":{\"package.json\":function(e,t,n){n.exports={name:\"lodash.isempty\",version:\"4.4.0\"}},\"index.js\":function(e,n,r){var i=9007199254740991,o=\"[object Arguments]\",u=\"[object Function]\",a=\"[object GeneratorFunction]\",c=\"[object Map]\",s=\"[object Object]\",l=\"[object Promise]\",f=\"[object Set]\",p=\"[object WeakMap]\",h=\"[object DataView]\",v=/[\\\\^$.*+?()[\\]{}|]/g,d=/^\\[object .+?Constructor\\]$/,y=\"object\"==typeof t&&t&&t.Object===Object&&t,m=\"object\"==typeof self&&self&&self.Object===Object&&self,g=y||m||Function(\"return this\")(),_=\"object\"==typeof n&&n&&!n.nodeType&&n,b=_&&\"object\"==typeof r&&r&&!r.nodeType&&r,j=b&&b.exports===_;function O(e,t){return null==e?void 0:e[t]}function w(e){var t=!1;if(null!=e&&\"function\"!=typeof e.toString)try{t=!!(e+\"\")}catch(e){}return t}function S(e,t){return function(n){return e(t(n))}}var x=Function.prototype,A=Object.prototype,k=g[\"__core-js_shared__\"],E=(N=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+N:\"\",N,V=x.toString,C=A.hasOwnProperty,I=A.toString,$=RegExp(\"^\"+V.call(C).replace(v,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\"),P=j?g.Buffer:void 0,z=A.propertyIsEnumerable,F=P?P.isBuffer:void 0,J=S(Object.keys,Object),B=X(g,\"DataView\"),M=X(g,\"Map\"),T=X(g,\"Promise\"),D=X(g,\"Set\"),U=X(g,\"WeakMap\"),q=!z.call({valueOf:1},\"valueOf\"),R=te(B),L=te(M),K=te(T),W=te(D),G=te(U);function H(e){return I.call(e)}function Q(e){return!(!le(e)||Z(e))&&(ce(e)||w(e)?$:d).test(te(e));var t}function X(e,t){var n=O(e,t);return Q(n)?n:void 0}var Y=H;function Z(e){return!!E&&E in e}function ee(e){var t=e&&e.constructor,n;return e===(\"function\"==typeof t&&t.prototype||A)}function te(e){if(null!=e){try{return V.call(e)}catch(e){}try{return e+\"\"}catch(e){}}return\"\"}function ne(e){return oe(e)&&C.call(e,\"callee\")&&(!z.call(e,\"callee\")||I.call(e)==o)}(B&&Y(new B(new ArrayBuffer(1)))!=h||M&&Y(new M)!=c||T&&Y(T.resolve())!=l||D&&Y(new D)!=f||U&&Y(new U)!=p)&&(Y=function(e){var t=I.call(e),n=t==s?e.constructor:void 0,r=n?te(n):void 0;if(r)switch(r){case R:return h;case L:return c;case K:return l;case W:return f;case G:return p}return t});var re=Array.isArray;function ie(e){return null!=e&&se(e.length)&&!ce(e)}function oe(e){return fe(e)&&ie(e)}var ue=F||pe;function ae(e){if(ie(e)&&(re(e)||\"string\"==typeof e||\"function\"==typeof e.splice||ue(e)||ne(e)))return!e.length;var t=Y(e);if(t==c||t==f)return!e.size;if(q||ee(e))return!J(e).length;for(var n in e)if(C.call(e,n))return!1;return!0}function ce(e){var t=le(e)?I.call(e):\"\";return t==u||t==a}function se(e){return\"number\"==typeof e&&e>-1&&e%1==0&&e<=i}function le(e){var t=typeof e;return!!e&&(\"object\"==t||\"function\"==t)}function fe(e){return!!e&&\"object\"==typeof e}function pe(){return!1}r.exports=ae}},\"lodash.isequal\":{\"package.json\":function(e,t,n){n.exports={name:\"lodash.isequal\",version:\"4.5.0\"}},\"index.js\":function(e,n,r){var i=200,o=\"__lodash_hash_undefined__\",u=1,a=2,c=9007199254740991,s=\"[object Arguments]\",l=\"[object Array]\",f=\"[object AsyncFunction]\",p=\"[object Boolean]\",h=\"[object Date]\",v=\"[object Error]\",d=\"[object Function]\",y=\"[object GeneratorFunction]\",m=\"[object Map]\",g=\"[object Number]\",_=\"[object Null]\",b=\"[object Object]\",j=\"[object Promise]\",O=\"[object Proxy]\",w=\"[object RegExp]\",S=\"[object Set]\",x=\"[object String]\",A=\"[object Symbol]\",k=\"[object Undefined]\",E=\"[object WeakMap]\",N=\"[object ArrayBuffer]\",V=\"[object DataView]\",C,I=\"[object Float64Array]\",$=\"[object Int8Array]\",P=\"[object Int16Array]\",z=\"[object Int32Array]\",F=\"[object Uint8Array]\",J=\"[object Uint8ClampedArray]\",B=\"[object Uint16Array]\",M=\"[object Uint32Array]\",T=/[\\\\^$.*+?()[\\]{}|]/g,D=/^\\[object .+?Constructor\\]$/,U=/^(?:0|[1-9]\\d*)$/,q={};q[\"[object Float32Array]\"]=q[I]=q[$]=q[P]=q[z]=q[F]=q[J]=q[B]=q[M]=!0,q[s]=q[l]=q[N]=q[p]=q[V]=q[h]=q[v]=q[d]=q[m]=q[g]=q[b]=q[w]=q[S]=q[x]=q[E]=!1;var R=\"object\"==typeof t&&t&&t.Object===Object&&t,L=\"object\"==typeof self&&self&&self.Object===Object&&self,K=R||L||Function(\"return this\")(),W=\"object\"==typeof n&&n&&!n.nodeType&&n,G=W&&\"object\"==typeof r&&r&&!r.nodeType&&r,H=G&&G.exports===W,Q=H&&R.process,X=function(){try{return Q&&Q.binding&&Q.binding(\"util\")}catch(e){}}(),Y=X&&X.isTypedArray;function Z(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var u=e[n];t(u,n,e)&&(o[i++]=u)}return o}function ee(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function te(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function ne(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function re(e){return function(t){return e(t)}}function ie(e,t){return e.has(t)}function oe(e,t){return null==e?void 0:e[t]}function ue(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function ae(e,t){return function(n){return e(t(n))}}function ce(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var se=Array.prototype,le=Function.prototype,fe=Object.prototype,pe=K[\"__core-js_shared__\"],he=le.toString,ve=fe.hasOwnProperty,de=(ye=/[^.]+$/.exec(pe&&pe.keys&&pe.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+ye:\"\",ye,me=fe.toString,ge=RegExp(\"^\"+he.call(ve).replace(T,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\"),_e=H?K.Buffer:void 0,be=K.Symbol,je=K.Uint8Array,Oe=fe.propertyIsEnumerable,we=se.splice,Se=be?be.toStringTag:void 0,xe=Object.getOwnPropertySymbols,Ae=_e?_e.isBuffer:void 0,ke=ae(Object.keys,Object),Ee=Nt(K,\"DataView\"),Ne=Nt(K,\"Map\"),Ve=Nt(K,\"Promise\"),Ce=Nt(K,\"Set\"),Ie=Nt(K,\"WeakMap\"),$e=Nt(Object,\"create\"),Pe=Bt(Ee),ze=Bt(Ne),Fe=Bt(Ve),Je=Bt(Ce),Be=Bt(Ie),Me=be?be.prototype:void 0,Te=Me?Me.valueOf:void 0;function De(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ue(){this.__data__=$e?$e(null):{},this.size=0}function qe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Re(e){var t=this.__data__;if($e){var n=t[e];return n===o?void 0:n}return ve.call(t,e)?t[e]:void 0}function Le(e){var t=this.__data__;return $e?void 0!==t[e]:ve.call(t,e)}function Ke(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=$e&&void 0===t?o:t,this}function We(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ge(){this.__data__=[],this.size=0}function He(e){var t=this.__data__,n=dt(t,e),r;return!(n<0)&&(n==t.length-1?t.pop():we.call(t,n,1),--this.size,!0)}function Qe(e){var t=this.__data__,n=dt(t,e);return n<0?void 0:t[n][1]}function Xe(e){return dt(this.__data__,e)>-1}function Ye(e,t){var n=this.__data__,r=dt(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function Ze(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function et(){this.size=0,this.__data__={hash:new De,map:new(Ne||We),string:new De}}function tt(e){var t=Et(this,e).delete(e);return this.size-=t?1:0,t}function nt(e){return Et(this,e).get(e)}function rt(e){return Et(this,e).has(e)}function it(e,t){var n=Et(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function ot(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Ze;++t<n;)this.add(e[t])}function ut(e){return this.__data__.set(e,o),this}function at(e){return this.__data__.has(e)}function ct(e){var t=this.__data__=new We(e);this.size=t.size}function st(){this.__data__=new We,this.size=0}function lt(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function ft(e){return this.__data__.get(e)}function pt(e){return this.__data__.has(e)}function ht(e,t){var n=this.__data__;if(n instanceof We){var r=n.__data__;if(!Ne||r.length<i-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ze(r)}return n.set(e,t),this.size=n.size,this}function vt(e,t){var n=Dt(e),r=!n&&Tt(e),i=!n&&!r&&qt(e),o=!n&&!r&&!i&&Ht(e),u=n||r||i||o,a=u?ne(e.length,String):[],c=a.length;for(var s in e)!t&&!ve.call(e,s)||u&&(\"length\"==s||i&&(\"offset\"==s||\"parent\"==s)||o&&(\"buffer\"==s||\"byteLength\"==s||\"byteOffset\"==s)||$t(s,c))||a.push(s);return a}function dt(e,t){for(var n=e.length;n--;)if(Mt(e[n][0],t))return n;return-1}function yt(e,t,n){var r=t(e);return Dt(e)?r:ee(r,n(e))}function mt(e){return null==e?void 0===e?k:_:Se&&Se in Object(e)?Vt(e):Jt(e)}function gt(e){return Gt(e)&&mt(e)==s}function _t(e,t,n,r,i){return e===t||(null==e||null==t||!Gt(e)&&!Gt(t)?e!=e&&t!=t:bt(e,t,n,r,_t,i))}function bt(e,t,n,r,i,o){var a=Dt(e),c=Dt(t),f=a?l:It(e),p=c?l:It(t),h=(f=f==s?b:f)==b,v=(p=p==s?b:p)==b,d=f==p;if(d&&qt(e)){if(!qt(t))return!1;a=!0,h=!1}if(d&&!h)return o||(o=new ct),a||Ht(e)?St(e,t,n,r,i,o):xt(e,t,f,n,r,i,o);if(!(n&u)){var y=h&&ve.call(e,\"__wrapped__\"),m=v&&ve.call(t,\"__wrapped__\");if(y||m){var g=y?e.value():e,_=m?t.value():t;return o||(o=new ct),i(g,_,n,r,o)}}return!!d&&(o||(o=new ct),At(e,t,n,r,i,o))}function jt(e){return!(!Wt(e)||zt(e))&&(Lt(e)?ge:D).test(Bt(e));var t}function Ot(e){return Gt(e)&&Kt(e.length)&&!!q[mt(e)]}function wt(e){if(!Ft(e))return ke(e);var t=[];for(var n in Object(e))ve.call(e,n)&&\"constructor\"!=n&&t.push(n);return t}function St(e,t,n,r,i,o){var c=n&u,s=e.length,l=t.length;if(s!=l&&!(c&&l>s))return!1;var f=o.get(e);if(f&&o.get(t))return f==t;var p=-1,h=!0,v=n&a?new ot:void 0;for(o.set(e,t),o.set(t,e);++p<s;){var d=e[p],y=t[p];if(r)var m=c?r(y,d,p,t,e,o):r(d,y,p,e,t,o);if(void 0!==m){if(m)continue;h=!1;break}if(v){if(!te(t,function(e,t){if(!ie(v,t)&&(d===e||i(d,e,n,r,o)))return v.push(t)})){h=!1;break}}else if(d!==y&&!i(d,y,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function xt(e,t,n,r,i,o,c){switch(n){case V:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case N:return!(e.byteLength!=t.byteLength||!o(new je(e),new je(t)));case p:case h:case g:return Mt(+e,+t);case v:return e.name==t.name&&e.message==t.message;case w:case x:return e==t+\"\";case m:var s=ue;case S:var l=r&u;if(s||(s=ce),e.size!=t.size&&!l)return!1;var f=c.get(e);if(f)return f==t;r|=a,c.set(e,t);var d=St(s(e),s(t),r,i,o,c);return c.delete(e),d;case A:if(Te)return Te.call(e)==Te.call(t)}return!1}function At(e,t,n,r,i,o){var a=n&u,c=kt(e),s=c.length,l,f;if(s!=kt(t).length&&!a)return!1;for(var p=s;p--;){var h=c[p];if(!(a?h in t:ve.call(t,h)))return!1}var v=o.get(e);if(v&&o.get(t))return v==t;var d=!0;o.set(e,t),o.set(t,e);for(var y=a;++p<s;){var m=e[h=c[p]],g=t[h];if(r)var _=a?r(g,m,h,t,e,o):r(m,g,h,e,t,o);if(!(void 0===_?m===g||i(m,g,n,r,o):_)){d=!1;break}y||(y=\"constructor\"==h)}if(d&&!y){var b=e.constructor,j=t.constructor;b!=j&&\"constructor\"in e&&\"constructor\"in t&&!(\"function\"==typeof b&&b instanceof b&&\"function\"==typeof j&&j instanceof j)&&(d=!1)}return o.delete(e),o.delete(t),d}function kt(e){return yt(e,Qt,Ct)}function Et(e,t){var n=e.__data__;return Pt(t)?n[\"string\"==typeof t?\"string\":\"hash\"]:n.map}function Nt(e,t){var n=oe(e,t);return jt(n)?n:void 0}function Vt(e){var t=ve.call(e,Se),n=e[Se];try{e[Se]=void 0;var r=!0}catch(e){}var i=me.call(e);return r&&(t?e[Se]=n:delete e[Se]),i}De.prototype.clear=Ue,De.prototype.delete=qe,De.prototype.get=Re,De.prototype.has=Le,De.prototype.set=Ke,We.prototype.clear=Ge,We.prototype.delete=He,We.prototype.get=Qe,We.prototype.has=Xe,We.prototype.set=Ye,Ze.prototype.clear=et,Ze.prototype.delete=tt,Ze.prototype.get=nt,Ze.prototype.has=rt,Ze.prototype.set=it,ot.prototype.add=ot.prototype.push=ut,ot.prototype.has=at,ct.prototype.clear=st,ct.prototype.delete=lt,ct.prototype.get=ft,ct.prototype.has=pt,ct.prototype.set=ht;var Ct=xe?function(e){return null==e?[]:(e=Object(e),Z(xe(e),function(t){return Oe.call(e,t)}))}:Xt,It=mt;function $t(e,t){return!!(t=null==t?c:t)&&(\"number\"==typeof e||U.test(e))&&e>-1&&e%1==0&&e<t}function Pt(e){var t=typeof e;return\"string\"==t||\"number\"==t||\"symbol\"==t||\"boolean\"==t?\"__proto__\"!==e:null===e}function zt(e){return!!de&&de in e}function Ft(e){var t=e&&e.constructor,n;return e===(\"function\"==typeof t&&t.prototype||fe)}function Jt(e){return me.call(e)}function Bt(e){if(null!=e){try{return he.call(e)}catch(e){}try{return e+\"\"}catch(e){}}return\"\"}function Mt(e,t){return e===t||e!=e&&t!=t}(Ee&&It(new Ee(new ArrayBuffer(1)))!=V||Ne&&It(new Ne)!=m||Ve&&It(Ve.resolve())!=j||Ce&&It(new Ce)!=S||Ie&&It(new Ie)!=E)&&(It=function(e){var t=mt(e),n=t==b?e.constructor:void 0,r=n?Bt(n):\"\";if(r)switch(r){case Pe:return V;case ze:return m;case Fe:return j;case Je:return S;case Be:return E}return t});var Tt=gt(function(){return arguments}())?gt:function(e){return Gt(e)&&ve.call(e,\"callee\")&&!Oe.call(e,\"callee\")},Dt=Array.isArray;function Ut(e){return null!=e&&Kt(e.length)&&!Lt(e)}var qt=Ae||Yt;function Rt(e,t){return _t(e,t)}function Lt(e){if(!Wt(e))return!1;var t=mt(e);return t==d||t==y||t==f||t==O}function Kt(e){return\"number\"==typeof e&&e>-1&&e%1==0&&e<=c}function Wt(e){var t=typeof e;return null!=e&&(\"object\"==t||\"function\"==t)}function Gt(e){return null!=e&&\"object\"==typeof e}var Ht=Y?re(Y):Ot;function Qt(e){return Ut(e)?vt(e):wt(e)}function Xt(){return[]}function Yt(){return!1}r.exports=Rt}},\"lodash.isobject\":{\"package.json\":function(e,t,n){n.exports={name:\"lodash.isobject\",version:\"3.0.2\"}},\"index.js\":function(e,t,n){function r(e){var t=typeof e;return!!e&&(\"object\"==t||\"function\"==t)}n.exports=r}}}}}}},{extensions:[\".js\",\".json\"]})(\"/node_modules/meteor/aldeed:collection2/collection2.js\");Package._define(\"aldeed:collection2\",l,{Collection2:void 0})}();","sourcemap":"{\"version\":3,\"sources\":[\"packages/aldeed:collection2/collection2.js\"],\"names\":[\"EventEmitter\",\"Meteor\",\"Mongo\",\"checkNpmVersions\",\"clone\",\"EJSON\",\"isEmpty\",\"isEqual\",\"isObject\",\"module\",\"link\",\"v\",\"default\",\"simpl-schema\",\"SimpleSchema\",\"require\",\"Collection2\",\"defaultCleanOptions\",\"filter\",\"autoConvert\",\"removeEmptyStrings\",\"trimStrings\",\"removeNullsFromArrays\",\"doValidate\",\"collection\",\"type\",\"args\",\"getAutoValues\",\"userId\",\"isFromTrustedCode\",\"doc\",\"callback\",\"error\",\"options\",\"isUpsert\",\"selector\",\"last\",\"hasCallback\",\"length\",\"Error\",\"validatedObjectWasInitiallyEmpty\",\"upsert\",\"schema\",\"simpleSchema\",\"isLocalCollection\",\"_connection\",\"isServer\",\"validationContext\",\"namedContext\",\"isClient\",\"err\",\"_debug\",\"reason\",\"stack\",\"wrapCallbackForParsingServerErrors\",\"schemaAllowsId\",\"allowsKey\",\"docId\",\"cachedId\",\"_id\",\"_makeNewID\",\"ObjectID\",\"autoValueContext\",\"isInsert\",\"isUpdate\",\"extendAutoValueContext\",\"_objectSpread2\",\"_cleanOptions\",\"cleanOptionsForThisOperation\",\"forEach\",\"prop\",\"clean\",\"mutate\",\"isModifier\",\"docToValidate\",\"isValid\",\"Object\",\"prototype\",\"hasOwnProperty\",\"call\",\"set\",\"$set\",\"Array\",\"isArray\",\"$and\",\"plainSelector\",\"sel\",\"assign\",\"validate\",\"modifier\",\"extendedCustomContext\",\"wrapCallbackForParsingMongoValidationErrors\",\"getErrorObject\",\"concat\",\"_name\",\"context\",\"appendToMessage\",\"arguments\",\"undefined\",\"message\",\"invalidKeys\",\"validationErrors\",\"firstErrorKey\",\"name\",\"firstErrorMessage\",\"keyErrorMessage\",\"indexOf\",\"trim\",\"sanitizedError\",\"stringify\",\"addUniqueError\",\"errorMessage\",\"split\",\"val\",\"addValidationErrorsPropName\",\"addValidationErrors\",\"value\",\"cb\",\"wrappedCallbackForParsingMongoValidationErrors\",\"_len2\",\"_key2\",\"code\",\"apply\",\"this\",\"wrappedCallbackForParsingServerErrors\",\"_len3\",\"_key3\",\"details\",\"invalidKeysFromServer\",\"parse\",\"Collection\",\"attachSchema\",\"c2AttachSchema\",\"ss\",\"isSimpleSchema\",\"_c2\",\"_simpleSchema\",\"replace\",\"version\",\"newSS\",\"extend\",\"attachTo\",\"obj\",\"schemaIndex\",\"_simpleSchemas\",\"index\",\"push\",\"_collection\",\"LocalCollection\",\"defineDeny\",\"keepInsecure\",\"emit\",\"query\",\"schemas\",\"target\",\"i\",\"keys\",\"methodName\",\"_super\",\"_len\",\"_key\",\"bypassCollection2\",\"splice\",\"alreadyInsecure\",\"c\",\"Package\",\"insecure\",\"allow\",\"insert\",\"update\",\"remove\",\"fetch\",\"transform\",\"alreadyDefined\",\"deny\",\"fields\",\"exportDefault\"],\"mappings\":\"mgBAAA,IAAIA,EAA6FC,EAAgEC,EAA4DC,EAAmHC,EAAuDC,EAAuDC,EAAoEC,EAAoEC,EAArjBC,EAAOC,KAAK,4BAA4BV,aAAaW,GAAGX,EAAaW,IAAI,GAAcF,EAAOC,KAAK,iBAAiBT,OAAOU,GAAGV,EAAOU,IAAI,GAAaF,EAAOC,KAAK,gBAAgBR,MAAMS,GAAGT,EAAMS,IAAI,GAAwBF,EAAOC,KAAK,sCAAsCP,iBAAiBQ,GAAGR,EAAiBQ,IAAI,GAAaF,EAAOC,KAAK,SAASE,QAAQD,GAAGP,EAAMO,IAAI,GAAaF,EAAOC,KAAK,SAASE,QAAQD,GAAGN,EAAMM,IAAI,GAAeF,EAAOC,KAAK,kBAAkBE,QAAQD,GAAGL,EAAQK,IAAI,GAAeF,EAAOC,KAAK,kBAAkBE,QAAQD,GAAGJ,EAAQI,IAAI,GAAgBF,EAAOC,KAAK,mBAAmBE,QAAQD,GAAGH,EAASG,IAAI,GAUtoBR,GAAmBU,eAAgB,WAAa,sBAEhD,MAAMC,EAAeC,EAAQ,gBAAgBH,QAGvCI,EAAc,IAAIhB,EAElBiB,GACJC,QAAQ,EACRC,aAAa,EACbC,oBAAoB,EACpBC,aAAa,EACbC,uBAAuB,GAsMzB,SAASC,EAAWC,EAAYC,EAAMC,EAAMC,EAAeC,EAAQC,GACjE,IAAIC,EAAKC,EAAUC,EAAOC,EAASC,EAAUC,EAAUC,EAAMC,EAE7D,IAAKX,EAAKY,OACR,MAAM,IAAIC,MAAMd,EAAO,yBAIzB,GAAa,WAATA,EACFK,EAAMJ,EAAK,GACXO,EAAUP,EAAK,GACfK,EAAWL,EAAK,GAIdA,EADqB,mBAAZO,GACDH,EAAKG,GACgB,mBAAbF,GACRD,EAAKC,IAELD,OAEL,CAAA,GAAa,WAATL,EAMT,MAAM,IAAIc,MAAM,yBALhBJ,EAAWT,EAAK,GAChBI,EAAMJ,EAAK,GACXO,EAAUP,EAAK,GACfK,EAAWL,EAAK,GAKlB,IAAIc,EAAmClC,EAAQwB,GAG1CC,GAA+B,mBAAZE,IACtBF,EAAWE,EACXA,MAEFA,EAAUA,MAIVI,EAAqC,mBAAfX,EAFtBU,EAAOV,EAAKY,OAAS,GAKrBJ,EAAqB,WAATT,IAAwC,IAAnBQ,EAAQQ,OAIzC,IAAIC,EAASlB,EAAWmB,aAAab,EAAKG,EAASE,GAC/CS,EAAgD,OAA3BpB,EAAWqB,aAG/B5C,EAAO6C,UAAYF,KAAgD,IAA1BX,EAAQN,gBACpDA,GAAgB,GAIlB,IAAIoB,EAAoBd,EAAQc,kBAC5BA,EAC+B,iBAAtBA,IACTA,EAAoBL,EAAOM,aAAaD,IAG1CA,EAAoBL,EAAOM,eAIzB/C,EAAOgD,WAAalB,IAMtBA,EAAW,SAASmB,GACdA,GACFjD,EAAOkD,OAAO1B,EAAO,aAAeyB,EAAIE,QAAUF,EAAIG,UAQxDpD,EAAOgD,UAAYZ,IACrBN,EAAWL,EAAKU,GAAQkB,EAAmCP,EAAmBhB,IAGhF,IAAIwB,EAAiBb,EAAOc,UAAU,OAMlCC,EASAC,EAdS,WAATjC,IAAsBK,EAAI6B,KAAOJ,IACnCzB,EAAI6B,IAAMnC,EAAWoC,cAKV,WAATnC,EACFgC,EAAQ3B,EAAI6B,IACM,WAATlC,GAAqBU,IAC9BsB,EAA4B,iBAAbtB,GAAyBA,aAAoBjC,EAAM2D,SAAW1B,EAAWA,EAASwB,KAM/F7B,EAAI6B,MAAQJ,IACdG,EAAW5B,EAAI6B,WACR7B,EAAI6B,KAGb,MAAMG,GACJC,SAAoB,WAATtC,EACXuC,SAAoB,WAATvC,IAAwC,IAAnBQ,EAAQQ,OACxCP,SAAAA,EACAN,OAAAA,EACAC,kBAAAA,EACA4B,MAAAA,EACAb,kBAAAA,GAGIqB,GAAsB,EAAAC,EAAAtD,aACrB8B,EAAOyB,mBAAqBF,2BAC9BH,EACA7B,EAAQgC,wBAGPG,MACL,cAAe,SAAU,qBAAsB,wBAAyB,eAAeC,QAAQC,IACjE,kBAAlBrC,EAAQqC,KACjBF,EAA6BE,GAAQrC,EAAQqC,MAMjD5B,EAAO6B,MAAMzC,GAAb,EAAAoC,EAAAtD,UACE4D,QAAQ,EACRC,WAAsB,WAAThD,GAEVR,EAECyB,EAAOyB,kBAERC,GACHH,uBAAAA,EACAtC,cAAAA,KAMF,IAAI+C,KA2DAC,EA1DJ,IAAK,IAAIL,KAAQxC,EAGX8C,OAAOC,UAAUC,eAAeC,KAAKjD,EAAKwC,KAC5CI,EAAcJ,GAAQxC,EAAIwC,IAU9B,GAAIrE,EAAO6C,UAAYZ,GAAY1B,EAAS2B,GAAW,CACrD,IAAI6C,EAAMN,EAAcO,SAGxB,GAAIC,MAAMC,QAAQhD,EAASiD,MAAO,CAChC,MAAMC,KACNlD,EAASiD,KAAKf,QAAQiB,IACpBV,OAAOW,OAAOF,EAAeC,KAE/BZ,EAAcO,KAAOI,OAErBX,EAAcO,KAAO7E,EAAM+B,GAGxBoB,UAAuBmB,EAAcO,KAAKtB,IAC/CiB,OAAOW,OAAOb,EAAcO,KAAMD,GAsBpC,GAfI/E,EAAOgD,WAAaL,GACtBF,EAAO6B,MAAMG,GACXvD,aAAa,EACb8C,uBAAAA,EACA/C,QAAQ,EACRS,eAAe,EACf8C,WAAsB,WAAThD,EACb+C,QAAQ,EACRpD,oBAAoB,EACpBE,uBAAuB,EACvBD,aAAa,KAKZmB,GAAoClC,EAAQoE,GAC/C,MAAM,IAAInC,MAAM,qDACJ,WAATd,EAAoB,WAAa,UAClC,iBAwBJ,GAlBEkD,GADuB,IAArB1C,EAAQuD,UAGAzC,EAAkByC,SAASd,GACnCe,SAAoB,WAAThE,GAA8B,WAATA,EAChCgB,OAAQP,EACRwD,uBAAqB,EAAAxB,EAAAtD,UACnBmD,SAAoB,WAATtC,EACXuC,SAAoB,WAATvC,IAAwC,IAAnBQ,EAAQQ,OACxCP,SAAAA,EACAN,OAAAA,EACAC,kBAAAA,EACA4B,MAAAA,EACAb,kBAAAA,GACIX,EAAQyD,6BAwBhB,OAjBIhC,IACF5B,EAAI6B,IAAMD,GAKC,WAATjC,EACFC,EAAK,GAAKI,EAEVJ,EAAK,GAAKI,EAIR7B,EAAO6C,UAAYT,IACrBX,EAAKU,GAAQuD,EAA4C5C,EAAmBrB,EAAKU,KAG5EV,EAGP,GADAM,EAAQ4D,EAAe7C,EAAD,MAAA8C,OAA0BrE,EAAWsE,MAArC,KAAAD,OAA8CpE,KAChEM,EAIF,MAAMC,EAFND,EAASC,GAAO,GAOtB,SAAS4D,EAAeG,GAA+B,IAAtBC,EAAsBC,UAAA3D,OAAA,QAAA4D,IAAAD,UAAA,GAAAA,UAAA,GAAJ,GAC7CE,EACJ,MAAMC,EAAmD,mBAA7BL,EAAQM,iBAAmCN,EAAQM,mBAAqBN,EAAQK,cAC5G,GAAIA,EAAY9D,OAAQ,CACtB,MAAMgE,EAAgBF,EAAY,GAAGG,KAC/BC,EAAoBT,EAAQU,gBAAgBH,GAKhDH,GADkC,IAAhCG,EAAcI,QAAQ,KACdF,EAEH,GAAAX,OAAMW,EAAN,MAAAX,OAA4BS,EAA5B,UAGTH,EAAU,oBAEZA,EAAU,GAAAN,OAAGM,EAAH,KAAAN,OAAcG,GAAkBW,OAC1C,MAAM3E,EAAQ,IAAIO,MAAM4D,GAQxB,OAPAnE,EAAMoE,YAAcA,EACpBpE,EAAMe,kBAAoBgD,EAGtB9F,EAAO6C,WACTd,EAAM4E,eAAiB,IAAI3G,EAAOsC,MAAM,IAAK4D,EAAS9F,EAAMwG,UAAU7E,EAAMoE,eAEvEpE,EAGT,SAAS8E,EAAef,EAASgB,GAC/B,IAAIR,EAAOQ,EAAaC,MAAM,OAAO,GAAGA,MAAM,KAAK,GAC/CC,EAAMF,EAAaC,MAAM,YAAY,GAAGA,MAAM,KAAK,GAEnDE,EACJnB,EAD0E,mBAAhCA,EAAQoB,oBAAsC,sBAAwB,oBAE9GZ,KAAMA,EACN9E,KAAM,YACN2F,MAAOH,KAIX,SAAStB,EAA4C5C,EAAmBsE,GACtE,OAAO,SAASC,IAAwD,IAAA,IAAAC,EAAAtB,UAAA3D,OAANZ,EAAM,IAAAwD,MAAAqC,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAN9F,EAAM8F,GAAAvB,UAAAuB,GACtE,MAAMxF,EAAQN,EAAK,GAOnB,OANIM,IACiB,eAAfA,EAAMuE,MAAwC,QAAfvE,EAAMyF,MAAmBzF,EAAMmE,QAAQO,SAAQ,MAC9C,IAAlC1E,EAAMmE,QAAQO,QAAQ,SACxBI,EAAe/D,EAAmBf,EAAMmE,SACxCzE,EAAK,GAAKkE,EAAe7C,IAEpBsE,EAAGK,MAAMC,KAAMjG,IAI1B,SAAS4B,EAAmCP,EAAmBsE,GAC7D,IAAIH,EAAgF,mBAA1CnE,EAAkBoE,oBAAsC,sBAAwB,iBAC1H,OAAO,SAASS,IAA+C,IAAA,IAAAC,EAAA5B,UAAA3D,OAANZ,EAAM,IAAAwD,MAAA2C,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAANpG,EAAMoG,GAAA7B,UAAA6B,GAC7D,MAAM9F,EAAQN,EAAK,GAEnB,GAAIM,aAAiB/B,EAAOsC,OACR,MAAhBP,EAAMA,OACW,YAAjBA,EAAMoB,QACmB,iBAAlBpB,EAAM+F,QAAsB,CACrC,IAAIC,EAAwB3H,EAAM4H,MAAMjG,EAAM+F,SAC9ChF,EAAkBmE,GAA6Bc,GAC/CtG,EAAK,GAAKkE,EAAe7C,QAGlBf,aAAiB/B,EAAOsC,OACR,MAAhBP,EAAMA,OACNA,EAAMoB,SAC8B,IAApCpB,EAAMoB,OAAOsD,QAAQ,YACY,IAAjC1E,EAAMoB,OAAOsD,QAAQ,SAC5BI,EAAe/D,EAAmBf,EAAMoB,QACxC1B,EAAK,GAAKkE,EAAe7C,IAE3B,OAAOsE,EAAGK,MAAMC,KAAMjG,IAngB1BxB,EAAMgI,WAAWrD,UAAUsD,aAAe,SAASC,EAAeC,EAAIpG,GAWpE,GAVAA,EAAUA,MAGLnB,EAAawH,eAAeD,KAC/BA,EAAK,IAAIvH,EAAauH,IAGxBV,KAAKY,IAAMZ,KAAKY,QAGZZ,KAAKY,IAAIC,gBAAqC,IAApBvG,EAAQwG,QACpC,GAAIJ,EAAGK,SAAW,EAAG,CACnB,IAAIC,EAAQ,IAAI7H,EAAa6G,KAAKY,IAAIC,eACtCG,EAAMC,OAAOP,GACbA,EAAKM,OAELN,EAAK,IAAIvH,GAAc6G,KAAKY,IAAIC,cAAeH,IAInD,IAAIlG,EAAWF,EAAQE,SAEvB,SAAS0G,EAASC,GAChB,GAAwB,iBAAb3G,EAAuB,CAEhC,IAAI4G,GAAe,EAGnBD,EAAIP,IAAIS,eAAiBF,EAAIP,IAAIS,mBAGjCF,EAAIP,IAAIS,eAAe3E,QAAQ,CAAC3B,EAAQuG,KAEnC1I,EAAQmC,EAAOP,SAAUA,KAC1B4G,EAAcE,MAGG,IAAjBF,EAEFD,EAAIP,IAAIS,eAAeE,MACrBxG,OAAQ5B,EAAawH,eAAeD,GAAMA,EAAK,IAAIvH,EAAauH,GAChElG,SAAUA,KAIY,IAApBF,EAAQwG,QAENK,EAAIP,IAAIS,eAAeD,GAAarG,OAAOgG,SAAW,EACxDI,EAAIP,IAAIS,eAAeD,GAAarG,OAAOkG,OAAOP,GAElDS,EAAIP,IAAIS,eAAeD,GAAarG,OAAS,IAAI5B,GAAcgI,EAAIP,IAAIS,eAAeD,GAAarG,OAAQ2F,IAI7GS,EAAIP,IAAIS,eAAeD,GAAarG,OAAS2F,SAM1CS,EAAIP,IAAIC,mBAGfM,EAAIP,IAAIC,cAAgBH,SAGjBS,EAAIP,IAAIS,eAInBH,EAASlB,MAELA,KAAKwB,uBAAuBC,IAC9BzB,KAAKwB,YAAYZ,IAAMZ,KAAKwB,YAAYZ,QACxCM,EAASlB,KAAKwB,cAGhBE,EAAW1B,KAAM1F,GACjBqH,EAAa3B,MAEb3G,EAAYuI,KAAK,kBAAmB5B,KAAMU,EAAIpG,KAG/C/B,EAAMgI,WAAYkB,GAAiB/E,QAASyE,IAY3CA,EAAIjE,UAAUlC,aAAe,SAAUb,EAAKG,EAASuH,GACnD,IAAK7B,KAAKY,IAAK,OAAO,KACtB,GAAIZ,KAAKY,IAAIC,cAAe,OAAOb,KAAKY,IAAIC,cAE5C,IAAIiB,EAAU9B,KAAKY,IAAIS,eACvB,GAAIS,GAAWA,EAAQnH,OAAS,EAAG,CACjC,IAAKR,EAAK,MAAM,IAAIS,MAAM,mFAG1B,IADA,IAAIG,EAAQP,EAAUuH,EACbC,EAAI,EAAGA,EAAIF,EAAQnH,OAAQqH,IAsBlC,GArBAjH,EAAS+G,EAAQE,GACjBxH,EAAWyC,OAAOgF,KAAKlH,EAAOP,UAAU,GAIxCuH,OAASxD,EAILpE,EAAImD,WAAsC,IAAvBnD,EAAImD,KAAK9C,GAC9BuH,EAAS5H,EAAImD,KAAK9C,QACgB,IAAlBL,EAAIK,GACpBuH,EAAS5H,EAAIK,GACJF,GAAWA,EAAQE,SAC5BuH,EAASzH,EAAQE,SAASA,GACjBqH,GAASA,EAAMrH,KACxBuH,EAASF,EAAMrH,SAKF+D,IAAXwD,GAAwBA,IAAWhH,EAAOP,SAASA,GACrD,OAAOO,EAAOA,OAKpB,OAAO,SAKV,SAAU,UAAU2B,QAASwF,IAC5B,MAAMC,EAAS5J,EAAMgI,WAAWrD,UAAUgF,GAC1C3J,EAAMgI,WAAWrD,UAAUgF,GAAc,WAAkB,IAAA,IAAAE,EAAA9D,UAAA3D,OAANZ,EAAM,IAAAwD,MAAA6E,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAANtI,EAAMsI,GAAA/D,UAAA+D,GACzD,IAAI/H,EAA0B,WAAf4H,EAA2BnI,EAAK,GAAKA,EAAK,GAOzD,GAJKO,GAA8B,mBAAZA,IACrBA,MAGE0F,KAAKY,MAAqC,IAA9BtG,EAAQgI,kBAA4B,CAClD,IAAIrI,EAAS,KACb,IACEA,EAAS3B,EAAO2B,SAChB,MAAOsB,IAUT,KARAxB,EAAOH,EACLoG,KACAkC,EACAnI,EACAzB,EAAO6C,UAAiC,OAArB6E,KAAK9E,YACxBjB,EACA3B,EAAO6C,WAKP,MAAsB,WAAf+G,EAA0BlC,KAAK/D,kBAAesC,MAIpC,WAAf2D,GAA8C,mBAAZnI,EAAK,IAAmBA,EAAKwI,OAAO,EAAG,GAG/E,OAAOJ,EAAOpC,MAAMC,KAAMjG,MA2V9B,IAAIyI,KACJ,SAASb,EAAac,GAGhBC,SAAWA,QAAQC,WAAaH,EAAgBC,EAAEtE,SACpDsE,EAAEG,OACAC,OAAQ,WACN,OAAO,GAETC,OAAQ,WACN,OAAO,GAETC,OAAQ,WACN,OAAO,GAETC,SACAC,UAAW,OAEbT,EAAgBC,EAAEtE,QAAS,GAS/B,IAAI+E,KACJ,SAASxB,EAAWe,EAAGnI,GACrB,IAAK4I,EAAeT,EAAEtE,OAAQ,CAE5B,IAAIlD,EAAuC,OAAlBwH,EAAEvH,YAK3BuH,EAAEU,MACAN,OAAQ,SAAS5I,EAAQE,GAqBvB,OAnBAsI,EAAEzH,aAAab,GAAKyC,MAAMzC,GACxB0C,QAAQ,EACRC,YAAY,EAEZvD,QAAQ,EACRC,aAAa,EACbC,oBAAoB,EACpBC,aAAa,EACb4C,wBACEF,UAAU,EACVC,UAAU,EACV9B,UAAU,EACVN,OAAQA,EACRC,mBAAmB,EACnB4B,MAAO3B,EAAI6B,IACXf,kBAAmBA,MAIhB,GAET6H,OAAQ,SAAS7I,EAAQE,EAAKiJ,EAAQtF,GAqBpC,OAnBA2E,EAAEzH,aAAa8C,GAAUlB,MAAMkB,GAC7BjB,QAAQ,EACRC,YAAY,EAEZvD,QAAQ,EACRC,aAAa,EACbC,oBAAoB,EACpBC,aAAa,EACb4C,wBACEF,UAAU,EACVC,UAAU,EACV9B,UAAU,EACVN,OAAQA,EACRC,mBAAmB,EACnB4B,MAAO3B,GAAOA,EAAI6B,IAClBf,kBAAmBA,MAIhB,GAET+H,OAAQ,OACRC,UAAW,OASbR,EAAEU,MAAF,EAAA5G,EAAAtD,UACE4J,OAAQ,SAAS5I,EAAQE,GAwBvB,OAtBAP,EACE6I,EACA,UAEEtI,GAEET,aAAa,EACbD,oBAAoB,EACpBF,QAAQ,EACRC,aAAa,GAEf,SAASa,GACP,GAAIA,EACF,MAAM,IAAI/B,EAAOsC,MAAM,IAAK,UAAWlC,EAAMwG,UAAU7E,EAAMoE,iBAInE,EACAxE,GACA,IAGK,GAET6I,OAAQ,SAAS7I,EAAQE,EAAKiJ,EAAQtF,GA2BpC,OAvBAlE,EACE6I,EACA,WAEGzG,IAAK7B,GAAOA,EAAI6B,KACjB8B,GAEEpE,aAAa,EACbD,oBAAoB,EACpBF,QAAQ,EACRC,aAAa,GAEf,SAASa,GACP,GAAIA,EACF,MAAM,IAAI/B,EAAOsC,MAAM,IAAK,UAAWlC,EAAMwG,UAAU7E,EAAMoE,iBAInE,EACAxE,GACA,IAGK,GAET+I,OAAQ,SACkB,IAAtB1I,EAAQ2I,cAA2BA,UAAW,QAKpDC,EAAeT,EAAEtE,QAAS,GA1sB9BrF,EAAOuK,cA8sBQhK\",\"sourcesContent\":[\"import { EventEmitter } from 'meteor/raix:eventemitter';\\nimport { Meteor } from 'meteor/meteor';\\nimport { Mongo } from 'meteor/mongo';\\nimport { checkNpmVersions } from 'meteor/tmeasday:check-npm-versions';\\nimport clone from 'clone';\\nimport EJSON from 'ejson';\\nimport isEmpty from 'lodash.isempty';\\nimport isEqual from 'lodash.isequal';\\nimport isObject from 'lodash.isobject';\\n\\ncheckNpmVersions({ 'simpl-schema': '>=0.0.0' }, 'aldeed:collection2');\\n\\nconst SimpleSchema = require('simpl-schema').default;\\n\\n// Exported only for listening to events\\nconst Collection2 = new EventEmitter();\\n\\nconst defaultCleanOptions = {\\n  filter: true,\\n  autoConvert: true,\\n  removeEmptyStrings: true,\\n  trimStrings: true,\\n  removeNullsFromArrays: false,\\n};\\n\\n/**\\n * Mongo.Collection.prototype.attachSchema\\n * @param {SimpleSchema|Object} ss - SimpleSchema instance or a schema definition object\\n *    from which to create a new SimpleSchema instance\\n * @param {Object} [options]\\n * @param {Boolean} [options.transform=false] Set to `true` if your document must be passed\\n *    through the collection's transform to properly validate.\\n * @param {Boolean} [options.replace=false] Set to `true` to replace any existing schema instead of combining\\n * @return {undefined}\\n *\\n * Use this method to attach a schema to a collection created by another package,\\n * such as Meteor.users. It is most likely unsafe to call this method more than\\n * once for a single collection, or to call this for a collection that had a\\n * schema object passed to its constructor.\\n */\\nMongo.Collection.prototype.attachSchema = function c2AttachSchema(ss, options) {\\n  options = options || {};\\n\\n  // Allow passing just the schema object\\n  if (!SimpleSchema.isSimpleSchema(ss)) {\\n    ss = new SimpleSchema(ss);\\n  }\\n\\n  this._c2 = this._c2 || {};\\n\\n  // If we've already attached one schema, we combine both into a new schema unless options.replace is `true`\\n  if (this._c2._simpleSchema && options.replace !== true) {\\n    if (ss.version >= 2) {\\n      var newSS = new SimpleSchema(this._c2._simpleSchema);\\n      newSS.extend(ss);\\n      ss = newSS;\\n    } else {\\n      ss = new SimpleSchema([this._c2._simpleSchema, ss]);\\n    }\\n  }\\n\\n  var selector = options.selector;\\n\\n  function attachTo(obj) {\\n    if (typeof selector === \\\"object\\\") {\\n      // Index of existing schema with identical selector\\n      var schemaIndex = -1;\\n\\n      // we need an array to hold multiple schemas\\n      obj._c2._simpleSchemas = obj._c2._simpleSchemas || [];\\n\\n      // Loop through existing schemas with selectors\\n      obj._c2._simpleSchemas.forEach((schema, index) => {\\n        // if we find a schema with an identical selector, save it's index\\n        if(isEqual(schema.selector, selector)) {\\n          schemaIndex = index;\\n        }\\n      });\\n      if (schemaIndex === -1) {\\n        // We didn't find the schema in our array - push it into the array\\n        obj._c2._simpleSchemas.push({\\n          schema: SimpleSchema.isSimpleSchema(ss) ? ss : new SimpleSchema(ss),\\n          selector: selector,\\n        });\\n      } else {\\n        // We found a schema with an identical selector in our array,\\n        if (options.replace !== true) {\\n          // Merge with existing schema unless options.replace is `true`\\n          if (obj._c2._simpleSchemas[schemaIndex].schema.version >= 2) {\\n            obj._c2._simpleSchemas[schemaIndex].schema.extend(ss);\\n          } else {\\n            obj._c2._simpleSchemas[schemaIndex].schema = new SimpleSchema([obj._c2._simpleSchemas[schemaIndex].schema, ss]);\\n          }\\n        } else {\\n          // If options.replace is `true` replace existing schema with new schema\\n          obj._c2._simpleSchemas[schemaIndex].schema = ss;\\n        }\\n\\n      }\\n\\n      // Remove existing schemas without selector\\n      delete obj._c2._simpleSchema;\\n    } else {\\n      // Track the schema in the collection\\n      obj._c2._simpleSchema = ss;\\n\\n      // Remove existing schemas with selector\\n      delete obj._c2._simpleSchemas;\\n    }\\n  }\\n\\n  attachTo(this);\\n  // Attach the schema to the underlying LocalCollection, too\\n  if (this._collection instanceof LocalCollection) {\\n    this._collection._c2 = this._collection._c2 || {};\\n    attachTo(this._collection);\\n  }\\n\\n  defineDeny(this, options);\\n  keepInsecure(this);\\n\\n  Collection2.emit('schema.attached', this, ss, options);\\n};\\n\\n[Mongo.Collection, LocalCollection].forEach((obj) => {\\n  /**\\n   * simpleSchema\\n   * @description function detect the correct schema by given params. If it\\n   * detect multi-schema presence in the collection, then it made an attempt to find a\\n   * `selector` in args\\n   * @param {Object} doc - It could be <update> on update/upsert or document\\n   * itself on insert/remove\\n   * @param {Object} [options] - It could be <update> on update/upsert etc\\n   * @param {Object} [query] - it could be <query> on update/upsert\\n   * @return {Object} Schema\\n   */\\n  obj.prototype.simpleSchema = function (doc, options, query) {\\n    if (!this._c2) return null;\\n    if (this._c2._simpleSchema) return this._c2._simpleSchema;\\n\\n    var schemas = this._c2._simpleSchemas;\\n    if (schemas && schemas.length > 0) {\\n      if (!doc) throw new Error('collection.simpleSchema() requires doc argument when there are multiple schemas');\\n\\n      var schema, selector, target;\\n      for (var i = 0; i < schemas.length; i++) {\\n        schema = schemas[i];\\n        selector = Object.keys(schema.selector)[0];\\n\\n        // We will set this to undefined because in theory you might want to select\\n        // on a null value.\\n        target = undefined;\\n\\n        // here we are looking for selector in different places\\n        // $set should have more priority here\\n        if (doc.$set && typeof doc.$set[selector] !== 'undefined') {\\n          target = doc.$set[selector];\\n        } else if (typeof doc[selector] !== 'undefined') {\\n          target = doc[selector];\\n        } else if (options && options.selector) {\\n          target = options.selector[selector];\\n        } else if (query && query[selector]) { // on upsert/update operations\\n          target = query[selector];\\n        }\\n\\n        // we need to compare given selector with doc property or option to\\n        // find right schema\\n        if (target !== undefined && target === schema.selector[selector]) {\\n          return schema.schema;\\n        }\\n      }\\n    }\\n\\n    return null;\\n  };\\n});\\n\\n// Wrap DB write operation methods\\n['insert', 'update'].forEach((methodName) => {\\n  const _super = Mongo.Collection.prototype[methodName];\\n  Mongo.Collection.prototype[methodName] = function(...args) {\\n    let options = (methodName === \\\"insert\\\") ? args[1] : args[2];\\n\\n    // Support missing options arg\\n    if (!options || typeof options === \\\"function\\\") {\\n      options = {};\\n    }\\n\\n    if (this._c2 && options.bypassCollection2 !== true) {\\n      var userId = null;\\n      try { // https://github.com/aldeed/meteor-collection2/issues/175\\n        userId = Meteor.userId();\\n      } catch (err) {}\\n\\n      args = doValidate(\\n        this,\\n        methodName,\\n        args,\\n        Meteor.isServer || this._connection === null, // getAutoValues\\n        userId,\\n        Meteor.isServer // isFromTrustedCode\\n      );\\n      if (!args) {\\n        // doValidate already called the callback or threw the error so we're done.\\n        // But insert should always return an ID to match core behavior.\\n        return methodName === \\\"insert\\\" ? this._makeNewID() : undefined;\\n      }\\n    } else {\\n      // We still need to adjust args because insert does not take options\\n      if (methodName === \\\"insert\\\" && typeof args[1] !== 'function') args.splice(1, 1);\\n    }\\n\\n    return _super.apply(this, args);\\n  };\\n});\\n\\n/*\\n * Private\\n */\\n\\nfunction doValidate(collection, type, args, getAutoValues, userId, isFromTrustedCode) {\\n  var doc, callback, error, options, isUpsert, selector, last, hasCallback;\\n\\n  if (!args.length) {\\n    throw new Error(type + \\\" requires an argument\\\");\\n  }\\n\\n  // Gather arguments and cache the selector\\n  if (type === \\\"insert\\\") {\\n    doc = args[0];\\n    options = args[1];\\n    callback = args[2];\\n\\n    // The real insert doesn't take options\\n    if (typeof options === \\\"function\\\") {\\n      args = [doc, options];\\n    } else if (typeof callback === \\\"function\\\") {\\n      args = [doc, callback];\\n    } else {\\n      args = [doc];\\n    }\\n  } else if (type === \\\"update\\\") {\\n    selector = args[0];\\n    doc = args[1];\\n    options = args[2];\\n    callback = args[3];\\n  } else {\\n    throw new Error(\\\"invalid type argument\\\");\\n  }\\n\\n  var validatedObjectWasInitiallyEmpty = isEmpty(doc);\\n\\n  // Support missing options arg\\n  if (!callback && typeof options === \\\"function\\\") {\\n    callback = options;\\n    options = {};\\n  }\\n  options = options || {};\\n\\n  last = args.length - 1;\\n\\n  hasCallback = (typeof args[last] === 'function');\\n\\n  // If update was called with upsert:true, flag as an upsert\\n  isUpsert = (type === \\\"update\\\" && options.upsert === true);\\n\\n  // we need to pass `doc` and `options` to `simpleSchema` method, that's why\\n  // schema declaration moved here\\n  var schema = collection.simpleSchema(doc, options, selector);\\n  var isLocalCollection = (collection._connection === null);\\n\\n  // On the server and for local collections, we allow passing `getAutoValues: false` to disable autoValue functions\\n  if ((Meteor.isServer || isLocalCollection) && options.getAutoValues === false) {\\n    getAutoValues = false;\\n  }\\n\\n  // Determine validation context\\n  var validationContext = options.validationContext;\\n  if (validationContext) {\\n    if (typeof validationContext === 'string') {\\n      validationContext = schema.namedContext(validationContext);\\n    }\\n  } else {\\n    validationContext = schema.namedContext();\\n  }\\n\\n  // Add a default callback function if we're on the client and no callback was given\\n  if (Meteor.isClient && !callback) {\\n    // Client can't block, so it can't report errors by exception,\\n    // only by callback. If they forget the callback, give them a\\n    // default one that logs the error, so they aren't totally\\n    // baffled if their writes don't work because their database is\\n    // down.\\n    callback = function(err) {\\n      if (err) {\\n        Meteor._debug(type + \\\" failed: \\\" + (err.reason || err.stack));\\n      }\\n    };\\n  }\\n\\n  // If client validation is fine or is skipped but then something\\n  // is found to be invalid on the server, we get that error back\\n  // as a special Meteor.Error that we need to parse.\\n  if (Meteor.isClient && hasCallback) {\\n    callback = args[last] = wrapCallbackForParsingServerErrors(validationContext, callback);\\n  }\\n\\n  var schemaAllowsId = schema.allowsKey(\\\"_id\\\");\\n  if (type === \\\"insert\\\" && !doc._id && schemaAllowsId) {\\n    doc._id = collection._makeNewID();\\n  }\\n\\n  // Get the docId for passing in the autoValue/custom context\\n  var docId;\\n  if (type === 'insert') {\\n    docId = doc._id; // might be undefined\\n  } else if (type === \\\"update\\\" && selector) {\\n    docId = typeof selector === 'string' || selector instanceof Mongo.ObjectID ? selector : selector._id;\\n  }\\n\\n  // If _id has already been added, remove it temporarily if it's\\n  // not explicitly defined in the schema.\\n  var cachedId;\\n  if (doc._id && !schemaAllowsId) {\\n    cachedId = doc._id;\\n    delete doc._id;\\n  }\\n\\n  const autoValueContext = {\\n    isInsert: (type === \\\"insert\\\"),\\n    isUpdate: (type === \\\"update\\\" && options.upsert !== true),\\n    isUpsert,\\n    userId,\\n    isFromTrustedCode,\\n    docId,\\n    isLocalCollection\\n  };\\n\\n  const extendAutoValueContext = {\\n    ...((schema._cleanOptions || {}).extendAutoValueContext || {}),\\n    ...autoValueContext,\\n    ...options.extendAutoValueContext,\\n  };\\n\\n  const cleanOptionsForThisOperation = {};\\n  [\\\"autoConvert\\\", \\\"filter\\\", \\\"removeEmptyStrings\\\", \\\"removeNullsFromArrays\\\", \\\"trimStrings\\\"].forEach(prop => {\\n    if (typeof options[prop] === \\\"boolean\\\") {\\n      cleanOptionsForThisOperation[prop] = options[prop];\\n    }\\n  });\\n\\n  // Preliminary cleaning on both client and server. On the server and for local\\n  // collections, automatic values will also be set at this point.\\n  schema.clean(doc, {\\n    mutate: true, // Clean the doc/modifier in place\\n    isModifier: (type !== \\\"insert\\\"),\\n    // Start with some Collection2 defaults, which will usually be overwritten\\n    ...defaultCleanOptions,\\n    // The extend with the schema-level defaults (from SimpleSchema constructor options)\\n    ...(schema._cleanOptions || {}),\\n    // Finally, options for this specific operation should take precedence\\n    ...cleanOptionsForThisOperation,\\n    extendAutoValueContext, // This was extended separately above\\n    getAutoValues, // Force this override\\n  });\\n\\n  // We clone before validating because in some cases we need to adjust the\\n  // object a bit before validating it. If we adjusted `doc` itself, our\\n  // changes would persist into the database.\\n  var docToValidate = {};\\n  for (var prop in doc) {\\n    // We omit prototype properties when cloning because they will not be valid\\n    // and mongo omits them when saving to the database anyway.\\n    if (Object.prototype.hasOwnProperty.call(doc, prop)) {\\n      docToValidate[prop] = doc[prop];\\n    }\\n  }\\n\\n  // On the server, upserts are possible; SimpleSchema handles upserts pretty\\n  // well by default, but it will not know about the fields in the selector,\\n  // which are also stored in the database if an insert is performed. So we\\n  // will allow these fields to be considered for validation by adding them\\n  // to the $set in the modifier. This is no doubt prone to errors, but there\\n  // probably isn't any better way right now.\\n  if (Meteor.isServer && isUpsert && isObject(selector)) {\\n    var set = docToValidate.$set || {};\\n\\n    // If selector uses $and format, convert to plain object selector\\n    if (Array.isArray(selector.$and)) {\\n      const plainSelector = {};\\n      selector.$and.forEach(sel => {\\n        Object.assign(plainSelector, sel);\\n      });\\n      docToValidate.$set = plainSelector;\\n    } else {\\n      docToValidate.$set = clone(selector);\\n    }\\n\\n    if (!schemaAllowsId) delete docToValidate.$set._id;\\n    Object.assign(docToValidate.$set, set);\\n  }\\n\\n  // Set automatic values for validation on the client.\\n  // On the server, we already updated doc with auto values, but on the client,\\n  // we will add them to docToValidate for validation purposes only.\\n  // This is because we want all actual values generated on the server.\\n  if (Meteor.isClient && !isLocalCollection) {\\n    schema.clean(docToValidate, {\\n      autoConvert: false,\\n      extendAutoValueContext,\\n      filter: false,\\n      getAutoValues: true,\\n      isModifier: (type !== \\\"insert\\\"),\\n      mutate: true, // Clean the doc/modifier in place\\n      removeEmptyStrings: false,\\n      removeNullsFromArrays: false,\\n      trimStrings: false,\\n    });\\n  }\\n\\n  // XXX Maybe move this into SimpleSchema\\n  if (!validatedObjectWasInitiallyEmpty && isEmpty(docToValidate)) {\\n    throw new Error('After filtering out keys not in the schema, your ' +\\n      (type === 'update' ? 'modifier' : 'object') +\\n      ' is now empty');\\n  }\\n\\n  // Validate doc\\n  var isValid;\\n  if (options.validate === false) {\\n    isValid = true;\\n  } else {\\n    isValid = validationContext.validate(docToValidate, {\\n      modifier: (type === \\\"update\\\" || type === \\\"upsert\\\"),\\n      upsert: isUpsert,\\n      extendedCustomContext: {\\n        isInsert: (type === \\\"insert\\\"),\\n        isUpdate: (type === \\\"update\\\" && options.upsert !== true),\\n        isUpsert,\\n        userId,\\n        isFromTrustedCode,\\n        docId,\\n        isLocalCollection,\\n        ...(options.extendedCustomContext || {}),\\n      },\\n    });\\n  }\\n\\n  if (isValid) {\\n    // Add the ID back\\n    if (cachedId) {\\n      doc._id = cachedId;\\n    }\\n\\n    // Update the args to reflect the cleaned doc\\n    // XXX not sure this is necessary since we mutate\\n    if (type === \\\"insert\\\") {\\n      args[0] = doc;\\n    } else {\\n      args[1] = doc;\\n    }\\n\\n    // If callback, set invalidKey when we get a mongo unique error\\n    if (Meteor.isServer && hasCallback) {\\n      args[last] = wrapCallbackForParsingMongoValidationErrors(validationContext, args[last]);\\n    }\\n\\n    return args;\\n  } else {\\n    error = getErrorObject(validationContext, `in ${collection._name} ${type}`);\\n    if (callback) {\\n      // insert/update/upsert pass `false` when there's an error, so we do that\\n      callback(error, false);\\n    } else {\\n      throw error;\\n    }\\n  }\\n}\\n\\nfunction getErrorObject(context, appendToMessage = '') {\\n  let message;\\n  const invalidKeys = (typeof context.validationErrors === 'function') ? context.validationErrors() : context.invalidKeys();\\n  if (invalidKeys.length) {\\n    const firstErrorKey = invalidKeys[0].name;\\n    const firstErrorMessage = context.keyErrorMessage(firstErrorKey);\\n\\n    // If the error is in a nested key, add the full key to the error message\\n    // to be more helpful.\\n    if (firstErrorKey.indexOf('.') === -1) {\\n      message = firstErrorMessage;\\n    } else {\\n      message = `${firstErrorMessage} (${firstErrorKey})`;\\n    }\\n  } else {\\n    message = \\\"Failed validation\\\";\\n  }\\n  message = `${message} ${appendToMessage}`.trim();\\n  const error = new Error(message);\\n  error.invalidKeys = invalidKeys;\\n  error.validationContext = context;\\n  // If on the server, we add a sanitized error, too, in case we're\\n  // called from a method.\\n  if (Meteor.isServer) {\\n    error.sanitizedError = new Meteor.Error(400, message, EJSON.stringify(error.invalidKeys));\\n  }\\n  return error;\\n}\\n\\nfunction addUniqueError(context, errorMessage) {\\n  var name = errorMessage.split('c2_')[1].split(' ')[0];\\n  var val = errorMessage.split('dup key:')[1].split('\\\"')[1];\\n\\n  var addValidationErrorsPropName = (typeof context.addValidationErrors === 'function') ? 'addValidationErrors' : 'addInvalidKeys';\\n  context[addValidationErrorsPropName]([{\\n    name: name,\\n    type: 'notUnique',\\n    value: val\\n  }]);\\n}\\n\\nfunction wrapCallbackForParsingMongoValidationErrors(validationContext, cb) {\\n  return function wrappedCallbackForParsingMongoValidationErrors(...args) {\\n    const error = args[0];\\n    if (error &&\\n        ((error.name === \\\"MongoError\\\" && error.code === 11001) || error.message.indexOf('MongoError: E11000' !== -1)) &&\\n        error.message.indexOf('c2_') !== -1) {\\n      addUniqueError(validationContext, error.message);\\n      args[0] = getErrorObject(validationContext);\\n    }\\n    return cb.apply(this, args);\\n  };\\n}\\n\\nfunction wrapCallbackForParsingServerErrors(validationContext, cb) {\\n  var addValidationErrorsPropName = (typeof validationContext.addValidationErrors === 'function') ? 'addValidationErrors' : 'addInvalidKeys';\\n  return function wrappedCallbackForParsingServerErrors(...args) {\\n    const error = args[0];\\n    // Handle our own validation errors\\n    if (error instanceof Meteor.Error &&\\n        error.error === 400 &&\\n        error.reason === \\\"INVALID\\\" &&\\n        typeof error.details === \\\"string\\\") {\\n      var invalidKeysFromServer = EJSON.parse(error.details);\\n      validationContext[addValidationErrorsPropName](invalidKeysFromServer);\\n      args[0] = getErrorObject(validationContext);\\n    }\\n    // Handle Mongo unique index errors, which are forwarded to the client as 409 errors\\n    else if (error instanceof Meteor.Error &&\\n             error.error === 409 &&\\n             error.reason &&\\n             error.reason.indexOf('E11000') !== -1 &&\\n             error.reason.indexOf('c2_') !== -1) {\\n      addUniqueError(validationContext, error.reason);\\n      args[0] = getErrorObject(validationContext);\\n    }\\n    return cb.apply(this, args);\\n  };\\n}\\n\\nvar alreadyInsecure = {};\\nfunction keepInsecure(c) {\\n  // If insecure package is in use, we need to add allow rules that return\\n  // true. Otherwise, it would seemingly turn off insecure mode.\\n  if (Package && Package.insecure && !alreadyInsecure[c._name]) {\\n    c.allow({\\n      insert: function() {\\n        return true;\\n      },\\n      update: function() {\\n        return true;\\n      },\\n      remove: function () {\\n        return true;\\n      },\\n      fetch: [],\\n      transform: null\\n    });\\n    alreadyInsecure[c._name] = true;\\n  }\\n  // If insecure package is NOT in use, then adding the two deny functions\\n  // does not have any effect on the main app's security paradigm. The\\n  // user will still be required to add at least one allow function of her\\n  // own for each operation for this collection. And the user may still add\\n  // additional deny functions, but does not have to.\\n}\\n\\nvar alreadyDefined = {};\\nfunction defineDeny(c, options) {\\n  if (!alreadyDefined[c._name]) {\\n\\n    var isLocalCollection = (c._connection === null);\\n\\n    // First define deny functions to extend doc with the results of clean\\n    // and auto-values. This must be done with \\\"transform: null\\\" or we would be\\n    // extending a clone of doc and therefore have no effect.\\n    c.deny({\\n      insert: function(userId, doc) {\\n        // Referenced doc is cleaned in place\\n        c.simpleSchema(doc).clean(doc, {\\n          mutate: true,\\n          isModifier: false,\\n          // We don't do these here because they are done on the client if desired\\n          filter: false,\\n          autoConvert: false,\\n          removeEmptyStrings: false,\\n          trimStrings: false,\\n          extendAutoValueContext: {\\n            isInsert: true,\\n            isUpdate: false,\\n            isUpsert: false,\\n            userId: userId,\\n            isFromTrustedCode: false,\\n            docId: doc._id,\\n            isLocalCollection: isLocalCollection\\n          }\\n        });\\n\\n        return false;\\n      },\\n      update: function(userId, doc, fields, modifier) {\\n        // Referenced modifier is cleaned in place\\n        c.simpleSchema(modifier).clean(modifier, {\\n          mutate: true,\\n          isModifier: true,\\n          // We don't do these here because they are done on the client if desired\\n          filter: false,\\n          autoConvert: false,\\n          removeEmptyStrings: false,\\n          trimStrings: false,\\n          extendAutoValueContext: {\\n            isInsert: false,\\n            isUpdate: true,\\n            isUpsert: false,\\n            userId: userId,\\n            isFromTrustedCode: false,\\n            docId: doc && doc._id,\\n            isLocalCollection: isLocalCollection\\n          }\\n        });\\n\\n        return false;\\n      },\\n      fetch: ['_id'],\\n      transform: null\\n    });\\n\\n    // Second define deny functions to validate again on the server\\n    // for client-initiated inserts and updates. These should be\\n    // called after the clean/auto-value functions since we're adding\\n    // them after. These must *not* have \\\"transform: null\\\" if options.transform is true because\\n    // we need to pass the doc through any transforms to be sure\\n    // that custom types are properly recognized for type validation.\\n    c.deny({\\n      insert: function(userId, doc) {\\n        // We pass the false options because we will have done them on client if desired\\n        doValidate(\\n          c,\\n          \\\"insert\\\",\\n          [\\n            doc,\\n            {\\n              trimStrings: false,\\n              removeEmptyStrings: false,\\n              filter: false,\\n              autoConvert: false\\n            },\\n            function(error) {\\n              if (error) {\\n                throw new Meteor.Error(400, 'INVALID', EJSON.stringify(error.invalidKeys));\\n              }\\n            }\\n          ],\\n          false, // getAutoValues\\n          userId,\\n          false // isFromTrustedCode\\n        );\\n\\n        return false;\\n      },\\n      update: function(userId, doc, fields, modifier) {\\n        // NOTE: This will never be an upsert because client-side upserts\\n        // are not allowed once you define allow/deny functions.\\n        // We pass the false options because we will have done them on client if desired\\n        doValidate(\\n          c,\\n          \\\"update\\\",\\n          [\\n            {_id: doc && doc._id},\\n            modifier,\\n            {\\n              trimStrings: false,\\n              removeEmptyStrings: false,\\n              filter: false,\\n              autoConvert: false\\n            },\\n            function(error) {\\n              if (error) {\\n                throw new Meteor.Error(400, 'INVALID', EJSON.stringify(error.invalidKeys));\\n              }\\n            }\\n          ],\\n          false, // getAutoValues\\n          userId,\\n          false // isFromTrustedCode\\n        );\\n\\n        return false;\\n      },\\n      fetch: ['_id'],\\n      ...(options.transform === true ? {} : {transform: null}),\\n    });\\n\\n    // note that we've already done this collection so that we don't do it again\\n    // if attachSchema is called again\\n    alreadyDefined[c._name] = true;\\n  }\\n}\\n\\nexport default Collection2;\\n\"]}","minifier":"terser"}