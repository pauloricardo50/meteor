{"code":"!function(){var t=Package.meteor.Meteor,e=Package.meteor.global,n=Package.meteor.meteorEnv,i=Package.underscore._,r=Package.promise.Promise,o=Package.check.check,u=Package.check.Match,a=Package[\"reactive-var\"].ReactiveVar,s=Package.mongo.Mongo,c=Package[\"matb33:collection-hooks\"].CollectionHooks,l=Package.modules.meteorInstall,f=Package[\"babel-runtime\"].meteorBabelHelpers,h=Package[\"ecmascript-runtime-client\"].Symbol,d=Package[\"ecmascript-runtime-client\"].Map,p=Package[\"ecmascript-runtime-client\"].Set,v,m,y,b=l({node_modules:{meteor:{\"cultofcoders:grapher\":{\"main.client.js\":function(t,e,n){n.link(\"./lib/extension.js\"),n.link(\"./lib/links/extension.js\"),n.link(\"./lib/query/reducers/extension.js\"),n.link(\"./lib/createQuery.js\",{default:\"createQuery\"},0),n.link(\"./lib/query/lib/prepareForProcess\",{default:\"prepareForProcess\"},1),n.link(\"./lib/query/query.client\",{default:\"Query\"},2),n.link(\"./lib/namedQuery/namedQuery.client\",{default:\"NamedQuery\"},3),n.link(\"./lib/compose\",{default:\"compose\"},4)},lib:{\"compose.js\":function(t,e,n){var i;n.link(\"deep-extend\",{default:function(t){i=t}},0),n.exportDefault(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.apply(void 0,[{}].concat(e))})},\"createQuery.js\":function(e,n,r){var o,u,a;function c(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=a.get(t),o;return r?o=r.clone(i.params):(o=new u(t,e,n,i),a.add(t,o)),o}function l(t,e,n){return new o(t,e,n)}r.link(\"./query/query.js\",{default:function(t){o=t}},0),r.link(\"./namedQuery/namedQuery.js\",{default:function(t){u=t}},1),r.link(\"./namedQuery/store.js\",{default:function(t){a=t}},2),r.exportDefault(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(\"string\"==typeof n[0]){var o=n[0],u=n[1],f=n[2];if(f=f||{},i.isFunction(u))return c(o,null,u,f);var h=i.first(i.keys(u)),d=s.Collection.get(h);if(!d)throw new t.Error(\"invalid-name\",'We could not find any collection with the name \"'+h+'\". Make sure it is imported prior to using this');return c(o,d,u[h],f)}var p=n[0],v=n[1];v=v||{};var m=i.first(i.keys(p)),y=s.Collection.get(m);return y?l(y,p[m],v):(t.isDevelopment&&!a.get(m)&&console.warn('You are creating a query with the entry point \"'+m+\"\\\", but there was no collection found for it (maybe you forgot to import it client-side?). It's assumed that it's referencing a NamedQuery.\"),c(m,null,{},{params:p[m]}))})},\"extension.js\":function(t,e,n){var r,o,u;n.link(\"./query/query.js\",{default:function(t){r=t}},0),n.link(\"./namedQuery/namedQuery.js\",{default:function(t){o=t}},1),n.link(\"./namedQuery/store.js\",{default:function(t){u=t}},2),i.extend(s.Collection.prototype,{createQuery:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(\"string\"==typeof e[0]){var i=e[0],a=e[1],s=e[2],c=new o(i,this,a,s);return u.add(i,c),c}var l=e[0],f=e[1];return new r(this,l,f)}})},links:{\"config.schema.js\":function(t,e,n){var r,o;n.export({DenormalizeSchema:function(){return u},LinkConfigDefaults:function(){return a},LinkConfigSchema:function(){return s}}),n.link(\"meteor/check\",{Match:function(t){r=t}},0),n.link(\"meteor/mongo\",{Mongo:function(t){o=t}},1);var u={field:String,body:Object,bypassSchema:r.Maybe(Boolean)},a={type:\"one\"},s={type:r.Maybe(r.OneOf(\"one\",\"many\",\"1\",\"*\")),collection:r.Maybe(r.Where(function(t){return i.isObject(t)&&(t instanceof o.Collection||!!t._collection)})),field:r.Maybe(String),metadata:r.Maybe(Boolean),inversedBy:r.Maybe(String),index:r.Maybe(Boolean),unique:r.Maybe(Boolean),autoremove:r.Maybe(Boolean),denormalize:r.Maybe(r.ObjectIncluding(u))}},\"constants.js\":function(t,e,n){n.export({LINK_STORAGE:function(){return i}});var i=\"__links\"},\"extension.js\":function(e,n,r){var o,u,a;r.link(\"meteor/mongo\",{Mongo:function(t){o=t}},0),r.link(\"./constants.js\",{LINK_STORAGE:function(t){u=t}},1),r.link(\"./linker.js\",{default:function(t){a=t}},2),Object.assign(o.Collection.prototype,{addLinks:function(e){var n=this;this[u]||(this[u]={}),i.each(e,function(e,r){var o;if(n[u][r])throw new t.Error(\"You cannot add the link with name: \"+r+\" because it was already added to \"+n._name+\" collection\");var s=new a(n,r,e);i.extend(n[u],((o={})[r]=s,o))})},getLinks:function(){return this[u]},getLinker:function(t){if(this[u])return this[u][t]},hasLink:function(t){return!!this[u]&&!!this[u][t]},getLink:function(e,n){var i=this[u];if(!i)throw new t.Error(\"There are no links defined for collection: \"+this._name);if(!i[n])throw new t.Error(\"There is no link \"+n+\" for collection: \"+this._name);var r=i[n],o=e;if(\"string\"==typeof e){var a;if(r.isVirtual())o={_id:e};else o=this.findOne(e,{fields:(a={},a[r.linkStorageField]=1,a)});if(!o)throw new t.Error('We could not find any object with _id: \"'+e+'\" within the collection: '+this._name)}return i[n].createLink(o)}})},\"linker.js\":function(e,n,i){var r,o=e(\"@babel/runtime/helpers/interopRequireDefault\")(e(\"@babel/runtime/helpers/createClass\")),u,a,c,l,f,h,d,p,v,m,y;i.export({default:function(){return b}}),i.link(\"./linkTypes/linkMany.js\",{default:function(t){u=t}},0),i.link(\"./linkTypes/linkManyMeta.js\",{default:function(t){a=t}},1),i.link(\"./linkTypes/linkOne.js\",{default:function(t){c=t}},2),i.link(\"./linkTypes/linkOneMeta.js\",{default:function(t){l=t}},3),i.link(\"./config.schema.js\",{LinkConfigSchema:function(t){f=t},LinkConfigDefaults:function(t){h=t}},4),i.link(\"./linkTypes/lib/smartArguments\",{default:function(t){d=t}},5),i.link(\"dot-object\",{default:function(t){p=t}},6),i.link(\"meteor/check\",{check:function(t){v=t}},7),i.link(\"meteor/underscore\",{_:function(t){m=t}},8),i.link(\"fs\",{access:function(t){y=t}},9);var b=function(){function e(t,e,n){this.mainCollection=t,this.linkConfig=Object.assign({},h,n),this.linkName=e,this._validateAndClean(),this._initAutoremove(),this._initDenormalization(),this.isVirtual()?n.autoremove||this._handleReferenceRemovalForVirtualLinks():this._initIndex()}var n=e.prototype;return n.getLinkedCollection=function(){function t(){return this.linkConfig.collection}return t}(),n.isMany=function(){function t(){return!this.isSingle()}return t}(),n.isMeta=function(){function t(){return this.isVirtual()?this.linkConfig.relatedLinker.isMeta():!!this.linkConfig.metadata}return t}(),n.isSingle=function(){function t(){return this.isVirtual()?this.linkConfig.relatedLinker.isSingle():m.contains(this.oneTypes,this.linkConfig.type)}return t}(),n.isVirtual=function(){function t(){return!!this.linkConfig.inversedBy}return t}(),n.isOneResult=function(){function t(){return this.isVirtual()&&this.linkConfig.relatedLinker.linkConfig.unique||!this.isVirtual()&&this.isSingle()}return t}(),n.createLink=function(){function t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n;return new(this._getHelperClass())(this,t,e)}return t}(),n._validateAndClean=function(){function e(){if(!this.linkConfig.collection)throw new t.Error(\"invalid-config\",\"For the link \"+this.linkName+\" you did not provide a collection.\");if(\"string\"==typeof this.linkConfig.collection){var e=this.linkConfig.collection;if(this.linkConfig.collection=s.Collection.get(e),!this.linkConfig.collection)throw new t.Error(\"invalid-collection\",\"Could not find a collection with the name: \"+e)}if(this.isVirtual())return this._prepareVirtual();if(this.linkConfig.type||(this.linkConfig.type=\"one\"),this.linkConfig.field){if(this.linkConfig.field==this.linkName)throw new t.Error(\"invalid-config\",\"For the link \"+this.linkName+\" you must not use the same name for the field, otherwise it will cause conflicts when fetching data\")}else this.linkConfig.field=this._generateFieldName();v(this.linkConfig,f)}return e}(),n._prepareVirtual=function(){function e(){var e=this,n=this.linkConfig,i=n.collection,r=n.inversedBy,o=i.getLinker(r);o?this._setupVirtualConfig(o):t.startup(function(){if(!(o=i.getLinker(r)))throw new t.Error('You tried setting up an inversed link in \"'+e.mainCollection._name+'\" pointing to collection: \"'+i._name+'\" link: \"'+r+'\", but no such link was found. Maybe a typo ?');e._setupVirtualConfig(o)})}return e}(),n._setupVirtualConfig=function(){function e(e){var n=e.linkConfig;if(!n)throw new t.Error(\"There is no link-config for the related collection on \"+inversedBy+\". Make sure you added the direct links before specifying virtual ones.\");m.extend(this.linkConfig,{metadata:n.metadata,relatedLinker:e})}return e}(),n._getHelperClass=function(){function e(){switch(this.strategy){case\"many-meta\":return a;case\"many\":return u;case\"one-meta\":return l;case\"one\":return c}throw new t.Error(\"invalid-strategy\",this.strategy+\" is not a valid strategy\")}return e}(),n._generateFieldName=function(){function t(){var t=this.linkConfig.collection._name.replace(/\\./g,\"_\"),e=this.linkName+\"_\"+t;switch(this.strategy){case\"many-meta\":return e+\"_metas\";case\"many\":return e+\"_ids\";case\"one-meta\":return e+\"_meta\";case\"one\":return e+\"_id\"}}return t}(),n._handleReferenceRemovalForVirtualLinks=function(){function t(){var t=this;this.mainCollection.after.remove(function(e,n){if(t.linkConfig.relatedLinker){var i=t.createLink(n);m.each(i.fetchAsArray(),function(e){var i=t.linkConfig.relatedLinker;if(i){var r=i.createLink(e);i.isSingle()?r.unset():r.remove(n)}})}else console.warn('There was an error finding the link for removal for collection: \"'+t.mainCollection._name+'\" with link: \"'+t.linkName+'\". This may occur when you do a .remove() before Meteor.startup()')})}return t}(),n._initIndex=function(){function e(){if(t.isServer){var e=this.linkConfig.field;if(this.linkConfig.metadata&&(e+=\"._id\"),this.linkConfig.index){var n,i;if(this.isVirtual())throw new t.Error(\"You cannot set index on an inversed link.\");this.linkConfig.unique&&(i={unique:!0}),this.mainCollection._ensureIndex(((n={})[e]=1,n),i)}else if(this.linkConfig.unique){var r;if(this.isVirtual())throw new t.Error(\"You cannot set unique property on an inversed link.\");this.mainCollection._ensureIndex(((r={})[e]=1,r),{unique:!0,sparse:!0})}}}return e}(),n._initAutoremove=function(){function t(){var t=this;this.linkConfig.autoremove&&(this.isVirtual()?this.mainCollection.after.remove(function(e,n){var i,r=t.mainCollection.getLink(n,t.linkName).find({},{fields:{_id:1}}).fetch().map(function(t){return t._id});t.getLinkedCollection().remove({_id:{$in:r}})}):this.mainCollection.after.remove(function(e,n){t.getLinkedCollection().remove({_id:{$in:d.getIds(n[t.linkStorageField])}})}))}return t}(),n._initDenormalization=function(){function e(){var e=this;if(this.linkConfig.denormalize&&t.isServer){var n;if(!!!Package[\"herteby:denormalize\"])throw new t.Error(\"missing-package\",\"Please add the herteby:denormalize package to your Meteor application in order to make caching work\");var i=this.linkConfig.denormalize,r=i.field,o=i.body,u=i.bypassSchema,a,s=\"\";if(this.isMeta()&&(s=this.isSingle()?\"._id\":\":_id\"),this.isVirtual()){var c=this.linkConfig.relatedLinker.linkConfig,l=\"many\"==c.type?\"many-inverse\":\"inversed\";a={type:l,collection:this.linkConfig.collection,fields:o,referenceField:c.field+s,cacheField:r,bypassSchema:!!u}}else a={type:this.linkConfig.type,collection:this.linkConfig.collection,fields:o,referenceField:this.linkConfig.field+s,cacheField:r,bypassSchema:!!u};this.isVirtual()?t.startup(function(){e.mainCollection.cache(a)}):this.mainCollection.cache(a)}}return e}(),n.isDenormalized=function(){function t(){return!!this.linkConfig.denormalize}return t}(),n.isSubBodyDenormalized=function(){function t(t){var e=this.linkConfig.denormalize.body,n=m.keys(p.dot(e)),i=m.keys(p.dot(m.omit(t,\"_id\")));return 0===m.difference(i,n).length}return t}(),(0,o.default)(e,[{key:\"oneTypes\",get:function(){return[\"one\",\"1\"]}},{key:\"strategy\",get:function(){var t=this.isMany()?\"many\":\"one\";return this.linkConfig.metadata&&(t+=\"-meta\"),t}},{key:\"linkStorageField\",get:function(){return this.isVirtual()?this.linkConfig.relatedLinker.linkStorageField:this.linkConfig.field}}]),e}()},lib:{\"createSearchFilters.js\":function(e,n,r){var o,u=e(\"@babel/runtime/helpers/interopRequireDefault\")(e(\"@babel/runtime/helpers/toArray\")),a,s;function c(e,n,i,r,o){if(r)switch(i){case\"one\":return f(e,n);case\"one-meta\":return d(e,n,o);case\"many\":return v(e,n);case\"many-meta\":return y(e,n,o);default:throw new t.Error(\"Invalid linking strategy: \"+i)}else switch(i){case\"one\":return l(e,n);case\"one-meta\":return h(e,n,o);case\"many\":return p(e,n);case\"many-meta\":return m(e,n,o);default:throw new t.Error(\"Invalid linking strategy: \"+i)}}function l(t,e){return{_id:s.pick(e,t)}}function f(t,e){var n;return(n={})[e]=t._id,n}function h(t,e,n){var i=t[e];return n&&!a(n)(i)?{_id:void 0}:{_id:i?i._id:i}}function d(t,e,n){var r={};return n&&i.each(n,function(t,n){r[e+\".\"+n]=t}),r[e+\"._id\"]=t._id,r}function p(t,e){var n=e.split(\".\"),r=(0,u.default)(n),o=r[0],a=r.slice(1);if(a.length>0){var c=t[o],l;return{_id:{$in:c?i.uniq(i.union(c.map(function(t){return i.isObject(t)?s.pick(a.join(\".\"),t):[]}))):[]}}}return{_id:{$in:t[e]||[]}}}function v(t,e){var n;return(n={})[e]=t._id,n}function m(t,e,n){var r=t[e];return n&&(r=a(n,r)),{_id:{$in:i.pluck(r,\"_id\")||[]}}}function y(t,e,n){var r,o={};return n&&i.each(n,function(t,e){o[e]=t}),o._id=t._id,(r={})[e]={$elemMatch:o},r}r.export({default:function(){return c},createOne:function(){return l},createOneVirtual:function(){return f},createOneMeta:function(){return h},createOneMetaVirtual:function(){return d},createMany:function(){return p},createManyVirtual:function(){return v},createManyMeta:function(){return m},createManyMetaVirtual:function(){return y}}),r.link(\"sift\",{default:function(t){a=t}},0),r.link(\"dot-object\",{default:function(t){s=t}},1)}},linkTypes:{\"base.js\":function(e,n,r){var o,u=e(\"@babel/runtime/helpers/interopRequireDefault\")(e(\"@babel/runtime/helpers/createClass\")),a,s;r.export({default:function(){return c}}),r.link(\"./lib/smartArguments.js\",{default:function(t){a=t}},0),r.link(\"../lib/createSearchFilters\",{default:function(t){s=t}},1);var c=function(){function e(t,e,n){this.linker=t,this.object=e,this.linkedCollection=n||t.getLinkedCollection(),this.linker.isVirtual()?this.linkStorageField=this.config.relatedLinker.linkConfig.field:this.linkStorageField=this.config.field}(0,u.default)(e,[{key:\"config\",get:function(){return this.linker.linkConfig}},{key:\"isVirtual\",get:function(){return this.linker.isVirtual()}}]);var n=e.prototype;return n.value=function(){function e(){if(this.isVirtual)throw new t.Error(\"You can only take the value from the main link.\");return this.object[this.linkStorageField]}return e}(),n.find=function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this.linker,o=this.linkedCollection,u;t.$meta&&(u=t.$meta,delete t.$meta);var a=s(this.object,this.linkStorageField,r.strategy,r.isVirtual(),u),c=i.extend({},t,a);return o.find?o.find(c,e,n):o.default.find(c,e,n)}return t}(),n.fetch=function(){function t(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var u=this.find.apply(this,[t,e].concat(r)).fetch();return this.linker.isOneResult()?i.first(u):u}return t}(),n.fetchAsArray=function(){function t(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this.find.apply(this,[t,e].concat(i)).fetch()}return t}(),n.clean=function(){function t(){}return t}(),n.identifyId=function(){function t(t,e){return a.getId(t,{saveToDatabase:e,collection:this.linkedCollection})}return t}(),n.identifyIds=function(){function t(t,e){return a.getIds(t,{saveToDatabase:e,collection:this.linkedCollection})}return t}(),n._validateIds=function(){function e(e){i.isArray(e)||(e=[e]);var n=this.linkedCollection.find({_id:{$in:e}},{fields:{_id:1}}).fetch().map(function(t){return t._id});if(n.length!=e.length)throw new t.Error(\"not-found\",'You tried to create links with non-existing id(s) inside \"'+this.linkedCollection._name+'\": '+i.difference(e,n).join(\", \"))}return e}(),n._virtualAction=function(){function t(t,e,n){var r=this,o=this.linker.linkConfig.relatedLinker,u;if(void 0!==e)return i.isArray(e)||(e=[e]),e=i.map(e,function(t){if(i.isObject(t)){if(!t._id){var e=o.mainCollection.insert(t);i.extend(t,o.mainCollection.findOne(e))}return t}return o.mainCollection.findOne(t)}),i.map(e,function(e){var i=o.createLink(e);if(\"metadata\"==t)return o.isSingle()?i.metadata(n):i.metadata(r.object,n);\"add\"==t||\"set\"==t?o.isSingle()?i.set(r.object,n):i.add(r.object,n):o.isSingle()?i.unset():i.remove(r.object)});o.createLink(this.fetch()).unset()}return t}(),e}()},\"linkMany.js\":function(e,n,r){var o=e(\"@babel/runtime/helpers/interopRequireDefault\"),u=o(e(\"@babel/runtime/helpers/toArray\")),a=o(e(\"@babel/runtime/helpers/inheritsLoose\")),s,c,l;r.export({default:function(){return f}}),r.link(\"./base.js\",{default:function(t){s=t}},0),r.link(\"dot-object\",{default:function(t){c=t}},1),r.link(\"./lib/smartArguments.js\",{default:function(t){l=t}},2);var f=function(e){function n(){return e.apply(this,arguments)||this}(0,a.default)(n,e);var r=n.prototype;return r.clean=function(){function t(){this.object[this.linkStorageField]||(this.object[this.linkStorageField]=[])}return t}(),r.add=function(){function t(t){var e;if(this.isVirtual)return this._virtualAction(\"add\",t),this;this.clean();var n=this.identifyIds(t,!0);this._validateIds(n);var r=this.linkStorageField;this.object[r]=i.union(this.object[r],n);var o={$addToSet:(e={},e[r]={$each:n},e)};return this.linker.mainCollection.update(this.object._id,o),this}return t}(),r.remove=function(){function e(e){var n,r;if(this.isVirtual)return this._virtualAction(\"remove\",e),this;if(this.isVirtual)throw new t.Error(\"not-allowed\",\"Add/Remove operations should be done from the owner of the relationship\");this.clean();var o,a=this.linkStorageField.split(\".\"),s=(0,u.default)(a),l=s[0],f=s.slice(1),h=this.identifyIds(e);this.object[l]=i.filter(this.object[l],function(t){return!i.contains(h,f.length>0?c.pick(f.join(\".\"),t):t)});var d={$pull:(r={},r[l]=f.length>0?(n={},n[f.join(\".\")]={$in:h},n):{$in:h},r)};return this.linker.mainCollection.update(this.object._id,d),this}return e}(),r.set=function(){function e(e){if(this.isVirtual)return this._virtualAction(\"set\",e),this;throw new t.Error(\"invalid-command\",\"You are trying to *set* in a relationship that is single. Please use add/remove for *many* relationships\")}return e}(),r.unset=function(){function e(e){if(this.isVirtual)return this._virtualAction(\"unset\",e),this;throw new t.Error(\"invalid-command\",\"You are trying to *unset* in a relationship that is single. Please use add/remove for *many* relationships\")}return e}(),n}(s)},\"linkManyMeta.js\":function(e,n,r){var o,u=e(\"@babel/runtime/helpers/interopRequireDefault\")(e(\"@babel/runtime/helpers/inheritsLoose\")),a,s;r.export({default:function(){return c}}),r.link(\"./base.js\",{default:function(t){a=t}},0),r.link(\"./lib/smartArguments.js\",{default:function(t){s=t}},1);var c=function(e){function n(){return e.apply(this,arguments)||this}(0,u.default)(n,e);var r=n.prototype;return r.clean=function(){function t(){this.object[this.linkStorageField]||(this.object[this.linkStorageField]=[])}return t}(),r.add=function(){function t(t){var e=this,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isVirtual)return this._virtualAction(\"add\",t,r),this;var o=this.identifyIds(t,!0);this._validateIds(o);var u=this.linkStorageField;this.object[u]=this.object[u]||[];var a=[];i.each(o,function(t){var n=i.clone(r);n._id=t,e.object[u].push(n),a.push(n)});var s={$addToSet:(n={},n[u]={$each:a},n)};return this.linker.mainCollection.update(this.object._id,s),this}return t}(),r.metadata=function(){function e(e,n){if(this.isVirtual)return this._virtualAction(\"metadata\",e,n),this;var r=this.linkStorageField;if(void 0===e)return this.object[r];if(i.isArray(e))throw new t.Error(\"not-allowed\",\"Metadata updates should be made for one entity only, not multiple\");var o=this.identifyId(e),u=i.find(this.object[r],function(t){return t._id==o}),a,s;if(void 0===n)return u;i.extend(u,n);var c=r+\"._id\",l=r+\".$\";return this.linker.mainCollection.update(((a={_id:this.object._id})[c]=o,a),{$set:(s={},s[l]=u,s)}),this}return e}(),r.remove=function(){function t(t){var e;if(this.isVirtual)return this._virtualAction(\"remove\",t),this;var n=this.identifyIds(t),r=this.linkStorageField;this.object[r]=i.filter(this.object[r],function(t){return!i.contains(n,t._id)});var o={$pull:(e={},e[r]={_id:{$in:n}},e)};return this.linker.mainCollection.update(this.object._id,o),this}return t}(),r.set=function(){function e(e,n){if(this.isVirtual)return this._virtualAction(\"set\",e,n),this;throw new t.Error(\"invalid-command\",\"You are trying to *set* in a relationship that is single. Please use add/remove for *many* relationships\")}return e}(),r.unset=function(){function e(e){if(this.isVirtual)return this._virtualAction(\"unset\",e),this;throw new t.Error(\"invalid-command\",\"You are trying to *unset* in a relationship that is single. Please use add/remove for *many* relationships\")}return e}(),n}(a)},\"linkOne.js\":function(e,n,i){var r,o=e(\"@babel/runtime/helpers/interopRequireDefault\")(e(\"@babel/runtime/helpers/inheritsLoose\")),u,a;i.export({default:function(){return s}}),i.link(\"./base.js\",{default:function(t){u=t}},0),i.link(\"./lib/smartArguments.js\",{default:function(t){a=t}},1);var s=function(e){function n(){return e.apply(this,arguments)||this}(0,o.default)(n,e);var i=n.prototype;return i.set=function(){function t(t){var e;if(this.isVirtual)return this._virtualAction(\"set\",t),this;var n=this.linkStorageField,i=this.identifyId(t,!0);return this._validateIds([i]),this.object[n]=i,this.linker.mainCollection.update(this.object._id,{$set:(e={},e[n]=i,e)}),this}return t}(),i.unset=function(){function t(){var t;if(this.isVirtual)return this._virtualAction(\"unset\",what),this;var e=this.linkStorageField;return this.object[e]=null,this.linker.mainCollection.update(this.object._id,{$set:(t={},t[e]=null,t)}),this}return t}(),i.add=function(){function e(e){if(this.isVirtual)return this._virtualAction(\"add\",e),this;throw new t.Error(\"invalid-command\",\"You are trying to *add* in a relationship that is single. Please use set/unset for *single* relationships\")}return e}(),i.remove=function(){function e(e){if(this.isVirtual)return this._virtualAction(\"remove\",e),this;throw new t.Error(\"invalid-command\",\"You are trying to *remove* in a relationship that is single. Please use set/unset for *single* relationships\")}return e}(),n}(u)},\"linkOneMeta.js\":function(e,n,r){var o,u=e(\"@babel/runtime/helpers/interopRequireDefault\")(e(\"@babel/runtime/helpers/inheritsLoose\")),a,s;r.export({default:function(){return c}}),r.link(\"./base.js\",{default:function(t){a=t}},0),r.link(\"./lib/smartArguments.js\",{default:function(t){s=t}},1);var c=function(e){function n(){return e.apply(this,arguments)||this}(0,u.default)(n,e);var r=n.prototype;return r.set=function(){function t(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isVirtual)return this._virtualAction(\"set\",t),this;var i=this.linkStorageField;return n._id=this.identifyId(t,!0),this._validateIds([n._id]),this.object[i]=n,this.linker.mainCollection.update(this.object._id,{$set:(e={},e[i]=n,e)}),this}return t}(),r.metadata=function(){function t(t){if(this.isVirtual)return this._virtualAction(\"metadata\",void 0,t),this;var e=this.linkStorageField,n;return t?(i.extend(this.object[e],t),this.linker.mainCollection.update(this.object._id,{$set:(n={},n[e]=this.object[e],n)}),this):this.object[e]}return t}(),r.unset=function(){function t(){var t;if(this.isVirtual)return this._virtualAction(\"unset\"),this;var e=this.linkStorageField;return this.object[e]={},this.linker.mainCollection.update(this.object._id,{$set:(t={},t[e]={},t)}),this}return t}(),r.add=function(){function e(e,n){if(this.isVirtual)return this._virtualAction(\"add\",e,n),this;throw new t.Error(\"invalid-command\",\"You are trying to *add* in a relationship that is single. Please use set/unset for *single* relationships\")}return e}(),r.remove=function(){function e(e){if(this.isVirtual)return this._virtualAction(\"remove\",e),this;throw new t.Error(\"invalid-command\",\"You are trying to *remove* in a relationship that is single. Please use set/unset for *single* relationships\")}return e}(),n}(a)},lib:{\"smartArguments.js\":function(t,e,n){var r,o=t(\"@babel/runtime/helpers/interopRequireDefault\")(t(\"@babel/runtime/helpers/typeof\"));n.exportDefault(new(function(){function t(){}var e=t.prototype;return e.getIds=function(){function t(t,e){var n=this;return i.isArray(t)?i.map(t,function(t){return n.getId(t,e)}):[this.getId(t,e)]}return t}(),e.getId=function(){function t(t,e){return\"string\"==typeof t?t:\"object\"===(0,o.default)(t)?(!t._id&&e.saveToDatabase&&(t._id=e.collection.insert(t)),t._id):void 0}return t}(),t}()))}}}},namedQuery:{\"namedQuery.base.js\":function(t,e,n){var r=t(\"@babel/runtime/helpers/interopRequireDefault\"),u=r(t(\"@babel/runtime/helpers/objectSpread\")),a=r(t(\"@babel/runtime/helpers/createClass\")),s;n.export({default:function(){return l}}),n.link(\"lodash.clonedeep\",{default:function(t){s=t}},0);var c={},l=function(){function t(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.isNamedQuery=!0,this.queryName=t,i.isFunction(n)?this.resolver=n:this.body=s(n),this.subscriptionHandle=null,this.params=r.params||{},this.options=Object.assign({},c,r),this.collection=e,this.isExposed=!1}t.setConfig=function(){function t(t){c=t}return t}(),t.getConfig=function(){function t(){return c}return t}();var e=t.prototype;return e.setParams=function(){function t(t){return this.params=i.extend({},this.params,t),this}return t}(),e.doValidateParams=function(){function t(t){t=t||this.params;var e=this.options.validateParams;if(e)try{this._validate(e,t)}catch(t){throw console.error('Invalid parameters supplied to the query \"'+this.queryName+'\"\\n',t),t}}return t}(),e.clone=function(){function t(t){var e=i.extend({},s(this.params),t),n=new this.constructor(this.queryName,this.collection,this.isResolver?this.resolver:s(this.body),(0,u.default)({},this.options,{params:e}));return n.cacher=this.cacher,this.exposeConfig&&(n.exposeConfig=this.exposeConfig),n}return t}(),e._validate=function(){function t(t,e){i.isFunction(t)?t.call(null,e):o(e,t)}return t}(),(0,a.default)(t,[{key:\"name\",get:function(){return\"named_query_\"+this.queryName}},{key:\"isResolver\",get:function(){return!!this.resolver}}]),t}();l.defaultOptions={}},\"namedQuery.client.js\":function(e,n,i){var r=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=r(e(\"@babel/runtime/regenerator\")),u=r(e(\"@babel/runtime/helpers/inheritsLoose\")),a,s,c,l,f,h,d,p,v;i.link(\"../query/counts/countSubscription\",{default:function(t){a=t}},0),i.link(\"../query/lib/createGraph.js\",{default:function(t){s=t}},1),i.link(\"../query/lib/recursiveFetch.js\",{default:function(t){c=t}},2),i.link(\"../query/lib/prepareForProcess.js\",{default:function(t){l=t}},3),i.link(\"meteor/underscore\",{_:function(t){f=t}},4),i.link(\"../query/lib/callWithPromise\",{default:function(t){h=t}},5),i.link(\"./namedQuery.base\",{default:function(t){d=t}},6),i.link(\"meteor/minimongo\",{LocalCollection:function(t){p=t}},7),i.link(\"../query/lib/intersectDeep\",{default:function(t){v=t}},8),i.exportDefault(function(e){function n(){return e.apply(this,arguments)||this}(0,u.default)(n,e);var i=n.prototype;return i.subscribe=function(){function e(e){if(this.isResolver)throw new t.Error(\"not-allowed\",\"You cannot subscribe to a resolver query\");return this.subscriptionHandle=t.subscribe(this.name,this.params,e),this.subscriptionHandle}return e}(),i.subscribeCount=function(){function e(e){if(this.isResolver)throw new t.Error(\"not-allowed\",\"You cannot subscribe to a resolver query\");return this._counter||(this._counter=new a(this)),this._counter.subscribe(this.params,e)}return e}(),i.unsubscribe=function(){function t(){this.subscriptionHandle&&this.subscriptionHandle.stop(),this.subscriptionHandle=null}return t}(),i.unsubscribeCount=function(){function t(){this._counter&&(this._counter.unsubscribe(),this._counter=null)}return t}(),i.fetchSync=function(){function e(){return o.default.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:if(!this.subscriptionHandle){e.next=2;break}throw new t.Error(\"This query is reactive, meaning you cannot use promises to fetch the data.\");case 2:return e.next=4,o.default.awrap(h(this.name,this.params));case 4:return e.abrupt(\"return\",e.sent);case 5:case\"end\":return e.stop()}}return e}(),null,this)}return e}(),i.fetchOneSync=function(){function t(){return o.default.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=f,t.next=3,o.default.awrap(this.fetchSync());case 3:return t.t1=t.sent,t.abrupt(\"return\",t.t0.first.call(t.t0,t.t1));case 5:case\"end\":return t.stop()}}return t}(),null,this)}return t}(),i.fetch=function(){function t(t){return this.subscriptionHandle?this._fetchReactive(t):this._fetchStatic(t)}return t}(),i.fetchOne=function(){function e(){if(this.subscriptionHandle)return f.first(this.fetch.apply(this,arguments));var e=arguments.length<=0?void 0:arguments[0];if(!f.isFunction(e))throw new t.Error(\"You did not provide a valid callback\");this.fetch(function(t,n){e(t,n?f.first(n):null)})}return e}(),i.getCountSync=function(){function e(){return o.default.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:if(!this._counter){e.next=2;break}throw new t.Error(\"This query is reactive, meaning you cannot use promises to fetch the data.\");case 2:return e.next=4,o.default.awrap(h(this.name+\".count\",this.params));case 4:return e.abrupt(\"return\",e.sent);case 5:case\"end\":return e.stop()}}return e}(),null,this)}return e}(),i.getCount=function(){function e(e){if(this._counter)return this._counter.getCount();if(e)return t.call(this.name+\".count\",this.params,e);throw new t.Error(\"not-allowed\",\"You are on client so you must either provide a callback to get the count or subscribe first.\")}return e}(),i._fetchStatic=function(){function e(e){if(!e)throw new t.Error(\"not-allowed\",\"You are on client so you must either provide a callback to get the data or subscribe first.\");t.call(this.name,this.params,e)}return e}(),i._fetchReactive=function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.body;return this.params.$body&&(e=v(e,this.params.$body)),e=l(e,this.params),!t.allowSkip&&e.$options&&e.$options.skip&&delete e.$options.skip,c(s(this.collection,e),void 0,{scoped:this.options.scoped,subscriptionHandle:this.subscriptionHandle})}return t}(),n}(d))},\"namedQuery.js\":function(e,n,i){var r,o,u;i.link(\"./namedQuery.client\",{default:function(t){r=t}},0),i.link(\"./namedQuery.server\",{default:function(t){o=t}},1),u=t.isServer?o:r,i.exportDefault(u)},\"namedQuery.server.js\":function(e,n,r){var o,u=e(\"@babel/runtime/helpers/interopRequireDefault\")(e(\"@babel/runtime/helpers/inheritsLoose\")),a,s,c,l,f;r.link(\"../query/lib/prepareForProcess.js\",{default:function(t){a=t}},0),r.link(\"./namedQuery.base\",{default:function(t){s=t}},1),r.link(\"lodash.clonedeep\",{default:function(t){c=t}},2),r.link(\"./cache/MemoryResultCacher\",{default:function(t){l=t}},3),r.link(\"../query/lib/intersectDeep\",{default:function(t){f=t}},4),r.exportDefault(function(e){function n(){return e.apply(this,arguments)||this}(0,u.default)(n,e);var r=n.prototype;return r.fetch=function(){function t(t){if(this._performSecurityChecks(t,this.params),this.isResolver)return this._fetchResolverData(t);v=c(this.body),this.params.$body&&(v=f(v,this.params.$body)),this.doEmbodimentIfItApplies(v,this.params);var e=this.collection.createQuery(c(v),{params:c(this.params)});if(this.cacher){var n=this.cacher.generateQueryId(this.queryName,this.params);return this.cacher.fetch(n,{query:e})}return e.fetch()}return t}(),r.fetchOne=function(){function t(){return i.first(this.fetch.apply(this,arguments))}return t}(),r.getCount=function(){function t(t){this._performSecurityChecks(t,this.params);var e=this.getCursorForCounting();if(this.cacher){var n=\"count::\"+this.cacher.generateQueryId(this.queryName,this.params);return this.cacher.fetch(n,{countCursor:e})}return e.count()}return t}(),r.getCursorForCounting=function(){function t(){var t=c(this.body);return this.doEmbodimentIfItApplies(t,this.params),t=a(t,this.params),this.collection.find(t.$filters||{},{fields:{_id:1}})}return t}(),r.cacheResults=function(){function t(t){t||(t=new l),this.cacher=t}return t}(),r.resolve=function(){function e(e){if(!this.isResolver)throw new t.Error(\"invalid-call\",\"You cannot use resolve() on a non resolver NamedQuery\");this.resolver=e}return e}(),r._fetchResolverData=function(){function t(t){var e=this.resolver,n=this,i={fetch:function(){return e.call(t,n.params)}};if(this.cacher){var r=this.cacher.generateQueryId(this.queryName,this.params);return this.cacher.fetch(r,{query:i})}return i.fetch()}return t}(),r._performSecurityChecks=function(){function t(t,e){t&&this.exposeConfig&&this._callFirewall(t,t.userId,e),this.doValidateParams(e)}return t}(),n}(s))},\"store.js\":function(e,n,i){i.exportDefault(new(function(){function e(){this.storage={}}var n=e.prototype;return n.add=function(){function e(e,n){if(this.storage[e])throw new t.Error(\"invalid-name\",'You have previously defined another namedQuery with the same name: \"'+e+'\". Named Query names should be unique.');this.storage[e]=n}return e}(),n.get=function(){function t(t){return this.storage[t]}return t}(),n.getAll=function(){function t(){return this.storage}return t}(),e}()))},cache:{\"BaseResultCacher.js\":function(t,e,n){var i;n.export({default:function(){return r}}),n.link(\"meteor/ejson\",{EJSON:function(t){i=t}},0);var r=function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=t}var e=t.prototype;return e.generateQueryId=function(){function t(t,e){return t+\"::\"+i.stringify(e)}return t}(),e.fetch=function(){function t(t,e){var n=e.query,i=e.countCursor;throw\"Not implemented\"}return t}(),t.fetchData=function(){function t(t){var e=t.query,n=t.countCursor;return e?e.fetch():n.count()}return t}(),t}()},\"MemoryResultCacher.js\":function(t,e,n){var i,r=t(\"@babel/runtime/helpers/interopRequireDefault\")(t(\"@babel/runtime/helpers/inheritsLoose\")),o,u,a;n.export({default:function(){return c}}),n.link(\"meteor/meteor\",{Meteor:function(t){o=t}},0),n.link(\"lodash.clonedeep\",{default:function(t){u=t}},1),n.link(\"./BaseResultCacher\",{default:function(t){a=t}},2);var s=6e4,c=function(t){function e(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e=t.call(this,n)||this).store={},e}(0,r.default)(e,t);var n=e.prototype;return n.fetch=function(){function t(t,e){var n=e.query,i=e.countCursor,r=this.store[t];if(void 0!==r)return u(r);var o=a.fetchData({query:n,countCursor:i});return this.storeData(t,o),o}return t}(),n.storeData=function(){function t(t,e){var n=this,i=this.config.ttl||s;this.store[t]=u(e),o.setTimeout(function(){delete n.store[t]},i)}return t}(),e}(a)}}},query:{\"query.base.js\":function(t,e,n){var r=t(\"@babel/runtime/helpers/interopRequireDefault\"),o=r(t(\"@babel/runtime/helpers/objectSpread\")),u=r(t(\"@babel/runtime/helpers/createClass\")),a,s;n.export({default:function(){return c}}),n.link(\"lodash.clonedeep\",{default:function(t){a=t}},0),n.link(\"meteor/check\",{check:function(t){s=t}},1);var c=function(){function t(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isGlobalQuery=!0,this.collection=t,this.body=a(e),this.params=n.params||{},this.options=n}var e=t.prototype;return e.clone=function(){function t(t){var e=i.extend({},a(this.params),t);return new this.constructor(this.collection,a(this.body),(0,o.default)({params:e},this.options))}return t}(),e.doValidateParams=function(){function t(){var t=this.options.validateParams;t&&(i.isFunction(t)?t.call(null,this.params):s(this.params))}return t}(),e.setParams=function(){function t(t){return this.params=i.extend({},this.params,t),this}return t}(),(0,u.default)(t,[{key:\"name\",get:function(){return\"exposure_\"+this.collection._name}}]),t}()},\"query.client.js\":function(e,n,i){var r=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=r(e(\"@babel/runtime/regenerator\")),u=r(e(\"@babel/runtime/helpers/inheritsLoose\")),a,s,c,l,f,h,d;i.export({default:function(){return p}}),i.link(\"meteor/underscore\",{_:function(t){a=t}},0),i.link(\"./counts/countSubscription\",{default:function(t){s=t}},1),i.link(\"./lib/createGraph.js\",{default:function(t){c=t}},2),i.link(\"./lib/recursiveFetch.js\",{default:function(t){l=t}},3),i.link(\"./lib/prepareForProcess.js\",{default:function(t){f=t}},4),i.link(\"./lib/callWithPromise\",{default:function(t){h=t}},5),i.link(\"./query.base\",{default:function(t){d=t}},6);var p=function(e){function n(){return e.apply(this,arguments)||this}(0,u.default)(n,e);var i=n.prototype;return i.subscribe=function(){function e(e){return this.doValidateParams(),this.subscriptionHandle=t.subscribe(this.name,f(this.body,this.params),e),this.subscriptionHandle}return e}(),i.subscribeCount=function(){function t(t){return this.doValidateParams(),this._counter||(this._counter=new s(this)),this._counter.subscribe(f(this.body,this.params),t)}return t}(),i.unsubscribe=function(){function t(){this.subscriptionHandle&&this.subscriptionHandle.stop(),this.subscriptionHandle=null}return t}(),i.unsubscribeCount=function(){function t(){this._counter&&(this._counter.unsubscribe(),this._counter=null)}return t}(),i.fetchSync=function(){function e(){return o.default.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:if(this.doValidateParams(),!this.subscriptionHandle){e.next=3;break}throw new t.Error(\"This query is reactive, meaning you cannot use promises to fetch the data.\");case 3:return e.next=5,o.default.awrap(h(this.name,f(this.body,this.params)));case 5:return e.abrupt(\"return\",e.sent);case 6:case\"end\":return e.stop()}}return e}(),null,this)}return e}(),i.fetchOneSync=function(){function t(){return o.default.async(function(){function t(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,o.default.awrap(this.fetchSync());case 3:return t.t1=t.sent,t.abrupt(\"return\",t.t0.first.call(t.t0,t.t1));case 5:case\"end\":return t.stop()}}return t}(),null,this)}return t}(),i.fetch=function(){function t(t){return this.doValidateParams(),this.subscriptionHandle?this._fetchReactive(t):this._fetchStatic(t)}return t}(),i.fetchOne=function(){function e(){if(this.subscriptionHandle)return a.first(this.fetch.apply(this,arguments));var e=arguments.length<=0?void 0:arguments[0];if(!a.isFunction(e))throw new t.Error(\"You did not provide a valid callback\");this.fetch(function(t,n){e(t,n?a.first(n):null)})}return e}(),i.getCountSync=function(){function e(){return o.default.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:if(!this._counter){e.next=2;break}throw new t.Error(\"This query is reactive, meaning you cannot use promises to fetch the data.\");case 2:return e.next=4,o.default.awrap(h(this.name+\".count\",f(this.body,this.params)));case 4:return e.abrupt(\"return\",e.sent);case 5:case\"end\":return e.stop()}}return e}(),null,this)}return e}(),i.getCount=function(){function e(e){if(this._counter)return this._counter.getCount();if(e)return t.call(this.name+\".count\",f(this.body,this.params),e);throw new t.Error(\"not-allowed\",\"You are on client so you must either provide a callback to get the count or subscribe first.\")}return e}(),i._fetchStatic=function(){function e(e){if(!e)throw new t.Error(\"not-allowed\",\"You are on client so you must either provide a callback to get the data or subscribe first.\");t.call(this.name,f(this.body,this.params),e)}return e}(),i._fetchReactive=function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=f(this.body,this.params);return!t.allowSkip&&e.$options&&e.$options.skip&&delete e.$options.skip,l(c(this.collection,e),this.params)}return t}(),n}(d)},\"query.js\":function(e,n,i){var r,o,u;i.link(\"./query.client\",{default:function(t){r=t}},0),i.link(\"./query.server\",{default:function(t){o=t}},1),u=t.isServer?o:r,i.exportDefault(u)},\"query.server.js\":function(t,e,n){var r,o=t(\"@babel/runtime/helpers/interopRequireDefault\")(t(\"@babel/runtime/helpers/inheritsLoose\")),u,a,s,c;n.export({default:function(){return l}}),n.link(\"./lib/createGraph.js\",{default:function(t){u=t}},0),n.link(\"./lib/prepareForProcess.js\",{default:function(t){a=t}},1),n.link(\"./hypernova/hypernova.js\",{default:function(t){s=t}},2),n.link(\"./query.base\",{default:function(t){c=t}},3);var l=function(t){function e(){return t.apply(this,arguments)||this}(0,o.default)(e,t);var n=e.prototype;return n.fetch=function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=u(this.collection,a(this.body,this.params));return s(e,t.userId,{params:this.params})}return t}(),n.fetchOne=function(){function t(){return i.first(this.fetch.apply(this,arguments))}return t}(),n.getCount=function(){function t(){return this.collection.find(this.body.$filters||{},{}).count()}return t}(),e}(c)},counts:{\"collection.js\":function(t,e,n){var i,r;n.link(\"meteor/mongo\",{Mongo:function(t){i=t}},0),n.link(\"./constants\",{COUNTS_COLLECTION_CLIENT:function(t){r=t}},1),n.exportDefault(new i.Collection(r))},\"constants.js\":function(t,e,n){n.export({COUNTS_COLLECTION_CLIENT:function(){return i}});var i=\"grapher_counts\"},\"countSubscription.js\":function(t,e,n){var i,r,o,u,a,s,c,l;n.export({default:function(){return f}}),n.link(\"meteor/ejson\",{EJSON:function(t){i=t}},0),n.link(\"meteor/meteor\",{Meteor:function(t){r=t}},1),n.link(\"meteor/reactive-var\",{ReactiveVar:function(t){o=t}},2),n.link(\"meteor/tracker\",{Tracker:function(t){u=t}},3),n.link(\"./collection\",{default:function(t){a=t}},4),n.link(\"./createFauxSubscription\",{default:function(t){s=t}},5),n.link(\"../lib/prepareForProcess.js\",{default:function(t){c=t}},6),n.link(\"../../namedQuery/namedQuery.base\",{default:function(t){l=t}},7);var f=function(){function t(t){this.accessToken=new o(null),this.fauxHandle=null,this.query=t}var e=t.prototype;return e.subscribe=function(){function t(t,e){var n=this;return i.equals(this.lastArgs,t)&&this.fauxHandle?this.fauxHandle:(this.accessToken.set(null),this.lastArgs=t,r.call(this.query.name+\".count.subscribe\",t,function(t,i){n._markedForUnsubscribe||(n.subscriptionHandle=r.subscribe(n.query.name+\".count\",i,e),n.accessToken.set(i),n.disconnectComputation=u.autorun(function(){return n.handleDisconnect()})),n._markedForUnsubscribe=!1}),this.fauxHandle=s(this),this.fauxHandle)}return t}(),e.unsubscribe=function(){function t(){this.subscriptionHandle?(this.disconnectComputation.stop(),this.subscriptionHandle.stop()):this._markedForUnsubscribe=!0,this.accessToken.set(null),this.fauxHandle=null,this.subscriptionHandle=null}return t}(),e.getCount=function(){function t(){var t=this.accessToken.get(),e;return null===t?null:a.findOne(t).count}return t}(),e.handleDisconnect=function(){function t(){var t=r.status();t.connected||(this._markedForResume=!0,this.fauxHandle=null,this.subscriptionHandle.stop()),t.connected&&this._markedForResume&&(this._markedForResume=!1,this.subscribe(this.lastArgs))}return t}(),e.isSubscribed=function(){function t(){return null!==this.accessToken.get()}return t}(),t}()},\"createFauxSubscription.js\":function(t,e,n){n.exportDefault(function(t){return{ready:function(){return null!==t.accessToken.get()&&t.subscriptionHandle.ready()},stop:function(){return t.unsubscribe()}}})}},hypernova:{\"aggregateSearchFilters.js\":function(e,n,r){var o=e(\"@babel/runtime/helpers/interopRequireDefault\"),u=o(e(\"@babel/runtime/helpers/toConsumableArray\")),a=o(e(\"@babel/runtime/helpers/toArray\")),s=o(e(\"@babel/runtime/helpers/createClass\")),c,l;function f(t,e){return(t||[]).map(function(t){return i.isObject(t)?l.pick(e,t):void 0}).filter(function(t){return!!t})}r.export({default:function(){return h}}),r.link(\"sift\",{default:function(t){c=t}},0),r.link(\"dot-object\",{default:function(t){l=t}},1);var h=function(){function e(t,e){this.collectionNode=t,this.linker=t.linker,this.metaFilters=e,this.isVirtual=this.linker.isVirtual(),this.linkStorageField=this.linker.linkStorageField}var n=e.prototype;return n.create=function(){function e(){switch(this.linker.strategy){case\"one\":return this.createOne();case\"one-meta\":return this.createOneMeta();case\"many\":return this.createMany();case\"many-meta\":return this.createManyMeta();default:throw new t.Error(\"Invalid linker type: \"+this.linker.type)}}return e}(),n.createOne=function(){function t(){var t;return this.isVirtual?((t={})[this.linkStorageField]={$in:i.uniq(i.pluck(this.parentObjects,\"_id\"))},t):{_id:{$in:i.uniq(f(this.parentObjects,this.linkStorageField))}}}return t}(),n.createOneMeta=function(){function t(){var t=this;if(this.isVirtual){var e={};return this.metaFilters&&i.each(this.metaFilters,function(n,i){e[t.linkStorageField+\".\"+i]=n}),e[this.linkStorageField+\"._id\"]={$in:i.uniq(i.pluck(this.parentObjects,\"_id\"))},e}var n=this.parentObjects;this.metaFilters&&(n=i.filter(this.parentObjects,function(e){return c(t.metaFilters)(e[t.linkStorageField])}));var r=i.pluck(n,this.linkStorageField),o=[];return i.each(r,function(t){t&&o.push(t._id)}),{_id:{$in:i.uniq(o)}}}return t}(),n.createMany=function(){function t(){if(this.isVirtual){var t,e,n=i.pluck(this.parentObjects,\"_id\");return(e={})[this.linkStorageField]={$in:i.uniq((t=i).union.apply(t,(0,u.default)(n)))},e}var r,o=this.linkStorageField.split(\".\"),s=(0,a.default)(o),c=s[0],l=s.slice(1),h=(r=i).union.apply(r,(0,u.default)(f(this.parentObjects,c)));return{_id:{$in:i.uniq(l.length>0?f(h,l.join(\".\")):h)}}}return t}(),n.createManyMeta=function(){function t(){var t=this;if(this.isVirtual){var e,n={};return this.metaFilters&&i.each(this.metaFilters,function(t,e){n[e]=t}),n._id={$in:i.uniq(i.pluck(this.parentObjects,\"_id\"))},(e={})[this.linkStorageField]={$elemMatch:n},e}var r=[];return i.each(this.parentObjects,function(e){if(e[t.linkStorageField])if(t.metaFilters){var n=c(t.metaFilters);i.each(e[t.linkStorageField],function(t){n(t)&&r.push(t._id)})}else i.each(e[t.linkStorageField],function(t){r.push(t._id)})}),{_id:{$in:i.uniq(r)}}}return t}(),(0,s.default)(e,[{key:\"parentObjects\",get:function(){return this.collectionNode.parent.results}}]),e}()},\"assembleAggregateResults.js\":function(t,e,n){var r,o=t(\"@babel/runtime/helpers/interopRequireDefault\")(t(\"@babel/runtime/helpers/toConsumableArray\")),u,a;n.link(\"sift\",{default:function(t){u=t}},0),n.link(\"./lib/cleanObjectForMetaFilters\",{default:function(t){a=t}},1),n.exportDefault(function(t,e,n){var r=t.linker,s=r.linkStorageField,c=t.linkName,l=r.isMeta(),f=r.isMany(),h=[];if(l&&n){var d=u(n);i.each(t.parent.results,function(t){a(t,s,d)})}if(l&&f)i.each(t.parent.results,function(t){t[c]=t[c]||[];var n=i.filter(e,function(e){return i.contains(e._id,t._id)});if(n.length){var r=i.pluck(n,\"data\");i.each(r,function(e){i.each(e,function(e){t[c].push(e)})})}}),i.each(e,function(t){i.each(t.data,function(t){return h.push(t)})});else{var p;p=f?function(t,e){return i.contains(t._id,e._id)}:function(t,e){return t._id==e._id};var v=t.linkName,m;t.parent.results.forEach(function(t){var n;e.filter(function(e){return p(e,t)}).forEach(function(e){var n;Array.isArray(t[v])?(n=t[v]).push.apply(n,(0,o.default)(e.data)):t[v]=(0,o.default)(e.data)})}),e.forEach(function(t){h.push.apply(h,(0,o.default)(t.data))})}t.results=h})},\"assembler.js\":function(t,e,n){var r,o=t(\"@babel/runtime/helpers/interopRequireDefault\")(t(\"@babel/runtime/helpers/toArray\")),u,a,s,c;function l(t,e){var n=e.limit,i=e.skip;return n&&Array.isArray(t)?t.slice(i,n):t}n.link(\"../../links/lib/createSearchFilters\",{default:function(t){u=t}},0),n.link(\"./lib/cleanObjectForMetaFilters\",{default:function(t){a=t}},1),n.link(\"sift\",{default:function(t){s=t}},2),n.link(\"dot-object\",{default:function(t){c=t}},3),n.exportDefault(function(t,e){var n=e.limit,r=e.skip,u=e.metaFilters;if(0!==t.results.length){var f=t.parent,h=t.linker,d=h.strategy,p=h.isSingle(),v=h.isMeta(),m=h.linkStorageField;if(v&&u){var y=s(u);i.each(f.results,function(t){a(t,m,y)})}var b=i.groupBy(t.results,\"_id\");\"one\"===d&&f.results.forEach(function(e){var i=c.pick(m,e);i&&(e[t.linkName]=l(b[i],{limit:n,skip:r}))}),\"many\"===d&&f.results.forEach(function(e){var u=m.split(\".\"),a=(0,o.default)(u),s=a[0],f=a.slice(1),h=c.pick(s,e);if(h){var d=[];h.forEach(function(t){var e=f.length>0?c.pick(f.join(\".\"),t):t;d.push(i.first(b[e]))}),e[t.linkName]=l(d,{limit:n,skip:r})}}),\"one-meta\"===d&&f.results.forEach(function(e){if(e[m]){var i=e[m]._id;e[t.linkName]=l(b[i],{limit:n,skip:r})}}),\"many-meta\"===d&&f.results.forEach(function(e){var o=i.pluck(e[m],\"_id\"),u=[];o.forEach(function(t){u.push(i.first(b[t]))}),e[t.linkName]=l(u,{limit:n,skip:r})})}})},\"buildAggregatePipeline.js\":function(t,e,n){var i,r;n.link(\"meteor/underscore\",{_:function(t){i=t}},0),n.link(\"./constants\",{SAFE_DOTTED_FIELD_REPLACEMENT:function(t){r=t}},1),n.exportDefault(function(t,e,n,o){var u=!1,a=t.linker,s=a.linkStorageField,c=t.collection,l=[];c.firewall&&c.firewall(e,n,o),l.push({$match:e}),n.sort&&i.keys(n.sort).length>0&&l.push({$sort:n.sort});var f=s;a.isMeta()&&(f+=\"._id\");var h={_id:\"$_id\"};if(i.each(n.fields,function(t,e){e.indexOf(\".\")>=0&&(u=!0);var n=e.replace(/\\./g,r);h[n]=\"$\"+e}),a.isMeta()&&(h[s]=\"$\"+s),l.push({$group:{_id:\"$\"+f,data:{$push:h}}}),n.limit||n.skip){var d=[\"$data\"];n.skip&&d.push(n.skip),n.limit&&d.push(n.limit),l.push({$project:{_id:1,data:{$slice:d}}})}return{pipeline:l,containsDottedFields:u}})},\"constants.js\":function(t,e,n){n.export({SAFE_DOTTED_FIELD_REPLACEMENT:function(){return i}});var i=\"___\"},\"hypernova.js\":function(t,e,n){var r,o,u;function a(t,e){i.each(t.collectionNodes,function(t){var n=r(t),i=n.filters,o=n.options;u(t,e),a(t,e)})}function s(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.bypassFirewalls||!1,u=n.params||{},s=r(t),c=s.filters,l=s.options,f=t.collection,h;return t.results=f.find(c,l,e).fetch(),a(t,n.bypassFirewalls?void 0:e),o(t,u),t.results}n.export({default:function(){return s}}),n.link(\"../lib/applyProps.js\",{default:function(t){r=t}},0),n.link(\"../lib/prepareForDelivery.js\",{default:function(t){o=t}},1),n.link(\"./storeHypernovaResults.js\",{default:function(t){u=t}},2)},\"storeHypernovaResults.js\":function(t,e,n){var r,o=t(\"@babel/runtime/helpers/interopRequireDefault\")(t(\"@babel/runtime/helpers/objectSpread\")),u,a,s,c,l,f;function h(t,e){if(0===t.parent.results.length)return t.results=[];var n=u(t),r=n.filters,h=n.options,d=r.$meta,p=new a(t,d);delete r.$meta;var v,m=t.linker.isVirtual(),y=t.collection;if(i.extend(r,p.create()),m){var b=l(t,r,h,e),k=b.pipeline,g=b.containsDottedFields,_=y.aggregate(k);g&&f(_),c(t,_,d)}else{var j=i.omit(h,\"limit\");t.results=y.find(r,j,e).fetch(),s(t,(0,o.default)({},h,{metaFilters:d}))}}n.export({default:function(){return h}}),n.link(\"../lib/applyProps.js\",{default:function(t){u=t}},0),n.link(\"./aggregateSearchFilters.js\",{default:function(t){a=t}},1),n.link(\"./assembler.js\",{default:function(t){s=t}},2),n.link(\"./assembleAggregateResults.js\",{default:function(t){c=t}},3),n.link(\"./buildAggregatePipeline.js\",{default:function(t){l=t}},4),n.link(\"./lib/snapBackDottedFields\",{default:function(t){f=t}},5)},lib:{\"cleanObjectForMetaFilters.js\":function(t,e,n){n.exportDefault(function(t,e,n){t[e]&&(i.isArray(t[e])?t[e]=t[e].filter(n):n(t[e])||(t[e]=null))})},\"snapBackDottedFields.js\":function(t,e,n){var r,o;n.link(\"../constants\",{SAFE_DOTTED_FIELD_REPLACEMENT:function(t){r=t}},0),n.link(\"dot-object\",{default:function(t){o=t}},1),n.exportDefault(function(t){t.forEach(function(t){t.data=t.data.map(function(t){return i.each(t,function(e,n){n.indexOf(r)>=0&&(t[n.replace(new RegExp(r,\"g\"),\".\")]=e,delete t[n])}),o.object(t)})})})}}},lib:{\"applyProps.js\":function(t,e,n){n.export({default:function(){return o}});var r=[\"disableOplog\",\"pollingIntervalMs\",\"pollingThrottleMs\"];function o(t){var e,n=i.extend({},t.props.$filters),o=i.extend({},t.props.$options);return(o=(e=i).omit.apply(e,[o].concat(r))).fields=o.fields||{},t.applyFields(n,o),{filters:n,options:o}}},\"callWithPromise.js\":function(e,n,i){i.exportDefault(function(e,n){return new r(function(i,r){t.call(e,n,function(t,e){t&&r(t.reason||\"Something went wrong.\"),i(e)})})})},\"createGraph.js\":function(t,e,n){var r,o,u,a,s;n.export({specialFields:function(){return c},createNodes:function(){return l},addFieldNode:function(){return h},getNodeNamespace:function(){return d}}),n.link(\"../nodes/collectionNode.js\",{default:function(t){r=t}},0),n.link(\"../nodes/fieldNode.js\",{default:function(t){o=t}},1),n.link(\"../nodes/reducerNode.js\",{default:function(t){u=t}},2),n.link(\"./dotize.js\",{default:function(t){a=t}},3),n.link(\"../reducers/lib/createReducers\",{default:function(t){s=t}},4);var c=[\"$filters\",\"$options\",\"$postFilters\",\"$postOptions\",\"$postFilter\"];function l(t){i.isObject(t.body)&&(i.each(t.body,function(e,n){if(e)if(i.contains(c,n))t.addProp(n,e);else{t.collection.default&&(t.collection=t.collection.default);var o=t.collection.getLinker(n);if(o){if(o.isDenormalized()&&o.isSubBodyDenormalized(e))return void p(t,o,e,n);var a=new r(o.getLinkedCollection(),e,n);return l(a),void t.add(a,o)}var s=t.collection.getReducer(n);if(s){var f=new u(n,s);t.add(f)}h(e,n,t)}}),s(t),0===t.fieldNodes.length&&t.add(new o(\"_id\",1)))}function f(t){if(i.isObject(t)){var e=i.keys(t);return 1===e.length&&i.contains([\"$elemMatch\",\"$meta\",\"$slice\"],e[0])}return!1}function h(t,e,n){if(i.isObject(t))if(f(t))n.add(new o(e,t,!0));else{var r,u=a.convert(((r={})[e]=t,r));i.each(u,function(t,e){n.add(new o(e,t))})}else{var s=new o(e,t);n.add(s)}}function d(t){for(var e=[],n=t;n;){var i=n.linker?n.linker.linkName:n.collection._name;e.push(i),n=n.parent}return e.reverse().join(\"_\")}function p(t,e,n,i){Object.assign(n,{_id:1});var r=e.linkConfig.denormalize.field;t.snapCache(r,i),e.isMany()||e.isVirtual()||h(1,e.linkStorageField,t),h(n,r,t)}n.exportDefault(function(t,e){var n=new r(t,e);return l(n),n})},\"dotize.js\":function(t,e,n){var i,r=t(\"@babel/runtime/helpers/interopRequireDefault\")(t(\"@babel/runtime/helpers/typeof\"));n.exportDefault(m={}),m.convert=function(t,e){var n;if(!(t&&\"object\"==(0,r.default)(t)||Array.isArray(t)))return e?((n={})[e]=t,n):t;var n={};function i(e,c,l){for(var h in f.sanitizeForInObject(e))e[h]&&\"object\"===(0,r.default)(e[h])?Array.isArray(e[h])?a(e[h])?n[s(h,c,!0)]=e[h]:n=i(e[h],s(h,c,!1,!0),!0):l?u(e[h])?n[s(h,c,!0)]=e[h]:n=i(e[h],s(h,c,!0)):u(e[h])?n[s(h,c)]=e[h]:n=i(e[h],s(h,c)):l||o(h)?n[s(h,c,!0)]=e[h]:n[s(h,c)]=e[h];return u(n)?t:n}function o(t){return!isNaN(parseInt(t))}function u(t){for(var e in f.sanitizeForInObject(t))if(Object.hasOwnProperty.call(t,e))return!1;return!0}function a(t){return!(!Array.isArray(t)||0!=t.length)}function s(t,e,n,i){return i?(e||\"\")+(o(t)?\"[\"+t+\"]\":\".\"+t):n?(e||\"\")+\"[\"+t+\"]\":(e?e+\".\":\"\")+t}return i(t,e,Array.isArray(t))}},\"fieldInProjection.js\":function(t,e,n){var i=t(\"@babel/runtime/helpers/interopRequireDefault\"),r=i(t(\"@babel/runtime/helpers/toConsumableArray\")),o=i(t(\"@babel/runtime/helpers/slicedToArray\"));function u(t){return t.split(\".\").reduce(function(t,e){if(0===t.length)return[e];var n,i=(0,o.default)(t,1)[0];return[].concat((0,r.default)(t),[i+\".\"+e])},[])}function a(t,e,n){var i;return(n?u(e):[e]).some(function(e){return t[e]})}n.export({expandField:function(){return u},isFieldInProjection:function(){return a}})},\"intersectDeep.js\":function(t,e,n){var i=t(\"@babel/runtime/helpers/interopRequireDefault\"),r=i(t(\"@babel/runtime/helpers/slicedToArray\")),o=i(t(\"@babel/runtime/helpers/toConsumableArray\")),u,a;n.link(\"meteor/underscore\",{_:function(t){u=t}},0),n.link(\"./createGraph\",{specialFields:function(t){a=t}},1);var s=[].concat((0,o.default)(a),[\"$filter\",\"$paginate\"]);function c(t){return u.isObject(t)&&!u.isArray(t)?u.values(t).every(function(t){return c(t)}):1===t}function l(t,e){var n={};return u.pairs(e).forEach(function(e){var i=(0,r.default)(e,2),o=i[0],a=i[1];if(!u.contains(s,o)){var f=t[o];1===f?c(a)&&(n[o]=a):u.isObject(f)&&(u.isObject(a)&&!u.isArray(a)?n[o]=l(f,a):1===a&&(n[o]=f))}}),n}n.exportDefault(function(t,e){var n,i=l(t,e);return Object.assign(i,(n=u).pick.apply(n,[t].concat((0,o.default)(s)))),i})},\"prepareForDelivery.js\":function(t,e,n){var r,o=t(\"@babel/runtime/helpers/interopRequireDefault\")(t(\"@babel/runtime/helpers/toArray\")),u,a,s,c,l;function f(t){var e=t.props.$postFilters;e&&(t.results=s(e,t.results))}function h(t){var e=t.props.$postOptions;if(e){if(e.sort){var n=new l.Sorter(e.sort);t.results.sort(n.getComparator())}if(e.limit||e.skip){var i=e.skip||0,r=e.limit?e.limit+i:t.results.length;t.results=t.results.slice(i,r)}}}function d(t,e){if(t.props.$postFilter){var n=t.props.$postFilter;i.isArray(n)?n.forEach(function(n){t.results=n(t.results,e)}):t.results=n(t.results,e)}}function p(t){return i.isArray(t)?t:i.isUndefined(t)?[]:[t]}function v(t,e){e&&(e=p(e),i.each(t.collectionNodes,function(t){var n=t.shouldCleanStorage;i.each(e,function(e){if(n){var r=t.linker.isSingle(),u=t.linkStorageField.split(\".\"),a=(0,o.default)(u),s=a[0],l=a.slice(1),f=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r)c.pick(t.linkStorageField,e,!0),n&&l.length>0&&i.isEmpty(e[s])&&delete e[s];else if(l.length>0){var o=e[s]||[];i.isArray(o)&&(o.forEach(function(t){return c.pick(l.join(\".\"),t,!0)}),n&&l.length>0&&o.every(function(t){return i.isEmpty(t)})&&delete e[s])}else delete e[t.linkStorageField]};if(t.isVirtual){var h=p(e[t.linkName]);i.each(h,function(t){f(t)})}else f(e)}v(t,e[t.linkName])})}))}function m(t,e){e&&t.collectionNodes.forEach(function(t){i.each(e,function(e){void 0!==e&&m(t,e[t.linkName])}),t.isOneResult&&i.each(e,function(e){e[t.linkName]&&i.isArray(e[t.linkName])&&(e[t.linkName]=e[t.linkName]?i.first(e[t.linkName]):void 0)})})}function y(t,e){if(e){var n=t.linkName,i=t.isMeta;(e=p(e)).forEach(function(e){i&&e[n]&&(t.isOneResult?e[n]=Object.assign({},e[n]):e[n]=e[n].map(function(t){return Object.assign({},t)})),t.collectionNodes.forEach(function(t){y(t,e[n])})})}}function b(t,e){e=p(e),t.collectionNodes.forEach(function(n){i.each(e,function(e){b(n,e[t.linkName])})}),t.isMeta&&(t.isVirtual?i.each(e,function(e){var n=e[t.linkName];if(t.isOneResult){if(i.isObject(n)){var r=n[t.linkStorageField];k(n,e,r,!0)}}else i.each(n,function(n){var i=n[t.linkStorageField];k(n,e,i,!0)})}):i.each(e,function(e){var n=e[t.linkName],r=e[t.linkStorageField];t.isOneResult?n&&k(n,e,r,!1):i.each(n,function(t){k(t,e,r,!1)})}))}function k(t,e,n,r){var o,u;r?(o=i.isArray(n)?i.find(n,function(t){return t._id==e._id}):n,t.$metadata=i.omit(o,\"_id\")):(u=i.isArray(n)?i.find(n,function(e){return e._id==t._id}):n,t.$metadata=i.omit(u,\"_id\"))}function g(t){t.collectionNodes.forEach(function(t){g(t)}),i.isEmpty(t.snapCaches)||i.each(t.snapCaches,function(e,n){var r=i.contains(t.snapCachesSingles,n),o=t.collection.getLinker(e),u=!o.isMany()&&!o.isVirtual();t.results.forEach(function(t){t[n]&&(u&&Object.assign(t[n],{_id:o.isMeta()?t[o.linkStorageField]._id:t[o.linkStorageField]}),r&&i.isArray(t[n])?t[e]=i.first(t[n]):t[e]=t[n],delete t[n])})})}n.export({applyPostFilters:function(){return f},applyPostOptions:function(){return h},getResultsArray:function(){return p},removeLinkStorages:function(){return v},storeOneResults:function(){return m},assembleMetadata:function(){return b}}),n.link(\"../reducers/lib/applyReducers\",{default:function(t){u=t}},0),n.link(\"../reducers/lib/cleanReducerLeftovers\",{default:function(t){a=t}},1),n.link(\"sift\",{default:function(t){s=t}},2),n.link(\"dot-object\",{default:function(t){c=t}},3),n.link(\"meteor/minimongo\",{Minimongo:function(t){l=t}},4),n.exportDefault(function(t,e){g(t),m(t,t.results),u(t,e),i.each(t.collectionNodes,function(e){y(e,t.results)}),i.each(t.collectionNodes,function(e){b(e,t.results)}),a(t,t.results),v(t,t.results),f(t),h(t),d(t,e)})},\"prepareForProcess.js\":function(t,e,n){var r,o,u;function a(t){var e=t.filters,n=t.options,i=t.params;i.filters&&Object.assign(e,i.filters),i.options&&Object.assign(n,i.options)}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n;arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&!i.isFunction(t.$filter)&&(t.$filter=a),t.$filter&&(r(t.$filter,o.OneOf(Function,[Function])),t.$filters=t.$filters||{},t.$options=t.$options||{},i.isArray(t.$filter)?t.$filter.forEach(function(n){n.call(null,{filters:t.$filters,options:t.$options,params:e})}):t.$filter({filters:t.$filters,options:t.$options,params:e}),t.$filter=null,delete t.$filter),i.each(t,function(t,n){if(i.isObject(t))return s(t,e)})}function c(t,e){t.$paginate&&e&&(t.$options||(t.$options={}),e.limit&&i.extend(t.$options,{limit:e.limit}),e.skip&&i.extend(t.$options,{skip:e.skip}),delete t.$paginate)}n.link(\"meteor/check\",{check:function(t){r=t},Match:function(t){o=t}},0),n.link(\"lodash.clonedeep\",{default:function(t){u=t}},1),n.exportDefault(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=u(t),i=u(e);return c(n,i),s(n,i,!0),n})},\"recursiveFetch.js\":function(t,e,n){var r,o=t(\"@babel/runtime/helpers/interopRequireDefault\")(t(\"@babel/runtime/helpers/toConsumableArray\")),u,a,s,c,l,f,h;function d(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=u(t),a=r.filters,s=r.options,c;(n.scoped&&n.subscriptionHandle&&i.extend(a,n.subscriptionHandle.scopeQuery()),n.scoped)&&i.extend(a,((c={})[\"_query_path_\"+f(t)]={$exists:!0},c));var l=[];if(e){var p=t.linker.createLink(e,t.collection),v;if(t.isVirtual)if(s.fields=s.fields||{},!h(s.fields,t.linkStorageField,!0))i.extend(s.fields,((v={})[t.linkStorageField]=1,v));l=p.find(a,s).fetch()}else l=t.collection.find(a,s).fetch();return i.each(t.collectionNodes,function(t){i.each(l,function(e){var n,i=d(t,e);e[t.linkName]=i,(n=t.results).push.apply(n,(0,o.default)(i))})}),l}n.link(\"./applyProps.js\",{default:function(t){u=t}},0),n.link(\"./prepareForDelivery\",{assembleMetadata:function(t){a=t},removeLinkStorages:function(t){s=t},storeOneResults:function(t){c=t}},1),n.link(\"./prepareForDelivery\",{default:function(t){l=t}},2),n.link(\"./createGraph\",{getNodeNamespace:function(t){f=t}},3),n.link(\"../lib/fieldInProjection\",{isFieldInProjection:function(t){h=t}},4),n.exportDefault(function(t,e,n){return t.results=d(t,null,n),l(t,e),t.results})}},nodes:{\"collectionNode.js\":function(e,n,r){var o=e(\"@babel/runtime/helpers/interopRequireDefault\"),u=o(e(\"@babel/runtime/helpers/objectSpread\")),a=o(e(\"@babel/runtime/helpers/createClass\")),s,c,l,f,h,d,p;r.export({default:function(){return v},runFieldSanityChecks:function(){return m}}),r.link(\"./fieldNode.js\",{default:function(t){s=t}},0),r.link(\"./reducerNode.js\",{default:function(t){c=t}},1),r.link(\"lodash.clonedeep\",{default:function(t){l=t}},2),r.link(\"meteor/check\",{check:function(t){f=t},Match:function(t){h=t}},3),r.link(\"../lib/fieldInProjection\",{expandField:function(t){d=t},isFieldInProjection:function(t){p=t}},4);var v=function(){function e(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e&&!i.isObject(n))throw new t.Error(\"invalid-body\",'The field \"'+r+'\" is a collection link, and should have its body defined as an object.');this.body=l(n),this.linkName=r,this.collection=e,this.nodes=[],this.props={},this.parent=null,this.linker=null,this.linkStorageField=null,this.scheduledForDeletion=!1,this.reducers=[],this.results=[],this.snapCaches={},this.snapCachesSingles=[]}var n=e.prototype;return n.add=function(){function t(t,e){t.parent=this,t instanceof s&&m(t.name),e&&(t.linker=e,t.linkStorageField=e.linkStorageField,t.isMeta=e.isMeta(),t.isVirtual=e.isVirtual(),t.isOneResult=e.isOneResult(),t.shouldCleanStorage=this._shouldCleanStorage(t)),this.nodes.push(t)}return t}(),n.addProp=function(){function t(t,e){var n;\"$postFilter\"===t&&f(e,h.OneOf(Function,[Function])),i.extend(this.props,((n={})[t]=e,n))}return t}(),n.remove=function(){function t(t){this.nodes=i.filter(this.nodes,function(e){return t!==e})}return t}(),n.applyFields=function(){function t(t,e){var n=!1;i.each(this.fieldNodes,function(t){\"$meta\"!==t.projectionOperator&&(n=!0),t.applyFields(e.fields)}),i.each(this.collectionNodes,function(t){var i=t.linker;i&&!i.isVirtual()&&(p(e.fields,i.linkStorageField,!0)||(e.fields[i.linkStorageField]=1,n=!0))}),i.each(t,function(t,r){i.contains([\"$or\",\"$nor\",\"$not\",\"$and\",\"$meta\",\"$text\"],r)||i.has(e.fields,r.split(\".\")[0])||(n=!0,e.fields[r]=1)}),n||(e.fields=(0,u.default)({_id:1},e.fields))}return t}(),n.hasField=function(){function t(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?d(t):[t];return!!i.find(this.fieldNodes,function(t){return i.contains(n,t.name)})}return t}(),n.getField=function(){function t(t){return i.find(this.fieldNodes,function(e){return e.name==t})}return t}(),n.hasCollectionNode=function(){function t(t){return!!i.find(this.collectionNodes,function(e){return e.linkName==t})}return t}(),n.hasReducerNode=function(){function t(t){return!!i.find(this.reducerNodes,function(e){return e.name==t})}return t}(),n.getReducerNode=function(){function t(t){return i.find(this.reducerNodes,function(e){return e.name==t})}return t}(),n.getCollectionNode=function(){function t(t){return i.find(this.collectionNodes,function(e){return e.linkName==t})}return t}(),n.getName=function(){function t(){return this.linkName?this.linkName:this.collection?this.collection._name:\"N/A\"}return t}(),n.snapCache=function(){function t(t,e){this.snapCaches[t]=e,this.collection.getLinker(e).isOneResult()&&this.snapCachesSingles.push(t)}return t}(),n._shouldCleanStorage=function(){function t(t){return\"_id\"!==t.linkStorageField&&(t.isVirtual?!t.hasField(t.linkStorageField,!0):!this.hasField(t.linkStorageField,!0))}return t}(),(0,a.default)(e,[{key:\"collectionNodes\",get:function(){return i.filter(this.nodes,function(t){return t instanceof e})}},{key:\"fieldNodes\",get:function(){return i.filter(this.nodes,function(t){return t instanceof s})}},{key:\"reducerNodes\",get:function(){return i.filter(this.nodes,function(t){return t instanceof c})}}]),e}();function m(t){if(\"$\"===t[0])throw new Error(\"You are not allowed to use fields that start with $ inside a reducer's body: \"+t);return!0}},\"fieldNode.js\":function(t,e,n){n.export({default:function(){return r}});var r=function(){function t(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.name=t,this.projectionOperator=n?i.keys(e)[0]:null,this.body=!i.isObject(e)||n?e:1,this.scheduledForDeletion=!1}var e;return t.prototype.applyFields=function(){function t(t){t[this.name]=this.body}return t}(),t}()},\"reducerNode.js\":function(t,e,n){n.export({default:function(){return i}});var i=function(){function t(t,e){var n=e.body,i=e.reduce;this.name=t,this.body=n,this.reduceFunction=i,this.dependencies=[]}var e=t.prototype;return e.compute=function(){function t(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t[this.name]=(e=this.reduce).call.apply(e,[this,t].concat(i))}return t}(),e.reduce=function(){function t(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(e=this.reduceFunction).call.apply(e,[this,t].concat(i))}return t}(),t}()}},reducers:{\"extension.js\":function(e,n,r){var o,u;r.link(\"meteor/check\",{check:function(t){o=t}},0),r.link(\"./lib/addFieldMap\",{default:function(t){u=t}},1);var a=\"__reducers\";Object.assign(s.Collection.prototype,{addReducers:function(e){var n=this;this[a]||(this[a]={}),i.each(e,function(e,r){var u;if(n[e]||(n[e]={}),n.getLinker(r))throw new t.Error(\"You cannot add the reducer with name: \"+r+\" because it is already defined as a link in \"+n._name+\" collection\");if(n[e][r])throw new t.Error(\"You cannot add the reducer with name: \"+r+\" because it was already added to \"+n._name+\" collection\");o(e,{body:Object,reduce:Function}),i.extend(n[a],((u={})[r]=e,u))})},getReducer:function(t){if(this[a])return this[a][t]},addFieldMap:u})},lib:{\"addFieldMap.js\":function(t,e,n){function i(t){var e=this,n={},i=function(e){var i,r=t[e];n[e]={body:(i={},i[r]=1,i),reduce:function(t){return t[r]}}};for(var r in f.sanitizeForInObject(t))i(r);this.addReducers(n)}n.export({default:function(){return i}})},\"applyReducers.js\":function(t,e,n){var r,o=t(\"@babel/runtime/helpers/interopRequireDefault\")(t(\"@babel/runtime/helpers/toConsumableArray\"));function u(t,e){i.each(t.collectionNodes,function(t){u(t,e)});for(var n=[],r=(0,o.default)(t.reducerNodes),a=function(){var o=r.shift(),u;o.dependencies.length?i.all(o.dependencies,function(t){return n.includes(t)})?(t.results.forEach(function(t){o.compute(t,e)}),n.push(o.name)):r.push(o):(t.results.forEach(function(t){o.compute(t,e)}),n.push(o.name))};r.length;)a()}n.export({default:function(){return u}})},\"cleanReducerLeftovers.js\":function(t,e,n){var r;function o(t,e){i.each(t.collectionNodes,function(t){t.scheduledForDeletion&&e.forEach(function(e){delete e[t.linkName]})}),i.each(t.collectionNodes,function(t){var n;n=t.isOneResult?e.map(function(e){return e[t.linkName]}).filter(function(t){return!!t}):i.flatten(e.map(function(e){return e[t.linkName]}).filter(function(t){return!!t})),o(t,n)}),i.each(t.fieldNodes,function(n){n.scheduledForDeletion&&u(n.name.split(\".\"),e,t)}),i.each(t.reducerNodes,function(t){t.scheduledForDeletion&&e.forEach(function(e){delete e[t.name]})})}function u(t,e,n){var r=n.snapCaches[t[0]],o=r||t[0];1!==t.length?(t.shift(),u(t,e.filter(function(t){return!!t[o]}).map(function(t){return t[o]}),n),e.forEach(function(t){i.isObject(t[o])&&0===i.keys(t[o]).length&&\"_id\"!==o&&delete t[o]})):e.forEach(function(t){i.isObject(t)&&\"_id\"!==o&&delete t[o]})}n.export({default:function(){return o}}),n.link(\"dot-object\",{default:function(t){r=t}},0)},\"createReducers.js\":function(t,e,n){var r,o,u,a,s,c,l;function f(t){t.reducerNodes.forEach(function(e){i.each(e.body,function(n,i){h(e,t,i,n)})})}function h(t,e,n,i){var r=e.collection,o=r.getLinker(n);if(o)return p(t,n,i,e,o);var u=r.getReducer(n);return u?(t.dependencies.push(n),d(n,u,e)):v(n,i,e)}function d(t,e,n){var r=e.body,o=e.reduce;if(!n.hasReducerNode(t)){var u=new s(t,{body:r,reduce:o});n.add(u),u.scheduledForDeletion=!0,i.each(u.body,function(t,e){h(u,n,e,t)})}}function p(t,e,n,i,r){if(i.hasCollectionNode(e)){var a=i.getCollectionNode(e);c(t,n,a)}else{var s=new u(r.getLinkedCollection(),n,e);s.scheduledForDeletion=!0,i.add(s,r),o(s)}}function v(t,e,n){if(i.contains(l,t))n.addProp(t,e);else if(i.isObject(e)){var o,u=r.dot(((o={})[t]=e,o));i.each(u,function(t,e){m(n,e,t)})}else m(n,t,e)}function m(t,e,n){if(!t.hasField(e,!0)){var i=t.fieldNodes.filter(function(t){var n;return t.name.startsWith(e+\".\")});i.forEach(function(e){return t.remove(e)});var r=new a(e,n);r.scheduledForDeletion=i.every(function(t){return t.scheduledForDeletion}),t.add(r)}}n.export({default:function(){return f},handleAddElement:function(){return h},handleAddReducer:function(){return d},handleAddLink:function(){return p},handleAddField:function(){return v}}),n.link(\"dot-object\",{default:function(t){r=t}},0),n.link(\"../../lib/createGraph\",{createNodes:function(t){o=t}},1),n.link(\"../../nodes/collectionNode\",{default:function(t){u=t}},2),n.link(\"../../nodes/fieldNode\",{default:function(t){a=t}},3),n.link(\"../../nodes/reducerNode\",{default:function(t){s=t}},4),n.link(\"./embedReducerWithLink\",{default:function(t){c=t}},5),n.link(\"../../lib/createGraph\",{specialFields:function(t){l=t}},6)},\"embedReducerWithLink.js\":function(t,e,n){var r,o,u;function a(t,e,n){i.each(e,function(e,s){var c=n.collection;if(i.isObject(e))if(n.body[s]){var l=c.getLinker(s);if(l){if(l.isDenormalized()&&l.isSubBodyDenormalized(e)){var f=l.linkConfig.denormalize.field;return void r(f,e,n)}return void a(t,e,n.getCollectionNode(s))}r(s,e,n)}else o(t,n,s,e);else if(!n.body[s]){var h=c.getReducer(s);return h?u(s,h,n):r(s,e,n)}})}n.export({default:function(){return a}}),n.link(\"./createReducers\",{handleAddField:function(t){r=t},handleAddElement:function(t){o=t},handleAddReducer:function(t){u=t}},0)}}}}},node_modules:{\"lodash.clonedeep\":{\"package.json\":function(t,e,n){n.exports={name:\"lodash.clonedeep\",version:\"4.5.0\"}},\"index.js\":function(t,n,i){var r=200,o=\"__lodash_hash_undefined__\",u=9007199254740991,a=\"[object Arguments]\",s=\"[object Array]\",c=\"[object Boolean]\",l=\"[object Date]\",f=\"[object Error]\",h=\"[object Function]\",d=\"[object GeneratorFunction]\",p=\"[object Map]\",v=\"[object Number]\",m=\"[object Object]\",y=\"[object Promise]\",b=\"[object RegExp]\",k=\"[object Set]\",g=\"[object String]\",_=\"[object Symbol]\",j=\"[object WeakMap]\",w=\"[object ArrayBuffer]\",C=\"[object DataView]\",F=\"[object Float32Array]\",x=\"[object Float64Array]\",A=\"[object Int8Array]\",O=\"[object Int16Array]\",S=\"[object Int32Array]\",$=\"[object Uint8Array]\",E=\"[object Uint8ClampedArray]\",N=\"[object Uint16Array]\",D=\"[object Uint32Array]\",R=/[\\\\^$.*+?()[\\]{}|]/g,q=/\\w*$/,M=/^\\[object .+?Constructor\\]$/,P=/^(?:0|[1-9]\\d*)$/,L={};L[a]=L[s]=L[w]=L[C]=L[c]=L[l]=L[F]=L[x]=L[A]=L[O]=L[S]=L[p]=L[v]=L[m]=L[b]=L[k]=L[g]=L[_]=L[$]=L[E]=L[N]=L[D]=!0,L[f]=L[h]=L[j]=!1;var V=\"object\"==typeof e&&e&&e.Object===Object&&e,I=\"object\"==typeof self&&self&&self.Object===Object&&self,T=V||I||Function(\"return this\")(),H=\"object\"==typeof n&&n&&!n.nodeType&&n,Q=H&&\"object\"==typeof i&&i&&!i.nodeType&&i,Y=Q&&Q.exports===H;function z(t,e){return t.set(e[0],e[1]),t}function B(t,e){return t.add(e),t}function U(t,e){for(var n=-1,i=t?t.length:0;++n<i&&!1!==e(t[n],n,t););return t}function G(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function W(t,e,n,i){var r=-1,o=t?t.length:0;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function J(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function K(t,e){return null==t?void 0:t[e]}function X(t){var e=!1;if(null!=t&&\"function\"!=typeof t.toString)try{e=!!(t+\"\")}catch(t){}return e}function Z(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function tt(t,e){return function(n){return t(e(n))}}function et(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}var nt=Array.prototype,it=Function.prototype,rt=Object.prototype,ot=T[\"__core-js_shared__\"],ut=(at=/[^.]+$/.exec(ot&&ot.keys&&ot.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+at:\"\",at,st=it.toString,ct=rt.hasOwnProperty,lt=rt.toString,ft=RegExp(\"^\"+st.call(ct).replace(R,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\"),ht=Y?T.Buffer:void 0,dt=T.Symbol,pt=T.Uint8Array,vt=tt(Object.getPrototypeOf,Object),mt=Object.create,yt=rt.propertyIsEnumerable,bt=nt.splice,kt=Object.getOwnPropertySymbols,gt=ht?ht.isBuffer:void 0,_t=tt(Object.keys,Object),jt=Oe(T,\"DataView\"),wt=Oe(T,\"Map\"),Ct=Oe(T,\"Promise\"),Ft=Oe(T,\"Set\"),xt=Oe(T,\"WeakMap\"),At=Oe(Object,\"create\"),Ot=Le(jt),St=Le(wt),$t=Le(Ct),Et=Le(Ft),Nt=Le(xt),Dt=dt?dt.prototype:void 0,Rt=Dt?Dt.valueOf:void 0;function qt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Mt(){this.__data__=At?At(null):{}}function Pt(t){return this.has(t)&&delete this.__data__[t]}function Lt(t){var e=this.__data__;if(At){var n=e[t];return n===o?void 0:n}return ct.call(e,t)?e[t]:void 0}function Vt(t){var e=this.__data__;return At?void 0!==e[t]:ct.call(e,t)}function It(t,e){var n;return this.__data__[t]=At&&void 0===e?o:e,this}function Tt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Ht(){this.__data__=[]}function Qt(t){var e=this.__data__,n=ae(e,t),i;return!(n<0)&&(n==e.length-1?e.pop():bt.call(e,n,1),!0)}function Yt(t){var e=this.__data__,n=ae(e,t);return n<0?void 0:e[n][1]}function zt(t){return ae(this.__data__,t)>-1}function Bt(t,e){var n=this.__data__,i=ae(n,t);return i<0?n.push([t,e]):n[i][1]=e,this}function Ut(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Gt(){this.__data__={hash:new qt,map:new(wt||Tt),string:new qt}}function Wt(t){return Ae(this,t).delete(t)}function Jt(t){return Ae(this,t).get(t)}function Kt(t){return Ae(this,t).has(t)}function Xt(t,e){return Ae(this,t).set(t,e),this}function Zt(t){this.__data__=new Tt(t)}function te(){this.__data__=new Tt}function ee(t){return this.__data__.delete(t)}function ne(t){return this.__data__.get(t)}function ie(t){return this.__data__.has(t)}function re(t,e){var n=this.__data__;if(n instanceof Tt){var i=n.__data__;if(!wt||i.length<r-1)return i.push([t,e]),this;n=this.__data__=new Ut(i)}return n.set(t,e),this}function oe(t,e){var n=He(t)||Te(t)?J(t.length,String):[],i=n.length,r=!!i;for(var o in t)!e&&!ct.call(t,o)||r&&(\"length\"==o||Re(o,i))||n.push(o);return n}function ue(t,e,n){var i=t[e];ct.call(t,e)&&Ie(i,n)&&(void 0!==n||e in t)||(t[e]=n)}function ae(t,e){for(var n=t.length;n--;)if(Ie(t[n][0],e))return n;return-1}function se(t,e){return t&&Ce(e,Je(e),t)}function ce(t,e,n,i,r,o,u){var s;if(i&&(s=o?i(t,r,o,u):i(t)),void 0!==s)return s;if(!Ge(t))return t;var c=He(t);if(c){if(s=Ee(t),!e)return we(t,s)}else{var l=$e(t),f=l==h||l==d;if(ze(t))return ve(t,e);if(l==m||l==a||f&&!o){if(X(t))return o?t:{};if(s=Ne(f?{}:t),!e)return Fe(t,se(s,t))}else{if(!L[l])return o?t:{};s=De(t,l,ce,e)}}u||(u=new Zt);var p=u.get(t);if(p)return p;if(u.set(t,s),!c)var v=n?xe(t):Je(t);return U(v||t,function(r,o){v&&(r=t[o=r]),ue(s,o,ce(r,e,n,i,o,t,u))}),s}function le(t){return Ge(t)?mt(t):{}}function fe(t,e,n){var i=e(t);return He(t)?i:G(i,n(t))}function he(t){return lt.call(t)}function de(t){return!(!Ge(t)||Me(t))&&(Be(t)||X(t)?ft:M).test(Le(t));var e}function pe(t){if(!Pe(t))return _t(t);var e=[];for(var n in Object(t))ct.call(t,n)&&\"constructor\"!=n&&e.push(n);return e}function ve(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}function me(t){var e=new t.constructor(t.byteLength);return new pt(e).set(new pt(t)),e}function ye(t,e){var n=e?me(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function be(t,e,n){var i;return W(e?n(Z(t),!0):Z(t),z,new t.constructor)}function ke(t){var e=new t.constructor(t.source,q.exec(t));return e.lastIndex=t.lastIndex,e}function ge(t,e,n){var i;return W(e?n(et(t),!0):et(t),B,new t.constructor)}function _e(t){return Rt?Object(Rt.call(t)):{}}function je(t,e){var n=e?me(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function we(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}function Ce(t,e,n,i){n||(n={});for(var r=-1,o=e.length;++r<o;){var u=e[r],a=i?i(n[u],t[u],u,n,t):void 0;ue(n,u,void 0===a?t[u]:a)}return n}function Fe(t,e){return Ce(t,Se(t),e)}function xe(t){return fe(t,Je,Se)}function Ae(t,e){var n=t.__data__;return qe(e)?n[\"string\"==typeof e?\"string\":\"hash\"]:n.map}function Oe(t,e){var n=K(t,e);return de(n)?n:void 0}qt.prototype.clear=Mt,qt.prototype.delete=Pt,qt.prototype.get=Lt,qt.prototype.has=Vt,qt.prototype.set=It,Tt.prototype.clear=Ht,Tt.prototype.delete=Qt,Tt.prototype.get=Yt,Tt.prototype.has=zt,Tt.prototype.set=Bt,Ut.prototype.clear=Gt,Ut.prototype.delete=Wt,Ut.prototype.get=Jt,Ut.prototype.has=Kt,Ut.prototype.set=Xt,Zt.prototype.clear=te,Zt.prototype.delete=ee,Zt.prototype.get=ne,Zt.prototype.has=ie,Zt.prototype.set=re;var Se=kt?tt(kt,Object):Ke,$e=he;function Ee(t){var e=t.length,n=t.constructor(e);return e&&\"string\"==typeof t[0]&&ct.call(t,\"index\")&&(n.index=t.index,n.input=t.input),n}function Ne(t){return\"function\"!=typeof t.constructor||Pe(t)?{}:le(vt(t))}function De(t,e,n,i){var r=t.constructor;switch(e){case w:return me(t);case c:case l:return new r(+t);case C:return ye(t,i);case F:case x:case A:case O:case S:case $:case E:case N:case D:return je(t,i);case p:return be(t,i,n);case v:case g:return new r(t);case b:return ke(t);case k:return ge(t,i,n);case _:return _e(t)}}function Re(t,e){return!!(e=null==e?u:e)&&(\"number\"==typeof t||P.test(t))&&t>-1&&t%1==0&&t<e}function qe(t){var e=typeof t;return\"string\"==e||\"number\"==e||\"symbol\"==e||\"boolean\"==e?\"__proto__\"!==t:null===t}function Me(t){return!!ut&&ut in t}function Pe(t){var e=t&&t.constructor,n;return t===(\"function\"==typeof e&&e.prototype||rt)}function Le(t){if(null!=t){try{return st.call(t)}catch(t){}try{return t+\"\"}catch(t){}}return\"\"}function Ve(t){return ce(t,!0,!0)}function Ie(t,e){return t===e||t!=t&&e!=e}function Te(t){return Ye(t)&&ct.call(t,\"callee\")&&(!yt.call(t,\"callee\")||lt.call(t)==a)}(jt&&$e(new jt(new ArrayBuffer(1)))!=C||wt&&$e(new wt)!=p||Ct&&$e(Ct.resolve())!=y||Ft&&$e(new Ft)!=k||xt&&$e(new xt)!=j)&&($e=function(t){var e=lt.call(t),n=e==m?t.constructor:void 0,i=n?Le(n):void 0;if(i)switch(i){case Ot:return C;case St:return p;case $t:return y;case Et:return k;case Nt:return j}return e});var He=Array.isArray;function Qe(t){return null!=t&&Ue(t.length)&&!Be(t)}function Ye(t){return We(t)&&Qe(t)}var ze=gt||Xe;function Be(t){var e=Ge(t)?lt.call(t):\"\";return e==h||e==d}function Ue(t){return\"number\"==typeof t&&t>-1&&t%1==0&&t<=u}function Ge(t){var e=typeof t;return!!t&&(\"object\"==e||\"function\"==e)}function We(t){return!!t&&\"object\"==typeof t}function Je(t){return Qe(t)?oe(t):pe(t)}function Ke(){return[]}function Xe(){return!1}i.exports=Ve}},\"dot-object\":{\"package.json\":function(t,e,n){n.exports={name:\"dot-object\",version:\"1.5.4\",main:\"index\"}},\"index.js\":function(t,e,n){\"use strict\";function i(t,e){var n,i;if(\"function\"==typeof e)void 0!==(i=e(t))&&(t=i);else if(Array.isArray(e))for(n=0;n<e.length;n++)void 0!==(i=e[n](t))&&(t=i);return t}function r(t,e){return\"-\"===t[0]&&Array.isArray(e)&&/^-\\d+$/.test(t)?e.length+parseInt(t,10):t}function o(t){return/^\\d+/.test(t)}function u(t,e){return t.indexOf(\"[\")>=0&&(t=t.replace(/\\[/g,\".\").replace(/]/g,\"\")),t.split(e)}function a(t,e,n){if(!(this instanceof a))return new a(t,e,n);void 0===t&&(t=\".\"),void 0===e&&(e=!1),void 0===n&&(n=!0),this.seperator=t,this.override=e,this.useArray=n,this.cleanup=[]}var s=new a(\".\",!1,!0);function c(t){return function(){return s[t].apply(s,arguments)}}function l(t){return\"[object Object]\"===Object.prototype.toString.call(t)}a.prototype._fill=function(t,e,n,r){var u=t.shift();if(t.length>0){if(e[u]=e[u]||(this.useArray&&o(t[0])?[]:{}),e[u]!==Object(e[u])){if(!this.override)throw new Error(\"Trying to redefine `\"+u+\"` which is a \"+typeof e[u]);e[u]={}}this._fill(t,e[u],n,r)}else{if(!this.override&&e[u]===Object(e[u])&&Object.keys(e[u]).length)throw new Error(\"Trying to redefine non-empty obj['\"+u+\"']\");e[u]=i(n,r)}},a.prototype.object=function(t,e){var n=this;return Object.keys(t).forEach(function(r){var o=void 0===e?null:e[r],a=u(r,n.seperator).join(n.seperator);-1!==a.indexOf(n.seperator)?(n._fill(a.split(n.seperator),t,t[r],o),delete t[r]):n.override&&(t[r]=i(t[r],o))}),t},a.prototype.str=function(t,e,n,r){return-1!==t.indexOf(this.seperator)?this._fill(t.split(this.seperator),n,e,r):n.hasOwnProperty(t)&&!this.override||(n[t]=i(e,r)),n},a.prototype.pick=function(t,e,n){var i,o,a,s,c;for(o=u(t,this.seperator),i=0;i<o.length;i++){if(s=r(o[i],e),!(e&&\"object\"==typeof e&&s in e))return;if(i===o.length-1)return n?(a=e[s],delete e[s],Array.isArray(e)&&(c=o.slice(0,-1).join(\".\"),-1===this.cleanup.indexOf(c)&&this.cleanup.push(c)),a):e[s];e=e[s]}return n&&Array.isArray(e)&&(e=e.filter(function(t){return void 0!==t})),e},a.prototype.remove=function(t,e){var n;if(this.cleanup=[],Array.isArray(t)){for(n=0;n<t.length;n++)this.pick(t[n],e,!0);return this._cleanup(e),e}return this.pick(t,e,!0)},a.prototype._cleanup=function(t){var e,n,i,r;if(this.cleanup.length){for(n=0;n<this.cleanup.length;n++)e=(e=(r=(i=this.cleanup[n].split(\".\")).splice(0,-1).join(\".\"))?this.pick(r,t):t)[i[0]].filter(function(t){return void 0!==t}),this.set(this.cleanup[n],e,t);this.cleanup=[]}},a.prototype.del=a.prototype.remove,a.prototype.move=function(t,e,n,r,o){return\"function\"==typeof r||Array.isArray(r)?this.set(e,i(this.pick(t,n,!0),r),n,o):(o=r,this.set(e,this.pick(t,n,!0),n,o)),n},a.prototype.transfer=function(t,e,n,r,o,u){return\"function\"==typeof o||Array.isArray(o)?this.set(e,i(this.pick(t,n,!0),o),r,u):(u=o,this.set(e,this.pick(t,n,!0),r,u)),r},a.prototype.copy=function(t,e,n,r,o,u){return\"function\"==typeof o||Array.isArray(o)?this.set(e,i(JSON.parse(JSON.stringify(this.pick(t,n,!1))),o),r,u):(u=o,this.set(e,this.pick(t,n,!1),r,u)),r},a.prototype.set=function(t,e,n,i){var r,o,a,s;if(void 0===e)return n;for(a=u(t,this.seperator),r=0;r<a.length;r++){if(s=a[r],r===a.length-1)if(i&&l(e)&&l(n[s]))for(o in e)e.hasOwnProperty(o)&&(n[s][o]=e[o]);else if(i&&Array.isArray(n[s])&&Array.isArray(e))for(var c=0;c<e.length;c++)n[a[r]].push(e[c]);else n[s]=e;else n.hasOwnProperty(s)&&(l(n[s])||Array.isArray(n[s]))||(/^\\d+$/.test(a[r+1])?n[s]=[]:n[s]={});n=n[s]}return n},a.prototype.transform=function(t,e,n){return e=e||{},n=n||{},Object.keys(t).forEach(function(i){this.set(t[i],this.pick(i,e),n)}.bind(this)),n},a.prototype.dot=function(t,e,n){return e=e||{},n=n||[],Object.keys(t).forEach(function(i){if(Object(t[i])===t[i]&&\"[object Object]\"===Object.prototype.toString.call(t[i])||\"[object Array]\"===Object.prototype.toString.call(t[i]))return this.dot(t[i],e,n.concat(i));e[n.concat(i).join(this.seperator)]=t[i]}.bind(this)),e},a.pick=c(\"pick\"),a.move=c(\"move\"),a.transfer=c(\"transfer\"),a.transform=c(\"transform\"),a.copy=c(\"copy\"),a.object=c(\"object\"),a.str=c(\"str\"),a.set=c(\"set\"),a.del=a.remove=c(\"remove\"),a.dot=c(\"dot\"),[\"override\",\"overwrite\"].forEach(function(t){Object.defineProperty(a,t,{get:function(){return s.override},set:function(t){s.override=!!t}})}),Object.defineProperty(a,\"useArray\",{get:function(){return s.useArray},set:function(t){s.useArray=t}}),a._process=i,n.exports=a}},sift:{\"package.json\":function(t,e,n){n.exports={name:\"sift\",version:\"3.2.6\",main:\"./sift.js\"}},\"sift.js\":function(t,e,n){!function(){\"use strict\";function t(t){return\"function\"==typeof t}function e(t){return\"[object Array]\"===Object.prototype.toString.call(t)}function i(t){return t instanceof Date?t.getTime():t instanceof Array?t.map(i):t}function r(t,e){return t.get?t.get(e):t[e]}function o(t){return function(n,i){if(!e(i)||!i.length)return t(n,i);for(var o=0,u=i.length;o<u;o++)if(t(n,r(i,o)))return!0;return!1}}function u(t){return function(n,i){if(!e(i)||!i.length)return t(n,i);for(var o=0,u=i.length;o<u;o++)if(!t(n,r(i,o)))return!1;return!0}}function a(t,e){return t.v(t.a,e)}var s={$eq:o(function(t,e){return t(e)}),$ne:u(function(t,e){return!t(e)}),$or:function(t,e){for(var n=0,i=t.length;n<i;n++)if(a(r(t,n),e))return!0;return!1},$gt:o(function(t,e){return y.compare(i(e),t)>0}),$gte:o(function(t,e){return y.compare(i(e),t)>=0}),$lt:o(function(t,e){return y.compare(i(e),t)<0}),$lte:o(function(t,e){return y.compare(i(e),t)<=0}),$mod:o(function(t,e){return e%t[0]==t[1]}),$in:function(t,e){if(!(e instanceof Array))return!!~t.indexOf(i(e));for(var n=e.length;n--;)if(~t.indexOf(i(r(e,n))))return!0;return!1},$nin:function(t,e){return!s.$in(t,e)},$not:function(t,e){return!a(t,e)},$type:function(t,e){return null!=e&&(e instanceof t||e.constructor==t)},$all:function(t,e){e||(e=[]);for(var n=t.length;n--;)if(!~i(e).indexOf(r(t,n)))return!1;return!0},$size:function(t,e){return!!e&&t===e.length},$nor:function(t,e){for(var n=0,i=t.length;n<i;n++)if(a(r(t,n),e))return!1;return!0},$and:function(t,e){for(var n=0,i=t.length;n<i;n++)if(!a(r(t,n),e))return!1;return!0},$regex:o(function(t,e){return\"string\"==typeof e&&t.test(e)}),$where:function(t,e){return t.call(e,e)},$elemMatch:function(t,n){return e(n)?!!~l(n,t):a(t,n)},$exists:function(t,e){return null!=e===t}},c={$eq:function(t){return t instanceof RegExp?function(e){return\"string\"==typeof e&&t.test(e)}:t instanceof Function?t:e(t)&&!t.length?function(t){return e(t)&&!t.length}:null===t?function(t){return null==t}:function(e){return 0===y.compare(i(e),t)}},$ne:function(t){return c.$eq(t)},$and:function(t){return t.map(v)},$or:function(t){return t.map(v)},$nor:function(t){return t.map(v)},$not:function(t){return v(t)},$regex:function(t,e){return new RegExp(t,e.$options)},$where:function(t){return\"string\"==typeof t?new Function(\"obj\",\"return \"+t):t},$elemMatch:function(t){return v(t)},$exists:function(t){return!!t}};function l(t,e){for(var n=0;n<t.length;n++)if(a(e,r(t,n)))return n;return-1}function f(t,e){return{a:t,v:e}}function h(t,e){var n=[];return d(e,t.k,0,n),1===n.length?a(t.nv,n[0]):!!~l(n,t.nv)}function d(t,n,i,o){if(i!==n.length&&null!=t){var u=r(n,i);if(e(t)&&isNaN(Number(u)))for(var a=0,s=t.length;a<s;a++)d(r(t,a),n,i,o);else d(r(t,u),n,i+1,o)}else o.push(t)}function p(t,e){return{a:{k:t,nv:e},v:h}}function v(t){(!(t=i(t))||\"Object\"!==t.constructor.toString()&&\"functionObject(){[nativecode]}\"!==t.constructor.toString().replace(/\\n/g,\"\").replace(/ /g,\"\"))&&(t={$eq:t});var e=[];for(var n in t){var r=t[n];if(\"$options\"!==n)if(s[n])c[n]&&(r=c[n](r,t)),e.push(f(i(r),s[n]));else{if(36===n.charCodeAt(0))throw new Error(\"Unknown operation \"+n);e.push(p(n.split(\".\"),v(r)))}}return 1===e.length?e[0]:f(e,s.$and)}function m(t,e){var n=v(t);return e&&(n={a:n,v:function(t,n){return a(t,e(n))}}),n}function y(e,n,i){t(n)&&(i=n,n=void 0);var r=m(e,i);function o(t){return a(r,t)}return n?n.filter(o):o}y.use=function(e){if(t(e))return e(y);for(var n in e)36===n.charCodeAt(0)&&(s[n]=e[n])},y.indexOf=function(t,e,n){return l(e,m(t,n))},y.compare=function(t,e){if(t===e)return 0;if(typeof t==typeof e){if(t>e)return 1;if(t<e)return-1}},void 0!==n&&void 0!==n.exports&&(n.exports=y),\"undefined\"!=typeof window&&(window.sift=y)}()}},\"deep-extend\":{\"package.json\":function(t,e,n){n.exports={name:\"deep-extend\",version:\"0.5.0\",main:\"lib/deep-extend.js\"}},lib:{\"deep-extend.js\":function(t,e,n){\"use strict\";function i(t){return t instanceof Buffer||t instanceof Date||t instanceof RegExp}function r(t){if(t instanceof Buffer){var e=new Buffer(t.length);return t.copy(e),e}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);throw new Error(\"Unexpected situation\")}function o(t){var e=[];return t.forEach(function(t,n){\"object\"==typeof t&&null!==t?Array.isArray(t)?e[n]=o(t):i(t)?e[n]=r(t):e[n]=u({},t):e[n]=t}),e}var u=n.exports=function(){if(arguments.length<1||\"object\"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var t=arguments[0],e,n,a,s;return Array.prototype.slice.call(arguments,1).forEach(function(e){\"object\"!=typeof e||null===e||Array.isArray(e)||Object.keys(e).forEach(function(s){return a=t[s],(n=e[s])===t?void 0:\"object\"!=typeof n||null===n?void(t[s]=n):Array.isArray(n)?void(t[s]=o(n)):i(n)?void(t[s]=r(n)):\"object\"!=typeof a||null===a||Array.isArray(a)?void(t[s]=u({},n)):void(t[s]=u(a,n))})}),t}}}}}}}}},{extensions:[\".js\",\".json\"]})(\"/node_modules/meteor/cultofcoders:grapher/main.client.js\");Package._define(\"cultofcoders:grapher\",b)}();","sourcemap":"{\"version\":3,\"sources\":[\"packages/cultofcoders:grapher/main.client.js\",\"packages/cultofcoders:grapher/lib/compose.js\",\"packages/cultofcoders:grapher/lib/createQuery.js\",\"packages/cultofcoders:grapher/lib/extension.js\",\"packages/cultofcoders:grapher/lib/links/config.schema.js\",\"packages/cultofcoders:grapher/lib/links/constants.js\",\"packages/cultofcoders:grapher/lib/links/extension.js\",\"packages/cultofcoders:grapher/lib/links/linker.js\",\"packages/cultofcoders:grapher/lib/links/lib/createSearchFilters.js\",\"packages/cultofcoders:grapher/lib/links/linkTypes/base.js\",\"packages/cultofcoders:grapher/lib/links/linkTypes/linkMany.js\",\"packages/cultofcoders:grapher/lib/links/linkTypes/linkManyMeta.js\",\"packages/cultofcoders:grapher/lib/links/linkTypes/linkOne.js\",\"packages/cultofcoders:grapher/lib/links/linkTypes/linkOneMeta.js\",\"packages/cultofcoders:grapher/lib/links/linkTypes/lib/smartArguments.js\",\"packages/cultofcoders:grapher/lib/namedQuery/namedQuery.base.js\",\"packages/cultofcoders:grapher/lib/namedQuery/namedQuery.client.js\",\"packages/cultofcoders:grapher/lib/namedQuery/namedQuery.js\",\"packages/cultofcoders:grapher/lib/namedQuery/namedQuery.server.js\",\"packages/cultofcoders:grapher/lib/namedQuery/store.js\",\"packages/cultofcoders:grapher/lib/namedQuery/cache/BaseResultCacher.js\",\"packages/cultofcoders:grapher/lib/namedQuery/cache/MemoryResultCacher.js\",\"packages/cultofcoders:grapher/lib/query/query.base.js\",\"packages/cultofcoders:grapher/lib/query/query.client.js\",\"packages/cultofcoders:grapher/lib/query/query.js\",\"packages/cultofcoders:grapher/lib/query/query.server.js\",\"packages/cultofcoders:grapher/lib/query/counts/collection.js\",\"packages/cultofcoders:grapher/lib/query/counts/constants.js\",\"packages/cultofcoders:grapher/lib/query/counts/countSubscription.js\",\"packages/cultofcoders:grapher/lib/query/counts/createFauxSubscription.js\",\"packages/cultofcoders:grapher/lib/query/hypernova/aggregateSearchFilters.js\",\"packages/cultofcoders:grapher/lib/query/hypernova/assembleAggregateResults.js\",\"packages/cultofcoders:grapher/lib/query/hypernova/assembler.js\",\"packages/cultofcoders:grapher/lib/query/hypernova/buildAggregatePipeline.js\",\"packages/cultofcoders:grapher/lib/query/hypernova/constants.js\",\"packages/cultofcoders:grapher/lib/query/hypernova/hypernova.js\",\"packages/cultofcoders:grapher/lib/query/hypernova/storeHypernovaResults.js\",\"packages/cultofcoders:grapher/lib/query/hypernova/lib/cleanObjectForMetaFilters.js\",\"packages/cultofcoders:grapher/lib/query/hypernova/lib/snapBackDottedFields.js\",\"packages/cultofcoders:grapher/lib/query/lib/applyProps.js\",\"packages/cultofcoders:grapher/lib/query/lib/callWithPromise.js\",\"packages/cultofcoders:grapher/lib/query/lib/createGraph.js\",\"packages/cultofcoders:grapher/lib/query/lib/dotize.js\",\"packages/cultofcoders:grapher/lib/query/lib/fieldInProjection.js\",\"packages/cultofcoders:grapher/lib/query/lib/intersectDeep.js\",\"packages/cultofcoders:grapher/lib/query/lib/prepareForDelivery.js\",\"packages/cultofcoders:grapher/lib/query/lib/prepareForProcess.js\",\"packages/cultofcoders:grapher/lib/query/lib/recursiveFetch.js\",\"packages/cultofcoders:grapher/lib/query/nodes/collectionNode.js\",\"packages/cultofcoders:grapher/lib/query/nodes/fieldNode.js\",\"packages/cultofcoders:grapher/lib/query/nodes/reducerNode.js\",\"packages/cultofcoders:grapher/lib/query/reducers/extension.js\",\"packages/cultofcoders:grapher/lib/query/reducers/lib/addFieldMap.js\",\"packages/cultofcoders:grapher/lib/query/reducers/lib/applyReducers.js\",\"packages/cultofcoders:grapher/lib/query/reducers/lib/cleanReducerLeftovers.js\",\"packages/cultofcoders:grapher/lib/query/reducers/lib/createReducers.js\",\"packages/cultofcoders:grapher/lib/query/reducers/lib/embedReducerWithLink.js\"],\"names\":[\"module\",\"link\",\"default\",\"deepExtend\",\"v\",\"exportDefault\",\"_len\",\"arguments\",\"length\",\"args\",\"Array\",\"_key\",\"apply\",\"concat\",\"Query\",\"NamedQuery\",\"NamedQueryStore\",\"createNamedQuery\",\"name\",\"collection\",\"body\",\"options\",\"undefined\",\"namedQuery\",\"get\",\"query\",\"clone\",\"params\",\"add\",\"createNormalQuery\",\"_\",\"isFunction\",\"entryPointName\",\"first\",\"keys\",\"Mongo\",\"Collection\",\"Meteor\",\"Error\",\"isDevelopment\",\"console\",\"warn\",\"extend\",\"prototype\",\"createQuery\",\"this\",\"Match\",\"export\",\"DenormalizeSchema\",\"LinkConfigDefaults\",\"LinkConfigSchema\",\"field\",\"String\",\"Object\",\"bypassSchema\",\"Maybe\",\"Boolean\",\"type\",\"OneOf\",\"Where\",\"isObject\",\"_collection\",\"metadata\",\"inversedBy\",\"index\",\"unique\",\"autoremove\",\"denormalize\",\"ObjectIncluding\",\"LINK_STORAGE\",\"Linker\",\"assign\",\"addLinks\",\"data\",\"_this\",\"each\",\"linkConfig\",\"linkName\",\"_$extend\",\"_name\",\"linker\",\"getLinks\",\"getLinker\",\"hasLink\",\"getLink\",\"objectOrId\",\"linkData\",\"object\",\"_fields\",\"isVirtual\",\"_id\",\"findOne\",\"fields\",\"linkStorageField\",\"createLink\",\"LinkMany\",\"LinkManyMeta\",\"LinkOne\",\"LinkOneMeta\",\"smartArguments\",\"dot\",\"check\",\"access\",\"mainCollection\",\"_validateAndClean\",\"_initAutoremove\",\"_initDenormalization\",\"_handleReferenceRemovalForVirtualLinks\",\"_initIndex\",\"getLinkedCollection\",\"isMany\",\"isSingle\",\"isMeta\",\"relatedLinker\",\"contains\",\"oneTypes\",\"isOneResult\",\"helperClass\",\"_getHelperClass\",\"collectionName\",\"_prepareVirtual\",\"_generateFieldName\",\"_this$linkConfig\",\"_setupVirtualConfig\",\"startup\",\"virtualLinkConfig\",\"strategy\",\"cleanedCollectionName\",\"replace\",\"defaultFieldPrefix\",\"_this2\",\"after\",\"remove\",\"userId\",\"doc\",\"accessor\",\"fetchAsArray\",\"linkedObj\",\"unset\",\"isServer\",\"_this$mainCollection$\",\"_ensureIndex\",\"_this$mainCollection$2\",\"sparse\",\"_this3\",\"ids\",\"find\",\"fetch\",\"map\",\"item\",\"$in\",\"getIds\",\"_this4\",\"packageExists\",\"Package\",\"_this$linkConfig$deno\",\"cacheConfig\",\"referenceFieldSuffix\",\"inversedLink\",\"referenceField\",\"cacheField\",\"cache\",\"isDenormalized\",\"isSubBodyDenormalized\",\"cacheBody\",\"cacheBodyFields\",\"bodyFields\",\"omit\",\"difference\",\"sift\",\"createSearchFilters\",\"fieldStorage\",\"metaFilters\",\"createOneVirtual\",\"createOneMetaVirtual\",\"createManyVirtual\",\"createManyMetaVirtual\",\"createOne\",\"createOneMeta\",\"createMany\",\"createManyMeta\",\"pick\",\"_ref\",\"value\",\"filters\",\"key\",\"_fieldStorage$split\",\"split\",\"_fieldStorage$split2\",\"_toArray2\",\"root\",\"nested\",\"slice\",\"arr\",\"uniq\",\"union\",\"obj\",\"join\",\"_ref2\",\"pluck\",\"_ref3\",\"$elemMatch\",\"SmartArgs\",\"Link\",\"linkedCollection\",\"config\",\"$metaFilters\",\"$meta\",\"searchFilters\",\"appliedFilters\",\"others\",\"result\",\"_len2\",\"_key2\",\"clean\",\"identifyId\",\"what\",\"saveToDatabase\",\"getId\",\"identifyIds\",\"_validateIds\",\"isArray\",\"validIds\",\"_virtualAction\",\"action\",\"reversedLink\",\"element\",\"elementId\",\"insert\",\"set\",\"_$addToSet\",\"_ids\",\"modifier\",\"$addToSet\",\"$each\",\"update\",\"_$pull\",\"_field$split\",\"_field$split2\",\"filter\",\"$pull\",\"metadatas\",\"localMetadata\",\"push\",\"extendMetadata\",\"existingMetadata\",\"_this$linker$mainColl\",\"_$set\",\"subfield\",\"subfieldUpdate\",\"$set\",\"_$set2\",\"_$set3\",\"_class\",\"_proto\",\"subWhat\",\"_typeof2\",\"deepClone\",\"NamedQueryBase\",\"globalConfig\",\"isNamedQuery\",\"queryName\",\"resolver\",\"subscriptionHandle\",\"isExposed\",\"setConfig\",\"getConfig\",\"setParams\",\"doValidateParams\",\"validateParams\",\"_validate\",\"validationError\",\"error\",\"newParams\",\"constructor\",\"isResolver\",\"_objectSpread2\",\"cacher\",\"exposeConfig\",\"validator\",\"call\",\"defaultOptions\",\"CountSubscription\",\"createGraph\",\"recursiveFetch\",\"prepareForProcess\",\"callWithPromise\",\"Base\",\"LocalCollection\",\"intersectDeep\",\"_Base\",\"_inheritsLoose2\",\"subscribe\",\"callback\",\"subscribeCount\",\"_counter\",\"unsubscribe\",\"stop\",\"unsubscribeCount\",\"fetchSync\",\"_regenerator\",\"async\",\"fetchSync$\",\"_context\",\"prev\",\"next\",\"awrap\",\"abrupt\",\"sent\",\"fetchOneSync\",\"fetchOneSync$\",\"_context2\",\"t0\",\"t1\",\"callbackOrOptions\",\"_fetchReactive\",\"_fetchStatic\",\"fetchOne\",\"err\",\"res\",\"getCountSync\",\"getCountSync$\",\"_context3\",\"getCount\",\"$body\",\"allowSkip\",\"$options\",\"skip\",\"scoped\",\"NamedQueryClient\",\"NamedQueryServer\",\"MemoryResultCacher\",\"context\",\"_performSecurityChecks\",\"_fetchResolverData\",\"doEmbodimentIfItApplies\",\"cacheId\",\"generateQueryId\",\"countCursor\",\"getCursorForCounting\",\"count\",\"$filters\",\"cacheResults\",\"resolve\",\"fn\",\"self\",\"_callFirewall\",\"storage\",\"getAll\",\"EJSON\",\"BaseResultCacher\",\"stringify\",\"fetchData\",\"cloneDeep\",\"DEFAULT_TTL\",\"_BaseResultCacher\",\"store\",\"cacheData\",\"storeData\",\"ttl\",\"setTimeout\",\"QueryBase\",\"isGlobalQuery\",\"QueryClient\",\"QueryServer\",\"hypernova\",\"node\",\"COUNTS_COLLECTION_CLIENT\",\"ReactiveVar\",\"Tracker\",\"Counts\",\"createFauxSubscription\",\"accessToken\",\"fauxHandle\",\"arg\",\"equals\",\"lastArgs\",\"token\",\"_markedForUnsubscribe\",\"disconnectComputation\",\"autorun\",\"handleDisconnect\",\"id\",\"status\",\"connected\",\"_markedForResume\",\"isSubscribed\",\"countManager\",\"ready\",\"extractIdsFromArray\",\"array\",\"AggregateFilters\",\"collectionNode\",\"create\",\"parentObjects\",\"eligibleObjects\",\"storages\",\"_ref4\",\"arrayOfIds\",\"_toConsumableArray2\",\"_this$linkStorageFiel\",\"_this$linkStorageFiel2\",\"_ref5\",\"isValid\",\"parent\",\"results\",\"cleanObjectForMetaFilters\",\"childCollectionNode\",\"aggregateResults\",\"allResults\",\"metaFiltersTest\",\"parentResult\",\"eligibleAggregateResults\",\"aggregateResult\",\"datas\",\"comparator\",\"childLinkName\",\"parentResults\",\"forEach\",\"_parentResult$childLi\",\"filterAssembledData\",\"limit\",\"resultsByKeyId\",\"groupBy\",\"SAFE_DOTTED_FIELD_REPLACEMENT\",\"containsDottedFields\",\"pipeline\",\"firewall\",\"$match\",\"sort\",\"$sort\",\"dataPush\",\"indexOf\",\"safeField\",\"$group\",\"$push\",\"$slice\",\"$project\",\"applyProps\",\"prepareForDelivery\",\"storeHypernovaResults\",\"collectionNodes\",\"_applyProps\",\"hypernovaInit\",\"bypassFirewalls\",\"_applyProps2\",\"userIdToPass\",\"assemble\",\"assembleAggregateResults\",\"buildAggregatePipeline\",\"snapBackDottedFields\",\"aggregateFilters\",\"_buildAggregatePipeli\",\"aggregate\",\"filteredOptions\",\"aggregationResult\",\"document\",\"RegExp\",\"restrictOptions\",\"props\",\"applyFields\",\"method\",\"myParameters\",\"Promise\",\"reject\",\"reason\",\"CollectionNode\",\"FieldNode\",\"ReducerNode\",\"dotize\",\"createReducers\",\"specialFields\",\"createNodes\",\"addFieldNode\",\"getNodeNamespace\",\"fieldName\",\"addProp\",\"handleDenormalized\",\"subroot\",\"reducer\",\"getReducer\",\"reducerNode\",\"fieldNodes\",\"isProjectionOperatorExpression\",\"_dotize$convert\",\"dotted\",\"convert\",\"fieldNode\",\"parts\",\"n\",\"reverse\",\"snapCache\",\"prefix\",\"newObj\",\"recurse\",\"o\",\"p\",\"isArrayItem\",\"f\",\"meteorBabelHelpers\",\"sanitizeForInObject\",\"isEmptyArray\",\"getFieldName\",\"isEmptyObj\",\"isNumber\",\"isNaN\",\"parseInt\",\"prop\",\"hasOwnProperty\",\"expandField\",\"reduce\",\"acc\",\"_acc\",\"last\",\"_slicedToArray2\",\"isFieldInProjection\",\"projection\",\"checkNested\",\"some\",\"EXTENDED_SPECIAL_FIELDS\",\"isClientValueValid\",\"values\",\"every\",\"nestedValue\",\"intersectFields\",\"allowed\",\"client\",\"intersection\",\"pairs\",\"clientValue\",\"serverValue\",\"allowedBody\",\"clientBody\",\"build\",\"applyReducers\",\"cleanReducerLeftovers\",\"Minimongo\",\"applyPostFilters\",\"postFilters\",\"$postFilters\",\"applyPostOptions\",\"$postOptions\",\"sorter\",\"Sorter\",\"getComparator\",\"start\",\"end\",\"applyPostFilter\",\"$postFilter\",\"getResultsArray\",\"isUndefined\",\"removeLinkStorages\",\"sameLevelResults\",\"removeStorageField\",\"shouldCleanStorage\",\"_collectionNode$linkS\",\"_collectionNode$linkS2\",\"removeFromResult\",\"removeEmptyRoot\",\"isEmpty\",\"childResults\",\"childResult\",\"storeOneResults\",\"cloneMetaChildren\",\"assembleMetadata\",\"storeMetadata\",\"parentElement\",\"$metadata\",\"storageItem\",\"snapBackCaches\",\"snapCaches\",\"snapCachesSingles\",\"shoudStoreLinkStorage\",\"defaultFilterFunction\",\"applyFilterRecursive\",\"isRoot\",\"$filter\",\"Function\",\"applyPagination\",\"_params\",\"_body\",\"parentObject\",\"fetchOptions\",\"scopeQuery\",\"$exists\",\"_$extend2\",\"_collectionNode$resul\",\"collectionNodeResults\",\"runFieldSanityChecks\",\"nodes\",\"scheduledForDeletion\",\"reducers\",\"_shouldCleanStorage\",\"_node\",\"hasAddedAnyField\",\"projectionOperator\",\"has\",\"hasField\",\"getField\",\"hasCollectionNode\",\"hasReducerNode\",\"reducerNodes\",\"getReducerNode\",\"getCollectionNode\",\"getName\",\"subLinkName\",\"isProjectionOperator\",\"reduceFunction\",\"dependencies\",\"compute\",\"_this$reduce\",\"_this$reduceFunction\",\"addFieldMap\",\"addReducers\",\"reducerConfig\",\"reducerName\",\"_loop\",\"dbField\",\"processedReducers\",\"reducersQueue\",\"shift\",\"allDependenciesComputed\",\"all\",\"dep\",\"includes\",\"flatten\",\"cleanNestedFields\",\"snapCacheField\",\"embedReducerWithLink\",\"handleAddElement\",\"handleAddLink\",\"handleAddReducer\",\"handleAddField\",\"childReducerNode\",\"_dot$dot\",\"dots\",\"addFieldIfRequired\",\"nestedFields\",\"startsWith\",\"reducerBody\"],\"mappings\":\"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\",\"sourcesContent\":[\"import './lib/extension.js';\\nimport './lib/links/extension.js';\\nimport './lib/query/reducers/extension.js';\\n\\nexport { default as createQuery } from './lib/createQuery.js';\\n\\nexport {\\n    default as prepareForProcess,\\n} from './lib/query/lib/prepareForProcess';\\n\\nexport { default as Query } from './lib/query/query.client';\\n\\nexport { default as NamedQuery } from './lib/namedQuery/namedQuery.client';\\n\\nexport { default as compose } from './lib/compose';\\n\",\"import deepExtend from 'deep-extend';\\n\\nexport default function (...args) {\\n    return deepExtend({}, ...args);\\n}\",\"import Query from './query/query.js';\\nimport NamedQuery from './namedQuery/namedQuery.js';\\nimport NamedQueryStore from './namedQuery/store.js';\\n\\n/**\\n * This is a polymorphic function, it allows you to create a query as an object\\n * or it also allows you to re-use an existing query if it's a named one\\n *\\n * @param args\\n * @returns {*}\\n */\\nexport default (...args) => {\\n    if (typeof args[0] === 'string') {\\n        let [name, body, options] = args;\\n        options = options || {};\\n\\n        // It's a resolver query\\n        if (_.isFunction(body)) {\\n            return createNamedQuery(name, null, body, options);\\n        }\\n\\n        const entryPointName = _.first(_.keys(body));\\n        const collection = Mongo.Collection.get(entryPointName);\\n\\n        if (!collection) {\\n            throw new Meteor.Error('invalid-name', `We could not find any collection with the name \\\"${entryPointName}\\\". Make sure it is imported prior to using this`)\\n        }\\n\\n        return createNamedQuery(name, collection, body[entryPointName], options);\\n    } else {\\n        // Query Creation, it can have an endpoint as collection or as a NamedQuery\\n        let [body, options] = args;\\n        options = options || {};\\n\\n        const entryPointName = _.first(_.keys(body));\\n        const collection = Mongo.Collection.get(entryPointName);\\n\\n        if (!collection) {\\n            if (Meteor.isDevelopment && !NamedQueryStore.get(entryPointName)) {\\n                console.warn(`You are creating a query with the entry point \\\"${entryPointName}\\\", but there was no collection found for it (maybe you forgot to import it client-side?). It's assumed that it's referencing a NamedQuery.`)\\n            }\\n\\n            return createNamedQuery(entryPointName, null, {}, {params: body[entryPointName]});\\n        } else {\\n            return createNormalQuery(collection, body[entryPointName], options);\\n        }\\n    }\\n}\\n\\nfunction createNamedQuery(name, collection, body, options = {}) {\\n    // if it exists already, we re-use it\\n    const namedQuery = NamedQueryStore.get(name);\\n    let query;\\n\\n    if (!namedQuery) {\\n        query = new NamedQuery(name, collection, body, options);\\n        NamedQueryStore.add(name, query);\\n    } else {\\n        query = namedQuery.clone(options.params);\\n    }\\n\\n    return query;\\n}\\n\\nfunction createNormalQuery(collection, body, options)  {\\n    return new Query(collection, body, options);\\n}\\n\",\"import Query from './query/query.js';\\nimport NamedQuery from './namedQuery/namedQuery.js';\\nimport NamedQueryStore from './namedQuery/store.js';\\n\\n_.extend(Mongo.Collection.prototype, {\\n    createQuery(...args) {\\n        if (typeof args[0] === 'string') {\\n            //NamedQuery\\n            const [name, body, options] = args;\\n            const query = new NamedQuery(name, this, body, options);\\n            NamedQueryStore.add(name, query);\\n\\n            return query;\\n        } else {\\n            const [body, options] = args;\\n\\n            return new Query(this, body, options);\\n        }\\n    },\\n});\\n\",\"import {Match} from 'meteor/check';\\nimport {Mongo} from 'meteor/mongo';\\n\\nexport const DenormalizeSchema = {\\n    field: String,\\n    body: Object,\\n    bypassSchema: Match.Maybe(Boolean)\\n};\\n\\nexport const LinkConfigDefaults = {\\n    type: 'one',\\n};\\n\\nexport const LinkConfigSchema = {\\n    type: Match.Maybe(Match.OneOf('one', 'many', '1', '*')),\\n    collection: Match.Maybe(\\n        Match.Where(collection => {\\n            // We do like this so it works with other types of collections \\n            // like FS.Collection\\n            return _.isObject(collection) && (\\n                collection instanceof Mongo.Collection\\n                || \\n                !!collection._collection\\n            );\\n        })\\n    ),\\n    field: Match.Maybe(String),\\n    metadata: Match.Maybe(Boolean),\\n    inversedBy: Match.Maybe(String),\\n    index: Match.Maybe(Boolean),\\n    unique: Match.Maybe(Boolean),\\n    autoremove: Match.Maybe(Boolean),\\n    denormalize: Match.Maybe(Match.ObjectIncluding(DenormalizeSchema)),\\n};\",\"export const LINK_STORAGE = '__links';\\n\",\"import { Mongo } from 'meteor/mongo';\\nimport { LINK_STORAGE } from './constants.js';\\nimport Linker from './linker.js';\\n\\nObject.assign(Mongo.Collection.prototype, {\\n    /**\\n     * The data we add should be valid for config.schema.js\\n     */\\n    addLinks(data) {\\n        if (!this[LINK_STORAGE]) {\\n            this[LINK_STORAGE] = {};\\n        }\\n\\n        _.each(data, (linkConfig, linkName) => {\\n            if (this[LINK_STORAGE][linkName]) {\\n                throw new Meteor.Error(\\n                    `You cannot add the link with name: ${linkName} because it was already added to ${\\n                        this._name\\n                    } collection`\\n                );\\n            }\\n\\n            const linker = new Linker(this, linkName, linkConfig);\\n\\n            _.extend(this[LINK_STORAGE], {\\n                [linkName]: linker,\\n            });\\n        });\\n    },\\n\\n    getLinks() {\\n        return this[LINK_STORAGE];\\n    },\\n\\n    getLinker(name) {\\n        if (this[LINK_STORAGE]) {\\n            return this[LINK_STORAGE][name];\\n        }\\n    },\\n\\n    hasLink(name) {\\n        if (!this[LINK_STORAGE]) {\\n            return false;\\n        }\\n\\n        return !!this[LINK_STORAGE][name];\\n    },\\n\\n    getLink(objectOrId, name) {\\n        let linkData = this[LINK_STORAGE];\\n\\n        if (!linkData) {\\n            throw new Meteor.Error(\\n                `There are no links defined for collection: ${this._name}`\\n            );\\n        }\\n\\n        if (!linkData[name]) {\\n            throw new Meteor.Error(\\n                `There is no link ${name} for collection: ${this._name}`\\n            );\\n        }\\n\\n        const linker = linkData[name];\\n        let object = objectOrId;\\n        if (typeof objectOrId == 'string') {\\n            if (!linker.isVirtual()) {\\n                object = this.findOne(objectOrId, {\\n                    fields: {\\n                        [linker.linkStorageField]: 1,\\n                    },\\n                });\\n            } else {\\n                object = { _id: objectOrId };\\n            }\\n\\n            if (!object) {\\n                throw new Meteor.Error(\\n                    `We could not find any object with _id: \\\"${objectOrId}\\\" within the collection: ${\\n                        this._name\\n                    }`\\n                );\\n            }\\n        }\\n\\n        return linkData[name].createLink(object);\\n    },\\n});\\n\",\"import LinkMany from './linkTypes/linkMany.js';\\nimport LinkManyMeta from './linkTypes/linkManyMeta.js';\\nimport LinkOne from './linkTypes/linkOne.js';\\nimport LinkOneMeta from './linkTypes/linkOneMeta.js';\\nimport { LinkConfigSchema, LinkConfigDefaults } from './config.schema.js';\\nimport smartArguments from './linkTypes/lib/smartArguments';\\nimport dot from 'dot-object';\\nimport { check } from 'meteor/check';\\nimport { _ } from 'meteor/underscore';\\nimport { access } from 'fs';\\n\\nexport default class Linker {\\n    /**\\n     * @param mainCollection\\n     * @param linkName\\n     * @param linkConfig\\n     */\\n    constructor(mainCollection, linkName, linkConfig) {\\n        this.mainCollection = mainCollection;\\n        this.linkConfig = Object.assign({}, LinkConfigDefaults, linkConfig);\\n        this.linkName = linkName;\\n\\n        // check linkName must not exist in schema\\n        this._validateAndClean();\\n\\n        // initialize cascade removal hooks.\\n        this._initAutoremove();\\n        this._initDenormalization();\\n\\n        if (this.isVirtual()) {\\n            // if it's a virtual field make sure that when this is deleted, it will be removed from the references\\n            if (!linkConfig.autoremove) {\\n                this._handleReferenceRemovalForVirtualLinks();\\n            }\\n        } else {\\n            this._initIndex();\\n        }\\n    }\\n\\n    /**\\n     * Values which represent for the relation a single link\\n     * @returns {string[]}\\n     */\\n    get oneTypes() {\\n        return ['one', '1'];\\n    }\\n\\n    /**\\n     * Returns the strategies: one, many, one-meta, many-meta\\n     * @returns {string}\\n     */\\n    get strategy() {\\n        let strategy = this.isMany() ? 'many' : 'one';\\n        if (this.linkConfig.metadata) {\\n            strategy += '-meta';\\n        }\\n\\n        return strategy;\\n    }\\n\\n    /**\\n     * Returns the field name in the document where the actual relationships are stored.\\n     * @returns string\\n     */\\n    get linkStorageField() {\\n        if (this.isVirtual()) {\\n            return this.linkConfig.relatedLinker.linkStorageField;\\n        }\\n\\n        return this.linkConfig.field;\\n    }\\n\\n    /**\\n     * The collection that is linked with the current collection\\n     * @returns Mongo.Collection\\n     */\\n    getLinkedCollection() {\\n        return this.linkConfig.collection;\\n    }\\n\\n    /**\\n     * If the relationship for this link is of \\\"many\\\" type.\\n     */\\n    isMany() {\\n        return !this.isSingle();\\n    }\\n\\n    /**\\n     * If the relationship for this link contains metadata\\n     */\\n    isMeta() {\\n        if (this.isVirtual()) {\\n            return this.linkConfig.relatedLinker.isMeta();\\n        }\\n\\n        return !!this.linkConfig.metadata;\\n    }\\n\\n    /**\\n     * @returns {boolean}\\n     */\\n    isSingle() {\\n        if (this.isVirtual()) {\\n            return this.linkConfig.relatedLinker.isSingle();\\n        }\\n\\n        return _.contains(this.oneTypes, this.linkConfig.type);\\n    }\\n\\n    /**\\n     * @returns {boolean}\\n     */\\n    isVirtual() {\\n        return !!this.linkConfig.inversedBy;\\n    }\\n\\n    /**\\n     * Should return a single result.\\n     */\\n    isOneResult() {\\n        return (\\n            (this.isVirtual() &&\\n                this.linkConfig.relatedLinker.linkConfig.unique) ||\\n            (!this.isVirtual() && this.isSingle())\\n        );\\n    }\\n\\n    /**\\n     * @param object\\n     * @param collection To impersonate the getLinkedCollection() of the \\\"Linker\\\"\\n     *\\n     * @returns {LinkOne|LinkMany|LinkManyMeta|LinkOneMeta|LinkResolve}\\n     */\\n    createLink(object, collection = null) {\\n        let helperClass = this._getHelperClass();\\n\\n        return new helperClass(this, object, collection);\\n    }\\n\\n    /**\\n     * @returns {*}\\n     * @private\\n     */\\n    _validateAndClean() {\\n        if (!this.linkConfig.collection) {\\n            throw new Meteor.Error(\\n                'invalid-config',\\n                `For the link ${\\n                    this.linkName\\n                } you did not provide a collection.`\\n            );\\n        }\\n\\n        if (typeof this.linkConfig.collection === 'string') {\\n            const collectionName = this.linkConfig.collection;\\n            this.linkConfig.collection = Mongo.Collection.get(collectionName);\\n\\n            if (!this.linkConfig.collection) {\\n                throw new Meteor.Error(\\n                    'invalid-collection',\\n                    `Could not find a collection with the name: ${collectionName}`\\n                );\\n            }\\n        }\\n\\n        if (this.isVirtual()) {\\n            return this._prepareVirtual();\\n        } else {\\n            if (!this.linkConfig.type) {\\n                this.linkConfig.type = 'one';\\n            }\\n\\n            if (!this.linkConfig.field) {\\n                this.linkConfig.field = this._generateFieldName();\\n            } else {\\n                if (this.linkConfig.field == this.linkName) {\\n                    throw new Meteor.Error(\\n                        'invalid-config',\\n                        `For the link ${\\n                            this.linkName\\n                        } you must not use the same name for the field, otherwise it will cause conflicts when fetching data`\\n                    );\\n                }\\n            }\\n        }\\n\\n        check(this.linkConfig, LinkConfigSchema);\\n    }\\n\\n    /**\\n     * We need to apply same type of rules in this case.\\n     * @private\\n     */\\n    _prepareVirtual() {\\n        const { collection, inversedBy } = this.linkConfig;\\n        let linker = collection.getLinker(inversedBy);\\n\\n        if (!linker) {\\n            // it is possible that the collection doesn't have a linker created yet.\\n            // so we will create it on startup after all links have been defined\\n            Meteor.startup(() => {\\n                linker = collection.getLinker(inversedBy);\\n                if (!linker) {\\n                    throw new Meteor.Error(\\n                        `You tried setting up an inversed link in \\\"${\\n                            this.mainCollection._name\\n                        }\\\" pointing to collection: \\\"${\\n                            collection._name\\n                        }\\\" link: \\\"${inversedBy}\\\", but no such link was found. Maybe a typo ?`\\n                    );\\n                } else {\\n                    this._setupVirtualConfig(linker);\\n                }\\n            });\\n        } else {\\n            this._setupVirtualConfig(linker);\\n        }\\n    }\\n\\n    /**\\n     * @param linker\\n     * @private\\n     */\\n    _setupVirtualConfig(linker) {\\n        const virtualLinkConfig = linker.linkConfig;\\n\\n        if (!virtualLinkConfig) {\\n            throw new Meteor.Error(\\n                `There is no link-config for the related collection on ${inversedBy}. Make sure you added the direct links before specifying virtual ones.`\\n            );\\n        }\\n\\n        _.extend(this.linkConfig, {\\n            metadata: virtualLinkConfig.metadata,\\n            relatedLinker: linker,\\n        });\\n    }\\n\\n    /**\\n     * Depending on the strategy, we create the proper helper class\\n     * @private\\n     */\\n    _getHelperClass() {\\n        switch (this.strategy) {\\n            case 'many-meta':\\n                return LinkManyMeta;\\n            case 'many':\\n                return LinkMany;\\n            case 'one-meta':\\n                return LinkOneMeta;\\n            case 'one':\\n                return LinkOne;\\n        }\\n\\n        throw new Meteor.Error(\\n            'invalid-strategy',\\n            `${this.strategy} is not a valid strategy`\\n        );\\n    }\\n\\n    /**\\n     * If field name not present, we generate it.\\n     * @private\\n     */\\n    _generateFieldName() {\\n        let cleanedCollectionName = this.linkConfig.collection._name.replace(\\n            /\\\\./g,\\n            '_'\\n        );\\n        let defaultFieldPrefix = this.linkName + '_' + cleanedCollectionName;\\n\\n        switch (this.strategy) {\\n            case 'many-meta':\\n                return `${defaultFieldPrefix}_metas`;\\n            case 'many':\\n                return `${defaultFieldPrefix}_ids`;\\n            case 'one-meta':\\n                return `${defaultFieldPrefix}_meta`;\\n            case 'one':\\n                return `${defaultFieldPrefix}_id`;\\n        }\\n    }\\n\\n    /**\\n     * When a link that is declared virtual is removed, the reference will be removed from every other link.\\n     * @private\\n     */\\n    _handleReferenceRemovalForVirtualLinks() {\\n        this.mainCollection.after.remove((userId, doc) => {\\n            // this problem may occur when you do a .remove() before Meteor.startup()\\n            if (!this.linkConfig.relatedLinker) {\\n                console.warn(\\n                    `There was an error finding the link for removal for collection: \\\"${\\n                        this.mainCollection._name\\n                    }\\\" with link: \\\"${\\n                        this.linkName\\n                    }\\\". This may occur when you do a .remove() before Meteor.startup()`\\n                );\\n                return;\\n            }\\n\\n            const accessor = this.createLink(doc);\\n\\n            _.each(accessor.fetchAsArray(), linkedObj => {\\n                const { relatedLinker } = this.linkConfig;\\n                // We do this check, to avoid self-referencing hell when defining virtual links\\n                // Virtual links if not found \\\"compile-time\\\", we will try again to reprocess them on Meteor.startup\\n                // if a removal happens before Meteor.startup this may fail\\n                if (relatedLinker) {\\n                    let link = relatedLinker.createLink(linkedObj);\\n\\n                    if (relatedLinker.isSingle()) {\\n                        link.unset();\\n                    } else {\\n                        link.remove(doc);\\n                    }\\n                }\\n            });\\n        });\\n    }\\n\\n    _initIndex() {\\n        if (Meteor.isServer) {\\n            let field = this.linkConfig.field;\\n            if (this.linkConfig.metadata) {\\n                field = field + '._id';\\n            }\\n\\n            if (this.linkConfig.index) {\\n                if (this.isVirtual()) {\\n                    throw new Meteor.Error(\\n                        'You cannot set index on an inversed link.'\\n                    );\\n                }\\n\\n                let options;\\n                if (this.linkConfig.unique) {\\n                    options = { unique: true };\\n                }\\n\\n                this.mainCollection._ensureIndex({ [field]: 1 }, options);\\n            } else {\\n                if (this.linkConfig.unique) {\\n                    if (this.isVirtual()) {\\n                        throw new Meteor.Error(\\n                            'You cannot set unique property on an inversed link.'\\n                        );\\n                    }\\n\\n                    this.mainCollection._ensureIndex(\\n                        {\\n                            [field]: 1,\\n                        },\\n                        { unique: true, sparse: true }\\n                    );\\n                }\\n            }\\n        }\\n    }\\n\\n    _initAutoremove() {\\n        if (!this.linkConfig.autoremove) {\\n            return;\\n        }\\n\\n        if (!this.isVirtual()) {\\n            this.mainCollection.after.remove((userId, doc) => {\\n                this.getLinkedCollection().remove({\\n                    _id: {\\n                        $in: smartArguments.getIds(doc[this.linkStorageField]),\\n                    },\\n                });\\n            });\\n        } else {\\n            this.mainCollection.after.remove((userId, doc) => {\\n                const linker = this.mainCollection.getLink(doc, this.linkName);\\n                const ids = linker\\n                    .find({}, { fields: { _id: 1 } })\\n                    .fetch()\\n                    .map(item => item._id);\\n\\n                this.getLinkedCollection().remove({\\n                    _id: { $in: ids },\\n                });\\n            });\\n        }\\n    }\\n\\n    /**\\n     * Initializes denormalization using herteby:denormalize\\n     * @private\\n     */\\n    _initDenormalization() {\\n        if (!this.linkConfig.denormalize || !Meteor.isServer) {\\n            return;\\n        }\\n\\n        const packageExists = !!Package['herteby:denormalize'];\\n        if (!packageExists) {\\n            throw new Meteor.Error(\\n                'missing-package',\\n                `Please add the herteby:denormalize package to your Meteor application in order to make caching work`\\n            );\\n        }\\n\\n        const { field, body, bypassSchema } = this.linkConfig.denormalize;\\n        let cacheConfig;\\n\\n        let referenceFieldSuffix = '';\\n        if (this.isMeta()) {\\n            referenceFieldSuffix = this.isSingle() ? '._id' : ':_id';\\n        }\\n\\n        if (this.isVirtual()) {\\n            let inversedLink = this.linkConfig.relatedLinker.linkConfig;\\n\\n            let type =\\n                inversedLink.type == 'many' ? 'many-inverse' : 'inversed';\\n\\n            cacheConfig = {\\n                type: type,\\n                collection: this.linkConfig.collection,\\n                fields: body,\\n                referenceField: inversedLink.field + referenceFieldSuffix,\\n                cacheField: field,\\n                bypassSchema: !!bypassSchema,\\n            };\\n        } else {\\n            cacheConfig = {\\n                type: this.linkConfig.type,\\n                collection: this.linkConfig.collection,\\n                fields: body,\\n                referenceField: this.linkConfig.field + referenceFieldSuffix,\\n                cacheField: field,\\n                bypassSchema: !!bypassSchema,\\n            };\\n        }\\n\\n        if (this.isVirtual()) {\\n            Meteor.startup(() => {\\n                this.mainCollection.cache(cacheConfig);\\n            });\\n        } else {\\n            this.mainCollection.cache(cacheConfig);\\n        }\\n    }\\n\\n    /**\\n     * Verifies if this linker is denormalized. It can be denormalized from the inverse side as well.\\n     *\\n     * @returns {boolean}\\n     * @private\\n     */\\n    isDenormalized() {\\n        return !!this.linkConfig.denormalize;\\n    }\\n\\n    /**\\n     * Verifies if the body of the linked element does not contain fields outside the cache body\\n     *\\n     * @param body\\n     * @returns {boolean}\\n     * @private\\n     */\\n    isSubBodyDenormalized(body) {\\n        const cacheBody = this.linkConfig.denormalize.body;\\n\\n        const cacheBodyFields = _.keys(dot.dot(cacheBody));\\n        const bodyFields = _.keys(dot.dot(_.omit(body, '_id')));\\n\\n        return _.difference(bodyFields, cacheBodyFields).length === 0;\\n    }\\n}\\n\",\"import sift from 'sift';\\nimport dot from 'dot-object';\\n\\nexport default function createSearchFilters(object, fieldStorage, strategy, isVirtual, metaFilters) {\\n    if (!isVirtual) {\\n        switch (strategy) {\\n            case 'one': return createOne(object, fieldStorage);\\n            case 'one-meta': return createOneMeta(object, fieldStorage, metaFilters);\\n            case 'many': return createMany(object, fieldStorage);\\n            case 'many-meta': return createManyMeta(object, fieldStorage, metaFilters);\\n            default:\\n                throw new Meteor.Error(`Invalid linking strategy: ${strategy}`)\\n        }\\n    } else {\\n        switch (strategy) {\\n            case 'one': return createOneVirtual(object, fieldStorage);\\n            case 'one-meta': return createOneMetaVirtual(object, fieldStorage, metaFilters);\\n            case 'many': return createManyVirtual(object, fieldStorage);\\n            case 'many-meta': return createManyMetaVirtual(object, fieldStorage, metaFilters);\\n            default:\\n                throw new Meteor.Error(`Invalid linking strategy: ${strategy}`)\\n        }\\n    }\\n}\\n\\nexport function createOne(object, fieldStorage) {\\n    return {\\n        _id: dot.pick(fieldStorage, object)\\n    };\\n}\\n\\nexport function createOneVirtual(object, fieldStorage) {\\n    return {\\n        [fieldStorage]: object._id\\n    };\\n}\\n\\nexport function createOneMeta(object, fieldStorage, metaFilters) {\\n    const value = object[fieldStorage];\\n\\n    if (metaFilters) {\\n        if (!sift(metaFilters)(value)) {\\n            return {_id: undefined};\\n        }\\n    }\\n\\n    return {\\n        _id: value ? value._id : value\\n    };\\n}\\n\\nexport function createOneMetaVirtual(object, fieldStorage, metaFilters) {\\n    let filters = {};\\n    if (metaFilters) {\\n        _.each(metaFilters, (value, key) => {\\n            filters[fieldStorage + '.' + key] = value;\\n        })\\n    }\\n\\n    filters[fieldStorage + '._id'] = object._id;\\n\\n    return filters;\\n}\\n\\nexport function createMany(object, fieldStorage) {\\n    const [root, ...nested] = fieldStorage.split('.');\\n    if (nested.length > 0) {\\n        const arr = object[root];\\n        const ids = arr ? _.uniq(_.union(arr.map(obj => _.isObject(obj) ? dot.pick(nested.join('.'), obj) : []))) : [];\\n        return {\\n            _id: {$in: ids}\\n        };\\n    }\\n    return {\\n        _id: {\\n            $in: object[fieldStorage] || []\\n        }\\n    };\\n}\\n\\nexport function createManyVirtual(object, fieldStorage) {\\n    return {\\n        [fieldStorage]: object._id\\n    };\\n}\\n\\nexport function createManyMeta(object, fieldStorage, metaFilters) {\\n    let value = object[fieldStorage];\\n\\n    if (metaFilters) {\\n        value = sift(metaFilters, value)\\n    }\\n\\n    return {\\n        _id: {\\n            $in: _.pluck(value, '_id') || []\\n        }\\n    };\\n}\\n\\nexport function createManyMetaVirtual(object, fieldStorage, metaFilters) {\\n    let filters = {};\\n    if (metaFilters) {\\n        _.each(metaFilters, (value, key) => {\\n            filters[key] = value;\\n        })\\n    }\\n\\n    filters._id = object._id;\\n\\n    return {\\n        [fieldStorage]: {$elemMatch: filters}\\n    };\\n}\",\"import SmartArgs from './lib/smartArguments.js';\\nimport createSearchFilters from '../lib/createSearchFilters';\\n\\nexport default class Link {\\n    get config() { return this.linker.linkConfig; }\\n\\n    get isVirtual() { return this.linker.isVirtual() }\\n\\n    constructor(linker, object, collection) {\\n        this.linker = linker;\\n        this.object = object;\\n        this.linkedCollection = (collection) ? collection : linker.getLinkedCollection();\\n\\n        if (this.linker.isVirtual()) {\\n            this.linkStorageField = this.config.relatedLinker.linkConfig.field;\\n        } else {\\n            this.linkStorageField = this.config.field;\\n        }\\n    }\\n\\n    /**\\n     * Gets the stored link information value\\n     * @returns {*}\\n     */\\n    value() {\\n        if (this.isVirtual) {\\n            throw new Meteor.Error('You can only take the value from the main link.');\\n        }\\n\\n        return this.object[this.linkStorageField];\\n    }\\n\\n    /**\\n     * Finds linked data.\\n     *\\n     * @param filters\\n     * @param options\\n     * @returns {*}\\n     * @param userId\\n     */\\n    find(filters = {}, options = {}, userId = undefined) {\\n        let linker = this.linker;\\n        const linkedCollection = this.linkedCollection;\\n\\n        let $metaFilters;\\n        if (filters.$meta) {\\n            $metaFilters = filters.$meta;\\n            delete filters.$meta;\\n        }\\n\\n        const searchFilters = createSearchFilters(\\n            this.object,\\n            this.linkStorageField,\\n            linker.strategy,\\n            linker.isVirtual(),\\n            $metaFilters\\n        );\\n\\n        let appliedFilters = _.extend({}, filters, searchFilters);\\n\\n        // see https://github.com/cult-of-coders/grapher/issues/134\\n        // happens due to recursive importing of modules\\n        // TODO: find another way to do this\\n        if (linkedCollection.find) {\\n            return linkedCollection.find(appliedFilters, options, userId)\\n        } else {\\n            return linkedCollection.default.find(appliedFilters, options, userId);\\n        }\\n    }\\n\\n    /**\\n     * @param filters\\n     * @param options\\n     * @param others\\n     * @returns {*|{content}|any}\\n     */\\n    fetch(filters, options, ...others) {\\n        let result = this.find(filters, options, ...others).fetch();\\n\\n        if (this.linker.isOneResult()) {\\n            return _.first(result);\\n        }\\n\\n        return result;\\n    }\\n\\n    /**\\n     * This is just like fetch() but forces to get an array even if it's single result\\n     * \\n     * @param {*} filters \\n     * @param {*} options \\n     * @param  {...any} others \\n     */\\n    fetchAsArray(filters, options, ...others) {\\n        return this.find(filters, options, ...others).fetch()\\n    }\\n\\n    /**\\n     * When we are dealing with multiple type relationships, $in would require an array. If the field value is null, it will fail\\n     * We use clean to make it an empty array by default.\\n     */\\n    clean() {}\\n\\n    /**\\n     * Extracts a single id\\n     */\\n    identifyId(what, saveToDatabase) {\\n        return SmartArgs.getId(what, {\\n            saveToDatabase,\\n            collection: this.linkedCollection\\n        });\\n    }\\n\\n    /**\\n     * Extracts the ids of object(s) or strings and returns an array.\\n     */\\n    identifyIds(what, saveToDatabase) {\\n        return SmartArgs.getIds(what, {\\n            saveToDatabase,\\n            collection: this.linkedCollection\\n        });\\n    }\\n\\n    /**\\n     * Checks when linking data, if the ids are valid with the linked collection.\\n     * @throws Meteor.Error\\n     * @param ids\\n     *\\n     * @protected\\n     */\\n    _validateIds(ids) {\\n        if (!_.isArray(ids)) {\\n            ids = [ids];\\n        }\\n\\n        const validIds = this.linkedCollection.find({\\n            _id: {$in: ids}\\n        }, {fields: {_id: 1}}).fetch().map(doc => doc._id);\\n\\n        if (validIds.length != ids.length) {\\n            throw new Meteor.Error('not-found', `You tried to create links with non-existing id(s) inside \\\"${this.linkedCollection._name}\\\": ${_.difference(ids, validIds).join(', ')}`)\\n        }\\n    }\\n\\n    /**\\n     * This is for allowing commands such as set/unset/add/remove/metadata from the virtual link.\\n     *\\n     * @param action\\n     * @param what\\n     * @param metadata\\n     *\\n     * @protected\\n     */\\n    _virtualAction(action, what, metadata) {\\n        const linker = this.linker.linkConfig.relatedLinker;\\n\\n        // its an unset operation most likely.\\n        if (what === undefined) {\\n            const reversedLink = linker.createLink(this.fetch());\\n            reversedLink.unset();\\n\\n            return;\\n        }\\n\\n        if (!_.isArray(what)) {\\n            what = [what];\\n        }\\n\\n        what = _.map(what, element => {\\n            if (!_.isObject(element)) {\\n                return linker.mainCollection.findOne(element);\\n            } else {\\n                if (!element._id) {\\n                    const elementId = linker.mainCollection.insert(element);\\n                    _.extend(element, linker.mainCollection.findOne(elementId));\\n                }\\n\\n                return element;\\n            }\\n        });\\n\\n        return _.map(what, element => {\\n            const reversedLink = linker.createLink(element);\\n\\n            if (action == 'metadata') {\\n                if (linker.isSingle()) {\\n                    return reversedLink.metadata(metadata);\\n                } else {\\n                    return reversedLink.metadata(this.object, metadata);\\n                }\\n            } else if (action == 'add' || action == 'set') {\\n                if (linker.isSingle()) {\\n                    reversedLink.set(this.object, metadata);\\n                } else {\\n                    reversedLink.add(this.object, metadata);\\n                }\\n            } else {\\n                if (linker.isSingle()) {\\n                    reversedLink.unset();\\n                } else {\\n                    reversedLink.remove(this.object);\\n                }\\n            }\\n        });\\n    }\\n}\\n\",\"import Link from './base.js';\\nimport dot from 'dot-object';\\nimport SmartArgs from './lib/smartArguments.js';\\n\\nexport default class LinkMany extends Link {\\n    clean() {\\n        if (!this.object[this.linkStorageField]) {\\n            this.object[this.linkStorageField] = [];\\n        }\\n    }\\n\\n    /**\\n     * Ads the _ids to the object.\\n     * @param what\\n     */\\n    add(what) {\\n        if (this.isVirtual) {\\n            this._virtualAction('add', what);\\n            return this;\\n        }\\n\\n        //if (this.isVirtual) throw new Meteor.Error('not-allowed', 'Add/remove operations must be done from the owning-link of the relationship');\\n\\n        this.clean();\\n\\n        const _ids = this.identifyIds(what, true);\\n        this._validateIds(_ids);\\n\\n        const field = this.linkStorageField;\\n\\n        // update the field\\n        this.object[field] = _.union(this.object[field], _ids);\\n\\n        // update the db\\n        let modifier = {\\n            $addToSet: {\\n                [field]: {$each: _ids}\\n            }\\n        };\\n\\n        this.linker.mainCollection.update(this.object._id, modifier);\\n\\n        return this;\\n    }\\n\\n    /**\\n     * @param what\\n     */\\n    remove(what) {\\n        if (this.isVirtual) {\\n            this._virtualAction('remove', what);\\n            return this;\\n        }\\n\\n        if (this.isVirtual) throw new Meteor.Error('not-allowed', 'Add/Remove operations should be done from the owner of the relationship');\\n\\n        this.clean();\\n        const field = this.linkStorageField;\\n        const [root, ...nested] = field.split('.');\\n\\n        const _ids = this.identifyIds(what);\\n\\n        // update the field\\n        this.object[root] = _.filter(\\n            this.object[root],\\n    _id => !_.contains(_ids, nested.length > 0 ? dot.pick(nested.join('.'), _id) : _id)\\n        );\\n\\n        // update the db\\n        let modifier = {\\n            $pull: {\\n                [root]: nested.length > 0 ? {[nested.join('.')]: {$in: _ids}} : {$in: _ids},\\n            },\\n        };\\n\\n        this.linker.mainCollection.update(this.object._id, modifier);\\n\\n        return this;\\n    }\\n\\n    set(what) {\\n        if (this.isVirtual) {\\n            this._virtualAction('set', what);\\n            return this;\\n        }\\n\\n        throw new Meteor.Error('invalid-command', 'You are trying to *set* in a relationship that is single. Please use add/remove for *many* relationships');\\n    }\\n\\n    unset(what) {\\n        if (this.isVirtual) {\\n            this._virtualAction('unset', what);\\n            return this;\\n        }\\n\\n        throw new Meteor.Error('invalid-command', 'You are trying to *unset* in a relationship that is single. Please use add/remove for *many* relationships');\\n    }\\n}\",\"import Link from './base.js';\\nimport SmartArgs from './lib/smartArguments.js';\\n\\nexport default class LinkManyMeta extends Link {\\n    clean() {\\n        if (!this.object[this.linkStorageField]) {\\n            this.object[this.linkStorageField] = [];\\n        }\\n    }\\n\\n    /**\\n     * @param what\\n     * @param metadata\\n     */\\n    add(what, metadata = {}) {\\n        if (this.isVirtual) {\\n            this._virtualAction('add', what, metadata);\\n            return this;\\n        }\\n\\n        const _ids = this.identifyIds(what, true);\\n        this._validateIds(_ids);\\n\\n        let field = this.linkStorageField;\\n\\n        this.object[field] = this.object[field] || [];\\n        let metadatas = [];\\n\\n        _.each(_ids, _id => {\\n            let localMetadata = _.clone(metadata);\\n            localMetadata._id = _id;\\n\\n            this.object[field].push(localMetadata);\\n            metadatas.push(localMetadata);\\n        });\\n\\n        let modifier = {\\n            $addToSet: {\\n                [field]: {$each: metadatas}\\n            }\\n        };\\n\\n        this.linker.mainCollection.update(this.object._id, modifier);\\n\\n        return this;\\n    }\\n\\n    /**\\n     * @param what\\n     * @param extendMetadata\\n     */\\n    metadata(what, extendMetadata) {\\n        if (this.isVirtual) {\\n            this._virtualAction('metadata', what, extendMetadata);\\n\\n            return this;\\n        }\\n\\n        let field = this.linkStorageField;\\n\\n        if (what === undefined) {\\n            return this.object[field];\\n        }\\n\\n        if (_.isArray(what)) {\\n            throw new Meteor.Error('not-allowed', 'Metadata updates should be made for one entity only, not multiple');\\n        }\\n\\n        const _id = this.identifyId(what);\\n\\n        let existingMetadata = _.find(this.object[field], metadata => metadata._id == _id);\\n        if (extendMetadata === undefined) {\\n            return existingMetadata;\\n        } else {\\n            _.extend(existingMetadata, extendMetadata);\\n            let subfield = field + '._id';\\n            let subfieldUpdate = field + '.$';\\n\\n            this.linker.mainCollection.update({\\n                _id: this.object._id,\\n                [subfield]: _id\\n            }, {\\n               $set: {\\n                   [subfieldUpdate]: existingMetadata\\n               }\\n            });\\n        }\\n\\n        return this;\\n    }\\n\\n    remove(what) {\\n        if (this.isVirtual) {\\n            this._virtualAction('remove', what);\\n            return this;\\n        }\\n\\n        const _ids = this.identifyIds(what);\\n        let field = this.linkStorageField;\\n\\n        this.object[field] = _.filter(this.object[field], link => !_.contains(_ids, link._id));\\n\\n        let modifier = {\\n            $pull: {\\n                [field]: {\\n                    _id: {\\n                        $in: _ids\\n                    }\\n                }\\n            }\\n        };\\n\\n        this.linker.mainCollection.update(this.object._id, modifier);\\n\\n        return this;\\n    }\\n\\n    set(what, metadata) {\\n        if (this.isVirtual) {\\n            this._virtualAction('set', what, metadata);\\n            return this;\\n        }\\n\\n        throw new Meteor.Error('invalid-command', 'You are trying to *set* in a relationship that is single. Please use add/remove for *many* relationships');\\n    }\\n\\n    unset(what) {\\n        if (this.isVirtual) {\\n            this._virtualAction('unset', what);\\n            return this;\\n        }\\n\\n        throw new Meteor.Error('invalid-command', 'You are trying to *unset* in a relationship that is single. Please use add/remove for *many* relationships');\\n    }\\n}\",\"import Link from './base.js';\\nimport SmartArgs from './lib/smartArguments.js';\\n\\nexport default class LinkOne extends Link {\\n    set(what) {\\n        if (this.isVirtual) {\\n            this._virtualAction('set', what);\\n            return this;\\n        }\\n\\n        let field = this.linkStorageField;\\n        const _id = this.identifyId(what, true);\\n        this._validateIds([_id]);\\n\\n        this.object[field] = _id;\\n\\n        this.linker.mainCollection.update(this.object._id, {\\n            $set: {\\n                [field]: _id\\n            }\\n        });\\n\\n        return this;\\n    }\\n\\n    unset() {\\n        if (this.isVirtual) {\\n            this._virtualAction('unset', what);\\n            return this;\\n        }\\n\\n        let field = this.linkStorageField;\\n        this.object[field] = null;\\n\\n        this.linker.mainCollection.update(this.object._id, {\\n            $set: {\\n                [field]: null\\n            }\\n        });\\n\\n        return this;\\n    }\\n\\n    add(what) {\\n        if (this.isVirtual) {\\n            this._virtualAction('add', what);\\n            return this;\\n        }\\n\\n        throw new Meteor.Error('invalid-command', 'You are trying to *add* in a relationship that is single. Please use set/unset for *single* relationships');\\n    }\\n\\n    remove(what) {\\n        if (this.isVirtual) {\\n            this._virtualAction('remove', what);\\n            return this;\\n        }\\n\\n        throw new Meteor.Error('invalid-command', 'You are trying to *remove* in a relationship that is single. Please use set/unset for *single* relationships');\\n    }\\n}\",\"import Link from './base.js';\\nimport SmartArgs from './lib/smartArguments.js';\\n\\nexport default class LinkOneMeta extends Link {\\n    set(what, metadata = {}) {\\n        if (this.isVirtual) {\\n            this._virtualAction('set', what);\\n            return this;\\n        }\\n\\n        let field = this.linkStorageField;\\n        metadata._id = this.identifyId(what, true);\\n        this._validateIds([metadata._id]);\\n\\n        this.object[field] = metadata;\\n\\n        this.linker.mainCollection.update(this.object._id, {\\n            $set: {\\n                [field]: metadata\\n            }\\n        });\\n\\n        return this;\\n    }\\n\\n    metadata(extendMetadata) {\\n        if (this.isVirtual) {\\n            this._virtualAction('metadata', undefined, extendMetadata);\\n\\n            return this;\\n        }\\n\\n        let field = this.linkStorageField;\\n\\n        if (!extendMetadata) {\\n            return this.object[field];\\n        } else {\\n            _.extend(this.object[field], extendMetadata);\\n\\n            this.linker.mainCollection.update(this.object._id, {\\n                $set: {\\n                    [field]: this.object[field]\\n                }\\n            });\\n        }\\n\\n        return this;\\n    }\\n\\n    unset() {\\n        if (this.isVirtual) {\\n            this._virtualAction('unset');\\n            return this;\\n        }\\n\\n        let field = this.linkStorageField;\\n        this.object[field] = {};\\n\\n        this.linker.mainCollection.update(this.object._id, {\\n            $set: {\\n                [field]: {}\\n            }\\n        });\\n\\n        return this;\\n    }\\n\\n    add(what, metadata) {\\n        if (this.isVirtual) {\\n            this._virtualAction('add', what, metadata);\\n            return this;\\n        }\\n\\n        throw new Meteor.Error('invalid-command', 'You are trying to *add* in a relationship that is single. Please use set/unset for *single* relationships');\\n    }\\n\\n    remove(what) {\\n        if (this.isVirtual) {\\n            this._virtualAction('remove', what);\\n            return this;\\n        }\\n\\n        throw new Meteor.Error('invalid-command', 'You are trying to *remove* in a relationship that is single. Please use set/unset for *single* relationships');\\n    }\\n}\",\"/**\\n * When you work with add/remove set/unset\\n * You have the ability to pass strings, array of strings, objects, array of objects\\n * If you are adding something and you want to save them in db, you can pass objects without ids.\\n */\\nexport default new class {\\n    getIds(what, options) {\\n        if (_.isArray(what)) {\\n            return _.map(what, (subWhat) => {\\n                return this.getId(subWhat, options)\\n            })\\n        } else {\\n            return [this.getId(what, options)];\\n        }\\n\\n        throw new Meteor.Error('invalid-type', `Unrecognized type: ${typeof what} for managing links`);\\n    }\\n\\n    getId(what, options) {\\n        if (typeof what === 'string') {\\n            return what;\\n        }\\n\\n        if (typeof what === 'object') {\\n            if (!what._id && options.saveToDatabase) {\\n                what._id = options.collection.insert(what);\\n            }\\n\\n            return what._id\\n        }\\n    }\\n}\",\"import deepClone from 'lodash.clonedeep';\\n\\nlet globalConfig = {};\\n\\nexport default class NamedQueryBase {\\n    static setConfig(config) {\\n        globalConfig = config;\\n    }\\n\\n    static getConfig() {\\n        return globalConfig;\\n    }\\n\\n    isNamedQuery = true;\\n\\n    constructor(name, collection, body, options = {}) {\\n        this.queryName = name;\\n\\n        if (_.isFunction(body)) {\\n            this.resolver = body;\\n        } else {\\n            this.body = deepClone(body);\\n        }\\n\\n        this.subscriptionHandle = null;\\n        this.params = options.params || {};\\n        this.options = Object.assign({}, globalConfig, options);\\n        this.collection = collection;\\n        this.isExposed = false;\\n    }\\n\\n    get name() {\\n        return `named_query_${this.queryName}`;\\n    }\\n\\n    get isResolver() {\\n        return !!this.resolver;\\n    }\\n\\n    setParams(params) {\\n        this.params = _.extend({}, this.params, params);\\n\\n        return this;\\n    }\\n\\n    /**\\n     * Validates the parameters\\n     */\\n    doValidateParams(params) {\\n        params = params || this.params;\\n\\n        const {validateParams} = this.options;\\n        if (!validateParams) return;\\n\\n        try {\\n            this._validate(validateParams, params);\\n        } catch (validationError) {\\n            console.error(`Invalid parameters supplied to the query \\\"${this.queryName}\\\"\\\\n`, validationError);\\n            throw validationError; // rethrow\\n        }\\n    }\\n\\n    clone(newParams) {\\n        const params = _.extend({}, deepClone(this.params), newParams);\\n\\n        let clone = new this.constructor(\\n            this.queryName,\\n            this.collection,\\n            this.isResolver ? this.resolver : deepClone(this.body),\\n            {\\n                ...this.options,\\n                params,\\n            }\\n        );\\n\\n        clone.cacher = this.cacher;\\n        if (this.exposeConfig) {\\n            clone.exposeConfig = this.exposeConfig;\\n        }\\n\\n        return clone;\\n    }\\n\\n    /**\\n     * @param {function|object} validator\\n     * @param {object} params\\n     * @private\\n     */\\n    _validate(validator, params) {\\n        if (_.isFunction(validator)) {\\n            validator.call(null, params)\\n        } else {\\n            check(params, validator)\\n        }\\n    }\\n}\\n\\nNamedQueryBase.defaultOptions = {};\",\"import CountSubscription from '../query/counts/countSubscription';\\nimport createGraph from '../query/lib/createGraph.js';\\nimport recursiveFetch from '../query/lib/recursiveFetch.js';\\nimport prepareForProcess from '../query/lib/prepareForProcess.js';\\nimport {_} from 'meteor/underscore';\\nimport callWithPromise from '../query/lib/callWithPromise';\\nimport Base from './namedQuery.base';\\nimport {LocalCollection} from 'meteor/minimongo';\\nimport intersectDeep from '../query/lib/intersectDeep';\\n\\nexport default class extends Base {\\n    /**\\n     * Subscribe\\n     *\\n     * @param callback\\n     * @returns {null|any|*}\\n     */\\n    subscribe(callback) {\\n        if (this.isResolver) {\\n            throw new Meteor.Error('not-allowed', `You cannot subscribe to a resolver query`);\\n        }\\n\\n        this.subscriptionHandle = Meteor.subscribe(\\n            this.name,\\n            this.params,\\n            callback\\n        );\\n\\n        return this.subscriptionHandle;\\n    }\\n\\n    /**\\n     * Subscribe to the counts for this query\\n     *\\n     * @param callback\\n     * @returns {Object}\\n     */\\n    subscribeCount(callback) {\\n        if (this.isResolver) {\\n            throw new Meteor.Error('not-allowed', `You cannot subscribe to a resolver query`);\\n        }\\n\\n        if (!this._counter) {\\n            this._counter = new CountSubscription(this);\\n        }\\n\\n        return this._counter.subscribe(this.params, callback);\\n    }\\n\\n    /**\\n     * Unsubscribe if an existing subscription exists\\n     */\\n    unsubscribe() {\\n        if (this.subscriptionHandle) {\\n            this.subscriptionHandle.stop();\\n        }\\n\\n        this.subscriptionHandle = null;\\n    }\\n\\n    /**\\n     * Unsubscribe to the counts if a subscription exists.\\n     */\\n    unsubscribeCount() {\\n        if (this._counter) {\\n            this._counter.unsubscribe();\\n            this._counter = null;\\n        }\\n    }\\n\\n    /**\\n     * Fetches elements in sync using promises\\n     * @return {*}\\n     */\\n    async fetchSync() {\\n        if (this.subscriptionHandle) {\\n            throw new Meteor.Error('This query is reactive, meaning you cannot use promises to fetch the data.');\\n        }\\n\\n        return await callWithPromise(this.name, this.params);\\n    }\\n\\n    /**\\n     * Fetches one element in sync\\n     * @return {*}\\n     */\\n    async fetchOneSync() {\\n        return _.first(await this.fetchSync())\\n    }\\n\\n    /**\\n     * Retrieves the data.\\n     * @param callbackOrOptions\\n     * @returns {*}\\n     */\\n    fetch(callbackOrOptions) {\\n        if (!this.subscriptionHandle) {\\n            return this._fetchStatic(callbackOrOptions)\\n        } else {\\n            return this._fetchReactive(callbackOrOptions);\\n        }\\n    }\\n\\n    /**\\n     * @param args\\n     * @returns {*}\\n     */\\n    fetchOne(...args) {\\n        if (!this.subscriptionHandle) {\\n            const callback = args[0];\\n            if (!_.isFunction(callback)) {\\n                throw new Meteor.Error('You did not provide a valid callback');\\n            }\\n\\n            this.fetch((err, res) => {\\n                callback(err, res ? _.first(res) : null);\\n            })\\n        } else {\\n            return _.first(this.fetch(...args));\\n        }\\n    }\\n\\n    /**\\n     * Gets the count of matching elements in sync.\\n     * @returns {any}\\n     */\\n    async getCountSync() {\\n        if (this._counter) {\\n            throw new Meteor.Error('This query is reactive, meaning you cannot use promises to fetch the data.');\\n        }\\n\\n        return await callWithPromise(this.name + '.count', this.params);\\n    }\\n\\n    /**\\n     * Gets the count of matching elements.\\n     * @param callback\\n     * @returns {any}\\n     */\\n    getCount(callback) {\\n        if (this._counter) {\\n            return this._counter.getCount();\\n        } else {\\n            if (!callback) {\\n                throw new Meteor.Error('not-allowed', 'You are on client so you must either provide a callback to get the count or subscribe first.');\\n            } else {\\n                return Meteor.call(this.name + '.count', this.params, callback);\\n            }\\n        }\\n    }\\n\\n    /**\\n     * Fetching non-reactive queries\\n     * @param callback\\n     * @private\\n     */\\n    _fetchStatic(callback) {\\n        if (!callback) {\\n            throw new Meteor.Error('not-allowed', 'You are on client so you must either provide a callback to get the data or subscribe first.');\\n        }\\n\\n        Meteor.call(this.name, this.params, callback);\\n    }\\n\\n    /**\\n     * Fetching when we've got an active publication\\n     *\\n     * @param options\\n     * @returns {*}\\n     * @private\\n     */\\n    _fetchReactive(options = {}) {\\n        let body = this.body;\\n        if (this.params.$body) {\\n            body = intersectDeep(body, this.params.$body);\\n        }\\n\\n        body = prepareForProcess(body, this.params);\\n        if (!options.allowSkip && body.$options && body.$options.skip) {\\n            delete body.$options.skip;\\n        }\\n\\n        return recursiveFetch(\\n            createGraph(this.collection, body),\\n            undefined, {\\n                scoped: this.options.scoped,\\n                subscriptionHandle: this.subscriptionHandle\\n            });\\n    }\\n}\\n\",\"import NamedQueryClient from './namedQuery.client';\\nimport NamedQueryServer from './namedQuery.server';\\n\\nlet NamedQuery;\\n\\nif (Meteor.isServer) {\\n    NamedQuery = NamedQueryServer;\\n} else {\\n    NamedQuery = NamedQueryClient;\\n}\\n\\nexport default NamedQuery;\",\"import prepareForProcess from '../query/lib/prepareForProcess.js';\\nimport Base from './namedQuery.base';\\nimport deepClone from 'lodash.clonedeep';\\nimport MemoryResultCacher from './cache/MemoryResultCacher';\\nimport intersectDeep from '../query/lib/intersectDeep';\\n\\nexport default class extends Base {\\n    /**\\n     * Retrieves the data.\\n     * @returns {*}\\n     */\\n    fetch(context) {\\n        this._performSecurityChecks(context, this.params);\\n\\n        if (this.isResolver) {\\n            return this._fetchResolverData(context);\\n        } else {\\n            body = deepClone(this.body);\\n            if (this.params.$body) {\\n                body = intersectDeep(body, this.params.$body);\\n            }\\n            \\n            // we must apply emobdyment here\\n            this.doEmbodimentIfItApplies(body, this.params);\\n\\n            const query = this.collection.createQuery(\\n                deepClone(body),\\n                {\\n                    params: deepClone(this.params)\\n                }\\n            );\\n\\n            if (this.cacher) {\\n                const cacheId = this.cacher.generateQueryId(this.queryName, this.params);\\n                return this.cacher.fetch(cacheId, {query});\\n            }\\n\\n            return query.fetch();\\n        }\\n    }\\n\\n    /**\\n     * @param args\\n     * @returns {*}\\n     */\\n    fetchOne(...args) {\\n        return _.first(this.fetch(...args));\\n    }\\n\\n    /**\\n     * Gets the count of matching elements.\\n     *\\n     * @returns {any}\\n     */\\n    getCount(context) {\\n        this._performSecurityChecks(context, this.params);\\n\\n        const countCursor = this.getCursorForCounting();\\n\\n        if (this.cacher) {\\n            const cacheId = 'count::' + this.cacher.generateQueryId(this.queryName, this.params);\\n\\n            return this.cacher.fetch(cacheId, {countCursor});\\n        }\\n\\n        return countCursor.count();\\n    }\\n\\n    /**\\n     * Returns the cursor for counting\\n     * This is most likely used for counts cursor\\n     */\\n    getCursorForCounting() {\\n        let body = deepClone(this.body);\\n        this.doEmbodimentIfItApplies(body, this.params);\\n        body = prepareForProcess(body, this.params);\\n\\n        return this.collection.find(body.$filters || {}, {fields: {_id: 1}});\\n    }\\n\\n    /**\\n     * @param cacher\\n     */\\n    cacheResults(cacher) {\\n        if (!cacher) {\\n            cacher = new MemoryResultCacher();\\n        }\\n\\n        this.cacher = cacher;\\n    }\\n\\n    /**\\n     * Configure resolve. This doesn't actually call the resolver, it just sets it\\n     * @param fn\\n     */\\n    resolve(fn) {\\n        if (!this.isResolver) {\\n            throw new Meteor.Error('invalid-call', `You cannot use resolve() on a non resolver NamedQuery`);\\n        }\\n\\n        this.resolver = fn;\\n    }\\n\\n    /**\\n     * @returns {*}\\n     * @private\\n     */\\n    _fetchResolverData(context) {\\n        const resolver = this.resolver;\\n        const self = this;\\n        const query = {\\n            fetch() {\\n                return resolver.call(context, self.params);\\n            }\\n        };\\n\\n        if (this.cacher) {\\n            const cacheId = this.cacher.generateQueryId(this.queryName, this.params);\\n            return this.cacher.fetch(cacheId, {query});\\n        }\\n\\n        return query.fetch();\\n    }\\n\\n    /**\\n     * @param context Meteor method/publish context\\n     * @param params\\n     *\\n     * @private\\n     */\\n    _performSecurityChecks(context, params) {\\n        if (context && this.exposeConfig) {\\n            this._callFirewall(context, context.userId, params);\\n        }\\n\\n        this.doValidateParams(params);\\n    }\\n}\\n\",\"export default new class {\\n    constructor() {\\n        this.storage = {};\\n    }\\n\\n    add(key, value) {\\n        if (this.storage[key]) {\\n            throw new Meteor.Error('invalid-name', `You have previously defined another namedQuery with the same name: \\\"${key}\\\". Named Query names should be unique.`);\\n        }\\n\\n        this.storage[key] = value;\\n    }\\n\\n    get(key) {\\n        return this.storage[key];\\n    }\\n\\n    getAll() {\\n        return this.storage;\\n    }\\n}\",\"import {EJSON} from 'meteor/ejson';\\n\\n/**\\n * This is a very basic in-memory result caching functionality\\n */\\nexport default class BaseResultCacher {\\n    constructor(config = {}) {\\n        this.config = config;\\n    }\\n\\n    /**\\n     * @param queryName\\n     * @param params\\n     * @returns {string}\\n     */\\n    generateQueryId(queryName, params) {\\n        return `${queryName}::${EJSON.stringify(params)}`;\\n    }\\n\\n    /**\\n     * Dummy function\\n     */\\n    fetch(cacheId, {query, countCursor}) {\\n        throw 'Not implemented';\\n    }\\n\\n    /**\\n     * @param query\\n     * @param countCursor\\n     * @returns {*}\\n     */\\n    static fetchData({query, countCursor}) {\\n        if (query) {\\n            return query.fetch();\\n        } else {\\n            return countCursor.count();\\n        }\\n    }\\n}\\n\",\"import {Meteor} from 'meteor/meteor';\\nimport cloneDeep from 'lodash.clonedeep';\\nimport BaseResultCacher from './BaseResultCacher';\\n\\nconst DEFAULT_TTL = 60000;\\n\\n/**\\n * This is a very basic in-memory result caching functionality\\n */\\nexport default class MemoryResultCacher extends BaseResultCacher {\\n    constructor(config = {}) {\\n        super(config);\\n        this.store = {};\\n    }\\n\\n    /**\\n     * @param cacheId\\n     * @param query\\n     * @param countCursor\\n     * @returns {*}\\n     */\\n    fetch(cacheId, {query, countCursor}) {\\n        const cacheData = this.store[cacheId];\\n        if (cacheData !== undefined) {\\n            return cloneDeep(cacheData);\\n        }\\n\\n        const data = BaseResultCacher.fetchData({query, countCursor});\\n        this.storeData(cacheId, data);\\n\\n        return data;\\n    }\\n\\n\\n    /**\\n     * @param cacheId\\n     * @param data\\n     */\\n    storeData(cacheId, data) {\\n        const ttl = this.config.ttl || DEFAULT_TTL;\\n        this.store[cacheId] = cloneDeep(data);\\n\\n        Meteor.setTimeout(() => {\\n            delete this.store[cacheId];\\n        }, ttl)\\n    }\\n}\\n\",\"import deepClone from 'lodash.clonedeep';\\nimport {check} from 'meteor/check';\\n\\nexport default class QueryBase {\\n    isGlobalQuery = true;\\n\\n    constructor(collection, body, options = {}) {\\n        this.collection = collection;\\n\\n        this.body = deepClone(body);\\n\\n        this.params = options.params || {};\\n        this.options = options;\\n    }\\n\\n    clone(newParams) {\\n        const params = _.extend({}, deepClone(this.params), newParams);\\n\\n        return new this.constructor(\\n            this.collection,\\n            deepClone(this.body),\\n            {\\n                params,\\n                ...this.options\\n            }\\n        );\\n    }\\n\\n    get name() {\\n        return `exposure_${this.collection._name}`;\\n    }\\n\\n    /**\\n     * Validates the parameters\\n     */\\n    doValidateParams() {\\n        const {validateParams} = this.options;\\n        if (!validateParams) return;\\n\\n        if (_.isFunction(validateParams)) {\\n            validateParams.call(null, this.params)\\n        } else {\\n            check(this.params)\\n        }\\n    }\\n\\n    /**\\n     * Merges the params with previous params.\\n     *\\n     * @param params\\n     * @returns {Query}\\n     */\\n    setParams(params) {\\n        this.params = _.extend({}, this.params, params);\\n\\n        return this;\\n    }\\n}\",\"import { _ } from 'meteor/underscore';\\nimport CountSubscription from './counts/countSubscription';\\nimport createGraph from './lib/createGraph.js';\\nimport recursiveFetch from './lib/recursiveFetch.js';\\nimport prepareForProcess from './lib/prepareForProcess.js';\\nimport callWithPromise from './lib/callWithPromise';\\nimport Base from './query.base';\\n\\nexport default class Query extends Base {\\n    /**\\n     * Subscribe\\n     *\\n     * @param callback {Function} optional\\n     * @returns {null|any|*}\\n     */\\n    subscribe(callback) {\\n        this.doValidateParams();\\n\\n        this.subscriptionHandle = Meteor.subscribe(\\n            this.name,\\n            prepareForProcess(this.body, this.params),\\n            callback\\n        );\\n\\n        return this.subscriptionHandle;\\n    }\\n\\n    /**\\n     * Subscribe to the counts for this query\\n     *\\n     * @param callback\\n     * @returns {Object}\\n     */\\n    subscribeCount(callback) {\\n        this.doValidateParams();\\n\\n        if (!this._counter) {\\n            this._counter = new CountSubscription(this);\\n        }\\n\\n        return this._counter.subscribe(\\n            prepareForProcess(this.body, this.params),\\n            callback\\n        );\\n    }\\n\\n    /**\\n     * Unsubscribe if an existing subscription exists\\n     */\\n    unsubscribe() {\\n        if (this.subscriptionHandle) {\\n            this.subscriptionHandle.stop();\\n        }\\n\\n        this.subscriptionHandle = null;\\n    }\\n\\n    /**\\n     * Unsubscribe to the counts if a subscription exists.\\n     */\\n    unsubscribeCount() {\\n        if (this._counter) {\\n            this._counter.unsubscribe();\\n            this._counter = null;\\n        }\\n    }\\n\\n    /**\\n     * Fetches elements in sync using promises\\n     * @return {*}\\n     */\\n    async fetchSync() {\\n        this.doValidateParams();\\n\\n        if (this.subscriptionHandle) {\\n            throw new Meteor.Error('This query is reactive, meaning you cannot use promises to fetch the data.');\\n        }\\n\\n        return await callWithPromise(this.name, prepareForProcess(this.body, this.params));\\n    }\\n\\n    /**\\n     * Fetches one element in sync\\n     * @return {*}\\n     */\\n    async fetchOneSync() {\\n        return _.first(await this.fetchSync())\\n    }\\n\\n    /**\\n     * Retrieves the data.\\n     * @param callbackOrOptions\\n     * @returns {*}\\n     */\\n    fetch(callbackOrOptions) {\\n        this.doValidateParams();\\n\\n        if (!this.subscriptionHandle) {\\n            return this._fetchStatic(callbackOrOptions)\\n        } else {\\n            return this._fetchReactive(callbackOrOptions);\\n        }\\n    }\\n\\n    /**\\n     * @param args\\n     * @returns {*}\\n     */\\n    fetchOne(...args) {\\n        if (!this.subscriptionHandle) {\\n            const callback = args[0];\\n            if (!_.isFunction(callback)) {\\n                throw new Meteor.Error('You did not provide a valid callback');\\n            }\\n\\n            this.fetch((err, res) => {\\n                callback(err, res ? _.first(res) : null);\\n            })\\n        } else {\\n            return _.first(this.fetch(...args));\\n        }\\n    }\\n\\n    /**\\n     * Gets the count of matching elements in sync.\\n     * @returns {any}\\n     */\\n    async getCountSync() {\\n        if (this._counter) {\\n            throw new Meteor.Error('This query is reactive, meaning you cannot use promises to fetch the data.');\\n        }\\n\\n        return await callWithPromise(this.name + '.count', prepareForProcess(this.body, this.params));\\n    }\\n\\n    /**\\n     * Gets the count of matching elements.\\n     * @param callback\\n     * @returns {any}\\n     */\\n    getCount(callback) {\\n        if (this._counter) {\\n            return this._counter.getCount();\\n        } else {\\n            if (!callback) {\\n                throw new Meteor.Error('not-allowed', 'You are on client so you must either provide a callback to get the count or subscribe first.');\\n            } else {\\n                return Meteor.call(\\n                    this.name + '.count',\\n                    prepareForProcess(this.body, this.params),\\n                    callback\\n                );\\n            }\\n        }\\n    }\\n\\n    /**\\n     * Fetching non-reactive queries\\n     * @param callback\\n     * @private\\n     */\\n    _fetchStatic(callback) {\\n        if (!callback) {\\n            throw new Meteor.Error('not-allowed', 'You are on client so you must either provide a callback to get the data or subscribe first.');\\n        }\\n\\n        Meteor.call(this.name, prepareForProcess(this.body, this.params), callback);\\n    }\\n\\n    /**\\n     * Fetching when we've got an active publication\\n     *\\n     * @param options\\n     * @returns {*}\\n     * @private\\n     */\\n    _fetchReactive(options = {}) {\\n        let body = prepareForProcess(this.body, this.params);\\n        if (!options.allowSkip && body.$options && body.$options.skip) {\\n            delete body.$options.skip;\\n        }\\n\\n        return recursiveFetch(\\n            createGraph(this.collection, body),\\n            this.params\\n        );\\n    }\\n}\\n\",\"import QueryClient from './query.client';\\nimport QueryServer from './query.server';\\n\\nlet Query;\\n\\nif (Meteor.isServer) {\\n    Query = QueryServer;\\n} else {\\n    Query = QueryClient;\\n}\\n\\nexport default Query;\",\"import createGraph from './lib/createGraph.js';\\nimport prepareForProcess from './lib/prepareForProcess.js';\\nimport hypernova from './hypernova/hypernova.js';\\nimport Base from './query.base';\\n\\nexport default class Query extends Base {\\n    /**\\n     * Retrieves the data.\\n     * @param context\\n     * @returns {*}\\n     */\\n    fetch(context = {}) {\\n        const node = createGraph(\\n            this.collection,\\n            prepareForProcess(this.body, this.params)\\n        );\\n\\n        return hypernova(node, context.userId, {params: this.params});\\n    }\\n\\n    /**\\n     * @param args\\n     * @returns {*}\\n     */\\n    fetchOne(...args) {\\n        return _.first(this.fetch(...args));\\n    }\\n\\n    /**\\n     * Gets the count of matching elements.\\n     * @returns {integer}\\n     */\\n    getCount() {\\n        return this.collection.find(this.body.$filters || {}, {}).count();\\n    }\\n}\",\"import { Mongo } from 'meteor/mongo';\\nimport { COUNTS_COLLECTION_CLIENT } from './constants';\\n\\n/**\\n * Internal collection used to store counts on the client.\\n */\\nexport default new Mongo.Collection(COUNTS_COLLECTION_CLIENT);\\n\",\"export const COUNTS_COLLECTION_CLIENT = 'grapher_counts';\\n\",\"import { EJSON } from 'meteor/ejson';\\nimport { Meteor } from 'meteor/meteor';\\nimport { ReactiveVar } from 'meteor/reactive-var';\\nimport { Tracker } from 'meteor/tracker';\\n\\nimport Counts from './collection';\\nimport createFauxSubscription from './createFauxSubscription';\\nimport prepareForProcess from '../lib/prepareForProcess.js';\\nimport NamedQueryBase from '../../namedQuery/namedQuery.base';\\n\\nexport default class CountSubscription {\\n    /**\\n     * @param {*} query - The query to use when fetching counts\\n     */\\n    constructor(query) {\\n        this.accessToken = new ReactiveVar(null);\\n        this.fauxHandle = null;\\n        this.query = query;\\n    }\\n\\n    /**\\n     * Starts a subscription request for reactive counts.\\n     *\\n     * @param {*} arg - The argument to pass to {name}.count.subscribe\\n     * @param {*} callback\\n     */\\n    subscribe(arg, callback) {\\n        // Don't try to resubscribe if arg hasn't changed\\n        if (EJSON.equals(this.lastArgs, arg) && this.fauxHandle) {\\n            return this.fauxHandle;\\n        }\\n\\n        this.accessToken.set(null);\\n        this.lastArgs = arg;\\n\\n        Meteor.call(this.query.name + '.count.subscribe', arg, (error, token) => {\\n            if (!this._markedForUnsubscribe) {\\n                this.subscriptionHandle = Meteor.subscribe(this.query.name + '.count', token, callback);\\n                this.accessToken.set(token);\\n\\n                this.disconnectComputation = Tracker.autorun(() => this.handleDisconnect());\\n            }\\n\\n            this._markedForUnsubscribe = false;\\n        });\\n\\n        this.fauxHandle = createFauxSubscription(this);\\n        return this.fauxHandle;\\n    }\\n\\n    /**\\n     * Unsubscribes from the count endpoint, if there is such a subscription.\\n     */\\n    unsubscribe() {\\n        if (this.subscriptionHandle) {\\n            this.disconnectComputation.stop();\\n            this.subscriptionHandle.stop();\\n        } else {\\n            // If we hit this branch, then Meteor.call in subscribe hasn't finished yet\\n            // so set a flag to stop the subscription from being created\\n            this._markedForUnsubscribe = true;\\n        }\\n\\n        this.accessToken.set(null);\\n        this.fauxHandle = null;\\n        this.subscriptionHandle = null;\\n    }\\n\\n    /**\\n     * Reactively fetch current document count. Returns null if the subscription is not ready yet.\\n     *\\n     * @returns {Number|null} - Current document count\\n     */\\n    getCount() {\\n        const id = this.accessToken.get();\\n        if (id === null) return null;\\n\\n        const doc = Counts.findOne(id);\\n        return doc.count;\\n    }\\n\\n    /**\\n     * All session info gets deleted when the server goes down, so when the client attempts to\\n     * optimistically resume the '.count' publication, the server will throw a 'no-request' error.\\n     *\\n     * This function prevents that by manually stopping and restarting the subscription when the\\n     * connection to the server is lost.\\n     */\\n    handleDisconnect() {\\n        const status = Meteor.status();\\n        if (!status.connected) {\\n            this._markedForResume = true;\\n            this.fauxHandle = null;\\n            this.subscriptionHandle.stop();\\n        }\\n\\n        if (status.connected && this._markedForResume) {\\n            this._markedForResume = false;\\n            this.subscribe(this.lastArgs);\\n        }\\n    }\\n\\n    /**\\n     * Returns whether or not a subscription request has been made.\\n     */\\n    isSubscribed() {\\n        return this.accessToken.get() !== null;\\n    }\\n}\\n\",\"/**\\n * This method creates a \\\"fake\\\" subscription handle so that users of CountSubscription#subscribe\\n * have an interface consistent with normal subscriptions.\\n *\\n * @param {CountSubscription} countManager\\n */\\nexport default (countManager) => ({\\n    ready: () => countManager.accessToken.get() !== null && countManager.subscriptionHandle.ready(),\\n    stop: () => countManager.unsubscribe(),\\n});\\n\",\"import sift from 'sift';\\nimport dot from 'dot-object';\\n\\nfunction extractIdsFromArray(array, field) {\\n    return (array || []).map(obj => _.isObject(obj) ? dot.pick(field, obj) : undefined).filter(v => !!v);\\n}\\n\\n/**\\n * Its purpose is to create filters to get the related data in one request.\\n */\\nexport default class AggregateFilters {\\n    constructor(collectionNode, metaFilters) {\\n        this.collectionNode = collectionNode;\\n        this.linker = collectionNode.linker;\\n        this.metaFilters = metaFilters;\\n        this.isVirtual = this.linker.isVirtual();\\n\\n        this.linkStorageField = this.linker.linkStorageField;\\n    }\\n\\n    get parentObjects() {\\n        return this.collectionNode.parent.results;\\n    }\\n\\n    create() {\\n        switch (this.linker.strategy) {\\n            case 'one':\\n                return this.createOne();\\n            case 'one-meta':\\n                return this.createOneMeta();\\n            case 'many':\\n                return this.createMany();\\n            case 'many-meta':\\n                return this.createManyMeta();\\n            default:\\n                throw new Meteor.Error(`Invalid linker type: ${this.linker.type}`);\\n        }\\n    }\\n\\n    createOne() {\\n        if (!this.isVirtual) {\\n            return {\\n                _id: {\\n                    $in: _.uniq(extractIdsFromArray(this.parentObjects, this.linkStorageField))\\n                }\\n            };\\n        } else {\\n            return {\\n                [this.linkStorageField]: {\\n                    $in: _.uniq(\\n                        _.pluck(this.parentObjects, '_id')\\n                    )\\n                }\\n            };\\n        }\\n    }\\n\\n    createOneMeta() {\\n        if (!this.isVirtual) {\\n            let eligibleObjects = this.parentObjects;\\n\\n            if (this.metaFilters) {\\n                eligibleObjects = _.filter(this.parentObjects, object => {\\n                    return sift(this.metaFilters)(object[this.linkStorageField]);\\n                });\\n            }\\n\\n            const storages = _.pluck(eligibleObjects, this.linkStorageField);\\n            let ids = [];\\n            _.each(storages, storage => {\\n                if (storage) {\\n                    ids.push(storage._id);\\n                }\\n            });\\n\\n            return {\\n                _id: {$in: _.uniq(ids)}\\n            };\\n        } else {\\n            let filters = {};\\n            if (this.metaFilters) {\\n                _.each(this.metaFilters, (value, key) => {\\n                    filters[this.linkStorageField + '.' + key] = value;\\n                })\\n            }\\n\\n            filters[this.linkStorageField + '._id'] = {\\n                $in: _.uniq(\\n                    _.pluck(this.parentObjects, '_id')\\n                )\\n            };\\n\\n            return filters;\\n        }\\n    }\\n\\n    createMany() {\\n        if (!this.isVirtual) {\\n            const [root, ...nested] = this.linkStorageField.split('.');\\n            const arrayOfIds = _.union(...extractIdsFromArray(this.parentObjects, root));\\n            return {\\n                _id: {\\n                    $in: _.uniq(nested.length > 0 ? extractIdsFromArray(arrayOfIds, nested.join('.')) : arrayOfIds)\\n                }\\n            };\\n        } else {\\n            const arrayOfIds = _.pluck(this.parentObjects, '_id');\\n            return {\\n                [this.linkStorageField]: {\\n                    $in: _.uniq(\\n                        _.union(...arrayOfIds)\\n                    )\\n                }\\n            };\\n        }\\n    }\\n\\n    createManyMeta() {\\n        if (!this.isVirtual) {\\n            let ids = [];\\n\\n            _.each(this.parentObjects, object => {\\n                if (object[this.linkStorageField]) {\\n                    if (this.metaFilters) {\\n                        const isValid = sift(this.metaFilters);\\n                        _.each(object[this.linkStorageField], object => {\\n                            if (isValid(object)) {\\n                                ids.push(object._id);\\n                            }\\n                        });\\n                    } else {\\n                        _.each(object[this.linkStorageField], object => {\\n                            ids.push(object._id);\\n                        });\\n                    }\\n                }\\n            });\\n\\n            return {\\n                _id: {$in: _.uniq(ids)}\\n            };\\n        } else {\\n            let filters = {};\\n            if (this.metaFilters) {\\n                _.each(this.metaFilters, (value, key) => {\\n                    filters[key] = value;\\n                })\\n            }\\n\\n            filters._id = {\\n                $in: _.uniq(\\n                    _.pluck(this.parentObjects, '_id')\\n                )\\n            };\\n\\n            return {\\n                [this.linkStorageField]: {\\n                    $elemMatch: filters\\n                }\\n            };\\n        }\\n    }\\n}\",\"import sift from 'sift';\\nimport cleanObjectForMetaFilters from './lib/cleanObjectForMetaFilters';\\n\\n/**\\n * This only applies to inversed links. It will assemble the data in a correct manner.\\n */\\nexport default function(childCollectionNode, aggregateResults, metaFilters) {\\n    const linker = childCollectionNode.linker;\\n    const linkStorageField = linker.linkStorageField;\\n    const linkName = childCollectionNode.linkName;\\n    const isMeta = linker.isMeta();\\n    const isMany = linker.isMany();\\n\\n    let allResults = [];\\n\\n    if (isMeta && metaFilters) {\\n        const metaFiltersTest = sift(metaFilters);\\n        _.each(childCollectionNode.parent.results, parentResult => {\\n            cleanObjectForMetaFilters(\\n                parentResult,\\n                linkStorageField,\\n                metaFiltersTest\\n            );\\n        });\\n    }\\n\\n    if (isMeta && isMany) {\\n        // This case is treated differently because we get an array response from the pipeline.\\n\\n        _.each(childCollectionNode.parent.results, parentResult => {\\n            parentResult[linkName] = parentResult[linkName] || [];\\n\\n            const eligibleAggregateResults = _.filter(\\n                aggregateResults,\\n                aggregateResult => {\\n                    return _.contains(aggregateResult._id, parentResult._id);\\n                }\\n            );\\n\\n            if (eligibleAggregateResults.length) {\\n                const datas = _.pluck(eligibleAggregateResults, 'data'); /// [ [x1, x2], [x2, x3] ]\\n\\n                _.each(datas, data => {\\n                    _.each(data, item => {\\n                        parentResult[linkName].push(item);\\n                    });\\n                });\\n            }\\n        });\\n\\n        _.each(aggregateResults, aggregateResult => {\\n            _.each(aggregateResult.data, item => allResults.push(item));\\n        });\\n    } else {\\n        let comparator;\\n        if (isMany) {\\n            comparator = (aggregateResult, result) =>\\n                _.contains(aggregateResult._id, result._id);\\n        } else {\\n            comparator = (aggregateResult, result) =>\\n                aggregateResult._id == result._id;\\n        }\\n\\n        const childLinkName = childCollectionNode.linkName;\\n        const parentResults = childCollectionNode.parent.results;\\n\\n        parentResults.forEach(parentResult => {\\n            // We are now finding the data from the pipeline that is related to the _id of the parent\\n            const eligibleAggregateResults = aggregateResults.filter(\\n                aggregateResult => comparator(aggregateResult, parentResult)\\n            );\\n\\n            eligibleAggregateResults.forEach(aggregateResult => {\\n                if (Array.isArray(parentResult[childLinkName])) {\\n                    parentResult[childLinkName].push(...aggregateResult.data);\\n                } else {\\n                    parentResult[childLinkName] = [...aggregateResult.data];\\n                }\\n            });\\n        });\\n\\n        aggregateResults.forEach(aggregateResult => {\\n            allResults.push(...aggregateResult.data);\\n        });\\n    }\\n\\n    childCollectionNode.results = allResults;\\n}\\n\",\"import createSearchFilters from '../../links/lib/createSearchFilters';\\nimport cleanObjectForMetaFilters from './lib/cleanObjectForMetaFilters';\\nimport sift from 'sift';\\nimport dot from 'dot-object';\\n\\nexport default (childCollectionNode, { limit, skip, metaFilters }) => {\\n    if (childCollectionNode.results.length === 0) {\\n        return;\\n    }\\n\\n    const parent = childCollectionNode.parent;\\n    const linker = childCollectionNode.linker;\\n\\n    const strategy = linker.strategy;\\n    const isSingle = linker.isSingle();\\n    const isMeta = linker.isMeta();\\n    const fieldStorage = linker.linkStorageField;\\n\\n    // cleaning the parent results from a child\\n    // this may be the wrong approach but it works for now\\n    if (isMeta && metaFilters) {\\n        const metaFiltersTest = sift(metaFilters);\\n        _.each(parent.results, parentResult => {\\n            cleanObjectForMetaFilters(\\n                parentResult,\\n                fieldStorage,\\n                metaFiltersTest\\n            );\\n        });\\n    }\\n\\n    const resultsByKeyId = _.groupBy(childCollectionNode.results, '_id');\\n\\n    if (strategy === 'one') {\\n        parent.results.forEach(parentResult => {\\n            const value = dot.pick(fieldStorage, parentResult);\\n            if (!value) {\\n                return;\\n            }\\n\\n            parentResult[childCollectionNode.linkName] = filterAssembledData(\\n                resultsByKeyId[value],\\n                { limit, skip }\\n            );\\n        });\\n    }\\n\\n    if (strategy === 'many') {\\n        parent.results.forEach(parentResult => {\\n            // support dotted fields\\n            const [root, ...nested] = fieldStorage.split('.');\\n            const value = dot.pick(root, parentResult);\\n            if (!value) {\\n                return;\\n            }\\n\\n\\n            const data = [];\\n            value.forEach(v => {\\n                const _id = nested.length > 0 ? dot.pick(nested.join('.'), v) : v;\\n                data.push(_.first(resultsByKeyId[_id]));\\n            });\\n\\n            parentResult[childCollectionNode.linkName] = filterAssembledData(\\n                data,\\n                { limit, skip }\\n            );\\n        });\\n    }\\n\\n    if (strategy === 'one-meta') {\\n        parent.results.forEach(parentResult => {\\n            if (!parentResult[fieldStorage]) {\\n                return;\\n            }\\n\\n            const _id = parentResult[fieldStorage]._id;\\n            parentResult[childCollectionNode.linkName] = filterAssembledData(\\n                resultsByKeyId[_id],\\n                { limit, skip }\\n            );\\n        });\\n    }\\n\\n    if (strategy === 'many-meta') {\\n        parent.results.forEach(parentResult => {\\n            const _ids = _.pluck(parentResult[fieldStorage], '_id');\\n            let data = [];\\n            _ids.forEach(_id => {\\n                data.push(_.first(resultsByKeyId[_id]));\\n            });\\n\\n            parentResult[childCollectionNode.linkName] = filterAssembledData(\\n                data,\\n                { limit, skip }\\n            );\\n        });\\n    }\\n};\\n\\nfunction filterAssembledData(data, { limit, skip }) {\\n    if (limit && Array.isArray(data)) {\\n        return data.slice(skip, limit);\\n    }\\n\\n    return data;\\n}\\n\",\"import { _ } from 'meteor/underscore';\\nimport {SAFE_DOTTED_FIELD_REPLACEMENT} from './constants';\\n\\nexport default function (childCollectionNode, filters, options, userId) {\\n    let containsDottedFields = false;\\n    const linker = childCollectionNode.linker;\\n    const linkStorageField = linker.linkStorageField;\\n    const collection = childCollectionNode.collection;\\n\\n    let pipeline = [];\\n\\n    if (collection.firewall) {\\n        collection.firewall(filters, options, userId);\\n    }\\n\\n    pipeline.push({$match: filters});\\n\\n    if (options.sort && _.keys(options.sort).length > 0) {\\n        pipeline.push({$sort: options.sort})\\n    }\\n\\n    let _id = linkStorageField;\\n    if (linker.isMeta()) {\\n        _id += '._id';\\n    }\\n\\n    let dataPush = {\\n        _id: '$_id'\\n    };\\n\\n    _.each(options.fields, (value, field) => {\\n        if (field.indexOf('.') >= 0) {\\n            containsDottedFields = true;\\n        }\\n        const safeField = field.replace(/\\\\./g, SAFE_DOTTED_FIELD_REPLACEMENT);\\n        dataPush[safeField] = '$' + field\\n    });\\n\\n    if (linker.isMeta()) {\\n        dataPush[linkStorageField] = '$' + linkStorageField;\\n    }\\n\\n    pipeline.push({\\n        $group: {\\n            _id: \\\"$\\\" + _id,\\n            data: {\\n                $push: dataPush\\n            }\\n        }\\n    });\\n\\n    if (options.limit || options.skip) {\\n        let $slice = [\\\"$data\\\"];\\n        if (options.skip) $slice.push(options.skip);\\n        if (options.limit) $slice.push(options.limit);\\n\\n        pipeline.push({\\n            $project: {\\n                _id: 1,\\n                data: {$slice}\\n            }\\n        })\\n    }\\n\\n    return {pipeline, containsDottedFields};\\n}\",\"export const SAFE_DOTTED_FIELD_REPLACEMENT = '___';\",\"import applyProps from '../lib/applyProps.js';\\nimport prepareForDelivery from '../lib/prepareForDelivery.js';\\nimport storeHypernovaResults from './storeHypernovaResults.js';\\n\\nfunction hypernova(collectionNode, userId) {\\n    _.each(collectionNode.collectionNodes, childCollectionNode => {\\n        let {filters, options} = applyProps(childCollectionNode);\\n\\n        storeHypernovaResults(childCollectionNode, userId);\\n        hypernova(childCollectionNode, userId);\\n    });\\n}\\n\\nexport default function hypernovaInit(collectionNode, userId, config = {}) {\\n    const bypassFirewalls = config.bypassFirewalls || false;\\n    const params = config.params || {};\\n\\n    let {filters, options} = applyProps(collectionNode);\\n\\n    const collection = collectionNode.collection;\\n\\n    collectionNode.results = collection.find(filters, options, userId).fetch();\\n\\n    const userIdToPass = (config.bypassFirewalls) ? undefined : userId;\\n    hypernova(collectionNode, userIdToPass);\\n\\n    prepareForDelivery(collectionNode, params);\\n\\n    return collectionNode.results;\\n}\\n\",\"import applyProps from '../lib/applyProps.js';\\nimport AggregateFilters from './aggregateSearchFilters.js';\\nimport assemble from './assembler.js';\\nimport assembleAggregateResults from './assembleAggregateResults.js';\\nimport buildAggregatePipeline from './buildAggregatePipeline.js';\\nimport snapBackDottedFields from './lib/snapBackDottedFields';\\n\\nexport default function storeHypernovaResults(childCollectionNode, userId) {\\n    if (childCollectionNode.parent.results.length === 0) {\\n        return (childCollectionNode.results = []);\\n    }\\n\\n    let { filters, options } = applyProps(childCollectionNode);\\n\\n    const metaFilters = filters.$meta;\\n    const aggregateFilters = new AggregateFilters(\\n        childCollectionNode,\\n        metaFilters\\n    );\\n    delete filters.$meta;\\n\\n    const linker = childCollectionNode.linker;\\n    const isVirtual = linker.isVirtual();\\n    const collection = childCollectionNode.collection;\\n\\n\\n    _.extend(filters, aggregateFilters.create());\\n\\n    // if it's not virtual then we retrieve them and assemble them here.\\n    if (!isVirtual) {\\n        const filteredOptions = _.omit(options, 'limit');\\n\\n        childCollectionNode.results = collection\\n            .find(filters, filteredOptions, userId)\\n            .fetch();\\n\\n        assemble(childCollectionNode, {\\n            ...options,\\n            metaFilters,\\n        });\\n    } else {\\n        // virtuals arrive here\\n        let { pipeline, containsDottedFields } = buildAggregatePipeline(\\n            childCollectionNode,\\n            filters,\\n            options,\\n            userId\\n        );\\n\\n        let aggregateResults = collection.aggregate(pipeline);\\n\\n        /**\\n         * If in aggregation it contains '.', we replace it with a custom string '___'\\n         * And then after aggregation is complete we need to snap-it back to how it was.\\n         */\\n        if (containsDottedFields) {\\n            snapBackDottedFields(aggregateResults);\\n        }\\n\\n        assembleAggregateResults(\\n            childCollectionNode,\\n            aggregateResults,\\n            metaFilters\\n        );\\n    }\\n}\\n\",\"export default function (object, field, metaFiltersTest) {\\n    if (object[field]) {\\n        if (_.isArray(object[field])) {\\n            object[field] = object[field].filter(metaFiltersTest)\\n        } else {\\n            if (!metaFiltersTest(object[field])) {\\n                object[field] = null;\\n            }\\n        }\\n    }\\n}\",\"import {SAFE_DOTTED_FIELD_REPLACEMENT} from '../constants';\\nimport dot from 'dot-object';\\n\\nexport default function (aggregationResult) {\\n    aggregationResult.forEach(result => {\\n        result.data = result.data.map(document => {\\n            _.each(document, (value, key) => {\\n                if (key.indexOf(SAFE_DOTTED_FIELD_REPLACEMENT) >= 0) {\\n                    document[key.replace(new RegExp(SAFE_DOTTED_FIELD_REPLACEMENT, 'g'), '.')] = value;\\n                    delete document[key];\\n                }\\n            });\\n\\n            return dot.object(document);\\n        })\\n    })\\n}\",\"const restrictOptions = [\\n    'disableOplog',\\n    'pollingIntervalMs',\\n    'pollingThrottleMs'\\n];\\n\\nexport default function applyProps(node) {\\n    let filters = _.extend({}, node.props.$filters);\\n    let options = _.extend({}, node.props.$options);\\n\\n    options = _.omit(options, ...restrictOptions);\\n    options.fields = options.fields || {};\\n\\n    node.applyFields(filters, options);\\n    \\n    return {filters, options};\\n}\\n\",\"export default (method, myParameters) => {\\n    return new Promise((resolve, reject) => {\\n        Meteor.call(method, myParameters, (err, res) => {\\n            if (err) reject(err.reason || 'Something went wrong.');\\n\\n            resolve(res);\\n        });\\n    });\\n};\",\"import CollectionNode from '../nodes/collectionNode.js';\\nimport FieldNode from '../nodes/fieldNode.js';\\nimport ReducerNode from '../nodes/reducerNode.js';\\nimport dotize from './dotize.js';\\nimport createReducers from '../reducers/lib/createReducers';\\n\\nexport const specialFields = [\\n    '$filters',\\n    '$options',\\n    '$postFilters',\\n    '$postOptions',\\n    '$postFilter'\\n];\\n\\n/**\\n * Creates node objects from the body. The root is always a collection node.\\n *\\n * @param root\\n */\\nexport function createNodes(root) {\\n    // this is a fix for phantomjs tests (don't really understand it.)\\n    if (!_.isObject(root.body)) {\\n        return;\\n    }\\n\\n    _.each(root.body, (body, fieldName) => {\\n        if (!body) {\\n            return;\\n        }\\n\\n        // if it's a prop\\n        if (_.contains(specialFields, fieldName)) {\\n            root.addProp(fieldName, body);\\n\\n            return;\\n        }\\n\\n        // workaround, see https://github.com/cult-of-coders/grapher/issues/134\\n        // TODO: find another way to do this\\n        if (root.collection.default) {\\n          root.collection = root.collection.default;\\n        }\\n\\n        // checking if it is a link.\\n        let linker = root.collection.getLinker(fieldName);\\n\\n        if (linker) {\\n            // check if it is a cached link\\n            // if yes, then we need to explicitly define this at collection level\\n            // so when we transform the data for delivery, we move it to the link name\\n            if (linker.isDenormalized()) {\\n                if (linker.isSubBodyDenormalized(body)) {\\n                    handleDenormalized(root, linker, body, fieldName);\\n                    return;\\n                }\\n            }\\n\\n            let subroot = new CollectionNode(linker.getLinkedCollection(), body, fieldName);\\n            // must be before adding linker because _shouldCleanStorage method\\n            createNodes(subroot);\\n            root.add(subroot, linker);\\n\\n            return;\\n        }\\n\\n        // checking if it's a reducer\\n        const reducer = root.collection.getReducer(fieldName);\\n\\n        if (reducer) {\\n            let reducerNode = new ReducerNode(fieldName, reducer);\\n            root.add(reducerNode);\\n        }\\n\\n        // it's most likely a field then\\n        addFieldNode(body, fieldName, root);\\n    });\\n\\n    createReducers(root);\\n\\n    if (root.fieldNodes.length === 0) {\\n        root.add(new FieldNode('_id', 1));\\n    }\\n}\\n\\nfunction isProjectionOperatorExpression(body) {\\n    if (_.isObject(body)) {\\n        const keys = _.keys(body);\\n        return keys.length === 1 && _.contains(['$elemMatch', '$meta', '$slice'], keys[0]);\\n    }\\n    return false;\\n}\\n\\n/**\\n * @param body\\n * @param fieldName\\n * @param root\\n */\\nexport function addFieldNode(body, fieldName, root) {\\n    // it's not a link and not a special variable => we assume it's a field\\n    if (_.isObject(body)) {\\n        if (!isProjectionOperatorExpression(body)) {\\n            let dotted = dotize.convert({[fieldName]: body});\\n            _.each(dotted, (value, key) => {\\n                root.add(new FieldNode(key, value));\\n            });\\n        }\\n        else {\\n            root.add(new FieldNode(fieldName, body, true));\\n        }\\n    } else {\\n        let fieldNode = new FieldNode(fieldName, body);\\n        root.add(fieldNode);\\n    }\\n}\\n\\n/**\\n * Returns namespace for node when using query path scoping.\\n *\\n * @param node\\n * @returns {String}\\n */\\nexport function getNodeNamespace(node) {\\n    const parts = [];\\n    let n = node;\\n    while (n) {\\n        const name = n.linker ? n.linker.linkName : n.collection._name;\\n        parts.push(name);\\n        // console.log('linker', node.linker ? node.linker.linkName : node.collection._name);\\n        n = n.parent;\\n    }\\n    return parts.reverse().join('_');\\n}\\n\\n/**\\n * @param collection\\n * @param body\\n * @returns {CollectionNode}\\n */\\nexport default function (collection, body) {\\n    let root = new CollectionNode(collection, body);\\n    createNodes(root);\\n\\n    return root;\\n};\\n\\n/**\\n * Ads denormalization config properly, including _id\\n *\\n * @param root\\n * @param linker\\n * @param body\\n * @param fieldName\\n */\\nfunction handleDenormalized(root, linker, body, fieldName) {\\n    Object.assign(body, {_id: 1});\\n\\n    const cacheField = linker.linkConfig.denormalize.field;\\n    root.snapCache(cacheField, fieldName);\\n\\n    // if it's one and direct also include the link storage\\n    if (!linker.isMany() && !linker.isVirtual()) {\\n        addFieldNode(1, linker.linkStorageField, root);\\n    }\\n\\n    addFieldNode(body, cacheField, root);\\n}\",\"// https://github.com/vardars/dotize\\nexport default dotize = {};\\n\\ndotize.convert = function(obj, prefix) {\\n    if ((!obj || typeof obj != \\\"object\\\") && !Array.isArray(obj)) {\\n        if (prefix) {\\n            var newObj = {};\\n            newObj[prefix] = obj;\\n            return newObj;\\n        } else {\\n            return obj;\\n        }\\n    }\\n\\n    var newObj = {};\\n\\n    function recurse(o, p, isArrayItem) {\\n        for (var f in o) {\\n            if (o[f] && typeof o[f] === \\\"object\\\") {\\n                if (Array.isArray(o[f])) {\\n                    if (isEmptyArray(o[f])) {\\n                        newObj[getFieldName(f, p, true)] = o[f]; // empty array\\n                    } else {\\n                        newObj = recurse(o[f], getFieldName(f, p, false, true), true); // array\\n                    }\\n                } else {\\n                    if (isArrayItem) {\\n                        if (isEmptyObj(o[f])) {\\n                            newObj[getFieldName(f, p, true)] = o[f]; // empty object\\n                        } else {\\n                            newObj = recurse(o[f], getFieldName(f, p, true)); // array item object\\n                        }\\n                    } else {\\n                        if (isEmptyObj(o[f])) {\\n                            newObj[getFieldName(f, p)] = o[f]; // empty object\\n                        } else {\\n                            newObj = recurse(o[f], getFieldName(f, p)); // object\\n                        }\\n                    }\\n                }\\n            } else {\\n                if (isArrayItem || isNumber(f)) {\\n                    newObj[getFieldName(f, p, true)] = o[f]; // array item primitive\\n                } else {\\n                    newObj[getFieldName(f, p)] = o[f]; // primitive\\n                }\\n            }\\n        }\\n\\n        if (isEmptyObj(newObj))\\n            return obj;\\n\\n        return newObj;\\n    }\\n\\n    function isNumber(f) {\\n        return !isNaN(parseInt(f));\\n    }\\n\\n    function isEmptyObj(obj) {\\n        for (var prop in obj) {\\n            if (Object.hasOwnProperty.call(obj, prop))\\n                return false;\\n        }\\n\\n        return true;\\n    }\\n\\n    function isEmptyArray(o) {\\n        if (Array.isArray(o) && o.length == 0)\\n            return true;\\n        return false;\\n    }\\n\\n    function getFieldName(field, prefix, isArrayItem, isArray) {\\n        if (isArray)\\n            return (prefix ? prefix : \\\"\\\") + (isNumber(field) ? \\\"[\\\" + field + \\\"]\\\" : \\\".\\\" + field);\\n        else if (isArrayItem)\\n            return (prefix ? prefix : \\\"\\\") + \\\"[\\\" + field + \\\"]\\\";\\n        else\\n            return (prefix ? prefix + \\\".\\\" : \\\"\\\") + field;\\n    }\\n\\n    return recurse(obj, prefix, Array.isArray(obj));\\n};\",\"/**\\n * Helper method which expands profile.phone.verified into\\n * ['profile', 'profile.phone', 'profile.phone.verified']\\n * @param fieldName\\n */\\nexport function expandField(fieldName) {\\n    return fieldName.split('.').reduce((acc, key) => {\\n        if (acc.length === 0) {\\n            return [key];\\n        }\\n        const [last] = acc;\\n        return [...acc, `${last}.${key}`];\\n    }, [])\\n}\\n\\nexport function isFieldInProjection(projection, fieldName, checkNested) {\\n    // for checkNested flag expand the field\\n    const fields = checkNested ? expandField(fieldName) : [fieldName];\\n    return fields.some(field => projection[field]);\\n}\\n\",\"import {_} from 'meteor/underscore';\\nimport {specialFields} from './createGraph';\\n\\nconst EXTENDED_SPECIAL_FIELDS = [...specialFields, '$filter', '$paginate'];\\n\\nfunction isClientValueValid(value) {\\n    if (_.isObject(value) && !_.isArray(value)) {\\n        return _.values(value).every(nestedValue => isClientValueValid(nestedValue));\\n    }\\n    else if (value === 1) {\\n        return true;\\n    }\\n    return false;\\n}\\n\\n/**\\n * \\n * Recursive function which intersects the fields of the body objects.\\n * \\n * @param {object} allowed allowed body object - intersection can only be a subset of it\\n * @param {object} client client body - can shrink main body, but not expand\\n */\\nfunction intersectFields(allowed, client) {\\n    const intersection = {};\\n    _.pairs(client).forEach(([field, clientValue]) => {\\n        if (_.contains(EXTENDED_SPECIAL_FIELDS, field)) {\\n            return;\\n        }\\n\\n        const serverValue = allowed[field];\\n        if (serverValue === 1) { // server allows everything\\n            if (isClientValueValid(clientValue)) {\\n                intersection[field] = clientValue;\\n            }\\n        }\\n        else if (_.isObject(serverValue)) {\\n            if (_.isObject(clientValue) && !_.isArray(clientValue)) {\\n                intersection[field] = intersectFields(serverValue, clientValue);\\n            }\\n            else if (clientValue === 1) {\\n                // if client wants everything, serverValue is more restrictive here\\n                intersection[field] = serverValue;\\n            }\\n        }\\n    });\\n    return intersection;\\n}\\n\\n/**\\n * Given a named query that has a specific body, you can query its subbody\\n * This performs an intersection of the bodies allowed in each\\n *\\n * @param allowedBody\\n * @param clientBody\\n */\\nexport default function (allowedBody, clientBody) {\\n    const build = intersectFields(allowedBody, clientBody);\\n    // Add back special fields to the new body\\n    Object.assign(build, _.pick(allowedBody, ...EXTENDED_SPECIAL_FIELDS));\\n    return build;\\n}\\n\",\"// 1. Clone children with meta relationships\\n// 2. Apply $metadata to children\\n// 3. Removes link storage (if not specified)\\n// 4. Stores oneResult links as a single object instead of array\\nimport applyReducers from '../reducers/lib/applyReducers';\\nimport cleanReducerLeftovers from '../reducers/lib/cleanReducerLeftovers';\\nimport sift from 'sift';\\nimport dot from 'dot-object';\\nimport {Minimongo} from 'meteor/minimongo';\\n\\nexport default (node, params) => {\\n    snapBackCaches(node);\\n    storeOneResults(node, node.results);\\n\\n    applyReducers(node, params);\\n\\n    _.each(node.collectionNodes, collectionNode => {\\n        cloneMetaChildren(collectionNode, node.results)\\n    });\\n\\n    _.each(node.collectionNodes, collectionNode => {\\n        assembleMetadata(collectionNode, node.results)\\n    });\\n\\n    cleanReducerLeftovers(node, node.results);\\n\\n    removeLinkStorages(node, node.results);\\n\\n    applyPostFilters(node);\\n    applyPostOptions(node);\\n    applyPostFilter(node, params);\\n}\\n\\nexport function applyPostFilters(node) {\\n    const postFilters = node.props.$postFilters;\\n    if (postFilters) {\\n        node.results = sift(postFilters, node.results);\\n    }\\n}\\n\\nexport function applyPostOptions(node) {\\n    const options = node.props.$postOptions;\\n    if (options) {\\n        if (options.sort) {\\n            const sorter = new Minimongo.Sorter(options.sort);\\n            node.results.sort(sorter.getComparator());\\n        }\\n        if (options.limit || options.skip) {\\n            const start = options.skip || 0;\\n            const end = options.limit ? options.limit + start : node.results.length;\\n            node.results = node.results.slice(start, end);\\n        }\\n    }\\n}\\n\\n\\n/**\\n * Optionally applies a post filtering option\\n */\\nfunction applyPostFilter(node, params) {\\n    if (node.props.$postFilter) {\\n        const filter = node.props.$postFilter;\\n\\n        if (_.isArray(filter)) {\\n            filter.forEach(f => {\\n                node.results = f(node.results, params);\\n            })\\n        } else {\\n            node.results = filter(node.results, params);\\n        }\\n    }\\n}\\n\\n/**\\n *\\n * Helper function which transforms results into the array.\\n * Results are an object for 'one' links.\\n *\\n * @param results\\n * @return array\\n */\\nexport function getResultsArray(results) {\\n    if (_.isArray(results)) {\\n        return results;\\n    }\\n    else if (_.isUndefined(results)) {\\n        return [];\\n    }\\n    return [results];\\n}\\n\\nexport function removeLinkStorages(node, sameLevelResults) {\\n    if (!sameLevelResults) {\\n        return;\\n    }\\n\\n    sameLevelResults = getResultsArray(sameLevelResults);\\n\\n    _.each(node.collectionNodes, collectionNode => {\\n        const removeStorageField = collectionNode.shouldCleanStorage;\\n        _.each(sameLevelResults, result => {\\n            if (removeStorageField) {\\n                const isSingle = collectionNode.linker.isSingle();\\n                const [root, ...nested] = collectionNode.linkStorageField.split('.');\\n\\n                const removeFromResult = (result, removeEmptyRoot = false) => {\\n                    if (isSingle) {\\n                        dot.pick(collectionNode.linkStorageField, result, true);\\n                        if (removeEmptyRoot && nested.length > 0 && _.isEmpty(result[root])) {\\n                            delete result[root];\\n                        }\\n                    }\\n                    else {\\n                        if (nested.length > 0) {\\n                            const arr = result[root] || [];\\n                            if (_.isArray(arr)) {\\n                                arr.forEach(obj => dot.pick(nested.join('.'), obj, true));\\n                                if (removeEmptyRoot && nested.length > 0 && arr.every(obj => _.isEmpty(obj))) {\\n                                    delete result[root];\\n                                }\\n                            }\\n                        }\\n                        else {\\n                            delete result[collectionNode.linkStorageField];\\n                        }\\n                    }\\n                };\\n\\n                if (collectionNode.isVirtual) {\\n                    const childResults = getResultsArray(result[collectionNode.linkName]);\\n                    _.each(childResults, childResult => {\\n                        removeFromResult(childResult);\\n                    });\\n                } else {\\n                    removeFromResult(result);\\n                }\\n            }\\n\\n            removeLinkStorages(collectionNode, result[collectionNode.linkName]);\\n        })\\n    })\\n}\\n\\nexport function storeOneResults(node, sameLevelResults) {\\n    if (!sameLevelResults) {\\n        return;\\n    }\\n\\n    node.collectionNodes.forEach(collectionNode => {\\n        _.each(sameLevelResults, result => {\\n            // The reason we are doing this is that if the requested link does not exist\\n            // It will fail when we try to get undefined[something] below\\n            if (result === undefined) {\\n                return;\\n            }\\n\\n            storeOneResults(collectionNode, result[collectionNode.linkName]);\\n        });\\n\\n        if (collectionNode.isOneResult) {\\n            _.each(sameLevelResults, result => {\\n                if (result[collectionNode.linkName] && _.isArray(result[collectionNode.linkName])) {\\n                    result[collectionNode.linkName] = result[collectionNode.linkName]\\n                        ? _.first(result[collectionNode.linkName])\\n                        : undefined;\\n                }\\n            })\\n        }\\n    })\\n}\\n\\nfunction cloneMetaChildren(node, parentResults) {\\n    if (!parentResults) {\\n        return;\\n    }\\n\\n    const linkName = node.linkName;\\n    const isMeta = node.isMeta;\\n\\n    // parentResults might be an object (for type==one links)\\n    parentResults = getResultsArray(parentResults);\\n\\n    parentResults.forEach(parentResult => {\\n        if (isMeta && parentResult[linkName]) {\\n            if (node.isOneResult) {\\n                parentResult[linkName] = Object.assign({}, parentResult[linkName]);\\n            }\\n            else {\\n                parentResult[linkName] = parentResult[linkName].map(object => {\\n                    return Object.assign({}, object);\\n                });\\n            }\\n        }\\n\\n        node.collectionNodes.forEach(collectionNode => {\\n            cloneMetaChildren(collectionNode, parentResult[linkName]);\\n        });\\n    });\\n}\\n\\nexport function assembleMetadata(node, parentResults) {\\n    parentResults = getResultsArray(parentResults);\\n\\n    // assembling metadata is depth first\\n    node.collectionNodes.forEach(collectionNode => {\\n        _.each(parentResults, result => {\\n            assembleMetadata(collectionNode, result[node.linkName])\\n        });\\n    });\\n\\n    if (node.isMeta) {\\n        if (node.isVirtual) {\\n            _.each(parentResults, parentResult => {\\n                const childResult = parentResult[node.linkName];\\n\\n                if (node.isOneResult) {\\n                    if (_.isObject(childResult)) {\\n                        const storage = childResult[node.linkStorageField];\\n                        storeMetadata(childResult, parentResult, storage, true);\\n                    }\\n                } else {\\n                    _.each(childResult, object => {\\n                        const storage = object[node.linkStorageField];\\n                        storeMetadata(object, parentResult, storage, true);\\n                    });\\n                }\\n            })\\n        } else {\\n            _.each(parentResults, parentResult => {\\n                const childResult = parentResult[node.linkName];\\n                const storage = parentResult[node.linkStorageField];\\n\\n                if (node.isOneResult) {\\n                    if (childResult) {\\n                        storeMetadata(childResult, parentResult, storage, false);\\n                    }\\n                } else {\\n                    _.each(childResult, object => {\\n                        storeMetadata(object, parentResult, storage, false);\\n                    });\\n                }\\n            })\\n        }\\n    }\\n}\\n\\nfunction storeMetadata(element, parentElement, storage, isVirtual) {\\n    if (isVirtual) {\\n        let $metadata;\\n        if (_.isArray(storage)) {\\n            $metadata = _.find(storage, storageItem => storageItem._id == parentElement._id);\\n        } else {\\n            $metadata = storage;\\n        }\\n\\n        element.$metadata = _.omit($metadata, '_id')\\n    } else {\\n        let $metadata;\\n        if (_.isArray(storage)) {\\n            $metadata = _.find(storage, storageItem => storageItem._id == element._id);\\n        } else {\\n            $metadata = storage;\\n        }\\n\\n        element.$metadata = _.omit($metadata, '_id');\\n    }\\n}\\n\\nfunction snapBackCaches(node) {\\n    node.collectionNodes.forEach(collectionNode => {\\n        snapBackCaches(collectionNode);\\n    });\\n\\n    if (!_.isEmpty(node.snapCaches)) {\\n        // process stuff\\n        _.each(node.snapCaches, (linkName, cacheField) => {\\n            const isSingle = _.contains(node.snapCachesSingles, cacheField);\\n            const linker = node.collection.getLinker(linkName);\\n            // we do this because for one direct and one meta direct, id is not stored\\n            const shoudStoreLinkStorage = !linker.isMany() && !linker.isVirtual();\\n\\n            node.results.forEach(result => {\\n                if (result[cacheField]) {\\n                    if (shoudStoreLinkStorage) {\\n                        Object.assign(result[cacheField], {\\n                            _id: linker.isMeta()\\n                                ? result[linker.linkStorageField]._id\\n                                : result[linker.linkStorageField]\\n                        });\\n                    }\\n\\n                    if (isSingle && _.isArray(result[cacheField])) {\\n                        result[linkName] = _.first(result[cacheField]);\\n                    } else {\\n                        result[linkName] = result[cacheField];\\n                    }\\n\\n                    delete result[cacheField];\\n                }\\n            })\\n        })\\n    }\\n}\\n\",\"import {check, Match} from 'meteor/check';\\nimport deepClone from 'lodash.clonedeep';\\n\\nfunction defaultFilterFunction({\\n    filters,\\n    options,\\n    params\\n}) {\\n    if (params.filters) {\\n        Object.assign(filters, params.filters);\\n    }\\n    if (params.options) {\\n        Object.assign(options, params.options);\\n    }\\n}\\n\\nfunction applyFilterRecursive(data, params = {}, isRoot = false) {\\n    if (isRoot && !_.isFunction(data.$filter)) {\\n        data.$filter = defaultFilterFunction;\\n    }\\n\\n    if (data.$filter) {\\n        check(data.$filter, Match.OneOf(Function, [Function]));\\n\\n        data.$filters = data.$filters || {};\\n        data.$options = data.$options || {};\\n\\n        if (_.isArray(data.$filter)) {\\n            data.$filter.forEach(filter => {\\n                filter.call(null, {\\n                    filters: data.$filters,\\n                    options: data.$options,\\n                    params: params\\n                })\\n            });\\n        } else {\\n            data.$filter({\\n                filters: data.$filters,\\n                options: data.$options,\\n                params: params\\n            });\\n        }\\n\\n        data.$filter = null;\\n        delete(data.$filter);\\n    }\\n\\n    _.each(data, (value, key) => {\\n        if (_.isObject(value)) {\\n            return applyFilterRecursive(value, params);\\n        }\\n    })\\n}\\n\\nfunction applyPagination(body, _params) {\\n    if (body['$paginate'] && _params) {\\n        if (!body.$options) {\\n            body.$options = {};\\n        }\\n\\n        if (_params.limit) {\\n            _.extend(body.$options, {\\n                limit: _params.limit\\n            })\\n        }\\n\\n        if (_params.skip) {\\n            _.extend(body.$options, {\\n                skip: _params.skip\\n            })\\n        }\\n\\n        delete body['$paginate'];\\n    }\\n}\\n\\nexport default (_body, _params = {}) => {\\n    let body = deepClone(_body);\\n    let params = deepClone(_params);\\n\\n    applyPagination(body, params);\\n    applyFilterRecursive(body, params, true);\\n\\n    return body;\\n}\\n\",\"import applyProps from './applyProps.js';\\nimport { assembleMetadata, removeLinkStorages, storeOneResults } from './prepareForDelivery';\\nimport prepareForDelivery from './prepareForDelivery';\\nimport {getNodeNamespace} from './createGraph';\\nimport {isFieldInProjection} from '../lib/fieldInProjection';\\n\\n/**\\n * This is always run client side to build the data graph out of client-side collections.\\n *\\n * @param node\\n * @param parentObject\\n * @param fetchOptions\\n * @returns {*}\\n */\\nfunction fetch(node, parentObject, fetchOptions = {}) {\\n    let {filters, options} = applyProps(node);\\n    // add subscription filter\\n    if (fetchOptions.scoped && fetchOptions.subscriptionHandle) {\\n        _.extend(filters, fetchOptions.subscriptionHandle.scopeQuery());\\n    }\\n    // add query path filter\\n    if (fetchOptions.scoped) {\\n        _.extend(filters, {[`_query_path_${getNodeNamespace(node)}`]: {$exists: true}});\\n    }\\n\\n    let results = [];\\n\\n    if (parentObject) {\\n        let accessor = node.linker.createLink(parentObject, node.collection);\\n\\n        if (node.isVirtual) {\\n            options.fields = options.fields || {};\\n            if (!isFieldInProjection(options.fields, node.linkStorageField, true)) {\\n                _.extend(options.fields, {\\n                    [node.linkStorageField]: 1\\n                });\\n            }\\n        }\\n\\n        results = accessor.find(filters, options).fetch();\\n    } else {\\n        results = node.collection.find(filters, options).fetch();\\n    }\\n\\n    _.each(node.collectionNodes, collectionNode => {\\n        _.each(results, result => {\\n            const collectionNodeResults = fetch(collectionNode, result);\\n            result[collectionNode.linkName] = collectionNodeResults;\\n            //delete result[node.linker.linkStorageField];\\n\\n            /**\\n             * Push into the results, because snapBackCaches() in prepareForDelivery does not work otherwise.\\n             * This is non-optimal, can we be sure that every item in results contains _id and add only if not in\\n             * the results?\\n             *\\n             * Other possible ways:\\n             * - do something like assemble() in storeHypernovaResults\\n             * - pass node.results to accessor above and find with sift\\n             */\\n\\n            collectionNode.results.push(...collectionNodeResults);\\n\\n            // this was not working because all references must be replaced in snapBackCaches, not only the ones that are \\n            // found first\\n            // const currentIds = _.pluck(collectionNode.results, '_id');\\n            // collectionNode.results.push(...collectionNodeResults.filter(res => !_.contains(currentIds, res._id)));\\n        })\\n    });\\n\\n    return results;\\n}\\n\\nexport default (node, params, fetchOptions) => {\\n    node.results = fetch(node, null, fetchOptions);\\n\\n    prepareForDelivery(node, params);\\n\\n    return node.results;\\n}\\n\",\"import FieldNode from './fieldNode.js';\\nimport ReducerNode from './reducerNode.js';\\nimport deepClone from 'lodash.clonedeep';\\nimport {check, Match} from 'meteor/check';\\nimport {expandField, isFieldInProjection} from '../lib/fieldInProjection';\\n\\nexport default class CollectionNode {\\n    constructor(collection, body = {}, linkName = null) {\\n        if (collection && !_.isObject(body)) {\\n            throw new Meteor.Error('invalid-body', `The field \\\"${linkName}\\\" is a collection link, and should have its body defined as an object.`);\\n        }\\n\\n        this.body = deepClone(body);\\n        this.linkName = linkName;\\n        this.collection = collection;\\n\\n        this.nodes = [];\\n        this.props = {};\\n        this.parent = null;\\n        this.linker = null;\\n        this.linkStorageField = null;\\n        this.scheduledForDeletion = false;\\n        this.reducers = [];\\n        this.results = [];\\n        this.snapCaches = {}; // {cacheField: linkName}\\n        this.snapCachesSingles = []; // [cacheField1, cacheField2]\\n    }\\n\\n    get collectionNodes() {\\n        return _.filter(this.nodes, n => n instanceof CollectionNode)\\n    }\\n\\n    get fieldNodes() {\\n        return _.filter(this.nodes, n => n instanceof FieldNode);\\n    }\\n\\n    get reducerNodes() {\\n        return _.filter(this.nodes, n => n instanceof ReducerNode);\\n    }\\n\\n    /**\\n     * Adds children to itself\\n     *\\n     * @param node\\n     * @param linker\\n     */\\n    add(node, linker) {\\n        node.parent = this;\\n\\n        if (node instanceof FieldNode) {\\n            runFieldSanityChecks(node.name);\\n        }\\n        \\n        if (linker) {\\n            node.linker = linker;\\n            node.linkStorageField = linker.linkStorageField;\\n            node.isMeta = linker.isMeta();\\n            node.isVirtual = linker.isVirtual();\\n            node.isOneResult = linker.isOneResult();\\n            node.shouldCleanStorage = this._shouldCleanStorage(node);\\n        }\\n\\n        this.nodes.push(node);\\n    }\\n\\n    /**\\n     * @param prop\\n     * @param value\\n     */\\n    addProp(prop, value) {\\n        if (prop === '$postFilter') {\\n            check(value, Match.OneOf(Function, [Function]))\\n        }\\n\\n        _.extend(this.props, {\\n            [prop]: value\\n        });\\n    }\\n\\n    /**\\n     * @param _node\\n     */\\n    remove(_node) {\\n        this.nodes = _.filter(this.nodes, node => _node !== node);\\n    }\\n\\n    /**\\n     * @param filters\\n     * @param options\\n     */\\n    applyFields(filters, options) {\\n        let hasAddedAnyField = false;\\n\\n        _.each(this.fieldNodes, n => {\\n            /**\\n             * $meta field should be added to the options.fields, but MongoDB does not exclude other fields.\\n             * Therefore, we do not count this as a field addition.\\n             * \\n             * See: https://docs.mongodb.com/manual/reference/operator/projection/meta/\\n             * The $meta expression specifies the inclusion of the field to the result set \\n             * and does not specify the exclusion of the other fields.\\n             */\\n            if (n.projectionOperator !== '$meta') {\\n                hasAddedAnyField = true;\\n            }\\n            n.applyFields(options.fields)\\n        });\\n\\n        // it will only get here if it has collectionNodes children\\n        _.each(this.collectionNodes, (collectionNode) => {\\n            let linker = collectionNode.linker;\\n\\n            if (linker && !linker.isVirtual()) {\\n                if (!isFieldInProjection(options.fields, linker.linkStorageField, true)) {\\n                    options.fields[linker.linkStorageField] = 1;\\n                    hasAddedAnyField = true;\\n                }\\n            }\\n        });\\n\\n        // if he selected filters, we should automatically add those fields\\n        _.each(filters, (value, field) => {\\n            // special handling for the $meta filter, conditional operators and text search\\n            if (!_.contains(['$or', '$nor', '$not', '$and', '$meta', '$text'], field)) {\\n                // if the field or the parent of the field already exists, don't add it\\n                if (!_.has(options.fields, field.split('.')[0])){\\n                    hasAddedAnyField = true;\\n                    options.fields[field] = 1;\\n                }\\n            }\\n        });\\n\\n        if (!hasAddedAnyField) {\\n            options.fields = {\\n                _id: 1,\\n                // fields might contain $meta expression, so it should be added here,\\n                ...options.fields,\\n            };\\n        }\\n    }\\n\\n    /**\\n     * @param fieldName\\n     * @returns {boolean}\\n     */\\n    hasField(fieldName, checkNested = false) {\\n        // for checkNested flag it expands profile.phone.verified into \\n        // ['profile', 'profile.phone', 'profile.phone.verified']\\n        // if any of these fields match it means that field exists\\n        const options = checkNested ? expandField(fieldName) : [fieldName];\\n        return !!_.find(this.fieldNodes, fieldNode => {\\n            return _.contains(options, fieldNode.name);\\n        });\\n    }\\n\\n    /**\\n     * @param fieldName\\n     * @returns {FieldNode}\\n     */\\n    getField(fieldName) {\\n        return _.find(this.fieldNodes, fieldNode => {\\n            return fieldNode.name == fieldName\\n        })\\n    }\\n\\n    /**\\n     * @param name\\n     * @returns {boolean}\\n     */\\n    hasCollectionNode(name) {\\n        return !!_.find(this.collectionNodes, node => {\\n            return node.linkName == name\\n        })\\n    }\\n\\n    /**\\n     * @param name\\n     * @returns {boolean}\\n     */\\n    hasReducerNode(name) {\\n        return !!_.find(this.reducerNodes, node => {\\n            return node.name == name\\n        })\\n    }\\n\\n    /**\\n     * @param name\\n     * @returns {ReducerNode}\\n     */\\n    getReducerNode(name) {\\n        return _.find(this.reducerNodes, node => {\\n            return node.name == name\\n        })\\n    }\\n\\n    /**\\n     * @param name\\n     * @returns {CollectionNode}\\n     */\\n    getCollectionNode(name) {\\n        return _.find(this.collectionNodes, node => {\\n            return node.linkName == name\\n        })\\n    }\\n\\n    /**\\n     * @returns {*}\\n     */\\n    getName() {\\n        return this.linkName\\n            ? this.linkName\\n            : (this.collection ? this.collection._name : 'N/A');\\n    }\\n\\n    /**\\n     * This is used for caching links\\n     *\\n     * @param cacheField\\n     * @param subLinkName\\n     */\\n    snapCache(cacheField, subLinkName) {\\n        this.snapCaches[cacheField] = subLinkName;\\n\\n        if (this.collection.getLinker(subLinkName).isOneResult()) {\\n            this.snapCachesSingles.push(cacheField);\\n        }\\n    }\\n\\n    /**\\n     * This method verifies whether to remove the linkStorageField form the results\\n     * unless you specify it in your query.\\n     *\\n     * @param node\\n     * @returns {boolean}\\n     * @private\\n     */\\n    _shouldCleanStorage(node) {\\n        if (node.linkStorageField === '_id') {\\n            return false;\\n        } else {\\n            if (node.isVirtual) {\\n                return !node.hasField(node.linkStorageField, true);\\n            } else {\\n                return !this.hasField(node.linkStorageField, true);\\n            }\\n        }\\n    }\\n}\\n\\n/**\\n * Make sure that the field is ok to be added\\n * @param {*} fieldName \\n */\\nexport function runFieldSanityChecks(fieldName) {\\n    // Run sanity checks on the field\\n    if (fieldName[0] === '$') {\\n        throw new Error(`You are not allowed to use fields that start with $ inside a reducer's body: ${fieldName}`);\\n    }\\n\\n    return true;\\n}\\n\",\"export default class FieldNode {\\n    constructor(name, body, isProjectionOperator = false) {\\n        this.name = name;\\n        this.projectionOperator = isProjectionOperator ? _.keys(body)[0] : null;\\n        this.body = !_.isObject(body) || isProjectionOperator ? body : 1;\\n        this.scheduledForDeletion = false;\\n    }\\n\\n    applyFields(fields) {\\n        fields[this.name] = this.body;\\n    }\\n}\\n\",\"export default class ReducerNode {\\n    constructor(name, {body, reduce}) {\\n        this.name = name;\\n        this.body = body;\\n        this.reduceFunction = reduce;\\n        this.dependencies = []; // This is a list of the reducer this reducer uses.\\n    }\\n\\n    /**\\n     * When computing we also pass the parameters\\n     * \\n     * @param {*} object \\n     * @param {*} args \\n     */\\n    compute(object, ...args) {\\n        object[this.name] = this.reduce.call(this, object, ...args);\\n    }\\n\\n    reduce(object, ...args) {\\n        return this.reduceFunction.call(this, object, ...args);\\n    }\\n}\",\"import { check } from 'meteor/check';\\nimport addFieldMap from './lib/addFieldMap';\\n\\nconst storage = '__reducers';\\nObject.assign(Mongo.Collection.prototype, {\\n    /**\\n     * @param data\\n     */\\n    addReducers(data) {\\n        if (!this[storage]) {\\n            this[storage] = {};\\n        }\\n\\n        _.each(data, (reducerConfig, reducerName) => {\\n            if (!this[reducerConfig]) {\\n                this[reducerConfig] = {};\\n            }\\n\\n            if (this.getLinker(reducerName)) {\\n                throw new Meteor.Error(\\n                    `You cannot add the reducer with name: ${reducerName} because it is already defined as a link in ${\\n                        this._name\\n                    } collection`\\n                );\\n            }\\n\\n            if (this[reducerConfig][reducerName]) {\\n                throw new Meteor.Error(\\n                    `You cannot add the reducer with name: ${reducerName} because it was already added to ${\\n                        this._name\\n                    } collection`\\n                );\\n            }\\n\\n            check(reducerConfig, {\\n                body: Object,\\n                reduce: Function,\\n            });\\n\\n            _.extend(this[storage], {\\n                [reducerName]: reducerConfig,\\n            });\\n        });\\n    },\\n\\n    /**\\n     * @param name\\n     * @returns {*}\\n     */\\n    getReducer(name) {\\n        if (this[storage]) {\\n            return this[storage][name];\\n        }\\n    },\\n\\n    /**\\n     * This creates reducers that makes sort of aliases for the database fields we use\\n     */\\n    addFieldMap,\\n});\\n\",\"/**\\n * @param {[niceField: string]: dbField} map\\n */\\nexport default function addFieldMap(map) {\\n    const collection = this;\\n    let reducers = {};\\n    for (let key in map) {\\n        const dbField = map[key];\\n        reducers[key] = {\\n            body: {\\n                [dbField]: 1,\\n            },\\n            reduce(obj) {\\n                return obj[dbField];\\n            },\\n        };\\n    }\\n\\n    collection.addReducers(reducers);\\n}\\n\",\"export default function applyReducers(root, params) {\\n    _.each(root.collectionNodes, node => {\\n        applyReducers(node, params);\\n    });\\n\\n    const processedReducers = [];\\n    let reducersQueue = [...root.reducerNodes];\\n\\n    // TODO: find out if there's an infinite reducer inter-deendency\\n\\n    while (reducersQueue.length) {\\n        const reducerNode = reducersQueue.shift();\\n\\n        // If this reducer depends on other reducers\\n        if (reducerNode.dependencies.length) {\\n            // If there is an unprocessed reducer, move it at the end of the queue\\n            const allDependenciesComputed = _.all(reducerNode.dependencies, dep => processedReducers.includes(dep));\\n            if (allDependenciesComputed) {\\n                root.results.forEach(result => {\\n                    reducerNode.compute(result, params);\\n                });\\n                processedReducers.push(reducerNode.name);\\n            } else {\\n                // Move it at the end of the queue\\n                reducersQueue.push(reducerNode);\\n            }\\n        } else {\\n            root.results.forEach(result => {\\n                reducerNode.compute(result, params);\\n            });\\n\\n            processedReducers.push(reducerNode.name);\\n        }\\n    }\\n}\\n\",\"import dot from 'dot-object';\\n\\n/**\\n * @param root\\n */\\nexport default function cleanReducerLeftovers(root, results) {\\n    _.each(root.collectionNodes, node => {\\n        if (node.scheduledForDeletion) {\\n            results.forEach(result => {\\n                delete result[node.linkName];\\n            })\\n        }\\n    });\\n\\n    _.each(root.collectionNodes, node => {\\n        let childResults;\\n        if (node.isOneResult) {\\n            childResults = results.map(result => result[node.linkName]).filter(element => !!element);\\n        } else {\\n            childResults = _.flatten(results.map(result => result[node.linkName]).filter(element => !!element));\\n        }\\n\\n        cleanReducerLeftovers(node, childResults);\\n    });\\n\\n    _.each(root.fieldNodes, node => {\\n        if (node.scheduledForDeletion) {\\n            cleanNestedFields(node.name.split('.'), results, root);\\n        }\\n    });\\n\\n    _.each(root.reducerNodes, node => {\\n        if (node.scheduledForDeletion) {\\n            results.forEach(result => {\\n                delete result[node.name];\\n            })\\n        }\\n    });\\n}\\n\\n\\n// if we store a field like: 'profile.firstName'\\n// then we need to delete profile: { firstName }\\n// if profile will have empty keys, we need to delete profile.\\n\\n/**\\n * Cleans what reducers needed to be computed and not used.\\n * @param parts\\n * @param results\\n */\\nfunction cleanNestedFields(parts, results, root) {\\n    const snapCacheField = root.snapCaches[parts[0]];\\n    const fieldName = snapCacheField ? snapCacheField : parts[0];\\n\\n    if (parts.length === 1) {\\n        results.forEach(result => {\\n            if (_.isObject(result) && fieldName !== '_id') {\\n                delete result[fieldName];\\n            }\\n        });\\n\\n        return;\\n    }\\n\\n    parts.shift();\\n    cleanNestedFields(\\n        parts, \\n        results\\n            .filter(result => !!result[fieldName])\\n            .map(result => result[fieldName]),\\n        root\\n    );\\n    \\n    results.forEach(result => {\\n        if (_.isObject(result[fieldName]) && _.keys(result[fieldName]).length === 0) {\\n            if (fieldName !== '_id') {\\n                delete result[fieldName];\\n            }\\n        }\\n    })\\n}\\n\",\"import dot from 'dot-object';\\nimport { createNodes } from '../../lib/createGraph';\\nimport CollectionNode from '../../nodes/collectionNode';\\nimport FieldNode from '../../nodes/fieldNode';\\nimport ReducerNode from '../../nodes/reducerNode';\\nimport embedReducerWithLink from './embedReducerWithLink';\\nimport { specialFields } from '../../lib/createGraph';\\n\\nexport default function addReducers(root) {\\n    // we add reducers last, after we have added all the fields.\\n    root.reducerNodes.forEach(reducer => {\\n        _.each(reducer.body, (body, fieldName) => {\\n            handleAddElement(reducer, root, fieldName, body);\\n        })\\n    });\\n}\\n\\n/**\\n * @param root\\n * @param fieldName\\n * @param body\\n */\\nexport function handleAddElement(reducerNode, root, fieldName, body) {\\n    // if it's a link\\n    const collection = root.collection;\\n    const linker = collection.getLinker(fieldName);\\n    if (linker) {\\n        return handleAddLink(reducerNode, fieldName, body, root, linker);\\n    }\\n\\n    const reducer = collection.getReducer(fieldName);\\n    if (reducer) {\\n        reducerNode.dependencies.push(fieldName);\\n        return handleAddReducer(fieldName, reducer, root);\\n    }\\n\\n    // we assume it's a field in this case\\n    return handleAddField(fieldName, body, root);\\n}\\n\\n/**\\n * @param fieldName\\n * @param reducer\\n * @param root\\n */\\nexport function handleAddReducer(fieldName, {body, reduce}, root) {\\n    if (!root.hasReducerNode(fieldName)) {\\n        let childReducerNode = new ReducerNode(fieldName, {body, reduce});\\n        root.add(childReducerNode);\\n        childReducerNode.scheduledForDeletion = true;\\n\\n        _.each(childReducerNode.body, (body, fieldName) => {\\n            handleAddElement(childReducerNode, root, fieldName, body);\\n        })\\n    }\\n}\\n\\n/**\\n * @param fieldName\\n * @param body\\n * @param root\\n * @param linker\\n */\\nexport function handleAddLink(reducerNode, fieldName, body, parent, linker) {\\n    if (parent.hasCollectionNode(fieldName)) {\\n        const collectionNode = parent.getCollectionNode(fieldName);\\n\\n        embedReducerWithLink(reducerNode, body, collectionNode);\\n    } else {\\n        // add\\n        let collectionNode = new CollectionNode(linker.getLinkedCollection(), body, fieldName);\\n        collectionNode.scheduledForDeletion = true;\\n        parent.add(collectionNode, linker);\\n\\n        createNodes(collectionNode);\\n    }\\n}\\n\\n/**\\n * @param fieldName\\n * @param body\\n * @param root\\n */\\nexport function handleAddField(fieldName, body, root) {\\n    if (_.contains(specialFields, fieldName)) {\\n        root.addProp(fieldName, body);\\n\\n        return;\\n    }\\n\\n    if (_.isObject(body)) {\\n        // if reducer specifies a nested field\\n        // if it's a prop\\n        const dots = dot.dot({\\n            [fieldName]: body\\n        });\\n\\n        _.each(dots, (value, key) => {\\n            addFieldIfRequired(root, key, value);\\n        });\\n    } else {\\n        // if reducer does not specify a nested field, and the field does not exist.\\n        addFieldIfRequired(root, fieldName, body);\\n    }\\n}\\n\\nfunction addFieldIfRequired(root, fieldName, body) {\\n    if (!root.hasField(fieldName, true)) {\\n        /**\\n         * Check if there are any nested fields for this field.\\n         * Adding root field here and scheduling for deletion would not work if there is already nested field, \\n         * for example:\\n         * when trying to add meta: 1, it should be checked that there are no meta.* fields\\n         * */\\n\\n        const nestedFields = root.fieldNodes.filter(({name}) => name.startsWith(`${fieldName}.`));\\n        // remove nested fields - important for minimongo which complains for these situations\\n        // TODO: excess fields are not removed (caused by adding the root field and removing nested fields) but there\\n        // should probably be a way to handle this in post-processing - for example by keeping a whitelist of fields\\n        // and removing anything else\\n        nestedFields.forEach(node => root.remove(node));\\n \\n        let fieldNode = new FieldNode(fieldName, body);\\n        // delete only if all nested fields are scheduled for deletion (that includes the case of 0 nested fields)\\n        fieldNode.scheduledForDeletion = nestedFields.every(field => field.scheduledForDeletion);\\n\\n        root.add(fieldNode);\\n    }\\n}\\n\",\"import {handleAddField, handleAddElement, handleAddReducer} from './createReducers';\\n\\n/**\\n * Embeds the reducer body with a collection body\\n * @param reducerBody\\n * @param collectionNode\\n */\\nexport default function embedReducerWithLink(reducerNode, reducerBody, collectionNode) {\\n    _.each(reducerBody, (value, key) => {\\n        const collection = collectionNode.collection;\\n\\n        if (_.isObject(value)) {\\n            // nested field or link\\n            if (collectionNode.body[key]) {\\n                // if it exists\\n                const linker = collection.getLinker(key);\\n\\n                // if it's a link\\n                if (linker) {\\n                    if (linker.isDenormalized()) {\\n                        if (linker.isSubBodyDenormalized(value)) {\\n                            const cacheField = linker.linkConfig.denormalize.field;\\n                            handleAddField(cacheField, value, collectionNode);\\n                            return;\\n                        }\\n                    }\\n\\n                    embedReducerWithLink(reducerNode, value, collectionNode.getCollectionNode(key));\\n                    return;\\n                }\\n\\n                handleAddField(key, value, collectionNode);\\n            } else {\\n                // does not exist, so it may be a link/reducer/field\\n                handleAddElement(reducerNode, collectionNode, key, value);\\n            }\\n        } else {\\n            // if this field or other reducer exists within the collection\\n\\n            if (!collectionNode.body[key]) {\\n                // can only be field or another reducer for this.\\n                const reducer = collection.getReducer(key);\\n                if (reducer) {\\n                    // if it's another reducer\\n                    return handleAddReducer(key, reducer, collectionNode);\\n                }\\n\\n                return handleAddField(key, value, collectionNode);\\n            }\\n        }\\n    })\\n}\"]}","minifier":"terser"}