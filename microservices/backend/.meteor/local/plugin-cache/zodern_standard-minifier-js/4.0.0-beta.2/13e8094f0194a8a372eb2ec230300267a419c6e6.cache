{"code":"!function(){var e=Package.meteor.Meteor,o=Package.meteor.global,n=Package.meteor.meteorEnv,r=Package.underscore._,c=Package.minimongo.LocalCollection,t=Package.minimongo.Minimongo,i=Package[\"babel-runtime\"].meteorBabelHelpers,a=Package.promise.Promise,s=Package.modules.meteorInstall,u=Package[\"ecmascript-runtime-client\"].Symbol,l=Package[\"ecmascript-runtime-client\"].Map,m=Package[\"ecmascript-runtime-client\"].Set,p,b;s({node_modules:{meteor:{\"peerlibrary:subscription-scope\":{\"client.coffee\":function(){var o=p=\"object\"==typeof p?p:{},n,t,a;n=e.connection.constructor,a=n.prototype.subscribe,n.prototype.subscribe=function(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=a.apply(this,n)).scopeQuery=function(){var o;return(o={})[\"_sub_\"+e.subscriptionId]={$exists:!0},o},e},e.subscribe=r.bind(e.connection.subscribe,e.connection),t=c._compileProjection,c._compileProjection=function(e){var o;return o=t(e),function(e){var n,r;for(n in r=o(e),i.sanitizeForInObject(r))0===n.lastIndexOf(\"_sub_\",0)&&delete r[n];return r}}}}}}},{extensions:[\".js\",\".json\",\".coffee\"]})(\"/node_modules/meteor/peerlibrary:subscription-scope/client.coffee\"),Package._define(\"peerlibrary:subscription-scope\")}();","sourcemap":"{\"version\":3,\"sources\":[\"/packages/peerlibrary_subscription-scope/client.coffee\",\"/client.coffee\"],\"names\":[\"Connection\",\"originalCompileProjection\",\"originalSubscribe\",\"Meteor\",\"connection\",\"constructor\",\"prototype\",\"subscribe\",\"handle\",\"_len\",\"arguments\",\"length\",\"args\",\"Array\",\"_key\",\"apply\",\"this\",\"scopeQuery\",\"query\",\"subscriptionId\",\"$exists\",\"_\",\"bind\",\"LocalCollection\",\"_compileProjection\",\"fields\",\"fun\",\"obj\",\"field\",\"res\",\"meteorBabelHelpers\",\"sanitizeForInObject\",\"lastIndexOf\"],\"mappings\":\"0hBAAAA,EAAAC,EAAAC,EAAAF,EAAaG,EAAOC,WAAWC,YAE/BH,EAAoBF,EAAUM,UAAEC,UAChCP,EAAUM,UAAEC,UAAY,WAAA,IACtB,IAAAC,EADsBC,EAAAC,UAAAC,OAACC,EAAD,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAACF,EAADE,GAAAJ,UAAAI,GCctB,ODbAN,EAASN,EAAkBa,MAAMC,KAAGJ,IAE7BK,WAAa,WAClB,IAAAC,ECQA,ODRAA,MACM,QAAQV,EAAOW,iBACnBC,SAAS,GACXF,GAEFV,GAGFL,EAAOI,UAAYc,EAAEC,KAAKnB,EAAOC,WAAWG,UAAWJ,EAAOC,YAE9DH,EAA4BsB,EAAgBC,mBAC5CD,EAAgBC,mBAAqB,SAACC,GACpC,IAAAC,ECSA,ODTAA,EAAMzB,EAA0BwB,GAEhC,SAACE,GACC,IAAAC,EAAAC,EAEA,IAAAD,KAFAC,EAAMH,EAAIC,GAEVG,EAAAC,oBAAAF,GAAuD,IAAjCD,EAAMI,YAAY,QAAS,WACxCH,EAAID,GCWb,ODTAC\",\"sourcesContent\":[\"Connection = Meteor.connection.constructor\\n\\noriginalSubscribe = Connection::subscribe\\nConnection::subscribe = (args...) ->\\n  handle = originalSubscribe.apply @, args\\n\\n  handle.scopeQuery = ->\\n    query = {}\\n    query[\\\"_sub_#{handle.subscriptionId}\\\"] =\\n      $exists: true\\n    query\\n\\n  handle\\n\\n# Recreate the convenience method.\\nMeteor.subscribe = _.bind Meteor.connection.subscribe, Meteor.connection\\n\\noriginalCompileProjection = LocalCollection._compileProjection\\nLocalCollection._compileProjection = (fields) ->\\n  fun = originalCompileProjection fields\\n\\n  (obj) ->\\n    res = fun obj\\n\\n    for field of res when field.lastIndexOf('_sub_', 0) is 0\\n      delete res[field]\\n\\n    res\\n\",\"var Connection, originalCompileProjection, originalSubscribe;\\n\\nConnection = Meteor.connection.constructor;\\n\\noriginalSubscribe = Connection.prototype.subscribe;\\n\\nConnection.prototype.subscribe = function(...args) {\\n  var handle;\\n  handle = originalSubscribe.apply(this, args);\\n  handle.scopeQuery = function() {\\n    var query;\\n    query = {};\\n    query[`_sub_${handle.subscriptionId}`] = {\\n      $exists: true\\n    };\\n    return query;\\n  };\\n  return handle;\\n};\\n\\n// Recreate the convenience method.\\nMeteor.subscribe = _.bind(Meteor.connection.subscribe, Meteor.connection);\\n\\noriginalCompileProjection = LocalCollection._compileProjection;\\n\\nLocalCollection._compileProjection = function(fields) {\\n  var fun;\\n  fun = originalCompileProjection(fields);\\n  return function(obj) {\\n    var field, res;\\n    res = fun(obj);\\n    for (field in res) {\\n      if (field.lastIndexOf('_sub_', 0) === 0) {\\n        delete res[field];\\n      }\\n    }\\n    return res;\\n  };\\n};\\n\"]}","minifier":"terser"}