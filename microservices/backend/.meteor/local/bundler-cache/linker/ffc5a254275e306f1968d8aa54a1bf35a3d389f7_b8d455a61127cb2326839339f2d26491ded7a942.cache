[{"type":"js","data":"/* Imports for global scope */\n\nMongo = Package.mongo.Mongo;\nReactiveVar = Package['reactive-var'].ReactiveVar;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nRoles = Package['alanning:roles'].Roles;\nCollection2 = Package['aldeed:collection2-core'].Collection2;\nFactory = Package['dburles:factory'].Factory;\nInjected = Package['meteorhacks:inject-initial'].Injected;\nInject = Package['meteorhacks:inject-initial'].Inject;\nMandrill = Package['wylio:mandrill'].Mandrill;\nSlingshot = Package['edgee:slingshot'].Slingshot;\nGoogleMaps = Package['dburles:google-maps'].GoogleMaps;\nKadira = Package['lmachens:kadira'].Kadira;\nanalytics = Package['okgrow:analytics'].analytics;\nCollectionHooks = Package['matb33:collection-hooks'].CollectionHooks;\nMeteor = Package.meteor.Meteor;\nglobal = Package.meteor.global;\nmeteorEnv = Package.meteor.meteorEnv;\nWebApp = Package.webapp.WebApp;\nDDP = Package['ddp-client'].DDP;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nSpacebars = Package.spacebars.Spacebars;\nTemplate = Package['templating-runtime'].Template;\nmeteorInstall = Package.modules.meteorInstall;\nmeteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;\nPromise = Package.promise.Promise;\nAccounts = Package['accounts-base'].Accounts;\nAutoupdate = Package.autoupdate.Autoupdate;\nReload = Package.reload.Reload;\nHTML = Package.htmljs.HTML;\n\n","servePath":"/global-imports.js"},{"type":"js","data":"var require = meteorInstall({\"imports\":{\"core\":{\"lib\":{\"client\":{\"clientTestSetup.test.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/lib/client/clientTestSetup.test.js                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"../testInit.test\");\nmodule.link(\"../../api\");\nmodule.link(\"../../api/api\");\nmodule.link(\"../../api/factories\");\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"testInit.test.js\":function(require){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/lib/testInit.test.js                                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n// Somehow the .app-test files importing this can't use import statements???\n// Leave this imported here for autoforms to work\nrequire('uniforms-bridge-simple-schema-2');\n\nconst SimpleSchema = require('simpl-schema').default;\n\nconst uniforms = require('uniforms-material');\n\nSimpleSchema.extendOptions(['condition', 'customAllowedValues', 'customAutoValue']);\nprocess.on('uncaughtException', error => {\n  console.log('uncaughtException error', error);\n});\nprocess.on('unhandledRejection', error => {\n  console.log('unhandledRejection error', error);\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"components\":{\"Financing\":{\"client\":{\"FinancingOffers\":{\"OfferPicker\":{\"test\":{\"offerPickerHelpers.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOffers/OfferPicker/test/offerPickerHelpers.spec.js                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet getAmortizationForStructureWithOffer, getMonthlyForStructureWithOffer;\nmodule.link(\"../offerPickerHelpers\", {\n  getAmortizationForStructureWithOffer(v) {\n    getAmortizationForStructureWithOffer = v;\n  },\n\n  getMonthlyForStructureWithOffer(v) {\n    getMonthlyForStructureWithOffer = v;\n  }\n\n}, 1);\ndescribe('offerPickerHelpers', () => {\n  describe('getAmortizationForStructureWithOffer', () => {\n    it('returns correct amortization for a structure', () => {\n      const props = {\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            propertyWork: 0,\n            propertyId: 'prop',\n            offerId: 'off'\n          },\n          offers: [{\n            _id: 'off',\n            interest10: 0.01,\n            amortizationGoal: 0.5,\n            amortizationYears: 20\n          }],\n          properties: [{\n            _id: 'prop',\n            value: 1200000\n          }]\n        }\n      };\n      expect(getAmortizationForStructureWithOffer(props)).to.equal(1500);\n    });\n  });\n  describe('getMonthlyForStructureWithOffer', () => {\n    it('test name', () => {\n      const props = {\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            propertyWork: 0,\n            loanTranches: [{\n              type: 'interest10',\n              value: 1\n            }],\n            offerId: 'off',\n            propertyId: 'prop'\n          },\n          offers: [{\n            _id: 'off',\n            interest10: 0.01,\n            amortizationGoal: 0.5,\n            amortizationYears: 20\n          }],\n          properties: [{\n            _id: 'prop',\n            value: 1200000,\n            yearlyExpenses: 12000\n          }]\n        },\n        structure: {\n          wantedLoan: 960000,\n          propertyWork: 0,\n          loanTranches: [{\n            type: 'interest10',\n            value: 1\n          }],\n          offerId: 'off',\n          propertyId: 'prop'\n        }\n      }; // 1000 property costs\n      // 1500 amortization\n      // 800 interests\n\n      expect(getMonthlyForStructureWithOffer(props)).to.equal(1000 + 1500 + 800);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"offerPickerHelpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOffers/OfferPicker/offerPickerHelpers.js                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  getAmortizationForStructureWithOffer: () => getAmortizationForStructureWithOffer,\n  getInterestsForStructureWithOffer: () => getInterestsForStructureWithOffer,\n  getMonthlyForStructureWithOffer: () => getMonthlyForStructureWithOffer\n});\nlet FinancingCalculator;\nmodule.link(\"../../FinancingCalculator\", {\n  default(v) {\n    FinancingCalculator = v;\n  }\n\n}, 0);\nlet Calculator;\nmodule.link(\"../../../../../utils/Calculator\", {\n  default(v) {\n    Calculator = v;\n  }\n\n}, 1);\nlet getPropertyExpenses;\nmodule.link(\"../../FinancingResult/financingResultHelpers\", {\n  getPropertyExpenses(v) {\n    getPropertyExpenses = v;\n  }\n\n}, 2);\n\nconst getAmortizationForStructureWithOffer = (_ref) => {\n  let {\n    loan,\n    structureId,\n    offer\n  } = _ref;\n  return Calculator.getAmortization({\n    loan,\n    structureId,\n    offerOverride: offer\n  });\n};\n\nconst getInterestsForStructureWithOffer = props => FinancingCalculator.getInterestsWithTranches(props) * props.structure.wantedLoan / 12;\n\nconst getMonthlyForStructureWithOffer = props => {\n  const amort = getAmortizationForStructureWithOffer(props);\n  const interests = getInterestsForStructureWithOffer(props);\n  const prop = getPropertyExpenses(props);\n  return amort + interests + prop;\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"test\":{\"FinancingOffersSorterContainer.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOffers/test/FinancingOffersSorterContainer.spec.js                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet getAvailableRates;\nmodule.link(\"../FinancingOffersSorterContainer\", {\n  getAvailableRates(v) {\n    getAvailableRates = v;\n  }\n\n}, 1);\ndescribe('FinancingOffersSorterContainer', () => {\n  describe('getAvailableRates', () => {\n    it('discards rates at 0', () => {\n      expect(getAvailableRates([{\n        interest10: 1,\n        interest2: 0\n      }], {\n        structures: []\n      })).to.deep.equal(['interest10']);\n    });\n    it('filters duplicate rates', () => {\n      expect(getAvailableRates([{\n        interest10: 1,\n        interest2: 0\n      }, {\n        interest10: 1,\n        interest2: 0\n      }], {\n        structures: []\n      })).to.deep.equal(['interest10']);\n    });\n    it('adds all rates on structures', () => {\n      expect(getAvailableRates([], {\n        structures: [{\n          loanTranches: [{\n            type: 'interest10',\n            value: 1\n          }]\n        }, {\n          loanTranches: [{\n            type: 'interest2',\n            value: 1\n          }]\n        }]\n      })).to.deep.equal(['interest10', 'interest2']);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"FinancingOffersContainer.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOffers/FinancingOffersContainer.jsx                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nmodule.export({\n  Provider: () => Provider,\n  Consumer: () => Consumer\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet compose, withStateHandlers;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  },\n\n  withStateHandlers(v) {\n    withStateHandlers = v;\n  }\n\n}, 1);\nconst {\n  Provider,\n  Consumer\n} = React.createContext();\n\nconst withContext = Component => (_ref) => {\n  let {\n    sortBy,\n    setSort,\n    setOrder\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"sortBy\", \"setSort\", \"setOrder\"]);\n  return React.createElement(Provider, {\n    value: {\n      sortBy,\n      setSort,\n      setOrder\n    }\n  }, React.createElement(Component, props));\n};\n\nmodule.exportDefault(compose(withStateHandlers({\n  sortBy: 'maxAmount'\n}, {\n  setSort: () => sortBy => ({\n    sortBy\n  }),\n  setOrder: () => () => ({})\n}), withContext));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingOffersSorterContainer.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOffers/FinancingOffersSorterContainer.jsx                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nmodule.export({\n  getAvailableRates: () => getAvailableRates\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet compose, withProps;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  },\n\n  withProps(v) {\n    withProps = v;\n  }\n\n}, 1);\nlet pick;\nmodule.link(\"lodash/pick\", {\n  default(v) {\n    pick = v;\n  }\n\n}, 2);\nlet uniq;\nmodule.link(\"lodash/uniq\", {\n  default(v) {\n    uniq = v;\n  }\n\n}, 3);\nlet pickBy;\nmodule.link(\"lodash/pickBy\", {\n  default(v) {\n    pickBy = v;\n  }\n\n}, 4);\nlet INTEREST_RATES;\nmodule.link(\"../../../../api/constants\", {\n  INTEREST_RATES(v) {\n    INTEREST_RATES = v;\n  }\n\n}, 5);\nlet T;\nmodule.link(\"../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 6);\nlet FinancingDataContainer;\nmodule.link(\"../containers/FinancingDataContainer\", {\n  default(v) {\n    FinancingDataContainer = v;\n  }\n\n}, 7);\nlet Consumer;\nmodule.link(\"./FinancingOffersContainer\", {\n  Consumer(v) {\n    Consumer = v;\n  }\n\n}, 8);\n\nconst withContext = Component => props => React.createElement(Consumer, null, sortState => React.createElement(Component, (0, _extends2.default)({}, props, sortState)));\n\nconst getAvailableRates = (offers, loan) => {\n  const rates = [];\n  offers.forEach(offer => {\n    const offerRates = pick(offer, Object.values(INTEREST_RATES));\n    const validRates = pickBy(offerRates, v => v);\n    rates.push(...Object.keys(validRates));\n  });\n  loan.structures.forEach((_ref) => {\n    let {\n      loanTranches\n    } = _ref;\n\n    if (loanTranches) {\n      loanTranches.forEach((_ref2) => {\n        let {\n          type\n        } = _ref2;\n        rates.push(type);\n      });\n    }\n  });\n  return uniq(rates);\n};\n\nconst withOptions = withProps((_ref3) => {\n  let {\n    offers,\n    loan\n  } = _ref3;\n  return {\n    options: [{\n      id: 'maxAmount'\n    }, {\n      id: 'amortization'\n    }, {\n      id: 'averagedRate'\n    }, ...getAvailableRates(offers, loan).map(rate => ({\n      id: rate\n    }))].map((_ref4) => {\n      let {\n        id\n      } = _ref4;\n      return {\n        id,\n        label: React.createElement(T, {\n          id: \"offer.\".concat(id)\n        })\n      };\n    })\n  };\n});\nmodule.exportDefault(compose(FinancingDataContainer, withContext, withOptions));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"FinancingOwnFunds\":{\"FinancingOwnFundsPicker\":{\"test\":{\"CurrentownFunds.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/test/CurrentownFunds.spec.jsx    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet shallow;\nmodule.link(\"../../../../../../utils/testHelpers/enzyme\", {\n  shallow(v) {\n    shallow = v;\n  }\n\n}, 2);\nlet sinon;\nmodule.link(\"sinon\", {\n  default(v) {\n    sinon = v;\n  }\n\n}, 3);\nlet T;\nmodule.link(\"../../../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 4);\nlet CurrentOwnFunds;\nmodule.link(\"../CurrentOwnFunds\", {\n  CurrentOwnFunds(v) {\n    CurrentOwnFunds = v;\n  }\n\n}, 5);\nlet OWN_FUNDS_TYPES;\nmodule.link(\"../../../../../../api/constants\", {\n  OWN_FUNDS_TYPES(v) {\n    OWN_FUNDS_TYPES = v;\n  }\n\n}, 6);\ndescribe('CurrentOwnFunds', () => {\n  let props;\n\n  const component = () => shallow(React.createElement(CurrentOwnFunds, props));\n\n  beforeEach(() => {\n    props = {\n      ownFunds: {\n        value: 10,\n        type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n        borrowerId: 'id'\n      },\n      borrowers: [{\n        bankFortune: 100,\n        _id: 'id'\n      }],\n      structure: {\n        ownFunds: []\n      }\n    };\n  });\n  it('displays usageType only if it is defined', () => {\n    const usageType = 'some type';\n    expect(component().find(T).length).to.equal(1);\n    props.ownFunds = {\n      usageType\n    };\n    expect(component().find(T).at(1).props().id).to.include(usageType);\n  });\n  it('does not display firstName if there is only one', () => {\n    props.borrowers = [{\n      firstName: 'joe'\n    }];\n    props.ownFunds = {\n      borrowerId: 'id1'\n    };\n    expect(component().contains('joe')).to.equal(false);\n  });\n  it('displays firstName if there are multiple', () => {\n    props.borrowers = [{\n      firstName: 'joe',\n      _id: 'id1'\n    }, {}];\n    props.ownFunds = {\n      borrowerId: 'id1'\n    };\n    expect(component().contains('joe')).to.equal(true);\n  });\n  it('opens modal if root div is clicked', () => {\n    const spy = sinon.spy();\n    props.handleOpen = spy;\n    component().find('div').simulate('click');\n    expect(spy.calledOnce).to.equal(true);\n  });\n  it('displays an error message if funds have changed to be lower than used', () => {\n    props.borrowers = [{\n      firstName: 'joe',\n      _id: 'id1',\n      bankFortune: 20\n    }];\n    props.ownFunds = [{\n      borrowerId: 'id1',\n      value: 100000,\n      type: OWN_FUNDS_TYPES.BANK_FORTUNE\n    }];\n    props.structure = {\n      ownFunds: [props.ownFunds]\n    };\n    expect(component().find('p.error').exists()).to.equal(true);\n  });\n  it('displays an error message if funds have changed to be lower than used', () => {\n    props.borrowers = [{\n      firstName: 'joe',\n      _id: 'id1',\n      bankFortune: 150\n    }];\n    props.ownFunds = {\n      borrowerId: 'id1',\n      value: 80,\n      type: OWN_FUNDS_TYPES.BANK_FORTUNE\n    };\n    props.structure = {\n      ownFunds: [props.ownFunds, {\n        borrowerId: 'id1',\n        value: 80,\n        type: OWN_FUNDS_TYPES.BANK_FORTUNE\n      }]\n    };\n    expect(component().find('p.error').exists()).to.equal(true);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingOwnFundsPickerHelpers.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/test/FinancingOwnFundsPickerHelp //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet chooseOwnFundsTypes, shouldAskForUsageType, calculateRemainingFunds, makeNewOwnFundsArray, getNewWantedLoanAfterPledge;\nmodule.link(\"../FinancingOwnFundsPickerHelpers\", {\n  chooseOwnFundsTypes(v) {\n    chooseOwnFundsTypes = v;\n  },\n\n  shouldAskForUsageType(v) {\n    shouldAskForUsageType = v;\n  },\n\n  calculateRemainingFunds(v) {\n    calculateRemainingFunds = v;\n  },\n\n  makeNewOwnFundsArray(v) {\n    makeNewOwnFundsArray = v;\n  },\n\n  getNewWantedLoanAfterPledge(v) {\n    getNewWantedLoanAfterPledge = v;\n  }\n\n}, 1);\nlet RESIDENCE_TYPE, OWN_FUNDS_TYPES, OWN_FUNDS_USAGE_TYPES;\nmodule.link(\"../../../../../../api/constants\", {\n  RESIDENCE_TYPE(v) {\n    RESIDENCE_TYPE = v;\n  },\n\n  OWN_FUNDS_TYPES(v) {\n    OWN_FUNDS_TYPES = v;\n  },\n\n  OWN_FUNDS_USAGE_TYPES(v) {\n    OWN_FUNDS_USAGE_TYPES = v;\n  }\n\n}, 2);\ndescribe('FinancingOwnFundsPickerHelpers', () => {\n  describe('chooseOwnFundsTypes', () => {\n    it('returns the right values for main', () => {\n      expect(chooseOwnFundsTypes({\n        loan: {\n          residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE\n        }\n      })).to.deep.equal([OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE, OWN_FUNDS_TYPES.BANK_FORTUNE, OWN_FUNDS_TYPES.INSURANCE_3A, OWN_FUNDS_TYPES.BANK_3A, OWN_FUNDS_TYPES.INSURANCE_3B, OWN_FUNDS_TYPES.INSURANCE_2]);\n    });\n    it('returns the right values for secondary and investment', () => {\n      const expected = [OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE, OWN_FUNDS_TYPES.BANK_FORTUNE, OWN_FUNDS_TYPES.INSURANCE_3B];\n      expect(chooseOwnFundsTypes({\n        loan: {\n          residenceType: RESIDENCE_TYPE.SECOND_RESIDENCE\n        }\n      })).to.deep.equal(expected);\n      expect(chooseOwnFundsTypes({\n        loan: {\n          residenceType: RESIDENCE_TYPE.INVESTMENT\n        }\n      })).to.deep.equal(expected);\n    });\n  });\n  describe('shouldAskForUsageType', () => {\n    it('should return true for the right own funds types', () => {\n      expect(shouldAskForUsageType(OWN_FUNDS_TYPES.INSURANCE_2)).to.equal(true);\n    });\n    it('should return false for the other own funds types', () => {\n      expect(shouldAskForUsageType(OWN_FUNDS_TYPES.BANK_FORTUNE)).to.equal(false);\n    });\n  });\n  describe('calculateRemainingFunds', () => {\n    it('returns undefined if no type is given', () => {\n      expect(calculateRemainingFunds({})).to.equal(undefined);\n    });\n    it('should return 0 if all is used up', () => {\n      const structure = {\n        ownFunds: [{\n          type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n          value: 10,\n          borrowerId: 'id'\n        }]\n      };\n      const borrowers = [{\n        bankFortune: 10,\n        _id: 'id'\n      }];\n      expect(calculateRemainingFunds({\n        type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n        structure,\n        ownFundsIndex: -1,\n        borrowers,\n        borrowerId: 'id'\n      })).to.equal(0);\n    });\n    it('should return the remaining left over if any is', () => {\n      const structure = {\n        ownFunds: [{\n          type: OWN_FUNDS_TYPES.INSURANCE_2,\n          value: 5,\n          borrowerId: 'id'\n        }]\n      };\n      const borrowers = [{\n        insurance2: [{\n          value: 10\n        }],\n        _id: 'id'\n      }];\n      expect(calculateRemainingFunds({\n        type: OWN_FUNDS_TYPES.INSURANCE_2,\n        structure,\n        ownFundsIndex: -1,\n        borrowers,\n        borrowerId: 'id'\n      })).to.equal(5);\n    });\n    it('should not count the currently editing ownFunds object', () => {\n      const structure = {\n        ownFunds: [{\n          type: OWN_FUNDS_TYPES.INSURANCE_2,\n          value: 5,\n          borrowerId: 'id'\n        }, {\n          type: OWN_FUNDS_TYPES.INSURANCE_2,\n          value: 5,\n          borrowerId: 'id'\n        }]\n      };\n      const borrowers = [{\n        insurance2: [{\n          value: 10\n        }],\n        _id: 'id'\n      }];\n      expect(calculateRemainingFunds({\n        type: OWN_FUNDS_TYPES.INSURANCE_2,\n        structure,\n        ownFundsIndex: 1,\n        borrowers,\n        borrowerId: 'id'\n      })).to.equal(5);\n    });\n    it('should ignore all other ownFunds of different types', () => {\n      const structure = {\n        ownFunds: [{\n          type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n          value: 5,\n          borrowerId: 'id'\n        }, {\n          type: OWN_FUNDS_TYPES.BANK_3A,\n          value: 5,\n          borrowerId: 'id'\n        }, {\n          type: OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE,\n          value: 5,\n          borrowerId: 'id'\n        }, {\n          type: OWN_FUNDS_TYPES.INSURANCE_2,\n          value: 5,\n          borrowerId: 'id'\n        }]\n      };\n      const borrowers = [{\n        thirdPartyFortune: 10,\n        _id: 'id'\n      }];\n      expect(calculateRemainingFunds({\n        type: OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE,\n        structure,\n        ownFundsIndex: 1,\n        borrowers,\n        borrowerId: 'id'\n      })).to.equal(5);\n    });\n    it('ignores ownFunds from other borrowers', () => {\n      const structure = {\n        ownFunds: [{\n          type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n          value: 5,\n          borrowerId: 'id2'\n        }]\n      };\n      const borrowers = [{\n        bankFortune: 10,\n        _id: 'id'\n      }];\n      expect(calculateRemainingFunds({\n        type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n        structure,\n        ownFundsIndex: -1,\n        borrowers,\n        borrowerId: 'id'\n      })).to.equal(10);\n    });\n  });\n  describe('makeNewOwnFundsArray', () => {\n    it('adds the new object in the array if it is empty', () => {\n      const expected = [{\n        type: 1,\n        borrowerId: 3,\n        value: 4,\n        usageType: undefined\n      }];\n      expect(makeNewOwnFundsArray((0, _objectSpread2.default)({\n        structure: {\n          ownFunds: []\n        },\n        ownFundsIndex: -1\n      }, expected[0]))).to.deep.equal(expected);\n    });\n    it('replaces the current object at index', () => {\n      const expected = [{\n        type: 1,\n        borrowerId: 3,\n        value: 4,\n        usageType: undefined\n      }];\n      expect(makeNewOwnFundsArray((0, _objectSpread2.default)({\n        structure: {\n          ownFunds: [{\n            type: 5,\n            borrowerId: 6,\n            value: 7,\n            usageType: 8\n          }]\n        },\n        ownFundsIndex: 0\n      }, expected[0]))).to.deep.equal(expected);\n    });\n    it('replaces the current object at larger index', () => {\n      const expected = [{\n        type: 5,\n        borrowerId: 6,\n        value: 7,\n        usageType: 8\n      }, {\n        type: 9,\n        borrowerId: 10,\n        value: 11,\n        usageType: 12\n      }, {\n        type: 1,\n        borrowerId: 3,\n        value: 4,\n        usageType: undefined\n      }];\n      expect(makeNewOwnFundsArray((0, _objectSpread2.default)({\n        structure: {\n          ownFunds: [{\n            type: 5,\n            borrowerId: 6,\n            value: 7,\n            usageType: 8\n          }, {\n            type: 9,\n            borrowerId: 10,\n            value: 11,\n            usageType: 12\n          }, {\n            type: 14,\n            borrowerId: 15,\n            value: 16,\n            usageType: 17\n          }]\n        },\n        ownFundsIndex: 2\n      }, expected[2]))).to.deep.equal(expected);\n    });\n    it('deletes object at index', () => {\n      const expected = [{\n        type: 5,\n        borrowerId: 6,\n        value: 7,\n        usageType: 8\n      }, {\n        type: 14,\n        borrowerId: 15,\n        value: 16,\n        usageType: 17\n      }];\n      expect(makeNewOwnFundsArray((0, _objectSpread2.default)({\n        structure: {\n          ownFunds: [{\n            type: 5,\n            borrowerId: 6,\n            value: 7,\n            usageType: 8\n          }, {\n            type: 9,\n            borrowerId: 10,\n            value: 11,\n            usageType: 12\n          }, {\n            type: 14,\n            borrowerId: 15,\n            value: 16,\n            usageType: 17\n          }]\n        },\n        ownFundsIndex: 1,\n        shouldDelete: true\n      }, expected[2]))).to.deep.equal(expected);\n    });\n    it('deletes object if value is 0', () => {\n      const expected = [{\n        type: 5,\n        borrowerId: 6,\n        value: 7,\n        usageType: 8\n      }, {\n        type: 14,\n        borrowerId: 15,\n        value: 16,\n        usageType: 17\n      }];\n      expect(makeNewOwnFundsArray({\n        structure: {\n          ownFunds: [{\n            type: 5,\n            borrowerId: 6,\n            value: 7,\n            usageType: 8\n          }, {\n            type: 9,\n            borrowerId: 10,\n            value: 11,\n            usageType: 12\n          }, {\n            type: 14,\n            borrowerId: 15,\n            value: 16,\n            usageType: 17\n          }]\n        },\n        ownFundsIndex: 1,\n        value: 0\n      })).to.deep.equal(expected);\n    });\n  });\n  describe('getNewWantedLoanAfterPledge', () => {\n    it('returns the current wantedLoan if this is not a pledged value', () => {\n      expect(getNewWantedLoanAfterPledge({\n        loan: {\n          structures: [{\n            wantedLoan: 100,\n            id: 'struct'\n          }]\n        },\n        structureId: 'struct',\n        usageType: 'something else'\n      })).to.equal(100);\n    });\n    it('returns wantedLoan plus a small pledge', () => {\n      expect(getNewWantedLoanAfterPledge({\n        loan: {\n          properties: [{\n            _id: 'propertyId',\n            value: 1000000\n          }],\n          residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n          structures: [{\n            id: 'struct',\n            wantedLoan: 800000,\n            propertyId: 'propertyId',\n            ownFunds: [],\n            propertyWork: 0\n          }]\n        },\n        structureId: 'struct',\n        usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE,\n        value: 50000\n      })).to.equal(850000);\n    });\n    it('does not exceed maxBorrowRatioWithPledge', () => {\n      expect(getNewWantedLoanAfterPledge({\n        loan: {\n          properties: [{\n            _id: 'propertyId',\n            value: 1000000\n          }],\n          residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n          structures: [{\n            id: 'struct',\n            wantedLoan: 800000,\n            propertyId: 'propertyId',\n            ownFunds: [],\n            propertyWork: 0\n          }]\n        },\n        structureId: 'struct',\n        usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE,\n        value: 150000\n      })).to.equal(900000);\n    });\n    it('does not exceed maxBorrowRatio if not a main residence', () => {\n      expect(getNewWantedLoanAfterPledge({\n        loan: {\n          properties: [{\n            _id: 'propertyId',\n            value: 1000000\n          }],\n          residenceType: RESIDENCE_TYPE.INVESTMENT,\n          structures: [{\n            id: 'struct',\n            wantedLoan: 800000,\n            propertyId: 'propertyId',\n            ownFunds: [],\n            propertyWork: 0\n          }]\n        },\n        structureId: 'struct',\n        usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE,\n        value: 150000\n      })).to.equal(800000);\n    });\n    it('counts other pledged own funds', () => {\n      expect(getNewWantedLoanAfterPledge({\n        loan: {\n          properties: [{\n            _id: 'propertyId',\n            value: 1000000\n          }],\n          residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n          structures: [{\n            id: 'struct',\n            wantedLoan: 800000,\n            propertyId: 'propertyId',\n            ownFunds: [{\n              value: 10000,\n              usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE\n            }],\n            propertyWork: 0\n          }]\n        },\n        structureId: 'struct',\n        usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE,\n        value: 50000,\n        ownFundsIndex: -1\n      })).to.equal(860000);\n    });\n    it('reduces loan if pledge is reduced', () => {\n      expect(getNewWantedLoanAfterPledge({\n        loan: {\n          properties: [{\n            _id: 'propertyId',\n            value: 1000000\n          }],\n          residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n          structures: [{\n            id: 'struct',\n            wantedLoan: 800000,\n            propertyId: 'propertyId',\n            ownFunds: [{\n              value: 80000,\n              usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE\n            }],\n            propertyWork: 0\n          }]\n        },\n        structureId: 'struct',\n        usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE,\n        value: 40000,\n        ownFundsIndex: 0\n      })).to.equal(840000);\n    });\n    it('increases loan if usageType is changed to pledge', () => {\n      expect(getNewWantedLoanAfterPledge({\n        loan: {\n          properties: [{\n            _id: 'propertyId',\n            value: 1000000\n          }],\n          residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n          structures: [{\n            id: 'struct',\n            wantedLoan: 800000,\n            propertyId: 'propertyId',\n            ownFunds: [{\n              value: 80000,\n              usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW\n            }],\n            propertyWork: 0\n          }]\n        },\n        structureId: 'struct',\n        usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE,\n        value: 40000,\n        ownFundsIndex: 0\n      })).to.equal(840000);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"OwnFundsCompleter.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/test/OwnFundsCompleter.spec.js   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet RESIDENCE_TYPE;\nmodule.link(\"../../../../../../api/constants\", {\n  RESIDENCE_TYPE(v) {\n    RESIDENCE_TYPE = v;\n  }\n\n}, 1);\nlet getRequiredAndCurrentFunds;\nmodule.link(\"../OwnFundsCompleterContainer\", {\n  getRequiredAndCurrentFunds(v) {\n    getRequiredAndCurrentFunds = v;\n  }\n\n}, 2);\nlet OWN_FUNDS_USAGE_TYPES, OWN_FUNDS_TYPES;\nmodule.link(\"../../../../../../api/constants\", {\n  OWN_FUNDS_USAGE_TYPES(v) {\n    OWN_FUNDS_USAGE_TYPES = v;\n  },\n\n  OWN_FUNDS_TYPES(v) {\n    OWN_FUNDS_TYPES = v;\n  }\n\n}, 3);\ndescribe('OwnFundsCompleter', () => {\n  describe('getRequiredAndCurrentFunds', () => {\n    let props;\n    let structure;\n    let property;\n    beforeEach(() => {\n      props = {};\n    });\n    context('for an initial structure', () => {\n      beforeEach(() => {\n        structure = {\n          id: 'struct1',\n          ownFunds: [],\n          propertyId: 'propertyId',\n          wantedLoan: 800000,\n          propertyWork: 0\n        };\n        property = {\n          _id: 'propertyId',\n          value: 1000000\n        };\n        props = {\n          structure,\n          structureId: 'struct1',\n          properties: [property],\n          loan: {\n            properties: [property],\n            residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n            structures: [structure]\n          },\n          ownFundsIndex: -1,\n          value: 0\n        };\n      });\n      it('returns 0 and standard value for a normal structure', () => {\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 250000,\n          current: 0\n        });\n      });\n      it('returns less when a value is entered', () => {\n        props.value = 100000;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 250000,\n          current: 100000\n        });\n      });\n      it('properly discounts an existing ownFunds value', () => {\n        structure.ownFunds = [{\n          value: 150000\n        }];\n        props.ownFundsIndex = 0;\n        props.value = 100000;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 250000,\n          current: 100000\n        });\n      });\n      it('counts other values', () => {\n        structure.ownFunds = [{\n          value: 150000,\n          usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW\n        }];\n        props.ownFundsIndex = -1;\n        props.value = 100000;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 250000,\n          current: 250000\n        });\n      });\n      it('counts other values, even if value is undefined', () => {\n        structure.ownFunds = [{\n          value: 150000,\n          usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW\n        }];\n        props.ownFundsIndex = -1;\n        props.value = undefined;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 250000,\n          current: 150000\n        });\n      });\n      it('does not count other pledged values', () => {\n        structure.ownFunds = [{\n          value: 150000,\n          usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE\n        }];\n        props.ownFundsIndex = -1;\n        props.value = 100000;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 250000,\n          current: 100000\n        });\n      });\n      it('adjusts the required ownFunds amount if you pledge a value', () => {\n        props.ownFundsIndex = -1;\n        props.value = 100000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 150000,\n          current: 0\n        });\n      });\n      it('adjusts the required amount without exceeding maxBorrowRatioWithPledge', () => {\n        // FIXME: Debate to be had:\n        // 1. Do we reduce the pledged amount to 100k\n        // 2. Do we let the pledged amount at 150k, which is a valid structure\n        // But probably not what the user wants\n        // Except if he's planning to modify another ownfunds afterwards\n        // We chose Nb. 2, which is the simpler and more intuitive way to go\n        structure.ownFunds = [{\n          value: 150000\n        }];\n        props.ownFundsIndex = -1;\n        props.value = 150000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 150000,\n          current: 150000\n        });\n      });\n      it('takes into account previously pledged values', () => {\n        structure.ownFunds = [{\n          value: 40000,\n          usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE\n        }, {\n          value: 150000\n        }];\n        props.ownFundsIndex = -1;\n        props.value = 40000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 170000,\n          current: 150000\n        });\n      });\n      it('works if changing a wrong pledged amount', () => {\n        structure.wantedLoan = 900000;\n        structure.ownFunds = [{\n          value: 150000,\n          usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE\n        }];\n        props.ownFundsIndex = 0;\n        props.value = 100000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 150000,\n          current: 0\n        });\n      }); // Show warning instead\n\n      it.skip('works if adding a wrong pledged amount twice', () => {\n        structure.wantedLoan = 900000;\n        structure.ownFunds = [{\n          value: 150000,\n          usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE\n        }];\n        props.ownFundsIndex = -1;\n        props.value = 200000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 150000,\n          current: 0\n        });\n      });\n      it('takes into account previously pledged values without exceeding maxBorrowRatioWithPledge 1', () => {\n        structure.ownFunds = [{\n          value: 100000,\n          usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE\n        }, {\n          value: 150000\n        }];\n        props.ownFundsIndex = -1;\n        props.value = 40000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 150000,\n          current: 150000\n        });\n      });\n      it('takes into account previously pledged values without exceeding maxBorrowRatioWithPledge 2', () => {\n        structure.ownFunds = [{\n          value: 150000,\n          usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE\n        }, {\n          value: 150000\n        }];\n        props.ownFundsIndex = -1;\n        props.value = 40000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 150000,\n          current: 150000\n        });\n      });\n      it('increases the wantedLoan only by the amount possible', () => {\n        structure.wantedLoan = 600000;\n        structure.ownFunds = [{\n          value: 150000\n        }];\n        props.value = 300000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 350000,\n          current: 150000\n        });\n      });\n      it('works when editing a pledge funds with high loan', () => {\n        structure.wantedLoan = 900000;\n        structure.ownFunds = [{\n          value: 120000,\n          type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n          borrowerId: 'bId'\n        }, {\n          value: 100000,\n          type: OWN_FUNDS_TYPES.INSURANCE_2,\n          usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE,\n          borrowerId: 'bId'\n        }, {\n          value: 30000,\n          type: OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE,\n          borrowerId: 'bId'\n        }];\n        props.ownFundsIndex = 1;\n        props.value = 100000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        props.borrowers = [{\n          _id: 'bId'\n        }];\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 150000,\n          current: 150000\n        });\n      });\n      it('works when changing withdraw to pledge', () => {\n        property.value = 500000;\n        structure.wantedLoan = 400000;\n        structure.ownFunds = [{\n          value: 75000,\n          type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n          borrowerId: 'bId'\n        }, {\n          value: 50000,\n          type: OWN_FUNDS_TYPES.INSURANCE_2,\n          usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW,\n          borrowerId: 'bId'\n        }];\n        props.ownFundsIndex = 1;\n        props.value = 50000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        props.borrowers = [{\n          _id: 'bId'\n        }];\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 75000,\n          current: 75000\n        });\n      });\n      it('works when changing pledge to withdraw', () => {\n        property.value = 500000;\n        structure.wantedLoan = 450000;\n        structure.ownFunds = [{\n          value: 75000,\n          type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n          borrowerId: 'bId'\n        }, {\n          value: 50000,\n          type: OWN_FUNDS_TYPES.INSURANCE_2,\n          usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE,\n          borrowerId: 'bId'\n        }];\n        props.ownFundsIndex = 1;\n        props.type = OWN_FUNDS_TYPES.INSURANCE_2;\n        props.value = 50000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.WITHDRAW;\n        props.borrowers = [{\n          _id: 'bId'\n        }];\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 125000,\n          current: 125000\n        });\n      });\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"CurrentOwnFunds.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/CurrentOwnFunds.jsx              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  CurrentOwnFunds: () => CurrentOwnFunds\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet T;\nmodule.link(\"../../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 1);\nlet toMoney;\nmodule.link(\"../../../../../utils/conversionFunctions\", {\n  toMoney(v) {\n    toMoney = v;\n  }\n\n}, 2);\nlet FinancingOwnFundsDialogContainer;\nmodule.link(\"./FinancingOwnFundsDialogContainer\", {\n  default(v) {\n    FinancingOwnFundsDialogContainer = v;\n  }\n\n}, 3);\nlet FinancingOwnFundsDialog;\nmodule.link(\"./FinancingOwnFundsDialog\", {\n  default(v) {\n    FinancingOwnFundsDialog = v;\n  }\n\n}, 4);\nlet getOwnFundsOfTypeAndBorrower, getAvailableFundsOfTypeAndBorrower;\nmodule.link(\"./FinancingOwnFundsPickerHelpers\", {\n  getOwnFundsOfTypeAndBorrower(v) {\n    getOwnFundsOfTypeAndBorrower = v;\n  },\n\n  getAvailableFundsOfTypeAndBorrower(v) {\n    getAvailableFundsOfTypeAndBorrower = v;\n  }\n\n}, 5);\n\nconst hasEnoughFundsOfType = (_ref) => {\n  let {\n    structure,\n    type,\n    borrowerId,\n    borrowers\n  } = _ref;\n  return getAvailableFundsOfTypeAndBorrower({\n    type,\n    borrowerId,\n    borrowers\n  }) >= getOwnFundsOfTypeAndBorrower({\n    structure,\n    type,\n    borrowerId\n  });\n};\n\nconst CurrentOwnFunds = (_ref2) => {\n  let {\n    ownFunds: {\n      type,\n      usageType,\n      borrowerId,\n      value\n    },\n    structure,\n    borrowers,\n    open,\n    handleClose,\n    handleOpen,\n    structureId,\n    ownFundsIndex\n  } = _ref2;\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"current-own-funds\",\n    onClick: structure.disableForms ? null : handleOpen\n  }, React.createElement(\"h5\", null, React.createElement(T, {\n    id: \"Forms.\".concat(type)\n  }), usageType && ' - ', usageType && React.createElement(T, {\n    id: \"Forms.ownFundsUsageType.\".concat(usageType)\n  })), borrowers.length > 1 && React.createElement(\"h5\", {\n    className: \"secondary\"\n  }, borrowers.find((_ref3) => {\n    let {\n      _id\n    } = _ref3;\n    return _id === borrowerId;\n  }).firstName), React.createElement(\"p\", {\n    className: \"calculated-value\"\n  }, React.createElement(\"span\", {\n    className: \"chf\"\n  }, \"CHF\"), ' ', React.createElement(\"span\", {\n    className: \"primary\"\n  }, toMoney(value))), !hasEnoughFundsOfType({\n    structure,\n    type,\n    borrowerId,\n    borrowers\n  }) && React.createElement(\"p\", {\n    className: \"error\"\n  }, React.createElement(T, {\n    id: \"FinancingCurrentOwnFunds.error\",\n    values: {\n      type: React.createElement(T, {\n        id: \"Forms.\".concat(type)\n      })\n    }\n  }))), React.createElement(FinancingOwnFundsDialog, {\n    open: open,\n    handleClose: handleClose,\n    structureId: structureId,\n    ownFundsIndex: ownFundsIndex\n  }));\n};\n\nmodule.exportDefault(FinancingOwnFundsDialogContainer(CurrentOwnFunds));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingOwnFundsActions.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/FinancingOwnFundsActions.jsx     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet DialogActions;\nmodule.link(\"@material-ui/core/DialogActions\", {\n  default(v) {\n    DialogActions = v;\n  }\n\n}, 1);\nlet Button;\nmodule.link(\"../../../../Button\", {\n  default(v) {\n    Button = v;\n  }\n\n}, 2);\nlet T;\nmodule.link(\"../../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 3);\n\nconst FinancingOwnFundsActions = (_ref) => {\n  let {\n    displayWarning,\n    loading,\n    handleClose,\n    handleDelete,\n    handleSubmit,\n    handleUpdateBorrower,\n    handleCancelUpdateBorrower,\n    disableSubmit,\n    disableDelete\n  } = _ref;\n  const defaultActions = [React.createElement(Button, {\n    disabled: loading,\n    key: \"cancel\",\n    onClick: handleClose\n  }, React.createElement(T, {\n    id: \"general.cancel\"\n  })), !disableDelete && React.createElement(Button, {\n    disabled: loading,\n    key: \"delete\",\n    onClick: handleDelete,\n    error: true\n  }, React.createElement(T, {\n    id: \"general.delete\"\n  })), React.createElement(Button, {\n    primary: true,\n    raised: true,\n    key: \"ok\",\n    onClick: handleSubmit,\n    loading: loading,\n    disabled: disableSubmit\n  }, React.createElement(T, {\n    id: \"general.ok\"\n  }))];\n  const borrowerUpdateActions = [React.createElement(Button, {\n    disabled: loading,\n    key: \"no\",\n    onClick: handleCancelUpdateBorrower\n  }, React.createElement(T, {\n    id: \"general.no\"\n  })), React.createElement(Button, {\n    primary: true,\n    raised: true,\n    loading: loading,\n    key: \"yes\",\n    onClick: handleUpdateBorrower\n  }, React.createElement(T, {\n    id: \"FinancingOwnFundsActions.modify\"\n  }))];\n  return React.createElement(DialogActions, null, displayWarning ? borrowerUpdateActions : defaultActions);\n};\n\nmodule.exportDefault(FinancingOwnFundsActions);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingOwnFundsDialog.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/FinancingOwnFundsDialog.jsx      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Dialog;\nmodule.link(\"@material-ui/core/Dialog\", {\n  default(v) {\n    Dialog = v;\n  }\n\n}, 1);\nlet DialogTitle;\nmodule.link(\"@material-ui/core/DialogTitle\", {\n  default(v) {\n    DialogTitle = v;\n  }\n\n}, 2);\nlet DialogContent;\nmodule.link(\"@material-ui/core/DialogContent\", {\n  default(v) {\n    DialogContent = v;\n  }\n\n}, 3);\nlet T;\nmodule.link(\"../../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 4);\nlet FinancingOwnFundsPickerContainer, FIELDS;\nmodule.link(\"./FinancingOwnFundsPickerContainer\", {\n  default(v) {\n    FinancingOwnFundsPickerContainer = v;\n  },\n\n  FIELDS(v) {\n    FIELDS = v;\n  }\n\n}, 5);\nlet FinancingOwnFundsActions;\nmodule.link(\"./FinancingOwnFundsActions\", {\n  default(v) {\n    FinancingOwnFundsActions = v;\n  }\n\n}, 6);\nlet FinancingOwnFundsPickerForm;\nmodule.link(\"./FinancingOwnFundsPickerForm\", {\n  default(v) {\n    FinancingOwnFundsPickerForm = v;\n  }\n\n}, 7);\nlet OwnFundsCompleter;\nmodule.link(\"./OwnFundsCompleter\", {\n  default(v) {\n    OwnFundsCompleter = v;\n  }\n\n}, 8);\nlet FinancingOwnFundsPledgeWarning;\nmodule.link(\"./FinancingOwnFundsPledgeWarning\", {\n  default(v) {\n    FinancingOwnFundsPledgeWarning = v;\n  }\n\n}, 9);\nlet calculateRemainingFunds;\nmodule.link(\"./FinancingOwnFundsPickerHelpers\", {\n  calculateRemainingFunds(v) {\n    calculateRemainingFunds = v;\n  }\n\n}, 10);\n\nconst FinancingOwnFundsDialog = props => {\n  const {\n    handleClose,\n    open,\n    handleChange,\n    type,\n    value,\n    borrowerId,\n    handleCancelUpdateBorrower\n  } = props;\n  const remaining = calculateRemainingFunds(props);\n  const displayWarning = type && borrowerId && remaining < value;\n  return React.createElement(Dialog, {\n    open: open,\n    onBackdropClick: handleClose,\n    onEscapeKeyDown: handleClose,\n    maxWidth: \"sm\",\n    fullWidth: true\n  }, React.createElement(DialogTitle, null, React.createElement(T, {\n    id: \"FinancingOwnFundsDialog.title\"\n  })), React.createElement(DialogContent, null, React.createElement(OwnFundsCompleter, (0, _extends2.default)({}, props, {\n    handleChangeValue: val => handleChange(val, FIELDS.VALUE)\n  })), React.createElement(FinancingOwnFundsPickerForm, (0, _extends2.default)({}, props, {\n    displayWarning: displayWarning,\n    remaining: remaining\n  })), React.createElement(FinancingOwnFundsPledgeWarning, props)), React.createElement(FinancingOwnFundsActions, (0, _extends2.default)({}, props, {\n    handleCancelUpdateBorrower: handleCancelUpdateBorrower(remaining),\n    displayWarning: displayWarning\n  })));\n};\n\nmodule.exportDefault(FinancingOwnFundsPickerContainer(FinancingOwnFundsDialog));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingOwnFundsDialogContainer.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/FinancingOwnFundsDialogContainer //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet withStateHandlers;\nmodule.link(\"recompose\", {\n  withStateHandlers(v) {\n    withStateHandlers = v;\n  }\n\n}, 0);\nmodule.exportDefault(withStateHandlers({\n  open: false\n}, {\n  handleOpen: () => () => ({\n    open: true\n  }),\n  handleClose: () => () => ({\n    open: false\n  })\n}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingOwnFundsPickerContainer.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/FinancingOwnFundsPickerContainer //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  FIELDS: () => FIELDS\n});\nlet compose, withProps, withStateHandlers, withState, lifecycle;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  },\n\n  withProps(v) {\n    withProps = v;\n  },\n\n  withStateHandlers(v) {\n    withStateHandlers = v;\n  },\n\n  withState(v) {\n    withState = v;\n  },\n\n  lifecycle(v) {\n    lifecycle = v;\n  }\n\n}, 0);\nlet borrowerUpdate, pushBorrowerValue, updateStructure;\nmodule.link(\"../../../../../api\", {\n  borrowerUpdate(v) {\n    borrowerUpdate = v;\n  },\n\n  pushBorrowerValue(v) {\n    pushBorrowerValue = v;\n  },\n\n  updateStructure(v) {\n    updateStructure = v;\n  }\n\n}, 1);\nlet OWN_FUNDS_USAGE_TYPES, RESIDENCE_TYPE;\nmodule.link(\"../../../../../api/constants\", {\n  OWN_FUNDS_USAGE_TYPES(v) {\n    OWN_FUNDS_USAGE_TYPES = v;\n  },\n\n  RESIDENCE_TYPE(v) {\n    RESIDENCE_TYPE = v;\n  }\n\n}, 2);\nlet Calculator;\nmodule.link(\"../../../../../utils/Calculator\", {\n  default(v) {\n    Calculator = v;\n  }\n\n}, 3);\nlet SingleStructureContainer;\nmodule.link(\"../../containers/SingleStructureContainer\", {\n  default(v) {\n    SingleStructureContainer = v;\n  }\n\n}, 4);\nlet FinancingDataContainer;\nmodule.link(\"../../containers/FinancingDataContainer\", {\n  default(v) {\n    FinancingDataContainer = v;\n  }\n\n}, 5);\nlet chooseOwnFundsTypes, shouldAskForUsageType, makeNewOwnFundsArray, getOwnFundsOfTypeAndBorrower, getAvailableFundsOfTypeAndBorrower, getNewWantedLoanAfterPledge;\nmodule.link(\"./FinancingOwnFundsPickerHelpers\", {\n  chooseOwnFundsTypes(v) {\n    chooseOwnFundsTypes = v;\n  },\n\n  shouldAskForUsageType(v) {\n    shouldAskForUsageType = v;\n  },\n\n  makeNewOwnFundsArray(v) {\n    makeNewOwnFundsArray = v;\n  },\n\n  getOwnFundsOfTypeAndBorrower(v) {\n    getOwnFundsOfTypeAndBorrower = v;\n  },\n\n  getAvailableFundsOfTypeAndBorrower(v) {\n    getAvailableFundsOfTypeAndBorrower = v;\n  },\n\n  getNewWantedLoanAfterPledge(v) {\n    getNewWantedLoanAfterPledge = v;\n  }\n\n}, 6);\nconst FIELDS = {\n  TYPE: 'type',\n  USAGE_TYPE: 'usageType',\n  BORROWER_ID: 'borrowerId',\n  VALUE: 'value'\n};\n\nconst getInitialState = (_ref) => {\n  let {\n    structure,\n    borrowers,\n    ownFundsIndex\n  } = _ref;\n\n  // On load, the redux store has not loaded yet, causing this to crash\n  // if we don't add this simple check\n  if (!structure) {\n    return {};\n  } // New ownFunds object\n\n\n  if (ownFundsIndex < 0) {\n    return {\n      [FIELDS.TYPE]: undefined,\n      [FIELDS.USAGE_TYPE]: OWN_FUNDS_USAGE_TYPES.WITHDRAW,\n      [FIELDS.BORROWER_ID]: borrowers[0]._id,\n      [FIELDS.VALUE]: undefined\n    };\n  } // When editing existing ownFunds object\n\n\n  return structure.ownFunds[ownFundsIndex];\n};\n\nconst addState = withStateHandlers(getInitialState, {\n  handleChange: () => (value, id) => ({\n    [id]: value\n  }),\n  reset: (_, props) => () => getInitialState(props)\n});\nconst withDisableSubmit = withProps((_ref2) => {\n  let {\n    type,\n    borrowerId,\n    value,\n    usageType\n  } = _ref2;\n  return {\n    disableSubmit: !(type && borrowerId && value >= 0 && (!shouldAskForUsageType(type) || usageType))\n  };\n});\nconst withStructureUpdate = withProps((_ref3) => {\n  let {\n    loan: {\n      _id: loanId\n    },\n    structureId\n  } = _ref3;\n  return {\n    updateLoan: wantedLoan => updateStructure.run({\n      loanId,\n      structureId,\n      structure: {\n        wantedLoan\n      }\n    }),\n    updateOwnFunds: ownFunds => updateStructure.run({\n      loanId,\n      structureId,\n      structure: {\n        ownFunds\n      }\n    })\n  };\n});\nconst withAdditionalProps = withProps(props => {\n  const {\n    disableSubmit,\n    updateOwnFunds,\n    updateLoan,\n    handleClose,\n    setLoading,\n    borrowerId,\n    type,\n    value,\n    usageType,\n    handleChange,\n    reset,\n    ownFundsIndex,\n    loan\n  } = props;\n  const otherValueOfTypeAndBorrower = getOwnFundsOfTypeAndBorrower(props);\n\n  const updateCleanup = () => {\n    setLoading(false);\n  };\n\n  return {\n    handleDelete: () => {\n      updateOwnFunds(makeNewOwnFundsArray((0, _objectSpread2.default)({}, props, {\n        shouldDelete: true\n      })));\n      handleClose();\n    },\n    handleSubmit: event => {\n      event.preventDefault();\n\n      if (disableSubmit) {\n        return false;\n      }\n\n      if (shouldAskForUsageType(type) && usageType === OWN_FUNDS_USAGE_TYPES.PLEDGE) {\n        updateLoan(getNewWantedLoanAfterPledge(props));\n      }\n\n      updateOwnFunds(makeNewOwnFundsArray(props));\n      handleClose();\n\n      if (ownFundsIndex === -1) {\n        // Cleanup\n        reset();\n      }\n    },\n    handleUpdateBorrower: event => {\n      if (event && event.preventDefault) {\n        event.preventDefault();\n      }\n\n      setLoading(true);\n\n      if (Calculator.isTypeWithArrayValues(type)) {\n        const currentlyAvailable = getAvailableFundsOfTypeAndBorrower(props);\n        const deltaNeeded = otherValueOfTypeAndBorrower + value - currentlyAvailable;\n        return pushBorrowerValue.run({\n          borrowerId,\n          object: {\n            [type]: {\n              value: deltaNeeded,\n              description: 'Ajout automatique'\n            }\n          }\n        }).finally(updateCleanup);\n      }\n\n      return borrowerUpdate.run({\n        borrowerId,\n        object: {\n          [type]: otherValueOfTypeAndBorrower + value\n        }\n      }).finally(updateCleanup);\n    },\n    handleCancelUpdateBorrower: remaining => () => {\n      handleChange(remaining, FIELDS.VALUE);\n    },\n    types: chooseOwnFundsTypes(props),\n    otherValueOfTypeAndBorrower,\n    allowPledge: loan.residenceType === RESIDENCE_TYPE.MAIN_RESIDENCE\n  };\n});\nconst FinancingOwnFundsPickerContainer = compose(SingleStructureContainer, FinancingDataContainer, addState, lifecycle({\n  componentWillReceiveProps(_ref4) {\n    let {\n      structure: {\n        ownFunds: nextFunds\n      },\n      ownFundsIndex: nextIndex\n    } = _ref4;\n    const {\n      structure: {\n        ownFunds\n      },\n      ownFundsIndex\n    } = this.props;\n\n    if (JSON.stringify(ownFunds[ownFundsIndex]) !== JSON.stringify(nextFunds[nextIndex])) {\n      this.props.reset();\n    }\n  }\n\n}), withDisableSubmit, withStructureUpdate, withState('loading', 'setLoading', false), withAdditionalProps);\nmodule.exportDefault(FinancingOwnFundsPickerContainer);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingOwnFundsPickerForm.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/FinancingOwnFundsPickerForm.jsx  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet toMoney;\nmodule.link(\"../../../../../utils/conversionFunctions\", {\n  toMoney(v) {\n    toMoney = v;\n  }\n\n}, 1);\nlet MoneyInput;\nmodule.link(\"../../../../MoneyInput\", {\n  default(v) {\n    MoneyInput = v;\n  }\n\n}, 2);\nlet Select;\nmodule.link(\"../../../../Select\", {\n  default(v) {\n    Select = v;\n  }\n\n}, 3);\nlet T;\nmodule.link(\"../../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 4);\nlet FinancingDataContainer;\nmodule.link(\"../../containers/FinancingDataContainer\", {\n  default(v) {\n    FinancingDataContainer = v;\n  }\n\n}, 5);\nlet FIELDS;\nmodule.link(\"./FinancingOwnFundsPickerContainer\", {\n  FIELDS(v) {\n    FIELDS = v;\n  }\n\n}, 6);\nlet OWN_FUNDS_USAGE_TYPES;\nmodule.link(\"../../../../../api/constants\", {\n  OWN_FUNDS_USAGE_TYPES(v) {\n    OWN_FUNDS_USAGE_TYPES = v;\n  }\n\n}, 7);\nlet shouldAskForUsageType;\nmodule.link(\"./FinancingOwnFundsPickerHelpers\", {\n  shouldAskForUsageType(v) {\n    shouldAskForUsageType = v;\n  }\n\n}, 8);\nlet FinancingOwnFundsWarning;\nmodule.link(\"./FinancingOwnFundsWarning\", {\n  default(v) {\n    FinancingOwnFundsWarning = v;\n  }\n\n}, 9);\n\nconst FinancingOwnFundsPickerForm = (_ref) => {\n  let {\n    handleSubmit,\n    type,\n    borrowerId,\n    value,\n    handleChange,\n    borrowers,\n    types,\n    displayWarning,\n    usageType,\n    remaining,\n    otherValueOfTypeAndBorrower,\n    allowPledge,\n    handleUpdateBorrower\n  } = _ref;\n  return React.createElement(\"form\", {\n    onSubmit: displayWarning ? handleUpdateBorrower : handleSubmit,\n    className: \"own-funds-picker-form\"\n  }, React.createElement(\"div\", {\n    className: \"form\"\n  }, React.createElement(Select, {\n    value: type,\n    onChange: (_, val) => handleChange(val, FIELDS.TYPE),\n    options: types.map(t => ({\n      id: t,\n      label: React.createElement(T, {\n        id: \"Forms.\".concat(t)\n      })\n    })),\n    label: React.createElement(T, {\n      id: \"FinancingOwnFundsPickerForm.type\"\n    })\n  }), allowPledge && shouldAskForUsageType(type) && React.createElement(Select, {\n    value: usageType,\n    onChange: (_, val) => handleChange(val, FIELDS.USAGE_TYPE),\n    options: Object.values(OWN_FUNDS_USAGE_TYPES).map(usage => ({\n      id: usage,\n      label: React.createElement(T, {\n        id: \"Forms.ownFundsUsageType.\".concat(usage)\n      })\n    })),\n    label: React.createElement(T, {\n      id: \"FinancingOwnFundsPickerForm.usageType\"\n    })\n  }), borrowers.length > 1 && React.createElement(Select, {\n    value: borrowerId,\n    onChange: (_, val) => handleChange(val, FIELDS.BORROWER_ID),\n    options: borrowers.map((_ref2, index) => {\n      let {\n        _id: id,\n        firstName\n      } = _ref2;\n      return {\n        id,\n        label: firstName || React.createElement(T, {\n          id: \"BorrowerHeader.title\",\n          values: {\n            index: index + 1\n          }\n        })\n      };\n    }),\n    label: React.createElement(T, {\n      id: \"FinancingOwnFundsPickerForm.borrower\"\n    })\n  }), React.createElement(MoneyInput, {\n    value: value,\n    onChange: val => handleChange(val, FIELDS.VALUE),\n    helperText: remaining >= 0 && React.createElement(T, {\n      id: \"FinancingOwnFundsPickerForm.remaining\",\n      values: {\n        value: React.createElement(\"b\", {\n          className: remaining < value ? 'error' : 'primary'\n        }, toMoney(remaining))\n      }\n    }),\n    label: React.createElement(T, {\n      id: \"FinancingOwnFundsPickerForm.value\"\n    })\n  })), displayWarning && React.createElement(FinancingOwnFundsWarning, {\n    type: type,\n    borrower: borrowers.find((_ref3) => {\n      let {\n        _id\n      } = _ref3;\n      return _id === borrowerId;\n    }),\n    borrowerIndex: borrowers.findIndex((_ref4) => {\n      let {\n        _id\n      } = _ref4;\n      return _id === borrowerId;\n    }),\n    value: value,\n    otherValueOfTypeAndBorrower: otherValueOfTypeAndBorrower\n  }));\n};\n\nmodule.exportDefault(FinancingDataContainer(FinancingOwnFundsPickerForm));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingOwnFundsPickerHelpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/FinancingOwnFundsPickerHelpers.j //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  chooseOwnFundsTypes: () => chooseOwnFundsTypes,\n  shouldAskForUsageType: () => shouldAskForUsageType,\n  getOwnFundsOfTypeAndBorrower: () => getOwnFundsOfTypeAndBorrower,\n  getAvailableFundsOfTypeAndBorrower: () => getAvailableFundsOfTypeAndBorrower,\n  calculateRemainingFunds: () => calculateRemainingFunds,\n  makeNewOwnFundsArray: () => makeNewOwnFundsArray,\n  getCurrentPledgedFunds: () => getCurrentPledgedFunds,\n  getNewWantedLoanAfterPledge: () => getNewWantedLoanAfterPledge,\n  getMaxPledge: () => getMaxPledge\n});\nlet OWN_FUNDS_TYPES, OWN_FUNDS_USAGE_TYPES;\nmodule.link(\"../../../../../api/constants\", {\n  OWN_FUNDS_TYPES(v) {\n    OWN_FUNDS_TYPES = v;\n  },\n\n  OWN_FUNDS_USAGE_TYPES(v) {\n    OWN_FUNDS_USAGE_TYPES = v;\n  }\n\n}, 0);\nlet Calculator;\nmodule.link(\"../../../../../utils/Calculator\", {\n  default(v) {\n    Calculator = v;\n  }\n\n}, 1);\nlet calculateMaxLoan;\nmodule.link(\"../../FinancingFinancing/FinancingFinancing\", {\n  calculateMaxLoan(v) {\n    calculateMaxLoan = v;\n  }\n\n}, 2);\n\nconst chooseOwnFundsTypes = (_ref) => {\n  let {\n    loan: {\n      residenceType\n    }\n  } = _ref;\n  return Calculator.getAllowedOwnFundsTypes({\n    residenceType\n  });\n};\n\nconst shouldAskForUsageType = type => [OWN_FUNDS_TYPES.INSURANCE_2, OWN_FUNDS_TYPES.INSURANCE_3A, OWN_FUNDS_TYPES.INSURANCE_3B, OWN_FUNDS_TYPES.BANK_3A].includes(type);\n\nconst getOwnFundsOfTypeAndBorrower = (_ref2) => {\n  let {\n    structure,\n    ownFundsIndex = -1,\n    type,\n    borrowerId\n  } = _ref2;\n  return structure && structure.ownFunds.filter((_, index) => index !== ownFundsIndex).filter((_ref3) => {\n    let {\n      type: otherType,\n      borrowerId: bId\n    } = _ref3;\n    return otherType === type && bId === borrowerId;\n  }).reduce((sum, _ref4) => {\n    let {\n      value\n    } = _ref4;\n    return sum + value;\n  }, 0);\n};\n\nconst getAvailableFundsOfTypeAndBorrower = (_ref5) => {\n  let {\n    type,\n    borrowerId,\n    borrowers\n  } = _ref5;\n  return Calculator.getFunds({\n    borrowers: borrowers.find((_ref6) => {\n      let {\n        _id\n      } = _ref6;\n      return _id === borrowerId;\n    }),\n    type\n  });\n};\n\nconst calculateRemainingFunds = (_ref7) => {\n  let {\n    type,\n    ownFundsIndex,\n    structure,\n    borrowers,\n    borrowerId\n  } = _ref7;\n\n  if (!type) {\n    return undefined;\n  }\n\n  const usedValue = getOwnFundsOfTypeAndBorrower({\n    structure,\n    ownFundsIndex,\n    type,\n    borrowerId\n  });\n  const available = getAvailableFundsOfTypeAndBorrower({\n    borrowerId,\n    type,\n    borrowers\n  });\n  return available - usedValue;\n};\n\nconst makeNewOwnFundsArray = (_ref8) => {\n  let {\n    type,\n    usageType,\n    borrowerId,\n    value,\n    structure,\n    ownFundsIndex,\n    shouldDelete\n  } = _ref8;\n\n  if (shouldDelete || value === 0) {\n    return [...structure.ownFunds.slice(0, ownFundsIndex), ...structure.ownFunds.slice(ownFundsIndex + 1)];\n  }\n\n  const newObject = {\n    type,\n    usageType: shouldAskForUsageType(type) ? usageType : undefined,\n    borrowerId,\n    value\n  };\n\n  if (ownFundsIndex < 0) {\n    return [...structure.ownFunds, newObject];\n  }\n\n  return [...structure.ownFunds.slice(0, ownFundsIndex), newObject, ...structure.ownFunds.slice(ownFundsIndex + 1)];\n};\n\nconst getCurrentPledgedFunds = (_ref9) => {\n  let {\n    ownFundsIndex,\n    ownFunds\n  } = _ref9;\n  return ownFunds.filter((_, index) => index !== ownFundsIndex).filter((_ref10) => {\n    let {\n      usageType\n    } = _ref10;\n    return usageType === OWN_FUNDS_USAGE_TYPES.PLEDGE;\n  }).reduce((sum, _ref11) => {\n    let {\n      value\n    } = _ref11;\n    return sum + value;\n  }, 0);\n};\n\nconst getNewWantedLoanAfterPledge = props => {\n  const {\n    loan,\n    structureId,\n    usageType,\n    value,\n    ownFundsIndex\n  } = props;\n  const {\n    wantedLoan,\n    ownFunds\n  } = Calculator.selectStructure({\n    loan,\n    structureId\n  });\n\n  if (usageType !== OWN_FUNDS_USAGE_TYPES.PLEDGE) {\n    return wantedLoan;\n  }\n\n  const currentPledgedFunds = getCurrentPledgedFunds({\n    ownFunds,\n    ownFundsIndex\n  });\n  const maxLoanWithNewPledge = calculateMaxLoan(props, currentPledgedFunds + value);\n  return maxLoanWithNewPledge;\n};\n\nconst getMaxPledge = props => {\n  const {\n    loan,\n    structureId\n  } = props;\n  const {\n    propertyWork\n  } = Calculator.selectStructure({\n    loan,\n    structureId\n  });\n  const propertyValue = Calculator.selectPropertyValue({\n    loan,\n    structureId\n  });\n  return Math.round((Calculator.maxBorrowRatioWithPledge - Calculator.maxBorrowRatio) * (propertyValue + propertyWork));\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingOwnFundsPledgeWarning.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/FinancingOwnFundsPledgeWarning.j //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet OWN_FUNDS_USAGE_TYPES;\nmodule.link(\"../../../../../api/constants\", {\n  OWN_FUNDS_USAGE_TYPES(v) {\n    OWN_FUNDS_USAGE_TYPES = v;\n  }\n\n}, 1);\nlet Icon;\nmodule.link(\"../../../../Icon\", {\n  default(v) {\n    Icon = v;\n  }\n\n}, 2);\nlet T;\nmodule.link(\"../../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 3);\nlet getMaxPledge;\nmodule.link(\"./FinancingOwnFundsPickerHelpers\", {\n  getMaxPledge(v) {\n    getMaxPledge = v;\n  }\n\n}, 4);\nlet toMoney;\nmodule.link(\"../../../../../utils/conversionFunctions\", {\n  toMoney(v) {\n    toMoney = v;\n  }\n\n}, 5);\n\nconst FinancingOwnFundsPledgeWarning = props => {\n  if (props.usageType === OWN_FUNDS_USAGE_TYPES.PLEDGE) {\n    const maxPledge = getMaxPledge(props);\n    return React.createElement(\"p\", {\n      className: \"financing-pledge-warning primary\"\n    }, React.createElement(Icon, {\n      type: \"info\",\n      className: \"icon\"\n    }), React.createElement(T, {\n      id: \"FinancingOwnFundsPledgeWarning.description\",\n      values: {\n        maxPledge: React.createElement(\"b\", {\n          style: {\n            color: 'black'\n          }\n        }, \"\\xA0\", toMoney(maxPledge), \"\\xA0\")\n      }\n    }));\n  }\n\n  return null;\n};\n\nmodule.exportDefault(FinancingOwnFundsPledgeWarning);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingOwnFundsWarning.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/FinancingOwnFundsWarning.jsx     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet toMoney;\nmodule.link(\"../../../../../utils/conversionFunctions\", {\n  toMoney(v) {\n    toMoney = v;\n  }\n\n}, 1);\nlet T;\nmodule.link(\"../../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 2);\n\nconst FinancingOwnFundsWarning = (_ref) => {\n  let {\n    borrower: {\n      firstName\n    },\n    borrowerIndex,\n    type,\n    value,\n    otherValueOfTypeAndBorrower\n  } = _ref;\n  return React.createElement(\"p\", null, React.createElement(T, {\n    id: \"FinancingOwnFundsPickerForm.warning\",\n    values: {\n      name: React.createElement(\"b\", null, firstName || React.createElement(T, {\n        id: \"general.borrowerWithIndex\",\n        values: {\n          index: borrowerIndex + 1\n        }\n      })),\n      value: React.createElement(\"b\", {\n        className: \"primary\"\n      }, toMoney(otherValueOfTypeAndBorrower + value)),\n      type: React.createElement(\"b\", null, React.createElement(T, {\n        id: \"Forms.\".concat(type)\n      }))\n    }\n  }));\n};\n\nmodule.exportDefault(FinancingOwnFundsWarning);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"OwnFundsCompleter.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/OwnFundsCompleter.jsx            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet T;\nmodule.link(\"../../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 1);\nlet OwnFundsCompleterContainer;\nmodule.link(\"./OwnFundsCompleterContainer\", {\n  default(v) {\n    OwnFundsCompleterContainer = v;\n  }\n\n}, 2);\nlet toMoney;\nmodule.link(\"../../../../../utils/conversionFunctions\", {\n  toMoney(v) {\n    toMoney = v;\n  }\n\n}, 3);\n\nconst OwnFundsCompleter = (_ref) => {\n  let {\n    required,\n    current\n  } = _ref;\n  return React.createElement(\"div\", {\n    className: \"own-funds-completer\"\n  }, React.createElement(\"h4\", null, React.createElement(T, {\n    id: \"Financing.ownFundsCompleter\",\n    values: {\n      current: React.createElement(\"span\", {\n        className: current === required ? 'success' : current < required ? 'primary' : 'error'\n      }, toMoney(current)),\n      required: React.createElement(\"span\", {\n        className: \"secondary\"\n      }, toMoney(required))\n    }\n  })));\n};\n\nmodule.exportDefault(OwnFundsCompleterContainer(OwnFundsCompleter));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"OwnFundsCompleterContainer.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/OwnFundsCompleterContainer.js    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  getRequiredAndCurrentFunds: () => getRequiredAndCurrentFunds\n});\nlet compose, withProps;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  },\n\n  withProps(v) {\n    withProps = v;\n  }\n\n}, 0);\nlet OWN_FUNDS_USAGE_TYPES;\nmodule.link(\"../../../../../api/constants\", {\n  OWN_FUNDS_USAGE_TYPES(v) {\n    OWN_FUNDS_USAGE_TYPES = v;\n  }\n\n}, 1);\nlet FinancingDataContainer;\nmodule.link(\"../../containers/FinancingDataContainer\", {\n  default(v) {\n    FinancingDataContainer = v;\n  }\n\n}, 2);\nlet SingleStructureContainer;\nmodule.link(\"../../containers/SingleStructureContainer\", {\n  default(v) {\n    SingleStructureContainer = v;\n  }\n\n}, 3);\nlet getCurrentPledgedFunds, getMaxPledge;\nmodule.link(\"./FinancingOwnFundsPickerHelpers\", {\n  getCurrentPledgedFunds(v) {\n    getCurrentPledgedFunds = v;\n  },\n\n  getMaxPledge(v) {\n    getMaxPledge = v;\n  }\n\n}, 4);\nlet Calculator;\nmodule.link(\"../../../../../utils/Calculator\", {\n  default(v) {\n    Calculator = v;\n  }\n\n}, 5);\n\nconst removePreviousValueEffect = (_ref) => {\n  let {\n    props,\n    ownFundsIndex,\n    ownFunds\n  } = _ref;\n  let requiredChange = 0;\n  let currentChange = 0; // Editing existing value, cancel its effect\n\n  const previousIsPledged = ownFunds[ownFundsIndex].usageType === OWN_FUNDS_USAGE_TYPES.PLEDGE;\n\n  if (previousIsPledged) {\n    const maxPledge = getMaxPledge(props);\n    const previousPledgedValue = ownFunds[ownFundsIndex].value;\n    requiredChange = Math.min(previousPledgedValue, maxPledge);\n  } else {\n    currentChange = -ownFunds[ownFundsIndex].value;\n  }\n\n  return {\n    requiredChange,\n    currentChange\n  };\n};\n\nconst removePledgingEffect = (_ref2) => {\n  let {\n    props,\n    ownFunds,\n    ownFundsIndex,\n    value\n  } = _ref2;\n  const maxPledge = getMaxPledge(props);\n  const currentPledgedFunds = getCurrentPledgedFunds({\n    ownFunds,\n    ownFundsIndex\n  });\n  return {\n    requiredChange: -Math.min(currentPledgedFunds + (value || 0), maxPledge),\n    currentChange: -value || 0\n  };\n};\n\nconst getRequiredAndCurrentFunds = props => {\n  const {\n    value,\n    structure: {\n      ownFunds\n    },\n    ownFundsIndex,\n    usageType\n  } = props;\n  let required = Calculator.getRequiredOwnFunds(props);\n  const previousNonPledgedFunds = ownFunds.filter((_ref3) => {\n    let {\n      usageType: uT\n    } = _ref3;\n    return uT !== OWN_FUNDS_USAGE_TYPES.PLEDGE;\n  }).reduce((sum, _ref4) => {\n    let {\n      value: v\n    } = _ref4;\n    return sum + v;\n  }, 0);\n  let current = previousNonPledgedFunds + (value || 0);\n  const isEditing = ownFundsIndex >= 0;\n\n  if (isEditing) {\n    const {\n      requiredChange,\n      currentChange\n    } = removePreviousValueEffect({\n      props,\n      ownFundsIndex,\n      ownFunds\n    });\n    required += requiredChange;\n    current += currentChange;\n  }\n\n  if (usageType === OWN_FUNDS_USAGE_TYPES.PLEDGE) {\n    const {\n      requiredChange,\n      currentChange\n    } = removePledgingEffect({\n      props,\n      ownFunds,\n      ownFundsIndex,\n      value\n    });\n    required += requiredChange;\n    current += currentChange;\n  }\n\n  return {\n    required,\n    current\n  };\n};\n\nconst OwnFundsCompleterContainer = compose(SingleStructureContainer, FinancingDataContainer, withProps(getRequiredAndCurrentFunds));\nmodule.exportDefault(OwnFundsCompleterContainer);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"test\":{\"RequiredOwnFunds.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOwnFunds/test/RequiredOwnFunds.spec.jsx                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet shallow;\nmodule.link(\"../../../../../utils/testHelpers/enzyme\", {\n  shallow(v) {\n    shallow = v;\n  }\n\n}, 2);\nlet StatusIcon;\nmodule.link(\"../../../../StatusIcon\", {\n  default(v) {\n    StatusIcon = v;\n  }\n\n}, 3);\nlet RequiredOwnFundsBody;\nmodule.link(\"../RequiredOwnFundsBody\", {\n  default(v) {\n    RequiredOwnFundsBody = v;\n  }\n\n}, 4);\nlet SUCCESS, ERROR;\nmodule.link(\"../../../../../api/constants\", {\n  SUCCESS(v) {\n    SUCCESS = v;\n  },\n\n  ERROR(v) {\n    ERROR = v;\n  }\n\n}, 5);\nlet OWN_FUNDS_ROUNDING_AMOUNT;\nmodule.link(\"../../../../../config/financeConstants\", {\n  OWN_FUNDS_ROUNDING_AMOUNT(v) {\n    OWN_FUNDS_ROUNDING_AMOUNT = v;\n  }\n\n}, 6);\ndescribe('RequiredOwnFunds', () => {\n  let props;\n\n  const component = () => shallow(React.createElement(RequiredOwnFundsBody, props));\n\n  beforeEach(() => {\n    props = {\n      value: 0\n    };\n  });\n  it('displays valid text when value is 0', () => {\n    expect(component().find('.text').children().first().props().id).to.include('valid');\n  });\n  it('shows valid when value is rounding amount', () => {\n    props.value = OWN_FUNDS_ROUNDING_AMOUNT;\n    expect(component().find('.text').children().first().props().id).to.include('valid');\n  });\n  it('shows valid when value is negative rounding amount', () => {\n    props.value = -OWN_FUNDS_ROUNDING_AMOUNT;\n    expect(component().find('.text').children().first().props().id).to.include('valid');\n  });\n  it('shows too low allocated own funds if value is high', () => {\n    props.value = OWN_FUNDS_ROUNDING_AMOUNT + 1000;\n    expect(component().find('.text').children().first().props().id).to.include('low');\n  });\n  it('shows too much allocated own funds if value is high', () => {\n    props.value = -OWN_FUNDS_ROUNDING_AMOUNT - 1000;\n    expect(component().find('.text').children().first().props().id).to.include('high');\n  });\n  it('shows success icon when value is valid', () => {\n    expect(component().find(StatusIcon).first().props().status).to.equal(SUCCESS);\n  });\n  it('shows success icon when value is invalid', () => {\n    props.value = OWN_FUNDS_ROUNDING_AMOUNT + 1000;\n    expect(component().find(StatusIcon).first().props().status).to.equal(ERROR);\n  });\n  it('shows valid when value is -rounding plus a sub-1 amount', () => {\n    props.value = -OWN_FUNDS_ROUNDING_AMOUNT + 0.5;\n    expect(component().find('.text').children().first().props().id).to.include('valid');\n  });\n  it('shows valid when value is rounding minus a sub-1 amount', () => {\n    props.value = OWN_FUNDS_ROUNDING_AMOUNT - 0.5;\n    expect(component().find('.text').children().first().props().id).to.include('valid');\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"RequiredOwnFundsBody.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingOwnFunds/RequiredOwnFundsBody.jsx                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet FontAwesomeIcon;\nmodule.link(\"@fortawesome/react-fontawesome\", {\n  FontAwesomeIcon(v) {\n    FontAwesomeIcon = v;\n  }\n\n}, 1);\nlet faMagic;\nmodule.link(\"@fortawesome/pro-light-svg-icons/faMagic\", {\n  faMagic(v) {\n    faMagic = v;\n  }\n\n}, 2);\nlet StatusIcon;\nmodule.link(\"../../../StatusIcon\", {\n  default(v) {\n    StatusIcon = v;\n  }\n\n}, 3);\nlet T, Money;\nmodule.link(\"../../../Translation\", {\n  default(v) {\n    T = v;\n  },\n\n  Money(v) {\n    Money = v;\n  }\n\n}, 4);\nlet toMoney;\nmodule.link(\"../../../../utils/conversionFunctions\", {\n  toMoney(v) {\n    toMoney = v;\n  }\n\n}, 5);\nlet OWN_FUNDS_ROUNDING_AMOUNT;\nmodule.link(\"../../../../config/financeConstants\", {\n  OWN_FUNDS_ROUNDING_AMOUNT(v) {\n    OWN_FUNDS_ROUNDING_AMOUNT = v;\n  }\n\n}, 6);\nlet SUCCESS, ERROR;\nmodule.link(\"../../../../api/constants\", {\n  SUCCESS(v) {\n    SUCCESS = v;\n  },\n\n  ERROR(v) {\n    ERROR = v;\n  }\n\n}, 7);\nlet IconButton;\nmodule.link(\"../../../IconButton\", {\n  default(v) {\n    IconButton = v;\n  }\n\n}, 8);\n\nconst getLabel = value => {\n  if (value > OWN_FUNDS_ROUNDING_AMOUNT) {\n    return 'Financing.requiredOwnFunds.low';\n  }\n\n  if (value < -OWN_FUNDS_ROUNDING_AMOUNT) {\n    return 'Financing.requiredOwnFunds.high';\n  }\n\n  return 'Financing.requiredOwnFunds.valid';\n};\n\nconst RequiredOwnFundsBody = (_ref) => {\n  let {\n    value,\n    suggestStructure,\n    disableForms,\n    loan = {}\n  } = _ref;\n  const label = getLabel(value);\n  const {\n    borrowers = []\n  } = loan;\n  return React.createElement(\"div\", {\n    className: \"requiredOwnFunds-component-body\"\n  }, React.createElement(\"div\", {\n    className: \"text-and-value\"\n  }, React.createElement(\"span\", {\n    className: \"text\"\n  }, React.createElement(T, {\n    id: label\n  })), React.createElement(\"div\", {\n    className: \"value\"\n  }, React.createElement(\"span\", {\n    className: \"chf\"\n  }, \"CHF\"), toMoney(Math.abs(value)), React.createElement(StatusIcon, {\n    status: label.endsWith('valid') ? SUCCESS : ERROR,\n    style: {\n      marginLeft: 8\n    },\n    tooltip: React.createElement(T, {\n      id: \"\".concat(label, \".tooltip\"),\n      values: {\n        value: React.createElement(Money, {\n          value: Math.abs(value)\n        })\n      }\n    })\n  }))), !disableForms && !!borrowers.length && React.createElement(IconButton, {\n    type: React.createElement(FontAwesomeIcon, {\n      icon: faMagic\n    }),\n    onClick: suggestStructure,\n    tooltip: \"Sugg\\xE9rer\"\n  }));\n};\n\nmodule.exportDefault(RequiredOwnFundsBody);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"FinancingSection\":{\"components\":{\"test\":{\"InputAndSliderField.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingSection/components/test/InputAndSliderField.spec.jsx              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet sinon;\nmodule.link(\"sinon\", {\n  default(v) {\n    sinon = v;\n  }\n\n}, 2);\nlet mount;\nmodule.link(\"../../../../../../utils/testHelpers/enzyme\", {\n  mount(v) {\n    mount = v;\n  }\n\n}, 3);\nlet InputAndSliderField;\nmodule.link(\"../InputAndSliderField\", {\n  InputAndSliderField(v) {\n    InputAndSliderField = v;\n  }\n\n}, 4);\nlet MoneyInput;\nmodule.link(\"../../../../../MoneyInput/MoneyInput\", {\n  default(v) {\n    MoneyInput = v;\n  }\n\n}, 5);\nlet Slider;\nmodule.link(\"../../../../../Material/Slider\", {\n  default(v) {\n    Slider = v;\n  }\n\n}, 6);\ndescribe('InputAndSliderField', () => {\n  let props;\n\n  const component = () => mount(React.createElement(InputAndSliderField, props));\n\n  const inputValue = wrapper => wrapper.find(MoneyInput).props().value;\n\n  const sliderValue = wrapper => wrapper.find(Slider).props().value;\n\n  beforeEach(() => {\n    props = {};\n  });\n  it('allows undefined values', () => {\n    props = {\n      allowUndefined: true,\n      value: 12\n    };\n    const wrapper = component();\n    expect(inputValue(wrapper)).to.equal(12);\n    expect(sliderValue(wrapper)).to.equal(12);\n    wrapper.setProps({\n      value: ''\n    });\n    wrapper.update();\n    expect(inputValue(wrapper)).to.equal('');\n    expect(sliderValue(wrapper)).to.equal('');\n  });\n  it('does not allow undefined values', () => {\n    props = {\n      value: 12\n    };\n    const wrapper = component();\n    expect(inputValue(wrapper)).to.equal(12);\n    expect(sliderValue(wrapper)).to.equal(12);\n    wrapper.setProps({\n      value: ''\n    });\n    wrapper.update();\n    expect(inputValue(wrapper)).to.equal(0);\n    expect(sliderValue(wrapper)).to.equal(0);\n  });\n  it('forces 0 to be undefined values', () => {\n    props = {\n      allowUndefined: true,\n      forceUndefined: true,\n      value: 12\n    };\n    const wrapper = component();\n    expect(inputValue(wrapper)).to.equal(12);\n    expect(sliderValue(wrapper)).to.equal(12);\n    wrapper.setProps({\n      value: 0\n    });\n    wrapper.update();\n    expect(inputValue(wrapper)).to.equal('');\n    expect(sliderValue(wrapper)).to.equal('');\n  });\n  it('does not force 0 to be undefined values when undefined values are not allowed', () => {\n    props = {\n      forceUndefined: true,\n      value: 12\n    };\n    const wrapper = component();\n    expect(inputValue(wrapper)).to.equal(12);\n    expect(sliderValue(wrapper)).to.equal(12);\n    wrapper.setProps({\n      value: 0\n    });\n    wrapper.update();\n    expect(inputValue(wrapper)).to.equal(0);\n    expect(sliderValue(wrapper)).to.equal(0);\n  });\n  describe('onChange', () => {\n    it('let the user type his value when it is less than max', () => {\n      const onChange = sinon.spy();\n      props = {\n        value: 12,\n        onChange,\n        max: 50\n      };\n      const wrapper = component();\n      wrapper.find('input').simulate('change', {\n        target: {\n          value: 15\n        }\n      });\n      expect(onChange.calledOnce).to.equal(true);\n      expect(onChange.firstCall.args).to.deep.equal([15]);\n    });\n    it('does not let the user type more than max', () => {\n      const onChange = sinon.spy();\n      props = {\n        value: 12,\n        onChange,\n        max: 50\n      };\n      const wrapper = component();\n      wrapper.find('input').simulate('change', {\n        target: {\n          value: 60\n        }\n      });\n      expect(onChange.calledOnce).to.equal(true);\n      expect(onChange.firstCall.args).to.deep.equal([50]);\n    });\n    it('does not let the user type an empty string when undefined values are not allowed', () => {\n      const onChange = sinon.spy();\n      props = {\n        value: 12,\n        onChange,\n        max: 50\n      };\n      const wrapper = component();\n      wrapper.find('input').simulate('change', {\n        target: {\n          value: ''\n        }\n      });\n      expect(onChange.calledOnce).to.equal(true);\n      expect(onChange.firstCall.args).to.deep.equal([0]);\n    });\n    it('let the user type empty strings when undefined values are allowed', () => {\n      const onChange = sinon.spy();\n      props = {\n        value: 12,\n        onChange,\n        allowUndefined: true,\n        max: 50\n      };\n      const wrapper = component();\n      wrapper.find('input').simulate('change', {\n        target: {\n          value: ''\n        }\n      });\n      expect(onChange.calledOnce).to.equal(true);\n      expect(onChange.firstCall.args).to.deep.equal(['']);\n    });\n    it('forces 0 values to empty strings when forceUndefined and allowUndefined are true', () => {\n      const onChange = sinon.spy();\n      props = {\n        value: 12,\n        onChange,\n        allowUndefined: true,\n        forceUndefined: true\n      };\n      const wrapper = component();\n      wrapper.find('input').simulate('change', {\n        target: {\n          value: ''\n        }\n      });\n      expect(onChange.calledOnce).to.equal(true);\n      expect(onChange.firstCall.args).to.deep.equal(['']);\n    });\n    it('does not force 0 values to empty strings when forceUndefined is true but undefined values are not allowed', () => {\n      const onChange = sinon.spy();\n      props = {\n        value: 12,\n        onChange,\n        forceUndefined: true\n      };\n      const wrapper = component();\n      wrapper.find('input').simulate('change', {\n        target: {\n          value: 0\n        }\n      });\n      expect(onChange.calledOnce).to.equal(true);\n      expect(onChange.firstCall.args).to.deep.equal([0]);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"CalculatedValue.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingSection/components/CalculatedValue.jsx                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nmodule.export({\n  FORMATS: () => FORMATS\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet cx;\nmodule.link(\"classnames\", {\n  default(v) {\n    cx = v;\n  }\n\n}, 1);\nlet compose;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  }\n\n}, 2);\nlet toMoney;\nmodule.link(\"../../../../../utils/conversionFunctions\", {\n  toMoney(v) {\n    toMoney = v;\n  }\n\n}, 3);\nlet SingleStructureContainer;\nmodule.link(\"../../containers/SingleStructureContainer\", {\n  default(v) {\n    SingleStructureContainer = v;\n  }\n\n}, 4);\nlet FinancingDataContainer;\nmodule.link(\"../../containers/FinancingDataContainer\", {\n  default(v) {\n    FinancingDataContainer = v;\n  }\n\n}, 5);\nlet Percent;\nmodule.link(\"../../../../Translation\", {\n  Percent(v) {\n    Percent = v;\n  }\n\n}, 6);\nconst FORMATS = {\n  MONEY: 'MONEY',\n  PERCENT: 'PERCENT',\n  DEFAULT: 'DEFAULT'\n};\nconst formatters = {\n  [FORMATS.MONEY]: value => React.createElement(React.Fragment, null, React.createElement(\"span\", {\n    className: \"chf\"\n  }, \"CHF\"), toMoney(value)),\n  [FORMATS.PERCENT]: value => React.createElement(Percent, {\n    value: value\n  }),\n  [FORMATS.DEFAULT]: value => value\n};\n\nconst CalculatedValue = (_ref) => {\n  let {\n    value,\n    format = FORMATS.MONEY,\n    className,\n    children,\n    rightElement\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"value\", \"format\", \"className\", \"children\", \"rightElement\"]);\n  const displayValue = typeof value === 'function' ? value(props) : value;\n  return React.createElement(\"div\", {\n    className: cx('calculated-value', className)\n  }, children ? children(displayValue) : formatters[format](displayValue), rightElement ? rightElement(displayValue) : null);\n};\n\nmodule.exportDefault(compose(SingleStructureContainer, FinancingDataContainer, React.memo)(CalculatedValue));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinmaRatio.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingSection/components/FinmaRatio.jsx                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet compose;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  }\n\n}, 1);\nlet CalculatedValue;\nmodule.link(\"./CalculatedValue\", {\n  default(v) {\n    CalculatedValue = v;\n  }\n\n}, 2);\nlet PercentWithStatus;\nmodule.link(\"../../../../PercentWithStatus/PercentWithStatus\", {\n  default(v) {\n    PercentWithStatus = v;\n  }\n\n}, 3);\nlet FinancingDataContainer;\nmodule.link(\"../../containers/FinancingDataContainer\", {\n  default(v) {\n    FinancingDataContainer = v;\n  }\n\n}, 4);\n\nconst FinmaRatio = (_ref) => {\n  let {\n    status,\n    tooltip,\n    id\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"status\", \"tooltip\", \"id\"]);\n  return React.createElement(CalculatedValue, props, value => React.createElement(PercentWithStatus, {\n    value: value,\n    status: status((0, _objectSpread2.default)({}, props, {\n      value\n    })),\n    tooltip: tooltip,\n    id: id\n  }));\n};\n\nmodule.exportDefault(compose(FinancingDataContainer, React.memo)(FinmaRatio));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"InputAndSlider.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingSection/components/InputAndSlider.jsx                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nmodule.export({\n  InputAndSlider: () => InputAndSlider\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet cx;\nmodule.link(\"classnames\", {\n  default(v) {\n    cx = v;\n  }\n\n}, 1);\nlet AutoForm;\nmodule.link(\"uniforms-material/AutoForm\", {\n  default(v) {\n    AutoForm = v;\n  }\n\n}, 2);\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 3);\nlet compose, withProps;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  },\n\n  withProps(v) {\n    withProps = v;\n  }\n\n}, 4);\nlet StructureUpdateContainer;\nmodule.link(\"../../containers/StructureUpdateContainer\", {\n  default(v) {\n    StructureUpdateContainer = v;\n  }\n\n}, 5);\nlet FinancingDataContainer;\nmodule.link(\"../../containers/FinancingDataContainer\", {\n  default(v) {\n    FinancingDataContainer = v;\n  }\n\n}, 6);\nlet toMoney;\nmodule.link(\"../../../../../utils/conversionFunctions\", {\n  toMoney(v) {\n    toMoney = v;\n  }\n\n}, 7);\nlet InputAndSliderField;\nmodule.link(\"./InputAndSliderField\", {\n  default(v) {\n    InputAndSliderField = v;\n  }\n\n}, 8);\n\nconst InputAndSlider = (_ref) => {\n  let {\n    className,\n    id,\n    schema,\n    value,\n    updateStructure\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"className\", \"id\", \"schema\", \"value\", \"updateStructure\"]);\n  return React.createElement(\"div\", {\n    className: cx('input-and-slider', className)\n  }, React.createElement(AutoForm, {\n    onSubmit: updateStructure,\n    schema: schema,\n    model: {\n      [id]: value\n    },\n    autosave: true,\n    autosaveDelay: 500,\n    disabled: props.structure.disableForms\n  }, React.createElement(InputAndSliderField, (0, _extends2.default)({\n    name: id\n  }, props))));\n};\n\nmodule.exportDefault(compose(FinancingDataContainer, StructureUpdateContainer, withProps((_ref2) => {\n  let {\n    max: _max,\n    calculatePlaceholder,\n    placeholder,\n    id,\n    allowUndefined\n  } = _ref2,\n      props = (0, _objectWithoutProperties2.default)(_ref2, [\"max\", \"calculatePlaceholder\", \"placeholder\", \"id\", \"allowUndefined\"]);\n  return {\n    max: typeof _max === 'function' ? _max(props) : _max,\n    placeholder: calculatePlaceholder ? toMoney(calculatePlaceholder(props)) : placeholder,\n    schema: new SimpleSchema({\n      [id]: {\n        type: Number,\n        optional: allowUndefined\n      }\n    })\n  };\n}))(InputAndSlider));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"InputAndSliderField.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingSection/components/InputAndSliderField.jsx                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  InputAndSliderField: () => InputAndSliderField\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet connectField;\nmodule.link(\"uniforms/connectField\", {\n  default(v) {\n    connectField = v;\n  }\n\n}, 1);\nlet Slider;\nmodule.link(\"../../../../Material/Slider\", {\n  default(v) {\n    Slider = v;\n  }\n\n}, 2);\nlet MoneyInput;\nmodule.link(\"../../../../MoneyInput\", {\n  default(v) {\n    MoneyInput = v;\n  }\n\n}, 3);\n\nconst valueIsNotDefined = value => value === '' || value === undefined || value === null;\n\nconst makeHandleTextChange = (_ref) => {\n  let {\n    onChange,\n    max,\n    allowUndefined,\n    forceUndefined\n  } = _ref;\n  return value => {\n    if (allowUndefined && valueIsNotDefined(value)) {\n      return onChange('');\n    }\n\n    if (max && value) {\n      return onChange(Math.min(value, max));\n    }\n\n    return onChange(value || (forceUndefined && allowUndefined ? '' : 0));\n  };\n};\n\nconst setValue = (value, allowUndefined, forceUndefined) => {\n  if (allowUndefined) {\n    return forceUndefined && value === 0 ? '' : valueIsNotDefined(value) && '' || value;\n  }\n\n  return value || 0;\n};\n\nconst InputAndSliderField = props => {\n  const {\n    value,\n    onChange,\n    placeholder,\n    forceUndefined,\n    allowUndefined,\n    max = 1000000,\n    maxSlider,\n    disabled\n  } = props;\n  const maxSliderValue = maxSlider || max;\n  return React.createElement(React.Fragment, null, React.createElement(MoneyInput, {\n    value: setValue(value, allowUndefined, forceUndefined),\n    onChange: makeHandleTextChange(props),\n    placeholder: placeholder === undefined ? '' : \"\".concat(placeholder) // Placeholders should always be a string\n    ,\n    className: \"money-input\",\n    disabled: disabled\n  }), React.createElement(Slider, {\n    min: 0,\n    max: Math.max(maxSliderValue, value),\n    step: 1000,\n    value: setValue(value, allowUndefined, forceUndefined),\n    onChange: onChange,\n    className: \"slider\",\n    disabled: disabled\n  }));\n};\n\nmodule.exportDefault(connectField(InputAndSliderField));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"RadioButtons.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingSection/components/RadioButtons.jsx                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Radio;\nmodule.link(\"@material-ui/core/Radio\", {\n  default(v) {\n    Radio = v;\n  }\n\n}, 1);\nlet RadioGroup;\nmodule.link(\"@material-ui/core/RadioGroup\", {\n  default(v) {\n    RadioGroup = v;\n  }\n\n}, 2);\nlet FormControlLabel;\nmodule.link(\"@material-ui/core/FormControlLabel\", {\n  default(v) {\n    FormControlLabel = v;\n  }\n\n}, 3);\nlet cx;\nmodule.link(\"classnames\", {\n  default(v) {\n    cx = v;\n  }\n\n}, 4);\nlet T;\nmodule.link(\"../../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 5);\nlet StructureUpdateContainer;\nmodule.link(\"../../containers/StructureUpdateContainer\", {\n  default(v) {\n    StructureUpdateContainer = v;\n  }\n\n}, 6);\n\nconst RadioButtons = (_ref) => {\n  let {\n    value,\n    updateStructure,\n    options,\n    className\n  } = _ref;\n  return React.createElement(RadioGroup, {\n    \"aria-label\": \"Gender\",\n    value: value,\n    onChange: event => updateStructure(event.target.value),\n    className: cx('radio-buttons', className)\n  }, options.map((_ref2) => {\n    let {\n      id,\n      label\n    } = _ref2;\n    return React.createElement(FormControlLabel, {\n      key: id,\n      value: id,\n      control: React.createElement(Radio, null),\n      label: React.createElement(T, {\n        id: label\n      })\n    });\n  }));\n};\n\nmodule.exportDefault(StructureUpdateContainer(RadioButtons));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingSection/components/index.js                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./InputAndSlider\", {\n  default: \"InputAndSlider\"\n}, 0);\nmodule.link(\"./RadioButtons\", {\n  default: \"RadioButtons\"\n}, 1);\nmodule.link(\"./FinmaRatio\", {\n  default: \"FinmaRatio\"\n}, 2);\nmodule.link(\"./CalculatedValue\", {\n  default: \"CalculatedValue\",\n  FORMATS: \"FORMATS\"\n}, 3);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"FinancingSection.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingSection/FinancingSection.jsx                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet ScrollSyncPane;\nmodule.link(\"react-scroll-sync\", {\n  ScrollSyncPane(v) {\n    ScrollSyncPane = v;\n  }\n\n}, 1);\nlet FinancingDataContainer;\nmodule.link(\"../containers/FinancingDataContainer\", {\n  default(v) {\n    FinancingDataContainer = v;\n  }\n\n}, 2);\nlet FinancingSectionExpansionPanel;\nmodule.link(\"./FinancingSectionExpansionPanel\", {\n  default(v) {\n    FinancingSectionExpansionPanel = v;\n  }\n\n}, 3);\n\nconst FinancingSection = (_ref) => {\n  let {\n    detailConfig,\n    noWrapper,\n    summaryConfig,\n    className\n  } = _ref,\n      sectionProps = (0, _objectWithoutProperties2.default)(_ref, [\"detailConfig\", \"noWrapper\", \"summaryConfig\", \"className\"]);\n  return React.createElement(ScrollSyncPane, null, React.createElement(FinancingSectionExpansionPanel, {\n    noWrapper: noWrapper,\n    sectionProps: sectionProps,\n    summaryConfig: summaryConfig,\n    detailConfig: detailConfig,\n    className: className\n  }));\n};\n\nmodule.exportDefault(FinancingDataContainer(FinancingSection));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingSectionDetails.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingSection/FinancingSectionDetails.jsx                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => FinancingSectionDetails\n});\nlet React, PureComponent;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  PureComponent(v) {\n    PureComponent = v;\n  }\n\n}, 0);\nlet ExpansionPanelDetails;\nmodule.link(\"@material-ui/core/ExpansionPanelDetails\", {\n  default(v) {\n    ExpansionPanelDetails = v;\n  }\n\n}, 1);\nlet FinancingLabels;\nmodule.link(\"../FinancingLabels\", {\n  default(v) {\n    FinancingLabels = v;\n  }\n\n}, 2);\nlet makeRenderDetail;\nmodule.link(\"./financingSectionHelpers\", {\n  makeRenderDetail(v) {\n    makeRenderDetail = v;\n  }\n\n}, 3);\n\nclass FinancingSectionDetails extends PureComponent {\n  constructor(props) {\n    super(props);\n    const {\n      detailConfig\n    } = props;\n    this.renderDetail = makeRenderDetail(detailConfig);\n  }\n\n  render() {\n    const {\n      detailConfig,\n      sectionProps,\n      noWrapper\n    } = this.props;\n    const {\n      structures\n    } = sectionProps;\n    return React.createElement(ExpansionPanelDetails, {\n      className: \"section-detail\"\n    }, React.createElement(FinancingLabels, {\n      config: detailConfig\n    }), structures.map(structure => this.renderDetail(structure, sectionProps)));\n  }\n\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingSectionExpansionPanel.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingSection/FinancingSectionExpansionPanel.jsx                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet compose, withState, lifecycle;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  },\n\n  withState(v) {\n    withState = v;\n  },\n\n  lifecycle(v) {\n    lifecycle = v;\n  }\n\n}, 1);\nlet cx;\nmodule.link(\"classnames\", {\n  default(v) {\n    cx = v;\n  }\n\n}, 2);\nlet ExpansionPanel;\nmodule.link(\"@material-ui/core/ExpansionPanel\", {\n  default(v) {\n    ExpansionPanel = v;\n  }\n\n}, 3);\nlet withStyles;\nmodule.link(\"@material-ui/core/styles\", {\n  withStyles(v) {\n    withStyles = v;\n  }\n\n}, 4);\nlet ClientEventService;\nmodule.link(\"../../../../api/events/ClientEventService\", {\n  default(v) {\n    ClientEventService = v;\n  }\n\n}, 5);\nlet FinancingSectionSummary;\nmodule.link(\"./FinancingSectionSummary\", {\n  default(v) {\n    FinancingSectionSummary = v;\n  }\n\n}, 6);\nlet FinancingSectionDetails;\nmodule.link(\"./FinancingSectionDetails\", {\n  default(v) {\n    FinancingSectionDetails = v;\n  }\n\n}, 7);\nconst styles = {\n  container: {\n    overflow: 'visible',\n    overflowY: 'hidden'\n  },\n  entered: {\n    overflowY: 'visible'\n  },\n  content: {\n    margin: 0,\n    '& > :last-child': {\n      paddingRight: 0\n    },\n    '&$expanded': {\n      margin: 0\n    }\n  },\n  expanded: {}\n};\n\nconst FinancingSectionExpansionPanel = (_ref) => {\n  let {\n    detailConfig,\n    summaryConfig,\n    classes: {\n      container,\n      entered,\n      content,\n      expanded: expandedClass\n    },\n    className,\n    expanded,\n    changeExpanded,\n    sectionProps,\n    noWrapper\n  } = _ref;\n  return React.createElement(ExpansionPanel, {\n    className: cx('financing-structures-section', className, {\n      expanded\n    }),\n    CollapseProps: {\n      classes: {\n        container,\n        entered\n      }\n    },\n    expanded: expanded,\n    onChange: () => changeExpanded(!expanded)\n  }, React.createElement(FinancingSectionSummary, {\n    summaryConfig: summaryConfig,\n    sectionProps: sectionProps,\n    noWrapper: noWrapper,\n    content: content,\n    expandedClass: expandedClass\n  }), React.createElement(FinancingSectionDetails, {\n    detailConfig: detailConfig,\n    sectionProps: sectionProps,\n    noWrapper: noWrapper\n  }));\n};\n\nmodule.exportDefault(compose(withState('expanded', 'changeExpanded', (_ref2) => {\n  let {\n    sectionProps: {\n      Calculator,\n      loan\n    }\n  } = _ref2;\n  return !Calculator.hasCompleteStructure({\n    loan\n  });\n}), lifecycle({\n  componentDidMount() {\n    const {\n      changeExpanded\n    } = this.props;\n    ClientEventService.addListener('expandAll', () => changeExpanded(true));\n    ClientEventService.addListener('collapseAll', () => changeExpanded(false));\n  },\n\n  componentWillUnmount() {\n    const {\n      changeExpanded\n    } = this.props;\n    ClientEventService.removeListener('expandAll', () => changeExpanded(true));\n    ClientEventService.removeListener('collapseAll', () => changeExpanded(false));\n  }\n\n}), withStyles(styles))(FinancingSectionExpansionPanel));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingSectionSummary.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingSection/FinancingSectionSummary.jsx                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nmodule.export({\n  default: () => FinancingSectionSummary\n});\nlet React, PureComponent;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  PureComponent(v) {\n    PureComponent = v;\n  }\n\n}, 0);\nlet ExpansionPanelSummary;\nmodule.link(\"@material-ui/core/ExpansionPanelSummary\", {\n  default(v) {\n    ExpansionPanelSummary = v;\n  }\n\n}, 1);\nlet FinancingLabels;\nmodule.link(\"../FinancingLabels\", {\n  default(v) {\n    FinancingLabels = v;\n  }\n\n}, 2);\nlet makeRenderSummary;\nmodule.link(\"./financingSectionHelpers\", {\n  makeRenderSummary(v) {\n    makeRenderSummary = v;\n  }\n\n}, 3);\nconst SummaryContent = React.memo((_ref) => {\n  let {\n    structures,\n    summaryConfig,\n    sectionProps,\n    renderSummary\n  } = _ref;\n  return React.createElement(React.Fragment, null, React.createElement(FinancingLabels, {\n    config: summaryConfig,\n    className: \"summary-labels\"\n  }), structures.map(structure => renderSummary(structure, sectionProps)));\n});\n\nclass FinancingSectionSummary extends PureComponent {\n  constructor(props) {\n    super(props);\n    const {\n      summaryConfig\n    } = props;\n    this.renderSummary = makeRenderSummary(summaryConfig);\n  }\n\n  render() {\n    const _this$props = this.props,\n          {\n      summaryConfig,\n      sectionProps,\n      noWrapper,\n      content,\n      expandedClass\n    } = _this$props,\n          rest = (0, _objectWithoutProperties2.default)(_this$props, [\"summaryConfig\", \"sectionProps\", \"noWrapper\", \"content\", \"expandedClass\"]);\n    const {\n      structures\n    } = sectionProps;\n    return React.createElement(ExpansionPanelSummary, (0, _extends2.default)({\n      className: \"section-summary\",\n      classes: {\n        content,\n        expanded: expandedClass\n      }\n    }, rest), React.createElement(SummaryContent, {\n      structures: structures,\n      summaryConfig: summaryConfig,\n      sectionProps: sectionProps,\n      renderSummary: this.renderSummary\n    }));\n  }\n\n}\n\nFinancingSectionSummary.muiName = ExpansionPanelSummary.muiName;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"financingSectionHelpers.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingSection/financingSectionHelpers.jsx                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nmodule.export({\n  makeFilterConfig: () => makeFilterConfig,\n  makeRenderSummary: () => makeRenderSummary,\n  makeRenderDetail: () => makeRenderDetail\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet cx;\nmodule.link(\"classnames\", {\n  default(v) {\n    cx = v;\n  }\n\n}, 1);\n\nconst makeFilterConfig = structures => (_ref) => {\n  let {\n    condition\n  } = _ref;\n\n  if (!condition) {\n    // Render components without condition property\n    return true;\n  }\n\n  if (typeof condition === 'function') {\n    return condition(structures);\n  }\n\n  return !!condition;\n};\n\nconst renderArray = (configArray, sectionProps, structureId) => configArray.filter(makeFilterConfig(sectionProps)).map((_ref2) => {\n  let {\n    Component,\n    id\n  } = _ref2,\n      props = (0, _objectWithoutProperties2.default)(_ref2, [\"Component\", \"id\"]);\n  return Component ? React.createElement(Component, (0, _extends2.default)({\n    key: id,\n    structureId: structureId,\n    id: id,\n    className: id\n  }, sectionProps, props)) : React.createElement(\"div\", {\n    className: cx('empty-line', id),\n    key: id\n  });\n});\n\nconst makeRenderSummary = configArray => (structure, sectionProps) => {\n  const {\n    id: structureId\n  } = structure;\n  return React.createElement(\"div\", {\n    className: \"structure\",\n    key: structureId\n  }, renderArray(configArray, (0, _objectSpread2.default)({}, sectionProps, {\n    structure\n  }), structureId));\n};\n\nconst makeRenderDetail = (configArray, noWrapper) => (structure, sectionProps) => {\n  const {\n    id: structureId\n  } = structure;\n\n  if (noWrapper) {\n    return React.createElement(\"div\", {\n      className: \"structure\",\n      key: structureId\n    }, renderArray(configArray, (0, _objectSpread2.default)({}, sectionProps, {\n      structure\n    }), structureId));\n  }\n\n  return React.createElement(\"div\", {\n    className: \"structure\",\n    key: structureId\n  }, React.createElement(\"span\", {\n    className: \"card1\"\n  }, renderArray(configArray, (0, _objectSpread2.default)({}, sectionProps, {\n    structure\n  }), structureId)));\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingSection/index.js                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./FinancingSection\", {\n  default: \"default\"\n}, 0);\nmodule.link(\"./components\", {\n  \"*\": \"*\"\n}, 1);\nmodule.link(\"./financingSectionHelpers\", {\n  \"*\": \"*\"\n}, 2);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"FinancingFinancing\":{\"MortgageNotesPicker\":{\"MortgageNotesPicker.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingFinancing/MortgageNotesPicker/MortgageNotesPicker.jsx             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet DialogSimple;\nmodule.link(\"../../../../DialogSimple\", {\n  default(v) {\n    DialogSimple = v;\n  }\n\n}, 1);\nlet MortgageNotesPickerSummary;\nmodule.link(\"./MortgageNotesPickerSummary\", {\n  default(v) {\n    MortgageNotesPickerSummary = v;\n  }\n\n}, 2);\nlet MortgageNotesPickerContainer;\nmodule.link(\"./MortgageNotesPickerContainer\", {\n  default(v) {\n    MortgageNotesPickerContainer = v;\n  }\n\n}, 3);\nlet MortgageNotesPickerDialog;\nmodule.link(\"./MortgageNotesPickerDialog\", {\n  default(v) {\n    MortgageNotesPickerDialog = v;\n  }\n\n}, 4);\n\nconst MortgageNotesPicker = props => {\n  const {\n    borrowerMortgageNotes,\n    currentMortgageNotes,\n    className,\n    structure: {\n      wantedLoan,\n      disableForms\n    }\n  } = props; // This component does not make sense if there's no wantedLoan\n\n  if (!wantedLoan) {\n    return null;\n  }\n\n  return React.createElement(\"div\", {\n    className: className\n  }, React.createElement(DialogSimple, {\n    renderTrigger: (_ref) => {\n      let {\n        handleOpen\n      } = _ref;\n      return React.createElement(MortgageNotesPickerSummary, {\n        handleOpen: handleOpen,\n        currentMortgageNotes: currentMortgageNotes,\n        borrowerMortgageNotes: borrowerMortgageNotes.filter((_ref2) => {\n          let {\n            selected\n          } = _ref2;\n          return selected;\n        }),\n        wantedLoan: wantedLoan,\n        disabled: disableForms\n      });\n    }\n  }, React.createElement(MortgageNotesPickerDialog, props)));\n};\n\nmodule.exportDefault(MortgageNotesPickerContainer(MortgageNotesPicker));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"MortgageNotesPickerContainer.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingFinancing/MortgageNotesPicker/MortgageNotesPickerContainer.jsx    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet withProps, compose;\nmodule.link(\"recompose\", {\n  withProps(v) {\n    withProps = v;\n  },\n\n  compose(v) {\n    compose = v;\n  }\n\n}, 1);\nlet T;\nmodule.link(\"../../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 2);\nlet FinancingDataContainer;\nmodule.link(\"../../containers/FinancingDataContainer\", {\n  default(v) {\n    FinancingDataContainer = v;\n  }\n\n}, 3);\nlet SingleStructureContainer;\nmodule.link(\"../../containers/SingleStructureContainer\", {\n  default(v) {\n    SingleStructureContainer = v;\n  }\n\n}, 4);\nlet StructureUpdateContainer;\nmodule.link(\"../../containers/StructureUpdateContainer\", {\n  default(v) {\n    StructureUpdateContainer = v;\n  }\n\n}, 5);\nlet getProperty;\nmodule.link(\"../../FinancingCalculator\", {\n  getProperty(v) {\n    getProperty = v;\n  }\n\n}, 6);\n\nconst formatMortgageNotes = (mortgageNoteIds, borrowers) => borrowers.reduce((arr, _ref, index) => {\n  let {\n    mortgageNotes: notes = [],\n    name\n  } = _ref;\n  const notesWithName = notes.map(note => (0, _objectSpread2.default)({}, note, {\n    borrowerName: name || React.createElement(T, {\n      id: \"general.borrowerWithIndex\",\n      values: {\n        index: index + 1\n      }\n    }),\n    isBorrower: true\n  }));\n  return [...arr, ...notesWithName];\n}, []);\n\nconst formatBorrowerMortgageNote = (notes, canton, updateStructure, mortgageNoteIds) => notes.map(note => {\n  const selected = mortgageNoteIds.includes(note._id);\n  const available = note.canton === canton;\n  return (0, _objectSpread2.default)({}, note, {\n    selected,\n    available,\n    onClick: () => {\n      if (available) {\n        return updateStructure({\n          mortgageNoteIds: [...mortgageNoteIds, note._id]\n        });\n      }\n    }\n  });\n});\n\nmodule.exportDefault(compose(FinancingDataContainer, SingleStructureContainer, StructureUpdateContainer, withProps(props => {\n  const {\n    structure: {\n      mortgageNoteIds = []\n    },\n    borrowers = [],\n    updateStructure\n  } = props;\n  const property = getProperty(props);\n  const {\n    mortgageNotes = [],\n    canton\n  } = property;\n  const notes = formatMortgageNotes(mortgageNoteIds, borrowers);\n  return {\n    currentMortgageNotes: mortgageNotes,\n    borrowerMortgageNotes: formatBorrowerMortgageNote(notes, canton, updateStructure, mortgageNoteIds),\n    removeMortgageNote: mortgageNoteId => updateStructure({\n      mortgageNoteIds: mortgageNoteIds.filter(id => id !== mortgageNoteId)\n    })\n  };\n})));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"MortgageNotesPickerDialog.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingFinancing/MortgageNotesPicker/MortgageNotesPickerDialog.jsx       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet createRoute;\nmodule.link(\"../../../../../utils/routerUtils\", {\n  createRoute(v) {\n    createRoute = v;\n  }\n\n}, 1);\nlet PROPERTIES_COLLECTION;\nmodule.link(\"../../../../../api/constants\", {\n  PROPERTIES_COLLECTION(v) {\n    PROPERTIES_COLLECTION = v;\n  }\n\n}, 2);\nlet T;\nmodule.link(\"../../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 3);\nlet UpdateField;\nmodule.link(\"../../../../UpdateField\", {\n  default(v) {\n    UpdateField = v;\n  }\n\n}, 4);\nlet getProperty;\nmodule.link(\"../../FinancingCalculator\", {\n  getProperty(v) {\n    getProperty = v;\n  }\n\n}, 5);\nlet Link;\nmodule.link(\"../../../../Link\", {\n  default(v) {\n    Link = v;\n  }\n\n}, 6);\nlet MortgageNotesPickerList;\nmodule.link(\"./MortgageNotesPickerList\", {\n  default(v) {\n    MortgageNotesPickerList = v;\n  }\n\n}, 7);\n\nconst MortgageNotesPickerDialog = props => {\n  const {\n    borrowerMortgageNotes,\n    currentMortgageNotes,\n    availableMortgageNotes,\n    loan: {\n      _id: loanId\n    },\n    removeMortgageNote\n  } = props;\n  const property = getProperty(props);\n\n  if (!property) {\n    return React.createElement(\"p\", {\n      className: \"description\"\n    }, React.createElement(T, {\n      id: \"FinancingMortgageNotesPicker.noProperty\"\n    }));\n  }\n\n  const {\n    canton,\n    _id: propertyId\n  } = property;\n\n  if (!canton) {\n    return React.createElement(\"div\", {\n      className: \"flex-col\"\n    }, React.createElement(\"p\", {\n      className: \"description\"\n    }, React.createElement(T, {\n      id: \"FinancingMortgageNotesPicker.noCanton\"\n    })), React.createElement(UpdateField, {\n      doc: property,\n      fields: ['zipCode'],\n      collection: PROPERTIES_COLLECTION\n    }));\n  }\n\n  return React.createElement(\"div\", {\n    className: \"mortgage-notes-picker-dialog\"\n  }, React.createElement(\"h4\", null, React.createElement(T, {\n    id: \"FinancingMortgageNotesPicker.propertyMortgageNotes\"\n  })), currentMortgageNotes.length === 0 && React.createElement(Link, {\n    to: createRoute(\"/loans/\".concat(loanId, \"/properties/\").concat(propertyId)),\n    className: \"a\"\n  }, React.createElement(T, {\n    id: \"FinancingMortgageNotesPicker.emptyPropertyMortgageNotes\"\n  })), React.createElement(MortgageNotesPickerList, {\n    mortgageNotes: currentMortgageNotes\n  }), React.createElement(\"h4\", null, React.createElement(T, {\n    id: \"FinancingMortgageNotesPicker.borrowerMortgageNotes\"\n  })), React.createElement(MortgageNotesPickerList, {\n    mortgageNotes: borrowerMortgageNotes,\n    removeMortgageNote: removeMortgageNote,\n    canton: canton\n  }), !borrowerMortgageNotes.filter((_ref) => {\n    let {\n      available\n    } = _ref;\n    return available;\n  }).length && React.createElement(Link, {\n    to: createRoute(\"/loans/\".concat(loanId, \"/borrowers\")),\n    className: \"a\"\n  }, React.createElement(T, {\n    id: \"FinancingMortgageNotesPicker.noAvailableMortgageNotes\",\n    values: {\n      canton: React.createElement(T, {\n        id: \"Forms.canton.\".concat(canton)\n      })\n    }\n  })));\n};\n\nmodule.exportDefault(MortgageNotesPickerDialog);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"MortgageNotesPickerList.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingFinancing/MortgageNotesPicker/MortgageNotesPickerList.jsx         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Icon;\nmodule.link(\"../../../../Icon/Icon\", {\n  default(v) {\n    Icon = v;\n  }\n\n}, 1);\nlet toMoney;\nmodule.link(\"../../../../../utils/conversionFunctions\", {\n  toMoney(v) {\n    toMoney = v;\n  }\n\n}, 2);\nlet List, ListItem, ListItemText, ListItemSecondaryAction;\nmodule.link(\"../../../../List\", {\n  default(v) {\n    List = v;\n  },\n\n  ListItem(v) {\n    ListItem = v;\n  },\n\n  ListItemText(v) {\n    ListItemText = v;\n  },\n\n  ListItemSecondaryAction(v) {\n    ListItemSecondaryAction = v;\n  }\n\n}, 3);\nlet T;\nmodule.link(\"../../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 4);\nlet IconButton;\nmodule.link(\"../../../../IconButton\", {\n  default(v) {\n    IconButton = v;\n  }\n\n}, 5);\n\nconst MortgageNotesPickerList = (_ref) => {\n  let {\n    mortgageNotes,\n    removeMortgageNote,\n    canton\n  } = _ref;\n  return React.createElement(List, null, mortgageNotes.map((_ref2) => {\n    let {\n      _id,\n      value,\n      rank,\n      canton: noteCanton,\n      borrowerName,\n      isBorrower,\n      selected,\n      available,\n      onClick = () => null\n    } = _ref2;\n    return React.createElement(ListItem, {\n      key: _id,\n      button: true,\n      selected: selected,\n      disabled: isBorrower && !available,\n      onClick: onClick,\n      className: \"mortgage-note-list-item\"\n    }, React.createElement(ListItemText, {\n      primary: React.createElement(\"span\", null, \"CHF \".concat(toMoney(value)), \"\\xA0\"),\n      secondary: React.createElement(\"div\", {\n        className: \"mortgage-note-list-item-description\"\n      }, React.createElement(\"span\", null, [isBorrower && React.createElement(\"span\", null, borrowerName), rank && React.createElement(\"span\", null, React.createElement(T, {\n        id: \"Forms.rank\"\n      }), \"\\xA0\", rank)].filter(x => x).map((tag, i) => [i !== 0 && ', ', tag])), isBorrower && React.createElement(\"span\", {\n        className: \"mortgage-note-list-item-description-canton\"\n      }, React.createElement(T, {\n        id: \"Forms.canton.\".concat(noteCanton)\n      })))\n    }, \"Hello\"), isBorrower && selected && React.createElement(ListItemSecondaryAction, null, React.createElement(IconButton, {\n      tooltip: React.createElement(T, {\n        id: \"general.remove\"\n      }),\n      type: \"close\",\n      onClick: () => removeMortgageNote(_id)\n    })), isBorrower && !available && React.createElement(ListItemSecondaryAction, null, React.createElement(Icon, {\n      style: {\n        marginRight: 12,\n        width: 24,\n        height: 24\n      },\n      type: \"info\",\n      tooltip: React.createElement(\"span\", null, \"Non applicable pour le canton de\", ' ', React.createElement(T, {\n        id: \"Forms.canton.\".concat(canton)\n      }))\n    })));\n  }));\n};\n\nmodule.exportDefault(MortgageNotesPickerList);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"MortgageNotesPickerSummary.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingFinancing/MortgageNotesPicker/MortgageNotesPickerSummary.jsx      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet T;\nmodule.link(\"../../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 1);\nlet toMoney;\nmodule.link(\"../../../../../utils/conversionFunctions\", {\n  toMoney(v) {\n    toMoney = v;\n  }\n\n}, 2);\n\nconst MortgageNotesPickerSummary = (_ref) => {\n  let {\n    borrowerMortgageNotes,\n    currentMortgageNotes,\n    handleOpen,\n    wantedLoan,\n    disabled\n  } = _ref;\n  const allNotes = [...borrowerMortgageNotes, ...currentMortgageNotes];\n  const currentMortgageNotesValue = allNotes.reduce((total, _ref2) => {\n    let {\n      value = 0\n    } = _ref2;\n    return total + value;\n  }, 0);\n  return React.createElement(\"div\", {\n    className: \"card-hover pointer mortgage-notes-picker-summary\",\n    onClick: disabled ? null : handleOpen\n  }, wantedLoan > currentMortgageNotesValue && React.createElement(React.Fragment, null, React.createElement(\"h4\", {\n    className: \"text-center\"\n  }, React.createElement(T, {\n    id: \"FinancingMortgageNotesPicker.mortgageNoteToCreate\"\n  })), React.createElement(\"p\", {\n    className: \"calculated-value\"\n  }, React.createElement(\"span\", {\n    className: \"chf\"\n  }, \"CHF\"), ' ', React.createElement(\"span\", {\n    className: \"primary\"\n  }, toMoney(wantedLoan - currentMortgageNotesValue)))), allNotes.length > 0 && React.createElement(React.Fragment, null, React.createElement(\"h4\", null, React.createElement(T, {\n    id: \"FinancingMortgageNotesPicker.title\",\n    values: {\n      count: allNotes.length\n    }\n  })), React.createElement(\"p\", {\n    className: \"calculated-value\"\n  }, React.createElement(\"span\", {\n    className: \"chf\"\n  }, \"CHF\"), ' ', React.createElement(\"span\", {\n    className: \"primary\"\n  }, toMoney(currentMortgageNotesValue)))));\n};\n\nmodule.exportDefault(MortgageNotesPickerSummary);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingFinancing/MortgageNotesPicker/index.js                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./MortgageNotesPicker\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"FinancingFinancing.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingFinancing/FinancingFinancing.jsx                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nmodule.export({\n  calculateLoan: () => calculateLoan,\n  calculateMaxLoan: () => calculateMaxLoan\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet OWN_FUNDS_USAGE_TYPES;\nmodule.link(\"../../../../api/constants\", {\n  OWN_FUNDS_USAGE_TYPES(v) {\n    OWN_FUNDS_USAGE_TYPES = v;\n  }\n\n}, 1);\nlet T;\nmodule.link(\"../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 2);\nlet FinancingSection, InputAndSlider, CalculatedValue, FinmaRatio;\nmodule.link(\"../FinancingSection\", {\n  default(v) {\n    FinancingSection = v;\n  },\n\n  InputAndSlider(v) {\n    InputAndSlider = v;\n  },\n\n  CalculatedValue(v) {\n    CalculatedValue = v;\n  },\n\n  FinmaRatio(v) {\n    FinmaRatio = v;\n  }\n\n}, 3);\nlet Calc, getOffer;\nmodule.link(\"../FinancingCalculator\", {\n  default(v) {\n    Calc = v;\n  },\n\n  getOffer(v) {\n    getOffer = v;\n  }\n\n}, 4);\nlet FinancingTranchePicker;\nmodule.link(\"./FinancingTranchePicker\", {\n  default(v) {\n    FinancingTranchePicker = v;\n  }\n\n}, 5);\nlet MortgageNotesPicker;\nmodule.link(\"./MortgageNotesPicker\", {\n  default(v) {\n    MortgageNotesPicker = v;\n  }\n\n}, 6);\nlet getBorrowRatio, getBorrowRatioStatus;\nmodule.link(\"../FinancingResult/financingResultHelpers\", {\n  getBorrowRatio(v) {\n    getBorrowRatio = v;\n  },\n\n  getBorrowRatioStatus(v) {\n    getBorrowRatioStatus = v;\n  }\n\n}, 7);\nlet LoanPercent;\nmodule.link(\"./LoanPercent\", {\n  default(v) {\n    LoanPercent = v;\n  }\n\n}, 8);\nlet Calculator;\nmodule.link(\"../../../../utils/Calculator\", {\n  default(v) {\n    Calculator = v;\n  }\n\n}, 9);\n\nconst getPledgedAmount = (_ref) => {\n  let {\n    structure: {\n      ownFunds\n    }\n  } = _ref;\n  return ownFunds.filter((_ref2) => {\n    let {\n      usageType\n    } = _ref2;\n    return usageType === OWN_FUNDS_USAGE_TYPES.PLEDGE;\n  }).reduce((sum, _ref3) => {\n    let {\n      value\n    } = _ref3;\n    return sum + value;\n  }, 0);\n};\n\nconst calculateLoan = params => {\n  const {\n    structure: {\n      wantedLoan\n    }\n  } = params;\n  return wantedLoan;\n};\n\nconst calculateMaxLoan = (data, pledgeOverride) => {\n  const {\n    loan,\n    structureId\n  } = data;\n  const offer = Calculator.selectOffer({\n    loan,\n    structureId\n  });\n\n  if (offer) {\n    const {\n      maxAmount\n    } = getOffer(data);\n    return maxAmount;\n  }\n\n  const structure = Calculator.selectStructure({\n    loan,\n    structureId\n  });\n  const propertyValue = Calculator.selectPropertyValue({\n    loan,\n    structureId\n  });\n  return Calc.getMaxLoanBase({\n    propertyWork: structure.propertyWork,\n    propertyValue,\n    pledgedAmount: pledgeOverride !== undefined ? pledgeOverride : getPledgedAmount(data),\n    residenceType: loan.residenceType\n  });\n};\n\nconst enableOffers = (_ref4) => {\n  let {\n    loan\n  } = _ref4;\n  return loan.enableOffers;\n};\n\nconst oneStructureHasLoan = (_ref5) => {\n  let {\n    loan: {\n      structures\n    }\n  } = _ref5;\n  return structures.some((_ref6) => {\n    let {\n      wantedLoan\n    } = _ref6;\n    return wantedLoan;\n  });\n};\n\nconst FinancingFinancing = props => React.createElement(FinancingSection, {\n  summaryConfig: [{\n    id: 'mortgageLoan',\n    label: React.createElement(\"span\", {\n      className: \"section-title\"\n    }, React.createElement(T, {\n      id: \"FinancingFinancing.title\"\n    })),\n    Component: props => React.createElement(\"div\", {\n      className: \"mortgageLoan financing-mortgageLoan\"\n    }, React.createElement(CalculatedValue, (0, _extends2.default)({\n      value: calculateLoan\n    }, props)), React.createElement(FinmaRatio, (0, _extends2.default)({\n      value: getBorrowRatio,\n      status: getBorrowRatioStatus\n    }, props)))\n  }],\n  detailConfig: [{\n    Component: InputAndSlider,\n    id: 'wantedLoan',\n    max: calculateMaxLoan\n  }, {\n    Component: LoanPercent,\n    id: 'wantedLoanPercent'\n  }, {\n    Component: MortgageNotesPicker,\n    id: 'mortgageNoteIds',\n    condition: oneStructureHasLoan\n  }, // TODO: To be released in the future\n  // {\n  //   Component: RadioButtons,\n  //   id: 'amortizationType',\n  //   options: Object.values(AMORTIZATION_TYPE).map(key => ({\n  //     id: key,\n  //     label: `FinancingFinancing.${key}`,\n  //   })),\n  //   condition: enableOffers,\n  // },\n  {\n    id: 'loanTranches',\n    Component: FinancingTranchePicker,\n    condition: enableOffers\n  }]\n});\n\nmodule.exportDefault(FinancingFinancing);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingTranchePicker.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingFinancing/FinancingTranchePicker.jsx                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet compose;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  }\n\n}, 1);\nlet TranchePickerDialog;\nmodule.link(\"../../../TranchePicker\", {\n  TranchePickerDialog(v) {\n    TranchePickerDialog = v;\n  }\n\n}, 2);\nlet StructureUpdateContainer;\nmodule.link(\"../containers/StructureUpdateContainer\", {\n  default(v) {\n    StructureUpdateContainer = v;\n  }\n\n}, 3);\nlet SingleStructureContainer;\nmodule.link(\"../containers/SingleStructureContainer\", {\n  default(v) {\n    SingleStructureContainer = v;\n  }\n\n}, 4);\n\nconst FinancingTranchePicker = (_ref) => {\n  let {\n    structure: {\n      loanTranches,\n      disableForms\n    },\n    updateStructure,\n    className\n  } = _ref;\n  return React.createElement(\"span\", {\n    className: className\n  }, React.createElement(TranchePickerDialog, {\n    initialTranches: loanTranches,\n    handleSave: tranches => updateStructure({\n      loanTranches: tranches\n    }),\n    disabled: disableForms\n  }));\n};\n\nmodule.exportDefault(compose(SingleStructureContainer, StructureUpdateContainer)(FinancingTranchePicker));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"LoanPercent.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingFinancing/LoanPercent.jsx                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet compose, withProps;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  },\n\n  withProps(v) {\n    withProps = v;\n  }\n\n}, 1);\nlet PercentInput;\nmodule.link(\"../../../PercentInput\", {\n  default(v) {\n    PercentInput = v;\n  }\n\n}, 2);\nlet FinancingDataContainer;\nmodule.link(\"../containers/FinancingDataContainer\", {\n  default(v) {\n    FinancingDataContainer = v;\n  }\n\n}, 3);\nlet getBorrowRatio;\nmodule.link(\"../FinancingResult/financingResultHelpers\", {\n  getBorrowRatio(v) {\n    getBorrowRatio = v;\n  }\n\n}, 4);\nlet SingleStructureContainer;\nmodule.link(\"../containers/SingleStructureContainer\", {\n  default(v) {\n    SingleStructureContainer = v;\n  }\n\n}, 5);\nlet FinancingCalculator;\nmodule.link(\"../FinancingCalculator\", {\n  default(v) {\n    FinancingCalculator = v;\n  }\n\n}, 6);\nlet StructureUpdateContainer;\nmodule.link(\"../containers/StructureUpdateContainer\", {\n  default(v) {\n    StructureUpdateContainer = v;\n  }\n\n}, 7);\n\nconst LoanPercent = (_ref) => {\n  let {\n    handleChange\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"handleChange\"]);\n  return React.createElement(\"span\", {\n    className: \"wantedLoanPercent\"\n  }, React.createElement(PercentInput, {\n    value: getBorrowRatio(props),\n    onChange: handleChange,\n    disabled: props.structure.disableForms\n  }));\n};\n\nmodule.exportDefault(compose(FinancingDataContainer, SingleStructureContainer, StructureUpdateContainer, withProps((_ref2) => {\n  let {\n    updateStructure\n  } = _ref2,\n      data = (0, _objectWithoutProperties2.default)(_ref2, [\"updateStructure\"]);\n  return {\n    handleChange: borrowValue => {\n      const wantedLoan = FinancingCalculator.getLoanFromBorrowRatio(borrowValue, data);\n      return updateStructure({\n        wantedLoan: Math.round(wantedLoan)\n      });\n    }\n  };\n}))(LoanPercent));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"FinancingResult\":{\"test\":{\"FinancingResult.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingResult/test/FinancingResult.spec.jsx                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet mount;\nmodule.link(\"../../../../../utils/testHelpers/enzyme\", {\n  mount(v) {\n    mount = v;\n  }\n\n}, 2);\nlet IntlProvider, intlShape;\nmodule.link(\"react-intl\", {\n  IntlProvider(v) {\n    IntlProvider = v;\n  },\n\n  intlShape(v) {\n    intlShape = v;\n  }\n\n}, 3);\nlet ScrollSync;\nmodule.link(\"react-scroll-sync\", {\n  ScrollSync(v) {\n    ScrollSync = v;\n  }\n\n}, 4);\nlet messages;\nmodule.link(\"../../../../../lang/fr.json\", {\n  default(v) {\n    messages = v;\n  }\n\n}, 5);\nlet OWN_FUNDS_USAGE_TYPES;\nmodule.link(\"../../../../../api/constants\", {\n  OWN_FUNDS_USAGE_TYPES(v) {\n    OWN_FUNDS_USAGE_TYPES = v;\n  }\n\n}, 6);\nlet FinancingResult;\nmodule.link(\"../FinancingResult\", {\n  default(v) {\n    FinancingResult = v;\n  }\n\n}, 7);\nlet Provider;\nmodule.link(\"../../containers/loan-context\", {\n  Provider(v) {\n    Provider = v;\n  }\n\n}, 8);\nlet INTEREST_RATES;\nmodule.link(\"../../../../../api/interestRates/interestRatesConstants\", {\n  INTEREST_RATES(v) {\n    INTEREST_RATES = v;\n  }\n\n}, 9);\nlet Calculator;\nmodule.link(\"../../../../../utils/Calculator\", {\n  default(v) {\n    Calculator = v;\n  }\n\n}, 10);\n\nconst expectResult = (component, name, value) => {\n  const val = component().find(name).last();\n\n  if (!Number.isInteger(value)) {\n    // On our test browsers, the comma is represented either as a , or .\n    // due to the web's \"intl\" API\n    expect(val.contains(\"\".concat(value)) || val.contains(\"\".concat(value).replace('.', ','))).to.equal(true);\n  } else {\n    expect(val.contains(\"\".concat(value))).to.equal(true);\n  }\n};\n\ndescribe('FinancingResult', () => {\n  let props;\n  let loan;\n  const {\n    intl\n  } = new IntlProvider({\n    defaultLocale: 'fr',\n    messages\n  }).getChildContext();\n\n  const component = () => mount(React.createElement(ScrollSync, null, React.createElement(Provider, {\n    value: {\n      loan,\n      Calculator\n    }\n  }, React.createElement(FinancingResult, props))), {\n    context: {\n      intl\n    },\n    childContextTypes: {\n      intl: intlShape\n    }\n  });\n\n  beforeEach(() => {\n    props = {};\n    loan = {\n      structures: [],\n      borrowers: [],\n      properties: []\n    };\n  });\n  context('renders the correct results for a standard structure', () => {\n    beforeEach(() => {\n      const structure = {\n        id: 'a',\n        loanTranches: [{\n          type: 'interest10',\n          value: 1\n        }],\n        propertyId: 'house',\n        propertyWork: 0,\n        wantedLoan: 800000,\n        ownFunds: [{\n          type: 'bankFortune',\n          value: 250000\n        }]\n      };\n      loan = {\n        selectedStructure: 'a',\n        structure,\n        structures: [structure],\n        borrowers: [{\n          _id: 'john',\n          bankFortune: 250000,\n          salary: 200000,\n          insurance2: [{\n            value: 50\n          }],\n          insurance3A: [{\n            value: 60\n          }]\n        }],\n        properties: [{\n          _id: 'house',\n          value: 1000000,\n          yearlyExpenses: 1200\n        }],\n        currentInterestRates: {\n          [INTEREST_RATES.YEARS_10]: 0.01\n        }\n      };\n    });\n    it('monthly', () => {\n      const monthly = component().find('.financing-structures-result-chart .total');\n      const string = monthly.text();\n      const hasNonZeroNumber = /[1-9]/.test(string); // Interests rates change constantly, can't pin a precise value\n\n      expect(hasNonZeroNumber).to.equal(true);\n    });\n    it('interestsCost', () => {\n      const interestsCost = component().find('.interestsCost').last();\n      const string = interestsCost.text();\n      const hasNonZeroNumber = /[1-9]/.test(string);\n      expect(hasNonZeroNumber).to.equal(true);\n    });\n    it('amortizationCost', () => {\n      expectResult(component, '.amortizationCost', 833);\n    });\n    it('propertyCost', () => {\n      expectResult(component, '.propertyCost', 100);\n    });\n    it('borrowRatio', () => {\n      expectResult(component, '.borrowRatio', 0.8);\n    });\n    it('incomeRatio', () => {\n      expectResult(component, '.incomeRatio', 0.3);\n    });\n    it('remainingCash', () => {\n      expectResult(component, '.remainingCash', 0);\n    });\n    it('remainingInsurance2', () => {\n      expectResult(component, '.remainingInsurance2', 50);\n    });\n    it('remainingInsurance3A', () => {\n      expectResult(component, '.remainingInsurance3A', 60);\n    });\n  });\n  context('structure with an offer', () => {\n    beforeEach(() => {\n      const structure = {\n        id: 'a',\n        loanTranches: [{\n          type: 'interest2',\n          value: 0.8\n        }, {\n          type: 'interestLibor',\n          value: 0.2\n        }],\n        propertyId: 'house',\n        offerId: 'offer',\n        propertyWork: 200000,\n        wantedLoan: 1080000,\n        notaryFees: 50000,\n        ownFunds: [{\n          type: 'bankFortune',\n          value: 150000,\n          borrowerId: 'John'\n        }, {\n          type: 'insurance2',\n          usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE,\n          value: 120000,\n          borrowerId: 'John'\n        }, {\n          type: 'thirdPartyFortune',\n          value: 20000,\n          borrowerId: 'Mary'\n        }]\n      };\n      loan = {\n        selectedStructure: 'a',\n        structure,\n        structures: [structure],\n        borrowers: [{\n          _id: 'John',\n          bankFortune: 250000,\n          salary: 200000,\n          insurance2: [{\n            value: 1000\n          }],\n          insurance3A: [{\n            value: 500\n          }]\n        }, {\n          _id: 'Mary',\n          salary: 200000,\n          thirdPartyFortune: 200000,\n          insurance2: [{\n            value: 2000\n          }],\n          insurance3A: [{\n            value: 0\n          }]\n        }],\n        properties: [{\n          _id: 'house',\n          value: 1000000,\n          yearlyExpenses: 1200\n        }],\n        offers: [{\n          _id: 'offer',\n          interest2: 0.02,\n          interestLibor: 0.01,\n          amortizationGoal: 0.5,\n          amortizationYears: 5\n        }],\n        currentInterestRates: {\n          [INTEREST_RATES.YEARS_10]: 0.01\n        }\n      };\n    });\n    it('monthly', () => {\n      const monthly = component().find('.financing-structures-result-chart .total');\n      const string = monthly.text();\n      const value = string.match(/\\d/g).join('');\n      expect(value).to.equal('9720');\n    });\n    it('interestsCost', () => {\n      const interestsCost = component().find('.interestsCost').last();\n      const string = interestsCost.text();\n      const value = string.match(/\\d/g).join(''); // Average of 1.8% interests\n\n      expect(value).to.equal('1620');\n    });\n    it('amortizationCost', () => {\n      // 1080k in 5 years to 600k\n      expectResult(component, '.amortizationCost', '8 000');\n    });\n    it('propertyCost', () => {\n      expectResult(component, '.propertyCost', 100);\n    });\n    it('borrowRatio', () => {\n      expectResult(component, '.borrowRatio', 0.9);\n    });\n    it('incomeRatio', () => {\n      // 400k income\n      // 12k maintenance, 54k interests, 20k amortization\n      expectResult(component, '.incomeRatio', 0.215);\n    });\n    it('remainingCash', () => {\n      expectResult(component, '.remainingCash', '100 000');\n    });\n    it('remainingInsurance2', () => {\n      expectResult(component, '.remainingInsurance2', '3 000');\n    });\n    it('remainingInsurance3A', () => {\n      expectResult(component, '.remainingInsurance3A', 500);\n    });\n  });\n  it.skip('renders an error if an interest rate is not defined', () => {\n    // FIXME: Enzyme does not support componentDidCatch yet\n    // https://github.com/airbnb/enzyme/issues/1553\n    loan = {\n      structures: [{\n        id: 'a',\n        loanTranches: [{\n          type: 'unknown_rate'\n        }]\n      }],\n      borrowers: [{}],\n      properties: [{}]\n    };\n    expect(component().find('.error').exists()).to.equal(true);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingResultErrors.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingResult/test/FinancingResultErrors.spec.jsx                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet shallow;\nmodule.link(\"../../../../../utils/testHelpers/enzyme\", {\n  shallow(v) {\n    shallow = v;\n  }\n\n}, 2);\nlet T;\nmodule.link(\"../../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 3);\nlet OWN_FUNDS_TYPES;\nmodule.link(\"../../../../../api/constants\", {\n  OWN_FUNDS_TYPES(v) {\n    OWN_FUNDS_TYPES = v;\n  }\n\n}, 4);\nlet FinancingResultErrors;\nmodule.link(\"../FinancingResultErrors\", {\n  FinancingResultErrors(v) {\n    FinancingResultErrors = v;\n  }\n\n}, 5);\nlet FinancingResultChart;\nmodule.link(\"../FinancingResultChart\", {\n  default(v) {\n    FinancingResultChart = v;\n  }\n\n}, 6);\nlet OWN_FUNDS_USAGE_TYPES;\nmodule.link(\"../../../../../api/constants\", {\n  OWN_FUNDS_USAGE_TYPES(v) {\n    OWN_FUNDS_USAGE_TYPES = v;\n  }\n\n}, 7);\nlet Calculator;\nmodule.link(\"../../../../../utils/Calculator\", {\n  default(v) {\n    Calculator = v;\n  }\n\n}, 8);\ndescribe('FinancingResultErrors', () => {\n  let props;\n  let property;\n  let propertyId;\n  let structureId;\n  let offer;\n  let offerId;\n  let structure;\n  let borrower;\n\n  const component = () => shallow(React.createElement(FinancingResultErrors, props));\n\n  beforeEach(() => {\n    propertyId = 'propertyId';\n    structureId = 'structureId';\n    offerId = 'offerId';\n    property = {\n      _id: propertyId,\n      value: 100000\n    };\n    offer = {\n      _id: offerId,\n      interest10: 0.01\n    };\n    structure = {\n      propertyId,\n      wantedLoan: 80000,\n      id: structureId,\n      ownFunds: [],\n      propertyWork: 0\n    };\n    borrower = {};\n    props = {\n      loan: {\n        properties: [property],\n        structures: [structure],\n        offers: [offer],\n        borrowers: [borrower]\n      },\n      Calculator,\n      structureId\n    };\n  });\n  it('warns if no mortgage loan exists', () => {\n    structure.wantedLoan = 0;\n    expect(component().find(T).props().id).to.contain('noMortgageLoan');\n    structure.wantedLoan = undefined;\n    expect(component().find(T).props().id).to.contain('noMortgageLoan');\n  });\n  it('warns of missing own funds', () => {\n    expect(component().find(T).props().id).to.contain('missingOwnFunds');\n  });\n  it('warns of missing own funds if the value is NaN', () => {\n    expect(component().find(T).props().id).to.contain('missingOwnFunds');\n  });\n  it('warns of too much own funds', () => {\n    structure.ownFunds = [{\n      type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n      value: 50000\n    }];\n    expect(component().find(T).props().id).to.contain('tooMuchOwnFunds');\n  });\n  it('warns of a high income ratio', () => {\n    structure.ownFunds = [{\n      type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n      value: 25000\n    }];\n    expect(component().find(T).props().id).to.contain('highIncomeRatio');\n  });\n  it('warns of missing cash', () => {\n    structure.ownFunds = [{\n      type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n      value: 12000\n    }, {\n      type: OWN_FUNDS_TYPES.INSURANCE_2,\n      value: 12000,\n      usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW\n    }];\n    borrower.salary = 100000;\n    expect(component().find(T).props().id).to.contain('missingCash');\n  });\n  it('warns of invalid interest rates', () => {\n    structure.ownFunds = [{\n      type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n      value: 25000\n    }];\n    structure.offerId = offerId;\n    structure.loanTranches = [{\n      type: 'interest5',\n      value: 1\n    }];\n    borrower.salary = 100000;\n    expect(component().find(T).props().id).to.contain('invalidInterestRates');\n  });\n  it('returns null if no error exists in the structure', () => {\n    structure.ownFunds = [{\n      type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n      value: 25000\n    }];\n    borrower.salary = 100000;\n    expect(component().find(FinancingResultChart).exists()).to.equal(true);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"FinancingResult.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingResult/FinancingResult.jsx                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet T;\nmodule.link(\"../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 1);\nlet OWN_FUNDS_TYPES;\nmodule.link(\"../../../../api/constants\", {\n  OWN_FUNDS_TYPES(v) {\n    OWN_FUNDS_TYPES = v;\n  }\n\n}, 2);\nlet FinancingSection, CalculatedValue, FinmaRatio;\nmodule.link(\"../FinancingSection\", {\n  default(v) {\n    FinancingSection = v;\n  },\n\n  CalculatedValue(v) {\n    CalculatedValue = v;\n  },\n\n  FinmaRatio(v) {\n    FinmaRatio = v;\n  }\n\n}, 3);\nlet FinancingResultErrors;\nmodule.link(\"./FinancingResultErrors\", {\n  default(v) {\n    FinancingResultErrors = v;\n  }\n\n}, 4);\nlet getInterests, getAmortization, getRemainingCash, getRemainingInsurance2, getRemainingInsurance3A, getRemainingBank3A, getRemainingInsurance3B, getPropertyExpenses, getBorrowRatio, getIncomeRatio, getBorrowRatioStatus, getIncomeRatioStatus, makeHasOwnFundsOfType;\nmodule.link(\"./financingResultHelpers\", {\n  getInterests(v) {\n    getInterests = v;\n  },\n\n  getAmortization(v) {\n    getAmortization = v;\n  },\n\n  getRemainingCash(v) {\n    getRemainingCash = v;\n  },\n\n  getRemainingInsurance2(v) {\n    getRemainingInsurance2 = v;\n  },\n\n  getRemainingInsurance3A(v) {\n    getRemainingInsurance3A = v;\n  },\n\n  getRemainingBank3A(v) {\n    getRemainingBank3A = v;\n  },\n\n  getRemainingInsurance3B(v) {\n    getRemainingInsurance3B = v;\n  },\n\n  getPropertyExpenses(v) {\n    getPropertyExpenses = v;\n  },\n\n  getBorrowRatio(v) {\n    getBorrowRatio = v;\n  },\n\n  getIncomeRatio(v) {\n    getIncomeRatio = v;\n  },\n\n  getBorrowRatioStatus(v) {\n    getBorrowRatioStatus = v;\n  },\n\n  getIncomeRatioStatus(v) {\n    getIncomeRatioStatus = v;\n  },\n\n  makeHasOwnFundsOfType(v) {\n    makeHasOwnFundsOfType = v;\n  }\n\n}, 5);\nlet FinancingResultInterests;\nmodule.link(\"./FinancingResultInterests\", {\n  default(v) {\n    FinancingResultInterests = v;\n  }\n\n}, 6);\n\nconst FinancingResult = (_ref) => {\n  let {\n    error\n  } = _ref;\n  return error ? React.createElement(\"h3\", {\n    className: \"error\"\n  }, error.message) : React.createElement(FinancingSection, {\n    className: \"result-section\",\n    summaryConfig: [{\n      id: 'result',\n      label: React.createElement(\"span\", {\n        className: \"section-title result\"\n      }, React.createElement(T, {\n        id: \"FinancingResult.title\"\n      })),\n      Component: FinancingResultErrors\n    }],\n    detailConfig: [{\n      id: 'cost',\n      label: React.createElement(\"h4\", {\n        className: \"section-subtitle\"\n      }, React.createElement(T, {\n        id: \"FinancingResult.cost\"\n      }))\n    }, {\n      id: 'interestsCost',\n      Component: FinancingResultInterests,\n      value: getInterests\n    }, {\n      id: 'amortizationCost',\n      Component: CalculatedValue,\n      value: getAmortization\n    }, {\n      id: 'propertyCost',\n      Component: CalculatedValue,\n      value: getPropertyExpenses\n    }, {\n      id: 'finma',\n      label: React.createElement(\"h4\", {\n        className: \"section-subtitle\"\n      }, React.createElement(T, {\n        id: \"FinancingResult.finma\"\n      }))\n    }, {\n      id: 'borrowRatio',\n      Component: FinmaRatio,\n      value: getBorrowRatio,\n      status: getBorrowRatioStatus,\n      tooltip: true\n    }, {\n      id: 'incomeRatio',\n      Component: FinmaRatio,\n      value: getIncomeRatio,\n      status: getIncomeRatioStatus,\n      tooltip: true\n    }, {\n      id: 'future',\n      label: React.createElement(\"h4\", {\n        className: \"section-subtitle\"\n      }, React.createElement(T, {\n        id: \"FinancingResult.future\"\n      })),\n      className: 'section-subtitle'\n    }, {\n      id: 'remainingCash',\n      Component: CalculatedValue,\n      value: getRemainingCash\n    }, {\n      id: 'remainingInsurance2',\n      Component: CalculatedValue,\n      value: getRemainingInsurance2,\n      condition: makeHasOwnFundsOfType(OWN_FUNDS_TYPES.INSURANCE_2)\n    }, {\n      id: 'remainingInsurance3A',\n      Component: CalculatedValue,\n      value: getRemainingInsurance3A,\n      condition: makeHasOwnFundsOfType(OWN_FUNDS_TYPES.INSURANCE_3A)\n    }, {\n      id: 'remainingBank3A',\n      Component: CalculatedValue,\n      value: getRemainingBank3A,\n      condition: makeHasOwnFundsOfType(OWN_FUNDS_TYPES.BANK_3A)\n    }, {\n      id: 'remainingInsurance3B',\n      Component: CalculatedValue,\n      value: getRemainingInsurance3B,\n      condition: makeHasOwnFundsOfType(OWN_FUNDS_TYPES.INSURANCE_3B)\n    }]\n  });\n};\n\nmodule.exportDefault(React.memo(FinancingResult));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingResultChart.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingResult/FinancingResultChart.jsx                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet compose;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  }\n\n}, 1);\nlet cx;\nmodule.link(\"classnames\", {\n  default(v) {\n    cx = v;\n  }\n\n}, 2);\nlet DonutChart;\nmodule.link(\"../../../charts/DonutChart\", {\n  default(v) {\n    DonutChart = v;\n  }\n\n}, 3);\nlet toMoney;\nmodule.link(\"../../../../utils/conversionFunctions\", {\n  toMoney(v) {\n    toMoney = v;\n  }\n\n}, 4);\nlet SingleStructureContainer;\nmodule.link(\"../containers/SingleStructureContainer\", {\n  default(v) {\n    SingleStructureContainer = v;\n  }\n\n}, 5);\nlet FinancingDataContainer;\nmodule.link(\"../containers/FinancingDataContainer\", {\n  default(v) {\n    FinancingDataContainer = v;\n  }\n\n}, 6);\nlet getAmortization, getPropertyExpenses, getInterests;\nmodule.link(\"./financingResultHelpers\", {\n  getAmortization(v) {\n    getAmortization = v;\n  },\n\n  getPropertyExpenses(v) {\n    getPropertyExpenses = v;\n  },\n\n  getInterests(v) {\n    getInterests = v;\n  }\n\n}, 7);\n\nconst FinancingResultChart = (_ref) => {\n  let {\n    className\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"className\"]);\n  const interests = getInterests(props);\n  const amortization = getAmortization(props);\n  const propertyExpenses = getPropertyExpenses(props);\n  return React.createElement(\"div\", {\n    className: cx('financing-structures-result-chart', className)\n  }, React.createElement(DonutChart, {\n    data: [{\n      value: interests,\n      id: 'interests'\n    }, {\n      value: amortization,\n      id: 'amortization'\n    }, {\n      value: propertyExpenses,\n      id: 'maintenance'\n    }],\n    intlPrefix: \"general\",\n    config: {\n      chart: {\n        width: 100,\n        height: 100,\n        spacingBottom: 0,\n        spacingTop: 0,\n        spacingRight: 0,\n        spacingLeft: 0\n      },\n      plotOptions: {\n        pie: {\n          tooltip: {\n            headerFormat: '<b>{point.key}</b><br />',\n            pointFormat: 'CHF {point.y:,.0f}'\n          },\n          showInLegend: false,\n          animation: false\n        }\n      },\n      legend: {\n        enabled: false\n      }\n    },\n    title: \"\"\n  }), React.createElement(\"span\", {\n    className: \"total\"\n  }, React.createElement(\"span\", {\n    className: \"chf\"\n  }, \"CHF \"), toMoney(amortization + interests + propertyExpenses)));\n};\n\nmodule.exportDefault(compose(FinancingDataContainer, SingleStructureContainer)(FinancingResultChart));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingResultErrors.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingResult/FinancingResultErrors.jsx                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nmodule.export({\n  ERROR_TYPES: () => ERROR_TYPES,\n  FinancingResultErrors: () => FinancingResultErrors\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet compose;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  }\n\n}, 1);\nlet T;\nmodule.link(\"../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 2);\nlet Calculator;\nmodule.link(\"../../../../utils/Calculator\", {\n  default(v) {\n    Calculator = v;\n  }\n\n}, 3);\nlet SingleStructureContainer;\nmodule.link(\"../containers/SingleStructureContainer\", {\n  default(v) {\n    SingleStructureContainer = v;\n  }\n\n}, 4);\nlet FinancingDataContainer;\nmodule.link(\"../containers/FinancingDataContainer\", {\n  default(v) {\n    FinancingDataContainer = v;\n  }\n\n}, 5);\nlet getIncomeRatio;\nmodule.link(\"./financingResultHelpers\", {\n  getIncomeRatio(v) {\n    getIncomeRatio = v;\n  }\n\n}, 6);\nlet FinancingResultChart;\nmodule.link(\"./FinancingResultChart\", {\n  default(v) {\n    FinancingResultChart = v;\n  }\n\n}, 7);\nlet FinanceCalculator;\nmodule.link(\"../FinancingCalculator\", {\n  default(v) {\n    FinanceCalculator = v;\n  }\n\n}, 8);\nconst ERROR_TYPES = {\n  BREAKING: 'BREAKING',\n  WARNING: 'WARNING'\n};\nconst errors = [{\n  id: 'noMortgageLoan',\n  func: (_ref) => {\n    let {\n      loan,\n      structureId\n    } = _ref;\n    const wantedLoan = Calculator.selectStructureKey({\n      loan,\n      structureId,\n      key: 'wantedLoan'\n    });\n    return !wantedLoan || wantedLoan === 0;\n  },\n  type: ERROR_TYPES.BREAKING\n}, {\n  id: 'missingOwnFunds',\n  func: (_ref2) => {\n    let {\n      loan,\n      structureId\n    } = _ref2;\n    return Calculator.isMissingOwnFunds({\n      loan,\n      structureId\n    });\n  },\n  type: ERROR_TYPES.WARNING\n}, {\n  id: 'tooMuchOwnFunds',\n  func: (_ref3) => {\n    let {\n      loan,\n      structureId\n    } = _ref3;\n    return Calculator.hasTooMuchOwnFunds({\n      loan,\n      structureId\n    });\n  },\n  type: ERROR_TYPES.WARNING\n}, {\n  id: 'highIncomeRatio',\n  func: data => getIncomeRatio(data) > FinanceCalculator.maxIncomeRatio,\n  type: ERROR_TYPES.WARNING\n}, {\n  id: 'invalidInterestRates',\n  func: (_ref4) => {\n    let {\n      loan,\n      structureId\n    } = _ref4;\n    return FinanceCalculator.checkInterestsAndTranches({\n      tranches: Calculator.selectStructureKey({\n        loan,\n        structureId,\n        key: 'loanTranches'\n      }),\n      interestRates: Calculator.selectStructureKey({\n        loan,\n        structureId,\n        key: 'offerId'\n      }) ? Calculator.selectOffer({\n        loan,\n        structureId\n      }) : loan.currentInterestRates\n    });\n  },\n  type: ERROR_TYPES.BREAKING\n}, {\n  id: 'missingCash',\n  func: data => {\n    const {\n      loan,\n      structureId\n    } = data;\n    return !Calculator.hasEnoughCash({\n      loan,\n      structureId\n    });\n  },\n  type: ERROR_TYPES.WARNING\n}];\n\nconst getError = props => errors.reduce((currentError, _ref5) => {\n  let {\n    id,\n    type,\n    func\n  } = _ref5;\n  return currentError || func(props) && {\n    id,\n    type\n  };\n}, undefined);\n\nconst FinancingResultErrors = props => {\n  const error = getError(props);\n\n  if (error.type === ERROR_TYPES.BREAKING) {\n    return React.createElement(\"p\", {\n      className: \"error error-box result\"\n    }, React.createElement(T, {\n      id: \"FinancingResultErrors.\".concat(error.id)\n    }));\n  }\n\n  if (error.type === ERROR_TYPES.WARNING) {\n    return React.createElement(\"div\", {\n      className: \"result\"\n    }, React.createElement(FinancingResultChart, (0, _extends2.default)({}, props, {\n      className: \"\"\n    })), React.createElement(\"p\", {\n      className: \"error error-box\"\n    }, React.createElement(T, {\n      id: \"FinancingResultErrors.\".concat(error.id)\n    })));\n  }\n\n  return React.createElement(FinancingResultChart, props);\n};\n\nmodule.exportDefault(compose(FinancingDataContainer, SingleStructureContainer)(FinancingResultErrors));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingResultInterests.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingResult/FinancingResultInterests.jsx                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Calculator;\nmodule.link(\"../../../../utils/Calculator\", {\n  default(v) {\n    Calculator = v;\n  }\n\n}, 1);\nlet T, Percent;\nmodule.link(\"../../../Translation\", {\n  default(v) {\n    T = v;\n  },\n\n  Percent(v) {\n    Percent = v;\n  }\n\n}, 2);\nlet Icon;\nmodule.link(\"../../../Icon\", {\n  default(v) {\n    Icon = v;\n  }\n\n}, 3);\nlet CalculatedValue;\nmodule.link(\"../FinancingSection/components\", {\n  CalculatedValue(v) {\n    CalculatedValue = v;\n  }\n\n}, 4);\nlet getInterestRates;\nmodule.link(\"../FinancingCalculator\", {\n  getInterestRates(v) {\n    getInterestRates = v;\n  }\n\n}, 5);\n\nconst getTooltipTitle = (_ref) => {\n  let {\n    structure,\n    loan,\n    structureId\n  } = _ref;\n  const {\n    offerId\n  } = structure;\n\n  if (offerId) {\n    const offer = Calculator.selectOffer({\n      loan,\n      structureId\n    });\n    return React.createElement(T, {\n      id: \"FinancingResultInterests.withOffer\",\n      values: {\n        name: offer.organisation.name\n      }\n    });\n  }\n\n  return React.createElement(T, {\n    id: \"FinancingResultInterests.noOffer\"\n  });\n};\n\nconst InterestsTooltip = props => {\n  const {\n    loanTranches\n  } = props.structure;\n  const rates = getInterestRates(props);\n  return React.createElement(\"div\", null, React.createElement(\"h4\", {\n    className: \"inherit-color\",\n    style: {\n      marginTop: 0\n    }\n  }, getTooltipTitle(props)), loanTranches.map((_ref2) => {\n    let {\n      type\n    } = _ref2;\n    const rate = rates[type];\n    return React.createElement(\"div\", {\n      key: type\n    }, React.createElement(\"b\", null, React.createElement(T, {\n      id: \"offer.\".concat(type, \".short\")\n    })), \"\\xA0\", React.createElement(Percent, {\n      value: rate\n    }));\n  }));\n};\n\nconst FinancingResultInterests = (_ref3) => {\n  let {\n    className\n  } = _ref3,\n      props = (0, _objectWithoutProperties2.default)(_ref3, [\"className\"]);\n  return React.createElement(\"div\", {\n    className: className\n  }, React.createElement(CalculatedValue, props), React.createElement(Icon, {\n    type: \"info\",\n    tooltip: React.createElement(InterestsTooltip, props),\n    tooltipPlacement: \"right\"\n  }));\n};\n\nmodule.exportDefault(FinancingResultInterests);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"financingResultHelpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingResult/financingResultHelpers.js                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  getInterests: () => getInterests,\n  getAmortization: () => getAmortization,\n  getPropertyExpenses: () => getPropertyExpenses,\n  getRemainingCash: () => getRemainingCash,\n  getRemainingInsurance2: () => getRemainingInsurance2,\n  getRemainingInsurance3A: () => getRemainingInsurance3A,\n  getRemainingInsurance3B: () => getRemainingInsurance3B,\n  getRemainingBank3A: () => getRemainingBank3A,\n  getBorrowRatio: () => getBorrowRatio,\n  getIncomeRatio: () => getIncomeRatio,\n  getBorrowRatioStatus: () => getBorrowRatioStatus,\n  getIncomeRatioStatus: () => getIncomeRatioStatus,\n  makeHasOwnFundsOfType: () => makeHasOwnFundsOfType\n});\nlet Calculator, CalculatorClass;\nmodule.link(\"../../../../utils/Calculator\", {\n  default(v) {\n    Calculator = v;\n  },\n\n  Calculator(v) {\n    CalculatorClass = v;\n  }\n\n}, 0);\nlet FinanceCalculator, getProperty;\nmodule.link(\"../FinancingCalculator\", {\n  default(v) {\n    FinanceCalculator = v;\n  },\n\n  getProperty(v) {\n    getProperty = v;\n  }\n\n}, 1);\nlet OWN_FUNDS_USAGE_TYPES;\nmodule.link(\"../../../../api/constants\", {\n  OWN_FUNDS_USAGE_TYPES(v) {\n    OWN_FUNDS_USAGE_TYPES = v;\n  }\n\n}, 2);\n\nconst initCalc = (_ref) => {\n  let {\n    loan,\n    structureId,\n    offer,\n    Calculator: InitializedCalculator\n  } = _ref;\n  let finalOffer = offer;\n\n  if (!finalOffer) {\n    const {\n      offers = []\n    } = loan;\n    const {\n      offerId\n    } = Calculator.selectStructure({\n      loan,\n      structureId\n    });\n    finalOffer = offers.find((_ref2) => {\n      let {\n        _id\n      } = _ref2;\n      return offerId === _id;\n    });\n  }\n\n  if (finalOffer && finalOffer.organisation && finalOffer.organisation.lenderRules) {\n    return new CalculatorClass({\n      loan,\n      structureId,\n      lenderRules: finalOffer.organisation.lenderRules\n    });\n  }\n\n  return InitializedCalculator;\n};\n\nconst getInterests = params => {\n  const {\n    structure: {\n      wantedLoan\n    }\n  } = params;\n  return FinanceCalculator.getInterestsWithTranches(params) * wantedLoan / 12;\n};\n\nconst getAmortization = params => {\n  const calc = initCalc(params);\n  const {\n    loan,\n    structureId\n  } = params;\n  return calc.getAmortization({\n    loan,\n    structureId\n  });\n};\n\nconst getPropertyExpenses = data => {\n  const property = getProperty(data);\n  return Math.round((property && property.yearlyExpenses) / 12 || 0);\n};\n\nconst getNonPledgedFundsOfType = (_ref3) => {\n  let {\n    structure: {\n      ownFunds\n    },\n    type\n  } = _ref3;\n  return ownFunds.filter((_ref4) => {\n    let {\n      type: t\n    } = _ref4;\n    return t === type;\n  }).filter((_ref5) => {\n    let {\n      usageType\n    } = _ref5;\n    return usageType !== OWN_FUNDS_USAGE_TYPES.PLEDGE;\n  }).reduce((sum, _ref6) => {\n    let {\n      value\n    } = _ref6;\n    return sum + value;\n  }, 0);\n};\n\nconst getRemainingCash = (_ref7) => {\n  let {\n    borrowers,\n    structure\n  } = _ref7;\n  return Calculator.getFortune({\n    borrowers\n  }) - getNonPledgedFundsOfType({\n    structure,\n    type: 'bankFortune'\n  });\n};\n\nconst getRemainingInsurance2 = (_ref8) => {\n  let {\n    borrowers,\n    structure\n  } = _ref8;\n  return Calculator.getInsurance2({\n    borrowers\n  }) - getNonPledgedFundsOfType({\n    structure,\n    type: 'insurance2'\n  });\n};\n\nconst getRemainingInsurance3A = (_ref9) => {\n  let {\n    borrowers,\n    structure\n  } = _ref9;\n  return Calculator.getInsurance3A({\n    borrowers\n  }) - getNonPledgedFundsOfType({\n    structure,\n    type: 'insurance3A'\n  });\n};\n\nconst getRemainingInsurance3B = (_ref10) => {\n  let {\n    borrowers,\n    structure\n  } = _ref10;\n  return Calculator.getInsurance3B({\n    borrowers\n  }) - getNonPledgedFundsOfType({\n    structure,\n    type: 'insurance3B'\n  });\n};\n\nconst getRemainingBank3A = (_ref11) => {\n  let {\n    borrowers,\n    structure\n  } = _ref11;\n  return Calculator.getBank3A({\n    borrowers\n  }) - getNonPledgedFundsOfType({\n    structure,\n    type: 'bank3A'\n  });\n};\n\nconst getBorrowRatio = params => {\n  const calc = initCalc(params);\n  const {\n    loan,\n    structureId\n  } = params;\n  return calc.getBorrowRatio({\n    loan,\n    structureId\n  });\n};\n\nconst getIncomeRatio = params => {\n  const calc = initCalc(params);\n  const {\n    loan,\n    structureId\n  } = params;\n  return calc.getIncomeRatio({\n    loan,\n    structureId\n  });\n};\n\nconst getBorrowRatioStatus = params => {\n  const calc = initCalc(params);\n  return calc.getBorrowRatioStatus({\n    borrowRatio: params.value\n  });\n};\n\nconst getIncomeRatioStatus = params => {\n  const calc = initCalc(params);\n  return calc.getIncomeRatioStatus({\n    incomeRatio: params.value\n  });\n};\n\nconst makeHasOwnFundsOfType = type => (_ref12) => {\n  let {\n    borrowers\n  } = _ref12;\n  return Calculator.getFunds({\n    borrowers,\n    type\n  }) > 0;\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"containers\":{\"FinancingDataContainer.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/containers/FinancingDataContainer.jsx                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Consumer;\nmodule.link(\"./loan-context\", {\n  Consumer(v) {\n    Consumer = v;\n  }\n\n}, 1);\nlet memoizeOne;\nmodule.link(\"../../../../utils/memoizeOne\", {\n  default(v) {\n    memoizeOne = v;\n  }\n\n}, 2);\nconst filterOffers = memoizeOne(offers => offers && !!offers.length ? offers.filter((_ref) => {\n  let {\n    enableOffer = true\n  } = _ref;\n  return enableOffer;\n}) : []);\nmodule.exportDefault(Component => props => React.createElement(Consumer, null, (_ref2) => {\n  let {\n    loan,\n    Calculator\n  } = _ref2;\n  return React.createElement(Component, (0, _extends2.default)({}, props, {\n    Calculator: Calculator,\n    loan: loan,\n    structures: loan.structures,\n    borrowers: loan.borrowers,\n    offers: filterOffers(loan.offers),\n    properties: loan.properties,\n    promotionOptions: loan.promotionOptions\n  }));\n}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"SingleStructureContainer.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/containers/SingleStructureContainer.jsx                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet Consumer;\nmodule.link(\"./loan-context\", {\n  Consumer(v) {\n    Consumer = v;\n  }\n\n}, 2);\nmodule.exportDefault(Component => props => {\n  const {\n    structureId\n  } = props;\n  return React.createElement(Consumer, null, (_ref) => {\n    let {\n      loan\n    } = _ref;\n    const structure = loan.structures.find((_ref2) => {\n      let {\n        id\n      } = _ref2;\n      return id === structureId;\n    });\n    structure.disableForms = Meteor.microservice === 'admin' ? false : structure.disabled;\n    return React.createElement(Component, (0, _extends2.default)({}, props, {\n      structure: structure\n    }));\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"StructureUpdateContainer.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/containers/StructureUpdateContainer.jsx                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet compose, withProps;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  },\n\n  withProps(v) {\n    withProps = v;\n  }\n\n}, 0);\nlet SingleStructureContainer;\nmodule.link(\"./SingleStructureContainer\", {\n  default(v) {\n    SingleStructureContainer = v;\n  }\n\n}, 1);\nlet withLoan;\nmodule.link(\"./withLoan\", {\n  default(v) {\n    withLoan = v;\n  }\n\n}, 2);\nlet updateStructure;\nmodule.link(\"../../../../api\", {\n  updateStructure(v) {\n    updateStructure = v;\n  }\n\n}, 3);\nmodule.exportDefault(compose(withLoan, SingleStructureContainer, withProps((_ref) => {\n  let {\n    structure,\n    id,\n    loan\n  } = _ref;\n  return {\n    value: structure[id],\n    updateStructure: value => updateStructure.run({\n      loanId: loan._id,\n      structureId: structure.id,\n      structure: typeof value === 'object' ? value : {\n        [id]: value\n      }\n    })\n  };\n})));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"loan-context.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/containers/loan-context.js                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  Provider: () => Provider,\n  Consumer: () => Consumer\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nconst {\n  Provider,\n  Consumer\n} = React.createContext();\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"withLoan.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/containers/withLoan.jsx                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Consumer;\nmodule.link(\"./loan-context\", {\n  Consumer(v) {\n    Consumer = v;\n  }\n\n}, 1);\nmodule.exportDefault(Component => props => React.createElement(Consumer, null, (_ref) => {\n  let {\n    loan\n  } = _ref;\n  return React.createElement(Component, (0, _extends2.default)({}, props, {\n    loan: loan\n  }));\n}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"FinancingCalculator.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingCalculator.js                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  getProperty: () => getProperty,\n  getOffer: () => getOffer,\n  getAmortizationRateMapper: () => getAmortizationRateMapper,\n  getInterestRates: () => getInterestRates\n});\nlet Calc, FinanceCalculator;\nmodule.link(\"../../../utils/FinanceCalculator\", {\n  default(v) {\n    Calc = v;\n  },\n\n  FinanceCalculator(v) {\n    FinanceCalculator = v;\n  }\n\n}, 0);\nlet Calculator;\nmodule.link(\"../../../utils/Calculator\", {\n  default(v) {\n    Calculator = v;\n  }\n\n}, 1);\nlet makeArgumentMapper;\nmodule.link(\"../../../utils/MiddlewareManager\", {\n  makeArgumentMapper(v) {\n    makeArgumentMapper = v;\n  }\n\n}, 2);\n\nconst getProperty = (_ref) => {\n  let {\n    loan,\n    structureId\n  } = _ref;\n  return Calculator.selectProperty({\n    loan,\n    structureId\n  });\n};\n\nconst getOffer = (_ref2) => {\n  let {\n    structureId,\n    loan\n  } = _ref2;\n  return Calculator.selectOffer({\n    loan,\n    structureId\n  });\n};\n\nconst getAmortizationRateMapper = data => {\n  const {\n    structure: {\n      wantedLoan,\n      propertyWork\n    }\n  } = data;\n  return {\n    borrowRatio: wantedLoan / (Calculator.selectPropertyValue(data) + propertyWork)\n  };\n};\n\nconst getInterestRates = (_ref3) => {\n  let {\n    structureId,\n    loan,\n    offer\n  } = _ref3;\n  const {\n    offerId\n  } = Calculator.selectStructure({\n    loan,\n    structureId\n  });\n  let interestRates;\n\n  if (offer) {\n    interestRates = offer;\n  } else if (offerId) {\n    interestRates = Calculator.selectOffer({\n      loan,\n      structureId\n    });\n  } else {\n    interestRates = loan.currentInterestRates;\n  }\n\n  return interestRates;\n};\n\nconst argumentMappings = {\n  getIncomeRatio: data => ({\n    monthlyIncome: Calculator.getTotalIncome(data) / 12,\n    monthlyPayment: Calc.getTheoreticalMonthly({\n      propAndWork: Calculator.selectPropertyValue(data) + data.structure.propertyWork,\n      loanValue: data.structure.wantedLoan,\n      amortizationRate: Calc.getAmortizationRate(data)\n    }).total\n  }),\n  getBorrowRatio: data => ({\n    propertyValue: Calculator.selectPropertyValue(data) + data.structure.propertyWork,\n    loan: data.structure.wantedLoan\n  }),\n  getLoanFromBorrowRatio: (borrowRatio, data) => {\n    const propertyValue = Calculator.selectPropertyValue(data) + data.structure.propertyWork;\n    return {\n      propertyValue,\n      borrowRatio\n    };\n  },\n  getAmortizationRateBase: getAmortizationRateMapper,\n  getInterestsWithTranches: data => {\n    const {\n      loan,\n      structureId\n    } = data;\n    const {\n      loanTranches\n    } = Calculator.selectStructure({\n      loan,\n      structureId\n    });\n    return {\n      tranches: loanTranches,\n      interestRates: getInterestRates(data)\n    };\n  },\n  getMinCash: data => ({\n    propertyValue: Calculator.selectPropertyValue(data),\n    propertyWork: data.structure.propertyWork,\n    fees: data.structure.notaryFees\n  }),\n  getFeesBase: data => ({\n    propertyValue: Calculator.selectPropertyValue(data),\n    propertyWork: data.structure.propertyWork,\n    fees: data.structure.notaryFees\n  })\n};\nconst argumentMapperMiddleware = makeArgumentMapper(argumentMappings);\nmodule.exportDefault(new FinanceCalculator({\n  middlewareObject: argumentMapperMiddleware\n}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingLabel.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingLabel.jsx                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => FinancingLabel\n});\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 0);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nclass FinancingLabel extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"getLabelHeight\", () => {\n      const {\n        id\n      } = this.props;\n\n      if (id) {\n        // Set height of label field to be as high as the rest of the lines\n        const nodes = document.querySelectorAll(\".\".concat(id));\n        const heights = Array.prototype.slice.call(nodes).map((_ref) => {\n          let {\n            clientHeight\n          } = _ref;\n          return clientHeight;\n        }); // This complains if heights is an empty array, so add 0 by default\n\n        return Math.max(...heights, 0);\n      }\n\n      return 0;\n    });\n\n    this.state = {\n      height: 0\n    };\n  }\n\n  componentDidMount() {\n    setTimeout(() => this.setState({\n      height: this.getLabelHeight()\n    }), 0);\n  }\n\n  render() {\n    const {\n      height\n    } = this.state;\n    const {\n      children\n    } = this.props;\n    return React.createElement(\"span\", {\n      className: \"label\",\n      style: {\n        height\n      }\n    }, children);\n  }\n\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FinancingLabels.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Financing/client/FinancingLabels.jsx                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet cx;\nmodule.link(\"classnames\", {\n  default(v) {\n    cx = v;\n  }\n\n}, 1);\nlet T;\nmodule.link(\"../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 2);\nlet makeFilterConfig;\nmodule.link(\"./FinancingSection/financingSectionHelpers\", {\n  makeFilterConfig(v) {\n    makeFilterConfig = v;\n  }\n\n}, 3);\nlet FinancingLabel;\nmodule.link(\"./FinancingLabel\", {\n  default(v) {\n    FinancingLabel = v;\n  }\n\n}, 4);\nlet FinancingDataContainer;\nmodule.link(\"./containers/FinancingDataContainer\", {\n  default(v) {\n    FinancingDataContainer = v;\n  }\n\n}, 5);\n\nconst renderLabel = configItem => {\n  const {\n    label,\n    id\n  } = configItem;\n\n  if (!label) {\n    return React.createElement(T, {\n      id: \"Financing.\".concat(id)\n    });\n  }\n\n  if (typeof label === 'function') {\n    const Label = label;\n    return React.createElement(Label, configItem);\n  }\n\n  return label;\n};\n\nconst FinancingLabels = (_ref) => {\n  let {\n    config,\n    className\n  } = _ref,\n      data = (0, _objectWithoutProperties2.default)(_ref, [\"config\", \"className\"]);\n  return React.createElement(\"div\", {\n    className: cx('financing-structures-labels', className)\n  }, config.filter(makeFilterConfig(data)).map((configItem, index) => React.createElement(FinancingLabel, {\n    id: configItem.id,\n    key: configItem.id || index\n  }, renderLabel(configItem))));\n};\n\nmodule.exportDefault(FinancingDataContainer(FinancingLabels));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"PromotionPage\":{\"client\":{\"UserPromotionLotsTable\":{\"test\":{\"PromotionLotSelector.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/PromotionPage/client/UserPromotionLotsTable/test/PromotionLotSelector.spec.jsx              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet mount;\nmodule.link(\"../../../../../utils/testHelpers/enzyme\", {\n  mount(v) {\n    mount = v;\n  }\n\n}, 2);\nlet PromotionLotSelector;\nmodule.link(\"../PromotionLotSelector\", {\n  default(v) {\n    PromotionLotSelector = v;\n  }\n\n}, 3);\n// import Checkbox from ''\ndescribe('PromotionLotSelector', () => {\n  let props;\n\n  const component = () => mount(React.createElement(PromotionLotSelector, props));\n\n  beforeEach(() => {\n    props = {};\n  });\n  it('value is true if promotionOption exists', () => {\n    props.promotionLotId = 'a';\n    props.promotionOptions = [{\n      promotionLots: [{\n        _id: 'a'\n      }]\n    }];\n    expect(component().find('Checkbox').first().props().value).to.equal(true);\n  });\n  it('value is false if promotionOption does not exists', () => {\n    props.promotionLotId = 'a';\n    props.promotionOptions = [{\n      promotionLots: [{\n        _id: 'b'\n      }]\n    }];\n    expect(component().find('Checkbox').first().props().value).to.equal(false);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"PromotionLotSelector.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/PromotionPage/client/UserPromotionLotsTable/PromotionLotSelector.jsx                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  PromotionLotSelector: () => PromotionLotSelector\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet withProps, compose, withState;\nmodule.link(\"recompose\", {\n  withProps(v) {\n    withProps = v;\n  },\n\n  compose(v) {\n    compose = v;\n  },\n\n  withState(v) {\n    withState = v;\n  }\n\n}, 1);\nlet promotionOptionRemove, promotionOptionInsert;\nmodule.link(\"../../../../api\", {\n  promotionOptionRemove(v) {\n    promotionOptionRemove = v;\n  },\n\n  promotionOptionInsert(v) {\n    promotionOptionInsert = v;\n  }\n\n}, 2);\nlet Checkbox;\nmodule.link(\"../../../Checkbox\", {\n  default(v) {\n    Checkbox = v;\n  }\n\n}, 3);\n\nconst PromotionLotSelector = (_ref) => {\n  let {\n    promotionLotIsSelected,\n    promotionLotId,\n    isLoading,\n    onChange,\n    disabled\n  } = _ref;\n  return React.createElement(Checkbox, {\n    onChange: event => {\n      event.preventDefault();\n      event.stopPropagation();\n      onChange();\n    },\n    value: promotionLotIsSelected,\n    id: promotionLotId,\n    disabled: isLoading || !promotionLotIsSelected && disabled\n  });\n};\n\nmodule.exportDefault(compose(withState('isLoading', 'setLoading', false), withProps((_ref2) => {\n  let {\n    promotionLotId,\n    promotionOptions,\n    setLoading,\n    loanId\n  } = _ref2;\n  const promotionOption = promotionOptions.find((_ref3) => {\n    let {\n      promotionLots\n    } = _ref3;\n    return promotionLots.find((_ref4) => {\n      let {\n        _id\n      } = _ref4;\n      return _id === promotionLotId;\n    });\n  });\n  return {\n    promotionLotIsSelected: !!promotionOption,\n    onChange: () => {\n      setLoading(true);\n\n      if (promotionOption) {\n        return promotionOptionRemove.run({\n          promotionOptionId: promotionOption._id\n        }).finally(() => setLoading(false));\n      }\n\n      return promotionOptionInsert.run({\n        promotionLotId,\n        loanId\n      }).finally(() => setLoading(false));\n    }\n  };\n}))(PromotionLotSelector));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}}},\"AutoForm2\":{\"client\":{\"test\":{\"AutoForm.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/client/test/AutoForm.spec.jsx                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 2);\nlet Button;\nmodule.link(\"@material-ui/core/Button\", {\n  default(v) {\n    Button = v;\n  }\n\n}, 3);\nlet TextField;\nmodule.link(\"uniforms-material/TextField\", {\n  default(v) {\n    TextField = v;\n  }\n\n}, 4);\nlet Loading;\nmodule.link(\"../../../Loading\", {\n  default(v) {\n    Loading = v;\n  }\n\n}, 5);\nlet pollUntilReady;\nmodule.link(\"../../../../utils/pollUntilReady\", {\n  default(v) {\n    pollUntilReady = v;\n  }\n\n}, 6);\nlet getMountedComponent;\nmodule.link(\"../../../../utils/testHelpers/getMountedComponent\", {\n  default(v) {\n    getMountedComponent = v;\n  }\n\n}, 7);\nlet AutoForm;\nmodule.link(\"../../AutoForm\", {\n  default(v) {\n    AutoForm = v;\n  }\n\n}, 8);\nlet CustomSelectField;\nmodule.link(\"../../CustomSelectField\", {\n  default(v) {\n    CustomSelectField = v;\n  }\n\n}, 9);\nlet DateField;\nmodule.link(\"../../../DateField\", {\n  default(v) {\n    DateField = v;\n  }\n\n}, 10);\nlet CUSTOM_AUTOFIELD_TYPES;\nmodule.link(\"../../constants\", {\n  CUSTOM_AUTOFIELD_TYPES(v) {\n    CUSTOM_AUTOFIELD_TYPES = v;\n  }\n\n}, 11);\nlet PercentField;\nmodule.link(\"../../../PercentInput\", {\n  PercentField(v) {\n    PercentField = v;\n  }\n\n}, 12);\nlet CustomAutoField;\nmodule.link(\"../../AutoFormComponents\", {\n  CustomAutoField(v) {\n    CustomAutoField = v;\n  }\n\n}, 13);\nlet props;\n\nconst component = () => getMountedComponent({\n  Component: AutoForm,\n  props\n});\n\nconst setInput = (name, value) => {\n  component().find(\"[name=\\\"\".concat(name, \"\\\"]\")).find('input').simulate('change', {\n    target: {\n      value\n    }\n  });\n};\n\ndescribe('AutoForm', () => {\n  beforeEach(() => {\n    getMountedComponent.reset();\n    props = {\n      schema: new SimpleSchema({\n        text: String\n      })\n    };\n  });\n  it('renders a form with a field and submit button', () => {\n    expect(component().find('form').exists()).to.equal(true);\n    expect(component().find(TextField).exists()).to.equal(true);\n    expect(component().find(Button).exists()).to.equal(true);\n  });\n  it('does not render fields with a false condition', () => {\n    props = {\n      schema: new SimpleSchema({\n        text: {\n          type: String,\n          condition: () => false\n        }\n      })\n    };\n    expect(component().find('form').exists()).to.equal(true);\n    expect(component().find(TextField).exists()).to.equal(false);\n    expect(component().find(Button).exists()).to.equal(true);\n  });\n  it('does not render fields based on changes to the model', () => {\n    props = {\n      schema: new SimpleSchema({\n        text: {\n          type: String,\n          condition: (_ref) => {\n            let {\n              stuff\n            } = _ref;\n            return stuff !== 'dude';\n          }\n        },\n        stuff: String\n      }),\n      model: {}\n    };\n    expect(component().find(TextField).length).to.equal(2);\n    setInput('stuff', 'dud');\n    expect(component().find(TextField).length).to.equal(2);\n    setInput('stuff', 'dude');\n    expect(component().find(TextField).length).to.equal(1);\n  });\n  it('skips fields that are omitted', () => {\n    props = {\n      schema: new SimpleSchema({\n        text: String,\n        stuff: String\n      }),\n      omitFields: ['text']\n    };\n    expect(component().find(TextField).length).to.equal(1);\n  });\n  it('filters the model and only submits the form values', () => {\n    props = {\n      schema: new SimpleSchema({\n        stuff: String,\n        arr: Array,\n        'arr.$': Object,\n        'arr.$.text': String\n      }),\n      model: {\n        stuff: 'yo',\n        arr: [{\n          text: 'dude'\n        }],\n        hello: 'dawg'\n      },\n      onSubmit: values => {\n        expect(values).to.deep.equal({\n          stuff: 'yo',\n          arr: [{\n            text: 'dude'\n          }]\n        });\n      }\n    };\n    component().find('form').simulate('submit');\n  });\n  describe('Custom components', () => {\n    it('renders a select field if allowedValues is passed', () => {\n      props = {\n        schema: new SimpleSchema({\n          text: {\n            type: String,\n            allowedValues: ['yo']\n          }\n        })\n      };\n      expect(component().find(CustomSelectField).length).to.equal(1);\n    });\n    it('renders a select field if customAllowedValues is passed', () => {\n      props = {\n        schema: new SimpleSchema({\n          text: {\n            type: String,\n            customAllowedValues: () => ['yo']\n          }\n        })\n      };\n      expect(component().find(CustomSelectField).length).to.equal(1);\n    });\n    it('renders a date field if uniforms type is Date', () => {\n      props = {\n        schema: new SimpleSchema({\n          text: {\n            type: Date,\n            uniforms: {\n              type: CUSTOM_AUTOFIELD_TYPES.DATE\n            }\n          }\n        })\n      };\n      expect(component().find(DateField).length).to.equal(1);\n    });\n    it('renders a percent field if uniforms type is percent', () => {\n      props = {\n        schema: new SimpleSchema({\n          text: {\n            type: Number,\n            uniforms: {\n              type: CUSTOM_AUTOFIELD_TYPES.PERCENT\n            }\n          }\n        })\n      };\n      expect(component().find(PercentField).length).to.equal(1);\n    });\n  });\n  describe('labels', () => {\n    it('removes the label if null is used', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: {\n            type: String,\n            uniforms: {\n              label: 'Yo'\n            }\n          }\n        }),\n        autoFieldProps: {\n          labels: {\n            myText: null\n          }\n        }\n      };\n      expect(component().find('label').length).to.equal(0);\n    });\n    it('sets the label', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: {\n            type: String,\n            uniforms: {\n              label: 'Yo'\n            }\n          }\n        }),\n        autoFieldProps: {\n          labels: {\n            myText: 'Yo'\n          }\n        }\n      };\n      expect(component().find('label').text()).to.include('Yo');\n    });\n    it('overrides the label if provided on the children', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: {\n            type: String,\n            uniforms: {\n              label: 'Yo'\n            }\n          }\n        }),\n        autoFieldProps: {\n          labels: {\n            myText: 'Yo'\n          }\n        },\n        children: React.createElement(CustomAutoField, {\n          name: \"myText\",\n          overrideLabel: \"Dude\"\n        })\n      };\n      expect(component().find('label').text()).to.include('Dude');\n    });\n    it('uses the label on the schema', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: {\n            type: String,\n            uniforms: {\n              label: 'mah dude'\n            }\n          }\n        })\n      };\n      expect(component().find('label').text()).to.include('mah dude');\n    });\n    it('sets a default label with Translation', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: {\n            type: String\n          }\n        })\n      };\n      expect(component().find('label').text()).to.include('Forms.myText');\n    });\n    it('does not set the label if one of them is null', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: {\n            type: String,\n            uniforms: {\n              label: null\n            }\n          }\n        })\n      };\n      expect(component().find('label').length).to.equal(0);\n    });\n    context('in nested fields', () => {\n      it('sets the right label on nested objects', () => {\n        props = {\n          schema: new SimpleSchema({\n            myText: Array,\n            'myText.$': Object,\n            'myText.$.stuff': String\n          })\n        };\n        component().find('button').at(0).simulate('click');\n        expect(component().find('label').text()).to.include('Forms.myText.stuff');\n      });\n    });\n  });\n  describe('placeholders', () => {\n    it('does not set a placeholder if placeholder is false on the autoform', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: {\n            type: String\n          }\n        }),\n        placeholder: false\n      };\n      expect(component().find(AutoForm).prop('placeholder')).to.equal(false);\n      expect(component().find('input').prop('placeholder')).to.equal('');\n    });\n    it('sets the placeholder', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: {\n            type: String,\n            uniforms: {\n              placeholder: 'Howdy'\n            }\n          }\n        }),\n        placeholder: true\n      };\n      expect(component().find('input').prop('placeholder')).to.equal('p.ex: Howdy');\n    });\n    it('does not set the placeholder if null is used', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: {\n            type: String,\n            uniforms: {\n              placeholder: null\n            }\n          }\n        }),\n        placeholder: true\n      };\n      expect(component().find('input').prop('placeholder')).to.equal(null);\n    });\n    it('sets a default placeholder', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: {\n            type: String\n          }\n        }),\n        placeholder: true\n      };\n      expect(component().find('input').prop('placeholder')).to.include('Forms.myText.placeholder');\n    });\n    context('in nested fields', () => {\n      it('sets a placeholder for a list item field', () => {\n        props = {\n          schema: new SimpleSchema({\n            myText: {\n              type: String,\n              allowedValues: ['yo', 'dude']\n            }\n          }),\n          placeholder: true\n        };\n        component().find(CustomSelectField).at(0).simulate('click');\n        component().update();\n        expect(component().find(CustomSelectField).prop('placeholder')).to.equal('Forms.myText.placeholder');\n      });\n      it('does not set a placeholder for a list item field', () => {\n        props = {\n          schema: new SimpleSchema({\n            myText: [String]\n          }),\n          placeholder: false\n        };\n        component().find('button').at(0).simulate('click');\n        expect(component().find('input').prop('placeholder')).to.equal('');\n      });\n      context('sets the right placeholder on nested objects', () => {\n        it('when parent label is not null', () => {\n          props = {\n            schema: new SimpleSchema({\n              myText: Array,\n              'myText.$': Object,\n              'myText.$.stuff': String\n            }),\n            placeholder: true\n          };\n          component().find('button').at(0).simulate('click');\n          expect(component().find('input').prop('placeholder')).to.include('Forms.myText.stuff.placeholder');\n        });\n        it('when parent label is null', () => {\n          props = {\n            schema: new SimpleSchema({\n              myText: Array,\n              'myText.$': {\n                type: Object,\n                uniforms: {\n                  label: null\n                }\n              },\n              'myText.$.stuff': {\n                type: String,\n                uniforms: {\n                  placeholder: 'myPlaceholder'\n                }\n              }\n            }),\n            placeholder: true\n          };\n          component().find('button').at(0).simulate('click');\n          expect(component().find('input').prop('placeholder')).to.include('myPlaceholder');\n        });\n      });\n      it('skips placeholders on nested objects', () => {\n        props = {\n          schema: new SimpleSchema({\n            myText: Array,\n            'myText.$': Object,\n            'myText.$.stuff': String\n          }),\n          placeholder: false\n        };\n        component().find('button').at(0).simulate('click');\n        expect(component().find('input').prop('placeholder')).to.equal('');\n      });\n    });\n  });\n  describe('children', () => {\n    it('have access to conditional rendering', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText1: {\n            type: String,\n            defaultValue: 'yo'\n          },\n          myText2: {\n            type: String,\n            condition: (_ref2) => {\n              let {\n                myText1\n              } = _ref2;\n              return myText1 === 'dude';\n            }\n          }\n        }),\n        children: React.createElement(React.Fragment, null, React.createElement(CustomAutoField, {\n          name: \"myText1\"\n        }), React.createElement(CustomAutoField, {\n          name: \"myText2\"\n        }))\n      };\n      expect(component().find(TextField).length).to.equal(1);\n      setInput('myText1', 'dude');\n      expect(component().find(TextField).length).to.equal(2);\n    });\n    it('have access to custom auto values', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText1: {\n            type: String,\n            defaultValue: 'yo'\n          },\n          myText2: {\n            type: String,\n            customAutoValue: (_ref3) => {\n              let {\n                myText1\n              } = _ref3;\n              return \"\".concat(myText1, \" dude\");\n            }\n          }\n        }),\n        children: React.createElement(React.Fragment, null, React.createElement(CustomAutoField, {\n          name: \"myText1\"\n        }), React.createElement(CustomAutoField, {\n          name: \"myText2\"\n        }))\n      };\n      expect(component().find('[name=\"myText2\"]').find('input').prop('value')).to.equal('yo dude');\n      setInput('myText1', 'hello');\n      expect(component().find('[name=\"myText2\"]').find('input').prop('value')).to.equal('hello dude');\n    });\n    it('can render custom components', () => {\n      props = {\n        schema: new SimpleSchema({\n          percent: {\n            type: Number,\n            uniforms: {\n              type: CUSTOM_AUTOFIELD_TYPES.PERCENT\n            }\n          },\n          date: {\n            type: Date,\n            uniforms: {\n              type: CUSTOM_AUTOFIELD_TYPES.DATE\n            }\n          },\n          select: {\n            type: String,\n            customAllowedValues: () => ['yo']\n          }\n        }),\n        children: React.createElement(React.Fragment, null, React.createElement(CustomAutoField, {\n          name: \"percent\"\n        }), React.createElement(CustomAutoField, {\n          name: \"date\"\n        }), React.createElement(CustomAutoField, {\n          name: \"select\"\n        }))\n      };\n      expect(component().find(PercentField).length).to.equal(1);\n      expect(component().find(DateField).length).to.equal(1);\n      expect(component().find(CustomSelectField).length).to.equal(1);\n    });\n  });\n  it('does not unmount components when updating the model, and loading only displays once', () => {\n    // Checking that the loading component only renders once is like\n    // checking that the component only mounted once, since loading only\n    // renders after mounting\n    props = {\n      schema: new SimpleSchema({\n        text: {\n          type: String,\n          uniforms: {\n            label: 'Text'\n          }\n        },\n        select: {\n          type: String,\n          customAllowedValues: () => ['yo'],\n          uniforms: {\n            label: 'Select'\n          }\n        }\n      }),\n      placeholder: false\n    };\n    expect(component().find(Loading).length).to.equal(1);\n    return pollUntilReady(() => {\n      component().update();\n      return component().find(Loading).length === 0;\n    }).then(() => {\n      // Loading only reappears when the component remounts\n      expect(component().find(Loading).length).to.equal(0);\n      setInput('text', 'some text');\n      expect(component().find(Loading).length).to.equal(0);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"AutoFormLayout.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/client/test/AutoFormLayout.spec.jsx                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet getMountedComponent;\nmodule.link(\"../../../../utils/testHelpers/getMountedComponent\", {\n  default(v) {\n    getMountedComponent = v;\n  }\n\n}, 2);\nlet AutoFormLayout;\nmodule.link(\"../../AutoFormLayout\", {\n  default(v) {\n    AutoFormLayout = v;\n  }\n\n}, 3);\n\nconst AutoField = props => React.createElement(\"span\", props);\n\nconst DemoComponent = props => React.createElement(\"span\", props);\n\ndescribe('AutoFormLayout', () => {\n  let props;\n\n  const component = () => getMountedComponent({\n    Component: AutoFormLayout,\n    props\n  });\n\n  beforeEach(() => {\n    getMountedComponent.reset();\n    props = {\n      AutoField,\n      schemaKeys: ['field1', 'field2', 'field3']\n    };\n  });\n  it('renders fields in a different layout', () => {\n    props.layout = [{\n      className: 'div1',\n      fields: ['field1']\n    }, {\n      className: 'div2',\n      fields: ['field2']\n    }];\n    expect(component().find('.div1').length).to.equal(1);\n    expect(component().find('.div2').length).to.equal(1);\n    expect(component().find('.div1 span[name=\"field1\"]').length).to.equal(1);\n    expect(component().find('.div2 span[name=\"field2\"]').length).to.equal(1);\n  });\n  it('renders custom components', () => {\n    props.layout = {\n      className: 'div1',\n      fields: ['field1'],\n      Component: DemoComponent\n    };\n    expect(component().find(DemoComponent).length).to.equal(1);\n    expect(component().find(DemoComponent).prop('className')).to.equal('div1');\n    expect(component().find(DemoComponent).find('span[name=\"field1\"]').length).to.equal(1);\n  });\n  it('renders all fields when a star is used in the field name', () => {\n    props.layout = [{\n      className: 'div1',\n      fields: ['field*']\n    }];\n    props.schemaKeys = ['field1', 'field2', 'field3'];\n    expect(component().find('.div1').length).to.equal(1);\n    expect(component().find('.div1 span[name=\"field1\"]').length).to.equal(1);\n    expect(component().find('.div1 span[name=\"field2\"]').length).to.equal(1);\n    expect(component().find('.div1 span[name=\"field3\"]').length).to.equal(1);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"CustomSelectField.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/client/test/CustomSelectField.spec.jsx                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 1);\nlet MenuItem;\nmodule.link(\"@material-ui/core/MenuItem\", {\n  default(v) {\n    MenuItem = v;\n  }\n\n}, 2);\nlet AutoForm;\nmodule.link(\"../../AutoForm\", {\n  default(v) {\n    AutoForm = v;\n  }\n\n}, 3);\nlet getMountedComponent;\nmodule.link(\"../../../../utils/testHelpers/getMountedComponent\", {\n  default(v) {\n    getMountedComponent = v;\n  }\n\n}, 4);\nlet CustomSelectField;\nmodule.link(\"../../CustomSelectField\", {\n  default(v) {\n    CustomSelectField = v;\n  }\n\n}, 5);\nlet pollUntilReady;\nmodule.link(\"../../../../utils/pollUntilReady\", {\n  default(v) {\n    pollUntilReady = v;\n  }\n\n}, 6);\nlet props;\n\nconst component = () => getMountedComponent({\n  Component: AutoForm,\n  props\n});\n\nconst setInput = (name, value) => {\n  component().find(\"[name=\\\"\".concat(name, \"\\\"]\")).find('input').simulate('change', {\n    target: {\n      value\n    }\n  });\n};\n\ndescribe('CustomSelectField', () => {\n  beforeEach(() => {\n    getMountedComponent.reset();\n    props = {};\n  });\n  context('with allowed values', () => {\n    it('renders allowed values', () => {\n      props = {\n        schema: new SimpleSchema({\n          text: {\n            type: String,\n            allowedValues: ['yo', 'dude']\n          }\n        })\n      };\n      expect(component().find(CustomSelectField).childAt(0).prop('values')).to.deep.equal(['yo', 'dude']);\n    });\n    it('renders the select field', () => {\n      const transform = value => \"\".concat(value, \"-mec\");\n\n      props = {\n        schema: new SimpleSchema({\n          text: {\n            type: String,\n            allowedValues: ['yo', 'hola'],\n            uniforms: {\n              transform,\n              displayEmpty: false,\n              placeholder: ''\n            }\n          }\n        })\n      };\n      const SelectField = component().find(CustomSelectField).at(0);\n      expect(SelectField).to.not.equal(undefined);\n      SelectField.find('[role=\"button\"]').simulate('click');\n      const items = component().find(CustomSelectField).find(MenuItem).find('li');\n      items.forEach(item => {\n        expect(item.text()).to.equal(transform(item.prop('data-value')));\n      });\n    });\n  });\n  context('with custom allowed values', () => {\n    it('renders the select field', () => {\n      const transform = value => \"\".concat(value, \"-mec\");\n\n      props = {\n        schema: new SimpleSchema({\n          text: {\n            type: String,\n            customAllowedValues: (_ref) => {\n              let {\n                value\n              } = _ref;\n              return [\"\".concat(value, \"1\"), \"\".concat(value, \"2\")];\n            },\n            uniforms: {\n              transform,\n              placeholder: '',\n              displayEmpty: false\n            }\n          },\n          value: {\n            type: String\n          }\n        })\n      };\n      setInput('value', 'yo');\n      return pollUntilReady(() => {\n        component().update();\n        return component().find(CustomSelectField).at(0).find('[role=\"button\"]').length === 1;\n      }).then(() => {\n        const SelectField = component().find(CustomSelectField).at(0).find('[role=\"button\"]');\n        expect(SelectField).to.not.equal(undefined);\n        SelectField.find('[role=\"button\"]').simulate('click');\n        const items = component().find(CustomSelectField).find(MenuItem).find('li');\n        expect(items.length).to.equal(2);\n        items.forEach(item => {\n          expect(item.text()).to.equal(transform(item.prop('data-value')));\n        });\n      });\n    });\n    it('renders custom allowed values coming from a promise', done => {\n      props = {\n        schema: new SimpleSchema({\n          text: {\n            type: String,\n            customAllowedValues: () => Promise.resolve(['yo', 'dude'])\n          }\n        })\n      };\n      component();\n      setTimeout(() => {\n        component().update();\n        expect(component().find(CustomSelectField).childAt(0).prop('values')).to.deep.equal(['yo', 'dude']);\n        done();\n      }, 0);\n    });\n    it('renders custom allowed values coming from a function', done => {\n      props = {\n        schema: new SimpleSchema({\n          text: {\n            type: String,\n            customAllowedValues: () => ['yo', 'dude']\n          }\n        })\n      };\n      component();\n      setTimeout(() => {\n        component().update();\n        expect(component().find(CustomSelectField).childAt(0).prop('values')).to.deep.equal(['yo', 'dude']);\n        done();\n      }, 0);\n    });\n    it('fetches allowed values based on the model', done => {\n      props = {\n        schema: new SimpleSchema({\n          text: {\n            type: String,\n            customAllowedValues: (_ref2) => {\n              let {\n                text2\n              } = _ref2;\n              return [text2];\n            }\n          },\n          text2: String\n        })\n      };\n      component();\n      setTimeout(() => {\n        component().update();\n        expect(component().find(CustomSelectField).childAt(0).prop('values')).to.deep.equal(['']);\n        setInput('text2', 'dude');\n        setTimeout(() => {\n          component().update();\n          expect(component().find(CustomSelectField).childAt(0).prop('values')).to.deep.equal(['dude']);\n          done();\n        }, 0);\n      }, 0);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"AutoForm.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/AutoForm.jsx                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React, PureComponent;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  PureComponent(v) {\n    PureComponent = v;\n  }\n\n}, 0);\nlet AutoForm;\nmodule.link(\"uniforms-material/AutoForm\", {\n  default(v) {\n    AutoForm = v;\n  }\n\n}, 1);\nlet pickBy;\nmodule.link(\"lodash/pickBy\", {\n  default(v) {\n    pickBy = v;\n  }\n\n}, 2);\nlet pick;\nmodule.link(\"lodash/pick\", {\n  default(v) {\n    pick = v;\n  }\n\n}, 3);\nlet withProps;\nmodule.link(\"recompose\", {\n  withProps(v) {\n    withProps = v;\n  }\n\n}, 4);\nlet makeCustomAutoField, CustomAutoField;\nmodule.link(\"./AutoFormComponents\", {\n  makeCustomAutoField(v) {\n    makeCustomAutoField = v;\n  },\n\n  CustomAutoField(v) {\n    CustomAutoField = v;\n  }\n\n}, 5);\nlet CustomAutoFields;\nmodule.link(\"./CustomAutoFields\", {\n  default(v) {\n    CustomAutoFields = v;\n  }\n\n}, 6);\nlet CustomSubmitField;\nmodule.link(\"./CustomSubmitField\", {\n  default(v) {\n    CustomSubmitField = v;\n  }\n\n}, 7);\n\nclass CustomAutoForm extends PureComponent {\n  constructor(props) {\n    super(props);\n    const {\n      autoFieldProps\n    } = props;\n\n    if (autoFieldProps) {\n      this.autoField = makeCustomAutoField(autoFieldProps);\n    } else {\n      this.autoField = CustomAutoField;\n    }\n  }\n\n  render() {\n    const _this$props = this.props,\n          {\n      children,\n      model,\n      omitFields,\n      placeholder = true,\n      submitFieldProps,\n      layout\n    } = _this$props,\n          props = (0, _objectWithoutProperties2.default)(_this$props, [\"children\", \"model\", \"omitFields\", \"placeholder\", \"submitFieldProps\", \"layout\"]);\n    return React.createElement(AutoForm, (0, _extends2.default)({\n      showInlineError: true,\n      model: pickBy(model, (_, key) => !key.startsWith('$')),\n      placeholder: placeholder,\n      className: \"autoform\"\n    }, props), children || React.createElement(React.Fragment, null, React.createElement(CustomAutoFields, {\n      omitFields: omitFields,\n      autoField: this.autoField\n    }), React.createElement(CustomSubmitField, submitFieldProps)));\n  }\n\n}\n\nmodule.exportDefault(withProps((_ref) => {\n  let {\n    onSubmit,\n    schema\n  } = _ref;\n  const schemaKeys = schema._schemaKeys;\n  return {\n    onSubmit: values => onSubmit(pick(values, [...schemaKeys, '_id']))\n  };\n})(CustomAutoForm));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"AutoFormComponents.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/AutoFormComponents.jsx                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  makeCustomAutoField: () => makeCustomAutoField,\n  CustomAutoField: () => CustomAutoField\n});\nlet React, useState;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  useState(v) {\n    useState = v;\n  }\n\n}, 0);\nlet intlShape;\nmodule.link(\"react-intl\", {\n  intlShape(v) {\n    intlShape = v;\n  }\n\n}, 1);\nlet compose, getContext;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  },\n\n  getContext(v) {\n    getContext = v;\n  }\n\n}, 2);\nlet connectField;\nmodule.link(\"uniforms/connectField\", {\n  default(v) {\n    connectField = v;\n  }\n\n}, 3);\nlet nothing;\nmodule.link(\"uniforms/nothing\", {\n  default(v) {\n    nothing = v;\n  }\n\n}, 4);\nlet AutoField;\nmodule.link(\"uniforms-material/AutoField\", {\n  default(v) {\n    AutoField = v;\n  }\n\n}, 5);\nlet BoolField;\nmodule.link(\"uniforms-material/BoolField\", {\n  default(v) {\n    BoolField = v;\n  }\n\n}, 6);\nlet DateField;\nmodule.link(\"../DateField\", {\n  default(v) {\n    DateField = v;\n  }\n\n}, 7);\nlet PercentField;\nmodule.link(\"../PercentInput\", {\n  PercentField(v) {\n    PercentField = v;\n  }\n\n}, 8);\nlet CUSTOM_AUTOFIELD_TYPES, COMPONENT_TYPES, FIELDS_TO_IGNORE;\nmodule.link(\"./constants\", {\n  CUSTOM_AUTOFIELD_TYPES(v) {\n    CUSTOM_AUTOFIELD_TYPES = v;\n  },\n\n  COMPONENT_TYPES(v) {\n    COMPONENT_TYPES = v;\n  },\n\n  FIELDS_TO_IGNORE(v) {\n    FIELDS_TO_IGNORE = v;\n  }\n\n}, 9);\nlet CustomSelectField;\nmodule.link(\"./CustomSelectField\", {\n  default(v) {\n    CustomSelectField = v;\n  }\n\n}, 10);\nlet OptimizedListField;\nmodule.link(\"./CustomListField\", {\n  OptimizedListField(v) {\n    OptimizedListField = v;\n  }\n\n}, 11);\nlet CustomNestField;\nmodule.link(\"./CustomNestField\", {\n  default(v) {\n    CustomNestField = v;\n  }\n\n}, 12);\nlet getLabel, getPlaceholder;\nmodule.link(\"./autoFormHelpers\", {\n  getLabel(v) {\n    getLabel = v;\n  },\n\n  getPlaceholder(v) {\n    getPlaceholder = v;\n  }\n\n}, 13);\nlet MoneyInput;\nmodule.link(\"../MoneyInput\", {\n  default(v) {\n    MoneyInput = v;\n  }\n\n}, 14);\nlet HtmlPreview;\nmodule.link(\"../HtmlPreview\", {\n  default(v) {\n    HtmlPreview = v;\n  }\n\n}, 15);\nlet ignoreProps;\nmodule.link(\"../../containers/updateForProps\", {\n  ignoreProps(v) {\n    ignoreProps = v;\n  }\n\n}, 16);\nconst container = ignoreProps(FIELDS_TO_IGNORE);\nconst OptimizedMoneyInput = container(MoneyInput);\nconst OptimizedDateField = container(DateField);\nconst OptimizedPercentField = container(PercentField);\nconst OptimizedBoolField = container(BoolField);\n\nconst determineComponentFromProps = (_ref) => {\n  let {\n    allowedValues,\n    customAllowedValues,\n    field: {\n      uniforms\n    },\n    fieldType\n  } = _ref;\n\n  if (allowedValues || customAllowedValues) {\n    return {\n      Component: CustomSelectField,\n      type: COMPONENT_TYPES.SELECT,\n      props: {\n        variant: 'outlined'\n      }\n    };\n  }\n\n  if (uniforms && uniforms.type === CUSTOM_AUTOFIELD_TYPES.DATE) {\n    return {\n      Component: OptimizedDateField,\n      type: COMPONENT_TYPES.DATE,\n      props: {\n        placeholder: null,\n        variant: 'outlined'\n      }\n    };\n  }\n\n  if (uniforms && uniforms.type === CUSTOM_AUTOFIELD_TYPES.PERCENT) {\n    return {\n      Component: OptimizedPercentField,\n      type: COMPONENT_TYPES.PERCENT\n    };\n  }\n\n  if (uniforms && uniforms.type === CUSTOM_AUTOFIELD_TYPES.MONEY) {\n    return {\n      Component: OptimizedMoneyInput,\n      type: COMPONENT_TYPES.MONEY,\n      props: {\n        margin: 'normal',\n        variant: 'outlined'\n      }\n    };\n  }\n\n  if (uniforms && uniforms.type === CUSTOM_AUTOFIELD_TYPES.MONEY_DECIMAL) {\n    return {\n      Component: OptimizedMoneyInput,\n      type: COMPONENT_TYPES.MONEY,\n      props: {\n        margin: 'normal',\n        decimal: true,\n        variant: 'outlined'\n      }\n    };\n  }\n\n  if (uniforms && uniforms.type === CUSTOM_AUTOFIELD_TYPES.HTML_PREVIEW) {\n    return {\n      Component: HtmlPreview,\n      type: COMPONENT_TYPES.HTML_PREVIEW,\n      props: {\n        placeholder: null\n      }\n    };\n  }\n\n  if (fieldType === Array) {\n    return {\n      Component: OptimizedListField,\n      type: COMPONENT_TYPES.ARRAY\n    };\n  }\n\n  if (fieldType === Object) {\n    return {\n      Component: CustomNestField,\n      type: COMPONENT_TYPES.ARRAY\n    };\n  }\n\n  if (fieldType === Boolean) {\n    return {\n      Component: OptimizedBoolField\n    };\n  }\n\n  if (uniforms && uniforms.render) {\n    return {\n      Component: uniforms.render,\n      type: COMPONENT_TYPES.RENDER,\n      props: {\n        placeholder: null\n      }\n    };\n  }\n\n  return {\n    Component: false,\n    type: null,\n    props: {\n      variant: 'outlined'\n    }\n  };\n};\n\nconst makeCustomAutoField = function () {\n  let {\n    labels = {},\n    intlPrefix\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  const CustomAutoField = (props, _ref2) => {\n    let {\n      uniforms: {\n        schema,\n        model,\n        state: {\n          submitting\n        }\n      }\n    } = _ref2;\n    const {\n      condition,\n      customAllowedValues,\n      customAutoValue\n    } = schema.getField(props.name);\n    const {\n      allowedValues,\n      field,\n      fieldType,\n      margin = 'normal'\n    } = props;\n    let [{\n      Component,\n      type,\n      props: additionalProps = {}\n    }] = useState(determineComponentFromProps({\n      allowedValues,\n      customAllowedValues,\n      field,\n      fieldType\n    }));\n    Component = Component || AutoField;\n    let autoValue;\n\n    if (typeof customAutoValue === 'function') {\n      autoValue = customAutoValue(model);\n    } // Don't recalculate these\n\n\n    const [label] = useState(getLabel((0, _objectSpread2.default)({}, props, additionalProps, {\n      intlPrefix,\n      label: labels[props.name]\n    })));\n    const [placeholder] = useState(getPlaceholder((0, _objectSpread2.default)({}, props, additionalProps, {\n      intlPrefix,\n      type\n    })));\n\n    if (typeof condition === 'function' && !condition(model, props.parent && Number(props.parent.name.slice(-1)))) {\n      return nothing;\n    }\n\n    return React.createElement(Component, (0, _extends2.default)({}, additionalProps, props, autoValue ? {\n      value: autoValue\n    } : {}, {\n      model: model,\n      submitting: submitting,\n      customAllowedValues: customAllowedValues,\n      label: label,\n      placeholder: placeholder,\n      InputLabelProps: {\n        shrink: true\n      },\n      margin: margin\n    }));\n  };\n\n  CustomAutoField.contextTypes = AutoField.contextTypes;\n  return compose(getContext((0, _objectSpread2.default)({\n    intl: intlShape\n  }, AutoField.contextTypes)), connectField)(CustomAutoField, {\n    includeInChain: false,\n    includeParent: true\n  });\n};\n\nconst CustomAutoField = makeCustomAutoField({});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"AutoFormDialog.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/AutoFormDialog.jsx                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nmodule.export({\n  AutoFormDialog: () => AutoFormDialog\n});\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 0);\nlet compose, withProps, withState;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  },\n\n  withProps(v) {\n    withProps = v;\n  },\n\n  withState(v) {\n    withState = v;\n  }\n\n}, 1);\nlet pick;\nmodule.link(\"lodash/pick\", {\n  default(v) {\n    pick = v;\n  }\n\n}, 2);\nlet MuiDialog;\nmodule.link(\"@material-ui/core/Dialog\", {\n  default(v) {\n    MuiDialog = v;\n  }\n\n}, 3);\nlet DialogTitle;\nmodule.link(\"@material-ui/core/DialogTitle\", {\n  default(v) {\n    DialogTitle = v;\n  }\n\n}, 4);\nlet Button;\nmodule.link(\"../Button\", {\n  default(v) {\n    Button = v;\n  }\n\n}, 5);\nlet AutoForm;\nmodule.link(\"./AutoForm\", {\n  default(v) {\n    AutoForm = v;\n  }\n\n}, 6);\nlet makeCustomAutoField, CustomAutoField;\nmodule.link(\"./AutoFormComponents\", {\n  makeCustomAutoField(v) {\n    makeCustomAutoField = v;\n  },\n\n  CustomAutoField(v) {\n    CustomAutoField = v;\n  }\n\n}, 7);\nlet AutoFormDialogContent;\nmodule.link(\"./AutoFormDialogContent\", {\n  default(v) {\n    AutoFormDialogContent = v;\n  }\n\n}, 8);\nlet AutoFormDialogActions;\nmodule.link(\"./AutoFormDialogActions\", {\n  default(v) {\n    AutoFormDialogActions = v;\n  }\n\n}, 9);\n\nconst getAutoFormProps = props => pick(props, ['model', 'schema', 'onSubmit', 'placeholder', 'showInlineError']);\n\nclass AutoFormDialog extends Component {\n  constructor(props) {\n    super(props);\n    const {\n      autoFieldProps\n    } = props;\n\n    if (autoFieldProps) {\n      this.autoField = makeCustomAutoField(autoFieldProps);\n    } else {\n      this.autoField = CustomAutoField;\n    }\n  }\n\n  render() {\n    const _this$props = this.props,\n          {\n      autoFieldProps,\n      buttonProps,\n      children,\n      description,\n      emptyDialog,\n      important,\n      noButton,\n      onSubmit,\n      opened,\n      renderAdditionalActions,\n      setOpen,\n      title,\n      triggerComponent,\n      disableActions = false,\n      layout,\n      maxWidth = 'sm'\n    } = _this$props,\n          otherProps = (0, _objectWithoutProperties2.default)(_this$props, [\"autoFieldProps\", \"buttonProps\", \"children\", \"description\", \"emptyDialog\", \"important\", \"noButton\", \"onSubmit\", \"opened\", \"renderAdditionalActions\", \"setOpen\", \"title\", \"triggerComponent\", \"disableActions\", \"layout\", \"maxWidth\"]);\n    const schemaKeys = this.props.schema._schemaKeys;\n\n    const handleOpen = event => {\n      event.stopPropagation();\n      event.preventDefault();\n      setOpen(true);\n    };\n\n    const handleClose = event => {\n      event.stopPropagation();\n      event.preventDefault();\n      setOpen(false);\n    };\n\n    return React.createElement(React.Fragment, null, triggerComponent ? triggerComponent(handleOpen) : !noButton && React.createElement(Button, (0, _extends2.default)({}, buttonProps, {\n      onClick: handleOpen\n    })), React.createElement(MuiDialog, (0, _extends2.default)({\n      disableBackdropClick: important,\n      disableEscapeKeyDown: important,\n      onClose: handleClose,\n      className: \"autoform-dialog\",\n      maxWidth: maxWidth,\n      fullWidth: true,\n      onClick: e => {\n        // Clicking on the dialog should not trigger a table row below it..\n        e.stopPropagation();\n      }\n    }, otherProps), title && React.createElement(DialogTitle, null, title), React.createElement(AutoForm, getAutoFormProps(this.props), React.createElement(AutoFormDialogContent, {\n      autoField: this.autoField,\n      description: description,\n      emptyDialog: emptyDialog,\n      handleClose: handleClose,\n      onSubmit: onSubmit,\n      layout: layout,\n      schemaKeys: schemaKeys\n    }, children), React.createElement(AutoFormDialogActions, {\n      handleClose: handleClose,\n      onSubmit: onSubmit,\n      renderAdditionalActions: renderAdditionalActions,\n      disableActions: disableActions\n    }))));\n  }\n\n}\n\nmodule.exportDefault(compose(withState('open', 'setOpen', false), withProps((_ref) => {\n  let {\n    onSubmit,\n    setOpen,\n    onSuccessMessage\n  } = _ref;\n  return {\n    onSubmit: function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return onSubmit(...args).then(() => {\n        setOpen(false);\n        module.dynamicImport(\"../../utils/message\").then((_ref2) => {\n          let {\n            default: message\n          } = _ref2;\n          message.success(onSuccessMessage ? typeof onSuccessMessage === 'function' ? onSuccessMessage(...args) : onSuccessMessage : \"C'est dans la boite !\", 5);\n        });\n      });\n    }\n  };\n}))(AutoFormDialog));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"AutoFormDialogActions.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/AutoFormDialogActions.jsx                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet DialogActions;\nmodule.link(\"@material-ui/core/DialogActions\", {\n  default(v) {\n    DialogActions = v;\n  }\n\n}, 1);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 2);\nlet withState;\nmodule.link(\"recompose\", {\n  withState(v) {\n    withState = v;\n  }\n\n}, 3);\nlet AutoFormDialogChildren;\nmodule.link(\"./AutoFormDialogChildren\", {\n  default(v) {\n    AutoFormDialogChildren = v;\n  }\n\n}, 4);\nlet Button;\nmodule.link(\"../Button\", {\n  default(v) {\n    Button = v;\n  }\n\n}, 5);\nlet CustomSubmitField;\nmodule.link(\"./CustomSubmitField\", {\n  default(v) {\n    CustomSubmitField = v;\n  }\n\n}, 6);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 7);\n\nconst AutoFormDialogActions = (_ref, _ref2) => {\n  let {\n    handleClose,\n    onSubmit,\n    renderAdditionalActions,\n    disableActions,\n    setDisableActions\n  } = _ref;\n  let {\n    uniforms: {\n      state: {\n        submitting\n      }\n    }\n  } = _ref2;\n  return React.createElement(DialogActions, null, React.createElement(AutoFormDialogChildren, {\n    renderFunc: () => React.createElement(Button, {\n      onClick: handleClose,\n      disabled: submitting || disableActions\n    }, React.createElement(T, {\n      id: \"general.cancel\"\n    }))\n  }), renderAdditionalActions && React.createElement(AutoFormDialogChildren, {\n    renderFunc: renderAdditionalActions,\n    closeDialog: handleClose,\n    onSubmit: onSubmit,\n    setDisableActions: setDisableActions,\n    disabled: submitting || disableActions\n  }), React.createElement(CustomSubmitField, {\n    setDisableActions: setDisableActions,\n    disableActions: disableActions\n  }));\n};\n\nAutoFormDialogActions.contextTypes = {\n  uniforms: PropTypes.shape({\n    state: PropTypes.shape({\n      submitting: PropTypes.bool.isRequired\n    }).isRequired\n  })\n};\nmodule.exportDefault(withState('disableActions', 'setDisableActions', (_ref3) => {\n  let {\n    disableActions\n  } = _ref3;\n  return !!disableActions;\n})(AutoFormDialogActions));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"AutoFormDialogChildren.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/AutoFormDialogChildren.jsx                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 0);\n\nconst AutoFormDialogChildren = (_ref, _ref2) => {\n  let {\n    renderFunc\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"renderFunc\"]);\n  let {\n    uniforms: {\n      state: {\n        submitting\n      }\n    }\n  } = _ref2;\n  return renderFunc((0, _objectSpread2.default)({\n    submitting\n  }, props));\n};\n\nAutoFormDialogChildren.contextTypes = {\n  uniforms: PropTypes.shape({\n    state: PropTypes.shape({\n      submitting: PropTypes.bool.isRequired\n    }).isRequired\n  }).isRequired\n};\nmodule.exportDefault(AutoFormDialogChildren);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"AutoFormDialogContent.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/AutoFormDialogContent.jsx                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet DialogContent;\nmodule.link(\"@material-ui/core/DialogContent\", {\n  default(v) {\n    DialogContent = v;\n  }\n\n}, 1);\nlet DialogContentText;\nmodule.link(\"@material-ui/core/DialogContentText\", {\n  default(v) {\n    DialogContentText = v;\n  }\n\n}, 2);\nlet ErrorsField;\nmodule.link(\"uniforms-material/ErrorsField\", {\n  default(v) {\n    ErrorsField = v;\n  }\n\n}, 3);\nlet CustomAutoFields;\nmodule.link(\"./CustomAutoFields\", {\n  default(v) {\n    CustomAutoFields = v;\n  }\n\n}, 4);\nlet AutoFormDialogChildren;\nmodule.link(\"./AutoFormDialogChildren\", {\n  default(v) {\n    AutoFormDialogChildren = v;\n  }\n\n}, 5);\nlet AutoFormLayout;\nmodule.link(\"./AutoFormLayout\", {\n  default(v) {\n    AutoFormLayout = v;\n  }\n\n}, 6);\n\nconst AutoFormDialogContent = (_ref) => {\n  let {\n    description,\n    emptyDialog,\n    autoField,\n    children,\n    handleClose,\n    onSubmit,\n    layout,\n    schemaKeys\n  } = _ref;\n  return React.createElement(DialogContent, null, description && React.createElement(DialogContentText, {\n    style: {\n      marginBottom: 32\n    }\n  }, description), !emptyDialog && !layout && React.createElement(CustomAutoFields, {\n    autoField: autoField,\n    automaticFocus: true\n  }), !emptyDialog && layout && React.createElement(AutoFormLayout, {\n    AutoField: autoField,\n    layout: layout,\n    schemaKeys: schemaKeys,\n    automaticFocus: true\n  }), React.createElement(ErrorsField, null), children && React.createElement(AutoFormDialogChildren, {\n    renderFunc: children,\n    closeDialog: handleClose,\n    onSubmit: onSubmit\n  }));\n};\n\nmodule.exportDefault(AutoFormDialogContent);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"AutoFormLayout.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/AutoFormLayout.jsx                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\n\nconst renderLayout = (_ref) => {\n  let {\n    layout,\n    renderLayoutItem,\n    renderField,\n    AutoField\n  } = _ref;\n\n  if (!layout) {\n    return null;\n  }\n\n  if (typeof layout === 'string') {\n    return renderField(layout, AutoField);\n  }\n\n  if (Array.isArray(layout)) {\n    return layout.map(renderLayoutItem);\n  }\n\n  return renderLayoutItem(layout);\n};\n\nconst AutoFormLayout = (_ref2) => {\n  let {\n    AutoField,\n    layout,\n    schemaKeys,\n    automaticFocus\n  } = _ref2;\n  let fieldCount = 0;\n\n  const renderField = field => {\n    if (field[field.length - 1] === '*') {\n      return schemaKeys.filter(key => key.startsWith(field.slice(0, -1))).map(matchedField => renderField(matchedField, AutoField));\n    }\n\n    if (!schemaKeys.includes(field)) {\n      return null;\n    }\n\n    return React.createElement(AutoField, {\n      name: field,\n      key: field,\n      autoFocus: automaticFocus && fieldCount++ === 0\n    });\n  };\n\n  const renderLayoutItem = item => {\n    if (typeof item === 'string') {\n      return renderField(item, AutoField);\n    }\n\n    const {\n      fields = [],\n      layout: subLayout,\n      Component = 'div'\n    } = item,\n          props = (0, _objectWithoutProperties2.default)(item, [\"fields\", \"layout\", \"Component\"]);\n    return React.createElement(Component, props, fields.map(field => renderField(field, AutoField)), subLayout ? renderLayout({\n      layout: subLayout,\n      renderLayoutItem,\n      renderField,\n      AutoField\n    }) : null);\n  };\n\n  return renderLayout({\n    layout,\n    renderLayoutItem,\n    renderField,\n    AutoField\n  });\n};\n\nmodule.exportDefault(AutoFormLayout);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"CustomAutoFields.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/CustomAutoFields.jsx                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet createElement;\nmodule.link(\"react\", {\n  createElement(v) {\n    createElement = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet AutoField;\nmodule.link(\"uniforms-material/AutoField\", {\n  default(v) {\n    AutoField = v;\n  }\n\n}, 2);\n\nconst CustomAutoFields = (_ref, _ref2) => {\n  let {\n    autoField,\n    element,\n    fields,\n    omitFields,\n    automaticFocus\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"autoField\", \"element\", \"fields\", \"omitFields\", \"automaticFocus\"]);\n  let {\n    uniforms: {\n      schema\n    }\n  } = _ref2;\n  return createElement(element, (0, _objectSpread2.default)({\n    key: 'custom-autofields',\n    className: 'autofields'\n  }, props), (fields || schema.getSubfields()).filter(field => omitFields.indexOf(field) === -1).map((field, index) => createElement(autoField, {\n    key: field,\n    name: field,\n    autoFocus: automaticFocus && index === 0\n  })));\n};\n\nCustomAutoFields.contextTypes = AutoField.contextTypes;\nCustomAutoFields.propTypes = {\n  autoField: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  element: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  fields: PropTypes.arrayOf(PropTypes.string),\n  omitFields: PropTypes.arrayOf(PropTypes.string)\n};\nCustomAutoFields.defaultProps = {\n  autoField: AutoField,\n  element: 'div',\n  omitFields: []\n};\nmodule.exportDefault(CustomAutoFields);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"CustomListAddField.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/CustomListAddField.jsx                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet ListAddField;\nmodule.link(\"uniforms-material/ListAddField\", {\n  default(v) {\n    ListAddField = v;\n  }\n\n}, 1);\nlet IconMap;\nmodule.link(\"../Icon/Icon\", {\n  iconMap(v) {\n    IconMap = v;\n  }\n\n}, 2);\n\nconst CustomListAddField = props => React.createElement(ListAddField, (0, _extends2.default)({\n  color: \"primary\",\n  className: \"list-add-field\",\n  size: \"small\"\n}, props, {\n  icon: React.createElement(IconMap.add, null)\n}));\n\nmodule.exportDefault(CustomListAddField);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"CustomListField.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/CustomListField.jsx                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nmodule.export({\n  OptimizedListField: () => OptimizedListField\n});\nlet ListMaterial;\nmodule.link(\"@material-ui/core/List\", {\n  default(v) {\n    ListMaterial = v;\n  }\n\n}, 0);\nlet ListSubheader;\nmodule.link(\"@material-ui/core/ListSubheader\", {\n  default(v) {\n    ListSubheader = v;\n  }\n\n}, 1);\nlet React, Children;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Children(v) {\n    Children = v;\n  }\n\n}, 2);\nlet connectField;\nmodule.link(\"uniforms/connectField\", {\n  default(v) {\n    connectField = v;\n  }\n\n}, 3);\nlet filterDOMProps;\nmodule.link(\"uniforms/filterDOMProps\", {\n  default(v) {\n    filterDOMProps = v;\n  }\n\n}, 4);\nlet joinName;\nmodule.link(\"uniforms/joinName\", {\n  default(v) {\n    joinName = v;\n  }\n\n}, 5);\nlet shouldUpdate;\nmodule.link(\"recompose\", {\n  shouldUpdate(v) {\n    shouldUpdate = v;\n  }\n\n}, 6);\nlet CustomListAddField;\nmodule.link(\"./CustomListAddField\", {\n  default(v) {\n    CustomListAddField = v;\n  }\n\n}, 7);\nlet ListItemField;\nmodule.link(\"./CustomListItemField\", {\n  default(v) {\n    ListItemField = v;\n  }\n\n}, 8);\nlet FIELDS_TO_IGNORE;\nmodule.link(\"./constants\", {\n  FIELDS_TO_IGNORE(v) {\n    FIELDS_TO_IGNORE = v;\n  }\n\n}, 9);\n\nconst List = (_ref) => {\n  let {\n    addIcon,\n    children,\n    dense,\n    initialCount,\n    itemProps,\n    label,\n    name,\n    value\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"addIcon\", \"children\", \"dense\", \"initialCount\", \"itemProps\", \"label\", \"name\", \"value\"]);\n  return React.createElement(\"div\", null, React.createElement(ListMaterial, (0, _extends2.default)({\n    key: \"list\",\n    dense: dense,\n    subheader: label ? React.createElement(ListSubheader, {\n      disableSticky: true\n    }, label) : undefined\n  }, filterDOMProps(props)), children ? value.map((item, index) => Children.map(children, child => React.cloneElement(child, {\n    key: index,\n    label: null,\n    name: joinName(name, child.props.name && child.props.name.replace('$', index))\n  }))) : value.map((item, index) => React.createElement(ListItemField, (0, _extends2.default)({\n    key: index,\n    label: null,\n    name: joinName(name, index)\n  }, itemProps)))), React.createElement(CustomListAddField, {\n    key: \"listAddField\",\n    name: \"\".concat(name, \".$\"),\n    initialCount: initialCount\n  }));\n};\n\nList.defaultProps = {\n  dense: true\n};\nconst CustomListField = connectField(List, {\n  ensureValue: false,\n  includeInChain: false\n});\nconst OptimizedListField = shouldUpdate((props, nextProps) => {\n  let update = false;\n  Object.keys(nextProps).filter(propName => ![...FIELDS_TO_IGNORE, 'value'].includes(propName)).some(propName => {\n    const prop = nextProps[propName];\n\n    if (prop !== props[propName]) {\n      update = true;\n      return true;\n    }\n\n    return false;\n  });\n\n  if (JSON.stringify(props.value) !== JSON.stringify(nextProps.value)) {\n    // Add an exception for list value, as it is an array,\n    // it always updates because [] !== []\n    update = true;\n  }\n\n  return update;\n})(CustomListField);\nmodule.exportDefault(CustomListField);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"CustomListItemField.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/CustomListItemField.jsx                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet ListItemMaterial;\nmodule.link(\"@material-ui/core/ListItem\", {\n  default(v) {\n    ListItemMaterial = v;\n  }\n\n}, 0);\nlet React, Children;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Children(v) {\n    Children = v;\n  }\n\n}, 1);\nlet connectField;\nmodule.link(\"uniforms/connectField\", {\n  default(v) {\n    connectField = v;\n  }\n\n}, 2);\nlet joinName;\nmodule.link(\"uniforms/joinName\", {\n  default(v) {\n    joinName = v;\n  }\n\n}, 3);\nlet ListDelField;\nmodule.link(\"uniforms-material/ListDelField\", {\n  default(v) {\n    ListDelField = v;\n  }\n\n}, 4);\nlet CustomAutoField;\nmodule.link(\"./AutoFormComponents\", {\n  CustomAutoField(v) {\n    CustomAutoField = v;\n  }\n\n}, 5);\nlet IconMap;\nmodule.link(\"../Icon/Icon\", {\n  iconMap(v) {\n    IconMap = v;\n  }\n\n}, 6);\n\nconst ListItem = (_ref) => {\n  let {\n    dense,\n    divider,\n    disableGutters,\n    removeIcon\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"dense\", \"divider\", \"disableGutters\", \"removeIcon\"]);\n  return React.createElement(ListItemMaterial, {\n    dense: dense,\n    divider: divider,\n    disableGutters: disableGutters\n  }, props.children ? Children.map(props.children, child => React.cloneElement(child, {\n    name: joinName(props.name, child.props.name),\n    label: null\n  })) : React.createElement(CustomAutoField, (0, _extends2.default)({\n    isListField: true\n  }, props)), React.createElement(ListDelField, {\n    className: \"list-del-field\",\n    name: props.name,\n    icon: React.createElement(IconMap.remove, null),\n    size: \"small\"\n  }));\n};\n\nListItem.defaultProps = {\n  dense: true\n};\nmodule.exportDefault(connectField(ListItem, {\n  includeInChain: false,\n  includeParent: true\n}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"CustomNestField.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/CustomNestField.jsx                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet FormLabel;\nmodule.link(\"@material-ui/core/FormLabel\", {\n  default(v) {\n    FormLabel = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet connectField;\nmodule.link(\"uniforms/connectField\", {\n  default(v) {\n    connectField = v;\n  }\n\n}, 2);\nlet injectName;\nmodule.link(\"uniforms/injectName\", {\n  default(v) {\n    injectName = v;\n  }\n\n}, 3);\nlet joinName;\nmodule.link(\"uniforms/joinName\", {\n  default(v) {\n    joinName = v;\n  }\n\n}, 4);\nlet wrapField;\nmodule.link(\"uniforms-material/wrapField\", {\n  default(v) {\n    wrapField = v;\n  }\n\n}, 5);\nlet CustomAutoField;\nmodule.link(\"./AutoFormComponents\", {\n  CustomAutoField(v) {\n    CustomAutoField = v;\n  }\n\n}, 6);\n\nconst Nest = (_ref) => {\n  let {\n    children,\n    fields,\n    itemProps,\n    label,\n    name\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"children\", \"fields\", \"itemProps\", \"label\", \"name\"]);\n  return wrapField((0, _objectSpread2.default)({}, props, {\n    component: undefined\n  }), label && React.createElement(FormLabel, {\n    component: \"legend\"\n  }, label), children ? injectName(name, children) : fields.map(key => React.createElement(CustomAutoField, (0, _extends2.default)({\n    key: key,\n    name: joinName(name, key)\n  }, itemProps))));\n};\n\nNest.defaultProps = {\n  fullWidth: true,\n  margin: 'none'\n};\nmodule.exportDefault(connectField(Nest, {\n  ensureValue: false,\n  includeInChain: false,\n  includeParent: true\n}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"CustomSelectField.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/CustomSelectField.jsx                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet SelectField;\nmodule.link(\"uniforms-material/SelectField\", {\n  default(v) {\n    SelectField = v;\n  }\n\n}, 1);\nlet compose;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  }\n\n}, 2);\nlet CustomSelectFieldContainer;\nmodule.link(\"./CustomSelectFieldContainer\", {\n  default(v) {\n    CustomSelectFieldContainer = v;\n  }\n\n}, 3);\nlet ignoreProps;\nmodule.link(\"../../containers/updateForProps\", {\n  ignoreProps(v) {\n    ignoreProps = v;\n  }\n\n}, 4);\n\nconst CustomSelectField = (_ref) => {\n  let {\n    transform,\n    values = [],\n    renderValue\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"transform\", \"values\", \"renderValue\"]);\n  return React.createElement(SelectField, (0, _extends2.default)({}, props, {\n    allowedValues: values,\n    transform: transform,\n    renderValue: renderValue,\n    labelProps: {\n      shrink: true\n    }\n  }));\n};\n\nmodule.exportDefault(compose(CustomSelectFieldContainer, React.memo, ignoreProps(['label', 'InputLabelProps', 'onChange', 'changedMap']))(CustomSelectField));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"CustomSelectFieldContainer.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/CustomSelectFieldContainer.jsx                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React, PureComponent;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  PureComponent(v) {\n    PureComponent = v;\n  }\n\n}, 0);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 1);\nlet Chip;\nmodule.link(\"../Material/Chip\", {\n  default(v) {\n    Chip = v;\n  }\n\n}, 2);\nlet Loading;\nmodule.link(\"../Loading\", {\n  default(v) {\n    Loading = v;\n  }\n\n}, 3);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exportDefault(Component => {\n  class CustomSelectFieldContainer extends PureComponent {\n    constructor(_props) {\n      super(_props);\n\n      _defineProperty(this, \"getAllowedValues\", props => {\n        const {\n          customAllowedValues,\n          model,\n          parent\n        } = props;\n        const {\n          values\n        } = this.state;\n\n        if (customAllowedValues) {\n          this.setState({\n            loading: !values || !values.length\n          });\n        }\n\n        if (customAllowedValues && typeof customAllowedValues === 'function') {\n          Promise.resolve().then(() => customAllowedValues(model, parent && Number(parent.name.slice(-1)))).then(result => this.setState({\n            values: result\n          })).finally(() => this.setState({\n            loading: false\n          }));\n        } else if (customAllowedValues && typeof customAllowedValues === 'object') {\n          const {\n            query,\n            params = () => ({}),\n            allowNull\n          } = customAllowedValues;\n          query.clone(params(model)).fetch((error, data) => {\n            if (error) {\n              return this.setState({\n                error\n              });\n            }\n\n            const ids = data.map((_ref) => {\n              let {\n                _id\n              } = _ref;\n              return _id;\n            });\n            this.setState({\n              values: allowNull ? [null, ...ids] : ids,\n              data: allowNull ? [null, ...data] : data,\n              error: null,\n              loading: false\n            });\n          });\n        }\n      });\n\n      _defineProperty(this, \"formatOption\", option => {\n        const {\n          allowedValuesIntlId,\n          intlId,\n          name\n        } = this.props;\n        return React.createElement(T, {\n          id: \"Forms.\".concat(allowedValuesIntlId || intlId || name, \".\").concat(option)\n        });\n      });\n\n      _defineProperty(this, \"renderValue\", value => {\n        const transform = this.makeTransform();\n        const {\n          placeholder\n        } = this.props;\n\n        if (!value) {\n          return placeholder;\n        }\n\n        if (Array.isArray(value)) {\n          if (value.length === 0) {\n            return placeholder;\n          }\n\n          return value.map(val => React.createElement(Chip, {\n            key: val,\n            label: transform ? transform(val) : this.formatOption(val),\n            style: {\n              marginRight: 4\n            }\n          }));\n        }\n\n        if (transform) {\n          return transform(value);\n        }\n\n        return this.formatOption(value);\n      });\n\n      _defineProperty(this, \"makeTransform\", () => {\n        const {\n          transform\n        } = this.props;\n        const {\n          data\n        } = this.state;\n\n        if (data) {\n          return value => {\n            if (!value) {\n              // If the value is falsy, just transform it\n              return transform(value);\n            }\n\n            return transform(data.find(item => (item && item._id) === value));\n          };\n        }\n\n        return transform;\n      });\n\n      this.state = {\n        values: _props.allowedValues,\n        data: null,\n        error: null\n      };\n    }\n\n    componentDidMount() {\n      this.getAllowedValues(this.props);\n    }\n\n    componentWillReceiveProps(nextProps) {\n      const {\n        model: nextModel\n      } = nextProps;\n      const {\n        model\n      } = this.props;\n\n      if (model !== nextModel) {\n        this.getAllowedValues(nextProps);\n      }\n    }\n\n    render() {\n      const {\n        values,\n        error,\n        loading\n      } = this.state;\n      const _this$props = this.props,\n            {\n        placeholder,\n        displayEmpty,\n        model,\n        uniforms,\n        field,\n        fields\n      } = _this$props,\n            rest = (0, _objectWithoutProperties2.default)(_this$props, [\"placeholder\", \"displayEmpty\", \"model\", \"uniforms\", \"field\", \"fields\"]);\n\n      if (error) {\n        return React.createElement(\"span\", {\n          className: \"error\"\n        }, error.message || error.reason);\n      }\n\n      if (loading) {\n        return React.createElement(Loading, {\n          small: true\n        });\n      }\n\n      return React.createElement(Component, (0, _extends2.default)({}, rest, {\n        placeholder: displayEmpty ? placeholder : '',\n        values: values,\n        formatOption: this.formatOption,\n        renderValue: this.renderValue,\n        transform: this.makeTransform() || this.formatOption\n      }));\n    }\n\n  }\n\n  CustomSelectFieldContainer.defaultProps = {\n    displayEmpty: true\n  };\n  return CustomSelectFieldContainer;\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"CustomSubmitField.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/CustomSubmitField.jsx                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet filterDOMProps;\nmodule.link(\"uniforms/filterDOMProps\", {\n  default(v) {\n    filterDOMProps = v;\n  }\n\n}, 1);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 2);\nlet Button;\nmodule.link(\"../Button\", {\n  default(v) {\n    Button = v;\n  }\n\n}, 3);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 4);\n\nconst shouldDisableButton = (_ref) => {\n  let {\n    disableActions,\n    error,\n    state: {\n      submitting,\n      validating,\n      disabled\n    }\n  } = _ref;\n  return !!(disableActions || error || disabled || submitting || validating);\n};\n\nconst CustomSubmitField = (_ref2, _ref3) => {\n  let {\n    children,\n    disableActions,\n    inputRef,\n    label,\n    value,\n    setDisableActions,\n    primary = true,\n    raised = true,\n    secondary\n  } = _ref2,\n      props = (0, _objectWithoutProperties2.default)(_ref2, [\"children\", \"disableActions\", \"inputRef\", \"label\", \"value\", \"setDisableActions\", \"primary\", \"raised\", \"secondary\"]);\n  let {\n    uniforms: {\n      state,\n      error\n    }\n  } = _ref3;\n  return React.createElement(Button, (0, _extends2.default)({\n    disabled: shouldDisableButton({\n      disableActions,\n      error,\n      state,\n      setDisableActions\n    }),\n    ref: inputRef,\n    type: \"submit\",\n    value: value,\n    loading: state.submitting,\n    primary: !secondary && primary,\n    raised: raised,\n    secondary: secondary,\n    label: label || React.createElement(T, {\n      id: \"general.ok\"\n    }),\n    onClick: e => {\n      // Make sure the target type is event, even if the label of the button\n      // was clicked. This is useful in PropertyForm and DashboardRecapProperty\n      e.target.type = 'submit';\n    }\n  }, filterDOMProps(props)), children);\n};\n\nCustomSubmitField.contextTypes = {\n  uniforms: PropTypes.shape({\n    error: PropTypes.any,\n    state: PropTypes.shape({\n      submitting: PropTypes.bool.isRequired,\n      disabled: PropTypes.bool.isRequired,\n      validating: PropTypes.bool.isRequired\n    }).isRequired\n  })\n};\nCustomSubmitField.defaultProps = {\n  variant: 'contained'\n};\nmodule.exportDefault(CustomSubmitField);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"CustomTextField.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/CustomTextField.jsx                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet TextField;\nmodule.link(\"uniforms-material/TextField\", {\n  default(v) {\n    TextField = v;\n  }\n\n}, 1);\nmodule.exportDefault(props => React.createElement(TextField, (0, _extends2.default)({\n  variant: \"outlined\"\n}, props)));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"autoFormHelpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/autoFormHelpers.js                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  getLabel: () => getLabel,\n  getPlaceholder: () => getPlaceholder\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 1);\nlet COMPONENT_TYPES;\nmodule.link(\"./constants\", {\n  COMPONENT_TYPES(v) {\n    COMPONENT_TYPES = v;\n  }\n\n}, 2);\n\nconst formatStringId = (_ref) => {\n  let {\n    intlId,\n    name,\n    intlPrefix,\n    parent\n  } = _ref;\n  const start = \"\".concat(intlPrefix || 'Forms', \".\");\n  let end = name;\n\n  if (parent) {\n    const nameWithoutDots = name.replace(/\\.\\d+$/g, '');\n    const nameWithoutDot2 = nameWithoutDots.replace(/\\.\\d+\\./g, '.');\n    end = nameWithoutDot2;\n  }\n\n  if (intlId) {\n    end = intlId;\n  }\n\n  return start + end;\n};\n\nconst flowProps = arr => arr.reduce((val, i) => {\n  if (val === null) {\n    return null;\n  }\n\n  if (val) {\n    return val;\n  }\n\n  return i;\n}, '');\n\nconst oneIsNull = arr => arr.some(i => i === null);\n\nconst getLabel = (_ref2) => {\n  let {\n    name,\n    field: {\n      uniforms\n    },\n    overrideLabel,\n    intlId,\n    intlPrefix,\n    label,\n    isListField,\n    parent\n  } = _ref2;\n\n  if (label === null) {\n    return null;\n  }\n\n  if (isListField) {\n    return null;\n  }\n\n  return flowProps([overrideLabel, label, uniforms && uniforms.label, React.createElement(T, {\n    id: formatStringId({\n      intlPrefix,\n      intlId,\n      name,\n      parent\n    })\n  })]);\n};\n\nconst placeholdersAreEnabled = (_ref3) => {\n  let {\n    placeholder,\n    parent\n  } = _ref3;\n\n  if (parent) {\n    return parent.placeholder !== '';\n  }\n\n  return placeholder !== '';\n};\n\nconst getPlaceholder = (_ref4) => {\n  let {\n    field: {\n      uniforms\n    },\n    fieldType,\n    intl: {\n      formatMessage\n    },\n    intlId,\n    intlPrefix,\n    name,\n    placeholder,\n    type,\n    parent\n  } = _ref4;\n  let placeholderPrefix = 'p.ex: '; // Doesn't make sense to add example prefix on select field\n\n  if (type === COMPONENT_TYPES.SELECT) {\n    placeholderPrefix = '';\n  }\n\n  if (fieldType === Boolean || fieldType === Date) {\n    return '';\n  }\n\n  if (fieldType === Array) {\n    return placeholder;\n  }\n\n  if (uniforms && uniforms.placeholder !== undefined) {\n    return uniforms.placeholder ? \"\".concat(placeholderPrefix).concat(uniforms.placeholder) : uniforms.placeholder;\n  } // When you set placeholder to `false`, it sets the default placeholder to\n  // an empty string\n\n\n  if (!placeholdersAreEnabled({\n    placeholder,\n    parent\n  })) {\n    return '';\n  }\n\n  if (oneIsNull([placeholder, uniforms && uniforms.placeholder])) {\n    return '';\n  } // Let select fields manage their own null states\n\n\n  if (type === COMPONENT_TYPES.PERCENT) {\n    return '';\n  }\n\n  return \"\".concat(placeholderPrefix).concat(formatMessage({\n    id: \"\".concat(formatStringId({\n      intlPrefix,\n      intlId,\n      name,\n      parent\n    }), \".placeholder\")\n  }));\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"constants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/constants.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  CUSTOM_AUTOFIELD_TYPES: () => CUSTOM_AUTOFIELD_TYPES,\n  COMPONENT_TYPES: () => COMPONENT_TYPES,\n  FIELDS_TO_IGNORE: () => FIELDS_TO_IGNORE\n});\nconst CUSTOM_AUTOFIELD_TYPES = {\n  DATE: 'DATE',\n  PERCENT: 'PERCENT',\n  TEXT_AREA: 'TEXT_AREA',\n  MONEY: 'MONEY',\n  MONEY_DECIMAL: 'MONEY_DECIMAL',\n  HTML_PREVIEW: 'HTML_PREVIEW'\n};\nconst COMPONENT_TYPES = {\n  ARRAY: 'ARRAY',\n  DATE: 'DATE',\n  PERCENT: 'PERCENT',\n  SELECT: 'SELECT',\n  TEXT_AREA: 'TEXT_AREA',\n  MONEY: 'MONEY',\n  RENDER: 'RENDER',\n  HTML_PREVIEW: 'HTML_PREVIEW'\n};\nconst FIELDS_TO_IGNORE = ['label', 'field', 'fields', 'uniforms', 'InputLabelProps', 'onChange', 'model', 'changedMap'];\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm2/index.js                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./AutoForm\", {\n  default: \"default\"\n}, 0);\nmodule.link(\"./AutoFormDialog\", {\n  default: \"AutoFormDialog\"\n}, 1);\nmodule.link(\"./AutoFormComponents\", {\n  \"*\": \"*\"\n}, 2);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"BaseRouter\":{\"test\":{\"client\":{\"HistoryWatcher.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/BaseRouter/test/client/HistoryWatcher.spec.js                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet TRACKING_COOKIE;\nmodule.link(\"../../../../api/analytics/analyticsConstants\", {\n  TRACKING_COOKIE(v) {\n    TRACKING_COOKIE = v;\n  }\n\n}, 1);\nlet getCookie;\nmodule.link(\"../../../../utils/cookiesHelpers\", {\n  getCookie(v) {\n    getCookie = v;\n  }\n\n}, 2);\nlet HistoryWatcher;\nmodule.link(\"../../HistoryWatcher\", {\n  default(v) {\n    HistoryWatcher = v;\n  }\n\n}, 3);\nconst routes = {\n  bar: {\n    path: '/foo/:id'\n  },\n  foo: {\n    path: '/foo'\n  }\n};\n\nconst deleteAllCookies = () => {\n  const cookies = document.cookie.split(';');\n\n  for (let i = 0; i < cookies.length; i++) {\n    const cookie = cookies[i];\n    const eqPos = cookie.indexOf('=');\n    const name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;\n    document.cookie = \"\".concat(name, \"=;expires=Thu, 01 Jan 1970 00:00:00 GMT\");\n  }\n};\n\ndescribe('HistoryWatcher', () => {\n  const watcher = new HistoryWatcher({\n    routes,\n    history: {\n      location: {}\n    }\n  });\n  context('getMatchingPath', () => {\n    it('returns the matching path', () => {\n      const path = watcher.getMatchingPath('/foo');\n      expect(path).to.deep.equal({\n        path: '/foo',\n        route: 'foo',\n        params: {},\n        queryString: {}\n      });\n    });\n    it('returns the matching path with params', () => {\n      const path = watcher.getMatchingPath('/foo/abc');\n      expect(path).to.deep.equal({\n        path: '/foo/abc',\n        route: 'bar',\n        params: {\n          id: 'abc'\n        },\n        queryString: {}\n      });\n    });\n    it('returns the NOT_FOUND if no matching path is found', () => {\n      const path = watcher.getMatchingPath('/test');\n      expect(path).to.deep.equal({\n        path: '/test',\n        route: 'NOT_FOUND',\n        params: {},\n        queryString: {}\n      });\n    });\n  });\n  context('generateTrackingId', () => {\n    beforeEach(() => {\n      deleteAllCookies();\n    });\n    it('generates a new tracking id', () => {\n      expect(getCookie(TRACKING_COOKIE)).to.equal('');\n      watcher.generateTrackingId();\n      expect(getCookie(TRACKING_COOKIE)).to.not.equal('');\n    });\n    it('does not generate a new tracking id if one already exists', () => {\n      watcher.generateTrackingId();\n      const trackingId = getCookie(TRACKING_COOKIE);\n      watcher.generateTrackingId();\n      expect(getCookie(TRACKING_COOKIE)).to.equal(trackingId);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"HistoryWatcher.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/BaseRouter/HistoryWatcher.jsx                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => HistoryWatcher\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet Component;\nmodule.link(\"react\", {\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet matchPath;\nmodule.link(\"react-router-dom\", {\n  matchPath(v) {\n    matchPath = v;\n  }\n\n}, 2);\nlet TRACKING_COOKIE;\nmodule.link(\"../../api/analytics/analyticsConstants\", {\n  TRACKING_COOKIE(v) {\n    TRACKING_COOKIE = v;\n  }\n\n}, 3);\nlet analyticsPage;\nmodule.link(\"../../api/methods\", {\n  analyticsPage(v) {\n    analyticsPage = v;\n  }\n\n}, 4);\nlet getCookie, setCookie, parseCookies;\nmodule.link(\"../../utils/cookiesHelpers\", {\n  getCookie(v) {\n    getCookie = v;\n  },\n\n  setCookie(v) {\n    setCookie = v;\n  },\n\n  parseCookies(v) {\n    parseCookies = v;\n  }\n\n}, 5);\nlet impersonate;\nmodule.link(\"../Impersonate/ImpersonatePage/ImpersonatePage\", {\n  impersonate(v) {\n    impersonate = v;\n  }\n\n}, 6);\n\nclass HistoryWatcher extends Component {\n  componentDidMount() {\n    const {\n      history\n    } = this.props;\n    this.generateTrackingId();\n    this.loadPage(history.location.pathname);\n    this.unlisten = history.listen((_ref) => {\n      let {\n        pathname\n      } = _ref;\n      return this.loadPage(pathname);\n    });\n\n    if (Meteor.isDevelopment && !(Meteor.isTest || Meteor.isAppTest)) {\n      const userId = sessionStorage.getItem('dev_impersonate_userId');\n      const authToken = sessionStorage.getItem('dev_impersonate_authToken');\n\n      if (userId && authToken) {\n        impersonate({\n          userId,\n          authToken\n        });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    // Sometimes the component unmounts before listening is done\n    if (this.unlisten) {\n      this.unlisten();\n    }\n  }\n\n  getMatchingPath(pathname) {\n    const {\n      routes = {},\n      history\n    } = this.props;\n    let matchingPath = null;\n    const searchParams = history.location.search;\n    const queryString = {};\n    Object.keys(routes).forEach(route => {\n      if (matchingPath === null && route !== 'NOT_FOUND') {\n        const match = matchPath(pathname, routes[route]);\n\n        if (searchParams) {\n          const params = new URLSearchParams(searchParams);\n          [...params.entries()].forEach((_ref2) => {\n            let [key, value] = _ref2;\n            queryString[key] = value;\n          });\n        }\n\n        matchingPath = match && {\n          path: pathname,\n          route,\n          params: match.params,\n          queryString\n        };\n      }\n    });\n    return matchingPath || {\n      path: pathname,\n      route: 'NOT_FOUND',\n      params: {},\n      queryString\n    };\n  }\n\n  generateTrackingId() {\n    const trackingId = getCookie(TRACKING_COOKIE);\n\n    if (!trackingId) {\n      const randomId = Math.random().toString(36).substr(2) + Math.random().toString(36).substr(2);\n      setCookie(TRACKING_COOKIE, randomId);\n    }\n  }\n\n  loadPage(pathname) {\n    const {\n      path,\n      route,\n      params,\n      searchParams,\n      queryString\n    } = this.getMatchingPath(pathname);\n    const cookies = parseCookies();\n    const {\n      sessionStorage\n    } = window;\n    analyticsPage.run({\n      cookies,\n      sessionStorage,\n      path,\n      route,\n      queryParams: params,\n      queryString\n    });\n  }\n\n  render() {\n    return this.props.children;\n  }\n\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"BorrowersSummary\":{\"client\":{\"test\":{\"BorrowersSummary.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/BorrowersSummary/client/test/BorrowersSummary.spec.jsx                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet shallow;\nmodule.link(\"../../../../utils/testHelpers/enzyme\", {\n  shallow(v) {\n    shallow = v;\n  }\n\n}, 2);\nlet Chip;\nmodule.link(\"@material-ui/core/Chip\", {\n  default(v) {\n    Chip = v;\n  }\n\n}, 3);\nlet T;\nmodule.link(\"../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 4);\nlet BorrowersSummary;\nmodule.link(\"../../BorrowersSummary\", {\n  default(v) {\n    BorrowersSummary = v;\n  }\n\n}, 5);\ndescribe('BorrowersSummary />', () => {\n  const borrowers = [{\n    _id: 'firstBorrowerId',\n    firstName: 'John',\n    lastName: 'Doe'\n  }, {\n    _id: 'secondBorrowerId',\n    firstName: 'John',\n    lastName: 'Doe2'\n  }];\n  it('renders the correct number of Chips with correct props', () => {\n    const expectedNbOfBorrowers = borrowers.length;\n    const expectedFirstBorrowerLabel = React.createElement(T, {\n      id: \"BorrowersSummary.borrower\",\n      values: {\n        index: 1\n      }\n    });\n    const props = {\n      borrowers\n    };\n    const wrapper = shallow(React.createElement(BorrowersSummary, props));\n    const chipsArray = wrapper.find(Chip);\n    expect(chipsArray).to.have.length(expectedNbOfBorrowers);\n    expect(chipsArray.first().prop('label').props).to.deep.equal(expectedFirstBorrowerLabel.props);\n  });\n  it('displays just the corresponding message when there are no borrowers', () => {\n    const props = {\n      borrowers: []\n    };\n    const wrapper = shallow(React.createElement(BorrowersSummary, props));\n    expect(wrapper.find('.borrowers-list').children()).to.have.length(1);\n    expect(wrapper.find('.borrowers-list').children().find(T).prop('id')).to.equal('general.noBorrowersForLoan');\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"BorrowersSummary.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/BorrowersSummary/BorrowersSummary.jsx                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 2);\nlet Avatar;\nmodule.link(\"@material-ui/core/Avatar\", {\n  default(v) {\n    Avatar = v;\n  }\n\n}, 3);\nlet Chip;\nmodule.link(\"@material-ui/core/Chip\", {\n  default(v) {\n    Chip = v;\n  }\n\n}, 4);\nlet Icon;\nmodule.link(\"../Icon\", {\n  default(v) {\n    Icon = v;\n  }\n\n}, 5);\nlet CollectionIconLink;\nmodule.link(\"../IconLink\", {\n  CollectionIconLink(v) {\n    CollectionIconLink = v;\n  }\n\n}, 6);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 7);\nlet BORROWERS_COLLECTION;\nmodule.link(\"../../api/constants\", {\n  BORROWERS_COLLECTION(v) {\n    BORROWERS_COLLECTION = v;\n  }\n\n}, 8);\n\nconst BorrowersSummary = (_ref) => {\n  let {\n    borrowers,\n    showTitle = true\n  } = _ref;\n  const isAdmin = Meteor.microservice === 'admin';\n  return React.createElement(\"div\", {\n    className: \"borrowers-summary\"\n  }, showTitle && React.createElement(\"h5\", null, React.createElement(T, {\n    id: \"collections.borrowers\"\n  })), React.createElement(\"div\", {\n    className: \"borrowers-list\"\n  }, borrowers.length > 0 ? borrowers.map((borrower, index) => isAdmin ? React.createElement(CollectionIconLink, {\n    relatedDoc: (0, _objectSpread2.default)({}, borrower, {\n      collection: BORROWERS_COLLECTION\n    })\n  }) : React.createElement(Chip, {\n    style: {\n      margin: 8\n    },\n    key: borrower._id,\n    avatar: React.createElement(Avatar, null, React.createElement(Icon, {\n      type: \"face\"\n    })),\n    label: borrower.name || React.createElement(T, {\n      id: \"BorrowersSummary.borrower\",\n      values: {\n        index: index + 1\n      }\n    })\n  })) : React.createElement(T, {\n    id: \"general.noBorrowersForLoan\"\n  })));\n};\n\nBorrowersSummary.propTypes = {\n  borrowers: PropTypes.array\n};\nBorrowersSummary.defaultProps = {\n  borrowers: []\n};\nmodule.exportDefault(BorrowersSummary);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"ContactButton\":{\"test\":{\"client\":{\"ContactButton.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/ContactButton/test/client/ContactButton.spec.jsx                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet getMountedComponent;\nmodule.link(\"../../../../utils/testHelpers\", {\n  getMountedComponent(v) {\n    getMountedComponent = v;\n  }\n\n}, 1);\nlet employees;\nmodule.link(\"../../../../arrays/epotekEmployees\", {\n  default(v) {\n    employees = v;\n  }\n\n}, 2);\nlet ContactButton;\nmodule.link(\"../../ContactButton\", {\n  ContactButton(v) {\n    ContactButton = v;\n  }\n\n}, 3);\nlet withContactButtonProvider;\nmodule.link(\"../../ContactButtonContext\", {\n  withContactButtonProvider(v) {\n    withContactButtonProvider = v;\n  }\n\n}, 4);\ndescribe('ContactButton', () => {\n  let props;\n\n  const component = () => getMountedComponent({\n    Component: withContactButtonProvider(ContactButton),\n    props\n  });\n\n  beforeEach(() => {\n    getMountedComponent.reset();\n    props = {\n      open: false,\n      staff: employees[0]\n    };\n  });\n  it('renders the closed version', () => {\n    expect(component().find('.contact-button-overlay').hasClass('closed')).to.equal(true);\n  });\n  it('renders the opened version', () => {\n    expect(component().find('.contact-button-overlay').hasClass('closed')).to.equal(true);\n    component().find('button').simulate('click');\n    expect(component().find('.contact-button-overlay').hasClass('closed')).to.equal(false);\n  });\n  describe('renders staff value', () => {\n    it('name', () => {\n      expect(component().find('.staff-name').text()).to.equal(employees[0].name);\n    });\n    it('phoneNumber', () => {\n      expect(component().contains(employees[0].phoneNumber)).to.equal(true);\n    });\n    it('mail', () => {\n      expect(component().contains(employees[0].email)).to.equal(true);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"ContactButton.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/ContactButton/ContactButton.jsx                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nmodule.export({\n  ContactButton: () => ContactButton\n});\nlet React, useContext;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  useContext(v) {\n    useContext = v;\n  }\n\n}, 0);\nlet Fab;\nmodule.link(\"@material-ui/core/Fab\", {\n  default(v) {\n    Fab = v;\n  }\n\n}, 1);\nlet Icon;\nmodule.link(\"../Icon\", {\n  default(v) {\n    Icon = v;\n  }\n\n}, 2);\nlet ContactButtonContainer;\nmodule.link(\"./ContactButtonContainer\", {\n  default(v) {\n    ContactButtonContainer = v;\n  }\n\n}, 3);\nlet ContactButtonOverlay;\nmodule.link(\"./ContactButtonOverlay\", {\n  default(v) {\n    ContactButtonOverlay = v;\n  }\n\n}, 4);\nlet ContactButtonContext;\nmodule.link(\"./ContactButtonContext\", {\n  ContactButtonContext(v) {\n    ContactButtonContext = v;\n  }\n\n}, 5);\n\nconst ContactButton = (_ref) => {\n  let props = (0, _extends2.default)({}, _ref);\n  const {\n    openContact,\n    toggleOpenContact\n  } = useContext(ContactButtonContext);\n  return React.createElement(\"div\", {\n    className: \"contact-button\"\n  }, React.createElement(Fab, {\n    onClick: () => toggleOpenContact(!openContact),\n    color: \"primary\"\n  }, openContact ? React.createElement(Icon, {\n    type: \"close\"\n  }) : React.createElement(Icon, {\n    type: \"forum\"\n  })), React.createElement(ContactButtonOverlay, (0, _extends2.default)({}, props, {\n    openContact: openContact\n  })));\n};\n\nmodule.exportDefault(ContactButtonContainer(ContactButton));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"ContactButtonContainer.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/ContactButton/ContactButtonContainer.js                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet withProps, compose;\nmodule.link(\"recompose\", {\n  withProps(v) {\n    withProps = v;\n  },\n\n  compose(v) {\n    compose = v;\n  }\n\n}, 0);\nlet employeesByEmail, EPOTEK_NUMBER;\nmodule.link(\"../../arrays/epotekEmployees\", {\n  employeesByEmail(v) {\n    employeesByEmail = v;\n  },\n\n  EPOTEK_NUMBER(v) {\n    EPOTEK_NUMBER = v;\n  }\n\n}, 1);\nconst ContactButtonContainer = compose(withProps((_ref) => {\n  let {\n    currentUser\n  } = _ref;\n  let staff;\n\n  if (currentUser && currentUser.assignedEmployee) {\n    staff = employeesByEmail[currentUser.assignedEmployee.email];\n  }\n\n  if (!staff) {\n    staff = (0, _objectSpread2.default)({}, employeesByEmail['lydia@e-potek.ch'], {\n      phoneNumber: EPOTEK_NUMBER,\n      email: 'financement@e-potek.ch'\n    });\n  }\n\n  return {\n    staff\n  };\n}));\nmodule.exportDefault(ContactButtonContainer);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"ContactButtonContent.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/ContactButton/ContactButtonContent.jsx                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 1);\n\nconst ContactButtonContent = (_ref) => {\n  let {\n    titleId,\n    icon,\n    href,\n    label\n  } = _ref;\n  return React.createElement(\"a\", {\n    href: href,\n    className: \"contact-button-content primary\"\n  }, React.createElement(\"div\", {\n    className: \"iconDiv\"\n  }, icon), React.createElement(\"div\", {\n    className: \"text\"\n  }, React.createElement(\"p\", {\n    className: \"bold\"\n  }, React.createElement(T, {\n    id: titleId\n  })), label));\n};\n\nmodule.exportDefault(ContactButtonContent);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"ContactButtonContext.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/ContactButton/ContactButtonContext.jsx                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nmodule.export({\n  ContactButtonContext: () => ContactButtonContext,\n  Consumer: () => Consumer,\n  Provider: () => Provider,\n  withContactButtonProvider: () => withContactButtonProvider\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet compose, withState;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  },\n\n  withState(v) {\n    withState = v;\n  }\n\n}, 1);\nconst ContactButtonContext = React.createContext();\nconst {\n  Consumer,\n  Provider\n} = ContactButtonContext;\nconst withContactButtonProvider = compose(withState('openContact', 'toggleOpenContact', false), Component => (_ref) => {\n  let {\n    openContact,\n    toggleOpenContact\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"openContact\", \"toggleOpenContact\"]);\n  return React.createElement(Provider, {\n    value: {\n      openContact,\n      toggleOpenContact\n    }\n  }, React.createElement(Component, props));\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"ContactButtonOverlay.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/ContactButton/ContactButtonOverlay.jsx                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet cx;\nmodule.link(\"classnames\", {\n  default(v) {\n    cx = v;\n  }\n\n}, 1);\nlet Icon;\nmodule.link(\"../Icon\", {\n  default(v) {\n    Icon = v;\n  }\n\n}, 2);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 3);\nlet ContactButtonContent;\nmodule.link(\"./ContactButtonContent\", {\n  default(v) {\n    ContactButtonContent = v;\n  }\n\n}, 4);\n\nconst ContactButtonOverlay = (_ref) => {\n  let {\n    staff: {\n      src,\n      name,\n      phoneNumber,\n      email,\n      gender\n    } = {},\n    openContact\n  } = _ref;\n  return React.createElement(\"div\", {\n    className: cx('card1 shadow-2 card-top contact-button-overlay', {\n      closed: !openContact\n    })\n  }, React.createElement(\"div\", {\n    className: \"top\"\n  }, React.createElement(\"img\", {\n    src: src,\n    alt: name\n  }), React.createElement(\"div\", {\n    className: \"text\"\n  }, React.createElement(\"h4\", {\n    className: \"fixed-size no-margin staff-name\"\n  }, name), React.createElement(\"p\", {\n    className: \"secondary\"\n  }, React.createElement(T, {\n    id: \"ContactButton.yourAdvisor\",\n    values: {\n      gender\n    }\n  })))), React.createElement(\"hr\", null), React.createElement(ContactButtonContent, {\n    titleId: \"ContactButton.byPhone\",\n    icon: React.createElement(Icon, {\n      type: \"phone\",\n      className: \"icon\"\n    }),\n    href: \"tel:\".concat(phoneNumber),\n    label: phoneNumber\n  }), React.createElement(ContactButtonContent, {\n    titleId: \"ContactButton.byEmail\",\n    icon: React.createElement(Icon, {\n      type: \"mail\",\n      className: \"icon\"\n    }),\n    href: \"mailto:\".concat(email),\n    label: email\n  }));\n};\n\nmodule.exportDefault(ContactButtonOverlay);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"OfferList\":{\"test\":{\"client\":{\"makeFeedback.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/OfferList/test/client/makeFeedback.spec.jsx                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet injectIntl;\nmodule.link(\"react-intl\", {\n  injectIntl(v) {\n    injectIntl = v;\n  }\n\n}, 2);\nlet getMountedComponent;\nmodule.link(\"../../../../utils/testHelpers\", {\n  getMountedComponent(v) {\n    getMountedComponent = v;\n  }\n\n}, 3);\nlet makeFeedback, FEEDBACK_OPTIONS;\nmodule.link(\"../../feedbackHelpers\", {\n  makeFeedback(v) {\n    makeFeedback = v;\n  },\n\n  FEEDBACK_OPTIONS(v) {\n    FEEDBACK_OPTIONS = v;\n  }\n\n}, 4);\nlet HtmlPreview;\nmodule.link(\"../../../HtmlPreview/HtmlPreview\", {\n  default(v) {\n    HtmlPreview = v;\n  }\n\n}, 5);\n\nconst DummyComponent = (_ref) => {\n  let {\n    intl: {\n      formatMessage\n    },\n    model,\n    offer\n  } = _ref;\n  return React.createElement(HtmlPreview, {\n    value: makeFeedback({\n      model,\n      offer,\n      formatMessage\n    })\n  });\n};\n\nconst component = props => getMountedComponent({\n  Component: injectIntl(DummyComponent),\n  props,\n  withRouter: false\n});\n\ndescribe('makeFeedback', () => {\n  beforeEach(() => {\n    getMountedComponent.reset();\n  }); // Not working during meteor tests\n\n  it.skip('renders the feedback with correct intl values', () => {\n    const model = {\n      option: FEEDBACK_OPTIONS.POSITIVE\n    };\n    const offer = {\n      lender: {\n        contact: {\n          firstName: 'Bob'\n        },\n        loan: {\n          borrowers: [{\n            name: 'John'\n          }],\n          user: {\n            assignedEmployee: {\n              name: 'Julia'\n            }\n          }\n        }\n      },\n      property: {\n        address1: 'Rue du test 1',\n        zipCode: '1201',\n        city: 'Genève'\n      },\n      createdAt: new Date()\n    };\n    expect(component({\n      model,\n      offer\n    }).text().includes('Bob')).to.equal(true);\n    expect(component({\n      model,\n      offer\n    }).text().includes('John')).to.equal(true);\n    expect(component({\n      model,\n      offer\n    }).text().includes('Julia')).to.equal(true);\n    expect(component({\n      model,\n      offer\n    }).text().includes('Rue du test 1, 1201 Genève')).to.equal(true);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"feedbackHelpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/OfferList/feedbackHelpers.js                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  FEEDBACK_OPTIONS: () => FEEDBACK_OPTIONS,\n  FEEDBACK_OPTIONS_SETTINGS: () => FEEDBACK_OPTIONS_SETTINGS,\n  makeFeedback: () => makeFeedback\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet moment;\nmodule.link(\"moment\", {\n  default(v) {\n    moment = v;\n  }\n\n}, 1);\nconst FEEDBACK_OPTIONS = {\n  POSITIVE: 'POSITIVE',\n  NEGATIVE_NOT_COMPETITIVE: 'NEGATIVE_NOT_COMPETITIVE',\n  NEGATIVE_WITHOUT_FOLLOW_UP: 'NEGATIVE_WITHOUT_FOLLOW_UP',\n  CUSTOM: 'CUSTOM'\n};\nconst FEEDBACK_OPTIONS_SETTINGS = {\n  [FEEDBACK_OPTIONS.POSITIVE]: {\n    enableComments: true,\n    enableOutro: true\n  },\n  [FEEDBACK_OPTIONS.NEGATIVE_NOT_COMPETITIVE]: {\n    enableComments: true,\n    enableOutro: true\n  },\n  [FEEDBACK_OPTIONS.NEGATIVE_WITHOUT_FOLLOW_UP]: {\n    enableComments: true,\n    enableCustomIntro: true,\n    enableOutro: true\n  },\n  [FEEDBACK_OPTIONS.CUSTOM]: {\n    enableCustomIntro: false,\n    enableComments: false,\n    enableOutro: false\n  }\n};\n\nconst greetings = (_ref) => {\n  let {\n    contactName,\n    formatMessage\n  } = _ref;\n  return formatMessage({\n    id: 'Feedback.greetings'\n  }, {\n    contactName\n  });\n};\n\nconst introduction = (_ref2) => {\n  let {\n    option,\n    borrowers,\n    singleBorrower,\n    address,\n    date,\n    formatMessage\n  } = _ref2;\n\n  if (singleBorrower) {\n    return formatMessage({\n      id: FEEDBACK_OPTIONS_SETTINGS[option].enableCustomIntro ? \"Feedback.\".concat(option, \".introduction.singleBorrower\") : 'Feedback.introduction.singleBorrower'\n    }, {\n      borrower: borrowers[0].name,\n      address,\n      date\n    });\n  }\n\n  return formatMessage({\n    id: FEEDBACK_OPTIONS_SETTINGS[option].enableCustomIntro ? \"Feedback.\".concat(option, \".introduction.twoBorrowers\") : 'Feedback.introduction.twoBorrowers'\n  }, {\n    borrower1: borrowers[0].name,\n    borrower2: borrowers[1].name,\n    address,\n    date\n  });\n};\n\nconst outro = (_ref3) => {\n  let {\n    borrowers,\n    singleBorrower,\n    option,\n    formatMessage\n  } = _ref3;\n\n  if (singleBorrower) {\n    return formatMessage({\n      id: \"Feedback.\".concat(option, \".outro.singleBorrower\")\n    }, {\n      borrower: borrowers[0].name,\n      singleBorrower: true\n    });\n  }\n\n  return formatMessage({\n    id: \"Feedback.\".concat(option, \".outro.twoBorrowers\")\n  }, {\n    borrower1: borrowers[0].name,\n    borrower2: borrowers[1].name,\n    singleBorrower: false\n  });\n};\n\nconst closing = (_ref4) => {\n  let {\n    assignee,\n    formatMessage\n  } = _ref4;\n  return formatMessage({\n    id: 'Feedback.closing'\n  }, {\n    assignee\n  });\n};\n\nconst makeFeedback = (_ref5) => {\n  let {\n    model,\n    offer,\n    formatMessage\n  } = _ref5;\n  const {\n    option,\n    comments = [],\n    customFeedback = ''\n  } = model;\n  const {\n    lender: {\n      contact: {\n        firstName: contactName\n      },\n      loan: {\n        borrowers,\n        user: {\n          assignedEmployee\n        }\n      }\n    },\n    property,\n    createdAt\n  } = offer;\n  const {\n    firstName: assignee = 'e-Potek'\n  } = assignedEmployee || {};\n  const {\n    address1,\n    zipCode,\n    city\n  } = property || {};\n\n  if (!property || !address1 || !zipCode || !city) {\n    throw new Meteor.Error('No property or address');\n  }\n\n  const address = \"\".concat(address1, \", \").concat(zipCode, \" \").concat(city);\n\n  if (option === FEEDBACK_OPTIONS.CUSTOM) {\n    // Replace all returns into HTML\n    return customFeedback.replace(/(?:\\r\\n|\\r|\\n)/g, '<br>');\n  }\n\n  let feedback = '';\n  const singleBorrower = borrowers.length === 1;\n\n  if (option) {\n    feedback = feedback.concat(greetings({\n      contactName,\n      formatMessage\n    }));\n    feedback = feedback.concat(introduction({\n      option,\n      borrowers,\n      singleBorrower,\n      address,\n      date: moment(createdAt).format('DD.MM.YYYY'),\n      formatMessage\n    }));\n    feedback = feedback.concat(formatMessage({\n      id: \"Feedback.\".concat(option, \".body\")\n    }, {\n      singleBorrower\n    }));\n\n    if (comments.length && FEEDBACK_OPTIONS_SETTINGS[option].enableComments) {\n      feedback = feedback.concat(formatMessage({\n        id: \"Feedback.\".concat(option, \".comments\")\n      }, {\n        singleBorrower\n      }));\n      feedback = feedback.concat('<ul>', comments.filter(x => x).map(comment => \"<li><b>\".concat(comment, \"</b></li>\")).join('\\n'), '</ul>');\n    }\n\n    if (FEEDBACK_OPTIONS_SETTINGS[option].enableOutro) {\n      feedback = feedback.concat(outro({\n        option,\n        singleBorrower,\n        borrowers,\n        formatMessage\n      }));\n    }\n\n    feedback = feedback.concat(closing({\n      assignee,\n      formatMessage\n    }));\n  }\n\n  return feedback;\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"PasswordResetPage\":{\"test\":{\"client\":{\"PasswordResetPage.test.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/PasswordResetPage/test/client/PasswordResetPage.test.jsx                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Random;\nmodule.link(\"meteor/random\", {\n  Random(v) {\n    Random = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 2);\nlet Redirect;\nmodule.link(\"react-router-dom\", {\n  Redirect(v) {\n    Redirect = v;\n  }\n\n}, 3);\nlet resetDatabase;\nmodule.link(\"../../../../utils/testHelpers/testHelpers\", {\n  resetDatabase(v) {\n    resetDatabase = v;\n  }\n\n}, 4);\nlet testCreateUser;\nmodule.link(\"../../../../api\", {\n  testCreateUser(v) {\n    testCreateUser = v;\n  }\n\n}, 5);\nlet shallow, getMountedComponent;\nmodule.link(\"../../../../utils/testHelpers\", {\n  shallow(v) {\n    shallow = v;\n  },\n\n  getMountedComponent(v) {\n    getMountedComponent = v;\n  }\n\n}, 6);\nlet pollUntilReady;\nmodule.link(\"../../../../utils/pollUntilReady\", {\n  default(v) {\n    pollUntilReady = v;\n  }\n\n}, 7);\nlet Loading;\nmodule.link(\"../../../Loading/Loading\", {\n  default(v) {\n    Loading = v;\n  }\n\n}, 8);\nlet PasswordResetPage, PasswordResetPageDumb;\nmodule.link(\"../../PasswordResetPage\", {\n  default(v) {\n    PasswordResetPage = v;\n  },\n\n  PasswordResetPage(v) {\n    PasswordResetPageDumb = v;\n  }\n\n}, 9);\ndescribe('PasswordResetPage', () => {\n  let props;\n\n  const component = () => getMountedComponent({\n    Component: PasswordResetPage,\n    props,\n    withRouter: true\n  });\n\n  const shallowComponent = () => shallow(React.createElement(PasswordResetPageDumb, props));\n\n  beforeEach(() => {\n    getMountedComponent.reset();\n    props = {\n      token: Random.id(),\n      email: 'john.doe@test.com'\n    };\n    return resetDatabase();\n  });\n  it('renders the name', async () => {\n    const {\n      email,\n      token\n    } = props;\n    const firstName = 'John';\n    const lastName = 'Doe'; // FIXME: testCreateUser is called twice\n\n    try {\n      await testCreateUser.run({\n        user: {\n          email,\n          firstName,\n          lastName,\n          services: {\n            password: {\n              reset: {\n                token\n              }\n            }\n          },\n          roles: ['user']\n        }\n      });\n    } catch (error) {\n      console.log('error:', error);\n    }\n\n    return pollUntilReady(() => {\n      component().update();\n      return !component().find(Loading).length;\n    }, 10).then(() => expect(component().contains('John Doe')).to.equal(true));\n  });\n  it('Redirects to the login page if there is an error', () => {\n    props.error = {\n      message: 'Test error'\n    };\n    expect(shallowComponent().find(Redirect).length).to.equal(1);\n  });\n  context('disables submit button when', () => {\n    it('new password is not set', () => {\n      props.user = {\n        id: 'userId'\n      };\n      expect(shallowComponent().find('[type=\"submit\"]').first().props().disabled).to.equal(true);\n    });\n    it('passwords do not match', () => {\n      props.newPassword = 'password1';\n      props.newPassword2 = 'password2';\n      props.user = {\n        id: 'userId'\n      };\n      expect(shallowComponent().find('[type=\"submit\"]').first().props().disabled).to.equal(true);\n    });\n  });\n  it('loads while submitting', () => {\n    const password = 'password';\n    props.submitting = true;\n    props.newPassword = password;\n    props.newPassword2 = password;\n    props.user = {\n      id: 'userId'\n    };\n    expect(shallowComponent().find('[type=\"submit\"]').first().props().loading).to.equal(true);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"PasswordResetPage.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/PasswordResetPage/PasswordResetPage.jsx                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  PasswordResetPage: () => PasswordResetPage\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet FontAwesomeIcon;\nmodule.link(\"@fortawesome/react-fontawesome\", {\n  FontAwesomeIcon(v) {\n    FontAwesomeIcon = v;\n  }\n\n}, 2);\nlet faUserCircle;\nmodule.link(\"@fortawesome/pro-light-svg-icons/faUserCircle\", {\n  faUserCircle(v) {\n    faUserCircle = v;\n  }\n\n}, 3);\nlet Redirect;\nmodule.link(\"react-router-dom\", {\n  Redirect(v) {\n    Redirect = v;\n  }\n\n}, 4);\nlet cx;\nmodule.link(\"classnames\", {\n  default(v) {\n    cx = v;\n  }\n\n}, 5);\nlet TextField;\nmodule.link(\"../Material/TextField\", {\n  default(v) {\n    TextField = v;\n  }\n\n}, 6);\nlet Loading;\nmodule.link(\"../Loading/Loading\", {\n  default(v) {\n    Loading = v;\n  }\n\n}, 7);\nlet Button;\nmodule.link(\"../Button\", {\n  default(v) {\n    Button = v;\n  }\n\n}, 8);\nlet Checkbox;\nmodule.link(\"../Checkbox\", {\n  default(v) {\n    Checkbox = v;\n  }\n\n}, 9);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 10);\nlet getUserDisplayName;\nmodule.link(\"../../utils/userFunctions\", {\n  getUserDisplayName(v) {\n    getUserDisplayName = v;\n  }\n\n}, 11);\nlet PasswordResetPageContainer;\nmodule.link(\"./PasswordResetPageContainer\", {\n  default(v) {\n    PasswordResetPageContainer = v;\n  }\n\n}, 12);\n\nconst PasswordResetPage = (_ref) => {\n  let {\n    newPassword,\n    newPassword2,\n    hasReadConditions,\n    handleChange,\n    handleSubmit,\n    user,\n    error,\n    submitting\n  } = _ref;\n  const isEnrollment = window.location && window.location.pathname.includes('enroll-account');\n  const isValid = !!newPassword && newPassword === newPassword2 && (!isEnrollment || hasReadConditions);\n\n  if (error) {\n    return React.createElement(Redirect, {\n      to: \"/login\"\n    });\n  }\n\n  if (!user) {\n    return React.createElement(Loading, null);\n  }\n\n  return React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    id: \"password-reset-page\",\n    className: \"password-reset-page\"\n  }, React.createElement(\"div\", {\n    className: \"card1 card-top\"\n  }, React.createElement(\"div\", {\n    className: \"top\"\n  }, React.createElement(\"div\", {\n    className: \"text\"\n  }, React.createElement(FontAwesomeIcon, {\n    icon: faUserCircle,\n    className: \"icon\"\n  }), React.createElement(\"h1\", null, getUserDisplayName(user))), React.createElement(\"h4\", {\n    className: \"secondary\"\n  }, React.createElement(T, {\n    id: \"PasswordResetPage.description\"\n  }))), React.createElement(TextField, {\n    label: React.createElement(T, {\n      id: \"PasswordResetPage.password\"\n    }),\n    floatingLabelFixed: true,\n    type: \"password\",\n    value: newPassword,\n    onChange: e => handleChange(e.target.value, 'newPassword'),\n    className: \"password-reset-page-input\"\n  }), React.createElement(TextField, {\n    label: React.createElement(T, {\n      id: \"PasswordResetPage.confirmPassword\"\n    }),\n    floatingLabelFixed: true,\n    type: \"password\",\n    value: newPassword2,\n    onChange: e => handleChange(e.target.value, 'newPassword2'),\n    className: \"password-reset-page-input\"\n  }), isEnrollment && React.createElement(Checkbox, {\n    label: React.createElement(\"span\", {\n      className: \"disclaimer\"\n    }, React.createElement(T, {\n      id: \"PasswordResetPage.disclaimer\",\n      values: {\n        link: React.createElement(\"a\", {\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          href: \"\".concat(Meteor.settings.public.subdomains.app, \"/files/Privacy Policy - e-Potek.pdf\")\n        }, React.createElement(T, {\n          id: \"PasswordResetPage.disclaimer.privacyPolicy\"\n        }))\n      }\n    })),\n    value: hasReadConditions,\n    onChange: (e, c) => handleChange(c, 'hasReadConditions')\n  }), React.createElement(\"div\", {\n    className: cx('password-reset-page-button', {\n      enrollment: isEnrollment\n    })\n  }, React.createElement(Button, {\n    raised: true,\n    label: React.createElement(T, {\n      id: \"PasswordResetPage.CTA\"\n    }),\n    disabled: !isValid,\n    type: \"submit\",\n    primary: true,\n    loading: submitting\n  }))));\n};\n\nmodule.exportDefault(PasswordResetPageContainer(PasswordResetPage));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"PasswordResetPageContainer.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/PasswordResetPage/PasswordResetPageContainer.js                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet Accounts;\nmodule.link(\"meteor/accounts-base\", {\n  Accounts(v) {\n    Accounts = v;\n  }\n\n}, 1);\nlet withStateHandlers, lifecycle, withState, withProps, compose;\nmodule.link(\"recompose\", {\n  withStateHandlers(v) {\n    withStateHandlers = v;\n  },\n\n  lifecycle(v) {\n    lifecycle = v;\n  },\n\n  withState(v) {\n    withState = v;\n  },\n\n  withProps(v) {\n    withProps = v;\n  },\n\n  compose(v) {\n    compose = v;\n  }\n\n}, 2);\nlet withRouter;\nmodule.link(\"react-router-dom\", {\n  withRouter(v) {\n    withRouter = v;\n  }\n\n}, 3);\nlet withMatchParam;\nmodule.link(\"../../containers/withMatchParam\", {\n  default(v) {\n    withMatchParam = v;\n  }\n\n}, 4);\nlet getUserByPasswordResetToken, notifyAssignee;\nmodule.link(\"../../api\", {\n  getUserByPasswordResetToken(v) {\n    getUserByPasswordResetToken = v;\n  },\n\n  notifyAssignee(v) {\n    notifyAssignee = v;\n  }\n\n}, 5);\nconst stateHandlers = withStateHandlers({\n  newPassword: '',\n  newPassword2: '',\n  hasReadConditions: false\n}, {\n  handleChange: () => (value, key) => ({\n    [key]: value\n  })\n});\nconst props = withProps((_ref) => {\n  let {\n    newPassword,\n    token,\n    history,\n    setError,\n    changeSubmitting\n  } = _ref;\n  return {\n    handleSubmit: event => {\n      event.preventDefault();\n      changeSubmitting(true);\n      Accounts.resetPassword(token, newPassword, err => {\n        if (err) {\n          setError(err);\n        } else {\n          history.push('/');\n          notifyAssignee.run({\n            title: 'A choisi/changé son mot de passe!'\n          });\n        }\n\n        changeSubmitting(false);\n      });\n    }\n  };\n});\nconst lifeCycle = lifecycle({\n  componentDidMount() {\n    if (Meteor.user()) {\n      // Avoid multi user issues\n      Meteor.logout();\n    }\n\n    return getUserByPasswordResetToken.run({\n      token: this.props.token\n    }).then(user => {\n      if (!user) {\n        throw new Error('user not found');\n      }\n\n      this.setState({\n        user\n      });\n    }).catch(this.props.setError);\n  }\n\n});\nmodule.exportDefault(compose(withMatchParam('token'), withState('error', 'setError', null), withRouter, stateHandlers, withState('submitting', 'changeSubmitting', false), props, lifeCycle));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"TranchePicker\":{\"client\":{\"test\":{\"TranchePickerContainer.test.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/TranchePicker/client/test/TranchePickerContainer.test.jsx                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet IntlProvider, intlShape;\nmodule.link(\"react-intl\", {\n  IntlProvider(v) {\n    IntlProvider = v;\n  },\n\n  intlShape(v) {\n    intlShape = v;\n  }\n\n}, 2);\nlet mount;\nmodule.link(\"../../../../utils/testHelpers/enzyme\", {\n  mount(v) {\n    mount = v;\n  }\n\n}, 3);\nlet DefaultTranchePicker, TranchePicker;\nmodule.link(\"../../TranchePicker\", {\n  default(v) {\n    DefaultTranchePicker = v;\n  },\n\n  TranchePicker(v) {\n    TranchePicker = v;\n  }\n\n}, 4);\nlet Tranche;\nmodule.link(\"../../Tranche\", {\n  default(v) {\n    Tranche = v;\n  }\n\n}, 5);\ndescribe('TranchePicker', () => {\n  let props;\n  const {\n    intl\n  } = new IntlProvider({\n    defaultLocale: 'fr'\n  }).getChildContext();\n\n  const component = () => mount(React.createElement(DefaultTranchePicker, props), {\n    context: {\n      intl\n    },\n    childContextTypes: {\n      intl: intlShape\n    }\n  });\n\n  beforeEach(() => {\n    props = {\n      types: ['interest10', 'interest2', 'interest5']\n    };\n  });\n  it('adds a tranche', () => {\n    const wrapper = component();\n    const button = wrapper.find('.add').first();\n    expect(wrapper.find('.tranche').length).to.equal(0);\n    button.simulate('click');\n    expect(wrapper.find('.tranche').length).to.equal(1);\n  });\n  it('removes a tranche', () => {\n    props.initialTranches = [{\n      value: 1,\n      type: 'test'\n    }];\n    const wrapper = component();\n    const deleteButton = wrapper.find('.delete').first();\n    expect(wrapper.find('.tranche').length).to.equal(1);\n    deleteButton.simulate('click');\n    expect(wrapper.find('.tranche').length).to.equal(0);\n  });\n  it('edits a tranche with an input', () => {\n    props.initialTranches = [{\n      value: 1,\n      type: 'test'\n    }];\n    const wrapper = component();\n    let input = wrapper.find('.value').first();\n    expect(input.prop('value')).to.equal(1);\n    input.prop('onChange')(0.8);\n    wrapper.update();\n    input = wrapper.find('.value').first();\n    expect(input.prop('value')).to.equal(0.8);\n    expect(wrapper.find(TranchePicker).props().tranches).to.deep.equal([{\n      value: 0.8,\n      type: 'test'\n    }]);\n  });\n  it('edits type with the Select field', () => {\n    props.initialTranches = [{\n      value: 1,\n      type: 'type1'\n    }];\n    const wrapper = component();\n    let select = wrapper.find('.select').first();\n    expect(select.prop('value')).to.equal('type1');\n    select.props().onChange(null, 'type2');\n    wrapper.update();\n    select = wrapper.find('.select').first();\n    expect(select.prop('value')).to.equal('type2');\n    expect(wrapper.find(TranchePicker).props().tranches).to.deep.equal([{\n      value: 1,\n      type: 'type2'\n    }]);\n  });\n  it('filters options passed to a tranche', () => {\n    props.initialTranches = [{\n      value: 1,\n      type: 'interest2'\n    }, {\n      value: 1,\n      type: 'interest5'\n    }];\n    const wrapper = component();\n    const firstTranche = wrapper.find(Tranche).first();\n    expect(firstTranche.prop('options').map((_ref) => {\n      let {\n        id\n      } = _ref;\n      return id;\n    })).to.deep.equal(['interest2', 'interest10']);\n  });\n  it('sorts options properly', () => {\n    props.types = ['interest20', 'interest15', 'interest5', 'interest10', 'interest2'];\n    props.initialTranches = [{\n      value: 1,\n      type: 'interest2'\n    }];\n    const wrapper = component();\n    const firstTranche = wrapper.find(Tranche).first();\n    expect(firstTranche.prop('options').map((_ref2) => {\n      let {\n        id\n      } = _ref2;\n      return id;\n    })).to.deep.equal(['interest2', 'interest5', 'interest10', 'interest15', 'interest20']);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"Tranche.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/TranchePicker/Tranche.jsx                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Button;\nmodule.link(\"../Button\", {\n  default(v) {\n    Button = v;\n  }\n\n}, 1);\nlet Select;\nmodule.link(\"../Select\", {\n  default(v) {\n    Select = v;\n  }\n\n}, 2);\nlet PercentInput;\nmodule.link(\"../PercentInput\", {\n  default(v) {\n    PercentInput = v;\n  }\n\n}, 3);\n\nconst Tranche = (_ref) => {\n  let {\n    value,\n    type,\n    removeTranche,\n    setValue,\n    setType,\n    options\n  } = _ref;\n  return React.createElement(\"span\", {\n    className: \"tranche\"\n  }, React.createElement(PercentInput, {\n    value: value,\n    onChange: setValue,\n    className: \"value\"\n  }), React.createElement(Select, {\n    value: type,\n    onChange: setType,\n    options: options,\n    className: \"select\"\n  }), React.createElement(Button, {\n    className: \"delete\",\n    onClick: removeTranche\n  }, \"Supprimer\"));\n};\n\nmodule.exportDefault(Tranche);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"TranchePicker.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/TranchePicker/TranchePicker.jsx                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  TranchePicker: () => TranchePicker\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet TranchePickerContainer;\nmodule.link(\"./TranchePickerContainer\", {\n  default(v) {\n    TranchePickerContainer = v;\n  }\n\n}, 1);\nlet Button;\nmodule.link(\"../Button\", {\n  default(v) {\n    Button = v;\n  }\n\n}, 2);\nlet Tranche;\nmodule.link(\"./Tranche\", {\n  default(v) {\n    Tranche = v;\n  }\n\n}, 3);\nlet INTEREST_RATES;\nmodule.link(\"../../api/constants\", {\n  INTEREST_RATES(v) {\n    INTEREST_RATES = v;\n  }\n\n}, 4);\nconst interestRatesOrder = Object.values(INTEREST_RATES);\n\nconst filterOptions = (options, tranches, currentType) => {\n  const currentSelectedTypes = tranches.map((_ref) => {\n    let {\n      type\n    } = _ref;\n    return type;\n  });\n  const difference = options.filter((_ref2) => {\n    let {\n      id\n    } = _ref2;\n    return !currentSelectedTypes.includes(id);\n  });\n  const currentOption = options.find((_ref3) => {\n    let {\n      id\n    } = _ref3;\n    return id === currentType;\n  });\n  const withCurrentType = currentOption ? [...difference, currentOption] : difference;\n  const sortedOptions = withCurrentType.sort((_ref4, _ref5) => {\n    let {\n      id: id1\n    } = _ref4;\n    let {\n      id: id2\n    } = _ref5;\n    return interestRatesOrder.indexOf(id1) - interestRatesOrder.indexOf(id2);\n  });\n  return sortedOptions;\n};\n\nconst TranchePicker = (_ref6) => {\n  let {\n    tranches,\n    addTranche,\n    removeTranche,\n    setValue,\n    setType,\n    options\n  } = _ref6;\n  return React.createElement(\"div\", {\n    className: \"tranche-picker\"\n  }, tranches.map((_ref7) => {\n    let {\n      value,\n      type\n    } = _ref7;\n    return React.createElement(Tranche, {\n      key: type,\n      value: value,\n      type: type,\n      removeTranche: () => removeTranche(type),\n      setValue: newValue => setValue(type, newValue),\n      setType: (_, newType) => setType(type, newType),\n      options: filterOptions(options, tranches, type)\n    });\n  }), React.createElement(Button, {\n    className: \"add\",\n    primary: true,\n    onClick: addTranche\n  }, \"Ajouter\"));\n};\n\nmodule.exportDefault(TranchePickerContainer(TranchePicker));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"TranchePickerContainer.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/TranchePicker/TranchePickerContainer.jsx                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet withStateHandlers, compose, withProps;\nmodule.link(\"recompose\", {\n  withStateHandlers(v) {\n    withStateHandlers = v;\n  },\n\n  compose(v) {\n    compose = v;\n  },\n\n  withProps(v) {\n    withProps = v;\n  }\n\n}, 1);\nlet INTEREST_RATES;\nmodule.link(\"../../api/constants\", {\n  INTEREST_RATES(v) {\n    INTEREST_RATES = v;\n  }\n\n}, 2);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 3);\nconst TranchePickerContainer = compose(withStateHandlers((_ref) => {\n  let {\n    initialTranches = []\n  } = _ref;\n  return {\n    tranches: initialTranches\n  };\n}, {\n  addTranche: (_ref2) => {\n    let {\n      tranches\n    } = _ref2;\n    return () => ({\n      tranches: [...tranches, {\n        value: 0,\n        type: ''\n      }]\n    });\n  },\n  removeTranche: (_ref3) => {\n    let {\n      tranches\n    } = _ref3;\n    return typeToRemove => ({\n      tranches: tranches.filter((_ref4) => {\n        let {\n          type\n        } = _ref4;\n        return type !== typeToRemove;\n      })\n    });\n  },\n  setValue: (_ref5) => {\n    let {\n      tranches\n    } = _ref5;\n    return (type, value) => ({\n      tranches: tranches.reduce((acc, tranche) => tranche.type === type ? [...acc, (0, _objectSpread2.default)({}, tranche, {\n        value\n      })] : [...acc, tranche], [])\n    });\n  },\n  setType: (_ref6) => {\n    let {\n      tranches\n    } = _ref6;\n    return (oldType, newType) => ({\n      tranches: tranches.reduce((acc, tranche) => tranche.type === oldType ? [...acc, (0, _objectSpread2.default)({}, tranche, {\n        type: newType\n      })] : [...acc, tranche], [])\n    });\n  }\n}), withProps((_ref7) => {\n  let {\n    types = Object.values(INTEREST_RATES)\n  } = _ref7;\n  return {\n    options: types.map(type => ({\n      id: type,\n      label: React.createElement(T, {\n        id: \"InterestsTable.\".concat(type)\n      })\n    }))\n  };\n}));\nmodule.exportDefault(TranchePickerContainer);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"TranchePickerDialog.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/TranchePicker/TranchePickerDialog.jsx                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet TranchePicker;\nmodule.link(\"./TranchePicker\", {\n  TranchePicker(v) {\n    TranchePicker = v;\n  }\n\n}, 1);\nlet DialogSimple;\nmodule.link(\"../DialogSimple\", {\n  default(v) {\n    DialogSimple = v;\n  }\n\n}, 2);\nlet Button;\nmodule.link(\"../Button\", {\n  default(v) {\n    Button = v;\n  }\n\n}, 3);\nlet TranchePickerContainer;\nmodule.link(\"./TranchePickerContainer\", {\n  default(v) {\n    TranchePickerContainer = v;\n  }\n\n}, 4);\n\nconst tranchesAreValid = tranches => {\n  const sum = tranches.reduce((total, _ref) => {\n    let {\n      value\n    } = _ref;\n    return total + value;\n  }, 0);\n  const sumIsOne = sum === 1;\n  const allTypesAreDefined = tranches.every((_ref2) => {\n    let {\n      type\n    } = _ref2;\n    return !!type;\n  });\n  return sumIsOne && allTypesAreDefined;\n};\n\nconst TranchePickerDialog = (_ref3) => {\n  let {\n    title,\n    tranches,\n    handleSave,\n    disabled\n  } = _ref3,\n      props = (0, _objectWithoutProperties2.default)(_ref3, [\"title\", \"tranches\", \"handleSave\", \"disabled\"]);\n  return React.createElement(DialogSimple, {\n    title: title,\n    actions: handleClose => [React.createElement(Button, {\n      key: \"cancel\",\n      onClick: handleClose\n    }, \"Annuler\"), React.createElement(Button, {\n      key: \"save\",\n      onClick: () => {\n        handleSave(tranches);\n        handleClose();\n      },\n      disabled: disabled || !tranchesAreValid(tranches)\n    }, \"Enregistrer\")],\n    label: \"Choisir tranches\",\n    primary: true,\n    raised: false\n  }, React.createElement(TranchePicker, (0, _extends2.default)({}, props, {\n    tranches: tranches\n  })));\n};\n\nmodule.exportDefault(TranchePickerContainer(TranchePickerDialog));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/TranchePicker/index.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./TranchePicker\", {\n  default: \"default\"\n}, 0);\nmodule.link(\"./TranchePickerDialog\", {\n  default: \"TranchePickerDialog\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Translation\":{\"numberComponents\":{\"test\":{\"IntlNumber.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Translation/numberComponents/test/IntlNumber.spec.jsx                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet shallow;\nmodule.link(\"../../../../utils/testHelpers/enzyme\", {\n  shallow(v) {\n    shallow = v;\n  }\n\n}, 2);\nlet FormattedNumber;\nmodule.link(\"react-intl\", {\n  FormattedNumber(v) {\n    FormattedNumber = v;\n  }\n\n}, 3);\nlet IntlNumber;\nmodule.link(\"../IntlNumber\", {\n  default(v) {\n    IntlNumber = v;\n  }\n\n}, 4);\ndescribe('IntlNumber', () => {\n  let props;\n\n  const component = () => shallow(React.createElement(IntlNumber, props));\n\n  beforeEach(() => {\n    props = {};\n  });\n  it('should render FormattedNumber for a regular number', () => {\n    props.value = 10000;\n    expect(component().find(FormattedNumber).length).to.equal(1);\n  });\n  it('does not render a dash for a normal number', () => {\n    props.value = 10000;\n    expect(component().equals('-')).to.equal(false);\n  });\n  it('should render FormattedNumber for 0', () => {\n    props.value = 0;\n    expect(component().find(FormattedNumber).length).to.equal(1);\n  });\n  it('should render a dash for falsy values', () => {\n    props.value = undefined;\n    expect(component().equals('-')).to.equal(true);\n    props.value = false;\n    expect(component().equals('-')).to.equal(true);\n    props.value = null;\n    expect(component().equals('-')).to.equal(true);\n    props.value = NaN;\n    expect(component().equals('-')).to.equal(true);\n  });\n  it('should render a dash for + and - Infinity', () => {\n    props.value = Number.Infinity;\n    expect(component().equals('-')).to.equal(true);\n    props.value = -Number.Infinity;\n    expect(component().equals('-')).to.equal(true);\n  });\n  it('renders the value if it is not a number', () => {\n    props.value = 'hello world';\n    expect(component().equals('hello world')).to.equal(true);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"IntlNumber.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Translation/numberComponents/IntlNumber.jsx                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet FormattedNumber, FormattedPlural;\nmodule.link(\"react-intl\", {\n  FormattedNumber(v) {\n    FormattedNumber = v;\n  },\n\n  FormattedPlural(v) {\n    FormattedPlural = v;\n  }\n\n}, 2);\n\nconst shouldRenderDash = value => !value && value !== 0 || value === Infinity;\n\nconst IntlNumber = (_ref) => {\n  let {\n    type,\n    value\n  } = _ref,\n      rest = (0, _objectWithoutProperties2.default)(_ref, [\"type\", \"value\"]);\n\n  // Render a dash if the number is not well specified\n  if (shouldRenderDash(value)) {\n    return '-';\n  }\n\n  if (typeof value !== 'number') {\n    // Render whatever comes if it is not a number\n    return value;\n  }\n\n  switch (type) {\n    case 'plural':\n      return React.createElement(FormattedPlural, (0, _extends2.default)({}, rest, {\n        value: value\n      }));\n\n    default:\n      return React.createElement(FormattedNumber, (0, _extends2.default)({}, rest, {\n        value: value\n      }));\n  }\n};\n\nIntlNumber.propTypes = {\n  value: PropTypes.number\n};\nIntlNumber.defaultProps = {\n  value: undefined\n};\nmodule.exportDefault(IntlNumber);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Money.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Translation/numberComponents/Money.jsx                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet toMoney;\nmodule.link(\"../../../utils/conversionFunctions\", {\n  toMoney(v) {\n    toMoney = v;\n  }\n\n}, 2);\n\nconst getValue = (_ref) => {\n  let {\n    displayZero,\n    value,\n    currency,\n    rounded\n  } = _ref;\n\n  if (!displayZero && (!value || value === 0)) {\n    return '-';\n  }\n\n  if (value !== 0 && !value) {\n    return currency ? 0 : React.createElement(React.Fragment, null, \"CHF\\xA00\");\n  }\n\n  return currency ? React.createElement(React.Fragment, null, \"CHF\\xA0\", toMoney(value, {\n    rounded\n  })) : toMoney(value, {\n    rounded\n  });\n}; // The Intl standard for CHF is messed up, and display the currency after the\n// monetary value, which is not what we want. We can use IntlNumber later on\n// if needed\n\n\nconst Money = (_ref2) => {\n  let {\n    value,\n    currency,\n    displayZero,\n    className,\n    tag: Tag,\n    rounded\n  } = _ref2;\n  return React.createElement(Tag, {\n    className: className\n  }, getValue({\n    displayZero,\n    value,\n    currency,\n    rounded\n  }));\n};\n\nMoney.propTypes = {\n  className: PropTypes.string,\n  currency: PropTypes.bool,\n  displayZero: PropTypes.bool,\n  tag: PropTypes.string,\n  value: PropTypes.number\n};\nMoney.defaultProps = {\n  className: '',\n  currency: true,\n  displayZero: true,\n  tag: 'span',\n  value: 0\n};\nmodule.exportDefault(Money);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Percent.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Translation/numberComponents/Percent.jsx                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet IntlNumber;\nmodule.link(\"..\", {\n  IntlNumber(v) {\n    IntlNumber = v;\n  }\n\n}, 2);\n\nconst Percent = (_ref) => {\n  let {\n    value,\n    rounded,\n    showPlus\n  } = _ref;\n  return React.createElement(IntlNumber, {\n    value: value,\n    format: rounded ? 'percentageRounded' : 'percentage'\n  }, formattedValue => React.createElement(\"span\", null, showPlus ? value > 0 ? '+' : '' : '', formattedValue));\n};\n\nPercent.propTypes = {\n  showPlus: PropTypes.boolean,\n  value: PropTypes.number\n};\nPercent.defaultProps = {\n  showPlus: false,\n  value: undefined\n};\nmodule.exportDefault(Percent);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Translation/numberComponents/index.js                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./Money\", {\n  default: \"Money\"\n}, 0);\nmodule.link(\"./Percent\", {\n  default: \"Percent\"\n}, 1);\nmodule.link(\"./IntlNumber\", {\n  default: \"IntlNumber\"\n}, 2);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"formattingComponents\":{\"IntlDate.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Translation/formattingComponents/IntlDate.jsx                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nmodule.export({\n  IntlDate: () => IntlDate\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet FormattedDate, FormattedTime, FormattedRelative;\nmodule.link(\"react-intl\", {\n  FormattedDate(v) {\n    FormattedDate = v;\n  },\n\n  FormattedTime(v) {\n    FormattedTime = v;\n  },\n\n  FormattedRelative(v) {\n    FormattedRelative = v;\n  }\n\n}, 2);\n\nconst IntlDate = (_ref) => {\n  let {\n    type\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"type\"]);\n\n  switch (type) {\n    case 'time':\n      return React.createElement(FormattedTime, props);\n\n    case 'relative':\n      return React.createElement(FormattedRelative, props);\n\n    default:\n      return React.createElement(FormattedDate, props);\n  }\n};\n\nIntlDate.propTypes = {\n  type: PropTypes.string\n};\nmodule.exportDefault(IntlDate);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"MetricArea.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Translation/formattingComponents/MetricArea.jsx                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\n\nconst MetricArea = (_ref) => {\n  let {\n    value,\n    placeholder\n  } = _ref;\n\n  if (!value || value === 0) {\n    return placeholder || React.createElement(\"span\", null, \"0 m\", React.createElement(\"sup\", null, \"2\"));\n  }\n\n  return React.createElement(\"span\", null, value, \" m\", React.createElement(\"sup\", null, \"2\"));\n};\n\nMetricArea.propTypes = {\n  value: PropTypes.number\n};\nMetricArea.defaultProps = {\n  value: undefined\n};\nmodule.exportDefault(MetricArea);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Translation/formattingComponents/index.js                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./MetricArea\", {\n  default: \"MetricArea\"\n}, 0);\nmodule.link(\"./IntlDate\", {\n  default: \"IntlDate\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"FormattedMessage.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Translation/FormattedMessage.jsx                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet FormattedMessage;\nmodule.link(\"react-intl\", {\n  FormattedMessage(v) {\n    FormattedMessage = v;\n  }\n\n}, 1);\nlet Consumer;\nmodule.link(\"./withTranslationContext\", {\n  Consumer(v) {\n    Consumer = v;\n  }\n\n}, 2);\n// For some \"select\" strings that need a default value\nconst defaultTranslationValues = {\n  purchaseType: 'ACQUISITION'\n};\nmodule.exportDefault((_ref) => {\n  let {\n    values = {}\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"values\"]);\n  return React.createElement(Consumer, null, function () {\n    let translationValues = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return React.createElement(FormattedMessage, (0, _extends2.default)({}, props, {\n      values: (0, _objectSpread2.default)({}, defaultTranslationValues, translationValues, values)\n    }));\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Translation.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Translation/Translation.jsx                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nmodule.export({\n  T: () => T\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet AutoTooltip;\nmodule.link(\"../tooltips/AutoTooltip\", {\n  default(v) {\n    AutoTooltip = v;\n  }\n\n}, 2);\nlet defaultIntlValues;\nmodule.link(\"./defaultIntlValues\", {\n  default(v) {\n    defaultIntlValues = v;\n  }\n\n}, 3);\nlet FormattedMessage;\nmodule.link(\"./FormattedMessage\", {\n  default(v) {\n    FormattedMessage = v;\n  }\n\n}, 4);\n\nconst makeAutoTooltip = props => (content, key) => React.createElement(AutoTooltip, (0, _extends2.default)({}, props, {\n  placement: props.tooltipPlacement,\n  key: key\n}), content);\n/**\n * T - A wrapper around react-intl's Formatted Message, it\n * automatically adds tooltips if they exist.\n * It is only rerendered if the id changes\n * @extends Component\n */\n\n\nconst T = props => {\n  const {\n    noTooltips,\n    id,\n    values,\n    tooltipPlacement\n  } = props,\n        rest = (0, _objectWithoutProperties2.default)(props, [\"noTooltips\", \"id\", \"values\", \"tooltipPlacement\"]);\n\n  if (noTooltips) {\n    return React.createElement(FormattedMessage, props);\n  }\n\n  if (typeof id !== 'string') {\n    return id;\n  }\n\n  if (!id) {\n    throw new Error('Undefined id in Translation component');\n  }\n\n  const Auto = makeAutoTooltip(props);\n  return React.createElement(FormattedMessage, (0, _extends2.default)({\n    id: id,\n    values: (0, _objectSpread2.default)({}, defaultIntlValues, values)\n  }, rest), function () {\n    for (var _len = arguments.length, formattedMessage = new Array(_len), _key = 0; _key < _len; _key++) {\n      formattedMessage[_key] = arguments[_key];\n    }\n\n    return formattedMessage.map((msg, i) => Auto(msg, i));\n  });\n};\n\nT.propTypes = {\n  id: PropTypes.string.isRequired,\n  noTooltips: PropTypes.bool,\n  tooltipPlacement: PropTypes.string,\n  values: PropTypes.object\n};\nT.defaultProps = {\n  noTooltips: false,\n  tooltipPlacement: undefined,\n  values: {}\n};\nmodule.exportDefault(T);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"defaultIntlValues.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Translation/defaultIntlValues.jsx                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\n// These values are injected into every intl message for convenience\nconst defaultIntlValues = {\n  verticalSpace: React.createElement(\"span\", null, React.createElement(\"br\", null), React.createElement(\"br\", null)),\n  purchaseType: '',\n  name: ''\n};\nmodule.exportDefault(defaultIntlValues);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Translation/index.js                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./Translation\", {\n  \"*\": \"*\"\n}, 0);\nmodule.link(\"./Translation\", {\n  default: \"default\"\n}, 1);\nmodule.link(\"./numberComponents\", {\n  \"*\": \"*\"\n}, 2);\nmodule.link(\"./formattingComponents\", {\n  \"*\": \"*\"\n}, 3);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"withTranslationContext.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Translation/withTranslationContext.jsx                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  Consumer: () => Consumer,\n  Provider: () => Provider\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nconst {\n  Consumer,\n  Provider\n} = React.createContext();\nmodule.exportDefault(translationValues => Component => props => React.createElement(Consumer, null, function () {\n  let translationContext = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return React.createElement(Provider, {\n    value: (0, _objectSpread2.default)({}, translationContext, translationValues(props))\n  }, React.createElement(Component, props));\n}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"UploaderArray\":{\"Uploader\":{\"test\":{\"UploaderController.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/UploaderArray/Uploader/test/UploaderController.spec.js                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet propHasChanged;\nmodule.link(\"../UploaderController\", {\n  propHasChanged(v) {\n    propHasChanged = v;\n  }\n\n}, 1);\ndescribe('UploaderController', () => {\n  describe('propHasChanged', () => {\n    it('returns true if the initial prop is undefined', () => {\n      expect(propHasChanged(undefined, [{}])).to.equal(true);\n    });\n    it('returns true if the length has changed', () => {\n      expect(propHasChanged([{}], [{}, {}])).to.equal(true);\n    });\n    it('returns false if both are undefined', () => {\n      expect(propHasChanged(undefined, undefined)).to.equal(false);\n    });\n    it('returns false if both have same length', () => {\n      expect(propHasChanged([{}], [{}])).to.equal(false);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"UploaderController.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/UploaderArray/Uploader/UploaderController.js                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  propHasChanged: () => propHasChanged\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet compose, withStateHandlers, withProps, lifecycle;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  },\n\n  withStateHandlers(v) {\n    withStateHandlers = v;\n  },\n\n  withProps(v) {\n    withProps = v;\n  },\n\n  lifecycle(v) {\n    lifecycle = v;\n  }\n\n}, 1);\nlet injectIntl;\nmodule.link(\"react-intl\", {\n  injectIntl(v) {\n    injectIntl = v;\n  }\n\n}, 2);\nlet uniqBy;\nmodule.link(\"lodash/uniqBy\", {\n  default(v) {\n    uniqBy = v;\n  }\n\n}, 3);\nlet FILE_STATUS, ALLOWED_FILE_TYPES, MAX_FILE_SIZE;\nmodule.link(\"../../../api/constants\", {\n  FILE_STATUS(v) {\n    FILE_STATUS = v;\n  },\n\n  ALLOWED_FILE_TYPES(v) {\n    ALLOWED_FILE_TYPES = v;\n  },\n\n  MAX_FILE_SIZE(v) {\n    MAX_FILE_SIZE = v;\n  }\n\n}, 4);\nlet ClientEventService, MODIFIED_FILES_EVENT;\nmodule.link(\"../../../api/events/ClientEventService\", {\n  default(v) {\n    ClientEventService = v;\n  },\n\n  MODIFIED_FILES_EVENT(v) {\n    MODIFIED_FILES_EVENT = v;\n  }\n\n}, 5);\nlet notifyOfUpload;\nmodule.link(\"../../../api/slack/methodDefinitions\", {\n  notifyOfUpload(v) {\n    notifyOfUpload = v;\n  }\n\n}, 6);\nlet withMatchParam;\nmodule.link(\"../../../containers/withMatchParam\", {\n  default(v) {\n    withMatchParam = v;\n  }\n\n}, 7);\n\nconst checkFile = function (file) {\n  let currentValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  let tempFiles = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n  if (ALLOWED_FILE_TYPES.indexOf(file.type) < 0) {\n    return 'fileType';\n  }\n\n  if (file.size > MAX_FILE_SIZE) {\n    return 'fileSize';\n  }\n\n  if (currentValue.some((_ref) => {\n    let {\n      name\n    } = _ref;\n    return name === file.name;\n  }) || tempFiles.some((_ref2) => {\n    let {\n      name\n    } = _ref2;\n    return name === file.name;\n  })) {\n    return 'sameName';\n  }\n\n  return true;\n};\n\nconst filesExistAndAreValid = files => files && files.length > 0 && files.every(file => file.status === FILE_STATUS.VALID);\n\nconst propHasChanged = (oldProp, newProp) => !!(!oldProp && newProp || oldProp && !newProp || oldProp && newProp && oldProp.length !== newProp.length);\n\nconst displayFullState = withStateHandlers((_ref3) => {\n  let {\n    currentValue\n  } = _ref3;\n  return {\n    displayFull: Meteor.microservice === 'admin' || !filesExistAndAreValid(currentValue)\n  };\n}, {\n  showFull: () => () => ({\n    displayFull: true\n  }),\n  hideFull: () => () => ({\n    displayFull: false\n  })\n});\nconst tempFileState = withStateHandlers({\n  tempFiles: [],\n  tempSuccessFiles: []\n}, {\n  addTempSuccessFile: (_ref4) => {\n    let {\n      tempSuccessFiles,\n      tempFiles\n    } = _ref4;\n    return file => ({\n      tempSuccessFiles: [...tempSuccessFiles, file],\n      tempFiles: tempFiles.filter((_ref5) => {\n        let {\n          name\n        } = _ref5;\n        return name !== file.name;\n      })\n    });\n  },\n  addTempFiles: (_ref6) => {\n    let {\n      tempFiles\n    } = _ref6;\n    return function () {\n      let files = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      return {\n        tempFiles: [...tempFiles, ...files]\n      };\n    };\n  },\n  setTempSuccessFiles: () => function () {\n    let files = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    return {\n      tempSuccessFiles: files\n    };\n  }\n});\nconst props = withProps((_ref7) => {\n  let {\n    deleteFile,\n    addTempFiles,\n    addTempSuccessFile,\n    intl: {\n      formatMessage: f\n    },\n    handleSuccess,\n    currentValue = [],\n    tempFiles,\n    tempSuccessFiles,\n    fileMeta: {\n      id,\n      label\n    },\n    loanId,\n    setTempSuccessFiles,\n    docId,\n    collection\n  } = _ref7;\n  return {\n    handleAddFiles: files => {\n      const fileArray = [];\n      let showError = false;\n      files.forEach(file => {\n        const isValid = checkFile(file, [...currentValue, ...tempSuccessFiles], tempFiles);\n\n        if (isValid === true) {\n          fileArray.push(file);\n        } else {\n          showError = isValid;\n        }\n      });\n\n      if (showError) {\n        module.dynamicImport(\"../../../utils/notification\").then((_ref8) => {\n          let {\n            default: notification\n          } = _ref8;\n          notification.error({\n            message: f({\n              id: \"errors.\".concat(showError, \".title\")\n            }),\n            description: f({\n              id: \"errors.\".concat(showError, \".description\")\n            })\n          });\n        });\n        return;\n      }\n\n      addTempFiles(files);\n    },\n    handleUploadComplete: (file, url) => {\n      addTempSuccessFile(file);\n      ClientEventService.emit(MODIFIED_FILES_EVENT);\n      notifyOfUpload.run({\n        fileName: file.name,\n        docLabel: label || f({\n          id: \"files.\".concat(id)\n        }),\n        loanId\n      });\n\n      if (handleSuccess) {\n        handleSuccess(file, url);\n      }\n    },\n    handleRemove: key => deleteFile(key).then(() => {\n      // Filter temp files if this is not a real file from the DB\n      setTempSuccessFiles(tempSuccessFiles.filter((_ref9) => {\n        let {\n          Key\n        } = _ref9;\n        return Key !== key;\n      })); // Wait for a sec before pinging the DB again\n\n      setTimeout(() => {\n        ClientEventService.emit(MODIFIED_FILES_EVENT);\n      }, 0);\n    })\n  };\n});\nconst willReceiveProps = lifecycle({\n  componentWillReceiveProps(_ref10) {\n    let {\n      currentValue: nextValue = []\n    } = _ref10;\n    const {\n      currentValue = [],\n      tempSuccessFiles,\n      setTempSuccessFiles\n    } = this.props;\n\n    if (propHasChanged(currentValue, nextValue) && tempSuccessFiles.length > 0) {\n      const nonDuplicateFiles = tempSuccessFiles.filter((_ref11) => {\n        let {\n          name\n        } = _ref11;\n        return !nextValue.find(file => file.name === name);\n      });\n      setTempSuccessFiles(nonDuplicateFiles);\n    }\n  }\n\n});\nconst withMergedSuccessfulFiles = withProps((_ref12) => {\n  let {\n    currentValue = [],\n    tempSuccessFiles\n  } = _ref12;\n  return {\n    currentValue: uniqBy([...currentValue, ...tempSuccessFiles], 'name')\n  };\n});\nmodule.exportDefault(compose(injectIntl, displayFullState, tempFileState, withMatchParam('loanId'), props, willReceiveProps, withMergedSuccessfulFiles));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"widget1\":{\"Widget1Inputs\":{\"test\":{\"Widget1Inputs.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/widget1/Widget1Inputs/test/Widget1Inputs.spec.jsx                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet shallow;\nmodule.link(\"../../../../utils/testHelpers/enzyme\", {\n  shallow(v) {\n    shallow = v;\n  }\n\n}, 2);\nlet Widget1Inputs;\nmodule.link(\"../Widget1Inputs\", {\n  Widget1Inputs(v) {\n    Widget1Inputs = v;\n  }\n\n}, 3);\nlet Widget1SingleInput;\nmodule.link(\"../../Widget1SingleInput\", {\n  default(v) {\n    Widget1SingleInput = v;\n  }\n\n}, 4);\ndescribe('Widget1Input', () => {\n  let props;\n\n  const component = () => shallow(React.createElement(Widget1Inputs, props));\n\n  beforeEach(() => {\n    props = {\n      fields: ['field1', 'field2']\n    };\n  });\n  it('renders a root div with the right class', () => {\n    expect(component().find('div').first().hasClass('widget1-inputs')).to.equal(true);\n  });\n  it('renders multiple fields', () => {\n    expect(component().find(Widget1SingleInput).length).to.equal(props.fields.length);\n  });\n  it('passes the proper field name to each field', () => {\n    component().find(Widget1SingleInput).forEach((node, index) => {\n      expect(node.prop('name')).to.equal(props.fields[index]);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Widget1InputsError.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/widget1/Widget1Inputs/test/Widget1InputsError.spec.jsx                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet shallow;\nmodule.link(\"../../../../utils/testHelpers/enzyme\", {\n  shallow(v) {\n    shallow = v;\n  }\n\n}, 2);\nlet T;\nmodule.link(\"../../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 3);\nlet StatusIcon;\nmodule.link(\"../../../StatusIcon\", {\n  default(v) {\n    StatusIcon = v;\n  }\n\n}, 4);\nlet Widget1InputsError;\nmodule.link(\"../Widget1InputsError\", {\n  default(v) {\n    Widget1InputsError = v;\n  }\n\n}, 5);\ndescribe('Widget1InputsError', () => {\n  let props;\n\n  const component = () => shallow(React.createElement(Widget1InputsError, props));\n\n  beforeEach(() => {\n    props = {\n      borrowRule: {},\n      incomeRule: {}\n    };\n  });\n  it('renders the tutorial if incomeRatio is not well defined', () => {\n    props.borrowRule.value = 1;\n    expect(component().find(T).props().id).to.include('empty');\n  });\n  it('renders the tutorial if borrowRatio is not well defined', () => {\n    props.incomeRule.value = 1;\n    expect(component().find(T).props().id).to.include('empty');\n  });\n  it('renders the worst of both status for error', () => {\n    props.incomeRule = {\n      value: 1,\n      status: 'ERROR'\n    };\n    props.borrowRule = {\n      value: 1,\n      status: 'SUCCESS'\n    };\n    expect(component().find(StatusIcon).props().status).to.equal('ERROR');\n    expect(component().find(T).props().id).to.include('income');\n  });\n  it('renders the worst of both status for warning', () => {\n    props.incomeRule = {\n      value: 1,\n      status: 'WARNING'\n    };\n    props.borrowRule = {\n      value: 1,\n      status: 'SUCCESS'\n    };\n    expect(component().find(StatusIcon).props().status).to.equal('WARNING');\n    expect(component().find(T).props().id).to.include('income');\n  });\n  it('renders the worst of both status for warning and error', () => {\n    props.incomeRule = {\n      value: 1,\n      status: 'WARNING'\n    };\n    props.borrowRule = {\n      value: 1,\n      status: 'ERROR'\n    };\n    expect(component().find(StatusIcon).props().status).to.equal('ERROR');\n    expect(component().find(T).props().id).to.include('borrow');\n  });\n  it('renders success if both are success', () => {\n    props.incomeRule = {\n      value: 1,\n      status: 'SUCCESS'\n    };\n    props.borrowRule = {\n      value: 1,\n      status: 'SUCCESS'\n    };\n    expect(component().find(StatusIcon).props().status).to.equal('SUCCESS');\n    expect(component().find(T).props().id).to.include('success');\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Widget1Inputs.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/widget1/Widget1Inputs/Widget1Inputs.jsx                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  Widget1Inputs: () => Widget1Inputs\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet T;\nmodule.link(\"../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 2);\nlet Widget1SingleInput;\nmodule.link(\"../Widget1SingleInput\", {\n  default(v) {\n    Widget1SingleInput = v;\n  }\n\n}, 3);\nlet Widget1InputsError;\nmodule.link(\"./Widget1InputsError\", {\n  default(v) {\n    Widget1InputsError = v;\n  }\n\n}, 4);\nlet Widget1InputsReset;\nmodule.link(\"./Widget1InputsReset\", {\n  default(v) {\n    Widget1InputsReset = v;\n  }\n\n}, 5);\nlet Widget1InputsContainer;\nmodule.link(\"./Widget1InputsContainer\", {\n  default(v) {\n    Widget1InputsContainer = v;\n  }\n\n}, 6);\n\nconst Widget1Inputs = (_ref) => {\n  let {\n    finma,\n    fields\n  } = _ref;\n  return React.createElement(\"div\", {\n    className: \"widget1-inputs card1\"\n  }, React.createElement(\"div\", {\n    className: \"card-top\"\n  }, React.createElement(\"h3\", null, React.createElement(T, {\n    id: \"Widget1Inputs.title\"\n  })), React.createElement(Widget1InputsReset, null), React.createElement(\"div\", {\n    className: \"widget1-inputs-list\"\n  }, fields.map((field, index) => React.createElement(Widget1SingleInput, {\n    key: field,\n    name: field,\n    tabIndex: index\n  })))), React.createElement(Widget1InputsError, finma));\n};\n\nWidget1Inputs.propTypes = {\n  fields: PropTypes.arrayOf(PropTypes.string).isRequired,\n  finma: PropTypes.object.isRequired\n};\nmodule.exportDefault(Widget1InputsContainer(Widget1Inputs));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Widget1InputsContainer.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/widget1/Widget1Inputs/Widget1InputsContainer.js                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet connect;\nmodule.link(\"react-redux\", {\n  connect(v) {\n    connect = v;\n  }\n\n}, 0);\nlet widget1Selectors;\nmodule.link(\"../../../redux/widget1\", {\n  widget1Selectors(v) {\n    widget1Selectors = v;\n  }\n\n}, 1);\n\nconst mapStateToProps = state => ({\n  fields: widget1Selectors.selectFields(state)\n});\n\nmodule.exportDefault(connect(mapStateToProps));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Widget1InputsError.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/widget1/Widget1Inputs/Widget1InputsError.jsx                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet SUCCESS, WARNING, ERROR;\nmodule.link(\"../../../api/constants\", {\n  SUCCESS(v) {\n    SUCCESS = v;\n  },\n\n  WARNING(v) {\n    WARNING = v;\n  },\n\n  ERROR(v) {\n    ERROR = v;\n  }\n\n}, 2);\nlet T;\nmodule.link(\"../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 3);\nlet Icon;\nmodule.link(\"../../Icon\", {\n  default(v) {\n    Icon = v;\n  }\n\n}, 4);\nlet StatusIcon;\nmodule.link(\"../../StatusIcon\", {\n  default(v) {\n    StatusIcon = v;\n  }\n\n}, 5);\nlet hideFinmaValues;\nmodule.link(\"../widget1Helpers\", {\n  hideFinmaValues(v) {\n    hideFinmaValues = v;\n  }\n\n}, 6);\nconst STATUSES = [SUCCESS, WARNING, ERROR];\n\nconst getBorrowError = status => status === ERROR ? 'Widget1InputsError.borrowError' : 'Widget1InputsError.borrowWarning';\n\nconst getIncomeError = status => status === ERROR ? 'Widget1InputsError.incomeError' : 'Widget1InputsError.incomeWarning';\n\nconst getMessage = (worstStatus, index, borrowStatus, incomeStatus) => {\n  if (worstStatus === SUCCESS) {\n    return 'Widget1InputsError.success';\n  }\n\n  if (index === 0) {\n    return getBorrowError(borrowStatus);\n  }\n\n  return getIncomeError(incomeStatus);\n}; // Get the worst of the 2 statuses, if one is error and the other warning\n// It should return error.\n// Spread the array because reverse() changes the array in place\n\n\nconst getWorstStatus = (values, orderedValues) => {\n  const match = [...orderedValues].reverse().find(value => values.indexOf(value) >= 0);\n  return {\n    match,\n    index: values.indexOf(match)\n  };\n};\n\nconst Widget1InputsError = (_ref) => {\n  let {\n    borrowRule: {\n      status: borrowStatus,\n      value: borrowRatio\n    },\n    incomeRule: {\n      status: incomeStatus,\n      value: incomeRatio\n    }\n  } = _ref;\n\n  if (hideFinmaValues(borrowRatio, incomeRatio)) {\n    return React.createElement(\"div\", {\n      className: \"card-bottom no-responsive-typo-s\"\n    }, React.createElement(Icon, {\n      type: \"up\",\n      className: \"icon\"\n    }), React.createElement(\"p\", null, React.createElement(T, {\n      id: \"Widget1InputsError.empty\"\n    })));\n  }\n\n  const statuses = [borrowStatus, incomeStatus];\n  const {\n    match: worstStatus,\n    index\n  } = getWorstStatus(statuses, STATUSES);\n  const messageId = getMessage(worstStatus, index, borrowStatus, incomeStatus);\n  return React.createElement(\"div\", {\n    className: \"card-bottom no-responsive-typo-s\"\n  }, React.createElement(StatusIcon, {\n    status: worstStatus,\n    className: \"icon\"\n  }), React.createElement(\"p\", {\n    className: \"message\"\n  }, React.createElement(T, {\n    id: messageId\n  })));\n};\n\nWidget1InputsError.propTypes = {\n  borrowRule: PropTypes.object.isRequired,\n  incomeRule: PropTypes.object.isRequired\n};\nmodule.exportDefault(Widget1InputsError);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Widget1InputsReset.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/widget1/Widget1Inputs/Widget1InputsReset.jsx                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet IconButton;\nmodule.link(\"../../IconButton\", {\n  default(v) {\n    IconButton = v;\n  }\n\n}, 2);\nlet Widget1InputsResetContainer;\nmodule.link(\"./Widget1InputsResetContainer\", {\n  default(v) {\n    Widget1InputsResetContainer = v;\n  }\n\n}, 3);\n\nconst Widget1InputsReset = (_ref) => {\n  let {\n    onClick\n  } = _ref;\n  return React.createElement(\"span\", {\n    className: \"widget1-inputs-reset\"\n  }, React.createElement(IconButton, {\n    type: \"backupRestore\",\n    tooltip: \"Reset\",\n    onClick: onClick\n  }));\n};\n\nWidget1InputsReset.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\nmodule.exportDefault(Widget1InputsResetContainer(Widget1InputsReset));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Widget1InputsResetContainer.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/widget1/Widget1Inputs/Widget1InputsResetContainer.js                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet connect;\nmodule.link(\"react-redux\", {\n  connect(v) {\n    connect = v;\n  }\n\n}, 0);\nlet widget1Actions;\nmodule.link(\"../../../redux/widget1\", {\n  widget1Actions(v) {\n    widget1Actions = v;\n  }\n\n}, 1);\n\nconst mapDispatchToProps = dispatch => ({\n  onClick: () => dispatch(widget1Actions.resetCalculator())\n});\n\nmodule.exportDefault(connect(null, mapDispatchToProps));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Widget1SingleInput\":{\"test\":{\"Widget1SingleInputSlider.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/widget1/Widget1SingleInput/test/Widget1SingleInputSlider.spec.jsx                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet shallow;\nmodule.link(\"../../../../utils/testHelpers/enzyme\", {\n  shallow(v) {\n    shallow = v;\n  }\n\n}, 2);\nlet Slider;\nmodule.link(\"../../../Material/Slider\", {\n  default(v) {\n    Slider = v;\n  }\n\n}, 3);\nlet IconButton;\nmodule.link(\"../../../IconButton\", {\n  default(v) {\n    IconButton = v;\n  }\n\n}, 4);\nlet Widget1SingleInputSlider;\nmodule.link(\"../Widget1SingleInputSlider\", {\n  default(v) {\n    Widget1SingleInputSlider = v;\n  }\n\n}, 5);\ndescribe('Widget1SingleInputSlider', () => {\n  let props;\n\n  const component = () => shallow(React.createElement(Widget1SingleInputSlider, props));\n\n  beforeEach(() => {\n    props = {};\n  });\n  it('should render a Slider', () => {\n    expect(component().find(Slider).length).to.equal(1);\n  });\n  it('should pass the value to the slider', () => {\n    props.value = 100;\n    props.sliderMax = 150;\n    expect(component().find(Slider).props().value).to.equal(100);\n  });\n  it('should pass a value of 0 to slider if value is falsy', () => {\n    props.value = '';\n    expect(component().find(Slider).props().value).to.equal(0);\n    props.value = undefined;\n    expect(component().find(Slider).props().value).to.equal(0);\n    props.value = null;\n    expect(component().find(Slider).props().value).to.equal(0);\n  });\n  it('should pass the sliderMax to the Slider if the value is larger', () => {\n    props.value = 100;\n    props.sliderMax = 50;\n    expect(component().find(Slider).props().value).to.equal(50);\n  });\n  it('should render an IconButton if value is large than sliderMax', () => {\n    props.sliderMax = 1;\n    props.value = 2;\n    expect(component().find(IconButton).length).to.equal(1);\n  });\n  it('should render an IconButton if value is at least 90% of sliderMax', () => {\n    props.sliderMax = 1;\n    props.value = 0.95;\n    expect(component().find(IconButton).length).to.equal(1);\n  });\n  it('should not render an IconButton if sliderMax is 0', () => {\n    props.sliderMax = 0;\n    expect(component().find(IconButton).length).to.equal(0);\n  });\n  it('should not render an IconButton if value is smaller than sliderMax', () => {\n    props.sliderMax = 2;\n    props.value = 1;\n    expect(component().find(IconButton).length).to.equal(0);\n  });\n  it('should not render an IconButton if sliderMax is allowExtremeLoan is true', () => {\n    props.sliderMax = 1;\n    props.value = 2;\n    props.allowExtremeLoan = true;\n    expect(component().find(IconButton).length).to.equal(0);\n  });\n  it('should use a special tooltip on the button if this is a loanValue', () => {\n    props.sliderMax = 1;\n    props.value = 2;\n    props.isLoanValue = true;\n    expect(component().find(IconButton).props().tooltip.props.id).to.include('buttonTooltipLoan');\n    props.isLoanValue = false;\n    expect(component().find(IconButton).props().tooltip.props.id).to.not.include('buttonTooltipLoan');\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Widget1SingleInput.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/widget1/Widget1SingleInput/Widget1SingleInput.jsx                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet T;\nmodule.link(\"../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 2);\nlet Widget1SingleInputContainer;\nmodule.link(\"./Widget1SingleInputContainer\", {\n  default(v) {\n    Widget1SingleInputContainer = v;\n  }\n\n}, 3);\nlet Widget1SingleInputInput;\nmodule.link(\"./Widget1SingleInputInput\", {\n  default(v) {\n    Widget1SingleInputInput = v;\n  }\n\n}, 4);\nlet Widget1SingleInputSlider;\nmodule.link(\"./Widget1SingleInputSlider\", {\n  default(v) {\n    Widget1SingleInputSlider = v;\n  }\n\n}, 5);\n\nconst Widget1SingleInput = (_ref) => {\n  let {\n    value,\n    auto,\n    name,\n    labelName = name,\n    setValue,\n    setInputValue,\n    unsetValue,\n    setAuto,\n    sliderMax,\n    increaseSliderMax,\n    isLoanValue,\n    allowExtremeLoan,\n    tabIndex\n  } = _ref;\n  return React.createElement(\"div\", {\n    className: \"widget1-single-input\"\n  }, React.createElement(\"div\", {\n    className: \"widget1-single-input-box\"\n  }, React.createElement(\"label\", {\n    htmlFor: name\n  }, React.createElement(T, {\n    id: \"Widget1SingleInput.\".concat(labelName)\n  })), React.createElement(\"div\", {\n    className: \"widget1-single-input-box-content\"\n  }, React.createElement(Widget1SingleInputInput, {\n    value: value,\n    setInputValue: setInputValue,\n    auto: auto,\n    setAuto: setAuto,\n    unsetValue: unsetValue,\n    name: name,\n    tabIndex: tabIndex\n  }), React.createElement(Widget1SingleInputSlider, {\n    value: value,\n    setValue: setValue,\n    sliderMax: sliderMax,\n    increaseSliderMax: increaseSliderMax,\n    isLoanValue: isLoanValue,\n    allowExtremeLoan: allowExtremeLoan\n  }))));\n};\n\nWidget1SingleInput.propTypes = {\n  allowExtremeLoan: PropTypes.bool,\n  auto: PropTypes.bool.isRequired,\n  increaseSliderMax: PropTypes.func.isRequired,\n  isLoanValue: PropTypes.bool.isRequired,\n  labelName: PropTypes.string,\n  name: PropTypes.string.isRequired,\n  setAuto: PropTypes.func.isRequired,\n  setInputValue: PropTypes.func.isRequired,\n  setValue: PropTypes.func.isRequired,\n  sliderMax: PropTypes.number.isRequired,\n  tabIndex: PropTypes.number,\n  unsetValue: PropTypes.func.isRequired,\n  value: PropTypes.number\n};\nWidget1SingleInput.defaultProps = {\n  value: undefined,\n  allowExtremeLoan: undefined,\n  labelName: undefined,\n  tabIndex: undefined\n};\nmodule.exportDefault(Widget1SingleInputContainer(Widget1SingleInput));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Widget1SingleInputContainer.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/widget1/Widget1SingleInput/Widget1SingleInputContainer.js                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet connect;\nmodule.link(\"react-redux\", {\n  connect(v) {\n    connect = v;\n  }\n\n}, 0);\nlet withProps, compose;\nmodule.link(\"recompose\", {\n  withProps(v) {\n    withProps = v;\n  },\n\n  compose(v) {\n    compose = v;\n  }\n\n}, 1);\nlet toNumber;\nmodule.link(\"../../../utils/conversionFunctions\", {\n  toNumber(v) {\n    toNumber = v;\n  }\n\n}, 2);\nlet widget1Constants, widget1Actions;\nmodule.link(\"../../../redux/widget1\", {\n  widget1Constants(v) {\n    widget1Constants = v;\n  },\n\n  widget1Actions(v) {\n    widget1Actions = v;\n  }\n\n}, 3);\n\nconst isLoanValue = name => widget1Constants.CAPPED_FIELDS.includes(name);\n\nconst getSliderMax = (widget1, name) => {\n  if (isLoanValue(name)) {\n    return widget1Actions.getPropertyCappedValue(name, {\n      widget1\n    });\n  }\n\n  return widget1[name].sliderMax;\n};\n\nconst withConnect = connect((_ref, _ref2) => {\n  let {\n    widget1\n  } = _ref;\n  let {\n    name\n  } = _ref2;\n  return (0, _objectSpread2.default)({}, widget1[name], {\n    sliderMax: getSliderMax(widget1, name),\n    isLoanValue: isLoanValue(name),\n    purchaseType: widget1.purchaseType\n  });\n}, (dispatch, _ref3) => {\n  let {\n    name\n  } = _ref3;\n  return {\n    setInputValue: event => {\n      let {\n        value\n      } = event.target;\n\n      if (value) {\n        value = toNumber(value);\n      }\n\n      dispatch(widget1Actions.setValue(name, value));\n    },\n    setValue: value => dispatch(widget1Actions.setValue(name, value)),\n    unsetValue: () => dispatch(widget1Actions.setValue(name, '')),\n    setAuto: () => dispatch(widget1Actions.setAuto(name)),\n    increaseSliderMax: () => {\n      if (isLoanValue(name)) {\n        return dispatch(widget1Actions.setAllowExtremeLoan(name));\n      }\n\n      return dispatch(widget1Actions.increaseSliderMax(name));\n    }\n  };\n});\nconst withCorrectPropertyName = withProps((_ref4) => {\n  let {\n    name,\n    purchaseType\n  } = _ref4;\n  return {\n    labelName: name === widget1Constants.PROPERTY && purchaseType === widget1Constants.PURCHASE_TYPE.REFINANCING ? 'propertyValue' : undefined\n  };\n});\nmodule.exportDefault(compose(withConnect, withCorrectPropertyName));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Widget1SingleInputInput.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/widget1/Widget1SingleInput/Widget1SingleInputInput.jsx                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet classnames;\nmodule.link(\"classnames\", {\n  default(v) {\n    classnames = v;\n  }\n\n}, 2);\nlet makeStyles;\nmodule.link(\"@material-ui/core/styles\", {\n  makeStyles(v) {\n    makeStyles = v;\n  }\n\n}, 3);\nlet toMoney;\nmodule.link(\"../../../utils/conversionFunctions\", {\n  toMoney(v) {\n    toMoney = v;\n  }\n\n}, 4);\nlet InputAdornment;\nmodule.link(\"../../Material/InputAdornment\", {\n  default(v) {\n    InputAdornment = v;\n  }\n\n}, 5);\nlet Input;\nmodule.link(\"../../Material/Input\", {\n  default(v) {\n    Input = v;\n  }\n\n}, 6);\nlet T;\nmodule.link(\"../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 7);\nlet IconButton;\nmodule.link(\"../../IconButton\", {\n  default(v) {\n    IconButton = v;\n  }\n\n}, 8);\nconst useStyles = makeStyles(theme => ({\n  root: {},\n  input: {\n    paddingBottom: 8,\n    paddingTop: 8\n  },\n  notchedOutline: {\n    borderColor: 'unset',\n    borderWidth: 0\n  }\n}));\n\nconst Widget1SingleInputInput = (_ref) => {\n  let {\n    name,\n    value,\n    setInputValue,\n    auto,\n    unsetValue,\n    tabIndex\n  } = _ref;\n  const classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classnames('widget1-input', {\n      auto\n    })\n  }, React.createElement(Input, {\n    id: name,\n    type: \"tel\",\n    value: toMoney(value),\n    onChange: setInputValue,\n    startAdornment: React.createElement(InputAdornment, {\n      position: \"start\"\n    }, React.createElement(\"span\", {\n      className: \"widget1-input-currency\"\n    }, \"CHF\")),\n    endAdornment: React.createElement(InputAdornment, {\n      position: \"end\"\n    }, React.createElement(IconButton, {\n      type: \"close\",\n      tooltip: React.createElement(T, {\n        id: \"general.erase\"\n      }),\n      onClick: unsetValue,\n      tabIndex: -1,\n      size: \"small\"\n    })),\n    tabIndex: tabIndex,\n    classes: classes\n  }));\n};\n\nWidget1SingleInputInput.propTypes = {\n  auto: PropTypes.bool.isRequired,\n  name: PropTypes.string.isRequired,\n  setInputValue: PropTypes.func.isRequired,\n  tabIndex: PropTypes.number,\n  unsetValue: PropTypes.func.isRequired,\n  value: PropTypes.any\n};\nWidget1SingleInputInput.defaultProps = {\n  value: '',\n  tabIndex: undefined\n};\nmodule.exportDefault(Widget1SingleInputInput);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Widget1SingleInputSlider.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/widget1/Widget1SingleInput/Widget1SingleInputSlider.jsx                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet Slider;\nmodule.link(\"../../Material/Slider\", {\n  default(v) {\n    Slider = v;\n  }\n\n}, 2);\nlet T;\nmodule.link(\"../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 3);\nlet IconButton;\nmodule.link(\"../../IconButton\", {\n  default(v) {\n    IconButton = v;\n  }\n\n}, 4);\n\n// Avoid weird slider bug, by first checking if value exists\n// https://github.com/react-component/slider/issues/387\nconst getSliderValue = (value, sliderMax) => {\n  if (value) {\n    if (value >= sliderMax) {\n      return sliderMax;\n    }\n\n    return value;\n  }\n\n  return 0;\n};\n\nconst INCREASE_SLIDER_LIMIT = 0.9;\n\nconst showIncreaseButton = (value, sliderMax, allowExtremeLoan) => sliderMax > 0 && value >= INCREASE_SLIDER_LIMIT * sliderMax && !allowExtremeLoan;\n\nconst Widget1SingleInputSlider = (_ref) => {\n  let {\n    value,\n    setValue,\n    sliderMax,\n    increaseSliderMax,\n    isLoanValue,\n    allowExtremeLoan\n  } = _ref;\n  return React.createElement(\"div\", {\n    className: \"widget1-slider\"\n  }, React.createElement(Slider, {\n    min: 0,\n    max: sliderMax,\n    step: 5000 // Do this to prevent an onChange event when typing in a value larger\n    // than sliderMax, which sets the value back to sliderMax\n    ,\n    value: getSliderValue(value, sliderMax),\n    onChange: setValue,\n    className: \"slider\",\n    tabIndex: -1\n  }), showIncreaseButton(value, sliderMax, allowExtremeLoan) ? React.createElement(IconButton, {\n    type: \"add\",\n    tooltip: React.createElement(T, {\n      id: \"Widget1SingleInputSlider.\".concat(isLoanValue ? 'buttonTooltipLoan' : 'buttonTooltip')\n    }),\n    onClick: increaseSliderMax,\n    tabIndex: -1,\n    size: \"small\"\n  }) : React.createElement(\"div\", {\n    className: \"button-placeholder\"\n  }));\n};\n\nWidget1SingleInputSlider.propTypes = {\n  allowExtremeLoan: PropTypes.bool,\n  increaseSliderMax: PropTypes.func.isRequired,\n  isLoanValue: PropTypes.bool.isRequired,\n  setValue: PropTypes.func.isRequired,\n  sliderMax: PropTypes.number.isRequired,\n  value: PropTypes.number\n};\nWidget1SingleInputSlider.defaultProps = {\n  value: undefined,\n  allowExtremeLoan: undefined\n};\nmodule.exportDefault(Widget1SingleInputSlider);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/widget1/Widget1SingleInput/index.js                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./Widget1SingleInput.jsx\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"widget1Helpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/widget1/widget1Helpers.js                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  hideFinmaValues: () => hideFinmaValues,\n  getFinmaValues: () => getFinmaValues\n});\nlet widget1Constants;\nmodule.link(\"../../redux/widget1\", {\n  widget1Constants(v) {\n    widget1Constants = v;\n  }\n\n}, 0);\nlet getBorrowRatio, getRefinancingBorrowRatio, getIncomeRatio, getFinmaMonthlyCost, validateIncomeRatio, validateBorrowRatio;\nmodule.link(\"./widget1Math\", {\n  getBorrowRatio(v) {\n    getBorrowRatio = v;\n  },\n\n  getRefinancingBorrowRatio(v) {\n    getRefinancingBorrowRatio = v;\n  },\n\n  getIncomeRatio(v) {\n    getIncomeRatio = v;\n  },\n\n  getFinmaMonthlyCost(v) {\n    getFinmaMonthlyCost = v;\n  },\n\n  validateIncomeRatio(v) {\n    validateIncomeRatio = v;\n  },\n\n  validateBorrowRatio(v) {\n    validateBorrowRatio = v;\n  }\n\n}, 1);\n\nconst hideFinmaValues = (borrowRatio, incomeRatio) => !(borrowRatio && incomeRatio) || Math.abs(borrowRatio) === Infinity || Math.abs(incomeRatio) === Infinity;\n\nconst getFinmaValues = (_ref) => {\n  let {\n    salary,\n    fortune,\n    wantedLoan,\n    propertyValue,\n    purchaseType\n  } = _ref;\n  const {\n    totalMonthly: finmaMonthlyCost\n  } = getFinmaMonthlyCost(propertyValue, fortune, wantedLoan);\n  const borrowRatio = purchaseType === widget1Constants.PURCHASE_TYPE.ACQUISITION ? getBorrowRatio(propertyValue, fortune) : getRefinancingBorrowRatio(propertyValue, wantedLoan);\n  const incomeRatio = getIncomeRatio(salary, finmaMonthlyCost);\n  const borrowRuleStatus = validateBorrowRatio(borrowRatio);\n  const incomeRuleStatus = validateIncomeRatio(incomeRatio);\n\n  if (hideFinmaValues(borrowRatio, incomeRatio)) {\n    return {\n      borrowRule: (0, _objectSpread2.default)({\n        value: 0\n      }, borrowRuleStatus),\n      incomeRule: (0, _objectSpread2.default)({\n        value: 0\n      }, incomeRuleStatus),\n      finmaMonthlyCost: 0\n    };\n  }\n\n  return {\n    borrowRule: (0, _objectSpread2.default)({\n      value: borrowRatio\n    }, borrowRuleStatus),\n    incomeRule: (0, _objectSpread2.default)({\n      value: incomeRatio\n    }, incomeRuleStatus),\n    finmaMonthlyCost\n  };\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"widget1Math.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/widget1/widget1Math.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  getLoanValue: () => getLoanValue,\n  getRefinancingBorrowRatio: () => getRefinancingBorrowRatio,\n  getBorrowRatio: () => getBorrowRatio,\n  getYearlyAmortization: () => getYearlyAmortization,\n  getSimpleYearlyInterests: () => getSimpleYearlyInterests,\n  getSimpleYearlyMaintenance: () => getSimpleYearlyMaintenance,\n  getIncomeRatio: () => getIncomeRatio,\n  getFinmaMonthlyCost: () => getFinmaMonthlyCost,\n  validateIncomeRatio: () => validateIncomeRatio,\n  validateBorrowRatio: () => validateBorrowRatio\n});\nlet SUCCESS, WARNING, ERROR;\nmodule.link(\"../../api/constants\", {\n  SUCCESS(v) {\n    SUCCESS = v;\n  },\n\n  WARNING(v) {\n    WARNING = v;\n  },\n\n  ERROR(v) {\n    ERROR = v;\n  }\n\n}, 0);\nlet NOTARY_FEES, AMORTIZATION_STOP, MAINTENANCE_REAL, MAINTENANCE_FINMA, INTERESTS_FINMA, MAX_BORROW_RATIO_PRIMARY_PROPERTY, MAX_BORROW_RATIO_OTHER, MAX_BORROW_RATIO_WITH_PLEDGE, FORTUNE_WARNING_TIGHT, INCOME_WARNING_TIGHT, FORTUNE_ERROR, INCOME_ERROR, MAX_INCOME_RATIO, MAX_INCOME_RATIO_TIGHT;\nmodule.link(\"../../config/financeConstants\", {\n  NOTARY_FEES(v) {\n    NOTARY_FEES = v;\n  },\n\n  AMORTIZATION_STOP(v) {\n    AMORTIZATION_STOP = v;\n  },\n\n  MAINTENANCE_REAL(v) {\n    MAINTENANCE_REAL = v;\n  },\n\n  MAINTENANCE_FINMA(v) {\n    MAINTENANCE_FINMA = v;\n  },\n\n  INTERESTS_FINMA(v) {\n    INTERESTS_FINMA = v;\n  },\n\n  MAX_BORROW_RATIO_PRIMARY_PROPERTY(v) {\n    MAX_BORROW_RATIO_PRIMARY_PROPERTY = v;\n  },\n\n  MAX_BORROW_RATIO_OTHER(v) {\n    MAX_BORROW_RATIO_OTHER = v;\n  },\n\n  MAX_BORROW_RATIO_WITH_PLEDGE(v) {\n    MAX_BORROW_RATIO_WITH_PLEDGE = v;\n  },\n\n  FORTUNE_WARNING_TIGHT(v) {\n    FORTUNE_WARNING_TIGHT = v;\n  },\n\n  INCOME_WARNING_TIGHT(v) {\n    INCOME_WARNING_TIGHT = v;\n  },\n\n  FORTUNE_ERROR(v) {\n    FORTUNE_ERROR = v;\n  },\n\n  INCOME_ERROR(v) {\n    INCOME_ERROR = v;\n  },\n\n  MAX_INCOME_RATIO(v) {\n    MAX_INCOME_RATIO = v;\n  },\n\n  MAX_INCOME_RATIO_TIGHT(v) {\n    MAX_INCOME_RATIO_TIGHT = v;\n  }\n\n}, 1);\n\nconst getLoanValue = (propertyValue, fortune) => propertyValue * (1 + NOTARY_FEES) - fortune;\n\nconst getRefinancingBorrowRatio = (propertyValue, loan) => loan / propertyValue;\n\nconst getBorrowRatio = (propertyValue, fortune) => getRefinancingBorrowRatio(propertyValue, getLoanValue(propertyValue, fortune));\n\nconst getYearlyAmortization = (_ref) => {\n  let {\n    propertyValue,\n    loanValue,\n    yearsToRetirement = 15\n  } = _ref;\n  const borrowValue = loanValue / propertyValue;\n  const percentToAmortize = borrowValue - AMORTIZATION_STOP;\n\n  if (percentToAmortize <= 0) {\n    // If you're below the cut-off value, no need to amortize\n    return 0;\n  } // borrowValue is above 65%\n  // 15 years amortization is the default, but if you're older, you'll\n  // have to amortize faster\n\n\n  return percentToAmortize * propertyValue / yearsToRetirement;\n};\n\nconst getSimpleYearlyInterests = (loanValue, interests) => loanValue * interests;\n\nconst getSimpleYearlyMaintenance = function (propertyValue) {\n  let maintenanceRate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : MAINTENANCE_REAL;\n  return maintenanceRate * propertyValue;\n};\n\nconst getIncomeRatio = (yearlySalary, monthlyCost) => monthlyCost / (yearlySalary / 12);\n\nconst getFinmaMonthlyCost = (propertyValue, fortune, wantedLoan) => {\n  const maintenanceMonthly = getSimpleYearlyMaintenance(propertyValue, MAINTENANCE_FINMA) / 12;\n  const loanValue = wantedLoan || getLoanValue(propertyValue, fortune);\n  const interestsMonthly = getSimpleYearlyInterests(loanValue, INTERESTS_FINMA) / 12;\n  const amortizationMonthly = getYearlyAmortization({\n    propertyValue,\n    loanValue\n  }) / 12;\n  return {\n    maintenanceMonthly,\n    interestsMonthly,\n    amortizationMonthly,\n    totalMonthly: maintenanceMonthly + interestsMonthly + amortizationMonthly\n  };\n};\n\nconst validateIncomeRatio = incomeRatio => {\n  // add 0.01% to avoid rounding issues\n  const safeIncomeRatio = incomeRatio - 0.0001;\n\n  if (safeIncomeRatio <= MAX_INCOME_RATIO) {\n    return {\n      status: SUCCESS,\n      error: undefined\n    };\n  }\n\n  if (safeIncomeRatio <= MAX_INCOME_RATIO_TIGHT) {\n    return {\n      status: WARNING,\n      error: INCOME_WARNING_TIGHT\n    };\n  }\n\n  return {\n    status: ERROR,\n    error: INCOME_ERROR\n  };\n};\n\nconst validateBorrowRatio = function (borrowRatio) {\n  let isPrimary = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  let allowInsurance = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  const maxRatio = isPrimary ? MAX_BORROW_RATIO_PRIMARY_PROPERTY : MAX_BORROW_RATIO_OTHER;\n\n  if (borrowRatio <= maxRatio) {\n    return {\n      status: SUCCESS,\n      error: undefined\n    };\n  }\n\n  if (allowInsurance && borrowRatio <= MAX_BORROW_RATIO_WITH_PLEDGE) {\n    return {\n      status: WARNING,\n      error: FORTUNE_WARNING_TIGHT\n    };\n  }\n\n  return {\n    status: ERROR,\n    error: FORTUNE_ERROR\n  };\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"AutoForm\":{\"ValidIcon\":{\"ValidIcon.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm/ValidIcon/ValidIcon.jsx                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet classnames;\nmodule.link(\"classnames\", {\n  default(v) {\n    classnames = v;\n  }\n\n}, 2);\nlet Icon;\nmodule.link(\"../../Icon\", {\n  default(v) {\n    Icon = v;\n  }\n\n}, 3);\nlet colors;\nmodule.link(\"../../../config/colors\", {\n  default(v) {\n    colors = v;\n  }\n\n}, 4);\nlet ValidIconContainer, STATUS;\nmodule.link(\"./ValidIconContainer\", {\n  default(v) {\n    ValidIconContainer = v;\n  },\n\n  STATUS(v) {\n    STATUS = v;\n  }\n\n}, 5);\n\nconst ValidIcon = (_ref) => {\n  let {\n    status,\n    style,\n    fade,\n    hide\n  } = _ref;\n\n  if (hide) {\n    return null;\n  }\n\n  switch (status) {\n    case STATUS.HIDE:\n      return null;\n\n    case STATUS.ERROR:\n      return React.createElement(Icon, {\n        style: (0, _objectSpread2.default)({}, style, {\n          color: colors.error\n        }),\n        icon: \"close\",\n        size: 50\n      });\n\n    case STATUS.VALID:\n      return React.createElement(\"span\", {\n        style: style,\n        className: classnames('saving-icon', {\n          'animated zoomOut': !!fade\n        })\n      }, React.createElement(\"svg\", {\n        className: \"checkmark\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        viewBox: \"0 0 52 52\"\n      }, React.createElement(\"circle\", {\n        className: \"checkmark__circle\",\n        cx: \"26\",\n        cy: \"26\",\n        r: \"25\",\n        fill: \"none\"\n      }), React.createElement(\"path\", {\n        className: \"checkmark__check\",\n        fill: \"none\",\n        d: \"M14.1 27.2l7.1 7.2 16.7-16.8\"\n      })));\n\n    case STATUS.TODO:\n      return React.createElement(\"span\", {\n        className: \"todo-circle\",\n        style: style\n      }, React.createElement(\"span\", {\n        className: \"inside\"\n      }));\n\n    default:\n      return null;\n  }\n};\n\nValidIcon.propTypes = {\n  hide: PropTypes.bool,\n  style: PropTypes.objectOf(PropTypes.any)\n};\nValidIcon.defaultProps = {\n  style: {},\n  hide: false\n};\nmodule.exportDefault(ValidIconContainer(ValidIcon));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"ValidIconContainer.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm/ValidIcon/ValidIconContainer.jsx                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nmodule.export({\n  STATUS: () => STATUS\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nconst STATUS = {\n  ERROR: 'ERROR',\n  VALID: 'VALID',\n  HIDE: 'HIDE',\n  TODO: 'TODO'\n};\nconst SAVING_ANIMATION_DURATION_MS = 900;\nmodule.exportDefault(WrappedComponent => {\n  var _temp;\n\n  return _temp = class extends Component {\n    constructor(props) {\n      super(props);\n\n      _defineProperty(this, \"getStatus\", () => {\n        const {\n          error,\n          required,\n          value,\n          todo\n        } = this.props;\n\n        if (error) {\n          return STATUS.ERROR;\n        }\n\n        if (todo || required === true && [undefined, '', null].includes(value)) {\n          return STATUS.TODO;\n        }\n\n        return STATUS.VALID;\n      });\n\n      this.state = {\n        status: this.getStatus()\n      };\n      this.timer = null;\n    }\n\n    componentWillReceiveProps(_ref) {\n      let {\n        saving: nextSaving\n      } = _ref;\n\n      // If the animation is going on, don't trigger this again\n      if (this.timer) {\n        return;\n      }\n\n      const {\n        saving\n      } = this.props;\n\n      if (saving === false && nextSaving === true) {\n        // If saving is happening, hide the icon, and then make it reappear\n        this.setState({\n          status: STATUS.HIDE\n        }, () => {\n          this.timer = Meteor.setTimeout(() => {\n            Meteor.clearTimeout(this.timer);\n            this.timer = null;\n          }, SAVING_ANIMATION_DURATION_MS);\n          this.setState({\n            status: this.getStatus()\n          });\n        });\n      }\n    }\n\n    render() {\n      const {\n        status\n      } = this.state;\n      return React.createElement(WrappedComponent, (0, _extends2.default)({}, this.props, {\n        status: status\n      }));\n    }\n\n  }, _temp;\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm/ValidIcon/index.js                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./ValidIcon.jsx\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"AutoFormTextInput.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm/AutoFormTextInput.jsx                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 2);\nlet moment;\nmodule.link(\"moment\", {\n  default(v) {\n    moment = v;\n  }\n\n}, 3);\nlet constants;\nmodule.link(\"../../config/constants\", {\n  \"*\"(v) {\n    constants = v;\n  }\n\n}, 4);\nlet colors;\nmodule.link(\"../../config/colors\", {\n  default(v) {\n    colors = v;\n  }\n\n}, 5);\nlet toNumber, toDecimalNumber;\nmodule.link(\"../../utils/conversionFunctions\", {\n  toNumber(v) {\n    toNumber = v;\n  },\n\n  toDecimalNumber(v) {\n    toDecimalNumber = v;\n  }\n\n}, 6);\nlet MyTextInput;\nmodule.link(\"../TextInput\", {\n  default(v) {\n    MyTextInput = v;\n  }\n\n}, 7);\nlet ValidIcon;\nmodule.link(\"./ValidIcon\", {\n  default(v) {\n    ValidIcon = v;\n  }\n\n}, 8);\nlet FormValidator;\nmodule.link(\"./FormValidator\", {\n  default(v) {\n    FormValidator = v;\n  }\n\n}, 9);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nconst styles = {\n  div: {\n    position: 'relative'\n  },\n  infoIcon: {\n    position: 'absolute',\n    bottom: 5,\n    left: -40,\n    padding: 10\n  },\n  infoStyle: {\n    color: colors.primary,\n    borderColor: colors.primary\n  }\n};\n\nconst cleanValue = v => v === 0 ? 0 : v || '';\n\nconst isEqual = (value, currentValue, type) => {\n  if (type === 'date') {\n    // To avoid the saving icon from firing twice when chaning the date,\n    // only compare the date without times\n    // If we ever have date inputs in autoform that need time, we'll have to find another hack\n    return moment(value).isSame(currentValue, 'day');\n  }\n\n  return value === cleanValue(currentValue);\n};\n\nclass AutoFormTextInput extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleBlur\", () => {\n      this.setState({\n        showInfo: false\n      }); // If the value has changed, save it\n      // state is initialized as '', but currentValue is initially undefined, so check that too\n\n      this.saveValue(true);\n    });\n\n    _defineProperty(this, \"handleChange\", (_, value) => {\n      const {\n        saveOnChange,\n        showValidIconOnChange,\n        inputProps: {\n          currentValue,\n          inputType\n        }\n      } = this.props; // Make sure value is a number if this is a number or money input\n      // const safeValue =\n      //   this.props.number || this.props.money\n      //     ? toNumber(event.target.value)\n      //     : event.target.value;\n\n      if (isEqual(value, currentValue, inputType)) {\n        return;\n      }\n\n      this.setState((_ref) => {\n        let {\n          history\n        } = _ref;\n        return {\n          value,\n          history: [...history, value]\n        };\n      }, () => {\n        // do not show saving icon when changing text, only show it on blur\n        if (saveOnChange) {\n          this.saveValue(showValidIconOnChange);\n        }\n      });\n    });\n\n    _defineProperty(this, \"handleFocus\", () => {\n      this.setState({\n        showInfo: true\n      });\n    });\n\n    _defineProperty(this, \"saveValue\", showSaving => {\n      const {\n        updateFunc,\n        docId,\n        inputProps: {\n          id,\n          currentValue,\n          inputType\n        }\n      } = this.props;\n      const {\n        value\n      } = this.state; // Save data to DB\n\n      const object = {\n        [id]: value\n      };\n      let shouldSave = true; // Don't save if value hasn't changed\n\n      if (isEqual(value, currentValue, inputType)) {\n        shouldSave = false;\n      }\n\n      Meteor.clearTimeout(this.timeout);\n      this.timeout = Meteor.setTimeout(() => {\n        Promise.resolve().then(() => shouldSave && updateFunc({\n          object,\n          id: docId\n        })) // on success, set saving briefly to true, before setting it to false again to trigger icon\n        .then(() => this.setState({\n          errorText: '',\n          saving: showSaving\n        })) // If there was an error, reset value to the backend value\n        .catch(() => this.setState({\n          value: currentValue\n        })).finally(() => this.setState({\n          saving: false\n        }));\n      }, constants.AUTOSAVE_DEBOUNCE);\n    });\n\n    const {\n      currentValue: _currentValue,\n      number,\n      decimal\n    } = props.inputProps;\n    this.state = {\n      // Make sure 0 values are displayed properly\n      value: cleanValue(_currentValue),\n      errorText: '',\n      saving: false,\n      showInfo: false,\n      history: [cleanValue(_currentValue)]\n    };\n\n    if (number) {\n      if (decimal) {\n        this.formatter = toDecimalNumber;\n      } else {\n        this.formatter = toNumber;\n      }\n    } else {\n      this.formatter = v => v;\n    }\n  }\n\n  componentWillUnmount() {\n    Meteor.clearTimeout(this.timeout);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const valueIsDifferent = nextProps.inputProps.currentValue !== this.props.inputProps.currentValue;\n\n    if (valueIsDifferent) {\n      // To handle race conditions, check if the new value from the DB\n      // has been typed in the past\n      // If it has, then don't update the textfield\n      // If it hasn't, override it, because the backend says it should be a new value\n      const valueExistsInHistory = this.state.history.includes(nextProps.inputProps.currentValue);\n\n      if (!valueExistsInHistory) {\n        this.handleChange(null, nextProps.inputProps.currentValue);\n      }\n    }\n  }\n\n  render() {\n    const _this$props = this.props,\n          {\n      inputProps: {\n        style,\n        label,\n        placeholder,\n        number,\n        id,\n        multiline,\n        rows,\n        info,\n        disabled,\n        money,\n        required,\n        date,\n        percent,\n        onFocusChange,\n        focused,\n        todo,\n        // Destructure these props to avoid warnings\n        inputRef,\n        currentValue,\n        condition,\n        decimal,\n        intlId,\n        saveOnChange\n      },\n      noValidator,\n      savingIconStyle,\n      admin,\n      inputLabelProps\n    } = _this$props,\n          otherProps = (0, _objectWithoutProperties2.default)(_this$props.inputProps, [\"style\", \"label\", \"placeholder\", \"number\", \"id\", \"multiline\", \"rows\", \"info\", \"disabled\", \"money\", \"required\", \"date\", \"percent\", \"onFocusChange\", \"focused\", \"todo\", \"inputRef\", \"currentValue\", \"condition\", \"decimal\", \"intlId\", \"saveOnChange\"]);\n    const {\n      value,\n      errorText,\n      saving,\n      showInfo\n    } = this.state;\n    let type;\n\n    if (money) {\n      type = 'money';\n    } else if (number) {\n      type = 'number';\n    } else if (date) {\n      type = 'date';\n    } else if (percent) {\n      type = 'percent';\n    } else {\n      type = 'text';\n    }\n\n    return React.createElement(\"div\", {\n      className: \"form-input__row\",\n      style: (0, _objectSpread2.default)({}, styles.div, style)\n    }, React.createElement(MyTextInput, (0, _extends2.default)({}, otherProps, {\n      InputProps: {\n        onFocusChange,\n        focused\n      },\n      label: label,\n      placeholder: placeholder,\n      value: value,\n      onChange: this.handleChange,\n      onBlur: this.handleBlur,\n      onFocus: this.handleFocus,\n      type: type,\n      id: id,\n      multiline: multiline,\n      rows: rows,\n      info: errorText || showInfo && info,\n      error: !!errorText,\n      disabled: disabled,\n      style: (0, _objectSpread2.default)({\n        width: '100%'\n      }, style, {\n        marginBottom: 16\n      }),\n      noValidate: true,\n      fullWidth: true,\n      inputLabelProps: inputLabelProps\n    })), React.createElement(ValidIcon, {\n      saving: saving,\n      error: !!errorText,\n      style: (0, _objectSpread2.default)({}, styles.savingIcon, savingIconStyle),\n      value: value,\n      required: required,\n      hide: admin,\n      todo: todo\n    }), !noValidator && React.createElement(FormValidator, this.props));\n  }\n\n}\n\nAutoFormTextInput.propTypes = {\n  autocomplete: PropTypes.string,\n  currentValue: PropTypes.any,\n  decimal: PropTypes.bool,\n  docId: PropTypes.string.isRequired,\n  floatingLabelFixed: PropTypes.bool,\n  info: PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.array]),\n  inputProps: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    label: PropTypes.node.isRequired,\n    placeholder: PropTypes.node.isRequired,\n    style: PropTypes.objectOf(PropTypes.any),\n    multiline: PropTypes.bool,\n    disabled: PropTypes.bool\n  }).isRequired,\n  inputStyle: PropTypes.objectOf(PropTypes.any),\n  money: PropTypes.bool,\n  noValidator: PropTypes.bool,\n  number: PropTypes.bool,\n  rows: PropTypes.number,\n  saveOnChange: PropTypes.bool,\n  savingIconStyle: PropTypes.object,\n  showValidIconOnChange: PropTypes.bool,\n  updateFunc: PropTypes.func\n};\nAutoFormTextInput.defaultProps = {\n  autocomplete: '',\n  currentValue: '',\n  decimal: false,\n  floatingLabelFixed: true,\n  info: '',\n  inputStyle: undefined,\n  money: false,\n  noValidator: false,\n  number: false,\n  rows: 1,\n  saveOnChange: true,\n  savingIconStyle: {},\n  showValidIconOnChange: false\n};\nmodule.exportDefault(AutoFormTextInput);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FormValidator.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/AutoForm/FormValidator.jsx                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet get;\nmodule.link(\"lodash/get\", {\n  default(v) {\n    get = v;\n  }\n\n}, 2);\nlet Checkbox;\nmodule.link(\"../Checkbox\", {\n  default(v) {\n    Checkbox = v;\n  }\n\n}, 3);\n\nconst handleCheck = (_ref, isInputChecked) => {\n  let {\n    updateFunc,\n    docId,\n    inputProps: {\n      id\n    }\n  } = _ref;\n  const object = {\n    [\"adminValidation.\".concat(id)]: isInputChecked\n  };\n  updateFunc({\n    object,\n    id: docId\n  });\n};\n\nconst styles = {\n  div: {\n    position: 'absolute',\n    top: '0px',\n    right: '0px'\n  },\n  wrapper: {\n    position: 'relative',\n    right: '-100%'\n  }\n};\n\nconst FormValidator = props => {\n  let id;\n  const {\n    admin,\n    doc,\n    inputProps\n  } = props;\n\n  if (!admin) {\n    return null;\n  }\n\n  if (!inputProps) {\n    id = props.id;\n  } else {\n    id = inputProps.id;\n  }\n\n  const checked = !!get(doc.adminValidation, id);\n  return React.createElement(\"div\", {\n    style: styles.div\n  }, React.createElement(\"div\", {\n    style: styles.wrapper\n  }, React.createElement(Checkbox, {\n    label: checked ? 'Validé' : 'Valider',\n    value: checked,\n    onChange: (e, c) => handleCheck(props, c)\n  })));\n};\n\nFormValidator.propTypes = {\n  admin: PropTypes.bool,\n  doc: PropTypes.objectOf(PropTypes.any).isRequired\n};\nFormValidator.defaultProps = {\n  admin: false\n};\nmodule.exportDefault(FormValidator);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Button\":{\"test\":{\"Button.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Button/test/Button.spec.js                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet shallow;\nmodule.link(\"../../../utils/testHelpers/enzyme\", {\n  shallow(v) {\n    shallow = v;\n  }\n\n}, 1);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 2);\nlet Button;\nmodule.link(\"./..\", {\n  default(v) {\n    Button = v;\n  }\n\n}, 3);\ndescribe('Button', () => {\n  // Label removes testing warnings\n  const wrapper = props => shallow(React.createElement(Button, (0, _extends2.default)({\n    label: \"test\"\n  }, props)));\n\n  it('renders', () => {\n    expect(wrapper().exists()).to.equal(true);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Button.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Button/Button.jsx                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet omit;\nmodule.link(\"lodash/omit\", {\n  default(v) {\n    omit = v;\n  }\n\n}, 2);\nlet MuiButton;\nmodule.link(\"@material-ui/core/Button\", {\n  default(v) {\n    MuiButton = v;\n  }\n\n}, 3);\nlet withStyles;\nmodule.link(\"@material-ui/core/styles\", {\n  withStyles(v) {\n    withStyles = v;\n  }\n\n}, 4);\nlet fade;\nmodule.link(\"@material-ui/core/styles/colorManipulator\", {\n  fade(v) {\n    fade = v;\n  }\n\n}, 5);\nlet Tooltip;\nmodule.link(\"@material-ui/core/Tooltip\", {\n  default(v) {\n    Tooltip = v;\n  }\n\n}, 6);\nlet Fab;\nmodule.link(\"@material-ui/core/Fab\", {\n  default(v) {\n    Fab = v;\n  }\n\n}, 7);\nlet mapProps, compose;\nmodule.link(\"recompose\", {\n  mapProps(v) {\n    mapProps = v;\n  },\n\n  compose(v) {\n    compose = v;\n  }\n\n}, 8);\nlet cx;\nmodule.link(\"classnames\", {\n  default(v) {\n    cx = v;\n  }\n\n}, 9);\nlet Icon;\nmodule.link(\"../Icon\", {\n  default(v) {\n    Icon = v;\n  }\n\n}, 10);\nlet Link;\nmodule.link(\"../Link\", {\n  default(v) {\n    Link = v;\n  }\n\n}, 11);\n\nconst styles = theme => ({\n  root: {\n    color: theme.palette.error.main,\n    borderColor: theme.palette.error.main,\n    '&$raised': {\n      color: theme.palette.error.contrastText,\n      backgroundColor: theme.palette.error.main\n    },\n    '&:hover': {\n      backgroundColor: fade(theme.palette.text.primary, theme.palette.action.hoverOpacity)\n    }\n  },\n  raised: {}\n});\n\nconst getColor = (_ref) => {\n  let {\n    primary,\n    secondary,\n    color,\n    error\n  } = _ref;\n\n  if (primary) {\n    return 'primary';\n  }\n\n  if (secondary) {\n    return 'secondary';\n  }\n\n  if (error) {\n    return 'error';\n  }\n\n  return color;\n};\n\nconst getVariant = (_ref2) => {\n  let {\n    raised,\n    outlined\n  } = _ref2;\n\n  if (raised) {\n    return 'contained';\n  }\n\n  if (outlined) {\n    return 'outlined';\n  }\n\n  return undefined;\n};\n\nconst getContent = (_ref3) => {\n  let {\n    icon,\n    fab,\n    label,\n    children,\n    iconAfter\n  } = _ref3;\n\n  if (iconAfter) {\n    return React.createElement(React.Fragment, null, label || children, icon && !fab && React.createElement(\"span\", {\n      style: {\n        height: '100%',\n        width: 8\n      }\n    }), icon);\n  }\n\n  return React.createElement(React.Fragment, null, icon, icon && !fab && React.createElement(\"span\", {\n    style: {\n      height: '100%',\n      width: 8\n    }\n  }), label || children);\n};\n\nconst Button = props => {\n  const childProps = omit(props, ['iconAfter', 'primary', 'secondary', 'label', 'icon', 'link', 'raised', 'outlined', 'error', 'classes']);\n  const variant = props.variant || getVariant(props);\n  const color = props.color || getColor(props);\n  const Comp = props.fab ? Fab : MuiButton;\n  const button = React.createElement(Comp, (0, _extends2.default)({}, childProps, {\n    color: color,\n    variant: variant,\n    component: props.component || (props.link ? Link : 'button'),\n    to: props.to || undefined,\n    className: cx(props.className, {\n      [props.classes.root]: color === 'error',\n      [props.classes.raised]: !!(color === 'error' && variant === 'raised')\n    })\n  }), getContent(props));\n\n  if (props.tooltip) {\n    if (props.disabled) {\n      // When the button is disabled, it does not trigger pointer-events,\n      // so a tooltip will not appear\n      // Careful with styling here, as the additional span might break layouts\n      return React.createElement(Tooltip, {\n        title: props.tooltip\n      }, React.createElement(\"span\", null, button));\n    }\n\n    return React.createElement(Tooltip, {\n      title: props.tooltip\n    }, button);\n  }\n\n  return button;\n};\n\nButton.propTypes = {\n  children: PropTypes.node,\n  icon: PropTypes.node,\n  label: PropTypes.node,\n  link: PropTypes.bool,\n  raised: PropTypes.bool\n};\nButton.defaultProps = {\n  raised: false,\n  link: false\n};\nconst withLoadingProp = mapProps((_ref4) => {\n  let {\n    loading\n  } = _ref4,\n      props = (0, _objectWithoutProperties2.default)(_ref4, [\"loading\"]);\n  return loading ? (0, _objectSpread2.default)({}, props, {\n    disabled: true,\n    icon: React.createElement(Icon, {\n      type: \"loop-spin\"\n    }),\n    children: props.fab ? null : props.children\n  }) : props;\n});\nmodule.exportDefault(compose(withLoadingProp, withStyles(styles))(Button));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Button/index.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./Button\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"IconLink\":{\"CollectionIconLinkPopup\":{\"CollectionIconLinkPopup.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/IconLink/CollectionIconLinkPopup/CollectionIconLinkPopup.jsx                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => CollectionIconLinkPopup\n});\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 0);\nlet Loading;\nmodule.link(\"../../Loading\", {\n  default(v) {\n    Loading = v;\n  }\n\n}, 1);\nlet StickyPopover;\nmodule.link(\"../../StickyPopover\", {\n  default(v) {\n    StickyPopover = v;\n  }\n\n}, 2);\nlet queries;\nmodule.link(\"./queries\", {\n  default(v) {\n    queries = v;\n  }\n\n}, 3);\nlet titles, components;\nmodule.link(\"./CollectionIconLinkPopupComponents\", {\n  titles(v) {\n    titles = v;\n  },\n\n  components(v) {\n    components = v;\n  }\n\n}, 4);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nclass CollectionIconLinkPopup extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"loadData\", () => {\n      const {\n        collection,\n        _id\n      } = this.props;\n      const query = queries[collection];\n      query(_id, (err, data) => this.setState({\n        data\n      }));\n    });\n\n    _defineProperty(this, \"getPopoverContent\", () => {\n      const {\n        data\n      } = this.state;\n      const {\n        collection,\n        additionalPopoverContent\n      } = this.props;\n\n      if (!data) {\n        return React.createElement(Loading, {\n          small: true\n        });\n      }\n\n      const CollectionComponent = components[collection];\n      return React.createElement(CollectionComponent, data, additionalPopoverContent);\n    });\n\n    _defineProperty(this, \"getPopoverTitle\", () => {\n      const {\n        data\n      } = this.state;\n      const {\n        collection\n      } = this.props;\n\n      if (!data) {\n        return null;\n      }\n\n      const CollectionTitle = titles[collection];\n      return React.createElement(CollectionTitle, data);\n    });\n\n    this.state = {\n      data: null\n    };\n  }\n\n  render() {\n    const {\n      children,\n      forceOpen\n    } = this.props;\n    const {\n      data\n    } = this.state;\n    return React.createElement(StickyPopover, {\n      component: this.getPopoverContent(),\n      title: this.getPopoverTitle(),\n      onMouseEnter: !data ? this.loadData : null,\n      delay: data ? 0 : 200,\n      forceOpen: forceOpen\n    }, children);\n  }\n\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"CollectionIconLinkPopupComponents.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/IconLink/CollectionIconLinkPopup/CollectionIconLinkPopupComponents.jsx                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  titles: () => titles,\n  components: () => components\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet FontAwesomeIcon;\nmodule.link(\"@fortawesome/react-fontawesome\", {\n  FontAwesomeIcon(v) {\n    FontAwesomeIcon = v;\n  }\n\n}, 1);\nlet faCheckCircle;\nmodule.link(\"@fortawesome/pro-light-svg-icons/faCheckCircle\", {\n  faCheckCircle(v) {\n    faCheckCircle = v;\n  }\n\n}, 2);\nlet faExclamationCircle;\nmodule.link(\"@fortawesome/pro-light-svg-icons/faExclamationCircle\", {\n  faExclamationCircle(v) {\n    faExclamationCircle = v;\n  }\n\n}, 3);\nlet Tooltip;\nmodule.link(\"@material-ui/core/Tooltip\", {\n  default(v) {\n    Tooltip = v;\n  }\n\n}, 4);\nlet colors;\nmodule.link(\"../../../config/colors\", {\n  default(v) {\n    colors = v;\n  }\n\n}, 5);\nlet LOANS_COLLECTION, USERS_COLLECTION, BORROWERS_COLLECTION, PROPERTIES_COLLECTION, OFFERS_COLLECTION, PROMOTIONS_COLLECTION, ORGANISATIONS_COLLECTION, CONTACTS_COLLECTION;\nmodule.link(\"../../../api/constants\", {\n  LOANS_COLLECTION(v) {\n    LOANS_COLLECTION = v;\n  },\n\n  USERS_COLLECTION(v) {\n    USERS_COLLECTION = v;\n  },\n\n  BORROWERS_COLLECTION(v) {\n    BORROWERS_COLLECTION = v;\n  },\n\n  PROPERTIES_COLLECTION(v) {\n    PROPERTIES_COLLECTION = v;\n  },\n\n  OFFERS_COLLECTION(v) {\n    OFFERS_COLLECTION = v;\n  },\n\n  PROMOTIONS_COLLECTION(v) {\n    PROMOTIONS_COLLECTION = v;\n  },\n\n  ORGANISATIONS_COLLECTION(v) {\n    ORGANISATIONS_COLLECTION = v;\n  },\n\n  CONTACTS_COLLECTION(v) {\n    CONTACTS_COLLECTION = v;\n  }\n\n}, 6);\nlet StatusLabel;\nmodule.link(\"../../StatusLabel\", {\n  default(v) {\n    StatusLabel = v;\n  }\n\n}, 7);\nlet Roles;\nmodule.link(\"../../Roles\", {\n  default(v) {\n    Roles = v;\n  }\n\n}, 8);\nlet T, Money, IntlDate;\nmodule.link(\"../../Translation\", {\n  default(v) {\n    T = v;\n  },\n\n  Money(v) {\n    Money = v;\n  },\n\n  IntlDate(v) {\n    IntlDate = v;\n  }\n\n}, 9);\nconst titles = {\n  [LOANS_COLLECTION]: (_ref) => {\n    let {\n      name,\n      status\n    } = _ref;\n    return React.createElement(\"span\", null, name, ' ', React.createElement(StatusLabel, {\n      status: status,\n      collection: LOANS_COLLECTION\n    }));\n  },\n  [USERS_COLLECTION]: (_ref2) => {\n    let {\n      name,\n      roles\n    } = _ref2;\n    return React.createElement(\"span\", null, name, ' ', React.createElement(Roles, {\n      className: \"secondary\",\n      roles: roles\n    }));\n  },\n  [BORROWERS_COLLECTION]: (_ref3) => {\n    let {\n      name\n    } = _ref3;\n    return React.createElement(\"span\", null, name);\n  },\n  [PROPERTIES_COLLECTION]: (_ref4) => {\n    let {\n      address1,\n      name,\n      status\n    } = _ref4;\n    return React.createElement(\"span\", null, name || address1, ' ', status && React.createElement(StatusLabel, {\n      status: status,\n      collection: PROPERTIES_COLLECTION\n    }));\n  },\n  [OFFERS_COLLECTION]: (_ref5) => {\n    let {\n      lender: {\n        loan: {\n          name\n        },\n        organisation: {\n          name: orgName,\n          logo\n        }\n      }\n    } = _ref5;\n    return React.createElement(\"span\", null, orgName, ' ', \"pour\", name);\n  },\n  [PROMOTIONS_COLLECTION]: (_ref6) => {\n    let {\n      name,\n      status\n    } = _ref6;\n    return React.createElement(\"span\", null, name, ' ', React.createElement(StatusLabel, {\n      status: status,\n      collection: PROMOTIONS_COLLECTION\n    }));\n  },\n  [ORGANISATIONS_COLLECTION]: (_ref7) => {\n    let {\n      name,\n      type\n    } = _ref7;\n    return React.createElement(\"span\", null, name, ' ', React.createElement(\"span\", {\n      className: \"secondary\"\n    }, React.createElement(T, {\n      id: \"Forms.type.\".concat(type)\n    })));\n  },\n  [CONTACTS_COLLECTION]: (_ref8) => {\n    let {\n      name,\n      organisations = []\n    } = _ref8;\n    return React.createElement(\"span\", null, name, ' ', React.createElement(\"span\", {\n      className: \"secondary\"\n    }, organisations.length > 0 && organisations[0].name));\n  }\n};\nconst components = {\n  [LOANS_COLLECTION]: (_ref9) => {\n    let {\n      user,\n      structures = [],\n      selectedStructure,\n      anonymous,\n      children,\n      borrowers = []\n    } = _ref9;\n    const structure = structures.find((_ref10) => {\n      let {\n        id\n      } = _ref10;\n      return id === selectedStructure;\n    });\n    return React.createElement(\"div\", null, children, borrowers.length > 0 && React.createElement(\"div\", null, React.createElement(\"b\", null, \"Emprunteurs\"), React.createElement(\"ul\", {\n      style: {\n        margin: 0\n      }\n    }, borrowers.map((_ref11, index) => {\n      let {\n        _id,\n        name\n      } = _ref11;\n      return React.createElement(\"li\", {\n        key: _id\n      }, name || \"Emprunteur \".concat(index + 1));\n    }))), React.createElement(\"div\", null, React.createElement(\"b\", null, \"Hypoth\\xE8que:\"), ' ', structure ? React.createElement(Money, {\n      value: structure.wantedLoan\n    }) : '-'), anonymous && React.createElement(\"div\", null, \"Anonyme\"), user && React.createElement(\"div\", null, React.createElement(\"b\", null, \"Utilisateur:\"), ' ', user.name), React.createElement(\"div\", null, React.createElement(\"b\", null, \"Conseiller:\"), ' ', React.createElement(\"span\", null, user && user.assignedEmployee ? user.assignedEmployee.name : '-')));\n  },\n  [USERS_COLLECTION]: (_ref12) => {\n    let {\n      email,\n      phoneNumber,\n      assignedEmployee,\n      children,\n      referredByUser = {},\n      referredByOrganisation = {},\n      emails = []\n    } = _ref12;\n    const emailVerified = !!emails.length && emails[0].verified;\n    return React.createElement(\"div\", null, children, React.createElement(\"div\", null, React.createElement(\"a\", {\n      className: \"color\",\n      href: \"mailto:\".concat(email),\n      target: \"_blank\",\n      rel: \"noopener noreferrer\"\n    }, email), React.createElement(Tooltip, {\n      title: emailVerified ? \"Cette adresse email a été vérifiée, le client s'est connecté avec.\" : \"Cette adresse email n'a pas été vérifiée, le client ne s'est pas connecté avec.\"\n    }, React.createElement(FontAwesomeIcon, {\n      icon: emailVerified ? faCheckCircle : faExclamationCircle,\n      style: {\n        marginLeft: '4px',\n        color: emailVerified ? colors.success : colors.warning\n      }\n    }))), React.createElement(\"div\", null, React.createElement(\"a\", {\n      className: \"color\",\n      href: \"tel:\".concat(phoneNumber)\n    }, phoneNumber)), React.createElement(\"div\", null, React.createElement(\"b\", null, \"Conseiller:\"), ' ', React.createElement(\"span\", null, assignedEmployee ? assignedEmployee.name : '-')), (referredByUser.name || referredByOrganisation.name) && React.createElement(\"div\", null, React.createElement(\"b\", null, \"R\\xE9f\\xE9r\\xE9 par:\"), ' ', React.createElement(\"span\", null, [referredByUser.name, referredByOrganisation.name].filter(x => x).join(' - '))));\n  },\n  [BORROWERS_COLLECTION]: (_ref13) => {\n    let {\n      user,\n      loans = [],\n      children\n    } = _ref13;\n    return React.createElement(\"div\", null, children, user && React.createElement(\"div\", null, user.name), React.createElement(\"div\", null, React.createElement(\"b\", null, \"Conseiller:\"), ' ', user && user.assignedEmployee ? user.assignedEmployee.name : '-'), React.createElement(\"div\", null, React.createElement(\"b\", null, \"Dossiers:\"), loans.map((_ref14) => {\n      let {\n        name\n      } = _ref14;\n      return name;\n    }).join(', ')));\n  },\n  [PROPERTIES_COLLECTION]: (_ref15) => {\n    let {\n      totalValue,\n      children\n    } = _ref15;\n    return React.createElement(\"div\", null, children, React.createElement(Money, {\n      value: totalValue\n    }));\n  },\n  [OFFERS_COLLECTION]: (_ref16) => {\n    let {\n      maxAmount,\n      feedback,\n      children\n    } = _ref16;\n    return React.createElement(\"div\", null, children, React.createElement(Money, {\n      value: maxAmount\n    }), React.createElement(\"div\", null, React.createElement(\"b\", null, \"Feedback:\"), ' ', feedback && feedback.date ? React.createElement(\"span\", {\n      className: \"success\"\n    }, \"Donn\\xE9\", ' ', React.createElement(IntlDate, {\n      type: \"relative\",\n      value: feedback.date\n    })) : React.createElement(\"span\", null, \"Non\")));\n  },\n  [PROMOTIONS_COLLECTION]: (_ref17) => {\n    let {\n      availablePromotionLots,\n      bookedPromotionLots,\n      soldPromotionLots,\n      lenderOrganisation,\n      children\n    } = _ref17;\n    return React.createElement(\"div\", null, children, lenderOrganisation && React.createElement(\"div\", null, React.createElement(\"b\", null, \"Pr\\xEAteur:\"), ' ', React.createElement(\"b\", null, lenderOrganisation.name)), React.createElement(\"div\", null, React.createElement(\"b\", null, \"Lots dispo:\"), availablePromotionLots.length), React.createElement(\"div\", null, React.createElement(\"b\", null, \"R\\xE9serv\\xE9s:\"), bookedPromotionLots.length), React.createElement(\"div\", null, React.createElement(\"b\", null, \"Vendus:\"), soldPromotionLots.length));\n  },\n  [ORGANISATIONS_COLLECTION]: (_ref18) => {\n    let {\n      logo,\n      offerCount,\n      children\n    } = _ref18;\n    return React.createElement(\"div\", null, children, logo && React.createElement(\"div\", {\n      style: {\n        width: 100,\n        height: 50\n      }\n    }, React.createElement(\"img\", {\n      src: logo,\n      style: {\n        maxWidth: 100,\n        maxHeight: 50\n      }\n    })), offerCount > 0 && React.createElement(\"div\", null, React.createElement(\"b\", null, \"Offres:\"), ' ', offerCount));\n  },\n  [CONTACTS_COLLECTION]: (_ref19) => {\n    let {\n      organisations = [],\n      email,\n      phoneNumber,\n      children\n    } = _ref19;\n    return React.createElement(\"div\", null, children, React.createElement(\"div\", null, organisations.length > 0 && organisations[0].$metadata.title), React.createElement(\"div\", null, React.createElement(\"a\", {\n      className: \"color\",\n      href: \"mailto:\".concat(email),\n      target: \"_blank\",\n      rel: \"noopener noreferrer\"\n    }, email)), React.createElement(\"div\", null, React.createElement(\"a\", {\n      className: \"color\",\n      href: \"tel:\".concat(phoneNumber)\n    }, phoneNumber)));\n  }\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"queries.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/IconLink/CollectionIconLinkPopup/queries.js                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet adminLoans;\nmodule.link(\"../../../api/loans/queries\", {\n  adminLoans(v) {\n    adminLoans = v;\n  }\n\n}, 0);\nlet adminUsers;\nmodule.link(\"../../../api/users/queries\", {\n  adminUsers(v) {\n    adminUsers = v;\n  }\n\n}, 1);\nlet adminBorrowers;\nmodule.link(\"../../../api/borrowers/queries\", {\n  adminBorrowers(v) {\n    adminBorrowers = v;\n  }\n\n}, 2);\nlet adminProperties;\nmodule.link(\"../../../api/properties/queries\", {\n  adminProperties(v) {\n    adminProperties = v;\n  }\n\n}, 3);\nlet adminOffers;\nmodule.link(\"../../../api/offers/queries\", {\n  adminOffers(v) {\n    adminOffers = v;\n  }\n\n}, 4);\nlet proPromotions;\nmodule.link(\"../../../api/promotions/queries\", {\n  proPromotions(v) {\n    proPromotions = v;\n  }\n\n}, 5);\nlet adminOrganisations;\nmodule.link(\"../../../api/organisations/queries\", {\n  adminOrganisations(v) {\n    adminOrganisations = v;\n  }\n\n}, 6);\nlet adminContacts;\nmodule.link(\"../../../api/contacts/queries\", {\n  adminContacts(v) {\n    adminContacts = v;\n  }\n\n}, 7);\nlet LOANS_COLLECTION, USERS_COLLECTION, BORROWERS_COLLECTION, PROPERTIES_COLLECTION, OFFERS_COLLECTION, PROMOTIONS_COLLECTION, ORGANISATIONS_COLLECTION, CONTACTS_COLLECTION;\nmodule.link(\"../../../api/constants\", {\n  LOANS_COLLECTION(v) {\n    LOANS_COLLECTION = v;\n  },\n\n  USERS_COLLECTION(v) {\n    USERS_COLLECTION = v;\n  },\n\n  BORROWERS_COLLECTION(v) {\n    BORROWERS_COLLECTION = v;\n  },\n\n  PROPERTIES_COLLECTION(v) {\n    PROPERTIES_COLLECTION = v;\n  },\n\n  OFFERS_COLLECTION(v) {\n    OFFERS_COLLECTION = v;\n  },\n\n  PROMOTIONS_COLLECTION(v) {\n    PROMOTIONS_COLLECTION = v;\n  },\n\n  ORGANISATIONS_COLLECTION(v) {\n    ORGANISATIONS_COLLECTION = v;\n  },\n\n  CONTACTS_COLLECTION(v) {\n    CONTACTS_COLLECTION = v;\n  }\n\n}, 8);\n\nconst makeQuery = (query, params, cb) => query.clone(params).fetchOne(cb);\n\nmodule.exportDefault({\n  [LOANS_COLLECTION]: (_id, cb) => makeQuery(adminLoans, {\n    _id,\n    $body: {\n      anonymous: true,\n      borrowers: {\n        name: 1\n      },\n      name: 1,\n      selectedStructure: 1,\n      status: 1,\n      structures: {\n        wantedLoan: 1,\n        id: 1\n      },\n      user: {\n        name: 1,\n        assignedEmployee: {\n          name: 1\n        }\n      }\n    }\n  }, cb),\n  [USERS_COLLECTION]: (_id, cb) => makeQuery(adminUsers, {\n    _id,\n    $body: {\n      $filter: 1,\n      assignedEmployee: {\n        name: 1\n      },\n      email: 1,\n      loans: {\n        name: 1\n      },\n      name: 1,\n      phoneNumber: 1,\n      roles: 1,\n      referredByUser: {\n        name: 1\n      },\n      referredByOrganisation: {\n        name: 1\n      },\n      emails: 1\n    }\n  }, cb),\n  [BORROWERS_COLLECTION]: (_id, cb) => makeQuery(adminBorrowers, {\n    _id,\n    $body: {\n      loans: {\n        name: 1\n      },\n      name: 1,\n      user: {\n        name: 1,\n        assignedEmployee: {\n          name: 1\n        }\n      }\n    }\n  }, cb),\n  [PROPERTIES_COLLECTION]: (_id, cb) => makeQuery(adminProperties, {\n    _id,\n    $body: {\n      address1: 1,\n      category: 1,\n      documents: {\n        propertyImages: 1\n      },\n      name: 1,\n      status: 1,\n      totalValue: 1\n    }\n  }, cb),\n  [OFFERS_COLLECTION]: (_id, cb) => makeQuery(adminOffers, {\n    _id,\n    $body: {\n      feedback: 1,\n      lender: {\n        organisation: {\n          name: 1,\n          logo: 1\n        },\n        loan: {\n          name: 1\n        }\n      },\n      maxAmount: 1\n    }\n  }, cb),\n  [PROMOTIONS_COLLECTION]: (_id, cb) => makeQuery(proPromotions, {\n    _id,\n    $body: {\n      availablePromotionLots: 1,\n      bookedPromotionLots: 1,\n      documents: {\n        promotionImage: 1\n      },\n      lenderOrganisation: {\n        name: 1\n      },\n      name: 1,\n      soldPromotionLots: 1,\n      status: 1\n    }\n  }, cb),\n  [ORGANISATIONS_COLLECTION]: (_id, cb) => makeQuery(adminOrganisations, {\n    _id,\n    $body: {\n      name: 1,\n      logo: 1,\n      type: 1,\n      offerCount: 1\n    }\n  }, cb),\n  [CONTACTS_COLLECTION]: (_id, cb) => makeQuery(adminContacts, {\n    _id,\n    $body: {\n      email: 1,\n      name: 1,\n      organisations: {\n        name: 1,\n        logo: 1\n      },\n      phoneNumber: 1\n    }\n  }, cb)\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"CollectionIconLink.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/IconLink/CollectionIconLink.jsx                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet Roles;\nmodule.link(\"meteor/alanning:roles\", {\n  Roles(v) {\n    Roles = v;\n  }\n\n}, 2);\nlet getUserNameAndOrganisation;\nmodule.link(\"../../api/helpers\", {\n  getUserNameAndOrganisation(v) {\n    getUserNameAndOrganisation = v;\n  }\n\n}, 3);\nlet IconLink;\nmodule.link(\"./IconLink\", {\n  default(v) {\n    IconLink = v;\n  }\n\n}, 4);\nlet LOANS_COLLECTION, USERS_COLLECTION, BORROWERS_COLLECTION, PROPERTIES_COLLECTION, OFFERS_COLLECTION, PROMOTIONS_COLLECTION, ORGANISATIONS_COLLECTION, CONTACTS_COLLECTION, ROLES;\nmodule.link(\"../../api/constants\", {\n  LOANS_COLLECTION(v) {\n    LOANS_COLLECTION = v;\n  },\n\n  USERS_COLLECTION(v) {\n    USERS_COLLECTION = v;\n  },\n\n  BORROWERS_COLLECTION(v) {\n    BORROWERS_COLLECTION = v;\n  },\n\n  PROPERTIES_COLLECTION(v) {\n    PROPERTIES_COLLECTION = v;\n  },\n\n  OFFERS_COLLECTION(v) {\n    OFFERS_COLLECTION = v;\n  },\n\n  PROMOTIONS_COLLECTION(v) {\n    PROMOTIONS_COLLECTION = v;\n  },\n\n  ORGANISATIONS_COLLECTION(v) {\n    ORGANISATIONS_COLLECTION = v;\n  },\n\n  CONTACTS_COLLECTION(v) {\n    CONTACTS_COLLECTION = v;\n  },\n\n  ROLES(v) {\n    ROLES = v;\n  }\n\n}, 5);\nlet employeesById;\nmodule.link(\"../../arrays/epotekEmployees\", {\n  employeesById(v) {\n    employeesById = v;\n  }\n\n}, 6);\nlet collectionIcons;\nmodule.link(\"../../arrays/collectionIcons\", {\n  default(v) {\n    collectionIcons = v;\n  }\n\n}, 7);\nlet CollectionIconLinkPopup;\nmodule.link(\"./CollectionIconLinkPopup/CollectionIconLinkPopup\", {\n  default(v) {\n    CollectionIconLinkPopup = v;\n  }\n\n}, 8);\nlet getLoanLinkTitle;\nmodule.link(\"./collectionIconLinkHelpers\", {\n  getLoanLinkTitle(v) {\n    getLoanLinkTitle = v;\n  }\n\n}, 9);\nconst showPopups = Meteor.microservice === 'admin';\n\nconst getIconConfig = function () {\n  let _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      {\n    collection,\n    _id: docId\n  } = _ref,\n      data = (0, _objectWithoutProperties2.default)(_ref, [\"collection\", \"_id\"]);\n\n  let variant = arguments.length > 1 ? arguments[1] : undefined;\n\n  if (!docId) {\n    return {\n      link: '/',\n      icon: 'help',\n      text: \"N'existe plus\"\n    };\n  }\n\n  switch (collection) {\n    case LOANS_COLLECTION:\n      {\n        let text;\n\n        if (variant === 'TASKS_TABLE') {\n          text = getLoanLinkTitle(data);\n        } else {\n          text = data.name;\n        }\n\n        return {\n          link: \"/loans/\".concat(docId),\n          text,\n          hasPopup: true\n        };\n      }\n\n    case USERS_COLLECTION:\n      {\n        let text;\n        const {\n          organisations = [],\n          roles = []\n        } = data;\n\n        if ((roles.includes(ROLES.ADMIN) || roles.includes(ROLES.DEV)) && employeesById[docId]) {\n          text = React.createElement(\"img\", {\n            src: employeesById[docId].src,\n            alt: data.name,\n            style: {\n              borderRadius: '50%',\n              width: 20,\n              height: 20\n            }\n          });\n        } else if (organisations.length) {\n          text = getUserNameAndOrganisation({\n            user: data\n          });\n        } else {\n          text = data.name;\n        }\n\n        return {\n          link: \"/users/\".concat(docId),\n          text,\n          hasPopup: true\n        };\n      }\n\n    case BORROWERS_COLLECTION:\n      return {\n        link: \"/borrowers/\".concat(docId),\n        text: data.name,\n        hasPopup: true\n      };\n\n    case PROPERTIES_COLLECTION:\n      return {\n        link: \"/properties/\".concat(docId),\n        text: data.address1,\n        hasPopup: true\n      };\n\n    case OFFERS_COLLECTION:\n      return {\n        link: \"/offers/\".concat(docId),\n        text: data.organisation.name,\n        hasPopup: true\n      };\n\n    case PROMOTIONS_COLLECTION:\n      return {\n        link: \"/promotions/\".concat(docId),\n        text: data.name,\n        hasPopup: true\n      };\n\n    case ORGANISATIONS_COLLECTION:\n      {\n        let text;\n        const isDev = Roles.userIsInRole(Meteor.userId(), 'dev');\n        const isMain = data.$metadata && data.$metadata.isMain;\n\n        if (data.$metadata && data.$metadata.title) {\n          text = \"\".concat(data.$metadata.title, \" @ \").concat(data.name).concat(isDev && isMain ? ' (main)' : '');\n        } else {\n          text = \"\".concat(data.name).concat(isDev && isMain ? ' (main)' : '');\n        }\n\n        return {\n          link: \"/organisations/\".concat(docId),\n          text,\n          hasPopup: true\n        };\n      }\n\n    case CONTACTS_COLLECTION:\n      return {\n        link: \"/contacts/\".concat(docId),\n        text: data.name,\n        hasPopup: true\n      };\n\n    case 'NOT_FOUND':\n      return {\n        link: '/',\n        icon: 'help',\n        text: \"N'existe plus\"\n      };\n\n    default:\n      return {\n        text: 'Unknown collection'\n      };\n  }\n};\n\nconst CollectionIconLink = (_ref2) => {\n  let {\n    forceOpen,\n    iconClassName,\n    relatedDoc,\n    showIcon,\n    stopPropagation,\n    variant\n  } = _ref2;\n  const {\n    collection,\n    _id: docId\n  } = relatedDoc;\n\n  if (!docId) {\n    return null;\n  }\n\n  const {\n    link,\n    icon = collectionIcons[collection],\n    text,\n    hasPopup\n  } = getIconConfig(relatedDoc, variant);\n\n  if (showPopups && hasPopup) {\n    return React.createElement(CollectionIconLinkPopup, (0, _extends2.default)({}, relatedDoc, {\n      key: relatedDoc._id,\n      forceOpen: forceOpen\n    }), React.createElement(IconLink, {\n      link: link,\n      icon: icon,\n      text: text,\n      className: \"collection-icon\",\n      stopPropagation: stopPropagation,\n      iconClassName: iconClassName,\n      showIcon: showIcon\n    }));\n  }\n\n  return React.createElement(IconLink, {\n    link: link,\n    icon: icon,\n    text: text,\n    stopPropagation: stopPropagation,\n    className: \"collection-icon\",\n    iconClassName: iconClassName,\n    showIcon: showIcon,\n    noIcon: true\n  });\n};\n\nmodule.exportDefault(CollectionIconLink);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"IconLink.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/IconLink/IconLink.jsx                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet cx;\nmodule.link(\"classnames\", {\n  default(v) {\n    cx = v;\n  }\n\n}, 2);\nlet Icon;\nmodule.link(\"../Icon\", {\n  default(v) {\n    Icon = v;\n  }\n\n}, 3);\nlet Link;\nmodule.link(\"../Link\", {\n  default(v) {\n    Link = v;\n  }\n\n}, 4);\nconst IconLink = React.forwardRef((_ref, ref) => {\n  let {\n    link,\n    icon,\n    text,\n    children,\n    className,\n    stopPropagation = true,\n    iconClassName,\n    showIcon\n  } = _ref,\n      rest = (0, _objectWithoutProperties2.default)(_ref, [\"link\", \"icon\", \"text\", \"children\", \"className\", \"stopPropagation\", \"iconClassName\", \"showIcon\"]);\n  return React.createElement(Link, (0, _extends2.default)({\n    to: link,\n    className: cx('icon-link', iconClassName),\n    onClick: e => {\n      if (stopPropagation) {\n        e.stopPropagation();\n      }\n    },\n    innerRef: ref\n  }, rest), showIcon && React.createElement(Icon, {\n    type: icon,\n    className: className || 'icon-link-icon'\n  }), children || (typeof text === 'string' ? React.createElement(\"span\", null, text) : text));\n});\nIconLink.propTypes = {\n  icon: PropTypes.node.isRequired,\n  link: PropTypes.string.isRequired,\n  showIcon: PropTypes.bool,\n  text: PropTypes.node.isRequired\n};\nIconLink.defaultProps = {\n  showIcon: true\n};\nmodule.exportDefault(IconLink);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"collectionIconLinkHelpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/IconLink/collectionIconLinkHelpers.js                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  getLoanLinkTitle: () => getLoanLinkTitle\n});\n\nconst getLoanLinkTitle = (_ref) => {\n  let {\n    name,\n    user = {},\n    borrowers = []\n  } = _ref;\n  const borrowerName = !!borrowers.length && borrowers[0].name;\n  const userName = user.name || [user.firstName, user.lastName].filter(x => x).join(' ');\n  return borrowerName || userName || name;\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/IconLink/index.js                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./IconLink\", {\n  default: \"default\"\n}, 0);\nmodule.link(\"./CollectionIconLink\", {\n  default: \"CollectionIconLink\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Impersonate\":{\"ImpersonatePage\":{\"ImpersonatePage.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Impersonate/ImpersonatePage/ImpersonatePage.jsx                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  impersonate: () => impersonate\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 1);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 2);\nlet impersonateUser;\nmodule.link(\"../../../api/methods\", {\n  impersonateUser(v) {\n    impersonateUser = v;\n  }\n\n}, 3);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nconst impersonate = (_ref) => {\n  let {\n    userId,\n    authToken,\n    history\n  } = _ref;\n  impersonateUser.run({\n    userId,\n    authToken\n  }).then((_ref2) => {\n    let {\n      emails\n    } = _ref2;\n    Meteor.connection.setUserId(userId);\n    module.dynamicImport(\"../../../utils/notification\").then((_ref3) => {\n      let {\n        default: notification\n      } = _ref3;\n      notification.success({\n        message: React.createElement(\"span\", {\n          id: \"impersonation-success-message\"\n        }, \"Yay\"),\n        description: \"Actuellement connect\\xE9 comme \".concat(emails[0].address),\n        duration: 5\n      });\n    });\n\n    if (history) {\n      history.push('/');\n    }\n  }).then(() => {\n    if (Meteor.isDevelopment) {\n      sessionStorage.setItem('dev_impersonate_userId', userId);\n      sessionStorage.setItem('dev_impersonate_authToken', authToken);\n    }\n  });\n};\n\nclass ImpersonatePage extends Component {\n  constructor() {\n    super(...arguments);\n\n    _defineProperty(this, \"componentDidMount\", () => {\n      const {\n        location,\n        history\n      } = this.props;\n      const paramsQuery = new URLSearchParams(location.search);\n      const userId = paramsQuery.get('userId');\n      const authToken = paramsQuery.get('authToken');\n      impersonate({\n        userId,\n        authToken,\n        history\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"section\", {\n      className: \"impersonate-page\"\n    }, \"Impersonating...\");\n  }\n\n}\n\n_defineProperty(ImpersonatePage, \"propTypes\", {\n  history: PropTypes.object.isRequired,\n  location: PropTypes.object.isRequired\n});\n\nmodule.exportDefault(ImpersonatePage);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"InterestRatesTable\":{\"test\":{\"InterestsTableDate.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/InterestRatesTable/test/InterestsTableDate.spec.js                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet getLastFriday;\nmodule.link(\"../InterestsTableDate\", {\n  getLastFriday(v) {\n    getLastFriday = v;\n  }\n\n}, 1);\ndescribe('InterestsTableDate getLastFriday', () => {\n  it('should return a friday', () => {\n    expect(getLastFriday('June 14, 2018 12:00:00 UTC+2').getDay()).to.equal(5);\n    expect(getLastFriday('June 19, 2018 12:00:00 UTC+2').getDay()).to.equal(5);\n    expect(getLastFriday('June 30, 2018 12:00:00 UTC+2').getDay()).to.equal(5);\n    expect(getLastFriday('June 1, 2018 12:00:00 UTC+2').getDay()).to.equal(5);\n  });\n  it('should return the previous friday on a friday', () => {\n    expect(getLastFriday('June 15, 2018 18:00:00 UTC+2').getDate()).to.equal(8);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"interestRates.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/InterestRatesTable/test/interestRates.spec.js                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet INTEREST_RATES;\nmodule.link(\"../../../api/constants\", {\n  INTEREST_RATES(v) {\n    INTEREST_RATES = v;\n  }\n\n}, 1);\nlet interestRates, TRENDS;\nmodule.link(\"../interestRates\", {\n  default(v) {\n    interestRates = v;\n  },\n\n  TRENDS(v) {\n    TRENDS = v;\n  }\n\n}, 2);\ndescribe('interestRates', () => {\n  it('should be an array of objects', () => {\n    interestRates.forEach((rate, index) => expect(typeof rate).to.equal('object', index));\n  });\n  it('each interest rate should have a type from a constant', () => {\n    interestRates.forEach(rate => expect(Object.values(INTEREST_RATES).indexOf(rate.type)).to.be.above(-1, rate.type));\n  });\n  it('each interest rate should have a trend from a constant', () => {\n    interestRates.forEach(rate => expect(Object.values(TRENDS).indexOf(rate.trend)).to.be.above(-1, rate.trend));\n  });\n  it('rateLow and rateHigh should be between 0.5% and 3%', () => {\n    interestRates.forEach(rate => {\n      expect(rate.rateLow).to.be.at.least(0.005);\n      expect(rate.rateHigh).to.be.at.most(0.03);\n    });\n  }); // This does not apply\n\n  it.skip('each rate should be higher than the previous one', () => {\n    interestRates.forEach((rate, index, array) => {\n      if (index > 0) {\n        expect(rate.rateLow).to.be.above(array[index - 1].rateLow);\n        expect(rate.rateHigh).to.be.above(array[index - 1].rateHigh);\n      }\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"InterestsTableDate.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/InterestRatesTable/InterestsTableDate.jsx                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  getLastFriday: () => getLastFriday\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet IntlDate;\nmodule.link(\"../Translation\", {\n  IntlDate(v) {\n    IntlDate = v;\n  }\n\n}, 1);\n\nconst getRandomInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;\n\nconst getLastFriday = testDate => {\n  const prevFriday = testDate ? new Date(testDate) : new Date();\n  prevFriday.setHours(getRandomInt(9, 17));\n  prevFriday.setMinutes(getRandomInt(0, 59));\n  prevFriday.setSeconds(getRandomInt(0, 59));\n\n  if (prevFriday.getDay() === 5) {\n    prevFriday.setDate(prevFriday.getDate() - 7);\n  } else {\n    prevFriday.setDate(prevFriday.getDate() - (prevFriday.getDay() + 2) % 7);\n  }\n\n  return prevFriday;\n};\n\nconst InterestsTableDate = () => React.createElement(\"small\", {\n  className: \"interests-table-date\"\n}, React.createElement(IntlDate, {\n  value: getLastFriday()\n}));\n\nmodule.exportDefault(InterestsTableDate);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"interestRates.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/InterestRatesTable/interestRates.js                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  TRENDS: () => TRENDS,\n  averageRates: () => averageRates\n});\nlet INTEREST_RATES;\nmodule.link(\"../../api/constants\", {\n  INTEREST_RATES(v) {\n    INTEREST_RATES = v;\n  }\n\n}, 0);\nconst TRENDS = {\n  UP: 'UP',\n  DOWN: 'DOWN',\n  FLAT: 'FLAT'\n};\nconst interestRates = [{\n  type: INTEREST_RATES.LIBOR,\n  rateLow: 0.005,\n  rateHigh: 0.01,\n  trend: TRENDS.FLAT\n}, {\n  type: INTEREST_RATES.YEARS_5,\n  rateLow: 0.008,\n  rateHigh: 0.011,\n  trend: TRENDS.DOWN\n}, {\n  type: INTEREST_RATES.YEARS_10,\n  rateLow: 0.0113,\n  rateHigh: 0.015,\n  trend: TRENDS.DOWN\n}, {\n  type: INTEREST_RATES.YEARS_15,\n  rateLow: 0.0155,\n  rateHigh: 0.0195,\n  trend: TRENDS.DOWN\n}, {\n  type: INTEREST_RATES.YEARS_20,\n  rateLow: 0.018,\n  rateHigh: 0.024,\n  trend: TRENDS.FLAT\n}];\nconst averageRates = interestRates.reduce((rates, _ref) => {\n  let {\n    type,\n    rateLow,\n    rateHigh\n  } = _ref;\n  return (0, _objectSpread2.default)({}, rates, {\n    [type]: (rateLow + rateHigh) / 2\n  });\n}, {});\nmodule.exportDefault(interestRates);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"ModalManager\":{\"test\":{\"ModalManager.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/ModalManager/test/ModalManager.spec.jsx                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React, useContext;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  useContext(v) {\n    useContext = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet Dialog;\nmodule.link(\"@material-ui/core/Dialog\", {\n  default(v) {\n    Dialog = v;\n  }\n\n}, 2);\nlet getMountedComponent;\nmodule.link(\"../../../utils/testHelpers/getMountedComponent\", {\n  default(v) {\n    getMountedComponent = v;\n  }\n\n}, 3);\nlet ModalManager;\nmodule.link(\"../ModalManager\", {\n  default(v) {\n    ModalManager = v;\n  }\n\n}, 4);\nlet ModalManagerContext;\nmodule.link(\"../ModalManagerContext\", {\n  default(v) {\n    ModalManagerContext = v;\n  }\n\n}, 5);\n\nconst TestComp = () => {\n  const {\n    openModal\n  } = useContext(ModalManagerContext);\n  return React.createElement(\"div\", null, React.createElement(\"button\", {\n    id: \"btn1\",\n    type: \"button\",\n    onClick: () => openModal({\n      content: React.createElement(\"div\", {\n        className: \"dialog-1-content\"\n      }, \"Hello world\")\n    })\n  }, \"Click me\"), React.createElement(\"button\", {\n    id: \"btn2\",\n    type: \"button\",\n    onClick: () => openModal({\n      content: React.createElement(\"div\", {\n        className: \"dialog-2-content\"\n      }, \"Hello world\")\n    })\n  }, \"Click me\"), React.createElement(\"button\", {\n    id: \"btn3\",\n    type: \"button\",\n    onClick: () => openModal([{\n      content: React.createElement(\"div\", {\n        className: \"dialog-3-content\"\n      }, \"Hello world\")\n    }, {\n      content: React.createElement(\"div\", {\n        className: \"dialog-4-content\"\n      }, \"Hello world\")\n    }, {\n      content: React.createElement(\"div\", {\n        className: \"dialog-5-content\"\n      }, \"Hello world\")\n    }])\n  }, \"Click me\"), React.createElement(\"button\", {\n    id: \"btn4\",\n    type: \"button\",\n    onClick: () => openModal([{\n      content: React.createElement(\"div\", {\n        className: \"dialog-6-content\"\n      }, \"Hello world\"),\n      actions: (_ref) => {\n        let {\n          closeModal\n        } = _ref;\n        return React.createElement(\"button\", {\n          type: \"button\",\n          className: \"dialog-close\",\n          onClick: () => new Promise(res => {\n            res('Promise worked!');\n          }).then(closeModal)\n        }, \"Close me\");\n      }\n    }, {\n      content: (_ref2) => {\n        let {\n          returnValue\n        } = _ref2;\n        return React.createElement(\"div\", {\n          className: \"dialog-7-content\"\n        }, returnValue);\n      }\n    }])\n  }, \"Click me\"));\n};\n\ndescribe('ModalManager', () => {\n  const component = () => getMountedComponent({\n    Component: props => React.createElement(ModalManager, null, React.createElement(TestComp, props))\n  });\n\n  const closeDialog = () => component().find('.dialog-close').first().simulate('click');\n\n  beforeEach(() => {\n    getMountedComponent.reset();\n  });\n  after(() => {\n    // Avoid polluting test reporting UI with an open Modal\n    closeDialog();\n  });\n  it('opens a modal', () => {\n    component().find('button').first().simulate('click');\n    expect(component().find('.dialog-1-content').length).to.equal(1);\n    expect(component().find('.dialog-1-content').text()).to.equal('Hello world');\n  });\n  it('closes a modal', () => {\n    component().find('button').first().simulate('click');\n    expect(component().find('.dialog-1-content').length).to.equal(1);\n    closeDialog();\n    expect(component().find('.dialog-1-content').length).to.equal(0);\n  });\n  it('opens 2 modals one after the other', () => {\n    component().find('#btn1').first().simulate('click');\n    component().find('#btn2').last().simulate('click');\n    expect(component().find('.dialog-1-content').length).to.equal(1);\n    closeDialog();\n    expect(component().find('.dialog-2-content').length).to.equal(1);\n    closeDialog();\n    expect(component().find(Dialog).prop('open')).to.equal(false);\n  });\n  it('allows passing an array of modals', () => {\n    component().find('#btn3').first().simulate('click');\n    expect(component().find('.dialog-3-content').length).to.equal(1);\n    closeDialog();\n    expect(component().find('.dialog-4-content').length).to.equal(1);\n    closeDialog();\n    expect(component().find('.dialog-5-content').length).to.equal(1);\n    closeDialog();\n    expect(component().find(Dialog).prop('open')).to.equal(false);\n  });\n  it('can pass values between modals', done => {\n    component().find('#btn4').first().simulate('click');\n    expect(component().find('.dialog-6-content').length).to.equal(1);\n    closeDialog(); // Wait for the promise to resolve\n\n    setTimeout(() => {\n      component().update();\n      expect(component().find('.dialog-7-content').length).to.equal(1);\n      expect(component().find('.dialog-7-content').text()).to.equal('Promise worked!');\n      closeDialog();\n      expect(component().find(Dialog).prop('open')).to.equal(false);\n      done();\n    }, 0);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"DialogComponents.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/ModalManager/DialogComponents.jsx                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet DialogActions;\nmodule.link(\"@material-ui/core/DialogActions\", {\n  default(v) {\n    DialogActions = v;\n  }\n\n}, 1);\nlet DialogContent;\nmodule.link(\"@material-ui/core/DialogContent\", {\n  default(v) {\n    DialogContent = v;\n  }\n\n}, 2);\nlet DialogContentText;\nmodule.link(\"@material-ui/core/DialogContentText\", {\n  default(v) {\n    DialogContentText = v;\n  }\n\n}, 3);\nlet DialogTitle;\nmodule.link(\"@material-ui/core/DialogTitle\", {\n  default(v) {\n    DialogTitle = v;\n  }\n\n}, 4);\nlet Button;\nmodule.link(\"../Button\", {\n  default(v) {\n    Button = v;\n  }\n\n}, 5);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 6);\n\nconst makeRenderDialogPart = dialogProps => part => {\n  if (typeof part === 'function') {\n    return part(dialogProps);\n  }\n\n  return part;\n};\n\nconst defaultActions = (_ref) => {\n  let {\n    closeModal\n  } = _ref;\n  return React.createElement(Button, {\n    className: \"dialog-close\",\n    primary: true,\n    onClick: closeModal\n  }, React.createElement(T, {\n    id: \"general.close\"\n  }));\n};\n\nconst DialogComponents = (_ref2) => {\n  let {\n    closeModal,\n    returnValue,\n    closeAll,\n    dialogContent: Content = {}\n  } = _ref2;\n\n  if (React.isValidElement(Content)) {\n    return React.cloneElement(Content, {\n      closeModal,\n      returnValue,\n      closeAll\n    });\n  }\n\n  const renderDialogPart = makeRenderDialogPart({\n    closeModal,\n    returnValue,\n    closeAll\n  });\n  const {\n    title,\n    description,\n    content,\n    actions = defaultActions\n  } = Content;\n  return React.createElement(React.Fragment, null, title && React.createElement(DialogTitle, null, renderDialogPart(title)), React.createElement(DialogContent, null, description && React.createElement(DialogContentText, null, renderDialogPart(description)), renderDialogPart(content)), React.createElement(DialogActions, null, renderDialogPart(actions)));\n};\n\nmodule.exportDefault(DialogComponents);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"ModalManager.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/ModalManager/ModalManager.jsx                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\n\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nlet React, useReducer;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  useReducer(v) {\n    useReducer = v;\n  }\n\n}, 0);\nlet Dialog;\nmodule.link(\"@material-ui/core/Dialog\", {\n  default(v) {\n    Dialog = v;\n  }\n\n}, 1);\nlet ModalManagerContext;\nmodule.link(\"./ModalManagerContext\", {\n  default(v) {\n    ModalManagerContext = v;\n  }\n\n}, 2);\nlet DialogComponents;\nmodule.link(\"./DialogComponents\", {\n  default(v) {\n    DialogComponents = v;\n  }\n\n}, 3);\nconst initialState = {\n  activeModal: null\n};\nlet id = 0;\n\nconst openFirstModal = (state, _ref) => {\n  let {\n    payload: modals\n  } = _ref;\n  let firstModal;\n\n  if (modals.length === 0) {\n    throw new Error('Cannot pass an empty array to ModalManager');\n  }\n\n  const newState = modals.reduce((obj, modal, index) => {\n    const modalId = id;\n\n    if (index === 0) {\n      firstModal = modalId;\n    }\n\n    id += 1;\n    return (0, _objectSpread2.default)({}, obj, {\n      [modalId]: modal\n    });\n  }, state);\n  return (0, _objectSpread2.default)({}, newState, {\n    activeModal: firstModal\n  });\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'OPEN_MODAL':\n      {\n        if (Array.isArray(action.payload)) {\n          return openFirstModal(state, action);\n        }\n\n        const modalId = id;\n        id += 1;\n\n        if (state.activeModal === null) {\n          return (0, _objectSpread2.default)({}, state, {\n            [modalId]: action.payload,\n            activeModal: modalId\n          });\n        }\n\n        return (0, _objectSpread2.default)({}, state, {\n          [modalId]: action.payload\n        });\n      }\n\n    case 'CLOSE_MODAL':\n      {\n        const _action$payload$activ = action.payload.activeModal,\n              {\n          [_action$payload$activ]: removedModal,\n          activeModal\n        } = state,\n              newState = (0, _objectWithoutProperties2.default)(state, [_action$payload$activ, \"activeModal\"].map(_toPropertyKey));\n        const pendingModals = Object.keys(newState);\n\n        if (pendingModals.length > 0) {\n          const nextModal = Math.min(...pendingModals);\n          return (0, _objectSpread2.default)({}, newState, {\n            activeModal: nextModal,\n            [nextModal]: (0, _objectSpread2.default)({}, newState[nextModal], {\n              returnValue: action.payload.returnValue\n            })\n          });\n        }\n\n        return (0, _objectSpread2.default)({}, newState, {\n          activeModal: null\n        });\n      }\n\n    case 'CLOSE_ALL':\n      {\n        return initialState;\n      }\n\n    default:\n      return state;\n  }\n};\n\nconst ModalManager = (_ref2) => {\n  let {\n    children\n  } = _ref2;\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const {\n    activeModal\n  } = state;\n\n  const _ref3 = state[activeModal] || {},\n        {\n    title,\n    actions,\n    description,\n    content\n  } = _ref3,\n        dialogProps = (0, _objectWithoutProperties2.default)(_ref3, [\"title\", \"actions\", \"description\", \"content\"]);\n\n  const openModal = payload => {\n    dispatch({\n      type: 'OPEN_MODAL',\n      payload\n    });\n  };\n\n  const closeModal = returnValue => dispatch({\n    type: 'CLOSE_MODAL',\n    payload: {\n      activeModal,\n      returnValue\n    }\n  });\n\n  const closeAll = () => dispatch({\n    type: 'CLOSE_ALL'\n  });\n\n  return React.createElement(ModalManagerContext.Provider, {\n    value: {\n      openModal\n    }\n  }, children, React.createElement(Dialog, (0, _extends2.default)({}, dialogProps, {\n    open: activeModal !== null,\n    onClose: closeModal\n  }), React.createElement(DialogComponents, {\n    returnValue: state[activeModal] && state[activeModal].returnValue,\n    dialogContent: state[activeModal],\n    closeModal: closeModal,\n    closeAll: closeAll\n  })));\n};\n\nmodule.exportDefault(ModalManager);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"ModalManagerContext.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/ModalManager/ModalManagerContext.js                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nconst ModalManagerContext = React.createContext();\nmodule.exportDefault(ModalManagerContext);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"PageHead\":{\"test\":{\"Pagehead.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/PageHead/test/Pagehead.spec.jsx                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet shallow;\nmodule.link(\"../../../utils/testHelpers/enzyme\", {\n  shallow(v) {\n    shallow = v;\n  }\n\n}, 2);\nlet PageHead;\nmodule.link(\"../PageHead\", {\n  PageHead(v) {\n    PageHead = v;\n  }\n\n}, 3);\ndescribe('PageHead', () => {\n  let props;\n\n  const component = () => shallow(React.createElement(PageHead, props));\n\n  beforeEach(() => {\n    props = {\n      intl: {\n        formatMessage: (_ref) => {\n          let {\n            id\n          } = _ref;\n          return id;\n        }\n      }\n    };\n  });\n  it('renders a title tag with just e-Potek in it if no title is provided', () => {\n    expect(component().props('title').title).to.equal('e-Potek');\n  });\n  it('renders a meta tag with a charSet', () => {\n    expect(component().props().meta).to.deep.include({\n      charSet: 'UTF-8'\n    });\n  });\n  it('renders the title with more stuff if titleId is provided', () => {\n    const titleId = 'yo';\n    props.titleId = titleId;\n    expect(component().props().title).to.equal(\"e-Potek | \".concat(titleId, \".title\"));\n  });\n  it('does not add .title at the end of the i18n id if it is already provided', () => {\n    const titleId = 'yo.title';\n    props.titleId = titleId;\n    expect(component().props().title).to.equal(\"e-Potek | \".concat(titleId));\n  });\n  it('does not render a description tag if no descriptionId is provided', () => {\n    expect(component().find('meta[name=\"description\"]').length).to.equal(0);\n  });\n  it('renders a description tag if a descriptionId is provided', () => {\n    const descriptionId = 'test';\n    props.descriptionId = descriptionId;\n    expect(component().props().meta).to.deep.include({\n      name: 'description',\n      content: descriptionId\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"PageHead.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/PageHead/PageHead.jsx                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nmodule.export({\n  PageHead: () => PageHead\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet Helmet;\nmodule.link(\"react-helmet\", {\n  Helmet(v) {\n    Helmet = v;\n  }\n\n}, 2);\nlet injectIntl;\nmodule.link(\"react-intl\", {\n  injectIntl(v) {\n    injectIntl = v;\n  }\n\n}, 3);\n\nconst formatTitle = (_ref, formatMessage) => {\n  let {\n    titleId,\n    title\n  } = _ref;\n\n  if (title && typeof title === 'string') {\n    return \" | \".concat(title);\n  }\n\n  if (titleId) {\n    if (titleId.includes('.title')) {\n      return \" | \".concat(formatMessage({\n        id: \"\".concat(titleId)\n      }));\n    }\n\n    return \" | \".concat(formatMessage({\n      id: \"\".concat(titleId, \".title\")\n    }));\n  }\n\n  return '';\n}; // Use Helmet in a weird way because of this bug\n// https://github.com/nfl/react-helmet/issues/373\n\n\nconst PageHead = (_ref2) => {\n  let {\n    descriptionId,\n    intl: {\n      formatMessage\n    }\n  } = _ref2,\n      props = (0, _objectWithoutProperties2.default)(_ref2, [\"descriptionId\", \"intl\"]);\n  return React.createElement(Helmet, {\n    defaultTitle: \"e-Potek\",\n    title: \"e-Potek\".concat(formatTitle(props, formatMessage)),\n    meta: [...(descriptionId ? [{\n      name: 'description',\n      content: formatMessage({\n        id: descriptionId\n      })\n    }] : []), {\n      charSet: 'UTF-8'\n    }]\n  });\n};\n\nPageHead.propTypes = {\n  descriptionId: PropTypes.string,\n  intl: PropTypes.object.isRequired,\n  titleId: PropTypes.string\n};\nPageHead.defaultProps = {\n  titleId: undefined,\n  descriptionId: undefined\n};\nmodule.exportDefault(injectIntl(PageHead));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"SearchModal\":{\"test\":{\"SearchResults.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/SearchModal/test/SearchResults.spec.jsx                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet shallow;\nmodule.link(\"../../../utils/testHelpers/enzyme\", {\n  shallow(v) {\n    shallow = v;\n  }\n\n}, 2);\nlet SearchResults;\nmodule.link(\"../SearchResults\", {\n  default(v) {\n    SearchResults = v;\n  }\n\n}, 3);\ndescribe('SearchResults', () => {\n  let props;\n\n  const component = () => shallow(React.createElement(SearchResults, props));\n\n  beforeEach(() => {\n    props = {};\n  });\n  it('This component is a pain to test', () => {// Please refactor me\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"SearchResults.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/SearchModal/SearchResults.jsx                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet JsSearch;\nmodule.link(\"js-search\", {\n  default(v) {\n    JsSearch = v;\n  }\n\n}, 2);\nlet injectIntl;\nmodule.link(\"react-intl\", {\n  injectIntl(v) {\n    injectIntl = v;\n  }\n\n}, 3);\nlet List;\nmodule.link(\"@material-ui/core/List\", {\n  default(v) {\n    List = v;\n  }\n\n}, 4);\nlet ListItem;\nmodule.link(\"@material-ui/core/ListItem\", {\n  default(v) {\n    ListItem = v;\n  }\n\n}, 5);\nlet ListItemText;\nmodule.link(\"@material-ui/core/ListItemText\", {\n  default(v) {\n    ListItemText = v;\n  }\n\n}, 6);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 7);\nlet generalTooltips;\nmodule.link(\"../../arrays/tooltips\", {\n  generalTooltips(v) {\n    generalTooltips = v;\n  }\n\n}, 8);\nlet Button;\nmodule.link(\"../Button\", {\n  default(v) {\n    Button = v;\n  }\n\n}, 9);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nconst styles = {\n  list: {\n    width: '100%',\n    maxWidth: 800\n  },\n  selected: {\n    width: '100%',\n    maxWidth: 800\n  }\n};\n\nclass SearchResults extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"setupSearch\", () => {\n      this.search = new JsSearch.Search('id');\n      this.search.addIndex('tooltipMatch');\n      this.search.addIndex('tooltipValue1');\n      this.search.addIndex('tooltipValue2');\n      this.tooltips = this.getTooltips();\n      this.search.addDocuments(this.tooltips);\n    });\n\n    _defineProperty(this, \"getTooltips\", () => {\n      const f = this.props.intl.formatMessage;\n      const intlValues = {\n        verticalSpace: ' '\n      };\n      return Object.keys(generalTooltips).map(match => {\n        const tooltipId = generalTooltips[match].id;\n        const tooltip = {\n          id: tooltipId,\n          tooltipMatch: match,\n          tooltipValue1: f({\n            id: \"tooltip.\".concat(tooltipId)\n          }, intlValues)\n        };\n\n        if (generalTooltips[match].double) {\n          tooltip.tooltipValue2 = f({\n            id: \"tooltip2.\".concat(tooltipId)\n          }, intlValues);\n        }\n\n        return tooltip;\n      });\n    });\n\n    this.state = {\n      showId: ''\n    };\n    this.setupSearch();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    // Cancel viewing results if something new is typed/deleted\n    if (nextProps.search !== this.props.search && this.state.showId) {\n      this.setState({\n        showId: ''\n      });\n    }\n  }\n\n  render() {\n    const {\n      search\n    } = this.props;\n    const {\n      showId\n    } = this.state;\n    const results = this.search.search(search);\n\n    if (showId) {\n      const selectedResult = this.tooltips.filter(result => result.id === showId)[0];\n      return React.createElement(\"div\", {\n        className: \"flex-col\",\n        style: styles.selected\n      }, React.createElement(\"h3\", null, selectedResult.tooltipMatch), React.createElement(\"p\", null, selectedResult.tooltipValue1), React.createElement(\"p\", null, selectedResult.tooltipValue2), React.createElement(\"div\", {\n        className: \"text-center\",\n        style: {\n          paddingTop: 16\n        }\n      }, React.createElement(Button, {\n        primary: true,\n        label: React.createElement(T, {\n          id: \"general.ok\"\n        }),\n        onClick: () => this.setState({\n          showId: ''\n        })\n      })));\n    }\n\n    if (search === '') {\n      return React.createElement(List, {\n        style: styles.list\n      }, this.tooltips.map(result => React.createElement(ListItem, {\n        button: true,\n        divider: true,\n        onClick: () => this.setState({\n          showId: result.id\n        }),\n        key: result.id\n      }, React.createElement(ListItemText, {\n        primary: result.tooltipMatch,\n        secondary: result.tooltipValue1\n      }))));\n    }\n\n    if (search && results.length === 0) {\n      return React.createElement(\"div\", {\n        className: \"description\"\n      }, React.createElement(\"p\", null, React.createElement(T, {\n        id: \"SearchResults.none\"\n      })));\n    }\n\n    return React.createElement(List, {\n      style: styles.list\n    }, results.map(result => React.createElement(ListItem, {\n      button: true,\n      divider: true,\n      onClick: () => this.setState({\n        showId: result.id\n      }),\n      key: result.id\n    }, React.createElement(ListItemText, {\n      primary: result.tooltipMatch,\n      secondary: result.tooltipValue1\n    }))));\n  }\n\n}\n\nSearchResults.propTypes = {\n  intl: PropTypes.object.isRequired,\n  search: PropTypes.string.isRequired\n};\nmodule.exportDefault(injectIntl(SearchResults));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Table\":{\"test\":{\"Table.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Table/test/Table.spec.js                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet sortData, ORDER;\nmodule.link(\"../tableHelpers\", {\n  sortData(v) {\n    sortData = v;\n  },\n\n  ORDER(v) {\n    ORDER = v;\n  }\n\n}, 1);\ndescribe('<Table />', () => {\n  describe('sortData', () => {\n    let order;\n    let orderBy;\n    let data;\n    let column;\n    beforeEach(() => {\n      order = ORDER.ASC;\n      orderBy = undefined;\n      column = 0;\n    });\n    describe('when data is strings', () => {\n      beforeEach(() => {\n        data = [{\n          columns: ['3']\n        }, {\n          columns: ['1']\n        }, {\n          columns: ['2']\n        }];\n      });\n      it('sorts 2 rows of data ascending', () => {\n        const {\n          data: sortedData\n        } = sortData({\n          data,\n          newOrderBy: column,\n          order,\n          orderBy\n        });\n        expect(sortedData).to.deep.equal([{\n          columns: ['1']\n        }, {\n          columns: ['2']\n        }, {\n          columns: ['3']\n        }]);\n      });\n      it('sorts 2 rows of data descending when the same column is sorted again', () => {\n        // Initially, the data is already sorted by \"column\"\n        orderBy = column;\n        const {\n          data: sortedData\n        } = sortData({\n          data,\n          // Sort it again by \"column\"\n          newOrderBy: column,\n          order,\n          orderBy\n        });\n        expect(sortedData).to.deep.equal([{\n          columns: ['3']\n        }, {\n          columns: ['2']\n        }, {\n          columns: ['1']\n        }]);\n      });\n      it('sorts 3 rows of data ascending', () => {\n        data = [{\n          columns: ['test 2']\n        }, {\n          columns: ['test 3']\n        }, {\n          columns: ['test 1']\n        }];\n        const {\n          data: sortedData\n        } = sortData({\n          data,\n          newOrderBy: column,\n          order,\n          orderBy\n        });\n        expect(sortedData).to.deep.equal([{\n          columns: ['test 1']\n        }, {\n          columns: ['test 2']\n        }, {\n          columns: ['test 3']\n        }]);\n      });\n    });\n    describe('when data is numbers', () => {\n      beforeEach(() => {\n        order = ORDER.ASC;\n        data = [{\n          columns: [3]\n        }, {\n          columns: [2]\n        }];\n      });\n      it('sorts 2 rows of data ascending', () => {\n        const {\n          data: sortedData\n        } = sortData({\n          data,\n          newOrderBy: column,\n          order,\n          orderBy\n        });\n        expect(sortedData).to.deep.equal([{\n          columns: [2]\n        }, {\n          columns: [3]\n        }]);\n      });\n      it('sorts 2 rows of data descending', () => {\n        orderBy = column;\n        const {\n          data: sortedData\n        } = sortData({\n          data,\n          newOrderBy: column,\n          order,\n          orderBy\n        });\n        expect(sortedData).to.deep.equal([{\n          columns: [3]\n        }, {\n          columns: [2]\n        }]);\n      });\n    });\n    describe('when data is an object', () => {\n      beforeEach(() => {\n        order = ORDER.ASC;\n        data = [{\n          columns: [{\n            label: 'one',\n            raw: 10\n          }]\n        }, {\n          columns: [{\n            label: 'three',\n            raw: -2\n          }]\n        }, {\n          columns: [{\n            label: 'four',\n            raw: 5\n          }]\n        }];\n      });\n      it('sorts 3 rows of data ascending', () => {\n        const {\n          data: sortedData\n        } = sortData({\n          data,\n          newOrderBy: column,\n          order,\n          orderBy\n        });\n        expect(sortedData).to.deep.equal([{\n          columns: [{\n            label: 'three',\n            raw: -2\n          }]\n        }, {\n          columns: [{\n            label: 'four',\n            raw: 5\n          }]\n        }, {\n          columns: [{\n            label: 'one',\n            raw: 10\n          }]\n        }]);\n      });\n      it('sorts 3 rows of data descending', () => {\n        orderBy = column;\n        const {\n          data: sortedData\n        } = sortData({\n          data,\n          newOrderBy: column,\n          order,\n          orderBy\n        });\n        expect(sortedData).to.deep.equal([{\n          columns: [{\n            label: 'one',\n            raw: 10\n          }]\n        }, {\n          columns: [{\n            label: 'four',\n            raw: 5\n          }]\n        }, {\n          columns: [{\n            label: 'three',\n            raw: -2\n          }]\n        }]);\n      });\n    });\n    describe('when data is a Date', () => {\n      beforeEach(() => {\n        order = ORDER.ASC;\n        data = [{\n          columns: [{\n            label: 'one',\n            raw: new Date('02.05.2015')\n          }]\n        }, {\n          columns: [{\n            label: 'three',\n            raw: new Date('01.01.2010')\n          }]\n        }, {\n          columns: [{\n            label: 'four',\n            raw: new Date('04.06.2010')\n          }]\n        }];\n      });\n      it('sorts 3 rows of data ascending', () => {\n        const {\n          data: sortedData\n        } = sortData({\n          data,\n          newOrderBy: column,\n          order,\n          orderBy\n        });\n        expect(sortedData).to.deep.equal([{\n          columns: [{\n            label: 'three',\n            raw: new Date('01.01.2010')\n          }]\n        }, {\n          columns: [{\n            label: 'four',\n            raw: new Date('04.06.2010')\n          }]\n        }, {\n          columns: [{\n            label: 'one',\n            raw: new Date('02.05.2015')\n          }]\n        }]);\n      });\n      it('sorts 3 rows of data descending', () => {\n        orderBy = column;\n        const {\n          data: sortedData\n        } = sortData({\n          data,\n          newOrderBy: column,\n          order,\n          orderBy\n        });\n        expect(sortedData).to.deep.equal([{\n          columns: [{\n            label: 'one',\n            raw: new Date('02.05.2015')\n          }]\n        }, {\n          columns: [{\n            label: 'four',\n            raw: new Date('04.06.2010')\n          }]\n        }, {\n          columns: [{\n            label: 'three',\n            raw: new Date('01.01.2010')\n          }]\n        }]);\n      });\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"tableHelpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Table/tableHelpers.js                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  shouldDisplayLabelAndData: () => shouldDisplayLabelAndData,\n  sortData: () => sortData\n});\nlet ORDER;\nmodule.link(\"../../utils/sortArrayOfObjects\", {\n  ORDER(v) {\n    ORDER = v;\n  }\n\n}, 0);\nlet makeSorter;\nmodule.link(\"../../utils/sorting\", {\n  default(v) {\n    makeSorter = v;\n  }\n\n}, 1);\nmodule.link(\"../../utils/sortArrayOfObjects\", {\n  ORDER: \"ORDER\"\n}, 2);\n\nconst shouldDisplayLabelAndData = columnValue => columnValue !== null && typeof columnValue === 'object' && 'raw' in columnValue && 'label' in columnValue;\n\nconst makeSortFunc = (orderBy, isReversed) => {\n  const sorter = makeSorter(!isReversed);\n  return (a, b) => {\n    let valueA = a.columns[orderBy];\n    let valueB = b.columns[orderBy]; // Add support for columns that have a label and raw data\n\n    if (shouldDisplayLabelAndData(valueA)) {\n      valueA = valueA.raw;\n      valueB = valueB.raw;\n    }\n\n    return sorter(valueA, valueB);\n  };\n};\n\nconst determineOrder = (_ref) => {\n  let {\n    oldOrderBy,\n    newOrderBy,\n    order,\n    changeOrder = true\n  } = _ref;\n  let isReversed;\n  let finalOrder;\n\n  if (oldOrderBy !== newOrderBy) {\n    // First click, Initial ascending order\n    isReversed = false;\n    finalOrder = ORDER.ASC;\n  } else if (changeOrder) {\n    // Clicked a second time, reverse order\n    isReversed = order === ORDER.ASC;\n    finalOrder = isReversed ? ORDER.DESC : ORDER.ASC;\n  } else {\n    // If data is just being sorted again without user changing the order,\n    // don't change the order and keep it as is.\n    // This can happen if new data is added to the table, or some data changed\n    isReversed = order !== ORDER.ASC;\n    finalOrder = order;\n  }\n\n  return {\n    isReversed,\n    finalOrder\n  };\n};\n\nconst sortData = (_ref2) => {\n  let {\n    data,\n    newOrderBy,\n    orderBy: oldOrderBy,\n    order,\n    changeOrder\n  } = _ref2;\n  const {\n    isReversed,\n    finalOrder\n  } = determineOrder({\n    oldOrderBy,\n    newOrderBy,\n    order,\n    changeOrder\n  });\n  const sortedData = data.sort(makeSortFunc(newOrderBy, isReversed));\n  return {\n    data: sortedData,\n    order: finalOrder,\n    orderBy: newOrderBy\n  };\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Tabs\":{\"test\":{\"Tabs.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Tabs/test/Tabs.spec.jsx                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet sinon;\nmodule.link(\"sinon\", {\n  default(v) {\n    sinon = v;\n  }\n\n}, 1);\nlet getMountedComponent;\nmodule.link(\"../../../utils/testHelpers/getMountedComponent\", {\n  default(v) {\n    getMountedComponent = v;\n  }\n\n}, 2);\nlet Tabs;\nmodule.link(\"../Tabs\", {\n  default(v) {\n    Tabs = v;\n  }\n\n}, 3);\ndescribe('Tabs', () => {\n  let props;\n\n  const component = () => getMountedComponent({\n    Component: Tabs,\n    props\n  });\n\n  beforeEach(() => {\n    props = {\n      tabs: [{\n        label: 'test1',\n        content: 'hello world'\n      }, {\n        label: 'test2',\n        content: 'hello world'\n      }]\n    };\n  });\n  it.skip('calls onChange prop when changing tabs', () => {\n    const onChangeSpy = sinon.spy();\n    props.onChange = sinon.spy();\n    component().find('.core-tabs-tab').last().simulate('click');\n    component().update();\n    expect(onChangeSpy.calledOnce).to.equal(true);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Tabs.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Tabs/Tabs.jsx                                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet MuiTabs;\nmodule.link(\"@material-ui/core/Tabs\", {\n  default(v) {\n    MuiTabs = v;\n  }\n\n}, 2);\nlet Tab;\nmodule.link(\"@material-ui/core/Tab\", {\n  default(v) {\n    Tab = v;\n  }\n\n}, 3);\nlet cx;\nmodule.link(\"classnames\", {\n  default(v) {\n    cx = v;\n  }\n\n}, 4);\nlet Link;\nmodule.link(\"../Link\", {\n  default(v) {\n    Link = v;\n  }\n\n}, 5);\nlet TabsContainer;\nmodule.link(\"./TabsContainer\", {\n  default(v) {\n    TabsContainer = v;\n  }\n\n}, 6);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nclass Tabs extends Component {\n  constructor(props) {\n    super(props); // Make sure a tab index of -1 is not used\n\n    _defineProperty(this, \"handleChange\", (event, value) => {\n      const {\n        onChangeCallback\n      } = this.props;\n      this.setState({\n        value\n      });\n\n      if (typeof onChange === 'function') {\n        onChangeCallback(event);\n      }\n    });\n\n    _defineProperty(this, \"getContent\", () => {\n      const {\n        value\n      } = this.state;\n      const {\n        tabs\n      } = this.props;\n\n      if (tabs.length === 0) {\n        return null;\n      }\n\n      const currentTab = tabs[value];\n\n      if (!currentTab) {\n        // When tabs are added or removed, tabs can break, so readjust current tab value\n        return this.setState({\n          value: tabs.length - 1\n        });\n      }\n\n      return currentTab.content;\n    });\n\n    this.state = {\n      value: Math.max(this.props.initialIndex, 0)\n    };\n  }\n\n  componentWillReceiveProps(_ref) {\n    let {\n      initialIndex: nextIndex\n    } = _ref;\n    const {\n      initialIndex\n    } = this.props;\n\n    if (nextIndex !== initialIndex) {\n      this.setState({\n        value: nextIndex\n      });\n    }\n  }\n\n  render() {\n    const _this$props = this.props,\n          {\n      classes,\n      tabs,\n      initialIndex,\n      className,\n      onChangeCallback,\n      disableTouchRipple\n    } = _this$props,\n          otherProps = (0, _objectWithoutProperties2.default)(_this$props, [\"classes\", \"tabs\", \"initialIndex\", \"className\", \"onChangeCallback\", \"disableTouchRipple\"]);\n    const {\n      value\n    } = this.state; // initial index is destructured to avoid passing down an unrecognized prop\n    // to MuiTabs\n\n    return React.createElement(\"div\", {\n      className: cx('card1 card-top core-tabs', classes.root, className)\n    }, React.createElement(MuiTabs, (0, _extends2.default)({\n      classes: {\n        root: classes.tabsRoot,\n        indicator: classes.tabsIndicator\n      },\n      className: \"core-tabs-top\",\n      value: value,\n      onChange: this.handleChange,\n      indicatorColor: \"primary\",\n      textColor: \"primary\"\n    }, otherProps), tabs.map((_ref2, i) => {\n      let {\n        label,\n        to,\n        id\n      } = _ref2;\n      return React.createElement(Tab, {\n        classes: {\n          root: classes.tabRoot,\n          selected: classes.tabSelected,\n          labelContainer: classes.labelContainer\n        },\n        label: label,\n        component: to ? Link : undefined,\n        to: to,\n        key: id || i,\n        className: \"core-tabs-tab\",\n        disableTouchRipple: disableTouchRipple\n      });\n    })), React.createElement(\"div\", {\n      className: \"tab-content\"\n    }, this.getContent()));\n  }\n\n}\n\nTabs.propTypes = {\n  // Array of objects with 'label' and 'content'\n  classes: PropTypes.object.isRequired,\n  className: PropTypes.string,\n  initialIndex: PropTypes.number,\n  tabs: PropTypes.arrayOf(PropTypes.object).isRequired\n};\nTabs.defaultProps = {\n  className: '',\n  initialIndex: 0\n};\nmodule.exportDefault(TabsContainer(Tabs));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"TabsContainer.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Tabs/TabsContainer.js                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet withStyles;\nmodule.link(\"@material-ui/core/styles\", {\n  withStyles(v) {\n    withStyles = v;\n  }\n\n}, 0);\nlet withProps, compose;\nmodule.link(\"recompose\", {\n  withProps(v) {\n    withProps = v;\n  },\n\n  compose(v) {\n    compose = v;\n  }\n\n}, 1);\nlet withMatchParam;\nmodule.link(\"../../containers/withMatchParam\", {\n  default(v) {\n    withMatchParam = v;\n  }\n\n}, 2);\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1\n  },\n  tabsRoot: {\n    borderBottom: '1px solid #e8e8e8'\n  },\n  tabRoot: {\n    textTransform: 'initial',\n    minWidth: 72,\n    fontWeight: theme.typography.fontWeightRegular,\n    maxWidth: 'unset'\n  },\n  labelContainer: {\n    paddingRight: 12,\n    paddingLeft: 12\n  }\n});\n\nmodule.exportDefault(compose(withStyles(styles), withMatchParam((_ref) => {\n  let {\n    routerParamName\n  } = _ref;\n  return routerParamName;\n}), withProps((_ref2) => {\n  let {\n    routerParamName,\n    tabs\n  } = _ref2,\n      props = (0, _objectWithoutProperties2.default)(_ref2, [\"routerParamName\", \"tabs\"]);\n  const filteredTabs = tabs.filter((_ref3) => {\n    let {\n      condition = true\n    } = _ref3;\n    return condition;\n  });\n\n  if (!routerParamName) {\n    return {\n      tabs: filteredTabs\n    };\n  }\n\n  const routerParam = props[routerParamName];\n\n  if (!routerParam) {\n    return {\n      initialIndex: 0,\n      tabs: filteredTabs\n    };\n  }\n\n  return {\n    initialIndex: filteredTabs.map(tab => tab.id).indexOf(routerParam),\n    tabs: filteredTabs\n  };\n})));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"TextInput\":{\"test\":{\"TextInput.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/TextInput/test/TextInput.spec.js                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet getFinalPlaceholder;\nmodule.link(\"../TextInput\", {\n  getFinalPlaceholder(v) {\n    getFinalPlaceholder = v;\n  }\n\n}, 1);\ndescribe('getFinalPlaceholder', () => {\n  context('when noIntl is false', () => {\n    it('should return a placeholder with a prefix', () => {\n      const intl = {\n        formatMessage: (_ref) => {\n          let {\n            id\n          } = _ref;\n          return id;\n        }\n      };\n      const prefix = 'Forms.textInput.placeholderPrefix';\n      const placeholder = 'placeholer';\n      const options = {\n        noIntl: false,\n        intl,\n        placeholder\n      };\n      expect(getFinalPlaceholder(options)).to.equal(\"\".concat(prefix, \" \").concat(placeholder));\n    });\n    it('should return default placeholder if no placeholder is provided', () => {\n      const intl = {\n        formatMessage: (_ref2) => {\n          let {\n            id\n          } = _ref2;\n          return id;\n        }\n      };\n      const defaultPlaceholder = 'defaultPlaceholder';\n      const options = {\n        noIntl: false,\n        intl,\n        defaultPlaceholder\n      };\n      expect(getFinalPlaceholder(options)).to.equal(defaultPlaceholder);\n    });\n    it('should return defaultPlaceholder when type is money', () => {\n      const defaultPlaceholder = 'defaultPlaceholder';\n      const options = {\n        defaultPlaceholder,\n        type: 'money'\n      };\n      expect(getFinalPlaceholder(options)).to.equal(defaultPlaceholder);\n    });\n  });\n  context('when noIntl is true', () => {\n    it('should return placeholder when it is defined', () => {\n      const placeholder = 'placeholder';\n      const options = {\n        noIntl: true,\n        placeholder\n      };\n      expect(getFinalPlaceholder(options)).to.equal(placeholder);\n    });\n    it('should return default placeholder when no placeholder is defined', () => {\n      const placeholder = undefined;\n      const defaultPlaceholder = 'defaultPlaceholder';\n      const options = {\n        noIntl: true,\n        placeholder,\n        defaultPlaceholder\n      };\n      expect(getFinalPlaceholder(options)).to.equal(defaultPlaceholder);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"TextInput.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/TextInput/TextInput.jsx                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nmodule.export({\n  getFinalPlaceholder: () => getFinalPlaceholder\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet injectIntl;\nmodule.link(\"react-intl\", {\n  injectIntl(v) {\n    injectIntl = v;\n  }\n\n}, 2);\nlet MaskedInput;\nmodule.link(\"react-text-mask\", {\n  default(v) {\n    MaskedInput = v;\n  }\n\n}, 3);\nlet moment;\nmodule.link(\"moment\", {\n  default(v) {\n    moment = v;\n  }\n\n}, 4);\nlet classnames;\nmodule.link(\"classnames\", {\n  default(v) {\n    classnames = v;\n  }\n\n}, 5);\nlet InputAdornment;\nmodule.link(\"../Material/InputAdornment\", {\n  default(v) {\n    InputAdornment = v;\n  }\n\n}, 6);\nlet FormHelperText;\nmodule.link(\"../Material/FormHelperText\", {\n  default(v) {\n    FormHelperText = v;\n  }\n\n}, 7);\nlet InputLabel, useInputLabelWidth;\nmodule.link(\"../Material/InputLabel\", {\n  default(v) {\n    InputLabel = v;\n  },\n\n  useInputLabelWidth(v) {\n    useInputLabelWidth = v;\n  }\n\n}, 8);\nlet FormControl;\nmodule.link(\"../Material/FormControl\", {\n  default(v) {\n    FormControl = v;\n  }\n\n}, 9);\nlet Input;\nmodule.link(\"../Material/Input\", {\n  default(v) {\n    Input = v;\n  }\n\n}, 10);\nlet swissFrancMask, percentMask;\nmodule.link(\"../../utils/textMasks\", {\n  swissFrancMask(v) {\n    swissFrancMask = v;\n  },\n\n  percentMask(v) {\n    percentMask = v;\n  }\n\n}, 11);\nlet toNumber;\nmodule.link(\"../../utils/conversionFunctions\", {\n  toNumber(v) {\n    toNumber = v;\n  }\n\n}, 12);\n\nconst getDefaults = (_ref) => {\n  let {\n    type,\n    id,\n    onChange,\n    value,\n    simpleOnChange\n  } = _ref;\n\n  if (simpleOnChange) {\n    return {\n      onChangeHandler: onChange,\n      value\n    };\n  }\n\n  switch (type) {\n    case 'money':\n      return {\n        onChangeHandler: event => onChange(id, toNumber(event.target.value)),\n        showMask: true,\n        mask: swissFrancMask,\n        placeholder: 0,\n        value\n      };\n\n    case 'percent':\n      return {\n        onChangeHandler: event => onChange(id, Math.round(parseFloat(event.target.value) * 100) / 10000),\n        showMask: true,\n        mask: percentMask,\n        placeholder: '%',\n        value: (value * 100).toFixed(2)\n      };\n\n    case 'number':\n      return {\n        onChangeHandler: event => onChange(id, toNumber(event.target.value)),\n        showMask: false,\n        value\n      };\n\n    case 'date':\n      return {\n        onChangeHandler: event => onChange(id, event.target.value, event),\n        onDateChange: val => {\n          // This specific format should be used for the server to get the\n          // date in the right order\n          const date = moment(val).format('YYYY-MM-DD'); // Allow setting a date to null\n\n          onChange(id, val ? date : null, {});\n        },\n        showMask: false,\n        value: value ? moment(value) : null\n      };\n\n    default:\n      return {\n        // Pass event as third argument, for some components which need it\n        // like react-autosuggest\n        onChangeHandler: event => onChange(id, event.target.value, event),\n        showMask: false,\n        value\n      };\n  }\n};\n\nconst getFinalPlaceholder = (_ref2) => {\n  let {\n    noIntl,\n    placeholder,\n    defaultPlaceholder,\n    intl,\n    type\n  } = _ref2;\n  let finalPlaceholder;\n\n  if (noIntl) {\n    finalPlaceholder = placeholder || defaultPlaceholder;\n  } else {\n    finalPlaceholder = placeholder && typeof placeholder === 'string' ? \"\".concat(intl.formatMessage({\n      id: 'Forms.textInput.placeholderPrefix'\n    }), \" \").concat(intl.formatMessage({\n      id: placeholder\n    })) : defaultPlaceholder;\n  } // Ignore placeholder for money inputs, and just show the currency\n  // Showing an amount is confusing\n\n\n  if (type === 'money') {\n    finalPlaceholder = defaultPlaceholder;\n  }\n\n  return finalPlaceholder;\n};\n\nconst TextInput = props => {\n  const {\n    classes,\n    className,\n    error,\n    fullWidth,\n    id,\n    info,\n    inputComponent,\n    InputProps,\n    inputProps,\n    inputRef,\n    intl,\n    label,\n    labelStyle,\n    noIntl,\n    onChange,\n    placeholder,\n    simpleOnChange,\n    style,\n    type,\n    inputType,\n    inputLabelProps\n  } = props,\n        otherProps = (0, _objectWithoutProperties2.default)(props, [\"classes\", \"className\", \"error\", \"fullWidth\", \"id\", \"info\", \"inputComponent\", \"InputProps\", \"inputProps\", \"inputRef\", \"intl\", \"label\", \"labelStyle\", \"noIntl\", \"onChange\", \"placeholder\", \"simpleOnChange\", \"style\", \"type\", \"inputType\", \"inputLabelProps\"]);\n  const {\n    onChangeHandler,\n    onDateChange,\n    showMask,\n    mask,\n    placeholder: defaultPlaceholder,\n    value\n  } = getDefaults(props);\n  const {\n    inputLabelRef,\n    labelWidth\n  } = useInputLabelWidth(!!label);\n  return React.createElement(FormControl, {\n    error: error,\n    className: classnames('mui-text-input', className),\n    style: style,\n    fullWidth: fullWidth\n  }, label && React.createElement(InputLabel, (0, _extends2.default)({\n    ref: inputLabelRef,\n    htmlFor: id,\n    style: labelStyle\n  }, inputLabelProps), label), React.createElement(Input, (0, _extends2.default)({}, otherProps, {\n    labelWidth: labelWidth,\n    className: classes ? Object.values(classes).join(' ') : '',\n    id: id,\n    onChange: onChangeHandler,\n    type: inputType || 'text',\n    style: {\n      fontSize: 'inherit'\n    },\n    inputComponent: showMask ? MaskedInput : inputComponent || undefined,\n    inputProps: (0, _objectSpread2.default)({}, inputProps, InputProps, {\n      value,\n      placeholder: getFinalPlaceholder({\n        noIntl,\n        placeholder,\n        defaultPlaceholder,\n        intl,\n        type\n      }),\n      noValidate: true,\n      mask: mask || undefined,\n      pattern: mask ? '[0-9]*' : undefined,\n      onDateChange: inputType === 'date' ? onDateChange : undefined\n    }),\n    startAdornment: props.type === 'money' ? React.createElement(InputAdornment, {\n      position: \"start\"\n    }, \"CHF\") : null\n  })), info && React.createElement(FormHelperText, null, info));\n};\n\nTextInput.propTypes = {\n  error: PropTypes.bool,\n  id: PropTypes.string,\n  info: PropTypes.node,\n  inputComponent: PropTypes.func,\n  inputProps: PropTypes.object,\n  label: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n  noIntl: PropTypes.bool,\n  onChange: PropTypes.func,\n  placeholder: PropTypes.node,\n  simpleOnChange: PropTypes.bool,\n  // Removes all onChange modifications\n  type: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n};\nTextInput.defaultProps = {\n  error: false,\n  id: undefined,\n  info: undefined,\n  inputComponent: null,\n  inputProps: undefined,\n  label: '',\n  noIntl: false,\n  onChange: undefined,\n  placeholder: undefined,\n  simpleOnChange: false,\n  type: undefined,\n  value: undefined\n};\nmodule.exportDefault(injectIntl(TextInput));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/TextInput/index.js                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./TextInput\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Toggle\":{\"test\":{\"Toggle.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Toggle/test/Toggle.spec.jsx                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet Switch;\nmodule.link(\"@material-ui/core/Switch\", {\n  default(v) {\n    Switch = v;\n  }\n\n}, 2);\nlet shallow;\nmodule.link(\"../../../utils/testHelpers/enzyme\", {\n  shallow(v) {\n    shallow = v;\n  }\n\n}, 3);\nlet Toggle;\nmodule.link(\"../Toggle\", {\n  default(v) {\n    Toggle = v;\n  }\n\n}, 4);\nconst requiredProps = {\n  toggle: false,\n  onToggle: () => {}\n};\n\nconst component = props => shallow(React.createElement(Toggle, props));\n\ndescribe('Toggle', () => {\n  it('renders only the right label', () => {\n    const labels = component((0, _objectSpread2.default)({}, requiredProps, {\n      labelRight: 'Right Label'\n    })).find('.toggle-label');\n    expect(labels.length).to.equal(1);\n    expect(labels.first().text()).to.equal('Right Label');\n  });\n  it('renders top, left and right labels', () => {\n    const props = (0, _objectSpread2.default)({}, requiredProps, {\n      labelTop: 'Top Label',\n      labelLeft: 'Left Label',\n      labelRight: 'Right Label'\n    });\n    const labels = component(props).find('.toggle-label');\n    expect(labels.length).to.equal(3);\n    expect(labels.at(0).text()).to.equal('Top Label');\n    expect(labels.at(1).text()).to.equal('Left Label');\n    expect(labels.at(2).text()).to.equal('Right Label');\n  });\n  it('passes the toggle callback function to the Switch component', () => {\n    const onToggle = () => {};\n\n    expect(component((0, _objectSpread2.default)({}, requiredProps, {\n      onToggle\n    })).find(Switch).first().prop('onChange')).to.equal(onToggle);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Toggle.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Toggle/Toggle.jsx                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet cx;\nmodule.link(\"classnames\", {\n  default(v) {\n    cx = v;\n  }\n\n}, 2);\nlet Switch;\nmodule.link(\"@material-ui/core/Switch\", {\n  default(v) {\n    Switch = v;\n  }\n\n}, 3);\n\nconst Toggle = (_ref) => {\n  let {\n    toggled,\n    onToggle,\n    labelTop,\n    labelLeft,\n    labelRight,\n    className\n  } = _ref;\n  return React.createElement(\"div\", {\n    className: cx('toggle', className)\n  }, labelTop && React.createElement(\"div\", {\n    className: \"toggle-label toggle-label-top\"\n  }, labelTop), React.createElement(\"div\", {\n    className: \"toggle-content\"\n  }, labelLeft && React.createElement(\"span\", {\n    className: \"toggle-label toggle-label-left\"\n  }, labelLeft), React.createElement(Switch, {\n    checked: toggled,\n    onChange: onToggle\n  }), labelRight && React.createElement(\"span\", {\n    className: \"toggle-label toggle-label-right\"\n  }, labelRight)));\n};\n\nToggle.propTypes = {\n  className: PropTypes.string,\n  labelLeft: PropTypes.node,\n  labelRight: PropTypes.node,\n  labelTop: PropTypes.node,\n  onToggle: PropTypes.func.isRequired,\n  toggled: PropTypes.bool.isRequired\n};\nToggle.defaultProps = {\n  className: undefined,\n  labelTop: undefined,\n  labelLeft: undefined,\n  labelRight: undefined\n};\nmodule.exportDefault(Toggle);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"maps\":{\"test\":{\"MapWithMarkerWrapper.test.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/maps/test/MapWithMarkerWrapper.test.jsx                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet shallow;\nmodule.link(\"../../../utils/testHelpers/enzyme\", {\n  shallow(v) {\n    shallow = v;\n  }\n\n}, 2);\nlet MapWithMarkerWrapper;\nmodule.link(\"../MapWithMarkerWrapper\", {\n  default(v) {\n    MapWithMarkerWrapper = v;\n  }\n\n}, 3);\nlet MapWithMarker;\nmodule.link(\"../MapWithMarker\", {\n  default(v) {\n    MapWithMarker = v;\n  }\n\n}, 4);\nlet getAddressString;\nmodule.link(\"../googleMapsHelpers\", {\n  getAddressString(v) {\n    getAddressString = v;\n  }\n\n}, 5);\n\nconst component = props => shallow(React.createElement(MapWithMarkerWrapper, props));\n\ndescribe('MapWithMarkerWrapper', () => {\n  let address;\n  beforeEach(() => {\n    address = {\n      address1: 'Thamel Marg',\n      city: 'Kathmandu',\n      zipCode: '123456'\n    };\n  });\n  it(\"doesn't render MapWithMarker if the address is incomplete\", () => {\n    address = {\n      city: 'Kathmandu',\n      zipCode: '123456'\n    };\n    const errorParagraph = component(address).find('.incomplete-address');\n    expect(errorParagraph.length).to.equal(1);\n  });\n  it('renders MapWithMarker if address is complete', () => expect(component(address).find(MapWithMarker).length).to.equal(1));\n  it('passes the correct address to the MapWithMarker component', () => expect(component(address).find(MapWithMarker).first().prop('address')).to.equal(getAddressString(address)));\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"googleMapsHelpers.test.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/maps/test/googleMapsHelpers.test.js                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet getAddressString, isIncompleteAddress;\nmodule.link(\"../googleMapsHelpers\", {\n  getAddressString(v) {\n    getAddressString = v;\n  },\n\n  isIncompleteAddress(v) {\n    isIncompleteAddress = v;\n  }\n\n}, 1);\ndescribe('googleMapsHelpers', () => {\n  let address;\n  beforeEach(() => {\n    address = {\n      address1: 'Thamel Marg',\n      city: 'Kathmandu',\n      zipCode: '123456'\n    };\n  });\n  describe('isIncompleteAddress', () => {\n    it('returns true when the address is incomplete', () => {\n      address = {\n        city: 'Kathmandu',\n        zipCode: '123456'\n      };\n      expect(isIncompleteAddress(address)).to.equal(true);\n    });\n    it('returns true when the address is an empty string', () => {\n      address = {\n        address1: '',\n        city: 'Kathmandu',\n        zipCode: '123456'\n      };\n      expect(isIncompleteAddress(address)).to.equal(true);\n    });\n    it('returns false when the address is complete', () => {\n      expect(isIncompleteAddress(address)).to.equal(false);\n    });\n  });\n  describe('getAddressString', () => {\n    it('returns a formated address', () => {\n      expect(getAddressString(address)).to.equal('Thamel Marg, 123456 Kathmandu');\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"GoogleMap.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/maps/GoogleMap.jsx                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => GoogleMap\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet GoogleMaps;\nmodule.link(\"meteor/epotek:google-maps\", {\n  GoogleMaps(v) {\n    GoogleMaps = v;\n  }\n\n}, 1);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 2);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 3);\nlet merge;\nmodule.link(\"lodash/merge\", {\n  default(v) {\n    merge = v;\n  }\n\n}, 4);\nlet defaultOptions;\nmodule.link(\"./defaultOptions\", {\n  default(v) {\n    defaultOptions = v;\n  }\n\n}, 5);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nclass GoogleMap extends Component {\n  constructor() {\n    super(...arguments);\n\n    _defineProperty(this, \"addMarker\", () => {\n      const {\n        id,\n        latlng,\n        address,\n        withMarker\n      } = this.props;\n      GoogleMaps.ready(id, map => {\n        const infowindow = new window.google.maps.InfoWindow({\n          content: address\n        });\n        map.instance.setCenter(latlng);\n\n        if (withMarker) {\n          const marker = new window.google.maps.Marker({\n            draggable: false,\n            animation: window.google.maps.Animation.DROP,\n            position: latlng,\n            map: map.instance,\n            id: 'propertyMarker'\n          });\n          marker.addListener('click', () => {\n            infowindow.open(map.instance, marker);\n          });\n          Meteor.setTimeout(() => infowindow.open(map.instance, marker), 1000);\n        }\n      });\n    });\n  }\n\n  componentDidMount() {\n    const {\n      id,\n      latlng,\n      options\n    } = this.props;\n    const combinedOptions = merge({}, defaultOptions, {\n      center: latlng\n    }, options);\n    GoogleMaps.create({\n      name: id,\n      element: this.map,\n      options: combinedOptions\n    });\n    this.addMarker();\n  }\n\n  componentWillUnmount() {\n    const {\n      id\n    } = this.props;\n\n    if (GoogleMaps.maps[id]) {\n      window.google.maps.event.clearInstanceListeners(GoogleMaps.maps[id].instance);\n      delete GoogleMaps.maps[id];\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"google-map\",\n      id: this.props.id,\n      ref: component => {\n        this.map = component;\n      }\n    });\n  }\n\n}\n\nGoogleMap.propTypes = {\n  address: PropTypes.string,\n  id: PropTypes.string,\n  latlng: PropTypes.object.isRequired,\n  options: PropTypes.object,\n  withMarker: PropTypes.bool\n};\nGoogleMap.defaultProps = {\n  id: 'myMap',\n  address: undefined,\n  options: {},\n  withMarker: true\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"GoogleMapContainer.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/maps/GoogleMapContainer.jsx                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet GoogleMaps;\nmodule.link(\"meteor/epotek:google-maps\", {\n  GoogleMaps(v) {\n    GoogleMaps = v;\n  }\n\n}, 1);\nlet Tracker;\nmodule.link(\"meteor/tracker\", {\n  Tracker(v) {\n    Tracker = v;\n  }\n\n}, 2);\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 3);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 4);\nlet classnames;\nmodule.link(\"classnames\", {\n  default(v) {\n    classnames = v;\n  }\n\n}, 5);\nlet Loading;\nmodule.link(\"../Loading\", {\n  default(v) {\n    Loading = v;\n  }\n\n}, 6);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nconst googleMapContainer = WrappedComponent => {\n  class GoogleMapContainer extends Component {\n    constructor(props) {\n      super(props);\n\n      _defineProperty(this, \"trackIsLoading\", () => {\n        this.tracker = Tracker.autorun(() => {\n          const isLoaded = GoogleMaps.loaded();\n          this.setState({\n            isLoaded\n          });\n        });\n      });\n\n      this.state = {\n        isLoaded: false\n      };\n    }\n\n    componentDidMount() {\n      GoogleMaps.load({\n        v: '3',\n        key: Meteor.settings.public.google_maps_key,\n        libraries: 'places'\n      }); // Fuck this, it works for an obscure reason\n      // https://github.com/meteor/react-packages/issues/99#issuecomment-168772806\n\n      setTimeout(this.trackIsLoading, 0);\n    }\n\n    componentWillUnmount() {\n      if (this.tracker) {\n        this.tracker.stop();\n      }\n    }\n\n    render() {\n      const {\n        isLoaded\n      } = this.state;\n      const {\n        className\n      } = this.props;\n      const mapIsLoaded = isLoaded && !!window.google && !!window.google.maps;\n\n      if (mapIsLoaded) {\n        return React.createElement(\"div\", {\n          className: classnames({\n            'map-container': true,\n            [className]: true\n          }),\n          ref: c => {\n            this.container = c;\n          }\n        }, React.createElement(WrappedComponent, this.props));\n      }\n\n      return React.createElement(Loading, null);\n    }\n\n  }\n\n  GoogleMapContainer.propTypes = {\n    className: PropTypes.string\n  };\n  GoogleMapContainer.defaultProps = {\n    className: ''\n  };\n  return GoogleMapContainer;\n};\n\nmodule.exportDefault(googleMapContainer);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"MapWithMarker.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/maps/MapWithMarker.jsx                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet compose, withState, lifecycle, withProps;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  },\n\n  withState(v) {\n    withState = v;\n  },\n\n  lifecycle(v) {\n    lifecycle = v;\n  },\n\n  withProps(v) {\n    withProps = v;\n  }\n\n}, 2);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 3);\nlet withLoading;\nmodule.link(\"../Loading\", {\n  withLoading(v) {\n    withLoading = v;\n  }\n\n}, 4);\nlet GoogleMapContainer;\nmodule.link(\"./GoogleMapContainer\", {\n  default(v) {\n    GoogleMapContainer = v;\n  }\n\n}, 5);\nlet GoogleMap;\nmodule.link(\"./GoogleMap\", {\n  default(v) {\n    GoogleMap = v;\n  }\n\n}, 6);\nlet getLatLngFromAddress;\nmodule.link(\"./googleMapsHelpers\", {\n  getLatLngFromAddress(v) {\n    getLatLngFromAddress = v;\n  }\n\n}, 7);\n\nconst MapWithMarker = props => {\n  const {\n    address,\n    options,\n    id,\n    latlng\n  } = props;\n  return latlng ? React.createElement(GoogleMap, {\n    address: address,\n    latlng: latlng,\n    id: id,\n    options: options\n  }) : React.createElement(\"p\", {\n    className: \"description\"\n  }, React.createElement(T, {\n    id: \"Maps.addressNotFound\"\n  }));\n};\n\nMapWithMarker.propTypes = {\n  address: PropTypes.string.isRequired,\n  id: PropTypes.string,\n  options: PropTypes.object\n};\nMapWithMarker.defaultProps = {\n  options: undefined,\n  id: undefined\n};\nmodule.exportDefault(compose(GoogleMapContainer, withState('loading', 'setLoading', false), withState('latlng', 'setLatlng', undefined), withProps((_ref) => {\n  let {\n    address,\n    setLoading,\n    setLatlng\n  } = _ref;\n  return {\n    getLatlngFromGoogle: () => {\n      setLoading(true);\n      getLatLngFromAddress(address).then(setLatlng).finally(() => setLoading(false));\n    }\n  };\n}), lifecycle({\n  componentDidMount() {\n    this.props.getLatlngFromGoogle();\n  },\n\n  componentWillReceiveProps(_ref2) {\n    let {\n      address\n    } = _ref2;\n\n    if (address !== this.props.address) {\n      this.props.getLatlngFromGoogle();\n    }\n  }\n\n}), withLoading())(MapWithMarker));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"MapWithMarkerWrapper.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/maps/MapWithMarkerWrapper.jsx                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet MapWithMarker;\nmodule.link(\"./MapWithMarker\", {\n  default(v) {\n    MapWithMarker = v;\n  }\n\n}, 2);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 3);\nlet getAddressString, isIncompleteAddress;\nmodule.link(\"./googleMapsHelpers\", {\n  getAddressString(v) {\n    getAddressString = v;\n  },\n\n  isIncompleteAddress(v) {\n    isIncompleteAddress = v;\n  }\n\n}, 4);\n\nconst MapWithMarkerWrapper = (_ref) => {\n  let {\n    address1,\n    zipCode,\n    city,\n    options,\n    className,\n    showIncompleteAddress\n  } = _ref;\n\n  if (isIncompleteAddress({\n    address1,\n    zipCode,\n    city\n  })) {\n    if (!showIncompleteAddress) {\n      return null;\n    }\n\n    return React.createElement(\"p\", {\n      className: \"description incomplete-address\"\n    }, React.createElement(T, {\n      id: \"Maps.incompleteAddress\"\n    }));\n  }\n\n  return React.createElement(MapWithMarker, {\n    address: getAddressString({\n      address1,\n      zipCode,\n      city\n    }),\n    className: \"map \".concat(className),\n    options: options\n  });\n};\n\nMapWithMarkerWrapper.propTypes = {\n  address1: PropTypes.string,\n  city: PropTypes.string,\n  options: PropTypes.object,\n  showIncompleteAddress: PropTypes.bool,\n  zipCode: PropTypes.number\n};\nMapWithMarkerWrapper.defaultProps = {\n  address1: '',\n  city: '',\n  showIncompleteAddress: true,\n  zipCode: undefined,\n  options: {\n    zoom: 10\n  }\n};\nmodule.exportDefault(MapWithMarkerWrapper);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"defaultOptions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/maps/defaultOptions.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet mapStyles;\nmodule.link(\"./mapStyles\", {\n  default(v) {\n    mapStyles = v;\n  }\n\n}, 0);\nconst defaultOptions = {\n  zoom: 14,\n  scrollwheel: false,\n  disableDefaultUI: true,\n  fullscreenControl: true,\n  zoomControl: true,\n  styles: mapStyles\n};\nmodule.exportDefault(defaultOptions);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"googleMapsHelpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/maps/googleMapsHelpers.js                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  getLatLngFromAddress: () => getLatLngFromAddress,\n  getAddressString: () => getAddressString,\n  isIncompleteAddress: () => isIncompleteAddress\n});\nlet geocodeByAddress, getLatLng;\nmodule.link(\"react-places-autocomplete\", {\n  geocodeByAddress(v) {\n    geocodeByAddress = v;\n  },\n\n  getLatLng(v) {\n    getLatLng = v;\n  }\n\n}, 0);\n\nconst getLatLngFromAddress = address => geocodeByAddress(address).then(results => getLatLng(results[0])).catch(console.log);\n\nconst getAddressString = (_ref) => {\n  let {\n    address1,\n    zipCode,\n    city\n  } = _ref;\n  return \"\".concat(address1, \", \").concat(zipCode, \" \").concat(city);\n};\n\nconst isIncompleteAddress = (_ref2) => {\n  let {\n    address1,\n    zipCode,\n    city\n  } = _ref2;\n  return !address1 || !city || !zipCode;\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"mapStyles.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/maps/mapStyles.js                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nconst mapStyles = [{\n  featureType: 'administrative.land_parcel',\n  elementType: 'labels',\n  stylers: [{\n    visibility: 'off'\n  }]\n}, {\n  featureType: 'administrative.province',\n  elementType: 'labels.text'\n}, {\n  featureType: 'landscape',\n  stylers: [{\n    visibility: 'simplified'\n  }]\n}, {\n  featureType: 'poi',\n  stylers: [{\n    visibility: 'simplified'\n  }]\n}, {\n  featureType: 'poi',\n  elementType: 'labels.text',\n  stylers: [{\n    visibility: 'off'\n  }]\n}, {\n  featureType: 'poi.attraction',\n  stylers: [{\n    visibility: 'off'\n  }]\n}, {\n  featureType: 'poi.business',\n  stylers: [{\n    visibility: 'off'\n  }]\n}, {\n  featureType: 'poi.park',\n  elementType: 'labels.text',\n  stylers: [{\n    visibility: 'off'\n  }]\n}, {\n  featureType: 'road.highway',\n  stylers: [{\n    color: '#f3af50'\n  }, {}]\n}, {\n  featureType: 'water',\n  stylers: [{\n    color: '#4c7ff7'\n  }]\n}, {\n  featureType: 'water',\n  elementType: 'labels',\n  stylers: [{\n    visibility: 'simplified'\n  }]\n}];\nmodule.exportDefault(mapStyles);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"tooltips\":{\"Tooltip\":{\"Tooltip.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/tooltips/Tooltip/Tooltip.jsx                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet omit;\nmodule.link(\"lodash/omit\", {\n  default(v) {\n    omit = v;\n  }\n\n}, 2);\nlet FormattedMessage;\nmodule.link(\"react-intl\", {\n  FormattedMessage(v) {\n    FormattedMessage = v;\n  }\n\n}, 3);\nlet Popover;\nmodule.link(\"react-bootstrap/lib/Popover\", {\n  default(v) {\n    Popover = v;\n  }\n\n}, 4);\nlet DialogSimple;\nmodule.link(\"../../DialogSimple/loadable\", {\n  default(v) {\n    DialogSimple = v;\n  }\n\n}, 5);\nlet Button;\nmodule.link(\"../../Button\", {\n  default(v) {\n    Button = v;\n  }\n\n}, 6);\nlet defaultIntlValues;\nmodule.link(\"../../Translation/defaultIntlValues\", {\n  default(v) {\n    defaultIntlValues = v;\n  }\n\n}, 7);\nlet T;\nmodule.link(\"../../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 8);\nlet TooltipSynonyms;\nmodule.link(\"../TooltipSynonyms\", {\n  default(v) {\n    TooltipSynonyms = v;\n  }\n\n}, 9);\n\nconst getTooltip1Id = id => id.includes('tooltip') ? id : \"tooltip.\".concat(id);\n\nconst getTooltip2Id = id => id.includes('tooltip') ? id : \"tooltip2.\".concat(id);\n\nconst Tooltip = (_ref) => {\n  let {\n    tooltipConfig: {\n      id,\n      double: isDoubleTooltip\n    },\n    match\n  } = _ref,\n      rest = (0, _objectWithoutProperties2.default)(_ref, [\"tooltipConfig\", \"match\"]);\n  let content = null;\n\n  if (isDoubleTooltip) {\n    content = React.createElement(\"span\", {\n      className: \"tooltip\"\n    }, React.createElement(FormattedMessage, {\n      id: getTooltip1Id(id)\n    }), React.createElement(DialogSimple, {\n      title: match // Dialogs normally have zIndex of 1500\n      // Usually dialogs should be behind tooltips (which are\n      // at zindex 1501), but when you trigger a dialog from a tooltip,\n      // it should be above the previous tooltip, hence 1502\n      ,\n      style: {\n        zIndex: 1502\n      },\n      buttonStyle: {\n        marginTop: 16\n      },\n      label: React.createElement(FormattedMessage, {\n        id: \"general.learnMore\"\n      }),\n      autoFocus: true,\n      actions: handleClose => React.createElement(Button, {\n        primary: true,\n        label: React.createElement(T, {\n          id: \"general.ok\"\n        }),\n        onClick: handleClose\n      })\n    }, React.createElement(TooltipSynonyms, {\n      tooltipId: id,\n      match: match\n    }), React.createElement(\"br\", null), React.createElement(\"br\", null), React.createElement(FormattedMessage, {\n      id: getTooltip2Id(id),\n      values: defaultIntlValues\n    })));\n  } else {\n    content = React.createElement(FormattedMessage, {\n      id: getTooltip1Id(id)\n    });\n  }\n\n  const passedProps = omit(rest, ['trigger', 'hide', 'match']);\n  return React.createElement(Popover, (0, _extends2.default)({}, passedProps, {\n    id: id\n  }), content);\n};\n\nTooltip.propTypes = {\n  match: PropTypes.string,\n  tooltipConfig: PropTypes.object.isRequired\n};\nmodule.exportDefault(Tooltip);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/tooltips/Tooltip/index.js                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./Tooltip\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"loadable.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/tooltips/Tooltip/loadable.js                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet loadable;\nmodule.link(\"../../../utils/loadable\", {\n  default(v) {\n    loadable = v;\n  }\n\n}, 0);\nmodule.exportDefault(loadable({\n  req: () => require(\"./index\"),\n  loader: () => module.dynamicImport(\"./index\")\n}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"test\":{\"AutoTooltip.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/tooltips/test/AutoTooltip.spec.jsx                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet shallow;\nmodule.link(\"../../../utils/testHelpers/enzyme\", {\n  shallow(v) {\n    shallow = v;\n  }\n\n}, 2);\nlet AutoTooltip, createRegexThatFindsAnyWordFromList;\nmodule.link(\"../AutoTooltip\", {\n  AutoTooltip(v) {\n    AutoTooltip = v;\n  },\n\n  createRegexThatFindsAnyWordFromList(v) {\n    createRegexThatFindsAnyWordFromList = v;\n  }\n\n}, 3);\nlet TOOLTIP_LISTS;\nmodule.link(\"../../../arrays/tooltips\", {\n  TOOLTIP_LISTS(v) {\n    TOOLTIP_LISTS = v;\n  }\n\n}, 4);\ndescribe('<AutoTooltip />', () => {\n  let props;\n\n  const component = () => shallow(React.createElement(AutoTooltip, props));\n\n  beforeEach(() => {\n    props = {};\n  });\n  it('returns null if no children are given ', () => {\n    expect(component().getElement()).to.equal(null);\n  });\n  it('returns a span with text if a child is provided', () => {\n    props = {\n      children: 'test'\n    };\n    expect(component().equals(React.createElement(\"span\", null, \"test\"))).to.equal(true);\n  });\n  it('returns the child if it is not a string', () => {\n    props = {\n      children: React.createElement(React.Fragment, null, \"test\")\n    };\n    expect(component().equals(React.createElement(React.Fragment, null, \"test\"))).to.equal(true);\n  });\n  it('returns a parsed string with tooltips', () => {\n    const text = 'a match1 b';\n    props = {\n      children: text,\n      tooltipList: TOOLTIP_LISTS.DEV\n    };\n    expect(component().text()).to.equal('a <TooltipOverlay /> b');\n  });\n  it('returns a parsed string with multiple tooltips', () => {\n    const text = 'a match1 b match2 c';\n    props = {\n      children: text,\n      tooltipList: TOOLTIP_LISTS.DEV\n    };\n    expect(component().text()).to.equal('a <TooltipOverlay /> b <TooltipOverlay /> c');\n  });\n  it('takes a list as a string to take tooltips from', () => {\n    const text = 'a 123test b';\n    props = {\n      children: text,\n      tooltipList: TOOLTIP_LISTS.OFFER_TABLE\n    };\n    expect(component().text()).to.equal('a 123test b');\n  });\n  it('throws if a non existent list is provided', () => {\n    props = {\n      tooltipList: 'yo',\n      children: 'test'\n    };\n    expect(() => component()).to.throw();\n  });\n  it('returns null if no list is provided', () => {\n    expect(createRegexThatFindsAnyWordFromList()).to.equal(null);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"TooltipContext.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/tooltips/test/TooltipContext.spec.jsx                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet mount, shallow;\nmodule.link(\"../../../utils/testHelpers/enzyme\", {\n  mount(v) {\n    mount = v;\n  },\n\n  shallow(v) {\n    shallow = v;\n  }\n\n}, 2);\nlet TooltipProvider, TooltipContainer;\nmodule.link(\"../TooltipContext\", {\n  TooltipProvider(v) {\n    TooltipProvider = v;\n  },\n\n  TooltipContainer(v) {\n    TooltipContainer = v;\n  }\n\n}, 3);\ndescribe('TooltipContext', () => {\n  it.skip('passes tooltips down', () => {\n    // FIXME: Can't test react context for now\n    // https://github.com/airbnb/enzyme/pulls\n    const id = 'test';\n    const Component = TooltipContainer((_ref) => {\n      let {\n        tooltipList\n      } = _ref;\n      return React.createElement(React.Fragment, null, tooltipList);\n    });\n    const wrapper = mount(React.createElement(TooltipProvider, {\n      tooltipList: id\n    }, React.createElement(React.Fragment, null, React.createElement(\"span\", null, React.createElement(Component, null)))));\n    expect(wrapper.find(Component)).to.have.length(1);\n    expect(wrapper.find(Component).dive().prop('tooltipList')).to.equal(true);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"TooltipSynonyms.spec.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/tooltips/test/TooltipSynonyms.spec.jsx                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet shallow;\nmodule.link(\"../../../utils/testHelpers/enzyme\", {\n  shallow(v) {\n    shallow = v;\n  }\n\n}, 2);\nlet TooltipSynonyms;\nmodule.link(\"../TooltipSynonyms\", {\n  TooltipSynonyms(v) {\n    TooltipSynonyms = v;\n  }\n\n}, 3);\ndescribe('TooltipSynonyms', () => {\n  let props;\n\n  const component = () => shallow(React.createElement(TooltipSynonyms, props));\n\n  beforeEach(() => {\n    props = {\n      tooltips: {}\n    };\n  });\n  it('renders null if no tooltipId is passed', () => {\n    expect(component().getElement()).to.equal(null);\n  });\n  it('renders null if no tooltipId is passed', () => {\n    expect(component().getElement()).to.equal(null);\n  });\n  it('does not render a synonym if none other exists', () => {\n    props = {\n      tooltipId: 'test',\n      match: 'match1',\n      tooltips: {\n        match1: {\n          id: 'test'\n        }\n      }\n    };\n    expect(component().getElement()).to.equal(null);\n    expect(component().contains('match1')).to.equal(false);\n  });\n  it('renders a synonym if 2 exist, but not the match', () => {\n    props = {\n      tooltipId: 'test',\n      match: 'match2',\n      tooltips: {\n        match1: {\n          id: 'test'\n        },\n        match2: {\n          id: 'test'\n        }\n      }\n    };\n    expect(component().contains('match2, match1')).to.equal(false);\n    expect(component().contains('match1')).to.equal(true);\n  });\n  it('renders 2 synonyms if 3 exist, but not the match', () => {\n    props = {\n      tooltipId: 'test',\n      match: 'match2',\n      tooltips: {\n        match1: {\n          id: 'test'\n        },\n        match2: {\n          id: 'test'\n        },\n        match3: {\n          id: 'test'\n        }\n      }\n    };\n    expect(component().contains('match1, match3')).to.equal(true);\n  });\n  it('ignores case', () => {\n    props = {\n      tooltipId: 'test',\n      match: 'Match2',\n      tooltips: {\n        match1: {\n          id: 'test'\n        },\n        match2: {\n          id: 'test'\n        }\n      }\n    };\n    expect(component().contains('match2, match1')).to.equal(false);\n    expect(component().contains('match1')).to.equal(true);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"AutoTooltip.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/tooltips/AutoTooltip.jsx                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nmodule.export({\n  createRegexThatFindsAnyWordFromList: () => createRegexThatFindsAnyWordFromList,\n  reformatString: () => reformatString,\n  autoTooltipParser: () => autoTooltipParser,\n  AutoTooltip: () => AutoTooltip\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet reactStringReplace;\nmodule.link(\"react-string-replace\", {\n  default(v) {\n    reactStringReplace = v;\n  }\n\n}, 2);\nlet tooltips, TOOLTIP_LISTS;\nmodule.link(\"../../arrays/tooltips\", {\n  tooltips(v) {\n    tooltips = v;\n  },\n\n  TOOLTIP_LISTS(v) {\n    TOOLTIP_LISTS = v;\n  }\n\n}, 3);\nlet TooltipOverlay;\nmodule.link(\"./TooltipOverlay\", {\n  default(v) {\n    TooltipOverlay = v;\n  }\n\n}, 4);\nlet TooltipContainer;\nmodule.link(\"./TooltipContext\", {\n  TooltipContainer(v) {\n    TooltipContainer = v;\n  }\n\n}, 5);\n\nconst createRegexThatFindsAnyWordFromList = list => {\n  if (list) {\n    return new RegExp(\"(\".concat(Object.keys(tooltips(list)).join('|'), \")\"), 'gi');\n  }\n\n  return null;\n};\n\nconst reformatString = string => string.replace(/’/gi, \"'\");\n\nconst parseTextForTooltips = props => reactStringReplace(reformatString(props.children), createRegexThatFindsAnyWordFromList(props.tooltipList), (match, index) => React.createElement(TooltipOverlay, (0, _extends2.default)({}, props, {\n  key: index,\n  match: match\n}), match));\n\nconst autoTooltipParser = function (string) {\n  let tooltipList = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : TOOLTIP_LISTS.GENERAL;\n  return parseTextForTooltips({\n    children: string,\n    tooltipList\n  });\n};\n\nconst AutoTooltip = props => {\n  const {\n    children,\n    tooltipId\n  } = props;\n\n  if (!children) {\n    return null;\n  }\n\n  if (typeof children !== 'string') {\n    // If no id is given and children is not a string, return\n    return children;\n  }\n\n  if (tooltipId) {\n    return React.createElement(TooltipOverlay, props, children);\n  } // If no id is given and children is a string,\n  // automatically replace all matching strings with tooltips\n\n\n  const content = parseTextForTooltips(props);\n  return React.createElement(\"span\", null, content);\n};\n\nAutoTooltip.propTypes = {\n  children: PropTypes.node,\n  tooltipList: PropTypes.string\n};\nAutoTooltip.defaultProps = {\n  children: null,\n  tooltipList: TOOLTIP_LISTS.GENERAL\n};\nmodule.exportDefault(TooltipContainer(AutoTooltip));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"TooltipContext.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/tooltips/TooltipContext.jsx                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nmodule.export({\n  TooltipProvider: () => TooltipProvider,\n  TooltipProviderContainer: () => TooltipProviderContainer,\n  TooltipContainer: () => TooltipContainer,\n  TOOLTIP_LISTS: () => TOOLTIP_LISTS\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet TOOLTIP_LISTS;\nmodule.link(\"../../arrays/tooltips\", {\n  TOOLTIP_LISTS(v) {\n    TOOLTIP_LISTS = v;\n  }\n\n}, 2);\nconst {\n  Provider,\n  Consumer\n} = React.createContext();\n\nconst TooltipProvider = (_ref) => {\n  let {\n    tooltipList,\n    children\n  } = _ref;\n  return React.createElement(Provider, {\n    value: tooltipList\n  }, children);\n};\n\nconst TooltipProviderContainer = tooltipList => Component => props => React.createElement(Provider, {\n  value: tooltipList\n}, React.createElement(Component, props));\n\nconst TooltipContainer = Component => props => React.createElement(Consumer, null, tooltipList => React.createElement(Component, (0, _extends2.default)({\n  tooltipList: tooltipList\n}, props)));\n\nTooltipProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  tooltipList: PropTypes.string\n};\nTooltipProvider.defaultProps = {\n  tooltipList: TOOLTIP_LISTS.GENERAL\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"TooltipOverlay.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/tooltips/TooltipOverlay.jsx                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet OverlayTrigger;\nmodule.link(\"react-bootstrap/lib/OverlayTrigger\", {\n  default(v) {\n    OverlayTrigger = v;\n  }\n\n}, 2);\nlet tooltips;\nmodule.link(\"../../arrays/tooltips\", {\n  tooltips(v) {\n    tooltips = v;\n  }\n\n}, 3);\nlet Tooltip;\nmodule.link(\"./Tooltip/loadable\", {\n  default(v) {\n    Tooltip = v;\n  }\n\n}, 4);\n\nconst handleClick = event => {\n  // Trigger tooltip instead of another onClick handler in a parent\n  event.preventDefault();\n  event.stopPropagation();\n};\n\nconst TooltipOverlay = (_ref) => {\n  let {\n    placement,\n    tooltipList,\n    match,\n    trigger,\n    delayShow,\n    children,\n    tooltipId\n  } = _ref;\n  const tooltipConfig = tooltipId ? {\n    id: tooltipId,\n    double: Array.isArray(tooltipId)\n  } : tooltips(tooltipList)[match.toLowerCase()];\n  return React.createElement(OverlayTrigger, {\n    placement: placement,\n    overlay: React.createElement(Tooltip, {\n      placement: placement,\n      trigger: trigger,\n      tooltipConfig: tooltipConfig,\n      match: match\n    }),\n    rootClose: true,\n    animation: false,\n    trigger: trigger,\n    delayShow: delayShow,\n    container: global.document !== undefined ? document.body : undefined,\n    onClick: handleClick\n  }, React.createElement(\"span\", {\n    className: \"tooltip-overlay\",\n    tabIndex: -1\n  }, children));\n};\n\nTooltipOverlay.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.string]).isRequired,\n  delayShow: PropTypes.number,\n  match: PropTypes.oneOfType([PropTypes.element, PropTypes.string]),\n  placement: PropTypes.string,\n  tooltipList: PropTypes.string.isRequired,\n  trigger: PropTypes.arrayOf(PropTypes.string)\n};\nTooltipOverlay.defaultProps = {\n  delayShow: 300,\n  match: undefined,\n  placement: 'bottom',\n  trigger: ['click'] // Can be 'click', 'hover', and/or 'focus'\n\n};\nmodule.exportDefault(TooltipOverlay);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"TooltipSynonyms.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/tooltips/TooltipSynonyms.jsx                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  TooltipSynonyms: () => TooltipSynonyms\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet withProps;\nmodule.link(\"recompose\", {\n  withProps(v) {\n    withProps = v;\n  }\n\n}, 2);\nlet generalTooltips;\nmodule.link(\"../../arrays/tooltips\", {\n  generalTooltips(v) {\n    generalTooltips = v;\n  }\n\n}, 3);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 4);\n\nconst findSynonymsForTooltipId = (tooltipId, match, tooltips) => Object.keys(tooltips).filter(tooltipMatcher => tooltips[tooltipMatcher].id === tooltipId).filter(synonym => synonym !== match.toLowerCase());\n\nconst TooltipSynonyms = (_ref) => {\n  let {\n    tooltipId,\n    match,\n    tooltips\n  } = _ref;\n  const synonyms = findSynonymsForTooltipId(tooltipId, match, tooltips);\n\n  if (!synonyms || synonyms.length <= 0) {\n    return null;\n  }\n\n  return React.createElement(\"span\", {\n    className: \"tooltip-synonyms\"\n  }, React.createElement(\"b\", null, React.createElement(T, {\n    id: \"TooltipSynonyms.title\",\n    values: {\n      count: synonyms.length\n    }\n  }), ': '), React.createElement(\"i\", null, synonyms.join(', ')));\n};\n\nTooltipSynonyms.propTypes = {\n  match: PropTypes.string.isRequired,\n  tooltipId: PropTypes.string.isRequired,\n  tooltips: PropTypes.object.isRequired\n};\nmodule.exportDefault(withProps({\n  tooltips: generalTooltips\n})(TooltipSynonyms));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"BorrowerAddPartner\":{\"BorrowerAddPartner.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/BorrowerAddPartner/BorrowerAddPartner.jsx                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet withProps, withState, compose;\nmodule.link(\"recompose\", {\n  withProps(v) {\n    withProps = v;\n  },\n\n  withState(v) {\n    withState = v;\n  },\n\n  compose(v) {\n    compose = v;\n  }\n\n}, 1);\nlet RadioButtons;\nmodule.link(\"../RadioButtons\", {\n  default(v) {\n    RadioButtons = v;\n  }\n\n}, 2);\nlet addBorrower;\nmodule.link(\"../../api\", {\n  addBorrower(v) {\n    addBorrower = v;\n  }\n\n}, 3);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 4);\nlet Button;\nmodule.link(\"../Button\", {\n  default(v) {\n    Button = v;\n  }\n\n}, 5);\nlet CIVIL_STATUS;\nmodule.link(\"../../api/constants\", {\n  CIVIL_STATUS(v) {\n    CIVIL_STATUS = v;\n  }\n\n}, 6);\n\nconst BorrowerAddPartner = (_ref) => {\n  let {\n    handleClick,\n    isLoading\n  } = _ref;\n  return React.createElement(\"div\", {\n    className: \"borrower-add-partner\"\n  }, React.createElement(Button, {\n    onClick: handleClick,\n    primary: true,\n    outlined: true,\n    label: React.createElement(T, {\n      id: \"BorrowerAddPartner.label\"\n    }),\n    loading: isLoading\n  }));\n};\n\nmodule.exportDefault(compose(withState('isLoading', 'setLoading', false), withProps((_ref2) => {\n  let {\n    loanId,\n    setLoading\n  } = _ref2;\n  return {\n    handleClick: () => {\n      setLoading(true);\n      addBorrower.run({\n        loanId,\n        borrower: {\n          sameAddress: true,\n          civilStatus: CIVIL_STATUS.MARRIED\n        }\n      }).finally(() => setLoading(false));\n    }\n  };\n}))(BorrowerAddPartner));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/BorrowerAddPartner/index.js                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./BorrowerAddPartner\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"CantonField\":{\"CantonField.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/CantonField/CantonField.jsx                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet injectIntl;\nmodule.link(\"react-intl\", {\n  injectIntl(v) {\n    injectIntl = v;\n  }\n\n}, 1);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 2);\nlet AutoFormTextInput;\nmodule.link(\"../AutoForm/AutoFormTextInput\", {\n  default(v) {\n    AutoFormTextInput = v;\n  }\n\n}, 3);\nlet CANTONS;\nmodule.link(\"../../api/constants\", {\n  CANTONS(v) {\n    CANTONS = v;\n  }\n\n}, 4);\n\nconst CantonField = (_ref) => {\n  let {\n    canton,\n    intl: {\n      formatMessage\n    }\n  } = _ref;\n  return React.createElement(AutoFormTextInput, {\n    inputProps: {\n      currentValue: CANTONS[canton] || formatMessage({\n        id: 'Forms.canton.placeholder'\n      }),\n      label: React.createElement(T, {\n        id: \"Forms.canton\"\n      }),\n      style: {\n        width: '100%',\n        maxWidth: '400px'\n      },\n      readOnly: true,\n      required: true,\n      todo: !canton,\n      multiline: true\n    },\n    saveOnChange: true,\n    showValidIconOnChange: true,\n    updateFunc: () => Promise.resolve()\n  });\n};\n\nmodule.exportDefault(injectIntl(CantonField));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Checkbox\":{\"Checkbox.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Checkbox/Checkbox.jsx                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet FormControlLabel;\nmodule.link(\"@material-ui/core/FormControlLabel\", {\n  default(v) {\n    FormControlLabel = v;\n  }\n\n}, 2);\nlet MuiCheckbox;\nmodule.link(\"@material-ui/core/Checkbox\", {\n  default(v) {\n    MuiCheckbox = v;\n  }\n\n}, 3);\n\nconst Checkbox = (_ref) => {\n  let {\n    value,\n    onChange,\n    id\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"value\", \"onChange\", \"id\"]);\n  return React.createElement(FormControlLabel, (0, _extends2.default)({\n    control: React.createElement(MuiCheckbox, {\n      className: \"checkbox\",\n      checked: value,\n      onChange: onChange,\n      value: id\n    })\n  }, props));\n};\n\nCheckbox.propTypes = {\n  disabled: PropTypes.bool,\n  id: PropTypes.string,\n  label: PropTypes.node,\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.bool.isRequired\n};\nCheckbox.defaultProps = {\n  id: undefined,\n  label: undefined,\n  disabled: false\n};\nmodule.exportDefault(Checkbox);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Checkbox/index.js                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./Checkbox\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"DateField\":{\"DateField.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/DateField/DateField.jsx                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet moment;\nmodule.link(\"moment\", {\n  default(v) {\n    moment = v;\n  }\n\n}, 1);\nlet TextField;\nmodule.link(\"../AutoForm2/CustomTextField\", {\n  default(v) {\n    TextField = v;\n  }\n\n}, 2);\n\nconst DateField = props => React.createElement(TextField, (0, _extends2.default)({}, props, {\n  value: props.value && moment(props.value).format('YYYY-MM-DD'),\n  type: \"date\",\n  InputLabelProps: {\n    shrink: true\n  }\n}));\n\nmodule.exportDefault(DateField);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/DateField/index.js                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./DateField\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"DialogSimple\":{\"DialogSimple.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/DialogSimple/DialogSimple.jsx                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nmodule.export({\n  default: () => DialogSimple\n});\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet Dialog;\nmodule.link(\"../Material/Dialog\", {\n  default(v) {\n    Dialog = v;\n  }\n\n}, 2);\nlet Button;\nmodule.link(\"../Button\", {\n  default(v) {\n    Button = v;\n  }\n\n}, 3);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 4);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nclass DialogSimple extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleOpen\", event => this.setState({\n      open: true\n    }, () => this.props.onOpen && this.props.onOpen()));\n\n    _defineProperty(this, \"handleClose\", isSubmit => this.setState({\n      open: false,\n      isCancel: !isSubmit\n    }));\n\n    _defineProperty(this, \"disableClose\", () => this.setState({\n      disabled: true\n    }));\n\n    _defineProperty(this, \"enableClose\", () => this.setState({\n      disabled: false\n    }));\n\n    this.state = {\n      open: false,\n      disabled: false,\n      isCancel: true\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!this.props.close && nextProps.close) {\n      this.setState({\n        open: false\n      });\n    }\n  }\n\n  render() {\n    const {\n      open,\n      disabled,\n      isCancel\n    } = this.state;\n    const _this$props = this.props,\n          {\n      actions,\n      autoFocus,\n      autoScroll,\n      bodyStyle,\n      buttonProps,\n      buttonStyle,\n      closeOnly,\n      children,\n      contentStyle,\n      important,\n      label,\n      onOpen,\n      passProps,\n      primary,\n      raised = true,\n      renderProps,\n      rootStyle,\n      secondary,\n      style,\n      title,\n      renderTrigger,\n      onClose = () => null\n    } = _this$props,\n          otherProps = (0, _objectWithoutProperties2.default)(_this$props, [\"actions\", \"autoFocus\", \"autoScroll\", \"bodyStyle\", \"buttonProps\", \"buttonStyle\", \"closeOnly\", \"children\", \"contentStyle\", \"important\", \"label\", \"onOpen\", \"passProps\", \"primary\", \"raised\", \"renderProps\", \"rootStyle\", \"secondary\", \"style\", \"title\", \"renderTrigger\", \"onClose\"]);\n    const finalActions = actions && actions(this.handleClose) || (closeOnly ? [React.createElement(Button, {\n      primary: true,\n      label: React.createElement(T, {\n        id: \"general.close\"\n      }),\n      onClick: args => {\n        onClose();\n        this.handleClose(args);\n      },\n      key: \"close\"\n    })] : [React.createElement(Button, {\n      primary: true,\n      label: React.createElement(T, {\n        id: \"general.cancel\"\n      }),\n      onClick: this.handleClose,\n      key: \"cancel\"\n    }), React.createElement(Button, {\n      primary: true,\n      label: \"Ok\",\n      onClick: () => this.handleClose(true),\n      autoFocus: autoFocus // TODO doesn't work with tooltips\n      ,\n      disabled: disabled,\n      key: \"submit\"\n    })]);\n    const childProps = {\n      disableClose: this.disableClose,\n      enableClose: this.enableClose,\n      isCancel,\n      handleClose: this.handleClose\n    };\n    return (// Prevent triggering background clicks\n      React.createElement(\"span\", {\n        style: rootStyle,\n        onClick: e => e.stopPropagation()\n      }, renderTrigger ? renderTrigger({\n        handleOpen: this.handleOpen\n      }) : React.createElement(Button, (0, _extends2.default)({\n        raised: raised,\n        label: label,\n        onClick: this.handleOpen,\n        primary: primary,\n        secondary: secondary,\n        style: buttonStyle\n      }, buttonProps)), React.createElement(Dialog, (0, _extends2.default)({}, otherProps, {\n        title: title,\n        actions: finalActions,\n        important: important,\n        open: open,\n        onClose: this.handleClose,\n        style: style\n      }), !!children && passProps ? React.cloneElement(children, (0, _objectSpread2.default)({}, childProps)) : renderProps ? children(childProps) : children))\n    );\n  }\n\n}\n\nDialogSimple.propTypes = {\n  actions: PropTypes.func,\n  autoFocus: PropTypes.bool,\n  autoScroll: PropTypes.bool,\n  buttonStyle: PropTypes.objectOf(PropTypes.any),\n  close: PropTypes.bool,\n  closeOnly: PropTypes.bool,\n  important: PropTypes.bool,\n  label: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  onOpen: PropTypes.func,\n  passProps: PropTypes.bool,\n  primary: PropTypes.bool,\n  rootStyle: PropTypes.objectOf(PropTypes.any),\n  secondary: PropTypes.bool,\n  title: PropTypes.oneOfType([PropTypes.string, PropTypes.object])\n};\nDialogSimple.defaultProps = {\n  actions: undefined,\n  autoFocus: false,\n  autoScroll: false,\n  buttonStyle: {},\n  closeOnly: false,\n  close: undefined,\n  important: false,\n  label: null,\n  onOpen: () => {},\n  passProps: false,\n  primary: false,\n  rootStyle: {},\n  secondary: false,\n  title: null\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/DialogSimple/index.js                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./DialogSimple\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"loadable.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/DialogSimple/loadable.js                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet loadable;\nmodule.link(\"../../utils/loadable\", {\n  default(v) {\n    loadable = v;\n  }\n\n}, 0);\nmodule.exportDefault(loadable({\n  req: () => require(\"./index\"),\n  loader: () => module.dynamicImport(\"./index\")\n}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"DropdownMenu\":{\"DropdownMenu.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/DropdownMenu/DropdownMenu.jsx                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet Menu;\nmodule.link(\"../Material/Menu\", {\n  default(v) {\n    Menu = v;\n  }\n\n}, 2);\nlet IconButton;\nmodule.link(\"../IconButton\", {\n  default(v) {\n    IconButton = v;\n  }\n\n}, 3);\nlet Button;\nmodule.link(\"../Button\", {\n  default(v) {\n    Button = v;\n  }\n\n}, 4);\nlet DropdownMenuContainer;\nmodule.link(\"./DropdownMenuContainer\", {\n  default(v) {\n    DropdownMenuContainer = v;\n  }\n\n}, 5);\n\nconst getTrigger = (_ref) => {\n  let {\n    button,\n    buttonProps,\n    renderTrigger,\n    onClickHandler,\n    iconType,\n    tooltip,\n    tooltipPlacement,\n    disabled\n  } = _ref;\n\n  if (button) {\n    return React.createElement(Button, (0, _extends2.default)({\n      onClick: onClickHandler,\n      disabled: disabled\n    }, buttonProps));\n  }\n\n  if (renderTrigger) {\n    return renderTrigger({\n      handleOpen: onClickHandler,\n      disabled\n    });\n  }\n\n  return React.createElement(IconButton, (0, _extends2.default)({\n    onClick: onClickHandler,\n    type: iconType,\n    tooltip: tooltip,\n    tooltipPlacement: tooltipPlacement,\n    disabled: disabled\n  }, buttonProps));\n};\n\nconst DropdownMenu = (_ref2) => {\n  let {\n    anchorEl,\n    button,\n    buttonProps,\n    className,\n    handleClose,\n    handleOpen,\n    iconType,\n    isOpen,\n    options,\n    style,\n    tooltip,\n    tooltipPlacement,\n    renderTrigger,\n    maxHeight,\n    paperClassName,\n    disabled,\n    noWrapper\n  } = _ref2;\n\n  const onClickHandler = event => {\n    // Prevent background from receiving clicks\n    event.stopPropagation(); // Pass currentTarget directly, to avoid it resetting to null\n    // https://stackoverflow.com/questions/17607766/how-come-my-event-currenttarget-is-changing-automatically\n\n    handleOpen(event.currentTarget);\n  };\n\n  const toRender = React.createElement(React.Fragment, null, getTrigger({\n    button,\n    buttonProps,\n    renderTrigger,\n    onClickHandler,\n    iconType,\n    tooltip,\n    tooltipPlacement,\n    disabled\n  }), React.createElement(Menu, {\n    anchorEl: anchorEl,\n    open: isOpen,\n    onClose: event => {\n      // Stop propagation here to avoid parents' onClick from firing\n      event.stopPropagation();\n      handleClose();\n    },\n    classes: {\n      paper: paperClassName\n    },\n    PaperProps: {\n      style: {\n        maxHeight: maxHeight >= 0 ? maxHeight === 0 ? maxHeight : undefined : 48 * 4.5\n      }\n    }\n  }, options));\n\n  if (noWrapper) {\n    return toRender;\n  }\n\n  return React.createElement(\"div\", {\n    className: className,\n    style: (0, _objectSpread2.default)({}, style)\n  }, toRender);\n};\n\nDropdownMenu.propTypes = {\n  anchorEl: PropTypes.any,\n  className: PropTypes.string,\n  handleClose: PropTypes.func.isRequired,\n  handleOpen: PropTypes.func.isRequired,\n  iconType: PropTypes.string,\n  isOpen: PropTypes.bool.isRequired,\n  options: PropTypes.array.isRequired,\n  style: PropTypes.objectOf(PropTypes.any),\n  tooltip: PropTypes.node,\n  tooltipPlacement: PropTypes.string\n};\nDropdownMenu.defaultProps = {\n  anchorEl: null,\n  className: '',\n  iconType: undefined,\n  style: {},\n  tooltip: undefined,\n  tooltipPlacement: undefined\n};\nmodule.exportDefault(DropdownMenuContainer(DropdownMenu));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"DropdownMenuContainer.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/DropdownMenu/DropdownMenuContainer.jsx                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet compose, withProps, withStateHandlers, withState;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  },\n\n  withProps(v) {\n    withProps = v;\n  },\n\n  withStateHandlers(v) {\n    withStateHandlers = v;\n  },\n\n  withState(v) {\n    withState = v;\n  }\n\n}, 1);\nlet ListItemIcon;\nmodule.link(\"@material-ui/core/ListItemIcon\", {\n  default(v) {\n    ListItemIcon = v;\n  }\n\n}, 2);\nlet ListItemText;\nmodule.link(\"@material-ui/core/ListItemText\", {\n  default(v) {\n    ListItemText = v;\n  }\n\n}, 3);\nlet withStyles;\nmodule.link(\"@material-ui/core/styles\", {\n  withStyles(v) {\n    withStyles = v;\n  }\n\n}, 4);\nlet Link;\nmodule.link(\"../Link\", {\n  default(v) {\n    Link = v;\n  }\n\n}, 5);\nlet Divider;\nmodule.link(\"../Material/Divider\", {\n  default(v) {\n    Divider = v;\n  }\n\n}, 6);\nlet MenuItem;\nmodule.link(\"../Material/MenuItem\", {\n  default(v) {\n    MenuItem = v;\n  }\n\n}, 7);\nlet Icon;\nmodule.link(\"../Icon\", {\n  default(v) {\n    Icon = v;\n  }\n\n}, 8);\n\nconst styles = theme => ({\n  menuItem: {\n    '&:hover': {\n      backgroundColor: theme.palette.primary.main,\n      '& $colorClass': {\n        color: theme.palette.common.white\n      }\n    }\n  },\n  menuItemRoot: {\n    height: 'unset'\n  },\n  colorClass: {}\n});\n\nconst mapOption = (_ref, handleClose, _ref2) => {\n  let {\n    id,\n    onClick,\n    link,\n    icon,\n    label,\n    dividerTop,\n    dividerBottom,\n    secondary\n  } = _ref,\n      otherProps = (0, _objectWithoutProperties2.default)(_ref, [\"id\", \"onClick\", \"link\", \"icon\", \"label\", \"dividerTop\", \"dividerBottom\", \"secondary\"]);\n  let {\n    menuItem: menuItemClass,\n    menuItemRoot,\n    colorClass\n  } = _ref2;\n  const arr = [React.createElement(MenuItem, (0, _extends2.default)({\n    key: id,\n    onClick: (event, index) => {\n      // Prevent background from receiving clicks\n      event.stopPropagation();\n\n      if (onClick) {\n        onClick(index);\n      }\n\n      handleClose();\n    }\n  }, otherProps, {\n    component: link ? Link : null,\n    className: menuItemClass,\n    classes: {\n      root: menuItemRoot\n    }\n  }), icon && React.createElement(ListItemIcon, {\n    className: colorClass\n  }, React.createElement(Icon, {\n    type: icon\n  })), React.createElement(ListItemText, {\n    classes: {\n      primary: colorClass,\n      secondary: colorClass\n    },\n    primary: label,\n    secondary: secondary\n  }))]; // Add support for adding Dividers at the top or bottom of an option\n\n  if (dividerTop) {\n    arr.unshift(React.createElement(Divider, {\n      key: \"divider\".concat(id)\n    }));\n  } else if (dividerBottom) {\n    arr.push(React.createElement(Divider, {\n      key: \"divider\".concat(id)\n    }));\n  }\n\n  return arr;\n};\n\nconst addState = compose(withState('fetchedOptions', 'setFetchedOptions', []), withStateHandlers({\n  anchorEl: null,\n  isOpen: false,\n  fetchedOptions: []\n}, {\n  handleOpen: (_, _ref3) => {\n    let {\n      fetchOptions,\n      setFetchedOptions\n    } = _ref3;\n    return currentTarget => {\n      if (fetchOptions) {\n        fetchOptions().then(setFetchedOptions);\n      }\n\n      return {\n        isOpen: true,\n        anchorEl: currentTarget\n      };\n    };\n  },\n  handleClose: () => () => ({\n    isOpen: false\n  })\n}));\nmodule.exportDefault(compose(addState, withStyles(styles), withProps((_ref4) => {\n  let {\n    options = [],\n    fetchedOptions = [],\n    fetchOptions,\n    handleClose,\n    classes\n  } = _ref4;\n\n  if (fetchOptions) {\n    return {\n      options: fetchedOptions.map(option => mapOption(option, handleClose, classes))\n    };\n  }\n\n  return {\n    options: options.map(option => mapOption(option, handleClose, classes))\n  };\n})));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/DropdownMenu/index.js                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./DropdownMenu\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"ErrorBoundary\":{\"DevError.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/ErrorBoundary/DevError.jsx                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 2);\n\nconst DevError = (_ref) => {\n  let {\n    error\n  } = _ref;\n  return Meteor.isDevelopment || Meteor.isTest ? React.createElement(\"div\", {\n    className: \"error\",\n    style: {\n      margin: 40\n    }\n  }, React.createElement(\"span\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center'\n    }\n  }, React.createElement(\"h4\", null, error.name), \":\", React.createElement(\"h3\", {\n    style: {\n      marginLeft: 16\n    }\n  }, error.message)), error.stack) : null;\n};\n\nDevError.propTypes = {\n  error: PropTypes.object.isRequired\n};\nmodule.exportDefault(DevError);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"LayoutError.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/ErrorBoundary/LayoutError.jsx                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet Button;\nmodule.link(\"../Button\", {\n  default(v) {\n    Button = v;\n  }\n\n}, 2);\nlet DevError;\nmodule.link(\"./DevError\", {\n  default(v) {\n    DevError = v;\n  }\n\n}, 3);\n\n// Don't user Translation here, because Loadable depends on it...\n// Find another solution once we really need this to be translated\nconst LayoutError = (_ref) => {\n  let {\n    style,\n    error\n  } = _ref;\n  return React.createElement(\"div\", {\n    className: \"flex-col center animated jackInTheBox\",\n    style: style\n  }, React.createElement(\"h2\", {\n    className: \"error\"\n  }, \"Woops une erreur!\"), React.createElement(\"div\", {\n    className: \"description\"\n  }, React.createElement(\"p\", null, \"Quelque chose n'a pas fonctionn\\xE9 comme pr\\xE9vu, on en est d\\xE9j\\xE0 inform\\xE9s, et vous pouvez essayer de recharger la page.\", React.createElement(\"br\", null), \"Si \\xE7a ne r\\xE9soud pas le probl\\xE8me, \\xE9crivez-nous \\xE0 digital@e-potek.ch.\")), React.createElement(DevError, {\n    error: error\n  }), React.createElement(\"div\", {\n    className: \"flex center\"\n  }, React.createElement(Button, {\n    raised: true,\n    color: \"primary\",\n    onClick: () => location.reload()\n  }, \"Recharger la page\"), React.createElement(\"a\", {\n    href: \"/\",\n    className: \"home-link\"\n  }, React.createElement(Button, {\n    raised: true,\n    color: \"secondary\"\n  }, \"Page d'accueil\"))));\n};\n\nLayoutError.propTypes = {\n  error: PropTypes.object.isRequired,\n  style: PropTypes.object\n};\nLayoutError.defaultProps = {\n  style: {}\n};\nmodule.exportDefault(LayoutError);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"HtmlPreview\":{\"HtmlPreview.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/HtmlPreview/HtmlPreview.jsx                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\n\nconst HtmlPreview = (_ref) => {\n  let {\n    value\n  } = _ref;\n  return React.createElement(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: value\n    }\n  });\n};\n\nmodule.exportDefault(HtmlPreview);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/HtmlPreview/index.js                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./HtmlPreview\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Icon\":{\"Icon.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Icon/Icon.jsx                                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nmodule.export({\n  iconMap: () => iconMap\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet Tooltip;\nmodule.link(\"@material-ui/core/Tooltip\", {\n  default(v) {\n    Tooltip = v;\n  }\n\n}, 2);\nlet Badge;\nmodule.link(\"@material-ui/core/Badge\", {\n  default(v) {\n    Badge = v;\n  }\n\n}, 3);\nlet CheckIcon;\nmodule.link(\"@material-ui/icons/Check\", {\n  default(v) {\n    CheckIcon = v;\n  }\n\n}, 4);\nlet CloseIcon;\nmodule.link(\"@material-ui/icons/Close\", {\n  default(v) {\n    CloseIcon = v;\n  }\n\n}, 5);\nlet AddIcon;\nmodule.link(\"@material-ui/icons/AddCircleOutline\", {\n  default(v) {\n    AddIcon = v;\n  }\n\n}, 6);\nlet RemoveIcon;\nmodule.link(\"@material-ui/icons/RemoveCircleOutline\", {\n  default(v) {\n    RemoveIcon = v;\n  }\n\n}, 7);\nlet LoopIcon;\nmodule.link(\"@material-ui/icons/Loop\", {\n  default(v) {\n    LoopIcon = v;\n  }\n\n}, 8);\nlet WarningIcon;\nmodule.link(\"@material-ui/icons/Warning\", {\n  default(v) {\n    WarningIcon = v;\n  }\n\n}, 9);\nlet ForumIcon;\nmodule.link(\"@material-ui/icons/Forum\", {\n  default(v) {\n    ForumIcon = v;\n  }\n\n}, 10);\nlet MailIcon;\nmodule.link(\"@material-ui/icons/MailOutline\", {\n  default(v) {\n    MailIcon = v;\n  }\n\n}, 11);\nlet PhoneIcon;\nmodule.link(\"@material-ui/icons/Call\", {\n  default(v) {\n    PhoneIcon = v;\n  }\n\n}, 12);\nlet MenuIcon;\nmodule.link(\"@material-ui/icons/Menu\", {\n  default(v) {\n    MenuIcon = v;\n  }\n\n}, 13);\nlet WaitingIcon;\nmodule.link(\"@material-ui/icons/HourglassEmpty\", {\n  default(v) {\n    WaitingIcon = v;\n  }\n\n}, 14);\nlet ArrowUp;\nmodule.link(\"@material-ui/icons/KeyboardArrowUp\", {\n  default(v) {\n    ArrowUp = v;\n  }\n\n}, 15);\nlet DropDownCircle;\nmodule.link(\"@material-ui/icons/ArrowDropDownCircle\", {\n  default(v) {\n    DropDownCircle = v;\n  }\n\n}, 16);\nlet ArrowDown;\nmodule.link(\"@material-ui/icons/KeyboardArrowDown\", {\n  default(v) {\n    ArrowDown = v;\n  }\n\n}, 17);\nlet ArrowLeft;\nmodule.link(\"@material-ui/icons/KeyboardArrowLeft\", {\n  default(v) {\n    ArrowLeft = v;\n  }\n\n}, 18);\nlet ArrowRight;\nmodule.link(\"@material-ui/icons/KeyboardArrowRight\", {\n  default(v) {\n    ArrowRight = v;\n  }\n\n}, 19);\nlet SearchIcon;\nmodule.link(\"@material-ui/icons/Search\", {\n  default(v) {\n    SearchIcon = v;\n  }\n\n}, 20);\nlet PowerOffIcon;\nmodule.link(\"@material-ui/icons/PowerSettingsNew\", {\n  default(v) {\n    PowerOffIcon = v;\n  }\n\n}, 21);\nlet LockOpen;\nmodule.link(\"@material-ui/icons/LockOpen\", {\n  default(v) {\n    LockOpen = v;\n  }\n\n}, 22);\nlet Lock;\nmodule.link(\"@material-ui/icons/Lock\", {\n  default(v) {\n    Lock = v;\n  }\n\n}, 23);\nlet BuildingIcon;\nmodule.link(\"@material-ui/icons/Business\", {\n  default(v) {\n    BuildingIcon = v;\n  }\n\n}, 24);\nlet HomeIcon;\nmodule.link(\"@material-ui/icons/Home\", {\n  default(v) {\n    HomeIcon = v;\n  }\n\n}, 25);\nlet AssessmentIcon;\nmodule.link(\"@material-ui/icons/Assessment\", {\n  default(v) {\n    AssessmentIcon = v;\n  }\n\n}, 26);\nlet FolderIcon;\nmodule.link(\"@material-ui/icons/FolderOpen\", {\n  default(v) {\n    FolderIcon = v;\n  }\n\n}, 27);\nlet Person;\nmodule.link(\"@material-ui/icons/Person\", {\n  default(v) {\n    Person = v;\n  }\n\n}, 28);\nlet FaceIcon;\nmodule.link(\"@material-ui/icons/Face\", {\n  default(v) {\n    FaceIcon = v;\n  }\n\n}, 29);\nlet Eye;\nmodule.link(\"@material-ui/icons/Visibility\", {\n  default(v) {\n    Eye = v;\n  }\n\n}, 30);\nlet EyeCrossed;\nmodule.link(\"@material-ui/icons/VisibilityOff\", {\n  default(v) {\n    EyeCrossed = v;\n  }\n\n}, 31);\nlet SortIcon;\nmodule.link(\"@material-ui/icons/Sort\", {\n  default(v) {\n    SortIcon = v;\n  }\n\n}, 32);\nlet MoreIcon;\nmodule.link(\"@material-ui/icons/MoreHoriz\", {\n  default(v) {\n    MoreIcon = v;\n  }\n\n}, 33);\nlet AccountCircle;\nmodule.link(\"@material-ui/icons/AccountCircle\", {\n  default(v) {\n    AccountCircle = v;\n  }\n\n}, 34);\nlet Apps;\nmodule.link(\"@material-ui/icons/Apps\", {\n  default(v) {\n    Apps = v;\n  }\n\n}, 35);\nlet DollarSign;\nmodule.link(\"@material-ui/icons/AttachMoney\", {\n  default(v) {\n    DollarSign = v;\n  }\n\n}, 36);\nlet ContactMail;\nmodule.link(\"@material-ui/icons/ContactMail\", {\n  default(v) {\n    ContactMail = v;\n  }\n\n}, 37);\nlet People;\nmodule.link(\"@material-ui/icons/People\", {\n  default(v) {\n    People = v;\n  }\n\n}, 38);\nlet DeveloperMode;\nmodule.link(\"@material-ui/icons/DeveloperMode\", {\n  default(v) {\n    DeveloperMode = v;\n  }\n\n}, 39);\nlet ErrorIcon;\nmodule.link(\"@material-ui/icons/Error\", {\n  default(v) {\n    ErrorIcon = v;\n  }\n\n}, 40);\nlet CheckCircle;\nmodule.link(\"@material-ui/icons/CheckCircle\", {\n  default(v) {\n    CheckCircle = v;\n  }\n\n}, 41);\nlet RadioButtonChecked;\nmodule.link(\"@material-ui/icons/RadioButtonChecked\", {\n  default(v) {\n    RadioButtonChecked = v;\n  }\n\n}, 42);\nlet Edit;\nmodule.link(\"@material-ui/icons/Edit\", {\n  default(v) {\n    Edit = v;\n  }\n\n}, 43);\nlet TrendingUp;\nmodule.link(\"@material-ui/icons/TrendingUp\", {\n  default(v) {\n    TrendingUp = v;\n  }\n\n}, 44);\nlet TrendingDown;\nmodule.link(\"@material-ui/icons/TrendingDown\", {\n  default(v) {\n    TrendingDown = v;\n  }\n\n}, 45);\nlet TrendingFlat;\nmodule.link(\"@material-ui/icons/TrendingFlat\", {\n  default(v) {\n    TrendingFlat = v;\n  }\n\n}, 46);\nlet Star;\nmodule.link(\"@material-ui/icons/Star\", {\n  default(v) {\n    Star = v;\n  }\n\n}, 47);\nlet StarHalf;\nmodule.link(\"@material-ui/icons/StarHalf\", {\n  default(v) {\n    StarHalf = v;\n  }\n\n}, 48);\nlet StarEmpty;\nmodule.link(\"@material-ui/icons/StarBorder\", {\n  default(v) {\n    StarEmpty = v;\n  }\n\n}, 49);\nlet PersonAdd;\nmodule.link(\"@material-ui/icons/PersonAdd\", {\n  default(v) {\n    PersonAdd = v;\n  }\n\n}, 50);\nlet OfflinePin;\nmodule.link(\"@material-ui/icons/OfflinePin\", {\n  default(v) {\n    OfflinePin = v;\n  }\n\n}, 51);\nlet Save;\nmodule.link(\"@material-ui/icons/Save\", {\n  default(v) {\n    Save = v;\n  }\n\n}, 52);\nlet SupervisorAccount;\nmodule.link(\"@material-ui/icons/SupervisedUserCircle\", {\n  default(v) {\n    SupervisorAccount = v;\n  }\n\n}, 53);\nlet FlashOn;\nmodule.link(\"@material-ui/icons/FlashOn\", {\n  default(v) {\n    FlashOn = v;\n  }\n\n}, 54);\nlet Report;\nmodule.link(\"@material-ui/icons/Report\", {\n  default(v) {\n    Report = v;\n  }\n\n}, 55);\nlet DeleteForever;\nmodule.link(\"@material-ui/icons/DeleteForever\", {\n  default(v) {\n    DeleteForever = v;\n  }\n\n}, 56);\nlet DeleteSweep;\nmodule.link(\"@material-ui/icons/DeleteSweep\", {\n  default(v) {\n    DeleteSweep = v;\n  }\n\n}, 57);\nlet GroupAdd;\nmodule.link(\"@material-ui/icons/GroupAdd\", {\n  default(v) {\n    GroupAdd = v;\n  }\n\n}, 58);\nlet ExpandMoreIcon;\nmodule.link(\"@material-ui/icons/ExpandMore\", {\n  default(v) {\n    ExpandMoreIcon = v;\n  }\n\n}, 59);\nlet SettingsBackupRestore;\nmodule.link(\"@material-ui/icons/SettingsBackupRestore\", {\n  default(v) {\n    SettingsBackupRestore = v;\n  }\n\n}, 60);\nlet FilterList;\nmodule.link(\"@material-ui/icons/FilterList\", {\n  default(v) {\n    FilterList = v;\n  }\n\n}, 61);\nlet ArrowDownward;\nmodule.link(\"@material-ui/icons/ArrowDownward\", {\n  default(v) {\n    ArrowDownward = v;\n  }\n\n}, 62);\nlet ArrowUpward;\nmodule.link(\"@material-ui/icons/ArrowUpward\", {\n  default(v) {\n    ArrowUpward = v;\n  }\n\n}, 63);\nlet Domain;\nmodule.link(\"@material-ui/icons/Domain\", {\n  default(v) {\n    Domain = v;\n  }\n\n}, 64);\nlet Info;\nmodule.link(\"@material-ui/icons/Info\", {\n  default(v) {\n    Info = v;\n  }\n\n}, 65);\nlet AttachFile;\nmodule.link(\"@material-ui/icons/AttachFile\", {\n  default(v) {\n    AttachFile = v;\n  }\n\n}, 66);\nlet CloudDownload;\nmodule.link(\"@material-ui/icons/CloudDownload\", {\n  default(v) {\n    CloudDownload = v;\n  }\n\n}, 67);\nlet LocalHospital;\nmodule.link(\"@material-ui/icons/LocalHospital\", {\n  default(v) {\n    LocalHospital = v;\n  }\n\n}, 68);\nlet Help;\nmodule.link(\"@material-ui/icons/Help\", {\n  default(v) {\n    Help = v;\n  }\n\n}, 69);\nlet MonetizationOn;\nmodule.link(\"@material-ui/icons/MonetizationOn\", {\n  default(v) {\n    MonetizationOn = v;\n  }\n\n}, 70);\nlet InsertChart;\nmodule.link(\"@material-ui/icons/InsertChart\", {\n  default(v) {\n    InsertChart = v;\n  }\n\n}, 71);\nlet Image;\nmodule.link(\"@material-ui/icons/Image\", {\n  default(v) {\n    Image = v;\n  }\n\n}, 72);\nlet Delete;\nmodule.link(\"@material-ui/icons/Delete\", {\n  default(v) {\n    Delete = v;\n  }\n\n}, 73);\nlet Phonelink;\nmodule.link(\"@material-ui/icons/Phonelink\", {\n  default(v) {\n    Phonelink = v;\n  }\n\n}, 74);\nlet OpenInNew;\nmodule.link(\"@material-ui/icons/OpenInNew\", {\n  default(v) {\n    OpenInNew = v;\n  }\n\n}, 75);\nlet Add;\nmodule.link(\"@material-ui/icons/Add\", {\n  default(v) {\n    Add = v;\n  }\n\n}, 76);\nlet Settings;\nmodule.link(\"@material-ui/icons/Settings\", {\n  default(v) {\n    Settings = v;\n  }\n\n}, 77);\nlet Event;\nmodule.link(\"@material-ui/icons/Event\", {\n  default(v) {\n    Event = v;\n  }\n\n}, 78);\nlet Computer;\nmodule.link(\"@material-ui/icons/Computer\", {\n  default(v) {\n    Computer = v;\n  }\n\n}, 79);\nlet Notifications;\nmodule.link(\"@material-ui/icons/Notifications\", {\n  default(v) {\n    Notifications = v;\n  }\n\n}, 80);\nlet Snooze;\nmodule.link(\"@material-ui/icons/Snooze\", {\n  default(v) {\n    Snooze = v;\n  }\n\n}, 81);\nlet DragHandle;\nmodule.link(\"@material-ui/icons/DragHandle\", {\n  default(v) {\n    DragHandle = v;\n  }\n\n}, 82);\nlet PriorityHigh;\nmodule.link(\"@material-ui/icons/PriorityHigh\", {\n  default(v) {\n    PriorityHigh = v;\n  }\n\n}, 83);\nconst iconMap = {\n  close: CloseIcon,\n  check: CheckIcon,\n  add: AddIcon,\n  addBasic: Add,\n  remove: RemoveIcon,\n  warning: WarningIcon,\n  menu: MenuIcon,\n  forum: ForumIcon,\n  mail: MailIcon,\n  phone: PhoneIcon,\n  waiting: WaitingIcon,\n  up: ArrowUp,\n  down: ArrowDown,\n  right: ArrowRight,\n  left: ArrowLeft,\n  dropdown: DropDownCircle,\n  search: SearchIcon,\n  powerOff: PowerOffIcon,\n  lock: Lock,\n  lockOpen: LockOpen,\n  home: HomeIcon,\n  building: BuildingIcon,\n  dashboard: AssessmentIcon,\n  folder: FolderIcon,\n  loop: LoopIcon,\n  'loop-spin': {\n    component: LoopIcon,\n    props: {\n      className: 'fa-spin'\n    }\n  },\n  person: Person,\n  face: FaceIcon,\n  eye: Eye,\n  eyeCrossed: EyeCrossed,\n  sort: SortIcon,\n  more: MoreIcon,\n  star: Star,\n  starHalf: StarHalf,\n  starEmpty: StarEmpty,\n  accountCircle: AccountCircle,\n  app: Apps,\n  personAdd: PersonAdd,\n  offlinePin: OfflinePin,\n  dollarSign: DollarSign,\n  contactMail: ContactMail,\n  people: People,\n  developerMode: DeveloperMode,\n  save: Save,\n  supervisorAccount: SupervisorAccount,\n  error: ErrorIcon,\n  checkCircle: CheckCircle,\n  radioButtonChecked: RadioButtonChecked,\n  flash: FlashOn,\n  report: Report,\n  deleteForever: DeleteForever,\n  deleteSweep: DeleteSweep,\n  groupAdd: GroupAdd,\n  edit: Edit,\n  trendingUp: TrendingUp,\n  trendingDown: TrendingDown,\n  trendingFlat: TrendingFlat,\n  expandMore: ExpandMoreIcon,\n  backupRestore: SettingsBackupRestore,\n  filter: FilterList,\n  arrowUp: ArrowUpward,\n  arrowDown: ArrowDownward,\n  domain: Domain,\n  info: Info,\n  attachFile: AttachFile,\n  download: CloudDownload,\n  health: LocalHospital,\n  help: Help,\n  monetizationOn: MonetizationOn,\n  chart: InsertChart,\n  image: Image,\n  delete: Delete,\n  phoneLink: Phonelink,\n  openInNew: OpenInNew,\n  settings: Settings,\n  event: Event,\n  computer: Computer,\n  notifications: Notifications,\n  snooze: Snooze,\n  dragHandle: DragHandle,\n  priorityHigh: PriorityHigh\n};\nconst Icon = React.forwardRef((_ref, ref) => {\n  let {\n    type,\n    size,\n    tooltip,\n    tooltipPlacement,\n    style = {},\n    badgeContent\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"type\", \"size\", \"tooltip\", \"tooltipPlacement\", \"style\", \"badgeContent\"]);\n  const iconStyle = (0, _objectSpread2.default)({}, style, size ? {\n    width: size,\n    height: size\n  } : {});\n\n  if (type !== null && typeof type === 'object') {\n    return React.cloneElement(type, {\n      style: iconStyle\n    });\n  }\n\n  const MyIcon = iconMap[type];\n\n  if (!MyIcon) {\n    throw new Error(\"invalid icon type: \".concat(type));\n  } else if (MyIcon.component) {\n    return React.createElement(MyIcon.component, (0, _extends2.default)({}, MyIcon.props, props, iconStyle));\n  }\n\n  let icon = React.createElement(MyIcon, (0, _extends2.default)({\n    ref: ref,\n    style: iconStyle\n  }, props));\n\n  if (tooltip) {\n    icon = React.createElement(Tooltip, {\n      placement: tooltipPlacement,\n      title: tooltip,\n      enterTouchDelay: 0\n    }, icon);\n  }\n\n  if (badgeContent) {\n    icon = React.createElement(Badge, {\n      badgeContent: badgeContent,\n      color: \"error\"\n    }, icon);\n  }\n\n  return icon;\n});\nIcon.propTypes = {\n  size: PropTypes.number,\n  type: PropTypes.node.isRequired\n};\nIcon.defaultProps = {\n  size: undefined\n};\nmodule.exportDefault(Icon);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Icon/index.js                                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./Icon\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"IconButton\":{\"IconButton.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/IconButton/IconButton.jsx                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet withStyles;\nmodule.link(\"@material-ui/core\", {\n  withStyles(v) {\n    withStyles = v;\n  }\n\n}, 2);\nlet cx;\nmodule.link(\"classnames\", {\n  default(v) {\n    cx = v;\n  }\n\n}, 3);\nlet capitalize;\nmodule.link(\"@material-ui/core/utils/helpers\", {\n  capitalize(v) {\n    capitalize = v;\n  }\n\n}, 4);\nlet MuiIconButton;\nmodule.link(\"@material-ui/core/IconButton\", {\n  default(v) {\n    MuiIconButton = v;\n  }\n\n}, 5);\nlet Tooltip;\nmodule.link(\"@material-ui/core/Tooltip\", {\n  default(v) {\n    Tooltip = v;\n  }\n\n}, 6);\nlet Icon;\nmodule.link(\"../Icon\", {\n  default(v) {\n    Icon = v;\n  }\n\n}, 7);\n\nconst styles = theme => ({\n  sizeSmall: {\n    padding: 3,\n    fontSize: theme.typography.pxToRem(18)\n  },\n  sizeTiny: {\n    padding: 2,\n    fontSize: theme.typography.pxToRem(12)\n  }\n}); // Keep this a class to avoid warnings from IconMenu which adds a ref to this\n// component\n\n\nclass IconButton extends Component {\n  constructor(props) {\n    super(props); // To avoid linter warnings\n\n    this.state = {};\n  }\n\n  render() {\n    const _this$props = this.props,\n          {\n      onClick,\n      type,\n      tooltip,\n      tooltipPlacement,\n      style,\n      iconStyle,\n      iconProps,\n      disabled,\n      classes,\n      size = 'medium',\n      className\n    } = _this$props,\n          rest = (0, _objectWithoutProperties2.default)(_this$props, [\"onClick\", \"type\", \"tooltip\", \"tooltipPlacement\", \"style\", \"iconStyle\", \"iconProps\", \"disabled\", \"classes\", \"size\", \"className\"]);\n    const button = React.createElement(MuiIconButton, (0, _extends2.default)({\n      onClick: onClick,\n      style: style,\n      className: cx('icon-button', {\n        [classes[\"size\".concat(capitalize(size))]]: size !== 'medium'\n      }, className),\n      \"aria-label\": tooltip || undefined,\n      disabled: disabled\n    }, rest), React.createElement(Icon, (0, _extends2.default)({\n      type: type,\n      style: iconStyle,\n      fontSize: \"inherit\"\n    }, iconProps)));\n\n    if (tooltip) {\n      return React.createElement(Tooltip, {\n        placement: tooltipPlacement,\n        title: tooltip\n      }, button);\n    }\n\n    return button;\n  }\n\n}\n\nIconButton.propTypes = {\n  disabled: PropTypes.bool,\n  iconProps: PropTypes.object,\n  iconStyle: PropTypes.object,\n  onClick: PropTypes.func,\n  style: PropTypes.objectOf(PropTypes.any),\n  tooltip: PropTypes.node,\n  tooltipPlacement: PropTypes.string,\n  type: PropTypes.string.isRequired\n};\nIconButton.defaultProps = {\n  onClick: () => {},\n  tooltip: null,\n  tooltipPlacement: 'bottom',\n  style: {},\n  iconStyle: {},\n  iconProps: {},\n  disabled: false\n};\nmodule.exportDefault(withStyles(styles)(IconButton));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/IconButton/index.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./IconButton\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Link\":{\"Link.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Link/Link.jsx                                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet DefaultLink;\nmodule.link(\"react-router-dom\", {\n  Link(v) {\n    DefaultLink = v;\n  }\n\n}, 0);\nlet withProps;\nmodule.link(\"recompose\", {\n  withProps(v) {\n    withProps = v;\n  }\n\n}, 1);\nmodule.exportDefault(withProps((_ref) => {\n  let {\n    disabled,\n    onClick\n  } = _ref;\n  return {\n    onClick: disabled ? e => e.preventDefault() : onClick\n  };\n})(DefaultLink));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Link/index.js                                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./Link\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"List\":{\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/List/index.js                                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"@material-ui/core/List\", {\n  default: \"default\"\n}, 0);\nmodule.link(\"@material-ui/core/ListItem\", {\n  default: \"ListItem\"\n}, 1);\nmodule.link(\"@material-ui/core/ListItemText\", {\n  default: \"ListItemText\"\n}, 2);\nmodule.link(\"@material-ui/core/ListItemSecondaryAction\", {\n  default: \"ListItemSecondaryAction\"\n}, 3);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Loading\":{\"Loading.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Loading/Loading.jsx                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet cx;\nmodule.link(\"classnames\", {\n  default(v) {\n    cx = v;\n  }\n\n}, 1);\n\n// http://codepen.io/TaniaLD/pen/oKxep\nconst Loading = (_ref) => {\n  let {\n    small\n  } = _ref;\n  return (// Fade it in so that the loader doesn't show up if loading is super fast\n    React.createElement(\"div\", {\n      className: cx('loading-container animated fadeIn', {\n        small\n      })\n    }, React.createElement(\"div\", {\n      className: \"loading-box\"\n    }, React.createElement(\"div\", {\n      className: \"loader2\"\n    })))\n  );\n};\n\nmodule.exportDefault(Loading);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Loading/index.js                                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./Loading\", {\n  default: \"default\"\n}, 0);\nmodule.link(\"./withLoading\", {\n  default: \"withLoading\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"withLoading.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Loading/withLoading.jsx                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet branch, renderComponent;\nmodule.link(\"recompose\", {\n  branch(v) {\n    branch = v;\n  },\n\n  renderComponent(v) {\n    renderComponent = v;\n  }\n\n}, 1);\nlet Loading;\nmodule.link(\"./Loading\", {\n  default(v) {\n    Loading = v;\n  }\n\n}, 2);\nmodule.exportDefault((small, disableVar) => branch((_ref) => {\n  let {\n    loading,\n    isLoading\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"loading\", \"isLoading\"]);\n  return (loading || isLoading) && (!disableVar || !props[disableVar]);\n}, renderComponent(() => React.createElement(Loading, {\n  small: small\n}))));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Material\":{\"Chip.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Material/Chip.jsx                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"@material-ui/core/Chip\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Dialog.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Material/Dialog.jsx                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet MuiDialog;\nmodule.link(\"@material-ui/core/Dialog\", {\n  default(v) {\n    MuiDialog = v;\n  }\n\n}, 2);\nlet DialogActions;\nmodule.link(\"@material-ui/core/DialogActions\", {\n  default(v) {\n    DialogActions = v;\n  }\n\n}, 3);\nlet DialogContent;\nmodule.link(\"@material-ui/core/DialogContent\", {\n  default(v) {\n    DialogContent = v;\n  }\n\n}, 4);\nlet DialogContentText;\nmodule.link(\"@material-ui/core/DialogContentText\", {\n  default(v) {\n    DialogContentText = v;\n  }\n\n}, 5);\nlet DialogTitle;\nmodule.link(\"@material-ui/core/DialogTitle\", {\n  default(v) {\n    DialogTitle = v;\n  }\n\n}, 6);\n\nconst Dialog = props => {\n  const {\n    title,\n    actions,\n    children,\n    important,\n    text\n  } = props,\n        otherProps = (0, _objectWithoutProperties2.default)(props, [\"title\", \"actions\", \"children\", \"important\", \"text\"]);\n  return React.createElement(MuiDialog, (0, _extends2.default)({\n    disableBackdropClick: important,\n    disableEscapeKeyDown: important\n  }, otherProps), title && React.createElement(DialogTitle, null, title), React.createElement(DialogContent, null, text && React.createElement(DialogContentText, null, text), children), actions && React.createElement(DialogActions, null, actions));\n};\n\nDialog.propTypes = {\n  // A dialog can only be closed using the buttons if this boolean is set\n  actions: PropTypes.array,\n  children: PropTypes.node,\n  important: PropTypes.bool,\n  text: PropTypes.node,\n  title: PropTypes.node\n};\nDialog.defaultProps = {\n  important: false,\n  title: undefined,\n  text: undefined,\n  actions: undefined,\n  children: undefined\n};\nmodule.exportDefault(Dialog);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Divider.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Material/Divider.jsx                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet MuiDivider;\nmodule.link(\"@material-ui/core/Divider\", {\n  default(v) {\n    MuiDivider = v;\n  }\n\n}, 2);\n\nconst Divider = props => React.createElement(MuiDivider, props);\n\nDivider.propTypes = {};\nmodule.exportDefault(Divider);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FormControl.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Material/FormControl.jsx                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet FormControl;\nmodule.link(\"@material-ui/core/FormControl\", {\n  default(v) {\n    FormControl = v;\n  }\n\n}, 1);\nmodule.exportDefault(props => React.createElement(FormControl, (0, _extends2.default)({\n  variant: \"outlined\"\n}, props)));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"FormHelperText.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Material/FormHelperText.jsx                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet FormHelperText;\nmodule.link(\"@material-ui/core/FormHelperText\", {\n  default(v) {\n    FormHelperText = v;\n  }\n\n}, 1);\nmodule.exportDefault(props => React.createElement(FormHelperText, (0, _extends2.default)({\n  variant: \"outlined\"\n}, props)));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Input.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Material/Input.jsx                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"@material-ui/core/OutlinedInput\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"InputAdornment.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Material/InputAdornment.jsx                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet InputAdornment;\nmodule.link(\"@material-ui/core/InputAdornment\", {\n  default(v) {\n    InputAdornment = v;\n  }\n\n}, 1);\nmodule.exportDefault(props => React.createElement(InputAdornment, props));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"InputLabel.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Material/InputLabel.jsx                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nmodule.export({\n  useInputLabelWidth: () => useInputLabelWidth\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet InputLabel;\nmodule.link(\"@material-ui/core/InputLabel\", {\n  default(v) {\n    InputLabel = v;\n  }\n\n}, 1);\nmodule.exportDefault(React.forwardRef((props, ref) => React.createElement(InputLabel, (0, _extends2.default)({\n  variant: \"outlined\",\n  ref: ref\n}, props))));\n\nconst useInputLabelWidth = () => {\n  const inputLabelRef = React.useRef(null);\n  const [labelWidth, setLabelWidth] = React.useState(0);\n  React.useEffect(() => {\n    if (inputLabelRef && inputLabelRef.current) {\n      setLabelWidth(inputLabelRef.current.offsetWidth);\n    }\n  }, []);\n  return {\n    inputLabelRef,\n    labelWidth\n  };\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Menu.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Material/Menu.jsx                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet MuiMenu;\nmodule.link(\"@material-ui/core/Menu\", {\n  default(v) {\n    MuiMenu = v;\n  }\n\n}, 1);\n\nconst Menu = props => React.createElement(MuiMenu, props);\n\nMenu.propTypes = {};\nmodule.exportDefault(Menu);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"MenuItem.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Material/MenuItem.jsx                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet MuiMenuItem;\nmodule.link(\"@material-ui/core/MenuItem\", {\n  default(v) {\n    MuiMenuItem = v;\n  }\n\n}, 1);\n\nconst MenuItem = props => React.createElement(MuiMenuItem, props);\n\nMenuItem.propTypes = {};\nmodule.exportDefault(MenuItem);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Radio.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Material/Radio.jsx                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"@material-ui/core/Radio\", {\n  default: \"default\"\n}, 0);\nmodule.link(\"@material-ui/core/RadioGroup\", {\n  default: \"RadioGroup\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Select.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Material/Select.jsx                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Select;\nmodule.link(\"@material-ui/core/Select\", {\n  default(v) {\n    Select = v;\n  }\n\n}, 1);\nmodule.exportDefault(props => React.createElement(Select, (0, _extends2.default)({\n  variant: \"outlined\"\n}, props)));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Slider.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Material/Slider.jsx                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet RcSlider;\nmodule.link(\"rc-slider\", {\n  default(v) {\n    RcSlider = v;\n  }\n\n}, 1);\nlet colors;\nmodule.link(\"../../config/colors\", {\n  default(v) {\n    colors = v;\n  }\n\n}, 2);\nconst styles = {\n  color: {\n    color: colors.primary\n  }\n};\n\nconst Slider = props => React.createElement(RcSlider, props);\n\nSlider.propTypes = {};\nmodule.exportDefault(Slider);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"TextField.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Material/TextField.jsx                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet MuiTextField;\nmodule.link(\"@material-ui/core/TextField\", {\n  default(v) {\n    MuiTextField = v;\n  }\n\n}, 1);\n\n// To be removed with refactoring\nconst TextField = props => React.createElement(MuiTextField, (0, _extends2.default)({\n  variant: \"outlined\"\n}, props));\n\nTextField.propTypes = {};\nmodule.exportDefault(TextField);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"MissingDoc\":{\"MissingDoc.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/MissingDoc/MissingDoc.jsx                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 0);\nlet Link;\nmodule.link(\"../Link\", {\n  default(v) {\n    Link = v;\n  }\n\n}, 1);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 2);\nlet Button;\nmodule.link(\"../Button\", {\n  default(v) {\n    Button = v;\n  }\n\n}, 3);\nlet Loading;\nmodule.link(\"../Loading\", {\n  default(v) {\n    Loading = v;\n  }\n\n}, 4);\n\nclass MissingDoc extends Component {\n  constructor() {\n    super();\n    this.state = {\n      render: false\n    };\n  }\n\n  componentDidMount() {\n    // Set a timeout to allow subscriptions to refetch data before\n    // showing the missingdoc component\n    // 500ms is chosen because it should catch most subscription refreshes\n    // on regular connections\n    setTimeout(() => {\n      this.setState({\n        render: true\n      });\n    }, 500);\n  }\n\n  render() {\n    const {\n      render\n    } = this.state;\n\n    if (!render) {\n      return React.createElement(Loading, null);\n    }\n\n    return React.createElement(\"div\", {\n      className: \"flex-col center animated jackInTheBox\"\n    }, React.createElement(\"div\", {\n      className: \"description\"\n    }, React.createElement(\"p\", null, React.createElement(T, {\n      id: \"MissingDoc.text\"\n    }))), React.createElement(\"div\", {\n      className: \"flex center\"\n    }, React.createElement(Link, {\n      to: \"/\",\n      className: \"home-link\"\n    }, React.createElement(Button, {\n      raised: true,\n      color: \"secondary\"\n    }, React.createElement(T, {\n      id: \"MissingDoc.redirectHome\"\n    })))));\n  }\n\n}\n\nmodule.exportDefault(MissingDoc);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/MissingDoc/index.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./MissingDoc\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"MoneyInput\":{\"MoneyInput.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/MoneyInput/MoneyInput.jsx                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet MaskedInput;\nmodule.link(\"react-text-mask\", {\n  default(v) {\n    MaskedInput = v;\n  }\n\n}, 1);\nlet InputAdornment;\nmodule.link(\"../Material/InputAdornment\", {\n  default(v) {\n    InputAdornment = v;\n  }\n\n}, 2);\nlet FormHelperText;\nmodule.link(\"../Material/FormHelperText\", {\n  default(v) {\n    FormHelperText = v;\n  }\n\n}, 3);\nlet InputLabel, useInputLabelWidth;\nmodule.link(\"../Material/InputLabel\", {\n  default(v) {\n    InputLabel = v;\n  },\n\n  useInputLabelWidth(v) {\n    useInputLabelWidth = v;\n  }\n\n}, 4);\nlet FormControl;\nmodule.link(\"../Material/FormControl\", {\n  default(v) {\n    FormControl = v;\n  }\n\n}, 5);\nlet Input;\nmodule.link(\"../Material/Input\", {\n  default(v) {\n    Input = v;\n  }\n\n}, 6);\nlet swissFrancMask, swissFrancMaskDecimal;\nmodule.link(\"../../utils/textMasks\", {\n  swissFrancMask(v) {\n    swissFrancMask = v;\n  },\n\n  swissFrancMaskDecimal(v) {\n    swissFrancMaskDecimal = v;\n  }\n\n}, 7);\nlet toNumber, toDecimalNumber;\nmodule.link(\"../../utils/conversionFunctions\", {\n  toNumber(v) {\n    toNumber = v;\n  },\n\n  toDecimalNumber(v) {\n    toDecimalNumber = v;\n  }\n\n}, 8);\n\nconst MoneyInput = (_ref) => {\n  let {\n    fullWidth = true,\n    helperText,\n    label,\n    onChange,\n    required,\n    margin,\n    decimal = false\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"fullWidth\", \"helperText\", \"label\", \"onChange\", \"required\", \"margin\", \"decimal\"]);\n  const {\n    inputLabelRef,\n    labelWidth\n  } = useInputLabelWidth(!!label);\n  const parse = decimal ? toDecimalNumber : toNumber;\n  const mask = decimal ? swissFrancMaskDecimal : swissFrancMask;\n  return React.createElement(FormControl, {\n    className: \"money-input\",\n    required: required,\n    fullWidth: fullWidth,\n    margin: margin\n  }, label && React.createElement(InputLabel, {\n    ref: inputLabelRef\n  }, label), React.createElement(Input, (0, _extends2.default)({\n    labelWidth: labelWidth,\n    startAdornment: React.createElement(InputAdornment, {\n      position: \"start\"\n    }, \"CHF\"),\n    onChange: event => onChange(parse(event.target.value)),\n    type: \"tel\",\n    inputComponent: MaskedInput,\n    inputProps: {\n      mask\n    }\n  }, props)), helperText && React.createElement(FormHelperText, null, helperText));\n};\n\nmodule.exportDefault(MoneyInput);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/MoneyInput/index.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./MoneyInput\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"PercentInput\":{\"PercentField.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/PercentInput/PercentField.jsx                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet FormHelperText;\nmodule.link(\"../Material/FormHelperText\", {\n  default(v) {\n    FormHelperText = v;\n  }\n\n}, 1);\nlet InputLabel, useInputLabelWidth;\nmodule.link(\"../Material/InputLabel\", {\n  default(v) {\n    InputLabel = v;\n  },\n\n  useInputLabelWidth(v) {\n    useInputLabelWidth = v;\n  }\n\n}, 2);\nlet FormControl;\nmodule.link(\"../Material/FormControl\", {\n  default(v) {\n    FormControl = v;\n  }\n\n}, 3);\nlet PercentInput;\nmodule.link(\"./PercentInput\", {\n  default(v) {\n    PercentInput = v;\n  }\n\n}, 4);\n\nconst PercentField = (_ref) => {\n  let {\n    fullWidth = true,\n    helperText,\n    label,\n    required,\n    margin\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"fullWidth\", \"helperText\", \"label\", \"required\", \"margin\"]);\n  const {\n    inputLabelRef,\n    labelWidth\n  } = useInputLabelWidth(!!label);\n  return React.createElement(FormControl, {\n    required: required,\n    fullWidth: fullWidth,\n    margin: margin\n  }, React.createElement(InputLabel, {\n    ref: inputLabelRef\n  }, label), React.createElement(PercentInput, (0, _extends2.default)({\n    labelWidth: labelWidth\n  }, props)), helperText && React.createElement(FormHelperText, null, helperText));\n};\n\nmodule.exportDefault(PercentField);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"PercentInput.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/PercentInput/PercentInput.jsx                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet MaskedInput;\nmodule.link(\"react-text-mask\", {\n  default(v) {\n    MaskedInput = v;\n  }\n\n}, 1);\nlet Input;\nmodule.link(\"../Material/Input\", {\n  default(v) {\n    Input = v;\n  }\n\n}, 2);\nlet percentMask;\nmodule.link(\"../../utils/textMasks\", {\n  percentMask(v) {\n    percentMask = v;\n  }\n\n}, 3);\nlet percentFormatters;\nmodule.link(\"../../utils/formHelpers\", {\n  percentFormatters(v) {\n    percentFormatters = v;\n  }\n\n}, 4);\n\nconst PercentInput = (_ref) => {\n  let {\n    onChange,\n    value\n  } = _ref,\n      props = (0, _objectWithoutProperties2.default)(_ref, [\"onChange\", \"value\"]);\n  return React.createElement(Input, (0, _extends2.default)({\n    onChange: event => {\n      onChange(percentFormatters.parse(event.target.value));\n    },\n    value: percentFormatters.format(value),\n    inputComponent: MaskedInput,\n    inputProps: {\n      mask: percentMask\n    },\n    type: \"tel\"\n  }, props));\n};\n\nmodule.exportDefault(PercentInput);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/PercentInput/index.js                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./PercentInput\", {\n  default: \"default\"\n}, 0);\nmodule.link(\"./PercentField\", {\n  default: \"PercentField\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"PercentWithStatus\":{\"PercentWithStatus.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/PercentWithStatus/PercentWithStatus.jsx                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Percent;\nmodule.link(\"../Translation\", {\n  Percent(v) {\n    Percent = v;\n  }\n\n}, 1);\nlet StatusIcon;\nmodule.link(\"../StatusIcon\", {\n  default(v) {\n    StatusIcon = v;\n  }\n\n}, 2);\nlet SUCCESS, ERROR;\nmodule.link(\"../../api/constants\", {\n  SUCCESS(v) {\n    SUCCESS = v;\n  },\n\n  ERROR(v) {\n    ERROR = v;\n  }\n\n}, 3);\n\nconst PercentWithStatus = (_ref) => {\n  let {\n    value,\n    status = value >= 1 ? SUCCESS : ERROR,\n    id,\n    tooltip,\n    rounded\n  } = _ref;\n  return React.createElement(React.Fragment, null, Number.isNaN(value) ? '-' : React.createElement(Percent, {\n    value: value,\n    rounded: rounded\n  }), !Number.isNaN(value) && React.createElement(StatusIcon, {\n    status: status,\n    className: \"icon\",\n    style: {\n      marginLeft: 4\n    },\n    tooltip: tooltip,\n    id: id\n  }));\n};\n\nmodule.exportDefault(PercentWithStatus);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Select\":{\"Select.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Select/Select.jsx                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet MenuItem;\nmodule.link(\"@material-ui/core/MenuItem\", {\n  default(v) {\n    MenuItem = v;\n  }\n\n}, 2);\nlet MuiSelect;\nmodule.link(\"../Material/Select\", {\n  default(v) {\n    MuiSelect = v;\n  }\n\n}, 3);\nlet FormHelperText;\nmodule.link(\"../Material/FormHelperText\", {\n  default(v) {\n    FormHelperText = v;\n  }\n\n}, 4);\nlet InputLabel, useInputLabelWidth;\nmodule.link(\"../Material/InputLabel\", {\n  default(v) {\n    InputLabel = v;\n  },\n\n  useInputLabelWidth(v) {\n    useInputLabelWidth = v;\n  }\n\n}, 5);\nlet FormControl;\nmodule.link(\"../Material/FormControl\", {\n  default(v) {\n    FormControl = v;\n  }\n\n}, 6);\nlet Input;\nmodule.link(\"../Material/Input\", {\n  default(v) {\n    Input = v;\n  }\n\n}, 7);\nlet SelectContainer;\nmodule.link(\"./SelectContainer\", {\n  default(v) {\n    SelectContainer = v;\n  }\n\n}, 8);\n\nconst makeRenderValue = (_ref) => {\n  let {\n    multiple,\n    rawOptions\n  } = _ref;\n\n  if (!multiple) {\n    return value => {\n      const option = rawOptions.find((_ref2) => {\n        let {\n          id\n        } = _ref2;\n        return id === value;\n      });\n      return option && option.label;\n    };\n  }\n\n  return values => values.map((value, i) => {\n    const option = rawOptions.find((_ref3) => {\n      let {\n        id\n      } = _ref3;\n      return id === value;\n    });\n    return [i !== 0 && ', ', option && option.label];\n  });\n};\n\nconst Select = (_ref4) => {\n  let {\n    value,\n    onChange,\n    options,\n    id,\n    label,\n    style,\n    required,\n    error,\n    placeholder,\n    multiple,\n    rawOptions,\n    fullWidth\n  } = _ref4,\n      otherProps = (0, _objectWithoutProperties2.default)(_ref4, [\"value\", \"onChange\", \"options\", \"id\", \"label\", \"style\", \"required\", \"error\", \"placeholder\", \"multiple\", \"rawOptions\", \"fullWidth\"]);\n  const {\n    inputLabelRef,\n    labelWidth\n  } = useInputLabelWidth(!!label);\n  return React.createElement(FormControl, {\n    fullWidth: fullWidth,\n    variant: \"outlined\",\n    className: \"mui-select\",\n    style: style\n  }, label && React.createElement(InputLabel, {\n    ref: inputLabelRef,\n    htmlFor: id\n  }, label, required && ' ', required && React.createElement(\"span\", {\n    className: \"error\"\n  }, \"*\")), React.createElement(MuiSelect, (0, _extends2.default)({\n    renderValue: makeRenderValue({\n      multiple,\n      rawOptions\n    })\n  }, otherProps, {\n    value: value,\n    onChange: onChange,\n    input: React.createElement(Input, {\n      labelWidth: labelWidth,\n      id: id\n    }),\n    multiple: multiple,\n    displayEmpty: !!placeholder\n  }), [placeholder && React.createElement(MenuItem, {\n    value: \"\"\n  }, placeholder), ...options].filter(x => x)), error && React.createElement(FormHelperText, null, error));\n};\n\nSelect.propTypes = {\n  id: PropTypes.string,\n  label: PropTypes.node,\n  onChange: PropTypes.func.isRequired,\n  options: PropTypes.arrayOf(PropTypes.object).isRequired,\n  style: PropTypes.object,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nSelect.defaultProps = {\n  value: '',\n  label: undefined,\n  style: {},\n  id: ''\n};\nmodule.exportDefault(SelectContainer(Select));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"SelectContainer.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Select/SelectContainer.jsx                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet compose, mapProps;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  },\n\n  mapProps(v) {\n    mapProps = v;\n  }\n\n}, 1);\nlet withStyles;\nmodule.link(\"@material-ui/core/styles/withStyles\", {\n  default(v) {\n    withStyles = v;\n  }\n\n}, 2);\nlet ListItemIcon;\nmodule.link(\"@material-ui/core/ListItemIcon\", {\n  default(v) {\n    ListItemIcon = v;\n  }\n\n}, 3);\nlet ListItemText;\nmodule.link(\"@material-ui/core/ListItemText\", {\n  default(v) {\n    ListItemText = v;\n  }\n\n}, 4);\nlet MenuItem;\nmodule.link(\"../Material/MenuItem\", {\n  default(v) {\n    MenuItem = v;\n  }\n\n}, 5);\nlet Divider;\nmodule.link(\"../Material/Divider\", {\n  default(v) {\n    Divider = v;\n  }\n\n}, 6);\nlet Icon;\nmodule.link(\"../Icon\", {\n  default(v) {\n    Icon = v;\n  }\n\n}, 7);\n\nconst styles = theme => ({// menuItem: {\n  //   '&:hover': {\n  //     backgroundColor: theme.palette.primary.main,\n  //     '& $colorClass': { color: theme.palette.common.white },\n  //   },\n  // },\n  // menuItemRoot: { height: 'unset' },\n  // listItemTextWithIcon: { paddingLeft: 0 },\n  // listItemtext: { paddingLeft: 0, paddingRight: 0 },\n  // colorClass: {},\n});\n\nconst mapOptions = (options, _ref) => {\n  let {\n    menuItem: menuItemClass,\n    menuItemRoot,\n    listItemTextWithIcon,\n    listItemtext,\n    colorClass\n  } = _ref;\n  const array = [];\n  options.forEach(option => {\n    if (React.isValidElement(option)) {\n      return option;\n    }\n\n    const {\n      id,\n      label,\n      icon,\n      dividerTop,\n      dividerBottom,\n      secondary\n    } = option,\n          otherProps = (0, _objectWithoutProperties2.default)(option, [\"id\", \"label\", \"icon\", \"dividerTop\", \"dividerBottom\", \"secondary\"]);\n\n    if (dividerTop) {\n      array.push(React.createElement(Divider, {\n        key: \"divider\".concat(id)\n      }));\n    }\n\n    array.push(React.createElement(MenuItem, (0, _extends2.default)({\n      value: id,\n      key: id,\n      className: menuItemClass,\n      classes: {\n        root: menuItemRoot\n      }\n    }, otherProps), React.createElement(React.Fragment, null, icon && React.createElement(ListItemIcon, {\n      className: colorClass\n    }, React.createElement(Icon, {\n      type: icon\n    })), React.createElement(ListItemText, {\n      classes: {\n        primary: colorClass,\n        secondary: colorClass,\n        root: icon ? listItemTextWithIcon : listItemtext\n      } // inset={!!icon}\n      ,\n      primary: label,\n      secondary: secondary\n    }))));\n\n    if (dividerBottom) {\n      array.push(React.createElement(Divider, {\n        key: \"divider\".concat(id)\n      }));\n    }\n  });\n  return array;\n};\n\nconst SelectContainer = compose(withStyles(styles), mapProps((_ref2) => {\n  let {\n    options,\n    classes,\n    onChange,\n    id\n  } = _ref2,\n      otherProps = (0, _objectWithoutProperties2.default)(_ref2, [\"options\", \"classes\", \"onChange\", \"id\"]);\n  return (0, _objectSpread2.default)({\n    rawOptions: options,\n    options: mapOptions(options, classes),\n    onChange: e => onChange(id, e.target.value),\n    id\n  }, otherProps);\n}));\nmodule.exportDefault(SelectContainer);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Select/index.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./Select\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"StatusIcon\":{\"StatusIcon.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/StatusIcon/StatusIcon.jsx                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet Tooltip;\nmodule.link(\"@material-ui/core/Tooltip\", {\n  default(v) {\n    Tooltip = v;\n  }\n\n}, 2);\nlet Icon;\nmodule.link(\"../Icon\", {\n  default(v) {\n    Icon = v;\n  }\n\n}, 3);\nlet SUCCESS, WARNING, ERROR;\nmodule.link(\"../../api/constants\", {\n  SUCCESS(v) {\n    SUCCESS = v;\n  },\n\n  WARNING(v) {\n    WARNING = v;\n  },\n\n  ERROR(v) {\n    ERROR = v;\n  }\n\n}, 4);\nlet colors;\nmodule.link(\"../../config/colors\", {\n  default(v) {\n    colors = v;\n  }\n\n}, 5);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 6);\nconst styles = {\n  [SUCCESS]: {\n    color: colors.success,\n    fill: colors.success\n  },\n  [WARNING]: {\n    color: colors.warning,\n    fill: colors.warning\n  },\n  [ERROR]: {\n    color: colors.error,\n    fill: colors.error\n  }\n};\nconst StatusIcon = React.forwardRef((_ref, ref) => {\n  let {\n    id,\n    status,\n    style = {},\n    tooltip\n  } = _ref,\n      rest = (0, _objectWithoutProperties2.default)(_ref, [\"id\", \"status\", \"style\", \"tooltip\"]);\n\n  if (!status) {\n    return null;\n  }\n\n  const icon = React.createElement(Icon, (0, _extends2.default)({\n    type: status === SUCCESS ? 'checkCircle' : 'error',\n    style: (0, _objectSpread2.default)({}, styles[status], style),\n    ref: ref\n  }, rest));\n\n  if (tooltip) {\n    return React.createElement(Tooltip, {\n      title: typeof tooltip === 'object' ? tooltip : React.createElement(T, {\n        id: \"StatusIconTooltip.\".concat(id, \".\").concat(status)\n      }),\n      placement: \"right\",\n      enterTouchDelay: 0\n    }, icon);\n  }\n\n  return icon;\n});\nStatusIcon.propTypes = {\n  status: PropTypes.oneOfType([PropTypes.string, PropTypes.bool])\n};\nStatusIcon.defaultProps = {\n  status: undefined\n};\nmodule.exportDefault(StatusIcon);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/StatusIcon/index.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./StatusIcon.jsx\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"StatusLabel\":{\"StatusLabel.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/StatusLabel/StatusLabel.jsx                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet cx;\nmodule.link(\"classnames\", {\n  default(v) {\n    cx = v;\n  }\n\n}, 1);\nlet Tooltip;\nmodule.link(\"@material-ui/core/Tooltip\", {\n  default(v) {\n    Tooltip = v;\n  }\n\n}, 2);\nlet colors;\nmodule.link(\"../../config/colors\", {\n  default(v) {\n    colors = v;\n  }\n\n}, 3);\nlet PROMOTION_STATUS, PROMOTIONS_COLLECTION, PROMOTION_LOTS_COLLECTION, PROMOTION_LOT_STATUS, PROMOTION_LOT_REDUCED_STATUS, TASKS_COLLECTION, TASK_STATUS, LOANS_COLLECTION, LOAN_STATUS, LENDERS_COLLECTION, LENDER_STATUS, PROPERTIES_COLLECTION, PROPERTY_STATUS, REVENUES_COLLECTION, REVENUE_STATUS, COMMISSION_STATUS;\nmodule.link(\"../../api/constants\", {\n  PROMOTION_STATUS(v) {\n    PROMOTION_STATUS = v;\n  },\n\n  PROMOTIONS_COLLECTION(v) {\n    PROMOTIONS_COLLECTION = v;\n  },\n\n  PROMOTION_LOTS_COLLECTION(v) {\n    PROMOTION_LOTS_COLLECTION = v;\n  },\n\n  PROMOTION_LOT_STATUS(v) {\n    PROMOTION_LOT_STATUS = v;\n  },\n\n  PROMOTION_LOT_REDUCED_STATUS(v) {\n    PROMOTION_LOT_REDUCED_STATUS = v;\n  },\n\n  TASKS_COLLECTION(v) {\n    TASKS_COLLECTION = v;\n  },\n\n  TASK_STATUS(v) {\n    TASK_STATUS = v;\n  },\n\n  LOANS_COLLECTION(v) {\n    LOANS_COLLECTION = v;\n  },\n\n  LOAN_STATUS(v) {\n    LOAN_STATUS = v;\n  },\n\n  LENDERS_COLLECTION(v) {\n    LENDERS_COLLECTION = v;\n  },\n\n  LENDER_STATUS(v) {\n    LENDER_STATUS = v;\n  },\n\n  PROPERTIES_COLLECTION(v) {\n    PROPERTIES_COLLECTION = v;\n  },\n\n  PROPERTY_STATUS(v) {\n    PROPERTY_STATUS = v;\n  },\n\n  REVENUES_COLLECTION(v) {\n    REVENUES_COLLECTION = v;\n  },\n\n  REVENUE_STATUS(v) {\n    REVENUE_STATUS = v;\n  },\n\n  COMMISSION_STATUS(v) {\n    COMMISSION_STATUS = v;\n  }\n\n}, 4);\nlet T;\nmodule.link(\"../Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 5);\nlet DropdownMenu;\nmodule.link(\"../DropdownMenu\", {\n  default(v) {\n    DropdownMenu = v;\n  }\n\n}, 6);\nlet updateDocument;\nmodule.link(\"../../api/methods/methodDefinitions\", {\n  updateDocument(v) {\n    updateDocument = v;\n  }\n\n}, 7);\n\nconst getStatuses = collection => {\n  switch (collection) {\n    case LOANS_COLLECTION:\n      return {\n        [LOAN_STATUS.LEAD]: colors.secondary,\n        [LOAN_STATUS.ONGOING]: colors.primary,\n        [LOAN_STATUS.PENDING]: colors.warning,\n        [LOAN_STATUS.CLOSING]: colors.tertiary,\n        [LOAN_STATUS.BILLING]: colors.success,\n        [LOAN_STATUS.FINALIZED]: colors.success,\n        [LOAN_STATUS.UNSUCCESSFUL]: colors.error,\n        [LOAN_STATUS.TEST]: colors.warning\n      };\n\n    case PROMOTIONS_COLLECTION:\n      return {\n        [PROMOTION_STATUS.CANCELLED]: colors.warning,\n        [PROMOTION_STATUS.FINISHED]: colors.error,\n        [PROMOTION_STATUS.OPEN]: colors.success,\n        [PROMOTION_STATUS.PREPARATION]: colors.primary\n      };\n\n    case PROMOTION_LOTS_COLLECTION:\n      return {\n        [PROMOTION_LOT_STATUS.AVAILABLE]: colors.success,\n        [PROMOTION_LOT_STATUS.BOOKED]: colors.primary,\n        [PROMOTION_LOT_STATUS.SOLD]: colors.error,\n        [PROMOTION_LOT_REDUCED_STATUS.SOLD_TO_ME]: colors.tertiary,\n        [PROMOTION_LOT_REDUCED_STATUS.BOOKED_FOR_ME]: colors.primary,\n        [PROMOTION_LOT_REDUCED_STATUS.NOT_AVAILABLE]: colors.warning\n      };\n\n    case TASKS_COLLECTION:\n      return {\n        [TASK_STATUS.ACTIVE]: colors.primary,\n        [TASK_STATUS.COMPLETED]: colors.success,\n        [TASK_STATUS.CANCELLED]: colors.error\n      };\n\n    case LENDERS_COLLECTION:\n      return {\n        [LENDER_STATUS.TO_BE_CONTACTED]: colors.warning,\n        [LENDER_STATUS.CONTACTED]: colors.primary,\n        [LENDER_STATUS.OFFER_RECEIVED]: colors.success,\n        [LENDER_STATUS.TO_EXCLUDE]: colors.error\n      };\n\n    case PROPERTIES_COLLECTION:\n      return {\n        [PROPERTY_STATUS.FOR_SALE]: colors.success,\n        [PROPERTY_STATUS.BOOKED]: colors.primary,\n        [PROPERTY_STATUS.SOLD]: colors.error\n      };\n\n    case REVENUES_COLLECTION:\n      return {\n        [REVENUE_STATUS.EXPECTED]: colors.primary,\n        [REVENUE_STATUS.CLOSED]: colors.success,\n        [COMMISSION_STATUS.TO_BE_PAID]: colors.primary,\n        [COMMISSION_STATUS.PAID]: colors.success\n      };\n\n    default:\n      throw new Error(\"Unknown collection \\\"\".concat(collection, \"\\\" in StatusLabel\"));\n  }\n};\n\nconst getLabel = (_ref) => {\n  let {\n    allowModify,\n    color,\n    label,\n    status,\n    statuses,\n    suffix,\n    variant\n  } = _ref;\n\n  switch (variant) {\n    case 'full':\n      return props => React.createElement(\"span\", (0, _extends2.default)({\n        className: cx({\n          allowModify,\n          'status-label': true\n        }),\n        style: {\n          backgroundColor: color || statuses[status]\n        }\n      }, props), React.createElement(\"span\", null, label || React.createElement(T, {\n        id: \"Forms.status.\".concat(status)\n      }), suffix));\n\n    case 'dot':\n      return (_ref2) => {\n        let {\n          showTooltip\n        } = _ref2,\n            props = (0, _objectWithoutProperties2.default)(_ref2, [\"showTooltip\"]);\n        return showTooltip ? React.createElement(Tooltip, {\n          title: label || React.createElement(T, {\n            id: \"Forms.status.\".concat(status)\n          })\n        }, React.createElement(\"span\", (0, _extends2.default)({\n          className: cx({\n            allowModify,\n            'status-label-dot': true\n          })\n        }, props), React.createElement(\"span\", {\n          style: {\n            backgroundColor: color || statuses[status]\n          }\n        }))) : React.createElement(\"span\", (0, _extends2.default)({\n          className: cx({\n            allowModify,\n            'status-label-dot': true\n          })\n        }, props), React.createElement(\"span\", {\n          style: {\n            backgroundColor: color || statuses[status]\n          }\n        }));\n      };\n\n    default:\n      break;\n  }\n};\n\nconst StatusLabel = (_ref3) => {\n  let {\n    status,\n    collection,\n    suffix = '',\n    label = null,\n    color = null,\n    allowModify,\n    docId,\n    additionalActions = () => Promise.resolve(),\n    variant = 'full',\n    showTooltip = true\n  } = _ref3;\n  const statuses = getStatuses(collection);\n  const statusLabel = getLabel({\n    allowModify,\n    color,\n    docId,\n    label,\n    status,\n    statuses,\n    suffix,\n    variant\n  });\n\n  if (allowModify) {\n    return React.createElement(DropdownMenu, {\n      noWrapper: true,\n      renderTrigger: (_ref4) => {\n        let {\n          handleOpen\n        } = _ref4;\n        return statusLabel({\n          onClick: handleOpen,\n          showTooltip\n        });\n      },\n      options: Object.keys(statuses).map(stat => ({\n        id: stat,\n        label: React.createElement(T, {\n          id: \"Forms.status.\".concat(stat)\n        }),\n        onClick: () => additionalActions(stat, status).then(() => updateDocument.run({\n          collection,\n          object: {\n            status: stat\n          },\n          docId\n        }))\n      }))\n    });\n  }\n\n  return statusLabel({\n    showTooltip\n  });\n};\n\nmodule.exportDefault(StatusLabel);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/StatusLabel/index.js                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./StatusLabel\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"StickyPopover\":{\"StickyPopover.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/StickyPopover/StickyPopover.jsx                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => PopoverStickOnHover\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet Overlay;\nmodule.link(\"react-bootstrap/lib/Overlay\", {\n  default(v) {\n    Overlay = v;\n  }\n\n}, 2);\nlet Popover;\nmodule.link(\"react-bootstrap/lib/Popover\", {\n  default(v) {\n    Popover = v;\n  }\n\n}, 3);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nclass PopoverStickOnHover extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleMouseEnter\", () => {\n      const {\n        delay,\n        onMouseEnter\n      } = this.props;\n      clearTimeout(this.exitTimeout);\n      this.enterTimeout = setTimeout(() => {\n        this.setState({\n          showPopover: true\n        }, () => {\n          if (onMouseEnter) {\n            onMouseEnter();\n          }\n        });\n      }, delay);\n    });\n\n    _defineProperty(this, \"handleMousePopoverEnter\", () => {\n      clearTimeout(this.exitTimeout);\n      this.setState({\n        showPopover: true\n      });\n    });\n\n    _defineProperty(this, \"handleMouseLeave\", () => {\n      const {\n        exitDelay\n      } = this.props;\n      clearTimeout(this.enterTimeout);\n      this.exitTimeout = setTimeout(() => {\n        this.setState({\n          showPopover: false\n        });\n      }, exitDelay);\n    });\n\n    this.state = {\n      showPopover: false\n    };\n    this.enterTimeout = null;\n    this.exitTimeout = null;\n    this.ref = React.createRef();\n  }\n\n  componentWillUnmount() {\n    if (this.enterTimeout) {\n      clearTimeout(this.enterTimeout);\n    }\n\n    if (this.exitTimeout) {\n      clearTimeout(this.exitTimeout);\n    }\n  }\n\n  render() {\n    const {\n      component,\n      children,\n      placement,\n      title,\n      forceOpen\n    } = this.props;\n    const {\n      showPopover\n    } = this.state;\n    const show = forceOpen || showPopover;\n    const enhancedChildren = React.Children.map(children, child => React.cloneElement(child, {\n      onMouseEnter: this.handleMouseEnter,\n      onMouseLeave: this.handleMouseLeave,\n      ref: this.ref,\n      onFocus: this.handleMouseEnter,\n      onBlur: this.handleMouseLeave\n    }))[0];\n    return React.createElement(React.Fragment, null, enhancedChildren, React.createElement(Overlay, {\n      show: show,\n      placement: placement,\n      target: this.ref.current,\n      shouldUpdatePosition: true,\n      transition: null,\n      animation: null\n    }, React.createElement(Popover, {\n      onMouseEnter: this.handleMousePopoverEnter,\n      onMouseLeave: this.handleMouseLeave,\n      title: title,\n      onClick: e => e.stopPropagation()\n    }, component)));\n  }\n\n}\n\nPopoverStickOnHover.defaultProps = {\n  delay: 0,\n  exitDelay: 100,\n  onMouseEnter: undefined,\n  placement: 'right',\n  title: null\n};\nPopoverStickOnHover.propTypes = {\n  children: PropTypes.element.isRequired,\n  component: PropTypes.node.isRequired,\n  delay: PropTypes.number,\n  exitDelay: PropTypes.number,\n  onMouseEnter: PropTypes.func,\n  placement: PropTypes.string,\n  title: PropTypes.node\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/StickyPopover/index.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./StickyPopover\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"UpdateField\":{\"UpdateField.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/UpdateField/UpdateField.jsx                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet pick;\nmodule.link(\"lodash/pick\", {\n  default(v) {\n    pick = v;\n  }\n\n}, 1);\nlet AutoForm, CustomAutoField;\nmodule.link(\"../AutoForm2\", {\n  default(v) {\n    AutoForm = v;\n  },\n\n  CustomAutoField(v) {\n    CustomAutoField = v;\n  }\n\n}, 2);\nlet updateDocument, schemas;\nmodule.link(\"../../api\", {\n  updateDocument(v) {\n    updateDocument = v;\n  },\n\n  schemas(v) {\n    schemas = v;\n  }\n\n}, 3);\n\nconst makeOnSubmit = (_ref) => {\n  let {\n    collection,\n    doc,\n    fields,\n    onSuccess\n  } = _ref;\n  return values => updateDocument.run({\n    collection,\n    docId: doc._id,\n    object: pick(values, fields)\n  }).then(() => onSuccess ? onSuccess(values) : null);\n};\n\nconst UpdateField = (_ref2) => {\n  let {\n    collection,\n    doc,\n    fields,\n    onSuccess,\n    onSubmit = makeOnSubmit({\n      collection,\n      doc,\n      fields,\n      onSuccess\n    }),\n    onSubmitCallback = () => ({})\n  } = _ref2,\n      props = (0, _objectWithoutProperties2.default)(_ref2, [\"collection\", \"doc\", \"fields\", \"onSuccess\", \"onSubmit\", \"onSubmitCallback\"]);\n  return React.createElement(AutoForm, (0, _extends2.default)({\n    autosave: true,\n    schema: schemas[collection].pick(...fields),\n    model: doc,\n    onSubmit: values => onSubmit(values).then(onSubmitCallback),\n    className: \"update-field\"\n  }, props), fields.map(field => React.createElement(CustomAutoField, {\n    name: field,\n    key: field,\n    fullWidth: true\n  })));\n};\n\nmodule.exportDefault(UpdateField);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/UpdateField/index.js                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./UpdateField\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"charts\":{\"Chart.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/charts/Chart.jsx                                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => Chart\n});\nlet React, PureComponent;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  PureComponent(v) {\n    PureComponent = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet ReactHighcharts;\nmodule.link(\"react-highcharts\", {\n  default(v) {\n    ReactHighcharts = v;\n  }\n\n}, 2);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nconst initialazeHighcharts = () => {\n  ReactHighcharts.Highcharts.setOptions({\n    lang: {\n      months: 'Janvier_Février_Mars_Avril_Mai_Juin_Juillet_Août_Septembre_Octobre_Novembre_Décembre'.split('_'),\n      shortMonths: 'Janv._Févr._Mars_Avr._Mai_Juin_Juil._Août_Sept._Oct._Nov._Déc.'.split('_'),\n      weekdays: 'Dimanche_Lundi_Mardi_Mercredi_Jeudi_Vendredi_Samedi'.split('_'),\n      shortWeekdays: 'Dim._Lun._Mar._Mer._Jeu._Ven._Sam.'.split('_')\n    }\n  });\n  ReactHighcharts.Highcharts.wrap(ReactHighcharts.Highcharts.Chart.prototype, 'init', function (proceed, options, callback) {\n    if (options.chart && options.chart.forExport && options.series) {\n      options.series.forEach(serie => {\n        if (serie.visible === false) {\n          serie.showInLegend = false;\n        }\n      });\n    }\n\n    return proceed.call(this, options, callback);\n  });\n};\n\nclass Chart extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"update\", data => {\n      if (this.chart) {\n        // FIXME: This should animate the chart somehow\n        this.chart.getChart().series[0].setData(data);\n        this.chart.getChart().update({});\n      }\n    });\n\n    this.chart = null;\n    const {\n      HighchartsExporting,\n      HighchartsMore,\n      HighchartsExportData\n    } = this.props;\n\n    if (HighchartsExporting) {\n      HighchartsExporting(ReactHighcharts.Highcharts);\n    }\n\n    if (HighchartsMore) {\n      HighchartsMore(ReactHighcharts.Highcharts);\n    }\n\n    if (HighchartsExportData) {\n      HighchartsExportData(ReactHighcharts.Highcharts);\n    }\n\n    initialazeHighcharts();\n  }\n\n  componentWillReceiveProps(_ref) {\n    let {\n      data: nextData\n    } = _ref;\n    const {\n      data: prevData\n    } = this.props; // If previous data[i].value is different from next data, update chart\n\n    if (prevData.length !== nextData.length || nextData.some((dataPoint, index) => dataPoint.value !== prevData[index].value)) {\n      this.update(nextData);\n    }\n  }\n\n  componentWillUnmount() {\n    this.chart = null;\n  }\n\n  render() {\n    const {\n      config\n    } = this.props;\n    return React.createElement(ReactHighcharts, {\n      config: config,\n      ref: c => {\n        this.chart = c;\n      }\n    });\n  }\n\n}\n\nChart.propTypes = {\n  config: PropTypes.object.isRequired,\n  data: PropTypes.array.isRequired\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"DonutChart.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/charts/DonutChart.jsx                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet merge;\nmodule.link(\"lodash/merge\", {\n  default(v) {\n    merge = v;\n  }\n\n}, 2);\nlet PieChart;\nmodule.link(\"./PieChart\", {\n  default(v) {\n    PieChart = v;\n  }\n\n}, 3);\n\nconst addCenteredTitle = (chart, title) => {\n  // Destroy old version of the title\n  if (chart.title) {\n    chart.title.destroy();\n  }\n\n  const {\n    plotLeft,\n    plotTop,\n    plotWidth,\n    plotHeight,\n    renderer\n  } = chart;\n  const centerX = plotLeft + plotWidth * 0.5;\n  const centerY = plotTop + plotHeight * 0.5; // Add title but hide it\n\n  chart.title = renderer.text(title, 0, 0).css({\n    color: '#333333',\n    fontSize: '16px',\n    fontWeight: 400\n  }).hide().add();\n  const {\n    width: titleWidth,\n    height: titleHeight\n  } = chart.title.getBBox();\n  const shiftedX = centerX - titleWidth / 2; // Divide by 4 works better than divide by 2, for some reason\n\n  const shiftedY = centerY + titleHeight / 4; // Reposition title and show it\n\n  chart.title.attr({\n    x: shiftedX,\n    y: shiftedY\n  }).show();\n};\n\nconst DonutChart = (_ref) => {\n  let {\n    config,\n    title\n  } = _ref,\n      rest = (0, _objectWithoutProperties2.default)(_ref, [\"config\", \"title\"]);\n  return React.createElement(PieChart, (0, _extends2.default)({\n    config: merge({}, {\n      chart: {\n        events: {\n          load() {\n            addCenteredTitle(this, title);\n          },\n\n          redraw() {\n            addCenteredTitle(this, title);\n          }\n\n        }\n      },\n      title: {\n        text: ''\n      },\n      series: [{\n        innerSize: '60%'\n      }]\n    }, config)\n  }, rest));\n};\n\nDonutChart.propTypes = {\n  config: PropTypes.object,\n  title: PropTypes.string\n};\nDonutChart.defaultProps = {\n  config: {},\n  title: ''\n};\nmodule.exportDefault(DonutChart);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"PieChart.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/charts/PieChart.jsx                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet merge;\nmodule.link(\"lodash/merge\", {\n  default(v) {\n    merge = v;\n  }\n\n}, 2);\nlet defaultConfig;\nmodule.link(\"./chartSettings\", {\n  defaultConfig(v) {\n    defaultConfig = v;\n  }\n\n}, 3);\nlet chartContainer;\nmodule.link(\"./chartContainer\", {\n  default(v) {\n    chartContainer = v;\n  }\n\n}, 4);\nlet Chart;\nmodule.link(\"./Chart\", {\n  default(v) {\n    Chart = v;\n  }\n\n}, 5);\n\nconst getConfig = (_ref) => {\n  let {\n    data,\n    title,\n    subtitle,\n    config\n  } = _ref;\n  return merge({}, defaultConfig, {\n    chart: {\n      type: 'pie'\n    },\n    title: {\n      text: title\n    },\n    subtitle: {\n      text: subtitle\n    },\n    plotOptions: {\n      pie: {\n        size: '100%',\n        borderWidth: 0,\n        allowPointSelect: false,\n        cursor: 'pointer',\n        dataLabels: {\n          enabled: false\n        },\n        showInLegend: true,\n        animation: {\n          duration: 400\n        }\n      }\n    },\n    series: [{\n      type: 'pie',\n      data: data.map((_ref2) => {\n        let {\n          name,\n          value\n        } = _ref2;\n        return {\n          name,\n          y: value\n        };\n      })\n    }]\n  }, config);\n};\n\nconst PieChart = props => React.createElement(Chart, {\n  config: getConfig(props),\n  data: props.data\n});\n\nPieChart.propTypes = {\n  config: PropTypes.object,\n  data: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    value: PropTypes.number.isRequired\n  })),\n  intlPrefix: PropTypes.string,\n  subtitle: PropTypes.string,\n  title: PropTypes.string\n};\nPieChart.defaultProps = {\n  data: [],\n  title: '',\n  subtitle: '',\n  config: {},\n  intlPrefix: undefined\n};\nmodule.exportDefault(chartContainer(PieChart));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"chartContainer.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/charts/chartContainer.js                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet injectIntl;\nmodule.link(\"react-intl\", {\n  injectIntl(v) {\n    injectIntl = v;\n  }\n\n}, 0);\nlet withProps, compose;\nmodule.link(\"recompose\", {\n  withProps(v) {\n    withProps = v;\n  },\n\n  compose(v) {\n    compose = v;\n  }\n\n}, 1);\nmodule.exportDefault(compose(injectIntl, withProps((_ref) => {\n  let {\n    intlPrefix,\n    data,\n    intl: {\n      formatMessage: f\n    }\n  } = _ref;\n  return {\n    data: data.map(dataPoint => {\n      const name = f({\n        id: intlPrefix ? \"\".concat(intlPrefix, \".\").concat(dataPoint.id) : dataPoint.id\n      }); // Use || 0 to make sure the chart does not crash\n\n      return (0, _objectSpread2.default)({}, dataPoint, {\n        value: dataPoint.value || 0,\n        name\n      });\n    })\n  };\n})));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"chartSettings.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/charts/chartSettings.js                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  legendConfig: () => legendConfig,\n  adjustLegend: () => adjustLegend,\n  defaultConfig: () => defaultConfig\n});\nlet colors;\nmodule.link(\"../../config/colors\", {\n  default(v) {\n    colors = v;\n  }\n\n}, 0);\nconst legendConfig = {\n  itemStyle: {\n    fontSize: '14px'\n  },\n  floating: false,\n  itemMarginBottom: 4,\n  margin: 30\n};\n\nfunction adjustLegend(that) {\n  const legend = that.legend;\n  const legendWidth = that.chartWidth - 20;\n  legend.allItems.forEach((item, i, allItems) => {\n    const {\n      width,\n      height\n    } = item.legendGroup.getBBox();\n    const itemsPerRow = i < 3 ? 3 : 2;\n    item.legendGroup.attr({\n      translateX: i % itemsPerRow * (legendWidth - width) / (itemsPerRow - 1),\n      translateY: Math.floor(i / 3) * (height + 5)\n    });\n  });\n}\n\nconst defaultConfig = {\n  chart: {\n    style: {\n      fontFamily: 'Eina04-Regular, Helvetica'\n    },\n    animation: {\n      duration: 400\n    },\n    backgroundColor: 'rgba(255, 255, 255, 0.0)'\n  },\n  title: {\n    style: {\n      fontSize: '18px',\n      color: '#222',\n      fontWeight: 400\n    }\n  },\n  subtitle: {\n    style: {\n      fontSize: '14px'\n    }\n  },\n  tooltip: {\n    style: {\n      fontSize: '14px'\n    }\n  },\n  colors: colors.charts,\n  lang: {\n    thousandsSep: \"'\"\n  },\n  credits: {\n    enabled: false\n  },\n  legend: legendConfig\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"RadioButtons.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/RadioButtons.jsx                                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet Radio, RadioGroup;\nmodule.link(\"./Material/Radio\", {\n  default(v) {\n    Radio = v;\n  },\n\n  RadioGroup(v) {\n    RadioGroup = v;\n  }\n\n}, 2);\nlet FormLabel;\nmodule.link(\"@material-ui/core/FormLabel\", {\n  default(v) {\n    FormLabel = v;\n  }\n\n}, 3);\nlet FormControl;\nmodule.link(\"@material-ui/core/FormControl\", {\n  default(v) {\n    FormControl = v;\n  }\n\n}, 4);\nlet FormControlLabel;\nmodule.link(\"@material-ui/core/FormControlLabel\", {\n  default(v) {\n    FormControlLabel = v;\n  }\n\n}, 5);\nlet T;\nmodule.link(\"./Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 6);\n\nconst safeChange = (value, id, onChange, options) => {\n  // If all options are booleans, transform the onChange handler's value\n  // to booleans\n  if (options.every(o => typeof o === 'boolean' || typeof o.id === 'boolean')) {\n    return onChange(id, value === 'true');\n  }\n\n  return onChange(id, value);\n}; // Cast value to strings, so that is plays nicely with material-ui,\n// in the onChange handler, convert back to boolean\n\n\nconst RadioButtons = (_ref) => {\n  let {\n    options,\n    onChange,\n    id,\n    intlPrefix,\n    value,\n    label,\n    style,\n    radioGroupStyle,\n    disabled\n  } = _ref;\n  return React.createElement(FormControl, {\n    style: style,\n    className: \"mui-radio-group\"\n  }, React.isValidElement(label) && React.createElement(FormLabel, {\n    htmlFor: id\n  }, label), React.createElement(RadioGroup, {\n    onChange: (event, newValue) => safeChange(newValue, id, onChange, options),\n    value: \"\".concat(value),\n    name: id,\n    id: id,\n    className: \"radio-group flex\",\n    style: radioGroupStyle || {\n      justifyContent: 'flex-start',\n      flexDirection: 'row'\n    }\n  }, options.map(option => React.createElement(FormControlLabel, {\n    control: React.createElement(Radio, {\n      className: \"radio\"\n    }),\n    key: option.id || option,\n    value: \"\".concat(option.id !== undefined ? option.id : option),\n    label: option.label || React.createElement(T, {\n      id: \"\".concat(intlPrefix, \".\").concat(option)\n    }),\n    disabled: disabled\n  }))));\n};\n\nRadioButtons.propTypes = {\n  disabled: PropTypes.bool,\n  id: PropTypes.string,\n  intlPrefix: PropTypes.string,\n  label: PropTypes.node,\n  onChange: PropTypes.func.isRequired,\n  options: PropTypes.array.isRequired,\n  style: PropTypes.object,\n  value: PropTypes.any\n};\nRadioButtons.defaultProps = {\n  label: '',\n  style: {},\n  value: undefined,\n  intlPrefix: '',\n  disabled: false\n};\nmodule.exportDefault(RadioButtons);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Roles.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/components/Roles.jsx                                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 1);\nlet T;\nmodule.link(\"./Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 2);\n\nconst Roles = (_ref) => {\n  let {\n    roles,\n    className\n  } = _ref;\n  return React.createElement(\"span\", {\n    className: className\n  }, roles && roles.length > 0 ? roles.map(role => React.createElement(T, {\n    id: \"roles.\".concat(role),\n    key: role\n  })).reduce((acc, currentValue, currentIndex) => [acc, React.createElement(\"span\", {\n    key: currentIndex\n  }, \",\\xA0\"), currentValue]) : null);\n};\n\nRoles.propTypes = {\n  className: PropTypes.string,\n  roles: PropTypes.array\n};\nRoles.defaultProps = {\n  className: '',\n  roles: []\n};\nmodule.exportDefault(Roles);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"api\":{\"files\":{\"client\":{\"test\":{\"documents.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/files/client/test/documents.spec.js                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet STEPS;\nmodule.link(\"../../../constants\", {\n  STEPS(v) {\n    STEPS = v;\n  }\n\n}, 1);\nlet propertyDocuments;\nmodule.link(\"../../../properties/propertiesAdditionalDocuments\", {\n  initialDocuments(v) {\n    propertyDocuments = v;\n  }\n\n}, 2);\nlet getPropertyDocuments, getBorrowerDocuments, getLoanDocuments;\nmodule.link(\"../../documents\", {\n  getPropertyDocuments(v) {\n    getPropertyDocuments = v;\n  },\n\n  getBorrowerDocuments(v) {\n    getBorrowerDocuments = v;\n  },\n\n  getLoanDocuments(v) {\n    getLoanDocuments = v;\n  }\n\n}, 3);\nlet DOCUMENTS;\nmodule.link(\"../../fileConstants\", {\n  DOCUMENTS(v) {\n    DOCUMENTS = v;\n  }\n\n}, 4);\ndescribe('documents', () => {\n  describe('getPropertyDocuments', () => {\n    let loan;\n    beforeEach(() => {\n      loan = {\n        step: STEPS.SOLVENCY,\n        properties: [{\n          _id: 'propertyId',\n          additionalDocuments: propertyDocuments\n        }]\n      };\n    });\n    it('returns an empty array if no propertyId is specified', () => {\n      expect(getPropertyDocuments({\n        loan\n      })).to.deep.equal([]);\n    });\n    it('returns an array of documents for the first step', () => {\n      expect(getPropertyDocuments({\n        loan,\n        id: 'propertyId'\n      }).map((_ref) => {\n        let {\n          id\n        } = _ref;\n        return id;\n      })).to.deep.equal([...propertyDocuments.map((_ref2) => {\n        let {\n          id\n        } = _ref2;\n        return id;\n      }), DOCUMENTS.OTHER]);\n    });\n    it('adds additionalDocuments to it', () => {\n      loan.properties[0].additionalDocuments = [{\n        id: 'someId'\n      }, {\n        id: 'someId2'\n      }];\n      expect(getPropertyDocuments({\n        loan,\n        id: 'propertyId'\n      }).map((_ref3) => {\n        let {\n          id\n        } = _ref3;\n        return id;\n      })).to.deep.equal(['someId', 'someId2', DOCUMENTS.OTHER]);\n    });\n  });\n  describe('borrowerDocuments', () => {\n    let loan;\n    beforeEach(() => {\n      loan = {\n        borrowers: [{\n          _id: 'borrowerId'\n        }],\n        step: STEPS.SOLVENCY\n      };\n    });\n    it('returns an empty array if no Id is provided', () => {\n      expect(getBorrowerDocuments({\n        loan\n      })).to.deep.equal([]);\n    });\n  });\n  describe('getLoanDocuments', () => {\n    it('returns documents for the loan', () => {\n      expect(getLoanDocuments({\n        loan: {\n          general: {}\n        }\n      }).map((_ref4) => {\n        let {\n          id\n        } = _ref4;\n        return id;\n      })).to.deep.equal([DOCUMENTS.OTHER]);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"fileHelpers.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/files/client/test/fileHelpers.spec.js                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet filesPercent, getMissingDocumentIds;\nmodule.link(\"../../fileHelpers\", {\n  filesPercent(v) {\n    filesPercent = v;\n  },\n\n  getMissingDocumentIds(v) {\n    getMissingDocumentIds = v;\n  }\n\n}, 1);\ndescribe('fileHelpers', () => {\n  let fileArray;\n  let dummyDoc;\n  let fileId;\n  beforeEach(() => {\n    fileId = 'myFile';\n    fileArray = [{\n      id: fileId\n    }];\n    dummyDoc = {\n      documents: {}\n    };\n  });\n  describe('filesPercent', () => {\n    it('returns 0 if an empty doc is given', () => {\n      expect(filesPercent({\n        doc: {},\n        fileArray\n      })).to.deep.equal({\n        percent: 0,\n        count: 1\n      });\n    });\n    it('returns 0 if no doc is given', () => {\n      expect(filesPercent({\n        fileArray\n      })).to.deep.equal({\n        percent: 0,\n        count: 1\n      });\n    });\n    it('returns 1 if a file exists', () => {\n      // file exists\n      dummyDoc.documents.myFile = [{}];\n      expect(filesPercent({\n        doc: dummyDoc,\n        fileArray\n      })).to.deep.equal({\n        percent: 1,\n        count: 1\n      });\n    });\n    it('returns 0 if an empty array is given', () => {\n      dummyDoc.documents.myFile = [];\n      expect(filesPercent({\n        doc: dummyDoc,\n        fileArray\n      })).to.deep.equal({\n        percent: 0,\n        count: 1\n      });\n    });\n    it(\"doesn't count files which aren't required\", () => {\n      fileArray = [{\n        id: 'myFile',\n        required: false\n      }];\n      dummyDoc.documents.myFile = [];\n      expect(filesPercent({\n        doc: dummyDoc,\n        fileArray\n      })).to.deep.equal({\n        percent: 1,\n        count: 0\n      });\n    });\n    describe('status verification', () => {\n      it('returns 0 if no files are valid', () => {\n        fileArray = [{\n          id: 'myFile',\n          condition: undefined\n        }];\n        dummyDoc.documents.myFile = [{\n          status: 'INVALID'\n        }];\n        expect(filesPercent({\n          doc: dummyDoc,\n          fileArray,\n          checkValidity: true\n        })).to.deep.equal({\n          percent: 0,\n          count: 1\n        });\n      });\n      it('returns 0.5 if one file is valid', () => {\n        fileArray = [{\n          id: 'myFile',\n          condition: undefined\n        }, {\n          id: 'myFile2',\n          condition: undefined\n        }];\n        dummyDoc.documents.myFile = [{\n          status: 'INVALID'\n        }];\n        dummyDoc.documents.myFile2 = [{\n          status: 'VALID'\n        }];\n        expect(filesPercent({\n          doc: dummyDoc,\n          fileArray,\n          checkValidity: true\n        })).to.deep.equal({\n          percent: 0.5,\n          count: 2\n        });\n      });\n    });\n  });\n  describe('getMissingDocumentIds', () => {\n    it('returns the array of missing docs', () => {\n      expect(getMissingDocumentIds({\n        doc: dummyDoc,\n        fileArray\n      })).to.deep.equal([fileId]);\n    });\n    it('returns an empty array if all documents have been uploaded', () => {\n      dummyDoc.documents[fileId] = [{}];\n      expect(getMissingDocumentIds({\n        doc: dummyDoc,\n        fileArray\n      })).to.deep.equal([]);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"documents.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/files/documents.js                                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  documentHasTooltip: () => documentHasTooltip,\n  allDocuments: () => allDocuments,\n  getPropertyDocuments: () => getPropertyDocuments,\n  getBorrowerDocuments: () => getBorrowerDocuments,\n  getLoanDocuments: () => getLoanDocuments\n});\nlet PROPERTIES_COLLECTION, BORROWERS_COLLECTION, LOANS_COLLECTION;\nmodule.link(\"../constants\", {\n  PROPERTIES_COLLECTION(v) {\n    PROPERTIES_COLLECTION = v;\n  },\n\n  BORROWERS_COLLECTION(v) {\n    BORROWERS_COLLECTION = v;\n  },\n\n  LOANS_COLLECTION(v) {\n    LOANS_COLLECTION = v;\n  }\n\n}, 0);\nlet DOCUMENTS, DOCUMENTS_WITH_TOOLTIP, BORROWER_DOCUMENTS, PROPERTY_DOCUMENTS, LOAN_DOCUMENTS;\nmodule.link(\"./fileConstants\", {\n  DOCUMENTS(v) {\n    DOCUMENTS = v;\n  },\n\n  DOCUMENTS_WITH_TOOLTIP(v) {\n    DOCUMENTS_WITH_TOOLTIP = v;\n  },\n\n  BORROWER_DOCUMENTS(v) {\n    BORROWER_DOCUMENTS = v;\n  },\n\n  PROPERTY_DOCUMENTS(v) {\n    PROPERTY_DOCUMENTS = v;\n  },\n\n  LOAN_DOCUMENTS(v) {\n    LOAN_DOCUMENTS = v;\n  }\n\n}, 1);\n\nconst documentHasTooltip = documentId => !DOCUMENTS_WITH_TOOLTIP.some(id => documentId === id);\n\nconst makeAllObjectDocuments = documents => Object.values(documents).map(id => ({\n  id,\n  noTooltips: documentHasTooltip(id)\n}));\n\nconst allDocuments = (_ref) => {\n  let {\n    doc,\n    collection\n  } = _ref;\n  const s3Documents = doc.documents ? Object.keys(doc.documents).map(key => ({\n    id: key\n  })) : [];\n  let documents = [];\n\n  switch (collection) {\n    case BORROWERS_COLLECTION:\n      documents = makeAllObjectDocuments(BORROWER_DOCUMENTS);\n      break;\n\n    case PROPERTIES_COLLECTION:\n      documents = makeAllObjectDocuments(PROPERTY_DOCUMENTS);\n      break;\n\n    case LOANS_COLLECTION:\n      documents = makeAllObjectDocuments(LOAN_DOCUMENTS);\n      break;\n\n    default:\n      break;\n  }\n\n  const otherAdditionalDocuments = documents.filter((_ref2) => {\n    let {\n      id\n    } = _ref2;\n    return !doc.additionalDocuments.some(document => id === document.id);\n  });\n  const legacyCustomDocuments = s3Documents.filter((_ref3) => {\n    let {\n      id\n    } = _ref3;\n    return !doc.additionalDocuments.some(document => id === document.id) && !documents.some(document => id === document.id);\n  });\n  return doc.additionalDocuments && doc.additionalDocuments.length > 0 ? [...doc.additionalDocuments, ...otherAdditionalDocuments, ...legacyCustomDocuments] : documents;\n};\n\nconst requiredByAdminOnly = (_ref4) => {\n  let {\n    requiredByAdmin\n  } = _ref4;\n  return requiredByAdmin !== false;\n};\n\nconst formatAdditionalDoc = additionalDoc => (0, _objectSpread2.default)({}, additionalDoc, {\n  required: true,\n  noTooltips: documentHasTooltip(additionalDoc.id)\n});\n\nconst makeGetDocuments = collection => function (_ref5) {\n  let {\n    loan,\n    id\n  } = _ref5;\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    doc\n  } = options;\n  const isLoans = collection === LOANS_COLLECTION;\n\n  if (!id && !isLoans) {\n    return [];\n  }\n\n  const document = doc || !isLoans && loan[collection].find((_ref6) => {\n    let {\n      _id\n    } = _ref6;\n    return _id === id;\n  }) || loan;\n  const additionalDocumentsExist = document && document.additionalDocuments && document.additionalDocuments.length > 0;\n  return [...(additionalDocumentsExist ? document.additionalDocuments.filter(requiredByAdminOnly).map(formatAdditionalDoc) : []), {\n    id: DOCUMENTS.OTHER,\n    required: false,\n    noTooltips: true\n  }];\n};\n\nconst getPropertyDocuments = makeGetDocuments(PROPERTIES_COLLECTION);\nconst getBorrowerDocuments = makeGetDocuments(BORROWERS_COLLECTION);\nconst getLoanDocuments = makeGetDocuments(LOANS_COLLECTION);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"fileConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/files/fileConstants.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  FILE_STATUS: () => FILE_STATUS,\n  ALLOWED_FILE_TYPES: () => ALLOWED_FILE_TYPES,\n  ONE_KB: () => ONE_KB,\n  MAX_FILE_SIZE: () => MAX_FILE_SIZE,\n  SLINGSHOT_DIRECTIVE_NAME: () => SLINGSHOT_DIRECTIVE_NAME,\n  EXOSCALE_PATH: () => EXOSCALE_PATH,\n  BUCKET_NAME: () => BUCKET_NAME,\n  TEST_BUCKET_NAME: () => TEST_BUCKET_NAME,\n  OBJECT_STORAGE_PATH: () => OBJECT_STORAGE_PATH,\n  OBJECT_STORAGE_REGION: () => OBJECT_STORAGE_REGION,\n  S3_ENDPOINT: () => S3_ENDPOINT,\n  PROPERTY_DOCUMENTS: () => PROPERTY_DOCUMENTS,\n  BORROWER_DOCUMENTS: () => BORROWER_DOCUMENTS,\n  LOAN_DOCUMENTS: () => LOAN_DOCUMENTS,\n  DOCUMENTS: () => DOCUMENTS,\n  DOCUMENTS_CATEGORIES: () => DOCUMENTS_CATEGORIES,\n  DOCUMENTS_WITH_TOOLTIP: () => DOCUMENTS_WITH_TOOLTIP,\n  S3_ACLS: () => S3_ACLS\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nconst FILE_STATUS = {\n  UNVERIFIED: 'UNVERIFIED',\n  VALID: 'VALID',\n  ERROR: 'ERROR'\n};\nconst ALLOWED_FILE_TYPES = ['image/png', 'image/jpeg', 'application/pdf', 'application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'];\nconst ONE_KB = 1024;\nconst MAX_FILE_SIZE = 50 * ONE_KB * ONE_KB;\nconst SLINGSHOT_DIRECTIVE_NAME = 'exoscale';\nconst EXOSCALE_PATH = 'sos-ch-dk-2.exo.io';\nconst BUCKET_NAME = Meteor.isServer ? Meteor.settings.storage.bucketName : '';\nconst TEST_BUCKET_NAME = 'e-potek-test-bucket';\nconst OBJECT_STORAGE_PATH = \"https://\".concat(BUCKET_NAME, \".\").concat(EXOSCALE_PATH);\nconst OBJECT_STORAGE_REGION = 'CH-DK-2';\nconst S3_ENDPOINT = 'https://sos-ch-dk-2.exo.io';\nconst PROPERTY_DOCUMENTS = {\n  COOWNERSHIP_AGREEMENT: 'COOWNERSHIP_AGREEMENT',\n  COOWNERSHIP_ALLOCATION_AGREEMENT: 'COOWNERSHIP_ALLOCATION_AGREEMENT',\n  FIRE_AND_WATER_INSURANCE: 'FIRE_AND_WATER_INSURANCE',\n  INVESTEMENT_PROPERTY_RENTAL_STATEMENT: 'INVESTMENT_PROPERTY_RENTAL_STATEMENT',\n  INVESTEMENT_PROPERTY_SERVICE_CHARGE_SETTLEMENT: 'INVESTEMENT_PROPERTY_SERVICE_CHARGE_SETTLEMENT',\n  INVESTEMENT_PROPERTY_WORKS_HISTORY: 'INVESTEMENT_PROPERTY_WORKS_HISTORY',\n  INVESTMENT_PROPERTY_CONDOMINIUM_OWNERSHIP_DIVISION_REGISTER: 'INVESTMENT_PROPERTY_CONDOMINIUM_OWNERSHIP_DIVISION_REGISTER',\n  INVESTMENT_PROPERTY_CONDOMINIUM_REGULATION: 'INVESTMENT_PROPERTY_CONDOMINIUM_REGULATION',\n  INVESTMENT_PROPERTY_RENT_JUSTIFICATION: 'INVESTMENT_PROPERTY_RENT_JUSTIFICATION',\n  LAND_REGISTER_EXTRACT: 'LAND_REGISTER_EXTRACT',\n  PROPERTY_FUTURE_WORKS: 'PROPERTY_FUTURE_WORKS',\n  PROPERTY_MINERGIE_CERTIFICATE: 'PROPERTY_MINERGIE_CERTIFICATE',\n  PROPERTY_MARKETING_BROCHURE: 'PROPERTY_MARKETING_BROCHURE',\n  PROPERTY_PICTURES: 'PROPERTY_PICTURES',\n  PROPERTY_PLANS: 'PROPERTY_PLANS',\n  PROPERTY_VOLUME: 'PROPERTY_VOLUME',\n  PROPERTY_WORKS_QUOTE: 'PROPERTY_WORKS_QUOTE',\n  PURCHASE_CONTRACT: 'PURCHASE_CONTRACT',\n  SHARE_BUILDING_PERMIT: 'SHARE_BUILDING_PERMIT',\n  SHARE_EASEMENTS: 'SHARE_EASEMENTS',\n  SHARE_FINANCIAL_PLAN: 'SHARE_FINANCIAL_PLAN',\n  SHARE_GC_CONTRACT: 'SHARE_GC_CONTRACT',\n  SHARE_GC_QUOTE_BY_BCC: 'SHARE_GC_QUOTE_BY_BCC',\n  SHARE_INSURANCE_CERTIFICATE: 'SHARE_INSURANCE_CERTIFICATE',\n  SHARE_PLANS: 'SHARE_PLANS',\n  SHARE_WORKS: 'SHARE_WORKS'\n};\nconst BORROWER_DOCUMENTS = {\n  BONUSES: 'BONUSES',\n  CURRENT_MORTGAGES_INTERESTS_STATEMENT: 'CURRENT_MORTGAGE_INTERESTS_STATEMENT',\n  CURRENT_MORTGAGES: 'CURRENT_MORTGAGES',\n  DEBT_COLLECTION_REGISTER_EXTRACT: 'DEBT_COLLECTION_REGISTER_EXTRACT',\n  DIVORCE_RULING: 'DIVORCE_RULING',\n  EXPENSES_JUSTIFICATION: 'EXPENSES_JUSTIFICATION',\n  IDENTITY: 'IDENTITY',\n  LAST_SALARIES: 'LAST_SALARIES',\n  LEGITIMATION_CARD: 'LEGITIMATION_CARD',\n  OTHER_FORTUNE_JUSTIFICATION: 'OTHER_FORTUNE_JUSTIFICATION',\n  OTHER_INCOME_JUSTIFICATION: 'OTHER_INCOME_JUSTIFICATION',\n  OWN_COMPANY_COMMERCIAL_REGISTER: 'OWN_COMPANY_COMMERCIAL_REGISTER',\n  OWN_COMPANY_FINANCIAL_STATEMENTS: 'OWN_COMPANY_FINANCIAL_STATEMENTS',\n  OWN_FUNDS_JUSTIFICATION: 'OWN_FUND_JUSTIFICATION',\n  PENSION_FUND_YEARLY_STATEMENT: 'PENSION_FUND_YEARLY_STATEMENT',\n  RESIDENCY_PERMIT: 'RESIDENCY_PERMIT',\n  SALARY_CERTIFICATE: 'SALARY_CERTIFICATE',\n  TAX_STATEMENT: 'TAX_STATEMENT',\n  TAXES: 'TAXES',\n  THIRD_PILLAR_ACCOUNTS: 'THIRD_PILLAR_ACCOUNTS',\n  WITHDRAWAL_JUSTIFICATION: 'WITHDRAWAL_JUSTIFICATION'\n};\nconst LOAN_DOCUMENTS = {\n  CONTRACT: 'CONTRACT',\n  REIMBURSEMENT_STATEMENT: 'REIMBURSEMENT_STATEMENT',\n  SIGNED_CONTRACT: 'SIGNED_CONTRACT',\n  SIGNED_MANDATE: 'SIGNED_MANDATE'\n};\nconst DOCUMENTS = (0, _objectSpread2.default)({}, PROPERTY_DOCUMENTS, BORROWER_DOCUMENTS, LOAN_DOCUMENTS, {\n  OTHER: 'OTHER'\n});\nconst DOCUMENTS_CATEGORIES = {\n  PERSONAL_DOCUMENTS: [BORROWER_DOCUMENTS.IDENTITY, BORROWER_DOCUMENTS.RESIDENCY_PERMIT, BORROWER_DOCUMENTS.LEGITIMATION_CARD, BORROWER_DOCUMENTS.DEBT_COLLECTION_REGISTER_EXTRACT, BORROWER_DOCUMENTS.DIVORCE_RULING],\n  INCOMES_AND_EXPENSES: [BORROWER_DOCUMENTS.TAXES, BORROWER_DOCUMENTS.SALARY_CERTIFICATE, BORROWER_DOCUMENTS.LAST_SALARIES, BORROWER_DOCUMENTS.BONUSES, BORROWER_DOCUMENTS.OTHER_INCOME_JUSTIFICATION, BORROWER_DOCUMENTS.EXPENSES_JUSTIFICATION, BORROWER_DOCUMENTS.CURRENT_MORTGAGES],\n  FORTUNE_AND_OWN_FUNDS: [BORROWER_DOCUMENTS.OWN_FUNDS_JUSTIFICATION, BORROWER_DOCUMENTS.OTHER_FORTUNE_JUSTIFICATION, BORROWER_DOCUMENTS.OWN_COMPANY_FINANCIAL_STATEMENTS],\n  RETIREMENT: [BORROWER_DOCUMENTS.PENSION_FUND_YEARLY_STATEMENT, BORROWER_DOCUMENTS.THIRD_PILLAR_ACCOUNTS, BORROWER_DOCUMENTS.WITHDRAWAL_JUSTIFICATION],\n  HOUSING: [PROPERTY_DOCUMENTS.PROPERTY_MARKETING_BROCHURE, PROPERTY_DOCUMENTS.PROPERTY_PICTURES, PROPERTY_DOCUMENTS.PROPERTY_PLANS, PROPERTY_DOCUMENTS.PROPERTY_VOLUME, PROPERTY_DOCUMENTS.PROPERTY_MINERGIE_CERTIFICATE, PROPERTY_DOCUMENTS.FIRE_AND_WATER_INSURANCE, PROPERTY_DOCUMENTS.PROPERTY_WORKS_QUOTE, PROPERTY_DOCUMENTS.COOWNERSHIP_AGREEMENT, PROPERTY_DOCUMENTS.COOWNERSHIP_ALLOCATION_AGREEMENT, PROPERTY_DOCUMENTS.PROPERTY_FUTURE_WORKS, PROPERTY_DOCUMENTS.INVESTEMENT_PROPERTY_RENTAL_STATEMENT, PROPERTY_DOCUMENTS.INVESTEMENT_PROPERTY_SERVICE_CHARGE_SETTLEMENT, PROPERTY_DOCUMENTS.PURCHASE_CONTRACT, PROPERTY_DOCUMENTS.LAND_REGISTER_EXTRACT],\n  SHARE: [PROPERTY_DOCUMENTS.SHARE_BUILDING_PERMIT, PROPERTY_DOCUMENTS.SHARE_EASEMENTS, PROPERTY_DOCUMENTS.SHARE_FINANCIAL_PLAN, PROPERTY_DOCUMENTS.SHARE_GC_CONTRACT, PROPERTY_DOCUMENTS.SHARE_GC_QUOTE_BY_BCC, PROPERTY_DOCUMENTS.SHARE_INSURANCE_CERTIFICATE, PROPERTY_DOCUMENTS.SHARE_PLANS, PROPERTY_DOCUMENTS.SHARE_WORKS]\n};\nconst DOCUMENTS_WITH_TOOLTIP = [DOCUMENTS.BONUSES, DOCUMENTS.BUYERS_CONTRACT, DOCUMENTS.COOWNERSHIP_AGREEMENT, DOCUMENTS.COOWNERSHIP_ALLOCATION_AGREEMENT, DOCUMENTS.CURRENT_MORTGAGES, DOCUMENTS.DEBT_COLLECTION_REGISTER_EXTRACT, DOCUMENTS.EXPENSES_JUSTIFICATION, DOCUMENTS.FIRE_AND_WATER_INSURANCE, DOCUMENTS.IDENTITY, DOCUMENTS.INVESTEMENT_PROPERTY_RENTAL_STATEMENT, DOCUMENTS.INVESTEMENT_PROPERTY_SERVICE_CHARGE_SETTLEMENT, DOCUMENTS.PURCHASE_CONTRACT, DOCUMENTS.LAST_SALARIES, DOCUMENTS.LEGITIMATION_CARD, DOCUMENTS.OTHER_INCOME_JUSTIFICATION, DOCUMENTS.OTHER_FORTUNE_JUSTIFICATION, DOCUMENTS.OWN_COMPANY_FINANCIAL_STATEMENTS, DOCUMENTS.OWN_FUNDS_JUSTIFICATION, DOCUMENTS.PENSION_FUND_YEARLY_STATEMENT, DOCUMENTS.PROPERTY_MARKETING_BROCHURE, DOCUMENTS.PROPERTY_PICTURES, DOCUMENTS.PROPERTY_VOLUME, DOCUMENTS.PROPERTY_WORKS_QUOTE, DOCUMENTS.PROPERTY_FUTURE_WORKS, DOCUMENTS.REIMBURSEMENT_STATEMENT, DOCUMENTS.RESIDENCY_PERMIT, DOCUMENTS.SIGNED_CONTRACT, DOCUMENTS.TAXES, DOCUMENTS.THIRD_PILLAR_ACCOUNTS, DOCUMENTS.WITHDRAWAL_JUSTIFICATION];\nconst S3_ACLS = {\n  PRIVATE: 'private',\n  PUBLIC_READ: 'public-read',\n  PUBLIC_READ_WRITE: 'public-read-write',\n  AUTHENTICATED_READ: 'authenticated-read',\n  BUCKET_OWNER_READ: 'bucket-owner-read',\n  BUCKET_OWNER_FULL_CONTROL: 'bucket-owner-full-control',\n  LOG_DELIVERY_WRITE: 'log-delivery-write'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"fileHelpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/files/fileHelpers.js                                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  filesPercent: () => filesPercent,\n  getMissingDocumentIds: () => getMissingDocumentIds\n});\nlet getPercent;\nmodule.link(\"../../utils/general\", {\n  getPercent(v) {\n    getPercent = v;\n  }\n\n}, 0);\nlet FILE_STATUS;\nmodule.link(\"./fileConstants\", {\n  FILE_STATUS(v) {\n    FILE_STATUS = v;\n  }\n\n}, 1);\n\nconst documentIsRequired = required => required !== false;\n\nconst getDocumentsToCount = (documentArray, doc, checkDocumentStatus) => {\n  if (!doc || !doc.documents) {\n    return [undefined];\n  }\n\n  const {\n    documents\n  } = doc;\n  return documentArray.reduce((documentsToCount, _ref) => {\n    let {\n      required,\n      id: documentId\n    } = _ref;\n\n    if (!documentIsRequired(required)) {\n      // Don't count this document\n      return documentsToCount;\n    }\n\n    if (!documents[documentId]) {\n      // No document has been added yet, count this one, and as todo\n      return [...documentsToCount, undefined];\n    }\n\n    if (checkDocumentStatus) {\n      // Make sure all documents have a valid status\n      const allFilesAreValid = documents[documentId].every((_ref2) => {\n        let {\n          status\n        } = _ref2;\n        return status === FILE_STATUS.VALID;\n      });\n      return [...documentsToCount, allFilesAreValid ? true : undefined];\n    }\n\n    return [...documentsToCount, documents[documentId]];\n  }, []);\n};\n/**\n * filesPercent - Determines the completion rate of file upload for a given\n * step, doc and array of files\n *\n * @param {object} doc           The mongoDB document where files are saved\n * @param {function} fileArray   Array of files\n\n *\n * @return {number} a value between 0 and 1 indicating the percentage of\n * completion, 1 is complete, 0 is not started\n */\n\n\nconst filesPercent = (_ref3) => {\n  let {\n    fileArray,\n    doc,\n    checkValidity\n  } = _ref3;\n  const documentsToCount = getDocumentsToCount(fileArray, doc, checkValidity);\n  return {\n    percent: getPercent(documentsToCount),\n    count: documentsToCount.length\n  };\n};\n\nconst documentExists = (doc, id) => doc && doc.documents && doc.documents[id] && doc.documents[id].length > 0;\n\nconst getMissingDocumentIds = (_ref4) => {\n  let {\n    fileArray,\n    doc\n  } = _ref4;\n  const ids = fileArray.filter((_ref5) => {\n    let {\n      required,\n      id\n    } = _ref5;\n    return documentIsRequired(required) && !documentExists(doc, id);\n  }).map((_ref6) => {\n    let {\n      id\n    } = _ref6;\n    return id;\n  });\n  return ids;\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"meteor-slingshot.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/files/meteor-slingshot.js                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Slingshot;\nmodule.link(\"meteor/edgee:slingshot\", {\n  Slingshot(v) {\n    Slingshot = v;\n  }\n\n}, 0);\nlet SLINGSHOT_DIRECTIVE_NAME, ALLOWED_FILE_TYPES, MAX_FILE_SIZE;\nmodule.link(\"./fileConstants\", {\n  SLINGSHOT_DIRECTIVE_NAME(v) {\n    SLINGSHOT_DIRECTIVE_NAME = v;\n  },\n\n  ALLOWED_FILE_TYPES(v) {\n    ALLOWED_FILE_TYPES = v;\n  },\n\n  MAX_FILE_SIZE(v) {\n    MAX_FILE_SIZE = v;\n  }\n\n}, 1);\nSlingshot.fileRestrictions(SLINGSHOT_DIRECTIVE_NAME, {\n  allowedFileTypes: ALLOWED_FILE_TYPES,\n  maxSize: MAX_FILE_SIZE\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/files/methodDefinitions.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  deleteFile: () => deleteFile,\n  setFileStatus: () => setFileStatus,\n  setFileError: () => setFileError,\n  downloadFile: () => downloadFile,\n  getSignedUrl: () => getSignedUrl,\n  updateDocumentsCache: () => updateDocumentsCache\n});\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 0);\nconst deleteFile = new Method({\n  name: 'deleteFile',\n  params: {\n    collection: String,\n    docId: String,\n    fileKey: String\n  }\n});\nconst setFileStatus = new Method({\n  name: 'setFileStatus',\n  params: {\n    fileKey: String,\n    newStatus: String\n  }\n});\nconst setFileError = new Method({\n  name: 'setFileError',\n  params: {\n    error: String,\n    fileKey: String\n  }\n});\nconst downloadFile = new Method({\n  name: 'downloadFile',\n  params: {\n    key: String\n  }\n});\nconst getSignedUrl = new Method({\n  name: 'getSignedUrl',\n  params: {\n    key: String\n  }\n});\nconst updateDocumentsCache = new Method({\n  name: 'updateDocumentsCache',\n  params: {\n    docId: String,\n    collection: String\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"loans\":{\"test\":{\"client\":{\"proLoans.test.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/loans/test/client/proLoans.test.js                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet userLogin, resetDatabase;\nmodule.link(\"../../../../utils/testHelpers/testHelpers\", {\n  userLogin(v) {\n    userLogin = v;\n  },\n\n  resetDatabase(v) {\n    resetDatabase = v;\n  }\n\n}, 1);\nlet ROLES;\nmodule.link(\"../../../constants\", {\n  ROLES(v) {\n    ROLES = v;\n  }\n\n}, 2);\nlet generateScenario;\nmodule.link(\"../../../methods/index\", {\n  generateScenario(v) {\n    generateScenario = v;\n  }\n\n}, 3);\nlet proLoans;\nmodule.link(\"../proLoans.app-test\", {\n  default(v) {\n    proLoans = v;\n  }\n\n}, 4);\n\nconst fetchLoans = userId => new Promise((resolve, reject) => {\n  proLoans.clone({\n    userId\n  }).fetch((err, data) => err ? reject(err) : resolve(data));\n});\n\nconst createUserWithLoan = referredByUserLink => generateScenario.run({\n  scenario: {\n    users: {\n      referredByUserLink,\n      loans: {}\n    }\n  }\n});\n\nconst createProUser = userId => generateScenario.run({\n  scenario: {\n    users: {\n      _factory: 'pro',\n      _id: userId\n    }\n  }\n});\n\ndescribe('loanQueries', function () {\n  this.timeout(10000);\n  beforeEach(() => resetDatabase());\n  describe('proLoans', () => {\n    it('uses the cache when necessary', () => {\n      let t0;\n      let t1;\n      return userLogin({\n        role: ROLES.ADMIN\n      }).then(() => createProUser('proId')).then(() => createUserWithLoan('proId')).then(() => {\n        t0 = performance.now();\n        return fetchLoans('proId');\n      }).then(loans => {\n        t1 = performance.now();\n        expect(loans.length).to.equal(1);\n        expect(t1 - t0).to.be.within(500, 2000);\n        return fetchLoans('proId');\n      }).then(loans => {\n        const t2 = performance.now();\n        expect(loans.length).to.equal(1);\n        expect(t2 - t1).to.be.within(0, 100);\n      });\n    });\n    it('resets the cache when necessary', () => {\n      let t0;\n      let t1;\n      let t2;\n      return userLogin({\n        role: ROLES.ADMIN\n      }).then(() => createProUser('proId')).then(() => createUserWithLoan('proId')).then(() => {\n        t0 = performance.now();\n        return fetchLoans('proId');\n      }).then(loans => {\n        t1 = performance.now();\n        expect(loans.length).to.equal(1);\n        expect(t1 - t0).to.be.within(500, 2000);\n        return createUserWithLoan('proId');\n      }).then(() => {\n        t2 = performance.now();\n        return fetchLoans('proId');\n      }).then(loans => {\n        const t3 = performance.now();\n        expect(loans.length).to.equal(2);\n        expect(t3 - t2).to.be.within(500, 2000);\n      });\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"proLoans.app-test.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/loans/test/proLoans.app-test.js                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n// @flow\n// import Loans from 'core/api/loans';\nconst Loans = require('..').default;\n\nmodule.exports = Loans.createQuery('PRO_LOANS_TEST', () => {});\n\n// Sort this query properly so that the merge on the client succeeds\n// export default Loans.createQuery('PRO_LOANS_TEST', () => {});\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"schemas\":{\"LoanSchema.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/loans/schemas/LoanSchema.js                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\nlet createdAt, updatedAt, contactsSchema, additionalDocuments, documentsField, cacheField;\nmodule.link(\"../../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  },\n\n  contactsSchema(v) {\n    contactsSchema = v;\n  },\n\n  additionalDocuments(v) {\n    additionalDocuments = v;\n  },\n\n  documentsField(v) {\n    documentsField = v;\n  },\n\n  cacheField(v) {\n    cacheField = v;\n  }\n\n}, 1);\nlet LOAN_STATUS, LOAN_VERIFICATION_STATUS, PURCHASE_TYPE, OWNER, CANTONS, STEPS, APPLICATION_TYPES, LOAN_CATEGORIES;\nmodule.link(\"../loanConstants\", {\n  LOAN_STATUS(v) {\n    LOAN_STATUS = v;\n  },\n\n  LOAN_VERIFICATION_STATUS(v) {\n    LOAN_VERIFICATION_STATUS = v;\n  },\n\n  PURCHASE_TYPE(v) {\n    PURCHASE_TYPE = v;\n  },\n\n  OWNER(v) {\n    OWNER = v;\n  },\n\n  CANTONS(v) {\n    CANTONS = v;\n  },\n\n  STEPS(v) {\n    STEPS = v;\n  },\n\n  APPLICATION_TYPES(v) {\n    APPLICATION_TYPES = v;\n  },\n\n  LOAN_CATEGORIES(v) {\n    LOAN_CATEGORIES = v;\n  }\n\n}, 2);\nlet RESIDENCE_TYPE;\nmodule.link(\"../../constants\", {\n  RESIDENCE_TYPE(v) {\n    RESIDENCE_TYPE = v;\n  }\n\n}, 3);\nlet StructureSchema;\nmodule.link(\"./StructureSchema\", {\n  default(v) {\n    StructureSchema = v;\n  }\n\n}, 4);\nlet promotionSchema;\nmodule.link(\"./promotionSchema\", {\n  default(v) {\n    promotionSchema = v;\n  }\n\n}, 5);\nlet borrowerIdsSchema, propertyIdsSchema, previousLoanTranchesSchema, maxPropertyValueSchema;\nmodule.link(\"./otherSchemas\", {\n  borrowerIdsSchema(v) {\n    borrowerIdsSchema = v;\n  },\n\n  propertyIdsSchema(v) {\n    propertyIdsSchema = v;\n  },\n\n  previousLoanTranchesSchema(v) {\n    previousLoanTranchesSchema = v;\n  },\n\n  maxPropertyValueSchema(v) {\n    maxPropertyValueSchema = v;\n  }\n\n}, 6);\nconst LoanSchema = new SimpleSchema((0, _objectSpread2.default)({\n  userId: {\n    type: String,\n    optional: true\n  },\n  createdAt,\n  updatedAt,\n  status: {\n    type: String,\n    defaultValue: LOAN_STATUS.LEAD,\n    allowedValues: Object.values(LOAN_STATUS)\n  },\n  general: {\n    type: Object,\n    optional: true,\n    blackbox: true,\n    defaultValue: {}\n  },\n  // To be removed once migrations are done\n  name: {\n    type: String,\n    unique: true,\n    regEx: /^\\d{2}-\\d{4}$/\n  },\n  adminValidation: {\n    type: Object,\n    defaultValue: {},\n    blackbox: true\n  },\n  userFormsEnabled: {\n    type: Boolean,\n    defaultValue: true,\n    optional: true\n  },\n  structures: {\n    type: Array,\n    defaultValue: []\n  },\n  'structures.$': StructureSchema,\n  selectedStructure: {\n    type: String,\n    optional: true\n  },\n  verificationStatus: {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(LOAN_VERIFICATION_STATUS),\n    defaultValue: LOAN_VERIFICATION_STATUS.NONE,\n    uniforms: {\n      displayEmpty: false\n    }\n  },\n  purchaseType: {\n    type: String,\n    defaultValue: PURCHASE_TYPE.ACQUISITION,\n    allowedValues: Object.values(PURCHASE_TYPE),\n    uniforms: {\n      displayEmpty: false\n    }\n  },\n  residenceType: {\n    type: String,\n    allowedValues: Object.values(RESIDENCE_TYPE),\n    optional: true,\n    uniforms: {\n      displayEmpty: false\n    }\n  },\n  canton: {\n    type: String,\n    optional: true,\n    allowedValues: Object.keys(CANTONS)\n  },\n  currentOwner: {\n    type: String,\n    defaultValue: OWNER.FIRST,\n    allowedValues: Object.values(OWNER)\n  },\n  futureOwner: {\n    type: String,\n    defaultValue: OWNER.FIRST,\n    allowedValues: Object.values(OWNER)\n  },\n  otherOwner: {\n    type: String,\n    optional: true\n  },\n  enableOffers: {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  previousLender: {\n    type: String,\n    optional: true\n  },\n  customName: {\n    type: String,\n    optional: true\n  },\n  applicationType: {\n    type: String,\n    allowedValues: Object.values(APPLICATION_TYPES),\n    defaultValue: APPLICATION_TYPES.SIMPLE,\n    uniforms: {\n      placeholder: null\n    }\n  }\n}, promotionSchema, borrowerIdsSchema, propertyIdsSchema, contactsSchema, previousLoanTranchesSchema, additionalDocuments([]), {\n  revenueLinks: {\n    type: Array,\n    optional: true\n  },\n  'revenueLinks.$': String,\n  userCache: cacheField,\n  step: {\n    type: String,\n    defaultValue: STEPS.SOLVENCY,\n    allowedValues: Object.values(STEPS),\n    uniforms: {\n      placeholder: ''\n    }\n  },\n  displayWelcomeScreen: {\n    type: Boolean,\n    defaultValue: true,\n    optional: true\n  }\n}, maxPropertyValueSchema, {\n  shareSolvency: {\n    type: Boolean,\n    optional: true\n  },\n  documents: documentsField,\n  anonymous: {\n    type: Boolean,\n    optional: true,\n    defaultValue: false\n  },\n  referralId: {\n    type: String,\n    optional: true\n  },\n  category: {\n    type: String,\n    defaultValue: LOAN_CATEGORIES.STANDARD,\n    allowedValues: Object.values(LOAN_CATEGORIES),\n    uniforms: {\n      placeholder: null\n    }\n  },\n  adminNote: {\n    type: String,\n    optional: true\n  },\n  lendersCache: {\n    type: Array,\n    optional: true\n  },\n  'lendersCache.$': cacheField,\n  tasksCache: {\n    type: Array,\n    optional: true\n  },\n  'tasksCache.$': cacheField,\n  financedPromotionLink: {\n    type: Object,\n    optional: true\n  },\n  'financedPromotionLink._id': {\n    type: String,\n    optional: true\n  },\n  simpleBorrowersForm: {\n    type: Boolean,\n    defaultValue: true\n  }\n}));\nmodule.exportDefault(LoanSchema);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"StructureSchema.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/loans/schemas/StructureSchema.js                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  structureSchema: () => structureSchema\n});\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\nlet AMORTIZATION_TYPE, OWN_FUNDS_USAGE_TYPES;\nmodule.link(\"../loanConstants\", {\n  AMORTIZATION_TYPE(v) {\n    AMORTIZATION_TYPE = v;\n  },\n\n  OWN_FUNDS_USAGE_TYPES(v) {\n    OWN_FUNDS_USAGE_TYPES = v;\n  }\n\n}, 1);\nlet OWN_FUNDS_TYPES;\nmodule.link(\"../../constants\", {\n  OWN_FUNDS_TYPES(v) {\n    OWN_FUNDS_TYPES = v;\n  }\n\n}, 2);\nlet loanTranchesSchema;\nmodule.link(\"./otherSchemas\", {\n  loanTranchesSchema(v) {\n    loanTranchesSchema = v;\n  }\n\n}, 3);\nlet moneyField;\nmodule.link(\"../../helpers/sharedSchemas\", {\n  moneyField(v) {\n    moneyField = v;\n  }\n\n}, 4);\nconst structureSchema = (0, _objectSpread2.default)({\n  amortization: (0, _objectSpread2.default)({}, moneyField, {\n    defaultValue: 0\n  }),\n  amortizationType: {\n    type: String,\n    allowedValues: Object.values(AMORTIZATION_TYPE),\n    optional: true\n  },\n  description: {\n    type: String,\n    optional: true\n  },\n  disabled: {\n    type: Boolean,\n    defaultValue: false\n  },\n  id: String,\n  mortgageNoteIds: {\n    type: Array,\n    optional: true\n  },\n  'mortgageNoteIds.$': String,\n  name: {\n    type: String,\n    optional: true\n  },\n  notaryFees: (0, _objectSpread2.default)({}, moneyField, {\n    defaultValue: null\n  }),\n  propertyValue: (0, _objectSpread2.default)({}, moneyField, {\n    defaultValue: null\n  }),\n  offerId: {\n    type: String,\n    optional: true\n  },\n  propertyId: {\n    type: String,\n    optional: true\n  },\n  promotionOptionId: {\n    type: String,\n    optional: true\n  },\n  propertyWork: (0, _objectSpread2.default)({}, moneyField, {\n    defaultValue: 0\n  }),\n  sortOffersBy: {\n    type: String,\n    optional: true\n  },\n  ownFunds: {\n    type: Array,\n    defaultValue: []\n  },\n  'ownFunds.$': Object,\n  'ownFunds.$.borrowerId': String,\n  'ownFunds.$.type': {\n    type: String,\n    allowedValues: Object.values(OWN_FUNDS_TYPES),\n    optional: true\n  },\n  'ownFunds.$.value': (0, _objectSpread2.default)({}, moneyField, {\n    optional: false\n  }),\n  'ownFunds.$.usageType': {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(OWN_FUNDS_USAGE_TYPES)\n  },\n  'ownFunds.$.description': {\n    type: String,\n    optional: true\n  },\n  wantedLoan: (0, _objectSpread2.default)({}, moneyField, {\n    defaultValue: 0\n  })\n}, loanTranchesSchema);\nmodule.exportDefault(new SimpleSchema(structureSchema));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"otherSchemas.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/loans/schemas/otherSchemas.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  borrowerIdsSchema: () => borrowerIdsSchema,\n  loanTranchesSchema: () => loanTranchesSchema,\n  previousLoanTranchesSchema: () => previousLoanTranchesSchema,\n  propertyIdsSchema: () => propertyIdsSchema,\n  maxPropertyValueSchema: () => maxPropertyValueSchema\n});\nlet INTEREST_RATES, SOLVENCY_TYPE, CANTONS;\nmodule.link(\"../../constants\", {\n  INTEREST_RATES(v) {\n    INTEREST_RATES = v;\n  },\n\n  SOLVENCY_TYPE(v) {\n    SOLVENCY_TYPE = v;\n  },\n\n  CANTONS(v) {\n    CANTONS = v;\n  }\n\n}, 0);\nlet moneyField, percentageField;\nmodule.link(\"../../helpers/sharedSchemas\", {\n  moneyField(v) {\n    moneyField = v;\n  },\n\n  percentageField(v) {\n    percentageField = v;\n  }\n\n}, 1);\nconst borrowerIdsSchema = {\n  borrowerIds: {\n    type: Array,\n    defaultValue: []\n  },\n  'borrowerIds.$': String\n};\nconst loanTranchesSchema = {\n  loanTranches: {\n    type: Array,\n    defaultValue: [{\n      type: INTEREST_RATES.YEARS_10,\n      value: 1\n    }],\n    optional: true\n  },\n  'loanTranches.$': Object,\n  'loanTranches.$.type': {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(INTEREST_RATES)\n  },\n  'loanTranches.$.value': (0, _objectSpread2.default)({}, moneyField, {\n    type: Number // Can be specified as percentages or monetary amounts\n\n  })\n};\nconst previousLoanTranchesSchema = {\n  previousLoanTranches: {\n    type: Array,\n    defaultValue: [],\n    optional: true\n  },\n  'previousLoanTranches.$': Object,\n  'previousLoanTranches.$.value': (0, _objectSpread2.default)({}, moneyField, {\n    type: Number // Can be specified as percentages or monetary amounts\n\n  }),\n  'previousLoanTranches.$.dueDate': {\n    type: Date,\n    optional: true\n  },\n  'previousLoanTranches.$.rate': {\n    type: Number,\n    min: 0,\n    max: 1\n  }\n};\nconst propertyIdsSchema = {\n  propertyIds: {\n    type: Array,\n    defaultValue: [],\n    maxCount: 5\n  },\n  'propertyIds.$': String\n};\nconst maxPropertyValueSchema = {\n  maxPropertyValue: {\n    type: Object,\n    optional: true\n  },\n  'maxPropertyValue.type': {\n    type: String,\n    allowedValues: Object.values(SOLVENCY_TYPE),\n    defaultValue: SOLVENCY_TYPE.SIMPLE\n  },\n  'maxPropertyValue.canton': {\n    type: String,\n    allowedValues: Object.keys(CANTONS)\n  },\n  'maxPropertyValue.borrowerHash': {\n    type: String,\n    optional: true\n  },\n  'maxPropertyValue.date': Date,\n  'maxPropertyValue.main': Object,\n  'maxPropertyValue.main.min': {\n    type: Object,\n    optional: true\n  },\n  'maxPropertyValue.main.min.propertyValue': moneyField,\n  'maxPropertyValue.main.min.borrowRatio': percentageField,\n  'maxPropertyValue.main.min.organisationName': String,\n  'maxPropertyValue.main.max': Object,\n  'maxPropertyValue.main.max.propertyValue': moneyField,\n  'maxPropertyValue.main.max.borrowRatio': percentageField,\n  'maxPropertyValue.main.max.organisationName': String,\n  'maxPropertyValue.second': Object,\n  'maxPropertyValue.second.min': {\n    type: Object,\n    optional: true\n  },\n  'maxPropertyValue.second.min.propertyValue': moneyField,\n  'maxPropertyValue.second.min.borrowRatio': percentageField,\n  'maxPropertyValue.second.min.organisationName': String,\n  'maxPropertyValue.second.max': Object,\n  'maxPropertyValue.second.max.propertyValue': moneyField,\n  'maxPropertyValue.second.max.borrowRatio': percentageField,\n  'maxPropertyValue.second.max.organisationName': String\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"promotionSchema.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/loans/schemas/promotionSchema.js                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nconst promotionSchema = {\n  promotionLinks: {\n    type: Array,\n    defaultValue: []\n  },\n  'promotionLinks.$': Object,\n  'promotionLinks.$._id': {\n    type: String,\n    optional: true\n  },\n  'promotionLinks.$.priorityOrder': {\n    type: Array,\n    defaultValue: []\n  },\n  'promotionLinks.$.priorityOrder.$': String,\n  'promotionLinks.$.invitedBy': {\n    type: String,\n    optional: true\n  },\n  'promotionLinks.$.showAllLots': {\n    type: Boolean,\n    optional: true,\n    defaultValue: true\n  },\n  promotionOptionLinks: {\n    type: Array,\n    defaultValue: []\n  },\n  'promotionOptionLinks.$': Object,\n  'promotionOptionLinks.$._id': {\n    type: String,\n    optional: true\n  }\n};\nmodule.exportDefault(promotionSchema);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/loans/index.js                                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./methodDefinitions\", {\n  \"*\": \"*\"\n}, 0);\nmodule.link(\"./loans\", {\n  default: \"default\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"links.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/loans/links.js                                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  userCache: () => userCache,\n  lendersCache: () => lendersCache,\n  tasksCache: () => tasksCache\n});\nlet Loans;\nmodule.link(\"./loans\", {\n  default(v) {\n    Loans = v;\n  }\n\n}, 0);\nlet Borrowers, Lenders, PromotionLots, PromotionOptions, Promotions, Properties, Revenues, Tasks, Users;\nmodule.link(\"..\", {\n  Borrowers(v) {\n    Borrowers = v;\n  },\n\n  Lenders(v) {\n    Lenders = v;\n  },\n\n  PromotionLots(v) {\n    PromotionLots = v;\n  },\n\n  PromotionOptions(v) {\n    PromotionOptions = v;\n  },\n\n  Promotions(v) {\n    Promotions = v;\n  },\n\n  Properties(v) {\n    Properties = v;\n  },\n\n  Revenues(v) {\n    Revenues = v;\n  },\n\n  Tasks(v) {\n    Tasks = v;\n  },\n\n  Users(v) {\n    Users = v;\n  }\n\n}, 1);\nlet LinkInitializer;\nmodule.link(\"../links/LinkInitializer\", {\n  default(v) {\n    LinkInitializer = v;\n  }\n\n}, 2);\nlet Activities;\nmodule.link(\"../activities/activities\", {\n  default(v) {\n    Activities = v;\n  }\n\n}, 3);\nconst userCache = {\n  _id: 1,\n  firstName: 1,\n  lastName: 1,\n  referredByOrganisationLink: 1,\n  assignedEmployeeCache: 1\n};\nconst lendersCache = {\n  status: 1,\n  contactLink: 1,\n  organisationLink: 1\n};\nconst tasksCache = {\n  createdAt: 1,\n  dueAt: 1,\n  status: 1,\n  title: 1,\n  isPrivate: 1,\n  assigneeLink: 1\n};\nLinkInitializer.directInit(() => {\n  Loans.addLinks({\n    activities: {\n      inversedBy: 'loan',\n      collection: Activities,\n      autoremove: true\n    },\n    borrowers: {\n      field: 'borrowerIds',\n      collection: Borrowers,\n      type: 'many'\n    },\n    promotions: {\n      field: 'promotionLinks',\n      collection: Promotions,\n      type: 'many',\n      metadata: true\n    },\n    promotionOptions: {\n      field: 'promotionOptionLinks',\n      collection: PromotionOptions,\n      type: 'many',\n      unique: true,\n      metadata: true,\n      autoremove: true\n    },\n    properties: {\n      field: 'propertyIds',\n      collection: Properties,\n      type: 'many'\n    },\n    revenues: {\n      field: 'revenueLinks',\n      collection: Revenues,\n      type: 'many',\n      unique: true\n    },\n    user: {\n      field: 'userId',\n      collection: Users,\n      type: 'one',\n      denormalize: {\n        field: 'userCache',\n        body: userCache\n      }\n    },\n    financedPromotion: {\n      field: 'financedPromotionLink',\n      type: 'one',\n      metadata: true,\n      unique: true,\n      collection: Promotions\n    }\n  });\n});\nLinkInitializer.inversedInit(() => {\n  Loans.addLinks({\n    attributedPromotionLots: {\n      collection: PromotionLots,\n      inversedBy: 'attributedTo'\n    },\n    lenders: {\n      collection: Lenders,\n      inversedBy: 'loan',\n      unique: true,\n      autoremove: true,\n      denormalize: {\n        field: 'lendersCache',\n        body: lendersCache\n      }\n    },\n    tasks: {\n      collection: Tasks,\n      inversedBy: 'loan',\n      autoremove: true,\n      denormalize: {\n        field: 'tasksCache',\n        body: tasksCache\n      }\n    }\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"loanConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/loans/loanConstants.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  LOANS_COLLECTION: () => LOANS_COLLECTION,\n  LOAN_STATUS: () => LOAN_STATUS,\n  LOAN_STATUS_ORDER: () => LOAN_STATUS_ORDER,\n  PURCHASE_TYPE: () => PURCHASE_TYPE,\n  CANTONS: () => CANTONS,\n  OWNER: () => OWNER,\n  INSURANCE_USE_PRESET: () => INSURANCE_USE_PRESET,\n  LOAN_STRATEGY_PRESET: () => LOAN_STRATEGY_PRESET,\n  AMORTIZATION_TYPE: () => AMORTIZATION_TYPE,\n  PAYMENT_SCHEDULES: () => PAYMENT_SCHEDULES,\n  LOAN_QUERIES: () => LOAN_QUERIES,\n  OWN_FUNDS_USAGE_TYPES: () => OWN_FUNDS_USAGE_TYPES,\n  STEPS: () => STEPS,\n  STEP_ORDER: () => STEP_ORDER,\n  LOAN_VERIFICATION_STATUS: () => LOAN_VERIFICATION_STATUS,\n  SOLVENCY_TYPE: () => SOLVENCY_TYPE,\n  APPLICATION_TYPES: () => APPLICATION_TYPES,\n  ORGANISATION_NAME_SEPARATOR: () => ORGANISATION_NAME_SEPARATOR,\n  LOCAL_STORAGE_ANONYMOUS_LOAN: () => LOCAL_STORAGE_ANONYMOUS_LOAN,\n  EMPTY_STRUCTURE: () => EMPTY_STRUCTURE,\n  LOAN_CATEGORIES: () => LOAN_CATEGORIES\n});\nconst LOANS_COLLECTION = 'loans';\nconst LOAN_STATUS = {\n  LEAD: 'LEAD',\n  ONGOING: 'ONGOING',\n  CLOSING: 'CLOSING',\n  BILLING: 'BILLING',\n  FINALIZED: 'FINALIZED',\n  PENDING: 'PENDING',\n  UNSUCCESSFUL: 'UNSUCCESSFUL',\n  TEST: 'TEST'\n};\nconst LOAN_STATUS_ORDER = [LOAN_STATUS.LEAD, LOAN_STATUS.ONGOING, LOAN_STATUS.PENDING, LOAN_STATUS.CLOSING, LOAN_STATUS.BILLING, LOAN_STATUS.FINALIZED, LOAN_STATUS.UNSUCCESSFUL, LOAN_STATUS.TEST];\nconst PURCHASE_TYPE = {\n  ACQUISITION: 'ACQUISITION',\n  REFINANCING: 'REFINANCING',\n  // TODO: Figure out what needs to be changed for this\n  CONSTRUCTION: 'CONSTRUCTION'\n};\nconst CANTONS = {\n  AG: 'Aargau',\n  AR: 'Appenzell Ausserrhoden',\n  AI: 'Appenzell Innerrhoden',\n  BL: 'Basel-Land',\n  BS: 'Basel-Stadt',\n  BE: 'Bern',\n  FR: 'Fribourg',\n  GE: 'Genève',\n  GL: 'Glarus',\n  GR: 'Graubünden',\n  JU: 'Jura',\n  LU: 'Luzern',\n  NE: 'Neuchâtel',\n  NW: 'Nidwalden',\n  OW: 'Obwalden',\n  SG: 'St. Gallen',\n  SH: 'Schaffhausen',\n  SZ: 'Schwyz',\n  SO: 'Solothurn',\n  TG: 'Thurgau',\n  TI: 'Ticino',\n  UR: 'Uri',\n  VD: 'Vaud',\n  VS: 'Valais',\n  ZG: 'Zug',\n  ZH: 'Zürich',\n  LI: 'Liechtenstein'\n};\nconst OWNER = {\n  FIRST: '0',\n  SECOND: '1',\n  BOTH: 'BOTH',\n  OTHER: 'OTHER'\n};\nconst INSURANCE_USE_PRESET = {\n  WITHDRAWAL: 'WITHDRAWAL',\n  COLLATERAL: 'COLLATERAL'\n};\nconst LOAN_STRATEGY_PRESET = {\n  FIXED: 'FIXED',\n  MANUAL: 'MANUAL'\n};\nconst AMORTIZATION_TYPE = {\n  INDIRECT: 'INDIRECT',\n  DIRECT: 'DIRECT'\n};\nconst PAYMENT_SCHEDULES = {\n  MONTHLY: 'MONTHLY',\n  YEARLY: 'YEARLY',\n  SEMESTERLY: 'SEMESTERLY'\n};\nconst LOAN_QUERIES = {\n  ADMIN_LOANS: 'ADMIN_LOANS',\n  ANONYMOUS_LOAN: 'ANONYMOUS_LOAN',\n  FULL_LOAN: 'FULL_LOAN',\n  LOAN_FILES: 'LOAN_FILES',\n  LOAN_SEARCH: 'LOAN_SEARCH',\n  PRO_LOANS: 'PRO_LOANS',\n  PRO_PROMOTION_LOANS: 'PRO_PROMOTION_LOANS',\n  PRO_PROPERTY_LOANS: 'PRO_PROPERTY_LOANS',\n  PRO_REFERRED_BY_LOANS: 'PRO_REFERRED_BY_LOANS',\n  USER_LOANS_E2E: 'USER_LOANS_E2E',\n  USER_LOANS: 'USER_LOANS'\n};\nconst OWN_FUNDS_USAGE_TYPES = {\n  WITHDRAW: 'WITHDRAW',\n  PLEDGE: 'PLEDGE'\n};\nconst STEPS = {\n  SOLVENCY: 'SOLVENCY',\n  REQUEST: 'REQUEST',\n  OFFERS: 'OFFERS',\n  CLOSING: 'CLOSING'\n};\nconst STEP_ORDER = [STEPS.SOLVENCY, STEPS.REQUEST, STEPS.OFFERS, STEPS.CLOSING];\nconst LOAN_VERIFICATION_STATUS = {\n  NONE: 'NONE',\n  REQUESTED: 'REQUESTED',\n  OK: 'OK',\n  ERROR: 'ERROR'\n};\nconst SOLVENCY_TYPE = {\n  SIMPLE: 'SIMPLE',\n  FULL: 'FULL'\n};\nconst APPLICATION_TYPES = {\n  SIMPLE: 'SIMPLE',\n  FULL: 'FULL'\n};\nconst ORGANISATION_NAME_SEPARATOR = ' / ';\nconst LOCAL_STORAGE_ANONYMOUS_LOAN = 'ANONYMOUS_LOAN_ID';\nconst EMPTY_STRUCTURE = {\n  ownFunds: [],\n  loanTranches: []\n};\nconst LOAN_CATEGORIES = {\n  STANDARD: 'STANDARD',\n  PREMIUM: 'PREMIUM'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"loans.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/loans/loans.js                                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet LoanSchema;\nmodule.link(\"./schemas/LoanSchema\", {\n  default(v) {\n    LoanSchema = v;\n  }\n\n}, 1);\nlet LOANS_COLLECTION;\nmodule.link(\"./loanConstants\", {\n  LOANS_COLLECTION(v) {\n    LOANS_COLLECTION = v;\n  }\n\n}, 2);\nconst Loans = new Mongo.Collection(LOANS_COLLECTION); // Prevent all client side modifications of mongoDB\n\nLoans.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true\n});\nLoans.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false\n});\nLoans.attachSchema(LoanSchema);\nmodule.exportDefault(Loans);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/loans/methodDefinitions.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  loanInsert: () => loanInsert,\n  loanUpdate: () => loanUpdate,\n  loanDelete: () => loanDelete,\n  requestLoanVerification: () => requestLoanVerification,\n  confirmClosing: () => confirmClosing,\n  pushLoanValue: () => pushLoanValue,\n  popLoanValue: () => popLoanValue,\n  adminLoanInsert: () => adminLoanInsert,\n  userLoanInsert: () => userLoanInsert,\n  addNewStructure: () => addNewStructure,\n  removeStructure: () => removeStructure,\n  updateStructure: () => updateStructure,\n  selectStructure: () => selectStructure,\n  duplicateStructure: () => duplicateStructure,\n  assignLoanToUser: () => assignLoanToUser,\n  switchBorrower: () => switchBorrower,\n  sendNegativeFeedbackToAllLenders: () => sendNegativeFeedbackToAllLenders,\n  loanUpdatePromotionInvitedBy: () => loanUpdatePromotionInvitedBy,\n  reuseProperty: () => reuseProperty,\n  setMaxPropertyValueWithoutBorrowRatio: () => setMaxPropertyValueWithoutBorrowRatio,\n  addNewMaxStructure: () => addNewMaxStructure,\n  setLoanStep: () => setLoanStep,\n  loanShareSolvency: () => loanShareSolvency,\n  anonymousLoanInsert: () => anonymousLoanInsert,\n  loanInsertBorrowers: () => loanInsertBorrowers,\n  adminLoanReset: () => adminLoanReset,\n  loanLinkPromotion: () => loanLinkPromotion,\n  loanUnlinkPromotion: () => loanUnlinkPromotion,\n  loanSetCreatedAtActivityDescription: () => loanSetCreatedAtActivityDescription\n});\nlet Match;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  }\n\n}, 0);\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 1);\nconst loanInsert = new Method({\n  name: 'loanInsert',\n  params: {\n    loan: Object,\n    userId: Match.Optional(String)\n  }\n});\nconst loanUpdate = new Method({\n  name: 'loanUpdate',\n  params: {\n    loanId: String,\n    object: Object\n  }\n});\nconst loanDelete = new Method({\n  name: 'loanDelete',\n  params: {\n    loanId: String\n  }\n});\nconst requestLoanVerification = new Method({\n  name: 'requestLoanVerification',\n  params: {\n    loanId: String\n  }\n});\nconst confirmClosing = new Method({\n  name: 'confirmClosing',\n  params: {\n    loanId: String,\n    object: Object\n  }\n});\nconst pushLoanValue = new Method({\n  name: 'pushLoanValue',\n  params: {\n    loanId: String,\n    object: Object\n  }\n});\nconst popLoanValue = new Method({\n  name: 'popLoanValue',\n  params: {\n    loanId: String,\n    object: Object\n  }\n});\nconst adminLoanInsert = new Method({\n  name: 'adminLoanInsert',\n  params: {\n    userId: Match.Optional(String)\n  }\n});\nconst userLoanInsert = new Method({\n  name: 'userLoanInsert',\n  params: {\n    proPropertyId: Match.Maybe(String),\n    test: Match.Optional(Boolean)\n  }\n});\nconst addNewStructure = new Method({\n  name: 'addNewStructure',\n  params: {\n    loanId: String\n  }\n});\nconst removeStructure = new Method({\n  name: 'removeStructure',\n  params: {\n    loanId: String,\n    structureId: String\n  }\n});\nconst updateStructure = new Method({\n  name: 'updateStructure',\n  params: {\n    loanId: String,\n    structureId: String,\n    structure: Object\n  }\n});\nconst selectStructure = new Method({\n  name: 'selectStructure',\n  params: {\n    loanId: String,\n    structureId: String\n  }\n});\nconst duplicateStructure = new Method({\n  name: 'duplicateStructure',\n  params: {\n    loanId: String,\n    structureId: String\n  }\n});\nconst assignLoanToUser = new Method({\n  name: 'assignLoanToUser',\n  params: {\n    loanId: String,\n    userId: Match.OneOf(String, null)\n  }\n});\nconst switchBorrower = new Method({\n  name: 'switchBorrower',\n  params: {\n    loanId: String,\n    borrowerId: String,\n    oldBorrowerId: String\n  }\n});\nconst sendNegativeFeedbackToAllLenders = new Method({\n  name: 'sendNegativeFeedbackToAllLenders',\n  params: {\n    loanId: String\n  }\n});\nconst loanUpdatePromotionInvitedBy = new Method({\n  name: 'loanUpdatePromotionInvitedBy',\n  params: {\n    loanId: String,\n    promotionId: String,\n    invitedBy: String\n  }\n});\nconst reuseProperty = new Method({\n  name: 'reuseProperty',\n  params: {\n    loanId: String,\n    propertyId: String\n  }\n});\nconst setMaxPropertyValueWithoutBorrowRatio = new Method({\n  name: 'setMaxPropertyValueWithoutBorrowRatio',\n  params: {\n    loanId: String,\n    canton: String\n  }\n});\nconst addNewMaxStructure = new Method({\n  name: 'addNewMaxStructure',\n  params: {\n    loanId: String,\n    residenceType: Match.Maybe(String),\n    canton: String\n  }\n});\nconst setLoanStep = new Method({\n  name: 'setLoanStep',\n  params: {\n    loanId: String,\n    nextStep: String\n  }\n});\nconst loanShareSolvency = new Method({\n  name: 'loanShareSolvency',\n  params: {\n    loanId: String,\n    shareSolvency: Boolean\n  }\n});\nconst anonymousLoanInsert = new Method({\n  name: 'anonymousLoanInsert',\n  params: {\n    trackingId: String,\n    proPropertyId: Match.Maybe(String),\n    referralId: Match.Maybe(String),\n    existingAnonymousLoanId: Match.Maybe(Match.OneOf(String, null))\n  }\n});\nconst loanInsertBorrowers = new Method({\n  name: 'loanInsertBorrowers',\n  params: {\n    loanId: String,\n    amount: Number\n  }\n});\nconst adminLoanReset = new Method({\n  name: 'adminLoanReset',\n  params: {\n    loanId: String\n  }\n});\nconst loanLinkPromotion = new Method({\n  name: 'loanLinkPromotion',\n  params: {\n    promotionId: String,\n    loanId: String\n  }\n});\nconst loanUnlinkPromotion = new Method({\n  name: 'loanUnlinkPromotion',\n  params: {\n    promotionId: String,\n    loanId: String\n  }\n});\nconst loanSetCreatedAtActivityDescription = new Method({\n  name: 'loanSetCreatedAtActivityDescription',\n  params: {\n    loanId: String,\n    description: String\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"queries.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/loans/queries.js                                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  adminLoans: () => adminLoans,\n  anonymousLoan: () => anonymousLoan,\n  fullLoan: () => fullLoan,\n  loanSearch: () => loanSearch,\n  proLoans: () => proLoans,\n  proPromotionLoans: () => proPromotionLoans,\n  proPropertyLoans: () => proPropertyLoans,\n  proReferredByLoans: () => proReferredByLoans,\n  userLoans: () => userLoans\n});\nlet omit;\nmodule.link(\"lodash/omit\", {\n  default(v) {\n    omit = v;\n  }\n\n}, 0);\nlet Loans;\nmodule.link(\".\", {\n  default(v) {\n    Loans = v;\n  }\n\n}, 1);\nlet LOAN_QUERIES;\nmodule.link(\"./loanConstants\", {\n  LOAN_QUERIES(v) {\n    LOAN_QUERIES = v;\n  }\n\n}, 2);\nlet adminLoan, userLoan;\nmodule.link(\"../fragments\", {\n  adminLoan(v) {\n    adminLoan = v;\n  },\n\n  userLoan(v) {\n    userLoan = v;\n  }\n\n}, 3);\nconst adminLoans = Loans.createQuery(LOAN_QUERIES.ADMIN_LOANS, (0, _objectSpread2.default)({}, adminLoan({\n  withSort: true\n}), {\n  $options: {\n    sort: {\n      createdAt: -1\n    }\n  }\n}), {\n  scoped: true\n});\nconst anonymousLoan = Loans.createQuery(LOAN_QUERIES.ANONYMOUS_LOAN, (0, _objectSpread2.default)({}, omit(userLoan(), ['maxPropertyValue']), {\n  maxPropertyValueExists: 1\n}), {\n  scoped: true\n});\nconst fullLoan = Loans.createQuery(LOAN_QUERIES.FULL_LOAN, (0, _objectSpread2.default)({}, adminLoan({\n  withSort: true\n})));\nconst loanSearch = Loans.createQuery(LOAN_QUERIES.LOAN_SEARCH, {\n  name: 1,\n  createdAt: 1,\n  updatedAt: 1,\n  step: 1,\n  $options: {\n    sort: {\n      createdAt: -1\n    },\n    limit: 5\n  }\n});\nconst proLoans = Loans.createQuery(LOAN_QUERIES.PRO_LOANS, () => {});\nconst proPromotionLoans = Loans.createQuery(LOAN_QUERIES.PRO_PROMOTION_LOANS, () => {});\nconst proPropertyLoans = Loans.createQuery(LOAN_QUERIES.PRO_PROPERTY_LOANS, () => {});\nconst proReferredByLoans = Loans.createQuery(LOAN_QUERIES.PRO_REFERRED_BY_LOANS, () => {});\nconst userLoans = Loans.createQuery(LOAN_QUERIES.USER_LOANS, (0, _objectSpread2.default)({}, userLoan({\n  withSort: true,\n  withFilteredPromotions: true\n}), {\n  maxPropertyValueExists: 1\n}), {\n  scoped: true\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"reducers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/loans/reducers.js                                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet omit;\nmodule.link(\"lodash/omit\", {\n  default(v) {\n    omit = v;\n  }\n\n}, 0);\nlet Loans;\nmodule.link(\".\", {\n  default(v) {\n    Loans = v;\n  }\n\n}, 1);\nlet formatLoanWithStructure, nextDueTaskReducer;\nmodule.link(\"../../utils/loanFunctions\", {\n  formatLoanWithStructure(v) {\n    formatLoanWithStructure = v;\n  },\n\n  nextDueTaskReducer(v) {\n    nextDueTaskReducer = v;\n  }\n\n}, 2);\nlet STEPS, STEP_ORDER;\nmodule.link(\"./loanConstants\", {\n  STEPS(v) {\n    STEPS = v;\n  },\n\n  STEP_ORDER(v) {\n    STEP_ORDER = v;\n  }\n\n}, 3);\nlet fullOffer, userProperty, loanPromotionOption;\nmodule.link(\"../fragments\", {\n  fullOffer(v) {\n    fullOffer = v;\n  },\n\n  userProperty(v) {\n    userProperty = v;\n  },\n\n  loanPromotionOption(v) {\n    loanPromotionOption = v;\n  }\n\n}, 4);\nlet PROPERTY_CATEGORY;\nmodule.link(\"../properties/propertyConstants\", {\n  PROPERTY_CATEGORY(v) {\n    PROPERTY_CATEGORY = v;\n  }\n\n}, 5);\nLoans.addReducers({\n  structure: {\n    body: {\n      selectedStructure: 1,\n      structures: 1,\n      properties: omit(userProperty(), ['loans', '$options', 'user']),\n      offers: 1,\n      promotionOptions: loanPromotionOption()\n    },\n    reduce: formatLoanWithStructure\n  },\n  offers: {\n    body: {\n      lenders: {\n        offers: omit(fullOffer(), ['user'])\n      }\n    },\n    reduce: (_ref) => {\n      let {\n        lenders = []\n      } = _ref;\n      return lenders.reduce((allOffers, _ref2) => {\n        let {\n          offers = []\n        } = _ref2;\n        return [...allOffers, ...offers];\n      }, []);\n    }\n  },\n  hasPromotion: {\n    body: {\n      promotions: {\n        _id: 1\n      }\n    },\n    reduce: (_ref3) => {\n      let {\n        promotions\n      } = _ref3;\n      return !!(promotions && promotions.length > 0);\n    }\n  },\n  enableOffers: {\n    body: {\n      step: 1\n    },\n    reduce: (_ref4) => {\n      let {\n        step\n      } = _ref4;\n      return step && STEP_ORDER.indexOf(step) >= STEP_ORDER.indexOf(STEPS.OFFERS);\n    }\n  },\n  hasProProperty: {\n    body: {\n      properties: {\n        category: 1\n      }\n    },\n    reduce: (_ref5) => {\n      let {\n        properties = []\n      } = _ref5;\n      return properties.some((_ref6) => {\n        let {\n          category\n        } = _ref6;\n        return category === PROPERTY_CATEGORY.PRO;\n      });\n    }\n  },\n  maxPropertyValueExists: {\n    body: {\n      maxPropertyValue: {\n        date: 1\n      },\n      user: {\n        _id: 1\n      }\n    },\n    reduce: (_ref7) => {\n      let {\n        maxPropertyValue,\n        user\n      } = _ref7;\n      return !!(!user && maxPropertyValue && maxPropertyValue.date);\n    }\n  },\n  nextDueTask: {\n    body: {\n      tasksCache: 1\n    },\n    reduce: nextDueTaskReducer\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"queries\":{\"test\":{\"client\":{\"clientQueries.test.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/queries/test/client/clientQueries.test.js                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 1);\nlet userLogin, resetDatabase;\nmodule.link(\"../../../../utils/testHelpers\", {\n  userLogin(v) {\n    userLogin = v;\n  },\n\n  resetDatabase(v) {\n    resetDatabase = v;\n  }\n\n}, 2);\nlet query1, query2, query3, query4, testCollectionInsert;\nmodule.link(\"../collection.app-test\", {\n  query1(v) {\n    query1 = v;\n  },\n\n  query2(v) {\n    query2 = v;\n  },\n\n  query3(v) {\n    query3 = v;\n  },\n\n  query4(v) {\n    query4 = v;\n  },\n\n  testCollectionInsert(v) {\n    testCollectionInsert = v;\n  }\n\n}, 3);\nconsole.log('testCollectionInsert:', testCollectionInsert);\n\nconst insertTestData = n => {\n  const promises = [...Array(n)].map((_, index) => testCollectionInsert.run({\n    _id: \"test\".concat(index),\n    name: \"test\".concat(index % 4),\n    value: index\n  }));\n  return Promise.all(promises).then(() => ({}));\n};\n\nconst fetchQueries = (_ref) => {\n  let {\n    queries = [],\n    params,\n    promise\n  } = _ref;\n  queries.forEach(query => {\n    promise = promise.then(function () {\n      let items = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return new Promise((resolve, reject) => {\n        query.clone(params).fetch((err, queryItems) => err ? reject(err) : resolve((0, _objectSpread2.default)({}, items, {\n          [query.name]: queryItems\n        })));\n      });\n    });\n  });\n  return promise;\n};\n\nconst insertAndFetchTestData = function (n) {\n  let params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let {\n    fetchQuery1 = true,\n    fetchQuery2 = true,\n    fetchQuery3 = false,\n    fetchQuery4 = false\n  } = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const promise = insertTestData(n);\n  return fetchQueries({\n    queries: [fetchQuery1 && query1, fetchQuery2 && query2, fetchQuery3 && query3, fetchQuery4 && query4].filter(x => x),\n    params,\n    promise\n  });\n};\n\ndescribe('exposeQuery', () => {\n  beforeEach(() => resetDatabase());\n  it('returns expected data without using overrides', () => insertAndFetchTestData(100).then(items => {\n    expect(items.named_query_TEST_QUERY_1.length).to.equal(10);\n    expect(items.named_query_TEST_QUERY_1[0].value).to.equal(31);\n    expect(items.named_query_TEST_QUERY_2.length).to.equal(10);\n    expect(items.named_query_TEST_QUERY_2[0].value).to.equal(21);\n  }));\n  context('returns expected data when overriding', () => {\n    it('the body', () => insertAndFetchTestData(100, {\n      $body: {\n        value: 1\n      }\n    }).then(items => {\n      expect(items.named_query_TEST_QUERY_1.length).to.equal(10);\n      expect(items.named_query_TEST_QUERY_1[0].value).to.equal(31);\n      expect(items.named_query_TEST_QUERY_1[0].name).to.equal(undefined);\n      expect(items.named_query_TEST_QUERY_2.length).to.equal(10);\n      expect(items.named_query_TEST_QUERY_2[0].value).to.equal(21);\n      expect(items.named_query_TEST_QUERY_2[0].name).to.equal(undefined);\n    }));\n    it('the limit option', () => insertAndFetchTestData(100, {\n      $limit: 5\n    }).then(items => {\n      expect(items.named_query_TEST_QUERY_1.length).to.equal(5);\n      expect(items.named_query_TEST_QUERY_1[0].value).to.equal(31);\n      expect(items.named_query_TEST_QUERY_2.length).to.equal(5);\n      expect(items.named_query_TEST_QUERY_2[0].value).to.equal(21);\n    }));\n    it('the limit option greather than the server value', () => insertAndFetchTestData(100, {\n      $limit: 20\n    }).then(items => {\n      expect(items.named_query_TEST_QUERY_1.length).to.equal(10);\n      expect(items.named_query_TEST_QUERY_1[0].value).to.equal(31);\n      expect(items.named_query_TEST_QUERY_2.length).to.equal(10);\n      expect(items.named_query_TEST_QUERY_2[0].value).to.equal(21);\n    }));\n    it('the skip option', () => insertAndFetchTestData(100, {\n      $skip: 7\n    }).then(items => {\n      expect(items.named_query_TEST_QUERY_1.length).to.equal(10);\n      expect(items.named_query_TEST_QUERY_1[0].value).to.equal(38);\n      expect(items.named_query_TEST_QUERY_2.length).to.equal(10);\n      expect(items.named_query_TEST_QUERY_2[0].value).to.equal(28);\n    }));\n    it('the sort option', () => insertAndFetchTestData(100, {\n      $sort: {\n        value: -1\n      }\n    }).then(items => {\n      expect(items.named_query_TEST_QUERY_1.length).to.equal(10);\n      expect(items.named_query_TEST_QUERY_1[0].value).to.equal(99);\n      expect(items.named_query_TEST_QUERY_2.length).to.equal(10);\n      expect(items.named_query_TEST_QUERY_2[0].value).to.equal(99);\n    }));\n    it('the sort option on multiple fields ', () => insertAndFetchTestData(50, {\n      $sort: {\n        name: -1,\n        value: -1\n      }\n    }).then(items => {\n      expect(items.named_query_TEST_QUERY_1.length).to.equal(10);\n      expect(items.named_query_TEST_QUERY_1[0].value).to.equal(47);\n      expect(items.named_query_TEST_QUERY_2.length).to.equal(10);\n      expect(items.named_query_TEST_QUERY_2[0].value).to.equal(47);\n    }).then(() => resetDatabase()).then(() => insertAndFetchTestData(50, {\n      $sort: {\n        name: -1,\n        value: 1\n      }\n    })).then(items => {\n      expect(items.named_query_TEST_QUERY_1.length).to.equal(10);\n      expect(items.named_query_TEST_QUERY_1[0].value).to.equal(31);\n      expect(items.named_query_TEST_QUERY_2.length).to.equal(10);\n      expect(items.named_query_TEST_QUERY_2[0].value).to.equal(23);\n    }));\n  });\n  it('throws when client tries to filter by _id when it is not allowed', () => insertAndFetchTestData(100, {\n    _id: 'test50'\n  }, {\n    fetchQuery2: false\n  }).then(() => {\n    throw new Meteor.Error('Test should throw');\n  }).catch(error => expect(error.message).to.contain('Match failed')));\n  describe('returns expected data when using filters', () => {\n    it('on client only', () => insertAndFetchTestData(100, {\n      name: 'test3'\n    }).then(items => {\n      expect(items.named_query_TEST_QUERY_1.length).to.equal(10);\n      expect(items.named_query_TEST_QUERY_1[0].value).to.equal(31);\n      items.named_query_TEST_QUERY_1.forEach((_ref2) => {\n        let {\n          name\n        } = _ref2;\n        return expect(name).to.equal('test3');\n      });\n      expect(items.named_query_TEST_QUERY_2.length).to.equal(10);\n      expect(items.named_query_TEST_QUERY_2[0].value).to.equal(23);\n      items.named_query_TEST_QUERY_2.forEach((_ref3) => {\n        let {\n          name\n        } = _ref3;\n        return expect(name).to.equal('test3');\n      });\n    }));\n    it('on server only', () => insertAndFetchTestData(100, {\n      _id: 'test50'\n    }, {\n      fetchQuery1: false\n    }).then(items => {\n      expect(items.named_query_TEST_QUERY_2.length).to.equal(1);\n      expect(items.named_query_TEST_QUERY_2[0].value).to.equal(50);\n    }));\n    it('on client and server', () => insertAndFetchTestData(30, {\n      name: 'test3',\n      _id: 'test50'\n    }, {\n      fetchQuery1: false\n    }).then(items => {\n      // Name and _id filters apply in query2, resulting in an empty array of results\n      expect(items.named_query_TEST_QUERY_2.length).to.equal(0);\n    }));\n  });\n  it('uses default firewall if not overriden', () => insertAndFetchTestData(30, {}, {\n    fetchQuery1: false,\n    fetchQuery2: false,\n    fetchQuery3: true\n  }).then(() => {\n    throw new Meteor.Error('Test should throw');\n  }).catch(error => expect(error.message).to.contain('NOT_AUTHORIZED')));\n  it('injects _userId in params', () => userLogin({}).then(() => insertAndFetchTestData(30, {\n    name: 'test3'\n  }, {\n    fetchQuery1: false,\n    fetchQuery2: false,\n    fetchQuery4: true\n  })).then(items => {\n    const userId = Meteor.userId();\n    items.named_query_TEST_QUERY_4.forEach((_ref4) => {\n      let {\n        _userId,\n        name\n      } = _ref4;\n      expect(_userId).to.equal(userId);\n      expect(name).to.equal('test3');\n    });\n  }));\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"collection.app-test.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/queries/test/collection.app-test.js                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nconst SimpleSchema = require('simpl-schema').default;\n\nconst { Mongo } = require('meteor/mongo');\nconst { Method } = require('../../methods/methods');\n\nconst TestCollection = new Mongo.Collection('collectionTest');\nconst testCollectionSchema = new SimpleSchema({ value: Number, name: String });\nTestCollection.attachSchema(testCollectionSchema);\n\nmodule.exports = {\n  default: TestCollection,\n  query1: TestCollection.createQuery('TEST_QUERY_1', {\n    $filter({ filters, params: { name } }) {\n      if (name) {\n        filters.name = name;\n      }\n    },\n    value: 1,\n    name: 1,\n  }),\n  query2: TestCollection.createQuery('TEST_QUERY_2', {\n    $filter({ filters, params: { name } }) {\n      if (name) {\n        filters.name = name;\n      }\n    },\n    value: 1,\n    name: 1,\n  }),\n  query3: TestCollection.createQuery('TEST_QUERY_3', {\n    $filter({ filters, params: { name } }) {\n      if (name) {\n        filters.name = name;\n      }\n    },\n    value: 1,\n    name: 1,\n  }),\n  query4: TestCollection.createQuery('TEST_QUERY_4', {\n    $filter({ filters, params: { name } }) {\n      if (name) {\n        filters.name = name;\n      }\n    },\n    $postFilter(results, params) {\n      return results.map(res => ({ ...res, _userId: params._userId }));\n    },\n    value: 1,\n    name: 1,\n  }),\n  testCollectionInsert: new Method({\n    name: 'testCollectionInsert',\n    params: { value: Number, name: String, _id: String },\n  }),\n};\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"borrowers\":{\"schemas\":{\"BorrowerSchema.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/borrowers/schemas/BorrowerSchema.js                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  BorrowerSchemaAdmin: () => BorrowerSchemaAdmin\n});\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\nlet createdAt, updatedAt, additionalDocuments, mortgageNoteLinks, documentsField;\nmodule.link(\"../../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  },\n\n  additionalDocuments(v) {\n    additionalDocuments = v;\n  },\n\n  mortgageNoteLinks(v) {\n    mortgageNoteLinks = v;\n  },\n\n  documentsField(v) {\n    documentsField = v;\n  }\n\n}, 1);\nlet initialDocuments;\nmodule.link(\"../borrowersAdditionalDocuments\", {\n  initialDocuments(v) {\n    initialDocuments = v;\n  }\n\n}, 2);\nlet personalInfoSchema, financeInfoSchema, ownCompaniesSchema;\nmodule.link(\"./otherSchemas\", {\n  personalInfoSchema(v) {\n    personalInfoSchema = v;\n  },\n\n  financeInfoSchema(v) {\n    financeInfoSchema = v;\n  },\n\n  ownCompaniesSchema(v) {\n    ownCompaniesSchema = v;\n  }\n\n}, 3);\n// Documentation is in the google drive dev/MongoDB Schemas\nconst BorrowerSchema = new SimpleSchema((0, _objectSpread2.default)({\n  userId: {\n    type: String,\n    optional: true\n  },\n  createdAt,\n  updatedAt,\n  admin: {\n    // TODO\n    type: Object,\n    optional: true\n  },\n  adminValidation: {\n    type: Object,\n    defaultValue: {},\n    blackbox: true\n  },\n  documents: documentsField\n}, personalInfoSchema, financeInfoSchema, additionalDocuments(initialDocuments), mortgageNoteLinks, ownCompaniesSchema));\nconst protectedKeys = ['_id', 'additionalDocuments', 'admin', 'adminValidation', 'createdAt', 'logic', 'mortgageNoteLinks', 'updatedAt', 'userId', 'documents'];\nconst BorrowerSchemaAdmin = BorrowerSchema.omit(...protectedKeys);\nmodule.exportDefault(BorrowerSchema);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"otherSchemas.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/borrowers/schemas/otherSchemas.js                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  personalInfoSchema: () => personalInfoSchema,\n  financeInfoSchema: () => financeInfoSchema,\n  ownCompaniesSchema: () => ownCompaniesSchema\n});\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\nlet percentageField, moneyField, address;\nmodule.link(\"../../helpers/sharedSchemas\", {\n  percentageField(v) {\n    percentageField = v;\n  },\n\n  moneyField(v) {\n    moneyField = v;\n  },\n\n  address(v) {\n    address = v;\n  }\n\n}, 1);\nlet RESIDENCY_PERMIT, GENDER, CIVIL_STATUS, OTHER_INCOME, EXPENSES, OWN_FUNDS_TYPES;\nmodule.link(\"../borrowerConstants\", {\n  RESIDENCY_PERMIT(v) {\n    RESIDENCY_PERMIT = v;\n  },\n\n  GENDER(v) {\n    GENDER = v;\n  },\n\n  CIVIL_STATUS(v) {\n    CIVIL_STATUS = v;\n  },\n\n  OTHER_INCOME(v) {\n    OTHER_INCOME = v;\n  },\n\n  EXPENSES(v) {\n    EXPENSES = v;\n  },\n\n  OWN_FUNDS_TYPES(v) {\n    OWN_FUNDS_TYPES = v;\n  }\n\n}, 2);\nlet RESIDENCE_TYPE;\nmodule.link(\"../../constants\", {\n  RESIDENCE_TYPE(v) {\n    RESIDENCE_TYPE = v;\n  }\n\n}, 3);\nlet CUSTOM_AUTOFIELD_TYPES;\nmodule.link(\"../../../components/AutoForm2/constants\", {\n  CUSTOM_AUTOFIELD_TYPES(v) {\n    CUSTOM_AUTOFIELD_TYPES = v;\n  }\n\n}, 4);\n\nconst makeArrayOfObjectsSchema = (name, allowedValues) => ({\n  [name]: {\n    type: Array,\n    defaultValue: [],\n    optional: true\n  },\n  [\"\".concat(name, \".$\")]: Object,\n  [\"\".concat(name, \".$.value\")]: (0, _objectSpread2.default)({}, moneyField, {\n    optional: false\n  }),\n  [\"\".concat(name, \".$.description\")]: {\n    type: String,\n    optional: true,\n    allowedValues,\n    uniforms: {\n      displayEmpty: false,\n      intlId: \"\".concat(name, \".description\"),\n      allowedValuesIntlId: name\n    }\n  }\n});\n\nconst personalInfoSchema = (0, _objectSpread2.default)({\n  firstName: {\n    type: String,\n    optional: true\n  },\n  lastName: {\n    type: String,\n    optional: true\n  },\n  gender: {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(GENDER),\n    uniforms: {\n      displayEmpty: false\n    }\n  },\n  birthDate: {\n    type: Date,\n    optional: true,\n    uniforms: {\n      type: CUSTOM_AUTOFIELD_TYPES.DATE\n    }\n  }\n}, address, {\n  sameAddress: {\n    type: Boolean,\n    optional: true\n  },\n  isSwiss: {\n    type: Boolean,\n    optional: true\n  },\n  residencyPermit: {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(RESIDENCY_PERMIT),\n    uniforms: {\n      displayEmpty: false\n    }\n  },\n  citizenship: {\n    type: String,\n    optional: true\n  },\n  isUSPerson: {\n    type: Boolean,\n    optional: true\n  },\n  civilStatus: {\n    type: String,\n    allowedValues: Object.values(CIVIL_STATUS),\n    optional: true,\n    uniforms: {\n      displayEmpty: false\n    }\n  },\n  childrenCount: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0,\n    max: 20\n  },\n  company: {\n    type: String,\n    optional: true\n  }\n});\nconst financeInfoSchema = (0, _objectSpread2.default)({\n  salary: moneyField,\n  netSalary: moneyField,\n  bonusExists: {\n    type: Boolean,\n    optional: true\n  },\n  bonus2015: moneyField,\n  bonus2016: moneyField,\n  bonus2017: moneyField,\n  bonus2018: moneyField,\n  bonus2019: moneyField,\n  [OWN_FUNDS_TYPES.BANK_FORTUNE]: moneyField\n}, makeArrayOfObjectsSchema(OWN_FUNDS_TYPES.INSURANCE_2), makeArrayOfObjectsSchema(OWN_FUNDS_TYPES.INSURANCE_3A), makeArrayOfObjectsSchema(OWN_FUNDS_TYPES.BANK_3A), makeArrayOfObjectsSchema(OWN_FUNDS_TYPES.INSURANCE_3B), {\n  [OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE]: moneyField\n}, makeArrayOfObjectsSchema('otherIncome', Object.values(OTHER_INCOME)), {\n  'otherIncome.$.comment': {\n    type: String,\n    optional: true\n  }\n}, makeArrayOfObjectsSchema('otherFortune'), makeArrayOfObjectsSchema('expenses', Object.values(EXPENSES)), {\n  'expenses.$.comment': {\n    type: String,\n    optional: true\n  }\n}, makeArrayOfObjectsSchema('realEstate', Object.values(RESIDENCE_TYPE)), {\n  'realEstate.$.loan': (0, _objectSpread2.default)({}, moneyField, {\n    optional: false\n  }),\n  'realEstate.$.name': {\n    type: String,\n    optional: true\n  },\n  'realEstate.$.income': (0, _objectSpread2.default)({}, moneyField, {\n    optional: true,\n    defaultValue: 0\n  })\n});\nconst ownCompaniesSchema = {\n  hasOwnCompany: {\n    type: Boolean,\n    optional: true\n  },\n  ownCompanies: {\n    type: Array,\n    defaultValue: [],\n    optional: true\n  },\n  'ownCompanies.$': Object,\n  'ownCompanies.$.description': {\n    type: String,\n    optional: false\n  },\n  'ownCompanies.$.ownership': percentageField,\n  'ownCompanies.$.netIncome2016': moneyField,\n  'ownCompanies.$.netIncome2017': moneyField,\n  'ownCompanies.$.netIncome2018': moneyField\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"borrowerConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/borrowers/borrowerConstants.js                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  BORROWERS_COLLECTION: () => BORROWERS_COLLECTION,\n  RESIDENCY_PERMIT: () => RESIDENCY_PERMIT,\n  GENDER: () => GENDER,\n  CIVIL_STATUS: () => CIVIL_STATUS,\n  OTHER_INCOME: () => OTHER_INCOME,\n  EXPENSES: () => EXPENSES,\n  BORROWER_QUERIES: () => BORROWER_QUERIES,\n  OWN_FUNDS_TYPES: () => OWN_FUNDS_TYPES,\n  RETIREMENT_AGE: () => RETIREMENT_AGE\n});\nconst BORROWERS_COLLECTION = 'borrowers';\nconst RESIDENCY_PERMIT = {\n  B: 'b',\n  C: 'c',\n  CI: 'ci',\n  F: 'f',\n  G: 'g',\n  L: 'l',\n  N: 'n',\n  S: 's',\n  NONE: 'none'\n};\nconst GENDER = {\n  M: 'M',\n  F: 'F',\n  OTHER: 'OTHER'\n};\nconst CIVIL_STATUS = {\n  MARRIED: 'MARRIED',\n  SINGLE: 'SINGLE',\n  PACSED: 'PACSED',\n  DIVORCED: 'DIVORCED',\n  WIDOW: 'WIDOW'\n};\nconst OTHER_INCOME = {\n  WELFARE: 'WELFARE',\n  PENSIONS: 'PENSIONS',\n  // REAL_ESTATE: 'REAL_ESTATE',\n  // INVESTMENT: 'INVESTMENT', // We probably don't need this\n  OTHER: 'OTHER'\n};\nconst EXPENSES = {\n  LEASING: 'LEASING',\n  PERSONAL_LOAN: 'PERSONAL_LOAN',\n  PENSIONS: 'PENSIONS',\n  THIRD_PARTY_FORTUNE_REIMBURSEMENT: 'THIRD_PARTY_FORTUNE_REIMBURSEMENT',\n  OTHER: 'OTHER'\n};\nconst BORROWER_QUERIES = {\n  ADMIN_BORROWERS: 'ADMIN_BORROWERS',\n  BORROWER_SEARCH: 'BORROWER_SEARCH'\n};\nconst OWN_FUNDS_TYPES = {\n  BANK_FORTUNE: 'bankFortune',\n  INSURANCE_2: 'insurance2',\n  INSURANCE_3A: 'insurance3A',\n  BANK_3A: 'bank3A',\n  INSURANCE_3B: 'insurance3B',\n  THIRD_PARTY_FORTUNE: 'thirdPartyFortune'\n};\nconst RETIREMENT_AGE = {\n  [GENDER.M]: 65,\n  [GENDER.F]: 64\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"borrowers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/borrowers/borrowers.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet BORROWERS_COLLECTION;\nmodule.link(\"./borrowerConstants\", {\n  BORROWERS_COLLECTION(v) {\n    BORROWERS_COLLECTION = v;\n  }\n\n}, 1);\nlet BorrowerSchema;\nmodule.link(\"./schemas/BorrowerSchema\", {\n  default(v) {\n    BorrowerSchema = v;\n  }\n\n}, 2);\nconst Borrowers = new Mongo.Collection(BORROWERS_COLLECTION); // Prevent all client side modifications of mongoDB\n\nBorrowers.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true\n});\nBorrowers.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false\n});\nBorrowers.attachSchema(BorrowerSchema);\nmodule.exportDefault(Borrowers);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"borrowersAdditionalDocuments.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/borrowers/borrowersAdditionalDocuments.js                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  initialDocuments: () => initialDocuments,\n  conditionalDocuments: () => conditionalDocuments\n});\nlet DOCUMENTS;\nmodule.link(\"../files/fileConstants\", {\n  DOCUMENTS(v) {\n    DOCUMENTS = v;\n  }\n\n}, 0);\nlet borrowerConstants;\nmodule.link(\"./borrowerConstants\", {\n  \"*\"(v) {\n    borrowerConstants = v;\n  }\n\n}, 1);\nconst initialDocuments = [{\n  id: DOCUMENTS.IDENTITY\n}, {\n  id: DOCUMENTS.DEBT_COLLECTION_REGISTER_EXTRACT\n}, {\n  id: DOCUMENTS.TAXES\n}, {\n  id: DOCUMENTS.SALARY_CERTIFICATE\n}, {\n  id: DOCUMENTS.LAST_SALARIES\n}, {\n  id: DOCUMENTS.OWN_FUNDS_JUSTIFICATION\n}];\nconst conditionalDocuments = [{\n  id: DOCUMENTS.RESIDENCY_PERMIT,\n  condition: (_ref) => {\n    let {\n      doc: {\n        isSwiss\n      }\n    } = _ref;\n    return isSwiss === false;\n  }\n}, {\n  id: DOCUMENTS.DIVORCE_RULING,\n  condition: (_ref2) => {\n    let {\n      doc: {\n        civilStatus\n      }\n    } = _ref2;\n    return civilStatus === borrowerConstants.CIVIL_STATUS.DIVORCED;\n  }\n}, {\n  id: DOCUMENTS.BONUSES,\n  condition: (_ref3) => {\n    let {\n      doc: {\n        bonusExists\n      }\n    } = _ref3;\n    return bonusExists === true;\n  }\n}, {\n  id: DOCUMENTS.PENSION_FUND_YEARLY_STATEMENT,\n  condition: (_ref4) => {\n    let {\n      doc: {\n        insurance2\n      }\n    } = _ref4;\n    return insurance2 && insurance2.length > 0;\n  }\n}, {\n  id: DOCUMENTS.THIRD_PILLAR_ACCOUNTS,\n  condition: (_ref5) => {\n    let {\n      doc: {\n        insurance3A,\n        insurance3B,\n        bank3A\n      }\n    } = _ref5;\n    return insurance3A && insurance3A.length > 0 || insurance3B && insurance3B.length > 0 || bank3A && bank3A.length > 0;\n  }\n}, {\n  id: DOCUMENTS.CURRENT_MORTGAGES,\n  condition: (_ref6) => {\n    let {\n      doc: {\n        realEstate\n      }\n    } = _ref6;\n    return realEstate && realEstate.length > 0 && realEstate.some((_ref7) => {\n      let {\n        loan\n      } = _ref7;\n      return loan > 0;\n    });\n  }\n}, {\n  id: DOCUMENTS.EXPENSES_JUSTIFICATION,\n  condition: (_ref8) => {\n    let {\n      doc: {\n        expenses\n      }\n    } = _ref8;\n    return expenses && expenses.length > 0;\n  }\n}, {\n  id: DOCUMENTS.OTHER_FORTUNE_JUSTIFICATION,\n  condition: (_ref9) => {\n    let {\n      doc: {\n        otherFortune\n      }\n    } = _ref9;\n    return otherFortune && otherFortune.length > 0;\n  }\n}, {\n  id: DOCUMENTS.OTHER_INCOME_JUSTIFICATION,\n  condition: (_ref10) => {\n    let {\n      doc: {\n        otherIncome\n      }\n    } = _ref10;\n    return otherIncome && otherIncome.length > 0;\n  }\n}];\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/borrowers/index.js                                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./borrowers\", {\n  default: \"default\"\n}, 0);\nmodule.link(\"./methodDefinitions\", {\n  \"*\": \"*\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"links.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/borrowers/links.js                                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Borrowers;\nmodule.link(\"./borrowers\", {\n  default(v) {\n    Borrowers = v;\n  }\n\n}, 0);\nlet Loans, Users, MortgageNotes;\nmodule.link(\"..\", {\n  Loans(v) {\n    Loans = v;\n  },\n\n  Users(v) {\n    Users = v;\n  },\n\n  MortgageNotes(v) {\n    MortgageNotes = v;\n  }\n\n}, 1);\nBorrowers.addLinks({\n  user: {\n    field: 'userId',\n    collection: Users,\n    type: 'one'\n  },\n  loans: {\n    collection: Loans,\n    inversedBy: 'borrowers'\n  },\n  mortgageNotes: {\n    field: 'mortgageNoteLinks',\n    collection: MortgageNotes,\n    type: 'many',\n    metadata: true,\n    autoremove: true,\n    unique: true\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/borrowers/methodDefinitions.js                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  borrowerInsert: () => borrowerInsert,\n  borrowerUpdate: () => borrowerUpdate,\n  borrowerDelete: () => borrowerDelete,\n  pushBorrowerValue: () => pushBorrowerValue,\n  popBorrowerValue: () => popBorrowerValue,\n  pullBorrowerValue: () => pullBorrowerValue,\n  getReusableBorrowers: () => getReusableBorrowers\n});\nlet Match;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  }\n\n}, 0);\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 1);\nconst borrowerInsert = new Method({\n  name: 'borrowerInsert',\n  params: {\n    borrower: Object,\n    userId: Match.Optional(String)\n  }\n});\nconst borrowerUpdate = new Method({\n  name: 'borrowerUpdate',\n  params: {\n    borrowerId: String,\n    object: Object\n  }\n});\nconst borrowerDelete = new Method({\n  name: 'borrowerDelete',\n  params: {\n    borrowerId: String,\n    loanId: Match.Optional(String)\n  }\n});\nconst pushBorrowerValue = new Method({\n  name: 'pushBorrowerValue',\n  params: {\n    borrowerId: String,\n    object: Object\n  }\n});\nconst popBorrowerValue = new Method({\n  name: 'popBorrowerValue',\n  params: {\n    borrowerId: String,\n    object: Object\n  }\n});\nconst pullBorrowerValue = new Method({\n  name: 'pullBorrowerValue',\n  params: {\n    borrowerId: String,\n    object: Object\n  }\n});\nconst getReusableBorrowers = new Method({\n  name: 'getReusableBorrowers',\n  params: {\n    loanId: String,\n    borrowerId: String\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"queries.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/borrowers/queries.js                                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  adminBorrowers: () => adminBorrowers,\n  borrowerSearch: () => borrowerSearch\n});\nlet createRegexQuery, generateMatchAnyWordRegexp;\nmodule.link(\"../helpers/mongoHelpers\", {\n  createRegexQuery(v) {\n    createRegexQuery = v;\n  },\n\n  generateMatchAnyWordRegexp(v) {\n    generateMatchAnyWordRegexp = v;\n  }\n\n}, 0);\nlet adminBorrower;\nmodule.link(\"../fragments\", {\n  adminBorrower(v) {\n    adminBorrower = v;\n  }\n\n}, 1);\nlet BORROWER_QUERIES;\nmodule.link(\"./borrowerConstants\", {\n  BORROWER_QUERIES(v) {\n    BORROWER_QUERIES = v;\n  }\n\n}, 2);\nlet Borrowers;\nmodule.link(\".\", {\n  default(v) {\n    Borrowers = v;\n  }\n\n}, 3);\nconst adminBorrowers = Borrowers.createQuery(BORROWER_QUERIES.ADMIN_BORROWERS, adminBorrower(), {\n  scoped: true\n});\nconst borrowerSearch = Borrowers.createQuery(BORROWER_QUERIES.BORROWER_SEARCH, {\n  $filter(_ref) {\n    let {\n      filters,\n      params: {\n        searchQuery\n      }\n    } = _ref;\n    // the following method forces one word to be found in lastname field\n    // and one word in firstName field.\n    const formattedSearchQuery = generateMatchAnyWordRegexp(searchQuery);\n    filters.$or = [createRegexQuery('_id', searchQuery), createRegexQuery('firstName', searchQuery), createRegexQuery('lastName', searchQuery), {\n      $and: [createRegexQuery('firstName', formattedSearchQuery), createRegexQuery('lastName', formattedSearchQuery)]\n    }];\n  },\n\n  name: 1,\n  createdAt: 1,\n  updatedAt: 1,\n  $options: {\n    sort: {\n      createdAt: -1\n    },\n    limit: 5\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"reducers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/borrowers/reducers.js                                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet addressReducer;\nmodule.link(\"../reducers/addressReducer\", {\n  default(v) {\n    addressReducer = v;\n  }\n\n}, 0);\nlet Borrowers;\nmodule.link(\"./borrowers\", {\n  default(v) {\n    Borrowers = v;\n  }\n\n}, 1);\nBorrowers.addReducers((0, _objectSpread2.default)({\n  name: {\n    body: {\n      firstName: 1,\n      lastName: 1\n    },\n    reduce: (_ref) => {\n      let {\n        firstName,\n        lastName\n      } = _ref;\n      return [firstName, lastName].filter(x => x).join(' ');\n    }\n  },\n  age: {\n    body: {\n      birthDate: 1\n    },\n    reduce: (_ref2) => {\n      let {\n        birthDate\n      } = _ref2;\n      const age = Math.floor((new Date() - new Date(birthDate)) / 1000 / 60 / 60 / 24 / 365.25);\n      return age;\n    }\n  }\n}, addressReducer));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"contacts\":{\"schemas\":{\"contactSchema.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/contacts/schemas/contactSchema.js                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\nlet createdAt, updatedAt, address;\nmodule.link(\"../../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  },\n\n  address(v) {\n    address = v;\n  }\n\n}, 1);\nconst ContactSchema = new SimpleSchema((0, _objectSpread2.default)({\n  createdAt,\n  updatedAt,\n  firstName: String,\n  lastName: String\n}, address, {\n  emails: {\n    type: Array,\n    optional: true\n  },\n  'emails.$': Object,\n  'emails.$.address': {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  phoneNumbers: {\n    type: Array,\n    optional: true\n  },\n  'phoneNumbers.$': String,\n  userLink: {\n    type: String,\n    optional: true\n  }\n}));\nmodule.exportDefault(ContactSchema);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"contacts.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/contacts/contacts.js                                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet ContactSchema;\nmodule.link(\"./schemas/contactSchema\", {\n  default(v) {\n    ContactSchema = v;\n  }\n\n}, 1);\nlet CONTACTS_COLLECTION;\nmodule.link(\"./contactsConstants\", {\n  CONTACTS_COLLECTION(v) {\n    CONTACTS_COLLECTION = v;\n  }\n\n}, 2);\nconst Contacts = new Mongo.Collection(CONTACTS_COLLECTION);\nContacts.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true\n});\nContacts.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false\n});\nContacts.attachSchema(ContactSchema);\nmodule.exportDefault(Contacts);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"contactsConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/contacts/contactsConstants.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  CONTACTS_COLLECTION: () => CONTACTS_COLLECTION,\n  CONTACTS_QUERIES: () => CONTACTS_QUERIES\n});\nconst CONTACTS_COLLECTION = 'contacts';\nconst CONTACTS_QUERIES = {\n  ADMIN_CONTACTS: 'ADMIN_CONTACTS',\n  CONTACT_SEARCH: 'CONTACT_SEARCH'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/contacts/index.js                                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./methodDefinitions\", {\n  \"*\": \"*\"\n}, 0);\nmodule.link(\"./contacts\", {\n  default: \"default\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"links.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/contacts/links.js                                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Contacts;\nmodule.link(\".\", {\n  default(v) {\n    Contacts = v;\n  }\n\n}, 0);\nlet Users, Organisations, Lenders, Offers;\nmodule.link(\"..\", {\n  Users(v) {\n    Users = v;\n  },\n\n  Organisations(v) {\n    Organisations = v;\n  },\n\n  Lenders(v) {\n    Lenders = v;\n  },\n\n  Offers(v) {\n    Offers = v;\n  }\n\n}, 1);\nContacts.addLinks({\n  user: {\n    collection: Users,\n    field: 'userLink',\n    type: 'one',\n    metadata: true\n  },\n  organisations: {\n    collection: Organisations,\n    inversedBy: 'contacts'\n  },\n  lenders: {\n    collection: Lenders,\n    inversedBy: 'contact'\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/contacts/methodDefinitions.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  contactInsert: () => contactInsert,\n  contactRemove: () => contactRemove,\n  contactUpdate: () => contactUpdate,\n  contactChangeOrganisations: () => contactChangeOrganisations\n});\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 0);\nconst contactInsert = new Method({\n  name: 'contactInsert',\n  params: {\n    contact: Object\n  }\n});\nconst contactRemove = new Method({\n  name: 'contactRemove',\n  params: {\n    contactId: String\n  }\n});\nconst contactUpdate = new Method({\n  name: 'contactUpdate',\n  params: {\n    contactId: String,\n    object: Object\n  }\n});\nconst contactChangeOrganisations = new Method({\n  name: 'contactChangeOrganisations',\n  params: {\n    contactId: String,\n    newOrganisations: Array\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"queries.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/contacts/queries.js                                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  adminContacts: () => adminContacts,\n  contactSearch: () => contactSearch\n});\nlet generateMatchAnyWordRegexp, createRegexQuery;\nmodule.link(\"../helpers/mongoHelpers\", {\n  generateMatchAnyWordRegexp(v) {\n    generateMatchAnyWordRegexp = v;\n  },\n\n  createRegexQuery(v) {\n    createRegexQuery = v;\n  }\n\n}, 0);\nlet contact;\nmodule.link(\"../fragments\", {\n  contact(v) {\n    contact = v;\n  }\n\n}, 1);\nlet CONTACTS_QUERIES;\nmodule.link(\"./contactsConstants\", {\n  CONTACTS_QUERIES(v) {\n    CONTACTS_QUERIES = v;\n  }\n\n}, 2);\nlet Contacts;\nmodule.link(\".\", {\n  default(v) {\n    Contacts = v;\n  }\n\n}, 3);\nconst adminContacts = Contacts.createQuery(CONTACTS_QUERIES.ADMIN_CONTACTS, contact());\nconst contactSearch = Contacts.createQuery(CONTACTS_QUERIES.CONTACT_SEARCH, {\n  $filter(_ref) {\n    let {\n      filters,\n      params: {\n        searchQuery\n      }\n    } = _ref;\n    const formattedSearchQuery = generateMatchAnyWordRegexp(searchQuery);\n    filters.$or = [createRegexQuery('_id', searchQuery), createRegexQuery('firstName', searchQuery), createRegexQuery('lastName', searchQuery), {\n      $and: [createRegexQuery('firstName', formattedSearchQuery), createRegexQuery('lastName', formattedSearchQuery)]\n    }];\n  },\n\n  name: 1,\n  organisations: {\n    name: 1\n  },\n  $options: {\n    sort: {\n      createdAt: -1\n    },\n    limit: 5\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"reducers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/contacts/reducers.js                                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet addressReducer;\nmodule.link(\"../reducers/addressReducer\", {\n  default(v) {\n    addressReducer = v;\n  }\n\n}, 0);\nlet Contacts;\nmodule.link(\"./contacts\", {\n  default(v) {\n    Contacts = v;\n  }\n\n}, 1);\nlet fullOffer;\nmodule.link(\"../fragments\", {\n  fullOffer(v) {\n    fullOffer = v;\n  }\n\n}, 2);\nContacts.addReducers((0, _objectSpread2.default)({\n  name: {\n    body: {\n      firstName: 1,\n      lastName: 1\n    },\n    reduce: (_ref) => {\n      let {\n        firstName,\n        lastName\n      } = _ref;\n      return [firstName, lastName].filter(x => x).join(' ');\n    }\n  },\n  email: {\n    body: {\n      emails: 1\n    },\n    reduce: (_ref2) => {\n      let {\n        emails\n      } = _ref2;\n      return emails && !!emails.length && emails[0].address;\n    }\n  },\n  phoneNumber: {\n    body: {\n      phoneNumbers: 1\n    },\n    reduce: (_ref3) => {\n      let {\n        phoneNumbers\n      } = _ref3;\n      return phoneNumbers && !!phoneNumbers.length && phoneNumbers[0];\n    }\n  },\n  offers: {\n    body: {\n      lenders: {\n        offers: fullOffer()\n      }\n    },\n    reduce: (_ref4) => {\n      let {\n        lenders = []\n      } = _ref4;\n      const contactOffers = lenders.reduce((allOffers, _ref5) => {\n        let {\n          offers = []\n        } = _ref5;\n        return [...allOffers, ...offers];\n      }, []);\n      return contactOffers;\n    }\n  }\n}, addressReducer));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"events\":{\"ClientEventService\":{\"ClientEventService.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/events/ClientEventService/ClientEventService.js                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet EventEmitter;\nmodule.link(\"events\", {\n  EventEmitter(v) {\n    EventEmitter = v;\n  }\n\n}, 0);\nlet EventService;\nmodule.link(\"../EventService\", {\n  default(v) {\n    EventService = v;\n  }\n\n}, 1);\nmodule.link(\"./eventNames\", {\n  \"*\": \"*\"\n}, 2);\nmodule.exportDefault(new EventService({\n  emmitter: new EventEmitter()\n}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"eventNames.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/events/ClientEventService/eventNames.js                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  MODIFIED_FILES_EVENT: () => MODIFIED_FILES_EVENT,\n  LOAD_LOAN: () => LOAD_LOAN,\n  CALLED_METHOD: () => CALLED_METHOD\n});\nconst MODIFIED_FILES_EVENT = 'MODIFIED_FILES_EVENT';\nconst LOAD_LOAN = 'LOAD_LOAN';\nconst CALLED_METHOD = 'CALLED_METHOD';\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/events/ClientEventService/index.js                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./ClientEventService\", {\n  default: \"default\"\n}, 0);\nmodule.link(\"./eventNames\", {\n  \"*\": \"*\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"EventService.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/events/EventService.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => EventService\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nconst IS_LOGGING = !Meteor.isProduction;\n\nclass EventService {\n  constructor(_ref) {\n    let {\n      emmitter\n    } = _ref;\n    this.emmitter = emmitter; // contains arrays of listener functions, grouped by event names\n\n    this.listenerFunctions = {};\n    this.addErrorListener();\n  }\n\n  emit(eventName) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    this.logEmittedEvent(eventName, ...args);\n    this.emmitter.emit(eventName, ...args);\n  }\n\n  emitMethod(_ref2) {\n    let {\n      name\n    } = _ref2;\n\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    this.emit(name, ...args);\n  }\n\n  addListener(eventName, listenerFunction) {\n    var _this = this;\n\n    this.emmitter.addListener(eventName, function () {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      _this.logListener(eventName, ...args);\n\n      listenerFunction(...args);\n    });\n    const listenersForEvent = this.listenerFunctions[eventName] || [];\n    this.listenerFunctions[eventName] = [...listenersForEvent, listenerFunction];\n  }\n\n  addMethodListener(methods, listenerFunction) {\n    if (Array.isArray(methods)) {\n      methods.forEach((_ref3) => {\n        let {\n          config: {\n            name\n          }\n        } = _ref3;\n        this.addListener(name, listenerFunction);\n      });\n    } else {\n      const {\n        config: {\n          name\n        }\n      } = methods;\n      this.addListener(name, listenerFunction);\n    }\n  }\n\n  addErrorListener() {\n    this.addListener('error', error => {\n      console.log('An error occured in an event listener:');\n      console.log(error);\n      throw error;\n    });\n  }\n\n  logEmittedEvent(eventName) {\n    if (IS_LOGGING && !Meteor.isTest) {// console.log(`Event \"${eventName}\" triggered with params:`);\n      // console.log(params);\n    }\n  }\n\n  logListener(eventName) {\n    if (IS_LOGGING && !Meteor.isTest) {\n      console.log(\"Event \\\"\".concat(eventName, \"\\\" listened to with args:\"));\n\n      for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n        args[_key4 - 1] = arguments[_key4];\n      }\n\n      args.forEach(arg => console.log(arg));\n    }\n  }\n\n  getListenerFunctions(eventName) {\n    return this.listenerFunctions[eventName] || [];\n  }\n\n  removeListener(eventName, listener) {\n    this.emmitter.removeListener(eventName, listener);\n  }\n\n  removeAllListeners(eventName) {\n    this.emmitter.removeAllListeners(eventName);\n  }\n\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"features\":{\"test\":{\"FeatureService.test.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/features/test/FeatureService.test.js                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet FeatureService;\nmodule.link(\"../FeatureService\", {\n  FeatureService(v) {\n    FeatureService = v;\n  }\n\n}, 1);\nlet featureService;\ndescribe('FeatureService', () => {\n  describe('getFeatureDecision', () => {\n    beforeEach(() => {\n      const featureConfig = {\n        featureOne: true,\n        featureWhichIsDisabled: false,\n        featureWithPriorityOfDecision: true\n      };\n      const featureMap = {\n        featureOne: {\n          tp1: true,\n          tp2: 'tp2-v1'\n        },\n        featureWhichIsDisabled: {\n          tp3: true\n        },\n        featureWithPriorityOfDecision: {\n          tp2: 'tp2-v2'\n        },\n        featureNotInConfig: {\n          tp4: true,\n          tp2: 'tp2-v3'\n        }\n      };\n      featureService = new FeatureService({\n        featureMap,\n        featureConfig\n      });\n    });\n    it('should return a feature decision that belongs to an enabled feature', () => {\n      expect(featureService.getFeatureDecision('tp1')).to.be.true;\n    });\n    it('should return the latter feature decision for two decisions both belonging to different enabled features', () => {\n      expect(featureService.getFeatureDecision('tp2')).to.equal('tp2-v2');\n    });\n    it('should not return a feature decision that does not exist anywhere', () => {\n      expect(featureService.getFeatureDecision('tp9')).to.be.undefined;\n    });\n    it('should not return a feature decision of a feature disabled in the config but present in the feature map', () => {\n      expect(featureService.getFeatureDecision('tp3')).to.be.undefined;\n    });\n    it('should not return a feature decision of a feature not existing in the config but present in the feature map', () => {\n      expect(featureService.getFeatureDecision('tp4')).to.be.undefined;\n    });\n    it('should return undefined and not crash if the feature config does not exist', () => {\n      const anotherFeatureService = new FeatureService({\n        featureMap: {\n          A_FEATURE: {\n            TP1: true\n          }\n        },\n        featureConfig: undefined\n      });\n      expect(anotherFeatureService.getFeatureDecision('tp123')).to.be.undefined;\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"FeatureService.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/features/FeatureService.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  FeatureService: () => FeatureService\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet pickBy;\nmodule.link(\"lodash/pickBy\", {\n  default(v) {\n    pickBy = v;\n  }\n\n}, 1);\nlet extend;\nmodule.link(\"lodash/extend\", {\n  default(v) {\n    extend = v;\n  }\n\n}, 2);\nlet withProps, renderNothing;\nmodule.link(\"recompose\", {\n  withProps(v) {\n    withProps = v;\n  },\n\n  renderNothing(v) {\n    renderNothing = v;\n  }\n\n}, 3);\nlet TOGGLE_POINTS;\nmodule.link(\"./featureConstants\", {\n  TOGGLE_POINTS(v) {\n    TOGGLE_POINTS = v;\n  }\n\n}, 4);\nlet enhanceChildrenWith, changeCodeWith;\nmodule.link(\"./featureDecisionFactories\", {\n  enhanceChildrenWith(v) {\n    enhanceChildrenWith = v;\n  },\n\n  changeCodeWith(v) {\n    changeCodeWith = v;\n  }\n\n}, 5);\nlet returnEmptyArray, returnFalse;\nmodule.link(\"../../utils/featureFunctions\", {\n  returnEmptyArray(v) {\n    returnEmptyArray = v;\n  },\n\n  returnFalse(v) {\n    returnFalse = v;\n  }\n\n}, 6);\nconst {\n  WIDGET1_CONTINUE_BUTTON,\n  STRIPPED_LITE_VERSION_UI,\n  ROUTES_CONFIG_STRIPPED_IN_LITE_VERSION,\n  ROUTES_NOT_PRODUCTION_READY\n} = TOGGLE_POINTS;\nconst {\n  features: featureConfig\n} = Meteor.settings.public;\n/**\n * A `Feature`, when enabled, changes the application in some way\n * (on frontend, backend, anywhere); when disabled, the application remains unchanged.\n *\n * A `Feature Decision` belongs to a certain feature and\n * represents a change performed in the application when that feature is enabled.\n * The actual place in the code where the feature decision will be applied\n * to change the code is called a `Toggle Point`.\n *\n * The `Toggle Point` is the technical implementation of the Feature Decision concept\n *\n * The `Feature Map` is a list of maches between a feature and its decisions.\n *\n * When multiple features are enabled, all their decisions get merged into\n * a single list of decisions. If the same feature decision (represented by a Toggle Point)\n * is used in more than one feature, the one in the latter feature overwrites others before it\n * (so only the latter decision gets applied); the features' order is dictated by the Feature Map.\n *\n * So in the end, tehnically speaking, we get a single list of Toggle Points which will\n * customize the code as we specify in the Feature Map.\n *\n * For each decision/toggle point it, you should pass a decision value\n * suitable for the way you use that Toggle Point.\n * E.g.: for a toggle point that wraps chilren, use `enhanceChildrenWith`\n *       for a toggle point that switches components on/off, use `switchElements`\n * First check how your TogglePoint component is used,\n * then configure it's behaviour here.\n */\n\nconst featureMap = {\n  LITE_VERSION: {\n    // change the link of the Continuer button to '/contact'\n    [WIDGET1_CONTINUE_BUTTON]: enhanceChildrenWith(withProps({\n      to: '/contact'\n    })),\n    // don't render the React UI that we don't want in the lite www version\n    [STRIPPED_LITE_VERSION_UI]: enhanceChildrenWith(renderNothing),\n    // remove the routes that we don't want in the lite www version\n    [ROUTES_CONFIG_STRIPPED_IN_LITE_VERSION]: changeCodeWith(returnEmptyArray)\n  },\n  NOT_PRODUCTION_READY: {\n    [ROUTES_NOT_PRODUCTION_READY]: changeCodeWith(returnEmptyArray)\n  }\n};\n\nclass FeatureService {\n  constructor(_ref) {\n    let {\n      featureMap = {},\n      featureConfig = {}\n    } = _ref;\n    this.featureMap = featureMap;\n    this.featureConfig = featureConfig;\n  } // Merges all feature decisions of the features that are enabled\n\n\n  getEnabledFeatureDecisions(_ref2) {\n    let {\n      featureMap,\n      featureConfig\n    } = _ref2;\n    // Get a feature map of all enabled features\n    const enabledFeatureMap = pickBy(featureMap, (featureDecisions, featureName) => {\n      const featureIsEnabled = featureConfig[featureName];\n      return featureIsEnabled;\n    }); // merge all enabled feature decisions into a single object\n\n    return extend({}, ...Object.values(enabledFeatureMap));\n  }\n\n  getFeatureDecision(togglePointId) {\n    const {\n      featureMap,\n      featureConfig\n    } = this;\n    const currentFeatureDecisions = this.getEnabledFeatureDecisions({\n      featureMap,\n      featureConfig\n    });\n    return currentFeatureDecisions[togglePointId];\n  }\n\n}\n\nmodule.exportDefault(new FeatureService({\n  featureMap,\n  featureConfig\n}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"featureConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/features/featureConstants.js                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  TOGGLE_POINTS: () => TOGGLE_POINTS\n});\nconst TOGGLE_POINTS = {\n  WIDGET1_CONTINUE_BUTTON: 'WIDGET1_CONTINUE_BUTTON',\n  STRIPPED_LITE_VERSION_UI: 'STRIPPED_LITE_VERSION_UI',\n  ROUTES_CONFIG_STRIPPED_IN_LITE_VERSION: 'ROUTES_CONFIG_STRIPPED_IN_LITE_VERSION',\n  ROUTES_NOT_PRODUCTION_READY: 'ROUTES_NOT_PRODUCTION_READY'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"featureDecisionFactories.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/features/featureDecisionFactories.js                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  enhanceChildrenWith: () => enhanceChildrenWith,\n  switchElements: () => switchElements,\n  changeCodeWith: () => changeCodeWith\n});\n\nconst enhanceChildrenWith = childrenEnhancer => childrenEnhancer;\n\nconst switchElements = function () {\n  let performSwitch = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  return performSwitch;\n};\n\nconst changeCodeWith = codeChangingFunction => codeChangingFunction;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"interestRates\":{\"schemas\":{\"interestRatesSchema.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/interestRates/schemas/interestRatesSchema.js                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\nlet createdAt, updatedAt, percentageField;\nmodule.link(\"../../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  },\n\n  percentageField(v) {\n    percentageField = v;\n  }\n\n}, 1);\nlet TRENDS, INTEREST_RATES;\nmodule.link(\"../interestRatesConstants\", {\n  TRENDS(v) {\n    TRENDS = v;\n  },\n\n  INTEREST_RATES(v) {\n    INTEREST_RATES = v;\n  }\n\n}, 2);\n\nconst singleInterestRate = type => ({\n  [type]: {\n    type: Object,\n    optional: true,\n    defaultValue: {}\n  },\n  [\"\".concat(type, \".rateLow\")]: percentageField,\n  [\"\".concat(type, \".rateHigh\")]: percentageField,\n  [\"\".concat(type, \".trend\")]: {\n    type: String,\n    allowedValues: Object.values(TRENDS),\n    optional: true\n  }\n});\n\nconst rates = Object.values(INTEREST_RATES).reduce((interestRates, type) => (0, _objectSpread2.default)({}, interestRates, singleInterestRate(type)), {});\nconst InterestRatesSchema = new SimpleSchema((0, _objectSpread2.default)({\n  createdAt,\n  updatedAt,\n  date: Date\n}, rates));\nmodule.exportDefault(InterestRatesSchema);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/interestRates/index.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./methodDefinitions\", {\n  \"*\": \"*\"\n}, 0);\nmodule.link(\"./interestRates\", {\n  default: \"default\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"interestRates.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/interestRates/interestRates.js                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet InterestRatesSchema;\nmodule.link(\"./schemas/interestRatesSchema\", {\n  default(v) {\n    InterestRatesSchema = v;\n  }\n\n}, 1);\nlet INTEREST_RATES_COLLECTION;\nmodule.link(\"./interestRatesConstants\", {\n  INTEREST_RATES_COLLECTION(v) {\n    INTEREST_RATES_COLLECTION = v;\n  }\n\n}, 2);\nconst InterestRates = new Mongo.Collection(INTEREST_RATES_COLLECTION);\nInterestRates.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true\n});\nInterestRates.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false\n});\nInterestRates.attachSchema(InterestRatesSchema);\nmodule.exportDefault(InterestRates);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"interestRatesConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/interestRates/interestRatesConstants.js                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  INTEREST_TREND: () => INTEREST_TREND,\n  INTEREST_RATES_COLLECTION: () => INTEREST_RATES_COLLECTION,\n  TRENDS: () => TRENDS,\n  INTEREST_RATES: () => INTEREST_RATES,\n  INTEREST_RATES_QUERIES: () => INTEREST_RATES_QUERIES\n});\nconst INTEREST_TREND = {\n  UP: 'UP',\n  DOWN: 'DOWN'\n};\nconst INTEREST_RATES_COLLECTION = 'interestRates';\nconst TRENDS = {\n  UP: 'UP',\n  DOWN: 'DOWN',\n  FLAT: 'FLAT'\n};\nconst INTEREST_RATES = {\n  LIBOR: 'interestLibor',\n  YEARS_1: 'interest1',\n  YEARS_2: 'interest2',\n  YEARS_5: 'interest5',\n  YEARS_10: 'interest10',\n  YEARS_15: 'interest15',\n  YEARS_20: 'interest20',\n  YEARS_25: 'interest25'\n};\nconst INTEREST_RATES_QUERIES = {\n  INTEREST_RATES: 'INTEREST_RATES',\n  CURRENT_INTEREST_RATES: 'CURRENT_INTEREST_RATES'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/interestRates/methodDefinitions.js                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  interestRatesInsert: () => interestRatesInsert,\n  interestRatesRemove: () => interestRatesRemove,\n  interestRatesUpdate: () => interestRatesUpdate\n});\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 0);\nconst interestRatesInsert = new Method({\n  name: 'interestRatesInsert',\n  params: {\n    interestRates: Object\n  }\n});\nconst interestRatesRemove = new Method({\n  name: 'interestRatesRemove',\n  params: {\n    interestRatesId: String\n  }\n});\nconst interestRatesUpdate = new Method({\n  name: 'interestRatesUpdate',\n  params: {\n    interestRatesId: String,\n    object: Object\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"irs10y\":{\"schemas\":{\"irs10ySchema.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/irs10y/schemas/irs10ySchema.js                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\nlet createdAt, updatedAt, percentageField;\nmodule.link(\"../../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  },\n\n  percentageField(v) {\n    percentageField = v;\n  }\n\n}, 1);\nconst Irs10ySchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  date: Date,\n  rate: (0, _objectSpread2.default)({}, percentageField, {\n    optional: false\n  })\n});\nmodule.exportDefault(Irs10ySchema);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/irs10y/index.js                                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./methodDefinitions\", {\n  \"*\": \"*\"\n}, 0);\nmodule.link(\"./irs10y\", {\n  default: \"default\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"irs10y.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/irs10y/irs10y.js                                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet Irs10ySchema;\nmodule.link(\"./schemas/irs10ySchema\", {\n  default(v) {\n    Irs10ySchema = v;\n  }\n\n}, 1);\nlet IRS10Y_COLLECTION;\nmodule.link(\"./irs10yConstants\", {\n  IRS10Y_COLLECTION(v) {\n    IRS10Y_COLLECTION = v;\n  }\n\n}, 2);\nconst Irs10y = new Mongo.Collection(IRS10Y_COLLECTION);\nIrs10y.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true\n});\nIrs10y.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false\n});\nIrs10y.attachSchema(Irs10ySchema);\nmodule.exportDefault(Irs10y);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"irs10yConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/irs10y/irs10yConstants.js                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  IRS10Y_COLLECTION: () => IRS10Y_COLLECTION,\n  IRS10Y_QUERIES: () => IRS10Y_QUERIES\n});\nconst IRS10Y_COLLECTION = 'irs10y';\nconst IRS10Y_QUERIES = {\n  IRS10Y: 'IRS10Y'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/irs10y/methodDefinitions.js                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  irs10yInsert: () => irs10yInsert,\n  irs10yRemove: () => irs10yRemove,\n  irs10yUpdate: () => irs10yUpdate\n});\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 0);\nconst irs10yInsert = new Method({\n  name: 'irs10yInsert',\n  params: {\n    irs10y: Object\n  }\n});\nconst irs10yRemove = new Method({\n  name: 'irs10yRemove',\n  params: {\n    irs10yId: String\n  }\n});\nconst irs10yUpdate = new Method({\n  name: 'irs10yUpdate',\n  params: {\n    irs10yId: String,\n    object: Object\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"lenderRules\":{\"schemas\":{\"lenderRulesSchema.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lenderRules/schemas/lenderRulesSchema.js                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  incomeConsideration: () => incomeConsideration,\n  theoreticalExpenses: () => theoreticalExpenses,\n  cutOffCriteria: () => cutOffCriteria,\n  otherParams: () => otherParams,\n  LenderRulesEditorSchema: () => LenderRulesEditorSchema\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 1);\nlet BONUS_ALGORITHMS, REAL_ESTATE_INCOME_ALGORITHMS;\nmodule.link(\"../../../config/financeConstants\", {\n  BONUS_ALGORITHMS(v) {\n    BONUS_ALGORITHMS = v;\n  },\n\n  REAL_ESTATE_INCOME_ALGORITHMS(v) {\n    REAL_ESTATE_INCOME_ALGORITHMS = v;\n  }\n\n}, 2);\nlet createdAt, updatedAt, percentageField;\nmodule.link(\"../../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  },\n\n  percentageField(v) {\n    percentageField = v;\n  }\n\n}, 3);\nlet INCOME_CONSIDERATION_TYPES, EXPENSE_TYPES_WITHOUT_DELTAS;\nmodule.link(\"../lenderRulesConstants\", {\n  INCOME_CONSIDERATION_TYPES(v) {\n    INCOME_CONSIDERATION_TYPES = v;\n  },\n\n  EXPENSE_TYPES_WITHOUT_DELTAS(v) {\n    EXPENSE_TYPES_WITHOUT_DELTAS = v;\n  }\n\n}, 4);\nconst incomeConsideration = {\n  incomeConsiderationType: {\n    type: String,\n    allowedValues: Object.values(INCOME_CONSIDERATION_TYPES),\n    optional: true\n  },\n  bonusAlgorithm: {\n    type: String,\n    allowedValues: Object.values(BONUS_ALGORITHMS),\n    optional: true,\n    uniforms: {\n      placeholder: null\n    }\n  },\n  bonusConsideration: percentageField,\n  bonusHistoryToConsider: {\n    type: SimpleSchema.Integer,\n    optional: true\n  },\n  companyIncomeConsideration: percentageField,\n  companyIncomeHistoryToConsider: {\n    type: SimpleSchema.Integer,\n    optional: true\n  },\n  dividendsConsideration: percentageField,\n  dividendsHistoryToConsider: {\n    type: SimpleSchema.Integer,\n    optional: true\n  },\n  realEstateIncomeAlgorithm: {\n    type: String,\n    allowedValues: Object.values(REAL_ESTATE_INCOME_ALGORITHMS),\n    optional: true,\n    uniforms: {\n      placeholder: null\n    }\n  },\n  realEstateIncomeConsideration: percentageField,\n  // realEstateIncomeConsiderationType: {\n  //   type: String,\n  //   allowedValues: Object.values(REAL_ESTATE_CONSIDERATION_TYPES),\n  //   optional: true,\n  // },\n  investmentIncomeConsideration: percentageField,\n  expensesSubtractFromIncome: {\n    type: Array,\n    optional: true,\n    uniforms: {\n      intlId: 'expenses',\n      placeholder: 'Ajouter toutes les charges aux charges théoriques',\n      label: 'Charges à soustraire aux revenus'\n    },\n\n    autoValue() {\n      if (Meteor.isServer && this.isSet && Array.isArray(this.value) && this.value.length === 0) {\n        return {\n          $unset: true\n        };\n      }\n    }\n\n  },\n  'expensesSubtractFromIncome.$': {\n    type: String,\n    // REAL_ESTATE_DELTAS are handled internally\n    allowedValues: EXPENSE_TYPES_WITHOUT_DELTAS\n  },\n  fortuneReturnsRatio: percentageField\n};\nconst theoreticalExpenses = {\n  theoreticalInterestRate: percentageField,\n  theoreticalInterestRate2ndRank: percentageField,\n  theoreticalMaintenanceRate: percentageField,\n  amortizationGoal: percentageField,\n  amortizationYears: {\n    type: SimpleSchema.Integer,\n    min: 0,\n    max: 20,\n    optional: true\n  }\n};\nconst cutOffCriteria = {\n  maxBorrowRatio: percentageField,\n  maxBorrowRatioWithPledge: percentageField,\n  maxIncomeRatio: percentageField\n};\nconst otherParams = {\n  allowPledge: {\n    type: Boolean,\n    optional: true,\n\n    autoValue() {\n      if (Meteor.isServer && this.isSet && this.value === false) {\n        return {\n          $unset: true\n        };\n      }\n    }\n\n  },\n  adminComments: {\n    type: Array,\n    defaultValue: []\n  },\n  'adminComments.$': String,\n  pdfComments: {\n    type: Array,\n    defaultValue: []\n  },\n  'pdfComments.$': String\n};\nconst LenderRulesSchema = new SimpleSchema((0, _objectSpread2.default)({\n  createdAt,\n  updatedAt,\n  organisationLink: {\n    type: Object,\n    optional: true\n  },\n  'organisationLink._id': {\n    type: String,\n    optional: true\n  },\n  filter: {\n    type: Object,\n    blackbox: true\n  },\n  name: {\n    type: String,\n    optional: true\n  },\n  order: {\n    type: Number,\n    min: 0\n  },\n  organisationCache: {\n    type: Object,\n    blackbox: true,\n    optional: true\n  }\n}, incomeConsideration, theoreticalExpenses, cutOffCriteria, otherParams));\nconst LenderRulesEditorSchema = LenderRulesSchema.pick(...Object.keys(incomeConsideration), ...Object.keys(theoreticalExpenses), ...Object.keys(cutOffCriteria), ...Object.keys(otherParams));\nmodule.exportDefault(LenderRulesSchema);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"helpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lenderRules/helpers.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nmodule.export({\n  getMatchingRules: () => getMatchingRules,\n  isAllRule: () => isAllRule,\n  parseFilter: () => parseFilter,\n  formatFilter: () => formatFilter\n});\nlet jsonLogic;\nmodule.link(\"json-logic-js\", {\n  default(v) {\n    jsonLogic = v;\n  }\n\n}, 0);\nconst rulesToMerge = ['pdfComments', 'adminComments'];\n\nconst filterIsValid = (filter, variables) => jsonLogic.apply(filter, variables);\n\nconst mergeRules = (_ref, newRules) => {\n  let {\n    names = []\n  } = _ref,\n      oldRules = (0, _objectWithoutProperties2.default)(_ref, [\"names\"]);\n  let mergedObject = (0, _objectSpread2.default)({}, oldRules);\n  Object.keys(newRules).forEach(newRuleName => {\n    const newRule = newRules[newRuleName];\n\n    if (rulesToMerge.includes(newRuleName) && mergedObject[newRuleName]) {\n      mergedObject = (0, _objectSpread2.default)({}, mergedObject, {\n        [newRuleName]: [...mergedObject[newRuleName], ...newRule]\n      });\n    } else if (newRule !== undefined && newRule !== null) {\n      mergedObject = (0, _objectSpread2.default)({}, mergedObject, {\n        [newRuleName]: newRule\n      });\n    }\n  });\n  return (0, _objectSpread2.default)({}, mergedObject, {\n    names: [...names, newRules.name]\n  });\n};\n\nconst getMatchingRules = function (lenderRules, variables) {\n  let storeOrigin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : () => {};\n  return lenderRules.reduce((validRules, _ref2) => {\n    let {\n      filter\n    } = _ref2,\n        rules = (0, _objectWithoutProperties2.default)(_ref2, [\"filter\"]);\n\n    if (filterIsValid(filter, variables)) {\n      storeOrigin(rules, rules._id);\n      return mergeRules(validRules, rules);\n    }\n\n    return validRules;\n  }, {});\n};\n\nconst isAllRule = (_ref3) => {\n  let {\n    filter: {\n      and\n    }\n  } = _ref3;\n  return and[0] === true;\n};\n\nconst parseFilter = ruleObject => {\n  if (ruleObject === true) {\n    // Handle exception for rules that are true, i.e. apply to all loans\n    return {\n      value: true\n    };\n  }\n\n  const [operator] = Object.keys(ruleObject);\n  const {\n    var: variable\n  } = ruleObject[operator].find(o => o && o.var);\n  const value = ruleObject[operator].find(o => !(o && o.var));\n  return {\n    operator,\n    variable,\n    value\n  };\n};\n\nconst formatFilter = (_ref4) => {\n  let {\n    variable,\n    operator,\n    value\n  } = _ref4;\n  return {\n    [operator]: [{\n      var: variable\n    }, value]\n  };\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lenderRules/index.js                                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./methodDefinitions\", {\n  \"*\": \"*\"\n}, 0);\nmodule.link(\"./lenderRules\", {\n  default: \"default\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"lenderRules.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lenderRules/lenderRules.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet LenderRulesSchema;\nmodule.link(\"./schemas/lenderRulesSchema\", {\n  default(v) {\n    LenderRulesSchema = v;\n  }\n\n}, 1);\nlet LENDER_RULES_COLLECTION;\nmodule.link(\"./lenderRulesConstants\", {\n  LENDER_RULES_COLLECTION(v) {\n    LENDER_RULES_COLLECTION = v;\n  }\n\n}, 2);\nconst LenderRules = new Mongo.Collection(LENDER_RULES_COLLECTION);\nLenderRules.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true\n});\nLenderRules.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false\n});\nLenderRules.attachSchema(LenderRulesSchema);\nmodule.exportDefault(LenderRules);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"lenderRulesConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lenderRules/lenderRulesConstants.js                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  LENDER_RULES_COLLECTION: () => LENDER_RULES_COLLECTION,\n  LENDER_RULES_QUERIES: () => LENDER_RULES_QUERIES,\n  INCOME_CONSIDERATION_TYPES: () => INCOME_CONSIDERATION_TYPES,\n  REAL_ESTATE_CONSIDERATION_TYPES: () => REAL_ESTATE_CONSIDERATION_TYPES,\n  EXPENSES_CONSIDERATION_TYPES: () => EXPENSES_CONSIDERATION_TYPES,\n  LENDER_RULES_VARIABLES: () => LENDER_RULES_VARIABLES,\n  LENDER_RULES_OPERATORS: () => LENDER_RULES_OPERATORS,\n  DEFAULT_MAIN_RESIDENCE_RULES: () => DEFAULT_MAIN_RESIDENCE_RULES,\n  DEFAULT_SECONDARY_RESIDENCE_RULES: () => DEFAULT_SECONDARY_RESIDENCE_RULES,\n  EXPENSE_TYPES: () => EXPENSE_TYPES,\n  EXPENSE_TYPES_WITHOUT_DELTAS: () => EXPENSE_TYPES_WITHOUT_DELTAS,\n  DEFAULT_VALUE_FOR_ALL: () => DEFAULT_VALUE_FOR_ALL\n});\nlet BONUS_ALGORITHMS;\nmodule.link(\"../../config/financeConstants\", {\n  BONUS_ALGORITHMS(v) {\n    BONUS_ALGORITHMS = v;\n  }\n\n}, 0);\nlet RESIDENCE_TYPE;\nmodule.link(\"../properties/propertyConstants\", {\n  RESIDENCE_TYPE(v) {\n    RESIDENCE_TYPE = v;\n  }\n\n}, 1);\nlet EXPENSES;\nmodule.link(\"../borrowers/borrowerConstants\", {\n  EXPENSES(v) {\n    EXPENSES = v;\n  }\n\n}, 2);\nconst LENDER_RULES_COLLECTION = 'lenderRules';\nconst LENDER_RULES_QUERIES = {\n  ORGANISATION_LENDER_RULES: 'ORGANISATION_LENDER_RULES'\n};\nconst INCOME_CONSIDERATION_TYPES = {\n  GROSS: 'GROSS',\n  NET: 'NET'\n};\nconst REAL_ESTATE_CONSIDERATION_TYPES = {\n  ADD_TO_INCOME: 'ADD_TO_INCOME',\n  SUBTRACT_FROM_EXPENSES: 'SUBTRACT_FROM_EXPENSES'\n};\nconst EXPENSES_CONSIDERATION_TYPES = {\n  SUBTRACT_FROM_INCOME: 'SUBTRACT_FROM_INCOME',\n  ADD_TO_EXPENSES: 'ADD_TO_EXPENSES'\n};\nconst LENDER_RULES_VARIABLES = {\n  INCOME: 'income',\n  RESIDENCE_TYPE: 'residenceType',\n  CANTON: 'canton',\n  BORROW_RATIO: 'borrowRatio',\n  WANTED_LOAN: 'wantedLoan',\n  PROPERTY_VALUE: 'propertyValue',\n  INSIDE_AREA: 'insideArea',\n  BANK_FORTUNE: 'bankFortune',\n  PROPERTY_TYPE: 'propertyType',\n  ZIP_CODE: 'zipCode',\n  REMAINING_BANK_FORTUNE: 'remainingBankFortune'\n};\nconst LENDER_RULES_OPERATORS = {\n  EQUALS: '===',\n  MORE_THAN: '>',\n  MORE_THAN_OR_EQUAL: '>=',\n  LESS_THAN: '<',\n  LESS_THAN_OR_EQUAL: '<=',\n  IN: 'in'\n};\nconst DEFAULT_MAIN_RESIDENCE_RULES = [{\n  [LENDER_RULES_OPERATORS.IN]: [{\n    var: 'residenceType'\n  }, [RESIDENCE_TYPE.MAIN_RESIDENCE]]\n}];\nconst DEFAULT_SECONDARY_RESIDENCE_RULES = [{\n  [LENDER_RULES_OPERATORS.IN]: [{\n    var: 'residenceType'\n  }, [RESIDENCE_TYPE.SECOND_RESIDENCE]]\n}];\nconst EXPENSE_TYPES = (0, _objectSpread2.default)({\n  REAL_ESTATE_DELTA_POSITIVE: 'REAL_ESTATE_DELTA_POSITIVE',\n  REAL_ESTATE_DELTA_NEGATIVE: 'REAL_ESTATE_DELTA_NEGATIVE'\n}, EXPENSES, {\n  THEORETICAL_REAL_ESTATE: 'THEORETICAL_REAL_ESTATE'\n});\nconst EXPENSE_TYPES_WITHOUT_DELTAS = Object.values(EXPENSE_TYPES).filter(value => ![EXPENSE_TYPES.REAL_ESTATE_DELTA_POSITIVE, EXPENSE_TYPES.REAL_ESTATE_DELTA_NEGATIVE].includes(value));\nconst DEFAULT_VALUE_FOR_ALL = {\n  incomeConsiderationType: INCOME_CONSIDERATION_TYPES.GROSS,\n  bonusAlgorithm: BONUS_ALGORITHMS.WEAK_AVERAGE,\n  bonusConsideration: 0.5,\n  bonusHistoryToConsider: 3,\n  companyIncomeConsideration: 1,\n  companyIncomeHistoryToConsider: 3,\n  dividendsConsideration: 1,\n  dividendsHistoryToConsider: 1,\n  pensionIncomeConsideration: 1,\n  realEstateIncomeConsideration: 1,\n  realEstateIncomeConsiderationType: REAL_ESTATE_CONSIDERATION_TYPES.SUBTRACT_FROM_EXPENSES,\n  investmentIncomeConsideration: 1,\n  expensesSubtractFromIncome: EXPENSE_TYPES_WITHOUT_DELTAS,\n  theoreticalInterestRate: 0.05,\n  theoreticalMaintenanceRate: 0.01,\n  amortizationGoal: 0.65,\n  amortizationYears: 15,\n  maxBorrowRatio: 0.9,\n  maxIncomeRatio: 0.3333,\n  allowPledge: true\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"links.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lenderRules/links.js                                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet LenderRules;\nmodule.link(\".\", {\n  default(v) {\n    LenderRules = v;\n  }\n\n}, 0);\nlet Organisations;\nmodule.link(\"..\", {\n  Organisations(v) {\n    Organisations = v;\n  }\n\n}, 1);\nLenderRules.addLinks({\n  organisation: {\n    field: 'organisationLink',\n    type: 'one',\n    metadata: true,\n    collection: Organisations,\n    denormalize: {\n      field: 'organisationCache',\n      body: {\n        _id: 1,\n        name: 1\n      }\n    }\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lenderRules/methodDefinitions.js                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  lenderRulesInsert: () => lenderRulesInsert,\n  lenderRulesInitialize: () => lenderRulesInitialize,\n  lenderRulesRemove: () => lenderRulesRemove,\n  lenderRulesUpdate: () => lenderRulesUpdate,\n  lenderRulesUpdateFilter: () => lenderRulesUpdateFilter,\n  setLenderRulesOrder: () => setLenderRulesOrder\n});\nlet Match;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  }\n\n}, 0);\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 1);\nconst lenderRulesInsert = new Method({\n  name: 'lenderRulesInsert',\n  params: {\n    organisationId: String,\n    logicRules: Array,\n    object: Match.Maybe(Object)\n  }\n});\nconst lenderRulesInitialize = new Method({\n  name: 'lenderRulesInitialize',\n  params: {\n    organisationId: String\n  }\n});\nconst lenderRulesRemove = new Method({\n  name: 'lenderRulesRemove',\n  params: {\n    lenderRulesId: String\n  }\n});\nconst lenderRulesUpdate = new Method({\n  name: 'lenderRulesUpdate',\n  params: {\n    lenderRulesId: String,\n    object: Object\n  }\n});\nconst lenderRulesUpdateFilter = new Method({\n  name: 'lenderRulesUpdateFilter',\n  params: {\n    lenderRulesId: String,\n    logicRules: Array,\n    name: Match.Optional(String)\n  }\n});\nconst setLenderRulesOrder = new Method({\n  name: 'setLenderRulesOrder',\n  params: {\n    orders: Object\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"lenders\":{\"schemas\":{\"lenderSchema.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lenders/schemas/lenderSchema.js                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\nlet createdAt, updatedAt;\nmodule.link(\"../../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  }\n\n}, 1);\nlet LENDER_STATUS;\nmodule.link(\"../lenderConstants\", {\n  LENDER_STATUS(v) {\n    LENDER_STATUS = v;\n  }\n\n}, 2);\nconst LenderSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  status: {\n    type: String,\n    allowedValues: Object.values(LENDER_STATUS),\n    defaultValue: LENDER_STATUS.TO_BE_CONTACTED\n  },\n  contactLink: {\n    type: Object,\n    optional: true\n  },\n  'contactLink._id': {\n    type: String,\n    optional: true\n  },\n  organisationLink: {\n    type: Object,\n    optional: true\n  },\n  'organisationLink._id': {\n    type: String,\n    optional: true\n  },\n  loanLink: {\n    type: Object,\n    optional: true\n  },\n  'loanLink._id': {\n    type: String,\n    optional: true\n  },\n  adminNote: {\n    type: String,\n    optional: true\n  }\n});\nmodule.exportDefault(LenderSchema);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lenders/index.js                                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./methodDefinitions\", {\n  \"*\": \"*\"\n}, 0);\nmodule.link(\"./lenders\", {\n  default: \"default\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"lenderConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lenders/lenderConstants.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  LENDERS_COLLECTION: () => LENDERS_COLLECTION,\n  LENDERS_QUERIES: () => LENDERS_QUERIES,\n  LENDER_STATUS: () => LENDER_STATUS\n});\nconst LENDERS_COLLECTION = 'lenders';\nconst LENDERS_QUERIES = {\n  LOAN_LENDERS: 'LOAN_LENDERS'\n};\nconst LENDER_STATUS = {\n  TO_BE_CONTACTED: 'TO_BE_CONTACTED',\n  CONTACTED: 'CONTACTED',\n  OFFER_RECEIVED: 'OFFER_RECEIVED',\n  TO_EXCLUDE: 'TO_EXCLUDE'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"lenders.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lenders/lenders.js                                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet LenderSchema;\nmodule.link(\"./schemas/lenderSchema\", {\n  default(v) {\n    LenderSchema = v;\n  }\n\n}, 1);\nlet LENDERS_COLLECTION;\nmodule.link(\"./lenderConstants\", {\n  LENDERS_COLLECTION(v) {\n    LENDERS_COLLECTION = v;\n  }\n\n}, 2);\nconst Lenders = new Mongo.Collection(LENDERS_COLLECTION);\nLenders.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true\n});\nLenders.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false\n});\nLenders.attachSchema(LenderSchema);\nmodule.exportDefault(Lenders);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"links.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lenders/links.js                                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Lenders;\nmodule.link(\".\", {\n  default(v) {\n    Lenders = v;\n  }\n\n}, 0);\nlet Contacts, Organisations, Loans, Offers;\nmodule.link(\"..\", {\n  Contacts(v) {\n    Contacts = v;\n  },\n\n  Organisations(v) {\n    Organisations = v;\n  },\n\n  Loans(v) {\n    Loans = v;\n  },\n\n  Offers(v) {\n    Offers = v;\n  }\n\n}, 1);\nlet Tasks;\nmodule.link(\"../tasks\", {\n  default(v) {\n    Tasks = v;\n  }\n\n}, 2);\nLenders.addLinks({\n  contact: {\n    field: 'contactLink',\n    collection: Contacts,\n    type: 'one',\n    metadata: true\n  },\n  organisation: {\n    field: 'organisationLink',\n    collection: Organisations,\n    type: 'one',\n    metadata: true\n  },\n  loan: {\n    field: 'loanLink',\n    collection: Loans,\n    type: 'one',\n    metadata: true\n  },\n  offers: {\n    collection: Offers,\n    inversedBy: 'lender',\n    autoremove: true\n  },\n  tasks: {\n    inversedBy: 'lender',\n    collection: Tasks,\n    autoremove: true\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lenders/methodDefinitions.js                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  lenderInsert: () => lenderInsert,\n  lenderRemove: () => lenderRemove,\n  lenderUpdate: () => lenderUpdate,\n  lenderLinkOrganisationAndContact: () => lenderLinkOrganisationAndContact\n});\nlet Match;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  }\n\n}, 0);\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 1);\nconst lenderInsert = new Method({\n  name: 'lenderInsert',\n  params: {\n    lender: Object,\n    organisationId: String,\n    contactId: Match.OneOf(String, null)\n  }\n});\nconst lenderRemove = new Method({\n  name: 'lenderRemove',\n  params: {\n    lenderId: String\n  }\n});\nconst lenderUpdate = new Method({\n  name: 'lenderUpdate',\n  params: {\n    lenderId: String,\n    object: Object\n  }\n});\nconst lenderLinkOrganisationAndContact = new Method({\n  name: 'lenderLinkOrganisationAndContact',\n  params: {\n    lenderId: String,\n    organisationId: Match.OneOf(String, null),\n    contactId: Match.OneOf(String, null)\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"lots\":{\"schemas\":{\"LotSchema.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lots/schemas/LotSchema.js                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\nlet LOT_TYPES;\nmodule.link(\"../lotConstants\", {\n  LOT_TYPES(v) {\n    LOT_TYPES = v;\n  }\n\n}, 1);\nlet createdAt, updatedAt, moneyField;\nmodule.link(\"../../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  },\n\n  moneyField(v) {\n    moneyField = v;\n  }\n\n}, 2);\nconst LotSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  name: String,\n  type: {\n    type: String,\n    allowedValues: Object.values(LOT_TYPES),\n    uniforms: {\n      displayEmpty: false\n    }\n  },\n  description: {\n    type: String,\n    optional: true\n  },\n  value: (0, _objectSpread2.default)({}, moneyField, {\n    optional: false\n  })\n});\nmodule.exportDefault(LotSchema);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lots/index.js                                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./methodDefinitions\", {\n  \"*\": \"*\"\n}, 0);\nmodule.link(\"./lots\", {\n  default: \"default\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"links.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lots/links.js                                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Lots;\nmodule.link(\".\", {\n  default(v) {\n    Lots = v;\n  }\n\n}, 0);\nlet Promotions, PromotionLots, PromotionOptions;\nmodule.link(\"..\", {\n  Promotions(v) {\n    Promotions = v;\n  },\n\n  PromotionLots(v) {\n    PromotionLots = v;\n  },\n\n  PromotionOptions(v) {\n    PromotionOptions = v;\n  }\n\n}, 1);\nLots.addLinks({\n  promotions: {\n    collection: Promotions,\n    inversedBy: 'lots'\n  },\n  promotionLots: {\n    collection: PromotionLots,\n    inversedBy: 'lots'\n  },\n  promotionOptions: {\n    collection: PromotionOptions,\n    inversedBy: 'lots'\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"lotConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lots/lotConstants.js                                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  LOTS_COLLECTION: () => LOTS_COLLECTION,\n  LOT_TYPES: () => LOT_TYPES\n});\nconst LOTS_COLLECTION = 'lots';\nconst LOT_TYPES = {\n  BASEMENT: 'BASEMENT',\n  PARKING_MOTORBIKE: 'PARKING_MOTORBIKE',\n  PARKING_CAR: 'PARKING_CAR',\n  PARKING_IN_A_ROW: 'PARKING_IN_A_ROW',\n  PARKING_DISABLED: 'PARKING_DISABLED'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"lots.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lots/lots.js                                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet LotSchema;\nmodule.link(\"./schemas/LotSchema\", {\n  default(v) {\n    LotSchema = v;\n  }\n\n}, 1);\nlet LOTS_COLLECTION;\nmodule.link(\"./lotConstants\", {\n  LOTS_COLLECTION(v) {\n    LOTS_COLLECTION = v;\n  }\n\n}, 2);\nconst Lots = new Mongo.Collection(LOTS_COLLECTION);\nLots.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true\n});\nLots.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false\n});\nLots.attachSchema(LotSchema);\nmodule.exportDefault(Lots);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lots/methodDefinitions.js                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  lotInsert: () => lotInsert,\n  lotUpdate: () => lotUpdate,\n  lotRemove: () => lotRemove\n});\nlet Match;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  }\n\n}, 0);\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 1);\nconst lotInsert = new Method({\n  name: 'lotInsert',\n  params: {\n    promotionId: String,\n    lot: Object\n  }\n});\nconst lotUpdate = new Method({\n  name: 'lotUpdate',\n  params: {\n    lotId: String,\n    object: Object\n  }\n});\nconst lotRemove = new Method({\n  name: 'lotRemove',\n  params: {\n    lotId: String\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"reducers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/lots/reducers.js                                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Lots;\nmodule.link(\".\", {\n  default(v) {\n    Lots = v;\n  }\n\n}, 0);\nLots.addReducers({\n  status: {\n    body: {\n      promotionLots: {\n        status: 1,\n        value: 1\n      }\n    },\n    reduce: (_ref) => {\n      let {\n        promotionLots\n      } = _ref;\n      return promotionLots && promotionLots[0] && promotionLots[0].status;\n    }\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"mortgageNotes\":{\"schemas\":{\"MortgageNoteSchema.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/mortgageNotes/schemas/MortgageNoteSchema.js                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\nlet createdAt, updatedAt, moneyField;\nmodule.link(\"../../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  },\n\n  moneyField(v) {\n    moneyField = v;\n  }\n\n}, 1);\nlet CANTONS, MORTGAGE_NOTE_TYPES, MORTGAGE_NOTE_CATEGORIES;\nmodule.link(\"../../constants\", {\n  CANTONS(v) {\n    CANTONS = v;\n  },\n\n  MORTGAGE_NOTE_TYPES(v) {\n    MORTGAGE_NOTE_TYPES = v;\n  },\n\n  MORTGAGE_NOTE_CATEGORIES(v) {\n    MORTGAGE_NOTE_CATEGORIES = v;\n  }\n\n}, 2);\nconst MortgageNoteSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  value: moneyField,\n  rank: {\n    type: Number,\n    min: 0,\n    max: 10,\n    optional: true\n  },\n  type: {\n    type: String,\n    allowedValues: Object.values(MORTGAGE_NOTE_TYPES),\n    optional: true,\n    uniforms: {\n      placeholder: null\n    }\n  },\n  category: {\n    type: String,\n    allowedValues: Object.values(MORTGAGE_NOTE_CATEGORIES),\n    optional: true,\n    uniforms: {\n      placeholder: null\n    }\n  },\n  canton: {\n    type: String,\n    allowedValues: Object.keys(CANTONS),\n    optional: true,\n    uniforms: {\n      placeholder: null\n    }\n  }\n});\nmodule.exportDefault(MortgageNoteSchema);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/mortgageNotes/index.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./methodDefinitions\", {\n  \"*\": \"*\"\n}, 0);\nmodule.link(\"./mortgageNotes\", {\n  default: \"default\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"links.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/mortgageNotes/links.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet MortgageNotes;\nmodule.link(\".\", {\n  default(v) {\n    MortgageNotes = v;\n  }\n\n}, 0);\nlet Borrowers, Properties;\nmodule.link(\"..\", {\n  Borrowers(v) {\n    Borrowers = v;\n  },\n\n  Properties(v) {\n    Properties = v;\n  }\n\n}, 1);\n// If you want to use links, don't forget to import this file in 'core/api/links.js'\nMortgageNotes.addLinks({\n  borrower: {\n    collection: Borrowers,\n    inversedBy: 'mortgageNotes'\n  },\n  property: {\n    collection: Properties,\n    inversedBy: 'mortgageNotes'\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/mortgageNotes/methodDefinitions.js                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  mortgageNoteInsert: () => mortgageNoteInsert,\n  mortgageNoteRemove: () => mortgageNoteRemove,\n  mortgageNoteUpdate: () => mortgageNoteUpdate\n});\nlet Match;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  }\n\n}, 0);\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 1);\nconst mortgageNoteInsert = new Method({\n  name: 'mortgageNoteInsert',\n  params: {\n    mortgageNote: Match.Optional(Object),\n    propertyId: Match.Optional(String),\n    borrowerId: Match.Optional(String)\n  }\n});\nconst mortgageNoteRemove = new Method({\n  name: 'mortgageNoteRemove',\n  params: {\n    mortgageNoteId: String\n  }\n});\nconst mortgageNoteUpdate = new Method({\n  name: 'mortgageNoteUpdate',\n  params: {\n    mortgageNoteId: String,\n    object: Object\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"mortgageNoteConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/mortgageNotes/mortgageNoteConstants.js                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  MORTGAGE_NOTES_COLLECTION: () => MORTGAGE_NOTES_COLLECTION,\n  MORTGAGE_NOTES_QUERIES: () => MORTGAGE_NOTES_QUERIES\n});\nconst MORTGAGE_NOTES_COLLECTION = 'mortgageNotes';\nconst MORTGAGE_NOTES_QUERIES = {// Insert your queries name here\n  // Example:\n  // EXAMPLE_QUERIE: 'EXAMPLE_QUERIE',\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"mortgageNotes.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/mortgageNotes/mortgageNotes.js                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet MortgageNoteSchema;\nmodule.link(\"./schemas/MortgageNoteSchema\", {\n  default(v) {\n    MortgageNoteSchema = v;\n  }\n\n}, 1);\nlet MORTGAGE_NOTES_COLLECTION;\nmodule.link(\"./mortgageNoteConstants\", {\n  MORTGAGE_NOTES_COLLECTION(v) {\n    MORTGAGE_NOTES_COLLECTION = v;\n  }\n\n}, 2);\nconst MortgageNotes = new Mongo.Collection(MORTGAGE_NOTES_COLLECTION);\nMortgageNotes.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true\n});\nMortgageNotes.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false\n});\nMortgageNotes.attachSchema(MortgageNoteSchema);\nmodule.exportDefault(MortgageNotes);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"promotionLots\":{\"schemas\":{\"PromotionLotSchema.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotionLots/schemas/PromotionLotSchema.js                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\nlet PROMOTION_LOT_STATUS;\nmodule.link(\"../promotionLotConstants\", {\n  PROMOTION_LOT_STATUS(v) {\n    PROMOTION_LOT_STATUS = v;\n  }\n\n}, 1);\nlet createdAt, updatedAt;\nmodule.link(\"../../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  }\n\n}, 2);\nconst PromotionLotSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  status: {\n    type: String,\n    allowedValues: Object.values(PROMOTION_LOT_STATUS),\n    defaultValue: PROMOTION_LOT_STATUS.AVAILABLE\n  },\n  propertyLinks: {\n    type: Array,\n    minCount: 1,\n    maxCount: 1\n  },\n  'propertyLinks.$': Object,\n  'propertyLinks.$._id': {\n    type: String,\n    optional: true\n  },\n  lotLinks: {\n    type: Array,\n    defaultValue: []\n  },\n  'lotLinks.$': Object,\n  'lotLinks.$._id': {\n    type: String,\n    optional: true\n  },\n  attributedToLink: {\n    type: Object,\n    optional: true\n  },\n  'attributedToLink._id': {\n    type: String,\n    optional: true\n  }\n});\nmodule.exportDefault(PromotionLotSchema);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotionLots/index.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./methodDefinitions\", {\n  \"*\": \"*\"\n}, 0);\nmodule.link(\"./promotionLots\", {\n  default: \"default\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"links.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotionLots/links.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet PromotionLots;\nmodule.link(\".\", {\n  default(v) {\n    PromotionLots = v;\n  }\n\n}, 0);\nlet Promotions, Properties, Lots, PromotionOptions, Loans;\nmodule.link(\"..\", {\n  Promotions(v) {\n    Promotions = v;\n  },\n\n  Properties(v) {\n    Properties = v;\n  },\n\n  Lots(v) {\n    Lots = v;\n  },\n\n  PromotionOptions(v) {\n    PromotionOptions = v;\n  },\n\n  Loans(v) {\n    Loans = v;\n  }\n\n}, 1);\nPromotionLots.addLinks({\n  promotion: {\n    collection: Promotions,\n    inversedBy: 'promotionLots'\n  },\n  properties: {\n    collection: Properties,\n    field: 'propertyLinks',\n    type: 'many',\n    metadata: true\n  },\n  lots: {\n    collection: Lots,\n    field: 'lotLinks',\n    type: 'many',\n    metadata: true\n  },\n  promotionOptions: {\n    collection: PromotionOptions,\n    inversedBy: 'promotionLots',\n    autoremove: true\n  },\n  attributedTo: {\n    collection: Loans,\n    field: 'attributedToLink',\n    type: 'one',\n    metadata: true\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotionLots/methodDefinitions.js                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  promotionLotInsert: () => promotionLotInsert,\n  promotionLotUpdate: () => promotionLotUpdate,\n  promotionLotRemove: () => promotionLotRemove,\n  addLotToPromotionLot: () => addLotToPromotionLot,\n  removeLotLink: () => removeLotLink,\n  bookPromotionLot: () => bookPromotionLot,\n  cancelPromotionLotBooking: () => cancelPromotionLotBooking,\n  sellPromotionLot: () => sellPromotionLot\n});\nlet Match;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  }\n\n}, 0);\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 1);\nconst promotionLotInsert = new Method({\n  name: 'promotionLotInsert',\n  params: {\n    promotionLot: Object,\n    promotionId: String\n  }\n});\nconst promotionLotUpdate = new Method({\n  name: 'promotionLotUpdate',\n  params: {\n    promotionLotId: String,\n    object: Object\n  }\n});\nconst promotionLotRemove = new Method({\n  name: 'promotionLotRemove',\n  params: {\n    promotionLotId: String\n  }\n});\nconst addLotToPromotionLot = new Method({\n  name: 'addLotToPromotionLot',\n  params: {\n    promotionLotId: String,\n    lotId: String\n  }\n});\nconst removeLotLink = new Method({\n  name: 'removeLotLink',\n  params: {\n    promotionLotId: String,\n    lotId: String\n  }\n});\nconst bookPromotionLot = new Method({\n  name: 'bookPromotionLot',\n  params: {\n    promotionLotId: String,\n    loanId: String\n  }\n});\nconst cancelPromotionLotBooking = new Method({\n  name: 'cancelPromotionLotBooking',\n  params: {\n    promotionLotId: String\n  }\n});\nconst sellPromotionLot = new Method({\n  name: 'sellPromotionLot',\n  params: {\n    promotionLotId: String\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"promotionLotConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotionLots/promotionLotConstants.js                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  PROMOTION_LOTS_COLLECTION: () => PROMOTION_LOTS_COLLECTION,\n  PROMOTION_LOT_STATUS: () => PROMOTION_LOT_STATUS,\n  PROMOTION_LOT_REDUCED_STATUS: () => PROMOTION_LOT_REDUCED_STATUS,\n  PROMOTION_LOT_QUERIES: () => PROMOTION_LOT_QUERIES\n});\nconst PROMOTION_LOTS_COLLECTION = 'promotionLots';\nconst PROMOTION_LOT_STATUS = {\n  AVAILABLE: 'AVAILABLE',\n  BOOKED: 'BOOKED',\n  SOLD: 'SOLD'\n};\nconst PROMOTION_LOT_REDUCED_STATUS = {\n  BOOKED_FOR_ME: 'BOOKED_FOR_ME',\n  NOT_AVAILABLE: 'NOT_AVAILABLE',\n  SOLD_TO_ME: 'SOLD_TO_ME'\n};\nconst PROMOTION_LOT_QUERIES = {\n  APP_PROMOTION_LOT: 'APP_PROMOTION_LOT',\n  PRO_PROMOTION_LOT: 'PRO_PROMOTION_LOT',\n  PROMOTION_LOT_FILES: 'PROMOTION_LOT_FILES'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"promotionLots.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotionLots/promotionLots.js                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet PromotionLotSchema;\nmodule.link(\"./schemas/PromotionLotSchema\", {\n  default(v) {\n    PromotionLotSchema = v;\n  }\n\n}, 1);\nlet PROMOTION_LOTS_COLLECTION;\nmodule.link(\"./promotionLotConstants\", {\n  PROMOTION_LOTS_COLLECTION(v) {\n    PROMOTION_LOTS_COLLECTION = v;\n  }\n\n}, 2);\nconst PromotionLots = new Mongo.Collection(PROMOTION_LOTS_COLLECTION);\nPromotionLots.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true\n});\nPromotionLots.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false\n});\nPromotionLots.attachSchema(PromotionLotSchema);\nmodule.exportDefault(PromotionLots);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"reducers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotionLots/reducers.js                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet PROMOTION_LOT_STATUS, PROMOTION_LOT_REDUCED_STATUS;\nmodule.link(\"../constants\", {\n  PROMOTION_LOT_STATUS(v) {\n    PROMOTION_LOT_STATUS = v;\n  },\n\n  PROMOTION_LOT_REDUCED_STATUS(v) {\n    PROMOTION_LOT_REDUCED_STATUS = v;\n  }\n\n}, 1);\nlet PromotionLots;\nmodule.link(\"./promotionLots\", {\n  default(v) {\n    PromotionLots = v;\n  }\n\n}, 2);\nPromotionLots.addReducers({\n  name: {\n    body: {\n      properties: {\n        name: 1\n      }\n    },\n    reduce: (_ref) => {\n      let {\n        properties\n      } = _ref;\n      return properties && properties[0] && properties[0].name;\n    }\n  },\n  documents: {\n    body: {\n      properties: {\n        documents: 1\n      }\n    },\n    reduce: (_ref2) => {\n      let {\n        properties\n      } = _ref2;\n      return properties && properties[0] && properties[0].documents;\n    }\n  },\n  value: {\n    body: {\n      properties: {\n        totalValue: 1\n      },\n      lots: {\n        value: 1\n      }\n    },\n    reduce: (_ref3) => {\n      let {\n        properties,\n        lots\n      } = _ref3;\n      // Sometimes, lots are undefined........ fuck me\n      const propertiesValue = properties.reduce((total, _ref4) => {\n        let {\n          totalValue\n        } = _ref4;\n        return total + totalValue;\n      }, 0);\n      const lotsValue = lots ? lots.reduce((total, _ref5) => {\n        let {\n          value\n        } = _ref5;\n        return total + value;\n      }, 0) : 0;\n      return propertiesValue + lotsValue;\n    }\n  },\n  reducedStatus: {\n    body: {\n      status: 1,\n      attributedTo: {\n        user: {\n          _id: 1\n        }\n      }\n    },\n    reduce: (_ref6) => {\n      let {\n        status,\n        attributedTo\n      } = _ref6;\n\n      if (attributedTo && attributedTo.user && attributedTo.user._id === Meteor.userId()) {\n        switch (status) {\n          case PROMOTION_LOT_STATUS.BOOKED:\n            return PROMOTION_LOT_REDUCED_STATUS.BOOKED_FOR_ME;\n\n          case PROMOTION_LOT_STATUS.SOLD:\n            return PROMOTION_LOT_REDUCED_STATUS.SOLD_TO_ME;\n\n          default:\n            return status;\n        }\n      }\n\n      if (status === PROMOTION_LOT_STATUS.BOOKED) {\n        return PROMOTION_LOT_REDUCED_STATUS.NOT_AVAILABLE;\n      }\n\n      return status;\n    }\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"promotionOptions\":{\"schemas\":{\"PromotionOptionSchema.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotionOptions/schemas/PromotionOptionSchema.js                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\nlet createdAt, updatedAt;\nmodule.link(\"../../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  }\n\n}, 1);\nlet PROMOTION_OPTION_SOLVENCY;\nmodule.link(\"../promotionOptionConstants\", {\n  PROMOTION_OPTION_SOLVENCY(v) {\n    PROMOTION_OPTION_SOLVENCY = v;\n  }\n\n}, 2);\nconst PromotionOptionSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  promotionLotLinks: {\n    type: Array,\n    defaultValue: []\n  },\n  'promotionLotLinks.$': Object,\n  'promotionLotLinks.$._id': {\n    type: String,\n    optional: true\n  },\n  lotLinks: {\n    type: Array,\n    optional: true\n  },\n  'lotLinks.$': Object,\n  'lotLinks.$._id': {\n    type: String,\n    optional: true\n  },\n  custom: {\n    type: String,\n    optional: true\n  },\n  solvency: {\n    type: String,\n    allowedValues: Object.values(PROMOTION_OPTION_SOLVENCY),\n    defaultValue: PROMOTION_OPTION_SOLVENCY.UNDETERMINED,\n    uniforms: {\n      displayEmpty: false\n    }\n  }\n});\nmodule.exportDefault(PromotionOptionSchema);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotionOptions/index.js                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./methodDefinitions\", {\n  \"*\": \"*\"\n}, 0);\nmodule.link(\"./promotionOptions\", {\n  default: \"default\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"links.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotionOptions/links.js                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet PromotionOptions;\nmodule.link(\".\", {\n  default(v) {\n    PromotionOptions = v;\n  }\n\n}, 0);\nlet PromotionLots, Lots, Loans;\nmodule.link(\"..\", {\n  PromotionLots(v) {\n    PromotionLots = v;\n  },\n\n  Lots(v) {\n    Lots = v;\n  },\n\n  Loans(v) {\n    Loans = v;\n  }\n\n}, 1);\nPromotionOptions.addLinks({\n  promotionLots: {\n    field: 'promotionLotLinks',\n    collection: PromotionLots,\n    type: 'many',\n    metadata: true\n  },\n  lots: {\n    field: 'lotLinks',\n    collection: Lots,\n    type: 'many',\n    metadata: true\n  },\n  loan: {\n    collection: Loans,\n    inversedBy: 'promotionOptions'\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotionOptions/methodDefinitions.js                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  promotionOptionInsert: () => promotionOptionInsert,\n  promotionOptionRemove: () => promotionOptionRemove,\n  promotionOptionUpdate: () => promotionOptionUpdate,\n  increaseOptionPriority: () => increaseOptionPriority,\n  reducePriorityOrder: () => reducePriorityOrder\n});\nlet Match;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  }\n\n}, 0);\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 1);\nconst promotionOptionInsert = new Method({\n  name: 'promotionOptionInsert',\n  params: {\n    promotionLotId: String,\n    loanId: String\n  }\n});\nconst promotionOptionRemove = new Method({\n  name: 'promotionOptionRemove',\n  params: {\n    promotionOptionId: String\n  }\n});\nconst promotionOptionUpdate = new Method({\n  name: 'promotionOptionUpdate',\n  params: {\n    promotionOptionId: String,\n    object: Object\n  }\n});\nconst increaseOptionPriority = new Method({\n  name: 'increaseOptionPriority',\n  params: {\n    promotionOptionId: String\n  }\n});\nconst reducePriorityOrder = new Method({\n  name: 'reducePriorityOrder',\n  params: {\n    promotionOptionId: String\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"promotionOptionConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotionOptions/promotionOptionConstants.js                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  PROMOTION_OPTIONS_COLLECTION: () => PROMOTION_OPTIONS_COLLECTION,\n  PROMOTION_OPTION_QUERIES: () => PROMOTION_OPTION_QUERIES,\n  PROMOTION_OPTION_SOLVENCY: () => PROMOTION_OPTION_SOLVENCY\n});\nconst PROMOTION_OPTIONS_COLLECTION = 'promotionOptions';\nconst PROMOTION_OPTION_QUERIES = {\n  APP_PROMOTION_OPTION: 'APP_PROMOTION_OPTION',\n  PRO_PROMOTION_OPTIONS: 'PRO_PROMOTION_OPTIONS'\n};\nconst PROMOTION_OPTION_SOLVENCY = {\n  UNDETERMINED: 'UNDETERMINED',\n  SOLVENT: 'SOLVENT',\n  INSOLVENT: 'INSOLVENT'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"promotionOptions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotionOptions/promotionOptions.js                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet PromotionOptionSchema;\nmodule.link(\"./schemas/PromotionOptionSchema\", {\n  default(v) {\n    PromotionOptionSchema = v;\n  }\n\n}, 1);\nlet PROMOTION_OPTIONS_COLLECTION;\nmodule.link(\"./promotionOptionConstants\", {\n  PROMOTION_OPTIONS_COLLECTION(v) {\n    PROMOTION_OPTIONS_COLLECTION = v;\n  }\n\n}, 2);\nconst PromotionOptions = new Mongo.Collection(PROMOTION_OPTIONS_COLLECTION);\nPromotionOptions.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true\n});\nPromotionOptions.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false\n});\nPromotionOptions.attachSchema(PromotionOptionSchema);\nmodule.exportDefault(PromotionOptions);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"reducers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotionOptions/reducers.js                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet PromotionOptions;\nmodule.link(\".\", {\n  default(v) {\n    PromotionOptions = v;\n  }\n\n}, 1);\nPromotionOptions.addReducers({\n  promotion: {\n    body: {\n      promotionLots: {\n        promotion: {\n          name: 1,\n          address1: 1,\n          address2: 1,\n          zipCode: 1,\n          canton: 1,\n          city: 1\n        }\n      }\n    },\n    reduce: (_ref) => {\n      let {\n        promotionLots = []\n      } = _ref;\n      return promotionLots.length > 0 ? promotionLots[0].promotion : {};\n    }\n  },\n  name: {\n    body: {\n      promotionLots: {\n        name: 1\n      }\n    },\n    reduce: (_ref2) => {\n      let {\n        promotionLots = []\n      } = _ref2;\n      return promotionLots.length > 0 ? promotionLots[0].name : '';\n    }\n  },\n  value: {\n    body: {\n      promotionLots: {\n        value: 1\n      }\n    },\n    reduce: (_ref3) => {\n      let {\n        promotionLots = []\n      } = _ref3;\n\n      if (promotionLots.length === 0) {\n        return 0;\n      }\n\n      const {\n        value\n      } = promotionLots[0];\n      return value;\n    }\n  },\n  priority: {\n    body: {\n      loan: {\n        promotionLinks: 1\n      }\n    },\n    reduce: (_ref4) => {\n      let {\n        loan,\n        _id: promotionOptionId\n      } = _ref4;\n      const {\n        promotionLinks\n      } = loan;\n\n      if (promotionLinks && promotionLinks.length > 0) {\n        return promotionLinks[0].priorityOrder.findIndex(id => id === promotionOptionId);\n      }\n\n      return null;\n    }\n  },\n  attributedToMe: {\n    body: {\n      promotionLots: {\n        attributedTo: {\n          userId: 1\n        }\n      }\n    },\n    reduce: (_ref5) => {\n      let {\n        promotionLots = []\n      } = _ref5;\n      return !!(promotionLots[0] && promotionLots[0].attributedTo && promotionLots[0].attributedTo.userId === Meteor.userId());\n    }\n  },\n  canton: {\n    body: {\n      promotionLots: {\n        promotion: {\n          canton: 1\n        }\n      }\n    },\n    reduce: (_ref6) => {\n      let {\n        promotionLots = []\n      } = _ref6;\n      return promotionLots.length > 0 ? promotionLots[0].promotion.canton : undefined;\n    }\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"promotions\":{\"schemas\":{\"PromotionSchema.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotions/schemas/PromotionSchema.js                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  promotionPermissionsSchema: () => promotionPermissionsSchema,\n  BasePromotionSchema: () => BasePromotionSchema\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 1);\nlet PROMOTION_TYPES, PROMOTION_STATUS, PROMOTION_PERMISSIONS;\nmodule.link(\"../promotionConstants\", {\n  PROMOTION_TYPES(v) {\n    PROMOTION_TYPES = v;\n  },\n\n  PROMOTION_STATUS(v) {\n    PROMOTION_STATUS = v;\n  },\n\n  PROMOTION_PERMISSIONS(v) {\n    PROMOTION_PERMISSIONS = v;\n  }\n\n}, 2);\nlet address, contactsSchema, userLinksSchema, createdAt, updatedAt, documentsField, percentageField, dateField;\nmodule.link(\"../../helpers/sharedSchemas\", {\n  address(v) {\n    address = v;\n  },\n\n  contactsSchema(v) {\n    contactsSchema = v;\n  },\n\n  userLinksSchema(v) {\n    userLinksSchema = v;\n  },\n\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  },\n\n  documentsField(v) {\n    documentsField = v;\n  },\n\n  percentageField(v) {\n    percentageField = v;\n  },\n\n  dateField(v) {\n    dateField = v;\n  }\n\n}, 3);\nconst SCHEMA_BOOLEAN = {\n  type: Boolean,\n  optional: true,\n  defaultValue: false\n};\nconst promotionPermissionsSchema = {\n  canAddLots: SCHEMA_BOOLEAN,\n  canModifyLots: SCHEMA_BOOLEAN,\n  canRemoveLots: SCHEMA_BOOLEAN,\n  canModifyPromotion: SCHEMA_BOOLEAN,\n  canManageDocuments: SCHEMA_BOOLEAN,\n  displayCustomerNames: {\n    type: SimpleSchema.oneOf(Boolean, Object),\n    optional: true,\n\n    autoValue() {\n      if (Meteor.isServer && this.isSet) {\n        if (this.value === undefined) {\n          return false;\n        }\n\n        if (this.value instanceof Object) {\n          if (!Object.keys(this.value).length) {\n            return false;\n          }\n\n          if (!this.value.invitedBy) {\n            return false;\n          }\n        }\n\n        return this.value;\n      }\n    }\n\n  },\n  'displayCustomerNames.forLotStatus': {\n    type: Array,\n    optional: true,\n    defaultValue: [],\n    uniforms: {\n      displayEmpty: false,\n      placeholder: '',\n      checkboxes: true\n    }\n  },\n  'displayCustomerNames.forLotStatus.$': {\n    type: String,\n    allowedValues: Object.values(PROMOTION_PERMISSIONS.DISPLAY_CUSTOMER_NAMES.FOR_LOT_STATUS)\n  },\n  'displayCustomerNames.invitedBy': {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(PROMOTION_PERMISSIONS.DISPLAY_CUSTOMER_NAMES.INVITED_BY),\n    uniforms: {\n      displayEmpty: false,\n      placeholder: ''\n    }\n  },\n  canInviteCustomers: SCHEMA_BOOLEAN,\n  canBookLots: SCHEMA_BOOLEAN,\n  // canPreBookLots: SCHEMA_BOOLEAN,\n  canSellLots: SCHEMA_BOOLEAN\n};\nconst PromotionSchema = new SimpleSchema((0, _objectSpread2.default)({\n  createdAt,\n  updatedAt,\n  name: {\n    type: String,\n    uniforms: {\n      placeholder: 'Les Terrasses de Versoix'\n    }\n  },\n  type: {\n    type: String,\n    allowedValues: Object.values(PROMOTION_TYPES),\n    uniforms: {\n      displayEmpty: false\n    }\n  },\n  status: {\n    type: String,\n    allowedValues: Object.values(PROMOTION_STATUS),\n    defaultValue: PROMOTION_STATUS.PREPARATION,\n    uniforms: {\n      displayEmpty: false\n    }\n  }\n}, address, contactsSchema, {\n  propertyLinks: {\n    type: Array,\n    defaultValue: []\n  },\n  'propertyLinks.$': Object,\n  'propertyLinks.$._id': {\n    type: String,\n    optional: true\n  },\n  lotLinks: {\n    type: Array,\n    defaultValue: []\n  },\n  'lotLinks.$': Object,\n  'lotLinks.$._id': {\n    type: String,\n    optional: true\n  },\n  promotionLotLinks: {\n    type: Array,\n    defaultValue: []\n  },\n  'promotionLotLinks.$': Object,\n  'promotionLotLinks.$._id': {\n    type: String,\n    optional: true\n  },\n  assignedEmployeeId: {\n    type: String,\n    optional: true\n  }\n}, userLinksSchema(promotionPermissionsSchema), {\n  documents: documentsField,\n  lenderOrganisationLink: {\n    type: Object,\n    optional: true\n  },\n  'lenderOrganisationLink._id': {\n    type: String,\n    optional: true\n  },\n  constructionTimeline: {\n    type: Array,\n    defaultValue: []\n  },\n  'constructionTimeline.$': Object,\n  'constructionTimeline.$.description': String,\n  'constructionTimeline.$.duration': Number,\n  'constructionTimeline.$.percent': (0, _objectSpread2.default)({}, percentageField, {\n    optional: false\n  }),\n  signingDate: dateField\n}));\nconst BasePromotionSchema = PromotionSchema.pick('name', 'type', 'address1', 'address2', 'zipCode', 'city', 'contacts');\nmodule.exportDefault(PromotionSchema);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"test\":{\"promotionClientHelpers.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotions/test/promotionClientHelpers.spec.js                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet shouldAnonymize, getPromotionCustomerOwnerType;\nmodule.link(\"../promotionClientHelpers\", {\n  shouldAnonymize(v) {\n    shouldAnonymize = v;\n  },\n\n  getPromotionCustomerOwnerType(v) {\n    getPromotionCustomerOwnerType = v;\n  }\n\n}, 1);\nlet PROMOTION_INVITED_BY_TYPE;\nmodule.link(\"../promotionConstants\", {\n  PROMOTION_INVITED_BY_TYPE(v) {\n    PROMOTION_INVITED_BY_TYPE = v;\n  }\n\n}, 2);\nlet PROMOTION_LOT_STATUS;\nmodule.link(\"../../promotionLots/promotionLotConstants\", {\n  PROMOTION_LOT_STATUS(v) {\n    PROMOTION_LOT_STATUS = v;\n  }\n\n}, 3);\ndescribe('promotionClientHelpers', () => {\n  context('shouldAnonymize', () => {\n    it('returns true if user cannot view the promotion', () => {\n      expect(shouldAnonymize({\n        permissions: {}\n      })).to.equal(true);\n    });\n    it('returns true if user cannot see customers', () => {\n      expect(shouldAnonymize({\n        permissions: {\n          displayCustomerNames: false\n        }\n      })).to.equal(true);\n    });\n    it('returns true if customer is invited by nobody', () => {\n      const currentUser = {\n        _id: 'bob'\n      };\n      const customerOwnerType = getPromotionCustomerOwnerType({\n        currentUser\n      });\n      expect(shouldAnonymize({\n        customerOwnerType,\n        permissions: {}\n      })).to.equal(true);\n    });\n    it('returns true if lot status is not in permissions', () => {\n      const currentUser = {\n        _id: 'bob'\n      };\n      const invitedBy = 'bob';\n      const customerOwnerType = getPromotionCustomerOwnerType({\n        currentUser,\n        invitedBy\n      });\n      expect(shouldAnonymize({\n        customerOwnerType,\n        permissions: {\n          displayCustomerNames: {\n            invitedBy: PROMOTION_INVITED_BY_TYPE.ANY,\n            forLotStatus: [PROMOTION_LOT_STATUS.AVAILABLE]\n          }\n        },\n        promotionLotStatus: PROMOTION_LOT_STATUS.BOOKED\n      })).to.equal(true);\n    });\n    it('returns true if lot status is in permissions and belongs to owner, but not attributed', () => {\n      const currentUser = {\n        _id: 'bob'\n      };\n      const invitedBy = 'bob';\n      const customerOwnerType = getPromotionCustomerOwnerType({\n        currentUser,\n        invitedBy\n      });\n      expect(shouldAnonymize({\n        customerOwnerType,\n        permissions: {\n          displayCustomerNames: {\n            invitedBy: PROMOTION_INVITED_BY_TYPE.USER,\n            forLotStatus: [PROMOTION_LOT_STATUS.AVAILABLE, PROMOTION_LOT_STATUS.BOOKED]\n          }\n        },\n        promotionLotStatus: PROMOTION_LOT_STATUS.BOOKED,\n        isAttributed: false\n      })).to.equal(true);\n    });\n    it('returns false if lot status is in permissions and belongs to owner', () => {\n      const currentUser = {\n        _id: 'bob'\n      };\n      const invitedBy = 'bob';\n      const customerOwnerType = getPromotionCustomerOwnerType({\n        currentUser,\n        invitedBy\n      });\n      expect(shouldAnonymize({\n        customerOwnerType,\n        permissions: {\n          displayCustomerNames: {\n            invitedBy: PROMOTION_INVITED_BY_TYPE.USER,\n            forLotStatus: [PROMOTION_LOT_STATUS.AVAILABLE, PROMOTION_LOT_STATUS.BOOKED]\n          }\n        },\n        promotionLotStatus: PROMOTION_LOT_STATUS.BOOKED,\n        isAttributed: true\n      })).to.equal(false);\n    });\n    it('returns true if lot status is undefined', () => {\n      const currentUser = {\n        _id: 'bob'\n      };\n      const invitedBy = 'bob';\n      const customerOwnerType = getPromotionCustomerOwnerType({\n        currentUser,\n        invitedBy\n      });\n      expect(shouldAnonymize({\n        customerOwnerType,\n        permissions: {\n          displayCustomerNames: {\n            invitedBy: PROMOTION_INVITED_BY_TYPE.USER,\n            forLotStatus: [PROMOTION_LOT_STATUS.BOOKED, PROMOTION_LOT_STATUS.SOLD]\n          }\n        }\n      })).to.equal(true);\n    });\n    it('returns true if customer is not invited by current user', () => {\n      const currentUser = {\n        _id: 'bob'\n      };\n      const invitedBy = 'john';\n      const customerOwnerType = getPromotionCustomerOwnerType({\n        currentUser,\n        invitedBy\n      });\n      expect(shouldAnonymize({\n        customerOwnerType,\n        permissions: {\n          displayCustomerNames: {\n            invitedBy: PROMOTION_INVITED_BY_TYPE.USER\n          }\n        }\n      })).to.equal(true);\n    });\n    it('returns true if customer is not invited by current user organisation member', () => {\n      const currentUser = {\n        _id: 'bob',\n        organisations: [{\n          users: [{\n            _id: 'bob'\n          }, {\n            _id: 'dylan'\n          }]\n        }]\n      };\n      const invitedBy = 'john';\n      const customerOwnerType = getPromotionCustomerOwnerType({\n        currentUser,\n        invitedBy\n      });\n      expect(shouldAnonymize({\n        customerOwnerType,\n        permissions: {\n          displayCustomerNames: {\n            invitedBy: PROMOTION_INVITED_BY_TYPE.ORGANISATION\n          }\n        }\n      })).to.equal(true);\n    });\n    it('returns false if customer is invited by current user organisation member', () => {\n      const currentUser = {\n        _id: 'bob',\n        organisations: [{\n          users: [{\n            _id: 'bob'\n          }, {\n            _id: 'dylan'\n          }]\n        }, {\n          users: [{\n            _id: 'bob'\n          }, {\n            _id: 'john'\n          }]\n        }]\n      };\n      const invitedBy = 'john';\n      const customerOwnerType = getPromotionCustomerOwnerType({\n        currentUser,\n        invitedBy\n      });\n      expect(shouldAnonymize({\n        customerOwnerType,\n        permissions: {\n          displayCustomerNames: {\n            invitedBy: PROMOTION_INVITED_BY_TYPE.ORGANISATION,\n            forLotStatus: [PROMOTION_LOT_STATUS.AVAILABLE]\n          }\n        }\n      })).to.equal(false);\n    });\n    it('returns true if current user has no organisation', () => {\n      const currentUser = {\n        _id: 'bob'\n      };\n      const invitedBy = 'john';\n      const customerOwnerType = getPromotionCustomerOwnerType({\n        currentUser,\n        invitedBy\n      });\n      expect(shouldAnonymize({\n        customerOwnerType,\n        permissions: {\n          displayCustomerNames: {\n            invitedBy: PROMOTION_INVITED_BY_TYPE.ORGANISATION\n          }\n        }\n      })).to.equal(true);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotions/index.js                                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./methodDefinitions\", {\n  \"*\": \"*\"\n}, 0);\nmodule.link(\"./promotions\", {\n  default: \"default\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"links.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotions/links.js                                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Promotions;\nmodule.link(\".\", {\n  default(v) {\n    Promotions = v;\n  }\n\n}, 0);\nlet Properties, Lots, PromotionLots, Users, Loans, Organisations;\nmodule.link(\"..\", {\n  Properties(v) {\n    Properties = v;\n  },\n\n  Lots(v) {\n    Lots = v;\n  },\n\n  PromotionLots(v) {\n    PromotionLots = v;\n  },\n\n  Users(v) {\n    Users = v;\n  },\n\n  Loans(v) {\n    Loans = v;\n  },\n\n  Organisations(v) {\n    Organisations = v;\n  }\n\n}, 1);\nlet Tasks;\nmodule.link(\"../tasks\", {\n  default(v) {\n    Tasks = v;\n  }\n\n}, 2);\nPromotions.addLinks({\n  properties: {\n    field: 'propertyLinks',\n    collection: Properties,\n    type: 'many',\n    metadata: true,\n    autoremove: true,\n    unique: true\n  },\n  lots: {\n    field: 'lotLinks',\n    collection: Lots,\n    type: 'many',\n    metadata: true,\n    autoremove: true,\n    unique: true\n  },\n  promotionLots: {\n    field: 'promotionLotLinks',\n    collection: PromotionLots,\n    type: 'many',\n    metadata: true,\n    autoremove: true,\n    unique: true\n  },\n  users: {\n    field: 'userLinks',\n    collection: Users,\n    type: 'many',\n    metadata: true\n  },\n  loans: {\n    collection: Loans,\n    inversedBy: 'promotions'\n  },\n  assignedEmployee: {\n    collection: Users,\n    field: 'assignedEmployeeId',\n    type: 'one'\n  },\n  lenderOrganisation: {\n    field: 'lenderOrganisationLink',\n    type: 'one',\n    metadata: true,\n    collection: Organisations\n  },\n  tasks: {\n    inversedBy: 'promotion',\n    collection: Tasks,\n    autoremove: true\n  },\n  promotionLoan: {\n    inversedBy: 'financedPromotion',\n    type: 'one',\n    collection: Loans\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotions/methodDefinitions.js                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  promotionInsert: () => promotionInsert,\n  promotionUpdate: () => promotionUpdate,\n  promotionRemove: () => promotionRemove,\n  insertPromotionProperty: () => insertPromotionProperty,\n  setPromotionUserPermissions: () => setPromotionUserPermissions,\n  addProUserToPromotion: () => addProUserToPromotion,\n  removeProFromPromotion: () => removeProFromPromotion,\n  sendPromotionInvitationEmail: () => sendPromotionInvitationEmail,\n  removeLoanFromPromotion: () => removeLoanFromPromotion,\n  editPromotionLoan: () => editPromotionLoan\n});\nlet Match;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  }\n\n}, 0);\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 1);\nconst promotionInsert = new Method({\n  name: 'promotionInsert',\n  params: {\n    promotion: Object\n  }\n});\nconst promotionUpdate = new Method({\n  name: 'promotionUpdate',\n  params: {\n    promotionId: String,\n    object: Object\n  }\n});\nconst promotionRemove = new Method({\n  name: 'promotionRemove',\n  params: {\n    promotionId: String\n  }\n});\nconst insertPromotionProperty = new Method({\n  name: 'insertPromotionProperty',\n  params: {\n    promotionId: String,\n    property: Object\n  }\n});\nconst setPromotionUserPermissions = new Method({\n  name: 'setPromotionUserPermissions',\n  params: {\n    promotionId: String,\n    userId: String,\n    permissions: Object\n  }\n});\nconst addProUserToPromotion = new Method({\n  name: 'addProUserToPromotion',\n  params: {\n    promotionId: String,\n    userId: String\n  }\n});\nconst removeProFromPromotion = new Method({\n  name: 'removeProFromPromotion',\n  params: {\n    promotionId: String,\n    userId: String\n  }\n});\nconst sendPromotionInvitationEmail = new Method({\n  name: 'sendPromotionInvitationEmail',\n  params: {\n    userId: String,\n    email: String,\n    isNewUser: Boolean,\n    promotionId: String,\n    firstName: String\n  }\n});\nconst removeLoanFromPromotion = new Method({\n  name: 'removeLoanFromPromotion',\n  params: {\n    promotionId: String,\n    loanId: String\n  }\n});\nconst editPromotionLoan = new Method({\n  name: 'editPromotionLoan',\n  params: {\n    promotionId: String,\n    loanId: String,\n    promotionLotIds: [String],\n    showAllLots: Match.Optional(Boolean)\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"promotionClientHelpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotions/promotionClientHelpers.js                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  getCurrentUserPermissionsForPromotion: () => getCurrentUserPermissionsForPromotion,\n  getPromotionCustomerOwnerType: () => getPromotionCustomerOwnerType,\n  clientGetBestPromotionLotStatus: () => clientGetBestPromotionLotStatus,\n  shouldAnonymize: () => shouldAnonymize\n});\nlet PROMOTION_INVITED_BY_TYPE;\nmodule.link(\"./promotionConstants\", {\n  PROMOTION_INVITED_BY_TYPE(v) {\n    PROMOTION_INVITED_BY_TYPE = v;\n  }\n\n}, 0);\nlet PROMOTION_LOT_STATUS;\nmodule.link(\"../promotionLots/promotionLotConstants\", {\n  PROMOTION_LOT_STATUS(v) {\n    PROMOTION_LOT_STATUS = v;\n  }\n\n}, 1);\n\nconst getCurrentUserPermissionsForPromotion = (_ref) => {\n  let {\n    currentUser: {\n      promotions = []\n    } = {},\n    promotionId\n  } = _ref;\n  const promotion = promotions.find((_ref2) => {\n    let {\n      _id\n    } = _ref2;\n    return _id === promotionId;\n  });\n  return promotion && promotion.$metadata.permissions;\n};\n\nconst getPromotionCustomerOwnerType = (_ref3) => {\n  let {\n    invitedBy,\n    currentUser\n  } = _ref3;\n  const {\n    _id: userId,\n    organisations = []\n  } = currentUser; // Is invited by nobody\n\n  if (!invitedBy) {\n    return null;\n  } // Is invited by user\n\n\n  if (invitedBy === userId) {\n    return PROMOTION_INVITED_BY_TYPE.USER;\n  }\n\n  const organisationUserIds = organisations.reduce((userIds, _ref4) => {\n    let {\n      users = []\n    } = _ref4;\n    return [...userIds, ...users.map((_ref5) => {\n      let {\n        _id\n      } = _ref5;\n      return _id;\n    })];\n  }, []); // Is invited by organisation\n\n  if (organisationUserIds.includes(invitedBy)) {\n    return PROMOTION_INVITED_BY_TYPE.ORGANISATION;\n  } // Is invited by someone else\n\n\n  return PROMOTION_INVITED_BY_TYPE.ANY;\n};\n\nconst clientGetBestPromotionLotStatus = (promotionOptions, loanId) => {\n  const myPromotionLotStatuses = promotionOptions.reduce((arr, _ref6) => {\n    let {\n      promotionLots\n    } = _ref6;\n    return [...arr, ...promotionLots];\n  }, []).filter((_ref7) => {\n    let {\n      attributedToLink = {}\n    } = _ref7;\n    return attributedToLink._id === loanId;\n  }).map((_ref8) => {\n    let {\n      status\n    } = _ref8;\n    return status;\n  });\n\n  if (myPromotionLotStatuses.indexOf(PROMOTION_LOT_STATUS.SOLD) >= 0) {\n    return PROMOTION_LOT_STATUS.SOLD;\n  }\n\n  if (myPromotionLotStatuses.indexOf(PROMOTION_LOT_STATUS.BOOKED) >= 0) {\n    return PROMOTION_LOT_STATUS.BOOKED;\n  }\n\n  if (myPromotionLotStatuses.indexOf(PROMOTION_LOT_STATUS.AVAILABLE) >= 0) {\n    return PROMOTION_LOT_STATUS.AVAILABLE;\n  } // return undefined if no promotion lots are attributed to this user\n\n};\n\nconst shouldHideForLotStatus = (_ref9, promotionLotStatus, isAttributed) => {\n  let {\n    forLotStatus = []\n  } = _ref9;\n\n  if (promotionLotStatus === PROMOTION_LOT_STATUS.AVAILABLE && forLotStatus.includes(promotionLotStatus)) {\n    return false;\n  } // For status BOOKED and SOLD, we check that it is attributed\n\n\n  if (forLotStatus.includes(promotionLotStatus) && isAttributed) {\n    return false;\n  }\n\n  return true;\n};\n\nconst shouldAnonymize = (_ref10) => {\n  let {\n    customerOwnerType,\n    permissions,\n    promotionLotStatus = PROMOTION_LOT_STATUS.AVAILABLE,\n    isAttributed\n  } = _ref10;\n  const {\n    displayCustomerNames\n  } = permissions;\n\n  if (displayCustomerNames === false || !customerOwnerType) {\n    return true;\n  }\n\n  const shouldHide = shouldHideForLotStatus(displayCustomerNames, promotionLotStatus, isAttributed);\n\n  if (displayCustomerNames.invitedBy === PROMOTION_INVITED_BY_TYPE.ANY) {\n    return shouldHide;\n  }\n\n  switch (customerOwnerType) {\n    case PROMOTION_INVITED_BY_TYPE.USER:\n      return shouldHide || ![PROMOTION_INVITED_BY_TYPE.USER, PROMOTION_INVITED_BY_TYPE.ORGANISATION].includes(displayCustomerNames.invitedBy);\n\n    case PROMOTION_INVITED_BY_TYPE.ORGANISATION:\n      return shouldHide || displayCustomerNames.invitedBy !== PROMOTION_INVITED_BY_TYPE.ORGANISATION;\n\n    default:\n      return true;\n  }\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"promotionConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotions/promotionConstants.js                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  PROMOTIONS_COLLECTION: () => PROMOTIONS_COLLECTION,\n  PROMOTION_TYPES: () => PROMOTION_TYPES,\n  PROMOTION_STATUS: () => PROMOTION_STATUS,\n  PROMOTION_QUERIES: () => PROMOTION_QUERIES,\n  PROMOTION_INVITED_BY_TYPE: () => PROMOTION_INVITED_BY_TYPE,\n  PROMOTION_PERMISSIONS: () => PROMOTION_PERMISSIONS,\n  PROMOTION_PERMISSIONS_BUNDLES: () => PROMOTION_PERMISSIONS_BUNDLES,\n  PROMOTION_PERMISSIONS_FULL_ACCESS: () => PROMOTION_PERMISSIONS_FULL_ACCESS\n});\nlet merge;\nmodule.link(\"lodash/merge\", {\n  default(v) {\n    merge = v;\n  }\n\n}, 0);\nlet PROMOTION_LOT_STATUS;\nmodule.link(\"../promotionLots/promotionLotConstants\", {\n  PROMOTION_LOT_STATUS(v) {\n    PROMOTION_LOT_STATUS = v;\n  }\n\n}, 1);\nconst PROMOTIONS_COLLECTION = 'promotions';\nconst PROMOTION_TYPES = {\n  CREDIT: 'CREDIT',\n  SHARE: 'SHARE'\n};\nconst PROMOTION_STATUS = {\n  CANCELLED: 'CANCELLED',\n  FINISHED: 'FINISHED',\n  OPEN: 'OPEN',\n  PREPARATION: 'PREPARATION'\n};\nconst PROMOTION_QUERIES = {\n  ADMIN_PROMOTIONS: 'ADMIN_PROMOTIONS',\n  APP_PROMOTION: 'APP_PROMOTION',\n  PRO_PROMOTION: 'PRO_PROMOTION',\n  PRO_PROMOTIONS: 'PRO_PROMOTIONS',\n  PRO_PROMOTION_USERS: 'PRO_PROMOTION_USERS',\n  PROMOTION_FILES: 'PROMOTION_FILES',\n  PROMOTION_SEARCH: 'PROMOTION_SEARCH',\n  PRO_PROMOTION_SIMPLE: 'PRO_PROMOTION_SIMPLE'\n};\nconst PROMOTION_INVITED_BY_TYPE = {\n  ANY: 'ANY',\n  USER: 'USER',\n  ORGANISATION: 'ORGANISATION'\n};\nconst PROMOTION_PERMISSIONS = {\n  DISPLAY_CUSTOMER_NAMES: {\n    FOR_LOT_STATUS: (0, _objectSpread2.default)({}, PROMOTION_LOT_STATUS),\n    INVITED_BY: (0, _objectSpread2.default)({}, PROMOTION_INVITED_BY_TYPE)\n  }\n};\nconst PROMOTION_PERMISSIONS_BUNDLES = {\n  INVITATION: settings => ({\n    canInviteCustomers: true,\n    displayCustomerNames: {\n      forLotStatus: Object.values(PROMOTION_PERMISSIONS.DISPLAY_CUSTOMER_NAMES.FOR_LOT_STATUS),\n      invitedBy: PROMOTION_PERMISSIONS.DISPLAY_CUSTOMER_NAMES.INVITED_BY.ORGANISATION\n    }\n  }),\n  CONSULTATION: function () {\n    let {\n      consultation = {}\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      forLotStatus = [],\n      invitedBy = PROMOTION_PERMISSIONS.DISPLAY_CUSTOMER_NAMES.INVITED_BY.ANY\n    } = consultation;\n    return {\n      displayCustomerNames: {\n        forLotStatus,\n        invitedBy\n      }\n    };\n  },\n  MODIFICATION: settings => ({\n    canAddLots: true,\n    canModifyLots: true,\n    canRemoveLots: true,\n    canModifyPromotion: true,\n    canManageDocuments: true\n  }),\n  BOOKING: settings => ({\n    canBookLots: true\n  }),\n  SELLING: settings => ({\n    canSellLots: true\n  })\n};\n\nconst PROMOTION_PERMISSIONS_FULL_ACCESS = () => {\n  const settings = {\n    consultation: {\n      forLotStatus: Object.values(PROMOTION_PERMISSIONS.DISPLAY_CUSTOMER_NAMES.FOR_LOT_STATUS),\n      invitedBy: PROMOTION_PERMISSIONS.DISPLAY_CUSTOMER_NAMES.INVITED_BY.ANY\n    }\n  };\n  return Object.keys(PROMOTION_PERMISSIONS_BUNDLES).reduce((bundles, bundle) => merge({}, bundles, PROMOTION_PERMISSIONS_BUNDLES[bundle](settings)), {});\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"promotions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotions/promotions.js                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet PromotionSchema;\nmodule.link(\"./schemas/PromotionSchema\", {\n  default(v) {\n    PromotionSchema = v;\n  }\n\n}, 1);\nlet PROMOTIONS_COLLECTION;\nmodule.link(\"./promotionConstants\", {\n  PROMOTIONS_COLLECTION(v) {\n    PROMOTIONS_COLLECTION = v;\n  }\n\n}, 2);\nconst Promotions = new Mongo.Collection(PROMOTIONS_COLLECTION);\nPromotions.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true\n});\nPromotions.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false\n});\nPromotions.attachSchema(PromotionSchema);\nmodule.exportDefault(Promotions);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"queries.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotions/queries.js                                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  adminPromotions: () => adminPromotions,\n  appPromotion: () => appPromotion,\n  promotionSearch: () => promotionSearch,\n  proPromotions: () => proPromotions,\n  proPromotionUsers: () => proPromotionUsers\n});\nlet adminPromotionsFragment, proPromotion, searchPromotions;\nmodule.link(\"../fragments\", {\n  adminPromotions(v) {\n    adminPromotionsFragment = v;\n  },\n\n  proPromotion(v) {\n    proPromotion = v;\n  },\n\n  searchPromotions(v) {\n    searchPromotions = v;\n  }\n\n}, 0);\nlet PROMOTION_QUERIES;\nmodule.link(\"./promotionConstants\", {\n  PROMOTION_QUERIES(v) {\n    PROMOTION_QUERIES = v;\n  }\n\n}, 1);\nlet Promotions;\nmodule.link(\".\", {\n  default(v) {\n    Promotions = v;\n  }\n\n}, 2);\nconst adminPromotions = Promotions.createQuery(PROMOTION_QUERIES.ADMIN_PROMOTIONS, adminPromotionsFragment());\nconst appPromotion = Promotions.createQuery(PROMOTION_QUERIES.APP_PROMOTION, proPromotion({\n  withFilteredLoan: true\n}));\nconst promotionSearch = Promotions.createQuery(PROMOTION_QUERIES.PROMOTION_SEARCH, (0, _objectSpread2.default)({}, searchPromotions(), {\n  $options: {\n    sort: {\n      createdAt: -1\n    },\n    limit: 5\n  }\n}));\nconst proPromotions = Promotions.createQuery(PROMOTION_QUERIES.PRO_PROMOTIONS, proPromotion());\nconst proPromotionUsers = Promotions.createQuery(PROMOTION_QUERIES.PRO_PROMOTION_USERS, {\n  users: {\n    name: 1,\n    organisations: {\n      name: 1,\n      users: {\n        _id: 1\n      }\n    }\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"reducers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/promotions/reducers.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet PROMOTION_LOT_STATUS;\nmodule.link(\"../constants\", {\n  PROMOTION_LOT_STATUS(v) {\n    PROMOTION_LOT_STATUS = v;\n  }\n\n}, 0);\nlet addressReducer;\nmodule.link(\"../reducers/addressReducer\", {\n  default(v) {\n    addressReducer = v;\n  }\n\n}, 1);\nlet Promotions;\nmodule.link(\".\", {\n  default(v) {\n    Promotions = v;\n  }\n\n}, 2);\n\nconst promotionLotStatusReducer = status => ({\n  body: {\n    promotionLots: {\n      status: 1\n    }\n  },\n  reduce: (_ref) => {\n    let {\n      promotionLots = []\n    } = _ref;\n    return promotionLots.filter((_ref2) => {\n      let {\n        status: promotionLotStatus\n      } = _ref2;\n      return status === promotionLotStatus;\n    });\n  }\n});\n\nPromotions.addReducers((0, _objectSpread2.default)({}, addressReducer, {\n  soldPromotionLots: promotionLotStatusReducer(PROMOTION_LOT_STATUS.SOLD),\n  bookedPromotionLots: promotionLotStatusReducer(PROMOTION_LOT_STATUS.BOOKED),\n  availablePromotionLots: promotionLotStatusReducer(PROMOTION_LOT_STATUS.AVAILABLE)\n}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"properties\":{\"schemas\":{\"PropertySchema.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/properties/schemas/PropertySchema.js                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  propertyPermissionsSchema: () => propertyPermissionsSchema,\n  PropertySchema: () => PropertySchema,\n  userAllowedKeys: () => userAllowedKeys,\n  PropertySchemaAdmin: () => PropertySchemaAdmin\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 1);\nlet createdAt, updatedAt, additionalDocuments, address, mortgageNoteLinks, moneyField, userLinksSchema, documentsField, cacheField;\nmodule.link(\"../../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  },\n\n  additionalDocuments(v) {\n    additionalDocuments = v;\n  },\n\n  address(v) {\n    address = v;\n  },\n\n  mortgageNoteLinks(v) {\n    mortgageNoteLinks = v;\n  },\n\n  moneyField(v) {\n    moneyField = v;\n  },\n\n  userLinksSchema(v) {\n    userLinksSchema = v;\n  },\n\n  documentsField(v) {\n    documentsField = v;\n  },\n\n  cacheField(v) {\n    cacheField = v;\n  }\n\n}, 2);\nlet propertyConstants;\nmodule.link(\"../propertyConstants\", {\n  \"*\"(v) {\n    propertyConstants = v;\n  }\n\n}, 3);\nlet initialDocuments;\nmodule.link(\"../propertiesAdditionalDocuments\", {\n  initialDocuments(v) {\n    initialDocuments = v;\n  }\n\n}, 4);\nconst SCHEMA_BOOLEAN = {\n  type: Boolean,\n  optional: true,\n  defaultValue: false\n};\nconst propertyPermissionsSchema = {\n  canInviteCustomers: SCHEMA_BOOLEAN,\n  canInviteProUsers: SCHEMA_BOOLEAN,\n  canModifyProperty: SCHEMA_BOOLEAN,\n  canManagePermissions: SCHEMA_BOOLEAN,\n  canSellProperty: SCHEMA_BOOLEAN,\n  canBookProperty: SCHEMA_BOOLEAN,\n  displayCustomerNames: {\n    type: SimpleSchema.oneOf(Boolean, Object),\n    optional: true,\n\n    autoValue() {\n      if (Meteor.isServer && this.isSet) {\n        if (this.value === undefined) {\n          return false;\n        }\n\n        if (this.value instanceof Object) {\n          if (!Object.keys(this.value).length) {\n            return false;\n          }\n\n          if (!this.value.referredBy) {\n            return false;\n          }\n        }\n\n        return this.value;\n      }\n    }\n\n  },\n  'displayCustomerNames.referredBy': {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(propertyConstants.PROPERTY_PERMISSIONS.DISPLAY_CUSTOMER_NAMES.REFERRED_BY),\n    uniforms: {\n      displayEmpty: true,\n      placeholder: 'Ne pas afficher le nom des clients'\n    }\n  },\n  'displayCustomerNames.forPropertyStatus': {\n    type: Array,\n    optional: true,\n    defaultValue: [],\n    uniforms: {\n      displayEmpty: false,\n      placeholder: '',\n      checkboxes: true\n    },\n    condition: (_ref) => {\n      let {\n        permissions: {\n          displayCustomerNames = {}\n        }\n      } = _ref;\n      const {\n        referredBy\n      } = displayCustomerNames;\n      return !!referredBy;\n    }\n  },\n  'displayCustomerNames.forPropertyStatus.$': {\n    type: String,\n    allowedValues: Object.values(propertyConstants.PROPERTY_PERMISSIONS.DISPLAY_CUSTOMER_NAMES.FOR_PROPERTY_STATUS)\n  }\n};\nconst PropertySchema = new SimpleSchema((0, _objectSpread2.default)({\n  userId: {\n    type: String,\n    optional: true\n  },\n  createdAt,\n  updatedAt,\n  name: {\n    type: String,\n    optional: true,\n    uniforms: {\n      placeholder: null\n    }\n  },\n  description: {\n    type: String,\n    optional: true,\n    uniforms: {\n      placeholder: null,\n      multiline: true,\n      rows: 5,\n      rowsMax: 15\n    }\n  },\n  category: {\n    type: String,\n    optional: true,\n    defaultValue: propertyConstants.PROPERTY_CATEGORY.USER,\n    allowedValues: Object.values(propertyConstants.PROPERTY_CATEGORY),\n    uniforms: {\n      placeholder: null\n    }\n  },\n  value: moneyField,\n  status: {\n    type: String,\n    defaultValue: propertyConstants.PROPERTY_STATUS.FOR_SALE,\n    allowedValues: Object.values(propertyConstants.PROPERTY_STATUS),\n    uniforms: {\n      placeholder: null\n    }\n  },\n  propertyType: {\n    type: String,\n    optional: true,\n    defaultValue: propertyConstants.PROPERTY_TYPE.FLAT,\n    allowedValues: Object.values(propertyConstants.PROPERTY_TYPE),\n    uniforms: {\n      placeholder: null\n    }\n  },\n  houseType: {\n    type: String,\n    optional: true,\n    defaultValue: propertyConstants.HOUSE_TYPE.DETACHED,\n    allowedValues: Object.values(propertyConstants.HOUSE_TYPE),\n    uniforms: {\n      placeholder: null\n    },\n    condition: (_ref2) => {\n      let {\n        propertyType\n      } = _ref2;\n      return propertyType === propertyConstants.PROPERTY_TYPE.HOUSE;\n    }\n  },\n  flatType: {\n    type: String,\n    optional: true,\n    defaultValue: propertyConstants.FLAT_TYPE.SINGLE_FLOOR_APARTMENT,\n    allowedValues: Object.values(propertyConstants.FLAT_TYPE),\n    uniforms: {\n      placeholder: null\n    },\n    condition: (_ref3) => {\n      let {\n        propertyType\n      } = _ref3;\n      return propertyType === propertyConstants.PROPERTY_TYPE.FLAT;\n    }\n  },\n  investmentRent: {\n    // Rent of property if investment\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0,\n    max: 100000000\n  }\n}, address, {\n  constructionYear: {\n    type: SimpleSchema.Integer,\n    min: 0,\n    max: 2030,\n    optional: true\n  },\n  renovationYear: {\n    type: SimpleSchema.Integer,\n    min: 0,\n    max: 2030,\n    optional: true\n  },\n  insideArea: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0\n  },\n  areaNorm: {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(propertyConstants.AREA_NORM),\n    defaultValue: propertyConstants.AREA_NORM.NIA,\n    uniforms: {\n      placeholder: null\n    }\n  },\n  landArea: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0\n  },\n  terraceArea: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0\n  },\n  gardenArea: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0\n  },\n  numberOfFloors: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0,\n    max: 20\n  },\n  floorNumber: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0,\n    max: 20\n  },\n  roomCount: {\n    type: Number,\n    optional: true,\n    min: 0,\n    max: 100\n  },\n  bathroomCount: {\n    type: Number,\n    optional: true,\n    min: 0,\n    max: 100\n  },\n  volume: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0,\n    max: 100000\n  },\n  volumeNorm: {\n    type: String,\n    defaultValue: propertyConstants.VOLUME_NORM.SIA_416,\n    allowedValues: Object.values(propertyConstants.VOLUME_NORM),\n    uniforms: {\n      placeholder: null\n    }\n  },\n  parkingInside: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0,\n    max: 100\n  },\n  parkingOutside: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0,\n    max: 100\n  },\n  minergie: {\n    type: String,\n    defaultValue: propertyConstants.MINERGIE_CERTIFICATE.WITHOUT_CERTIFICATE,\n    allowedValues: Object.values(propertyConstants.MINERGIE_CERTIFICATE),\n    uniforms: {\n      placeholder: null\n    }\n  },\n  isCoproperty: {\n    type: Boolean,\n    defaultValue: false\n  },\n  copropertyPercentage: {\n    type: SimpleSchema.Integer,\n    min: 0,\n    max: 1000,\n    optional: true\n  },\n  isNew: {\n    type: Boolean,\n    defaultValue: false\n  },\n  latitude: {\n    type: Number,\n    optional: true,\n    min: -90,\n    max: 90\n  },\n  longitude: {\n    type: Number,\n    optional: true,\n    min: -180,\n    max: 180\n  },\n  adminValidation: {\n    type: Object,\n    defaultValue: {},\n    blackbox: true\n  },\n  yearlyExpenses: moneyField,\n  landValue: moneyField,\n  constructionValue: moneyField,\n  additionalMargin: moneyField\n}, additionalDocuments(initialDocuments), mortgageNoteLinks, userLinksSchema(propertyPermissionsSchema), {\n  externalId: {\n    type: String,\n    optional: true\n  },\n  useOpenGraph: {\n    type: Boolean,\n    optional: true,\n    condition: (_ref4) => {\n      let {\n        externalUrl\n      } = _ref4;\n      return externalUrl;\n    }\n  },\n  externalUrl: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Url,\n    optional: true\n  },\n  imageUrls: {\n    type: Array,\n    optional: true,\n    defaultValue: []\n  },\n  'imageUrls.$': {\n    type: String,\n    regEx: SimpleSchema.RegEx.Url\n  },\n  documents: documentsField,\n  loanCount: {\n    type: Number,\n    optional: true\n  }\n}));\nconst protectedKeys = ['_id', 'additionalDocuments', 'address', 'adminValidation', 'createdAt', 'latitude', 'longitude', 'mortgageNoteLinks', 'updatedAt', 'userId', 'documents', 'userLinks'];\nconst userAllowedKeys = ['externalId', 'address1', 'address2', 'zipCode', 'city', 'value', 'description', 'propertyType', 'flatType', 'houseType', 'roomCount', 'insideArea', 'landArea', 'terraceArea', 'gardenArea', 'constructionYear', 'externalUrl', 'useOpenGraph', 'imageUrls'];\nconst PropertySchemaAdmin = PropertySchema.omit(...protectedKeys);\nmodule.exportDefault(PropertySchema);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/properties/index.js                                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  propertyMethods: () => propertyMethods\n});\nlet methodDefinitions;\nmodule.link(\"./methodDefinitions\", {\n  \"*\"(v) {\n    methodDefinitions = v;\n  }\n\n}, 0);\nmodule.link(\"./methodDefinitions\", {\n  \"*\": \"*\"\n}, 1);\nmodule.link(\"./properties\", {\n  default: \"default\"\n}, 2);\nconst propertyMethods = methodDefinitions;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"links.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/properties/links.js                                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Properties;\nmodule.link(\"./properties\", {\n  default(v) {\n    Properties = v;\n  }\n\n}, 0);\nlet Users, Loans, Promotions, PromotionLots, MortgageNotes;\nmodule.link(\"..\", {\n  Users(v) {\n    Users = v;\n  },\n\n  Loans(v) {\n    Loans = v;\n  },\n\n  Promotions(v) {\n    Promotions = v;\n  },\n\n  PromotionLots(v) {\n    PromotionLots = v;\n  },\n\n  MortgageNotes(v) {\n    MortgageNotes = v;\n  }\n\n}, 1);\nProperties.addLinks({\n  user: {\n    field: 'userId',\n    collection: Users,\n    type: 'one'\n  },\n  loans: {\n    collection: Loans,\n    inversedBy: 'properties'\n  },\n  promotion: {\n    collection: Promotions,\n    inversedBy: 'properties',\n    unique: true\n  },\n  promotionLots: {\n    collection: PromotionLots,\n    inversedBy: 'properties'\n  },\n  mortgageNotes: {\n    field: 'mortgageNoteLinks',\n    collection: MortgageNotes,\n    type: 'many',\n    metadata: true,\n    autoremove: true,\n    unique: true\n  },\n  users: {\n    field: 'userLinks',\n    collection: Users,\n    type: 'many',\n    metadata: true\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/properties/methodDefinitions.js                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  propertyInsert: () => propertyInsert,\n  propertyUpdate: () => propertyUpdate,\n  propertyDelete: () => propertyDelete,\n  pushPropertyValue: () => pushPropertyValue,\n  popPropertyValue: () => popPropertyValue,\n  pullPropertyValue: () => pullPropertyValue,\n  evaluateProperty: () => evaluateProperty,\n  propertyDataIsInvalid: () => propertyDataIsInvalid,\n  addProUserToProperty: () => addProUserToProperty,\n  proPropertyInsert: () => proPropertyInsert,\n  setProPropertyPermissions: () => setProPropertyPermissions,\n  removeProFromProperty: () => removeProFromProperty,\n  removeCustomerFromProperty: () => removeCustomerFromProperty,\n  insertExternalProperty: () => insertExternalProperty\n});\nlet Match;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  }\n\n}, 0);\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 1);\nconst propertyInsert = new Method({\n  name: 'propertyInsert',\n  params: {\n    property: Object,\n    userId: Match.Optional(String),\n    loanId: Match.Optional(String)\n  }\n});\nconst propertyUpdate = new Method({\n  name: 'propertyUpdate',\n  params: {\n    propertyId: String,\n    object: Object\n  }\n});\nconst propertyDelete = new Method({\n  name: 'propertyDelete',\n  params: {\n    propertyId: String,\n    loanId: Match.Maybe(String)\n  }\n});\nconst pushPropertyValue = new Method({\n  name: 'pushPropertyValue',\n  params: {\n    propertyId: String,\n    object: Object\n  }\n});\nconst popPropertyValue = new Method({\n  name: 'popPropertyValue',\n  params: {\n    propertyId: String,\n    object: Object\n  }\n});\nconst pullPropertyValue = new Method({\n  name: 'pullPropertyValue',\n  params: {\n    propertyId: String,\n    object: Object\n  }\n});\nconst evaluateProperty = new Method({\n  name: 'evaluateProperty',\n  params: {\n    propertyId: String,\n    loanResidenceType: String\n  }\n});\nconst propertyDataIsInvalid = new Method({\n  name: 'propertyDataIsInvalid',\n  params: {\n    propertyId: String,\n    loanResidenceType: Match.Optional(String)\n  }\n});\nconst addProUserToProperty = new Method({\n  name: 'addProUserToProperty',\n  params: {\n    propertyId: String,\n    userId: String\n  }\n});\nconst proPropertyInsert = new Method({\n  name: 'proPropertyInsert',\n  params: {\n    userId: String,\n    property: Object\n  }\n});\nconst setProPropertyPermissions = new Method({\n  name: 'setProPropertyPermissions',\n  params: {\n    propertyId: String,\n    userId: String,\n    permissions: Object\n  }\n});\nconst removeProFromProperty = new Method({\n  name: 'removeProFromProperty',\n  params: {\n    propertyId: String,\n    proUserId: String\n  }\n});\nconst removeCustomerFromProperty = new Method({\n  name: 'removeCustomerFromProperty',\n  params: {\n    propertyId: String,\n    loanId: String\n  }\n});\nconst insertExternalProperty = new Method({\n  name: 'insertExternalProperty',\n  params: {\n    property: Object\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"properties.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/properties/properties.js                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet propertyConstants;\nmodule.link(\"./propertyConstants\", {\n  \"*\"(v) {\n    propertyConstants = v;\n  }\n\n}, 1);\nlet PropertySchema;\nmodule.link(\"./schemas/PropertySchema\", {\n  default(v) {\n    PropertySchema = v;\n  }\n\n}, 2);\nconst Properties = new Mongo.Collection(propertyConstants.PROPERTIES_COLLECTION); // Prevent all client side modifications of mongoDB\n\nProperties.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true\n});\nProperties.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false\n}); // Attach schema\n\nProperties.attachSchema(PropertySchema);\nmodule.exportDefault(Properties);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"propertiesAdditionalDocuments.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/properties/propertiesAdditionalDocuments.js                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  initialDocuments: () => initialDocuments,\n  conditionalDocuments: () => conditionalDocuments\n});\nlet DOCUMENTS;\nmodule.link(\"../files/fileConstants\", {\n  DOCUMENTS(v) {\n    DOCUMENTS = v;\n  }\n\n}, 0);\nlet propertyConstants;\nmodule.link(\"./propertyConstants\", {\n  \"*\"(v) {\n    propertyConstants = v;\n  }\n\n}, 1);\nlet RESIDENCE_TYPE;\nmodule.link(\"../constants\", {\n  RESIDENCE_TYPE(v) {\n    RESIDENCE_TYPE = v;\n  }\n\n}, 2);\nlet Loans;\nmodule.link(\"../loans\", {\n  default(v) {\n    Loans = v;\n  }\n\n}, 3);\nconst initialDocuments = [{\n  id: DOCUMENTS.PURCHASE_CONTRACT\n}, {\n  id: DOCUMENTS.LAND_REGISTER_EXTRACT\n}, {\n  id: DOCUMENTS.PROPERTY_MARKETING_BROCHURE\n}, {\n  id: DOCUMENTS.PROPERTY_PICTURES\n}, {\n  id: DOCUMENTS.PROPERTY_PLANS\n}, {\n  id: DOCUMENTS.FIRE_AND_WATER_INSURANCE\n}];\n\nconst getLoanResidenceType = propertyId => {\n  // If a property is shared among multiple loans, this may work in unexpected ways,\n  // since each of those properties could have a different residenceType\n  const loan = Loans.findOne({\n    propertyIds: propertyId\n  }, {\n    fields: {\n      residenceType: 1\n    },\n    sort: {\n      createdAt: 1\n    }\n  });\n  return loan && loan.residenceType;\n};\n\nconst conditionalDocuments = [{\n  id: DOCUMENTS.PROPERTY_VOLUME,\n  condition: (_ref) => {\n    let {\n      doc: {\n        propertyType\n      }\n    } = _ref;\n    return propertyType === propertyConstants.PROPERTY_TYPE.HOUSE;\n  }\n}, {\n  id: DOCUMENTS.PROPERTY_MINERGIE_CERTIFICATE,\n  condition: (_ref2) => {\n    let {\n      doc: {\n        minergie\n      }\n    } = _ref2;\n    return minergie !== propertyConstants.MINERGIE_CERTIFICATE.WITHOUT_CERTIFICATE;\n  }\n}, {\n  id: DOCUMENTS.COOWNERSHIP_AGREEMENT,\n  condition: (_ref3) => {\n    let {\n      doc: {\n        isCoproperty\n      }\n    } = _ref3;\n    return isCoproperty === true;\n  }\n}, {\n  id: DOCUMENTS.COOWNERSHIP_ALLOCATION_AGREEMENT,\n  condition: (_ref4) => {\n    let {\n      doc: {\n        isCoproperty\n      }\n    } = _ref4;\n    return isCoproperty === true;\n  }\n}, {\n  id: DOCUMENTS.INVESTEMENT_PROPERTY_RENTAL_STATEMENT,\n  condition: (_ref5) => {\n    let {\n      doc: {\n        _id: propertyId\n      }\n    } = _ref5;\n    return getLoanResidenceType(propertyId) === RESIDENCE_TYPE.INVESTMENT;\n  }\n}, {\n  id: DOCUMENTS.INVESTEMENT_PROPERTY_SERVICE_CHARGE_SETTLEMENT,\n  condition: (_ref6) => {\n    let {\n      doc: {\n        _id: propertyId\n      }\n    } = _ref6;\n    return getLoanResidenceType(propertyId) === RESIDENCE_TYPE.INVESTMENT;\n  }\n}];\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"propertyConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/properties/propertyConstants.js                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  PROPERTIES_COLLECTION: () => PROPERTIES_COLLECTION,\n  PROPERTY_STATUS: () => PROPERTY_STATUS,\n  RESIDENCE_TYPE: () => RESIDENCE_TYPE,\n  PROPERTY_TYPE: () => PROPERTY_TYPE,\n  VOLUME_NORM: () => VOLUME_NORM,\n  AREA_NORM: () => AREA_NORM,\n  PROPERTY_QUERIES: () => PROPERTY_QUERIES,\n  HOUSE_TYPE: () => HOUSE_TYPE,\n  FLAT_TYPE: () => FLAT_TYPE,\n  MINERGIE_CERTIFICATE: () => MINERGIE_CERTIFICATE,\n  PROPERTY_CATEGORY: () => PROPERTY_CATEGORY,\n  PROPERTY_REFERRED_BY_TYPE: () => PROPERTY_REFERRED_BY_TYPE,\n  PROPERTY_PERMISSIONS: () => PROPERTY_PERMISSIONS,\n  PROPERTY_PERMISSIONS_FULL_ACCESS: () => PROPERTY_PERMISSIONS_FULL_ACCESS,\n  PROPERTY_SOLVENCY: () => PROPERTY_SOLVENCY\n});\nconst PROPERTIES_COLLECTION = 'properties';\nconst PROPERTY_STATUS = {\n  FOR_SALE: 'FOR_SALE',\n  BOOKED: 'BOOKED',\n  SOLD: 'SOLD'\n};\nconst RESIDENCE_TYPE = {\n  MAIN_RESIDENCE: 'MAIN_RESIDENCE',\n  SECOND_RESIDENCE: 'SECOND_RESIDENCE',\n  INVESTMENT: 'INVESTMENT',\n  COMMERCE: 'COMMERCE'\n};\nconst PROPERTY_TYPE = {\n  FLAT: 'FLAT',\n  HOUSE: 'HOUSE'\n};\nconst VOLUME_NORM = {\n  SIA_416: 'SIA_416',\n  SIA_116: 'SIA_116',\n  BIC: 'BIC'\n};\nconst AREA_NORM = {\n  NIA: 'NIA',\n  NLS: 'NLS'\n};\nconst PROPERTY_QUERIES = {\n  ADMIN_PROPERTIES: 'ADMIN_PROPERTIES',\n  ANONYMOUS_PROPERTY: 'ANONYMOUS_PROPERTY',\n  PRO_PROPERTIES: 'PRO_PROPERTIES',\n  PRO_PROPERTY_USERS: 'PRO_PROPERTY_USERS',\n  PROPERTY_FILES: 'PROPERTY_FILES',\n  PROPERTY_SEARCH: 'PROPERTY_SEARCH',\n  USER_PROPERTY: 'USER_PROPERTY'\n};\nconst HOUSE_TYPE = {\n  DETACHED: 'DETACHED',\n  ATTACHED_END_BUILDING: 'ATTACHED_END_BUILDING',\n  ATTACHED_MID_TERRACE_BUILDING: 'ATTACHED_MID_TERRACE_BUILDING'\n};\nconst FLAT_TYPE = {\n  SINGLE_FLOOR_APARTMENT: 'SINGLE_FLOOR_APARTMENT',\n  DUPLEX_APARTMENT: 'DUPLEX_APARTMENT',\n  PENTHOUSE_APARTMENT: 'PENTHOUSE_APARTMENT',\n  PENTHOUSE_MAISONETTE: 'PENTHOUSE_MAISONETTE',\n  TERRACE_APARTMENT: 'TERRACE_APARTMENT'\n};\nconst MINERGIE_CERTIFICATE = {\n  WITHOUT_CERTIFICATE: 'WITHOUT_CERTIFICATE',\n  MINERGIE_P: 'MINERGIE_P',\n  MINERGIE_ECO: 'MINERGIE_ECO',\n  MINERGIE_P_ECO: 'MINERGIE_P_ECO',\n  OTHER_CERTIFICATE: 'OTHER_CERTIFICATE'\n};\nconst PROPERTY_CATEGORY = {\n  USER: 'USER',\n  PRO: 'PRO',\n  PROMOTION: 'PROMOTION'\n};\nconst PROPERTY_REFERRED_BY_TYPE = {\n  ANY: 'ANY',\n  USER: 'USER',\n  ORGANISATION: 'ORGANISATION'\n};\nconst PROPERTY_PERMISSIONS = {\n  DISPLAY_CUSTOMER_NAMES: {\n    FOR_PROPERTY_STATUS: PROPERTY_STATUS,\n    REFERRED_BY: PROPERTY_REFERRED_BY_TYPE\n  }\n};\nconst PROPERTY_PERMISSIONS_FULL_ACCESS = {\n  canInviteCustomers: true,\n  canInviteProUsers: true,\n  canModifyProperty: true,\n  canManagePermissions: true,\n  canSellProperty: true,\n  canBookProperty: true,\n  displayCustomerNames: {\n    forPropertyStatus: Object.values(PROPERTY_STATUS),\n    referredBy: PROPERTY_REFERRED_BY_TYPE.ANY\n  }\n};\nconst PROPERTY_SOLVENCY = {\n  UNDETERMINED: 'UNDETERMINED',\n  NOT_SHARED: 'NOT_SHARED',\n  SOLVENT: 'SOLVENT',\n  INSOLVENT: 'INSOLVENT'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"queries.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/properties/queries.js                                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  adminProperties: () => adminProperties,\n  anonymousProperty: () => anonymousProperty,\n  propertySearch: () => propertySearch,\n  proProperties: () => proProperties,\n  proPropertyUsers: () => proPropertyUsers,\n  userProperty: () => userProperty\n});\nlet Properties;\nmodule.link(\".\", {\n  default(v) {\n    Properties = v;\n  }\n\n}, 0);\nlet PROPERTY_QUERIES;\nmodule.link(\"./propertyConstants\", {\n  PROPERTY_QUERIES(v) {\n    PROPERTY_QUERIES = v;\n  }\n\n}, 1);\nlet adminProperty, userPropertyFragment, proProperty, proUser;\nmodule.link(\"../fragments\", {\n  adminProperty(v) {\n    adminProperty = v;\n  },\n\n  userProperty(v) {\n    userPropertyFragment = v;\n  },\n\n  proProperty(v) {\n    proProperty = v;\n  },\n\n  proUser(v) {\n    proUser = v;\n  }\n\n}, 2);\nconst adminProperties = Properties.createQuery(PROPERTY_QUERIES.ADMIN_PROPERTIES, adminProperty());\nconst anonymousProperty = Properties.createQuery(PROPERTY_QUERIES.ANONYMOUS_PROPERTY, (0, _objectSpread2.default)({}, userPropertyFragment(), {\n  // Ask these for non-reactive queries, like ProPropertyPage\n  documents: 1,\n  openGraphData: 1\n}));\nconst propertySearch = Properties.createQuery(PROPERTY_QUERIES.PROPERTY_SEARCH, {\n  address1: 1,\n  address2: 1,\n  city: 1,\n  zipCode: 1,\n  totalValue: 1,\n  status: 1,\n  style: 1,\n  insideArea: 1,\n  $options: {\n    limit: 5\n  }\n});\nconst proProperties = Properties.createQuery(PROPERTY_QUERIES.PRO_PROPERTIES, proProperty());\nconst proPropertyUsers = Properties.createQuery(PROPERTY_QUERIES.PRO_PROPERTY_USERS, {\n  users: proUser()\n});\nconst userProperty = Properties.createQuery(PROPERTY_QUERIES.USER_PROPERTY, (0, _objectSpread2.default)({\n  $filter(_ref) {\n    let {\n      filters,\n      params: {\n        propertyId\n      }\n    } = _ref;\n    filters._id = propertyId;\n  }\n\n}, userPropertyFragment(), {\n  // Ask these for non-reactive queries, like ProPropertyPage\n  openGraphData: 1,\n  documents: 1\n}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"reducers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/properties/reducers.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet addressReducer;\nmodule.link(\"../reducers/addressReducer\", {\n  default(v) {\n    addressReducer = v;\n  }\n\n}, 0);\nlet Properties;\nmodule.link(\".\", {\n  default(v) {\n    Properties = v;\n  }\n\n}, 1);\nlet PROPERTY_DOCUMENTS;\nmodule.link(\"../files/fileConstants\", {\n  PROPERTY_DOCUMENTS(v) {\n    PROPERTY_DOCUMENTS = v;\n  }\n\n}, 2);\nProperties.addReducers((0, _objectSpread2.default)({}, addressReducer, {\n  thumbnail: {\n    body: {\n      documents: {\n        [PROPERTY_DOCUMENTS.PROPERTY_PICTURES]: {\n          url: 1\n        }\n      },\n      imageUrls: 1\n    },\n    reduce: (_ref) => {\n      let {\n        documents = {},\n        imageUrls = []\n      } = _ref;\n\n      if (imageUrls.length > 0) {\n        return imageUrls[0];\n      }\n\n      if (documents && documents[PROPERTY_DOCUMENTS.PROPERTY_PICTURES] && documents[PROPERTY_DOCUMENTS.PROPERTY_PICTURES].length) {\n        return documents[PROPERTY_DOCUMENTS.PROPERTY_PICTURES][0].url;\n      }\n    }\n  },\n  totalValue: {\n    body: {\n      value: 1,\n      landValue: 1,\n      constructionValue: 1,\n      additionalMargin: 1\n    },\n    reduce: (_ref2) => {\n      let {\n        value = 0,\n        landValue = 0,\n        constructionValue = 0,\n        additionalMargin = 0\n      } = _ref2;\n      return value || landValue + constructionValue + additionalMargin;\n    }\n  },\n  valuePerSquareMeterInside: {\n    body: {\n      totalValue: 1,\n      insideArea: 1\n    },\n    reduce: (_ref3) => {\n      let {\n        totalValue = 0,\n        insideArea = 0\n      } = _ref3;\n      return insideArea === 0 ? 0 : totalValue / insideArea;\n    }\n  },\n  valuePerSquareMeterLand: {\n    body: {\n      totalValue: 1,\n      landArea: 1\n    },\n    reduce: (_ref4) => {\n      let {\n        totalValue = 0,\n        landArea = 0\n      } = _ref4;\n      return landArea === 0 ? 0 : totalValue / landArea;\n    }\n  },\n  organisation: {\n    body: {\n      users: {\n        organisations: {\n          name: 1\n        }\n      }\n    },\n    reduce: (_ref5) => {\n      let {\n        users = []\n      } = _ref5;\n\n      if (users.length === 0) {\n        return undefined;\n      }\n\n      let org;\n      const hasOrg = users.every((_ref6) => {\n        let {\n          organisations = []\n        } = _ref6;\n\n        if (organisations.length !== 1) {\n          return false;\n        }\n\n        if (!org) {\n          org = organisations[0];\n          return true;\n        }\n\n        return organisations[0]._id === org._id;\n      });\n      return hasOrg ? org : null;\n    }\n  }\n}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"revenues\":{\"schemas\":{\"revenueSchema.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/revenues/schemas/revenueSchema.js                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\nlet CUSTOM_AUTOFIELD_TYPES;\nmodule.link(\"../../../components/AutoForm2/constants\", {\n  CUSTOM_AUTOFIELD_TYPES(v) {\n    CUSTOM_AUTOFIELD_TYPES = v;\n  }\n\n}, 1);\nlet createdAt, updatedAt, percentageField, decimalMoneyField, cacheField;\nmodule.link(\"../../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  },\n\n  percentageField(v) {\n    percentageField = v;\n  },\n\n  decimalMoneyField(v) {\n    decimalMoneyField = v;\n  },\n\n  cacheField(v) {\n    cacheField = v;\n  }\n\n}, 2);\nlet REVENUE_TYPES, REVENUE_STATUS, COMMISSION_STATUS, REVENUE_SECONDARY_TYPES;\nmodule.link(\"../revenueConstants\", {\n  REVENUE_TYPES(v) {\n    REVENUE_TYPES = v;\n  },\n\n  REVENUE_STATUS(v) {\n    REVENUE_STATUS = v;\n  },\n\n  COMMISSION_STATUS(v) {\n    COMMISSION_STATUS = v;\n  },\n\n  REVENUE_SECONDARY_TYPES(v) {\n    REVENUE_SECONDARY_TYPES = v;\n  }\n\n}, 3);\nconst RevenueSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  amount: (0, _objectSpread2.default)({}, decimalMoneyField, {\n    optional: false\n  }),\n  description: {\n    type: String,\n    optional: true\n  },\n  type: {\n    type: String,\n    allowedValues: Object.values(REVENUE_TYPES),\n    uniforms: {\n      displayEmpty: false,\n      placeholder: ''\n    }\n  },\n  secondaryType: {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(REVENUE_SECONDARY_TYPES),\n    uniforms: {\n      displayEmpty: false,\n      placeholder: ''\n    },\n    condition: (_ref) => {\n      let {\n        type\n      } = _ref;\n      return type === REVENUE_TYPES.INSURANCE;\n    }\n  },\n  status: {\n    type: String,\n    allowedValues: Object.values(REVENUE_STATUS),\n    uniforms: {\n      displayEmpty: false,\n      placeholder: ''\n    },\n    defaultValue: REVENUE_STATUS.EXPECTED\n  },\n  expectedAt: {\n    type: Date,\n    optional: true,\n    uniforms: {\n      type: CUSTOM_AUTOFIELD_TYPES.DATE\n    }\n  },\n  paidAt: {\n    type: Date,\n    optional: true,\n    uniforms: {\n      type: CUSTOM_AUTOFIELD_TYPES.DATE\n    }\n  },\n  organisationLinks: {\n    type: Array,\n    defaultValue: []\n  },\n  'organisationLinks.$': Object,\n  'organisationLinks.$._id': String,\n  'organisationLinks.$.commissionRate': (0, _objectSpread2.default)({}, percentageField, {\n    optional: false\n  }),\n  'organisationLinks.$.paidAt': {\n    type: Date,\n    optional: true,\n    uniforms: {\n      type: CUSTOM_AUTOFIELD_TYPES.DATE\n    }\n  },\n  'organisationLinks.$.status': {\n    type: String,\n    allowedValues: Object.values(COMMISSION_STATUS),\n    defaultValue: COMMISSION_STATUS.TO_BE_PAID\n  },\n  sourceOrganisationLink: {\n    type: Object,\n    defaultValue: {},\n    optional: true\n  },\n  'sourceOrganisationLink._id': {\n    type: String,\n    optional: true\n  },\n  // This should be an object, since there's only one loan\n  // https://github.com/Herteby/denormalize/issues/17\n  loanCache: {\n    type: Array,\n    optional: true\n  },\n  'loanCache.$': cacheField\n});\nmodule.exportDefault(RevenueSchema);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/revenues/index.js                                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./methodDefinitions\", {\n  \"*\": \"*\"\n}, 0);\nmodule.link(\"./revenues\", {\n  default: \"default\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"links.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/revenues/links.js                                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet LinkInitializer;\nmodule.link(\"../links/LinkInitializer\", {\n  default(v) {\n    LinkInitializer = v;\n  }\n\n}, 0);\nlet Revenues;\nmodule.link(\".\", {\n  default(v) {\n    Revenues = v;\n  }\n\n}, 1);\nlet Loans, Organisations;\nmodule.link(\"..\", {\n  Loans(v) {\n    Loans = v;\n  },\n\n  Organisations(v) {\n    Organisations = v;\n  }\n\n}, 2);\nRevenues.addLinks({\n  organisations: {\n    collection: Organisations,\n    field: 'organisationLinks',\n    type: 'many',\n    metadata: true\n  },\n  sourceOrganisation: {\n    collection: Organisations,\n    field: 'sourceOrganisationLink',\n    type: 'one',\n    metadata: true\n  }\n});\nLinkInitializer.inversedInit(() => {\n  Revenues.addLinks({\n    loan: {\n      collection: Loans,\n      inversedBy: 'revenues',\n      denormalize: {\n        field: 'loanCache',\n        body: {\n          _id: 1,\n          name: 1\n        }\n      }\n    }\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/revenues/methodDefinitions.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  revenueInsert: () => revenueInsert,\n  revenueRemove: () => revenueRemove,\n  revenueUpdate: () => revenueUpdate,\n  consolidateRevenue: () => consolidateRevenue,\n  consolidateCommission: () => consolidateCommission\n});\nlet Match;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  }\n\n}, 0);\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 1);\nconst revenueInsert = new Method({\n  name: 'revenueInsert',\n  params: {\n    revenue: Object,\n    loanId: Match.Maybe(String)\n  }\n});\nconst revenueRemove = new Method({\n  name: 'revenueRemove',\n  params: {\n    revenueId: String\n  }\n});\nconst revenueUpdate = new Method({\n  name: 'revenueUpdate',\n  params: {\n    revenueId: String,\n    object: Object\n  }\n});\nconst consolidateRevenue = new Method({\n  name: 'consolidateRevenue',\n  params: {\n    revenueId: String,\n    amount: Number,\n    paidAt: String\n  }\n});\nconst consolidateCommission = new Method({\n  name: 'consolidateCommission',\n  params: {\n    revenueId: String,\n    organisationId: String,\n    paidAt: String,\n    commissionRate: Number\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"revenueConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/revenues/revenueConstants.js                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  REVENUES_COLLECTION: () => REVENUES_COLLECTION,\n  REVENUE_QUERIES: () => REVENUE_QUERIES,\n  REVENUE_TYPES: () => REVENUE_TYPES,\n  REVENUE_SECONDARY_TYPES: () => REVENUE_SECONDARY_TYPES,\n  REVENUE_STATUS: () => REVENUE_STATUS,\n  COMMISSION_STATUS: () => COMMISSION_STATUS\n});\nconst REVENUES_COLLECTION = 'revenues';\nconst REVENUE_QUERIES = {\n  ADMIN_REVENUES: 'ADMIN_REVENUES'\n};\nconst REVENUE_TYPES = {\n  INSURANCE: 'INSURANCE',\n  MORTGAGE: 'MORTGAGE',\n  FEE: 'FEE',\n  OTHER: 'OTHER'\n};\nconst REVENUE_TYPES_INSURANCE = {\n  DEATH_3A: 'DEATH_3A',\n  DEATH_3B: 'DEATH_3B',\n  INCOME_PROTECTION_3A: 'INCOME_PROTECTION_3A',\n  INCOME_PROTECTION_3B: 'INCOME_PROTECTION_3B',\n  LIFE_3A: 'LIFE_3A',\n  LIFE_3B: 'LIFE_3B'\n};\nconst REVENUE_SECONDARY_TYPES = (0, _objectSpread2.default)({}, REVENUE_TYPES_INSURANCE);\nconst REVENUE_STATUS = {\n  EXPECTED: 'EXPECTED',\n  CLOSED: 'CLOSED'\n};\nconst COMMISSION_STATUS = {\n  PAID: 'PAID',\n  TO_BE_PAID: 'TO_BE_PAID'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"revenues.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/revenues/revenues.js                                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet RevenueSchema;\nmodule.link(\"./schemas/revenueSchema\", {\n  default(v) {\n    RevenueSchema = v;\n  }\n\n}, 1);\nlet REVENUES_COLLECTION;\nmodule.link(\"./revenueConstants\", {\n  REVENUES_COLLECTION(v) {\n    REVENUES_COLLECTION = v;\n  }\n\n}, 2);\nconst Revenues = new Mongo.Collection(REVENUES_COLLECTION);\nRevenues.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true\n});\nRevenues.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false\n});\nRevenues.attachSchema(RevenueSchema);\nmodule.exportDefault(Revenues);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"activities\":{\"activities.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/activities/activities.js                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 1);\nlet createdAt, updatedAt;\nmodule.link(\"../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  }\n\n}, 2);\nlet ACTIVITY_TYPES, ACTIVITY_SECONDARY_TYPES, ACTIVITIES_COLLECTION;\nmodule.link(\"./activityConstants\", {\n  ACTIVITY_TYPES(v) {\n    ACTIVITY_TYPES = v;\n  },\n\n  ACTIVITY_SECONDARY_TYPES(v) {\n    ACTIVITY_SECONDARY_TYPES = v;\n  },\n\n  ACTIVITIES_COLLECTION(v) {\n    ACTIVITIES_COLLECTION = v;\n  }\n\n}, 3);\nconst Activities = new Mongo.Collection(ACTIVITIES_COLLECTION);\nconst ActivitySchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  createdBy: {\n    type: String,\n    optional: true,\n\n    autoValue() {\n      if (this.isInsert) {\n        return this.value || this.userId;\n      }\n\n      this.unset();\n    }\n\n  },\n  title: String,\n  description: {\n    type: String,\n    optional: true\n  },\n  type: {\n    type: String,\n    allowedValues: Object.values(ACTIVITY_TYPES)\n  },\n  secondaryType: {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(ACTIVITY_SECONDARY_TYPES)\n  },\n  date: {\n    type: Date,\n\n    autoValue() {\n      if (this.isInsert) {\n        return this.value || new Date();\n      }\n    }\n\n  },\n  loanLink: {\n    type: Object,\n    optional: true\n  },\n  'loanLink._id': {\n    type: String,\n    optional: true\n  },\n  shouldNotify: {\n    type: Boolean,\n    optional: true\n  }\n});\nActivities.attachSchema(ActivitySchema);\nmodule.exportDefault(Activities);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"activityConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/activities/activityConstants.js                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  ACTIVITIES_COLLECTION: () => ACTIVITIES_COLLECTION,\n  ACTIVITY_QUERIES: () => ACTIVITY_QUERIES,\n  ACTIVITY_TYPES: () => ACTIVITY_TYPES,\n  ACTIVITY_SECONDARY_TYPES: () => ACTIVITY_SECONDARY_TYPES\n});\nconst ACTIVITIES_COLLECTION = 'activities';\nconst ACTIVITY_QUERIES = {\n  ADMIN_ACTIVITIES: 'ADMIN_ACTIVITIES'\n};\nconst ACTIVITY_TYPES = {\n  EMAIL: 'EMAIL',\n  EVENT: 'EVENT',\n  PHONE: 'PHONE',\n  SERVER: 'SERVER',\n  OTHER: 'OTHER'\n};\nconst ACTIVITY_SECONDARY_TYPES = {\n  CREATED: 'CREATED',\n  REMOVE_LOAN_FROM_PROMOTION: 'REMOVE_LOAN_FROM_PROMOTION'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/activities/index.js                                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./activities\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"links.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/activities/links.js                                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Notifications;\nmodule.link(\"../notifications\", {\n  default(v) {\n    Notifications = v;\n  }\n\n}, 0);\nlet Loans;\nmodule.link(\"../loans\", {\n  default(v) {\n    Loans = v;\n  }\n\n}, 1);\nlet Activities;\nmodule.link(\"./activities\", {\n  default(v) {\n    Activities = v;\n  }\n\n}, 2);\nActivities.addLinks({\n  notifications: {\n    collection: Notifications,\n    inversedBy: 'activity',\n    autoremove: true\n  },\n  loan: {\n    collection: Loans,\n    field: 'loanLink',\n    metadata: true\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"analytics\":{\"analyticsConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/analytics/analyticsConstants.js                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  TRACKING_COOKIE: () => TRACKING_COOKIE,\n  LOGIN_IP_BLACKLIST: () => LOGIN_IP_BLACKLIST\n});\nconst TRACKING_COOKIE = 'epotek_trackingid';\nconst LOGIN_IP_BLACKLIST = ['185.19.31.79', '213.3.47.70'];\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/analytics/methodDefinitions.js                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  analyticsLogin: () => analyticsLogin,\n  analyticsPage: () => analyticsPage,\n  analyticsVerifyEmail: () => analyticsVerifyEmail\n});\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 0);\nconst analyticsLogin = new Method({\n  name: 'analyticsLogin',\n  params: {\n    trackingId: String\n  }\n});\nconst analyticsPage = new Method({\n  name: 'analyticsPage',\n  params: {\n    cookies: Object,\n    sessionStorage: Object,\n    path: String,\n    route: String,\n    queryParams: Object,\n    queryString: Object\n  }\n});\nconst analyticsVerifyEmail = new Method({\n  name: 'analyticsVerifyEmail'\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"containerToolkit\":{\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/containerToolkit/index.js                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./withSmartQuery\", {\n  default: \"withSmartQuery\"\n}, 0);\nmodule.link(\"recompose\", {\n  branch: \"branch\",\n  renderComponent: \"renderComponent\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"skipContainer.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/containerToolkit/skipContainer.jsx                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 0);\n\n// Determine whether to skip adding an HOC `container` based on a `skip`\n// function, only change the wrappedComponent when needed to avoid UI flashes\nconst makeSkipContainer = (container, skip) => WrappedComponent => class extends Component {\n  constructor(props) {\n    super(props);\n    this.setWrappedComponent(props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (skip(this.props) !== skip(nextProps)) {\n      this.setWrappedComponent(nextProps);\n      this.forceUpdate();\n    }\n  }\n\n  setWrappedComponent(props) {\n    this.wrappedComponent = skip(props) ? WrappedComponent : container(WrappedComponent);\n  }\n\n  render() {\n    const FinalComponent = this.wrappedComponent;\n    return React.createElement(FinalComponent, this.props);\n  }\n\n};\n\nmodule.exportDefault(makeSkipContainer);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"withSmartQuery.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/containerToolkit/withSmartQuery.js                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet withQuery;\nmodule.link(\"meteor/cultofcoders:grapher-react\", {\n  withQuery(v) {\n    withQuery = v;\n  }\n\n}, 0);\nlet mapProps, compose, branch, renderComponent, lifecycle;\nmodule.link(\"recompose\", {\n  mapProps(v) {\n    mapProps = v;\n  },\n\n  compose(v) {\n    compose = v;\n  },\n\n  branch(v) {\n    branch = v;\n  },\n\n  renderComponent(v) {\n    renderComponent = v;\n  },\n\n  lifecycle(v) {\n    lifecycle = v;\n  }\n\n}, 1);\nlet withLoading;\nmodule.link(\"../../components/Loading\", {\n  withLoading(v) {\n    withLoading = v;\n  }\n\n}, 2);\nlet MissingDoc;\nmodule.link(\"../../components/MissingDoc\", {\n  default(v) {\n    MissingDoc = v;\n  }\n\n}, 3);\nlet ClientEventService;\nmodule.link(\"../events/ClientEventService\", {\n  default(v) {\n    ClientEventService = v;\n  }\n\n}, 4);\nlet addQueryToRefetch, removeQueryToRefetch;\nmodule.link(\"../methods/clientQueryManager\", {\n  addQueryToRefetch(v) {\n    addQueryToRefetch = v;\n  },\n\n  removeQueryToRefetch(v) {\n    removeQueryToRefetch = v;\n  }\n\n}, 5);\nlet makeSkipContainer;\nmodule.link(\"./skipContainer\", {\n  default(v) {\n    makeSkipContainer = v;\n  }\n\n}, 6);\n\n// render the missing doc component only when we want to\nconst makeRenderMissingDocIfNoData = function () {\n  let render = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  let {\n    single\n  } = arguments.length > 1 ? arguments[1] : undefined;\n  let renderFunc;\n\n  if (typeof render === 'function') {\n    renderFunc = props => render(props) && single && !props.isLoading && !props.data;\n  } else {\n    renderFunc = (_ref) => {\n      let {\n        isLoading,\n        data\n      } = _ref;\n      return render && single && !isLoading && !data;\n    };\n  }\n\n  return branch(renderFunc, renderComponent(MissingDoc));\n}; // Use proper name for data, and remove unnecessary props from children\n// error should be thrown and catched by our errorboundaries anyways\n// or displayed by an alert\n\n\nconst makeMapProps = dataName => mapProps((_ref2) => {\n  let {\n    data,\n    isLoading,\n    error\n  } = _ref2,\n      rest = (0, _objectWithoutProperties2.default)(_ref2, [\"data\", \"isLoading\", \"error\"]);\n  return (0, _objectSpread2.default)({\n    [dataName]: data\n  }, rest);\n});\n\nconst withQueryRefetcher = (_ref3) => {\n  let {\n    queryName\n  } = _ref3;\n  return lifecycle({\n    componentDidMount() {\n      const {\n        refetch\n      } = this.props;\n\n      if (refetch) {\n        ClientEventService.addListener(queryName, refetch);\n      }\n    },\n\n    componentWillUnmount() {\n      const {\n        refetch\n      } = this.props;\n\n      if (refetch) {\n        ClientEventService.removeListener(queryName, refetch);\n      }\n    }\n\n  });\n}; // This adds all non-reactive queries on the window object, and removes them\n// when the query disappears\n// These queries can then all be refreshed from `clientMethodsConfig`\n// every time a method is called\n\n\nconst withGlobalQueryManager = (_ref4, _ref5, refetchOnMethodCall) => {\n  let {\n    queryName\n  } = _ref4;\n  let {\n    reactive\n  } = _ref5;\n  const shouldActivateGlobalRefetch = refetchOnMethodCall && !reactive && global.window;\n\n  if (!shouldActivateGlobalRefetch) {\n    return x => x;\n  }\n\n  return lifecycle({\n    componentDidMount() {\n      addQueryToRefetch(queryName, refetchOnMethodCall);\n    },\n\n    componentWillUnmount() {\n      removeQueryToRefetch(queryName);\n    }\n\n  });\n};\n\nconst calculateParams = (params, props) => {\n  if (typeof params === 'function') {\n    return params(props);\n  }\n\n  return params;\n};\n\nconst withSmartQuery = (_ref6) => {\n  let {\n    query,\n    params = {},\n    queryOptions = {\n      single: false\n    },\n    dataName = 'data',\n    // used to bypass the missing doc component\n    renderMissingDoc = true,\n    smallLoader = false,\n    refetchOnMethodCall = 'all',\n    skip\n  } = _ref6;\n  let completeQuery;\n\n  if (typeof query === 'function') {\n    completeQuery = props => query(props).clone(calculateParams(params, props));\n  } else {\n    completeQuery = props => query.clone(calculateParams(params, props));\n  }\n\n  const container = compose(withGlobalQueryManager(query, queryOptions, refetchOnMethodCall), withQuery(completeQuery, (0, _objectSpread2.default)({\n    loadOnRefetch: false\n  }, queryOptions)), withLoading(smallLoader), makeRenderMissingDocIfNoData(renderMissingDoc, queryOptions), makeMapProps(dataName), withQueryRefetcher(query));\n\n  if (skip) {\n    return makeSkipContainer(container, skip);\n  }\n\n  return container;\n};\n\nmodule.exportDefault(withSmartQuery);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"email\":{\"emailConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/email/emailConstants.js                                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  FROM_NAME: () => FROM_NAME,\n  FROM_EMAIL: () => FROM_EMAIL,\n  FROM_DEFAULT: () => FROM_DEFAULT,\n  CTA_URL_DEFAULT: () => CTA_URL_DEFAULT,\n  INTERNAL_EMAIL: () => INTERNAL_EMAIL,\n  EPOTEK_PHONE: () => EPOTEK_PHONE,\n  EMAIL_I18N_NAMESPACE: () => EMAIL_I18N_NAMESPACE,\n  EMAIL_PARTS: () => EMAIL_PARTS,\n  FOOTER_TYPES: () => FOOTER_TYPES,\n  EMAIL_TEMPLATES: () => EMAIL_TEMPLATES,\n  EMAIL_IDS: () => EMAIL_IDS\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nconst FROM_NAME = 'e-Potek';\nconst FROM_EMAIL = 'info@e-potek.ch';\nconst FROM_DEFAULT = \"\".concat(FROM_NAME, \" <\").concat(FROM_EMAIL, \">\");\nconst CTA_URL_DEFAULT = Meteor.settings.public.subdomains.app;\nconst INTERNAL_EMAIL = Meteor.settings.public.environment === 'production' ? FROM_EMAIL : 'dev@e-potek.ch';\nconst EPOTEK_PHONE = '+41 22 566 01 10';\nconst EMAIL_I18N_NAMESPACE = 'emails';\nconst EMAIL_PARTS = {\n  SUBJECT: 'SUBJECT',\n  TITLE: 'TITLE',\n  BODY: 'BODY',\n  CTA: 'CTA',\n  FROM: 'FROM'\n};\nconst FOOTER_TYPES = {\n  USER: 'footerUser',\n  VISITOR: 'footerVisitor'\n};\nconst EMAIL_TEMPLATES = {\n  NOTIFICATION: {\n    name: 'NOTIFICATION',\n    mandrillId: 'notification',\n    variables: {\n      TITLE: 'TITLE',\n      BODY: 'BODY'\n    }\n  },\n  NOTIFICATION_AND_CTA: {\n    name: 'NOTIFICATION_AND_CTA',\n    mandrillId: 'notification-cta',\n    variables: {\n      TITLE: 'TITLE',\n      BODY: 'BODY',\n      CTA: 'CTA',\n      CTA_URL: 'CTA_URL'\n    }\n  },\n  PROMOTION_INVITATION: {\n    name: 'PROMOTION_INVITATION',\n    mandrillId: 'promotion-invitation',\n    variables: {\n      TITLE: 'TITLE',\n      MARKETING_BLURB: 'MARKETING_BLURB',\n      BODY: 'BODY',\n      CTA: 'CTA',\n      CTA_URL: 'CTA_URL',\n      COVER_IMAGE_URL: 'COVER_IMAGE_URL',\n      LOGO_URL_1: 'LOGO_URL_1',\n      LOGO_URL_2: 'LOGO_URL_2',\n      LOGO_URL_3: 'LOGO_URL_3'\n    }\n  },\n  SIMPLE: {\n    name: 'SIMPLE',\n    mandrillId: 'simple',\n    variables: {\n      TITLE: 'TITLE',\n      BODY: 'BODY'\n    }\n  },\n  NOTIFICATION_AND_CTA_V2: {\n    name: 'NOTIFICATION_AND_CTA_V2',\n    mandrillId: 'notification-cta-v2',\n    variables: {\n      TITLE: 'TITLE',\n      BODY: 'BODY',\n      CTA: 'CTA',\n      CTA_URL: 'CTA_URL',\n      CSS: 'CSS'\n    }\n  }\n};\nconst EMAIL_IDS = {\n  CONTACT_US: 'CONTACT_US',\n  CONTACT_US_ADMIN: 'CONTACT_US_ADMIN',\n  VERIFY_EMAIL: 'VERIFY_EMAIL',\n  RESET_PASSWORD: 'RESET_PASSWORD',\n  ENROLL_ACCOUNT: 'ENROLL_ACCOUNT',\n  VERIFICATION_REQUESTED: 'VERIFICATION_REQUESTED',\n  VERIFICATION_ERROR: 'VERIFICATION_ERROR',\n  VERIFICATION_PASSED: 'VERIFICATION_PASSED',\n  INVITE_USER_TO_PROMOTION: 'INVITE_USER_TO_PROMOTION',\n  SEND_FEEDBACK_TO_LENDER: 'SEND_FEEDBACK_TO_LENDER',\n  INVITE_USER_TO_PROPERTY: 'INVITE_USER_TO_PROPERTY',\n  REFER_USER: 'REFER_USER',\n  FIND_LENDER_NOTIFICATION: 'FIND_LENDER_NOTIFICATION',\n  CONFIRM_USER_INVITATION: 'CONFIRM_USER_INVITATION',\n  LOAN_CHECKLIST: 'LOAN_CHECKLIST'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/email/methodDefinitions.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  sendEmail: () => sendEmail,\n  sendEmailToAddress: () => sendEmailToAddress\n});\nlet Match;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  }\n\n}, 0);\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 1);\nconst sendEmail = new Method({\n  name: 'sendEmail',\n  params: {\n    emailId: String,\n    params: Object,\n    userId: String\n  }\n});\nconst sendEmailToAddress = new Method({\n  name: 'sendEmailToAddress',\n  params: {\n    address: String,\n    emailId: String,\n    name: Match.Maybe(String),\n    params: Object\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"factories\":{\"factories.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/factories/factories.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet Factory;\nmodule.link(\"meteor/dburles:factory\", {\n  Factory(v) {\n    Factory = v;\n  }\n\n}, 0);\nlet faker;\nmodule.link(\"faker\", {\n  default(v) {\n    faker = v;\n  }\n\n}, 1);\nlet LOT_TYPES, ORGANISATION_TYPES, PROMOTION_TYPES, REVENUE_TYPES, ROLES, STEPS, TASK_STATUS, DEFAULT_VALUE_FOR_ALL, DEFAULT_MAIN_RESIDENCE_RULES, DEFAULT_SECONDARY_RESIDENCE_RULES;\nmodule.link(\"../constants\", {\n  LOT_TYPES(v) {\n    LOT_TYPES = v;\n  },\n\n  ORGANISATION_TYPES(v) {\n    ORGANISATION_TYPES = v;\n  },\n\n  PROMOTION_TYPES(v) {\n    PROMOTION_TYPES = v;\n  },\n\n  REVENUE_TYPES(v) {\n    REVENUE_TYPES = v;\n  },\n\n  ROLES(v) {\n    ROLES = v;\n  },\n\n  STEPS(v) {\n    STEPS = v;\n  },\n\n  TASK_STATUS(v) {\n    TASK_STATUS = v;\n  },\n\n  DEFAULT_VALUE_FOR_ALL(v) {\n    DEFAULT_VALUE_FOR_ALL = v;\n  },\n\n  DEFAULT_MAIN_RESIDENCE_RULES(v) {\n    DEFAULT_MAIN_RESIDENCE_RULES = v;\n  },\n\n  DEFAULT_SECONDARY_RESIDENCE_RULES(v) {\n    DEFAULT_SECONDARY_RESIDENCE_RULES = v;\n  }\n\n}, 2);\nlet Borrowers, Contacts, InterestRates, LenderRules, Lenders, Loans, Lots, MortgageNotes, Offers, Organisations, PromotionLots, PromotionOptions, Promotions, Properties, Revenues, Tasks, Users;\nmodule.link(\"..\", {\n  Borrowers(v) {\n    Borrowers = v;\n  },\n\n  Contacts(v) {\n    Contacts = v;\n  },\n\n  InterestRates(v) {\n    InterestRates = v;\n  },\n\n  LenderRules(v) {\n    LenderRules = v;\n  },\n\n  Lenders(v) {\n    Lenders = v;\n  },\n\n  Loans(v) {\n    Loans = v;\n  },\n\n  Lots(v) {\n    Lots = v;\n  },\n\n  MortgageNotes(v) {\n    MortgageNotes = v;\n  },\n\n  Offers(v) {\n    Offers = v;\n  },\n\n  Organisations(v) {\n    Organisations = v;\n  },\n\n  PromotionLots(v) {\n    PromotionLots = v;\n  },\n\n  PromotionOptions(v) {\n    PromotionOptions = v;\n  },\n\n  Promotions(v) {\n    Promotions = v;\n  },\n\n  Properties(v) {\n    Properties = v;\n  },\n\n  Revenues(v) {\n    Revenues = v;\n  },\n\n  Tasks(v) {\n    Tasks = v;\n  },\n\n  Users(v) {\n    Users = v;\n  }\n\n}, 3);\nlet PROPERTY_CATEGORY;\nmodule.link(\"../properties/propertyConstants\", {\n  PROPERTY_CATEGORY(v) {\n    PROPERTY_CATEGORY = v;\n  }\n\n}, 4);\nlet Notifications;\nmodule.link(\"../notifications/index\", {\n  default(v) {\n    Notifications = v;\n  }\n\n}, 5);\nlet Activities;\nmodule.link(\"../activities/index\", {\n  default(v) {\n    Activities = v;\n  }\n\n}, 6);\nconst TEST_LASTNAME = 'TestLastName';\nconst TEST_FIRSTNAME = 'TestFirstName';\nconst TEST_PHONE = '0123456789';\n\nconst getRandomLoanName = () => \"19-0\".concat(Math.floor(Math.random() * 899 + 100));\n\nFactory.define('user', Users, {\n  roles: [ROLES.USER],\n  emails: () => [{\n    address: faker.internet.email(),\n    verified: false\n  }],\n  lastName: TEST_LASTNAME,\n  firstName: TEST_FIRSTNAME,\n  phoneNumbers: [TEST_PHONE]\n});\nFactory.define('dev', Users, {\n  roles: [ROLES.DEV],\n  emails: () => [{\n    address: faker.internet.email(),\n    verified: false\n  }],\n  lastName: TEST_LASTNAME,\n  firstName: TEST_FIRSTNAME,\n  phoneNumbers: [TEST_PHONE]\n});\nFactory.define('admin', Users, {\n  roles: [ROLES.ADMIN],\n  emails: () => [{\n    address: faker.internet.email(),\n    verified: false\n  }],\n  lastName: TEST_LASTNAME,\n  firstName: TEST_FIRSTNAME,\n  phoneNumbers: [TEST_PHONE]\n});\nFactory.define('adminEpotek', Users, {\n  roles: [ROLES.ADMIN],\n  emails: () => [{\n    address: 'dev@e-potek.ch',\n    verified: true\n  }],\n  lastName: 'e-Potek',\n  firstName: 'Dev',\n  phoneNumbers: [TEST_PHONE]\n});\nFactory.define('pro', Users, {\n  roles: [ROLES.PRO],\n  emails: () => [{\n    address: faker.internet.email(),\n    verified: false\n  }],\n  lastName: TEST_LASTNAME,\n  firstName: TEST_FIRSTNAME,\n  phoneNumbers: [TEST_PHONE]\n});\nFactory.define('borrower', Borrowers);\nFactory.define('task', Tasks, {\n  createdAt: () => new Date(),\n  status: TASK_STATUS.ACTIVE\n});\nFactory.define('loan', Loans, {\n  createdAt: () => new Date(),\n  borrowerIds: [],\n  documents: () => ({}),\n  step: STEPS.SOLVENCY,\n  name: () => {\n    // there is a 1/900% chance that 2 loan names collide,\n    // make sure it never happens instead\n    while (true) {\n      const name = getRandomLoanName();\n\n      if (!Loans.findOne({\n        name\n      })) {\n        return name;\n      }\n    }\n  },\n  emails: () => [],\n  propertyIds: []\n});\nFactory.define('property', Properties, {\n  value: 1000000,\n  category: PROPERTY_CATEGORY.USER\n});\nFactory.define('offer', Offers, {\n  userId: () => faker.random.uuid(),\n  createdAt: () => new Date(),\n  canton: 'GE',\n  conditions: ['Do something'],\n  maxAmount: 800000,\n  amortizationGoal: 0.65\n});\nFactory.define('promotion', Promotions, {\n  name: 'Test promotion',\n  type: PROMOTION_TYPES.CREDIT\n});\nFactory.define('promotionOption', PromotionOptions, {});\nFactory.define('promotionLot', PromotionLots, {});\nFactory.define('lot', Lots, {\n  name: 'test',\n  type: LOT_TYPES.PARKING_CAR,\n  value: 1000\n});\nFactory.define('task', Tasks, {});\nFactory.define('mortgageNote', MortgageNotes, {\n  value: 100000,\n  canton: 'GE'\n});\nFactory.define('organisation', Organisations, {\n  name: () => {\n    // Make sure organisation names don't collide\n    while (true) {\n      const name = faker.company.companyName();\n\n      if (!Organisations.findOne({\n        name\n      })) {\n        return name;\n      }\n    }\n  },\n  type: ORGANISATION_TYPES.BANK\n});\nFactory.define('lender', Lenders, {});\nFactory.define('interestRates', InterestRates, {});\nFactory.define('contact', Contacts, {\n  firstName: 'John',\n  lastName: 'Doe'\n});\nFactory.define('lenderRules', LenderRules, {\n  filter: {\n    and: []\n  },\n  order: 0\n});\nFactory.define('revenues', Revenues, {\n  amount: 1000,\n  type: REVENUE_TYPES.MORTGAGE\n});\nFactory.define('lenderRulesAll', LenderRules, (0, _objectSpread2.default)({}, DEFAULT_VALUE_FOR_ALL, {\n  order: 0,\n  filter: {\n    and: [true]\n  }\n}));\nFactory.define('lenderRulesMain', LenderRules, {\n  maxBorrowRatio: 0.8,\n  order: 0,\n  filter: {\n    and: DEFAULT_MAIN_RESIDENCE_RULES\n  }\n});\nFactory.define('lenderRulesSecondary', LenderRules, {\n  maxBorrowRatio: 0.7,\n  order: 0,\n  filter: {\n    and: DEFAULT_SECONDARY_RESIDENCE_RULES\n  }\n});\nFactory.define('notification', Notifications, {});\nFactory.define('activity', Activities, {});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"factoriesHelpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/factories/factoriesHelpers.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet Factory;\nmodule.link(\"meteor/dburles:factory\", {\n  Factory(v) {\n    Factory = v;\n  }\n\n}, 0);\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 1);\nlet pick;\nmodule.link(\"lodash/pick\", {\n  default(v) {\n    pick = v;\n  }\n\n}, 2);\nlet omit;\nmodule.link(\"lodash/omit\", {\n  default(v) {\n    omit = v;\n  }\n\n}, 3);\nlet uniq;\nmodule.link(\"lodash/uniq\", {\n  default(v) {\n    uniq = v;\n  }\n\n}, 4);\nlet uniqBy;\nmodule.link(\"lodash/uniqBy\", {\n  default(v) {\n    uniqBy = v;\n  }\n\n}, 5);\nlet CollectionService;\nmodule.link(\"../helpers/CollectionService\", {\n  default(v) {\n    CollectionService = v;\n  }\n\n}, 6);\nlet COLLECTIONS;\nmodule.link(\"../constants\", {\n  COLLECTIONS(v) {\n    COLLECTIONS = v;\n  }\n\n}, 7);\nlet NOTIFICATIONS_COLLECTION;\nmodule.link(\"../notifications/notificationConstants\", {\n  NOTIFICATIONS_COLLECTION(v) {\n    NOTIFICATIONS_COLLECTION = v;\n  }\n\n}, 8);\nlet ACTIVITIES_COLLECTION;\nmodule.link(\"../activities/activityConstants\", {\n  ACTIVITIES_COLLECTION(v) {\n    ACTIVITIES_COLLECTION = v;\n  }\n\n}, 9);\n\nconst getSingularFactoryName = collection => {\n  switch (collection) {\n    case COLLECTIONS.LOANS_COLLECTION:\n      return 'loan';\n\n    case COLLECTIONS.BORROWERS_COLLECTION:\n      return 'borrower';\n\n    case COLLECTIONS.PROPERTIES_COLLECTION:\n      return 'property';\n\n    case COLLECTIONS.USERS_COLLECTION:\n      return 'user';\n\n    case COLLECTIONS.TASKS_COLLECTION:\n      return 'task';\n\n    case COLLECTIONS.OFFERS_COLLECTION:\n      return 'offer';\n\n    case COLLECTIONS.PROMOTIONS_COLLECTION:\n      return 'promotion';\n\n    case COLLECTIONS.PROMOTION_OPTIONS_COLLECTION:\n      return 'promotionOption';\n\n    case COLLECTIONS.PROMOTION_LOTS_COLLECTION:\n      return 'promotionLot';\n\n    case COLLECTIONS.LOTS_COLLECTION:\n      return 'lot';\n\n    case COLLECTIONS.MORTGAGE_NOTES_COLLECTION:\n      return 'mortgageNote';\n\n    case COLLECTIONS.ORGANISATIONS_COLLECTION:\n      return 'organisation';\n\n    case COLLECTIONS.LENDERS_COLLECTION:\n      return 'lender';\n\n    case COLLECTIONS.CONTACTS_COLLECTION:\n      return 'contact';\n\n    case NOTIFICATIONS_COLLECTION:\n      return 'notification';\n\n    case ACTIVITIES_COLLECTION:\n      return 'activity';\n\n    default:\n      throw new Error(\"No singular factory name found for \".concat(collection, \", add it in the generator\"));\n  }\n};\n\nconst arrayify = maybeArray => Array.isArray(maybeArray) ? maybeArray : [maybeArray];\n\nconst findCollectionNameByLinkName = (_ref) => {\n  let {\n    collection,\n    linkName\n  } = _ref;\n  return Mongo.Collection.get(collection).__links[linkName].linkConfig.collection._name;\n};\n\nconst findLinkKeys = (_ref2) => {\n  let {\n    collection\n  } = _ref2;\n  const {\n    __links: linkNames = {}\n  } = Mongo.Collection.get(collection);\n  const links = Object.keys(linkNames);\n  return links;\n};\n\nconst insertDoc = (_ref3) => {\n  let {\n    doc,\n    collection,\n    useFactories,\n    factory\n  } = _ref3;\n  let docExists = false;\n\n  if (doc._id) {\n    docExists = !!Mongo.Collection.get(collection).findOne(doc._id);\n  }\n\n  if (docExists) {\n    return doc;\n  }\n\n  if (useFactories && factory !== null) {\n    if (factory) {\n      return Factory.create(factory, doc);\n    }\n\n    try {\n      return Factory.create(collection, doc);\n    } catch (error) {\n      if (error.message && error.message === \"Factory: There is no factory named \".concat(collection)) {\n        return Factory.create(getSingularFactoryName(collection), doc);\n      }\n\n      throw error;\n    }\n  }\n\n  const _id = Mongo.Collection.get(collection).insert(doc);\n\n  return Mongo.Collection.get(collection).findOne(_id);\n};\n\nconst generator = function (scenario) {\n  let {\n    useFactories = true\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const ids = {};\n  const docs = {};\n  const docsById = {};\n\n  const pushId = (_ref4) => {\n    let {\n      id,\n      collection\n    } = _ref4;\n    ids[collection] = ids[collection] ? [...ids[collection], id] : [id];\n    ids[collection] = uniq(ids[collection]);\n  };\n\n  const pushDoc = (_ref5) => {\n    let {\n      doc,\n      collection\n    } = _ref5;\n    docs[collection] = docs[collection] ? [...docs[collection], doc] : [doc];\n    docs[collection] = uniqBy(docs[collection], '_id');\n    docsById[collection] = docsById[collection] ? (0, _objectSpread2.default)({}, docsById[collection], {\n      [doc._id]: doc\n    }) : {\n      [doc._id]: doc\n    };\n  };\n\n  const createNestedObject = (_ref6) => {\n    let {\n      doc,\n      collection\n    } = _ref6;\n    const linkKeys = findLinkKeys({\n      doc,\n      collection\n    });\n    const docToInsert = omit(doc, [...linkKeys, '_factory', '$metadata']);\n    const insertedDoc = insertDoc({\n      collection,\n      doc: docToInsert,\n      useFactories,\n      factory: doc._factory\n    });\n    const {\n      _id: id\n    } = insertedDoc;\n    pushId({\n      id,\n      collection\n    });\n    pushDoc({\n      doc: insertedDoc,\n      collection\n    });\n    const linksToInsert = pick(doc, linkKeys);\n    Object.keys(linksToInsert).forEach(linkName => {\n      const linkCollection = findCollectionNameByLinkName({\n        collection,\n        linkName\n      });\n      const linkedDocs = arrayify(linksToInsert[linkName]);\n      linkedDocs.forEach(linkedDoc => {\n        const linkId = createNestedObject({\n          doc: linkedDoc,\n          collection: linkCollection,\n          parentId: id\n        });\n        const collectionService = new CollectionService(Mongo.Collection.get(collection));\n        collectionService.addLink({\n          id,\n          linkName,\n          linkId,\n          metadata: linkedDoc.$metadata\n        });\n      });\n    });\n    return id;\n  };\n\n  Object.keys(scenario).forEach(collection => {\n    const docsInCollection = arrayify(scenario[collection]);\n    docsInCollection.forEach(doc => createNestedObject({\n      doc,\n      collection\n    }));\n  });\n  return {\n    ids,\n    docs,\n    docsById\n  };\n};\n\nmodule.exportDefault(generator);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/factories/index.js                                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./factories\");\nmodule.link(\"./factoriesHelpers\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"helpers\":{\"CollectionService.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/helpers/CollectionService.js                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\n\nclass CollectionService {\n  constructor(collection) {\n    if (!collection) {\n      throw new Error('A collection is needed in CollectionService, but none was passed');\n    }\n\n    this.collection = collection;\n  }\n\n  insert() {\n    let object = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return this.collection.insert(object);\n  }\n\n  _update(_ref) {\n    let {\n      id,\n      object,\n      operator = '$set'\n    } = _ref;\n\n    if (Object.keys(object).length > 0) {\n      // debugger;\n      return this.collection.update(id, {\n        [operator]: object\n      });\n    }\n\n    return null;\n  }\n\n  baseUpdate() {\n    return this.collection.update(...arguments);\n  }\n\n  remove() {\n    return this.collection.remove(...arguments);\n  }\n\n  get(id) {\n    return this.collection.findOne(id);\n  }\n\n  safeGet(id) {\n    const result = this.get(id);\n\n    if (!result) {\n      throw new Meteor.Error(\"Could not find object with id \\\"\".concat(id, \"\\\" in collection \\\"\").concat(this.collection._name, \"\\\"\"));\n    }\n\n    return result;\n  }\n\n  find() {\n    return this.collection.find(...arguments);\n  }\n\n  findOne() {\n    return this.collection.findOne(...arguments);\n  }\n\n  checkQuery(body) {\n    if (body && body.$filter) {\n      throw new Meteor.Error('$filter found in query body, did you mean $filters?');\n    }\n  }\n\n  createQuery() {\n    this.checkQuery(arguments.length <= 0 ? undefined : arguments[0]);\n    return this.collection.createQuery(...arguments);\n  }\n\n  fetchOne() {\n    this.checkQuery(arguments.length <= 0 ? undefined : arguments[0]);\n    return this.createQuery(...arguments).fetchOne();\n  }\n\n  safeFetchOne() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    const {\n      $filters = {}\n    } = args.find(arg => arg.$filters);\n    const result = this.fetchOne(...args);\n\n    if (!result) {\n      throw new Meteor.Error(\"Could not find object with filters \\\"\".concat(JSON.stringify($filters), \"\\\" in collection \\\"\").concat(this.collection._name, \"\\\"\"));\n    }\n\n    return result;\n  }\n\n  fetch() {\n    this.checkQuery(arguments.length <= 0 ? undefined : arguments[0]);\n    return this.createQuery(...arguments).fetch();\n  }\n\n  getLink() {\n    return this.collection.getLink(...arguments);\n  }\n\n  count() {\n    this.checkQuery(arguments.length <= 0 ? undefined : arguments[0]);\n    return this.createQuery(...arguments).getCount();\n  }\n\n  countAll() {\n    return this.find({}).count();\n  }\n\n  getAll() {\n    return this.find({}).fetch();\n  }\n\n  get rawCollection() {\n    return this.collection.rawCollection();\n  }\n\n  exists(_id) {\n    return !!(_id && this.findOne({\n      _id\n    }, {\n      fields: {\n        _id: 1\n      }\n    }));\n  }\n\n  aggregate() {\n    return this.rawCollection.aggregate(...arguments);\n  } // Don't return the results from linker\n\n\n  addLink(_ref2) {\n    let {\n      id,\n      linkName,\n      linkId,\n      metadata = {}\n    } = _ref2;\n    const linker = this.collection.getLink(id, linkName);\n    const {\n      linker: {\n        strategy\n      }\n    } = linker;\n\n    switch (strategy) {\n      case 'one':\n        linker.set(linkId);\n        return;\n\n      case 'many':\n        linker.add(linkId);\n        return;\n\n      case 'one-meta':\n        linker.set(linkId, metadata);\n        return;\n\n      case 'many-meta':\n        linker.add(linkId, metadata);\n        return;\n\n      default:\n        return null;\n    }\n  } // Don't return the results from linker\n\n\n  removeLink(_ref3) {\n    let {\n      id,\n      linkName,\n      linkId\n    } = _ref3;\n    const linker = this.getLink(id, linkName);\n    const {\n      linker: {\n        strategy\n      }\n    } = linker;\n\n    switch (strategy.split('-')[0]) {\n      case 'one':\n        linker.unset(linkId);\n        return;\n\n      case 'many':\n        linker.remove(linkId);\n        return;\n\n      default:\n        return null;\n    }\n  }\n\n  updateLinkMetadata(_ref4) {\n    let {\n      id,\n      linkName,\n      linkId,\n      metadata\n    } = _ref4;\n    const linker = this.getLink(id, linkName);\n    const {\n      linker: {\n        strategy\n      }\n    } = linker;\n\n    switch (strategy.split('-')[0]) {\n      case 'one':\n        linker.metadata(metadata);\n        return;\n\n      case 'many':\n        linker.metadata(linkId, metadata);\n        return;\n\n      default:\n        return null;\n    }\n  }\n\n  getAssignedEmployee(_ref5) {\n    let {\n      id\n    } = _ref5;\n    const {\n      assignee\n    } = this.fetchOne({\n      $filters: {\n        _id: id\n      },\n      assignee: 1\n    });\n    return assignee;\n  }\n\n  getAdditionalDocLabel(_ref6) {\n    let {\n      label,\n      additionalDoc\n    } = _ref6;\n\n    if (label) {\n      return label;\n    }\n\n    if (additionalDoc.label) {\n      return additionalDoc.label;\n    }\n\n    return undefined;\n  }\n\n  setAdditionalDoc(_ref7) {\n    let {\n      id,\n      additionalDocId,\n      requiredByAdmin,\n      label,\n      category\n    } = _ref7;\n    const {\n      additionalDocuments\n    } = this.get(id);\n    const additionalDoc = additionalDocuments.find(doc => doc.id === additionalDocId);\n\n    if (additionalDoc) {\n      const additionalDocumentsUpdate = [...additionalDocuments.filter(doc => doc.id !== additionalDocId), {\n        id: additionalDocId,\n        requiredByAdmin,\n        label: this.getAdditionalDocLabel({\n          label,\n          additionalDoc\n        }),\n        category\n      }];\n      return this._update({\n        id,\n        object: {\n          additionalDocuments: additionalDocumentsUpdate\n        }\n      });\n    }\n\n    return this._update({\n      id,\n      object: {\n        additionalDocuments: [...additionalDocuments, {\n          id: additionalDocId,\n          requiredByAdmin,\n          label,\n          category\n        }]\n      }\n    });\n  }\n\n  removeAdditionalDoc(_ref8) {\n    let {\n      id: docId,\n      additionalDocId\n    } = _ref8;\n    const {\n      additionalDocuments = []\n    } = this.get(docId);\n    return this._update({\n      id: docId,\n      object: {\n        additionalDocuments: additionalDocuments.filter((_ref9) => {\n          let {\n            id\n          } = _ref9;\n          return id !== additionalDocId;\n        })\n      }\n    });\n  }\n\n}\n\nmodule.exportDefault(CollectionService);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"helpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/helpers/helpers.js                                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  getDocFromCollection: () => getDocFromCollection,\n  getIdFieldNameFromCollection: () => getIdFieldNameFromCollection,\n  getCollectionNameFromIdField: () => getCollectionNameFromIdField,\n  createMeteorAsyncFunction: () => createMeteorAsyncFunction,\n  flattenObject: () => flattenObject,\n  getUserOrganisationName: () => getUserOrganisationName,\n  getUserNameAndOrganisation: () => getUserNameAndOrganisation,\n  getReferredBy: () => getReferredBy,\n  sortObject: () => sortObject\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet Loans, Borrowers, Offers, Properties, Tasks, Users;\nmodule.link(\"..\", {\n  Loans(v) {\n    Loans = v;\n  },\n\n  Borrowers(v) {\n    Borrowers = v;\n  },\n\n  Offers(v) {\n    Offers = v;\n  },\n\n  Properties(v) {\n    Properties = v;\n  },\n\n  Tasks(v) {\n    Tasks = v;\n  },\n\n  Users(v) {\n    Users = v;\n  }\n\n}, 1);\nlet LOANS_COLLECTION, BORROWERS_COLLECTION, PROPERTIES_COLLECTION;\nmodule.link(\"../constants\", {\n  LOANS_COLLECTION(v) {\n    LOANS_COLLECTION = v;\n  },\n\n  BORROWERS_COLLECTION(v) {\n    BORROWERS_COLLECTION = v;\n  },\n\n  PROPERTIES_COLLECTION(v) {\n    PROPERTIES_COLLECTION = v;\n  }\n\n}, 2);\n\nconst getDocFromCollection = (collectionName, docId) => {\n  let collection;\n\n  switch (collectionName) {\n    case 'loans':\n      collection = Loans;\n      break;\n\n    case 'borrowers':\n      collection = Borrowers;\n      break;\n\n    case 'properties':\n      collection = Properties;\n      break;\n\n    case 'offers':\n      collection = Offers;\n      break;\n\n    case 'tasks':\n      collection = Tasks;\n      break;\n\n    case 'users':\n      collection = Users;\n      break;\n\n    default:\n      break;\n  }\n\n  return collection.findOne(docId);\n};\n\nconst getIdFieldNameFromCollection = collectionName => ({\n  [LOANS_COLLECTION]: 'loanId',\n  [BORROWERS_COLLECTION]: 'borrowerId',\n  [PROPERTIES_COLLECTION]: 'propertyId'\n})[collectionName];\n\nconst getCollectionNameFromIdField = idFieldName => ({\n  loanId: LOANS_COLLECTION,\n  borrowerId: BORROWERS_COLLECTION,\n  propertyId: PROPERTIES_COLLECTION\n})[idFieldName];\n\nconst createMeteorAsyncFunction = promiseFunc => Meteor.wrapAsync((params, callback) => promiseFunc(params).then(result => callback(null, result)).catch(callback));\n\nconst flattenObject = (object, delimiter) => {\n  const delim = delimiter || '.';\n  let flattened = {};\n  Object.keys(object).forEach(key => {\n    const val = object[key];\n\n    if (val instanceof Object && !(val instanceof Array)) {\n      const strip = flattenObject(val);\n      Object.keys(strip).forEach(k => {\n        const v = strip[k];\n        flattened = (0, _objectSpread2.default)({}, flattened, {\n          [\"\".concat(key).concat(delim).concat(k)]: v\n        });\n      });\n    } else {\n      flattened = (0, _objectSpread2.default)({}, flattened, {\n        [key]: val\n      });\n    }\n  });\n  return flattened;\n};\n\nconst getUserOrganisationName = (_ref) => {\n  let {\n    user\n  } = _ref;\n  const {\n    organisations = []\n  } = user;\n  const organisationName = !!organisations.length && organisations[0].name;\n  return organisationName;\n};\n\nconst getUserNameAndOrganisation = (_ref2) => {\n  let {\n    user\n  } = _ref2;\n  const {\n    name,\n    organisations = []\n  } = user;\n  const organisationName = !!organisations.length && organisations[0].name;\n  return organisationName ? \"\".concat(name, \" (\").concat(organisationName, \")\") : name;\n};\n\nconst isReferredByOrganisation = (_ref3) => {\n  let {\n    organisations,\n    referredByOrganisation\n  } = _ref3;\n  return organisations.some((_ref4) => {\n    let {\n      _id\n    } = _ref4;\n    return referredByOrganisation._id === _id;\n  });\n};\n\nconst isReferredByOrganisationUser = (_ref5) => {\n  let {\n    organisationUsers,\n    referredByUser\n  } = _ref5;\n  return organisationUsers.some((_ref6) => {\n    let {\n      _id\n    } = _ref6;\n    return referredByUser._id === _id;\n  });\n};\n\nconst getReferredBy = (_ref7) => {\n  let {\n    user,\n    proUser = {},\n    isAdmin\n  } = _ref7;\n\n  if (!user) {\n    return {\n      raw: null,\n      label: ''\n    };\n  }\n\n  const {\n    organisations = []\n  } = proUser;\n  const organisationUsers = organisations.length ? organisations[0].users : [];\n  const {\n    referredByUser = {},\n    referredByOrganisation = {}\n  } = user;\n  let label = 'Déjà référé';\n\n  if (isAdmin || isReferredByOrganisation({\n    organisations,\n    referredByOrganisation\n  }) || isReferredByOrganisationUser({\n    organisationUsers,\n    referredByUser\n  })) {\n    label = getUserNameAndOrganisation({\n      user: referredByUser\n    });\n  }\n\n  return {\n    raw: referredByUser.name,\n    label\n  };\n};\n\nconst sortObject = object => {\n  if (!object || typeof object !== 'object' || object instanceof Array) {\n    return object;\n  }\n\n  const sortedObject = {};\n  const keys = Object.keys(object);\n  keys.sort();\n  keys.forEach(key => {\n    sortedObject[key] = sortObject(object[key]);\n  });\n  return sortedObject;\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/helpers/index.js                                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./helpers\", {\n  \"*\": \"*\"\n}, 0);\nmodule.link(\"./mongoHelpers\", {\n  \"*\": \"*\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"mongoHelpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/helpers/mongoHelpers.js                                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  generateMatchAllWordsRegexp: () => generateMatchAllWordsRegexp,\n  generateMatchAnyWordRegexp: () => generateMatchAnyWordRegexp,\n  splitStringIntoWords: () => splitStringIntoWords,\n  createRegexQuery: () => createRegexQuery,\n  createSearchFilters: () => createSearchFilters\n});\n\nconst generateMatchAllWordsRegexp = words => \"\".concat(words.map(word => \"(?=.*\".concat(word, \")\")).join(''), \".+\");\n\nconst generateMatchAnyWordRegexp = string => string.trim().replace(/\\s+/g, '|');\n\nconst splitStringIntoWords = string => string.trim().split(/\\s+/);\n\nconst createRegexQuery = (fieldName, searchQuery) => {\n  const searchQueryWords = splitStringIntoWords(searchQuery);\n  const containsMultipleWords = searchQueryWords.length > 1;\n\n  if (containsMultipleWords) {\n    return {\n      [fieldName]: {\n        $regex: generateMatchAllWordsRegexp(searchQueryWords),\n        $options: 'gi'\n      }\n    };\n  }\n\n  return {\n    [fieldName]: {\n      $regex: searchQuery.trim(),\n      $options: 'ix'\n    }\n  };\n};\n\nconst createSearchFilters = (searchFieldsArray, searchQuery) => {\n  if (searchFieldsArray.length > 1) {\n    // multiple fields to match\n    return {\n      $or: searchFieldsArray.map(searchField => createRegexQuery(searchField, searchQuery))\n    };\n  } // single field to match\n\n\n  const fieldName = searchFieldsArray[0];\n  return createRegexQuery(fieldName, searchQuery);\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"sharedSchemaConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/helpers/sharedSchemaConstants.js                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  MORTGAGE_NOTE_TYPES: () => MORTGAGE_NOTE_TYPES,\n  MORTGAGE_NOTE_CATEGORIES: () => MORTGAGE_NOTE_CATEGORIES\n});\nconst MORTGAGE_NOTE_TYPES = {\n  PAPER: 'PAPER',\n  REGISTRAR: 'REGISTRAR'\n};\nconst MORTGAGE_NOTE_CATEGORIES = {\n  BEARER: 'BEARER',\n  REGISTERED: 'REGISTERED'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"sharedSchemas.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/helpers/sharedSchemas.js                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  createdAt: () => createdAt,\n  updatedAt: () => updatedAt,\n  additionalDocuments: () => additionalDocuments,\n  address: () => address,\n  contactsSchema: () => contactsSchema,\n  makePermissions: () => makePermissions,\n  userLinksSchema: () => userLinksSchema,\n  mortgageNoteLinks: () => mortgageNoteLinks,\n  roundedInteger: () => roundedInteger,\n  percentageField: () => percentageField,\n  moneyField: () => moneyField,\n  decimalMoneyField: () => decimalMoneyField,\n  documentsField: () => documentsField,\n  dateField: () => dateField,\n  cacheField: () => cacheField\n});\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\nlet CUSTOM_AUTOFIELD_TYPES;\nmodule.link(\"../../components/AutoForm2/constants\", {\n  CUSTOM_AUTOFIELD_TYPES(v) {\n    CUSTOM_AUTOFIELD_TYPES = v;\n  }\n\n}, 1);\nlet CANTONS;\nmodule.link(\"../loans/loanConstants\", {\n  CANTONS(v) {\n    CANTONS = v;\n  }\n\n}, 2);\nlet zipcodes;\nmodule.link(\"../../utils/zipcodes\", {\n  default(v) {\n    zipcodes = v;\n  }\n\n}, 3);\nconst createdAt = {\n  type: Date,\n\n  autoValue() {\n    if (this.isInsert) {\n      return new Date();\n    }\n\n    this.unset();\n  },\n\n  optional: true\n};\nconst updatedAt = {\n  type: Date,\n\n  autoValue() {\n    if (this.isUpdate || this.isInsert || this.isUpsert) {\n      return new Date();\n    }\n  },\n\n  optional: true\n};\n\nconst additionalDocuments = initialDocuments => ({\n  additionalDocuments: {\n    type: Array,\n    defaultValue: initialDocuments\n  },\n  'additionalDocuments.$': Object,\n  'additionalDocuments.$.id': String,\n  'additionalDocuments.$.label': {\n    type: String,\n    optional: true\n  },\n  'additionalDocuments.$.requiredByAdmin': {\n    type: Boolean,\n    optional: true\n  },\n  'additionalDocuments.$.category': {\n    type: String,\n    optional: true\n  }\n});\n\nconst address = {\n  address1: {\n    type: String,\n    optional: true\n  },\n  address2: {\n    type: String,\n    optional: true\n  },\n  zipCode: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 1000,\n    max: 99999\n  },\n  city: {\n    type: String,\n    optional: true\n  },\n  canton: {\n    type: String,\n    allowedValues: Object.keys(CANTONS),\n    optional: true,\n\n    autoValue() {\n      return zipcodes(this.field('zipCode').value);\n    },\n\n    uniforms: {\n      placeholder: null\n    }\n  }\n};\nconst contactsSchema = {\n  contacts: {\n    type: Array,\n    defaultValue: []\n  },\n  'contacts.$': Object,\n  'contacts.$.name': {\n    type: String,\n    uniforms: {\n      label: 'Prénom Nom'\n    }\n  },\n  'contacts.$.title': {\n    type: String,\n    uniforms: {\n      label: 'Fonction/Titre'\n    }\n  },\n  'contacts.$.email': {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email,\n    optional: true\n  },\n  'contacts.$.phoneNumber': {\n    type: String,\n    uniforms: {\n      label: 'No. de Téléphone'\n    },\n    optional: true\n  }\n};\n\nconst makePermissions = (_ref) => {\n  let {\n    permissionsSchema,\n    prefix,\n    autoFormDisplayCondition = () => true,\n    autoFormLabel\n  } = _ref;\n  return Object.keys(permissionsSchema).reduce((permissions, key) => (0, _objectSpread2.default)({}, permissions, {\n    [\"\".concat(prefix, \".\").concat(key)]: permissionsSchema[key]\n  }), {\n    [prefix]: {\n      type: Object,\n      optional: true,\n      condition: autoFormDisplayCondition,\n      uniforms: {\n        label: autoFormLabel || prefix\n      }\n    }\n  });\n};\n\nconst userLinksSchema = permissionsSchema => (0, _objectSpread2.default)({\n  userLinks: {\n    type: Array,\n    defaultValue: []\n  },\n  'userLinks.$': Object,\n  'userLinks.$._id': {\n    type: String,\n    optional: true\n  }\n}, permissionsSchema ? makePermissions({\n  permissionsSchema,\n  prefix: 'userLinks.$.permissions'\n}) : {});\n\nconst mortgageNoteLinks = {\n  mortgageNoteLinks: {\n    type: Array,\n    optional: true\n  },\n  'mortgageNoteLinks.$': Object,\n  'mortgageNoteLinks.$._id': {\n    type: String,\n    optional: true\n  }\n};\n\nconst roundedInteger = digits => {\n  const rounder = Math.pow(10, digits);\n  return {\n    type: SimpleSchema.Integer,\n    min: 0,\n    max: 1000000000,\n\n    autoValue() {\n      if (this.isSet) {\n        return Math.round(this.value / rounder) * rounder;\n      }\n    },\n\n    optional: true\n  };\n};\n\nconst percentageField = {\n  type: Number,\n  min: -1,\n  max: 1,\n  optional: true,\n\n  autoValue() {\n    if (this.isSet) {\n      return Math.round(Number(this.value) * 10000) / 10000;\n    }\n  },\n\n  uniforms: {\n    type: CUSTOM_AUTOFIELD_TYPES.PERCENT,\n    placeholder: '0.00%'\n  }\n};\nconst moneyField = {\n  type: SimpleSchema.Integer,\n  min: 0,\n  max: 1000000000,\n  optional: true,\n  uniforms: {\n    type: CUSTOM_AUTOFIELD_TYPES.MONEY\n  }\n};\nconst decimalMoneyField = (0, _objectSpread2.default)({}, moneyField, {\n  type: Number,\n  uniforms: {\n    type: CUSTOM_AUTOFIELD_TYPES.MONEY_DECIMAL\n  }\n});\nconst documentsField = {\n  type: Object,\n  defaultValue: {},\n  optional: true,\n  blackbox: true\n};\nconst dateField = {\n  type: Date,\n  optional: true,\n  uniforms: {\n    type: CUSTOM_AUTOFIELD_TYPES.DATE\n  }\n};\nconst cacheField = {\n  type: Object,\n  optional: true,\n  blackbox: true\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"impersonation\":{\"impersonation.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/impersonation/impersonation.js                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  IMPERSONATE_ROUTE: () => IMPERSONATE_ROUTE,\n  IMPERSONATE_USER_ID: () => IMPERSONATE_USER_ID,\n  IMPERSONATE_TOKEN: () => IMPERSONATE_TOKEN,\n  generateImpersonateLink: () => generateImpersonateLink\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet Accounts;\nmodule.link(\"meteor/accounts-base\", {\n  Accounts(v) {\n    Accounts = v;\n  }\n\n}, 1);\nlet ROLES;\nmodule.link(\"../constants\", {\n  ROLES(v) {\n    ROLES = v;\n  }\n\n}, 2);\nconst APP_URL = Meteor.settings.public.subdomains.app;\nconst PRO_URL = Meteor.settings.public.subdomains.pro;\nconst IMPERSONATE_ROUTE = '/impersonate';\nconst IMPERSONATE_USER_ID = 'userId';\nconst IMPERSONATE_TOKEN = 'authToken';\n\nfunction generateImpersonateLink(_ref) {\n  let {\n    _id: userId,\n    roles\n  } = _ref;\n\n  // eslint-disable-next-line no-underscore-dangle\n  const token = Accounts._storedLoginToken();\n\n  const queryString = \"\".concat(IMPERSONATE_USER_ID, \"=\").concat(userId, \"&\").concat(IMPERSONATE_TOKEN, \"=\").concat(token);\n  const microserviceUrl = roles.includes(ROLES.USER) ? APP_URL : PRO_URL;\n  return \"\".concat(microserviceUrl).concat(IMPERSONATE_ROUTE, \"?\").concat(queryString);\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/impersonation/methodDefinitions.js                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  impersonateUser: () => impersonateUser,\n  impersonateAdmin: () => impersonateAdmin\n});\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 0);\nconst impersonateUser = new Method({\n  name: 'impersonateUser',\n  params: {\n    authToken: String,\n    userId: String\n  }\n});\nconst impersonateAdmin = new Method({\n  name: 'impersonateAdmin',\n  params: {\n    userId: String\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"links\":{\"LinkInitializer.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/links/LinkInitializer.js                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n// Inversed links need to be defined after direct links, use this\n// class to manage that\n// Might become obsolete after this is fixed in grapher\n// https://github.com/cult-of-coders/grapher/issues/200#issuecomment-500803766\nclass LinkInitializer {\n  constructor() {\n    this.direct = [];\n    this.inversed = [];\n  }\n\n  directInit(fn) {\n    this.direct.push(fn);\n  }\n\n  inversedInit(fn) {\n    this.inversed.push(fn);\n  }\n\n  setLinks() {\n    this.direct.forEach(fn => fn());\n    this.inversed.forEach(fn => fn()); // Don't unnecessarily store these functions\n\n    delete this.direct;\n    delete this.inversed;\n  }\n\n}\n\nmodule.exportDefault(new LinkInitializer());\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/links/index.js                                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"../activities/links\");\nmodule.link(\"../borrowers/links\");\nmodule.link(\"../contacts/links\");\nmodule.link(\"../lenderRules/links\");\nmodule.link(\"../lenders/links\");\nmodule.link(\"../loans/links\");\nmodule.link(\"../lots/links\");\nmodule.link(\"../mortgageNotes/links\");\nmodule.link(\"../notifications/links\");\nmodule.link(\"../offers/links\");\nmodule.link(\"../organisations/links\");\nmodule.link(\"../promotionLots/links\");\nmodule.link(\"../promotionOptions/links\");\nmodule.link(\"../promotions/links\");\nmodule.link(\"../properties/links\");\nmodule.link(\"../revenues/links\");\nmodule.link(\"../tasks/links\");\nmodule.link(\"../users/links\");\nlet LinkInitializer;\nmodule.link(\"./LinkInitializer\", {\n  default(v) {\n    LinkInitializer = v;\n  }\n\n}, 0);\nLinkInitializer.setLinks();\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"methods\":{\"clientQueryManager.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/methods/clientQueryManager.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  addQueryToRefetch: () => addQueryToRefetch,\n  removeQueryToRefetch: () => removeQueryToRefetch,\n  refetchQuery: () => refetchQuery,\n  refetchQueries: () => refetchQueries\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet ClientEventService;\nmodule.link(\"../events/ClientEventService\", {\n  default(v) {\n    ClientEventService = v;\n  }\n\n}, 1);\n\nconst isActive = () => !!global.window;\n\nconst init = () => {\n  if (isActive()) {\n    window.activeQueries = {};\n  }\n};\n\ninit();\n\nconst addQuery = (queryName, type) => {\n  // Add support for passing method config objects\n  if (typeof type === 'object') {\n    window.activeQueries[type.config.name] = [...(window.activeQueries[type.config.name] || []), queryName];\n  } else {\n    window.activeQueries[type] = [...(window.activeQueries[type] || []), queryName];\n  }\n};\n\nconst addQueryToRefetch = (queryName, type) => {\n  if (isActive()) {\n    if (!type) {\n      return;\n    }\n\n    if (Array.isArray(type)) {\n      type.forEach(t => {\n        addQuery(queryName, t);\n      });\n    } else {\n      addQuery(queryName, type);\n    }\n  }\n};\n\nconst removeQueryToRefetch = queryName => {\n  if (isActive()) {\n    Object.keys(window.activeQueries).forEach(type => {\n      if (Array.isArray(window.activeQueries[type])) {\n        window.activeQueries[type] = window.activeQueries[type].filter(query => query !== queryName); // Clean up this particular refetch key if there is no query in it anymore\n\n        if (window.activeQueries[type].length === 0) {\n          window.activeQueries[type] = undefined;\n        }\n      }\n    });\n  }\n};\n\nconst refetchQuery = query => ClientEventService.emit(query);\n\nconst refetchQueries = methodName => {\n  if (isActive()) {\n    if (window.activeQueries.all) {\n      window.activeQueries.all.forEach(refetchQuery);\n    }\n\n    if (window.activeQueries[methodName]) {\n      window.activeQueries[methodName].forEach(refetchQuery);\n    }\n  }\n};\n\nif (Meteor.isAppTest && global.window) {\n  global.window.refetchQueries = refetchQueries;\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/methods/index.js                                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./registerMethodDefinitions\", {\n  \"*\": \"*\"\n}, 0);\nmodule.link(\"./methods\", {\n  \"*\": \"*\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/methods/methodDefinitions.js                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  getMixpanelAuthorization: () => getMixpanelAuthorization,\n  getServerTime: () => getServerTime,\n  downloadPDF: () => downloadPDF,\n  addBorrower: () => addBorrower,\n  setUserToLoan: () => setUserToLoan,\n  removeBorrower: () => removeBorrower,\n  submitContactForm: () => submitContactForm,\n  addUserToDoc: () => addUserToDoc,\n  throwDevError: () => throwDevError,\n  setAdditionalDoc: () => setAdditionalDoc,\n  removeAdditionalDoc: () => removeAdditionalDoc,\n  migrateToLatest: () => migrateToLatest,\n  updateDocument: () => updateDocument,\n  updateDocumentUnset: () => updateDocumentUnset,\n  generateScenario: () => generateScenario\n});\nlet Match;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  }\n\n}, 0);\nlet Method;\nmodule.link(\"./methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 1);\nconst getMixpanelAuthorization = new Method({\n  name: 'getMixpanelAuthorization'\n});\nconst getServerTime = new Method({\n  name: 'getServerTime'\n});\nconst downloadPDF = new Method({\n  name: 'downloadPDF',\n  params: {\n    loanId: String,\n    type: String\n  }\n});\nconst addBorrower = new Method({\n  name: 'addBorrower',\n  params: {\n    loanId: String,\n    borrower: Match.Optional(Object)\n  }\n});\nconst setUserToLoan = new Method({\n  name: 'setUserToLoan',\n  params: {\n    loanId: String\n  }\n});\nconst removeBorrower = new Method({\n  name: 'removeBorrower',\n  params: {\n    loanId: String,\n    borrowerId: String\n  }\n});\nconst submitContactForm = new Method({\n  name: 'submitContactForm',\n  params: {\n    name: String,\n    email: String,\n    phoneNumber: String,\n    details: Match.Optional(String)\n  },\n  rateLimit: {\n    global: {\n      limit: 1,\n      timeRange: 5000\n    }\n  }\n});\nconst addUserToDoc = new Method({\n  name: 'addUserToDoc',\n  params: {\n    docId: String,\n    collection: String,\n    options: Object,\n    userId: String\n  }\n});\nconst throwDevError = new Method({\n  name: 'throwDevError',\n  params: {\n    promise: Match.Maybe(Boolean),\n    promiseNoReturn: Match.Maybe(Boolean)\n  }\n});\nconst setAdditionalDoc = new Method({\n  name: 'setAdditionalDoc',\n  params: {\n    collection: String,\n    id: String,\n    additionalDocId: String,\n    requiredByAdmin: Boolean,\n    label: Match.Optional(String),\n    category: Match.Optional(String)\n  }\n});\nconst removeAdditionalDoc = new Method({\n  name: 'removeAdditionalDoc',\n  params: {\n    collection: String,\n    id: String,\n    additionalDocId: String\n  }\n});\nconst migrateToLatest = new Method({\n  name: 'migrateToLatest'\n});\nconst updateDocument = new Method({\n  name: 'updateDocument',\n  params: {\n    collection: String,\n    docId: String,\n    object: Object\n  }\n});\nconst updateDocumentUnset = new Method({\n  name: 'updateDocumentUnset',\n  params: {\n    collection: String,\n    docId: String,\n    object: Object\n  }\n});\nconst generateScenario = new Method({\n  name: 'generateScenario',\n  params: {\n    scenario: Object\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methods.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/methods/methods.js                                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  Method: () => Method\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet Mutation;\nmodule.link(\"meteor/cultofcoders:mutations\", {\n  Mutation(v) {\n    Mutation = v;\n  }\n\n}, 1);\nlet Match, check;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  },\n\n  check(v) {\n    check = v;\n  }\n\n}, 2);\n\nif (Meteor.isTest) {\n  Mutation.isDebugEnabled = false;\n} else {\n  Mutation.isDebugEnabled = {\n    omit: ['analyticsPage', 'analyticsLogin']\n  };\n}\n\nclass Method extends Mutation {\n  run() {\n    let callParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const {\n      config\n    } = this;\n    let location;\n\n    if (Meteor.isClient && window && window.location) {\n      location = {\n        href: window.location.href,\n        host: window.location.host,\n        pathname: window.location.pathname\n      };\n    }\n\n    const aopData = {\n      config,\n      params: callParams\n    };\n    Mutation.callAOP.executeBefores(aopData);\n    this.callAOP.executeBefores(aopData);\n    const {\n      name,\n      params\n    } = config;\n    const additionalData = {\n      location\n    };\n    return new Promise((resolve, reject) => {\n      Meteor.apply(name, [callParams, additionalData], options, (error, result) => {\n        const aopData = {\n          config,\n          params: callParams,\n          result,\n          error\n        };\n        Mutation.callAOP.executeAfters(aopData);\n        this.callAOP.executeAfters(aopData);\n\n        if (error) {\n          reject(error);\n        } else {\n          resolve(result);\n        }\n      });\n    });\n  }\n\n  setHandler(fn) {\n    const {\n      config\n    } = this;\n    const {\n      name,\n      params\n    } = config;\n    const self = this;\n    Meteor.methods({\n      [name]() {\n        let params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        let additionalData = arguments.length > 1 ? arguments[1] : undefined;\n        check(additionalData, Object);\n        check(additionalData.location, Match.Maybe({\n          href: Match.Maybe(String),\n          host: Match.Maybe(String),\n          pathname: Match.Maybe(String)\n        }));\n\n        if (Meteor.isServer && additionalData.location) {\n          const {\n            setClientUrl\n          } = require(\"../../utils/server/getClientUrl\");\n\n          setClientUrl(additionalData.location);\n        }\n\n        if (config.validate) {\n          config.validate(params);\n        } else if (config.params) {\n          check(params, config.params);\n        }\n\n        let aopData = {\n          context: this,\n          config,\n          params\n        };\n        Mutation.executionAOP.executeBefores(aopData);\n        self.executionAOP.executeBefores(aopData);\n        let error;\n        let result;\n\n        try {\n          result = fn.call(null, this, params);\n        } catch (e) {\n          error = e;\n        }\n\n        aopData = {\n          context: this,\n          config,\n          params,\n          result,\n          error\n        };\n        Mutation.executionAOP.executeAfters(aopData);\n        self.executionAOP.executeAfters(aopData);\n\n        if (error) {\n          throw error;\n        }\n\n        return result;\n      }\n\n    });\n  }\n\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"registerMethodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/methods/registerMethodDefinitions.js                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"../borrowers/methodDefinitions\", {\n  \"*\": \"*\"\n}, 0);\nmodule.link(\"../contacts/methodDefinitions\", {\n  \"*\": \"*\"\n}, 1);\nmodule.link(\"../email/methodDefinitions\", {\n  \"*\": \"*\"\n}, 2);\nmodule.link(\"../files/methodDefinitions\", {\n  \"*\": \"*\"\n}, 3);\nmodule.link(\"../impersonation/methodDefinitions\", {\n  \"*\": \"*\"\n}, 4);\nmodule.link(\"../interestRates/methodDefinitions\", {\n  \"*\": \"*\"\n}, 5);\nmodule.link(\"../irs10y/methodDefinitions\", {\n  \"*\": \"*\"\n}, 6);\nmodule.link(\"../lenderRules/methodDefinitions\", {\n  \"*\": \"*\"\n}, 7);\nmodule.link(\"../lenders/methodDefinitions\", {\n  \"*\": \"*\"\n}, 8);\nmodule.link(\"../loans/methodDefinitions\", {\n  \"*\": \"*\"\n}, 9);\nmodule.link(\"../lots/methodDefinitions\", {\n  \"*\": \"*\"\n}, 10);\nmodule.link(\"../mortgageNotes/methodDefinitions\", {\n  \"*\": \"*\"\n}, 11);\nmodule.link(\"../offers/methodDefinitions\", {\n  \"*\": \"*\"\n}, 12);\nmodule.link(\"../organisations/methodDefinitions\", {\n  \"*\": \"*\"\n}, 13);\nmodule.link(\"../pdf/methodDefinitions\", {\n  \"*\": \"*\"\n}, 14);\nmodule.link(\"../promotionLots/methodDefinitions\", {\n  \"*\": \"*\"\n}, 15);\nmodule.link(\"../promotionOptions/methodDefinitions\", {\n  \"*\": \"*\"\n}, 16);\nmodule.link(\"../promotions/methodDefinitions\", {\n  \"*\": \"*\"\n}, 17);\nmodule.link(\"../properties/methodDefinitions\", {\n  \"*\": \"*\"\n}, 18);\nmodule.link(\"../slack/methodDefinitions\", {\n  \"*\": \"*\"\n}, 19);\nmodule.link(\"../tasks/methodDefinitions\", {\n  \"*\": \"*\"\n}, 20);\nmodule.link(\"../users/methodDefinitions\", {\n  \"*\": \"*\"\n}, 21);\nmodule.link(\"../analytics/methodDefinitions\", {\n  \"*\": \"*\"\n}, 22);\nmodule.link(\"./methodDefinitions\", {\n  \"*\": \"*\"\n}, 23);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"notifications\":{\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/notifications/index.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./notifications\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"links.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/notifications/links.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Notifications;\nmodule.link(\"./notifications\", {\n  default(v) {\n    Notifications = v;\n  }\n\n}, 0);\nlet Users;\nmodule.link(\"../users\", {\n  default(v) {\n    Users = v;\n  }\n\n}, 1);\nlet Activities;\nmodule.link(\"../activities\", {\n  default(v) {\n    Activities = v;\n  }\n\n}, 2);\nlet Tasks;\nmodule.link(\"../tasks\", {\n  default(v) {\n    Tasks = v;\n  }\n\n}, 3);\nlet Revenues;\nmodule.link(\"../revenues\", {\n  default(v) {\n    Revenues = v;\n  }\n\n}, 4);\nNotifications.addLinks({\n  recipients: {\n    collection: Users,\n    field: 'recipientLinks',\n    type: 'many',\n    metadata: true\n  },\n  activity: {\n    collection: Activities,\n    field: 'activityLink',\n    type: 'one',\n    metadata: true\n  },\n  task: {\n    collection: Tasks,\n    field: 'taskLink',\n    type: 'one',\n    metadata: true\n  },\n  revenue: {\n    collection: Revenues,\n    field: 'revenueLink',\n    type: 'one',\n    metadata: true\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"notificationConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/notifications/notificationConstants.js                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  NOTIFICATIONS_COLLECTION: () => NOTIFICATIONS_COLLECTION,\n  NOTIFICATION_QUERIES: () => NOTIFICATION_QUERIES\n});\nconst NOTIFICATIONS_COLLECTION = 'notifications';\nconst NOTIFICATION_QUERIES = {\n  ADMIN_NOTIFICATIONS: 'ADMIN_NOTIFICATIONS'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"notifications.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/notifications/notifications.js                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 1);\nlet createdAt, updatedAt;\nmodule.link(\"../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  }\n\n}, 2);\nlet NOTIFICATIONS_COLLECTION;\nmodule.link(\"./notificationConstants\", {\n  NOTIFICATIONS_COLLECTION(v) {\n    NOTIFICATIONS_COLLECTION = v;\n  }\n\n}, 3);\nconst Notifications = new Mongo.Collection(NOTIFICATIONS_COLLECTION);\nconst NotificationSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  recipientLinks: {\n    type: Array,\n    minCount: 1\n  },\n  'recipientLinks.$': Object,\n  'recipientLinks.$._id': String,\n  'recipientLinks.$.read': {\n    type: Boolean,\n    defaultValue: false\n  },\n  'recipientLinks.$.readDate': {\n    type: Date,\n    optional: true\n  },\n  'recipientLinks.$.snoozeDate': {\n    type: Date,\n    optional: true\n  },\n  taskLink: {\n    type: Object,\n    optional: true\n  },\n  'taskLink._id': String,\n  activityLink: {\n    type: Object,\n    optional: true\n  },\n  'activityLink._id': String,\n  revenueLink: {\n    type: Object,\n    optional: true\n  },\n  'revenueLink._id': String\n});\nNotifications.attachSchema(NotificationSchema);\nmodule.exportDefault(Notifications);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"reducers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/notifications/reducers.js                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet Notifications;\nmodule.link(\"./notifications\", {\n  default(v) {\n    Notifications = v;\n  }\n\n}, 0);\nlet LOANS_COLLECTION;\nmodule.link(\"../loans/loanConstants\", {\n  LOANS_COLLECTION(v) {\n    LOANS_COLLECTION = v;\n  }\n\n}, 1);\nNotifications.addReducers({\n  relatedDoc: {\n    body: {\n      activity: {\n        loan: {\n          name: 1\n        }\n      },\n      task: {\n        loan: {\n          name: 1\n        }\n      },\n      revenue: {\n        loan: {\n          name: 1\n        }\n      }\n    },\n    reduce: (_ref) => {\n      let {\n        activity,\n        task,\n        revenue\n      } = _ref;\n\n      if (activity) {\n        if (activity.loan) {\n          return (0, _objectSpread2.default)({}, activity.loan, {\n            collection: LOANS_COLLECTION\n          });\n        }\n      }\n\n      if (task) {\n        if (task.loan) {\n          return (0, _objectSpread2.default)({}, task.loan, {\n            collection: LOANS_COLLECTION\n          });\n        }\n      }\n\n      if (revenue) {\n        if (revenue.loan) {\n          return (0, _objectSpread2.default)({}, revenue.loan, {\n            collection: LOANS_COLLECTION\n          });\n        }\n      }\n    }\n  },\n  title: {\n    body: {\n      task: {\n        title: 1,\n        dueAt: 1\n      },\n      activity: {\n        title: 1,\n        date: 1\n      },\n      revenue: {\n        type: 1,\n        description: 1\n      }\n    },\n    reduce: (_ref2) => {\n      let {\n        task,\n        activity,\n        revenue\n      } = _ref2;\n      let title;\n\n      if (task) {\n        title = task.title;\n      } else if (activity) {\n        title = activity.title;\n      } else if (revenue) {\n        title = \"Paiement \\\"\".concat(revenue.type, \"\\\" attendu\");\n      } else {\n        title = \"L'orgine de la notification a été supprimée\";\n      }\n\n      return title;\n    }\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"offers\":{\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/offers/index.js                                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  offerMethods: () => offerMethods\n});\nlet methodDefinitions;\nmodule.link(\"./methodDefinitions\", {\n  \"*\"(v) {\n    methodDefinitions = v;\n  }\n\n}, 0);\nmodule.link(\"./methodDefinitions\", {\n  \"*\": \"*\"\n}, 1);\nmodule.link(\"./offers\", {\n  default: \"default\"\n}, 2);\nconst offerMethods = methodDefinitions;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"links.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/offers/links.js                                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Offers;\nmodule.link(\"./offers\", {\n  default(v) {\n    Offers = v;\n  }\n\n}, 0);\nlet Users, Lenders;\nmodule.link(\"..\", {\n  Users(v) {\n    Users = v;\n  },\n\n  Lenders(v) {\n    Lenders = v;\n  }\n\n}, 1);\nOffers.addLinks({\n  user: {\n    field: 'userId',\n    collection: Users,\n    type: 'one'\n  },\n  lender: {\n    field: 'lenderLink',\n    collection: Lenders,\n    type: 'one',\n    metadata: true,\n    denormalize: {\n      field: 'lenderCache',\n      body: {\n        loanLink: 1\n      }\n    }\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/offers/methodDefinitions.js                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  offerInsert: () => offerInsert,\n  offerUpdate: () => offerUpdate,\n  offerDelete: () => offerDelete,\n  offerSendFeedback: () => offerSendFeedback\n});\nlet Match;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  }\n\n}, 0);\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 1);\nconst offerInsert = new Method({\n  name: 'offerInsert',\n  params: {\n    offer: Object\n  }\n});\nconst offerUpdate = new Method({\n  name: 'offerUpdate',\n  params: {\n    offerId: String,\n    object: Object\n  }\n});\nconst offerDelete = new Method({\n  name: 'offerDelete',\n  params: {\n    offerId: String\n  }\n});\nconst offerSendFeedback = new Method({\n  name: 'offerSendFeedback',\n  params: {\n    offerId: String,\n    feedback: String,\n    saveFeedback: Match.Maybe(Boolean)\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"offerConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/offers/offerConstants.js                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  OFFER_TYPE: () => OFFER_TYPE,\n  OFFERS_COLLECTION: () => OFFERS_COLLECTION,\n  OFFER_QUERIES: () => OFFER_QUERIES\n});\nconst OFFER_TYPE = {\n  STANDARD: 'STANDARD',\n  COUNTERPARTS: 'COUNTERPARTS'\n};\nconst OFFERS_COLLECTION = 'offers';\nconst OFFER_QUERIES = {\n  LOAN_OFFERS: 'LOAN_OFFERS',\n  ADMIN_OFFERS: 'ADMIN_OFFERS'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"offers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/offers/offers.js                                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  OfferSchema: () => OfferSchema,\n  AdminOfferSchema: () => AdminOfferSchema\n});\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 1);\nlet INTEREST_RATES, OFFERS_COLLECTION;\nmodule.link(\"../constants\", {\n  INTEREST_RATES(v) {\n    INTEREST_RATES = v;\n  },\n\n  OFFERS_COLLECTION(v) {\n    OFFERS_COLLECTION = v;\n  }\n\n}, 2);\nlet createdAt, updatedAt, percentageField, moneyField, cacheField;\nmodule.link(\"../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  },\n\n  percentageField(v) {\n    percentageField = v;\n  },\n\n  moneyField(v) {\n    moneyField = v;\n  },\n\n  cacheField(v) {\n    cacheField = v;\n  }\n\n}, 3);\nconst Offers = new Mongo.Collection(OFFERS_COLLECTION); // Prevent all client side modifications of mongoDB\n\nOffers.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true\n});\nOffers.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false\n});\nconst OfferSchema = new SimpleSchema((0, _objectSpread2.default)({\n  createdAt,\n  updatedAt,\n  organisationLink: {\n    type: Object,\n    optional: true\n  },\n  'organisationLink._id': {\n    type: String,\n    optional: true\n  },\n  contactLink: {\n    type: Object,\n    optional: true\n  },\n  'contactLink._id': String,\n  'contactLink.feedback': {\n    type: String,\n    optional: true\n  },\n  maxAmount: moneyField,\n  amortizationGoal: percentageField,\n  amortizationYears: {\n    type: SimpleSchema.Integer,\n    min: 0,\n    max: 100,\n    optional: true\n  },\n  fees: moneyField,\n  epotekFees: moneyField\n}, Object.values(INTEREST_RATES).reduce((accumulator, interestKey) => (0, _objectSpread2.default)({}, accumulator, {\n  [interestKey]: percentageField\n}), {}), {\n  conditions: {\n    type: Array,\n    optional: true,\n    defaultValue: []\n  },\n  'conditions.$': {\n    type: String,\n    optional: true\n  },\n  lenderLink: {\n    type: Object,\n    optional: true\n  },\n  'lenderLink._id': {\n    type: String,\n    optional: true\n  },\n  feedback: {\n    type: Object,\n    optional: true\n  },\n  'feedback.message': {\n    type: String,\n    optional: true\n  },\n  'feedback.date': {\n    type: Date,\n    optional: true\n  },\n  withCounterparts: {\n    type: Boolean,\n    optional: true\n  },\n  enableOffer: {\n    type: Boolean,\n    defaultValue: true,\n    optional: true\n  },\n  lenderCache: cacheField\n}));\nconst AdminOfferSchema = OfferSchema.omit('lenderLink', 'organisationLink', 'contactLink', 'createdAt', 'updatedAt', 'feedback', 'lenderCache');\n// Attach schema\nOffers.attachSchema(OfferSchema);\nmodule.exportDefault(Offers);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"queries.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/offers/queries.js                                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  adminOffers: () => adminOffers,\n  loanOffers: () => loanOffers\n});\nlet fullOffer;\nmodule.link(\"../fragments\", {\n  fullOffer(v) {\n    fullOffer = v;\n  }\n\n}, 0);\nlet OFFER_QUERIES;\nmodule.link(\"./offerConstants\", {\n  OFFER_QUERIES(v) {\n    OFFER_QUERIES = v;\n  }\n\n}, 1);\nlet Offers;\nmodule.link(\".\", {\n  default(v) {\n    Offers = v;\n  }\n\n}, 2);\nconst adminOffers = Offers.createQuery(OFFER_QUERIES.ADMIN_OFFERS, fullOffer());\nconst loanOffers = Offers.createQuery(OFFER_QUERIES.LOAN_OFFERS, (0, _objectSpread2.default)({}, fullOffer(), {\n  $options: {\n    sort: {\n      createdAt: -1\n    }\n  }\n}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"reducers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/offers/reducers.js                                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Offers;\nmodule.link(\".\", {\n  default(v) {\n    Offers = v;\n  }\n\n}, 0);\nOffers.addReducers({\n  loanId: {\n    body: {\n      lender: {\n        loan: {\n          _id: 1\n        }\n      }\n    },\n    reduce: (_ref) => {\n      let {\n        lender: {\n          loan: {\n            _id: loanId\n          }\n        }\n      } = _ref;\n      return loanId;\n    }\n  },\n  organisation: {\n    body: {\n      lender: {\n        organisation: {\n          name: 1,\n          logo: 1\n        }\n      }\n    },\n    reduce: (_ref2) => {\n      let {\n        lender: {\n          organisation\n        }\n      } = _ref2;\n      return organisation;\n    }\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"organisations\":{\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/organisations/index.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./organisations\", {\n  default: \"default\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"links.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/organisations/links.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet LinkInitializer;\nmodule.link(\"../links/LinkInitializer\", {\n  default(v) {\n    LinkInitializer = v;\n  }\n\n}, 0);\nlet Contacts, Lenders, Users, LenderRules, Revenues, Tasks;\nmodule.link(\"..\", {\n  Contacts(v) {\n    Contacts = v;\n  },\n\n  Lenders(v) {\n    Lenders = v;\n  },\n\n  Users(v) {\n    Users = v;\n  },\n\n  LenderRules(v) {\n    LenderRules = v;\n  },\n\n  Revenues(v) {\n    Revenues = v;\n  },\n\n  Tasks(v) {\n    Tasks = v;\n  }\n\n}, 1);\nlet Organisations;\nmodule.link(\"./organisations\", {\n  default(v) {\n    Organisations = v;\n  }\n\n}, 2);\nOrganisations.addLinks({\n  contacts: {\n    collection: Contacts,\n    field: 'contactIds',\n    type: 'many',\n    metadata: true\n  },\n  lenders: {\n    collection: Lenders,\n    inversedBy: 'organisation'\n  },\n  users: {\n    collection: Users,\n    field: 'userLinks',\n    type: 'many',\n    metadata: true\n  },\n  lenderRules: {\n    collection: LenderRules,\n    inversedBy: 'organisation',\n    autoremove: true\n  },\n  referredCustomers: {\n    collection: Users,\n    inversedBy: 'referredByOrganisation',\n    type: 'many'\n  },\n  revenues: {\n    collection: Revenues,\n    inversedBy: 'organisations',\n    type: 'many'\n  },\n  tasks: {\n    inversedBy: 'organisation',\n    collection: Tasks,\n    autoremove: true\n  }\n});\nLinkInitializer.inversedInit(() => {\n  Organisations.addLinks({\n    sourceOfRevenues: {\n      collection: Revenues,\n      inversedBy: 'organisations'\n    }\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/organisations/methodDefinitions.js                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  organisationInsert: () => organisationInsert,\n  organisationUpdate: () => organisationUpdate,\n  organisationRemove: () => organisationRemove,\n  addContactToOrgnaisation: () => addContactToOrgnaisation,\n  addUserToOrganisation: () => addUserToOrganisation,\n  removeUserFromOrganisation: () => removeUserFromOrganisation,\n  setCommissionRates: () => setCommissionRates\n});\nlet Match;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  }\n\n}, 0);\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 1);\nconst organisationInsert = new Method({\n  name: 'organisationInsert',\n  params: {\n    organisation: Object\n  }\n});\nconst organisationUpdate = new Method({\n  name: 'organisationUpdate',\n  params: {\n    organisationId: String,\n    object: Object\n  }\n});\nconst organisationRemove = new Method({\n  name: 'organisationRemove',\n  params: {\n    organisationId: String\n  }\n});\nconst addContactToOrgnaisation = new Method({\n  name: 'addContactToOrganisation',\n  params: {\n    organisationId: String,\n    contactId: String,\n    metadata: Object\n  }\n});\nconst addUserToOrganisation = new Method({\n  name: 'addUserToOrganisation',\n  params: {\n    organisationId: String,\n    userId: String,\n    metadata: Object\n  }\n});\nconst removeUserFromOrganisation = new Method({\n  name: 'removeUserFromOrganisation',\n  params: {\n    organisationId: String,\n    userId: String\n  }\n});\nconst setCommissionRates = new Method({\n  name: 'setCommissionRates',\n  params: {\n    organisationId: String,\n    commissionRates: Array\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"organisationConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/organisations/organisationConstants.js                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  ORGANISATIONS_COLLECTION: () => ORGANISATIONS_COLLECTION,\n  ORGANISATION_TYPES: () => ORGANISATION_TYPES,\n  ORGANISATION_QUERIES: () => ORGANISATION_QUERIES,\n  ORGANISATION_FEATURES: () => ORGANISATION_FEATURES,\n  ORGANISATION_TAGS: () => ORGANISATION_TAGS\n});\nconst ORGANISATIONS_COLLECTION = 'organisations';\nconst ORGANISATION_TYPES = {\n  BANK: 'BANK',\n  INSURANCE: 'INSURANCE',\n  PRIVATE_BANK: 'PRIVATE_BANK',\n  REAL_ESTATE_BROKER: 'REAL_ESTATE_BROKER',\n  NOTARY_OFFICE: 'NOTARY_OFFICE',\n  CONSTRUCTION_COMPANY: 'CONSTRUCTION_COMPANY',\n  DEVELOPER: 'DEVELOPER',\n  ARCHITECT: 'ARCHITECT',\n  OTHER: 'OTHER'\n};\nconst ORGANISATION_QUERIES = {\n  ADMIN_ORGANISATIONS: 'ADMIN_ORGANISATIONS',\n  FILES: 'FILES',\n  ORGANISATION_SEARCH: 'ORGANISATION_SEARCH',\n  PRO_ORGANISATION: 'PRO_ORGANISATION',\n  USER_ORGANISATIONS: 'USER_ORGANISATIONS'\n};\nconst ORGANISATION_FEATURES = {\n  LENDER: 'LENDER',\n  PRO: 'PRO'\n};\nconst ORGANISATION_TAGS = {\n  CH_PREMIUM: 'CH_PREMIUM',\n  CH_RETAIL: 'CH_RETAIL',\n  FR_RETAIL: 'FR_RETAIL',\n  FR_PREMIUM: 'FR_PREMIUM',\n  YACHTING: 'YACHTING',\n  HELICOPTERS_LEASING: 'HELICOPTERS_LEASING',\n  LBO: 'LBO'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"organisations.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/organisations/organisations.js                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  OrganisationSchema: () => OrganisationSchema\n});\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 1);\nlet address, percentageField, moneyField, documentsField;\nmodule.link(\"../helpers/sharedSchemas\", {\n  address(v) {\n    address = v;\n  },\n\n  percentageField(v) {\n    percentageField = v;\n  },\n\n  moneyField(v) {\n    moneyField = v;\n  },\n\n  documentsField(v) {\n    documentsField = v;\n  }\n\n}, 2);\nlet ORGANISATIONS_COLLECTION, ORGANISATION_TYPES, ORGANISATION_FEATURES, ORGANISATION_TAGS;\nmodule.link(\"./organisationConstants\", {\n  ORGANISATIONS_COLLECTION(v) {\n    ORGANISATIONS_COLLECTION = v;\n  },\n\n  ORGANISATION_TYPES(v) {\n    ORGANISATION_TYPES = v;\n  },\n\n  ORGANISATION_FEATURES(v) {\n    ORGANISATION_FEATURES = v;\n  },\n\n  ORGANISATION_TAGS(v) {\n    ORGANISATION_TAGS = v;\n  }\n\n}, 3);\n// console.trace();\nconst Organisations = new Mongo.Collection(ORGANISATIONS_COLLECTION);\nOrganisations.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true\n});\nOrganisations.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false\n});\nconst OrganisationSchema = new SimpleSchema((0, _objectSpread2.default)({\n  name: {\n    type: String,\n    uniforms: {\n      placeholder: 'Crédit Suisse'\n    },\n    unique: true\n  },\n  type: {\n    type: String,\n    allowedValues: Object.values(ORGANISATION_TYPES),\n    uniforms: {\n      displayEmpty: false\n    }\n  },\n  features: {\n    type: Array,\n    optional: true,\n    defaultValue: [],\n    uniforms: {\n      placeholder: null\n    }\n  },\n  'features.$': {\n    type: String,\n    allowedValues: Object.values(ORGANISATION_FEATURES)\n  },\n  logo: {\n    type: String,\n    optional: true\n  }\n}, address, {\n  contactIds: {\n    type: Array,\n    defaultValue: []\n  },\n  'contactIds.$': Object,\n  'contactIds.$._id': {\n    type: String,\n    optional: true\n  },\n  'contactIds.$.title': {\n    type: String,\n    optional: true\n  },\n  'contactIds.$.useSameAddress': {\n    type: Boolean,\n    optional: true\n  },\n  tags: {\n    type: Array,\n    optional: true,\n    defaultValue: [],\n    uniforms: {\n      placeholder: null\n    }\n  },\n  'tags.$': {\n    type: String,\n    allowedValues: Object.values(ORGANISATION_TAGS)\n  },\n  userLinks: {\n    type: Array,\n    defaultValue: []\n  },\n  'userLinks.$': Object,\n  'userLinks.$._id': {\n    type: String,\n    optional: true\n  },\n  'userLinks.$.title': {\n    type: String,\n    optional: true\n  },\n  'userLinks.$.isMain': {\n    type: Boolean,\n    optional: true\n  },\n  'userLinks.$.shareCustomers': {\n    type: Boolean,\n    optional: true\n  },\n  commissionRates: {\n    type: Array,\n    defaultValue: []\n  },\n  'commissionRates.$': Object,\n  'commissionRates.$.rate': percentageField,\n  'commissionRates.$.threshold': moneyField,\n  documents: documentsField,\n  lenderRulesCount: {\n    type: Number,\n    optional: true\n  }\n}));\nOrganisations.attachSchema(OrganisationSchema);\nmodule.exportDefault(Organisations);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"queries.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/organisations/queries.js                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  adminOrganisations: () => adminOrganisations,\n  organisationSearch: () => organisationSearch,\n  proOrganisation: () => proOrganisation,\n  userOrganisations: () => userOrganisations\n});\nlet createSearchFilters;\nmodule.link(\"../helpers\", {\n  createSearchFilters(v) {\n    createSearchFilters = v;\n  }\n\n}, 0);\nlet fullOrganisation, userOrganisation;\nmodule.link(\"../fragments\", {\n  fullOrganisation(v) {\n    fullOrganisation = v;\n  },\n\n  userOrganisation(v) {\n    userOrganisation = v;\n  }\n\n}, 1);\nlet ORGANISATION_QUERIES, ORGANISATION_FEATURES;\nmodule.link(\"./organisationConstants\", {\n  ORGANISATION_QUERIES(v) {\n    ORGANISATION_QUERIES = v;\n  },\n\n  ORGANISATION_FEATURES(v) {\n    ORGANISATION_FEATURES = v;\n  }\n\n}, 2);\nlet Organisations;\nmodule.link(\".\", {\n  default(v) {\n    Organisations = v;\n  }\n\n}, 3);\nconst adminOrganisations = Organisations.createQuery(ORGANISATION_QUERIES.ADMIN_ORGANISATIONS, fullOrganisation(), {\n  scoped: true\n});\nconst organisationSearch = Organisations.createQuery(ORGANISATION_QUERIES.ORGANISATION_SEARCH, {\n  $filter(_ref) {\n    let {\n      filters,\n      params: {\n        searchQuery\n      }\n    } = _ref;\n    Object.assign(filters, createSearchFilters(['name', '_id', 'type'], searchQuery));\n  },\n\n  name: 1,\n  $options: {\n    sort: {\n      name: 1\n    },\n    limit: 5\n  }\n});\nconst proOrganisation = Organisations.createQuery(ORGANISATION_QUERIES.PRO_ORGANISATION, fullOrganisation());\nconst userOrganisations = Organisations.createQuery(ORGANISATION_QUERIES.USER_ORGANISATIONS, (0, _objectSpread2.default)({\n  $filter(_ref2) {\n    let {\n      filters\n    } = _ref2;\n    filters.features = {\n      $in: [ORGANISATION_FEATURES.LENDER]\n    };\n  },\n\n  $options: {\n    sort: {\n      name: 1\n    }\n  }\n}, userOrganisation()));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"reducers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/organisations/reducers.js                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet addressReducer;\nmodule.link(\"../reducers/addressReducer\", {\n  default(v) {\n    addressReducer = v;\n  }\n\n}, 0);\nlet Organisations;\nmodule.link(\"./organisations\", {\n  default(v) {\n    Organisations = v;\n  }\n\n}, 1);\nlet fullOffer;\nmodule.link(\"../fragments\", {\n  fullOffer(v) {\n    fullOffer = v;\n  }\n\n}, 2);\nOrganisations.addReducers((0, _objectSpread2.default)({}, addressReducer, {\n  offers: {\n    body: {\n      lenders: {\n        offers: fullOffer()\n      }\n    },\n    reduce: (_ref) => {\n      let {\n        lenders = []\n      } = _ref;\n      return lenders.reduce((allOffers, _ref2) => {\n        let {\n          offers = []\n        } = _ref2;\n        return [...allOffers, ...offers];\n      }, []);\n    }\n  },\n  offerCount: {\n    body: {\n      lenders: {\n        offers: {\n          _id: 1\n        }\n      }\n    },\n    reduce: (_ref3) => {\n      let {\n        lenders = []\n      } = _ref3;\n      return lenders.reduce((tot, _ref4) => {\n        let {\n          offers = []\n        } = _ref4;\n        return tot + offers.length;\n      }, 0);\n    }\n  }\n}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"pdf\":{\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/pdf/methodDefinitions.js                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  generatePDF: () => generatePDF\n});\nlet Match;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  }\n\n}, 0);\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 1);\nlet PDF_TYPES;\nmodule.link(\"./pdfConstants\", {\n  PDF_TYPES(v) {\n    PDF_TYPES = v;\n  }\n\n}, 2);\nconst generatePDF = new Method({\n  name: 'generatePDF',\n  params: {\n    type: Match.OneOf(...Object.values(PDF_TYPES)),\n    params: Object,\n    options: Object,\n    htmlOnly: Match.Maybe(Boolean)\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"pdfConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/pdf/pdfConstants.js                                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  PDF_TYPES: () => PDF_TYPES,\n  TEMPLATES: () => TEMPLATES,\n  A4_HEIGHT: () => A4_HEIGHT,\n  MARGIN_TOP: () => MARGIN_TOP,\n  MARGIN_BOTTOM: () => MARGIN_BOTTOM,\n  MARGIN_SIDE: () => MARGIN_SIDE,\n  WIGGLE_ROOM: () => WIGGLE_ROOM,\n  CONTENT_HEIGHT: () => CONTENT_HEIGHT,\n  BORDER_BLUE: () => BORDER_BLUE,\n  BORDER_GREY: () => BORDER_GREY\n});\nconst PDF_TYPES = {\n  LOAN: 'LOAN'\n};\nconst TEMPLATES = {\n  [PDF_TYPES.LOAN]: {\n    name: 1,\n    purchaseType: 1,\n    residenceType: 1,\n    borrowers: [{\n      gender: 1,\n      zipCode: {\n        $or: 'sameAddress'\n      },\n      city: {\n        $or: 'sameAddress'\n      }\n    }],\n    structure: {\n      ownFunds: [1],\n      property: {\n        propertyType: 1,\n        address1: 1,\n        zipCode: 1,\n        city: 1\n      }\n    },\n    user: {\n      assignedEmployee: {\n        name: 1,\n        email: 1,\n        phoneNumbers: [1]\n      }\n    }\n  }\n};\nconst A4_HEIGHT = 295;\nconst MARGIN_TOP = 10;\nconst MARGIN_BOTTOM = 15;\nconst MARGIN_SIDE = 15;\nconst WIGGLE_ROOM = 2;\nconst CONTENT_HEIGHT = A4_HEIGHT - MARGIN_BOTTOM - MARGIN_TOP - WIGGLE_ROOM;\nconst BORDER_BLUE = '#213875';\nconst BORDER_GREY = '#DEE2E6';\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"reducers\":{\"addressReducer.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/reducers/addressReducer.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nconst addressReducer = {\n  address: {\n    body: {\n      address1: 1,\n      zipCode: 1,\n      city: 1\n    },\n\n    reduce(object) {\n      const {\n        address1,\n        zipCode,\n        city\n      } = object;\n      return address1 ? \"\".concat(address1, \", \").concat(zipCode, \" \").concat(city) : 'Aucune addresse indiquée';\n    }\n\n  }\n};\nmodule.exportDefault(addressReducer);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"registerReducers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/reducers/registerReducers.js                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"../borrowers/reducers\");\nmodule.link(\"../contacts/reducers\");\nmodule.link(\"../loans/reducers\");\nmodule.link(\"../lots/reducers\");\nmodule.link(\"../notifications/reducers\");\nmodule.link(\"../offers/reducers\");\nmodule.link(\"../organisations/reducers\");\nmodule.link(\"../promotionLots/reducers\");\nmodule.link(\"../promotionOptions/reducers\");\nmodule.link(\"../promotions/reducers\");\nmodule.link(\"../properties/reducers\");\nmodule.link(\"../users/reducers\");\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"security\":{\"constants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/security/constants.js                                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  DOCUMENT_USER_PERMISSIONS: () => DOCUMENT_USER_PERMISSIONS\n});\nconst DOCUMENT_USER_PERMISSIONS = {\n  MODIFY: 'MODIFY',\n  READ: 'READ'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"slack\":{\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/slack/methodDefinitions.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  notifyAssignee: () => notifyAssignee,\n  notifyOfUpload: () => notifyOfUpload,\n  logError: () => logError\n});\nlet Match;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  }\n\n}, 0);\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 1);\nconst notifyAssignee = new Method({\n  name: 'notifyAssignee',\n  params: {\n    message: Match.Optional(String),\n    title: Match.Optional(String)\n  }\n});\nconst notifyOfUpload = new Method({\n  name: 'notifyOfUpload',\n  params: {\n    docLabel: String,\n    fileName: String,\n    loanId: Match.Optional(String)\n  }\n});\nconst logError = new Method({\n  name: 'logError',\n  params: {\n    error: Match.Any,\n    additionalData: Match.Maybe(Match.Any),\n    url: Match.Optional(String)\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"tasks\":{\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/tasks/index.js                                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  taskMethods: () => taskMethods\n});\nlet methodDefinitions;\nmodule.link(\"./methodDefinitions\", {\n  \"*\"(v) {\n    methodDefinitions = v;\n  }\n\n}, 0);\nmodule.link(\"./methodDefinitions\", {\n  \"*\": \"*\"\n}, 1);\nmodule.link(\"./tasks\", {\n  default: \"default\"\n}, 2);\nconst taskMethods = methodDefinitions;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"links.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/tasks/links.js                                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Tasks;\nmodule.link(\"./tasks\", {\n  default(v) {\n    Tasks = v;\n  }\n\n}, 0);\nlet Users, Loans;\nmodule.link(\"..\", {\n  Users(v) {\n    Users = v;\n  },\n\n  Loans(v) {\n    Loans = v;\n  }\n\n}, 1);\nlet Notifications;\nmodule.link(\"../notifications\", {\n  default(v) {\n    Notifications = v;\n  }\n\n}, 2);\nlet Promotions;\nmodule.link(\"../promotions\", {\n  default(v) {\n    Promotions = v;\n  }\n\n}, 3);\nlet Organisations;\nmodule.link(\"../organisations\", {\n  default(v) {\n    Organisations = v;\n  }\n\n}, 4);\nlet Lenders;\nmodule.link(\"../lenders\", {\n  default(v) {\n    Lenders = v;\n  }\n\n}, 5);\nTasks.addLinks({\n  assignee: {\n    field: 'assigneeLink',\n    collection: Users,\n    type: 'one',\n    metadata: true\n  },\n  loan: {\n    field: 'loanLink',\n    collection: Loans,\n    type: 'one',\n    metadata: true\n  },\n  user: {\n    field: 'userLink',\n    collection: Users,\n    type: 'one',\n    metadata: true\n  },\n  promotion: {\n    field: 'promotionLink',\n    collection: Promotions,\n    type: 'one',\n    metadata: true\n  },\n  organisation: {\n    field: 'organisationLink',\n    collection: Organisations,\n    type: 'one',\n    metadata: true\n  },\n  lender: {\n    field: 'lenderLink',\n    collection: Lenders,\n    type: 'one',\n    metadata: true\n  },\n  notifications: {\n    collection: Notifications,\n    inversedBy: 'task',\n    autoremove: true\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/tasks/methodDefinitions.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  taskInsert: () => taskInsert,\n  taskUpdate: () => taskUpdate,\n  taskComplete: () => taskComplete,\n  taskChangeStatus: () => taskChangeStatus,\n  setAssigneeOfTask: () => setAssigneeOfTask\n});\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 0);\nconst taskInsert = new Method({\n  name: 'taskInsert',\n  params: {\n    object: Object\n  }\n});\nconst taskUpdate = new Method({\n  name: 'taskUpdate',\n  params: {\n    taskId: String,\n    object: Object\n  }\n});\nconst taskComplete = new Method({\n  name: 'taskComplete',\n  params: {\n    taskId: String\n  }\n});\nconst taskChangeStatus = new Method({\n  name: 'taskChangeStatus',\n  params: {\n    taskId: String,\n    newStatus: String\n  }\n});\nconst setAssigneeOfTask = new Method({\n  name: 'setAssigneeOfTask',\n  params: {\n    taskId: String,\n    newAssigneeId: String\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"taskConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/tasks/taskConstants.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  TASKS_COLLECTION: () => TASKS_COLLECTION,\n  TASK_STATUS: () => TASK_STATUS,\n  TASK_QUERIES: () => TASK_QUERIES,\n  TASK_PRIORITIES: () => TASK_PRIORITIES\n});\nconst TASKS_COLLECTION = 'tasks';\nconst TASK_STATUS = {\n  ACTIVE: 'ACTIVE',\n  COMPLETED: 'COMPLETED',\n  CANCELLED: 'CANCELLED'\n};\nconst TASK_QUERIES = {\n  TASKS: 'TASKS',\n  UNASSIGNED_TASKS: 'UNASSIGNED_TASKS',\n  TASKS_FOR_DOC: 'TASKS_FOR_DOC',\n  SIDENAV_TASKS: 'SIDENAV_TASKS'\n};\nconst TASK_PRIORITIES = {\n  DEFAULT: 'DEFAULT',\n  HIGH: 'HIGH'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"tasks.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/tasks/tasks.js                                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  TasksSchema: () => TasksSchema\n});\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 0);\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 1);\nlet createdAt, updatedAt;\nmodule.link(\"../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  }\n\n}, 2);\nlet TASK_STATUS, TASKS_COLLECTION, TASK_PRIORITIES;\nmodule.link(\"./taskConstants\", {\n  TASK_STATUS(v) {\n    TASK_STATUS = v;\n  },\n\n  TASKS_COLLECTION(v) {\n    TASKS_COLLECTION = v;\n  },\n\n  TASK_PRIORITIES(v) {\n    TASK_PRIORITIES = v;\n  }\n\n}, 3);\nconst Tasks = new Mongo.Collection(TASKS_COLLECTION); // Prevent all client side modifications of mongoDB\n\nTasks.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true\n});\nTasks.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false\n});\nconst TasksSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  status: {\n    type: String,\n    defaultValue: TASK_STATUS.ACTIVE,\n    allowedValues: Object.values(TASK_STATUS)\n  },\n  completedAt: {\n    type: Date,\n    optional: true\n  },\n  dueAt: {\n    type: Date,\n    optional: true\n  },\n  createdBy: {\n    type: String,\n    optional: true,\n\n    autoValue() {\n      if (this.isInsert) {\n        return this.userId;\n      }\n\n      this.unset();\n    }\n\n  },\n  assigneeLink: {\n    type: Object,\n    optional: true\n  },\n  'assigneeLink._id': {\n    type: String,\n    optional: true\n  },\n  title: {\n    type: String,\n    optional: true\n  },\n  description: {\n    type: String,\n    optional: true\n  },\n  loanLink: {\n    type: Object,\n    optional: true\n  },\n  'loanLink._id': {\n    type: String,\n    optional: true\n  },\n  userLink: {\n    type: Object,\n    optional: true\n  },\n  'userLink._id': {\n    type: String,\n    optional: true\n  },\n  promotionLink: {\n    type: Object,\n    optional: true\n  },\n  'promotionLink._id': {\n    type: String,\n    optional: true\n  },\n  organisationLink: {\n    type: Object,\n    optional: true\n  },\n  'organisationLink._id': {\n    type: String,\n    optional: true\n  },\n  lenderLink: {\n    type: Object,\n    optional: true\n  },\n  'lenderLink._id': {\n    type: String,\n    optional: true\n  },\n  isPrivate: {\n    type: Boolean,\n    defaultValue: false\n  },\n  priority: {\n    type: String,\n    defaultValue: TASK_PRIORITIES.DEFAULT,\n    allowedValues: Object.values(TASK_PRIORITIES)\n  }\n});\nTasks.attachSchema(TasksSchema);\nmodule.exportDefault(Tasks);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"test\":{\"fragments.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/test/fragments.spec.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet fragments;\nmodule.link(\"../fragments\", {\n  \"*\"(v) {\n    fragments = v;\n  }\n\n}, 1);\n\nconst checkFields = obj => {\n  Object.keys(obj).forEach(fieldName => {\n    const field = obj[fieldName];\n    expect(typeof field).to.not.equal('function', fieldName);\n    expect(field).to.not.equal(undefined, fieldName);\n\n    if (typeof field === 'object') {\n      checkFields(field);\n    }\n  });\n};\n\ndescribe('fragments', () => {\n  it('mortgageNote is defined', () => {\n    expect(fragments.loanBorrower().mortgageNotes).to.deep.include({\n      value: 1\n    });\n  });\n  it('works', () => {\n    expect(fragments.adminLoan()).to.deep.include({\n      status: 1\n    });\n  });\n  describe('fragments are all well defined and do not crash', () => {\n    Object.keys(fragments).forEach(fragmentName => {\n      it(fragmentName, () => {\n        const fragmentCreator = fragments[fragmentName];\n        const fragment = fragmentCreator();\n        checkFields(fragment);\n      });\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"updateWatchers\":{\"updateWatcherConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/updateWatchers/updateWatcherConstants.js                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  UPDATE_WATCHERS_COLLECTION: () => UPDATE_WATCHERS_COLLECTION\n});\nconst UPDATE_WATCHERS_COLLECTION = 'updateWatchers';\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"users\":{\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/users/index.js                                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  userMutations: () => userMutations\n});\nlet methodDefinitions;\nmodule.link(\"./methodDefinitions\", {\n  \"*\"(v) {\n    methodDefinitions = v;\n  }\n\n}, 0);\nmodule.link(\"./methodDefinitions\", {\n  \"*\": \"*\"\n}, 1);\nmodule.link(\"./users\", {\n  default: \"default\"\n}, 2);\nconst userMutations = methodDefinitions;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"links.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/users/links.js                                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Users;\nmodule.link(\"./users\", {\n  default(v) {\n    Users = v;\n  }\n\n}, 0);\nlet Loans, Offers, Borrowers, Properties, Promotions, Contacts, Organisations, Tasks;\nmodule.link(\"..\", {\n  Loans(v) {\n    Loans = v;\n  },\n\n  Offers(v) {\n    Offers = v;\n  },\n\n  Borrowers(v) {\n    Borrowers = v;\n  },\n\n  Properties(v) {\n    Properties = v;\n  },\n\n  Promotions(v) {\n    Promotions = v;\n  },\n\n  Contacts(v) {\n    Contacts = v;\n  },\n\n  Organisations(v) {\n    Organisations = v;\n  },\n\n  Tasks(v) {\n    Tasks = v;\n  }\n\n}, 1);\nconst assignedEmployeeCache = {\n  _id: 1,\n  firstName: 1,\n  lastName: 1\n};\nUsers.addLinks({\n  assignedEmployee: {\n    collection: Users,\n    field: 'assignedEmployeeId',\n    type: 'one',\n    denormalize: {\n      field: 'assignedEmployeeCache',\n      body: assignedEmployeeCache\n    }\n  },\n  assignedEndUsers: {\n    collection: Users,\n    inversedBy: 'assignedEmployee'\n  },\n  assignedPromotions: {\n    collection: Promotions,\n    inversedBy: 'assignedEmployee'\n  },\n  assignedTasks: {\n    collection: Tasks,\n    inversedBy: 'assignee'\n  },\n  borrowers: {\n    collection: Borrowers,\n    inversedBy: 'user',\n    autoremove: true\n  },\n  contact: {\n    collection: Contacts,\n    inversedBy: 'user'\n  },\n  loans: {\n    collection: Loans,\n    inversedBy: 'user',\n    autoremove: true\n  },\n  promotions: {\n    collection: Promotions,\n    inversedBy: 'users'\n  },\n  properties: {\n    collection: Properties,\n    inversedBy: 'user',\n    autoremove: true\n  },\n  offers: {\n    collection: Offers,\n    inversedBy: 'user'\n  },\n  organisations: {\n    collection: Organisations,\n    inversedBy: 'users'\n  },\n  proProperties: {\n    collection: Properties,\n    inversedBy: 'users'\n  },\n  referredByUser: {\n    collection: Users,\n    field: 'referredByUserLink',\n    type: 'one'\n  },\n  referredCustomers: {\n    collection: Users,\n    inversedBy: 'referredByUser',\n    type: 'many'\n  },\n  referredByOrganisation: {\n    collection: Organisations,\n    field: 'referredByOrganisationLink',\n    type: 'one'\n  },\n  tasks: {\n    collection: Tasks,\n    inversedBy: 'user',\n    autoremove: true\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"methodDefinitions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/users/methodDefinitions.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  doesUserExist: () => doesUserExist,\n  sendVerificationLink: () => sendVerificationLink,\n  assignAdminToUser: () => assignAdminToUser,\n  assignAdminToNewUser: () => assignAdminToNewUser,\n  setRole: () => setRole,\n  adminCreateUser: () => adminCreateUser,\n  updateUser: () => updateUser,\n  getUserByPasswordResetToken: () => getUserByPasswordResetToken,\n  testCreateUser: () => testCreateUser,\n  removeUser: () => removeUser,\n  sendEnrollmentEmail: () => sendEnrollmentEmail,\n  changeEmail: () => changeEmail,\n  userUpdateOrganisations: () => userUpdateOrganisations,\n  testUserAccount: () => testUserAccount,\n  generateApiKeyPair: () => generateApiKeyPair,\n  proInviteUser: () => proInviteUser,\n  getUserByEmail: () => getUserByEmail,\n  setUserReferredBy: () => setUserReferredBy,\n  setUserReferredByOrganisation: () => setUserReferredByOrganisation,\n  proInviteUserToOrganisation: () => proInviteUserToOrganisation,\n  proSetShareCustomers: () => proSetShareCustomers,\n  anonymousCreateUser: () => anonymousCreateUser,\n  referralExists: () => referralExists\n});\nlet check, Match;\nmodule.link(\"meteor/check\", {\n  check(v) {\n    check = v;\n  },\n\n  Match(v) {\n    Match = v;\n  }\n\n}, 0);\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 1);\nlet Method;\nmodule.link(\"../methods/methods\", {\n  Method(v) {\n    Method = v;\n  }\n\n}, 2);\nconst doesUserExist = new Method({\n  name: 'doesUserExist',\n  params: {\n    email: String\n  }\n});\nconst sendVerificationLink = new Method({\n  name: 'sendVerificationLink',\n  params: {\n    userId: Match.Optional(String)\n  }\n});\nconst assignAdminToUser = new Method({\n  name: 'assignAdminToUser',\n  params: {\n    userId: String,\n    adminId: String\n  }\n});\nconst assignAdminToNewUser = new Method({\n  name: 'assignAdminToNewUser',\n  params: {\n    userId: String,\n    adminId: String\n  }\n});\nconst setRole = new Method({\n  name: 'setRole',\n  params: {\n    userId: String,\n    role: String\n  }\n});\nconst adminCreateUser = new Method({\n  name: 'adminCreateUser',\n  params: {\n    options: Object,\n    role: String\n  }\n});\nconst updateUser = new Method({\n  name: 'updateUser',\n  params: {\n    userId: String,\n    object: Object\n  }\n});\nconst getUserByPasswordResetToken = new Method({\n  name: 'getUserByPasswordResetToken',\n  params: {\n    token: String\n  }\n});\nconst testCreateUser = new Method({\n  name: 'testCreateUser',\n  params: {\n    user: Object\n  }\n});\nconst removeUser = new Method({\n  name: 'removeUser',\n  params: {\n    userId: String\n  }\n});\nconst sendEnrollmentEmail = new Method({\n  name: 'sendEnrollmentEmail',\n  params: {\n    userId: String\n  }\n});\nconst changeEmail = new Method({\n  name: 'changeEmail',\n  params: {\n    userId: String,\n    newEmail: String\n  }\n});\nconst userUpdateOrganisations = new Method({\n  name: 'userUpdateOrganisations',\n  params: {\n    userId: String,\n    newOrganisations: Array\n  }\n});\nconst testUserAccount = new Method({\n  name: 'testUserAccount',\n  params: {\n    email: String,\n    password: String,\n    role: String\n  }\n});\nconst generateApiKeyPair = new Method({\n  name: 'generateApiKeyPair',\n  params: {\n    userId: String\n  }\n});\nconst proInviteUser = new Method({\n  name: 'proInviteUser',\n  params: {\n    user: Object,\n    propertyIds: Match.Maybe([String]),\n    promotionIds: Match.Maybe([String]),\n    properties: Match.Maybe(Array),\n    shareSolvency: Match.Maybe(Match.OneOf(Boolean, undefined))\n  }\n});\nconst getUserByEmail = new Method({\n  name: 'getUserByEmail',\n  params: {\n    email: String\n  }\n});\nconst setUserReferredBy = new Method({\n  name: 'setUserReferredBy',\n  params: {\n    userId: String,\n    proId: String\n  }\n});\nconst setUserReferredByOrganisation = new Method({\n  name: 'setUserReferredByOrganisation',\n  params: {\n    userId: String,\n    organisationId: String\n  }\n});\nconst proInviteUserToOrganisation = new Method({\n  name: 'proInviteUserToOrganisation',\n  params: {\n    user: Object,\n    organisationId: String,\n    title: String\n  }\n});\nconst proSetShareCustomers = new Method({\n  name: 'proSetShareCustomers',\n  params: {\n    userId: String,\n    organisationId: String,\n    shareCustomers: Boolean\n  }\n});\nconst anonymousCreateUser = new Method({\n  name: 'anonymousCreateUser',\n  params: {\n    loanId: Match.Maybe(String),\n    user: {\n      firstName: String,\n      lastName: String,\n      email: String,\n      phoneNumber: String\n    },\n    trackingId: String,\n    referralId: Match.Maybe(String)\n  }\n});\nconst referralExists = new Method({\n  name: 'referralExists',\n  params: {\n    ref: String\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"queries.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/users/queries.js                                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  adminUsers: () => adminUsers,\n  appUser: () => appUser,\n  currentUser: () => currentUser,\n  proReferredByUsers: () => proReferredByUsers,\n  proUser: () => proUser,\n  userEmails: () => userEmails,\n  userSearch: () => userSearch\n});\nlet createRegexQuery, generateMatchAnyWordRegexp;\nmodule.link(\"../helpers/mongoHelpers\", {\n  createRegexQuery(v) {\n    createRegexQuery = v;\n  },\n\n  generateMatchAnyWordRegexp(v) {\n    generateMatchAnyWordRegexp = v;\n  }\n\n}, 0);\nlet adminUser, appUserFragment, fullUser, proUserFragment;\nmodule.link(\"../fragments\", {\n  adminUser(v) {\n    adminUser = v;\n  },\n\n  appUser(v) {\n    appUserFragment = v;\n  },\n\n  fullUser(v) {\n    fullUser = v;\n  },\n\n  proUser(v) {\n    proUserFragment = v;\n  }\n\n}, 1);\nlet USER_QUERIES;\nmodule.link(\"./userConstants\", {\n  USER_QUERIES(v) {\n    USER_QUERIES = v;\n  }\n\n}, 2);\nlet Users;\nmodule.link(\".\", {\n  default(v) {\n    Users = v;\n  }\n\n}, 3);\nconst adminUsers = Users.createQuery(USER_QUERIES.ADMIN_USERS, adminUser());\nconst appUser = Users.createQuery(USER_QUERIES.APP_USER, appUserFragment(), {\n  scoped: true\n});\nconst currentUser = Users.createQuery(USER_QUERIES.CURRENT_USER, fullUser(), {\n  scoped: true\n});\nconst proReferredByUsers = Users.createQuery(USER_QUERIES.PRO_REFERRED_BY, () => {});\nconst proUser = Users.createQuery(USER_QUERIES.PRO_USER, proUserFragment());\nconst userEmails = Users.createQuery(USER_QUERIES.USER_EMAILS, {\n  $filter(_ref) {\n    let {\n      filters,\n      params: {\n        _id\n      }\n    } = _ref;\n    filters._id = _id;\n  },\n\n  sentEmails: 1\n});\nconst userSearch = Users.createQuery(USER_QUERIES.USER_SEARCH, {\n  $filter(_ref2) {\n    let {\n      filters,\n      params: {\n        searchQuery,\n        roles\n      }\n    } = _ref2;\n    const formattedSearchQuery = generateMatchAnyWordRegexp(searchQuery);\n\n    if (roles) {\n      filters.roles = {\n        $in: roles\n      };\n    }\n\n    filters.$or = [createRegexQuery('_id', searchQuery), createRegexQuery('emails.0.address', searchQuery), createRegexQuery('firstName', searchQuery), createRegexQuery('lastName', searchQuery), {\n      $and: [createRegexQuery('firstName', formattedSearchQuery), createRegexQuery('lastName', formattedSearchQuery)]\n    }];\n  },\n\n  assignedEmployee: {\n    name: 1\n  },\n  createdAt: 1,\n  email: 1,\n  loans: {\n    name: 1\n  },\n  name: 1,\n  organisations: {\n    name: 1\n  },\n  roles: 1,\n  $options: {\n    limit: 5\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"reducers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/users/reducers.js                                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet getUserDisplayName;\nmodule.link(\"../../utils/userFunctions\", {\n  getUserDisplayName(v) {\n    getUserDisplayName = v;\n  }\n\n}, 0);\nlet Users;\nmodule.link(\"./users\", {\n  default(v) {\n    Users = v;\n  }\n\n}, 1);\nUsers.addReducers({\n  email: {\n    body: {\n      emails: 1\n    },\n    reduce: (_ref) => {\n      let {\n        emails\n      } = _ref;\n      return emails && emails.length && emails[0].address;\n    }\n  },\n  name: {\n    body: {\n      firstName: 1,\n      lastName: 1,\n      emails: 1\n    },\n    reduce: getUserDisplayName\n  },\n  phoneNumber: {\n    body: {\n      phoneNumbers: 1\n    },\n    reduce: (_ref2) => {\n      let {\n        phoneNumbers = []\n      } = _ref2;\n      return !!phoneNumbers.length && phoneNumbers[0] || '';\n    }\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"userConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/users/userConstants.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  USERS_COLLECTION: () => USERS_COLLECTION,\n  ROLES: () => ROLES,\n  USER_QUERIES: () => USER_QUERIES,\n  USER_EVENTS: () => USER_EVENTS,\n  LOCAL_STORAGE_REFERRAL: () => LOCAL_STORAGE_REFERRAL,\n  LOCAL_STORAGE_OLD_REFERRAL: () => LOCAL_STORAGE_OLD_REFERRAL\n});\nconst USERS_COLLECTION = 'users';\nconst ROLES = {\n  ADMIN: 'admin',\n  DEV: 'dev',\n  USER: 'user',\n  PRO: 'pro'\n};\nconst USER_QUERIES = {\n  ADMIN_USERS: 'ADMIN_USERS',\n  APP_USER: 'APP_USER',\n  CURRENT_USER: 'CURRENT_USER',\n  PRO_REFERRED_BY: 'PRO_REFERRED_BY',\n  PRO_USER: 'PRO_USER',\n  REFERRED_USERS: 'REFERRED_USERS',\n  USER_EMAILS: 'USER_EMAILS',\n  USER_SEARCH: 'USER_SEARCH'\n};\nconst USER_EVENTS = {\n  USER_CREATED: 'USER_CREATED'\n};\nconst LOCAL_STORAGE_REFERRAL = 'REFERRAL_ID';\nconst LOCAL_STORAGE_OLD_REFERRAL = 'OLD_REFERRAL_ID';\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"users.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/users/users.js                                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  UserSchema: () => UserSchema\n});\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 1);\nlet createdAt, updatedAt, cacheField;\nmodule.link(\"../helpers/sharedSchemas\", {\n  createdAt(v) {\n    createdAt = v;\n  },\n\n  updatedAt(v) {\n    updatedAt = v;\n  },\n\n  cacheField(v) {\n    cacheField = v;\n  }\n\n}, 2);\nlet ROLES;\nmodule.link(\"./userConstants\", {\n  ROLES(v) {\n    ROLES = v;\n  }\n\n}, 3);\nconst UserSchema = new SimpleSchema({\n  username: {\n    type: String,\n    // For accounts-password, either emails or username is required, but not both. It is OK to make this\n    // optional here because the accounts-password package does its own validation.\n    // Third-party login packages may not require either. Adjust this schema as necessary for your usage.\n    optional: true\n  },\n  emails: {\n    type: Array,\n    // For accounts-password, either emails or username is required, but not both. It is OK to make this\n    // optional here because the accounts-password package does its own validation.\n    // Third-party login packages may not require either. Adjust this schema as necessary for your usage.\n    optional: true\n  },\n  'emails.$': {\n    type: Object\n  },\n  'emails.$.address': {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email\n  },\n  'emails.$.verified': {\n    type: Boolean\n  },\n  createdAt,\n  updatedAt,\n  // Make sure this services field is in your schema if you're using any of the accounts packages\n  services: {\n    type: Object,\n    optional: true,\n    blackbox: true\n  },\n  // Add `roles` to your schema if you use the meteor-roles package.\n  // Option 1: Object type\n  // If you specify that type as Object, you must also specify the\n  // `Roles.GLOBAL_GROUP` group whenever you add a user to a role.\n  // Example:\n  // Roles.addUsersToRoles(userId, [\"admin\"], Roles.GLOBAL_GROUP);\n  // You can't mix and match adding with and without a group since\n  // you will fail validation in some cases.\n  // roles: {\n  //   type: Object,\n  //   optional: true,\n  //   blackbox: true,\n  // },\n  // Option 2: [String] type\n  // If you are sure you will never need to use role groups, then\n  // you can specify [String] as the type\n  roles: {\n    type: Array,\n    optional: true,\n    defaultValue: [ROLES.USER]\n  },\n  'roles.$': {\n    type: String,\n    allowedValues: Object.values(ROLES)\n  },\n  // In order to avoid an 'Exception in setInterval callback' from Meteor\n  heartbeat: {\n    type: Date,\n    optional: true\n  },\n  assignedEmployeeId: {\n    type: String,\n    optional: true\n  },\n  firstName: {\n    type: String,\n    optional: true\n  },\n  lastName: {\n    type: String,\n    optional: true\n  },\n  phoneNumbers: {\n    type: Array,\n    optional: true\n  },\n  'phoneNumbers.$': {\n    type: String\n  },\n  apiPublicKey: {\n    type: Object,\n    optional: true\n  },\n  'apiPublicKey.publicKey': {\n    type: String,\n    optional: true\n  },\n  'apiPublicKey.createdAt': {\n    type: Date,\n    optional: true\n  },\n  referredByUserLink: {\n    type: String,\n    optional: true\n  },\n  referredByOrganisationLink: {\n    type: String,\n    optional: true\n  },\n  assignedEmployeeCache: cacheField\n});\nMeteor.users.attachSchema(UserSchema);\nconst Users = Meteor.users;\nmodule.exportDefault(Users);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"api.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/api.js                                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./initialization\");\nmodule.link(\"./files/meteor-slingshot\");\nmodule.link(\"./links\");\nmodule.link(\"./reducers/registerReducers\");\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"constants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/constants.js                                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  SUCCESS: () => SUCCESS,\n  WARNING: () => WARNING,\n  ERROR: () => ERROR,\n  COLLECTIONS: () => COLLECTIONS\n});\nlet BORROWERS_COLLECTION;\nmodule.link(\"./borrowers/borrowerConstants\", {\n  BORROWERS_COLLECTION(v) {\n    BORROWERS_COLLECTION = v;\n  }\n\n}, 0);\nlet LOANS_COLLECTION;\nmodule.link(\"./loans/loanConstants\", {\n  LOANS_COLLECTION(v) {\n    LOANS_COLLECTION = v;\n  }\n\n}, 1);\nlet LOTS_COLLECTION;\nmodule.link(\"./lots/lotConstants\", {\n  LOTS_COLLECTION(v) {\n    LOTS_COLLECTION = v;\n  }\n\n}, 2);\nlet OFFERS_COLLECTION;\nmodule.link(\"./offers/offerConstants\", {\n  OFFERS_COLLECTION(v) {\n    OFFERS_COLLECTION = v;\n  }\n\n}, 3);\nlet ORGANISATIONS_COLLECTION;\nmodule.link(\"./organisations/organisationConstants\", {\n  ORGANISATIONS_COLLECTION(v) {\n    ORGANISATIONS_COLLECTION = v;\n  }\n\n}, 4);\nlet PROMOTION_LOTS_COLLECTION;\nmodule.link(\"./promotionLots/promotionLotConstants\", {\n  PROMOTION_LOTS_COLLECTION(v) {\n    PROMOTION_LOTS_COLLECTION = v;\n  }\n\n}, 5);\nlet PROMOTION_OPTIONS_COLLECTION;\nmodule.link(\"./promotionOptions/promotionOptionConstants\", {\n  PROMOTION_OPTIONS_COLLECTION(v) {\n    PROMOTION_OPTIONS_COLLECTION = v;\n  }\n\n}, 6);\nlet PROMOTIONS_COLLECTION;\nmodule.link(\"./promotions/promotionConstants\", {\n  PROMOTIONS_COLLECTION(v) {\n    PROMOTIONS_COLLECTION = v;\n  }\n\n}, 7);\nlet PROPERTIES_COLLECTION;\nmodule.link(\"./properties/propertyConstants\", {\n  PROPERTIES_COLLECTION(v) {\n    PROPERTIES_COLLECTION = v;\n  }\n\n}, 8);\nlet TASKS_COLLECTION;\nmodule.link(\"./tasks/taskConstants\", {\n  TASKS_COLLECTION(v) {\n    TASKS_COLLECTION = v;\n  }\n\n}, 9);\nlet USERS_COLLECTION;\nmodule.link(\"./users/userConstants\", {\n  USERS_COLLECTION(v) {\n    USERS_COLLECTION = v;\n  }\n\n}, 10);\nlet INTEREST_RATES_COLLECTION;\nmodule.link(\"./interestRates/interestRatesConstants\", {\n  INTEREST_RATES_COLLECTION(v) {\n    INTEREST_RATES_COLLECTION = v;\n  }\n\n}, 11);\nlet IRS10Y_COLLECTION;\nmodule.link(\"./irs10y/irs10yConstants\", {\n  IRS10Y_COLLECTION(v) {\n    IRS10Y_COLLECTION = v;\n  }\n\n}, 12);\nlet MORTGAGE_NOTES_COLLECTION;\nmodule.link(\"./mortgageNotes/mortgageNoteConstants\", {\n  MORTGAGE_NOTES_COLLECTION(v) {\n    MORTGAGE_NOTES_COLLECTION = v;\n  }\n\n}, 13);\nlet CONTACTS_COLLECTION;\nmodule.link(\"./contacts/contactsConstants\", {\n  CONTACTS_COLLECTION(v) {\n    CONTACTS_COLLECTION = v;\n  }\n\n}, 14);\nlet LENDERS_COLLECTION;\nmodule.link(\"./lenders/lenderConstants\", {\n  LENDERS_COLLECTION(v) {\n    LENDERS_COLLECTION = v;\n  }\n\n}, 15);\nlet LENDER_RULES_COLLECTION;\nmodule.link(\"./lenderRules/lenderRulesConstants\", {\n  LENDER_RULES_COLLECTION(v) {\n    LENDER_RULES_COLLECTION = v;\n  }\n\n}, 16);\nlet REVENUES_COLLECTION;\nmodule.link(\"./revenues/revenueConstants\", {\n  REVENUES_COLLECTION(v) {\n    REVENUES_COLLECTION = v;\n  }\n\n}, 17);\nmodule.link(\"./borrowers/borrowerConstants\", {\n  \"*\": \"*\"\n}, 18);\nmodule.link(\"./contacts/contactsConstants\", {\n  \"*\": \"*\"\n}, 19);\nmodule.link(\"./email/emailConstants\", {\n  \"*\": \"*\"\n}, 20);\nmodule.link(\"./files/fileConstants\", {\n  \"*\": \"*\"\n}, 21);\nmodule.link(\"./helpers/sharedSchemaConstants\", {\n  \"*\": \"*\"\n}, 22);\nmodule.link(\"./interestRates/interestRatesConstants\", {\n  \"*\": \"*\"\n}, 23);\nmodule.link(\"./irs10y/irs10yConstants\", {\n  \"*\": \"*\"\n}, 24);\nmodule.link(\"./lenderRules/lenderRulesConstants\", {\n  \"*\": \"*\"\n}, 25);\nmodule.link(\"./lenders/lenderConstants\", {\n  \"*\": \"*\"\n}, 26);\nmodule.link(\"./loans/loanConstants\", {\n  \"*\": \"*\"\n}, 27);\nmodule.link(\"./lots/lotConstants\", {\n  \"*\": \"*\"\n}, 28);\nmodule.link(\"./mortgageNotes/mortgageNoteConstants\", {\n  \"*\": \"*\"\n}, 29);\nmodule.link(\"./offers/offerConstants\", {\n  \"*\": \"*\"\n}, 30);\nmodule.link(\"./organisations/organisationConstants\", {\n  \"*\": \"*\"\n}, 31);\nmodule.link(\"./pdf/pdfConstants\", {\n  \"*\": \"*\"\n}, 32);\nmodule.link(\"./promotionLots/promotionLotConstants\", {\n  \"*\": \"*\"\n}, 33);\nmodule.link(\"./promotionOptions/promotionOptionConstants\", {\n  \"*\": \"*\"\n}, 34);\nmodule.link(\"./promotions/promotionConstants\", {\n  \"*\": \"*\"\n}, 35);\nmodule.link(\"./properties/propertyConstants\", {\n  \"*\": \"*\"\n}, 36);\nmodule.link(\"./revenues/revenueConstants\", {\n  \"*\": \"*\"\n}, 37);\nmodule.link(\"./security/constants\", {\n  \"*\": \"*\"\n}, 38);\nmodule.link(\"./tasks/taskConstants\", {\n  \"*\": \"*\"\n}, 39);\nmodule.link(\"./updateWatchers/updateWatcherConstants\", {\n  \"*\": \"*\"\n}, 40);\nmodule.link(\"./users/userConstants\", {\n  \"*\": \"*\"\n}, 41);\nconst SUCCESS = 'SUCCESS';\nconst WARNING = 'WARNING';\nconst ERROR = 'ERROR';\nconst COLLECTIONS = {\n  LOANS_COLLECTION,\n  BORROWERS_COLLECTION,\n  PROPERTIES_COLLECTION,\n  PROMOTIONS_COLLECTION,\n  LOTS_COLLECTION,\n  PROMOTION_OPTIONS_COLLECTION,\n  PROMOTION_LOTS_COLLECTION,\n  TASKS_COLLECTION,\n  OFFERS_COLLECTION,\n  ORGANISATIONS_COLLECTION,\n  USERS_COLLECTION,\n  INTEREST_RATES_COLLECTION,\n  IRS10Y_COLLECTION,\n  MORTGAGE_NOTES_COLLECTION,\n  CONTACTS_COLLECTION,\n  LENDERS_COLLECTION,\n  LENDER_RULES_COLLECTION,\n  REVENUES_COLLECTION\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"fragments.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/fragments.js                                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  activity: () => activity,\n  baseBorrower: () => baseBorrower,\n  loanBorrower: () => loanBorrower,\n  adminBorrower: () => adminBorrower,\n  contact: () => contact,\n  interestRates: () => interestRates,\n  currentInterestRates: () => currentInterestRates,\n  irs10y: () => irs10y,\n  lender: () => lender,\n  adminLender: () => adminLender,\n  lenderRules: () => lenderRules,\n  loan: () => loan,\n  loanBase: () => loanBase,\n  userLoan: () => userLoan,\n  adminLoan: () => adminLoan,\n  adminLoans: () => adminLoans,\n  proLoans: () => proLoans,\n  mortgageNote: () => mortgageNote,\n  notification: () => notification,\n  fullOffer: () => fullOffer,\n  baseOrganisation: () => baseOrganisation,\n  fullOrganisation: () => fullOrganisation,\n  userOrganisation: () => userOrganisation,\n  proPromotionLot: () => proPromotionLot,\n  appPromotionLot: () => appPromotionLot,\n  fullPromotionOption: () => fullPromotionOption,\n  proPromotionOption: () => proPromotionOption,\n  appPromotionOption: () => appPromotionOption,\n  loanPromotionOption: () => loanPromotionOption,\n  basePromotion: () => basePromotion,\n  proPromotion: () => proPromotion,\n  proPromotions: () => proPromotions,\n  adminPromotions: () => adminPromotions,\n  searchPromotions: () => searchPromotions,\n  propertySummary: () => propertySummary,\n  fullProperty: () => fullProperty,\n  adminProperty: () => adminProperty,\n  promotionProperty: () => promotionProperty,\n  userProperty: () => userProperty,\n  proPropertySummary: () => proPropertySummary,\n  proProperty: () => proProperty,\n  apiProperty: () => apiProperty,\n  baseTask: () => baseTask,\n  task: () => task,\n  simpleUser: () => simpleUser,\n  organisationUser: () => organisationUser,\n  fullUser: () => fullUser,\n  adminUser: () => adminUser,\n  appUser: () => appUser,\n  proUser: () => proUser,\n  revenue: () => revenue\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet INTEREST_RATES;\nmodule.link(\"./constants\", {\n  INTEREST_RATES(v) {\n    INTEREST_RATES = v;\n  }\n\n}, 1);\n\nconst activity = () => ({\n  createdAt: 1,\n  createdBy: 1,\n  date: 1,\n  description: 1,\n  loan: {\n    name: 1\n  },\n  secondaryType: 1,\n  shouldNotify: 1,\n  title: 1,\n  type: 1,\n  updatedAt: 1\n});\n\nconst baseBorrower = () => ({\n  createdAt: 1,\n  firstName: 1,\n  lastName: 1,\n  name: 1,\n  updatedAt: 1,\n  userId: 1\n});\n\nconst loanBorrower = function () {\n  let {\n    withSort\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return (0, _objectSpread2.default)({}, baseBorrower(), {\n    additionalDocuments: 1,\n    address1: 1,\n    address2: 1,\n    adminValidation: 1,\n    age: 1,\n    bank3A: 1,\n    bankFortune: 1,\n    birthDate: 1,\n    birthPlace: 1,\n    bonus2015: 1,\n    bonus2016: 1,\n    bonus2017: 1,\n    bonus2018: 1,\n    bonus2019: 1,\n    bonusExists: 1,\n    canton: 1,\n    childrenCount: 1,\n    citizenship: 1,\n    city: 1,\n    civilStatus: 1,\n    company: 1,\n    documents: 1,\n    expenses: 1,\n    gender: 1,\n    hasOwnCompany: 1,\n    insurance2: 1,\n    insurance3A: 1,\n    insurance3B: 1,\n    isSwiss: 1,\n    isUSPerson: 1,\n    loans: {\n      name: 1\n    },\n    mortgageNotes: mortgageNote(),\n    netSalary: 1,\n    otherFortune: 1,\n    otherIncome: 1,\n    ownCompanies: 1,\n    personalBank: 1,\n    realEstate: 1,\n    residencyPermit: 1,\n    salary: 1,\n    sameAddress: 1,\n    step: 1,\n    thirdPartyFortune: 1,\n    worksForOwnCompany: 1,\n    zipCode: 1\n  }, withSort ? {\n    $options: {\n      sort: {\n        createdAt: 1\n      }\n    }\n  } : {});\n};\n\nconst adminBorrower = () => (0, _objectSpread2.default)({}, loanBorrower(), {\n  loans: loanBase(),\n  user: appUser()\n});\n\nconst contact = () => ({\n  address: 1,\n  address1: 1,\n  address2: 1,\n  canton: 1,\n  city: 1,\n  email: 1,\n  emails: 1,\n  firstName: 1,\n  lastName: 1,\n  name: 1,\n  organisations: {\n    name: 1,\n    address: 1\n  },\n  phoneNumber: 1,\n  phoneNumbers: 1,\n  zipCode: 1,\n  offers: {\n    _id: 1\n  }\n});\n\n// //\n// // InterestRate fragments\n// //\nconst singleInterestRate = type => ({\n  [type]: {\n    rateLow: 1,\n    rateHigh: 1,\n    trend: 1\n  }\n});\n\nconst rates = Object.values(INTEREST_RATES).reduce((interestRates, type) => (0, _objectSpread2.default)({}, interestRates, singleInterestRate(type)), {});\n\nconst interestRates = () => (0, _objectSpread2.default)({}, rates, {\n  createdAt: 1,\n  updatedAt: 1,\n  date: 1\n});\n\nconst currentInterestRates = () => (0, _objectSpread2.default)({}, rates, {\n  date: 1\n});\n\nconst irs10y = () => ({\n  date: 1,\n  rate: 1\n});\n\nconst lender = () => ({\n  contact: contact(),\n  loan: {\n    _id: 1\n  },\n  offers: fullOffer(),\n  organisation: {\n    address: 1,\n    address1: 1,\n    address2: 1,\n    canton: 1,\n    city: 1,\n    contacts: contact(),\n    logo: 1,\n    name: 1,\n    type: 1,\n    zipCode: 1\n  }\n});\n\nconst adminLender = () => (0, _objectSpread2.default)({}, lender(), {\n  status: 1,\n  adminNote: 1\n});\n\nconst lenderRules = () => ({\n  adminComments: 1,\n  allowPledge: 1,\n  amortizationGoal: 1,\n  amortizationYears: 1,\n  bonusAlgorithm: 1,\n  bonusConsideration: 1,\n  bonusHistoryToConsider: 1,\n  companyIncomeConsideration: 1,\n  companyIncomeHistoryToConsider: 1,\n  createdAt: 1,\n  dividendsConsideration: 1,\n  dividendsHistoryToConsider: 1,\n  expensesSubtractFromIncome: 1,\n  filter: 1,\n  fortuneReturnsRatio: 1,\n  incomeConsiderationType: 1,\n  investmentIncomeConsideration: 1,\n  maxBorrowRatio: 1,\n  maxBorrowRatioWithPledge: 1,\n  maxIncomeRatio: 1,\n  maxIncomeRatioTight: 1,\n  minCash: 1,\n  name: 1,\n  order: 1,\n  organisation: {\n    name: 1\n  },\n  pdfComments: 1,\n  pensionIncomeConsideration: 1,\n  realEstateIncomeAlgorithm: 1,\n  realEstateIncomeConsideration: 1,\n  realEstateIncomeConsiderationType: 1,\n  theoreticalInterestRate: 1,\n  theoreticalInterestRate2ndRank: 1,\n  theoreticalMaintenanceRate: 1,\n  updatedAt: 1\n});\n\nconst loan = () => ({\n  additionalDocuments: 1,\n  applicationType: 1,\n  anonymous: 1,\n  borrowerIds: 1,\n  borrowers: {\n    firstName: 1,\n    lastName: 1,\n    name: 1\n  },\n  canton: 1,\n  createdAt: 1,\n  currentOwner: 1,\n  customName: 1,\n  enableOffers: 1,\n  futureOwner: 1,\n  hasProProperty: 1,\n  hasPromotion: 1,\n  name: 1,\n  otherOwner: 1,\n  previousLender: 1,\n  previousLoanTranches: 1,\n  promotions: {\n    address: 1,\n    contacts: 1,\n    lenderOrganisationLink: 1,\n    name: 1,\n    type: 1,\n    users: {\n      name: 1,\n      email: 1,\n      phoneNumber: 1\n    }\n  },\n  properties: {\n    totalValue: 1,\n    address1: 1\n  },\n  propertyIds: 1,\n  purchaseType: 1,\n  residenceType: 1,\n  selectedStructure: 1,\n  status: 1,\n  step: 1,\n  structure: 1,\n  structures: {\n    amortization: 1,\n    amortizationType: 1,\n    description: 1,\n    disabled: 1,\n    id: 1,\n    loanTranches: 1,\n    mortgageNoteIds: 1,\n    name: 1,\n    notaryFees: 1,\n    offerId: 1,\n    ownFunds: 1,\n    promotionOptionId: 1,\n    propertyId: 1,\n    propertyValue: 1,\n    propertyWork: 1,\n    sortOffersBy: 1,\n    wantedLoan: 1\n  },\n  updatedAt: 1,\n  userId: 1,\n  verificationStatus: 1,\n  shareSolvency: 1,\n  simpleBorrowersForm: 1\n});\n\nconst loanBase = () => (0, _objectSpread2.default)({}, loan(), {\n  promotionOptions: loanPromotionOption()\n});\n\nconst userPropertyValue = {\n  borrowRatio: 1,\n  propertyValue: 1\n};\nconst adminPropertyValue = (0, _objectSpread2.default)({}, userPropertyValue, {\n  organisationName: 1\n});\nconst userMaxPropertyValue = {\n  main: {\n    min: userPropertyValue,\n    max: userPropertyValue\n  },\n  second: {\n    min: userPropertyValue,\n    max: userPropertyValue\n  },\n  canton: 1,\n  date: 1,\n  borrowerHash: 1\n};\nconst adminMaxPropertyValue = {\n  main: {\n    min: adminPropertyValue,\n    max: adminPropertyValue\n  },\n  second: {\n    min: adminPropertyValue,\n    max: adminPropertyValue\n  },\n  canton: 1,\n  date: 1,\n  borrowerHash: 1\n};\n\nconst userLoan = function () {\n  let {\n    withSort,\n    withFilteredPromotions\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return (0, _objectSpread2.default)({}, loanBase(), {\n    adminValidation: 1,\n    borrowers: loanBorrower({\n      withSort\n    }),\n    contacts: 1,\n    displayWelcomeScreen: 1,\n    documents: 1,\n    offers: 1,\n    properties: userProperty({\n      withSort\n    }),\n    user: appUser(),\n    userFormsEnabled: 1,\n    maxPropertyValue: userMaxPropertyValue\n  }, withFilteredPromotions ? {\n    promotions: {\n      address: 1,\n      contacts: 1,\n      documents: {\n        promotionImage: 1\n      },\n      lenderOrganisationLink: 1,\n      name: 1,\n      status: 1,\n      type: 1,\n      canton: 1,\n      users: {\n        _id: 1,\n        name: 1,\n        email: 1,\n        phoneNumber: 1,\n        organisations: {\n          users: {\n            title: 1\n          }\n        }\n      },\n      loans: {\n        _id: 1,\n\n        $filter(_ref) {\n          let {\n            filters,\n            params: {\n              loanId\n            }\n          } = _ref;\n          filters.userId = Meteor.userId();\n          filters._id = loanId;\n        }\n\n      }\n    }\n  } : {});\n};\n\nconst adminLoan = function () {\n  let {\n    withSort\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return (0, _objectSpread2.default)({}, userLoan({\n    withSort\n  }), {\n    adminNote: 1,\n    category: 1,\n    lenders: adminLender(),\n    maxPropertyValue: adminMaxPropertyValue,\n    nextDueTask: 1,\n    properties: adminProperty({\n      withSort\n    }),\n    revenues: revenue(),\n    status: 1,\n    tasksCache: {\n      createdAt: 1,\n      dueAt: 1,\n      status: 1,\n      title: 1,\n      isPrivate: 1,\n      assigneeLink: 1\n    },\n    user: adminUser(),\n    financedPromotion: {\n      name: 1\n    },\n    financedPromotionLink: 1\n  });\n};\n\nconst adminLoans = () => (0, _objectSpread2.default)({}, loanBase(), {\n  borrowers: {\n    name: 1\n  },\n  category: 1,\n  properties: {\n    totalValue: 1,\n    address1: 1\n  },\n  status: 1,\n  user: {\n    assignedEmployee: {\n      email: 1\n    },\n    name: 1\n  }\n});\n\nconst proLoans = () => ({\n  anonymous: 1,\n  createdAt: 1,\n  name: 1,\n  status: 1,\n  promotions: {\n    name: 1,\n    users: {\n      _id: 1\n    },\n    status: 1,\n    lenderOrganisationLink: 1\n  },\n  promotionLinks: 1,\n  promotionOptions: {\n    name: 1,\n    status: 1,\n    promotionLots: {\n      attributedTo: {\n        user: {\n          _id: 1\n        }\n      }\n    },\n    solvency: 1,\n    value: 1\n  },\n  loanProgress: 1,\n  user: {\n    name: 1,\n    phoneNumbers: 1,\n    email: 1,\n    referredByUser: {\n      name: 1,\n      organisations: {\n        name: 1\n      }\n    },\n    referredByOrganisation: {\n      name: 1\n    }\n  },\n  hasPromotion: 1,\n  hasProProperty: 1,\n  maxPropertyValue: userMaxPropertyValue,\n  properties: {\n    address1: 1,\n    category: 1,\n    users: {\n      _id: 1\n    },\n    totalValue: 1\n  },\n  referralId: 1,\n  residenceType: 1,\n  shareSolvency: 1,\n  structure: 1\n});\n\nconst mortgageNote = () => ({\n  canton: 1,\n  category: 1,\n  rank: 1,\n  type: 1,\n  value: 1\n});\n\nconst notification = () => ({\n  activity: activity(),\n  createdAt: 1,\n  readAt: 1,\n  recipients: {\n    firstName: 1,\n    lastName: 1,\n    name: 1\n  },\n  relatedDoc: 1,\n  task: task(),\n  title: 1,\n  revenue: revenue(),\n  updatedAt: 1\n});\n\nconst fullOffer = () => (0, _objectSpread2.default)({\n  amortizationGoal: 1,\n  amortizationYears: 1,\n  conditions: 1,\n  epotekFees: 1,\n  feedback: 1\n}, Object.values(INTEREST_RATES).reduce((obj, rate) => (0, _objectSpread2.default)({}, obj, {\n  [rate]: 1\n}), {}), {\n  fees: 1,\n  lender: {\n    loan: {\n      status: 1,\n      name: 1,\n      user: {\n        name: 1,\n        assignedEmployee: {\n          email: 1,\n          name: 1,\n          firstName: 1\n        }\n      },\n      borrowers: {\n        name: 1\n      }\n    },\n    contact: {\n      name: 1,\n      email: 1\n    },\n    organisation: {\n      name: 1,\n      lenderRules: lenderRules()\n    }\n  },\n  loanId: 1,\n  maxAmount: 1,\n  organisation: 1,\n  user: simpleUser(),\n  createdAt: 1,\n  withCounterparts: 1,\n  enableOffer: 1\n});\n\nconst baseOrganisation = () => ({\n  address: 1,\n  address1: 1,\n  address2: 1,\n  canton: 1,\n  city: 1,\n  contacts: {\n    title: 1,\n    email: 1,\n    name: 1\n  },\n  features: 1,\n  logo: 1,\n  name: 1,\n  type: 1,\n  zipCode: 1,\n  tags: 1,\n  users: {\n    _id: 1\n  }\n});\n\nconst fullOrganisation = () => (0, _objectSpread2.default)({}, baseOrganisation(), {\n  commissionRate: 1,\n  commissionRates: 1,\n  contacts: contact(),\n  documents: 1,\n  generatedRevenues: 1,\n  lenderRules: lenderRules(),\n  lenders: lender(),\n  offers: 1,\n  offerCount: 1,\n  users: organisationUser()\n});\n\nconst userOrganisation = () => ({\n  logo: 1,\n  name: 1,\n  lenderRules: lenderRules()\n});\n\nconst proPromotionLot = () => ({\n  attributedTo: {\n    user: {\n      name: 1\n    }\n  },\n  createdAt: 1,\n  documents: 1,\n  lots: {\n    name: 1,\n    value: 1,\n    type: 1,\n    description: 1\n  },\n  name: 1,\n  promotion: {\n    status: 1,\n    name: 1,\n    promotionLots: {\n      name: 1\n    },\n    users: {\n      _id: 1\n    },\n    lots: {\n      name: 1,\n      value: 1,\n      type: 1,\n      description: 1,\n      promotionLots: {\n        _id: 1\n      }\n    }\n  },\n  promotionOptions: {\n    _id: 1\n  },\n  properties: promotionProperty(),\n  status: 1,\n  updatedAt: 1,\n  value: 1\n});\n\nconst appPromotionLot = () => ({\n  attributedTo: {\n    user: {\n      _id: 1\n    }\n  },\n  createdAt: 1,\n  documents: 1,\n  lots: {\n    name: 1,\n    value: 1,\n    type: 1,\n    description: 1\n  },\n  name: 1,\n  promotion: {\n    name: 1,\n    status: 1\n  },\n  properties: promotionProperty(),\n  reducedStatus: 1,\n  status: 1,\n  updatedAt: 1,\n  value: 1\n});\n\nconst fullPromotionOption = () => ({\n  canton: 1,\n  createdAt: 1,\n  custom: 1,\n  loan: {\n    name: 1\n  },\n  lots: {\n    name: 1,\n    type: 1,\n    status: 1,\n    description: 1\n  },\n  priority: 1,\n  promotionLots: {\n    name: 1,\n    promotion: {\n      name: 1\n    }\n  },\n  solvency: 1,\n  updatedAt: 1\n});\n\nconst proPromotionOption = () => ({\n  canton: 1,\n  createdAt: 1,\n  custom: 1,\n  loan: {\n    name: 1,\n    solvency: 1,\n    status: 1,\n    user: {\n      phoneNumbers: 1,\n      name: 1,\n      email: 1\n    },\n    promotions: {\n      users: {\n        _id: 1,\n        name: 1,\n        organisations: {\n          name: 1\n        }\n      }\n    },\n    promotionOptions: {\n      name: 1,\n      promotionLots: {\n        attributedTo: {\n          user: {\n            _id: 1\n          }\n        }\n      },\n      solvency: 1\n    },\n    loanProgress: 1\n  },\n  lots: {\n    name: 1,\n    type: 1,\n    description: 1\n  },\n  priority: 1,\n  solvency: 1,\n  updatedAt: 1,\n  promotion: {\n    users: {\n      _id: 1\n    }\n  },\n  promotionLots: {\n    _id: 1\n  }\n});\n\nconst appPromotionOption = () => ({\n  attributedToMe: 1,\n  canton: 1,\n  createdAt: 1,\n  custom: 1,\n  lots: {\n    description: 1,\n    name: 1,\n    type: 1,\n    value: 1\n  },\n  promotionLots: appPromotionLot(),\n  priority: 1,\n  solvency: 1,\n  updatedAt: 1\n});\n\nconst loanPromotionOption = () => ({\n  attributedToMe: 1,\n  canton: 1,\n  custom: 1,\n  name: 1,\n  priority: 1,\n  promotion: 1,\n  promotionLots: {\n    name: 1,\n    status: 1,\n    reducedStatus: 1,\n    value: 1,\n    properties: promotionProperty()\n  },\n  solvency: 1,\n  value: 1\n});\n\nconst basePromotion = () => ({\n  address: 1,\n  address1: 1,\n  availablePromotionLots: 1,\n  bookedPromotionLots: 1,\n  canton: 1,\n  city: 1,\n  constructionTimeline: 1,\n  contacts: 1,\n  createdAt: 1,\n  documents: 1,\n  lenderOrganisation: {\n    name: 1,\n    logo: 1\n  },\n  loans: {\n    _id: 1\n  },\n  lots: {\n    value: 1,\n    name: 1,\n    type: 1,\n    description: 1,\n    promotionLots: {\n      name: 1\n    },\n    status: 1\n  },\n  name: 1,\n  promotionLots: {\n    status: 1,\n    reducedStatus: 1,\n    lots: {\n      name: 1\n    },\n    promotionOptions: {\n      _id: 1\n    },\n    name: 1\n  },\n  properties: promotionProperty(),\n  soldPromotionLots: 1,\n  status: 1,\n  type: 1,\n  updatedAt: 1,\n  users: {\n    name: 1,\n    email: 1,\n    roles: 1,\n    phoneNumber: 1,\n    organisations: {\n      name: 1\n    }\n  },\n  zipCode: 1\n});\n\nconst proPromotion = function () {\n  let {\n    withFilteredLoan\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return (0, _objectSpread2.default)({}, basePromotion(), {\n    assignedEmployee: {\n      name: 1,\n      email: 1\n    },\n    assignedEmployeeId: 1,\n    promotionLots: {\n      attributedTo: {\n        user: {\n          name: 1\n        }\n      },\n      lots: {\n        name: 1,\n        value: 1,\n        type: 1,\n        description: 1,\n        status: 1\n      },\n      name: 1,\n      promotionOptions: {\n        _id: 1\n      },\n      properties: promotionProperty(),\n      reducedStatus: 1,\n      status: 1,\n      value: 1,\n      promotion: {\n        _id: 1\n      }\n    },\n    promotionLoan: {\n      _id: 1,\n      name: 1\n    }\n  }, withFilteredLoan ? {\n    loans: {\n      $filter(_ref2) {\n        let {\n          filters,\n          params: {\n            loanId\n          }\n        } = _ref2;\n        filters._id = loanId;\n      }\n\n    }\n  } : {});\n};\n\nconst proPromotions = () => (0, _objectSpread2.default)({}, basePromotion(), {\n  promotionLots: {\n    attributedTo: {\n      user: {\n        name: 1\n      }\n    },\n    promotion: {\n      _id: 1\n    }\n  }\n});\n\nconst adminPromotions = proPromotion;\n\nconst searchPromotions = () => ({\n  createdAt: 1,\n  name: 1,\n  promotionLotLinks: 1,\n  updatedAt: 1\n});\n\nconst propertySummary = () => ({\n  address: 1,\n  address1: 1,\n  address2: 1,\n  canton: 1,\n  city: 1,\n  externalId: 1,\n  externalUrl: 1,\n  imageUrls: 1,\n  insideArea: 1,\n  organisation: 1,\n  promotion: {\n    name: 1\n  },\n  propertyType: 1,\n  status: 1,\n  thumbnail: 1,\n  totalValue: 1,\n  userId: 1,\n  value: 1,\n  zipCode: 1\n});\n\nconst fullProperty = function () {\n  let {\n    withSort\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return (0, _objectSpread2.default)({}, propertySummary(), {\n    additionalDocuments: 1,\n    additionalMargin: 1,\n    adminValidation: 1,\n    areaNorm: 1,\n    bathroomCount: 1,\n    category: 1,\n    constructionValue: 1,\n    constructionYear: 1,\n    copropertyPercentage: 1,\n    createdAt: 1,\n    description: 1,\n    documents: 1,\n    flatType: 1,\n    floorNumber: 1,\n    gardenArea: 1,\n    houseType: 1,\n    investmentRent: 1,\n    isCoproperty: 1,\n    isNew: 1,\n    landArea: 1,\n    landValue: 1,\n    latitude: 1,\n    loans: loanBase(),\n    longitude: 1,\n    minergie: 1,\n    mortgageNotes: mortgageNote(),\n    name: 1,\n    numberOfFloors: 1,\n    parkingInside: 1,\n    parkingOutside: 1,\n    pictures: 1,\n    promotion: {\n      name: 1\n    },\n    renovationYear: 1,\n    residenceType: 1,\n    roomCount: 1,\n    terraceArea: 1,\n    totalValue: 1,\n    updatedAt: 1,\n    user: appUser(),\n    users: {\n      _id: 1\n    },\n    useOpenGraph: 1,\n    volume: 1,\n    volumeNorm: 1,\n    yearlyExpenses: 1\n  }, withSort ? {\n    $options: {\n      sort: {\n        createdAt: 1\n      }\n    }\n  } : {});\n};\n\nconst adminProperty = function () {\n  let {\n    withSort\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return (0, _objectSpread2.default)({}, fullProperty({\n    withSort\n  }), {\n    loanCount: 1,\n    useOpenGraph: 1\n  });\n};\n\nconst promotionProperty = () => ({\n  additionalMargin: 1,\n  address: 1,\n  bathroomCount: 1,\n  canton: 1,\n  constructionValue: 1,\n  description: 1,\n  gardenArea: 1,\n  insideArea: 1,\n  landValue: 1,\n  mortgageNotes: mortgageNote(),\n  name: 1,\n  propertyType: 1,\n  roomCount: 1,\n  terraceArea: 1,\n  totalValue: 1,\n  value: 1,\n  yearlyExpenses: 1\n});\n\nconst userProperty = function () {\n  let {\n    withSort\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const obj = (0, _objectSpread2.default)({}, fullProperty({\n    withSort\n  }));\n  delete obj.users;\n  return obj;\n};\n\nconst proPropertySummary = () => ({\n  address1: 1,\n  city: 1,\n  status: 1,\n  totalValue: 1,\n  loanCount: 1\n});\n\nconst proProperty = function () {\n  let {\n    withSort\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return (0, _objectSpread2.default)({}, fullProperty({\n    withSort\n  }), {\n    loanCount: 1,\n    useOpenGraph: 1,\n    users: {\n      name: 1,\n      organisations: {\n        name: 1\n      },\n      email: 1,\n      phoneNumber: 1\n    }\n  });\n};\n\nconst apiProperty = () => ({\n  externalId: 1,\n  address1: 1,\n  address2: 1,\n  city: 1,\n  zipCode: 1,\n  value: 1,\n  description: 1,\n  propertyType: 1,\n  houseType: 1,\n  flatType: 1,\n  roomCount: 1,\n  insideArea: 1,\n  landArea: 1,\n  terraceArea: 1,\n  constructionYear: 1,\n  externalUrl: 1,\n  useOpenGraph: 1,\n  imageUrls: 1\n});\n\nconst baseTask = () => ({\n  completedAt: 1,\n  createdAt: 1,\n  dueAt: 1,\n  status: 1,\n  title: 1,\n  description: 1,\n  updatedAt: 1,\n  isPrivate: 1,\n  priority: 1\n});\n\nconst task = () => (0, _objectSpread2.default)({}, baseTask(), {\n  assigneeLink: 1,\n  assignee: simpleUser(),\n  loan: {\n    name: 1,\n    borrowers: {\n      name: 1\n    },\n    user: {\n      name: 1\n    }\n  },\n  user: {\n    name: 1\n  }\n});\n\nconst simpleUser = () => ({\n  email: 1,\n  emails: 1,\n  name: 1,\n  firstName: 1,\n  lastName: 1,\n  phoneNumbers: 1,\n  phoneNumber: 1,\n  roles: 1\n});\n\nconst organisationUser = () => (0, _objectSpread2.default)({}, simpleUser(), {\n  organisations: baseOrganisation()\n});\n\nconst fullUser = () => (0, _objectSpread2.default)({}, simpleUser(), {\n  apiPublicKey: 1,\n  assignedEmployee: simpleUser(),\n  createdAt: 1,\n  emails: 1,\n  loans: loanBase(),\n  updatedAt: 1,\n  organisations: fullOrganisation()\n});\n\nconst adminUser = () => (0, _objectSpread2.default)({}, fullUser(), {\n  assignedEmployee: simpleUser(),\n  assignedEmployeeCache: 1,\n  promotions: {\n    name: 1,\n    status: 1\n  },\n  proProperties: {\n    address1: 1,\n    status: 1,\n    loanCount: 1,\n    totalValue: 1\n  },\n  referredByUser: {\n    name: 1,\n    organisations: {\n      name: 1\n    }\n  },\n  referredByOrganisation: {\n    name: 1\n  },\n  referredByOrganisationLink: 1\n});\n\nconst appUser = () => (0, _objectSpread2.default)({}, fullUser(), {\n  assignedEmployee: simpleUser(),\n  borrowers: {\n    name: 1\n  },\n  loans: {\n    borrowers: {\n      _id: 1,\n      name: 1\n    },\n    customName: 1,\n    hasPromotion: 1,\n    hasProProperty: 1,\n    name: 1,\n    promotions: {\n      address: 1,\n      name: 1,\n      documents: 1\n    },\n    properties: {\n      address: 1,\n      documents: 1\n    },\n    purchaseType: 1,\n    step: 1\n  },\n  properties: {\n    _id: 1\n  }\n});\n\nconst proUser = () => (0, _objectSpread2.default)({}, fullUser(), {\n  assignedEmployee: simpleUser(),\n  promotions: {\n    _id: 1,\n    name: 1,\n    permissions: 1,\n    status: 1,\n    users: {\n      _id: 1\n    }\n  },\n  properties: {\n    _id: 1\n  },\n  proProperties: {\n    _id: 1,\n    address1: 1,\n    permissions: 1,\n    status: 1,\n    users: {\n      _id: 1\n    }\n  }\n});\n\nconst revenue = () => ({\n  amount: 1,\n  createdAt: 1,\n  description: 1,\n  expectedAt: 1,\n  loan: {\n    name: 1\n  },\n  organisationLinks: 1,\n  organisations: {\n    name: 1\n  },\n  paidAt: 1,\n  secondaryType: 1,\n  sourceOrganisationLink: 1,\n  sourceOrganisation: {\n    name: 1\n  },\n  status: 1,\n  type: 1\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/index.js                                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  constants: () => constants,\n  schemas: () => schemas\n});\nmodule.link(\"./initialization\");\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\n\nlet _constants;\n\nmodule.link(\"./constants\", {\n  \"*\"(v) {\n    _constants = v;\n  }\n\n}, 1);\nlet LoanSchema;\nmodule.link(\"./loans/schemas/LoanSchema\", {\n  default(v) {\n    LoanSchema = v;\n  }\n\n}, 2);\nlet PromotionOptionSchema;\nmodule.link(\"./promotionOptions/schemas/PromotionOptionSchema\", {\n  default(v) {\n    PromotionOptionSchema = v;\n  }\n\n}, 3);\nlet BorrowerSchema;\nmodule.link(\"./borrowers/schemas/BorrowerSchema\", {\n  default(v) {\n    BorrowerSchema = v;\n  }\n\n}, 4);\nlet PropertySchema;\nmodule.link(\"./properties/schemas/PropertySchema\", {\n  default(v) {\n    PropertySchema = v;\n  }\n\n}, 5);\nlet TasksSchema;\nmodule.link(\"./tasks/tasks\", {\n  TasksSchema(v) {\n    TasksSchema = v;\n  }\n\n}, 6);\nlet PromotionSchema;\nmodule.link(\"./promotions/schemas/PromotionSchema\", {\n  default(v) {\n    PromotionSchema = v;\n  }\n\n}, 7);\nlet LotSchema;\nmodule.link(\"./lots/schemas/LotSchema\", {\n  default(v) {\n    LotSchema = v;\n  }\n\n}, 8);\nlet OfferSchema;\nmodule.link(\"./offers/offers\", {\n  OfferSchema(v) {\n    OfferSchema = v;\n  }\n\n}, 9);\nlet PromotionLotSchema;\nmodule.link(\"./promotionLots/schemas/PromotionLotSchema\", {\n  default(v) {\n    PromotionLotSchema = v;\n  }\n\n}, 10);\nlet OrganisationSchema;\nmodule.link(\"./organisations/organisations\", {\n  OrganisationSchema(v) {\n    OrganisationSchema = v;\n  }\n\n}, 11);\nlet UserSchema;\nmodule.link(\"./users/users\", {\n  UserSchema(v) {\n    UserSchema = v;\n  }\n\n}, 12);\nlet InterestRatesSchema;\nmodule.link(\"./interestRates/schemas/interestRatesSchema\", {\n  default(v) {\n    InterestRatesSchema = v;\n  }\n\n}, 13);\nlet Irs10ySchema;\nmodule.link(\"./irs10y/schemas/irs10ySchema\", {\n  default(v) {\n    Irs10ySchema = v;\n  }\n\n}, 14);\nlet MortgageNoteSchema;\nmodule.link(\"./mortgageNotes/schemas/MortgageNoteSchema\", {\n  default(v) {\n    MortgageNoteSchema = v;\n  }\n\n}, 15);\nlet ContactSchema;\nmodule.link(\"./contacts/schemas/contactSchema\", {\n  default(v) {\n    ContactSchema = v;\n  }\n\n}, 16);\nlet LenderSchema;\nmodule.link(\"./lenders/schemas/lenderSchema\", {\n  default(v) {\n    LenderSchema = v;\n  }\n\n}, 17);\nlet RevenueSchema;\nmodule.link(\"./revenues/schemas/revenueSchema\", {\n  default(v) {\n    RevenueSchema = v;\n  }\n\n}, 18);\nmodule.link(\"./borrowers\", {\n  default: \"Borrowers\"\n}, 19);\nmodule.link(\"./loans\", {\n  default: \"Loans\"\n}, 20);\nmodule.link(\"./lots\", {\n  default: \"Lots\"\n}, 21);\nmodule.link(\"./offers\", {\n  default: \"Offers\"\n}, 22);\nmodule.link(\"./organisations\", {\n  default: \"Organisations\"\n}, 23);\nmodule.link(\"./promotionLots\", {\n  default: \"PromotionLots\"\n}, 24);\nmodule.link(\"./promotionOptions\", {\n  default: \"PromotionOptions\"\n}, 25);\nmodule.link(\"./promotions\", {\n  default: \"Promotions\"\n}, 26);\nmodule.link(\"./properties\", {\n  default: \"Properties\"\n}, 27);\nmodule.link(\"./tasks\", {\n  default: \"Tasks\"\n}, 28);\nmodule.link(\"./users\", {\n  default: \"Users\"\n}, 29);\nmodule.link(\"./interestRates\", {\n  default: \"InterestRates\"\n}, 30);\nmodule.link(\"./irs10y\", {\n  default: \"Irs10y\"\n}, 31);\nmodule.link(\"./mortgageNotes\", {\n  default: \"MortgageNotes\"\n}, 32);\nmodule.link(\"./contacts\", {\n  default: \"Contacts\"\n}, 33);\nmodule.link(\"./lenders\", {\n  default: \"Lenders\"\n}, 34);\nmodule.link(\"./lenderRules\", {\n  default: \"LenderRules\"\n}, 35);\nmodule.link(\"./revenues\", {\n  default: \"Revenues\"\n}, 36);\nmodule.link(\"./methods\", {\n  \"*\": \"*\"\n}, 37);\nmodule.link(\"./helpers\", {\n  \"*\": \"*\"\n}, 38);\nmodule.link(\"./containerToolkit\", {\n  \"*\": \"*\"\n}, 39);\nconst constants = _constants;\nconst schemas = {\n  [constants.BORROWERS_COLLECTION]: BorrowerSchema,\n  [constants.LOANS_COLLECTION]: LoanSchema,\n  [constants.LOTS_COLLECTION]: LotSchema,\n  [constants.OFFERS_COLLECTION]: OfferSchema,\n  [constants.PROMOTION_LOTS_COLLECTION]: PromotionLotSchema,\n  [constants.PROMOTION_OPTIONS_COLLECTION]: PromotionOptionSchema,\n  [constants.PROMOTIONS_COLLECTION]: PromotionSchema,\n  [constants.PROPERTIES_COLLECTION]: PropertySchema,\n  [constants.TASKS_COLLECTION]: TasksSchema,\n  [constants.ORGANISATIONS_COLLECTION]: OrganisationSchema,\n  [constants.USERS_COLLECTION]: UserSchema,\n  [constants.INTEREST_RATES_COLLECTION]: InterestRatesSchema,\n  [constants.IRS10Y_COLLECTION]: Irs10ySchema,\n  [constants.MORTGAGE_NOTES_COLLECTION]: MortgageNoteSchema,\n  [constants.CONTACTS_COLLECTION]: ContactSchema,\n  [constants.LENDERS_COLLECTION]: LenderSchema,\n  [constants.REVENUES_COLLECTION]: RevenueSchema\n};\nMeteor.isStaging = Meteor.settings.public.environment === 'staging';\nMeteor.isDevEnvironment = Meteor.settings.public.environment === 'dev-production';\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"initialization.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/api/initialization.js                                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"uniforms-bridge-simple-schema-2\");\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\nSimpleSchema.extendOptions(['condition', 'customAllowedValues', 'customAutoValue']);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"redux\":{\"widget1\":{\"test\":{\"Widget1Suggester.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/redux/widget1/test/Widget1Suggester.spec.js                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet Widget1Suggester;\nmodule.link(\"../Widget1Suggester\", {\n  default(v) {\n    Widget1Suggester = v;\n  }\n\n}, 1);\ndescribe('Widget1SuggesterClass', () => {\n  describe('getMaxPossibleLoan', () => {\n    it('returns the hard cap if salary is not a problem', () => {\n      expect(Widget1Suggester.getMaxPossibleLoan({\n        property: 10000,\n        salary: 5000\n      })).to.equal(8000);\n    });\n    it('returns a value modified by salary', () => {\n      expect(Widget1Suggester.getMaxPossibleLoan({\n        property: 1000000,\n        salary: 120000\n      })).to.equal(600000);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Widget1Suggestion.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/redux/widget1/test/Widget1Suggestion.spec.js                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet merge;\nmodule.link(\"lodash/merge\", {\n  default(v) {\n    merge = v;\n  }\n\n}, 1);\nlet widget1Suggesters, makeSuggestValue;\nmodule.link(\"../widget1Suggestion\", {\n  default(v) {\n    widget1Suggesters = v;\n  },\n\n  makeSuggestValue(v) {\n    makeSuggestValue = v;\n  }\n\n}, 2);\nlet PURCHASE_TYPE, SALARY, PROPERTY, FORTUNE, WANTED_LOAN;\nmodule.link(\"../widget1Constants\", {\n  PURCHASE_TYPE(v) {\n    PURCHASE_TYPE = v;\n  },\n\n  SALARY(v) {\n    SALARY = v;\n  },\n\n  PROPERTY(v) {\n    PROPERTY = v;\n  },\n\n  FORTUNE(v) {\n    FORTUNE = v;\n  },\n\n  WANTED_LOAN(v) {\n    WANTED_LOAN = v;\n  }\n\n}, 3);\nconst value = 100;\n\nconst prepareState = overrides => ({\n  widget1: merge({\n    purchaseType: PURCHASE_TYPE.ACQUISITION,\n    property: {\n      value,\n      auto: false\n    },\n    salary: {\n      value,\n      auto: false\n    },\n    fortune: {\n      value,\n      auto: false\n    },\n    currentLoan: {\n      value,\n      auto: false\n    },\n    wantedLoan: {\n      value,\n      auto: false\n    }\n  }, overrides)\n});\n\ndescribe('suggestValue', () => {\n  let suggesters;\n\n  const createSuggestValue = () => makeSuggestValue(suggesters);\n\n  beforeEach(() => {\n    suggesters = {\n      [PURCHASE_TYPE.ACQUISITION]: {\n        [SALARY]: {}\n      },\n      [PURCHASE_TYPE.REFINANCING]: {}\n    };\n  });\n  it('should not suggest a value if it is currently manual', () => {\n    expect(createSuggestValue()('salary', prepareState())).to.equal(value);\n  });\n  it('should suggest a value with \"all\" if it is in auto and the others false', () => {\n    suggesters[PURCHASE_TYPE.ACQUISITION][SALARY].all = () => 1;\n\n    expect(createSuggestValue()('salary', prepareState({\n      salary: {\n        auto: true\n      }\n    }))).to.equal(1);\n  });\n  it('should suggest a value with \"fortune\" if property is in auto', () => {\n    suggesters[PURCHASE_TYPE.ACQUISITION][SALARY].fortune = () => 1;\n\n    expect(createSuggestValue()('salary', prepareState({\n      salary: {\n        auto: true\n      },\n      property: {\n        auto: true\n      }\n    }))).to.equal(1);\n  });\n  it('should use the default suggester if none is found', () => {\n    suggesters[PURCHASE_TYPE.ACQUISITION][SALARY] = {\n      default: () => 42\n    };\n    expect(createSuggestValue()(SALARY, prepareState({\n      salary: {\n        auto: true\n      }\n    }))).to.equal(42);\n  });\n});\ndescribe('widget1Suggesters', () => {\n  describe('salary', () => {\n    it('suggests a salary with all', () => {\n      expect(widget1Suggesters(SALARY, prepareState({\n        salary: {\n          auto: true\n        },\n        property: {\n          auto: false\n        },\n        fortune: {\n          auto: false\n        }\n      }))).to.equal(5);\n    });\n    it('suggests a salary with all and proper values', () => {\n      expect(widget1Suggesters(SALARY, prepareState({\n        salary: {\n          auto: true\n        },\n        property: {\n          auto: false,\n          value: 1000000\n        },\n        fortune: {\n          auto: false,\n          value: 250000\n        }\n      }) // + 1 here because of rounding issues\n      )).to.equal(180000 + 1);\n    });\n    it('suggests a salary with property', () => {\n      expect(widget1Suggesters(SALARY, prepareState({\n        salary: {\n          auto: true\n        },\n        property: {\n          auto: false\n        },\n        fortune: {\n          auto: true\n        }\n      }))).to.be.within(18, 18.1);\n    });\n    it('suggests a salary with fortune', () => {\n      expect(widget1Suggesters(SALARY, prepareState({\n        salary: {\n          auto: true\n        },\n        property: {\n          auto: true\n        },\n        fortune: {\n          auto: false\n        }\n      }))).to.be.within(72, 72.1);\n    });\n  });\n  describe('fortune', () => {\n    it('suggests a fortune with all', () => {\n      expect(widget1Suggesters(FORTUNE, prepareState({\n        salary: {\n          auto: false\n        },\n        property: {\n          auto: false\n        },\n        fortune: {\n          auto: true\n        }\n      }))).to.equal(25);\n    });\n    it('suggests a fortune with all and proper values', () => {\n      expect(widget1Suggesters(FORTUNE, prepareState({\n        property: {\n          auto: false,\n          value: 1000000\n        },\n        salary: {\n          auto: false,\n          value: 180000\n        },\n        fortune: {\n          auto: true\n        }\n      }))).to.equal(250000);\n    });\n    it('suggests a fortune with property', () => {\n      expect(widget1Suggesters(FORTUNE, prepareState({\n        salary: {\n          auto: true\n        },\n        property: {\n          auto: false\n        },\n        fortune: {\n          auto: true\n        }\n      }))).to.be.within(24.9, 25);\n    });\n    it('suggests a fortune with salary', () => {\n      expect(widget1Suggesters(FORTUNE, prepareState({\n        salary: {\n          auto: false\n        },\n        property: {\n          auto: true\n        },\n        fortune: {\n          auto: true\n        }\n      }))).to.be.within(138.9, 139);\n    });\n  });\n  describe('property', () => {\n    it('suggests a property with all', () => {\n      expect(widget1Suggesters(PROPERTY, prepareState({\n        salary: {\n          auto: false\n        },\n        property: {\n          auto: true\n        },\n        fortune: {\n          auto: false\n        }\n      }))).to.equal(400);\n    });\n    it('suggests a property with proper values', () => {\n      expect(widget1Suggesters(PROPERTY, prepareState({\n        salary: {\n          auto: false,\n          value: 180000\n        },\n        property: {\n          auto: true\n        },\n        fortune: {\n          auto: false,\n          value: 250000\n        }\n      }))).to.equal(1000000);\n    });\n    it('suggests a property with salary', () => {\n      expect(widget1Suggesters(PROPERTY, prepareState({\n        salary: {\n          auto: false\n        },\n        property: {\n          auto: true\n        },\n        fortune: {\n          auto: true\n        }\n      }))).to.equal(556);\n    });\n    it('suggests a property with fortune', () => {\n      expect(widget1Suggesters(PROPERTY, prepareState({\n        salary: {\n          auto: true\n        },\n        property: {\n          auto: true\n        },\n        fortune: {\n          auto: false\n        }\n      }))).to.be.within(400, 400.1);\n    });\n  });\n  describe('wantedLoan', () => {\n    it('suggests a wantedLoan with currentLoan', () => {\n      expect(widget1Suggesters(WANTED_LOAN, prepareState({\n        wantedLoan: {\n          auto: true\n        },\n        currentLoan: {\n          auto: false,\n          value: 42\n        },\n        fortune: {\n          auto: false\n        },\n        purchaseType: PURCHASE_TYPE.REFINANCING\n      }))).to.equal(42);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"widget1Actions.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/redux/widget1/test/widget1Actions.spec.js                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet configureMockStore;\nmodule.link(\"redux-mock-store\", {\n  default(v) {\n    configureMockStore = v;\n  }\n\n}, 1);\nlet thunk;\nmodule.link(\"redux-thunk\", {\n  default(v) {\n    thunk = v;\n  }\n\n}, 2);\nlet MAX_BORROW_RATIO_PRIMARY_PROPERTY, MAX_BORROW_RATIO_WITH_PLEDGE;\nmodule.link(\"../../../config/financeConstants\", {\n  MAX_BORROW_RATIO_PRIMARY_PROPERTY(v) {\n    MAX_BORROW_RATIO_PRIMARY_PROPERTY = v;\n  },\n\n  MAX_BORROW_RATIO_WITH_PLEDGE(v) {\n    MAX_BORROW_RATIO_WITH_PLEDGE = v;\n  }\n\n}, 3);\nlet widget1Actions;\nmodule.link(\"../widget1Actions\", {\n  \"*\"(v) {\n    widget1Actions = v;\n  }\n\n}, 4);\nlet widget1Types;\nmodule.link(\"../widget1Types\", {\n  \"*\"(v) {\n    widget1Types = v;\n  }\n\n}, 5);\nlet widget1Constants;\nmodule.link(\"../widget1Constants\", {\n  \"*\"(v) {\n    widget1Constants = v;\n  }\n\n}, 6);\nlet commonTypes;\nmodule.link(\"../../common\", {\n  commonTypes(v) {\n    commonTypes = v;\n  }\n\n}, 7);\nconst middlewares = [thunk];\nconst mockStore = configureMockStore(middlewares);\nlet store;\n\nconst expectActions = (actionCreator, expectedActions, comment) => store.dispatch(actionCreator).then(() => {\n  expect(store.getActions()).deep.equal(expectedActions, comment);\n});\n\nconst prepareStore = overrides => mockStore({\n  widget1: (0, _objectSpread2.default)({}, widget1Constants.ALL_FIELDS.reduce((acc, name) => (0, _objectSpread2.default)({}, acc, {\n    [name]: {\n      value: 0,\n      auto: true\n    }\n  }), {}), {\n    step: widget1Constants.FINAL_STEP,\n    purchaseType: widget1Constants.PURCHASE_TYPE.ACQUISITION\n  }, overrides)\n});\n\ndescribe('widget1Actions', () => {\n  const NAME = 'testName';\n  const value = 100;\n  beforeEach(() => {\n    store = prepareStore();\n  });\n  describe('suggestValues', () => {\n    it('does not dispatch anything if the user is not at the full calculator', () => {\n      store = prepareStore({\n        step: 0\n      });\n      const expectedActions = [];\n      return expectActions(widget1Actions.suggestValues(), expectedActions);\n    });\n    it('dispatches one action for each NAME if the step is the final one', () => {\n      const expectedActions = widget1Constants.ACQUISITION_FIELDS.map(name => ({\n        type: widget1Types.SUGGEST_VALUE(name),\n        value: 0\n      }));\n      return expectActions(widget1Actions.suggestValues(), expectedActions);\n    });\n    it('suggests the right values for a 180k salary', () => {\n      store = prepareStore();\n      const expectedActions = widget1Constants.ACQUISITION_FIELDS.map(name => ({\n        type: widget1Types.SUGGEST_VALUE(name),\n        value: 0\n      }));\n      return expectActions(widget1Actions.suggestValues(), expectedActions);\n    });\n  });\n  describe('setValue', () => {\n    it('sets a value and suggests values', () => {\n      const expectedActions = [{\n        type: widget1Types.SET_VALUE(NAME),\n        value\n      }, ...widget1Constants.ACQUISITION_FIELDS.map(name => ({\n        type: widget1Types.SUGGEST_VALUE(name),\n        value: 0\n      }))];\n      return expectActions(widget1Actions.setValue(NAME, value), expectedActions);\n    });\n    widget1Constants.ALL_FIELDS.forEach(field => {\n      const cappedFields = widget1Constants.CAPPED_FIELDS;\n      it(\"caps field \".concat(field, \" at 80% of the property price\"), () => {\n        const propertyValue = 100;\n        const nextValue = 200;\n        store = prepareStore({\n          step: 0,\n          property: {\n            value: propertyValue\n          }\n        });\n        const expectedActions = [{\n          type: widget1Types.SET_VALUE(field),\n          value: cappedFields.includes(field) ? MAX_BORROW_RATIO_PRIMARY_PROPERTY * propertyValue : nextValue\n        }];\n        return expectActions(widget1Actions.setValue(field, nextValue), expectedActions, \"failed for field: \".concat(field));\n      });\n    });\n    it('caps a field at 90% of the property price if allowExtremeValue is true', () => {\n      const propertyValue = 100;\n      const nextValue = 200;\n      store = prepareStore({\n        step: 0,\n        property: {\n          value: propertyValue\n        },\n        wantedLoan: {\n          allowExtremeLoan: true\n        }\n      });\n      const expectedActions = [{\n        type: widget1Types.SET_VALUE(widget1Constants.WANTED_LOAN),\n        value: MAX_BORROW_RATIO_WITH_PLEDGE * propertyValue\n      }];\n      return expectActions(widget1Actions.setValue(widget1Constants.WANTED_LOAN, nextValue), expectedActions);\n    });\n    it('allows capped fields to be set to an empty string', () => {\n      const propertyValue = 100;\n      const nextValue = '';\n      store = prepareStore({\n        step: 0,\n        property: {\n          value: propertyValue\n        },\n        wantedLoan: {\n          allowExtremeLoan: true\n        }\n      });\n      const expectedActions = [{\n        type: widget1Types.SET_VALUE(widget1Constants.WANTED_LOAN),\n        value: ''\n      }];\n      return expectActions(widget1Actions.setValue(widget1Constants.WANTED_LOAN, nextValue), expectedActions);\n    });\n  });\n  describe('setAuto', () => {\n    it('sets a value to auto, and resuggests all values', () => {\n      const expectedActions = [{\n        type: widget1Types.SET_AUTO(NAME),\n        auto: true\n      }, ...widget1Constants.ACQUISITION_FIELDS.map(name => ({\n        type: widget1Types.SUGGEST_VALUE(name),\n        value: 0\n      }))];\n      return expectActions(widget1Actions.setAuto(NAME, true), expectedActions);\n    });\n  });\n  describe('increaseSliderMax', () => {\n    it('creates the right action', () => {\n      const expectedActions = {\n        type: widget1Types.INCREASE_SLIDER_MAX(NAME)\n      };\n      expect(widget1Actions.increaseSliderMax(NAME)).to.deep.equal(expectedActions);\n    });\n  });\n  describe('setStep', () => {\n    it('does not dispatch anything if the next step if lower than current step', () => {\n      store = prepareStore({\n        step: 1\n      });\n      const expectedActions = [];\n      return expectActions(widget1Actions.setStep(0), expectedActions);\n    });\n    it('sets the step if it is not the final step', () => {\n      store = prepareStore({\n        step: 0\n      });\n      const expectedActions = [{\n        type: commonTypes.SET_VALUE('step'),\n        value: 1\n      }];\n      return expectActions(widget1Actions.setStep(1), expectedActions);\n    });\n    it('sets the step and suggests values if it will be the final step', () => {\n      // getState does not work in redux-mock-store, so set the final step\n      // initially as well to make sure getState gets the right value\n      // for the `suggestValues` action\n      store = prepareStore({\n        step: widget1Constants.ACQUISITION_FIELDS.length\n      });\n      const expectedActions = [{\n        type: commonTypes.SET_VALUE('step'),\n        value: widget1Constants.ACQUISITION_FIELDS.length\n      }, ...widget1Constants.ACQUISITION_FIELDS.map(name => ({\n        type: widget1Types.SUGGEST_VALUE(name),\n        value: 0\n      })), {\n        type: commonTypes.SET_VALUE('finishedTutorial'),\n        value: true\n      }];\n      return expectActions(widget1Actions.setStep(widget1Constants.ACQUISITION_FIELDS.length), expectedActions);\n    });\n  });\n  describe('resetCalculator', () => {\n    it('resets all the values', () => {\n      const expectedActions = widget1Constants.ALL_FIELDS.reduce((acc, field) => [...acc, {\n        type: widget1Types.SET_VALUE(field),\n        value: 0\n      }, {\n        type: widget1Types.SET_AUTO(field),\n        auto: true\n      }], []);\n      return expectActions(widget1Actions.resetCalculator(), expectedActions);\n    });\n    it('sets property and currentLoan to auto false in refinancing', () => {\n      store = prepareStore({\n        purchaseType: widget1Constants.PURCHASE_TYPE.REFINANCING\n      });\n      const expectedActions = widget1Constants.ALL_FIELDS.reduce((acc, field) => [...acc, {\n        type: widget1Types.SET_VALUE(field),\n        value: 0\n      }, {\n        type: widget1Types.SET_AUTO(field),\n        auto: true\n      }], []);\n      return expectActions(widget1Actions.resetCalculator(), [...expectedActions, {\n        type: widget1Types.SET_AUTO(widget1Constants.PROPERTY),\n        auto: false\n      }, {\n        type: widget1Types.SET_AUTO(widget1Constants.CURRENT_LOAN),\n        auto: false\n      }]);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"widget1Reducers.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/redux/widget1/test/widget1Reducers.spec.js                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet widget1, createWidget1ValueReducers;\nmodule.link(\"../widget1Reducers\", {\n  default(v) {\n    widget1 = v;\n  },\n\n  createWidget1ValueReducers(v) {\n    createWidget1ValueReducers = v;\n  }\n\n}, 1);\nlet SET_VALUE, SUGGEST_VALUE, SET_AUTO, INCREASE_SLIDER_MAX, SET_ALLOW_EXTREME_LOAN;\nmodule.link(\"../widget1Types\", {\n  SET_VALUE(v) {\n    SET_VALUE = v;\n  },\n\n  SUGGEST_VALUE(v) {\n    SUGGEST_VALUE = v;\n  },\n\n  SET_AUTO(v) {\n    SET_AUTO = v;\n  },\n\n  INCREASE_SLIDER_MAX(v) {\n    INCREASE_SLIDER_MAX = v;\n  },\n\n  SET_ALLOW_EXTREME_LOAN(v) {\n    SET_ALLOW_EXTREME_LOAN = v;\n  }\n\n}, 2);\nlet ALL_FIELDS, SALARY, FORTUNE, CURRENT_LOAN;\nmodule.link(\"../widget1Constants\", {\n  ALL_FIELDS(v) {\n    ALL_FIELDS = v;\n  },\n\n  SALARY(v) {\n    SALARY = v;\n  },\n\n  FORTUNE(v) {\n    FORTUNE = v;\n  },\n\n  CURRENT_LOAN(v) {\n    CURRENT_LOAN = v;\n  }\n\n}, 3);\ndescribe('widget1 Reducer', () => {\n  it('should return the initial state', () => {\n    expect(widget1()).to.deep.equal((0, _objectSpread2.default)({}, ALL_FIELDS.reduce((acc, name) => (0, _objectSpread2.default)({}, acc, {\n      [name]: {\n        value: 0,\n        auto: false,\n        sliderMax: name === SALARY || name === FORTUNE ? 500000 : 2000000\n      }\n    }), {}), {\n      step: 0,\n      interestRate: 0.015,\n      purchaseType: 'ACQUISITION',\n      finishedTutorial: false,\n      useMaintenance: true\n    }));\n  });\n  describe('widget1 value reducer', () => {\n    const initialSliderMax = 10;\n    const TEST = 'TEST';\n    const reducer = createWidget1ValueReducers([{\n      name: TEST,\n      initialSliderMax\n    }])[TEST];\n    const initialState = {\n      value: 0,\n      auto: false,\n      sliderMax: initialSliderMax\n    };\n    it('should return the initial state', () => {\n      expect(reducer(undefined, {})).to.deep.equal(initialState);\n    });\n    describe('setValue action', () => {\n      it('should handle setValue and put auto to false', () => {\n        const value = 100;\n        expect(reducer({}, {\n          type: SET_VALUE(TEST),\n          value\n        })).to.deep.equal({\n          value,\n          auto: false\n        });\n      });\n      it('It should set auto to true and value to 0 if the value is set to 0 or falsy', () => {\n        let value = 0;\n        expect(reducer({}, {\n          type: SET_VALUE(TEST),\n          value\n        })).to.deep.equal({\n          value: 0,\n          auto: true\n        });\n        value = undefined;\n        expect(reducer({}, {\n          type: SET_VALUE(TEST),\n          value\n        })).to.deep.equal({\n          value: 0,\n          auto: true\n        });\n        value = false;\n        expect(reducer({}, {\n          type: SET_VALUE(TEST),\n          value\n        })).to.deep.equal({\n          value: 0,\n          auto: true\n        });\n      });\n      it('should not set auto to true for CURRENT_LOAN if it is set to 0', () => {\n        const currentLoanReducer = createWidget1ValueReducers([{\n          name: CURRENT_LOAN,\n          initialSliderMax\n        }])[CURRENT_LOAN];\n        const value = 0;\n        expect(currentLoanReducer({}, {\n          type: SET_VALUE(CURRENT_LOAN),\n          value\n        })).to.deep.equal({\n          value: 0,\n          auto: false\n        });\n      });\n      it('should allow the value to be an empty string, so that the user can keep typing', () => {\n        const value = '';\n        expect(reducer({}, {\n          type: SET_VALUE(TEST),\n          value\n        })).to.deep.equal({\n          value,\n          auto: false\n        });\n      });\n      it('rounds the value that is set', () => {\n        const value = 100.2;\n        expect(reducer({}, {\n          type: SET_VALUE(TEST),\n          value\n        })).to.deep.equal({\n          value: 100,\n          auto: false\n        });\n      });\n    });\n    describe('suggestValue action', () => {\n      it('sets the value without changing auto', () => {\n        const value = 100;\n        let auto = true;\n        expect(reducer({\n          auto\n        }, {\n          type: SUGGEST_VALUE(TEST),\n          value\n        })).to.deep.equal({\n          value,\n          auto\n        });\n        auto = false;\n        expect(reducer({\n          auto\n        }, {\n          type: SUGGEST_VALUE(TEST),\n          value\n        })).to.deep.equal({\n          value,\n          auto\n        });\n      });\n    });\n    describe('setAuto action', () => {\n      it('sets auto', () => {\n        let auto = true;\n        expect(reducer({}, {\n          type: SET_AUTO(TEST),\n          auto\n        })).to.deep.equal({\n          auto\n        });\n        auto = false;\n        expect(reducer({}, {\n          type: SET_AUTO(TEST),\n          auto\n        })).to.deep.equal({\n          auto\n        });\n      });\n      it('toggles auto if no value is provided', () => {\n        let auto = true;\n        expect(reducer({\n          auto\n        }, {\n          type: SET_AUTO(TEST)\n        })).to.deep.equal({\n          auto: !auto\n        });\n        auto = false;\n        expect(reducer({\n          auto\n        }, {\n          type: SET_AUTO(TEST)\n        })).to.deep.equal({\n          auto: !auto\n        });\n      });\n    });\n    describe('increaseSliderMax action', () => {\n      it('doubles sliderMax', () => {\n        expect(reducer({\n          sliderMax: 50\n        }, {\n          type: INCREASE_SLIDER_MAX(TEST)\n        })).to.deep.equal({\n          sliderMax: 2 * 50\n        });\n      });\n      it('prevents a user from going above 100M', () => {\n        expect(reducer({\n          sliderMax: 50000001\n        }, {\n          type: INCREASE_SLIDER_MAX(TEST)\n        })).to.deep.equal({\n          sliderMax: 100000000\n        });\n      });\n    });\n    describe('setAllowExtremeLoan action', () => {\n      it('sets allowExtremeLoan to true', () => {\n        expect(reducer({}, {\n          type: SET_ALLOW_EXTREME_LOAN(TEST)\n        })).to.deep.equal({\n          allowExtremeLoan: true\n        });\n      });\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"widget1Selectors.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/redux/widget1/test/widget1Selectors.spec.js                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet makeWidget1Selector, makeSelectValue, selectFields, selectAutoValues;\nmodule.link(\"../widget1Selectors\", {\n  makeWidget1Selector(v) {\n    makeWidget1Selector = v;\n  },\n\n  makeSelectValue(v) {\n    makeSelectValue = v;\n  },\n\n  selectFields(v) {\n    selectFields = v;\n  },\n\n  selectAutoValues(v) {\n    selectAutoValues = v;\n  }\n\n}, 1);\nlet PURCHASE_TYPE, ACQUISITION_FIELDS, REFINANCING_FIELDS;\nmodule.link(\"../widget1Constants\", {\n  PURCHASE_TYPE(v) {\n    PURCHASE_TYPE = v;\n  },\n\n  ACQUISITION_FIELDS(v) {\n    ACQUISITION_FIELDS = v;\n  },\n\n  REFINANCING_FIELDS(v) {\n    REFINANCING_FIELDS = v;\n  }\n\n}, 2);\ndescribe('selectors', () => {\n  describe('makeWidget1Selector', () => {\n    it('should select widget1', () => {\n      const myField = 'hello world';\n      expect(makeWidget1Selector('myField')({\n        widget1: {\n          myField\n        }\n      })).to.equal(myField);\n    });\n  });\n  describe('makeSelectValue', () => {\n    it('should get the value of a field', () => {\n      const myField = {\n        value: 200\n      };\n      expect(makeSelectValue('myField')({\n        widget1: {\n          myField\n        }\n      })).to.equal(myField.value);\n    });\n  });\n  describe('selectFields', () => {\n    it('should select the right fields', () => {\n      expect(selectFields({\n        widget1: {\n          purchaseType: PURCHASE_TYPE.ACQUISITION\n        }\n      })).to.equal(ACQUISITION_FIELDS);\n      expect(selectFields({\n        widget1: {\n          purchaseType: PURCHASE_TYPE.REFINANCING\n        }\n      })).to.equal(REFINANCING_FIELDS);\n    });\n  });\n  describe('selectAutoValues', () => {\n    it('selects all auto values based on purchase type', () => {\n      const autoValues = {\n        salary: {\n          auto: 1\n        },\n        fortune: {\n          auto: 2\n        },\n        property: {\n          auto: 3\n        }\n      };\n      expect(selectAutoValues({\n        widget1: (0, _objectSpread2.default)({\n          purchaseType: PURCHASE_TYPE.ACQUISITION\n        }, autoValues)\n      })).to.deep.equal({\n        salary: autoValues.salary.auto,\n        fortune: autoValues.fortune.auto,\n        property: autoValues.property.auto\n      });\n    });\n    it('selects all auto values based on purchase type', () => {\n      const autoValues = {\n        salary: {\n          auto: 1\n        },\n        fortune: {\n          auto: 2\n        },\n        property: {\n          auto: 3\n        },\n        wantedLoan: {\n          auto: 4\n        },\n        currentLoan: {\n          auto: 5\n        }\n      };\n      expect(selectAutoValues({\n        widget1: (0, _objectSpread2.default)({\n          purchaseType: PURCHASE_TYPE.REFINANCING\n        }, autoValues)\n      })).to.deep.equal({\n        salary: autoValues.salary.auto,\n        property: autoValues.property.auto,\n        currentLoan: autoValues.currentLoan.auto,\n        wantedLoan: autoValues.wantedLoan.auto\n      });\n    });\n    it.skip('memoizes properly, running the same computation only once', () => {\n      let autoValues = {\n        salary: {\n          auto: 1\n        },\n        fortune: {\n          auto: 2\n        },\n        property: {\n          auto: 3\n        }\n      };\n      expect(selectAutoValues.recomputations()).to.equal(0);\n      expect(selectAutoValues({\n        widget1: (0, _objectSpread2.default)({\n          purchaseType: PURCHASE_TYPE.ACQUISITION\n        }, autoValues)\n      })).to.deep.equal({\n        salary: autoValues.salary.auto,\n        fortune: autoValues.fortune.auto,\n        property: autoValues.property.auto\n      });\n      autoValues = {\n        salary: {\n          auto: 1\n        },\n        fortune: {\n          auto: 2\n        },\n        property: {\n          auto: 3\n        }\n      };\n      expect(selectAutoValues({\n        widget1: (0, _objectSpread2.default)({\n          purchaseType: PURCHASE_TYPE.ACQUISITION\n        }, autoValues)\n      })).to.deep.equal({\n        salary: autoValues.salary.auto,\n        fortune: autoValues.fortune.auto,\n        property: autoValues.property.auto\n      });\n      expect(selectAutoValues.recomputations()).to.equal(1);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"Widget1Suggester.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/redux/widget1/Widget1Suggester.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  Widget1SuggesterClass: () => Widget1SuggesterClass\n});\nlet NOTARY_FEES, MAINTENANCE_FINMA, INTERESTS_FINMA, MAX_INCOME_RATIO, MAX_BORROW_RATIO_PRIMARY_PROPERTY, MAX_BORROW_RATIO_WITH_PLEDGE, AMORTIZATION_STOP, AMORTIZATION_YEARS;\nmodule.link(\"../../config/financeConstants\", {\n  NOTARY_FEES(v) {\n    NOTARY_FEES = v;\n  },\n\n  MAINTENANCE_FINMA(v) {\n    MAINTENANCE_FINMA = v;\n  },\n\n  INTERESTS_FINMA(v) {\n    INTERESTS_FINMA = v;\n  },\n\n  MAX_INCOME_RATIO(v) {\n    MAX_INCOME_RATIO = v;\n  },\n\n  MAX_BORROW_RATIO_PRIMARY_PROPERTY(v) {\n    MAX_BORROW_RATIO_PRIMARY_PROPERTY = v;\n  },\n\n  MAX_BORROW_RATIO_WITH_PLEDGE(v) {\n    MAX_BORROW_RATIO_WITH_PLEDGE = v;\n  },\n\n  AMORTIZATION_STOP(v) {\n    AMORTIZATION_STOP = v;\n  },\n\n  AMORTIZATION_YEARS(v) {\n    AMORTIZATION_YEARS = v;\n  }\n\n}, 0);\nlet roundTo;\nmodule.link(\"../../utils/conversionFunctions\", {\n  roundTo(v) {\n    roundTo = v;\n  }\n\n}, 1);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nclass Widget1SuggesterClass {\n  constructor(_ref) {\n    let {\n      notaryFees\n    } = _ref;\n\n    _defineProperty(this, \"suggestSalary\", (_ref2) => {\n      let {\n        property,\n        fortune\n      } = _ref2;\n      const loan = property * (1 + this.notaryFees) - fortune;\n      const m = MAINTENANCE_FINMA;\n      const i = INTERESTS_FINMA;\n      const mR = MAX_INCOME_RATIO;\n      const withAmortizing = (property * m + loan * (i + (loan - 0.65 * property) / (15 * loan))) / mR;\n      const withoutAmortizing = (property * m + loan * i) / mR;\n      return Math.round(Math.max(withAmortizing, withoutAmortizing) + 1);\n    });\n\n    _defineProperty(this, \"suggestFortune\", (_ref3) => {\n      let {\n        property,\n        salary\n      } = _ref3;\n      const m = MAINTENANCE_FINMA;\n      const i = INTERESTS_FINMA;\n      const mR = MAX_INCOME_RATIO;\n      const nF = this.notaryFees; // It has to cover 20% and notaryfees\n\n      const basicValue = property * (0.2 + nF); // When there is very little income, go to rank 1 (basically, amortization = 0)\n\n      const rank1Fortune = (property * (m + i * (1 + nF)) - mR * salary) / i; // For the case that there is a reasonable amount of fortune, go to rank 2\n      // Here amortization is complex and depends on the borrow Ratio\n\n      const rank2Fortune = (property * (15 * m + nF + 0.35 + 15 * i * (1 + nF)) - mR * 15 * salary) / (15 * i + 1);\n      const rankFortune = Math.max(rank1Fortune, rank2Fortune);\n      const maxFortune = Math.round(Math.max(0, rankFortune, basicValue)); // Make sure fortune never goes above the property value\n\n      return Math.min(maxFortune, property);\n    });\n\n    _defineProperty(this, \"getSalaryLimitedProperty\", (_ref4) => {\n      let {\n        salary,\n        fortune\n      } = _ref4;\n      // The arithmetic relation to have the cost of the loan be at exactly the max ratio of income\n      // Derive it like this:\n      // maxRatio * salary >= property * maintenance + loan * loanCost\n      // loan = (property + notaryFees + lppFees) - totalFortune\n      // Extract property from this relation\n      const nF = this.notaryFees;\n      const i = INTERESTS_FINMA;\n      const mR = MAX_INCOME_RATIO;\n      const m = MAINTENANCE_FINMA;\n      const r = AMORTIZATION_YEARS; // The first one is with 0 amortization\n\n      const incomeLimited1 = (mR * salary + fortune * i) / (m + (1 + nF) * i); // The second is with amortization factored in (and it could be negative due to math)\n\n      const incomeLimited2 = ((1 + r * i) * fortune + mR * r * salary) / (r * (m + i) + nF * (1 + r * i) + 0.35); // Therefore, take the minimum value of both, which is the most limiting one\n      // Because of the ratios, round this value down\n\n      return Math.floor(Math.min(incomeLimited1, incomeLimited2));\n    });\n\n    _defineProperty(this, \"suggestProperty\", (_ref5) => {\n      let {\n        salary,\n        fortune\n      } = _ref5;\n      const fortuneLimitedProperty = this.fortuneToProperty({\n        fortune\n      });\n      const salaryLimitedProperty = this.getSalaryLimitedProperty({\n        salary,\n        fortune\n      }); // Use floor to make sure the ratios are respected and avoid edge cases\n\n      return Math.round(Math.min(fortuneLimitedProperty, salaryLimitedProperty));\n    });\n\n    _defineProperty(this, \"propertyToFortuneRatio\", () => 1 - MAX_BORROW_RATIO_PRIMARY_PROPERTY + this.notaryFees);\n\n    _defineProperty(this, \"propertyToFortune\", (_ref6) => {\n      let {\n        property\n      } = _ref6;\n      return property * this.propertyToFortuneRatio();\n    });\n\n    _defineProperty(this, \"fortuneToProperty\", (_ref7) => {\n      let {\n        fortune\n      } = _ref7;\n      return fortune / this.propertyToFortuneRatio();\n    });\n\n    _defineProperty(this, \"defaultAmortization\", () => (MAX_BORROW_RATIO_PRIMARY_PROPERTY - AMORTIZATION_STOP) / MAX_BORROW_RATIO_PRIMARY_PROPERTY / AMORTIZATION_YEARS);\n\n    _defineProperty(this, \"loanCost\", () => INTERESTS_FINMA + this.defaultAmortization());\n\n    _defineProperty(this, \"propertyToSalaryRatio\", () => 3 * (MAINTENANCE_FINMA + MAX_BORROW_RATIO_PRIMARY_PROPERTY * this.loanCost()));\n\n    _defineProperty(this, \"propertyToSalary\", (_ref8) => {\n      let {\n        property\n      } = _ref8;\n      return property * this.propertyToSalaryRatio();\n    });\n\n    _defineProperty(this, \"salaryToProperty\", (_ref9) => {\n      let {\n        salary\n      } = _ref9;\n      return Math.ceil(salary / this.propertyToSalaryRatio());\n    });\n\n    _defineProperty(this, \"suggestWantedLoan\", (_ref10) => {\n      let {\n        currentLoan\n      } = _ref10;\n      return currentLoan;\n    });\n\n    _defineProperty(this, \"getMaxPossibleLoan\", (_ref11) => {\n      let {\n        property,\n        salary\n      } = _ref11;\n      // temporarily disable notaryFees\n      const currentNotaryFees = this.notaryFees;\n      this.notaryFees = 0;\n      const fortune = this.suggestFortune({\n        property,\n        salary\n      });\n      this.notaryFees = currentNotaryFees;\n      const maxLoan = property - fortune;\n      const hardCap = Math.floor(property * MAX_BORROW_RATIO_WITH_PLEDGE);\n      return roundTo(Math.min(maxLoan, hardCap), 3);\n    });\n\n    this.notaryFees = notaryFees || NOTARY_FEES;\n  } // This function is documented in the google drive: \"Maths widget1.pdf\" document\n\n\n}\n\nmodule.exportDefault(new Widget1SuggesterClass({}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/redux/widget1/index.js                                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  widget1Selectors: () => widget1Selectors,\n  widget1Actions: () => widget1Actions,\n  widget1Constants: () => widget1Constants,\n  widget1Types: () => widget1Types\n});\n\nlet _widget1Selectors;\n\nmodule.link(\"./widget1Selectors\", {\n  \"*\"(v) {\n    _widget1Selectors = v;\n  }\n\n}, 0);\n\nlet _widget1Actions;\n\nmodule.link(\"./widget1Actions\", {\n  \"*\"(v) {\n    _widget1Actions = v;\n  }\n\n}, 1);\n\nlet _widget1Constants;\n\nmodule.link(\"./widget1Constants\", {\n  \"*\"(v) {\n    _widget1Constants = v;\n  }\n\n}, 2);\n\nlet _widget1Types;\n\nmodule.link(\"./widget1Types\", {\n  \"*\"(v) {\n    _widget1Types = v;\n  }\n\n}, 3);\nmodule.link(\"./Widget1Suggester\", {\n  default: \"Widget1Suggester\"\n}, 4);\nmodule.link(\"./widget1Reducers\", {\n  default: \"default\"\n}, 5);\nconst widget1Selectors = _widget1Selectors;\nconst widget1Actions = _widget1Actions;\nconst widget1Constants = _widget1Constants;\nconst widget1Types = _widget1Types;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"widget1Actions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/redux/widget1/widget1Actions.js                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  suggestValues: () => suggestValues,\n  getPropertyCappedValue: () => getPropertyCappedValue,\n  cleanNextValue: () => cleanNextValue,\n  setValue: () => setValue,\n  setAuto: () => setAuto,\n  increaseSliderMax: () => increaseSliderMax,\n  setStep: () => setStep,\n  resetCalculator: () => resetCalculator,\n  setAllowExtremeLoan: () => setAllowExtremeLoan\n});\nlet MAX_BORROW_RATIO_PRIMARY_PROPERTY, MAX_BORROW_RATIO_WITH_PLEDGE;\nmodule.link(\"../../config/financeConstants\", {\n  MAX_BORROW_RATIO_PRIMARY_PROPERTY(v) {\n    MAX_BORROW_RATIO_PRIMARY_PROPERTY = v;\n  },\n\n  MAX_BORROW_RATIO_WITH_PLEDGE(v) {\n    MAX_BORROW_RATIO_WITH_PLEDGE = v;\n  }\n\n}, 0);\nlet types;\nmodule.link(\"./widget1Types\", {\n  \"*\"(v) {\n    types = v;\n  }\n\n}, 1);\nlet makeWidget1Selector, selectFields, makeSelectValue;\nmodule.link(\"./widget1Selectors\", {\n  makeWidget1Selector(v) {\n    makeWidget1Selector = v;\n  },\n\n  selectFields(v) {\n    selectFields = v;\n  },\n\n  makeSelectValue(v) {\n    makeSelectValue = v;\n  }\n\n}, 2);\nlet ALL_FIELDS, FINAL_STEP, PROPERTY, CAPPED_FIELDS, CURRENT_LOAN, PURCHASE_TYPE;\nmodule.link(\"./widget1Constants\", {\n  ALL_FIELDS(v) {\n    ALL_FIELDS = v;\n  },\n\n  FINAL_STEP(v) {\n    FINAL_STEP = v;\n  },\n\n  PROPERTY(v) {\n    PROPERTY = v;\n  },\n\n  CAPPED_FIELDS(v) {\n    CAPPED_FIELDS = v;\n  },\n\n  CURRENT_LOAN(v) {\n    CURRENT_LOAN = v;\n  },\n\n  PURCHASE_TYPE(v) {\n    PURCHASE_TYPE = v;\n  }\n\n}, 3);\nlet suggestValue;\nmodule.link(\"./widget1Suggestion\", {\n  default(v) {\n    suggestValue = v;\n  }\n\n}, 4);\nlet commonTypes;\nmodule.link(\"../common\", {\n  commonTypes(v) {\n    commonTypes = v;\n  }\n\n}, 5);\n\nconst suggestValues = () => (dispatch, getState) => {\n  const state = getState();\n  const step = makeWidget1Selector('step')(state);\n  let suggestActions = [];\n\n  if (step >= FINAL_STEP) {\n    suggestActions = selectFields(state).map(NAME => dispatch({\n      type: types.SUGGEST_VALUE(NAME),\n      value: suggestValue(NAME, state)\n    }));\n  }\n\n  return Promise.all(suggestActions);\n};\n\nconst getPropertyCappedValue = (name, state) => {\n  const propertyValue = makeSelectValue(PROPERTY)(state);\n  const {\n    allowExtremeLoan\n  } = makeWidget1Selector(name)(state);\n  const maxValue = allowExtremeLoan ? propertyValue * MAX_BORROW_RATIO_WITH_PLEDGE : propertyValue * MAX_BORROW_RATIO_PRIMARY_PROPERTY;\n  return Math.floor(maxValue);\n};\n\nconst shouldCapValue = (name, nextValue) => CAPPED_FIELDS.includes(name) && nextValue !== '';\n\nconst cleanNextValue = (name, nextValue, getState) => {\n  if (shouldCapValue(name, nextValue)) {\n    const state = getState();\n    const maxValue = getPropertyCappedValue(name, state);\n    return Math.min(nextValue, maxValue);\n  }\n\n  return nextValue;\n};\n\nconst setValue = (name, nextValue) => (dispatch, getState) => Promise.resolve().then(() => dispatch({\n  type: types.SET_VALUE(name),\n  value: cleanNextValue(name, nextValue, getState)\n})).then(() => dispatch(suggestValues()));\n\nconst setAuto = (name, nextAuto) => dispatch => Promise.resolve().then(() => dispatch({\n  type: types.SET_AUTO(name),\n  auto: nextAuto\n})).then(() => dispatch(suggestValues()));\n\nconst increaseSliderMax = name => ({\n  type: types.INCREASE_SLIDER_MAX(name)\n});\n\nconst setStep = nextStep => (dispatch, getState) => {\n  const state = getState();\n  const step = makeWidget1Selector('step')(state); // Only set the step if we're not going down\n\n  if (step > nextStep) {\n    return Promise.resolve();\n  }\n\n  const willBeFinalStep = nextStep === FINAL_STEP;\n  return Promise.resolve().then(() => dispatch({\n    type: commonTypes.SET_VALUE('step'),\n    value: nextStep\n  })).then(() => // Special exception here, as suggestValues only runs once\n  // the widget1 is at the FINAL_STEP. Suggest values should be run\n  // if the user enters a value here\n  willBeFinalStep && dispatch(suggestValues())).then(() => {\n    const fields = selectFields(state);\n\n    if (step >= fields.length - 1) {\n      dispatch({\n        type: commonTypes.SET_VALUE('finishedTutorial'),\n        value: true\n      });\n    }\n  });\n};\n\nconst resetCalculator = () => (dispatch, getState) => {\n  const state = getState();\n  const purchaseType = makeWidget1Selector('purchaseType')(state);\n  return Promise.all(ALL_FIELDS.map(name => {\n    dispatch({\n      type: types.SET_VALUE(name),\n      value: 0\n    });\n    dispatch({\n      type: types.SET_AUTO(name),\n      auto: true\n    });\n  })).then(() => {\n    if (purchaseType === PURCHASE_TYPE.REFINANCING) {\n      // Keep property and current loan to false during refinancing\n      dispatch({\n        type: types.SET_AUTO(PROPERTY),\n        auto: false\n      });\n      dispatch({\n        type: types.SET_AUTO(CURRENT_LOAN),\n        auto: false\n      });\n    }\n  });\n};\n\nconst setAllowExtremeLoan = name => ({\n  type: types.SET_ALLOW_EXTREME_LOAN(name)\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"widget1Constants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/redux/widget1/widget1Constants.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  SALARY: () => SALARY,\n  FORTUNE: () => FORTUNE,\n  PROPERTY: () => PROPERTY,\n  CURRENT_LOAN: () => CURRENT_LOAN,\n  WANTED_LOAN: () => WANTED_LOAN,\n  ACQUISITION_FIELDS: () => ACQUISITION_FIELDS,\n  REFINANCING_FIELDS: () => REFINANCING_FIELDS,\n  ALL_FIELDS: () => ALL_FIELDS,\n  CAPPED_FIELDS: () => CAPPED_FIELDS,\n  FINAL_STEP: () => FINAL_STEP,\n  PURCHASE_TYPE: () => PURCHASE_TYPE\n});\nconst SALARY = 'salary';\nconst FORTUNE = 'fortune';\nconst PROPERTY = 'property';\nconst CURRENT_LOAN = 'currentLoan';\nconst WANTED_LOAN = 'wantedLoan';\nconst ACQUISITION_FIELDS = [PROPERTY, SALARY, FORTUNE];\nconst REFINANCING_FIELDS = [PROPERTY, SALARY, CURRENT_LOAN, WANTED_LOAN];\nconst ALL_FIELDS = [PROPERTY, SALARY, FORTUNE, CURRENT_LOAN, WANTED_LOAN];\nconst CAPPED_FIELDS = [CURRENT_LOAN, WANTED_LOAN];\nconst FINAL_STEP = 3;\nconst PURCHASE_TYPE = {\n  ACQUISITION: 'ACQUISITION',\n  REFINANCING: 'REFINANCING'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"widget1Reducers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/redux/widget1/widget1Reducers.js                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  createWidget1ValueReducers: () => createWidget1ValueReducers\n});\nlet combineReducers;\nmodule.link(\"redux\", {\n  combineReducers(v) {\n    combineReducers = v;\n  }\n\n}, 0);\nlet DEFAULT_INTEREST_RATE;\nmodule.link(\"../../config/financeConstants\", {\n  DEFAULT_INTEREST_RATE(v) {\n    DEFAULT_INTEREST_RATE = v;\n  }\n\n}, 1);\nlet createValueReducer;\nmodule.link(\"../common/reducers\", {\n  createValueReducer(v) {\n    createValueReducer = v;\n  }\n\n}, 2);\nlet SALARY, PROPERTY, FORTUNE, PURCHASE_TYPE, CURRENT_LOAN, WANTED_LOAN;\nmodule.link(\"./widget1Constants\", {\n  SALARY(v) {\n    SALARY = v;\n  },\n\n  PROPERTY(v) {\n    PROPERTY = v;\n  },\n\n  FORTUNE(v) {\n    FORTUNE = v;\n  },\n\n  PURCHASE_TYPE(v) {\n    PURCHASE_TYPE = v;\n  },\n\n  CURRENT_LOAN(v) {\n    CURRENT_LOAN = v;\n  },\n\n  WANTED_LOAN(v) {\n    WANTED_LOAN = v;\n  }\n\n}, 3);\nlet SET_VALUE, SUGGEST_VALUE, SET_AUTO, INCREASE_SLIDER_MAX, SET_ALLOW_EXTREME_LOAN;\nmodule.link(\"./widget1Types\", {\n  SET_VALUE(v) {\n    SET_VALUE = v;\n  },\n\n  SUGGEST_VALUE(v) {\n    SUGGEST_VALUE = v;\n  },\n\n  SET_AUTO(v) {\n    SET_AUTO = v;\n  },\n\n  INCREASE_SLIDER_MAX(v) {\n    INCREASE_SLIDER_MAX = v;\n  },\n\n  SET_ALLOW_EXTREME_LOAN(v) {\n    SET_ALLOW_EXTREME_LOAN = v;\n  }\n\n}, 4);\n\nconst roundedValue = value => value && Math.round(value);\n\nconst createWidget1ValueReducers = names => names.reduce((acc, _ref) => {\n  let {\n    name,\n    initialSliderMax\n  } = _ref;\n  return (0, _objectSpread2.default)({}, acc, {\n    [name]: function () {\n      let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        value: 0,\n        auto: false,\n        sliderMax: initialSliderMax\n      };\n      let action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      switch (action.type) {\n        case SET_VALUE(name):\n          if (action.value === '') {\n            // Allow empty string if the user edits the textfield\n            return (0, _objectSpread2.default)({}, state, {\n              value: '',\n              auto: false\n            });\n          }\n\n          if (!action.value && name !== CURRENT_LOAN) {\n            // Set auto to true if the value is changed to 0\n            // (via slider or by typing 0)\n            // Exception for current_loan which is the only value that\n            // can explicitly be set to 0\n            return (0, _objectSpread2.default)({}, state, {\n              value: 0,\n              auto: true\n            });\n          } // Set auto to false if this value is set\n\n\n          return (0, _objectSpread2.default)({}, state, {\n            auto: false,\n            value: roundedValue(action.value)\n          });\n\n        case SUGGEST_VALUE(name):\n          // If the value is suggested, don't change auto\n          return (0, _objectSpread2.default)({}, state, {\n            value: roundedValue(action.value)\n          });\n\n        case SET_AUTO(name):\n          {\n            const nextAuto = action.auto !== undefined ? action.auto : !state.auto;\n            return (0, _objectSpread2.default)({}, state, {\n              auto: nextAuto\n            });\n          }\n\n        case INCREASE_SLIDER_MAX(name):\n          return (0, _objectSpread2.default)({}, state, {\n            sliderMax: Math.min(state.sliderMax * 2, 100000000)\n          });\n\n        case SET_ALLOW_EXTREME_LOAN(name):\n          return (0, _objectSpread2.default)({}, state, {\n            allowExtremeLoan: true\n          });\n\n        default:\n          return state;\n      }\n    }\n  });\n}, {});\n\nconst widget1 = combineReducers((0, _objectSpread2.default)({}, createWidget1ValueReducers([{\n  name: SALARY,\n  initialSliderMax: 500000\n}, {\n  name: FORTUNE,\n  initialSliderMax: 500000\n}, {\n  name: PROPERTY,\n  initialSliderMax: 2000000\n}, {\n  name: CURRENT_LOAN,\n  initialSliderMax: 2000000\n}, {\n  name: WANTED_LOAN,\n  initialSliderMax: 2000000\n}]), {\n  step: createValueReducer('step', 0),\n  // TODO: Set me back to 0 for production\n  interestRate: createValueReducer('interestRate', DEFAULT_INTEREST_RATE),\n  purchaseType: createValueReducer('purchaseType', PURCHASE_TYPE.ACQUISITION),\n  finishedTutorial: createValueReducer('finishedTutorial', false),\n  useMaintenance: createValueReducer('useMaintenance', true)\n}));\nmodule.exportDefault(widget1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"widget1Selectors.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/redux/widget1/widget1Selectors.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  makeWidget1Selector: () => makeWidget1Selector,\n  makeSelectValue: () => makeSelectValue,\n  makeSelectAuto: () => makeSelectAuto,\n  selectFields: () => selectFields,\n  selectAutoValues: () => selectAutoValues\n});\nlet createSelector, createStructuredSelector;\nmodule.link(\"reselect\", {\n  createSelector(v) {\n    createSelector = v;\n  },\n\n  createStructuredSelector(v) {\n    createStructuredSelector = v;\n  }\n\n}, 0);\nlet PURCHASE_TYPE, ACQUISITION_FIELDS, REFINANCING_FIELDS;\nmodule.link(\"./widget1Constants\", {\n  PURCHASE_TYPE(v) {\n    PURCHASE_TYPE = v;\n  },\n\n  ACQUISITION_FIELDS(v) {\n    ACQUISITION_FIELDS = v;\n  },\n\n  REFINANCING_FIELDS(v) {\n    REFINANCING_FIELDS = v;\n  }\n\n}, 1);\n\nconst selectWidget1 = state => state.widget1;\n\nconst selectState = state => state;\n\nconst makeWidget1Selector = name => createSelector(selectWidget1, widget1 => widget1[name]);\n\nconst makeSelectValue = name => createSelector(makeWidget1Selector(name), widget1Object => widget1Object.value);\n\nconst makeSelectAuto = name => createSelector(makeWidget1Selector(name), widget1Object => widget1Object.auto);\n\nconst selectFields = createSelector(makeWidget1Selector('purchaseType'), purchaseType => purchaseType === PURCHASE_TYPE.ACQUISITION ? ACQUISITION_FIELDS : REFINANCING_FIELDS);\n\nconst pickAutoValues = (state, fields) => createStructuredSelector(fields.reduce((acc, name) => (0, _objectSpread2.default)({}, acc, {\n  [name]: makeSelectAuto(name)\n}), {}))(state);\n\nconst selectAutoValues = createSelector([selectState, selectFields], pickAutoValues);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"widget1Suggestion.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/redux/widget1/widget1Suggestion.js                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  makeSuggestValue: () => makeSuggestValue\n});\nlet compose;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  }\n\n}, 0);\nlet makeSelectValue, selectAutoValues, makeWidget1Selector;\nmodule.link(\"./widget1Selectors\", {\n  makeSelectValue(v) {\n    makeSelectValue = v;\n  },\n\n  selectAutoValues(v) {\n    selectAutoValues = v;\n  },\n\n  makeWidget1Selector(v) {\n    makeWidget1Selector = v;\n  }\n\n}, 1);\nlet SALARY, FORTUNE, PROPERTY, CURRENT_LOAN, WANTED_LOAN, PURCHASE_TYPE;\nmodule.link(\"./widget1Constants\", {\n  SALARY(v) {\n    SALARY = v;\n  },\n\n  FORTUNE(v) {\n    FORTUNE = v;\n  },\n\n  PROPERTY(v) {\n    PROPERTY = v;\n  },\n\n  CURRENT_LOAN(v) {\n    CURRENT_LOAN = v;\n  },\n\n  WANTED_LOAN(v) {\n    WANTED_LOAN = v;\n  },\n\n  PURCHASE_TYPE(v) {\n    PURCHASE_TYPE = v;\n  }\n\n}, 2);\nlet Widget1Suggester;\nmodule.link(\"./Widget1Suggester\", {\n  default(v) {\n    Widget1Suggester = v;\n  }\n\n}, 3);\n// For each name, there are 3 suggesters, based on which other values are\n// currently set to `auto` or not.\n// If all other values are set to `auto: false`, use `all` function,\n// otherwise use the 2nd or 3rd function\nconst acquisitionSuggesters = {\n  [SALARY]: {\n    all: Widget1Suggester.suggestSalary,\n    [FORTUNE]: compose(Widget1Suggester.propertyToSalary, property => ({\n      property\n    }), Widget1Suggester.fortuneToProperty),\n    [PROPERTY]: Widget1Suggester.propertyToSalary\n  },\n  [FORTUNE]: {\n    all: Widget1Suggester.suggestFortune,\n    [SALARY]: compose(Widget1Suggester.propertyToFortune, property => ({\n      property\n    }), Widget1Suggester.salaryToProperty),\n    [PROPERTY]: Widget1Suggester.propertyToFortune\n  },\n  [PROPERTY]: {\n    all: Widget1Suggester.suggestProperty,\n    [SALARY]: Widget1Suggester.salaryToProperty,\n    [FORTUNE]: Widget1Suggester.fortuneToProperty\n  }\n};\nconst refinancingSuggesters = {\n  [SALARY]: {\n    all: () => 0,\n    [WANTED_LOAN]: () => 0,\n    [PROPERTY]: () => 0\n  },\n  [PROPERTY]: {\n    default: () => 0\n  },\n  [CURRENT_LOAN]: {\n    default: () => 0\n  },\n  [WANTED_LOAN]: {\n    default: Widget1Suggester.suggestWantedLoan\n  }\n}; // Pick the right suggester for `name`\n\nconst makeValueSuggester = (suggesters, name, _ref) => {\n  let [firstManualKey, secondManualKey] = _ref;\n  let suggester;\n\n  if (secondManualKey) {\n    // Both keys are manual, use `all` suggester\n    suggester = suggesters[name].all;\n  } else if (!firstManualKey) {\n    // If all values are auto, just set them all to 0\n    suggester = () => 0;\n  } else {\n    // Only one value is manual, use it to suggest the other ones\n    suggester = suggesters[name][firstManualKey];\n  } // Make sure we have a fallback suggester\n\n\n  return suggester || suggesters[name].default;\n};\n\nconst makeSuggestValue = suggesters => (name, state) => {\n  // Get the number value for this name\n  const value = makeSelectValue(name)(state);\n  const purchaseType = makeWidget1Selector('purchaseType')(state); // Get an object with all the auto values for every key\n  // The auto value for the current name should be true\n\n  const autoValues = selectAutoValues(state);\n  const thisValueIsManual = !autoValues[name];\n\n  if (thisValueIsManual) {\n    return value;\n  } // Get an array of the keys that are manual and should be used to compute\n  // the next value\n\n\n  const manualValueKeys = Object.keys(autoValues).filter(key => !autoValues[key]);\n  const manualValues = manualValueKeys.map(key => makeSelectValue(key)(state));\n  const suggester = makeValueSuggester(suggesters[purchaseType], name, manualValueKeys); // Allow all values to be accessed by key as well, for suggestWantedLoan\n\n  const suggestingValues = manualValueKeys.reduce((acc, key, index) => (0, _objectSpread2.default)({}, acc, {\n    [key]: manualValues[index]\n  }), {});\n  const suggestedValue = suggester(suggestingValues);\n  return suggestedValue;\n};\n\nmodule.exportDefault(makeSuggestValue({\n  [PURCHASE_TYPE.REFINANCING]: refinancingSuggesters,\n  [PURCHASE_TYPE.ACQUISITION]: acquisitionSuggesters\n}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"widget1Types.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/redux/widget1/widget1Types.js                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  SET_VALUE: () => SET_VALUE,\n  SUGGEST_VALUE: () => SUGGEST_VALUE,\n  SET_AUTO: () => SET_AUTO,\n  INCREASE_SLIDER_MAX: () => INCREASE_SLIDER_MAX,\n  SET_ALLOW_EXTREME_LOAN: () => SET_ALLOW_EXTREME_LOAN\n});\n\nconst SET_VALUE = name => \"[\".concat(name, \"] Set value\");\n\nconst SUGGEST_VALUE = name => \"[\".concat(name, \"] Suggest value\");\n\nconst SET_AUTO = name => \"[\".concat(name, \"] Set auto\");\n\nconst INCREASE_SLIDER_MAX = name => \"[\".concat(name, \"] Increase slider max\");\n\nconst SET_ALLOW_EXTREME_LOAN = name => \"[\".concat(name, \"] Set allow extreme loan\");\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"common\":{\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/redux/common/index.js                                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  commonReducers: () => commonReducers,\n  commonTypes: () => commonTypes\n});\n\nlet _commonReducers;\n\nmodule.link(\"./reducers\", {\n  \"*\"(v) {\n    _commonReducers = v;\n  }\n\n}, 0);\n\nlet _commonTypes;\n\nmodule.link(\"./types\", {\n  \"*\"(v) {\n    _commonTypes = v;\n  }\n\n}, 1);\nconst commonReducers = _commonReducers;\nconst commonTypes = _commonTypes;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"reducers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/redux/common/reducers.js                                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  createValueReducer: () => createValueReducer\n});\nlet SET_VALUE, RESET_VALUE;\nmodule.link(\"./types\", {\n  SET_VALUE(v) {\n    SET_VALUE = v;\n  },\n\n  RESET_VALUE(v) {\n    RESET_VALUE = v;\n  }\n\n}, 0);\n\nconst createValueReducer = function (valueName) {\n  let initialState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  return function () {\n    let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    let {\n      type,\n      value\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    switch (type) {\n      case SET_VALUE(valueName):\n        return value;\n\n      case RESET_VALUE(valueName):\n        return initialState;\n\n      default:\n        return state;\n    }\n  };\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"types.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/redux/common/types.js                                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  SET_VALUE: () => SET_VALUE,\n  RESET_VALUE: () => RESET_VALUE\n});\n\nconst SET_VALUE = name => \"[\".concat(name, \"] Set\");\n\nconst RESET_VALUE = name => \"[\".concat(name, \"] Reset\");\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"utils\":{\"Calculator\":{\"test\":{\"BorrowerCalculator.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/test/BorrowerCalculator.spec.js                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet Calculator, CalculatorClass;\nmodule.link(\"..\", {\n  default(v) {\n    Calculator = v;\n  },\n\n  Calculator(v) {\n    CalculatorClass = v;\n  }\n\n}, 1);\nlet STEPS, GENDER, EXPENSES;\nmodule.link(\"../../../api/constants\", {\n  STEPS(v) {\n    STEPS = v;\n  },\n\n  GENDER(v) {\n    GENDER = v;\n  },\n\n  EXPENSES(v) {\n    EXPENSES = v;\n  }\n\n}, 2);\nlet DOCUMENTS;\nmodule.link(\"../../../api/constants\", {\n  DOCUMENTS(v) {\n    DOCUMENTS = v;\n  }\n\n}, 3);\nlet initialDocuments;\nmodule.link(\"../../../api/borrowers/borrowersAdditionalDocuments\", {\n  initialDocuments(v) {\n    initialDocuments = v;\n  }\n\n}, 4);\nlet BONUS_ALGORITHMS, REAL_ESTATE_INCOME_ALGORITHMS;\nmodule.link(\"../../../config/financeConstants\", {\n  BONUS_ALGORITHMS(v) {\n    BONUS_ALGORITHMS = v;\n  },\n\n  REAL_ESTATE_INCOME_ALGORITHMS(v) {\n    REAL_ESTATE_INCOME_ALGORITHMS = v;\n  }\n\n}, 5);\ndescribe('BorrowerCalculator', () => {\n  describe('getArrayValues', () => {\n    it(\"returns 0 if the key doesn't exist\", () => {\n      expect(Calculator.getArrayValues({}, 'key')).to.equal(0);\n    });\n    it(\"returns the sum of all value keys in an object's array\", () => {\n      expect(Calculator.getArrayValues({\n        borrowers: {\n          array: [{\n            value: 1\n          }, {\n            value: 2\n          }]\n        },\n        key: 'array'\n      })).to.equal(3);\n    });\n    it('works with arrays', () => {\n      expect(Calculator.getArrayValues({\n        borrowers: [{\n          array: [{\n            value: 1\n          }, {\n            value: 2\n          }]\n        }, {\n          array: [{\n            value: 3\n          }, {\n            value: 4\n          }]\n        }],\n        key: 'array'\n      })).to.equal(10);\n    });\n    it('works with a provided mapFunc', () => {\n      expect(Calculator.getArrayValues({\n        borrowers: [{\n          array: [{\n            yo: 1\n          }, {\n            value: 2\n          }]\n        }, {\n          array: [{\n            value: 3\n          }, {\n            yo: 4\n          }]\n        }],\n        key: 'array'\n      }, item => item.yo)).to.equal(5);\n    });\n  });\n  describe('getBonusIncome', () => {\n    it('returns half of 1 bonus', () => {\n      expect(Calculator.getBonusIncome({\n        borrowers: {\n          bonusExists: true,\n          bonus2018: 100\n        }\n      })).to.equal(50);\n    });\n    it('returns half of average 2 bonuses', () => {\n      expect(Calculator.getBonusIncome({\n        borrowers: {\n          bonusExists: true,\n          bonus2018: 100,\n          bonus2015: 0\n        }\n      })).to.equal(50);\n    });\n    it('returns half of average 3 bonuses', () => {\n      expect(Calculator.getBonusIncome({\n        borrowers: {\n          bonusExists: true,\n          bonus2018: 100,\n          bonus2017: 0,\n          bonus2016: 200\n        }\n      })).to.equal(75);\n    });\n    it('returns 0 if bonusExists is false', () => {\n      expect(Calculator.getBonusIncome({\n        borrowers: {\n          bonusExists: false,\n          bonus2015: 50,\n          bonus2016: 150,\n          bonus2017: 40,\n          bonus2018: 100\n        }\n      })).to.equal(0);\n    });\n    it('considers bonuses differently based on bonusConsideration', () => {\n      const calc = new CalculatorClass({\n        bonusConsideration: 1\n      });\n      expect(calc.getBonusIncome({\n        borrowers: {\n          bonusExists: true,\n          bonus2015: 40,\n          bonus2016: 150,\n          bonus2017: 50,\n          bonus2018: 100\n        }\n      })).to.equal(100);\n    });\n    it('considers fewer bonuses with bonusHistoryToConsider', () => {\n      const calc = new CalculatorClass({\n        bonusConsideration: 1,\n        bonusHistoryToConsider: 1\n      });\n      expect(calc.getBonusIncome({\n        borrowers: {\n          bonusExists: true,\n          bonus2015: 50,\n          bonus2016: 150,\n          bonus2017: 40,\n          bonus2019: 200\n        }\n      })).to.equal(200);\n    });\n    it('works with 2 borrowers', () => {\n      expect(Calculator.getBonusIncome({\n        borrowers: [{\n          bonusExists: true,\n          bonus2018: 100,\n          bonus2017: 0,\n          bonus2016: 200\n        }, {\n          bonusExists: false,\n          bonus2018: 100,\n          bonus2017: 0,\n          bonus2016: 200\n        }]\n      })).to.equal(75);\n    });\n    it('uses the AVERAGE algorithm', () => {\n      const calc = new CalculatorClass({\n        bonusConsideration: 1,\n        bonusHistoryToConsider: 2,\n        bonusAlgorithm: BONUS_ALGORITHMS.AVERAGE\n      });\n      expect(calc.getBonusIncome({\n        borrowers: {\n          bonusExists: true,\n          bonus2019: 200\n        }\n      })).to.equal(100);\n    });\n    it('uses the WEAK_AVERAGE algorithm', () => {\n      const calc = new CalculatorClass({\n        bonusConsideration: 1,\n        bonusHistoryToConsider: 3,\n        bonusAlgorithm: BONUS_ALGORITHMS.WEAK_AVERAGE\n      });\n      expect(calc.getBonusIncome({\n        borrowers: {\n          bonusExists: true,\n          bonus2019: 200,\n          bonus2018: 200,\n          bonus2017: 0\n        }\n      })).to.equal(200);\n    });\n  });\n  describe('getBonuses', () => {\n    it('returns the sum of bonuses for a given year', () => {\n      expect(Calculator.getBonuses({\n        borrowers: [{\n          bonusExists: 10,\n          bonus2018: null,\n          bonus2016: 200\n        }, {\n          bonusExists: true,\n          bonus2017: 5,\n          bonus2016: 200,\n          bonus2019: 5\n        }]\n      })).to.deep.equal({\n        bonus2016: 400,\n        bonus2017: 5,\n        bonus2019: 5\n      });\n    });\n    it('omits borrowers with bonusExists false', () => {\n      expect(Calculator.getBonuses({\n        borrowers: [{\n          bonusExists: 10,\n          bonus2018: null,\n          bonus2016: 200\n        }, {\n          bonusExists: false,\n          bonus2017: 5,\n          bonus2016: 200,\n          bonus2019: 5\n        }]\n      })).to.deep.equal({\n        bonus2016: 200\n      });\n    });\n  });\n  describe('getBorrowerCompletion', () => {\n    it('should be 0% for a new borrower', () => {\n      expect(Calculator.getBorrowerCompletion({\n        loan: {\n          borrowers: [{\n            documents: {},\n            _id: 'docId',\n            additionalDocuments: initialDocuments\n          }]\n        }\n      })).to.equal(0);\n    });\n    it('should not be 0% when adding data', () => {\n      expect(Calculator.getBorrowerCompletion({\n        loan: {\n          borrowers: [{\n            firstName: 'joe',\n            lastName: 'johnson',\n            documents: {},\n            logic: {},\n            _id: 'docId',\n            additionalDocuments: initialDocuments\n          }]\n        }\n      })).to.be.within(0.01, 0.1);\n    });\n    it('should not be 0% when adding a document', () => {\n      expect(Calculator.getBorrowerCompletion({\n        loan: {\n          borrowers: [{\n            documents: {\n              [DOCUMENTS.IDENTITY]: [{}]\n            },\n            logic: {},\n            _id: 'docId',\n            additionalDocuments: initialDocuments\n          }]\n        }\n      })).to.be.within(0.01, 0.1);\n    });\n    it('should count files and info', () => {\n      expect(Calculator.getBorrowerCompletion({\n        loan: {\n          borrowers: [{\n            firstName: 'joe',\n            lastName: 'johnson',\n            documents: {\n              [DOCUMENTS.IDENTITY]: [{}]\n            },\n            logic: {},\n            _id: 'borrowerId',\n            additionalDocuments: initialDocuments\n          }]\n        }\n      })).to.be.within(0.13, 0.14);\n    });\n  });\n  describe('getBorrowerFilesProgress', () => {\n    it('returns 0 when no file is present', () => {\n      expect(Calculator.getBorrowerFilesProgress({\n        loan: {\n          borrowers: [{\n            documents: {},\n            _id: 'borrowerId',\n            additionalDocuments: initialDocuments\n          }]\n        }\n      })).to.deep.equal({\n        percent: 0,\n        count: 6\n      });\n    });\n    it('returns 0 when no documents are present', () => {\n      expect(Calculator.getBorrowerFilesProgress({\n        loan: {\n          borrowers: [{}]\n        }\n      })).to.deep.equal({\n        percent: 0,\n        count: 1\n      });\n    });\n    it('returns more than 0 when a file is present', () => {\n      expect(Calculator.getBorrowerFilesProgress({\n        loan: {\n          borrowers: [{\n            documents: {\n              [DOCUMENTS.IDENTITY]: [{}]\n            },\n            _id: 'borrowerId',\n            additionalDocuments: initialDocuments\n          }]\n        }\n      })).to.deep.equal({\n        percent: 1 / 6,\n        count: 6\n      });\n    });\n  });\n  describe('getExpenses', () => {\n    it('Should return 0 if given an empty object', () => {\n      expect(Calculator.getExpenses({})).to.equal(0);\n    });\n    it('sums expenses array', () => {\n      expect(Calculator.getExpenses({\n        borrowers: {\n          expenses: [{\n            value: 2\n          }, {\n            value: 3\n          }]\n        }\n      })).to.equal(5);\n    });\n  });\n  describe('getFortune', () => {\n    it('Should return 0 if given an empty object', () => {\n      expect(Calculator.getFortune({})).to.equal(0);\n    });\n    it('sums bankFortunes if given multiple borrowers', () => {\n      expect(Calculator.getFortune({\n        borrowers: [{\n          bankFortune: 1\n        }, {\n          bankFortune: 2\n        }]\n      })).to.equal(3);\n    });\n  });\n  describe('getInsuranceFortune', () => {\n    it('properly sums insurance2, insurance3A, insurance3B and bank3A', () => {\n      expect(Calculator.getInsuranceFortune({\n        borrowers: {\n          insurance2: [{\n            value: 2\n          }],\n          insurance3A: [{\n            value: 3\n          }],\n          insurance3B: [{\n            value: 4\n          }],\n          bank3A: [{\n            value: 5\n          }]\n        }\n      })).to.equal(14);\n      expect(Calculator.getInsuranceFortune({\n        borrowers: {\n          insurance3B: [{\n            value: 2\n          }],\n          bank3A: [{\n            value: undefined\n          }]\n        }\n      })).to.equal(2);\n    });\n    it('works with multiple borrowers', () => {\n      expect(Calculator.getInsuranceFortune({\n        borrowers: [{\n          insurance2: [{\n            value: 2\n          }],\n          insurance3A: [{\n            value: 3\n          }]\n        }, {\n          bank3A: [{\n            value: 4\n          }],\n          insurance3B: [{\n            value: 5\n          }]\n        }]\n      })).to.equal(14);\n    });\n  });\n  describe('getMissingBorrowerDocuments', () => {\n    it('returns all missing ids for an empty borrower', () => {\n      expect(Calculator.getMissingBorrowerDocuments({\n        loan: {\n          borrowers: [{\n            _id: 'borrowerId',\n            additionalDocuments: initialDocuments\n          }],\n          step: STEPS.SOLVENCY\n        }\n      })).to.deep.equal(initialDocuments.map((_ref) => {\n        let {\n          id\n        } = _ref;\n        return id;\n      }));\n    });\n  });\n  describe('getMissingBorrowerFields', () => {\n    it('returns all missing ids for an empty borrower', () => {\n      expect(Calculator.getMissingBorrowerFields({\n        borrowers: {}\n      })).to.deep.equal(['firstName', 'lastName', 'gender', 'address1', 'city', 'zipCode', 'canton', 'isSwiss', 'birthDate', 'citizenship', 'isUSPerson', 'civilStatus', 'childrenCount', 'salary', 'netSalary', 'bonusExists', 'hasOwnCompany', 'bankFortune']);\n    });\n    it('returns all missing ids for an empty borrower', () => {\n      const result = Calculator.getMissingBorrowerFields({\n        borrowers: {\n          hasOwnCompany: true,\n          ownCompanies: []\n        }\n      });\n      expect(result).to.include('ownCompanies');\n      const result2 = Calculator.getMissingBorrowerFields({\n        borrowers: {\n          hasOwnCompany: false,\n          ownCompanies: []\n        }\n      });\n      expect(result2).to.not.include('ownCompanies');\n    });\n  });\n  describe('getOtherFortune', () => {\n    it('Should return 0 if given an empty object', () => {\n      expect(Calculator.getOtherFortune({})).to.equal(0);\n    });\n    it('sums otherFortune if given multiple borrowers', () => {\n      expect(Calculator.getOtherFortune({\n        borrowers: [{\n          otherFortune: [{\n            value: 3\n          }, {\n            value: 4\n          }]\n        }, {\n          otherFortune: [{\n            value: 5\n          }, {\n            value: 6\n          }]\n        }]\n      })).to.equal(18);\n    });\n  });\n  describe('getRealEstateFortune', () => {\n    it('returns the difference between property values and loans', () => {\n      expect(Calculator.getRealEstateFortune({\n        borrowers: {\n          realEstate: [{\n            value: 2,\n            loan: 1\n          }]\n        }\n      })).to.equal(1);\n    });\n  });\n  describe('getRealEstateValue', () => {\n    it('returns value of all realEstate', () => {\n      expect(Calculator.getRealEstateValue({\n        borrowers: {\n          realEstate: [{\n            value: 2,\n            loan: 1\n          }]\n        }\n      })).to.equal(2);\n    });\n  });\n  describe('getRealEstateValue', () => {\n    it('returns loans of all realEstate', () => {\n      expect(Calculator.getRealEstateDebt({\n        borrowers: {\n          realEstate: [{\n            value: 2,\n            loan: 1\n          }]\n        }\n      })).to.equal(1);\n    });\n  });\n  describe('getRealEstateIncome', () => {\n    it('returns realEstate income', () => {\n      expect(Calculator.getRealEstateIncome({\n        borrowers: {\n          realEstate: [{\n            income: 10\n          }]\n        }\n      })).to.equal(10);\n    });\n    it('changes with realEstateIncomeConsideration', () => {\n      const calc = new CalculatorClass({\n        realEstateIncomeConsideration: 0.5\n      });\n      expect(calc.getRealEstateIncome({\n        borrowers: {\n          realEstate: [{\n            income: 10\n          }, {\n            income: 20\n          }]\n        }\n      })).to.equal(15);\n    });\n  });\n  describe('getSalary', () => {\n    it('returns 0 for an empty object', () => {\n      expect(Calculator.getSalary({})).to.equal(0);\n    });\n    it(\"returns sum of borrowers' salary\", () => {\n      expect(Calculator.getSalary({\n        borrowers: {\n          salary: 1\n        }\n      })).to.equal(1);\n      expect(Calculator.getSalary({\n        borrowers: [{\n          salary: 1\n        }, {\n          salary: 2\n        }]\n      })).to.equal(3);\n    });\n  });\n  describe('getTotalFunds', () => {\n    it('should return 0 for an empty object', () => {\n      expect(Calculator.getTotalFunds({})).to.equal(0);\n    });\n    it('should sum all fortune items in a borrower', () => {\n      expect(Calculator.getTotalFunds({\n        borrowers: {\n          bankFortune: 1,\n          insurance2: [{\n            value: 2\n          }],\n          insurance3A: [{\n            value: 3\n          }]\n        }\n      })).to.equal(6);\n    });\n  });\n  describe('getTotalIncome', () => {\n    it('should return 0 an empty borrower', () => {\n      expect(Calculator.getTotalIncome({})).to.equal(0);\n    });\n    it('should return sum of all incomes for a borrower, and subtract expenses', () => {\n      expect(Calculator.getTotalIncome({\n        borrowers: {\n          salary: 1,\n          bonusExists: true,\n          bonus2018: 2,\n          // Adds 1\n          otherIncome: [{\n            value: 3\n          }],\n          expenses: [{\n            value: 5,\n            description: EXPENSES.LEASING\n          }] // Subtracts 5\n\n        }\n      })).to.equal(0);\n    });\n    it('adds fortuneReturns if they exist', () => {\n      const calc = new CalculatorClass({\n        fortuneReturnsRatio: 0.01\n      });\n      expect(calc.getTotalIncome({\n        borrowers: {\n          bankFortune: 100,\n          salary: 1,\n          bonusExists: true,\n          bonus2018: 2,\n          // Adds 1\n          otherIncome: [{\n            value: 3\n          }],\n          expenses: [{\n            value: 5,\n            description: EXPENSES.LEASING\n          }] // Subtracts 5\n\n        }\n      })).to.equal(1);\n    });\n    it('should only subtract expenses that are meant to be subtracted', () => {\n      const calc = new CalculatorClass({\n        expensesSubtractFromIncome: [EXPENSES.LEASING]\n      });\n      expect(calc.getTotalIncome({\n        borrowers: {\n          salary: 1,\n          bonusExists: true,\n          bonus2018: 2,\n          // Adds 1\n          otherIncome: [{\n            value: 3\n          }],\n          expenses: [{\n            value: 1,\n            description: EXPENSES.LEASING\n          }, {\n            value: 5,\n            description: EXPENSES.OTHER\n          }]\n        }\n      })).to.equal(4);\n    });\n  });\n  describe('personalInfoPercent', () => {\n    it('works', () => {\n      expect(Calculator.personalInfoPercent({\n        borrowers: [{\n          _id: 'aBcNvYnq34rnb29nh',\n          adminValidation: {},\n          birthDate: '1992-04-14',\n          bonusExists: false,\n          childrenCount: 0,\n          citizenship: 'hello',\n          civilStatus: 'MARRIED',\n          createdAt: '2018-08-23T10:18:18.139Z',\n          expenses: [],\n          firstName: 'dfadf',\n          gender: 'M',\n          isSwiss: false,\n          isUSPerson: false,\n          lastName: 'asdfasd',\n          otherFortune: [],\n          otherIncome: [],\n          realEstate: [],\n          residencyPermit: 'b',\n          sameAddress: true,\n          updatedAt: '2018-08-23T10:20:22.234Z',\n          userId: 'fAksm7pJveZybme5F',\n          salary: 100,\n          netSalary: 80,\n          bankFortune: 1000,\n          hasOwnCompany: false,\n          ownCompanies: []\n        }]\n      })).to.equal(1);\n    });\n  });\n  describe('sumValues', () => {\n    it('sums values with a single key', () => {\n      expect(Calculator.sumValues({\n        borrowers: [{\n          a: 1\n        }, {\n          a: 2\n        }],\n        keys: 'a'\n      })).to.equal(3);\n    });\n    it('sums values with multiple keys', () => {\n      expect(Calculator.sumValues({\n        borrowers: [{\n          a: 1,\n          b: 4\n        }, {\n          a: 2,\n          b: 3\n        }],\n        keys: ['a', 'b']\n      })).to.equal(10);\n    });\n    it('omits keys if they are not provided', () => {\n      expect(Calculator.sumValues({\n        borrowers: [{\n          a: 1\n        }, {}],\n        keys: 'a'\n      })).to.equal(1);\n    });\n  });\n  describe('getYearsToRetirement', () => {\n    it('returns the proper difference for a male', () => {\n      expect(Calculator.getRetirement({\n        borrowers: [{\n          age: 25,\n          gender: GENDER.M\n        }]\n      })).to.equal(40);\n    });\n    it('returns 0 for a retired person', () => {\n      expect(Calculator.getRetirement({\n        borrowers: [{\n          age: 70,\n          gender: GENDER.M\n        }]\n      })).to.equal(0);\n    });\n  });\n  describe('getFortuneReturns', () => {\n    it('returns 0 if the ratio is not set', () => {\n      expect(Calculator.getFortuneReturns({\n        borrowers: [{\n          bankFortune: 100\n        }]\n      })).to.equal(0);\n    });\n    it('returns some revenue if the constant is set', () => {\n      const calc = new CalculatorClass({\n        fortuneReturnsRatio: 0.01\n      });\n      expect(calc.getFortuneReturns({\n        borrowers: [{\n          bankFortune: 100\n        }]\n      })).to.equal(1);\n    });\n  });\n  describe('getRealEstateExpenses', () => {\n    it('adds up expenses for real estate', () => {\n      // 12k maintenance, 48k interests, 12k amort\n      expect(Calculator.getRealEstateExpenses({\n        borrowers: [{\n          realEstate: [{\n            value: 1200000,\n            loan: 960000\n          }]\n        }]\n      })).to.equal(6000);\n    });\n    it('counts no amortization if the loan is below amortizationGoal', () => {\n      // 12k maintenance, 39k interests, 0 amort\n      expect(Calculator.getRealEstateExpenses({\n        borrowers: [{\n          realEstate: [{\n            value: 1200000,\n            loan: 780000\n          }]\n        }]\n      })).to.equal(4250);\n    });\n  });\n  describe('getGroupedExpenses', () => {\n    it('groups expenses between borrowers', () => {\n      const borrowers = [{\n        expenses: [{\n          description: 'a',\n          value: 10\n        }, {\n          description: 'c',\n          value: 1\n        }]\n      }, {\n        expenses: [{\n          description: 'b',\n          value: 5\n        }, {\n          description: 'a',\n          value: 5\n        }]\n      }];\n      expect(Calculator.getGroupedExpenses({\n        borrowers\n      })).to.deep.equal({\n        a: 15,\n        b: 5,\n        c: 1\n      });\n    });\n  });\n  describe('getFormattedExpenses', () => {\n    it('gets an object with expenses to add or subtract', () => {\n      const calc = new CalculatorClass({\n        expensesSubtractFromIncome: [EXPENSES.LEASING]\n      });\n      const borrowers = [{\n        expenses: [{\n          description: EXPENSES.LEASING,\n          value: 10\n        }, {\n          description: EXPENSES.PENSIONS,\n          value: 1\n        }]\n      }, {\n        expenses: [{\n          description: EXPENSES.LEASING,\n          value: 5\n        }, {\n          description: EXPENSES.OTHER,\n          value: 1\n        }]\n      }];\n      expect(calc.getFormattedExpenses({\n        borrowers\n      })).to.deep.equal({\n        add: 2,\n        subtract: 15\n      });\n    });\n  });\n  describe('getBorrowerFormHash', () => {\n    it('returns a value for a borrower', () => {\n      const borrowers = [{\n        expenses: [{\n          description: EXPENSES.LEASING,\n          value: 10\n        }, {\n          description: EXPENSES.PENSIONS,\n          value: 1\n        }]\n      }];\n      expect(Calculator.getBorrowerFormHash({\n        borrowers\n      })).to.equal(-559003621);\n    });\n    it('changes for non required form values as well', () => {\n      const borrower1 = {\n        company: 'a'\n      };\n      const borrower2 = {\n        company: 'b'\n      };\n      expect(Calculator.getBorrowerFormHash({\n        borrowers: borrower1\n      })).to.not.equal(Calculator.getBorrowerFormHash({\n        borrowers: borrower2\n      }));\n    });\n    it('returns a different value for multiple borrowers', () => {\n      const borrowers = [{\n        expenses: [{\n          description: EXPENSES.LEASING,\n          value: 10\n        }, {\n          description: EXPENSES.PENSIONS,\n          value: 1\n        }]\n      }, {\n        expenses: [{\n          description: EXPENSES.LEASING,\n          value: 5\n        }, {\n          description: EXPENSES.OTHER,\n          value: 1\n        }]\n      }];\n      expect(Calculator.getBorrowerFormHash({\n        borrowers\n      })).to.equal(1188420103);\n    });\n  });\n  describe('real estate income algorithm', () => {\n    it('adds income to - and subtract theoretical cost from - totalIncome for DEFAULT', () => {\n      const borrowers = [{\n        realEstate: [{\n          income: 72000,\n          value: 1200000,\n          loan: 960000\n        }]\n      }, {\n        realEstate: [{\n          income: 72000,\n          value: 1200000,\n          loan: 960000\n        }]\n      }];\n      expect(Calculator.getRealEstateIncome({\n        borrowers\n      })).to.equal(144000);\n      expect(Calculator.getTotalIncome({\n        borrowers\n      })).to.equal(0);\n    });\n    context('with algoritm POSITIVE_NEGATIVE_SPLIT', () => {\n      let calc;\n      beforeEach(() => {\n        calc = new CalculatorClass({\n          realEstateIncomeAlgorithm: REAL_ESTATE_INCOME_ALGORITHMS.POSITIVE_NEGATIVE_SPLIT\n        });\n      });\n      it('adds to income if delta is positive', () => {\n        const borrowers = [{\n          realEstate: [{\n            income: 50000,\n            value: 1200000,\n            loan: 960000\n          }]\n        }, {\n          realEstate: [{\n            income: 73000,\n            value: 1200000,\n            loan: 960000\n          }]\n        }];\n        expect(calc.getTotalIncome({\n          borrowers\n        })).to.equal(1000);\n      });\n      it('adds to income if delta is positive', () => {\n        const borrowers = [{\n          realEstate: [{\n            income: 100000,\n            value: 1200000,\n            loan: 960000\n          }]\n        }];\n        expect(calc.getTotalIncome({\n          borrowers\n        })).to.equal(28000);\n      });\n      it('adds to expenses if delta is negative', () => {\n        const borrowers = [{\n          realEstate: [{\n            income: 50000,\n            value: 1200000,\n            loan: 960000\n          }]\n        }, {\n          realEstate: [{\n            income: 100000,\n            value: 1200000,\n            loan: 960000\n          }]\n        }];\n        expect(calc.getFormattedExpenses({\n          borrowers\n        })).to.deep.equal({\n          subtract: -28000,\n          add: 22000\n        });\n      });\n      it('considers income based on realEstateIncomeConsideration', () => {\n        calc = new CalculatorClass({\n          realEstateIncomeAlgorithm: REAL_ESTATE_INCOME_ALGORITHMS.POSITIVE_NEGATIVE_SPLIT,\n          realEstateIncomeConsideration: 0.8\n        });\n        const borrowers = [{\n          realEstate: [{\n            income: 100000,\n            value: 1200000,\n            loan: 960000\n          }]\n        }];\n        expect(calc.getTotalIncome({\n          borrowers\n        })).to.equal(8000);\n      });\n    });\n  });\n  describe('shouldUseNetSalary', () => {\n    it('works when applying global rules', () => {\n      const loan = {\n        structures: [],\n        borrowers: [{\n          salary: 120000,\n          netSalary: 10000\n        }]\n      };\n      const calc = new CalculatorClass({\n        loan,\n        lenderRules: [{\n          filter: {\n            and: [true]\n          },\n          incomeConsiderationType: 'NET'\n        }, {\n          filter: {\n            and: [{\n              '>': [{\n                var: 'INCOME'\n              }, 100000]\n            }]\n          }\n        }]\n      });\n      const result = calc.shouldUseNetSalary();\n      expect(result).to.equal(true);\n      const salary = calc.getSalary({\n        loan\n      });\n      expect(salary).to.equal(10000);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Calculator.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/test/Calculator.spec.js                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet Calculator;\nmodule.link(\"..\", {\n  default(v) {\n    Calculator = v;\n  }\n\n}, 1);\ndescribe('Calculator', () => {\n  it('combines all calculators', () => {// Test code\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"CombinedCalculator.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/test/CombinedCalculator.spec.js                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet DOCUMENTS, STEPS;\nmodule.link(\"../../../api/constants\", {\n  DOCUMENTS(v) {\n    DOCUMENTS = v;\n  },\n\n  STEPS(v) {\n    STEPS = v;\n  }\n\n}, 1);\nlet borrowerDocuments;\nmodule.link(\"../../../api/borrowers/borrowersAdditionalDocuments\", {\n  initialDocuments(v) {\n    borrowerDocuments = v;\n  }\n\n}, 2);\nlet propertyDocuments;\nmodule.link(\"../../../api/properties/propertiesAdditionalDocuments\", {\n  initialDocuments(v) {\n    propertyDocuments = v;\n  }\n\n}, 3);\nlet Calculator;\nmodule.link(\"..\", {\n  default(v) {\n    Calculator = v;\n  }\n\n}, 4);\ndescribe('CombinedCalculator', () => {\n  describe('filesProgress', () => {\n    it('sums file progress across the loan', () => {\n      const property = {\n        documents: {\n          [DOCUMENTS.PROPERTY_PLANS]: [{}]\n        },\n        _id: 'jo',\n        additionalDocuments: propertyDocuments\n      };\n      const progress = Calculator.filesProgress({\n        loan: {\n          structure: {\n            property\n          },\n          borrowers: [{\n            documents: {\n              [DOCUMENTS.IDENTITY]: [{}]\n            },\n            _id: 'id1',\n            additionalDocuments: borrowerDocuments\n          }, {\n            documents: {\n              [DOCUMENTS.TAXES]: [{}]\n            },\n            _id: 'id2',\n            additionalDocuments: borrowerDocuments\n          }],\n          properties: [property],\n          step: STEPS.SOLVENCY\n        }\n      });\n      expect(progress.percent).to.be.within(0.15, 0.16);\n      expect(progress.count).to.equal(19);\n    });\n    it('skips the property if there is none', () => {\n      const progress = Calculator.filesProgress({\n        loan: {\n          structure: {},\n          borrowers: [{\n            documents: {\n              [DOCUMENTS.IDENTITY]: [{}]\n            },\n            _id: 'id1',\n            additionalDocuments: borrowerDocuments\n          }, {\n            documents: {\n              [DOCUMENTS.TAXES]: [{}],\n              [DOCUMENTS.IDENTITY]: [{}]\n            },\n            _id: 'id2',\n            additionalDocuments: borrowerDocuments\n          }],\n          step: STEPS.SOLVENCY\n        }\n      });\n      expect(progress.percent).to.be.within(0.23, 0.24);\n      expect(progress.count).to.equal(13);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"LenderRulesInitializator.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/test/LenderRulesInitializator.spec.js                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet Calculator;\nmodule.link(\"..\", {\n  Calculator(v) {\n    Calculator = v;\n  }\n\n}, 1);\nlet LENDER_RULES_VARIABLES;\nmodule.link(\"../../../api/constants\", {\n  LENDER_RULES_VARIABLES(v) {\n    LENDER_RULES_VARIABLES = v;\n  }\n\n}, 2);\ndescribe('LenderRulesInitializator', () => {\n  let loan;\n  let lenderRules;\n  let structure;\n  let property;\n  beforeEach(() => {\n    property = {\n      _id: 'propertyId',\n      value: 120000\n    };\n    structure = {\n      id: 'selectedStructure',\n      propertyId: 'propertyId',\n      property\n    };\n    loan = {\n      structures: [structure],\n      properties: [property],\n      selectedStructure: 'selectedStructure'\n    };\n    lenderRules = [];\n  });\n  it('does not initialize if no lenderRules are passed in the constructor', () => {\n    const calc = new Calculator({});\n    expect(calc.maxBorrowRatio).to.equal(0.8);\n  });\n  it('changes the rules based on the selected structure', () => {\n    lenderRules = [{\n      filter: {\n        and: [{\n          '>': [{\n            var: LENDER_RULES_VARIABLES.PROPERTY_VALUE\n          }, 100000]\n        }]\n      },\n      maxBorrowRatio: 0.7\n    }];\n    const calc = new Calculator({\n      loan,\n      lenderRules\n    });\n    expect(calc.maxBorrowRatio).to.equal(0.7);\n    property.value = 90000;\n    const calc2 = new Calculator({\n      loan,\n      lenderRules\n    });\n    expect(calc2.maxBorrowRatio).to.equal(0.8);\n  }); // TODO\n\n  it.skip('uses primary rules to match secondary rules', () => {\n    lenderRules = [{\n      filter: {\n        and: [{\n          '>': [{\n            var: LENDER_RULES_VARIABLES.PROPERTY_VALUE\n          }, 100000]\n        }]\n      },\n      bonusConsideration: 1\n    }, {\n      filter: {\n        and: [{\n          '<': [{\n            var: LENDER_RULES_VARIABLES.INCOME\n          }, 0.5]\n        }]\n      },\n      maxIncomeRatio: 0.39\n    }];\n  });\n  it('merges rules in the right order', () => {\n    lenderRules = [{\n      filter: {\n        and: [{\n          '>': [{\n            var: LENDER_RULES_VARIABLES.PROPERTY_VALUE\n          }, 100000]\n        }]\n      },\n      maxBorrowRatio: 0.7\n    }, {\n      filter: {\n        and: [{\n          '>': [{\n            var: LENDER_RULES_VARIABLES.PROPERTY_VALUE\n          }, 110000]\n        }]\n      },\n      maxBorrowRatio: 0.6\n    }];\n    const calc = new Calculator({\n      loan,\n      lenderRules\n    });\n    expect(calc.maxBorrowRatio).to.equal(0.6);\n  });\n  it('merges comments together', () => {\n    lenderRules = [{\n      filter: {\n        and: [{\n          '>': [{\n            var: LENDER_RULES_VARIABLES.PROPERTY_VALUE\n          }, 100000]\n        }]\n      },\n      adminComments: ['a']\n    }, {\n      filter: {\n        and: [{\n          '>': [{\n            var: LENDER_RULES_VARIABLES.PROPERTY_VALUE\n          }, 110000]\n        }]\n      },\n      adminComments: ['b']\n    }];\n    const calc = new Calculator({\n      loan,\n      lenderRules\n    });\n    expect(calc.adminComments).to.deep.equal(['a', 'b']);\n  });\n  it('does not skip a rule if it is 0', () => {\n    lenderRules = [{\n      filter: {\n        and: [true]\n      },\n      dividendsConsideration: 0\n    }];\n    const calc = new Calculator({\n      loan,\n      lenderRules\n    });\n    expect(calc.dividendsConsideration).to.equal(0);\n  });\n  it('skips undefined and null rules', () => {\n    lenderRules = [{\n      filter: {\n        and: [true]\n      },\n      dividendsConsideration: 0.5\n    }, {\n      filter: {\n        and: [true]\n      },\n      dividendsConsideration: undefined\n    }, {\n      filter: {\n        and: [true]\n      },\n      dividendsConsideration: null\n    }];\n    const calc = new Calculator({\n      loan,\n      lenderRules\n    });\n    expect(calc.dividendsConsideration).to.equal(0.5);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"LoanCalculator.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/test/LoanCalculator.spec.js                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet Calculator, CalculatorClass;\nmodule.link(\"..\", {\n  default(v) {\n    Calculator = v;\n  },\n\n  Calculator(v) {\n    CalculatorClass = v;\n  }\n\n}, 1);\nlet INTEREST_RATES, EXPENSES;\nmodule.link(\"../../../api/constants\", {\n  INTEREST_RATES(v) {\n    INTEREST_RATES = v;\n  },\n\n  EXPENSES(v) {\n    EXPENSES = v;\n  }\n\n}, 2);\nlet OWN_FUNDS_USAGE_TYPES;\nmodule.link(\"../../../api/constants\", {\n  OWN_FUNDS_USAGE_TYPES(v) {\n    OWN_FUNDS_USAGE_TYPES = v;\n  }\n\n}, 3);\ndescribe('LoanCalculator', () => {\n  describe('getProjectValue', () => {\n    it('returns 0 if the property value is 0 or does not exist', () => {\n      expect(Calculator.getProjectValue({\n        loan: {\n          structure: {}\n        }\n      })).to.equal(0);\n      expect(Calculator.getProjectValue({\n        loan: {\n          structure: {\n            property: {\n              value: 0\n            }\n          },\n          propertyWork: 100\n        }\n      })).to.equal(0);\n    });\n    it('calculates project with propertyValue, notary fees and propertyWork', () => {\n      expect(Calculator.getProjectValue({\n        loan: {\n          structure: {\n            property: {\n              value: 100\n            },\n            propertyWork: 50\n          }\n        }\n      })).to.equal(155);\n    });\n  });\n  describe('getTotalUsed', () => {\n    it('it gets the sum of all used own funds, without pledged funds', () => {\n      expect(Calculator.getTotalUsed({\n        loan: {\n          structure: {\n            ownFunds: [{\n              value: 3,\n              usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW\n            }, {\n              value: 2,\n              usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE\n            }, {\n              value: 1\n            }]\n          }\n        }\n      })).to.equal(6);\n    });\n  });\n  describe('getFees', () => {\n    it('calculates fees if no notary fees exist', () => {\n      expect(Calculator.getFees({\n        loan: {\n          structure: {\n            propertyId: 'prop',\n            property: {\n              _id: 'prop',\n              value: 100\n            }\n          }\n        }\n      }).total).to.equal(5);\n    });\n    it('uses provided notary fees if they are defined', () => {\n      expect(Calculator.getFees({\n        loan: {\n          structure: {\n            property: {\n              value: 100\n            },\n            notaryFees: 123\n          }\n        }\n      }).total).to.equal(123);\n    });\n    it('uses provided notary fees if they are 0', () => {\n      expect(Calculator.getFees({\n        loan: {\n          structure: {\n            property: {\n              value: 100\n            },\n            notaryFees: 0\n          }\n        }\n      }).total).to.equal(0);\n    });\n    it('returns accurate notary fees if data is sufficient', () => {\n      expect(Calculator.getFees({\n        loan: {\n          structure: {\n            propertyId: 'prop',\n            wantedLoan: 800000,\n            property: {\n              _id: 'prop',\n              value: 1000000,\n              canton: 'GE'\n            }\n          }\n        }\n      })).to.deep.include({\n        total: 55159.1\n      });\n    });\n    it('calculates accurate fees for a promotionOption', () => {\n      expect(Calculator.getFees({\n        loan: {\n          structures: [{\n            id: 'struct1',\n            promotionOptionId: 'option1',\n            wantedLoan: 800000\n          }],\n          promotionOptions: [{\n            value: 1000000,\n            _id: 'option1',\n            promotionLots: [{\n              properties: [{\n                _id: 'prop',\n                canton: 'GE'\n              }]\n            }]\n          }]\n        },\n        structureId: 'struct1'\n      })).to.deep.include({\n        total: 55159.1\n      });\n    });\n  });\n  describe('getInterests', () => {\n    it('uses interest rates if provided', () => {\n      expect(Calculator.getInterests({\n        loan: {\n          structure: {\n            property: {\n              value: 100000\n            },\n            wantedLoan: 500000,\n            loanTranches: [{\n              value: 1,\n              type: 'myRate'\n            }]\n          }\n        },\n        interestRates: {\n          myRate: 0.012\n        }\n      })).to.equal(500);\n    });\n    it('uses the rates from the offer if it exists, even if interest rate is provided', () => {\n      expect(Calculator.getInterests({\n        loan: {\n          structure: {\n            property: {\n              value: 100000\n            },\n            wantedLoan: 500000,\n            loanTranches: [{\n              value: 1,\n              type: 'myRate'\n            }],\n            offer: {\n              myRate: 0.012\n            }\n          }\n        },\n        interestRates: {\n          myRate: 0.024\n        }\n      })).to.equal(500);\n    });\n  });\n  describe('getTheoretialInterests', () => {\n    it('uses the theoretical rate', () => {\n      expect(Calculator.getTheoreticalInterests({\n        loan: {\n          structure: {\n            wantedLoan: 1200000,\n            property: {\n              value: 1000000\n            }\n          }\n        }\n      })).to.equal(5000);\n    });\n    it('uses the overridden theoretial rate', () => {\n      const Calc = new CalculatorClass({\n        theoreticalInterestRate: 0.04,\n        theoreticalInterestRate2ndRank: 0.04\n      });\n      expect(Calc.getTheoreticalInterests({\n        loan: {\n          structure: {\n            wantedLoan: 1200000,\n            property: {\n              value: 1000000\n            }\n          }\n        }\n      })).to.equal(4000);\n    });\n    it('uses theoreticalInterestRate2ndRank to calculate the rate', () => {\n      const Calc = new CalculatorClass({\n        theoreticalInterestRate: 0.01,\n        theoreticalInterestRate2ndRank: 0.1\n      }); // 650k at 1%\n      // 150k at 10%\n      // -> 1791\n\n      expect(Calc.getTheoreticalInterests({\n        loan: {\n          structure: {\n            wantedLoan: 800000,\n            property: {\n              value: 1000000\n            }\n          }\n        }\n      })).to.be.within(1791, 1792);\n    });\n  });\n  describe('getAmortization', () => {\n    it('figures out what amortization should be', () => {\n      expect(Calculator.getAmortization({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            propertyWork: 0,\n            property: {\n              value: 1200000\n            }\n          }\n        }\n      })).to.equal(1000);\n    });\n    it('does not amortize if loan is lower than 65%', () => {\n      expect(Calculator.getAmortization({\n        loan: {\n          structure: {\n            wantedLoan: 650000,\n            propertyWork: 0,\n            property: {\n              value: 1000000\n            }\n          }\n        }\n      })).to.equal(0);\n      expect(Calculator.getAmortization({\n        loan: {\n          structure: {\n            wantedLoan: 1000,\n            propertyWork: 0,\n            property: {\n              value: 1000000\n            }\n          }\n        }\n      })).to.equal(0);\n    });\n    it('does amortize if the loan is even a little bit above 65%', () => {\n      expect(Calculator.getAmortization({\n        loan: {\n          structure: {\n            wantedLoan: 650001,\n            propertyWork: 0,\n            property: {\n              value: 1000000\n            }\n          }\n        }\n      })).to.be.above(0);\n    });\n    it('should amortize faster if borrowers are old');\n    it('gets amortization from the offer if it is defined', () => {\n      expect(Calculator.getAmortization({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            propertyWork: 0,\n            offer: {\n              amortizationGoal: 0.5\n            },\n            property: {\n              value: 1200000\n            }\n          }\n        }\n      })).to.equal(2000);\n    });\n    it('uses amortizationYears from the offer if defined', () => {\n      expect(Calculator.getAmortization({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            propertyWork: 0,\n            offer: {\n              amortizationGoal: 0.5,\n              amortizationYears: 30\n            },\n            property: {\n              value: 1200000\n            }\n          }\n        }\n      })).to.equal(1000);\n    });\n    it('resets amortizationGoal after calculating with offers', () => {\n      expect(Calculator.getAmortization({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            propertyWork: 0,\n            offer: {\n              amortizationGoal: 0.5\n            },\n            property: {\n              value: 1200000\n            }\n          }\n        }\n      })).to.equal(2000);\n      expect(Calculator.getAmortization({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            propertyWork: 0,\n            property: {\n              value: 1200000\n            }\n          }\n        }\n      })).to.equal(1000);\n    });\n    it('calculates amortization with an overrideOffer if provided', () => {\n      expect(Calculator.getAmortization({\n        loan: {\n          structures: [{\n            id: 'asdf',\n            wantedLoan: 640000,\n            propertyWork: 0,\n            propertyId: 'prop'\n          }],\n          properties: [{\n            _id: 'prop',\n            value: 1000000\n          }]\n        },\n        offerOverride: {\n          amortizationGoal: 0.65\n        },\n        structureId: 'asdf'\n      })).to.equal(0);\n      expect(Calculator.getAmortization({\n        loan: {\n          structures: [{\n            id: 'asdf',\n            wantedLoan: 650000,\n            propertyWork: 0,\n            propertyId: 'prop'\n          }],\n          properties: [{\n            _id: 'prop',\n            value: 1000000\n          }]\n        },\n        offerOverride: {\n          amortizationGoal: 0.5,\n          amortizationYears: 10\n        },\n        structureId: 'asdf'\n      })).to.equal(1250);\n    });\n  });\n  describe('getMonthly', () => {\n    it('sums amortization and interests', () => {\n      expect(Calculator.getMonthly({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            property: {\n              value: 1200000\n            },\n            propertyWork: 0,\n            loanTranches: [{\n              type: INTEREST_RATES.YEARS_10,\n              value: 1\n            }]\n          },\n          currentInterestRates: {\n            [INTEREST_RATES.YEARS_10]: 0.01\n          }\n        }\n      })).to.be.within(1800, 2500);\n    });\n    it('uses provided interestRates', () => {\n      expect(Calculator.getMonthly({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            property: {\n              value: 1200000\n            },\n            propertyWork: 0,\n            loanTranches: [{\n              type: INTEREST_RATES.YEARS_10,\n              value: 1\n            }]\n          }\n        },\n        interestRates: {\n          [INTEREST_RATES.YEARS_10]: 0.01\n        }\n      })).to.equal(1800);\n    });\n    it('uses the offer interestRates', () => {\n      expect(Calculator.getMonthly({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            property: {\n              value: 1200000\n            },\n            offer: {\n              amortizationGoal: 0.5,\n              [INTEREST_RATES.YEARS_10]: 0.02\n            },\n            propertyWork: 0,\n            loanTranches: [{\n              type: INTEREST_RATES.YEARS_10,\n              value: 1\n            }]\n          }\n        },\n        interestRates: {\n          [INTEREST_RATES.YEARS_10]: 0.01\n        }\n      })).to.equal(3600);\n    });\n  });\n  describe('getTheoreticalMonthly', () => {\n    it('uses the default theoretical rate', () => {\n      expect(Calculator.getTheoreticalMonthly({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            property: {\n              value: 1200000\n            },\n            propertyWork: 0,\n            loanTranches: [{\n              type: INTEREST_RATES.YEARS_10,\n              value: 1\n            }]\n          }\n        }\n      })).to.equal(6000);\n    });\n    it('uses the provided theoretical rate', () => {\n      const Calc = new CalculatorClass({\n        interestRates: {\n          myRate: 0.012\n        },\n        theoreticalInterestRate: 0.01\n      });\n      expect(Calc.getTheoreticalMonthly({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            property: {\n              value: 1200000\n            },\n            propertyWork: 0,\n            loanTranches: [{\n              type: INTEREST_RATES.YEARS_10,\n              value: 1\n            }]\n          }\n        }\n      })).to.equal(2800);\n    });\n    it('adds any expenses from the borrowers', () => {\n      const Calc = new CalculatorClass({\n        interestRates: {\n          myRate: 0.012\n        },\n        theoreticalInterestRate: 0.01,\n        expensesSubtractFromIncome: Object.values(EXPENSES).filter(v => v !== EXPENSES.LEASING)\n      }); // 2800 for the loan\n      // 100 more for the leasing\n      // 2800 for the other property\n\n      expect(Calc.getTheoreticalMonthly({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            property: {\n              value: 1200000\n            },\n            propertyWork: 0,\n            loanTranches: [{\n              type: INTEREST_RATES.YEARS_10,\n              value: 1\n            }]\n          },\n          borrowers: [{\n            expenses: {\n              description: EXPENSES.LEASING,\n              value: 1200\n            },\n            realEstate: [{\n              value: 1200000,\n              loan: 960000\n            }]\n          }]\n        }\n      })).to.equal(5700);\n    });\n  });\n  describe('getIncomeRatio', () => {\n    it('compares theoretical monthly cost and income', () => {\n      expect(Calculator.getIncomeRatio({\n        loan: {\n          structure: {\n            wantedLoan: 800000,\n            property: {\n              value: 1000000\n            },\n            propertyWork: 0,\n            loanTranches: [{\n              type: INTEREST_RATES.YEARS_10,\n              value: 1\n            }]\n          },\n          borrowers: [{\n            salary: 180000\n          }]\n        },\n        interestRates: {\n          [INTEREST_RATES.YEARS_10]: 0.01\n        }\n      })).to.be.within(0.33, 0.34);\n    });\n    it('returns 1 if the incomeRatio is negative', () => {\n      expect(Calculator.getIncomeRatio({\n        loan: {\n          structure: {\n            wantedLoan: 800000,\n            property: {\n              value: 1000000\n            },\n            propertyWork: 0,\n            loanTranches: [{\n              type: INTEREST_RATES.YEARS_10,\n              value: 1\n            }]\n          },\n          borrowers: [{\n            expenses: [{\n              value: 10000,\n              description: EXPENSES.LEASING\n            }]\n          }]\n        },\n        interestRates: {\n          [INTEREST_RATES.YEARS_10]: 0.01\n        }\n      })).to.equal(1);\n    });\n  });\n  describe('getBorrowRatio', () => {\n    it('calculates ratio based on loan, property value, and propertyWork', () => {\n      expect(Calculator.getBorrowRatio({\n        loan: {\n          structure: {\n            wantedLoan: 500,\n            propertyWork: 100,\n            property: {\n              value: 900\n            }\n          }\n        }\n      })).to.equal(0.5);\n    });\n  });\n  describe('getMaxBorrowRatio', () => {\n    it('returns the max ratio for a loan', () => {\n      expect(Calculator.getMaxBorrowRatio({\n        loan: {}\n      })).to.equal(0.8);\n    });\n  });\n  describe('loanHasMinimalInformation', () => {\n    it('returns true if ownFunds, property value and wantedLoan are defined', () => {\n      expect(Calculator.loanHasMinimalInformation({\n        loan: {\n          structure: {\n            wantedLoan: 1,\n            ownFunds: [{\n              value: 100000\n            }],\n            property: {\n              value: 1\n            }\n          }\n        }\n      })).to.equal(true);\n    });\n    it('returns false if one of these fields is undefined', () => {\n      expect(Calculator.loanHasMinimalInformation({\n        loan: {\n          structure: {\n            fortuneUsed: 1,\n            property: {\n              value: 1\n            }\n          }\n        }\n      })).to.equal(false);\n      expect(Calculator.loanHasMinimalInformation({\n        loan: {\n          structure: {\n            wantedLoan: 1,\n            property: {\n              value: 1\n            }\n          }\n        }\n      })).to.equal(false);\n      expect(Calculator.loanHasMinimalInformation({\n        loan: {\n          structure: {\n            wantedLoan: 1,\n            fortuneUsed: 1\n          }\n        }\n      })).to.equal(false);\n    });\n  });\n  describe('getLoanFilesProgress', () => {\n    it('returns 0 for an empty loan', () => {\n      expect(Calculator.getLoanFilesProgress({\n        loan: {\n          logic: {}\n        }\n      })).to.deep.equal({\n        percent: 0,\n        count: 1\n      });\n    });\n    it('returns 100% for a loan initially, when documents have arrived', () => {\n      expect(Calculator.getLoanFilesProgress({\n        loan: {\n          documents: {},\n          logic: {}\n        }\n      })).to.deep.equal({\n        percent: 1,\n        count: 0\n      });\n    });\n  });\n  describe('getMissingLoanDocuments', () => {\n    it('shows nothing is required initially', () => {\n      expect(Calculator.getMissingLoanDocuments({\n        loan: {\n          logic: {}\n        }\n      })).to.deep.equal([]);\n      expect(Calculator.getMissingLoanDocuments({\n        loan: {\n          logic: {}\n        }\n      })).to.deep.equal([]);\n      expect(Calculator.getMissingLoanDocuments({\n        loan: {\n          documents: {},\n          logic: {}\n        }\n      })).to.deep.equal([]);\n      expect(Calculator.getMissingLoanDocuments({\n        loan: {\n          documents: {\n            other: [{\n              key: 'hello'\n            }]\n          },\n          logic: {}\n        }\n      })).to.deep.equal([]);\n    });\n  });\n  describe('getMortgageNoteIncrease', () => {\n    it('returns the loan value if no mortgage note is added', () => {\n      expect(Calculator.getMortgageNoteIncrease({\n        loan: {\n          structure: {\n            propertyId: 'propertyId',\n            wantedLoan: 800000,\n            property: {}\n          }\n        }\n      })).to.equal(800000);\n    });\n    it('returns the loan value if no property is selected', () => {\n      expect(Calculator.getMortgageNoteIncrease({\n        loan: {\n          structure: {\n            wantedLoan: 800000,\n            property: {}\n          }\n        }\n      })).to.equal(800000);\n    });\n    it('returns the increase with mortgageNotes on the property', () => {\n      expect(Calculator.getMortgageNoteIncrease({\n        loan: {\n          structure: {\n            propertyId: 'propertyId',\n            wantedLoan: 800000,\n            property: {\n              mortgageNotes: [{\n                value: 100000\n              }]\n            }\n          }\n        }\n      })).to.equal(700000);\n    });\n    it('counts a mortgagenote as 0 if no value is set on it', () => {\n      expect(Calculator.getMortgageNoteIncrease({\n        loan: {\n          structure: {\n            propertyId: 'propertyId',\n            wantedLoan: 800000,\n            property: {}\n          }\n        }\n      })).to.equal(800000);\n    });\n    it('works with borrowers mortgageNotes', () => {\n      expect(Calculator.getMortgageNoteIncrease({\n        loan: {\n          structure: {\n            wantedLoan: 800000,\n            mortgageNoteIds: ['note'],\n            property: {}\n          },\n          borrowers: [{\n            mortgageNotes: [{\n              _id: 'note'\n            }]\n          }]\n        }\n      })).to.equal(800000);\n      expect(Calculator.getMortgageNoteIncrease({\n        loan: {\n          structure: {\n            wantedLoan: 800000,\n            mortgageNoteIds: ['note'],\n            property: {}\n          },\n          borrowers: [{\n            mortgageNotes: [{\n              _id: 'note',\n              value: 200000\n            }]\n          }]\n        }\n      })).to.equal(600000);\n    });\n    it('caps the increase at 0', () => {\n      expect(Calculator.getMortgageNoteIncrease({\n        loan: {\n          structure: {\n            wantedLoan: 800000,\n            propertyId: 'propertyId',\n            mortgageNoteIds: ['note'],\n            property: {\n              mortgageNotes: [{\n                value: 500000\n              }]\n            }\n          },\n          borrowers: [{\n            mortgageNotes: [{\n              _id: 'note',\n              value: 500000\n            }]\n          }]\n        }\n      })).to.equal(0);\n    });\n  });\n  describe('getNonPledgedOwnFunds', () => {\n    it('gets them', () => {\n      const loan = {\n        structure: {\n          ownFunds: [{\n            value: 100\n          }, {\n            value: 100,\n            usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE\n          }]\n        }\n      };\n      expect(Calculator.getNonPledgedOwnFunds({\n        loan\n      })).to.equal(100);\n    });\n  });\n  describe('calculateMissingOwnFunds', () => {\n    it('returns a standard amount', () => {\n      expect(Calculator.getMissingOwnFunds({\n        properties: [{\n          _id: 'propertyId',\n          value: 1000000\n        }],\n        loan: {\n          properties: [{\n            _id: 'propertyId',\n            value: 1000000\n          }],\n          structures: [{\n            id: 'struct1',\n            wantedLoan: 800000,\n            propertyId: 'propertyId',\n            propertyWork: 0,\n            ownFunds: []\n          }],\n          borrowers: [{}]\n        },\n        structureId: 'struct1',\n        structure: {\n          id: 'struct1',\n          wantedLoan: 800000,\n          propertyId: 'propertyId',\n          propertyWork: 0,\n          ownFunds: []\n        }\n      })).to.equal(250000);\n    });\n    it('overrides notaryFees if provided', () => {\n      expect(Calculator.getMissingOwnFunds({\n        structure: {\n          id: 'struct1',\n          wantedLoan: 800000,\n          propertyId: 'propertyId',\n          propertyWork: 0,\n          ownFunds: [],\n          notaryFees: 0\n        },\n        properties: [{\n          _id: 'propertyId',\n          value: 1000000\n        }],\n        loan: {\n          properties: [{\n            _id: 'propertyId',\n            value: 1000000\n          }],\n          structures: [{\n            id: 'struct1',\n            wantedLoan: 800000,\n            propertyId: 'propertyId',\n            propertyWork: 0,\n            ownFunds: [],\n            notaryFees: 0\n          }]\n        },\n        borrowers: [{}],\n        structureId: 'struct1'\n      })).to.equal(200000);\n    });\n    it('uses property work', () => {\n      expect(Calculator.getMissingOwnFunds({\n        structure: {\n          id: 'struct1',\n          wantedLoan: 800000,\n          propertyId: 'propertyId',\n          propertyWork: 100000,\n          ownFunds: []\n        },\n        properties: [{\n          _id: 'propertyId',\n          value: 900000\n        }],\n        loan: {\n          properties: [{\n            _id: 'propertyId',\n            value: 900000\n          }],\n          structures: [{\n            id: 'struct1',\n            wantedLoan: 800000,\n            propertyId: 'propertyId',\n            propertyWork: 100000,\n            ownFunds: []\n          }],\n          borrowers: [{}]\n        },\n        structureId: 'struct1'\n      })).to.equal(245000);\n    });\n    it('subtracts used own funds', () => {\n      expect(Calculator.getMissingOwnFunds({\n        structure: {\n          id: 'struct1',\n          wantedLoan: 800000,\n          propertyId: 'propertyId',\n          propertyWork: 0,\n          ownFunds: [{\n            value: 100000\n          }]\n        },\n        properties: [{\n          _id: 'propertyId',\n          value: 1000000\n        }],\n        loan: {\n          properties: [{\n            _id: 'propertyId',\n            value: 1000000\n          }],\n          structures: [{\n            id: 'struct1',\n            wantedLoan: 800000,\n            propertyId: 'propertyId',\n            propertyWork: 0,\n            ownFunds: [{\n              value: 100000\n            }]\n          }]\n        },\n        borrowers: [{}],\n        structureId: 'struct1'\n      })).to.equal(150000);\n    });\n    it('does not count pledge as own funds', () => {\n      expect(Calculator.getMissingOwnFunds({\n        structure: {\n          id: 'struct1',\n          wantedLoan: 800000,\n          propertyId: 'propertyId',\n          propertyWork: 0,\n          ownFunds: [{\n            value: 100000,\n            usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE\n          }, {\n            value: 100000,\n            usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW\n          }]\n        },\n        properties: [{\n          _id: 'propertyId',\n          value: 1000000\n        }],\n        loan: {\n          properties: [{\n            _id: 'propertyId',\n            value: 1000000\n          }],\n          structures: [{\n            id: 'struct1',\n            wantedLoan: 800000,\n            propertyId: 'propertyId',\n            propertyWork: 0,\n            ownFunds: [{\n              value: 100000,\n              usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE\n            }, {\n              value: 100000,\n              usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW\n            }]\n          }]\n        },\n        borrowers: [{}],\n        structureId: 'struct1'\n      })).to.equal(150000);\n    });\n    it('uses calculated notary fees and rounds them', () => {\n      expect(Calculator.getMissingOwnFunds({\n        structure: {\n          id: 'struct1',\n          wantedLoan: 1179750,\n          propertyId: 'propertyId',\n          propertyWork: 165000,\n          ownFunds: []\n        },\n        properties: [{\n          _id: 'propertyId',\n          value: 1650000,\n          canton: 'GE'\n        }],\n        loan: {\n          properties: [{\n            _id: 'propertyId',\n            value: 1650000,\n            canton: 'GE'\n          }],\n          structures: [{\n            id: 'struct1',\n            wantedLoan: 1179750,\n            propertyId: 'propertyId',\n            propertyWork: 165000,\n            ownFunds: []\n          }],\n          borrowers: [{}]\n        },\n        structureId: 'struct1'\n      })).to.be.within(720693, 720694);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"OfferCalculator.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/test/OfferCalculator.spec.js                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet OfferCalculator;\nmodule.link(\"..\", {\n  default(v) {\n    OfferCalculator = v;\n  }\n\n}, 1);\ndescribe('OfferCalculator', () => {\n  it('test name', () => {// Test code\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"PromotionCalculator.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/test/PromotionCalculator.spec.js                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet Calculator;\nmodule.link(\"..\", {\n  default(v) {\n    Calculator = v;\n  }\n\n}, 1);\ndescribe('PromotionCalculator', () => {\n  describe('canAffordPromotionOption', () => {\n    it('test name', () => {// Test code\n    });\n  });\n  describe('getSolvency', () => {\n    context('with infinite salary', () => {\n      it('returns property value with bank fortune only', () => {\n        expect(Calculator.getSolvency({\n          loan: {\n            borrowers: [{\n              bankFortune: 250000,\n              salary: 10000000\n            }]\n          },\n          notaryFees: 50000\n        })).to.deep.include({\n          withBankFortune: 1000000\n        });\n      });\n      it('returns property value with insurance2', () => {\n        expect(Calculator.getSolvency({\n          loan: {\n            borrowers: [{\n              bankFortune: 150000,\n              insurance2: [{\n                value: 100000\n              }],\n              salary: 10000000\n            }]\n          },\n          notaryFees: 50000\n        })).to.deep.include({\n          withInsurance2: 1000000\n        });\n      });\n      it('returns a smaller propertyValue if little insurance2 is available', () => {\n        expect(Calculator.getSolvency({\n          loan: {\n            borrowers: [{\n              bankFortune: 150000,\n              insurance2: [{\n                value: 60000\n              }],\n              salary: 10000000\n            }]\n          },\n          notaryFees: 50000\n        })).to.deep.include({\n          withInsurance2: 800000\n        });\n      });\n      it('returns a propertyValue with insurance3', () => {\n        expect(Calculator.getSolvency({\n          loan: {\n            borrowers: [{\n              bankFortune: 200000,\n              insurance3A: [{\n                value: 50000\n              }],\n              salary: 10000000\n            }]\n          },\n          notaryFees: 50000\n        })).to.deep.include({\n          withInsurance3: 1000000\n        });\n      });\n      it('returns a propertyValue with insurance3 and insurance2', () => {\n        expect(Calculator.getSolvency({\n          loan: {\n            borrowers: [{\n              bankFortune: 100000,\n              insurance3A: [{\n                value: 50000\n              }],\n              insurance2: [{\n                value: 100000\n              }],\n              salary: 10000000\n            }]\n          },\n          notaryFees: 50000\n        })).to.deep.include({\n          withInsurance2And3: 1000000\n        });\n      });\n    });\n    context.skip('limited by income', () => {\n      it('returns a salary limited value', () => {\n        expect(Calculator.getSolvency({\n          loan: {\n            borrowers: [{\n              bankFortune: 10000000,\n              salary: 180000\n            }]\n          },\n          notaryFees: 50000\n        })).to.deep.include({\n          withBankFortune: 1000000\n        });\n      });\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"PropertyCalculator.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/test/PropertyCalculator.spec.js                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet Calculator;\nmodule.link(\"..\", {\n  default(v) {\n    Calculator = v;\n  }\n\n}, 1);\nlet PROPERTY_DOCUMENTS, DOCUMENTS, STEPS;\nmodule.link(\"../../../api/constants\", {\n  PROPERTY_DOCUMENTS(v) {\n    PROPERTY_DOCUMENTS = v;\n  },\n\n  DOCUMENTS(v) {\n    DOCUMENTS = v;\n  },\n\n  STEPS(v) {\n    STEPS = v;\n  }\n\n}, 2);\nlet initialDocuments;\nmodule.link(\"../../../api/properties/propertiesAdditionalDocuments\", {\n  initialDocuments(v) {\n    initialDocuments = v;\n  }\n\n}, 3);\ndescribe('PropertyCalculator', () => {\n  let params;\n  let property;\n  beforeEach(() => {\n    property = {\n      _id: 'propertyId',\n      additionalDocuments: initialDocuments\n    };\n    params = {\n      loan: {\n        structure: {\n          property\n        },\n        borrowers: [{}],\n        properties: [property],\n        step: STEPS.SOLVENCY\n      }\n    };\n  });\n  describe('propertyPercent', () => {\n    it('returns 0 for a new property', () => {\n      expect(Calculator.propertyPercent(params)).to.deep.equal(0);\n    });\n    it('returns 1 for a complete property', () => {\n      params.loan.structure.property = {\n        value: 1,\n        propertyType: '',\n        address1: 'yo',\n        city: 'Genève',\n        zipCode: 1000,\n        canton: 'GE',\n        constructionYear: 2000,\n        numberOfFloors: 3,\n        roomCount: 2,\n        minergie: '',\n        copropertyPercentage: 100,\n        isCoproperty: false\n      };\n      params.loan.residenceType = ' ';\n      expect(Calculator.propertyPercent(params)).to.deep.equal(1);\n    });\n  });\n  describe('getPropAndWork', () => {\n    it('sums propertyWork and property value', () => {\n      params.loan.structure.property.value = 1;\n      params.loan.structure.propertyWork = 2;\n      expect(Calculator.getPropAndWork(params)).to.deep.equal(3);\n    });\n  });\n  describe('getPropertyFilesProgress', () => {\n    it('returns 0 if no documents are provided', () => {\n      property = {};\n      expect(Calculator.getPropertyFilesProgress(params)).to.deep.equal({\n        percent: 0,\n        count: 1\n      });\n    });\n    it('returns 1/6 if one document is provided', () => {\n      params.loan.structure.property = {\n        documents: {\n          [PROPERTY_DOCUMENTS.PROPERTY_PLANS]: [{}]\n        },\n        _id: 'propertyId'\n      };\n      expect(Calculator.getPropertyFilesProgress(params)).to.deep.equal({\n        percent: 1 / 6,\n        count: 6\n      });\n    });\n  });\n  describe('getMissingPropertyFields', () => {\n    it('returns the list of missing data from a property', () => {\n      expect(Calculator.getMissingPropertyFields(params)).to.deep.equal(['value', 'propertyType', 'isCoproperty', 'copropertyPercentage', 'address1', 'zipCode', 'city', 'canton', 'numberOfFloors', 'constructionYear', 'roomCount', 'minergie', 'residenceType']);\n    });\n  });\n  describe('getMissingPropertyDocuments', () => {\n    it('returns the list of missing documents from a property 1', () => {\n      expect(Calculator.getMissingPropertyDocuments(params)).to.deep.equal(initialDocuments.map((_ref) => {\n        let {\n          id\n        } = _ref;\n        return id;\n      }));\n    });\n    it('returns the list of missing documents from a property 2', () => {\n      params.loan.structure.property.documents = {\n        [DOCUMENTS.PROPERTY_PLANS]: [{}],\n        [DOCUMENTS.PROPERTY_PICTURES]: [{}]\n      };\n      expect(Calculator.getMissingPropertyDocuments(params)).to.deep.equal(initialDocuments.map((_ref2) => {\n        let {\n          id\n        } = _ref2;\n        return id;\n      }).filter(id => ![DOCUMENTS.PROPERTY_PLANS, DOCUMENTS.PROPERTY_PICTURES].includes(id)));\n    });\n  });\n  describe('hasDetailedPropertyValue', () => {\n    it('returns false for a simple property', () => {\n      params = {\n        loan: {\n          structure: {\n            property: {\n              value: 100\n            }\n          }\n        }\n      };\n      expect(Calculator.hasDetailedPropertyValue(params)).to.equal(false);\n    });\n    it('returns true for a detailed property', () => {\n      params = {\n        loan: {\n          structure: {\n            property: {\n              landValue: 100,\n              additionalMargin: 100,\n              constructionValue: 200\n            }\n          }\n        }\n      };\n      expect(Calculator.hasDetailedPropertyValue(params)).to.equal(true);\n    });\n    it('returns true if both are provided', () => {\n      params = {\n        loan: {\n          structure: {\n            property: {\n              value: 5,\n              landValue: 100,\n              additionalMargin: 100,\n              constructionValue: 200\n            }\n          }\n        }\n      };\n      expect(Calculator.hasDetailedPropertyValue(params)).to.equal(true);\n    });\n    it('works for promotionOption structures', () => {\n      params = {\n        loan: {\n          structure: {\n            promotionOption: {\n              value: 50,\n              promotionLots: [{\n                properties: [{\n                  landValue: 100,\n                  additionalMargin: 100,\n                  constructionValue: 200\n                }]\n              }]\n            }\n          }\n        }\n      };\n      expect(Calculator.hasDetailedPropertyValue(params)).to.equal(true);\n    });\n    it('works for specific promotionOption structures', () => {\n      params = {\n        loan: {\n          structures: [{\n            id: 'yo',\n            promotionOptionId: 'option1'\n          }],\n          promotionOptions: [{\n            value: 500,\n            _id: 'option1',\n            promotionLots: [{\n              properties: [{\n                landValue: 100,\n                additionalMargin: 100,\n                constructionValue: 200\n              }]\n            }]\n          }]\n        },\n        structureId: 'yo'\n      };\n      expect(Calculator.hasDetailedPropertyValue(params)).to.equal(true);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Selector.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/test/Selector.spec.js                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet Calculator;\nmodule.link(\"..\", {\n  default(v) {\n    Calculator = v;\n  }\n\n}, 1);\ndescribe('Calculator Selector', () => {\n  let params;\n  let structure;\n  let property;\n  beforeEach(() => {\n    property = {\n      value: 100\n    };\n    structure = {\n      id: 'struct',\n      propertyId: 'prop',\n      property\n    };\n    params = {\n      loan: {\n        structure,\n        structures: [structure],\n        properties: [property]\n      }\n    };\n  });\n  describe('selectProperty', () => {\n    it('returns an empty object if nothing is on the structure', () => {\n      expect(Calculator.selectProperty(params)).to.deep.equal(property);\n    });\n    it('returns the property if it exists', () => {\n      const property = {\n        yo: 'dude'\n      };\n      params.loan.structure.property = property;\n      expect(Calculator.selectProperty(params)).to.deep.equal(property);\n    });\n    it('returns the promotionOption if it exists, and there is no property', () => {\n      const promotionOption = {\n        promotionLots: [{\n          properties: [{}]\n        }],\n        value: 100\n      };\n      structure.promotionOption = promotionOption;\n      structure.property = undefined;\n      structure.propertyId = undefined;\n      expect(Calculator.selectProperty(params)).to.deep.equal((0, _objectSpread2.default)({}, promotionOption, {\n        totalValue: 100\n      }));\n    });\n    context('with a structureId', () => {\n      beforeEach(() => {\n        params.structureId = 'struct';\n      });\n      it('returns an empty object if nothing is on the structure', () => {\n        structure.property = undefined;\n        structure.propertyId = undefined;\n        expect(Calculator.selectProperty(params)).to.deep.equal({});\n      });\n      it('returns the property if it exists', () => {\n        property = {\n          _id: 'dude'\n        };\n        structure.propertyId = property._id;\n        params.loan.properties = [property];\n        expect(Calculator.selectProperty(params)).to.deep.equal(property);\n      });\n      it('returns the promotionOption if it exists', () => {\n        const promotionOption = {\n          _id: 'dawg',\n          promotionLots: [{\n            properties: [{}]\n          }],\n          value: 100\n        };\n        structure.promotionOptionId = promotionOption._id;\n        structure.propertyId = undefined;\n        params.loan.promotionOptions = [promotionOption];\n        expect(Calculator.selectProperty(params)).to.deep.equal((0, _objectSpread2.default)({}, promotionOption, {\n          totalValue: 100\n        }));\n      });\n    });\n  });\n  describe('selectPropertyValue', () => {\n    it('returns the propertyValue on the structure, even if propertyValue or totalValue exists', () => {\n      structure.propertyValue = 300;\n      property.totalValue = 200;\n      expect(Calculator.selectPropertyValue(params)).to.deep.equal(300);\n    });\n    it('returns the totalValue if it exists', () => {\n      property.totalValue = 200;\n      expect(Calculator.selectPropertyValue(params)).to.deep.equal(200);\n    });\n    it('returns the property value if it exists', () => {\n      expect(Calculator.selectPropertyValue(params)).to.deep.equal(100);\n    });\n    it('returns the right value for a promotionOption with additionalLots', () => {\n      const promotionOption = {\n        _id: 'dawg',\n        value: 110,\n        promotionLots: [{\n          properties: [{\n            value: 100,\n            totalValue: 100\n          }],\n          lots: [{\n            value: 10\n          }, {\n            value: 0\n          }]\n        }]\n      };\n      structure.promotionOptionId = promotionOption._id;\n      structure.property = undefined;\n      structure.propertyId = undefined;\n      params.loan.promotionOptions = [promotionOption];\n      expect(Calculator.selectPropertyValue(params)).to.deep.equal(110);\n    });\n  });\n  describe('makeSelectPropertyKey', () => {\n    it('returns the exact value of a property for a promotionOption', () => {\n      const params = {\n        loan: {\n          structures: [{\n            id: 'dude',\n            promotionOptionId: 'yo'\n          }],\n          promotionOptions: [{\n            _id: 'yo',\n            value: 100,\n            promotionLots: [{\n              properties: [{\n                value: 0\n              }]\n            }]\n          }]\n        },\n        structureId: 'dude'\n      };\n      expect(Calculator.makeSelectPropertyKey('value')(params)).to.equal(0);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"SolvencyCalculator.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/test/SolvencyCalculator.spec.js                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet Calculator, CalculatorClass;\nmodule.link(\"..\", {\n  default(v) {\n    Calculator = v;\n  },\n\n  Calculator(v) {\n    CalculatorClass = v;\n  }\n\n}, 1);\nlet OWN_FUNDS_USAGE_TYPES;\nmodule.link(\"../../../api/constants\", {\n  OWN_FUNDS_USAGE_TYPES(v) {\n    OWN_FUNDS_USAGE_TYPES = v;\n  }\n\n}, 2);\nlet OWN_FUNDS_TYPES, RESIDENCE_TYPE, DEFAULT_SECONDARY_RESIDENCE_RULES, INCOME_CONSIDERATION_TYPES;\nmodule.link(\"../../../api/constants\", {\n  OWN_FUNDS_TYPES(v) {\n    OWN_FUNDS_TYPES = v;\n  },\n\n  RESIDENCE_TYPE(v) {\n    RESIDENCE_TYPE = v;\n  },\n\n  DEFAULT_SECONDARY_RESIDENCE_RULES(v) {\n    DEFAULT_SECONDARY_RESIDENCE_RULES = v;\n  },\n\n  INCOME_CONSIDERATION_TYPES(v) {\n    INCOME_CONSIDERATION_TYPES = v;\n  }\n\n}, 3);\ndescribe('SolvencyCalculator', () => {\n  describe('suggestStructure', () => {\n    let loan;\n    let borrower;\n    beforeEach(() => {\n      borrower = {\n        _id: 'borrowerId'\n      };\n      loan = {\n        borrowers: [borrower]\n      };\n    });\n    it('suggests a structure with all bankFortune if possible', () => {\n      borrower.bankFortune = 500000;\n      expect(Calculator.suggestStructure({\n        loan,\n        propertyValue: 1000000\n      })).to.deep.equal([{\n        type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n        value: 250000,\n        borrowerId: 'borrowerId'\n      }]);\n    });\n    it('calculates exact notary fees if the canton is set', () => {\n      borrower.bankFortune = 500000;\n      expect(Calculator.suggestStructure({\n        loan,\n        propertyValue: 1000008,\n        canton: 'GE'\n      })).to.deep.equal([{\n        type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n        value: 255162,\n        borrowerId: 'borrowerId'\n      }]);\n    });\n    it('suggests a structure with multiple ownFunds', () => {\n      borrower.bankFortune = 200000;\n      borrower.insurance3B = [{\n        value: 100000\n      }];\n      expect(Calculator.suggestStructure({\n        loan,\n        propertyValue: 1000000\n      })).to.deep.equal([{\n        type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n        value: 200000,\n        borrowerId: 'borrowerId'\n      }, {\n        type: OWN_FUNDS_TYPES.INSURANCE_3B,\n        value: 50000,\n        borrowerId: 'borrowerId',\n        usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW\n      }]);\n    });\n    it('does not use 2nd pillar if not a main residence', () => {\n      borrower.bankFortune = 200000;\n      borrower.insurance2 = [{\n        value: 100000\n      }];\n      expect(Calculator.suggestStructure({\n        loan,\n        propertyValue: 1000000\n      })).to.deep.equal([{\n        type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n        value: 200000,\n        borrowerId: 'borrowerId'\n      }]);\n    });\n    it('uses 2nd pillar if not a main residence', () => {\n      borrower.bankFortune = 200000;\n      borrower.insurance2 = [{\n        value: 100000\n      }];\n      expect(Calculator.suggestStructure({\n        loan,\n        propertyValue: 1000000,\n        residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE\n      })).to.deep.equal([{\n        type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n        value: 200000,\n        borrowerId: 'borrowerId'\n      }, {\n        type: OWN_FUNDS_TYPES.INSURANCE_2,\n        value: 50000,\n        borrowerId: 'borrowerId',\n        usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW\n      }]);\n    });\n    it('always gets up to the exact value', () => {\n      const loanValue = 800000;\n      loan.structure = {\n        wantedLoan: loanValue,\n        property: {\n          totalValue: 1000000,\n          canton: 'GE'\n        },\n        propertyWork: 100000\n      };\n      loan.residenceType = RESIDENCE_TYPE.MAIN_RESIDENCE;\n      const required = Calculator.getRequiredOwnFunds({\n        loan\n      });\n      borrower.bankFortune = 200000;\n      borrower.insurance2 = [{\n        value: 150000\n      }];\n      const ownFunds = Calculator.suggestStructure({\n        loan,\n        propertyValue: 1100000,\n        residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n        loanValue,\n        canton: 'GE',\n        notaryFees: 31944.1\n      });\n      const total = ownFunds.reduce((t, _ref) => {\n        let {\n          value\n        } = _ref;\n        return t + value;\n      }, 0);\n      expect(total).to.equal(Math.round(required));\n    });\n  });\n  describe('getMaxPropertyValue', () => {\n    it('recommends a standard value with unlimited income', () => {\n      expect(Calculator.getMaxPropertyValue({\n        borrowers: [{\n          bankFortune: 500000,\n          salary: 1000000\n        }]\n      })).to.equal(2000000);\n    });\n    it('recommends a standard value with unlimited income', () => {\n      expect(Calculator.getMaxPropertyValue({\n        borrowers: [{\n          bankFortune: 455000,\n          salary: 1000000\n        }]\n      })).to.equal(1820000);\n    });\n    it('returns 0 with no income', () => {\n      expect(Calculator.getMaxPropertyValue({\n        borrowers: [{\n          bankFortune: 500000,\n          salary: 0\n        }]\n      })).to.equal(0);\n    });\n    it('returns 0 with no fortune', () => {\n      expect(Calculator.getMaxPropertyValue({\n        borrowers: [{\n          bankFortune: 0,\n          salary: 1000000\n        }]\n      })).to.equal(0);\n    });\n    it('recommends a standard value with unlimited own Funds', () => {\n      expect(Calculator.getMaxPropertyValue({\n        borrowers: [{\n          bankFortune: 500000,\n          salary: 180000\n        }]\n      })).to.equal(1000000);\n    });\n  });\n  describe('suggestStructureForLoan', () => {\n    it('suggests a structure including for property work', () => {\n      expect(Calculator.suggestStructureForLoan({\n        loan: {\n          borrowers: [{\n            bankFortune: 500000,\n            salary: 180000,\n            _id: 'borrower1'\n          }],\n          structures: [{\n            id: 'struct1',\n            propertyValue: 900000,\n            propertyWork: 100000\n          }]\n        },\n        structureId: 'struct1'\n      })).to.deep.equal([{\n        type: 'bankFortune',\n        value: 245000,\n        borrowerId: 'borrower1'\n      }]);\n    });\n  });\n  describe('getMaxPropertyValueWithoutBorrowRatio', () => {\n    it('finds the ideal borrowRatio', () => {\n      const {\n        borrowRatio,\n        propertyValue\n      } = Calculator.getMaxPropertyValueWithoutBorrowRatio({\n        borrowers: [{\n          bankFortune: 500000,\n          salary: 1000000\n        }]\n      });\n      expect(borrowRatio).to.equal(0.8);\n      expect(propertyValue).to.equal(2000000);\n    });\n    it('finds the ideal borrowRatio', () => {\n      const {\n        borrowRatio,\n        propertyValue\n      } = Calculator.getMaxPropertyValueWithoutBorrowRatio({\n        borrowers: [{\n          bankFortune: 250000,\n          salary: 100000\n        }]\n      });\n      expect(borrowRatio).to.equal(0.6938);\n      expect(propertyValue).to.equal(700000);\n    });\n    it('finds the ideal borrowRatio', () => {\n      const {\n        borrowRatio,\n        propertyValue\n      } = Calculator.getMaxPropertyValueWithoutBorrowRatio({\n        borrowers: [{\n          bankFortune: 250000,\n          salary: 50000\n        }]\n      });\n      expect(borrowRatio).to.equal(0.515);\n      expect(propertyValue).to.equal(466000);\n    });\n    it('finds the ideal borrowRatio', () => {\n      const {\n        borrowRatio,\n        propertyValue\n      } = Calculator.getMaxPropertyValueWithoutBorrowRatio({\n        borrowers: [{\n          bankFortune: 200000,\n          salary: 83000\n        }]\n      });\n      expect(borrowRatio).to.equal(0.7);\n      expect(propertyValue).to.equal(571000);\n    });\n    it('finds the ideal borrowRatio for main residence type with insurance2', () => {\n      const {\n        borrowRatio,\n        propertyValue\n      } = Calculator.getMaxPropertyValueWithoutBorrowRatio({\n        borrowers: [{\n          bankFortune: 500000,\n          salary: 1000000,\n          insurance2: [{\n            value: 100000\n          }]\n        }],\n        residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE\n      });\n      expect(borrowRatio).to.equal(0.8);\n      expect(propertyValue).to.equal(2400000);\n    });\n    it('finds the ideal borrowRatio for second residence type with insurance2', () => {\n      const {\n        borrowRatio,\n        propertyValue\n      } = Calculator.getMaxPropertyValueWithoutBorrowRatio({\n        borrowers: [{\n          bankFortune: 230000,\n          salary: 120000\n        }],\n        residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n        canton: 'GE'\n      });\n      expect(borrowRatio).to.equal(0.7313);\n      expect(propertyValue).to.equal(769000);\n    });\n    it('should not exceed max borrow ratio of a lender', () => {\n      const lenderRules = [{\n        order: 0,\n        maxBorrowRatio: 0.9,\n        bonusConsideration: 0.7,\n        expensesSubtractFromIncome: [],\n        theoreticalInterestRate: 0.045,\n        theoreticalMaintenanceRate: 0.007,\n        maxIncomeRatio: 0.38,\n        filter: {\n          and: [true]\n        },\n        incomeConsiderationType: INCOME_CONSIDERATION_TYPES.NET\n      }, {\n        order: 1,\n        maxBorrowRatio: 0.7,\n        filter: {\n          and: DEFAULT_SECONDARY_RESIDENCE_RULES\n        },\n        amortizationGoal: 0.5,\n        amortizationYears: 12\n      }];\n      const borrowers = [{\n        bankFortune: 130000,\n        insurance2: [{\n          value: 100000\n        }],\n        netSalary: 125000,\n        salary: 182000,\n        bonusExists: true,\n        bonus2015: 50000,\n        bonus2016: 50000,\n        bonus2017: 50000,\n        bonus2018: 50000\n      }];\n      const loanObject = Calculator.createLoanObject({\n        residenceType: RESIDENCE_TYPE.SECOND_RESIDENCE,\n        borrowers,\n        canton: 'GE'\n      });\n      const calc = new CalculatorClass({\n        lenderRules,\n        loan: loanObject\n      });\n      const results = calc.getMaxPropertyValueWithoutBorrowRatio({\n        borrowers,\n        canton: 'GE',\n        residenceType: RESIDENCE_TYPE.SECOND_RESIDENCE\n      });\n      expect(results.borrowRatio).to.equal(0.7);\n      expect(results.propertyValue).to.equal(362000);\n    });\n    it('should work with a very small borrowRatio', () => {\n      const lenderRules = [{\n        order: 0,\n        maxBorrowRatio: 0.5,\n        bonusConsideration: 0.7,\n        expensesSubtractFromIncome: [],\n        theoreticalInterestRate: 0.045,\n        theoreticalMaintenanceRate: 0.007,\n        maxIncomeRatio: 0.38,\n        filter: {\n          and: [true]\n        },\n        incomeConsiderationType: INCOME_CONSIDERATION_TYPES.NET\n      }];\n      const borrowers = [{\n        bankFortune: 130000,\n        insurance2: [{\n          value: 100000\n        }],\n        netSalary: 125000,\n        salary: 182000,\n        bonusExists: true,\n        bonus2015: 50000,\n        bonus2016: 50000,\n        bonus2017: 50000,\n        bonus2018: 50000\n      }];\n      const loanObject = Calculator.createLoanObject({\n        residenceType: RESIDENCE_TYPE.SECOND_RESIDENCE,\n        borrowers,\n        canton: 'GE'\n      });\n      const calc = new CalculatorClass({\n        lenderRules,\n        loan: loanObject\n      });\n      const results = calc.getMaxPropertyValueWithoutBorrowRatio({\n        borrowers,\n        canton: 'GE',\n        residenceType: RESIDENCE_TYPE.SECOND_RESIDENCE\n      });\n      expect(results.borrowRatio).to.equal(0.5);\n      expect(results.propertyValue).to.equal(232000);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"classes.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/test/classes.spec.js                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet compose;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  }\n\n}, 1);\nlet memoizeOne, memoizeOneObjectArg;\nmodule.link(\"../../memoizeOne\", {\n  default(v) {\n    memoizeOne = v;\n  },\n\n  memoizeOneObjectArg(v) {\n    memoizeOneObjectArg = v;\n  }\n\n}, 2);\nlet MiddlewareManager;\nmodule.link(\"../../MiddlewareManager\", {\n  default(v) {\n    MiddlewareManager = v;\n  }\n\n}, 3);\nlet borrowerExtractorMiddleware;\nmodule.link(\"../middleware\", {\n  borrowerExtractorMiddleware(v) {\n    borrowerExtractorMiddleware = v;\n  }\n\n}, 4);\nlet precisionMiddleware;\nmodule.link(\"../../FinanceCalculator/financeCalculatorMiddlewares\", {\n  precisionMiddleware(v) {\n    precisionMiddleware = v;\n  }\n\n}, 5);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/* eslint-env mocha */\n\n\nclass RootCalculator {\n  constructor() {\n    this.initializer = 2;\n  }\n\n  add(a, b) {\n    return a + b;\n  }\n\n  returnVarParent() {\n    return this.var;\n  }\n\n  return2() {\n    return 2;\n  }\n\n  parentFunc() {\n    return this.childFunc();\n  }\n\n  static staticFunc() {\n    return 'hi';\n  }\n\n}\n\nconst addClass = SuperClass => class extends SuperClass {};\n\nconst withCalc2 = function () {\n  let SuperClass = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : class {};\n  return class extends SuperClass {\n    constructor() {\n      super();\n      this.initializer = this.initializer * 2;\n    }\n\n    increment(a) {\n      return a + 1;\n    }\n\n    setVar(value) {\n      this.var = value;\n    }\n\n  };\n};\n\nconst withCalc3 = SuperClass => class extends SuperClass {\n  constructor() {\n    super();\n    this.initializer = this.initializer + 1;\n  }\n\n  multiply(a, b) {\n    return a * b;\n  }\n\n  returnVarChild() {\n    return this.var;\n  }\n\n  return2() {\n    return -2;\n  }\n\n  childFunc() {\n    return 'it works';\n  }\n\n};\n\nconst UberClass = compose(withCalc3, withCalc2)(RootCalculator);\ndescribe('Class composition', () => {\n  it('extends properly', () => {\n    class MyClass extends RootCalculator {}\n\n    expect(new MyClass().add(1, 2)).to.equal(3);\n  });\n  it('combines classes with the mixin', () => {\n    const Calc2 = withCalc2();\n\n    class MyClass extends addClass(Calc2) {}\n\n    expect(new MyClass().increment(1)).to.equal(2);\n  });\n  it('combines multiple classes', () => {\n    class MyClass extends withCalc3(withCalc2(RootCalculator)) {}\n\n    expect(new MyClass().increment(1)).to.equal(2);\n    expect(new MyClass().add(1, 2)).to.equal(3);\n    expect(new MyClass().multiply(2, 3)).to.equal(6);\n  });\n  it('combines multiple classes with compose', () => {\n    class MyClass extends compose(withCalc3, withCalc2)(RootCalculator) {}\n\n    expect(new MyClass().increment(1)).to.equal(2);\n    expect(new MyClass().add(1, 2)).to.equal(3);\n    expect(new MyClass().multiply(2, 3)).to.equal(6);\n  });\n  it('combines multiple classes with compose hidden away', () => {\n    const MyClass = class extends UberClass {};\n    expect(new MyClass().increment(1)).to.equal(2);\n    expect(new MyClass().add(1, 2)).to.equal(3);\n    expect(new MyClass().multiply(2, 3)).to.equal(6);\n  });\n  it('calls the constructor chain from Root to Calc3', () => {\n    class MyClass extends UberClass {}\n\n    expect(new MyClass().initializer).to.equal(5);\n  });\n  it('autocompletion works', () => {\n    class MyClass extends compose(withCalc3, withCalc2)(RootCalculator) {}\n\n    const Calc = new MyClass(); // Play around here..\n  });\n  it('can use instance variables across calculators', () => {\n    class MyClass extends UberClass {}\n\n    const Calc = new MyClass();\n    expect(Calc.returnVarParent()).to.equal(undefined);\n    expect(Calc.returnVarChild()).to.equal(undefined);\n    Calc.setVar(2);\n    expect(Calc.var).to.equal(2);\n    expect(Calc.returnVarParent()).to.equal(2);\n    expect(Calc.returnVarChild()).to.equal(2);\n  });\n  it('overwrites parent methods ', () => {\n    class MyClass extends UberClass {\n      add(a, b) {\n        return a - b;\n      }\n\n    }\n\n    expect(new MyClass().add(2, 3)).to.equal(-1);\n  });\n  it('overwrites in the right order', () => {\n    expect(new UberClass().return2()).to.equal(-2);\n  });\n  it('can call super', () => {\n    class MyClass extends UberClass {\n      constructor() {\n        super(...arguments);\n\n        _defineProperty(this, \"add\", super.multiply);\n      }\n\n      increment(a) {\n        return super.increment(a - 1);\n      }\n\n    }\n\n    expect(new MyClass().add(2, 3)).to.equal(6);\n    expect(new MyClass().increment(2)).to.equal(2);\n  });\n  it('shows the right types with flow-type', () => {\n    class MyClass extends UberClass {\n      return2() {\n        return '2';\n      }\n\n      returnNumber() {\n        return super.return2();\n      }\n\n    } // Inspect types here to make sure they are correct\n\n\n    expect(new MyClass().return2()).to.equal('2');\n    expect(new MyClass().returnNumber()).to.equal(-2);\n  });\n  it('parent can call child funcs', () => {\n    expect(new UberClass().parentFunc()).to.equal('it works');\n  });\n  it('does not inherit static methods as expected', () => {\n    class MyClass extends UberClass {\n      constructor(props) {\n        super(props);\n      }\n\n      return2() {\n        return '2';\n      }\n\n      static returnNumber() {\n        return 5;\n      }\n\n    }\n\n    _defineProperty(MyClass, \"returnNumber2\", () => 5);\n\n    const myClass = new MyClass();\n    expect(myClass.returnNumber2).to.equal(undefined);\n    expect(myClass.returnNumber).to.equal(undefined);\n    expect(myClass.staticFunc).to.equal(undefined);\n  });\n  describe('memoization', () => {\n    const memoizeMiddleware = calc => next => {\n      const memoFunc = memoizeOne(next);\n      return function () {\n        calc.memo += 1;\n        return memoFunc(...arguments);\n      };\n    };\n\n    const preMiddleware = precisionMiddleware;\n    const postMiddleware = borrowerExtractorMiddleware;\n\n    class MemoizedClass {\n      constructor() {\n        this.count = 0;\n        this.memo = 0;\n        this.init();\n      }\n\n      init() {\n        const middlewareManager = new MiddlewareManager(this);\n        middlewareManager.applyToAllMethods([preMiddleware, memoizeMiddleware, postMiddleware]);\n      }\n\n      add(_ref) {\n        let {\n          a,\n          b\n        } = _ref;\n        this.count += 1;\n        return a + b;\n      }\n\n      div(_ref2) {\n        let {\n          a,\n          b\n        } = _ref2;\n        this.count += 1;\n        return a / b;\n      }\n\n      stuff(_ref3) {\n        let {\n          borrowers\n        } = _ref3;\n        this.count += 1;\n        return borrowers.a;\n      }\n\n      nothing() {\n        this.count += 1;\n        return 'yo';\n      }\n\n      stringArg(index) {\n        this.count += 1;\n        return [1, 2, 3][index];\n      }\n\n    }\n\n    it('memoizes additions once', () => {\n      const myClass = new MemoizedClass();\n      expect(myClass.add({\n        a: 1,\n        b: 2\n      })).to.equal(3);\n      expect(myClass.add({\n        a: 1,\n        b: 2\n      })).to.equal(3);\n      expect(myClass.add({\n        a: 2,\n        b: 2\n      })).to.equal(4);\n      expect(myClass.add({\n        a: 1,\n        b: 2\n      })).to.equal(3);\n      expect(myClass.memo).to.equal(4);\n      expect(myClass.count).to.equal(3);\n    });\n    it('memoizes divisions', () => {\n      const myClass = new MemoizedClass();\n      expect(myClass.div({\n        a: 2,\n        b: 3\n      })).to.equal(0.6666666667);\n      expect(myClass.div({\n        a: 2,\n        b: 3\n      })).to.equal(0.6666666667);\n      expect(myClass.memo).to.equal(2);\n      expect(myClass.count).to.equal(1);\n    });\n    it('does not care about other middlewares', () => {\n      const loan = {\n        borrowers: {\n          a: 3\n        }\n      };\n      const myClass = new MemoizedClass();\n      expect(myClass.stuff({\n        loan\n      })).to.equal(3);\n      expect(myClass.stuff({\n        loan\n      })).to.equal(3);\n      expect(myClass.memo).to.equal(2);\n      expect(myClass.count).to.equal(1);\n    });\n    it('works for functions without arguments', () => {\n      const loan = {\n        borrowers: {\n          a: 3\n        }\n      };\n      const myClass = new MemoizedClass();\n      expect(myClass.nothing({\n        loan\n      })).to.equal('yo');\n      expect(myClass.nothing({\n        loan\n      })).to.equal('yo');\n      expect(myClass.memo).to.equal(2);\n      expect(myClass.count).to.equal(1);\n    });\n    it('works for regular functions', () => {\n      const myClass = new MemoizedClass();\n      expect(myClass.stringArg(0)).to.equal(1);\n      expect(myClass.stringArg(1)).to.equal(2);\n      expect(myClass.stringArg(1)).to.equal(2);\n      expect(myClass.stringArg(2)).to.equal(3);\n      expect(myClass.memo).to.equal(4);\n      expect(myClass.count).to.equal(3);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"middleware.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/test/middleware.spec.js                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet MiddlewareManager;\nmodule.link(\"../../MiddlewareManager\", {\n  default(v) {\n    MiddlewareManager = v;\n  }\n\n}, 1);\nlet borrowerExtractorMiddleware;\nmodule.link(\"../middleware\", {\n  borrowerExtractorMiddleware(v) {\n    borrowerExtractorMiddleware = v;\n  }\n\n}, 2);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/* eslint-env mocha */\n\n\ndescribe('Calculator middleware', () => {\n  describe('borrowerExtractorMiddleware', () => {\n    class Calc {\n      constructor() {\n        _defineProperty(this, \"parameters2\", params => params);\n\n        const middlewareManager = new MiddlewareManager(this);\n        middlewareManager.applyToAllMethods(borrowerExtractorMiddleware);\n      }\n\n      parameters(params) {\n        return params;\n      }\n\n    }\n\n    it('extracts borrower', () => {\n      const calc = new Calc();\n      expect(calc.parameters({\n        loan: {\n          borrowers: 1\n        }\n      })).to.deep.equal({\n        loan: {\n          borrowers: 1\n        },\n        borrowers: 1\n      });\n    });\n    it('does not overwrite existing borrowers', () => {\n      const calc = new Calc();\n      expect(calc.parameters({\n        loan: {\n          borrowers: 1\n        },\n        borrowers: 2\n      })).to.deep.equal({\n        loan: {\n          borrowers: 1\n        },\n        borrowers: 2\n      });\n    });\n    it('does not work for arrow function', () => {\n      const calc = new Calc();\n      expect(calc.parameters2({\n        loan: {\n          borrowers: 1\n        }\n      })).to.deep.equal({\n        loan: {\n          borrowers: 1\n        }\n      });\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"BorrowerCalculator.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/BorrowerCalculator.js                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  withBorrowerCalculator: () => withBorrowerCalculator\n});\nlet OWN_FUNDS_TYPES;\nmodule.link(\"../../api/constants\", {\n  OWN_FUNDS_TYPES(v) {\n    OWN_FUNDS_TYPES = v;\n  }\n\n}, 0);\nlet getBorrowerDocuments;\nmodule.link(\"../../api/files/documents\", {\n  getBorrowerDocuments(v) {\n    getBorrowerDocuments = v;\n  }\n\n}, 1);\nlet filesPercent, getMissingDocumentIds;\nmodule.link(\"../../api/files/fileHelpers\", {\n  filesPercent(v) {\n    filesPercent = v;\n  },\n\n  getMissingDocumentIds(v) {\n    getMissingDocumentIds = v;\n  }\n\n}, 2);\nlet getBorrowerInfoArray, getBorrowerFinanceArray, getBorrowerSimpleArray;\nmodule.link(\"../../arrays/BorrowerFormArray\", {\n  getBorrowerInfoArray(v) {\n    getBorrowerInfoArray = v;\n  },\n\n  getBorrowerFinanceArray(v) {\n    getBorrowerFinanceArray = v;\n  },\n\n  getBorrowerSimpleArray(v) {\n    getBorrowerSimpleArray = v;\n  }\n\n}, 3);\nlet arrayify, getPercent;\nmodule.link(\"../general\", {\n  arrayify(v) {\n    arrayify = v;\n  },\n\n  getPercent(v) {\n    getPercent = v;\n  }\n\n}, 4);\nlet getCountedArray, getMissingFieldIds, getFormValuesHashMultiple;\nmodule.link(\"../formArrayHelpers\", {\n  getCountedArray(v) {\n    getCountedArray = v;\n  },\n\n  getMissingFieldIds(v) {\n    getMissingFieldIds = v;\n  },\n\n  getFormValuesHashMultiple(v) {\n    getFormValuesHashMultiple = v;\n  }\n\n}, 5);\nlet MiddlewareManager;\nmodule.link(\"../MiddlewareManager\", {\n  default(v) {\n    MiddlewareManager = v;\n  }\n\n}, 6);\nlet INCOME_CONSIDERATION_TYPES, EXPENSE_TYPES;\nmodule.link(\"../../api/constants\", {\n  INCOME_CONSIDERATION_TYPES(v) {\n    INCOME_CONSIDERATION_TYPES = v;\n  },\n\n  EXPENSE_TYPES(v) {\n    EXPENSE_TYPES = v;\n  }\n\n}, 7);\nlet borrowerExtractorMiddleware;\nmodule.link(\"./middleware\", {\n  borrowerExtractorMiddleware(v) {\n    borrowerExtractorMiddleware = v;\n  }\n\n}, 8);\nlet BONUS_ALGORITHMS, REAL_ESTATE_INCOME_ALGORITHMS;\nmodule.link(\"../../config/financeConstants\", {\n  BONUS_ALGORITHMS(v) {\n    BONUS_ALGORITHMS = v;\n  },\n\n  REAL_ESTATE_INCOME_ALGORITHMS(v) {\n    REAL_ESTATE_INCOME_ALGORITHMS = v;\n  }\n\n}, 9);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nconst withBorrowerCalculator = function () {\n  let SuperClass = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : class {};\n\n  var _temp;\n\n  return _temp = class extends SuperClass {\n    constructor(config) {\n      super(config);\n\n      _defineProperty(this, \"isTypeWithArrayValues\", type => [OWN_FUNDS_TYPES.INSURANCE_2, OWN_FUNDS_TYPES.INSURANCE_3A, OWN_FUNDS_TYPES.BANK_3A, OWN_FUNDS_TYPES.INSURANCE_3B].includes(type));\n\n      this.initBorrowerCalculator(config);\n    }\n\n    initBorrowerCalculator(config) {\n      const middleware = config && config.borrowerMiddleware || borrowerExtractorMiddleware;\n      const middlewareManager = new MiddlewareManager(this);\n      middlewareManager.applyToAllMethods([middleware]);\n    }\n\n    getArrayValues(_ref) {\n      let {\n        borrowers,\n        key,\n        mapFunc\n      } = _ref;\n      let sum = 0;\n      arrayify(borrowers).forEach(borrower => {\n        if (!borrower[key]) {\n          return 0;\n        }\n\n        sum += [...(borrower[key] && borrower[key].length > 0 ? borrower[key].map(mapFunc || (i => i.value)) : [])].reduce((tot, val) => val > 0 && tot + val || tot, 0);\n      });\n      return Math.max(0, Math.round(sum));\n    }\n\n    getBonuses(_ref2) {\n      let {\n        borrowers\n      } = _ref2;\n      return arrayify(borrowers).reduce((obj, borrower) => {\n        if (!borrower.bonusExists) {\n          return obj;\n        }\n\n        const bonusKeys = Object.keys(borrower).filter(key => key.includes('bonus') && key !== 'bonusExists' && borrower[key] >= 0 && borrower[key] !== null);\n        bonusKeys.forEach(key => {\n          const value = borrower[key];\n\n          if (obj[key]) {\n            obj = (0, _objectSpread2.default)({}, obj, {\n              [key]: obj[key] + value\n            });\n          } else {\n            obj = (0, _objectSpread2.default)({}, obj, {\n              [key]: value\n            });\n          }\n        });\n        return obj;\n      }, {});\n    }\n\n    getBonusIncome(_ref3) {\n      let {\n        borrowers\n      } = _ref3;\n      const bonusKeys = ['bonus2015', 'bonus2016', 'bonus2017', 'bonus2018', 'bonus2019'];\n      const total = arrayify(borrowers).reduce((acc, borrower) => {\n        if (!borrower.bonusExists) {\n          return acc + 0;\n        }\n\n        const arr = bonusKeys.map(key => borrower[key]).filter(val => this.bonusAlgorithm === BONUS_ALGORITHMS.WEAK_AVERAGE ? val > 0 : true);\n        return acc + this.getConsideredValue({\n          values: arr,\n          history: this.bonusHistoryToConsider,\n          weighting: this.bonusConsideration\n        });\n      }, 0);\n      return Math.max(0, Math.round(total));\n    }\n\n    getConsideredValue(_ref4) {\n      let {\n        values,\n        history,\n        weighting\n      } = _ref4;\n      const valuesToConsider = values.slice(Math.max(0, values.length - history));\n      const sum = valuesToConsider.reduce(function (tot) {\n        let val = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        return tot + val;\n      }, 0);\n      return weighting * sum / valuesToConsider.length || 0;\n    }\n\n    getBorrowerCompletion(_ref5) {\n      let {\n        loan,\n        borrowers\n      } = _ref5;\n      return (this.getBorrowerFilesProgress({\n        loan,\n        borrowers\n      }).percent + this.personalInfoPercent({\n        borrowers\n      })) / 2;\n    }\n\n    getBorrowerFilesProgress(_ref6) {\n      let {\n        loan,\n        borrowers\n      } = _ref6;\n      const percentages = arrayify(borrowers).reduce((total, borrower) => {\n        const {\n          percent,\n          count\n        } = filesPercent({\n          fileArray: getBorrowerDocuments({\n            loan,\n            id: borrower._id\n          }, this),\n          doc: borrower\n        });\n        return {\n          percent: total.percent + percent * count,\n          count: total.count + count\n        };\n      }, {\n        percent: 0,\n        count: 0\n      });\n      return (0, _objectSpread2.default)({}, percentages, {\n        percent: percentages.count === 0 ? 1 : percentages.percent / percentages.count\n      });\n    }\n\n    getFunds(_ref7) {\n      let {\n        borrowers,\n        type\n      } = _ref7;\n\n      if (this.isTypeWithArrayValues(type)) {\n        return this.getArrayValues({\n          borrowers,\n          key: type\n        });\n      }\n\n      return this.sumValues({\n        borrowers,\n        keys: type\n      });\n    }\n\n    getFortune(_ref8) {\n      let {\n        borrowers\n      } = _ref8;\n      return this.sumValues({\n        borrowers,\n        keys: OWN_FUNDS_TYPES.BANK_FORTUNE\n      });\n    }\n\n    getThirdPartyFortune(_ref9) {\n      let {\n        borrowers\n      } = _ref9;\n      const val = this.sumValues({\n        borrowers,\n        keys: OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE\n      });\n      return val;\n    }\n\n    getExpenses(_ref10) {\n      let {\n        borrowers\n      } = _ref10;\n      return this.getArrayValues({\n        borrowers,\n        key: 'expenses'\n      });\n    }\n\n    getInsurance2(_ref11) {\n      let {\n        borrowers\n      } = _ref11;\n      return this.getArrayValues({\n        borrowers,\n        key: OWN_FUNDS_TYPES.INSURANCE_2\n      });\n    }\n\n    getInsurance3A(_ref12) {\n      let {\n        borrowers\n      } = _ref12;\n      return this.getArrayValues({\n        borrowers,\n        key: OWN_FUNDS_TYPES.INSURANCE_3A\n      });\n    }\n\n    getBank3A(_ref13) {\n      let {\n        borrowers\n      } = _ref13;\n      return this.getArrayValues({\n        borrowers,\n        key: OWN_FUNDS_TYPES.BANK_3A\n      });\n    }\n\n    getInsurance3B(_ref14) {\n      let {\n        borrowers\n      } = _ref14;\n      return this.getArrayValues({\n        borrowers,\n        key: OWN_FUNDS_TYPES.INSURANCE_3B\n      });\n    }\n\n    getInsuranceFortune(_ref15) {\n      let {\n        borrowers\n      } = _ref15;\n      return [this.getInsurance2, this.getInsurance3A, this.getInsurance3B, this.getBank3A].reduce((sum, func) => sum + func({\n        borrowers\n      }), 0);\n    }\n\n    getCashFortune(_ref16) {\n      let {\n        borrowers\n      } = _ref16;\n      return [this.getFortune, this.getThirdPartyFortune, this.getInsurance3A, this.getInsurance3B, this.getBank3A].reduce((sum, func) => sum + func({\n        borrowers\n      }), 0);\n    }\n\n    getMissingBorrowerFields(_ref17) {\n      let {\n        borrowers\n      } = _ref17;\n      const res = arrayify(borrowers).reduce((missingIds, borrower) => {\n        const formArray = getBorrowerInfoArray({\n          borrowers: arrayify(borrowers),\n          borrowerId: borrower._id\n        });\n        const formArray2 = getBorrowerFinanceArray({\n          borrowers: arrayify(borrowers),\n          borrowerId: borrower._id\n        });\n        return [...missingIds, ...getMissingFieldIds(formArray, borrower), ...getMissingFieldIds(formArray2, borrower)];\n      }, []);\n      return res;\n    }\n\n    getMissingBorrowerDocuments(_ref18) {\n      let {\n        loan,\n        borrowers\n      } = _ref18;\n      return arrayify(borrowers).reduce((missingIds, borrower) => [...missingIds, ...getMissingDocumentIds({\n        doc: borrower,\n        fileArray: getBorrowerDocuments({\n          loan,\n          id: borrower._id\n        }, this)\n      })], []);\n    }\n\n    getOtherFortune(_ref19) {\n      let {\n        borrowers\n      } = _ref19;\n      return this.getArrayValues({\n        borrowers,\n        key: 'otherFortune'\n      });\n    }\n\n    getOtherIncome(_ref20) {\n      let {\n        borrowers\n      } = _ref20;\n      return this.getArrayValues({\n        borrowers,\n        key: 'otherIncome'\n      });\n    }\n\n    getTotalFunds(_ref21) {\n      let {\n        borrowers\n      } = _ref21;\n      return this.getFortune({\n        borrowers\n      }) + this.getThirdPartyFortune({\n        borrowers\n      }) + this.getInsuranceFortune({\n        borrowers\n      });\n    }\n\n    getRealEstateFortune(_ref22) {\n      let {\n        borrowers\n      } = _ref22;\n      return this.getArrayValues({\n        borrowers,\n        key: 'realEstate',\n        mapFunc: (_ref23) => {\n          let {\n            value = 0,\n            loan = 0\n          } = _ref23;\n          return value - loan;\n        }\n      });\n    }\n\n    getRealEstateValue(_ref24) {\n      let {\n        borrowers\n      } = _ref24;\n      return this.getArrayValues({\n        borrowers,\n        key: 'realEstate'\n      });\n    }\n\n    getRealEstateDebt(_ref25) {\n      let {\n        borrowers\n      } = _ref25;\n      return this.getArrayValues({\n        borrowers,\n        key: 'realEstate',\n        mapFunc: (_ref26) => {\n          let {\n            loan = 0\n          } = _ref26;\n          return loan;\n        }\n      });\n    }\n\n    getRealEstateIncome(_ref27) {\n      let {\n        borrowers\n      } = _ref27;\n      const realEstateIncome = this.getArrayValues({\n        borrowers,\n        key: 'realEstate',\n        mapFunc: (_ref28) => {\n          let {\n            income = 0\n          } = _ref28;\n          return income;\n        }\n      }) * this.realEstateIncomeConsideration;\n      return realEstateIncome;\n    }\n\n    getRealEstateIncomeTotal(_ref29) {\n      let {\n        borrowers\n      } = _ref29;\n\n      if (this.realEstateIncomeAlgorithm === REAL_ESTATE_INCOME_ALGORITHMS.POSITIVE_NEGATIVE_SPLIT) {\n        return 0;\n      }\n\n      return this.getRealEstateIncome({\n        borrowers\n      });\n    }\n\n    shouldUseNetSalary() {\n      return this.incomeConsiderationType === INCOME_CONSIDERATION_TYPES.NET;\n    }\n\n    getSalary(_ref30) {\n      let {\n        borrowers\n      } = _ref30;\n\n      if (this.shouldUseNetSalary()) {\n        return this.getNetSalary({\n          borrowers\n        });\n      }\n\n      return this.sumValues({\n        borrowers,\n        keys: 'salary'\n      });\n    }\n\n    getNetSalary(_ref31) {\n      let {\n        borrowers\n      } = _ref31;\n      return this.sumValues({\n        borrowers,\n        keys: 'netSalary'\n      });\n    }\n\n    getFortuneReturns(_ref32) {\n      let {\n        borrowers\n      } = _ref32;\n\n      if (this.fortuneReturnsRatio) {\n        return this.fortuneReturnsRatio * this.getFortune({\n          borrowers\n        });\n      }\n\n      return 0;\n    }\n\n    getTotalIncome(_ref33) {\n      let {\n        borrowers\n      } = _ref33;\n      let sum = arrayify(borrowers).reduce((total, borrower) => {\n        let borrowerIncome = 0;\n        borrowerIncome += this.getSalary({\n          borrowers: borrower\n        }) || 0;\n        borrowerIncome += this.getBonusIncome({\n          borrowers: borrower\n        }) || 0;\n        borrowerIncome += this.getOtherIncome({\n          borrowers: borrower\n        }) || 0;\n        borrowerIncome += this.getFortuneReturns({\n          borrowers: borrower\n        }) || 0;\n        borrowerIncome += this.getRealEstateIncomeTotal({\n          borrowers: borrower\n        }) || 0;\n        return total + borrowerIncome;\n      }, 0);\n      sum -= this.getFormattedExpenses({\n        borrowers\n      }).subtract || 0;\n      return sum;\n    }\n\n    getRetirement(_ref34) {\n      let {\n        borrowers\n      } = _ref34;\n      const argMap = borrowers.reduce((obj, _ref35, index) => {\n        let {\n          age,\n          gender\n        } = _ref35;\n        return (0, _objectSpread2.default)({}, obj, {\n          [\"\".concat(\"age\".concat(index + 1))]: age,\n          [\"\".concat(\"gender\".concat(index + 1))]: gender\n        });\n      }, {});\n      return this.getYearsToRetirement(argMap);\n    }\n\n    getAmortizationDuration(_ref36) {\n      let {\n        borrowers\n      } = _ref36;\n      const retirement = this.getRetirement({\n        borrowers\n      });\n      return Math.min(15, retirement);\n    } // personalInfoPercent - Determines the completion rate of the borrower's\n    // personal information forms\n\n\n    personalInfoPercent(_ref37) {\n      let {\n        borrowers\n      } = _ref37;\n\n      if (!borrowers || Array.isArray(borrowers) && !borrowers.length) {\n        return 0;\n      }\n\n      const array = arrayify(borrowers).reduce((arr, b) => {\n        const personalFormArray = getBorrowerInfoArray({\n          borrowers: arrayify(borrowers),\n          borrowerId: b._id\n        });\n        const financeFormArray = getBorrowerFinanceArray({\n          borrowers: arrayify(borrowers),\n          borrowerId: b._id\n        });\n        return [...arr, ...getCountedArray(personalFormArray, b), ...getCountedArray(financeFormArray, b)];\n      }, []);\n      return getPercent(array);\n    }\n\n    personalInfoPercentSimple(_ref38) {\n      let {\n        borrowers,\n        loan\n      } = _ref38;\n\n      if ((!borrowers || !borrowers.length) && !loan.borrowers.length) {\n        return 0;\n      }\n\n      const array = arrayify(borrowers).reduce((arr, b) => {\n        const simpleFormArray = getBorrowerSimpleArray({\n          borrowers: arrayify(borrowers),\n          borrowerId: b._id,\n          loan\n        });\n        return [...arr, ...getCountedArray(simpleFormArray, b)];\n      }, []);\n      return getPercent(array);\n    }\n\n    borrowerInfoPercent(_ref39) {\n      let {\n        borrowers\n      } = _ref39;\n\n      if (!borrowers || !borrowers.length) {\n        return 0;\n      }\n\n      const array = arrayify(borrowers).reduce((arr, b) => {\n        const personalFormArray = getBorrowerInfoArray({\n          borrowers: arrayify(borrowers),\n          borrowerId: b._id\n        });\n        return [...arr, ...getCountedArray(personalFormArray, b)];\n      }, []);\n      return getPercent(array);\n    }\n\n    borrowerFinancePercent(_ref40) {\n      let {\n        borrowers\n      } = _ref40;\n      const array = arrayify(borrowers).reduce((arr, b) => {\n        const financeFormArray = getBorrowerFinanceArray({\n          borrowers: arrayify(borrowers),\n          borrowerId: b._id\n        });\n        return [...arr, ...getCountedArray(financeFormArray, b)];\n      }, []);\n      return getPercent(array);\n    }\n\n    getBorrowerFormHash(_ref41) {\n      let {\n        borrowers\n      } = _ref41;\n      return getFormValuesHashMultiple(arrayify(borrowers).reduce((arr, borrower) => [...arr, {\n        formArray: getBorrowerFinanceArray({\n          borrowers: arrayify(borrowers),\n          borrowerId: borrower._id\n        }),\n        doc: borrower\n      }, {\n        formArray: getBorrowerInfoArray({\n          borrowers: arrayify(borrowers),\n          borrowerId: borrower._id\n        }),\n        doc: borrower\n      }], []));\n    }\n\n    sumValues(_ref42) {\n      let {\n        borrowers,\n        keys\n      } = _ref42;\n      return arrayify(keys).reduce((total, key) => total + arrayify(borrowers).reduce((t, b) => t + (b[key] || 0), 0), 0);\n    }\n\n    getNetFortune(_ref43) {\n      let {\n        borrowers\n      } = _ref43;\n      return this.getTotalFunds({\n        borrowers\n      }) + this.getRealEstateFortune({\n        borrowers\n      }) + this.getOtherFortune({\n        borrowers\n      });\n    }\n\n    getMortgageNotes(_ref44) {\n      let {\n        borrowers\n      } = _ref44;\n      return borrowers.reduce((arr, _ref45) => {\n        let {\n          mortgageNotes: notes = []\n        } = _ref45;\n        return [...arr, ...notes];\n      }, []);\n    }\n\n    getRealEstateExpenses(_ref46) {\n      let {\n        borrowers\n      } = _ref46;\n      const realEstate = arrayify(borrowers).reduce((arr, borrower) => [...arr, ...(borrower.realEstate || [])], []);\n      const realEstateCost = realEstate.reduce((tot, obj) => tot + this.getRealEstateCost(obj), 0);\n      return realEstateCost;\n    }\n\n    getRealEstateDeltas(_ref47) {\n      let {\n        borrowers\n      } = _ref47;\n      const allRealEstate = arrayify(borrowers).map((_ref48) => {\n        let {\n          realEstate\n        } = _ref48;\n        return realEstate;\n      }).reduce((arr, realEstate) => [...arr, ...realEstate], []);\n      return allRealEstate.map(realEstate => {\n        const {\n          income\n        } = realEstate;\n        const expenses = this.getRealEstateCost(realEstate) * 12;\n        return Math.round(income * this.realEstateIncomeConsideration) - expenses;\n      });\n    }\n\n    getRealEstateCost(_ref49) {\n      let {\n        loan,\n        value\n      } = _ref49;\n      const amortizationRate = this.getAmortizationRateBase({\n        borrowRatio: super.getBorrowRatio({\n          loan,\n          propertyValue: value\n        })\n      });\n      return super.getTheoreticalMonthly({\n        propAndWork: value,\n        loanValue: loan,\n        amortizationRate\n      }).total;\n    }\n\n    sumArray(arr) {\n      return arr.reduce(function (tot) {\n        let v = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        return tot + v;\n      }, 0);\n    } // Returns an object with all the types of expenses, combined between\n    // borrowers:\n    // {\n    //  LEASING: 23000,\n    //  WELFARE: 4000,\n    //  THEORETICAL_REAL_ESTATE: 30000,\n    //  etc\n    // }\n\n\n    getAllExpenses(_ref50) {\n      let {\n        borrowers\n      } = _ref50;\n\n      if (this.realEstateIncomeAlgorithm === REAL_ESTATE_INCOME_ALGORITHMS.POSITIVE_NEGATIVE_SPLIT) {\n        const deltas = this.getRealEstateDeltas({\n          borrowers\n        });\n        return (0, _objectSpread2.default)({\n          // Negative deltas should be made positive so they can be added to expenses\n          [EXPENSE_TYPES.REAL_ESTATE_DELTA_NEGATIVE]: -this.sumArray(deltas.filter(delta => delta < 0)),\n          // Positive deltas should be made negative so they can be subtracted from income,\n          // and therefore increase income\n          [EXPENSE_TYPES.REAL_ESTATE_DELTA_POSITIVE]: -this.sumArray(deltas.filter(delta => delta > 0))\n        }, this.getGroupedExpenses({\n          borrowers\n        }));\n      }\n\n      return (0, _objectSpread2.default)({\n        [EXPENSE_TYPES.THEORETICAL_REAL_ESTATE]: this.getRealEstateExpenses({\n          borrowers\n        }) * 12\n      }, this.getGroupedExpenses({\n        borrowers\n      }));\n    } // Same as getAllExpenses, but without real estate expenses\n\n\n    getGroupedExpenses(_ref51) {\n      let {\n        borrowers\n      } = _ref51;\n      const flattenedExpenses = [].concat([], ...arrayify(borrowers).map((_ref52) => {\n        let {\n          expenses\n        } = _ref52;\n        return expenses;\n      })).filter(x => x);\n      return flattenedExpenses.reduce((obj, _ref53) => {\n        let {\n          value,\n          description\n        } = _ref53;\n        return (0, _objectSpread2.default)({}, obj, {\n          [description]: (obj[description] || 0) + value\n        });\n      }, {});\n    }\n\n    shouldSubtractExpenseFromIncome(expenseType) {\n      return this.expensesSubtractFromIncome.includes(expenseType);\n    }\n\n    groupRealEstateDeltas(_ref54) {\n      let {\n        groupedExpenses,\n        expenses,\n        toSubtractFromIncome\n      } = _ref54;\n      const negativeDeltas = expenses[EXPENSE_TYPES.REAL_ESTATE_DELTA_NEGATIVE];\n      const positiveDeltas = expenses[EXPENSE_TYPES.REAL_ESTATE_DELTA_POSITIVE];\n\n      if (toSubtractFromIncome) {\n        // If we want to get expenses to subtract from income, add the\n        // positiveDeltas negatively, so they are in fact added to income\n        return (0, _objectSpread2.default)({}, groupedExpenses, {\n          [EXPENSE_TYPES.REAL_ESTATE_DELTA_POSITIVE]: positiveDeltas\n        });\n      }\n\n      return (0, _objectSpread2.default)({}, groupedExpenses, {\n        [EXPENSE_TYPES.REAL_ESTATE_DELTA_NEGATIVE]: negativeDeltas\n      });\n    } // Returns an object with all expenses to subtract from income\n    // or all expenses to add to expenses, depending on the param `toSubtractFromIncome`¨\n    // {\n    //  LEASING: 23000,\n    // }\n\n\n    getGroupedExpensesBySide(_ref55) {\n      let {\n        borrowers,\n        toSubtractFromIncome = true\n      } = _ref55;\n      const expenses = this.getAllExpenses({\n        borrowers\n      });\n      const expensesBySide = Object.keys(expenses).filter(expenseType => !this.expenseTypeIsDelta(expenseType)).filter(expenseType => {\n        const subtractExpenseTypeFromIncome = this.expensesSubtractFromIncome.includes(expenseType);\n        return toSubtractFromIncome ? subtractExpenseTypeFromIncome : !subtractExpenseTypeFromIncome;\n      });\n      const groupedExpenses = expensesBySide.reduce((obj, expenseType) => (0, _objectSpread2.default)({}, obj, {\n        [expenseType]: expenses[expenseType]\n      }), {});\n\n      if (this.realEstateIncomeAlgorithm === REAL_ESTATE_INCOME_ALGORITHMS.POSITIVE_NEGATIVE_SPLIT) {\n        return this.groupRealEstateDeltas({\n          groupedExpenses,\n          expenses,\n          toSubtractFromIncome\n        });\n      }\n\n      return groupedExpenses;\n    }\n\n    expenseTypeIsDelta(expenseType) {\n      return [EXPENSE_TYPES.REAL_ESTATE_DELTA_NEGATIVE, EXPENSE_TYPES.REAL_ESTATE_DELTA_POSITIVE].includes(expenseType);\n    }\n\n    formatRealEstateExpenses(_ref56) {\n      let {\n        obj,\n        expenseType,\n        value\n      } = _ref56;\n\n      if (expenseType === EXPENSE_TYPES.REAL_ESTATE_DELTA_NEGATIVE) {\n        return (0, _objectSpread2.default)({}, obj, {\n          add: obj.add + value\n        });\n      }\n\n      return (0, _objectSpread2.default)({}, obj, {\n        subtract: obj.subtract + value\n      });\n    } // Returns an object with 2 keys, `subtract` and `add` that contain the sum\n    // of all expenses to \"subtract from income\" and \"add to expenses\", respectively\n\n\n    getFormattedExpenses(_ref57) {\n      let {\n        borrowers\n      } = _ref57;\n      const expenses = this.getAllExpenses({\n        borrowers\n      });\n      return Object.keys(expenses).reduce((obj, expenseType) => {\n        const value = expenses[expenseType];\n\n        if (this.expenseTypeIsDelta(expenseType)) {\n          return this.formatRealEstateExpenses({\n            obj,\n            expenseType,\n            value\n          });\n        }\n\n        if (this.expensesSubtractFromIncome.indexOf(expenseType) >= 0) {\n          return (0, _objectSpread2.default)({}, obj, {\n            subtract: obj.subtract + value\n          });\n        }\n\n        return (0, _objectSpread2.default)({}, obj, {\n          add: obj.add + value\n        });\n      }, {\n        subtract: 0,\n        add: 0\n      });\n    }\n\n    getCommentsForExpenseType(_ref58) {\n      let {\n        borrowers,\n        type\n      } = _ref58;\n      return arrayify(borrowers).reduce((comments, _ref59) => {\n        let {\n          expenses = []\n        } = _ref59;\n        const expensesOfType = expenses.filter((_ref60) => {\n          let {\n            description\n          } = _ref60;\n          return description === type;\n        });\n        return [...comments, ...expensesOfType.map((_ref61) => {\n          let {\n            comment\n          } = _ref61;\n          return comment;\n        })].filter(x => x);\n      }, []);\n    }\n\n    getCommentsForOtherIncomeType(_ref62) {\n      let {\n        borrowers,\n        type\n      } = _ref62;\n      return arrayify(borrowers).reduce((comments, _ref63) => {\n        let {\n          otherIncome = []\n        } = _ref63;\n        const otherIncomeOfType = otherIncome.filter((_ref64) => {\n          let {\n            description\n          } = _ref64;\n          return description === type;\n        });\n        return [...comments, ...otherIncomeOfType.map((_ref65) => {\n          let {\n            comment\n          } = _ref65;\n          return comment;\n        })].filter(x => x);\n      }, []);\n    }\n\n    canCalculateSolvency(_ref66) {\n      let {\n        borrowers\n      } = _ref66;\n\n      if (!borrowers.length) {\n        return false;\n      }\n\n      if (this.getCashFortune({\n        borrowers\n      }) === 0) {\n        return false;\n      }\n\n      if (this.getSalary({\n        borrowers\n      }) === 0) {\n        return false;\n      }\n\n      return true;\n    }\n\n  }, _temp;\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"CombinedCalculator.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/CombinedCalculator.js                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  withCombinedCalculator: () => withCombinedCalculator\n});\nlet getAggregatePercent;\nmodule.link(\"../general\", {\n  getAggregatePercent(v) {\n    getAggregatePercent = v;\n  }\n\n}, 0);\n\nconst withCombinedCalculator = function () {\n  let SuperClass = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : class {};\n  return class extends SuperClass {\n    filesProgress(_ref) {\n      let {\n        loan\n      } = _ref;\n      const hasPromotion = loan.promotions && loan.promotions.length > 0;\n      const progress = [this.getLoanFilesProgress, this.getBorrowerFilesProgress, !hasPromotion && this.getPropertyFilesProgress].filter(x => x !== false).map(f => f({\n        loan\n      })).filter(x => x);\n      return getAggregatePercent(progress);\n    }\n\n  };\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"LenderRulesInitializator.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/LenderRulesInitializator.js                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  withLenderRulesInitializator: () => withLenderRulesInitializator\n});\nlet parseFilter;\nmodule.link(\"../../api/lenderRules/helpers\", {\n  parseFilter(v) {\n    parseFilter = v;\n  }\n\n}, 0);\nlet getMatchingRules;\nmodule.link(\"../../api/lenderRules/helpers\", {\n  getMatchingRules(v) {\n    getMatchingRules = v;\n  }\n\n}, 1);\nlet LENDER_RULES_VARIABLES, OWN_FUNDS_TYPES;\nmodule.link(\"../../api/constants\", {\n  LENDER_RULES_VARIABLES(v) {\n    LENDER_RULES_VARIABLES = v;\n  },\n\n  OWN_FUNDS_TYPES(v) {\n    OWN_FUNDS_TYPES = v;\n  }\n\n}, 2);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nconst withLenderRulesInitializator = function () {\n  let SuperClass = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : class {};\n\n  var _temp;\n\n  return _temp = class extends SuperClass {\n    constructor(settings) {\n      super(settings);\n\n      _defineProperty(this, \"setOrganisationName\", lenderRules => {\n        this.organisationName = lenderRules.length ? lenderRules[0].organisation && lenderRules[0].organisation.name : null;\n      });\n\n      this.initialize(settings);\n    }\n\n    initialize(_ref) {\n      let {\n        loan,\n        structureId,\n        lenderRules = []\n      } = _ref;\n\n      if (!(loan && lenderRules && lenderRules.length > 0)) {\n        return;\n      }\n\n      const sortedlenderRules = lenderRules.sort((_ref2, _ref3) => {\n        let {\n          order: orderA\n        } = _ref2;\n        let {\n          order: orderB\n        } = _ref3;\n        return orderA - orderB;\n      }); // Store the rules for retrieval later\n\n      this.lenderRules = sortedlenderRules;\n      this.setOrganisationName(sortedlenderRules);\n      this.ruleOrigin = {};\n      this.matchedRules = []; // Global rules\n\n      const globalRules = this.getGlobalLenderRules({\n        loan,\n        structureId,\n        lenderRules: sortedlenderRules\n      });\n      this.applyRules(globalRules); // Primary rules depend only on raw data\n\n      const primaryRules = this.getPrimaryLenderRules({\n        loan,\n        structureId,\n        lenderRules: sortedlenderRules\n      });\n      this.applyRules(primaryRules); // Secondary rules depend on what is calculated with the rules applied from the primary rules\n\n      const secondaryRules = this.getSecondaryLenderRules({\n        loan,\n        structureId,\n        lenderRules: sortedlenderRules\n      });\n      this.applyRules(secondaryRules);\n      this.cleanUpUnusedRules();\n    }\n\n    storeRuleOrigin(rules, lenderRulesId) {\n      Object.keys(rules).forEach(ruleName => {\n        this.ruleOrigin[ruleName] = lenderRulesId;\n      });\n    }\n\n    getOriginOfRule(ruleName) {\n      const lenderRulesId = this.ruleOrigin[ruleName];\n      const lenderRules = this.lenderRules.find((_ref4) => {\n        let {\n          _id\n        } = _ref4;\n        return _id === lenderRulesId;\n      });\n      return lenderRules;\n    }\n\n    getLenderRulesVariables(_ref5) {\n      let {\n        loan,\n        structureId\n      } = _ref5;\n      return {\n        [LENDER_RULES_VARIABLES.RESIDENCE_TYPE]: loan.residenceType,\n        [LENDER_RULES_VARIABLES.CANTON]: this.selectPropertyKey({\n          loan,\n          structureId,\n          key: LENDER_RULES_VARIABLES.CANTON\n        }),\n        [LENDER_RULES_VARIABLES.WANTED_LOAN]: this.selectStructureKey({\n          loan,\n          structureId,\n          key: LENDER_RULES_VARIABLES.WANTED_LOAN\n        }),\n        [LENDER_RULES_VARIABLES.PROPERTY_VALUE]: this.selectPropertyValue({\n          loan,\n          structureId\n        }),\n        [LENDER_RULES_VARIABLES.INSIDE_AREA]: this.selectPropertyKey({\n          loan,\n          structureId,\n          key: LENDER_RULES_VARIABLES.INSIDE_AREA\n        }),\n        [LENDER_RULES_VARIABLES.BANK_FORTUNE]: this.getFortune({\n          loan\n        }),\n        [LENDER_RULES_VARIABLES.BORROW_RATIO]: this.getBorrowRatio({\n          loan,\n          structureId\n        }),\n        [LENDER_RULES_VARIABLES.INCOME]: this.getTotalIncome({\n          loan\n        }),\n        [LENDER_RULES_VARIABLES.PROPERTY_TYPE]: this.selectPropertyKey({\n          loan,\n          structureId,\n          key: LENDER_RULES_VARIABLES.PROPERTY_TYPE\n        }),\n        [LENDER_RULES_VARIABLES.ZIP_CODE]: this.selectPropertyKey({\n          loan,\n          structureId,\n          key: LENDER_RULES_VARIABLES.ZIP_CODE\n        }),\n        [LENDER_RULES_VARIABLES.REMAINING_BANK_FORTUNE]: this.getRemainingFundsOfType({\n          loan,\n          structureId,\n          type: OWN_FUNDS_TYPES.BANK_FORTUNE\n        })\n      };\n    }\n\n    getGlobalLenderRules(_ref6) {\n      let {\n        lenderRules\n      } = _ref6;\n      const globalRules = lenderRules.filter((_ref7) => {\n        let {\n          filter\n        } = _ref7;\n        return filter.and && filter.and.length === 1 && filter.and[0] === true;\n      });\n      const matchingRules = getMatchingRules(globalRules, {}, this.storeRuleOrigin);\n      return matchingRules;\n    }\n\n    getPrimaryLenderRules(_ref8) {\n      let {\n        loan,\n        structureId,\n        lenderRules\n      } = _ref8;\n      const primaryRules = lenderRules.filter(rules => !this.lenderRulesIsSecondary(rules));\n      const matchingRules = getMatchingRules(primaryRules, this.getLenderRulesVariables({\n        loan,\n        structureId\n      }), this.storeRuleOrigin);\n      return matchingRules;\n    } // Gets the secondary lender rules that require other lender rules to\n    // already have been applied\n\n\n    getSecondaryLenderRules(_ref9) {\n      let {\n        loan,\n        structureId,\n        lenderRules\n      } = _ref9;\n      const secondaryRules = lenderRules.filter(this.lenderRulesIsSecondary);\n      const matchingRules = getMatchingRules(secondaryRules, this.getLenderRulesVariables({\n        loan,\n        structureId\n      }), this.storeRuleOrigin);\n      return matchingRules;\n    }\n\n    lenderRulesIsSecondary(_ref10) {\n      let {\n        filter\n      } = _ref10;\n      return filter.and.map(parseFilter).some((_ref11) => {\n        let {\n          variable\n        } = _ref11;\n        return [LENDER_RULES_VARIABLES.BORROW_RATIO, LENDER_RULES_VARIABLES.INCOME].includes(variable);\n      });\n    }\n\n    applyRules(rules) {\n      if (rules.names) {\n        this.matchedRules = [...this.matchedRules, ...rules.names.filter(x => x)];\n      }\n\n      const rulesToApply = ['adminComments', 'allowPledge', 'amortizationGoal', 'amortizationYears', 'bonusAlgorithm', 'bonusConsideration', 'bonusHistoryToConsider', 'companyIncomeConsideration', 'companyIncomeHistoryToConsider', 'dividendsConsideration', 'dividendsHistoryToConsider', 'expensesSubtractFromIncome', 'fortuneReturnsRatio', 'incomeConsiderationType', 'investmentIncomeConsideration', 'maxBorrowRatio', 'maxIncomeRatio', 'pdfComments', 'pensionIncomeConsideration', 'realEstateIncomeAlgorithm', 'realEstateIncomeConsideration', 'realEstateIncomeConsiderationType', 'theoreticalInterestRate', 'theoreticalInterestRate2ndRank', 'theoreticalMaintenanceRate'];\n      rulesToApply.forEach(rule => {\n        if (rules[rule] !== undefined && rules[rule] !== null) {\n          this[rule] = rules[rule];\n        }\n      });\n    }\n\n    cleanUpUnusedRules() {\n      this.maxIncomeRatioTight = 0;\n      this.maxBorrowRatioWithPledge = 0;\n    }\n\n  }, _temp;\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"LoanCalculator.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/LoanCalculator.js                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  withLoanCalculator: () => withLoanCalculator\n});\nlet OWN_FUNDS_TYPES;\nmodule.link(\"../../api/constants\", {\n  OWN_FUNDS_TYPES(v) {\n    OWN_FUNDS_TYPES = v;\n  }\n\n}, 0);\nlet getLoanDocuments;\nmodule.link(\"../../api/files/documents\", {\n  getLoanDocuments(v) {\n    getLoanDocuments = v;\n  }\n\n}, 1);\nlet OWN_FUNDS_USAGE_TYPES;\nmodule.link(\"../../api/constants\", {\n  OWN_FUNDS_USAGE_TYPES(v) {\n    OWN_FUNDS_USAGE_TYPES = v;\n  }\n\n}, 2);\nlet filesPercent, getMissingDocumentIds;\nmodule.link(\"../../api/files/fileHelpers\", {\n  filesPercent(v) {\n    filesPercent = v;\n  },\n\n  getMissingDocumentIds(v) {\n    getMissingDocumentIds = v;\n  }\n\n}, 3);\nlet getRefinancingFormArray;\nmodule.link(\"../../arrays/RefinancingFormArray\", {\n  default(v) {\n    getRefinancingFormArray = v;\n  }\n\n}, 4);\nlet NotaryFeesCalculator;\nmodule.link(\"../notaryFees/NotaryFeesCalculator\", {\n  default(v) {\n    NotaryFeesCalculator = v;\n  }\n\n}, 5);\nlet getCountedArray;\nmodule.link(\"../formArrayHelpers\", {\n  getCountedArray(v) {\n    getCountedArray = v;\n  }\n\n}, 6);\nlet getPercent;\nmodule.link(\"../general\", {\n  getPercent(v) {\n    getPercent = v;\n  }\n\n}, 7);\n\nconst withLoanCalculator = function () {\n  let SuperClass = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : class {};\n  return class extends SuperClass {\n    getProjectValue(_ref) {\n      let {\n        loan,\n        structureId\n      } = _ref;\n      const propAndWork = this.getPropAndWork({\n        loan,\n        structureId\n      });\n\n      if (!propAndWork) {\n        return 0;\n      }\n\n      const value = propAndWork + this.getFees({\n        loan,\n        structureId\n      }).total;\n      return value;\n    }\n\n    getTotalUsed(_ref2) {\n      let {\n        loan,\n        structureId\n      } = _ref2;\n      const ownFunds = this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'ownFunds'\n      });\n      return ownFunds.reduce((sum, _ref3) => {\n        let {\n          value\n        } = _ref3;\n        return sum + value;\n      }, 0);\n    }\n\n    getTotalPledged(_ref4) {\n      let {\n        loan,\n        structureId\n      } = _ref4;\n      const ownFunds = this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'ownFunds'\n      });\n      return ownFunds.filter((_ref5) => {\n        let {\n          usageType\n        } = _ref5;\n        return usageType === OWN_FUNDS_USAGE_TYPES.PLEDGE;\n      }).reduce((sum, _ref6) => {\n        let {\n          value\n        } = _ref6;\n        return sum + value;\n      }, 0);\n    }\n\n    getFees(_ref7) {\n      let {\n        loan,\n        structureId\n      } = _ref7;\n      const notaryFees = this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'notaryFees'\n      }); // Custom notary fees are provided\n\n      if (notaryFees === 0 || notaryFees) {\n        return {\n          total: notaryFees\n        };\n      }\n\n      const calculator = this.getFeesCalculator({\n        loan,\n        structureId\n      });\n      const calculatedNotaryFees = calculator.getNotaryFeesForLoan({\n        loan,\n        structureId\n      });\n      return calculatedNotaryFees;\n    }\n\n    getFeesCalculator(_ref8) {\n      let {\n        loan,\n        structureId\n      } = _ref8;\n      const canton = this.selectPropertyKey({\n        loan,\n        structureId,\n        key: 'canton'\n      });\n      return new NotaryFeesCalculator({\n        canton\n      });\n    }\n\n    getInterests(_ref9) {\n      let {\n        loan,\n        interestRates,\n        structureId\n      } = _ref9;\n      let finalInterestRates = interestRates || loan.currentInterestRates;\n      const offer = this.selectStructureKey({\n        loan,\n        key: 'offer',\n        structureId\n      });\n      const loanTranches = this.selectStructureKey({\n        loan,\n        key: 'loanTranches',\n        structureId\n      });\n      const loanValue = this.selectLoanValue({\n        loan,\n        structureId\n      });\n\n      if (offer) {\n        finalInterestRates = offer;\n      }\n\n      const interests = this.getInterestsWithTranches({\n        tranches: loanTranches,\n        interestRates: finalInterestRates\n      });\n      return interests * loanValue / 12;\n    }\n\n    getTheoreticalInterests(_ref10) {\n      let {\n        loan,\n        structureId\n      } = _ref10;\n      const loanValue = this.selectLoanValue({\n        loan,\n        structureId\n      });\n      const propertyValue = this.selectPropertyValue({\n        loan,\n        structureId\n      });\n      const propertyWork = this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'propertyWork'\n      }) || 0;\n      const firstRank = Math.min(loanValue, this.amortizationGoal * (propertyValue + propertyWork));\n      const secondRank = Math.max(0, loanValue - firstRank);\n      const firstRankInterests = firstRank * this.theoreticalInterestRate;\n      const secondRankInterests = secondRank * (this.theoreticalInterestRate2ndRank || this.theoreticalInterestRate);\n      return (firstRankInterests + secondRankInterests) / 12;\n    }\n\n    getTheoreticalMaintenance(_ref11) {\n      let {\n        loan,\n        structureId\n      } = _ref11;\n      return this.getPropAndWork({\n        loan,\n        structureId\n      }) * this.theoreticalMaintenanceRate / 12;\n    }\n\n    getAmortization(_ref12) {\n      let {\n        loan,\n        structureId,\n        offerOverride\n      } = _ref12;\n      const offer = this.selectOffer({\n        loan,\n        structureId\n      });\n      const loanValue = this.selectLoanValue({\n        loan,\n        structureId\n      });\n      const offerToUse = offerOverride || offer;\n\n      if (offerToUse) {\n        // Temporarily change amortizationGoal\n        const oldAmortizationGoal = this.amortizationGoal;\n        this.amortizationGoal = offerToUse.amortizationGoal;\n        const amortizationRate = this.getAmortizationRate({\n          loan,\n          amortizationYears: offerToUse.amortizationYears,\n          structureId\n        });\n        const amortization = amortizationRate * loanValue / 12;\n        this.amortizationGoal = oldAmortizationGoal;\n        return amortization;\n      }\n\n      const amortizationRate = this.getAmortizationRate({\n        loan,\n        structureId\n      });\n      return amortizationRate * loanValue / 12;\n    }\n\n    getTheoreticalAmortization(_ref13) {\n      let {\n        loan,\n        structureId\n      } = _ref13;\n      const loanValue = this.selectLoanValue({\n        loan,\n        structureId\n      });\n      return this.getAmortizationRate({\n        loan,\n        structureId\n      }) * loanValue / 12;\n    }\n\n    getAmortizationRate(_ref14) {\n      let {\n        loan,\n        amortizationYears,\n        structureId\n      } = _ref14;\n      const borrowRatio = this.getBorrowRatio({\n        loan,\n        structureId\n      });\n      return this.getAmortizationRateBase({\n        borrowRatio,\n        amortizationYears,\n        // Prevent caching of this function if amortizationGoal has changed\n        cacheFix: this.amortizationGoal\n      });\n    }\n\n    getMonthly(_ref15) {\n      let {\n        loan,\n        interestRates,\n        structureId\n      } = _ref15;\n      return this.getInterests({\n        loan,\n        interestRates,\n        structureId\n      }) + this.getAmortization({\n        loan,\n        structureId\n      });\n    }\n\n    getTheoreticalPropertyCost(_ref16) {\n      let {\n        loan,\n        structureId,\n        asObject = false\n      } = _ref16;\n      const interests = this.getTheoreticalInterests({\n        loan,\n        structureId\n      });\n      const amortization = this.getTheoreticalAmortization({\n        loan,\n        structureId\n      });\n      const maintenance = this.getTheoreticalMaintenance({\n        loan,\n        structureId\n      });\n      return asObject ? {\n        interests,\n        amortization,\n        maintenance,\n        total: interests + amortization + maintenance\n      } : interests + amortization + maintenance;\n    }\n\n    getTheoreticalMonthly(_ref17) {\n      let {\n        loan,\n        structureId\n      } = _ref17;\n      const propertyCost = this.getTheoreticalPropertyCost({\n        loan,\n        structureId\n      });\n      const expensesToAddToTheoreticalCost = this.getFormattedExpenses({\n        loan,\n        structureId\n      }).add / 12;\n      return propertyCost + expensesToAddToTheoreticalCost;\n    }\n\n    getIncomeRatio(_ref18) {\n      let {\n        loan,\n        structureId\n      } = _ref18;\n      const cost = this.getTheoreticalMonthly({\n        loan,\n        structureId\n      });\n      const income = this.getTotalIncome({\n        borrowers: loan.borrowers\n      });\n      const ratio = cost / (income / 12);\n\n      if (ratio > 1 || ratio < 0) {\n        return 1;\n      }\n\n      return ratio;\n    }\n\n    getBorrowRatio(_ref19) {\n      let {\n        loan,\n        structureId\n      } = _ref19;\n      const wantedLoan = this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'wantedLoan'\n      });\n      const propAndWork = this.getPropAndWork({\n        loan,\n        structureId\n      });\n      return wantedLoan / propAndWork;\n    }\n\n    getMaxBorrowRatio() {\n      return this.maxBorrowRatio;\n    }\n\n    loanHasMinimalInformation(_ref20) {\n      let {\n        loan\n      } = _ref20;\n      const structure = this.selectStructure({\n        loan\n      });\n      return !!(structure.ownFunds && structure.ownFunds.length > 0 && this.selectPropertyValue({\n        loan\n      }) && this.selectLoanValue({\n        loan\n      }));\n    }\n\n    getLoanFilesProgress(_ref21) {\n      let {\n        loan\n      } = _ref21;\n      return filesPercent({\n        fileArray: getLoanDocuments({\n          loan\n        }),\n        doc: loan\n      });\n    }\n\n    getMissingLoanDocuments(_ref22) {\n      let {\n        loan\n      } = _ref22;\n      return getMissingDocumentIds({\n        fileArray: getLoanDocuments({\n          loan\n        }),\n        doc: loan\n      });\n    }\n\n    getTotalFinancing(_ref23) {\n      let {\n        loan,\n        structureId\n      } = _ref23;\n      return this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'wantedLoan'\n      }) + this.getNonPledgedOwnFunds({\n        loan,\n        structureId\n      });\n    }\n\n    getNonPledgedOwnFunds(_ref24) {\n      let {\n        loan,\n        structureId\n      } = _ref24;\n      const ownFunds = this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'ownFunds'\n      }) || [];\n      return ownFunds.filter((_ref25) => {\n        let {\n          usageType\n        } = _ref25;\n        return usageType !== OWN_FUNDS_USAGE_TYPES.PLEDGE;\n      }).reduce((sum, _ref26) => {\n        let {\n          value\n        } = _ref26;\n        return sum + value;\n      }, 0);\n    }\n\n    getPledgedOwnFunds(_ref27) {\n      let {\n        loan,\n        structureId\n      } = _ref27;\n      const ownFunds = this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'ownFunds'\n      }) || [];\n      return ownFunds.filter((_ref28) => {\n        let {\n          usageType\n        } = _ref28;\n        return usageType === OWN_FUNDS_USAGE_TYPES.PLEDGE;\n      }).reduce((sum, _ref29) => {\n        let {\n          value\n        } = _ref29;\n        return sum + value;\n      }, 0);\n    }\n\n    getUsedFundsOfType(_ref30) {\n      let {\n        loan,\n        type,\n        usageType,\n        structureId\n      } = _ref30;\n      const ownFunds = this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'ownFunds'\n      }) || [];\n      return ownFunds.filter((_ref31) => {\n        let {\n          type: ownFundType\n        } = _ref31;\n        return type ? ownFundType === type : true;\n      }).filter((_ref32) => {\n        let {\n          usageType: ownFundUsageType\n        } = _ref32;\n        return usageType ? ownFundUsageType === usageType : true;\n      }).reduce((sum, _ref33) => {\n        let {\n          value\n        } = _ref33;\n        return sum + value;\n      }, 0);\n    }\n\n    getRemainingFundsOfType(_ref34) {\n      let {\n        loan,\n        structureId,\n        type\n      } = _ref34;\n      const ownFunds = this.getFunds({\n        loan,\n        type,\n        structureId\n      });\n      return ownFunds - this.getUsedFundsOfType({\n        loan,\n        type,\n        structureId,\n        usageType: type !== OWN_FUNDS_TYPES.BANK_FORTUNE ? OWN_FUNDS_USAGE_TYPES.WITHDRAW : undefined\n      });\n    }\n\n    getTotalRemainingFunds(_ref35) {\n      let {\n        loan,\n        structureId\n      } = _ref35;\n      // Don't count extra third party fortune, as it is not a real \"loan\" from them\n      return Object.values(OWN_FUNDS_TYPES).filter(type => type !== OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE).reduce((sum, type) => sum + this.getRemainingFundsOfType({\n        loan,\n        structureId,\n        type\n      }), 0);\n    }\n\n    refinancingPercent(_ref36) {\n      let {\n        loan\n      } = _ref36;\n      const array = getCountedArray(getRefinancingFormArray({\n        loan\n      }), loan);\n      return getPercent(array);\n    }\n\n    getMortgageNoteIncrease(_ref37) {\n      let {\n        loan,\n        structureId\n      } = _ref37;\n      const {\n        borrowers = []\n      } = loan;\n      const {\n        mortgageNoteIds = []\n      } = this.selectStructure({\n        loan,\n        structureId\n      });\n      const {\n        mortgageNotes: propertyMortgageNotes = []\n      } = this.selectProperty({\n        loan,\n        structureId\n      });\n      const borrowerMortgageNotes = this.getMortgageNotes({\n        borrowers\n      });\n      const structureMortgageNotes = mortgageNoteIds.map(id => borrowerMortgageNotes.find((_ref38) => {\n        let {\n          _id\n        } = _ref38;\n        return _id === id;\n      }));\n      const allMortgageNotes = [...structureMortgageNotes, ...propertyMortgageNotes];\n      const mortgageNoteValue = allMortgageNotes.reduce((total, _ref39) => {\n        let {\n          value\n        } = _ref39;\n        return total + (value || 0);\n      }, 0);\n      const loanValue = this.selectLoanValue({\n        loan,\n        structureId\n      });\n      return Math.max(0, loanValue - mortgageNoteValue);\n    }\n\n    getCashUsed(_ref40) {\n      let {\n        loan,\n        structureId\n      } = _ref40;\n      const {\n        ownFunds\n      } = this.selectStructure({\n        loan,\n        structureId\n      });\n      return ownFunds.filter((_ref41) => {\n        let {\n          type,\n          usageType\n        } = _ref41;\n        return type !== OWN_FUNDS_TYPES.INSURANCE_2 && usageType !== OWN_FUNDS_USAGE_TYPES.PLEDGE;\n      }).reduce((sum, _ref42) => {\n        let {\n          value\n        } = _ref42;\n        return sum + value;\n      }, 0);\n    }\n\n    getCashRatio(_ref43) {\n      let {\n        loan,\n        structureId\n      } = _ref43;\n      const propAndWork = this.getPropAndWork({\n        loan,\n        structureId\n      });\n      const fees = this.getFees({\n        loan,\n        structureId\n      }).total;\n      const cashUsed = this.getCashUsed({\n        loan,\n        structureId\n      });\n      const cashRatio = (cashUsed - fees) / propAndWork;\n      return cashRatio;\n    }\n\n    hasEnoughCash(_ref44) {\n      let {\n        loan,\n        structureId\n      } = _ref44;\n      return this.getCashRatio({\n        loan,\n        structureId\n      }) >= this.minCash;\n    }\n\n    structureIsValid(_ref45) {\n      let {\n        loan,\n        structureId\n      } = _ref45;\n      const incomeRatio = this.getIncomeRatio({\n        loan,\n        structureId\n      });\n      const borrowRatio = this.getBorrowRatio({\n        loan,\n        structureId\n      });\n\n      if (incomeRatio > this.maxIncomeRatio || borrowRatio > this.maxBorrowRatio) {\n        return false;\n      }\n\n      if (!this.allowPledge && this.getPledgedOwnFunds({\n        loan,\n        structureId\n      }) > 0) {\n        return false;\n      }\n\n      return true;\n    }\n\n    getEstimatedRevenues(_ref46) {\n      let {\n        loan,\n        structureId\n      } = _ref46;\n      const propertyValue = this.selectPropertyValue({\n        loan,\n        structureId\n      });\n      return propertyValue * this.estimatedCommission;\n    }\n\n    getEstimatedReferralRevenues(_ref47) {\n      let {\n        loan,\n        structureId\n      } = _ref47;\n      return this.getEstimatedRevenues({\n        loan,\n        structureId\n      }) * this.referralCommission;\n    }\n\n    getRequiredOwnFunds(_ref48) {\n      let {\n        loan,\n        structureId\n      } = _ref48;\n      const projectValue = this.getProjectValue({\n        loan,\n        structureId\n      });\n      const loanValue = this.selectLoanValue({\n        loan,\n        structureId\n      });\n      return projectValue - loanValue;\n    }\n\n    getMissingOwnFunds(_ref49) {\n      let {\n        loan,\n        structureId\n      } = _ref49;\n      const fundsRequired = this.getRequiredOwnFunds({\n        loan,\n        structureId\n      });\n      const totalCurrentFunds = this.getNonPledgedOwnFunds({\n        loan,\n        structureId\n      });\n      return fundsRequired - totalCurrentFunds;\n    }\n\n    isMissingOwnFunds(_ref50) {\n      let {\n        loan,\n        structureId\n      } = _ref50;\n      const missingOwnFunds = this.getMissingOwnFunds({\n        loan,\n        structureId\n      });\n      return missingOwnFunds >= this.ownFundsRoundingAmount;\n    }\n\n    hasTooMuchOwnFunds(_ref51) {\n      let {\n        loan,\n        structureId\n      } = _ref51;\n      const missingOwnFunds = this.getMissingOwnFunds({\n        loan,\n        structureId\n      });\n      return missingOwnFunds <= -this.ownFundsRoundingAmount;\n    }\n\n    hasCompleteStructure(_ref52) {\n      let {\n        loan\n      } = _ref52;\n      return loan.structures.some((_ref53) => {\n        let {\n          id\n        } = _ref53;\n        const fundsRequired = this.getRequiredOwnFunds({\n          loan,\n          structureId: id\n        });\n\n        if (fundsRequired === 0) {\n          return false;\n        }\n\n        if (!this.isMissingOwnFunds({\n          loan,\n          structureId: id\n        }) && !this.hasTooMuchOwnFunds({\n          loan,\n          structureId: id\n        })) {\n          return true;\n        }\n\n        return false;\n      });\n    }\n\n  };\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"OfferCalculator.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/OfferCalculator.js                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  withOfferCalculator: () => withOfferCalculator\n});\n\nconst withOfferCalculator = function () {\n  let SuperClass = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : class {};\n  return class extends SuperClass {};\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"PromotionCalculator.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/PromotionCalculator.js                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  withPromotionCalculator: () => withPromotionCalculator\n});\nlet pick;\nmodule.link(\"lodash/pick\", {\n  default(v) {\n    pick = v;\n  }\n\n}, 0);\nlet PROMOTION_TYPES, PURCHASE_TYPE;\nmodule.link(\"../../api/constants\", {\n  PROMOTION_TYPES(v) {\n    PROMOTION_TYPES = v;\n  },\n\n  PURCHASE_TYPE(v) {\n    PURCHASE_TYPE = v;\n  }\n\n}, 1);\n\nconst withPromotionCalculator = function () {\n  let SuperClass = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : class {};\n  return class extends SuperClass {\n    canAffordPromotionLot(_ref) {\n      let {\n        loan,\n        promotionLot\n      } = _ref;\n      const {\n        value,\n        notaryFees\n      } = promotionLot;\n      return true;\n    }\n\n    getSolvency(_ref2) {\n      let {\n        loan,\n        notaryFees = 0\n      } = _ref2;\n      const income = this.getTotalIncome({\n        loan\n      });\n      const bankFortune = this.getFortune({\n        loan\n      });\n      const cashFortune = this.getCashFortune({\n        loan\n      });\n      const insurance2 = this.getInsurance2({\n        loan\n      });\n      const results = {\n        withBankFortune: Math.round((bankFortune - notaryFees) / (1 - this.maxBorrowRatio)),\n        withInsurance2: this.getMaxPropertyValueWithInsurance2({\n          cash: bankFortune,\n          insurance2,\n          notaryFees\n        }),\n        withInsurance3: Math.round((cashFortune - notaryFees) / (1 - this.maxBorrowRatio)),\n        withInsurance2And3: this.getMaxPropertyValueWithInsurance2({\n          cash: cashFortune,\n          insurance2,\n          notaryFees\n        })\n      };\n      return Object.keys(results).reduce((obj, key) => (0, _objectSpread2.default)({}, obj, {\n        [key]: Math.round(results[key])\n      }), {});\n    }\n\n    getMaxPropertyValueWithInsurance2(_ref3) {\n      let {\n        cash,\n        insurance2,\n        notaryFees\n      } = _ref3;\n      const availableFortune = cash - notaryFees;\n      const maxPropertyValue = availableFortune / this.minCash;\n      const canAffordProperty = (maxPropertyValue - availableFortune - insurance2) / maxPropertyValue <= this.maxBorrowRatio;\n\n      if (canAffordProperty) {\n        return Math.round(maxPropertyValue);\n      }\n\n      return Math.round((availableFortune + insurance2) / (1 - this.maxBorrowRatio));\n    }\n\n    getIncomeLimitedProperty(_ref4) {\n      let {\n        borrowers,\n        income,\n        fortune,\n        propertyValue,\n        notaryFees\n      } = _ref4;\n      return this.getIncomeLimitedPropertyValue({\n        nF: notaryFees / propertyValue,\n        r: this.getAmortizationDuration({\n          borrowers\n        }),\n        i: this.theoreticalInterestRate,\n        mR: this.maxIncomeRatio,\n        m: this.theoreticalMaintenanceRate\n      })({\n        income,\n        fortune\n      });\n    }\n\n    formatPromotionOptionIntoProperty(promotionOption) {\n      if (!promotionOption) {\n        return;\n      }\n\n      const property = promotionOption.promotionLots[0].properties[0];\n      return (0, _objectSpread2.default)({}, pick(promotionOption.promotion, ['address1', 'address2', 'zipCode', 'city']), promotionOption, property, {\n        totalValue: promotionOption.value\n      });\n    }\n\n    shouldUseConstructionNotaryFees(_ref5) {\n      let {\n        loan,\n        structureId\n      } = _ref5;\n      const {\n        promotions\n      } = loan;\n\n      if (loan.purchaseType === PURCHASE_TYPE.CONSTRUCTION) {\n        return true;\n      }\n\n      if (!this.isPromotionProperty({\n        loan,\n        structureId\n      })) {\n        return false;\n      }\n\n      if (!promotions || promotions.length && promotions.length === 0) {\n        return false;\n      }\n\n      const promotion = promotions[0];\n      return promotion.type === PROMOTION_TYPES.SHARE;\n    }\n\n  };\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"PropertyCalculator.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/PropertyCalculator.js                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  withPropertyCalculator: () => withPropertyCalculator\n});\nlet getPropertyArray, getPropertyLoanArray;\nmodule.link(\"../../arrays/PropertyFormArray\", {\n  getPropertyArray(v) {\n    getPropertyArray = v;\n  },\n\n  getPropertyLoanArray(v) {\n    getPropertyLoanArray = v;\n  }\n\n}, 0);\nlet getPercent;\nmodule.link(\"../general\", {\n  getPercent(v) {\n    getPercent = v;\n  }\n\n}, 1);\nlet getCountedArray, getMissingFieldIds;\nmodule.link(\"../formArrayHelpers\", {\n  getCountedArray(v) {\n    getCountedArray = v;\n  },\n\n  getMissingFieldIds(v) {\n    getMissingFieldIds = v;\n  }\n\n}, 2);\nlet filesPercent, getMissingDocumentIds;\nmodule.link(\"../../api/files/fileHelpers\", {\n  filesPercent(v) {\n    filesPercent = v;\n  },\n\n  getMissingDocumentIds(v) {\n    getMissingDocumentIds = v;\n  }\n\n}, 3);\nlet getPropertyDocuments;\nmodule.link(\"../../api/files/documents\", {\n  getPropertyDocuments(v) {\n    getPropertyDocuments = v;\n  }\n\n}, 4);\nlet MiddlewareManager;\nmodule.link(\"../MiddlewareManager\", {\n  default(v) {\n    MiddlewareManager = v;\n  }\n\n}, 5);\n\nconst withPropertyCalculator = function () {\n  let SuperClass = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : class {};\n  return class extends SuperClass {\n    constructor(config) {\n      super(config);\n      this.initPropertyCalculator(config);\n    }\n\n    initPropertyCalculator(config) {\n      if (config && config.propertyMiddleware) {\n        const middlewareManager = new MiddlewareManager(this);\n        middlewareManager.applyToAllMethods([config.propertyMiddleware]);\n      }\n    }\n\n    propertyPercent(_ref) {\n      let {\n        loan,\n        structureId,\n        property\n      } = _ref;\n      const {\n        borrowers\n      } = loan;\n      const structure = this.selectStructure({\n        loan,\n        structureId\n      });\n      const propertyToCalculateWith = property || structure.property;\n\n      if (!propertyToCalculateWith) {\n        return 0;\n      }\n\n      const formArray1 = getPropertyArray({\n        loan,\n        borrowers,\n        property: propertyToCalculateWith\n      });\n      const formArray2 = getPropertyLoanArray({\n        loan,\n        borrowers,\n        property: propertyToCalculateWith\n      });\n      return getPercent([...getCountedArray(formArray1, propertyToCalculateWith), ...getCountedArray(formArray2, loan)]);\n    }\n\n    getPropAndWork(_ref2) {\n      let {\n        loan,\n        structureId\n      } = _ref2;\n      const propertyValue = this.selectPropertyValue({\n        loan,\n        structureId\n      });\n      const propertyWork = this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'propertyWork'\n      }) || 0;\n      return super.getPropAndWork({\n        propertyValue,\n        propertyWork\n      });\n    }\n\n    getPropertyWork(_ref3) {\n      let {\n        loan,\n        structureId\n      } = _ref3;\n      return this.selectPropertyWork({\n        loan,\n        structureId\n      });\n    }\n\n    getPropertyFilesProgress(_ref4) {\n      let {\n        loan,\n        structureId,\n        property\n      } = _ref4;\n      const structure = this.selectStructure({\n        loan,\n        structureId\n      });\n      const propertyToCalculateWith = property || structure.property;\n\n      if (!propertyToCalculateWith) {\n        return 0;\n      }\n\n      return filesPercent({\n        doc: propertyToCalculateWith,\n        fileArray: getPropertyDocuments({\n          loan,\n          id: propertyToCalculateWith._id\n        })\n      });\n    }\n\n    getPropertyCompletion(_ref5) {\n      let {\n        loan,\n        structureId,\n        property\n      } = _ref5;\n      const {\n        borrowers\n      } = loan;\n      const selectedProperty = this.selectProperty({\n        loan,\n        structureId\n      });\n      const propertyToCalculateWith = property || selectedProperty;\n      const formsProgress = this.propertyPercent({\n        loan,\n        borrowers,\n        property: propertyToCalculateWith\n      });\n      const filesProgress = this.getPropertyFilesProgress({\n        loan,\n        property: propertyToCalculateWith\n      });\n      return (formsProgress + filesProgress) / 2;\n    }\n\n    getMissingPropertyFields(_ref6) {\n      let {\n        loan,\n        structureId,\n        property\n      } = _ref6;\n      const {\n        borrowers\n      } = loan;\n      const selectedProperty = this.selectProperty({\n        loan,\n        structureId\n      });\n      const propertyToCalculateWith = property || selectedProperty;\n      const formArray1 = getPropertyArray({\n        loan,\n        borrowers,\n        property: propertyToCalculateWith\n      });\n      const formArray2 = getPropertyLoanArray({\n        loan,\n        borrowers,\n        property: propertyToCalculateWith\n      });\n      return [...getMissingFieldIds(formArray1, propertyToCalculateWith), ...getMissingFieldIds(formArray2, loan)];\n    }\n\n    getMissingPropertyDocuments(_ref7) {\n      let {\n        loan,\n        structureId,\n        property\n      } = _ref7;\n      const selectedProperty = this.selectProperty({\n        loan,\n        structureId\n      });\n      const propertyToCalculateWith = property || selectedProperty;\n      return getMissingDocumentIds({\n        doc: propertyToCalculateWith,\n        fileArray: getPropertyDocuments({\n          loan,\n          id: propertyToCalculateWith._id\n        })\n      });\n    }\n\n    hasDetailedPropertyValue(_ref8) {\n      let {\n        loan,\n        structureId\n      } = _ref8;\n      const propertyExactValue = this.selectPropertyKey({\n        key: 'value',\n        loan,\n        structureId\n      });\n      const landValue = this.selectPropertyKey({\n        key: 'landValue',\n        loan,\n        structureId\n      });\n      const constructionValue = this.selectPropertyKey({\n        key: 'constructionValue',\n        loan,\n        structureId\n      });\n      return !propertyExactValue || !!(landValue && constructionValue);\n    }\n\n    isPromotionProperty(_ref9) {\n      let {\n        loan,\n        structureId\n      } = _ref9;\n      const structure = this.selectStructure({\n        loan,\n        structureId\n      });\n      return !!structure.promotionOptionId;\n    }\n\n  };\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Selector.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/Selector.js                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  withSelector: () => withSelector\n});\nlet createSelector;\nmodule.link(\"reselect\", {\n  createSelector(v) {\n    createSelector = v;\n  }\n\n}, 0);\nlet EMPTY_STRUCTURE;\nmodule.link(\"../../api/loans/loanConstants\", {\n  EMPTY_STRUCTURE(v) {\n    EMPTY_STRUCTURE = v;\n  }\n\n}, 1);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nconst withSelector = function () {\n  let SuperClass = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : class {};\n\n  var _temp;\n\n  return _temp = class extends SuperClass {\n    constructor() {\n      super(...arguments);\n\n      _defineProperty(this, \"getCashUsed\", this.makeSelectStructureKey('fortuneUsed'));\n    }\n\n    selectProperty() {\n      let {\n        loan,\n        structureId\n      } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      let propertyId = loan.structure && loan.structure.propertyId;\n      let promotionOptionId = loan.structure && loan.structure.promotionOptionId;\n      const structure = this.selectStructure({\n        loan,\n        structureId\n      });\n\n      if (!structureId) {\n        if (structure.property) {\n          return structure.property;\n        }\n\n        if (structure.propertyId) {\n          return loan.properties.find((_ref) => {\n            let {\n              _id\n            } = _ref;\n            return _id === structure.propertyId;\n          });\n        }\n\n        if (structure.promotionOption) {\n          return this.formatPromotionOptionIntoProperty(structure.promotionOption);\n        }\n\n        if (structure.promotionOptionId) {\n          const promotionOption = loan.promotionOptions.find((_ref2) => {\n            let {\n              _id\n            } = _ref2;\n            return _id === structure.promotionOptionId;\n          });\n          return this.formatPromotionOptionIntoProperty(promotionOption);\n        }\n\n        return {};\n      }\n\n      if (structureId) {\n        propertyId = structure.propertyId;\n        promotionOptionId = structure.promotionOptionId;\n      }\n\n      if (propertyId) {\n        return loan.properties.find((_ref3) => {\n          let {\n            _id\n          } = _ref3;\n          return _id === propertyId;\n        });\n      }\n\n      if (promotionOptionId) {\n        return this.formatPromotionOptionIntoProperty(loan.promotionOptions.find((_ref4) => {\n          let {\n            _id\n          } = _ref4;\n          return _id === promotionOptionId;\n        }));\n      }\n\n      return {};\n    }\n\n    selectOffer(_ref5) {\n      let {\n        loan,\n        structureId\n      } = _ref5;\n      const {\n        offers = []\n      } = loan;\n      const {\n        offerId,\n        offer\n      } = this.selectStructure({\n        loan,\n        structureId\n      });\n\n      if (offer) {\n        return offer;\n      }\n\n      if (!offerId) {\n        return undefined;\n      }\n\n      return offers.find((_ref6) => {\n        let {\n          _id\n        } = _ref6;\n        return _id === offerId;\n      });\n    }\n\n    selectStructure() {\n      let {\n        loan,\n        structureId\n      } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (structureId) {\n        return loan.structures.find((_ref7) => {\n          let {\n            id\n          } = _ref7;\n          return id === structureId;\n        });\n      }\n\n      return loan.structure || loan.structures.find((_ref8) => {\n        let {\n          id\n        } = _ref8;\n        return id === loan.selectedStructure;\n      }) || EMPTY_STRUCTURE;\n    }\n\n    makeSelectPropertyKey(key) {\n      return createSelector(this.selectProperty, property => property && property[key]);\n    }\n\n    selectStructureKey(_ref9) {\n      let {\n        loan,\n        structureId,\n        key\n      } = _ref9;\n      return this.makeSelectStructureKey(key)({\n        loan,\n        structureId\n      });\n    }\n\n    selectPropertyKey(_ref10) {\n      let {\n        loan,\n        structureId,\n        key\n      } = _ref10;\n      return this.makeSelectPropertyKey(key)({\n        loan,\n        structureId\n      });\n    }\n\n    makeSelectStructureKey(key) {\n      return createSelector(this.selectStructure, structure => structure && structure[key]);\n    }\n\n    selectPropertyValue() {\n      let {\n        loan,\n        structureId\n      } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      const structurePropertyValue = this.selectStructureKey({\n        key: 'propertyValue',\n        loan,\n        structureId\n      });\n      return structurePropertyValue || this.selectPropertyKey({\n        loan,\n        structureId,\n        key: 'totalValue'\n      }) || this.selectPropertyKey({\n        loan,\n        structureId,\n        key: 'value'\n      });\n    }\n\n    selectPropertyWork() {\n      let {\n        loan,\n        structureId\n      } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'propertyWork'\n      });\n    }\n\n    selectLoanValue() {\n      let {\n        loan,\n        structureId\n      } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'wantedLoan'\n      });\n    }\n\n  }, _temp;\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"SolvencyCalculator.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/SolvencyCalculator.js                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  withSolvencyCalculator: () => withSolvencyCalculator\n});\nlet OWN_FUNDS_ROUNDING_AMOUNT;\nmodule.link(\"../../config/financeConstants\", {\n  OWN_FUNDS_ROUNDING_AMOUNT(v) {\n    OWN_FUNDS_ROUNDING_AMOUNT = v;\n  }\n\n}, 0);\nlet OWN_FUNDS_TYPES, RESIDENCE_TYPE, OWN_FUNDS_USAGE_TYPES;\nmodule.link(\"../../api/constants\", {\n  OWN_FUNDS_TYPES(v) {\n    OWN_FUNDS_TYPES = v;\n  },\n\n  RESIDENCE_TYPE(v) {\n    RESIDENCE_TYPE = v;\n  },\n\n  OWN_FUNDS_USAGE_TYPES(v) {\n    OWN_FUNDS_USAGE_TYPES = v;\n  }\n\n}, 1);\nlet arrayify;\nmodule.link(\"../general\", {\n  arrayify(v) {\n    arrayify = v;\n  }\n\n}, 2);\nlet NotaryFeesCalculator;\nmodule.link(\"../notaryFees/index\", {\n  NotaryFeesCalculator(v) {\n    NotaryFeesCalculator = v;\n  }\n\n}, 3);\nlet roundValue;\nmodule.link(\"../conversionFunctions\", {\n  roundValue(v) {\n    roundValue = v;\n  }\n\n}, 4);\nconst INITIAL_MIN_BOUND = 0;\nconst INITIAL_MAX_BOUND = 1000000;\nconst INITIAL_ABSOLUTE_MAX_BOUND = 100000000;\nconst MAX_ITERATIONS = 50;\nconst ACCURACY = 1000;\nconst ROUNDING_DIGITS = Math.log10(ACCURACY);\nconst MAX_BOUND_MULTIPLICATION_FACTOR = 2;\nconst OWN_FUNDS_ROUNDING_ALGO = 100;\nconst INITIAL_BORROW_RATIO_STEP_SIZE = 0.05;\n\nconst withSolvencyCalculator = function () {\n  let SuperClass = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : class {};\n  return class extends SuperClass {\n    getAllowedOwnFundsTypes(_ref) {\n      let {\n        residenceType\n      } = _ref;\n      return residenceType === RESIDENCE_TYPE.MAIN_RESIDENCE ? [OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE, OWN_FUNDS_TYPES.BANK_FORTUNE, OWN_FUNDS_TYPES.INSURANCE_3A, OWN_FUNDS_TYPES.BANK_3A, OWN_FUNDS_TYPES.INSURANCE_3B, OWN_FUNDS_TYPES.INSURANCE_2] : [OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE, OWN_FUNDS_TYPES.BANK_FORTUNE, OWN_FUNDS_TYPES.INSURANCE_3B];\n    }\n\n    ownFundTypeRequiresUsageType(_ref2) {\n      let {\n        type\n      } = _ref2;\n      return [OWN_FUNDS_TYPES.INSURANCE_2, OWN_FUNDS_TYPES.INSURANCE_3A, OWN_FUNDS_TYPES.INSURANCE_3B].includes(type);\n    }\n\n    makeOwnFunds(_ref3) {\n      let {\n        borrowers,\n        type,\n        usageType,\n        max\n      } = _ref3;\n      return arrayify(borrowers).map(borrower => {\n        const ownFundsObject = {\n          type,\n          value: Math.ceil(Math.min(max, this.getFunds({\n            borrowers: borrower,\n            type\n          }))),\n          borrowerId: borrower._id\n        };\n\n        if (!usageType && this.ownFundTypeRequiresUsageType({\n          type\n        })) {\n          return (0, _objectSpread2.default)({}, ownFundsObject, {\n            usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW\n          });\n        }\n\n        if (usageType) {\n          return (0, _objectSpread2.default)({}, ownFundsObject, {\n            usageType\n          });\n        }\n\n        return ownFundsObject;\n      }).filter((_ref4) => {\n        let {\n          value\n        } = _ref4;\n        return value > 0;\n      });\n    }\n\n    suggestStructure(_ref5) {\n      let {\n        borrowers,\n        propertyValue,\n        maxBorrowRatio = this.maxBorrowRatio,\n        loanValue,\n        canton,\n        residenceType,\n        notaryFees: forcedNotaryFees\n      } = _ref5;\n      let notaryFees;\n      const finalLoanValue = loanValue || Math.round(propertyValue * maxBorrowRatio);\n\n      if (forcedNotaryFees) {\n        notaryFees = forcedNotaryFees;\n      } else {\n        const notaryCalc = new NotaryFeesCalculator({\n          canton\n        });\n        notaryFees = notaryCalc.getNotaryFeesWithoutLoan({\n          propertyValue,\n          mortgageNoteIncrease: finalLoanValue,\n          residenceType\n        }).total;\n      }\n\n      let requiredOwnFunds = Math.round(propertyValue + notaryFees - finalLoanValue);\n      let ownFunds = []; // Get all possible OWN_FUNDS_TYPES\n\n      const allowedOwnFundsTypes = this.getAllowedOwnFundsTypes({\n        residenceType\n      });\n      allowedOwnFundsTypes.forEach(type => {\n        borrowers.forEach(borrower => {\n          const newOwnFunds = this.makeOwnFunds({\n            borrowers: borrower,\n            type,\n            max: requiredOwnFunds\n          });\n          requiredOwnFunds -= newOwnFunds.reduce((tot, _ref6) => {\n            let {\n              value\n            } = _ref6;\n            return tot + value;\n          }, 0);\n          ownFunds = [...ownFunds, ...newOwnFunds];\n        });\n      });\n      return ownFunds;\n    }\n\n    createLoanObject(_ref7) {\n      let {\n        residenceType,\n        borrowers,\n        wantedLoan,\n        propertyValue,\n        canton,\n        ownFunds = [],\n        loanTranches = []\n      } = _ref7,\n          rest = (0, _objectWithoutProperties2.default)(_ref7, [\"residenceType\", \"borrowers\", \"wantedLoan\", \"propertyValue\", \"canton\", \"ownFunds\", \"loanTranches\"]);\n      return (0, _objectSpread2.default)({\n        residenceType,\n        borrowers,\n        structure: {\n          wantedLoan,\n          propertyValue,\n          property: {\n            canton\n          },\n          ownFunds,\n          loanTranches\n        }\n      }, rest);\n    }\n\n    suggestedStructureIsValid(_ref8) {\n      let {\n        borrowers,\n        propertyValue,\n        maxBorrowRatio = this.maxBorrowRatio,\n        loanValue,\n        canton,\n        residenceType,\n        ownFunds\n      } = _ref8;\n      const finalLoanValue = loanValue || Math.round(propertyValue * maxBorrowRatio);\n      const loanObject = this.createLoanObject({\n        residenceType,\n        borrowers,\n        wantedLoan: finalLoanValue,\n        propertyValue,\n        canton,\n        ownFunds\n      }); // If the calculator has been initialized, reinitialize it according to this new potential loan\n\n      if (this.lenderRules) {\n        this.initialize({\n          loan: loanObject,\n          lenderRules: this.lenderRules\n        });\n      }\n\n      if (this.isMissingOwnFunds({\n        loan: loanObject\n      })) {\n        return false;\n      }\n\n      if (!this.hasEnoughCash({\n        loan: loanObject\n      })) {\n        return false;\n      }\n\n      if (!this.structureIsValid({\n        loan: loanObject\n      })) {\n        return false;\n      }\n\n      return true;\n    }\n\n    getMaxPropertyValue(_ref9) {\n      let {\n        borrowers,\n        maxBorrowRatio,\n        canton,\n        residenceType\n      } = _ref9;\n\n      // Immediately stop iterating if maxBorrowRatio is above what is allowed\n      if (this.maxBorrowRatio < maxBorrowRatio) {\n        return 0;\n      }\n\n      let foundValue = false;\n      let minBound = INITIAL_MIN_BOUND;\n      let maxBound = INITIAL_MAX_BOUND;\n      let absoluteMax = INITIAL_ABSOLUTE_MAX_BOUND;\n      let iterations = 0; // The rounding amount of 1000 is helpful when the user tries to\n      // fit his own funds into a structure without being overly accurate\n      // which is annoying.\n      // However for this calculation we don't need to round own funds as loosely\n\n      this.ownFundsRoundingAmount = OWN_FUNDS_ROUNDING_ALGO;\n\n      while (!foundValue) {\n        iterations += 1;\n        const nextPropertyValue = roundValue((minBound + maxBound) / 2, ROUNDING_DIGITS);\n        const ownFunds = this.suggestStructure({\n          borrowers,\n          maxBorrowRatio,\n          canton,\n          residenceType,\n          propertyValue: nextPropertyValue\n        });\n\n        if (this.suggestedStructureIsValid({\n          borrowers,\n          maxBorrowRatio,\n          canton,\n          residenceType,\n          propertyValue: nextPropertyValue,\n          ownFunds\n        })) {\n          minBound = nextPropertyValue;\n          maxBound = Math.min(maxBound * MAX_BOUND_MULTIPLICATION_FACTOR, absoluteMax);\n        } else {\n          maxBound = nextPropertyValue;\n          absoluteMax = maxBound;\n        }\n\n        if (maxBound - minBound <= ACCURACY) {\n          foundValue = true;\n        }\n\n        if (iterations > MAX_ITERATIONS) {\n          foundValue = true;\n        }\n      }\n\n      this.ownFundsRoundingAmount = OWN_FUNDS_ROUNDING_AMOUNT;\n      return minBound;\n    }\n\n    getNextStepSize(_ref10) {\n      let {\n        currentMax,\n        currentBorrowRatio,\n        stepSize,\n        borrowers,\n        residenceType,\n        canton,\n        direction,\n        cache\n      } = _ref10;\n      let newStepSize = stepSize;\n      let foundBetterValue;\n\n      while (!foundBetterValue) {\n        let nextValue;\n\n        if (direction === 'upwards') {\n          nextValue = cache[currentBorrowRatio + stepSize] || this.getMaxPropertyValue({\n            borrowers,\n            residenceType,\n            maxBorrowRatio: currentBorrowRatio + stepSize,\n            canton\n          });\n        } else {\n          nextValue = cache[currentBorrowRatio - stepSize] || this.getMaxPropertyValue({\n            borrowers,\n            residenceType,\n            maxBorrowRatio: currentBorrowRatio - stepSize,\n            canton\n          });\n        }\n\n        if (nextValue > currentMax) {\n          foundBetterValue = true;\n        } else {\n          newStepSize /= 2;\n        }\n\n        if (newStepSize < 0.05) {\n          foundBetterValue = true;\n        }\n      }\n\n      return newStepSize;\n    }\n\n    getMaxPropertyValueWithoutBorrowRatio(_ref11) {\n      let {\n        borrowers,\n        residenceType,\n        canton\n      } = _ref11;\n      let borrowRatio = 0.7;\n      let foundValue = false;\n      let iterations = 0;\n      let stepSize = INITIAL_BORROW_RATIO_STEP_SIZE;\n      const deltaX = 0.01;\n      let maxPropertyValue = 0;\n      let optimalBorrowRatio;\n      const cache = {};\n\n      const setMax = (ratio, propertyValue) => {\n        // Cache each result to avoid recalculating it later\n        if (!cache[\"\".concat(ratio)]) {\n          cache[\"\".concat(ratio)] = propertyValue;\n        } // Always store the highest encountered value, in case the loop\n        // stops prematurely, or if the stopping conditions would've skipped\n        // a value that we already calculated\n\n\n        if (propertyValue > maxPropertyValue) {\n          maxPropertyValue = propertyValue;\n          optimalBorrowRatio = ratio;\n        }\n      };\n\n      while (!foundValue) {\n        iterations += 1;\n        const center = cache[borrowRatio] || this.getMaxPropertyValue({\n          borrowers,\n          residenceType,\n          maxBorrowRatio: borrowRatio,\n          canton\n        });\n        setMax(borrowRatio, center);\n        const yLeft = cache[borrowRatio - deltaX] || this.getMaxPropertyValue({\n          borrowers,\n          residenceType,\n          maxBorrowRatio: borrowRatio - deltaX,\n          canton\n        });\n        setMax(borrowRatio - deltaX, yLeft);\n        const yRight = cache[borrowRatio + deltaX] || this.getMaxPropertyValue({\n          borrowers,\n          residenceType,\n          maxBorrowRatio: borrowRatio + deltaX,\n          canton\n        });\n        setMax(borrowRatio + deltaX, yRight);\n        const slope = yRight - yLeft;\n\n        if (yRight === 0 && yLeft === 0) {\n          // If the algorithm is at 0 on both sides, it means the borrowRatio\n          // is way too high, so start him over again at 0, but with a large\n          // step size to allow it to recover quickly\n          borrowRatio = INITIAL_BORROW_RATIO_STEP_SIZE;\n          stepSize = 0.2;\n        } else if (slope > 0) {\n          stepSize = this.getNextStepSize({\n            currentMax: center,\n            currentBorrowRatio: borrowRatio,\n            stepSize,\n            borrowers,\n            residenceType,\n            canton,\n            direction: 'upwards',\n            cache\n          });\n          borrowRatio += stepSize;\n        } else {\n          stepSize = this.getNextStepSize({\n            currentMax: center,\n            currentBorrowRatio: borrowRatio,\n            stepSize,\n            borrowers,\n            residenceType,\n            canton,\n            direction: 'downwards',\n            cache\n          });\n          borrowRatio -= stepSize;\n        }\n\n        if (stepSize < deltaX / 2) {\n          foundValue = true;\n        }\n\n        if (iterations > 50) {\n          foundValue = true;\n        }\n      } // Round the borrowRatio, and recompute the exact property value\n\n\n      const finalBorrowRatio = Math.round(optimalBorrowRatio * 10000) / 10000;\n      const finalPropertyValue = cache[finalBorrowRatio] || this.getMaxPropertyValue({\n        borrowers,\n        residenceType,\n        maxBorrowRatio: finalBorrowRatio,\n        canton\n      });\n      return {\n        borrowRatio: finalBorrowRatio,\n        propertyValue: finalPropertyValue\n      };\n    }\n\n    getMaxPropertyValueForLoan(_ref12) {\n      let {\n        loan,\n        maxBorrowRatio,\n        canton,\n        residenceType\n      } = _ref12;\n      const {\n        borrowers,\n        residenceType: loanResidenceType\n      } = loan;\n      return this.getMaxPropertyValue({\n        borrowers,\n        residenceType: residenceType || loanResidenceType,\n        maxBorrowRatio,\n        canton\n      });\n    }\n\n    suggestStructureForLoan(_ref13) {\n      let {\n        loan,\n        structureId\n      } = _ref13;\n      const propertyValue = this.getPropAndWork({\n        loan,\n        structureId\n      });\n      const loanValue = this.selectLoanValue({\n        loan,\n        structureId\n      });\n      const notaryFees = this.getFees({\n        loan,\n        structureId\n      }).total;\n      return this.suggestStructure({\n        borrowers: loan.borrowers,\n        propertyValue,\n        loanValue,\n        residenceType: loan.residenceType,\n        notaryFees\n      });\n    }\n\n  };\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"classUtils.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/classUtils.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  withConfig: () => withConfig\n});\n\nconst withConfig = extraConfig => SuperClass => class extends SuperClass {\n  constructor(config) {\n    super((0, _objectSpread2.default)({}, config, extraConfig));\n  }\n\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/index.js                                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  Calculator: () => Calculator\n});\nlet compose;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  }\n\n}, 0);\nlet FinanceCalculator;\nmodule.link(\"../FinanceCalculator\", {\n  FinanceCalculator(v) {\n    FinanceCalculator = v;\n  }\n\n}, 1);\nlet withLoanCalculator;\nmodule.link(\"./LoanCalculator\", {\n  withLoanCalculator(v) {\n    withLoanCalculator = v;\n  }\n\n}, 2);\nlet withBorrowerCalculator;\nmodule.link(\"./BorrowerCalculator\", {\n  withBorrowerCalculator(v) {\n    withBorrowerCalculator = v;\n  }\n\n}, 3);\nlet withOfferCalculator;\nmodule.link(\"./OfferCalculator\", {\n  withOfferCalculator(v) {\n    withOfferCalculator = v;\n  }\n\n}, 4);\nlet withPropertyCalculator;\nmodule.link(\"./PropertyCalculator\", {\n  withPropertyCalculator(v) {\n    withPropertyCalculator = v;\n  }\n\n}, 5);\nlet withPromotionCalculator;\nmodule.link(\"./PromotionCalculator\", {\n  withPromotionCalculator(v) {\n    withPromotionCalculator = v;\n  }\n\n}, 6);\nlet withCombinedCalculator;\nmodule.link(\"./CombinedCalculator\", {\n  withCombinedCalculator(v) {\n    withCombinedCalculator = v;\n  }\n\n}, 7);\nlet withSelector;\nmodule.link(\"./Selector\", {\n  withSelector(v) {\n    withSelector = v;\n  }\n\n}, 8);\nlet withLenderRulesInitializator;\nmodule.link(\"./LenderRulesInitializator\", {\n  withLenderRulesInitializator(v) {\n    withLenderRulesInitializator = v;\n  }\n\n}, 9);\nlet withSolvencyCalculator;\nmodule.link(\"./SolvencyCalculator\", {\n  withSolvencyCalculator(v) {\n    withSolvencyCalculator = v;\n  }\n\n}, 10);\nlet withConfig;\nmodule.link(\"./classUtils\", {\n  withConfig(v) {\n    withConfig = v;\n  }\n\n}, 11);\nlet financeCalculatorArgumentMapper;\nmodule.link(\"./middleware\", {\n  financeCalculatorArgumentMapper(v) {\n    financeCalculatorArgumentMapper = v;\n  }\n\n}, 12);\nconst MappedFinanceCalculator = withConfig({\n  middlewareObject: financeCalculatorArgumentMapper\n})(FinanceCalculator); // Put CombinedCalculator first, so that it can modify the following calculators\n// with middleware\n\nconst Calculator = compose(withLenderRulesInitializator, withSolvencyCalculator, withCombinedCalculator, withPromotionCalculator, withLoanCalculator, withBorrowerCalculator, withPropertyCalculator, withOfferCalculator, withSelector)(MappedFinanceCalculator);\nmodule.exportDefault(new Calculator({}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"middleware.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/Calculator/middleware.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  financeCalculatorArgumentMapper: () => financeCalculatorArgumentMapper,\n  borrowerExtractorMiddleware: () => borrowerExtractorMiddleware,\n  memoizeMiddleware: () => memoizeMiddleware\n});\nlet makeArgumentMapper;\nmodule.link(\"../MiddlewareManager\", {\n  makeArgumentMapper(v) {\n    makeArgumentMapper = v;\n  }\n\n}, 0);\nlet memoizeOne;\nmodule.link(\"../memoizeOne\", {\n  default(v) {\n    memoizeOne = v;\n  }\n\n}, 1);\nconst argumentMappings = {};\nconst financeCalculatorArgumentMapper = makeArgumentMapper(argumentMappings);\n\nconst borrowerExtractorMiddleware = () => next => function (params) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  if (params && params.loan && !params.borrowers) {\n    return next((0, _objectSpread2.default)({}, params, {\n      borrowers: params.loan.borrowers\n    }), ...args);\n  }\n\n  return next(params, ...args);\n};\n\nconst memoizeMiddleware = () => next => {\n  const memoFunc = memoizeOne(next);\n  return memoFunc;\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"FinanceCalculator\":{\"test\":{\"FinanceCalculator.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/FinanceCalculator/test/FinanceCalculator.spec.js                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet DefaultFinanceCalculator, FinanceCalculator;\nmodule.link(\"../FinanceCalculator\", {\n  default(v) {\n    DefaultFinanceCalculator = v;\n  },\n\n  FinanceCalculator(v) {\n    FinanceCalculator = v;\n  }\n\n}, 1);\nlet NO_INTEREST_RATE_ERROR;\nmodule.link(\"../financeCalculatorConstants\", {\n  NO_INTEREST_RATE_ERROR(v) {\n    NO_INTEREST_RATE_ERROR = v;\n  }\n\n}, 2);\nlet RESIDENCE_TYPE;\nmodule.link(\"../../../api/constants\", {\n  RESIDENCE_TYPE(v) {\n    RESIDENCE_TYPE = v;\n  }\n\n}, 3);\ndescribe('FinanceCalculator', () => {\n  let calc;\n  beforeEach(() => {\n    calc = new FinanceCalculator();\n  });\n  describe('getLoanValue', () => {\n    it('returns the difference between property and fortune without fees', () => {\n      expect(calc.getLoanValue({\n        propertyValue: 100,\n        fortune: 20\n      })).to.equal(85);\n    });\n    it('uses fortune to pay for fees', () => {\n      calc = new FinanceCalculator({\n        notaryFees: 0.1\n      });\n      expect(calc.getLoanValue({\n        propertyValue: 100,\n        fortune: 30\n      })).to.equal(80);\n    });\n  });\n  describe('getBorrowRatio', () => {\n    it('returns a percentage borrowRatio', () => {\n      expect(calc.getBorrowRatio({\n        propertyValue: 100,\n        loan: 80\n      })).to.equal(0.8);\n    });\n    it('returns zero if no loan is provided', () => {\n      expect(calc.getBorrowRatio({\n        propertyValue: 100\n      })).to.equal(0);\n    });\n  });\n  describe('getBorrowRatioWithoutLoan', () => {\n    it('returns a percentage borrowRatio', () => {\n      expect(calc.getBorrowRatioWithoutLoan({\n        propertyValue: 100,\n        fortune: 25\n      })).to.equal(0.8);\n    });\n  });\n  describe('getRetirementForGender', () => {\n    it('returns a different value for male and female', () => {\n      expect(calc.getRetirementForGender({\n        gender: 'M'\n      })).to.not.equal(undefined);\n      expect(calc.getRetirementForGender({\n        gender: 'M'\n      })).to.not.equal(undefined);\n      expect(calc.getRetirementForGender({\n        gender: 'M'\n      })).to.not.equal(calc.getRetirementForGender({\n        gender: 'F'\n      }));\n    });\n    it('returns male retirement if nothing is provided', () => {\n      expect(calc.getRetirementForGender({})).to.equal(65);\n      expect(calc.getRetirementForGender()).to.equal(65);\n    });\n  });\n  describe('getIncomeRatio', () => {\n    it('returns the ratio between payment and income', () => {\n      expect(calc.getIncomeRatio({\n        monthlyIncome: 1,\n        monthlyPayment: 0.5\n      })).to.equal(0.5);\n    });\n    it('returns zero if no payment is provided', () => {\n      expect(calc.getIncomeRatio({\n        monthlyIncome: 1,\n        monthlyPayment: 0\n      })).to.equal(0);\n    });\n  });\n  describe('getLoanCost', () => {\n    it('returns the sum of the 3 components', () => {\n      expect(calc.getLoanCost({\n        maintenance: 1,\n        interests: 2,\n        amortization: 3\n      })).to.equal(6);\n    });\n    it('ignores a value if not provided', () => {\n      expect(calc.getLoanCost({\n        interests: 2,\n        amortization: 3\n      })).to.equal(5);\n      expect(calc.getLoanCost({\n        maintenance: 1,\n        amortization: 3\n      })).to.equal(4);\n      expect(calc.getLoanCost({\n        maintenance: 1,\n        interests: 2\n      })).to.equal(3);\n    });\n    it('returns zero if nothing is provided', () => {\n      expect(calc.getLoanCost()).to.equal(0);\n    });\n  });\n  describe('getInterestsWithTranches', () => {\n    it('aggregates interest rates with loan tranches', () => {\n      expect(calc.getInterestsWithTranches({\n        tranches: [{\n          value: 0.5,\n          type: 'a'\n        }, {\n          value: 0.5,\n          type: 'b'\n        }],\n        interestRates: {\n          a: 0.01,\n          b: 0.02\n        }\n      })).to.equal(0.5 * 0.01 + 0.5 * 0.02);\n    });\n    it('returns zero if nothing is provided', () => {\n      expect(calc.getInterestsWithTranches()).to.equal(0);\n    });\n    it('return a dash if an interest rate is not present', () => {\n      expect(calc.getInterestsWithTranches({\n        tranches: [{\n          value: 0.5,\n          type: 'a'\n        }],\n        interestRates: {\n          b: 0.02\n        }\n      })).to.equal('-');\n    });\n  });\n  describe('getAmortizationRateBase', () => {\n    it('returns the amortization base rate for an 80% loan with proper precision', () => {\n      calc = new FinanceCalculator({\n        amortizationBaseRate: 0.01,\n        amortizationGoal: 0.65\n      });\n      expect(calc.getAmortizationRateBase({\n        borrowRatio: 0.8\n      })).to.equal(0.0125);\n    });\n    it('returns zero if already below the amortizationGoal', () => {\n      calc = new FinanceCalculator({\n        amortizationBaseRate: 0.01,\n        amortizationGoal: 0.65\n      });\n      expect(calc.getAmortizationRateBase({\n        borrowRatio: 0.64\n      })).to.equal(0);\n    });\n    it('returns zero if already exactly at the amortizationGoal', () => {\n      calc = new FinanceCalculator({\n        amortizationBaseRate: 0.01,\n        amortizationGoal: 0.65\n      });\n      expect(calc.getAmortizationRateBase({\n        borrowRatio: 0.65\n      })).to.equal(0);\n    });\n    it('returns zero if nothing is provided', () => {\n      calc = new FinanceCalculator({\n        amortizationBaseRate: 0.01,\n        amortizationGoal: 0.65\n      });\n      expect(calc.getAmortizationRateBase()).to.equal(0);\n      expect(calc.getAmortizationRateBase({})).to.equal(0);\n    });\n  });\n  describe('DefaultFinanceCalculator', () => {\n    beforeEach(() => {\n      calc = DefaultFinanceCalculator;\n    });\n    it('has default initialization settings', () => {\n      expect(calc.getLoanValue({\n        propertyValue: 100,\n        fortune: 25\n      })).to.equal(80);\n      expect(calc.getAmortizationRateBase({\n        borrowRatio: 0.8\n      })).to.equal(0.0125);\n    });\n  });\n  describe('Calculate Years to Retirement', () => {\n    it('Should return 35 with a male of 30 yo', () => {\n      expect(calc.getYearsToRetirement({\n        age1: 30,\n        gender1: 'M'\n      })).to.equal(35);\n    });\n    it('Should return 34 with a female of 30 yo', () => {\n      expect(calc.getYearsToRetirement({\n        age1: 30,\n        gender1: 'F'\n      })).to.equal(34);\n    });\n    it('Should return 35 with an undefined gender of 30 yo', () => {\n      expect(calc.getYearsToRetirement({\n        age1: 30\n      })).to.equal(35);\n    });\n    it('Should return 0 with a female of 64 yo', () => {\n      expect(calc.getYearsToRetirement({\n        age1: 64,\n        gender1: 'F'\n      })).to.equal(0);\n    });\n    it('Should return 0 with a female over 64 yo', () => {\n      expect(calc.getYearsToRetirement({\n        age1: 80,\n        gender1: 'F'\n      })).to.equal(0);\n    });\n    it('Should return 10 with a female of 54 yo and male of 54 yo', () => {\n      expect(calc.getYearsToRetirement({\n        age1: 54,\n        age2: 54,\n        gender1: 'F',\n        gender2: 'M'\n      })).to.equal(10);\n    });\n  });\n  describe('getFeesBase', () => {\n    it('returns fees if its above 0 or 0', () => {\n      expect(calc.getFeesBase({\n        fees: 0\n      })).to.equal(0);\n      expect(calc.getFeesBase({\n        fees: 123\n      })).to.equal(123);\n    });\n    it('returns 0 if nothing is passed', () => {\n      expect(calc.getFeesBase({})).to.equal(0);\n    });\n    it('returns calculated fees if no fees are provided', () => {\n      expect(calc.getFeesBase({\n        propertyValue: 100\n      })).to.equal(5);\n      expect(calc.getFeesBase({\n        propertyValue: 0\n      })).to.equal(0);\n    });\n  });\n  describe('getTheoreticalMonthly', () => {\n    it('returns a correct value', () => {\n      const expected = {\n        maintenance: 1000,\n        interests: 4000,\n        amortization: 1000,\n        total: 6000\n      };\n      expect(calc.getTheoreticalMonthly({\n        propAndWork: 1200000,\n        loanValue: 960000,\n        amortizationRate: calc.getAmortizationRateBase({\n          borrowRatio: 0.8\n        })\n      })).to.deep.equal(expected);\n    });\n  });\n  describe('getMaxLoanBase', () => {\n    it('returns 80% of the property by default', () => {\n      expect(calc.getMaxLoanBase({\n        propertyValue: 90,\n        propertyWork: 10,\n        pledgedAmount: 1000\n      })).to.equal(80);\n    });\n    it('returns 80% of the property for a main residence if nothing is pledged', () => {\n      expect(calc.getMaxLoanBase({\n        propertyValue: 90,\n        propertyWork: 10,\n        residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE\n      })).to.equal(80);\n    });\n    it('returns between 80 and 90% of the property for a main residence if a little is pledged', () => {\n      expect(calc.getMaxLoanBase({\n        propertyValue: 90,\n        propertyWork: 10,\n        residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n        pledgedAmount: 5\n      })).to.equal(85);\n    });\n    it('caps at 90% of the property', () => {\n      expect(calc.getMaxLoanBase({\n        propertyValue: 90,\n        propertyWork: 10,\n        residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n        pledgedAmount: 20\n      })).to.equal(90);\n    });\n  });\n  describe('getAveragedInterestRate', () => {\n    it('returns the same value if only one rate at 100%', () => {\n      expect(calc.getAveragedInterestRate({\n        tranches: [{\n          type: 'rateType',\n          value: 1\n        }],\n        interestRates: {\n          rateType: 0.01\n        }\n      })).to.equal(0.01);\n    });\n    it('averages 2 rates out', () => {\n      expect(calc.getAveragedInterestRate({\n        tranches: [{\n          type: 'rateType1',\n          value: 0.5\n        }, {\n          type: 'rateType2',\n          value: 0.5\n        }],\n        interestRates: {\n          rateType1: 0.01,\n          rateType2: 0.02\n        }\n      })).to.equal(0.015);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"FinanceCalculator.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/FinanceCalculator/FinanceCalculator.js                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  FinanceCalculator: () => FinanceCalculator\n});\nlet GENDER, SUCCESS, ERROR, WARNING, RESIDENCE_TYPE, REAL_ESTATE_CONSIDERATION_TYPES, EXPENSE_TYPES_WITHOUT_DELTAS;\nmodule.link(\"../../api/constants\", {\n  GENDER(v) {\n    GENDER = v;\n  },\n\n  SUCCESS(v) {\n    SUCCESS = v;\n  },\n\n  ERROR(v) {\n    ERROR = v;\n  },\n\n  WARNING(v) {\n    WARNING = v;\n  },\n\n  RESIDENCE_TYPE(v) {\n    RESIDENCE_TYPE = v;\n  },\n\n  REAL_ESTATE_CONSIDERATION_TYPES(v) {\n    REAL_ESTATE_CONSIDERATION_TYPES = v;\n  },\n\n  EXPENSE_TYPES_WITHOUT_DELTAS(v) {\n    EXPENSE_TYPES_WITHOUT_DELTAS = v;\n  }\n\n}, 0);\nlet AMORTIZATION_STOP, AMORTIZATION_YEARS, AVERAGE_TAX_RATE, BONUS_ALGORITHMS, BONUS_CONSIDERATION, BONUS_HISTORY_TO_CONSIDER, COMPANY_INCOME_TO_CONSIDER, DEFAULT_AMORTIZATION, DIVIDENDS_CONSIDERATION, DIVIDENDS_HISTORY_TO_CONSIDER, ESTIMATED_COMMISSION, FORTUNE_RETURNS_RATIO, INTERESTS_FINMA, INVESTMENT_INCOME_CONSIDERATION, MAINTENANCE_FINMA, MAX_BORROW_RATIO_PRIMARY_PROPERTY, MAX_BORROW_RATIO_WITH_PLEDGE, MAX_INCOME_RATIO_TIGHT, MAX_INCOME_RATIO, MIN_CASH, NOTARY_FEES, OWN_FUNDS_ROUNDING_AMOUNT, PENSION_INCOME_CONSIDERATION, REAL_ESTATE_INCOME_ALGORITHMS, REAL_ESTATE_INCOME_CONSIDERATION, REFERRAL_COMMISSION_SPLIT, REFERRAL_COMMISSION;\nmodule.link(\"../../config/financeConstants\", {\n  AMORTIZATION_STOP(v) {\n    AMORTIZATION_STOP = v;\n  },\n\n  AMORTIZATION_YEARS(v) {\n    AMORTIZATION_YEARS = v;\n  },\n\n  AVERAGE_TAX_RATE(v) {\n    AVERAGE_TAX_RATE = v;\n  },\n\n  BONUS_ALGORITHMS(v) {\n    BONUS_ALGORITHMS = v;\n  },\n\n  BONUS_CONSIDERATION(v) {\n    BONUS_CONSIDERATION = v;\n  },\n\n  BONUS_HISTORY_TO_CONSIDER(v) {\n    BONUS_HISTORY_TO_CONSIDER = v;\n  },\n\n  COMPANY_INCOME_TO_CONSIDER(v) {\n    COMPANY_INCOME_TO_CONSIDER = v;\n  },\n\n  DEFAULT_AMORTIZATION(v) {\n    DEFAULT_AMORTIZATION = v;\n  },\n\n  DIVIDENDS_CONSIDERATION(v) {\n    DIVIDENDS_CONSIDERATION = v;\n  },\n\n  DIVIDENDS_HISTORY_TO_CONSIDER(v) {\n    DIVIDENDS_HISTORY_TO_CONSIDER = v;\n  },\n\n  ESTIMATED_COMMISSION(v) {\n    ESTIMATED_COMMISSION = v;\n  },\n\n  FORTUNE_RETURNS_RATIO(v) {\n    FORTUNE_RETURNS_RATIO = v;\n  },\n\n  INTERESTS_FINMA(v) {\n    INTERESTS_FINMA = v;\n  },\n\n  INVESTMENT_INCOME_CONSIDERATION(v) {\n    INVESTMENT_INCOME_CONSIDERATION = v;\n  },\n\n  MAINTENANCE_FINMA(v) {\n    MAINTENANCE_FINMA = v;\n  },\n\n  MAX_BORROW_RATIO_PRIMARY_PROPERTY(v) {\n    MAX_BORROW_RATIO_PRIMARY_PROPERTY = v;\n  },\n\n  MAX_BORROW_RATIO_WITH_PLEDGE(v) {\n    MAX_BORROW_RATIO_WITH_PLEDGE = v;\n  },\n\n  MAX_INCOME_RATIO_TIGHT(v) {\n    MAX_INCOME_RATIO_TIGHT = v;\n  },\n\n  MAX_INCOME_RATIO(v) {\n    MAX_INCOME_RATIO = v;\n  },\n\n  MIN_CASH(v) {\n    MIN_CASH = v;\n  },\n\n  NOTARY_FEES(v) {\n    NOTARY_FEES = v;\n  },\n\n  OWN_FUNDS_ROUNDING_AMOUNT(v) {\n    OWN_FUNDS_ROUNDING_AMOUNT = v;\n  },\n\n  PENSION_INCOME_CONSIDERATION(v) {\n    PENSION_INCOME_CONSIDERATION = v;\n  },\n\n  REAL_ESTATE_INCOME_ALGORITHMS(v) {\n    REAL_ESTATE_INCOME_ALGORITHMS = v;\n  },\n\n  REAL_ESTATE_INCOME_CONSIDERATION(v) {\n    REAL_ESTATE_INCOME_CONSIDERATION = v;\n  },\n\n  REFERRAL_COMMISSION_SPLIT(v) {\n    REFERRAL_COMMISSION_SPLIT = v;\n  },\n\n  REFERRAL_COMMISSION(v) {\n    REFERRAL_COMMISSION = v;\n  }\n\n}, 1);\nlet MiddlewareManager;\nmodule.link(\"../MiddlewareManager\", {\n  default(v) {\n    MiddlewareManager = v;\n  }\n\n}, 2);\nlet precisionMiddleware;\nmodule.link(\"./financeCalculatorMiddlewares\", {\n  precisionMiddleware(v) {\n    precisionMiddleware = v;\n  }\n\n}, 3);\nlet memoizeMiddleware;\nmodule.link(\"../Calculator/middleware\", {\n  memoizeMiddleware(v) {\n    memoizeMiddleware = v;\n  }\n\n}, 4);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nclass FinanceCalculator {\n  constructor(settings) {\n    var _this = this;\n\n    _defineProperty(this, \"notaryFees\", void 0);\n\n    _defineProperty(this, \"amortizationBaseRate\", void 0);\n\n    _defineProperty(this, \"amortizationGoal\", void 0);\n\n    _defineProperty(this, \"setMiddleware\", (middlewares, middlewareObject) => {\n      const middlewareManager = new MiddlewareManager(this, middlewareObject);\n      middlewareManager.applyToAllMethods([precisionMiddleware, memoizeMiddleware, ...middlewares]);\n    });\n\n    _defineProperty(this, \"getYearsToRetirement\", function () {\n      let {\n        age1,\n        age2,\n        gender1,\n        gender2\n      } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      const retirement1 = _this.getRetirementForGender({\n        gender: gender1\n      });\n\n      let retirement2 = null;\n\n      if (gender2) {\n        retirement2 = _this.getRetirementForGender({\n          gender: gender2\n        });\n      } // Substract age to determine remaining time to retirement for both borrowers\n\n\n      const toRetirement1 = retirement1 - age1;\n      let toRetirement2;\n\n      if (retirement2 && age2) {\n        toRetirement2 = retirement2 - age2;\n      } // Get the most limiting time to retirement for both borrowers, in years\n\n\n      let yearsToRetirement;\n\n      if (toRetirement2) {\n        yearsToRetirement = Math.min(toRetirement1, toRetirement2);\n      } else {\n        yearsToRetirement = toRetirement1;\n      }\n\n      return Math.max(yearsToRetirement, 0);\n    });\n\n    _defineProperty(this, \"getIncomeLimitedPropertyValue\", (_ref) => {\n      let {\n        nF,\n        r,\n        i,\n        mR,\n        m\n      } = _ref;\n      return (_ref2) => {\n        let {\n          income,\n          fortune\n        } = _ref2;\n        // The first one is with 0 amortization\n        const incomeLimited1 = (mR * income + fortune * i) / (m + (1 + nF) * i); // The second is with amortization factored in (and it could be negative due to math)\n\n        const incomeLimited2 = ((1 + r * i) * fortune + mR * r * income) / (r * (m + i) + nF * (1 + r * i) + 0.35); // Therefore, take the minimum value of both, which is the most limiting one\n        // Because of the ratios, round this value down\n\n        return Math.floor(Math.min(incomeLimited1, incomeLimited2));\n      };\n    });\n\n    this.initFinanceCalculator(settings);\n  }\n\n  initFinanceCalculator() {\n    let {\n      allowPledge = true,\n      amortizationBaseRate = DEFAULT_AMORTIZATION,\n      amortizationGoal = AMORTIZATION_STOP,\n      amortizationYears = AMORTIZATION_YEARS,\n      bonusAlgorithm = BONUS_ALGORITHMS.WEAK_AVERAGE,\n      bonusConsideration = BONUS_CONSIDERATION,\n      bonusHistoryToConsider = BONUS_HISTORY_TO_CONSIDER,\n      companyIncomeHistoryToConsider = COMPANY_INCOME_TO_CONSIDER,\n      dividendsConsideration = DIVIDENDS_CONSIDERATION,\n      dividendsHistoryToConsider = DIVIDENDS_HISTORY_TO_CONSIDER,\n      expensesSubtractFromIncome = EXPENSE_TYPES_WITHOUT_DELTAS,\n      fortuneReturnsRatio = FORTUNE_RETURNS_RATIO,\n      investmentIncomeConsideration = INVESTMENT_INCOME_CONSIDERATION,\n      maxBorrowRatio = MAX_BORROW_RATIO_PRIMARY_PROPERTY,\n      maxBorrowRatioWithPledge = MAX_BORROW_RATIO_WITH_PLEDGE,\n      maxIncomeRatio = MAX_INCOME_RATIO,\n      maxIncomeRatioTight = MAX_INCOME_RATIO_TIGHT,\n      minCash = MIN_CASH,\n      notaryFees = NOTARY_FEES,\n      ownFundsRoundingAmount = OWN_FUNDS_ROUNDING_AMOUNT,\n      pensionIncomeConsideration = PENSION_INCOME_CONSIDERATION,\n      realEstateIncomeAlgorithm = REAL_ESTATE_INCOME_ALGORITHMS.DEFAULT,\n      realEstateIncomeConsideration = REAL_ESTATE_INCOME_CONSIDERATION,\n      realEstateIncomeConsiderationType = REAL_ESTATE_CONSIDERATION_TYPES.ADD_TO_INCOME,\n      taxRate = AVERAGE_TAX_RATE,\n      theoreticalInterestRate = INTERESTS_FINMA,\n      theoreticalInterestRate2ndRank = null,\n      theoreticalMaintenanceRate = MAINTENANCE_FINMA,\n      estimatedCommission = ESTIMATED_COMMISSION,\n      referralCommission = REFERRAL_COMMISSION,\n      referralCommissionSplit = REFERRAL_COMMISSION_SPLIT,\n      middlewares = [],\n      middlewareObject\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.allowPledge = allowPledge;\n    this.amortizationBaseRate = amortizationBaseRate;\n    this.amortizationGoal = amortizationGoal;\n    this.amortizationYears = amortizationYears;\n    this.bonusAlgorithm = bonusAlgorithm;\n    this.bonusConsideration = bonusConsideration;\n    this.bonusHistoryToConsider = bonusHistoryToConsider;\n    this.companyIncomeHistoryToConsider = companyIncomeHistoryToConsider;\n    this.dividendsConsideration = dividendsConsideration;\n    this.dividendsHistoryToConsider = dividendsHistoryToConsider;\n    this.expensesSubtractFromIncome = expensesSubtractFromIncome;\n    this.fortuneReturnsRatio = fortuneReturnsRatio;\n    this.investmentIncomeConsideration = investmentIncomeConsideration;\n    this.maxBorrowRatio = maxBorrowRatio;\n    this.maxBorrowRatioWithPledge = maxBorrowRatioWithPledge;\n    this.maxIncomeRatio = maxIncomeRatio;\n    this.maxIncomeRatioTight = maxIncomeRatioTight;\n    this.minCash = minCash;\n    this.notaryFees = notaryFees;\n    this.ownFundsRoundingAmount = ownFundsRoundingAmount;\n    this.pensionIncomeConsideration = pensionIncomeConsideration;\n    this.realEstateIncomeAlgorithm = realEstateIncomeAlgorithm;\n    this.realEstateIncomeConsideration = realEstateIncomeConsideration;\n    this.realEstateIncomeConsiderationType = realEstateIncomeConsiderationType;\n    this.taxRate = taxRate;\n    this.theoreticalInterestRate = theoreticalInterestRate;\n    this.theoreticalInterestRate2ndRank = theoreticalInterestRate2ndRank;\n    this.theoreticalMaintenanceRate = theoreticalMaintenanceRate;\n    this.estimatedCommission = estimatedCommission;\n    this.referralCommission = referralCommission;\n    this.referralCommissionSplit = referralCommissionSplit;\n    this.setMiddleware(middlewares, middlewareObject);\n  }\n\n  getLoanValue(_ref3) {\n    let {\n      propertyValue,\n      propertyWork = 0,\n      fortune,\n      pledgedValue = 0,\n      fees = this.getFeesBase({\n        propertyValue,\n        propertyWork\n      })\n    } = _ref3;\n    return propertyValue + propertyWork + fees + pledgedValue - fortune;\n  }\n\n  getPropAndWork(_ref4) {\n    let {\n      propertyValue,\n      propertyWork\n    } = _ref4;\n    return propertyValue + propertyWork;\n  }\n\n  getBorrowRatio(_ref5) {\n    let {\n      propertyValue,\n      loan = 0\n    } = _ref5;\n    return loan / propertyValue;\n  }\n\n  getLoanFromBorrowRatio(_ref6) {\n    let {\n      propertyValue,\n      borrowRatio\n    } = _ref6;\n    return borrowRatio * propertyValue;\n  }\n\n  getBorrowRatioWithoutLoan(_ref7) {\n    let {\n      propertyValue,\n      fortune\n    } = _ref7;\n    return this.getBorrowRatio({\n      propertyValue,\n      loan: this.getLoanValue({\n        propertyValue,\n        fortune\n      })\n    });\n  }\n\n  getBorrowRatioStatus(_ref8) {\n    let {\n      borrowRatio\n    } = _ref8;\n\n    if (borrowRatio <= this.maxBorrowRatio) {\n      return SUCCESS;\n    }\n\n    if (borrowRatio <= this.maxBorrowRatioWithPledge) {\n      return WARNING;\n    }\n\n    return ERROR;\n  }\n\n  getRetirementForGender() {\n    let {\n      gender = GENDER.M\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return gender === GENDER.F ? 64 : 65;\n  }\n\n  getIncomeRatio(_ref9) {\n    let {\n      monthlyIncome,\n      monthlyPayment = 0\n    } = _ref9;\n    return monthlyPayment / monthlyIncome;\n  }\n\n  getIncomeRatioStatus(_ref10) {\n    let {\n      incomeRatio\n    } = _ref10;\n\n    if (incomeRatio <= this.maxIncomeRatio) {\n      return SUCCESS;\n    }\n\n    if (this.maxIncomeRatioTight && incomeRatio <= this.maxIncomeRatioTight) {\n      // This ratio can be disabled, i.e. set to 0, and then it'll skip the warning\n      // and only display success or error\n      return WARNING;\n    }\n\n    return ERROR;\n  }\n\n  getLoanCost() {\n    let {\n      maintenance = 0,\n      interests = 0,\n      amortization = 0\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return maintenance + interests + amortization;\n  }\n\n  getLoanCostWithParts(_ref11) {\n    let {\n      maintenance,\n      interests,\n      amortization\n    } = _ref11;\n    return {\n      maintenance,\n      interests,\n      amortization,\n      total: this.getLoanCost({\n        maintenance,\n        interests,\n        amortization\n      })\n    };\n  }\n\n  checkInterestsAndTranches(_ref12) {\n    let {\n      tranches = [],\n      interestRates\n    } = _ref12;\n    return tranches.reduce((invalidRate, _ref13) => {\n      let {\n        type\n      } = _ref13;\n\n      if (invalidRate) {\n        return invalidRate;\n      }\n\n      if (!interestRates[type]) {\n        return type;\n      }\n    }, undefined);\n  }\n\n  getInterestsWithTranches() {\n    let {\n      tranches = [],\n      interestRates\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return tranches.reduce((acc, _ref14) => {\n      let {\n        type,\n        value\n      } = _ref14;\n      const rate = interestRates[type];\n\n      if (!rate || acc === '-') {\n        return '-';\n      }\n\n      return acc + value * rate;\n    }, 0);\n  }\n\n  getAmortizationRateBase() {\n    let {\n      borrowRatio = 0,\n      amortizationYears = this.amortizationYears\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let amortizationRate = 0;\n\n    if (borrowRatio > this.amortizationGoal) {\n      // The loan has to be below 65% before 15 years or before retirement,\n      // whichever comes first\n      const amountToAmortize = borrowRatio - this.amortizationGoal; // Make sure we don't create a black hole, or use negative values by error\n\n      if (amortizationYears > 0) {\n        // Amortization is the amount to amortize divided by the amount\n        // of years before the deadline\n        amortizationRate = amountToAmortize / amortizationYears;\n      }\n    } else {// For projects below 65%, stop amortizing\n      // yearlyAmortization = propAndWork * constants.amortization;\n    }\n\n    return amortizationRate / borrowRatio || 0;\n  }\n\n  getMaxLoanBase() {\n    let {\n      propertyValue,\n      propertyWork,\n      pledgedAmount = 0,\n      residenceType\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (residenceType === RESIDENCE_TYPE.MAIN_RESIDENCE) {\n      return Math.min((propertyValue + propertyWork) * this.maxBorrowRatio + pledgedAmount, (propertyValue + propertyWork) * this.maxBorrowRatioWithPledge);\n    }\n\n    return (propertyValue + propertyWork) * this.maxBorrowRatio;\n  }\n\n  getTheoreticalMonthly(_ref15) {\n    let {\n      propAndWork,\n      loanValue,\n      amortizationRate\n    } = _ref15;\n    const maintenance = propAndWork * this.theoreticalMaintenanceRate / 12;\n    const interests = loanValue * this.theoreticalInterestRate / 12;\n    const amortization = loanValue * amortizationRate / 12;\n    return this.getLoanCostWithParts({\n      maintenance,\n      interests,\n      amortization\n    });\n  }\n\n  getNotaryFeesRate() {\n    return this.notaryFees;\n  }\n\n  getMinCash(_ref16) {\n    let {\n      propertyValue,\n      propertyWork,\n      fees = this.getFeesBase({\n        propertyValue,\n        propertyWork\n      })\n    } = _ref16;\n    return (propertyValue + propertyWork) * this.minCash + fees;\n  }\n\n  getFeesBase(_ref17) {\n    let {\n      fees,\n      propertyValue = 0\n    } = _ref17;\n\n    if (fees === 0 || fees > 0) {\n      return fees;\n    }\n\n    return propertyValue * this.notaryFees;\n  }\n\n  getAveragedInterestRate(_ref18) {\n    let {\n      tranches = [],\n      interestRates = {}\n    } = _ref18;\n    return tranches.reduce((totalRate, _ref19) => {\n      let {\n        type,\n        value\n      } = _ref19;\n      return totalRate + interestRates[type] * value;\n    }, 0);\n  }\n\n}\n\nmodule.exportDefault(new FinanceCalculator());\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"financeCalculatorConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/FinanceCalculator/financeCalculatorConstants.js                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  NO_INTEREST_RATE_ERROR: () => NO_INTEREST_RATE_ERROR\n});\nconst NO_INTEREST_RATE_ERROR = 'NO_INTEREST_RATE_ERROR';\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"financeCalculatorMiddlewares.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/FinanceCalculator/financeCalculatorMiddlewares.js                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  precisionMiddleware: () => precisionMiddleware\n});\n\nconst precisionMiddleware = () => next => function () {\n  const result = next(...arguments);\n\n  if (typeof result === 'number') {\n    return Number(result.toPrecision(10));\n  }\n\n  return result;\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/FinanceCalculator/index.js                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./FinanceCalculator\", {\n  default: \"default\",\n  FinanceCalculator: \"FinanceCalculator\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"MiddlewareManager\":{\"test\":{\"MiddlewareManager.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/MiddlewareManager/test/MiddlewareManager.spec.js                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet MiddlewareManager;\nmodule.link(\"../MiddlewareManager\", {\n  default(v) {\n    MiddlewareManager = v;\n  }\n\n}, 1);\n\nconst addingMiddleware = calc => next => function () {\n  return next((arguments.length <= 0 ? undefined : arguments[0]) + 1, arguments.length <= 1 ? undefined : arguments[1]);\n};\n\nconst subtractingMiddleware = calc => next => function () {\n  return next((arguments.length <= 0 ? undefined : arguments[0]) - 1, arguments.length <= 1 ? undefined : arguments[1]);\n};\n\ndescribe('MiddlewareManager', () => {\n  describe('with Classes', () => {\n    class Calculator {\n      multiply(a, b) {\n        return a * b;\n      }\n\n      divide(a, b) {\n        return a / b;\n      }\n\n    }\n\n    let calc;\n    let middlewareManager;\n    beforeEach(() => {\n      calc = new Calculator();\n      middlewareManager = new MiddlewareManager(calc);\n    });\n    it('behaves normally without wrapping', () => {\n      expect(calc.multiply(2, 3)).to.equal(6);\n    });\n    describe('applyToMethod', () => {\n      it('intercepts a class method and modifies it', () => {\n        middlewareManager.applyToMethod('multiply', [addingMiddleware]);\n        expect(calc.multiply(2, 3)).to.equal(9);\n      });\n      it('allows non-arrays to be passed as a single param', () => {\n        middlewareManager.applyToMethod('multiply', addingMiddleware);\n        expect(calc.multiply(2, 3)).to.equal(9);\n      });\n      it('works with multiple middlewares', () => {\n        middlewareManager.applyToMethod('multiply', [addingMiddleware, subtractingMiddleware]);\n        expect(calc.multiply(2, 3)).to.equal(6);\n      });\n    });\n    describe('middlewareObjects', () => {\n      it('works with a middleware object', () => {\n        const calcMiddleware = {\n          multiply: addingMiddleware\n        };\n        middlewareManager = new MiddlewareManager(calc, calcMiddleware);\n        expect(calc.multiply(2, 3)).to.equal(9);\n      });\n      it('works with a middleware object in array', () => {\n        const calcMiddleware = {\n          multiply: addingMiddleware\n        };\n        middlewareManager = new MiddlewareManager(calc, [calcMiddleware]);\n        expect(calc.multiply(2, 3)).to.equal(9);\n      });\n      it('works with multiple middleware object', () => {\n        const calcMiddleware1 = {\n          multiply: addingMiddleware\n        };\n        const calcMiddleware2 = {\n          multiply: subtractingMiddleware\n        };\n        middlewareManager = new MiddlewareManager(calc, [calcMiddleware1, calcMiddleware2]);\n        expect(calc.multiply(2, 3)).to.equal(6);\n      });\n    });\n    describe('applyToAllMethods', () => {\n      it('applies one middleware to all methods', () => {\n        expect(calc.multiply(2, 3)).to.equal(6);\n        expect(calc.divide(4, 4)).to.equal(1);\n        middlewareManager.applyToAllMethods(addingMiddleware);\n        expect(calc.multiply(2, 3)).to.equal(9);\n        expect(calc.divide(4, 4)).to.equal(1.25);\n      });\n    });\n    it('works with multiple middleware managers', () => {\n      middlewareManager.applyToMethod('multiply', [addingMiddleware]);\n      const middlewareManager2 = new MiddlewareManager(calc);\n      middlewareManager2.applyToMethod('multiply', [subtractingMiddleware]);\n      expect(calc.multiply(2, 3)).to.equal(6);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"argumentMapperMiddleware.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/MiddlewareManager/test/argumentMapperMiddleware.spec.js                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet makeArgumentMapper;\nmodule.link(\"../argumentMapperMiddleware\", {\n  default(v) {\n    makeArgumentMapper = v;\n  }\n\n}, 1);\nlet MiddlewareManager;\nmodule.link(\"../MiddlewareManager\", {\n  default(v) {\n    MiddlewareManager = v;\n  }\n\n}, 2);\ndescribe('argumentMapperMiddleware', () => {\n  class Calculator {\n    multiply(_ref) {\n      let {\n        a,\n        b\n      } = _ref;\n      return a * b;\n    }\n\n    divide(a, b) {\n      return a / b;\n    }\n\n  }\n\n  let calc;\n  beforeEach(() => {\n    calc = new Calculator();\n  });\n  it('works for functions that take objects', () => {\n    expect(calc.multiply({\n      a: 2,\n      b: 3\n    })).to.equal(6);\n    const middleware = makeArgumentMapper({\n      multiply: (_ref2) => {\n        let {\n          c,\n          d\n        } = _ref2;\n        return {\n          a: c,\n          b: d\n        };\n      }\n    });\n    const middlewareManager = new MiddlewareManager(calc, middleware);\n    expect(calc.multiply({\n      c: 2,\n      d: 3\n    })).to.equal(6);\n  });\n  it('works for functions that take multiple arguments', () => {\n    expect(calc.divide(4, 4)).to.equal(1);\n    const middleware = makeArgumentMapper({\n      divide: (_ref3) => {\n        let {\n          a,\n          b\n        } = _ref3;\n        return [a, b];\n      }\n    });\n    const middlewareManager = new MiddlewareManager(calc, middleware);\n    expect(calc.divide({\n      a: 4,\n      b: 4\n    })).to.equal(1);\n  });\n  it('does not alter methods without mappings', () => {\n    const middleware = makeArgumentMapper({\n      multiply: (_ref4) => {\n        let {\n          c,\n          d\n        } = _ref4;\n        return {\n          a: c,\n          b: d\n        };\n      }\n    });\n    const middlewareManager = new MiddlewareManager(calc, middleware);\n    expect(calc.multiply({\n      c: 2,\n      d: 3\n    })).to.equal(6);\n    expect(calc.divide(4, 4)).to.equal(1);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"MiddlewareManager.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/MiddlewareManager/MiddlewareManager.js                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet compose;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  }\n\n}, 0);\nlet isArray;\nmodule.link(\"lodash/isArray\", {\n  default(v) {\n    isArray = v;\n  }\n\n}, 1);\nlet difference;\nmodule.link(\"lodash/difference\", {\n  default(v) {\n    difference = v;\n  }\n\n}, 2);\nconst middlewareManagerHash = [];\nconst CLASS_METHODS_TO_EXCLUDE = ['hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable', 'toString', 'valueOf', 'toLocaleString', '__defineGetter__', '__defineSetter__', '__lookupGetter__', '__lookupSetter__'];\n\n// Careful, methods starting with \"_\" will not be wrapped by middleware,\n// except if you use a middlewareObject\nclass MiddlewareManager {\n  constructor(target, middlewareObjects) {\n    let instance = middlewareManagerHash.find(key => key._target === target); // a target can only has one MiddlewareManager instance\n\n    if (instance === undefined) {\n      this._target = target;\n      this._methods = {};\n      this._methodMiddlewares = {};\n      middlewareManagerHash.push(this);\n      instance = this;\n    }\n\n    if (middlewareObjects) {\n      instance.useObjectMiddleware(middlewareObjects);\n    }\n\n    return instance;\n  }\n\n  applyToAllMethods(_middlewares, omit) {\n    const middlewares = this.arrayify(_middlewares);\n    const methods = this.getAllMethodNames(this._target);\n    methods.filter(name => {\n      if (omit) {\n        return !omit.includes(name);\n      }\n\n      return true;\n    }).forEach(method => this.applyToMethod(method, middlewares));\n    return this;\n  }\n\n  getAllMethodNames() {\n    let obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let stop = arguments.length > 1 ? arguments[1] : undefined;\n    const methodNames = [];\n    let proto = Object.getPrototypeOf(obj);\n\n    while (proto && proto !== stop) {\n      Object.getOwnPropertyNames(proto).forEach(name => {\n        if (name !== 'constructor') {\n          if (this.hasMethod(proto, name)) {\n            methodNames.push(name);\n          }\n        }\n      });\n      proto = Object.getPrototypeOf(proto);\n    }\n\n    return difference(methodNames, CLASS_METHODS_TO_EXCLUDE);\n  }\n\n  hasMethod(obj, name) {\n    const desc = Object.getOwnPropertyDescriptor(obj, name);\n    return !!desc && typeof desc.value === 'function';\n  }\n\n  applyToMethod(methodName, _middlewares) {\n    const middlewares = this.arrayify(_middlewares);\n\n    if (typeof methodName === 'string' && !this.stringStartsWithUnderscore(methodName)) {\n      const method = this._methods[methodName] || this._target[methodName];\n\n      if (typeof method === 'function') {\n        this._methods[methodName] = method;\n\n        if (this._methodMiddlewares[methodName] === undefined || !isArray(this._methodMiddlewares[methodName])) {\n          this._methodMiddlewares[methodName] = [];\n        }\n\n        middlewares.forEach(middleware => typeof middleware === 'function' && this._methodMiddlewares[methodName].push(middleware(this._target)));\n        this._target[methodName] = compose(...this._methodMiddlewares[methodName])(method.bind(this._target));\n      }\n    }\n\n    return this;\n  }\n\n  stringStartsWithUnderscore(string) {\n    return /^_+|_+$/g.test(string);\n  }\n\n  useObjectMiddleware(_objectMiddlewares) {\n    const objectMiddlewares = this.arrayify(_objectMiddlewares);\n    Array.prototype.slice.call(objectMiddlewares).forEach(arg => {\n      // A middleware object can specify target functions within middlewareMethods (Array).\n      // e.g. obj.middlewareMethods = ['method1', 'method2'];\n      // only method1 and method2 will be the target function.\n      typeof arg === 'object' && (arg.middlewareMethods || Object.keys(arg)).forEach(key => {\n        typeof arg[key] === 'function' && this.applyToMethod(key, arg[key].bind(arg));\n      });\n    });\n    return this;\n  }\n\n  arrayify(maybeArray) {\n    return isArray(maybeArray) ? maybeArray : [maybeArray];\n  }\n\n}\n\nmodule.exportDefault(MiddlewareManager);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"argumentMapperMiddleware.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/MiddlewareManager/argumentMapperMiddleware.js                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  makeArgumentMapper: () => makeArgumentMapper\n});\nlet isArray;\nmodule.link(\"lodash/isArray\", {\n  default(v) {\n    isArray = v;\n  }\n\n}, 0);\n\nconst makeArgumentMapper = mappings => Object.keys(mappings).reduce((mapper, key) => (0, _objectSpread2.default)({}, mapper, {\n  [key]: () => next => function () {\n    const argumentMapperFunc = mappings[key];\n    const newArgumentStructure = argumentMapperFunc(...arguments);\n\n    if (isArray(newArgumentStructure)) {\n      return next(...newArgumentStructure);\n    }\n\n    return next(newArgumentStructure);\n  }\n}), {});\n\nmodule.exportDefault(makeArgumentMapper);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/MiddlewareManager/index.js                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./MiddlewareManager\", {\n  default: \"default\"\n}, 0);\nmodule.link(\"./argumentMapperMiddleware\", {\n  \"*\": \"*\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"notaryFees\":{\"test\":{\"NotaryFeesCalculator.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/notaryFees/test/NotaryFeesCalculator.spec.js                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet RESIDENCE_TYPE;\nmodule.link(\"../../../api/constants\", {\n  RESIDENCE_TYPE(v) {\n    RESIDENCE_TYPE = v;\n  }\n\n}, 1);\nlet NotaryFeesCalculator;\nmodule.link(\"../NotaryFeesCalculator\", {\n  default(v) {\n    NotaryFeesCalculator = v;\n  }\n\n}, 2);\nlet PURCHASE_TYPE;\nmodule.link(\"../../../api/constants\", {\n  PURCHASE_TYPE(v) {\n    PURCHASE_TYPE = v;\n  }\n\n}, 3);\nlet GE;\nmodule.link(\"../cantonConstants\", {\n  GE(v) {\n    GE = v;\n  }\n\n}, 4);\ndescribe('NotaryFeesCalculator', () => {\n  let calc;\n  let loan;\n  beforeEach(() => {\n    loan = {\n      structure: {\n        property: {\n          value: 1000000\n        },\n        wantedLoan: 800000\n      },\n      borrowers: [{\n        _id: 'borrower1'\n      }]\n    };\n  });\n  describe('general', () => {\n    before(() => {\n      calc = new NotaryFeesCalculator({\n        canton: 'GE'\n      });\n    });\n    it('returns 0 for buyers contract fees for a refinancing loan', () => {\n      loan.purchaseType = PURCHASE_TYPE.REFINANCING;\n      const fees = calc.getNotaryFeesForLoan({\n        loan\n      });\n      expect(fees.buyersContractFees.total).to.equal(0);\n    });\n  });\n  describe('GE', () => {\n    before(() => {\n      calc = new NotaryFeesCalculator({\n        canton: 'GE'\n      });\n    });\n    it('returns the correct amount for a buyers contract', () => {\n      const fees = calc.getNotaryFeesForLoan({\n        loan\n      });\n      expect(fees.buyersContractFees.total).to.equal(39100.4);\n    });\n    it('returns the correct amount for a new mortgage note', () => {\n      const fees = calc.getNotaryFeesForLoan({\n        loan\n      });\n      expect(fees.mortgageNoteFees.total).to.equal(16058.7);\n    });\n    it('returns the correct amount as a whole', () => {\n      const fees = calc.getNotaryFeesForLoan({\n        loan\n      });\n      expect(fees.total).to.equal(55159.1);\n    });\n    it('returns the correct amount for a main residence with casatax', () => {\n      loan.residenceType = RESIDENCE_TYPE.MAIN_RESIDENCE;\n      const fees = calc.getNotaryFeesForLoan({\n        loan\n      });\n      expect(fees.total).to.equal(31944.1);\n    });\n    it('ignores propertyWork', () => {\n      loan.residenceType = RESIDENCE_TYPE.MAIN_RESIDENCE;\n      loan.structure.propertyWork = 100000;\n      const fees = calc.getNotaryFeesForLoan({\n        loan\n      });\n      expect(fees.total).to.equal(31944.1);\n    });\n    it('caps casatax deductions for very small properties', () => {\n      loan.residenceType = RESIDENCE_TYPE.MAIN_RESIDENCE;\n      loan.structure.property.value = 400000;\n      loan.structure.wantedLoan = 320000;\n      const fees = calc.getNotaryFeesForLoan({\n        loan\n      });\n      expect(fees.total).to.equal(9898.16);\n    });\n    it('works for large properties', () => {\n      loan.structure.property.value = 3000000;\n      loan.structure.wantedLoan = 2400000;\n      const fees = calc.getNotaryFeesForLoan({\n        loan\n      });\n      expect(fees.total).to.equal(154530.65);\n    });\n    it('adds tax on propertyWork', () => {// Test code\n    });\n    it('calculates 0 mortgageNoteFees if no mortgageNote is required', () => {\n      loan.structure.mortgageNoteIds = ['asdf'];\n      loan.borrowers[0].mortgageNotes = [{\n        _id: 'asdf',\n        value: 800000\n      }];\n      const fees = calc.getNotaryFeesForLoan({\n        loan\n      });\n      expect(fees.mortgageNoteFees.total).to.equal(0);\n    });\n    it('calculates fees for a different structure', () => {\n      loan = {\n        structures: [{\n          id: 'struct2',\n          wantedLoan: 800000,\n          propertyId: 'prop'\n        }],\n        properties: [{\n          _id: 'prop',\n          value: 1000000\n        }]\n      };\n      const fees = calc.getNotaryFeesForLoan({\n        loan,\n        structureId: 'struct2'\n      });\n      expect(fees.total).to.equal(55159.1);\n    });\n    it('calculates fees for properties with landValue and constructionValue, if it is a construction', () => {\n      loan.purchaseType = PURCHASE_TYPE.CONSTRUCTION;\n      loan.structure.property.value = 0;\n      loan.structure.property.totalValue = 1000000;\n      loan.structure.property.landValue = 400000;\n      loan.structure.property.constructionValue = 400000;\n      loan.structure.property.additionalMargin = 200000;\n      const fees = calc.getNotaryFeesForLoan({\n        loan\n      });\n      expect(fees.buyersContractFees.total).to.equal(28269.5);\n    });\n    it('calculates casatax properly for a construction', () => {\n      loan.residenceType = RESIDENCE_TYPE.MAIN_RESIDENCE;\n      loan.purchaseType = PURCHASE_TYPE.CONSTRUCTION;\n      loan.structure.property.value = 0;\n      loan.structure.property.landValue = 400000;\n      loan.structure.property.constructionValue = 650000;\n      loan.structure.property.additionalMargin = 100000;\n      const fees = calc.getNotaryFeesForLoan({\n        loan\n      });\n      expect(fees.buyersContractFees.propertyRegistrationTax).to.equal(fees.deductions.buyersContractDeductions);\n      expect(fees.mortgageNoteFees.mortgageNoteRegistrationTax * GE.MORTGAGE_NOTE_CASATAX_DEDUCTION).to.equal(fees.deductions.mortgageNoteDeductions);\n      expect(fees.buyersContractFees.total).to.equal(27034.85);\n    });\n  });\n  describe('VD', () => {\n    before(() => {\n      calc = new NotaryFeesCalculator({\n        canton: 'VD'\n      });\n    });\n    it('returns the correct amounts for a regular loan', () => {\n      const fees = calc.getNotaryFeesForLoan({\n        loan\n      });\n      expect(fees).to.deep.include({\n        total: 44954.25\n      });\n      expect(fees.buyersContractFees).to.deep.include({\n        total: 38596.38\n      });\n      expect(fees.mortgageNoteFees).to.deep.include({\n        total: 6357.88\n      });\n    });\n  });\n  describe('unknown cantons', () => {\n    before(() => {\n      calc = new NotaryFeesCalculator({\n        canton: 'XX'\n      });\n    });\n    it(\"returns 5% for cantons where we don't have any Math\", () => {\n      const fees = calc.getNotaryFeesForLoan({\n        loan\n      });\n      expect(fees.total).to.equal(50000);\n    });\n  });\n  describe('getNotaryFeesWithoutLoan', () => {\n    it('should work', () => {\n      calc = new NotaryFeesCalculator({\n        canton: 'GE'\n      });\n      const notaryFees = calc.getNotaryFeesWithoutLoan({\n        propertyValue: 1000000,\n        mortgageNoteIncrease: 800000,\n        residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE\n      });\n      expect(notaryFees.total).to.equal(31944.1);\n    });\n    it('should work for unknown cantons', () => {\n      calc = new NotaryFeesCalculator({\n        canton: 'XX'\n      });\n      const notaryFees = calc.getNotaryFeesWithoutLoan({\n        propertyValue: 1000000,\n        mortgageNoteIncrease: 800000,\n        residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE\n      });\n      expect(notaryFees.total).to.equal(50000);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"degressive.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/notaryFees/test/degressive.spec.js                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet degressive;\nmodule.link(\"../degressive\", {\n  default(v) {\n    degressive = v;\n  }\n\n}, 1);\nlet VD;\nmodule.link(\"../cantonConstants\", {\n  VD(v) {\n    VD = v;\n  }\n\n}, 2);\ndescribe('degressive', () => {\n  it('returns 0 for amount of 0', () => {\n    expect(degressive({\n      amount: 0\n    })).to.equal(0);\n  });\n  it('returns 0 for negative amounts', () => {\n    expect(degressive({\n      amount: -5\n    })).to.equal(0);\n  });\n  it('returns 0 if no brackets are given', () => {\n    expect(degressive({\n      amount: 100\n    })).to.equal(0);\n    expect(degressive({\n      amount: 100,\n      brackets: []\n    })).to.equal(0);\n  });\n  it('uses single brackets', () => {\n    expect(degressive({\n      amount: 100,\n      brackets: [{\n        rate: 0.1,\n        max: 1000\n      }]\n    })).to.equal(10);\n  });\n  it('uses multiple brackets', () => {\n    expect(degressive({\n      amount: 800,\n      brackets: [{\n        rate: 0.1,\n        max: 500\n      }, {\n        rate: 0.2,\n        max: 1000\n      }]\n    })).to.equal(110);\n  });\n  it('ignores higher brackets', () => {\n    expect(degressive({\n      amount: 800,\n      brackets: [{\n        rate: 0.1,\n        max: 500\n      }, {\n        rate: 0.2,\n        max: 1000\n      }, {\n        rate: 0.3,\n        max: 1100\n      }]\n    })).to.equal(110);\n  });\n  it('works with longer tax bracket tables', () => {\n    expect(degressive({\n      amount: 800,\n      brackets: [{\n        rate: 0.1,\n        max: 100\n      }, {\n        rate: 0.2,\n        max: 200\n      }, {\n        rate: 0.3,\n        max: 300\n      }, {\n        rate: 0.4,\n        max: 400\n      }, {\n        rate: 0.5,\n        max: 500\n      }, {\n        rate: 0.6,\n        max: 600\n      }, {\n        rate: 0.7,\n        max: 700\n      }, {\n        rate: 0.8,\n        max: 800\n      }, {\n        rate: 0.9,\n        max: 900\n      }]\n    })).to.equal(360);\n  });\n  it(\"should throw if tax brackets aren't provided in the right order\", () => {\n    expect(() => degressive({\n      amount: 100,\n      brackets: [{\n        rate: 0.1,\n        max: 50\n      }, {\n        rate: 0.2,\n        max: 30\n      }]\n    })).to.throw('increasing order');\n  });\n  it('should cap the degressive tax if maxTax is given', () => {\n    expect(degressive({\n      amount: 1000,\n      brackets: [{\n        max: 500,\n        rate: 0.5\n      }],\n      maxTax: 200\n    })).to.equal(200);\n  });\n  it('should use minTax if provided', () => {\n    expect(degressive({\n      amount: 1000,\n      brackets: [{\n        max: 500,\n        rate: 0.5\n      }],\n      minTax: 400\n    })).to.equal(400);\n  });\n  it('should use the last bracket on the remaining amount if it has no max value', () => {\n    expect(degressive({\n      amount: 1000,\n      brackets: [{\n        rate: 0.1,\n        max: 200\n      }, {\n        rate: 0.2\n      }]\n    })).to.equal(180);\n  });\n  it('should use minTax if min and max are provided', () => {\n    expect(degressive({\n      amount: 1000,\n      brackets: [{\n        max: 500,\n        rate: 0.5\n      }],\n      minTax: 400,\n      maxTax: 1000\n    })).to.equal(400);\n  });\n  it('should use maxTax if min and max are provided', () => {\n    expect(degressive({\n      amount: 1000000,\n      brackets: [{\n        max: 100000,\n        rate: 0.5\n      }],\n      minTax: 400,\n      maxTax: 1000\n    })).to.equal(1000);\n  });\n  it('works for this VD example confirmed by a notary', () => {\n    expect(degressive({\n      amount: 940000,\n      brackets: VD.NOTARY_NOTE_BRACKETS\n    })).to.equal(2585);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"NotaryFeesCalculator.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/notaryFees/NotaryFeesCalculator.js                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nlet cantonConfigs;\nmodule.link(\"./cantonConfigs\", {\n  \"*\"(v) {\n    cantonConfigs = v;\n  }\n\n}, 0);\nlet Calculator;\nmodule.link(\"../Calculator\", {\n  default(v) {\n    Calculator = v;\n  }\n\n}, 1);\nlet NOTARY_FEES;\nmodule.link(\"../../config/financeConstants\", {\n  NOTARY_FEES(v) {\n    NOTARY_FEES = v;\n  }\n\n}, 2);\nlet PURCHASE_TYPE;\nmodule.link(\"../../api/constants\", {\n  PURCHASE_TYPE(v) {\n    PURCHASE_TYPE = v;\n  }\n\n}, 3);\n\nconst roundToCents = val => Number(val.toFixed(2));\n\nconst roundObjectKeys = obj => Object.keys(obj).reduce((newObj, key) => (0, _objectSpread2.default)({}, newObj, {\n  [key]: typeof obj[key] === 'number' ? roundToCents(obj[key]) : obj[key]\n}), {});\n\nclass NotaryFeesCalculator {\n  constructor(_ref) {\n    let {\n      canton\n    } = _ref;\n    this.init(canton);\n  }\n\n  init(canton) {\n    const config = cantonConfigs[canton];\n    this.canton = canton;\n    Object.assign(this, config);\n  }\n\n  hasDetailedConfig() {\n    return cantonConfigs[this.canton];\n  }\n\n  shouldUseConstructionMath(_ref2) {\n    let {\n      loan,\n      structureId\n    } = _ref2;\n    const hasDetailedValue = Calculator.hasDetailedPropertyValue({\n      loan,\n      structureId\n    });\n    const shouldUseConstructionNotaryFees = Calculator.shouldUseConstructionNotaryFees({\n      loan,\n      structureId\n    });\n    return hasDetailedValue && shouldUseConstructionNotaryFees;\n  }\n\n  getNotaryFeesForLoan(_ref3) {\n    let {\n      loan,\n      structureId\n    } = _ref3;\n    const propertyValue = Calculator.selectPropertyValue({\n      loan,\n      structureId\n    });\n\n    if (!this.hasDetailedConfig()) {\n      return this.getDefaultFees({\n        propertyValue\n      });\n    }\n\n    const {\n      residenceType\n    } = loan;\n    const mortgageNoteIncrease = Calculator.getMortgageNoteIncrease({\n      loan,\n      structureId\n    }); // Acte d'achat\n\n    const buyersContractFees = this.buyersContractFees({\n      loan,\n      structureId\n    }); // Cédule hypothécaire\n\n    const mortgageNoteFees = this.mortgageNoteFees({\n      mortgageNoteIncrease\n    }); // Déductions\n\n    const deductions = this.getDeductions({\n      propertyValue,\n      mortgageNoteFees,\n      residenceType,\n      mortgageNoteIncrease,\n      propertyTransferTax: buyersContractFees.propertyRegistrationTax\n    });\n    const roundedResult = roundObjectKeys({\n      total: buyersContractFees.total + mortgageNoteFees.total - deductions.total,\n      buyersContractFees: roundObjectKeys(buyersContractFees),\n      mortgageNoteFees: roundObjectKeys(mortgageNoteFees),\n      deductions: roundObjectKeys(deductions),\n      canton: this.canton,\n      estimate: false\n    });\n    return roundedResult;\n  }\n\n  getNotaryFeesWithoutLoan(_ref4) {\n    let {\n      propertyValue,\n      mortgageNoteIncrease,\n      residenceType\n    } = _ref4;\n\n    if (!this.hasDetailedConfig()) {\n      return this.getDefaultFees({\n        propertyValue\n      });\n    } // Acte d'achat\n\n\n    const buyersContractFees = this.buyersContractFeesAcquisition({\n      propertyValue\n    }); // Cédule hypothécaire\n\n    const mortgageNoteFees = this.mortgageNoteFees({\n      mortgageNoteIncrease\n    }); // Déductions\n\n    const deductions = this.getDeductions({\n      propertyValue,\n      mortgageNoteIncrease,\n      residenceType,\n      propertyTransferTax: this.propertyRegistrationTax({\n        propertyValue\n      })\n    });\n    const roundedResult = roundObjectKeys({\n      total: buyersContractFees.total + mortgageNoteFees.total - deductions.total,\n      buyersContractFees: roundObjectKeys(buyersContractFees),\n      mortgageNoteFees: roundObjectKeys(mortgageNoteFees),\n      deductions: roundObjectKeys(deductions),\n      canton: this.canton,\n      estimate: false\n    });\n    return roundedResult;\n  }\n\n  buyersContractFees(_ref5) {\n    let {\n      loan,\n      structureId\n    } = _ref5;\n\n    if (loan.purchaseType === PURCHASE_TYPE.REFINANCING) {\n      return {\n        total: 0\n      };\n    }\n\n    if (this.shouldUseConstructionMath({\n      loan,\n      structureId\n    })) {\n      const {\n        landValue = 0,\n        constructionValue = 0,\n        additionalMargin = 0\n      } = Calculator.selectProperty({\n        loan,\n        structureId\n      });\n      return this.buyersContractFeesConstruction({\n        landValue,\n        constructionValue,\n        additionalMargin\n      });\n    }\n\n    const propertyValue = Calculator.selectPropertyValue({\n      loan,\n      structureId\n    });\n    return this.buyersContractFeesAcquisition({\n      propertyValue\n    });\n  }\n\n  buyersContractFeesAcquisition(_ref6) {\n    let {\n      propertyValue\n    } = _ref6;\n    // Frais d'enregistrement/Droits de mutation\n    const propertyRegistrationTax = this.propertyRegistrationTax({\n      propertyValue\n    }); // Emoluments du notaire\n\n    const notaryIncomeFromProperty = this.notaryIncomeFromProperty({\n      propertyValue\n    }); // Registre foncier\n\n    const landRegistryPropertyTax = this.landRegistryPropertyTax({\n      propertyValue\n    }); // Frais du notaire additionnels estimés\n\n    const additionalFees = this.additionalFees();\n    return {\n      total: propertyRegistrationTax + notaryIncomeFromProperty + landRegistryPropertyTax + additionalFees,\n      propertyRegistrationTax,\n      landRegistryPropertyTax,\n      notaryIncomeFromProperty,\n      additionalFees\n    };\n  }\n\n  buyersContractFeesConstruction(_ref7) {\n    let {\n      landValue,\n      constructionValue,\n      additionalMargin\n    } = _ref7;\n    // Frais d'enregistrement/Droits de mutation\n    const propertyRegistrationTax = this.propertyRegistrationTax({\n      propertyValue: landValue + additionalMargin\n    }); // Emoluments du notaire\n\n    const notaryIncomeFromProperty = this.notaryIncomeFromProperty({\n      propertyValue: landValue + additionalMargin\n    }); // Registre foncier\n\n    const landRegistryPropertyTax = this.landRegistryPropertyTax({\n      propertyValue: landValue + additionalMargin\n    }); // Contrat de construction\n\n    const propertyConstructionTax = this.propertyConstructionTax({\n      constructionValue\n    }); // Frais du notaire additionnels estimés\n\n    const additionalFees = this.additionalFees();\n    return {\n      total: propertyRegistrationTax + notaryIncomeFromProperty + landRegistryPropertyTax + propertyConstructionTax + additionalFees,\n      propertyRegistrationTax,\n      propertyConstructionTax,\n      landRegistryPropertyTax,\n      notaryIncomeFromProperty,\n      additionalFees\n    };\n  }\n\n  mortgageNoteFees(_ref8) {\n    let {\n      mortgageNoteIncrease\n    } = _ref8;\n    // Frais d'enregistrement\n    const mortgageNoteRegistrationTax = this.mortgageNoteRegistrationTax({\n      mortgageNoteIncrease\n    }); // Emoluments du notaire\n\n    const notaryIncomeFromMortgageNote = this.notaryIncomeFromMortgageNote({\n      mortgageNoteIncrease\n    }); // Registre foncier\n\n    const landRegistryMortgageNoteTax = this.landRegistryMortgageNoteTax({\n      mortgageNoteIncrease\n    }); // Frais du notaire additionnels estimés\n    // Nuls si aucune cédule nécessaire\n\n    const additionalFees = mortgageNoteIncrease > 0 ? this.additionalFees() : 0;\n    return {\n      total: mortgageNoteRegistrationTax + landRegistryMortgageNoteTax + notaryIncomeFromMortgageNote + additionalFees,\n      mortgageNoteRegistrationTax,\n      landRegistryMortgageNoteTax,\n      notaryIncomeFromMortgageNote,\n      additionalFees\n    };\n  }\n\n  getDeductions(_ref9) {\n    let {\n      propertyValue,\n      mortgageNoteIncrease,\n      residenceType,\n      propertyTransferTax\n    } = _ref9;\n    const buyersContractDeductions = this.buyersContractDeductions ? this.buyersContractDeductions({\n      residenceType,\n      propertyValue,\n      transferTax: propertyTransferTax\n    }) : 0;\n    const mortgageNoteDeductions = this.mortgageNoteDeductions ? this.mortgageNoteDeductions({\n      residenceType,\n      propertyValue,\n      mortgageNoteRegistrationTax: this.mortgageNoteRegistrationTax({\n        mortgageNoteIncrease\n      })\n    }) : 0;\n    return {\n      buyersContractDeductions,\n      mortgageNoteDeductions,\n      total: buyersContractDeductions + mortgageNoteDeductions\n    };\n  }\n\n  getDefaultFees(_ref10) {\n    let {\n      propertyValue\n    } = _ref10;\n    return {\n      total: propertyValue * NOTARY_FEES,\n      canton: this.canton,\n      estimate: true\n    };\n  }\n\n}\n\nmodule.exportDefault(NotaryFeesCalculator);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"cantonConfigs.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/notaryFees/cantonConfigs.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  GE: () => GE,\n  VD: () => VD\n});\nlet RESIDENCE_TYPE;\nmodule.link(\"../../api/constants\", {\n  RESIDENCE_TYPE(v) {\n    RESIDENCE_TYPE = v;\n  }\n\n}, 0);\nlet degressive;\nmodule.link(\"./degressive\", {\n  default(v) {\n    degressive = v;\n  }\n\n}, 1);\nlet cantons;\nmodule.link(\"./cantonConstants\", {\n  \"*\"(v) {\n    cantons = v;\n  }\n\n}, 2);\nlet VAT;\nmodule.link(\"../../config/financeConstants\", {\n  VAT(v) {\n    VAT = v;\n  }\n\n}, 3);\n\nconst isCasatax = (_ref) => {\n  let {\n    residenceType,\n    propertyValue\n  } = _ref;\n  return residenceType === RESIDENCE_TYPE.MAIN_RESIDENCE && propertyValue <= cantons.GE.CASATAX_CUTOFF;\n};\n\nconst GE = {\n  notaryIncomeFromProperty: (_ref2) => {\n    let {\n      propertyValue\n    } = _ref2;\n    return degressive({\n      amount: propertyValue,\n      brackets: cantons.GE.NOTARY_PROPERTY_BRACKETS,\n      minTax: cantons.GE.NOTARY_PROPERTY_BRACKETS_MIN\n    }) * (1 + VAT);\n  },\n  notaryIncomeFromMortgageNote: (_ref3) => {\n    let {\n      mortgageNoteIncrease\n    } = _ref3;\n    return degressive({\n      amount: mortgageNoteIncrease,\n      brackets: cantons.GE.NOTARY_NOTE_BRACKETS\n    }) * (1 + VAT);\n  },\n  propertyConstructionTax: (_ref4) => {\n    let {\n      constructionValue\n    } = _ref4;\n    return constructionValue * cantons.GE.PROPERTY_CONSTRUCTION_TAX;\n  },\n  propertyRegistrationTax: (_ref5) => {\n    let {\n      propertyValue\n    } = _ref5;\n    return propertyValue * cantons.GE.PROPERTY_REGISTRATION_TAX;\n  },\n  landRegistryPropertyTax: (_ref6) => {\n    let {\n      propertyValue\n    } = _ref6;\n    return propertyValue * cantons.GE.LAND_REGISTRY_PROPERTY_TAX;\n  },\n  mortgageNoteRegistrationTax: (_ref7) => {\n    let {\n      mortgageNoteIncrease\n    } = _ref7;\n    return mortgageNoteIncrease * cantons.GE.MORTGAGE_NOTE_REGISTRATION_TAX;\n  },\n  landRegistryMortgageNoteTax: (_ref8) => {\n    let {\n      mortgageNoteIncrease\n    } = _ref8;\n    return mortgageNoteIncrease * cantons.GE.LAND_REGISTRY_MORTGAGE_NOTE_TAX;\n  },\n  buyersContractDeductions: (_ref9) => {\n    let {\n      residenceType,\n      propertyValue,\n      transferTax\n    } = _ref9;\n    return isCasatax({\n      residenceType,\n      propertyValue\n    }) ? Math.min(cantons.GE.CASATAX_PROPERTY_DEDUCTION, transferTax) : 0;\n  },\n  additionalFees: () => cantons.GE.ADDITIONAL_FEES,\n  mortgageNoteDeductions: (_ref10) => {\n    let {\n      residenceType,\n      propertyValue,\n      mortgageNoteRegistrationTax\n    } = _ref10;\n    return isCasatax({\n      residenceType,\n      propertyValue\n    }) ? mortgageNoteRegistrationTax * cantons.GE.MORTGAGE_NOTE_CASATAX_DEDUCTION : 0;\n  }\n};\nconst VD = {\n  notaryIncomeFromProperty: (_ref11) => {\n    let {\n      propertyValue\n    } = _ref11;\n    return degressive({\n      amount: propertyValue,\n      brackets: cantons.VD.NOTARY_PROPERTY_BRACKETS,\n      minTax: cantons.VD.NOTARY_PROPERTY_BRACKETS_MIN\n    }) * (1 + VAT);\n  },\n  propertyConstructionTax: () => 0,\n  // TODO\n  notaryIncomeFromMortgageNote: (_ref12) => {\n    let {\n      mortgageNoteIncrease\n    } = _ref12;\n    return degressive({\n      amount: mortgageNoteIncrease,\n      brackets: cantons.VD.NOTARY_NOTE_BRACKETS\n    }) * (1 + VAT);\n  },\n  propertyRegistrationTax: (_ref13) => {\n    let {\n      propertyValue\n    } = _ref13;\n    return propertyValue * cantons.VD.PROPERTY_REGISTRATION_TAX;\n  },\n  landRegistryPropertyTax: (_ref14) => {\n    let {\n      propertyValue\n    } = _ref14;\n    return propertyValue * cantons.VD.LAND_REGISTRY_PROPERTY_TAX;\n  },\n  mortgageNoteRegistrationTax: (_ref15) => {\n    let {\n      mortgageNoteIncrease\n    } = _ref15;\n    return 0;\n  },\n  landRegistryMortgageNoteTax: (_ref16) => {\n    let {\n      mortgageNoteIncrease\n    } = _ref16;\n    return mortgageNoteIncrease * cantons.VD.LAND_REGISTRY_MORTGAGE_NOTE_TAX;\n  },\n  additionalFees: () => cantons.VD.ADDITIONAL_FEES\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"cantonConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/notaryFees/cantonConstants.js                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  GE: () => GE,\n  VD: () => VD,\n  VS: () => VS,\n  FR: () => FR\n});\nconst GE = {\n  PROPERTY_REGISTRATION_TAX: 0.03,\n  NOTARY_PROPERTY_BRACKETS_MIN: 200,\n  NOTARY_PROPERTY_BRACKETS: [{\n    rate: 0.007,\n    max: 200000\n  }, {\n    rate: 0.006,\n    max: 400000\n  }, {\n    rate: 0.0045,\n    max: 800000\n  }, {\n    rate: 0.004,\n    max: 1000000\n  }, {\n    rate: 0.0035,\n    max: 1500000\n  }, {\n    rate: 0.003,\n    max: 2000000\n  }, {\n    rate: 0.0025,\n    max: 3500000\n  }, {\n    rate: 0.002,\n    max: 5000000\n  }, {\n    rate: 0.0015,\n    max: 7500000\n  }, {\n    rate: 0.001,\n    max: 10000000\n  }, {\n    rate: 0.00075,\n    max: 20000000\n  }, {\n    rate: 0.0005\n  }],\n  NOTARY_NOTE_BRACKETS_MIN: 100,\n  NOTARY_NOTE_BRACKETS: [{\n    rate: 0.005,\n    max: 200000\n  }, {\n    rate: 0.004,\n    max: 500000\n  }, {\n    rate: 0.003,\n    max: 2000000\n  }, {\n    rate: 0.002,\n    max: 5000000\n  }, {\n    rate: 0.001\n  }],\n  MORTGAGE_NOTE_REGISTRATION_TAX: 0.01365,\n  LAND_REGISTRY_PROPERTY_TAX: 0.0025,\n  LAND_REGISTRY_MORTGAGE_NOTE_TAX: 0.001,\n  ADDITIONAL_FEES: 1000,\n  CASATAX_CUTOFF: 1183649,\n  CASATAX_PROPERTY_DEDUCTION: 17755,\n  PROPERTY_CONSTRUCTION_TAX: 0.01,\n  MORTGAGE_NOTE_CASATAX_DEDUCTION: 0.5\n};\nconst VD = {\n  PROPERTY_REGISTRATION_TAX: 0.033,\n  NOTARY_PROPERTY_BRACKETS_MIN: 300,\n  NOTARY_PROPERTY_BRACKETS: [{\n    rate: 0.007,\n    max: 100000\n  }, {\n    rate: 0.004,\n    max: 300000\n  }, {\n    rate: 0.0025,\n    max: 500000\n  }, {\n    rate: 0.002,\n    max: 750000\n  }, {\n    rate: 0.0015,\n    max: 2500000\n  }, {\n    rate: 0.001,\n    max: 10000000\n  }, {\n    rate: 0.0005,\n    max: 20000000\n  }, {\n    rate: 0.00025\n  }],\n  NOTARY_NOTE_BRACKETS_MIN: 100,\n  NOTARY_NOTE_BRACKETS: [{\n    rate: 0.005,\n    max: 100000\n  }, {\n    rate: 0.0035,\n    max: 300000\n  }, {\n    rate: 0.003,\n    max: 500000\n  }, {\n    rate: 0.002,\n    max: 750000\n  }, {\n    rate: 0.0015,\n    max: 1000000\n  }, {\n    rate: 0.001,\n    max: 5000000\n  }, {\n    rate: 0.0005,\n    max: 10000000\n  }, {\n    rate: 0.00025,\n    max: 20000000\n  }, {\n    rate: 0.000125\n  }],\n  LAND_REGISTRY_PROPERTY_TAX: 0.0015,\n  LAND_REGISTRY_MORTGAGE_NOTE_TAX: 0.0035,\n  ADDITIONAL_FEES: 1000\n};\nconst VS = {\n  TRANSFER_TAX: 0.0225,\n  NOTARY_PROPERTY_BRACKETS_MIN: 200,\n  NOTARY_PROPERTY_BRACKETS: [{\n    rate: 0.005,\n    max: 200000\n  }, {\n    rate: 0.004,\n    max: 500000\n  }, {\n    rate: 0.003,\n    max: 1000000\n  }, {\n    rate: 0.002,\n    max: 10000000\n  }, {\n    rate: 0.001\n  }],\n  NOTARY_NOTE_BRACKETS_MIN: 200,\n  NOTARY_NOTE_BRACKETS: [{\n    rate: 0.005,\n    max: 100000\n  }, {\n    rate: 0.004,\n    max: 200000\n  }, {\n    rate: 0.003,\n    max: 500000\n  }, {\n    rate: 0.002,\n    max: 1000000\n  }, {\n    rate: 0.001\n  }]\n};\nconst FR = {\n  TRANSFER_TAX: 0.03\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"degressive.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/notaryFees/degressive.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nconst INFINITY = 100000000000000;\n\n// Calculates the degressive tax on an amount, based on brackets with varying rates\nconst degressive = (_ref) => {\n  let {\n    amount,\n    brackets = [],\n    maxTax,\n    minTax\n  } = _ref;\n\n  if (amount <= 0) {\n    return 0;\n  }\n\n  let tax = 0;\n  brackets.every((_ref2, index, allBrackets) => {\n    let {\n      max = INFINITY,\n      rate\n    } = _ref2;\n    let previousBracket = {\n      rate: 0,\n      max: 0\n    };\n\n    if (index > 0) {\n      previousBracket = allBrackets[index - 1];\n    }\n\n    if (max < previousBracket.max) {\n      throw new Error(\"Tax brackets should come in increasing order, but found \".concat(previousBracket.max, \" -> \").concat(max));\n    }\n\n    const bracketTax = Math.min(amount - previousBracket.max, max - previousBracket.max) * rate;\n    tax += bracketTax; // Stop calculating once you've reached the highest bracket you're in\n\n    return max <= amount;\n  });\n\n  if (maxTax) {\n    tax = Math.min(tax, maxTax);\n  }\n\n  if (minTax) {\n    tax = Math.max(tax, minTax);\n  }\n\n  return tax;\n};\n\nmodule.exportDefault(degressive);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/notaryFees/index.js                                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./NotaryFeesCalculator\", {\n  default: \"NotaryFeesCalculator\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"phoneFormatting\":{\"test\":{\"phoneFormatting.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/phoneFormatting/test/phoneFormatting.spec.js                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet formatPhoneNumber;\nmodule.link(\"..\", {\n  formatPhoneNumber(v) {\n    formatPhoneNumber = v;\n  }\n\n}, 1);\ndescribe('formatPhoneNumber', () => {\n  it('formats a swiss number', () => {\n    expect(formatPhoneNumber('225660110')).to.equal('+41 22 566 01 10');\n    expect(formatPhoneNumber('00412332')).to.equal('+41 2332');\n    expect(formatPhoneNumber('22/566/01/10')).to.equal('+41 22 566 01 10');\n    expect(formatPhoneNumber('22.566.01.10')).to.equal('+41 22 566 01 10');\n  });\n  it('does not format an incomplete swiss number', () => {\n    expect(formatPhoneNumber('1')).to.equal('1');\n    expect(formatPhoneNumber('12')).to.equal('+41 12');\n    expect(formatPhoneNumber('22566011')).to.equal('+41 22566011');\n  });\n  it('formats foreign numbers properly', () => {\n    expect(formatPhoneNumber('+33645781457')).to.equal('+33 6 45 78 14 57');\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/phoneFormatting/index.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  formatPhoneNumber: () => formatPhoneNumber\n});\nlet parsePhoneNumberFromString;\nmodule.link(\"libphonenumber-js/max\", {\n  parsePhoneNumberFromString(v) {\n    parsePhoneNumberFromString = v;\n  }\n\n}, 0);\n\nconst formatPhoneNumber = string => {\n  const phoneNumber = parsePhoneNumberFromString(string, 'CH');\n\n  if (!phoneNumber) {\n    // Couldn't parse a phone number from the string\n    return string;\n  }\n\n  const intl = phoneNumber.formatInternational();\n  return intl;\n};\n\nconst modifyDoc = (doc, fieldName, currentValue, customFunc) => {\n  if (customFunc) {\n    doc[fieldName] = customFunc(currentValue);\n  } else if (Array.isArray(currentValue)) {\n    doc[fieldName] = currentValue.map(formatPhoneNumber);\n  } else {\n    doc[fieldName] = formatPhoneNumber(currentValue);\n  }\n};\n\nconst formatNumbersHook = (collection, fieldName, customFunc) => {\n  collection.before.update((userId, doc, fieldNames, modifier) => {\n    if (fieldNames.includes(fieldName)) {\n      const updatedValue = modifier.$set[fieldName];\n      modifyDoc(modifier.$set, fieldName, updatedValue, customFunc);\n    }\n  });\n  collection.before.insert((userId, doc) => {\n    const insertedValue = doc[fieldName];\n\n    if (insertedValue) {\n      modifyDoc(doc, fieldName, insertedValue, customFunc);\n    }\n  });\n};\n\nmodule.exportDefault(formatNumbersHook);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"testHelpers\":{\"wallaby\":{\"wallaby.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/testHelpers/wallaby/wallaby.spec.js                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 1);\nlet resetDatabase;\nmodule.link(\"meteor/xolvio:cleaner\", {\n  resetDatabase(v) {\n    resetDatabase = v;\n  }\n\n}, 2);\nlet dummyFunc;\nmodule.link(\"./wallabyDummy\", {\n  default(v) {\n    dummyFunc = v;\n  }\n\n}, 3);\ndescribe('Wallaby examples', () => {\n  it('should work', () => {\n    expect(1 + 1).to.equal(2);\n    expect(true).to.not.equal(false);\n  });\n  it('should set the IS_WALLABY global variable', () => {\n    if (global.IS_WALLABY) {\n      expect(global.IS_WALLABY).to.equal(true);\n    }\n  });\n  it('should mock meteor packages', () => {\n    if (global.IS_WALLABY) {\n      expect(Meteor.userId()).to.equal('userId');\n    }\n  });\n  it('should import from core properly with stubbed packages', () => {\n    if (global.IS_WALLABY) {\n      expect(dummyFunc()).to.equal(resetDatabase());\n    }\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"wallabyDummy.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/testHelpers/wallaby/wallabyDummy.js                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet resetDatabase;\nmodule.link(\"meteor/xolvio:cleaner\", {\n  resetDatabase(v) {\n    resetDatabase = v;\n  }\n\n}, 0);\nmodule.exportDefault(() => resetDatabase());\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"enzyme.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/testHelpers/enzyme.js                                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  mount: () => mount,\n  shallow: () => shallow\n});\nlet defaultEnzyme, configure, defaultMount, defaultShallow;\nmodule.link(\"enzyme\", {\n  default(v) {\n    defaultEnzyme = v;\n  },\n\n  configure(v) {\n    configure = v;\n  },\n\n  mount(v) {\n    defaultMount = v;\n  },\n\n  shallow(v) {\n    defaultShallow = v;\n  }\n\n}, 0);\nlet Adapter;\nmodule.link(\"enzyme-adapter-react-16\", {\n  default(v) {\n    Adapter = v;\n  }\n\n}, 1);\nconfigure({\n  adapter: new Adapter()\n}); // Avoid weird wallaby bug, inspired from here\n// https://github.com/wallabyjs/public/issues/1487\n\nif (global.IS_WALLABY) {\n  global.HTMLInputElement = () => {};\n}\n\nmodule.exportDefault(defaultEnzyme);\nconst mount = defaultMount;\nconst shallow = defaultShallow;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"generateData.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/testHelpers/generateData.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  generateData: () => generateData\n});\nlet Factory;\nmodule.link(\"meteor/dburles:factory\", {\n  Factory(v) {\n    Factory = v;\n  }\n\n}, 0);\nlet Tasks;\nmodule.link(\"../../api/tasks/tasks\", {\n  default(v) {\n    Tasks = v;\n  }\n\n}, 1);\n\nconst generateData = function () {\n  let overrides = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const user = Factory.create('user', (0, _objectSpread2.default)({}, overrides.user));\n  const admin = Factory.create('admin', (0, _objectSpread2.default)({}, overrides.admin));\n  const borrower = Factory.create('borrower', (0, _objectSpread2.default)({\n    userId: user._id\n  }, overrides.borrowers));\n  const property = Factory.create('property', (0, _objectSpread2.default)({\n    userId: user._id\n  }, overrides.property));\n  const loan = Factory.create('loan', (0, _objectSpread2.default)({\n    userId: user._id,\n    propertyIds: [property._id],\n    borrowerIds: [borrower._id]\n  }, overrides.loan));\n  const offer = Factory.create('offer', (0, _objectSpread2.default)({\n    loanId: loan._id\n  }, overrides.offers));\n  return {\n    loan,\n    user,\n    admin,\n    borrowers: [borrower],\n    property,\n    offers: [offer]\n  };\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"getMountedComponent.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/testHelpers/getMountedComponent.jsx                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet MemoryRouter;\nmodule.link(\"react-router-dom\", {\n  MemoryRouter(v) {\n    MemoryRouter = v;\n  }\n\n}, 2);\nlet IntlProvider, intlShape;\nmodule.link(\"react-intl\", {\n  IntlProvider(v) {\n    IntlProvider = v;\n  },\n\n  intlShape(v) {\n    intlShape = v;\n  }\n\n}, 3);\nlet mount;\nmodule.link(\"./enzyme\", {\n  mount(v) {\n    mount = v;\n  }\n\n}, 4);\nlet getUserLocale, getFormats;\nmodule.link(\"../localization\", {\n  getUserLocale(v) {\n    getUserLocale = v;\n  },\n\n  getFormats(v) {\n    getFormats = v;\n  }\n\n}, 5);\nlet messages;\nmodule.link(\"../../lang/fr.json\", {\n  default(v) {\n    messages = v;\n  }\n\n}, 6);\n\n// Mounts a component for testing, and wraps it around everything it needs\nconst customMount = (_ref) => {\n  let {\n    Component,\n    props = {},\n    withRouter,\n    withStore\n  } = _ref;\n  const customMountData = {};\n  const intlProvider = new IntlProvider({\n    locale: getUserLocale(),\n    messages,\n    formats: getFormats(),\n    defaultLocale: 'fr'\n  });\n  const {\n    intl\n  } = intlProvider.getChildContext();\n  let testComponent = React.createElement(Component, props);\n\n  if (withRouter) {\n    testComponent = React.createElement(MemoryRouter, null, React.cloneElement(testComponent, {\n      history: {\n        location: {\n          pathname: ''\n        }\n      }\n    }));\n  }\n\n  if (withStore) {\n    const configureStore = require('redux-mock-store').default;\n\n    const {\n      Provider\n    } = require('react-redux');\n\n    const mockStore = configureStore();\n    const initialState = withStore;\n    const store = mockStore(initialState);\n    testComponent = React.createElement(Provider, {\n      store: store\n    }, testComponent);\n    customMountData.store = store;\n  }\n\n  return {\n    mountedComponent: mount(testComponent, {\n      context: {\n        intl\n      },\n      childContextTypes: {\n        intl: intlShape\n      }\n    }),\n    customMountData\n  };\n};\n/**\n * getMountedComponent - Returns a mounted component with all the required\n * wrappers for testing\n *\n * @param {object} Component  A React component\n * @param {object} props      optional props to be passed into the component\n * @param {boolean} withRouter Wraps the component with a mocked router if this\n * component uses any of the react-router-dom components, like Link or NavLink\n *\n * @return {object} A mounted component, ready for testing with Enzyme\n */\n\n\nconst getMountedComponent = (_ref2) => {\n  let {\n    Component,\n    props,\n    withRouter,\n    withStore\n  } = _ref2;\n\n  if (!getMountedComponent.mountedComponent) {\n    const {\n      mountedComponent,\n      customMountData\n    } = customMount({\n      Component,\n      props,\n      withRouter,\n      withStore\n    });\n\n    getMountedComponent.getData = () => customMountData;\n\n    getMountedComponent.mountedComponent = mountedComponent;\n  }\n\n  return getMountedComponent.mountedComponent;\n};\n/**\n * Unknown - Resets the component, to be called in beforeEach hooks\n *\n * @return {type} undefined\n */\n\n\ngetMountedComponent.reset = () => {\n  getMountedComponent.mountedComponent = undefined;\n\n  if (Meteor.isServer) {\n    global.document = undefined;\n    global.window = undefined;\n\n    const jsdom = require('jsdom');\n\n    const {\n      JSDOM\n    } = jsdom;\n    const {\n      document\n    } = new JSDOM('<!doctype html><html><body></body></html>').window;\n    global.document = document;\n    global.window = document.defaultView; // Do this to avoid an annoying bug resulting of the mix of jsdom and kadira\n    // https://github.com/kadirahq/node-eventloop-monitor/blob/master/lib/index.js:73\n    // https://github.com/jsdom/jsdom/blob/master/lib/jsdom/living/hr-time/Performance-impl.js:13\n\n    global.window.performance.now = () => {};\n  }\n};\n\nmodule.exportDefault(getMountedComponent);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/testHelpers/index.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./testHelpers\", {\n  \"*\": \"*\"\n}, 0);\nmodule.link(\"./generateData\", {\n  \"*\": \"*\"\n}, 1);\nmodule.link(\"./getMountedComponent\", {\n  default: \"getMountedComponent\"\n}, 2);\nmodule.link(\"./enzyme\", {\n  \"*\": \"*\"\n}, 3);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"testHelpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/testHelpers/testHelpers.js                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  createLoginToken: () => createLoginToken,\n  createEmailVerificationToken: () => createEmailVerificationToken,\n  userLogin: () => userLogin,\n  checkEmails: () => checkEmails,\n  resetDatabase: () => resetDatabase\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet Random;\nmodule.link(\"meteor/random\", {\n  Random(v) {\n    Random = v;\n  }\n\n}, 1);\nlet Accounts;\nmodule.link(\"meteor/accounts-base\", {\n  Accounts(v) {\n    Accounts = v;\n  }\n\n}, 2);\nlet faker;\nmodule.link(\"faker\", {\n  default(v) {\n    faker = v;\n  }\n\n}, 3);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 4);\nlet Users, testUserAccount;\nmodule.link(\"../../api\", {\n  Users(v) {\n    Users = v;\n  },\n\n  testUserAccount(v) {\n    testUserAccount = v;\n  }\n\n}, 5);\nlet ROLES;\nmodule.link(\"../../api/constants\", {\n  ROLES(v) {\n    ROLES = v;\n  }\n\n}, 6);\n\nconst createLoginToken = userId => {\n  const loginToken = Random.id();\n\n  const hashedToken = Accounts._hashLoginToken(loginToken);\n\n  Users.update(userId, {\n    $set: {\n      'services.resume.loginTokens': [{\n        hashedToken\n      }]\n    }\n  });\n  return loginToken;\n};\n\nconst createEmailVerificationToken = (userId, email) => {\n  const token = Random.id();\n  Users.update({\n    _id: userId\n  }, {\n    $push: {\n      'services.email.verificationTokens': {\n        // token has to be uniq in the Users collection\n        token,\n        address: email,\n        when: new Date()\n      }\n    }\n  });\n  return token;\n};\n\nconst userLogin = (_ref) => {\n  let {\n    email,\n    password,\n    role\n  } = _ref;\n  const userEmail = email || faker.internet.email();\n  const userPassword = password || faker.random.word();\n\n  if (Meteor.isServer) {\n    const user = testUserAccount.run({\n      email: userEmail,\n      password: userPassword,\n      role: role || ROLES.USER\n    });\n    Meteor.loginWithPassword({\n      id: user._id\n    }, userPassword);\n    return Promise.resolve(user);\n  }\n\n  if (Meteor.isClient) {\n    return testUserAccount.run({\n      email: userEmail,\n      password: userPassword,\n      role: role || ROLES.USER\n    }).then(user => new Promise((resolve, reject) => {\n      Meteor.loginWithPassword({\n        id: user._id\n      }, userPassword, err => err ? reject(err) : resolve(user));\n    }));\n  }\n};\n\nconst checkEmails = function (expected) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return new Promise((resolve, reject) => {\n    Meteor.call('getAllTestEmails', (0, _objectSpread2.default)({\n      expected\n    }, options), (err, emails) => {\n      if (err) {\n        reject(err);\n      }\n\n      try {\n        // getAllTestEmails returns when at least `expected` emails are found\n        // So it could be more. Make sure we always get exactly what we expect\n        if (expected && !options.noExpect) {\n          expect(emails.length).to.equal(expected);\n        }\n      } catch (error) {\n        reject(error);\n      }\n\n      resolve(emails);\n    });\n  });\n};\n\nconst resetDatabase = () => new Promise((resolve, reject) => {\n  Meteor.call('resetDatabase', (err, res) => err ? reject(err) : resolve(res));\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"localization\":{\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/localization/index.js                                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./localization\", {\n  \"*\": \"*\"\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"localization.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/localization/localization.js                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  getUserLocale: () => getUserLocale,\n  getFormats: () => getFormats,\n  localizationStartup: () => localizationStartup\n});\nlet addLocaleData;\nmodule.link(\"react-intl\", {\n  addLocaleData(v) {\n    addLocaleData = v;\n  }\n\n}, 0);\nlet moment;\nmodule.link(\"moment\", {\n  default(v) {\n    moment = v;\n  }\n\n}, 1);\nlet fr;\nmodule.link(\"react-intl/locale-data/fr\", {\n  default(v) {\n    fr = v;\n  }\n\n}, 2);\nlet translateSimpleSchema;\nmodule.link(\"./simpleSchemaLocalization\", {\n  default(v) {\n    translateSimpleSchema = v;\n  }\n\n}, 3);\nlet Intl;\nmodule.link(\"../intl\", {\n  default(v) {\n    Intl = v;\n  }\n\n}, 4);\n\nconst getUserLocale = () => 'fr-CH';\n\nconst getFormats = () => ({\n  number: {\n    money: {\n      style: 'currency',\n      currency: 'CHF',\n      maximumFractionDigits: 0,\n      minimumFractionDigits: 0\n    },\n    moneyWithoutCurrency: {\n      style: 'decimal',\n      useGrouping: true,\n      maximumFractionDigits: 0,\n      minimumFractionDigits: 0\n    },\n    percentage: {\n      style: 'percent',\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    },\n    percentageRounded: {\n      style: 'percent',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0\n    }\n  }\n});\n\nconst setupMoment = () => {\n  moment.locale('fr', {\n    months: 'Janvier_Février_Mars_Avril_Mai_Juin_Juillet_Août_Septembre_Octobre_Novembre_Décembre'.split('_'),\n    monthsShort: 'Janv._Févr._Mars_Avr._Mai_Juin_Juil._Août_Sept._Oct._Nov._Déc.'.split('_'),\n    monthsParseExact: true,\n    weekdays: 'Dimanche_Lundi_Mardi_Mercredi_Jeudi_Vendredi_Samedi'.split('_'),\n    weekdaysShort: 'Dim._Lun._Mar._Mer._Jeu._Ven._Sam.'.split('_'),\n    weekdaysMin: 'Di_Lu_Ma_Me_Je_Ve_Sa'.split('_'),\n    weekdaysParseExact: true,\n    longDateFormat: {\n      LT: 'HH:mm',\n      LTS: 'HH:mm:ss',\n      L: 'DD/MM/YYYY',\n      LL: 'D MMMM YYYY',\n      LLL: 'D MMMM YYYY HH:mm',\n      LLLL: 'dddd D MMMM YYYY HH:mm'\n    },\n    calendar: {\n      sameDay: '[Aujourd’hui à] LT',\n      nextDay: '[Demain à] LT',\n      nextWeek: 'dddd [à] LT',\n      lastDay: '[Hier à] LT',\n      lastWeek: 'dddd [dernier à] LT',\n      sameElse: 'L'\n    },\n    relativeTime: {\n      future: 'dans %s',\n      past: 'il y a %s',\n      s: 'qq secs',\n      m: '1m',\n      mm: '%dm',\n      h: '1h',\n      hh: '%dh',\n      d: '1j',\n      dd: '%dj',\n      M: '1 mois',\n      MM: '%d mois',\n      y: '1 an',\n      yy: '%d ans'\n    },\n    dayOfMonthOrdinalParse: /\\d{1,2}(er|e)/,\n\n    ordinal(number) {\n      return number + (number === 1 ? 'er' : 'e');\n    },\n\n    meridiemParse: /PD|MD/,\n\n    isPM(input) {\n      return input.charAt(0) === 'M';\n    },\n\n    // In case the meridiem units are not separated around 12, then implement\n    // this function (look at locale/id.js for an example).\n    // meridiemHour : function (hour, meridiem) {\n    //     return /* 0-23 hour, given meridiem token and hour 1-12 */ ;\n    // },\n    meridiem(hours, minutes, isLower) {\n      return hours < 12 ? 'PD' : 'MD';\n    },\n\n    week: {\n      dow: 1,\n      // Monday is the first day of the week.\n      doy: 4 // The week that contains Jan 4th is the first week of the year.\n\n    }\n  });\n};\n\nconst localizationStartup = function () {\n  let {\n    setupAccounts = true,\n    messages\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  // Add locales used in app here\n  Intl.init(messages);\n  addLocaleData(fr);\n  setupMoment();\n  moment.locale('fr');\n  translateSimpleSchema();\n\n  if (setupAccounts) {\n    const {\n      T9n\n    } = require('meteor-accounts-t9n');\n\n    const {\n      fr: accountsFr\n    } = require('meteor-accounts-t9n/build/fr');\n\n    T9n.map('fr', accountsFr);\n    T9n.setLanguage('fr');\n  }\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"simpleSchemaLocalization.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/localization/simpleSchemaLocalization.js                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet SimpleSchema;\nmodule.link(\"simpl-schema\", {\n  default(v) {\n    SimpleSchema = v;\n  }\n\n}, 0);\nlet Intl;\nmodule.link(\"../intl\", {\n  default(v) {\n    Intl = v;\n  }\n\n}, 1);\n\nconst translate = (_ref) => {\n  let {\n    key\n  } = _ref;\n  // Turns a key called \"expenses.0.value\" into \"expenses.value\"\n  const keyWithoutNumbers = key.split('.').filter(subKey => subKey.length !== 1).join('.');\n  return Intl.formatMessage({\n    id: \"Forms.\".concat(keyWithoutNumbers)\n  });\n};\n\nconst translateSimpleSchema = () => {\n  SimpleSchema.setDefaultMessages({\n    initialLanguage: 'fr',\n    messages: {\n      fr: {\n        // Can also use \"name\"\n        required: args => \"\".concat(translate(args), \" est requis\"),\n        minString: args => \"\".concat(translate(args), \" doit faire au minimum \").concat(args.min, \" caract\\xE8res\"),\n        maxString: args => \"\".concat(translate(args), \" peut faire au maximum \").concat(args.max, \" caract\\xE8res\"),\n        minNumber: args => \"\".concat(translate(args), \" doit \\xEAtre au moins \").concat(args.min),\n        maxNumber: args => \"\".concat(translate(args), \" ne peut pas d\\xE9passer \").concat(args.max),\n        minNumberExclusive: args => \"\".concat(translate(args), \" doit \\xEAtre plus grand que \").concat(args.min),\n        maxNumberExclusive: args => \"\".concat(translate(args), \" doit \\xEAtre plus petit que \").concat(args.max),\n        minDate: args => \"\".concat(translate(args), \" doit \\xEAtre au plus t\\xF4t le \").concat(args.min),\n        maxDate: args => \"\".concat(translate(args), \" doit \\xEAtre au plus tard le \").concat(args.max),\n        badDate: args => \"\".concat(translate(args), \" n'est pas une date valide\"),\n        minCount: (_ref2) => {\n          let {\n            minCount\n          } = _ref2;\n          return \"Vous devez ajouter au moins \".concat(minCount, \" valeurs\");\n        },\n        maxCount: (_ref3) => {\n          let {\n            maxCount\n          } = _ref3;\n          return \"Vous devez choisir moins de \".concat(maxCount, \" valeurs\");\n        },\n        noDecimal: args => \"\".concat(translate(args), \" doit \\xEAtre un nombre entier\"),\n        notAllowed: (_ref4) => {\n          let {\n            value\n          } = _ref4;\n          return \"\".concat(value, \" n'est pas valide\");\n        },\n        expectedType: args => \"\".concat(translate(args), \" doit \\xEAtre un \").concat(args.dataType),\n\n        regEx(_ref5) {\n          let {\n            label,\n            regExp\n          } = _ref5;\n\n          switch (regExp) {\n            case SimpleSchema.RegEx.Email:\n            case SimpleSchema.RegEx.WeakEmail:\n              return 'Cette adresse e-mail est incorrecte';\n\n            default:\n              return \"Le format n'est pas valide\";\n          }\n        }\n\n      }\n    }\n  });\n};\n\nmodule.exportDefault(translateSimpleSchema);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"memoizeOne\":{\"areInputsEqual.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/memoizeOne/areInputsEqual.js                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  default: () => areInputsEqual\n});\n\nconst inputHasChanged = (next, prev) => next.some((newInput, index) => newInput !== prev[index]);\n\nfunction areInputsEqual(newInputs, lastInputs) {\n  // no checks needed if the inputs length has changed\n  if (newInputs.length !== lastInputs.length) {\n    return false;\n  } // Handle memoization for functions with 1 argument which is an object\n\n\n  if (newInputs.length === 1 && typeof newInputs[0] === 'object' && typeof lastInputs[0] === 'object' && newInputs[0] !== null && lastInputs[0] !== null) {\n    const newArgs = Object.values(newInputs[0]);\n    const lastArgs = Object.values(lastInputs[0]);\n\n    if (newArgs.length !== lastArgs.length) {\n      return false;\n    }\n\n    const oneInputHasChanged = inputHasChanged(newArgs, lastArgs);\n    return !oneInputHasChanged;\n  }\n\n  const oneInputHasChanged = inputHasChanged(newInputs, lastInputs);\n  return !oneInputHasChanged;\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/memoizeOne/index.js                                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.link(\"./memoizeOne\", {\n  default: \"default\"\n}, 0);\nmodule.link(\"./memoizeOne\", {\n  \"*\": \"*\"\n}, 1);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"memoizeOne.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/memoizeOne/memoizeOne.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet areInputsEqual;\nmodule.link(\"./areInputsEqual\", {\n  default(v) {\n    areInputsEqual = v;\n  }\n\n}, 0);\n\n// <ResultFn: (...any[]) => mixed>\n// The purpose of this typing is to ensure that the returned memoized\n// function has the same type as the provided function (`resultFn`).\n// ResultFn:        Generic type (which is the same as the resultFn).\n// (...any[]): Accepts any length of arguments - and they are not checked\n// mixed:           The result can be anything but needs to be checked before usage\nconst memoizeOne = function (resultFn) {\n  let isEqual = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : areInputsEqual;\n  let lastThis;\n  let lastArgs = [];\n  let lastResult;\n  let calledOnce = false; // breaking cache when context (this) or arguments change\n\n  const result = function () {\n    for (var _len = arguments.length, newArgs = new Array(_len), _key = 0; _key < _len; _key++) {\n      newArgs[_key] = arguments[_key];\n    }\n\n    if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {\n      return lastResult;\n    } // Throwing during an assignment aborts the assignment: https://codepen.io/alexreardon/pen/RYKoaz\n    // Doing the lastResult assignment first so that if it throws\n    // nothing will be overwritten\n\n\n    lastResult = resultFn.apply(this, newArgs);\n    calledOnce = true;\n    lastThis = this;\n    lastArgs = newArgs;\n    return lastResult;\n  };\n\n  return result;\n};\n\nmodule.exportDefault(memoizeOne);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"test\":{\"APIs.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/test/APIs.spec.js                                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet getLocations;\nmodule.link(\"../APIs\", {\n  getLocations(v) {\n    getLocations = v;\n  }\n\n}, 1);\n// FIXME: These tests don't work reliably\ndescribe.skip('getLocations', () => {\n  it('fetches all locations based on zip 1400', () => getLocations(1400).then(result => expect(result).to.deep.equal(['Cheseaux-Noréaz', 'Yverdon-les-Bains'])));\n  it('fetches all locations based on zip 1201', () => getLocations(1201).then(result => expect(result).to.deep.equal(['Genève'])));\n  it('fetches all locations based on zip 1000', () => getLocations(1000).then(result => expect(result).to.deep.equal(['Lausanne'])));\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"checkObjectStructure.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/test/checkObjectStructure.spec.js                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet makeCheckObjectStructure;\nmodule.link(\"../checkObjectStructure\", {\n  makeCheckObjectStructure(v) {\n    makeCheckObjectStructure = v;\n  }\n\n}, 1);\nconst checkObjectStructure = makeCheckObjectStructure();\ndescribe('checkObjectStructure', () => {\n  describe('does not throw when object matches the template', () => {\n    it('with a single key string', () => {\n      const template = {\n        a: 1\n      };\n      const obj = {\n        a: 'hello'\n      };\n      expect(() => checkObjectStructure({\n        obj,\n        template\n      })).to.not.throw();\n    });\n    it('with a single key number', () => {\n      const template = {\n        a: 1\n      };\n      const obj = {\n        a: 12\n      };\n      expect(() => checkObjectStructure({\n        obj,\n        template\n      })).to.not.throw();\n    });\n    it('with a single key empty array that can be empty', () => {\n      const template = {\n        a: []\n      };\n      const obj = {\n        a: []\n      };\n      expect(() => checkObjectStructure({\n        obj,\n        template\n      })).to.not.throw();\n    });\n    it('with a single key array that can be empty', () => {\n      const template = {\n        a: []\n      };\n      const obj = {\n        a: [1, 2, 3]\n      };\n      expect(() => checkObjectStructure({\n        obj,\n        template\n      })).to.not.throw();\n    });\n    it('with a single key array that cannot be empty', () => {\n      const template = {\n        a: [1]\n      };\n      const obj = {\n        a: [1, 2, 3]\n      };\n      expect(() => checkObjectStructure({\n        obj,\n        template\n      })).to.not.throw();\n    });\n    it('with a single key array that contains objects', () => {\n      const template = {\n        a: [{\n          b: 1,\n          c: [],\n          d: {\n            e: 1,\n            f: 1\n          }\n        }]\n      };\n      const obj = {\n        a: [{\n          b: 'hello',\n          c: [],\n          d: {\n            e: 123,\n            f: 456\n          }\n        }, {\n          b: 'hola',\n          c: [1, 2, 3],\n          d: {\n            e: 123,\n            f: 456\n          }\n        }]\n      };\n      expect(() => checkObjectStructure({\n        obj,\n        template\n      })).to.not.throw();\n    });\n    it('with a single key object', () => {\n      const template = {\n        a: {\n          b: 1\n        }\n      };\n      const obj = {\n        a: {\n          b: 'hello'\n        }\n      };\n      expect(() => checkObjectStructure({\n        obj,\n        template\n      })).to.not.throw();\n    });\n    it('with several keys and nested objects', () => {\n      const template = {\n        a: 1,\n        b: [],\n        c: [1],\n        d: {\n          e: 1,\n          f: [],\n          g: [1],\n          h: {\n            i: 1,\n            j: 1\n          }\n        }\n      };\n      const obj = {\n        a: 'hello',\n        b: [1, 2, 3],\n        c: [1, 2, 3],\n        d: {\n          e: 12,\n          f: [],\n          g: ['hello'],\n          h: {\n            i: 123,\n            j: 'hello'\n          }\n        }\n      };\n      expect(() => checkObjectStructure({\n        obj,\n        template\n      })).to.not.throw();\n    });\n  });\n  describe('throws when the object does not match the template', () => {\n    it('with a key missing', () => {\n      const template = {\n        abc: 1\n      };\n      const obj = {};\n      expect(() => checkObjectStructure({\n        obj,\n        template\n      })).to.throw('Missing key abc from object');\n    });\n    it('with a key that is undefined', () => {\n      const template = {\n        abc: 1\n      };\n      const obj = {\n        abc: undefined\n      };\n      expect(() => checkObjectStructure({\n        obj,\n        template\n      })).to.throw('Missing key abc from object');\n    });\n    it('with a key that is expected to be an array but is not', () => {\n      const template = {\n        abc: []\n      };\n      const obj = {\n        abc: 2\n      };\n      expect(() => checkObjectStructure({\n        obj,\n        template\n      })).to.throw('Object key abc must be an array');\n    });\n    it('with a key that is expected to be a non-empty array but is empty', () => {\n      const template = {\n        abc: [1]\n      };\n      const obj = {\n        abc: []\n      };\n      expect(() => checkObjectStructure({\n        obj,\n        template\n      })).to.throw('Array at object key abc in undefined should not be empty');\n    });\n    it('with a key that is expected to be a non-empty array but is empty and parent object', () => {\n      const template = {\n        abc: {\n          def: [1]\n        }\n      };\n      const obj = {\n        abc: {\n          def: []\n        }\n      };\n      expect(() => checkObjectStructure({\n        obj,\n        template\n      })).to.throw('Array at object key def in abc should not be empty');\n    });\n    it('with a non matching object in array', () => {\n      const template = {\n        a: [{\n          b: 1,\n          c: [],\n          d: {\n            e: 1,\n            f: 1\n          }\n        }]\n      };\n      const obj = {\n        a: [{\n          b: 'hello',\n          c: [],\n          d: {\n            e: 123,\n            f: 456\n          }\n        }, {\n          b: 'hola',\n          d: {\n            e: 123,\n            f: 456\n          }\n        }]\n      };\n      expect(() => checkObjectStructure({\n        obj,\n        template\n      })).to.throw('Missing key c from object');\n    });\n    it('with a key that is expected to be an object but is not', () => {\n      const template = {\n        abc: {}\n      };\n      const obj = {\n        abc: []\n      };\n      expect(() => checkObjectStructure({\n        obj,\n        template\n      })).to.throw('Object key abc must be an object');\n    });\n    it('says which parent object a key should be in', () => {\n      const template = {\n        abc: {\n          efg: 1\n        }\n      };\n      const obj = {\n        abc: {}\n      };\n      expect(() => checkObjectStructure({\n        obj,\n        template\n      })).to.throw('Missing key efg from object abc');\n    });\n    it('throws multiple errors', () => {\n      const template = {\n        a: {\n          b: 1\n        },\n        c: {},\n        d: [1]\n      };\n      const obj = {\n        a: {},\n        c: [],\n        d: []\n      };\n      expect(() => checkObjectStructure({\n        obj,\n        template\n      })).to.throw('Missing key b from object a, Object key c must be an object, Array at object key d in undefined should not be empty');\n    });\n    it('skips the rest of the function if it should be an object but it is empty', () => {\n      const template = {\n        a: {\n          b: {\n            c: 1\n          }\n        }\n      };\n      const obj = {};\n      expect(() => checkObjectStructure({\n        obj,\n        template,\n        parentKey: 'Root'\n      })).to.throw('Missing key a from object Root');\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"conversionFunctions.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/test/conversionFunctions.spec.js                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet toMoney, toNumber, toDecimalNumber, toDistanceString, roundTo;\nmodule.link(\"../conversionFunctions\", {\n  toMoney(v) {\n    toMoney = v;\n  },\n\n  toNumber(v) {\n    toNumber = v;\n  },\n\n  toDecimalNumber(v) {\n    toDecimalNumber = v;\n  },\n\n  toDistanceString(v) {\n    toDistanceString = v;\n  },\n\n  roundTo(v) {\n    roundTo = v;\n  }\n\n}, 1);\ndescribe('Conversion functions', () => {\n  describe('To money', () => {\n    it(\"Should return '1 000' for 1000\", () => {\n      expect(toMoney(1000)).to.equal('1 000');\n    });\n    it('Should return 0 for 0', () => {\n      expect(toMoney(0)).to.equal(0);\n    });\n    it(\"Should return '100 000' for 100000\", () => {\n      expect(toMoney(100000)).to.equal('100 000');\n    });\n    it(\"Should return '-100 000' for -100000\", () => {\n      expect(toMoney(-100000)).to.equal('-100 000');\n    });\n    it('rounds decimal numbers', () => {\n      expect(toMoney(1000.2)).to.equal('1 000');\n    });\n    it('rounds decimal numbers', () => {\n      expect(toMoney(1000.8)).to.equal('1 001');\n    });\n    it('returns undefined for undefined', () => {\n      expect(toMoney(undefined)).to.equal(undefined);\n    });\n    it('returns an empty string for an empty string', () => {\n      expect(toMoney('')).to.equal('');\n    });\n    it('shouldnt add a negative sign if the value is close to 0', () => {\n      expect(toMoney(-0.1)).to.equal('0');\n    });\n    describe('rounded = false', () => {\n      it('should allow decimals', () => {\n        expect(toMoney(123456.78, {\n          rounded: false\n        })).to.equal('123 456.78');\n      });\n      it('works below 1', () => {\n        expect(toMoney(0.45, {\n          rounded: false\n        })).to.equal('0.45');\n      });\n      it('should only show the last 2 decimals', () => {\n        expect(toMoney(0.129, {\n          rounded: false\n        })).to.equal('0.13');\n        expect(toMoney(0.1234, {\n          rounded: false\n        })).to.equal('0.12');\n        expect(toMoney(0.12345, {\n          rounded: false\n        })).to.equal('0.12');\n      });\n      it('should round to 2 decimals', () => {\n        expect(toMoney(0.9999999, {\n          rounded: false\n        })).to.equal('1.00');\n      });\n      it('should handle negative values', () => {\n        expect(toMoney(-0.9999999, {\n          rounded: false\n        })).to.equal('-1.00');\n        expect(toMoney(-123456.789, {\n          rounded: false\n        })).to.equal('-123 456.79');\n      });\n    });\n  });\n  describe('To number', () => {\n    it(\"Should return 0 for 'a'\", () => {\n      expect(toNumber('a')).to.equal(0);\n    });\n    it('Should return 100 for 100', () => {\n      expect(toNumber(100)).to.equal(100);\n    });\n    it(\"Should return 100 for '100'\", () => {\n      expect(toNumber('100')).to.equal(100);\n    });\n    it('Should return 100.9 for 100.9', () => {\n      expect(toNumber(100.9)).to.equal(100.9);\n    });\n    it(\"Should return 1009 for '100.9'\", () => {\n      expect(toNumber('100.9')).to.equal(1009);\n    });\n    it('should return the same value if given a falsy non-number', () => {\n      expect(toNumber('')).to.equal('');\n      expect(toNumber(undefined)).to.equal(undefined);\n      expect(toNumber(null)).to.equal(null);\n      expect(toNumber(false)).to.equal(false);\n    });\n    it('should return 0 if given true', () => {\n      expect(toNumber(true)).to.equal(0);\n    });\n    it('should return number types', () => {\n      expect(toNumber('1 000 000')).to.equal(1000000);\n      expect(typeof toNumber('1 000 000')).to.equal('number');\n    });\n    it('returns undefined for undefined', () => {\n      expect(toNumber(undefined)).to.equal(undefined);\n    });\n    it('returns an empty string for an empty string', () => {\n      expect(toNumber('')).to.equal('');\n    });\n  });\n  describe('To decimal number', () => {\n    it(\"Should return 0.1 for '0.1'\", () => {\n      expect(toDecimalNumber('0.1')).to.equal(0.1);\n    });\n    it(\"Should return 0.1 for '0,1'\", () => {\n      expect(toDecimalNumber('0,1')).to.equal(0.1);\n    });\n    it(\"Should return 1 for '1'\", () => {\n      expect(toDecimalNumber('1')).to.equal(1);\n    });\n    it(\"Should return 1 for '001'\", () => {\n      expect(toDecimalNumber('001')).to.equal(1);\n    });\n    it('Should return -1 for -1', () => {\n      expect(toDecimalNumber(-1)).to.equal(-1);\n    });\n    it('should return the same value if given a falsy non-number', () => {\n      expect(toDecimalNumber('')).to.equal('');\n      expect(toDecimalNumber(undefined)).to.equal(undefined);\n      expect(toDecimalNumber(null)).to.equal(null);\n      expect(toDecimalNumber(false)).to.equal(false);\n    });\n  });\n  describe('To Distance String', () => {\n    it('returns 0 for a negative distance', () => {\n      expect(toDistanceString(-1)).to.equal('0 m');\n    });\n    it('returns 0 for 0', () => {\n      expect(toDistanceString(0)).to.equal('0 m');\n    });\n    it('returns 80 for 81', () => {\n      expect(toDistanceString(81)).to.equal('80 m');\n    });\n    it('returns 10 for 9', () => {\n      expect(toDistanceString(9)).to.equal('10 m');\n    });\n    it('returns 420 for 425', () => {\n      expect(toDistanceString(425)).to.equal('430 m');\n    });\n    it('returns 1.0 for 1000', () => {\n      expect(toDistanceString(1000)).to.equal('1.0 km');\n    });\n    it('returns 5.4 for 5432', () => {\n      expect(toDistanceString(5432)).to.equal('5.4 km');\n    });\n    it('returns 10 for 10000', () => {\n      expect(toDistanceString(10000)).to.equal('10 km');\n    });\n    it('returns 55 for 54987', () => {\n      expect(toDistanceString(54987)).to.equal('55 km');\n    });\n  });\n  describe('roundTo', () => {\n    it('rounds to nearest 10000', () => {\n      expect(roundTo(12345, 4)).to.equal(10000);\n    });\n    it('rounds to nearest 10', () => {\n      expect(roundTo(12, 1)).to.equal(10);\n    });\n    it('rounds 1 to nearest 10000', () => {\n      expect(roundTo(1, 4)).to.equal(0);\n    });\n    it('rounds decimal values to decimal places', () => {\n      expect(roundTo(0.5689, -2)).to.equal(0.57);\n    });\n    it('does nothing if 0 is used', () => {\n      expect(roundTo(123.456789, 0)).to.equal(123.456789);\n    });\n    it('rounds 0 properly', () => {\n      expect(roundTo(0, 4)).to.equal(0);\n      expect(roundTo(0, 0)).to.equal(0);\n      expect(roundTo(0, -4)).to.equal(0);\n    });\n    it('parses strings with numbers to get a number out of it', () => {\n      expect(roundTo('123', 2)).to.equal(100);\n      expect(roundTo('123.321', -2)).to.equal(123.32);\n    });\n    it('parses weird strings as NaN', () => {\n      expect(roundTo('hello', 3)).to.deep.equal(NaN);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"formArrayHelpers.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/test/formArrayHelpers.spec.js                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet shouldCountField, getCountedArray, getMissingFieldIds, getFormValuesHash;\nmodule.link(\"../formArrayHelpers\", {\n  shouldCountField(v) {\n    shouldCountField = v;\n  },\n\n  getCountedArray(v) {\n    getCountedArray = v;\n  },\n\n  getMissingFieldIds(v) {\n    getMissingFieldIds = v;\n  },\n\n  getFormValuesHash(v) {\n    getFormValuesHash = v;\n  }\n\n}, 1);\ndescribe('formArrayHelpers', () => {\n  describe('shouldCountField', () => {\n    it('counts fields whose condition is true or undefined', () => {\n      expect(shouldCountField({\n        condition: true\n      })).to.equal(true);\n      expect(shouldCountField({\n        condition: undefined\n      })).to.equal(true);\n    });\n    it('should return true for an empty object', () => {\n      // Meaning, condition is undefined\n      expect(shouldCountField({})).to.equal(true);\n    });\n    it('should return false if required is explicitly set to false', () => {\n      expect(shouldCountField({\n        required: false\n      })).to.equal(false);\n      expect(shouldCountField({\n        required: undefined\n      })).to.equal(true);\n      expect(shouldCountField({\n        required: true\n      })).to.equal(true);\n    });\n    it('should return false if disabled is set to true', () => {\n      expect(shouldCountField({\n        disabled: true\n      })).to.equal(false);\n      expect(shouldCountField({\n        disabled: false\n      })).to.equal(true);\n      expect(shouldCountField({\n        disabled: undefined\n      })).to.equal(true);\n    });\n    it('should return false for h3 types', () => {\n      expect(shouldCountField({\n        type: 'h3'\n      })).to.equal(false);\n    });\n  });\n  describe('getCountedArray', () => {\n    const dummyArray = [{\n      id: 'id1'\n    }, {\n      id: 'id2'\n    }];\n    it('returns an empty array if it is given an empty formArray', () => {\n      expect(getCountedArray([], {})).to.deep.equal([]);\n    });\n    it('should return an array with 2 undefined values for a simple array and an empty object', () => {\n      expect(getCountedArray(dummyArray, {})).to.deep.equal([undefined, undefined]);\n    });\n    it('should return an array with the values of the document', () => {\n      expect(getCountedArray(dummyArray, {\n        id1: '1',\n        id2: '2',\n        idx: 'x'\n      })).to.deep.equal(['1', '2']);\n    });\n    it('should work with nested id values', () => {\n      expect(getCountedArray([...dummyArray, {\n        id: 'id3.id'\n      }], {\n        id1: '1',\n        id2: '2',\n        id3: {\n          id: '3'\n        },\n        idx: 'x'\n      })).to.deep.equal(['1', '2', '3']);\n    });\n    it('should not count non required values', () => {\n      expect(getCountedArray([{\n        id: 'id',\n        required: false\n      }], {\n        id: 'yo'\n      })).to.deep.equal([]);\n    });\n    it('should count non required values if specified', () => {\n      expect(getCountedArray([{\n        id: 'id',\n        required: false\n      }], {\n        id: 'yo'\n      }, true)).to.deep.equal(['yo']);\n    });\n    describe('conditional values', () => {\n      const trueValue = 'something';\n      let array = [{\n        type: 'conditionalInput',\n        id: 'id1',\n        conditionalTrueValue: trueValue,\n        inputs: [{\n          id: 'conditional'\n        }, {\n          id: 'test'\n        }]\n      }];\n      it('should only count the conditional value if it is false', () => {\n        expect(getCountedArray(array, {\n          conditional: 'anything'\n        })).to.deep.equal(['anything']);\n      });\n      it('should count the conditional value and the following if it is true', () => {\n        expect(getCountedArray(array, {\n          conditional: trueValue\n        })).to.deep.equal([trueValue, undefined]);\n      });\n      it('should not count the additionalValue if its not required', () => {\n        array = [{\n          type: 'conditionalInput',\n          id: 'id1',\n          conditionalTrueValue: trueValue,\n          inputs: [{\n            id: 'conditional',\n            required: false\n          }, {\n            id: 'test'\n          }]\n        }];\n        expect(getCountedArray(array, {\n          conditional: trueValue\n        })).to.deep.equal([undefined]);\n      });\n    });\n  });\n  describe('getMissingFieldIds', () => {\n    let array;\n    let doc;\n    beforeEach(() => {\n      array = [{\n        id: 'test'\n      }];\n      doc = {};\n    });\n    it('returns the list of missing fields', () => {\n      expect(getMissingFieldIds(array, doc)).to.deep.equal(['test']);\n    });\n    it('returns an empty array if all fields are valid', () => {\n      doc.test = 'stuff';\n      expect(getMissingFieldIds(array, doc)).to.deep.equal([]);\n    });\n    it('works with nested data', () => {\n      array = [{\n        id: 'test.value'\n      }];\n      doc.test = {\n        value: 'stuff'\n      };\n      expect(getMissingFieldIds(array, doc)).to.deep.equal([]);\n    });\n    it('properly counts conditional undefined values', () => {\n      const trueValue = 'something';\n      array = [{\n        type: 'conditionalInput',\n        id: 'id1',\n        conditionalTrueValue: trueValue,\n        inputs: [{\n          id: 'conditional'\n        }, {\n          id: 'test'\n        }]\n      }];\n      expect(getMissingFieldIds(array, doc)).to.deep.equal(['conditional']);\n    });\n    it('properly counts conditional false values', () => {\n      const trueValue = false;\n      array = [{\n        type: 'conditionalInput',\n        id: 'id1',\n        conditionalTrueValue: trueValue,\n        inputs: [{\n          id: 'conditional'\n        }, {\n          id: 'test'\n        }]\n      }];\n      doc.conditional = true;\n      expect(getMissingFieldIds(array, doc)).to.deep.equal([]);\n    });\n    it('properly counts conditional true values', () => {\n      const trueValue = 'something';\n      array = [{\n        type: 'conditionalInput',\n        id: 'id1',\n        conditionalTrueValue: trueValue,\n        inputs: [{\n          id: 'conditional'\n        }, {\n          id: 'test'\n        }]\n      }];\n      doc.conditional = trueValue;\n      expect(getMissingFieldIds(array, doc)).to.deep.equal(['test']);\n    });\n    it('properly counts conditional true values and its children', () => {\n      const trueValue = 'something';\n      array = [{\n        type: 'conditionalInput',\n        id: 'id1',\n        conditionalTrueValue: trueValue,\n        inputs: [{\n          id: 'conditional'\n        }, {\n          id: 'test'\n        }]\n      }];\n      doc.conditional = trueValue;\n      doc.test = 'stuff';\n      expect(getMissingFieldIds(array, doc)).to.deep.equal([]);\n    });\n    it('does not count non required fields', () => {\n      const trueValue = 'something';\n      array = [{\n        type: 'conditionalInput',\n        id: 'id1',\n        conditionalTrueValue: trueValue,\n        inputs: [{\n          id: 'conditional'\n        }, {\n          id: 'test',\n          required: false\n        }]\n      }];\n      expect(getMissingFieldIds(array, doc)).to.deep.equal(['conditional']);\n    });\n    it('deals with custom fields', () => {\n      array = [{\n        id: 'test.value'\n      }];\n      doc.test = {\n        value: 'stuff'\n      };\n      expect(getMissingFieldIds(array, doc)).to.deep.equal([]);\n    });\n  });\n  describe('getFormValuesHash', () => {\n    let array;\n    let doc;\n    beforeEach(() => {\n      array = [{\n        id: 'test'\n      }];\n      doc = {\n        test: {\n          value: 'stuff'\n        }\n      };\n    });\n    it('returns a hash for the data', () => {\n      array = [{\n        id: 'test.value'\n      }];\n      expect(getFormValuesHash(array, doc)).to.equal(272289896);\n    });\n    it('changes if the data changes', () => {\n      array = [{\n        id: 'test.value'\n      }];\n      const doc2 = {\n        test: {\n          value: 'stuff2'\n        }\n      };\n      expect(getFormValuesHash(array, doc)).to.not.equal(getFormValuesHash(array, doc2));\n    });\n    it('ignores irrelevant fields', () => {\n      array = [{\n        id: 'test.value'\n      }];\n      const doc2 = {\n        test: {\n          value: 'stuff'\n        },\n        a: 'b'\n      };\n      expect(getFormValuesHash(array, doc)).to.equal(getFormValuesHash(array, doc2));\n    });\n    it('counts non required values', () => {\n      array = [{\n        id: 'test.value'\n      }, {\n        id: 'stuff',\n        required: false\n      }];\n      const doc2 = {\n        test: {\n          value: 'stuff'\n        },\n        stuff: 'r'\n      };\n      expect(getFormValuesHash(array, doc)).to.not.equal(getFormValuesHash(array, doc2));\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"formHelpers.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/test/formHelpers.spec.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet percentFormatters;\nmodule.link(\"../formHelpers\", {\n  percentFormatters(v) {\n    percentFormatters = v;\n  }\n\n}, 1);\ndescribe('form helpers', () => {\n  describe('percentFormatters', () => {\n    it('does not return NaN if an input is emptied', () => {\n      expect(percentFormatters.parse('')).to.equal('');\n      expect(percentFormatters.format('')).to.equal('');\n    });\n    it('does allows negative inputs', () => {\n      expect(percentFormatters.parse('-2.00%')).to.equal(-0.02);\n      expect(percentFormatters.format('-0.02')).to.equal('-2.00');\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"general.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/test/general.spec.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet times;\nmodule.link(\"lodash/times\", {\n  default(v) {\n    times = v;\n  }\n\n}, 1);\nlet getAggregatePercent;\nmodule.link(\"../general\", {\n  getAggregatePercent(v) {\n    getAggregatePercent = v;\n  }\n\n}, 2);\nlet arrayify, getPercent, normalize;\nmodule.link(\"../general\", {\n  arrayify(v) {\n    arrayify = v;\n  },\n\n  getPercent(v) {\n    getPercent = v;\n  },\n\n  normalize(v) {\n    normalize = v;\n  }\n\n}, 3);\ndescribe('general helpers', () => {\n  describe('arrayify', () => {\n    it('returns an array if given an array', () => {\n      expect(arrayify([])).to.deep.equal([]);\n    });\n    it('returns an array if given nothing', () => {\n      expect(arrayify()).to.deep.equal([]);\n    });\n    it('returns an array with a given value if value is not an array', () => {\n      expect(arrayify({})).to.deep.equal([{}]);\n      expect(arrayify('hello')).to.deep.equal(['hello']);\n      expect(arrayify(1)).to.deep.equal([1]);\n    });\n  });\n  describe('getPercent', () => {\n    it('returns 1 for an empty array', () => {\n      expect(getPercent([])).to.equal(1);\n    });\n    it('returns 1 for a simple array', () => {\n      expect(getPercent(['hello'])).to.equal(1);\n    });\n    it('returns 0 for a simple array with undefined', () => {\n      expect(getPercent([undefined])).to.equal(0);\n    });\n    it('counts false values', () => {\n      expect(getPercent([false])).to.equal(1);\n    });\n    it(\"doesn't count null values\", () => {\n      expect(getPercent([null])).to.equal(0);\n    });\n    it('returns 0.2 for an array with 10 values and 8 undefined values', () => {\n      const array = times(10, () => undefined);\n      array[0] = true;\n      array[1] = true;\n      expect(getPercent(array)).to.equal(0.2);\n    });\n    it(\"throws an error if it isn't given an array\", () => {\n      expect(() => getPercent('hello')).to.throw();\n    });\n    it(\"returns 0 if it isn't given any argument\", () => {\n      expect(getPercent()).to.equal(0);\n    });\n    it('returns 1 if it is given an empty array', () => {\n      // Empty array means that there was nothing to do, so it should be 100%\n      expect(getPercent([])).to.equal(1);\n    });\n  });\n  describe('getAggregatePercent', () => {\n    it('calculates the true progress based on count', () => {\n      expect(getAggregatePercent([{\n        percent: 0.1,\n        count: 10\n      }, {\n        percent: 0.4,\n        count: 20\n      }])).to.deep.equal({\n        count: 30,\n        percent: 0.3\n      });\n    });\n    it('returns 0 for empty arrays', () => {\n      expect(getAggregatePercent([])).to.deep.equal({\n        count: 0,\n        percent: 0\n      });\n    });\n    it('returns the same value for a single object', () => {\n      expect(getAggregatePercent([{\n        percent: 0.1,\n        count: 10\n      }])).to.deep.equal({\n        count: 10,\n        percent: 0.1\n      });\n    });\n  });\n  describe('normalize', () => {\n    it('transforms an array of objects into a normalized object', () => {\n      expect(normalize([{\n        id: 1\n      }, {\n        id: 2\n      }])).to.deep.equal({\n        1: {\n          id: 1\n        },\n        2: {\n          id: 2\n        }\n      });\n    });\n    it('works with _id', () => {\n      expect(normalize([{\n        _id: 1\n      }, {\n        _id: 2\n      }])).to.deep.equal({\n        1: {\n          _id: 1\n        },\n        2: {\n          _id: 2\n        }\n      });\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"loanFunctions.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/test/loanFunctions.spec.js                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet formatLoanWithStructure, nextDueTaskReducer;\nmodule.link(\"../loanFunctions\", {\n  formatLoanWithStructure(v) {\n    formatLoanWithStructure = v;\n  },\n\n  nextDueTaskReducer(v) {\n    nextDueTaskReducer = v;\n  }\n\n}, 1);\nlet TASK_STATUS;\nmodule.link(\"../../api/constants\", {\n  TASK_STATUS(v) {\n    TASK_STATUS = v;\n  }\n\n}, 2);\ndescribe('Loan functions', () => {\n  describe('formatLoanWithStructure', () => {\n    it('sets the right structure', () => {\n      expect(formatLoanWithStructure({\n        selectedStructure: 'test',\n        structures: [{\n          id: 'test',\n          hello: 'world'\n        }]\n      })).to.deep.include({\n        id: 'test',\n        hello: 'world'\n      });\n    });\n    it('adds an empty structure if the structure was not found', () => {\n      expect(formatLoanWithStructure({\n        selectedStructure: 'test2',\n        structures: [{\n          id: 'test',\n          hello: 'world'\n        }]\n      })).to.deep.include({});\n    });\n    it('adds an empty structure if selectedStructure is not defined', () => {\n      expect(formatLoanWithStructure({\n        structures: [{\n          id: 'test',\n          hello: 'world'\n        }]\n      })).to.deep.equal({});\n    });\n    it('adds the right property if it exists', () => {\n      expect(formatLoanWithStructure({\n        properties: [{\n          _id: 'property1',\n          value: 100\n        }],\n        selectedStructure: 'test',\n        structures: [{\n          id: 'test',\n          propertyId: 'property1'\n        }]\n      })).to.deep.include({\n        id: 'test',\n        propertyId: 'property1',\n        property: {\n          _id: 'property1',\n          value: 100\n        }\n      });\n    });\n    it('adds the right offer if it exists', () => {\n      expect(formatLoanWithStructure({\n        offers: [{\n          _id: 'offer1',\n          amortization: 100\n        }],\n        selectedStructure: 'test',\n        structures: [{\n          id: 'test',\n          offerId: 'offer1'\n        }]\n      })).to.deep.include({\n        id: 'test',\n        offerId: 'offer1',\n        offer: {\n          _id: 'offer1',\n          amortization: 100\n        }\n      });\n    });\n    it('adds both offer and property', () => {\n      expect(formatLoanWithStructure({\n        offers: [{\n          _id: 'offer1',\n          amortization: 100\n        }],\n        properties: [{\n          _id: 'property1',\n          value: 100\n        }],\n        selectedStructure: 'test',\n        structures: [{\n          id: 'test',\n          offerId: 'offer1',\n          propertyId: 'property1'\n        }]\n      })).to.deep.include({\n        id: 'test',\n        offerId: 'offer1',\n        propertyId: 'property1',\n        offer: {\n          _id: 'offer1',\n          amortization: 100\n        },\n        property: {\n          _id: 'property1',\n          value: 100\n        }\n      });\n    });\n    it('returns undefined if no structures exist', () => {\n      expect(formatLoanWithStructure({\n        selectedStructure: 'test',\n        structures: []\n      })).to.deep.equal(undefined);\n    });\n    it('formats the promotionOption properly', () => {\n      expect(formatLoanWithStructure({\n        promotionOptions: [{\n          _id: 'id',\n          value: 100,\n          promotionLots: [{\n            properties: [{\n              landValue: 50,\n              constructionValue: 80\n            }]\n          }]\n        }],\n        selectedStructure: 'test',\n        structures: [{\n          id: 'test',\n          promotionOptionId: 'id'\n        }]\n      })).to.deep.include({\n        id: 'test',\n        promotionOptionId: 'id',\n        property: {\n          _id: 'id',\n          value: 100,\n          totalValue: 100,\n          landValue: 50,\n          constructionValue: 80,\n          promotionLots: [{\n            properties: [{\n              landValue: 50,\n              constructionValue: 80\n            }]\n          }]\n        }\n      });\n    });\n  });\n  describe('nextDueTaskReducer', () => {\n    it('returns undefined if no dates exist', () => {\n      const loan = {};\n      expect(nextDueTaskReducer(loan)).to.equal(undefined);\n    });\n    it('gets the next task date', () => {\n      const taskDate1 = new Date();\n      taskDate1.setDate(taskDate1.getDate() - 1);\n      const taskDate2 = new Date();\n      taskDate2.setDate(taskDate2.getDate() - 2);\n      const tasksCache = [{\n        dueAt: taskDate1,\n        title: 'task A',\n        status: TASK_STATUS.ACTIVE\n      }, {\n        dueAt: taskDate2,\n        title: 'task B',\n        status: TASK_STATUS.ACTIVE\n      }];\n      const loan = {\n        tasksCache\n      };\n      expect(nextDueTaskReducer(loan)).to.deep.include({\n        dueAt: taskDate2,\n        title: 'task B'\n      });\n    });\n    it('only returns active task dates', () => {\n      const taskDate1 = new Date();\n      taskDate1.setDate(taskDate1.getDate() - 1);\n      const taskDate2 = new Date();\n      taskDate2.setDate(taskDate2.getDate() - 2);\n      const tasksCache = [{\n        dueAt: taskDate1,\n        title: 'task A',\n        status: TASK_STATUS.ACTIVE\n      }, {\n        dueAt: taskDate2,\n        title: 'task B',\n        status: TASK_STATUS.CANCELLED\n      }];\n      const loan = {\n        tasksCache\n      };\n      expect(nextDueTaskReducer(loan)).to.deep.include({\n        dueAt: taskDate1,\n        title: 'task A',\n        status: TASK_STATUS.ACTIVE\n      });\n    });\n    it('puts tasks without due dates first', () => {\n      const taskDate1 = new Date();\n      taskDate1.setDate(taskDate1.getDate() - 1);\n      const tasksCache = [{\n        dueAt: taskDate1,\n        title: 'task A',\n        status: TASK_STATUS.ACTIVE\n      }, {\n        title: 'task B',\n        status: TASK_STATUS.ACTIVE\n      }];\n      const loan = {\n        tasksCache\n      };\n      expect(nextDueTaskReducer(loan)).to.deep.include({\n        title: 'task B',\n        status: TASK_STATUS.ACTIVE\n      });\n    });\n    it('puts older tasks first', () => {\n      const taskDate1 = new Date();\n      taskDate1.setDate(taskDate1.getDate() - 1);\n      const taskDate2 = new Date();\n      taskDate2.setDate(taskDate2.getDate() - 2);\n      const taskDate3 = new Date();\n      taskDate3.setDate(taskDate3.getDate() - 3);\n      const tasksCache = [{\n        dueAt: taskDate1,\n        title: 'task A',\n        status: TASK_STATUS.ACTIVE\n      }, {\n        createdAt: taskDate2,\n        title: 'task B',\n        status: TASK_STATUS.ACTIVE\n      }, {\n        createdAt: taskDate3,\n        title: 'task C',\n        status: TASK_STATUS.ACTIVE\n      }];\n      const loan = {\n        tasksCache\n      };\n      expect(nextDueTaskReducer(loan)).to.deep.include({\n        title: 'task C',\n        status: TASK_STATUS.ACTIVE\n      });\n    });\n    it('puts older tasks first', () => {\n      const taskDate1 = new Date();\n      taskDate1.setDate(taskDate1.getDate() - 1);\n      const taskDate2 = new Date();\n      taskDate2.setDate(taskDate2.getDate() - 2);\n      const taskDate3 = new Date();\n      taskDate3.setDate(taskDate3.getDate() - 3);\n      const tasksCache = [{\n        createdAt: taskDate2,\n        title: 'task B',\n        status: TASK_STATUS.ACTIVE\n      }, {\n        dueAt: taskDate1,\n        title: 'task A',\n        status: TASK_STATUS.ACTIVE\n      }, {\n        dueAt: taskDate3,\n        title: 'task C',\n        status: TASK_STATUS.ACTIVE\n      }];\n      const loan = {\n        tasksCache\n      };\n      expect(nextDueTaskReducer(loan)).to.deep.include({\n        title: 'task B',\n        status: TASK_STATUS.ACTIVE\n      });\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"reactFunctions.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/test/reactFunctions.spec.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet arePathsUnequal;\nmodule.link(\"../reactFunctions\", {\n  arePathsUnequal(v) {\n    arePathsUnequal = v;\n  }\n\n}, 1);\ndescribe('reactFunctions', () => {\n  describe('arePathsUnequal', () => {\n    it('returns true or false if paths are unequal', () => {\n      const func = arePathsUnequal(['a']);\n      expect(func({\n        a: 1\n      }, {\n        a: 2\n      })).to.equal(true);\n      expect(func({\n        a: 1\n      }, {\n        a: 1\n      })).to.equal(false);\n    });\n    it('does not fail with nested objects', () => {\n      const func = arePathsUnequal(['a.b']);\n      expect(func({\n        a: 1\n      }, {\n        a: {\n          b: 1\n        }\n      })).to.equal(true);\n      expect(func({\n        a: 1\n      }, {\n        a: 1\n      })).to.equal(false);\n      expect(func({\n        a: {\n          b: 1\n        }\n      }, {\n        a: {\n          b: 1\n        }\n      })).to.equal(false);\n    });\n    it('compares arrays', () => {\n      const func = arePathsUnequal(['a']);\n      expect(func({\n        a: [1]\n      }, {\n        a: [1]\n      })).to.equal(false);\n      expect(func({\n        a: [1]\n      }, {\n        a: []\n      })).to.equal(true);\n    });\n    it('throws if trying to compare objects', () => {\n      const func = arePathsUnequal(['a']);\n      expect(() => func({\n        a: {}\n      }, {\n        a: {}\n      })).to.throw('Should not');\n    });\n    it('works if one value is null', () => {\n      const func = arePathsUnequal(['a']);\n      expect(func({\n        a: null\n      }, {\n        a: 2\n      })).to.equal(true);\n      expect(func({\n        a: 2\n      }, {\n        a: null\n      })).to.equal(true);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"redirection.test.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/test/redirection.test.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Accounts;\nmodule.link(\"meteor/accounts-base\", {\n  Accounts(v) {\n    Accounts = v;\n  }\n\n}, 0);\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 1);\nlet Random;\nmodule.link(\"meteor/random\", {\n  Random(v) {\n    Random = v;\n  }\n\n}, 2);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 3);\nlet sinon;\nmodule.link(\"sinon\", {\n  default(v) {\n    sinon = v;\n  }\n\n}, 4);\nlet getRedirectIfInRoleForOtherApp;\nmodule.link(\"../redirection\", {\n  getRedirectIfInRoleForOtherApp(v) {\n    getRedirectIfInRoleForOtherApp = v;\n  }\n\n}, 5);\nlet ROLES;\nmodule.link(\"../../api/constants\", {\n  ROLES(v) {\n    ROLES = v;\n  }\n\n}, 6);\ndescribe('getRedirectIfInRoleForOtherApp', () => {\n  const token = Random.id();\n  beforeEach(() => {\n    // It's available only on the client.\n    Accounts._storedLoginToken = sinon.stub().callsFake(() => token);\n  });\n  afterEach(() => {\n    delete Accounts._storedLoginToken;\n  });\n\n  const userWithRole = role => ({\n    roles: [role]\n  });\n\n  const urlFor = service => \"\".concat(Meteor.settings.public.subdomains[service], \"/login-token/\").concat(token);\n\n  [['app', [userWithRole(ROLES.PRO), ROLES.PRO, 'pro'], urlFor('pro')], ['app', [userWithRole(ROLES.PRO), ROLES.USER, 'app']], ['app', [userWithRole(ROLES.USER), ROLES.PRO, 'pro']], ['app', [userWithRole(ROLES.USER), ROLES.USER, 'app']], ['pro', [userWithRole(ROLES.PRO), ROLES.PRO, 'pro']], ['pro', [userWithRole(ROLES.PRO), ROLES.USER, 'app']], ['pro', [userWithRole(ROLES.USER), ROLES.PRO, 'pro']], ['pro', [userWithRole(ROLES.USER), ROLES.USER, 'app'], urlFor('app')]].forEach((_ref) => {\n    let [microservice, args, url] = _ref;\n    it(\"Should work in \".concat(microservice, \" for \").concat(JSON.stringify(args)), () => {\n      const originalMicroservice = Meteor.settings.public.microservice;\n      Meteor.settings.public.microservice = microservice;\n      expect(getRedirectIfInRoleForOtherApp(...args)).to.equal(url);\n      Meteor.settings.public.microservice = originalMicroservice;\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"routerUtils.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/test/routerUtils.spec.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet createRoute;\nmodule.link(\"../routerUtils\", {\n  createRoute(v) {\n    createRoute = v;\n  }\n\n}, 1);\ndescribe('routerUtils', () => {\n  describe('createRoute', () => {\n    it('replaces wildcard params with real value', () => {\n      expect(createRoute(':hello', {\n        ':hello': 'yo'\n      })).to.equal('yo');\n    });\n    it('replaces multiple wildcard params with real value', () => {\n      expect(createRoute(':hello/:yo', {\n        ':hello': 'yo',\n        ':yo': 'dude'\n      })).to.equal('yo/dude');\n    });\n    it('returns the initial path if no params are passed', () => {\n      expect(createRoute('yo')).to.equal('yo');\n    });\n    it('prefixes replacers with a colon if none is provided', () => {\n      expect(createRoute(':hello', {\n        hello: 'yo'\n      })).to.equal('yo');\n      expect(createRoute(':hello/:yo', {\n        hello: 'yo',\n        yo: 'dude'\n      })).to.equal('yo/dude');\n    });\n    it('replaces wildcard params while removing interrogation marks', () => {\n      expect(createRoute('/abc/:hello?', {\n        ':hello': ''\n      })).to.equal('/abc/');\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"sortArrayOfObjects.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/test/sortArrayOfObjects.spec.js                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet cloneDeep;\nmodule.link(\"lodash/cloneDeep\", {\n  default(v) {\n    cloneDeep = v;\n  }\n\n}, 1);\nlet sortArrayOfObjects, ORDER;\nmodule.link(\"../sortArrayOfObjects\", {\n  default(v) {\n    sortArrayOfObjects = v;\n  },\n\n  ORDER(v) {\n    ORDER = v;\n  }\n\n}, 2);\ndescribe('sortArrayOfObjects', () => {\n  it('sorts objects ascending by root values', () => {\n    const input = [{\n      someValue: 3,\n      anotherValue: 2\n    }, {\n      someValue: 1,\n      anotherValue: 5\n    }, {\n      someValue: -2,\n      anotherValue: 0\n    }, {\n      someValue: 0,\n      anotherValue: 2\n    }, {\n      someValue: -2,\n      anotherValue: 2\n    }];\n    const expectedOutput = [{\n      someValue: -2,\n      anotherValue: 0\n    }, {\n      someValue: -2,\n      anotherValue: 2\n    }, {\n      someValue: 0,\n      anotherValue: 2\n    }, {\n      someValue: 1,\n      anotherValue: 5\n    }, {\n      someValue: 3,\n      anotherValue: 2\n    }];\n    expect(sortArrayOfObjects(input, 'someValue', ORDER.ASC)).to.deep.equal(expectedOutput);\n  });\n  it('sorts objects descending by root values', () => {\n    const input = [{\n      someValue: 3,\n      anotherValue: 2\n    }, {\n      someValue: 1,\n      anotherValue: 5\n    }, {\n      someValue: -2,\n      anotherValue: 0\n    }, {\n      someValue: 0,\n      anotherValue: 2\n    }, {\n      someValue: -2,\n      anotherValue: 2\n    }];\n    const expectedOutput = [{\n      someValue: 3,\n      anotherValue: 2\n    }, {\n      someValue: 1,\n      anotherValue: 5\n    }, {\n      someValue: 0,\n      anotherValue: 2\n    }, {\n      someValue: -2,\n      anotherValue: 0\n    }, {\n      someValue: -2,\n      anotherValue: 2\n    }];\n    expect(sortArrayOfObjects(input, 'someValue', ORDER.DESC)).to.deep.equal(expectedOutput);\n  });\n  it('sorts objects ascending by nested values', () => {\n    const input = [{\n      someValue: -3,\n      anotherVal: 'val',\n      a: {\n        b: 'x'\n      }\n    }, {\n      someValue: 2,\n      anotherVal: 'val',\n      a: {\n        b: 'a'\n      }\n    }, {\n      someValue: 4,\n      a: {\n        b: 'z'\n      }\n    }, {\n      someValue: 1,\n      a: {\n        b: 'cc'\n      }\n    }, {\n      a: {\n        b: 'dd'\n      },\n      someValue: 4\n    }];\n    const expectedOutput = [{\n      someValue: 2,\n      anotherVal: 'val',\n      a: {\n        b: 'a'\n      }\n    }, {\n      someValue: 1,\n      a: {\n        b: 'cc'\n      }\n    }, {\n      a: {\n        b: 'dd'\n      },\n      someValue: 4\n    }, {\n      someValue: -3,\n      anotherVal: 'val',\n      a: {\n        b: 'x'\n      }\n    }, {\n      someValue: 4,\n      a: {\n        b: 'z'\n      }\n    }];\n    expect(sortArrayOfObjects(input, 'a.b', ORDER.ASC)).to.deep.equal(expectedOutput);\n  });\n  it('sorts objects descending by nested values', () => {\n    const input = [{\n      someValue: -3,\n      anotherVal: 'val',\n      a: {\n        b: 'x'\n      }\n    }, {\n      someValue: 2,\n      anotherVal: 'val',\n      a: {\n        b: 'a'\n      }\n    }, {\n      someValue: 4,\n      a: {\n        b: 'z'\n      }\n    }, {\n      someValue: 1,\n      a: {\n        b: 'cc'\n      }\n    }, {\n      a: {\n        b: 'dd'\n      },\n      someValue: 4\n    }];\n    const expectedOutput = [{\n      someValue: 4,\n      a: {\n        b: 'z'\n      }\n    }, {\n      someValue: -3,\n      anotherVal: 'val',\n      a: {\n        b: 'x'\n      }\n    }, {\n      a: {\n        b: 'dd'\n      },\n      someValue: 4\n    }, {\n      someValue: 1,\n      a: {\n        b: 'cc'\n      }\n    }, {\n      someValue: 2,\n      anotherVal: 'val',\n      a: {\n        b: 'a'\n      }\n    }];\n    expect(sortArrayOfObjects(input, 'a.b', ORDER.DESC)).to.deep.equal(expectedOutput);\n  });\n  it('sorts objects by case-insensitive string values', () => {\n    const input = [{\n      a: 'ba'\n    }, {\n      a: 'aa'\n    }, {\n      a: 'Aa'\n    }, {\n      a: 'Zz'\n    }];\n    const expectedOutput = [{\n      a: 'aa'\n    }, {\n      a: 'Aa'\n    }, {\n      a: 'ba'\n    }, {\n      a: 'Zz'\n    }];\n    expect(sortArrayOfObjects(input, 'a', ORDER.ASC)).to.deep.equal(expectedOutput);\n  });\n  it('sorts objects ascending by default', () => {\n    const input = [{\n      a: 2\n    }, {\n      a: 1\n    }];\n    const expectedOutput = [{\n      a: 1\n    }, {\n      a: 2\n    }];\n    expect(sortArrayOfObjects(input, 'a')).to.deep.equal(expectedOutput);\n  });\n  it('does not mutate the input array', () => {\n    const input = [{\n      a: 2\n    }, {\n      a: 1\n    }];\n    const inputClone = cloneDeep(input);\n    sortArrayOfObjects(input, 'a', ORDER.ASC);\n    expect(input).to.deep.equal(inputClone);\n  });\n  it('returns the same input when the sort field is undefined', () => {\n    const input = [{\n      a: 2\n    }, {\n      a: 1\n    }];\n    expect(sortArrayOfObjects(input, undefined, ORDER.ASC)).to.equal(input);\n  });\n  it('returns the same input when the sort field is an empty string', () => {\n    const input = [{\n      a: 2\n    }, {\n      a: 1\n    }];\n    expect(sortArrayOfObjects(input, '', ORDER.ASC)).to.equal(input);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"userFunctions.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/test/userFunctions.spec.js                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet getUserDisplayName;\nmodule.link(\"../userFunctions\", {\n  getUserDisplayName(v) {\n    getUserDisplayName = v;\n  }\n\n}, 1);\ndescribe('User Functions', () => {\n  const firstName = 'firstName';\n  const lastName = 'lastName';\n  const username = 'username';\n  const emails = [{\n    address: 'email@email.com'\n  }];\n  describe('getUserDisplayName', () => {\n    it('should return an empty string when no arguments are passed', () => {\n      expect(getUserDisplayName({})).to.equal('');\n    });\n    it(\"should return the user's names when they are defined\", () => {\n      expect(getUserDisplayName({\n        firstName,\n        lastName\n      })).to.equal(\"\".concat(firstName, \" \").concat(lastName));\n    });\n    it('should return just the firstName when the lastName is undefined', () => {\n      expect(getUserDisplayName({\n        firstName\n      })).to.equal(firstName);\n    });\n    it('should return the email address when it is defined and the names and username are undefined', () => {\n      expect(getUserDisplayName({\n        emails\n      })).to.equal(emails[0].address);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"zipcodes.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/test/zipcodes.spec.js                                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet zipcodes;\nmodule.link(\"../zipcodes\", {\n  default(v) {\n    zipcodes = v;\n  }\n\n}, 1);\ndescribe('zipcodes', () => {\n  it('returns the canton for a zipcode', () => {\n    expect(zipcodes(1201)).to.equal('GE');\n    expect(zipcodes(1400)).to.equal('VD');\n    expect(zipcodes(8004)).to.equal('ZH');\n    expect(zipcodes(9485)).to.equal('LI');\n  });\n  it('allows using 1200 for geneva', () => {\n    expect(zipcodes(1200)).to.equal('GE');\n  });\n  it('returns null if no canton is found', () => {\n    expect(zipcodes(100)).to.equal(null);\n    expect(zipcodes(100)).to.equal(null);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"APIs.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/APIs.js                                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  getClosestStations: () => getClosestStations,\n  getNearbyPlace: () => getNearbyPlace,\n  getLocations: () => getLocations\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet fetch;\n\nif (Meteor.isServer) {\n  fetch = require('node-fetch');\n} else {\n  fetch = global.fetch;\n}\n\nconst getClosestStations = (latitude, longitude) => fetch(\"https://transport.opendata.ch/v1/locations?x=\".concat(latitude, \"&y=\").concat(longitude, \"&type=station\")).then(response => {\n  if (response.status !== 200) {\n    throw new Error('error code: ', response.status);\n  } else {\n    return response.json();\n  }\n}).then(data => data.stations);\n\nconst getNearbyPlace = (latitude, longitude, type, byDistance) => {\n  const location = new window.google.maps.LatLng(latitude, longitude);\n  return new Promise((resolve, reject) => {\n    const div = document.createElement('div');\n    const service = new window.google.maps.places.PlacesService(div);\n    service.nearbySearch({\n      location,\n      radius: byDistance ? undefined : 5000,\n      rankBy: byDistance ? window.google.maps.places.RankBy.DISTANCE : window.google.maps.places.RankBy.PROMINENCE,\n      type: [type]\n    }, (places, status) => {\n      if (status === window.google.maps.places.PlacesServiceStatus.OK) {\n        resolve(places[0]);\n      } else {\n        reject(status);\n      }\n    });\n  }).then(place => {\n    const lat = place.geometry.location.lat();\n    const lng = place.geometry.location.lng();\n    const name = place.name;\n    return new Promise((resolve, reject) => {\n      const distanceService = new window.google.maps.DistanceMatrixService();\n      distanceService.getDistanceMatrix({\n        origins: [location],\n        destinations: [new window.google.maps.LatLng(lat, lng)],\n        travelMode: 'WALKING'\n      }, (result, status) => {\n        if (status !== 'OK') {\n          reject(status);\n        }\n\n        resolve({\n          distance: result.rows[0].elements[0].distance,\n          name\n        });\n      });\n    });\n  });\n};\n\nconst google_key = 'AIzaSyCdoi6BxlTf7GgxqAGAsd1ADM_UwgqWUP8';\n\nconst getLocations = zipCode => fetch(\"https://maps.googleapis.com/maps/api/geocode/json?address=\".concat(zipCode, \"&components=country:CH&language=fr&key=\").concat(google_key)).then(result => result.json()).then(result => {\n  const array = result.results[0].postcode_localities || [];\n  const localities = result.results[0].address_components.filter(obj => obj.types.indexOf('locality') >= 0);\n\n  if (localities && localities.length) {\n    localities.forEach(l => array.push(l.long_name));\n  } // filter duplicates\n\n\n  return array.filter((value, index) => array.indexOf(value) === index);\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"checkObjectStructure.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/checkObjectStructure.js                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  testErrors: () => testErrors,\n  makeCheckObjectStructure: () => makeCheckObjectStructure\n});\nconst testErrors = {\n  missingKey: (key, parentKey) => \"Missing key \".concat(key, \" from object \").concat(parentKey),\n  shouldBeArray: key => \"Object key \".concat(key, \" must be an array\"),\n  shouldBeObject: key => \"Object key \".concat(key, \" must be an object\"),\n  emptyArray: (key, parentKey) => \"Array at object key \".concat(key, \" in \").concat(parentKey, \" should not be empty\")\n};\n\nconst makeCheckObjectStructure = function () {\n  let errorMessages = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : testErrors;\n  const {\n    missingKey,\n    shouldBeArray,\n    shouldBeObject,\n    emptyArray\n  } = errorMessages;\n  let errors = [];\n\n  const checkObjectStructure = (_ref) => {\n    let {\n      obj,\n      template,\n      parentKey\n    } = _ref;\n\n    const checkTemplate = (subObj, subTemplate, subParentKey) => Object.keys(subTemplate).forEach(key => {\n      if (subObj[key] === undefined) {\n        if (typeof subTemplate[key] === 'object' && subTemplate[key].$or) {\n          if (!subObj[subTemplate[key].$or]) {\n            errors.push(missingKey(key, subParentKey || ''));\n            return;\n          }\n        } else {\n          errors.push(missingKey(key, subParentKey || ''));\n          return;\n        }\n      }\n\n      if (Array.isArray(subTemplate[key])) {\n        if (!Array.isArray(subObj[key])) {\n          errors.push(shouldBeArray(key));\n        }\n\n        if (subTemplate[key].length > 0 && subObj[key].length === 0) {\n          errors.push(emptyArray(key, subParentKey));\n        }\n\n        if (subTemplate[key].length > 0 && typeof subTemplate[key][0] === 'object' && !Array.isArray(subTemplate[key][0])) {\n          subObj[key].forEach(object => checkTemplate(object, subTemplate[key][0]));\n        }\n      } else if (typeof subTemplate[key] === 'object' && !Object.keys(subTemplate[key]).includes('$or')) {\n        if (typeof subObj[key] !== 'object' || Array.isArray(subObj[key])) {\n          errors.push(shouldBeObject(key));\n        } else {\n          checkTemplate(subObj[key], subTemplate[key], key);\n        }\n      }\n    });\n\n    checkTemplate(obj, template, parentKey);\n\n    if (errors.length) {\n      const errorMessage = errors.join(', ');\n      errors = [];\n      throw errorMessage;\n    }\n\n    errors = [];\n  };\n\n  return checkObjectStructure;\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"conversionFunctions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/conversionFunctions.js                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  toMoney: () => toMoney,\n  toNumber: () => toNumber,\n  toDecimalNumber: () => toDecimalNumber,\n  toDistanceString: () => toDistanceString,\n  roundValue: () => roundValue,\n  roundTo: () => roundTo\n});\n\nfunction toMoney(value) {\n  let {\n    noPrefix,\n    rounded = true\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (value === 0) {\n    return 0;\n  }\n\n  if (Number.isNaN(value)) {\n    // Exception for isNaN which should never appear\n    return 0;\n  }\n\n  if (!value) {\n    // Don't format the value if it is undefined or an empty string\n    return value;\n  }\n\n  const parsedValue = rounded ? Math.round(Number(Math.round(value))) : Number(value);\n  const negativePrefix = !noPrefix && value < 0 && parsedValue !== 0 ? '-' : '';\n\n  if (rounded) {\n    return negativePrefix + String(parsedValue).replace(/\\D/g, '').replace(/\\B(?=(\\d{3})+(?!\\d))/g, ' ');\n  }\n\n  const roundedDecimals = Math.round(parsedValue * 100) / 100;\n  const [integer, decimals] = String(roundedDecimals).split('.');\n  const integerPart = negativePrefix + integer.replace(/\\D/g, '').replace(/\\B(?=(\\d{3})+(?!\\d))/g, ' ');\n  let decimalPart = decimals;\n\n  if (!decimals) {\n    return [integerPart, '00'].join('.');\n  }\n\n  if (decimals && decimals.length > 2) {\n    const rounding = Math.pow(10, decimals.length - 2);\n    decimalPart = Math.round(Number(decimals) / rounding) * rounding;\n  }\n\n  return [integerPart, String(decimalPart).slice(0, 2)].join('.');\n}\n\nfunction toNumber(value) {\n  if (typeof value === 'number') {\n    return value;\n  }\n\n  return value ? Number(String(value).replace(/\\D/g, '')) : value;\n}\n\nfunction toDecimalNumber(value) {\n  if (typeof value === 'number') {\n    return value;\n  } // Remove unwanted characters, except digits, dots and commas\n\n\n  const newValue = value ? String(value).replace(/[^\\d.,]/g, '') : value; // replace commas with dots\n\n  const commaReplaced = newValue ? Number(newValue.replace(',', '.')) : newValue;\n  return commaReplaced;\n}\n\nconst toDistanceString = dist => {\n  if (dist <= 0) {\n    return '0 m';\n  }\n\n  if (dist < 1000) {\n    return \"\".concat(Math.round(dist / 10) * 10, \" m\");\n  }\n\n  if (dist < 10000) {\n    return \"\".concat((Math.round(dist / 100) / 10).toFixed(1), \" km\");\n  }\n\n  return \"\".concat(Math.round(dist / 1000), \" km\");\n};\n\nconst roundValue = (value, digits) => Math.round(value / Math.pow(10, digits)) * Math.pow(10, digits);\n\nconst roundTo = (value, digits) => {\n  if (digits === 0) {\n    return value;\n  }\n\n  const roundedValue = roundValue(value, digits);\n\n  if (digits > 0) {\n    return roundedValue;\n  }\n\n  return parseFloat(roundedValue.toFixed(-digits));\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"cookiesHelpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/cookiesHelpers.js                                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  getCookie: () => getCookie,\n  setCookie: () => setCookie,\n  parseCookies: () => parseCookies\n});\n\nconst getCookie = cookieName => {\n  const cookie = RegExp(\"\".concat(cookieName, \"[^;]+\")).exec(document.cookie);\n  return decodeURIComponent(cookie ? cookie.toString().replace(/^[^=]+./, '') : '');\n};\n\nconst setCookie = (cookieName, value) => {\n  document.cookie = \"\".concat(cookieName, \"=\").concat(value);\n};\n\nconst parseCookies = () => document.cookie.split(';').reduce((res, c) => {\n  const [key, val] = c.trim().split('=').map(decodeURIComponent);\n\n  try {\n    return Object.assign(res, {\n      [key]: JSON.parse(val)\n    });\n  } catch (e) {\n    return Object.assign(res, {\n      [key]: val\n    });\n  }\n}, {});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"featureFunctions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/featureFunctions.js                                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  returnEmptyArray: () => returnEmptyArray,\n  returnFalse: () => returnFalse\n});\n\nconst returnEmptyArray = () => [];\n\nconst returnFalse = () => false;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"formArrayHelpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/formArrayHelpers.js                                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  shouldCountField: () => shouldCountField,\n  getCountedArray: () => getCountedArray,\n  getMissingFieldIds: () => getMissingFieldIds,\n  getFormValuesHash: () => getFormValuesHash,\n  getFormValuesHashMultiple: () => getFormValuesHashMultiple\n});\nlet get;\nmodule.link(\"lodash/get\", {\n  default(v) {\n    get = v;\n  }\n\n}, 0);\nlet arrayify, simpleHash;\nmodule.link(\"./general\", {\n  arrayify(v) {\n    arrayify = v;\n  },\n\n  simpleHash(v) {\n    simpleHash = v;\n  }\n\n}, 1);\n\n// Returns the current value of an autoForm input\nconst getCurrentValue = (input, doc) => get(doc, input.id);\n\nconst shouldCountField = formField => (formField.condition === undefined || formField.condition === true) && formField.required !== false && !formField.disabled && formField.type !== 'h3';\n\nconst conditionalInputIsTriggered = (rootField, doc) => getCurrentValue(rootField.inputs[0], doc) === rootField.conditionalTrueValue; // getCountedArray - Returns an array of values that are mandatory and should\n// be counted to determine a completion percentage of a form\n\n\nconst getCountedArray = (formArray, doc, shouldCountAllFields) => {\n  const arr = [];\n  formArray.forEach(i => {\n    if (shouldCountAllFields || shouldCountField(i)) {\n      if (i.type === 'conditionalInput') {\n        if (conditionalInputIsTriggered(i, doc)) {\n          // If the conditional input is triggering the next input, add all values\n          i.inputs.forEach(input => {\n            if (shouldCountField(input)) {\n              arr.push(getCurrentValue(input, doc));\n            }\n          });\n        } else {\n          // If conditional value is not triggering\n          arr.push(getCurrentValue(i.inputs[0], doc));\n        }\n      } else {\n        arr.push(getCurrentValue(i, doc));\n      }\n    }\n  });\n  return arr;\n};\n\nconst fieldIsValid = (field, doc) => {\n  const currentValue = getCurrentValue(field, doc);\n\n  if (Array.isArray(currentValue)) {\n    return currentValue.length > 0;\n  }\n\n  return currentValue !== undefined;\n}; // Returns a list of fields that are missing from the doc, given a form array\n// Helps you know which fields still need to be filled\n\n\nconst getMissingFieldIds = (formArray, doc) => formArray.reduce((missingFieldIds, field) => {\n  const {\n    type,\n    id,\n    inputs\n  } = field;\n\n  if (!shouldCountField(field)) {\n    return missingFieldIds;\n  }\n\n  if (type === 'conditionalInput') {\n    const [conditionalField, ...additionalFields] = inputs;\n\n    if (conditionalInputIsTriggered(field, doc)) {\n      return [...missingFieldIds, ...additionalFields.reduce((missingConditionalFields, additionalField) => {\n        if (fieldIsValid(additionalField, doc) || !shouldCountField(additionalField)) {\n          return missingConditionalFields;\n        }\n\n        return [...missingConditionalFields, additionalField.id];\n      }, [])];\n    }\n\n    if (!fieldIsValid(conditionalField, doc)) {\n      return [...missingFieldIds, conditionalField.id];\n    }\n\n    return missingFieldIds;\n  }\n\n  if (!fieldIsValid(field, doc)) {\n    return [...missingFieldIds, id];\n  }\n\n  return missingFieldIds;\n}, []);\n\nconst getFormValuesHash = (formArray, doc) => {\n  const values = getCountedArray(formArray, doc, true);\n  return simpleHash(values);\n};\n\nconst getFormValuesHashMultiple = combos => combos.reduce((tot, _ref) => {\n  let {\n    formArray,\n    doc\n  } = _ref;\n  return tot + getFormValuesHash(formArray, doc);\n}, 0);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"formHelpers.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/formHelpers.js                                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  numberFormatters: () => numberFormatters,\n  phoneFormatters: () => phoneFormatters,\n  percentFormatters: () => percentFormatters,\n  moneyFormatters: () => moneyFormatters,\n  makeFormArray: () => makeFormArray\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet T;\nmodule.link(\"../components/Translation\", {\n  default(v) {\n    T = v;\n  }\n\n}, 1);\nlet toNumber;\nmodule.link(\"./conversionFunctions\", {\n  toNumber(v) {\n    toNumber = v;\n  }\n\n}, 2);\n\nconst onlyNums = value => value.replace(/[^\\d]/g, '');\n\nconst onlyNumsAndPlus = value => value.replace(/[^\\d&+]/g, '');\n\nconst numberFormatters = {\n  parse: value => value && toNumber(value) // format: value => value,\n\n};\nconst phoneFormatters = {\n  parse: value => value && onlyNumsAndPlus(value),\n  format: value => value ? onlyNumsAndPlus(value) : ''\n};\nconst percentFormatters = {\n  parse: value => value === '' ? '' : Math.round(parseFloat(value) * 100) / 10000,\n  format: value => value === '' ? '' : (value * 100).toFixed(2)\n};\nconst moneyFormatters = {\n  parse: value => toNumber(value)\n};\n\nconst setRequired = initialValue => initialValue === undefined ? true : initialValue;\n\nconst makeFormArray = (array, intlPrefix) => array.map(field => (0, _objectSpread2.default)({}, field, {\n  required: setRequired(field.required),\n  label: field.label || React.createElement(T, {\n    id: \"\".concat(intlPrefix, \".\").concat(field.id)\n  })\n}));\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"general.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/general.js                                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  arrayify: () => arrayify,\n  getPercent: () => getPercent,\n  getAggregatePercent: () => getAggregatePercent,\n  normalize: () => normalize,\n  simpleHash: () => simpleHash\n});\nlet isArray;\nmodule.link(\"lodash/isArray\", {\n  default(v) {\n    isArray = v;\n  }\n\n}, 0);\n\nconst arrayify = value => {\n  if (value) {\n    if (isArray(value)) {\n      return value;\n    }\n\n    return [value];\n  }\n\n  return [];\n};\n\nconst getPercent = array => {\n  if (!array) {\n    return 0;\n  }\n\n  if (array.length === 0) {\n    // If array is empty, return 100%\n    return 1;\n  }\n\n  const percent = array.reduce((tot, val) => {\n    if (isArray(val)) {\n      // Empty arrays need to be filled\n      return tot + (val.length ? 1 : 0);\n    }\n\n    if (val !== undefined && val !== null) {\n      return tot + 1;\n    }\n\n    return tot;\n  }, 0) / array.length;\n  return Number.isFinite(percent) ? percent : 0;\n};\n\nconst getAggregatePercent = percentageObjects => {\n  const {\n    percent: aggregatePercent,\n    count: aggregateCount\n  } = percentageObjects.reduce((obj, _ref) => {\n    let {\n      percent,\n      count\n    } = _ref;\n    return {\n      percent: obj.percent + percent * count,\n      count: obj.count + count\n    };\n  }, {\n    percent: 0,\n    count: 0\n  });\n  return {\n    count: aggregateCount,\n    percent: aggregateCount === 0 ? 0 : aggregatePercent / aggregateCount\n  };\n};\n\nconst normalize = array => array.reduce((obj, item) => (0, _objectSpread2.default)({}, obj, {\n  [item.id || item._id]: item\n}), {});\n\nconst simpleHash = data => {\n  let string = data;\n\n  if (typeof data !== 'string') {\n    string = JSON.stringify(data);\n  }\n\n  let hash = 0;\n\n  if (string.length === 0) {\n    return hash;\n  }\n\n  for (let i = 0; i < string.length; i++) {\n    const char = string.charCodeAt(i);\n    hash = (hash << 5) - hash + char;\n    hash &= hash; // Convert to 32bit integer\n  }\n\n  return hash;\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"intl.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/intl.js                                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  Intl: () => Intl\n});\nlet IntlMessageFormat;\nmodule.link(\"intl-messageformat\", {\n  default(v) {\n    IntlMessageFormat = v;\n  }\n\n}, 0);\nlet ReactDOMServer;\nmodule.link(\"react-dom/server\", {\n  default(v) {\n    ReactDOMServer = v;\n  }\n\n}, 1);\nlet getUserLocale;\nmodule.link(\"./localization/localization\", {\n  getUserLocale(v) {\n    getUserLocale = v;\n  }\n\n}, 2);\nlet defaultIntlValues;\nmodule.link(\"../components/Translation/defaultIntlValues\", {\n  default(v) {\n    defaultIntlValues = v;\n  }\n\n}, 3);\nconst defaultValues = Object.keys(defaultIntlValues).reduce((obj, key) => {\n  const value = defaultIntlValues[key];\n  return (0, _objectSpread2.default)({}, obj, {\n    [key]: ReactDOMServer.renderToString(value)\n  });\n}, {});\n\nclass Intl {\n  constructor(messages) {\n    this.init(messages);\n  }\n\n  init(messages) {\n    this.messages = messages;\n  }\n\n  formatMessage() {\n    let {\n      id,\n      values = {},\n      fallback\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let legacyValues = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const allValues = (0, _objectSpread2.default)({}, values, legacyValues);\n\n    if (id === undefined) {\n      throw new Error('an id is required in formatMessage');\n    }\n\n    const message = new IntlMessageFormat(this.messages[id] || (fallback !== undefined ? fallback : id), getUserLocale());\n    return message.format((0, _objectSpread2.default)({}, defaultValues, allValues));\n  }\n\n}\n\nmodule.exportDefault(new Intl());\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"loadable.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/loadable.js                                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet Loadable;\nmodule.link(\"react-loadable\", {\n  default(v) {\n    Loadable = v;\n  }\n\n}, 2);\nlet logError;\nmodule.link(\"../api/methods/index\", {\n  logError(v) {\n    logError = v;\n  }\n\n}, 3);\nlet LayoutError;\nmodule.link(\"../components/ErrorBoundary/LayoutError\", {\n  default(v) {\n    LayoutError = v;\n  }\n\n}, 4);\nlet Loading;\nmodule.link(\"../components/Loading\", {\n  default(v) {\n    Loading = v;\n  }\n\n}, 5);\nconst ENABLE_LOADABLE = true;\n\nif (!ENABLE_LOADABLE && Meteor.isProduction) {\n  throw new Error('ENABLE_LOADABLE should be true in production');\n}\n\nconst LoadableLoading = (_ref) => {\n  let {\n    error,\n    retry,\n    pastDelay\n  } = _ref;\n\n  if (error) {\n    logError.run({\n      error: JSON.parse(JSON.stringify(error, Object.getOwnPropertyNames(error))),\n      additionalData: ['Loadable error'],\n      url: window && window.location && window.location.href ? window.location.href : ''\n    });\n    return React.createElement(LayoutError, {\n      error: error\n    });\n  }\n\n  if (pastDelay) {\n    return React.createElement(Loading, null);\n  }\n\n  return null;\n};\n\nmodule.exportDefault((_ref2) => {\n  let {\n    req,\n    loader\n  } = _ref2,\n      options = (0, _objectWithoutProperties2.default)(_ref2, [\"req\", \"loader\"]);\n\n  if (!ENABLE_LOADABLE && req) {\n    return req();\n  }\n\n  return Loadable((0, _objectSpread2.default)({\n    loading: LoadableLoading,\n    delay: 200,\n    // Hides the loading component for 200ms, to avoid flickering\n    loader\n  }, options));\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"loanFunctions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/loanFunctions.js                                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  formatLoanWithStructure: () => formatLoanWithStructure,\n  formatLoanWithDocuments: () => formatLoanWithDocuments,\n  formatLoanWithPromotion: () => formatLoanWithPromotion,\n  shouldSendStepNotification: () => shouldSendStepNotification,\n  nextDueTaskReducer: () => nextDueTaskReducer\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet STEPS, TASK_STATUS;\nmodule.link(\"../api/constants\", {\n  STEPS(v) {\n    STEPS = v;\n  },\n\n  TASK_STATUS(v) {\n    TASK_STATUS = v;\n  }\n\n}, 1);\nlet Calculator;\nmodule.link(\"./Calculator\", {\n  default(v) {\n    Calculator = v;\n  }\n\n}, 2);\n\nconst formatLoanWithStructure = (_ref) => {\n  let {\n    selectedStructure,\n    structures = [],\n    properties,\n    offers,\n    promotionOptions,\n    borrowers = []\n  } = _ref;\n\n  if (structures.length === 0) {\n    return undefined;\n  }\n\n  let structure = {};\n\n  if (selectedStructure) {\n    const foundStructure = structures.find((_ref2) => {\n      let {\n        id\n      } = _ref2;\n      return id === selectedStructure;\n    });\n\n    if (foundStructure) {\n      structure = foundStructure;\n\n      if (structure.propertyId) {\n        const property = properties.find((_ref3) => {\n          let {\n            _id\n          } = _ref3;\n          return _id === structure.propertyId;\n        });\n        structure = (0, _objectSpread2.default)({}, structure, {\n          property\n        });\n      }\n\n      if (structure.promotionOptionId) {\n        const promotionOption = promotionOptions.find((_ref4) => {\n          let {\n            _id\n          } = _ref4;\n          return _id === structure.promotionOptionId;\n        });\n        structure = (0, _objectSpread2.default)({}, structure, {\n          property: Calculator.formatPromotionOptionIntoProperty(promotionOption)\n        });\n      }\n\n      if (structure.offerId) {\n        const offer = offers.find((_ref5) => {\n          let {\n            _id\n          } = _ref5;\n          return _id === structure.offerId;\n        });\n        structure = (0, _objectSpread2.default)({}, structure, {\n          offer\n        });\n      }\n\n      if (structure.mortgageNoteIds) {\n        const borrowerMortgageNotes = borrowers.reduce((arr, _ref6) => {\n          let {\n            mortgageNotes: notes = []\n          } = _ref6;\n          return [...arr, ...notes];\n        }, []);\n        const mortgageNotes = structure.mortgageNoteIds.map(id => borrowerMortgageNotes.find((_ref7) => {\n          let {\n            _id\n          } = _ref7;\n          return _id === id;\n        }));\n        structure = (0, _objectSpread2.default)({}, structure, {\n          mortgageNotes\n        });\n      }\n    } else {\n      structure = {};\n    }\n\n    return structure;\n  }\n\n  return structure;\n};\n\nconst formatLoanWithDocuments = loan => {\n  if (!loan || !loan.structure) {\n    return loan;\n  }\n\n  const {\n    structure,\n    properties = []\n  } = loan;\n  const {\n    property,\n    propertyId\n  } = structure;\n  const structureProperty = properties.find((_ref8) => {\n    let {\n      _id\n    } = _ref8;\n    return _id === propertyId;\n  });\n  const propertyDocuments = structureProperty && structureProperty.documents;\n  return (0, _objectSpread2.default)({}, loan, {\n    structure: (0, _objectSpread2.default)({}, structure, {\n      property: property && (0, _objectSpread2.default)({}, property, {\n        documents: propertyDocuments\n      })\n    })\n  });\n};\n\nconst formatLoanWithPromotion = loan => {\n  if (loan.structure.promotionOptionId) {\n    const property = Calculator.selectProperty({\n      loan,\n      // Do this to make sure we're getting the promotionOption and not the\n      // fake property created from it\n      structureId: loan.structure.id\n    });\n    return (0, _objectSpread2.default)({}, loan, {\n      structure: (0, _objectSpread2.default)({}, loan.structure, {\n        property\n      })\n    });\n  }\n\n  return loan;\n};\n\nconst shouldSendStepNotification = (prevStep, nextStep) => (prevStep === STEPS.SOLVENCY || prevStep === STEPS.REQUEST) && nextStep === STEPS.OFFERS;\n\nconst nextDueTaskReducer = (_ref9) => {\n  let {\n    tasksCache: tasks = []\n  } = _ref9;\n  const activeTasks = tasks.filter((_ref10) => {\n    let {\n      status: taskStatus,\n      isPrivate = false,\n      assigneeLink: {\n        _id: assigneeId\n      } = {}\n    } = _ref10;\n\n    if (taskStatus !== TASK_STATUS.ACTIVE) {\n      return false;\n    }\n\n    if (isPrivate && assigneeId) {\n      return assigneeId === Meteor.userId();\n    }\n\n    return true;\n  });\n  const tasksWithoutDate = activeTasks.filter((_ref11) => {\n    let {\n      dueAt\n    } = _ref11;\n    return !dueAt;\n  }).sort((_ref12, _ref13) => {\n    let {\n      createdAt: A\n    } = _ref12;\n    let {\n      createdAt: B\n    } = _ref13;\n    return A - B;\n  });\n\n  if (tasksWithoutDate.length > 0) {\n    const task = tasksWithoutDate[0];\n    return (0, _objectSpread2.default)({}, task, {\n      dueAt: task.createdAt,\n      noDueDate: true\n    });\n  }\n\n  const sortedTasks = activeTasks.sort((_ref14, _ref15) => {\n    let {\n      dueAt: A\n    } = _ref14;\n    let {\n      dueAt: B\n    } = _ref15;\n    return A - B;\n  });\n\n  if (sortedTasks.length > 0) {\n    return sortedTasks[0];\n  }\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"message.js\":[\n  \"antd/lib/message\"\n],\"notification.js\":[\n  \"antd/lib/notification\"\n],\"pollUntilReady.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/pollUntilReady.js                                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nconst TEST_TIMEOUT = 2000;\nconst INTERVAL = 50;\n\nconst pollUntilReady = function (isReadyFunc) {\n  let interval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : INTERVAL;\n  let timeout = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : TEST_TIMEOUT;\n  return new Promise((resolve, reject) => {\n    let count = 0;\n    let poll;\n\n    const handleIsReady = isReady => {\n      const hasTimedOut = count > timeout / interval;\n\n      if (isReady) {\n        clearInterval(poll);\n        resolve(isReady);\n      } else if (hasTimedOut) {\n        clearInterval(poll);\n        reject();\n      }\n\n      count += 1;\n    };\n\n    poll = setInterval(() => {\n      if (isReadyFunc.then) {\n        return isReadyFunc().then(handleIsReady).catch(reject);\n      }\n\n      handleIsReady(isReadyFunc());\n    }, interval);\n  });\n};\n\nmodule.exportDefault(pollUntilReady);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"reactFunctions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/reactFunctions.js                                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  childrenToComponent: () => childrenToComponent,\n  renderObjectOrFunction: () => renderObjectOrFunction,\n  arePathsEqual: () => arePathsEqual,\n  arePathsUnequal: () => arePathsUnequal\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet renderComponent;\nmodule.link(\"recompose\", {\n  renderComponent(v) {\n    renderComponent = v;\n  }\n\n}, 1);\nlet get;\nmodule.link(\"lodash/get\", {\n  default(v) {\n    get = v;\n  }\n\n}, 2);\n\nconst childrenToComponent = children => props => React.Children.map(children, child => React.cloneElement(child, props));\n\nconst renderObjectOrFunction = objectOrFunction => renderComponent(typeof objectOrFunction === 'function' ? objectOrFunction : () => objectOrFunction);\n\nconst isEqual = (a, b) => {\n  if (Array.isArray(a) || Array.isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    return a.every((item, i) => isEqual(item, b[i]));\n  }\n\n  if (typeof a === 'object' && a !== null || typeof b === 'object' && b !== null) {\n    throw new Error('Should not compare objects between each other, use a more nested key');\n  } // Ignore edge cases, normally our props should never be NaN or Infinity\n\n\n  return a === b;\n};\n\nconst arePathsEqual = paths => (object1, object2) => paths.every(path => isEqual(get(object1, path), get(object2, path)));\n\nconst arePathsUnequal = paths => {\n  const testFunc = arePathsEqual(paths);\n  return function () {\n    return !testFunc(...arguments);\n  };\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"redirection.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/redirection.js                                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  isLogin: () => isLogin,\n  WITHOUT_LOGIN: () => WITHOUT_LOGIN,\n  isOnAllowedRoute: () => isOnAllowedRoute,\n  getRedirectIfInRoleForOtherApp: () => getRedirectIfInRoleForOtherApp\n});\nlet Accounts;\nmodule.link(\"meteor/accounts-base\", {\n  Accounts(v) {\n    Accounts = v;\n  }\n\n}, 0);\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 1);\nlet Roles;\nmodule.link(\"meteor/alanning:roles\", {\n  Roles(v) {\n    Roles = v;\n  }\n\n}, 2);\nlet ROLES;\nmodule.link(\"../api/constants\", {\n  ROLES(v) {\n    ROLES = v;\n  }\n\n}, 3);\nlet IMPERSONATE_ROUTE;\nmodule.link(\"../api/impersonation/impersonation\", {\n  IMPERSONATE_ROUTE(v) {\n    IMPERSONATE_ROUTE = v;\n  }\n\n}, 4);\n\nconst isLogin = path => path.slice(0, 6) === '/login';\n\nconst WITHOUT_LOGIN = ['/login', '/enroll-account', '/reset-password', '/verify-email', IMPERSONATE_ROUTE];\n\nconst isOnAllowedRoute = (path, routes) => routes.some(allowedRoute => {\n  if (allowedRoute === '/') {\n    return path === allowedRoute;\n  }\n\n  return path.startsWith(allowedRoute);\n});\n\nconst getRedirectIfInRoleForOtherApp = (currentUser, role, app) => {\n  const inApp = Meteor.settings.public.microservice === app;\n  if (inApp) return;\n  const inRole = Roles.userIsInRole(currentUser, role);\n  if (!inRole) return;\n  const url = [Meteor.settings.public.subdomains[app], '/login-token/', Accounts._storedLoginToken()];\n  return url.join('');\n};\n\nconst redirectIfInRoleForOtherApp = function () {\n  const url = getRedirectIfInRoleForOtherApp(...arguments);\n  if (url) window.location.replace(url);\n};\n\nconst getBaseRedirect = function (currentUser, pathname) {\n  let withoutLoginRoutes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n  if (!currentUser) {\n    const allowedRoutes = [...WITHOUT_LOGIN, ...withoutLoginRoutes];\n    return isOnAllowedRoute(pathname, allowedRoutes) ? false : \"/login?path=\".concat(pathname);\n  }\n\n  const isDev = Roles.userIsInRole(currentUser, ROLES.DEV);\n\n  if (isDev) {\n    return false;\n  } // redirectIfInRoleForOtherApp(currentUser, ROLES.USER, 'app');\n  // redirectIfInRoleForOtherApp(currentUser, ROLES.PRO, 'pro');\n\n};\n\nmodule.exportDefault(getBaseRedirect);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"routerUtils.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/routerUtils.js                                                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  createRoute: () => createRoute\n});\n\nconst formatReplacerObject = replacers => Object.keys(replacers).reduce((obj, key) => (0, _objectSpread2.default)({}, obj, {\n  [key.startsWith(':') ? key : \":\".concat(key)]: replacers[key]\n}), {});\n\nconst createRoute = function (wildcardPath) {\n  let replacers = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!replacers) {\n    return wildcardPath;\n  }\n\n  const formattedReplacers = formatReplacerObject(replacers);\n  return Object.keys(formattedReplacers).reduce((path, replacer) => path.replace(\"\".concat(replacer, \"?\"), formattedReplacers[replacer]).replace(replacer, formattedReplacers[replacer]), wildcardPath);\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"sortArrayOfObjects.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/sortArrayOfObjects.js                                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  ORDER: () => ORDER\n});\nlet orderBy;\nmodule.link(\"lodash/orderBy\", {\n  default(v) {\n    orderBy = v;\n  }\n\n}, 0);\nlet get;\nmodule.link(\"lodash/get\", {\n  default(v) {\n    get = v;\n  }\n\n}, 1);\nlet isEmpty;\nmodule.link(\"lodash/isEmpty\", {\n  default(v) {\n    isEmpty = v;\n  }\n\n}, 2);\nconst ORDER = {\n  ASC: 'asc',\n  DESC: 'desc'\n};\nmodule.exportDefault((data, fieldPath, order) => {\n  if (isEmpty(fieldPath)) {\n    return data;\n  }\n\n  const iteratee = item => {\n    const value = get(item, fieldPath);\n\n    if (typeof value === 'string') {\n      return value.toLowerCase();\n    }\n\n    return value;\n  };\n\n  return orderBy(data, iteratee, order);\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"sorting.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/sorting.js                                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet moment;\nmodule.link(\"moment\", {\n  default(v) {\n    moment = v;\n  }\n\n}, 0);\n\nconst isDate = date => date instanceof Date;\n\nconst sortFunc = (a, b) => {\n  if (!a) {\n    return -1;\n  }\n\n  if (!b) {\n    return 1;\n  }\n\n  if (typeof a === 'string') {\n    if (typeof b === 'string') {\n      // a and b are strings\n      return a.localeCompare(b);\n    } // a string and b number\n\n\n    return 1; // a > b\n  }\n\n  if (typeof b === 'string') {\n    // a number and b string\n    return -1; // a < b\n  } // a and b are Date\n\n\n  if (isDate(a) && isDate(b)) {\n    return moment(b).isBefore(a) ? 1 : -1;\n  } // a and b are numbers\n\n\n  return Number.parseFloat(a) - Number.parseFloat(b);\n};\n\nconst makeSort = function () {\n  let isAscending = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n  if (isAscending) {\n    return sortFunc;\n  }\n\n  return function () {\n    return -1 * sortFunc(...arguments);\n  };\n};\n\nmodule.exportDefault(makeSort);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"textMasks.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/textMasks.js                                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  swissFrancMask: () => swissFrancMask,\n  swissFrancMaskDecimal: () => swissFrancMaskDecimal,\n  percentMask: () => percentMask,\n  decimalMask: () => decimalMask\n});\nlet createNumberMask;\nmodule.link(\"text-mask-addons/dist/createNumberMask\", {\n  default(v) {\n    createNumberMask = v;\n  }\n\n}, 0);\nconst swissFrancMask = createNumberMask({\n  prefix: '',\n  suffix: '',\n  includeThousandsSeparator: true,\n  thousandsSeparatorSymbol: ' '\n});\nconst swissFrancMaskDecimal = createNumberMask({\n  prefix: '',\n  suffix: '',\n  includeThousandsSeparator: true,\n  thousandsSeparatorSymbol: ' ',\n  allowDecimal: true,\n  requireDecimal: true\n});\nconst percentMask = createNumberMask({\n  prefix: '',\n  suffix: '%',\n  allowDecimal: true,\n  decimalSymbol: '.',\n  allowLeadingZeroes: true,\n  allowNegative: true\n});\nconst decimalMask = createNumberMask({\n  prefix: '',\n  allowDecimal: true,\n  decimalLimit: 3,\n  decimalSymbol: '.',\n  requireDecimal: false,\n  allowLeadingZeroes: true\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"userFunctions.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/userFunctions.js                                                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  isUser: () => isUser,\n  getUserDisplayName: () => getUserDisplayName\n});\nlet intersection;\nmodule.link(\"lodash/intersection\", {\n  default(v) {\n    intersection = v;\n  }\n\n}, 0);\nlet flatten;\nmodule.link(\"lodash/flatten\", {\n  default(v) {\n    flatten = v;\n  }\n\n}, 1);\nlet ROLES;\nmodule.link(\"../api/users/userConstants\", {\n  ROLES(v) {\n    ROLES = v;\n  }\n\n}, 2);\n\nconst isUser = user => {\n  if (!user) {\n    return false;\n  }\n\n  const {\n    ADMIN,\n    DEV\n  } = ROLES;\n  const {\n    roles\n  } = user; // make sure `userRoles` is always an array - in case `roles` is a string\n\n  const userRoles = flatten([roles]);\n  const userHasRoles = userRoles && userRoles.length > 0;\n  return userHasRoles && intersection(userRoles, [ADMIN, DEV]).length === 0;\n};\n\nconst getUserDisplayName = (_ref) => {\n  let {\n    firstName,\n    lastName,\n    emails\n  } = _ref;\n  return [firstName, lastName].filter(name => name).join(' ') || emails && emails[0] && emails[0].address || '';\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"zipcodes.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/zipcodes.js                                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  zipcodes: () => zipcodes,\n  getZipcodeForCanton: () => getZipcodeForCanton\n});\nlet CANTONS;\nmodule.link(\"../api/constants\", {\n  CANTONS(v) {\n    CANTONS = v;\n  }\n\n}, 0);\nconst zipcodes = {\n  1000: 22,\n  1200: 7,\n  // Edited to allow 1200 to be used as a zipcode in geneva\n  1260: 22,\n  1281: 7,\n  1291: 22,\n  1292: 7,\n  1295: 22,\n  1298: 7,\n  1299: 22,\n  1468: 6,\n  1509: 22,\n  1527: 6,\n  1530: 22,\n  1532: 6,\n  1534: 22,\n  1541: 6,\n  1543: 22,\n  1544: 6,\n  1545: 22,\n  1553: 6,\n  1554: 22,\n  1563: 6,\n  1580: 22,\n  1583: 6,\n  1584: 22,\n  1609: 6,\n  1610: 22,\n  1611: 6,\n  1612: 22,\n  1614: 6,\n  1657: 5,\n  1658: 22,\n  1661: 6,\n  1682: 22,\n  1684: 6,\n  1738: 5,\n  1740: 6,\n  1797: 5,\n  1800: 22,\n  1868: 23,\n  1880: 22,\n  1890: 23,\n  1892: 22,\n  1893: 23,\n  2000: 12,\n  2333: 5,\n  2336: 10,\n  2400: 12,\n  2502: 5,\n  2523: 12,\n  2532: 5,\n  2540: 18,\n  2542: 5,\n  2544: 18,\n  2552: 5,\n  2714: 10,\n  2715: 5,\n  2718: 10,\n  2720: 5,\n  2800: 10,\n  2814: 3,\n  2822: 10,\n  2827: 5,\n  2828: 10,\n  3004: 5,\n  3175: 6,\n  3176: 5,\n  3178: 6,\n  3179: 5,\n  3182: 6,\n  3183: 5,\n  3184: 6,\n  3202: 5,\n  3206: 6,\n  3207: 5,\n  3210: 6,\n  3225: 5,\n  3253: 18,\n  3255: 5,\n  3280: 6,\n  3282: 5,\n  3284: 6,\n  3292: 5,\n  3307: 18,\n  3308: 5,\n  3801: 23,\n  3803: 5,\n  3900: 23,\n  4001: 4,\n  4101: 3,\n  4108: 18,\n  4117: 3,\n  4118: 18,\n  4123: 3,\n  4125: 4,\n  4127: 3,\n  4143: 18,\n  4144: 3,\n  4145: 18,\n  4147: 3,\n  4204: 18,\n  4207: 3,\n  4208: 18,\n  4222: 3,\n  4226: 18,\n  4242: 3,\n  4245: 18,\n  4246: 3,\n  4247: 18,\n  4253: 3,\n  4303: 0,\n  4304: 3,\n  4305: 0,\n  4402: 3,\n  4412: 18,\n  4414: 3,\n  4421: 18,\n  4422: 3,\n  4468: 18,\n  4469: 3,\n  4500: 18,\n  4536: 5,\n  4542: 18,\n  4564: 5,\n  4565: 18,\n  4663: 0,\n  4702: 18,\n  4704: 5,\n  4710: 18,\n  4800: 0,\n  4806: 11,\n  4812: 0,\n  4900: 5,\n  4915: 11,\n  4916: 5,\n  5000: 0,\n  5012: 18,\n  5017: 0,\n  5735: 11,\n  5736: 0,\n  5746: 18,\n  6003: 11,\n  6042: 0,\n  6043: 11,\n  6052: 13,\n  6053: 14,\n  6083: 5,\n  6102: 11,\n  6197: 5,\n  6203: 11,\n  6300: 24,\n  6344: 11,\n  6345: 24,\n  6353: 11,\n  6362: 13,\n  6377: 21,\n  6382: 13,\n  6388: 14,\n  6402: 17,\n  6404: 11,\n  6405: 17,\n  6441: 21,\n  6442: 17,\n  6452: 21,\n  6500: 20,\n  6534: 9,\n  6571: 20,\n  7000: 9,\n  7310: 15,\n  7402: 9,\n  8001: 25,\n  8109: 0,\n  8112: 25,\n  8200: 16,\n  8212: 25,\n  8213: 16,\n  8245: 25,\n  8252: 19,\n  8260: 16,\n  8264: 19,\n  8302: 25,\n  8355: 19,\n  8400: 25,\n  8454: 16,\n  8457: 25,\n  8500: 19,\n  8523: 25,\n  8524: 19,\n  8542: 25,\n  8547: 19,\n  8548: 25,\n  8552: 19,\n  8600: 25,\n  8638: 15,\n  8700: 25,\n  8715: 15,\n  8750: 8,\n  8751: 21,\n  8752: 8,\n  8800: 25,\n  8806: 17,\n  8810: 25,\n  8832: 17,\n  8833: 25,\n  8834: 17,\n  8865: 8,\n  8872: 15,\n  8874: 8,\n  8877: 15,\n  8902: 25,\n  8905: 0,\n  8906: 25,\n  8916: 0,\n  8925: 25,\n  8956: 0,\n  9000: 15,\n  9035: 1,\n  9036: 15,\n  9037: 1,\n  9050: 2,\n  9052: 1,\n  9054: 2,\n  9055: 1,\n  9057: 2,\n  9062: 1,\n  9108: 2,\n  9112: 1,\n  9113: 15,\n  9213: 19,\n  9230: 15,\n  9306: 19,\n  9308: 15,\n  9314: 19,\n  9323: 15,\n  9325: 19,\n  9327: 15,\n  9405: 1,\n  9413: 2,\n  9414: 1,\n  9422: 15,\n  9426: 1,\n  9430: 15,\n  9442: 2,\n  9443: 15,\n  9485: 26,\n  9500: 15,\n  9502: 19,\n  9512: 15,\n  9514: 19,\n  9523: 15,\n  9532: 19,\n  9533: 15,\n  9535: 19,\n  9536: 15,\n  9542: 19,\n  9552: 15,\n  9553: 19,\n  9601: 15,\n  9999: 5\n};\nmodule.exportDefault(zipcode => {\n  let result;\n\n  if (zipcode > 9999 || zipcode < 1000) {\n    return null;\n  }\n\n  Object.keys(zipcodes).some(code => {\n    if (zipcode >= code) {\n      result = code;\n      return false;\n    }\n\n    return true;\n  });\n  const cantonIndex = zipcodes[result];\n  const canton = Object.keys(CANTONS)[cantonIndex];\n  return canton;\n});\n\nconst getZipcodeForCanton = canton => {\n  const cantonIndex = Object.keys(CANTONS).findIndex(c => c === canton);\n  return Object.keys(zipcodes).find(zipcode => {\n    const cantonIndexForZipcode = zipcodes[zipcode];\n    return cantonIndexForZipcode === cantonIndex;\n  });\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"arrays\":{\"test\":{\"BorrowerFormArray.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/arrays/test/BorrowerFormArray.spec.js                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet getBorrowerInfoArray, getBorrowerFinanceArray;\nmodule.link(\"../BorrowerFormArray\", {\n  getBorrowerInfoArray(v) {\n    getBorrowerInfoArray = v;\n  },\n\n  getBorrowerFinanceArray(v) {\n    getBorrowerFinanceArray = v;\n  }\n\n}, 1);\ndescribe('BorrowerFormArrays', () => {\n  describe('getBorrowerInfoArray', () => {\n    const borrowers = [{\n      _id: 'id1'\n    }, {\n      _id: 'id2'\n    }, {\n      _id: 'id3'\n    }];\n    it('throws an error if a wrong ID is passed', () => {\n      expect(() => getBorrowerInfoArray({\n        borrowers,\n        borrowerId: 'id4'\n      })).to.throw();\n    });\n    it('returns an array of objects, each having an id', () => {\n      const array = getBorrowerInfoArray({\n        borrowers,\n        borrowerId: 'id1'\n      });\n      expect(typeof array).to.equal('object');\n      expect(array).to.have.length.above(0);\n      array.forEach(field => {\n        expect(typeof field).to.equal('object');\n\n        if (field.type !== 'conditionalInput' && field.type !== 'h3') {\n          expect(!!field.id).to.equal(true);\n        }\n      });\n    });\n  });\n  describe('getBorrowerFinanceArray', () => {\n    const borrowers = [{\n      _id: 'id1'\n    }, {\n      _id: 'id2'\n    }, {\n      _id: 'id3'\n    }];\n    it('throws an error if a wrong ID is passed', () => {\n      expect(() => getBorrowerFinanceArray({\n        borrowers,\n        borrowerId: 'id4'\n      })).to.throw();\n    });\n    it('returns an array of objects, each having an id', () => {\n      const array = getBorrowerFinanceArray({\n        borrowers,\n        borrowerId: 'id1'\n      });\n      expect(typeof array).to.equal('object');\n      expect(array).to.have.length.above(0);\n      array.forEach(field => {\n        expect(typeof field).to.equal('object');\n\n        if (field.type !== 'conditionalInput' && field.type !== 'h3') {\n          expect(!!field.id).to.equal(true);\n        }\n      });\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"PropertyFormArray.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/arrays/test/PropertyFormArray.spec.js                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet getPropertyArray, getPropertyLoanArray;\nmodule.link(\"../PropertyFormArray\", {\n  getPropertyArray(v) {\n    getPropertyArray = v;\n  },\n\n  getPropertyLoanArray(v) {\n    getPropertyLoanArray = v;\n  }\n\n}, 1);\ndescribe('getPropertyArray', () => {\n  it('throws if no loan is passed', () => {\n    expect(() => getPropertyArray({})).to.throw();\n  });\n  it('returns an array of objects, with an id in each', () => {\n    const arr = getPropertyArray({\n      property: {},\n      loan: {},\n      borrowers: [{}]\n    });\n    expect(arr).to.have.length.above(0);\n    arr.forEach(field => {\n      if (field.type !== 'conditionalInput' && field.type !== 'h3') {\n        expect(!!field.id).to.equal(true);\n      }\n    });\n  });\n});\ndescribe('getPropertyLoanArray', () => {\n  it('returns an array of objects, with an id in each', () => {\n    const arr = getPropertyLoanArray({\n      property: {},\n      loan: {},\n      borrowers: [{}]\n    });\n    expect(arr).to.have.length.above(0);\n    arr.forEach(field => {\n      if (field.type !== 'conditionalInput' && field.type !== 'h3') {\n        expect(!!field.id).to.equal(true);\n      }\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"partnerList.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/arrays/test/partnerList.spec.js                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet getPartnerList;\nmodule.link(\"../partnerList\", {\n  getPartnerList(v) {\n    getPartnerList = v;\n  }\n\n}, 1);\ndescribe('getPartnerList', () => {\n  it('returns an array of objects', () => {\n    const list = getPartnerList('GE', '');\n    expect(typeof list).to.equal('object');\n    expect(list).to.have.length.above(0);\n    list.forEach(partner => expect(typeof partner).to.equal('object'));\n  });\n  it('filters out partners to avoid', () => {\n    const base = getPartnerList('GE');\n    const filtered = getPartnerList('GE', ['banqueDuLeman']);\n    expect(base.length).to.equal(filtered.length + 1);\n    expect(!!filtered.find(partner => partner.key === 'banqueDuLeman')).to.be.false;\n  });\n  it(\"doesn't filter anything if the partner doesn't exist in the canton\", () => {\n    const base = getPartnerList('VD');\n    const filtered = getPartnerList('VD', ['banqueDuLeman']);\n    expect(base.length).to.equal(filtered.length);\n  });\n  it(\"doesn't filter anything if the partner doesn't exist in the list\", () => {\n    const base = getPartnerList('GE');\n    const filtered = getPartnerList('GE', ['fakePartner']);\n    expect(base.length).to.equal(filtered.length);\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"tooltips.spec.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/arrays/test/tooltips.spec.js                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 0);\nlet tooltips, tooltipsById, generalTooltips, offerTableTooltips, TOOLTIP_LISTS;\nmodule.link(\"../tooltips\", {\n  tooltips(v) {\n    tooltips = v;\n  },\n\n  tooltipsById(v) {\n    tooltipsById = v;\n  },\n\n  generalTooltips(v) {\n    generalTooltips = v;\n  },\n\n  offerTableTooltips(v) {\n    offerTableTooltips = v;\n  },\n\n  TOOLTIP_LISTS(v) {\n    TOOLTIP_LISTS = v;\n  }\n\n}, 1);\ndescribe('tooltips', () => {\n  describe('tooltip lists', () => {\n    [{\n      list: generalTooltips,\n      name: 'general'\n    }, {\n      list: offerTableTooltips,\n      name: 'offerTable'\n    }].forEach((_ref) => {\n      let {\n        list,\n        name\n      } = _ref;\n      describe(\"List: \".concat(name), () => {\n        it('is made of objects with at least an id', () => {\n          const tooltipTargets = Object.keys(list);\n          tooltipTargets.forEach(tooltipTarget => {\n            const value = list[tooltipTarget];\n            expect(value).to.be.an('object');\n            expect(value.id).to.be.a('string');\n          });\n        });\n      });\n    });\n  });\n  describe('tooltips func', () => {\n    it('should throw if it is given an invalid list id', () => {\n      expect(() => tooltips('wrong id')).to.throw();\n    });\n    it('should return an object if given a correct id', () => {\n      expect(typeof tooltips(TOOLTIP_LISTS.GENERAL)).to.equal('object');\n    });\n  });\n  describe('tooltipsById', () => {\n    it(\"throws if the id given isn't made of 2 strings with a dot\", () => {\n      expect(() => tooltipsById('')).to.throw('Wrong');\n      expect(() => tooltipsById(TOOLTIP_LISTS.GENERAL)).to.throw('Wrong');\n      expect(() => tooltipsById(1)).to.throw('string');\n      expect(() => tooltipsById(\"\".concat(TOOLTIP_LISTS.GENERAL, \".\"))).to.throw('Wrong');\n    });\n    it('returns undefined for a non-existent tooltip', () => {\n      expect(tooltipsById(\"\".concat(TOOLTIP_LISTS.GENERAL, \".noexist\"))).to.equal(undefined);\n    });\n  });\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"BorrowerFormArray.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/arrays/BorrowerFormArray.jsx                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  getBorrowerInfoArray: () => getBorrowerInfoArray,\n  getBorrowerFinanceArray: () => getBorrowerFinanceArray,\n  getSimpleBorrowerFinanceArray: () => getSimpleBorrowerFinanceArray,\n  getBorrowerSimpleArray: () => getBorrowerSimpleArray\n});\nlet constants;\nmodule.link(\"../api/constants\", {\n  \"*\"(v) {\n    constants = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet CantonField;\nmodule.link(\"../components/CantonField/CantonField\", {\n  default(v) {\n    CantonField = v;\n  }\n\n}, 2);\nlet BorrowerAddPartner;\nmodule.link(\"../components/BorrowerAddPartner\", {\n  default(v) {\n    BorrowerAddPartner = v;\n  }\n\n}, 3);\n\nconst shouldDisplayAddPartner = (_ref) => {\n  let {\n    b: {\n      civilStatus\n    },\n    multiple,\n    isFirst\n  } = _ref;\n  return civilStatus === constants.CIVIL_STATUS.MARRIED && !multiple && isFirst;\n};\n\nconst makeArrayOfObjectsInput = id => ({\n  id,\n  type: 'arrayInput',\n  required: false,\n  inputs: [{\n    id: 'description',\n    type: 'textInput'\n  }, {\n    id: 'value',\n    type: 'textInput',\n    money: true\n  }]\n});\n\nconst getBorrowerInfoArray = (_ref2) => {\n  let {\n    borrowers,\n    borrowerId,\n    loanId\n  } = _ref2;\n  const b = borrowers.find((_ref3) => {\n    let {\n      _id\n    } = _ref3;\n    return _id === borrowerId;\n  });\n  const multiple = borrowers.length > 1; // If this is the first borrower in the array of borrowers, don't ask for same address\n\n  const isFirst = borrowers[0]._id === borrowerId;\n\n  if (!b) {\n    throw new Error(\"couldn't find borrower\");\n  }\n\n  const disableAddress = !!b.sameAddress && !isFirst;\n  const addressFieldsAreNecessary = !b.sameAddress;\n  return [{\n    id: 'firstName',\n    type: 'textInput'\n  }, {\n    id: 'lastName',\n    type: 'textInput'\n  }, {\n    id: 'gender',\n    type: 'radioInput',\n    options: Object.values(constants.GENDER)\n  }, {\n    id: 'sameAddress',\n    type: 'radioInput',\n    intlValues: {\n      name: borrowers[0].firstName || 'Emprunteur 1'\n    },\n    options: [true, false],\n    condition: multiple && !isFirst\n  }, // {\n  //   id: 'isForeignAddress',\n  //   type: 'radioInput',\n  //   options: [true, false],\n  //   condition: !disableAddress,\n  //   required: addressFieldsAreNecessary,\n  // },\n  {\n    id: 'address1',\n    type: 'textInput',\n    condition: !disableAddress,\n    placeholder: disableAddress && borrowers[0].address1,\n    noIntl: disableAddress,\n    required: addressFieldsAreNecessary\n  }, {\n    id: 'address2',\n    type: 'textInput',\n    condition: !disableAddress,\n    required: false,\n    placeholder: disableAddress && borrowers[0].address2,\n    noIntl: disableAddress\n  }, {\n    id: 'city',\n    type: 'textInput',\n    condition: !disableAddress,\n    placeholder: disableAddress && borrowers[0].address1,\n    noIntl: disableAddress,\n    required: addressFieldsAreNecessary\n  }, {\n    id: 'zipCode',\n    type: 'textInput',\n    condition: !disableAddress,\n    placeholder: disableAddress && borrowers[0].address1,\n    noIntl: disableAddress,\n    required: addressFieldsAreNecessary\n  }, {\n    type: 'custom',\n    id: 'canton',\n    component: React.createElement(CantonField, {\n      canton: b.canton\n    }),\n    condition: !disableAddress,\n    required: addressFieldsAreNecessary\n  }, {\n    type: 'conditionalInput',\n    conditionalTrueValue: false,\n    inputs: [{\n      id: 'isSwiss',\n      type: 'radioInput',\n      options: [true, false]\n    }, {\n      id: 'residencyPermit',\n      type: 'selectFieldInput',\n      options: Object.values(constants.RESIDENCY_PERMIT)\n    }]\n  }, // {\n  //   id: 'age',\n  //   type: 'textInput',\n  //   number: true,\n  //   saveOnChange: false,\n  // },\n  {\n    id: 'birthDate',\n    type: 'dateInput'\n  }, {\n    id: 'citizenship',\n    type: 'textInput',\n    condition: !b.isSwiss\n  }, {\n    id: 'isUSPerson',\n    type: 'radioInput',\n    options: [true, false]\n  }, {\n    id: 'civilStatus',\n    type: 'radioInput',\n    options: Object.values(constants.CIVIL_STATUS).map(value => ({\n      id: value\n    }))\n  }, {\n    id: 'addPartner',\n    type: 'custom',\n    component: React.createElement(BorrowerAddPartner, {\n      loanId: loanId\n    }),\n    condition: shouldDisplayAddPartner({\n      b,\n      multiple,\n      isFirst\n    }),\n    required: false\n  }, {\n    id: 'childrenCount',\n    type: 'textInput',\n    number: true\n  }, {\n    id: 'company',\n    type: 'textInput',\n    required: false,\n    autoComplete: 'organisation'\n  }];\n};\n\nconst getBorrowerFinanceArray = (_ref4) => {\n  let {\n    borrowers,\n    borrowerId\n  } = _ref4;\n  const b = borrowers.find((_ref5) => {\n    let {\n      _id\n    } = _ref5;\n    return _id === borrowerId;\n  });\n\n  if (!b) {\n    throw new Error(\"couldn't find borrower\");\n  }\n\n  const incomeArray = [{\n    type: 'h3',\n    id: 'incomeAndExpenses',\n    ignore: true,\n    required: false,\n    className: 'v-align-incomeAndExpenses'\n  }, {\n    id: 'salary',\n    type: 'textInput',\n    money: true\n  }, {\n    id: 'netSalary',\n    type: 'textInput',\n    money: true\n  }, {\n    type: 'conditionalInput',\n    conditionalTrueValue: true,\n    inputs: [{\n      id: 'bonusExists',\n      type: 'radioInput',\n      options: [true, false]\n    }, ...[2019, 2018, 2017, 2016, 2015].map(year => ({\n      id: \"bonus\".concat(year),\n      type: 'textInput',\n      money: true,\n      condition: year === 2015 ? !!b.bonus2015 : true\n    }))]\n  }, {\n    id: 'otherIncome',\n    type: 'arrayInput',\n    required: false,\n    inputs: [{\n      id: 'description',\n      type: 'selectInput',\n      options: Object.values(constants.OTHER_INCOME)\n    }, {\n      id: 'value',\n      type: 'textInput',\n      money: true\n    }]\n  }, {\n    id: 'expenses',\n    type: 'arrayInput',\n    required: false,\n    inputs: [{\n      id: 'description',\n      type: 'selectInput',\n      options: Object.values(constants.EXPENSES)\n    }, {\n      id: 'value',\n      type: 'textInput',\n      money: true\n    }]\n  }, {\n    type: 'conditionalInput',\n    conditionalTrueValue: true,\n    inputs: [{\n      id: 'hasOwnCompany',\n      type: 'radioInput',\n      options: [true, false]\n    }, {\n      id: 'ownCompanies',\n      type: 'arrayInput',\n      inputs: [{\n        id: 'description',\n        type: 'textInput'\n      }, {\n        id: 'ownership',\n        type: 'textInput',\n        percent: true\n      }, {\n        id: 'netIncome2018',\n        type: 'textInput',\n        money: true\n      }, {\n        id: 'netIncome2017',\n        type: 'textInput',\n        money: true\n      }, {\n        id: 'netIncome2016',\n        type: 'textInput',\n        money: true\n      }]\n    }]\n  }];\n  const fortuneArray = [{\n    type: 'h3',\n    id: 'fortune',\n    ignore: true,\n    required: false,\n    className: 'v-align-fortune'\n  }, {\n    id: 'bankFortune',\n    type: 'textInput',\n    money: true\n  }, {\n    id: 'thirdPartyFortune',\n    type: 'textInput',\n    money: true,\n    required: false\n  }, {\n    id: 'realEstate',\n    type: 'arrayInput',\n    required: false,\n    inputs: [{\n      id: 'name',\n      type: 'textInput'\n    }, {\n      id: 'description',\n      type: 'selectInput',\n      options: Object.values(constants.RESIDENCE_TYPE)\n    }, {\n      id: 'value',\n      type: 'textInput',\n      money: true\n    }, {\n      id: 'loan',\n      type: 'textInput',\n      money: true\n    }, {\n      id: 'income',\n      type: 'textInput',\n      money: true,\n      required: false\n    }]\n  }, makeArrayOfObjectsInput('otherFortune')];\n  const insuranceArray = [{\n    type: 'h3',\n    id: 'insurance',\n    required: false,\n    ignore: true,\n    className: 'v-align-insurance'\n  }, makeArrayOfObjectsInput('insurance2'), makeArrayOfObjectsInput('bank3A'), makeArrayOfObjectsInput('insurance3A'), makeArrayOfObjectsInput('insurance3B')];\n  return incomeArray.concat([...fortuneArray, ...insuranceArray]);\n};\n\nconst getSimpleBorrowerFinanceArray = (_ref6) => {\n  let {\n    borrowers,\n    borrowerId\n  } = _ref6;\n  const b = borrowers.find((_ref7) => {\n    let {\n      _id\n    } = _ref7;\n    return _id === borrowerId;\n  });\n\n  if (!b) {\n    throw new Error(\"couldn't find borrower\");\n  }\n\n  const incomeArray = [{\n    type: 'h3',\n    id: 'financeInformations',\n    ignore: true,\n    required: false,\n    className: 'v-align-financeInformations'\n  }, {\n    id: 'salary',\n    type: 'textInput',\n    money: true\n  }, {\n    id: 'netSalary',\n    type: 'textInput',\n    money: true\n  }, {\n    type: 'conditionalInput',\n    conditionalTrueValue: true,\n    inputs: [{\n      id: 'bonusExists',\n      type: 'radioInput',\n      options: [true, false]\n    }, ...[2019, 2018, 2017, 2016, 2015].map(year => ({\n      id: \"bonus\".concat(year),\n      type: 'textInput',\n      money: true,\n      condition: year === 2015 ? !!b.bonus2015 : true\n    }))]\n  }];\n  const fortuneArray = [{\n    id: 'bankFortune',\n    type: 'textInput',\n    money: true\n  }];\n  const insuranceArray = [{\n    id: 'insurance2Simple',\n    type: 'textInput',\n    money: true,\n    required: false\n  }, {\n    id: 'bank3ASimple',\n    type: 'textInput',\n    money: true,\n    required: false\n  }, {\n    id: 'insurance3ASimple',\n    type: 'textInput',\n    money: true,\n    required: false\n  }, {\n    id: 'insurance3BSimple',\n    type: 'textInput',\n    money: true,\n    required: false\n  }];\n  return incomeArray.concat([...fortuneArray, ...insuranceArray]);\n};\n\nconst getBorrowerSimpleArray = (_ref8) => {\n  let {\n    borrowers,\n    borrowerId,\n    loan = {}\n  } = _ref8;\n  const b = borrowers.find(borrower => borrower._id === borrowerId);\n  const {\n    simpleBorrowersForm: simple = true\n  } = loan;\n\n  if (!b) {\n    throw new Error(\"couldn't find borrower\");\n  }\n\n  return [{\n    id: 'firstName',\n    type: 'textInput',\n    condition: !loan.anonymous\n  }, {\n    id: 'lastName',\n    type: 'textInput',\n    condition: !loan.anonymous\n  }, {\n    id: 'birthDate',\n    type: 'dateInput',\n    condition: !loan.anonymous\n  }, ...(simple ? getSimpleBorrowerFinanceArray({\n    borrowers,\n    borrowerId\n  }) : getBorrowerFinanceArray({\n    borrowers,\n    borrowerId\n  }))];\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"PropertyFormArray.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/arrays/PropertyFormArray.jsx                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  getPropertyLoanArray: () => getPropertyLoanArray,\n  getPropertyArray: () => getPropertyArray\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PROPERTY_TYPE, PURCHASE_TYPE, OWNER, RESIDENCE_TYPE, MINERGIE_CERTIFICATE, HOUSE_TYPE, FLAT_TYPE, VOLUME_NORM;\nmodule.link(\"../api/constants\", {\n  PROPERTY_TYPE(v) {\n    PROPERTY_TYPE = v;\n  },\n\n  PURCHASE_TYPE(v) {\n    PURCHASE_TYPE = v;\n  },\n\n  OWNER(v) {\n    OWNER = v;\n  },\n\n  RESIDENCE_TYPE(v) {\n    RESIDENCE_TYPE = v;\n  },\n\n  MINERGIE_CERTIFICATE(v) {\n    MINERGIE_CERTIFICATE = v;\n  },\n\n  HOUSE_TYPE(v) {\n    HOUSE_TYPE = v;\n  },\n\n  FLAT_TYPE(v) {\n    FLAT_TYPE = v;\n  },\n\n  VOLUME_NORM(v) {\n    VOLUME_NORM = v;\n  }\n\n}, 1);\nlet CantonField;\nmodule.link(\"../components/CantonField/CantonField\", {\n  default(v) {\n    CantonField = v;\n  }\n\n}, 2);\n\nconst mapInput = input => {\n  const intlSafeObject = (0, _objectSpread2.default)({}, input); // If the id contains a dot in it, split it and add a intlId\n  // This makes it easier to write intl messages\n\n  if (input.id && input.id.indexOf('.') > 0) {\n    // Perform some additional slicing to make sure ids with multiple dots\n    // work by removing only the first part\n    intlSafeObject.intlId = input.id.split('.').slice(1).join('.');\n  }\n\n  if (input.inputs) {\n    // If there are nested inputs, give them an intlId too\n    intlSafeObject.inputs = input.inputs.map(obj => obj.id && obj.id.indexOf('.') > 0 ? (0, _objectSpread2.default)({}, obj, {\n      intlId: obj.id.split('.')[1]\n    }) : obj);\n  }\n\n  return intlSafeObject;\n};\n\nconst getOwnerOptions = (_ref) => {\n  let {\n    borrowers\n  } = _ref;\n  return Object.values(OWNER).filter(value => borrowers.length === 1 ? value !== OWNER.SECOND : true).map(value => {\n    const isFirst = value === OWNER.FIRST;\n    const isSecond = value === OWNER.SECOND;\n    let borrowerFirstName;\n\n    if (borrowers.length <= 1) {\n      borrowerFirstName = null;\n    } else {\n      borrowerFirstName = borrowers[isFirst ? 0 : 1].firstName;\n    }\n\n    return isFirst || isSecond ? {\n      id: isFirst ? 0 : 1,\n      intlValues: {\n        name: borrowerFirstName || \"Emprunteur \".concat(isFirst ? 1 : 2)\n      }\n    } : value;\n  });\n};\n\nconst getPropertyLoanArray = (_ref2) => {\n  let {\n    loan,\n    borrowers\n  } = _ref2;\n  const r = loan;\n\n  if (!r) {\n    throw new Error('requires a loan');\n  }\n\n  const array = [{\n    type: 'h3',\n    id: 'propertyInfo',\n    ignore: true,\n    required: false\n  }, {\n    id: 'residenceType',\n    type: 'radioInput',\n    options: Object.values(RESIDENCE_TYPE)\n  }, {\n    type: 'conditionalInput',\n    conditionalTrueValue: OWNER.OTHER,\n    condition: borrowers.length > 1 && r.purchaseType === PURCHASE_TYPE.REFINANCING,\n    inputs: [{\n      id: 'currentOwner',\n      type: 'radioInput',\n      options: getOwnerOptions({\n        borrowers\n      })\n    }, {\n      id: 'otherOwner',\n      type: 'textInput'\n    }]\n  }, {\n    type: 'conditionalInput',\n    conditionalTrueValue: OWNER.OTHER,\n    condition: borrowers.length > 1 && r.purchaseType !== PURCHASE_TYPE.REFINANCING,\n    inputs: [{\n      id: 'futureOwner',\n      type: 'radioInput',\n      options: getOwnerOptions({\n        borrowers\n      })\n    }, {\n      id: 'otherOwner',\n      type: 'textInput'\n    }]\n  }];\n  return array.map(mapInput);\n};\n\nconst shouldDisplayFloorNumber = (_ref3) => {\n  let {\n    propertyType,\n    flatType\n  } = _ref3;\n  return propertyType === PROPERTY_TYPE.FLAT && flatType !== FLAT_TYPE.PENTHOUSE_APARTMENT && flatType !== FLAT_TYPE.PENTHOUSE_MAISONETTE && flatType !== FLAT_TYPE.TERRACE_APARTMENT;\n};\n\nconst shouldDisplayTerraceArea = (_ref4) => {\n  let {\n    propertyType,\n    flatType\n  } = _ref4;\n  return propertyType === PROPERTY_TYPE.FLAT;\n};\n\nconst getPropertyArray = (_ref5) => {\n  let {\n    loan,\n    borrowers,\n    property\n  } = _ref5;\n  const r = loan;\n\n  if (!r) {\n    throw new Error('requires a loan');\n  }\n\n  const array = [{\n    id: 'value',\n    type: 'textInput',\n    money: true\n  }, {\n    id: 'investmentRent',\n    type: 'textInput',\n    money: true,\n    condition: r.residenceType === RESIDENCE_TYPE.INVESTMENT\n  }, {\n    id: 'propertyType',\n    type: 'radioInput',\n    options: Object.values(PROPERTY_TYPE)\n  }, {\n    id: 'isNew',\n    type: 'radioInput',\n    options: [true, false],\n    condition: r.purchaseType === PURCHASE_TYPE.ACQUISITION\n  }, {\n    id: 'isCoproperty',\n    type: 'radioInput',\n    options: [true, false]\n  }, {\n    id: 'copropertyPercentage',\n    type: 'textInput',\n    condition: property.isCoproperty,\n    info: true\n  }, {\n    type: 'h3',\n    id: 'propertyAddress',\n    ignore: true,\n    required: false\n  }, {\n    id: 'address1',\n    type: 'textInput'\n  }, {\n    id: 'address2',\n    type: 'textInput',\n    required: false\n  }, {\n    id: 'zipCode',\n    type: 'textInput'\n  }, {\n    id: 'city',\n    type: 'textInput'\n  }, {\n    type: 'custom',\n    id: 'canton',\n    component: React.createElement(CantonField, {\n      canton: property.canton\n    })\n  }, {\n    type: 'h3',\n    id: 'propertyDetails',\n    ignore: true,\n    required: false\n  }, {\n    id: 'houseType',\n    type: 'radioInput',\n    options: Object.values(HOUSE_TYPE),\n    condition: property.propertyType === PROPERTY_TYPE.HOUSE\n  }, {\n    id: 'flatType',\n    type: 'radioInput',\n    options: Object.values(FLAT_TYPE),\n    condition: property.propertyType === PROPERTY_TYPE.FLAT\n  }, {\n    id: 'numberOfFloors',\n    type: 'textInput',\n    number: true\n  }, {\n    id: 'floorNumber',\n    type: 'textInput',\n    number: true,\n    condition: shouldDisplayFloorNumber(property)\n  }, {\n    id: 'constructionYear',\n    type: 'textInput',\n    number: true\n  }, {\n    id: 'renovationYear',\n    type: 'textInput',\n    number: true,\n    required: false,\n    info: true\n  }, {\n    id: 'landArea',\n    type: 'textInput',\n    number: true,\n    condition: property.propertyType === PROPERTY_TYPE.HOUSE\n  }, {\n    id: 'insideArea',\n    type: 'textInput',\n    number: true,\n    condition: property.propertyType === PROPERTY_TYPE.FLAT\n  }, {\n    id: 'terraceArea',\n    type: 'textInput',\n    number: true,\n    required: true,\n    condition: shouldDisplayTerraceArea(property)\n  }, {\n    id: 'volume',\n    type: 'textInput',\n    number: true,\n    condition: property.propertyType === PROPERTY_TYPE.HOUSE\n  }, {\n    id: 'volumeNorm',\n    type: 'radioInput',\n    options: Object.values(VOLUME_NORM),\n    condition: property.propertyType === PROPERTY_TYPE.HOUSE\n  }, {\n    id: 'roomCount',\n    type: 'textInput',\n    decimal: true,\n    info: true\n  }, {\n    id: 'parkingInside',\n    type: 'textInput',\n    number: true,\n    required: false\n  }, {\n    id: 'parkingOutside',\n    type: 'textInput',\n    number: true,\n    required: false\n  }, {\n    id: 'minergie',\n    type: 'radioInput',\n    options: Object.values(MINERGIE_CERTIFICATE)\n  }, {\n    id: 'yearlyExpenses',\n    type: 'textInput',\n    money: true,\n    required: false,\n    info: true\n  }];\n  return array.map(mapInput);\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"RefinancingFormArray.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/arrays/RefinancingFormArray.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet INTEREST_RATES, MORTGAGE_NOTE_TYPES, MORTGAGE_NOTE_CATEGORIES;\nmodule.link(\"../api/constants\", {\n  INTEREST_RATES(v) {\n    INTEREST_RATES = v;\n  },\n\n  MORTGAGE_NOTE_TYPES(v) {\n    MORTGAGE_NOTE_TYPES = v;\n  },\n\n  MORTGAGE_NOTE_CATEGORIES(v) {\n    MORTGAGE_NOTE_CATEGORIES = v;\n  }\n\n}, 0);\n\nconst getRefinancingFormArray = (_ref) => {\n  let {\n    loan\n  } = _ref;\n  return [{\n    id: 'previousLender',\n    type: 'textInput'\n  }, {\n    id: 'previousLoanTranches',\n    type: 'arrayInput',\n    inputs: [{\n      id: 'type',\n      type: 'selectInput',\n      options: Object.values(INTEREST_RATES),\n      intlId: 'loanTranches'\n    }, {\n      id: 'value',\n      type: 'textInput',\n      money: true\n    }, {\n      id: 'dueDate',\n      type: 'dateInput'\n    }, {\n      id: 'rate',\n      type: 'textInput',\n      percent: true\n    }]\n  }, {\n    id: 'mortgageNotes',\n    type: 'arrayInput',\n    inputs: [{\n      id: 'value',\n      type: 'textInput',\n      money: true\n    }, {\n      id: 'rank',\n      type: 'textInput',\n      number: true\n    }, {\n      id: 'type',\n      type: 'selectInput',\n      options: Object.values(MORTGAGE_NOTE_TYPES)\n    }, {\n      id: 'category',\n      type: 'selectInput',\n      options: Object.values(MORTGAGE_NOTE_CATEGORIES)\n    }]\n  }];\n};\n\nmodule.exportDefault(getRefinancingFormArray);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"collectionIcons.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/arrays/collectionIcons.jsx                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet FontAwesomeIcon;\nmodule.link(\"@fortawesome/react-fontawesome\", {\n  FontAwesomeIcon(v) {\n    FontAwesomeIcon = v;\n  }\n\n}, 1);\nlet faCity;\nmodule.link(\"@fortawesome/pro-light-svg-icons/faCity\", {\n  faCity(v) {\n    faCity = v;\n  }\n\n}, 2);\nlet faBriefcase;\nmodule.link(\"@fortawesome/pro-light-svg-icons/faBriefcase\", {\n  faBriefcase(v) {\n    faBriefcase = v;\n  }\n\n}, 3);\nlet faChartLine;\nmodule.link(\"@fortawesome/pro-light-svg-icons/faChartLine\", {\n  faChartLine(v) {\n    faChartLine = v;\n  }\n\n}, 4);\nlet faUserTie;\nmodule.link(\"@fortawesome/pro-light-svg-icons/faUserTie\", {\n  faUserTie(v) {\n    faUserTie = v;\n  }\n\n}, 5);\nlet faMoneyBillWave;\nmodule.link(\"@fortawesome/pro-light-svg-icons/faMoneyBillWave\", {\n  faMoneyBillWave(v) {\n    faMoneyBillWave = v;\n  }\n\n}, 6);\nlet BORROWERS_COLLECTION, LOANS_COLLECTION, TASKS_COLLECTION, USERS_COLLECTION, PROPERTIES_COLLECTION, OFFERS_COLLECTION, PROMOTIONS_COLLECTION, ORGANISATIONS_COLLECTION, CONTACTS_COLLECTION, INTEREST_RATES_COLLECTION, REVENUES_COLLECTION;\nmodule.link(\"../api/constants\", {\n  BORROWERS_COLLECTION(v) {\n    BORROWERS_COLLECTION = v;\n  },\n\n  LOANS_COLLECTION(v) {\n    LOANS_COLLECTION = v;\n  },\n\n  TASKS_COLLECTION(v) {\n    TASKS_COLLECTION = v;\n  },\n\n  USERS_COLLECTION(v) {\n    USERS_COLLECTION = v;\n  },\n\n  PROPERTIES_COLLECTION(v) {\n    PROPERTIES_COLLECTION = v;\n  },\n\n  OFFERS_COLLECTION(v) {\n    OFFERS_COLLECTION = v;\n  },\n\n  PROMOTIONS_COLLECTION(v) {\n    PROMOTIONS_COLLECTION = v;\n  },\n\n  ORGANISATIONS_COLLECTION(v) {\n    ORGANISATIONS_COLLECTION = v;\n  },\n\n  CONTACTS_COLLECTION(v) {\n    CONTACTS_COLLECTION = v;\n  },\n\n  INTEREST_RATES_COLLECTION(v) {\n    INTEREST_RATES_COLLECTION = v;\n  },\n\n  REVENUES_COLLECTION(v) {\n    REVENUES_COLLECTION = v;\n  }\n\n}, 7);\nmodule.exportDefault({\n  [BORROWERS_COLLECTION]: 'people',\n  [LOANS_COLLECTION]: 'dollarSign',\n  [TASKS_COLLECTION]: 'check',\n  [USERS_COLLECTION]: 'contactMail',\n  [PROPERTIES_COLLECTION]: 'building',\n  [PROMOTIONS_COLLECTION]: React.createElement(FontAwesomeIcon, {\n    icon: faCity,\n    className: \"collection-icon\"\n  }),\n  [ORGANISATIONS_COLLECTION]: React.createElement(FontAwesomeIcon, {\n    icon: faBriefcase,\n    className: \"collection-icon\"\n  }),\n  [CONTACTS_COLLECTION]: React.createElement(FontAwesomeIcon, {\n    icon: faUserTie,\n    className: \"collection-icon\"\n  }),\n  [OFFERS_COLLECTION]: 'monetizationOn',\n  [INTEREST_RATES_COLLECTION]: React.createElement(FontAwesomeIcon, {\n    icon: faChartLine,\n    className: \"collection-icon\"\n  }),\n  [REVENUES_COLLECTION]: React.createElement(FontAwesomeIcon, {\n    icon: faMoneyBillWave,\n    className: \"collection-icon\"\n  })\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"epotekEmployees.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/arrays/epotekEmployees.js                                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nmodule.export({\n  EPOTEK_NUMBER: () => EPOTEK_NUMBER,\n  employeesByEmail: () => employeesByEmail,\n  employeesById: () => employeesById\n});\nconst EPOTEK_NUMBER = '+41 22 566 01 10';\nconst employees = [{\n  email: 'lydia@e-potek.ch',\n  src: '/img/team/lydia.jpg',\n  name: 'Lydia Abraha',\n  title: 'Conseillère en financement',\n  appTitle: 'Financement',\n  phoneNumber: '+41 22 566 82 92',\n  _id: 'LGGMr68iXXtW6bQEx',\n  gender: 'F'\n}, {\n  email: 'florian@e-potek.ch',\n  src: '/img/team/florian.jpg',\n  name: 'Florian Bienefelt',\n  title: 'CTO',\n  phoneNumber: '+41 22 566 82 91',\n  _id: 'CHPzFxTDDekwi4JJP',\n  gender: 'M'\n}, {\n  email: 'quentin@e-potek.ch',\n  src: '/img/team/quentin.jpg',\n  name: 'Quentin Herzig',\n  title: 'Software Engineer',\n  phoneNumber: EPOTEK_NUMBER,\n  _id: 'NJskZ6E38JHfqSyNg',\n  gender: 'M'\n}, {\n  email: 'yannis@e-potek.ch',\n  src: '/img/team/yannis.jpg',\n  name: 'Yannis Eggert',\n  title: 'Directeur',\n  appTitle: 'Financement',\n  phoneNumber: '+41 22 566 82 90',\n  _id: 'dcXkoTWLZPemu9x9a',\n  gender: 'M'\n}, {\n  email: 'jeanluc@e-potek.ch',\n  src: '/img/team/jeanluc.jpg',\n  name: 'Jean-Luc Kringel',\n  title: 'Responsable Assurances',\n  appTitle: 'Planification et prévoyance',\n  phoneNumber: '+41 22 566 82 94',\n  _id: 'efe2jpwvRh8J4z4p8',\n  gender: 'M'\n}, {\n  email: '',\n  src: '/img/team/tarik.jpg',\n  name: 'Tarik Lamkarfed',\n  title: 'Marketing & Communications',\n  gender: 'M'\n}, {\n  email: 'max@e-potek.ch',\n  src: '/img/team/max.jpg',\n  name: 'Max Martinez',\n  title: 'Conseiller en financement',\n  appTitle: 'Financement',\n  phoneNumber: '+41 22 566 82 95',\n  _id: 'NumFEubdw2nra6Su8',\n  gender: 'M'\n}];\nconst employeesByEmail = employees.reduce((acc, employee) => employee.email ? (0, _objectSpread2.default)({}, acc, {\n  [employee.email]: employee\n}) : acc, {});\nconst employeesById = employees.reduce((acc, employee) => employee._id ? (0, _objectSpread2.default)({}, acc, {\n  [employee._id]: employee\n}) : acc, {});\nmodule.exportDefault(employees);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"partnerList.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/arrays/partnerList.js                                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  partnerList: () => partnerList,\n  getPartnerList: () => getPartnerList,\n  getAllPartners: () => getAllPartners\n});\nconst partnerList = [{\n  key: 'banqueDuLeman',\n  name: 'Banque du Léman',\n  logo: 'banqueDuLeman_logo.png',\n  cantons: ['GE']\n}, {\n  key: 'creditAgricole',\n  name: 'Crédit Agricole Financements Suisse',\n  logo: 'creditAgricole_logo.png',\n  cantons: ['GE']\n}, {\n  key: 'KFH',\n  name: 'Kreditanstalt für Hypotheken',\n  logo: 'KFH_logo.png',\n  cantons: ['GE']\n}, {\n  key: 'allianz',\n  name: 'Allianz Suisse',\n  logo: 'allianz_logo.png',\n  cantons: ['GE', 'VD']\n}, {\n  key: 'postFinance',\n  name: 'PostFinance',\n  logo: 'postFinance_logo.png',\n  cantons: ['GE', 'VD']\n}, {\n  key: 'banqueMigros',\n  name: 'Banque Migros',\n  logo: 'banqueMigros_logo.png',\n  cantons: ['GE', 'VD']\n}, {\n  key: 'vaudoiseAssurances',\n  name: 'Vaudoise Assurances',\n  logo: 'vaudoiseAssurances_logo.png',\n  cantons: ['GE', 'VD']\n}, {\n  key: 'banqueWir',\n  name: 'Banque Wir',\n  logo: 'banqueWir_logo.png',\n  cantons: ['GE']\n}, {\n  key: 'raiffeisen',\n  name: 'Raiffeisen',\n  logo: 'raiffeisen_logo.png',\n  cantons: ['GE', 'VD']\n}, {\n  key: 'valiant',\n  name: 'Valiant',\n  logo: 'valiant_logo.png',\n  cantons: ['GE']\n}, {\n  key: 'swisslife',\n  name: 'Swisslife',\n  logo: 'swisslife_logo.png',\n  cantons: ['GE', 'VD']\n}, {\n  key: 'banqueCoop',\n  name: 'Banque Coop',\n  logo: 'banqueCoop_logo.png',\n  cantons: ['GE', 'VD']\n}, {\n  key: 'baloiseAssurances',\n  name: 'Bâloise Assurances',\n  logo: 'baloiseAssurances_logo.png',\n  cantons: ['GE', 'VD']\n}, {\n  key: 'helvetia',\n  name: 'Helvetia Assurance',\n  logo: 'helvetia_logo.png',\n  cantons: ['GE']\n}, {\n  key: 'zurichSuisse',\n  name: 'Zurich Suisse',\n  logo: 'zurichSuisse_logo.png',\n  cantons: ['GE']\n}];\n\nconst getPartnerList = (canton, partnersToAvoid) => {\n  const filteredList = partnerList.filter(partner => partner.cantons.includes(canton));\n\n  if (partnersToAvoid && partnersToAvoid.length > 0) {\n    partnersToAvoid.forEach((partnerToAvoid, index) => {\n      if (filteredList[index].key === partnerToAvoid) {\n        filteredList.splice(index, 1);\n      }\n    });\n  }\n\n  return filteredList;\n};\n\nconst getAllPartners = () => partnerList;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"tooltips.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/arrays/tooltips.js                                                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  TOOLTIP_LISTS: () => TOOLTIP_LISTS,\n  generalTooltips: () => generalTooltips,\n  widget1Tooltips: () => widget1Tooltips,\n  offerTableTooltips: () => offerTableTooltips,\n  devTooltips: () => devTooltips,\n  tooltips: () => tooltips,\n  tooltipsById: () => tooltipsById\n});\nconst TOOLTIP_LISTS = {\n  GENERAL: 'GENERAL',\n  OFFER_TABLE: 'OFFER_TABLE',\n  DEV: 'DEV',\n  WIDGET1: 'WIDGET1'\n};\nconst generalTooltips = {\n  finma: {\n    id: 'finma',\n    double: true\n  },\n  \"taux d'effort\": {\n    id: 'incomeRatio',\n    double: true\n  },\n  \"taux d'avance\": {\n    id: 'borrowRatio',\n    double: true\n  }\n};\nconst widget1Tooltips = {\n  'plan financier': {\n    id: 'financialPlan',\n    double: true\n  },\n  'structure de financement': {\n    id: 'financialPlan',\n    double: true\n  },\n  'charges / revenus': {\n    id: 'incomeRatio',\n    double: true\n  },\n  \"taux d'effort\": {\n    id: 'incomeRatio',\n    double: true\n  },\n  'revenus annuels bruts': {\n    id: 'income',\n    double: true\n  },\n  'salaire brut': {\n    id: 'income',\n    double: true\n  },\n  revenus: {\n    id: 'income',\n    double: true\n  },\n  bonus: {\n    id: 'bonus',\n    double: true\n  },\n  gratification: {\n    id: 'bonus',\n    double: true\n  },\n  emprunteurs: {\n    id: 'borrower'\n  },\n  emprunteur: {\n    id: 'borrower'\n  },\n  finma: {\n    id: 'finma',\n    double: true\n  },\n  'prêteurs intéressés': {\n    id: 'interestedLenders'\n  },\n  \"prêt / prix d'achat\": {\n    id: 'borrowRatio',\n    double: true\n  },\n  \"taux d'avance\": {\n    id: 'borrowRatio',\n    double: true\n  }\n};\nconst offerTableTooltips = {\n  montant: {\n    id: 'offerTable.amount'\n  },\n  libor: {\n    id: 'offerTable.libor'\n  },\n  '2 ans': {\n    id: 'offerTable.2'\n  },\n  '5 ans': {\n    id: 'offerTable.5'\n  },\n  '10 ans': {\n    id: 'offerTable.10'\n  },\n  amortissement: {\n    id: 'offerTable.amortization'\n  },\n  expertise: {\n    id: 'offerTable.expertise'\n  },\n  conditions: {\n    id: 'offerTable.conditions'\n  }\n};\nconst devTooltips = {\n  match1: {\n    id: 'id1'\n  },\n  match2: {\n    id: 'id2'\n  }\n};\n\nconst tooltips = list => {\n  switch (list) {\n    case TOOLTIP_LISTS.GENERAL:\n      return generalTooltips;\n\n    case TOOLTIP_LISTS.OFFER_TABLE:\n      return offerTableTooltips;\n\n    case TOOLTIP_LISTS.DEV:\n      return devTooltips;\n\n    case TOOLTIP_LISTS.WIDGET1:\n      return widget1Tooltips;\n\n    default:\n      throw new Error(\"Unknown tooltip list: \\\"\".concat(list, \"\\\"\"));\n  }\n};\n\nconst tooltipsById = id => {\n  if (typeof id !== 'string') {\n    throw new Error('not a string');\n  }\n\n  const [listId, ...ids] = id.split('.');\n\n  if (ids.length < 1 || ids[0] === '') {\n    throw Error('Wrong id given for tooltips, requires 2 strings separated by a .');\n  }\n\n  const list = tooltips(listId);\n  return list[ids.join('.')];\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"containers\":{\"test\":{\"withMatchParam.test.jsx\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/containers/test/withMatchParam.test.jsx                                                                //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet expect;\nmodule.link(\"chai\", {\n  expect(v) {\n    expect = v;\n  }\n\n}, 2);\nlet mount;\nmodule.link(\"../../utils/testHelpers/enzyme\", {\n  mount(v) {\n    mount = v;\n  }\n\n}, 3);\nlet MemoryRouter, Route;\nmodule.link(\"react-router-dom\", {\n  MemoryRouter(v) {\n    MemoryRouter = v;\n  },\n\n  Route(v) {\n    Route = v;\n  }\n\n}, 4);\nlet withMatchParam;\nmodule.link(\"../withMatchParam\", {\n  default(v) {\n    withMatchParam = v;\n  }\n\n}, 5);\nlet Component1 = withMatchParam('loanId')(props => React.createElement(\"div\", props));\nconst Component2 = withMatchParam('loanId', '/loans/:loanId')(props => React.createElement(\"span\", props));\nlet url = '/loans/test/hello';\n\nif (Meteor.isClient) {\n  describe('withMatchParam', () => {\n    const component = () => mount(React.createElement(MemoryRouter, {\n      initialEntries: [url]\n    }, React.createElement(React.Fragment, null, React.createElement(Route, {\n      path: \"/loans/:loanId/:borrowerId\"\n    }, React.createElement(Component1, null)), React.createElement(Component2, null))));\n\n    beforeEach(() => {});\n    it('Finds both components used for testing', () => {\n      expect(component().find('div').length).to.equal(1);\n      expect(component().find('span').length).to.equal(1);\n    });\n    it('passes the matched param to the nested component', () => {\n      expect(component().find('div').props()).to.deep.include({\n        loanId: 'test'\n      });\n    });\n    it('works if multiple params are passed in an array', () => {\n      Component1 = withMatchParam(['loanId', 'borrowerId'])(props => React.createElement(\"div\", props));\n      expect(component().find('div').props()).to.deep.include({\n        loanId: 'test',\n        borrowerId: 'hello'\n      });\n    });\n    it('passes the matched param to the non-nested component', () => {\n      expect(component().find('span').props()).to.deep.include({\n        loanId: 'test'\n      });\n    });\n    it('does not break if a totally different url is given', () => {\n      url = '/profile/userId2';\n      expect(component().find('span').props()).to.not.contain.key('loanId');\n    });\n  });\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"updateForProps.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/containers/updateForProps.js                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  ignoreProps: () => ignoreProps\n});\nlet shouldUpdate;\nmodule.link(\"recompose\", {\n  shouldUpdate(v) {\n    shouldUpdate = v;\n  }\n\n}, 0);\nlet arePathsUnequal;\nmodule.link(\"../utils/reactFunctions\", {\n  arePathsUnequal(v) {\n    arePathsUnequal = v;\n  }\n\n}, 1);\nmodule.exportDefault(paths => shouldUpdate(arePathsUnequal(paths)));\n\nconst ignoreProps = propNames => shouldUpdate((props, nextProps) => {\n  let update = false;\n  Object.keys(nextProps).filter(propName => !propNames.includes(propName)).some(propName => {\n    const prop = nextProps[propName];\n\n    if (prop !== props[propName]) {\n      update = true;\n      return true;\n    }\n\n    return false;\n  });\n  return update;\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"withMatchParam.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/containers/withMatchParam.js                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nlet withRouter, matchPath;\nmodule.link(\"react-router-dom\", {\n  withRouter(v) {\n    withRouter = v;\n  },\n\n  matchPath(v) {\n    matchPath = v;\n  }\n\n}, 0);\nlet isArray;\nmodule.link(\"lodash/isArray\", {\n  default(v) {\n    isArray = v;\n  }\n\n}, 1);\nlet compose, mapProps;\nmodule.link(\"recompose\", {\n  compose(v) {\n    compose = v;\n  },\n\n  mapProps(v) {\n    mapProps = v;\n  }\n\n}, 2);\nmodule.exportDefault(function (paramName, path) {\n  let {\n    passProps\n  } = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return compose(withRouter, mapProps((_ref) => {\n    let {\n      match,\n      history,\n      location\n    } = _ref,\n        rest = (0, _objectWithoutProperties2.default)(_ref, [\"match\", \"history\", \"location\"]);\n    let realMatch;\n\n    if (path) {\n      realMatch = matchPath(history.location.pathname, {\n        path,\n        exact: false,\n        strict: false\n      });\n    } else {\n      realMatch = match;\n    }\n\n    if (!realMatch) {\n      return (0, _objectSpread2.default)({}, rest);\n    }\n\n    if (isArray(paramName)) {\n      return paramName.reduce((acc, param) => (0, _objectSpread2.default)({}, acc, {\n        [param]: realMatch.params[param]\n      }), (0, _objectSpread2.default)({}, rest));\n    }\n\n    if (typeof paramName === 'function') {\n      const paramNameFromProps = paramName(rest);\n      return (0, _objectSpread2.default)({\n        [paramNameFromProps]: realMatch.params[paramNameFromProps]\n      }, rest);\n    }\n\n    if (passProps) {\n      return (0, _objectSpread2.default)({\n        match,\n        history,\n        location,\n        [paramName]: realMatch.params[paramName]\n      }, rest);\n    }\n\n    return (0, _objectSpread2.default)({\n      [paramName]: realMatch.params[paramName]\n    }, rest);\n  }));\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"config\":{\"colors.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/config/colors.js                                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet INTEREST_RATES;\nmodule.link(\"../api/interestRates/interestRatesConstants\", {\n  INTEREST_RATES(v) {\n    INTEREST_RATES = v;\n  }\n\n}, 0);\nconst colors = {\n  primary: '#005bea',\n  primaryArray: [0, 91, 234],\n  secondary: '#00c6ff',\n  tertiary: '#001a8f',\n  success: '#21d3b5',\n  warning: '#F3AF50',\n  error: '#e01076',\n  borderGrey: '#DEE2E6',\n  charts: ['#2C82BE', '#76DDFB', '#DBECF8', '#53A8E2', '#6AC6FF', '#005bea'],\n  iconColor: '#444',\n  iconHoverColor: '#888',\n  body: '#666',\n  title: '#444',\n  mui: {\n    background: '#fff',\n    contrastText: '#fff',\n    darkPrimary: '#0048bb',\n    // Darken 20%\n    darkSuccess: '#1aa890' // Darken 20%\n\n  },\n  interestRates: {\n    [INTEREST_RATES.LIBOR]: '#0047AC',\n    [INTEREST_RATES.YEARS_1]: '#2C82BE',\n    [INTEREST_RATES.YEARS_2]: '#A8B9C5',\n    [INTEREST_RATES.YEARS_5]: '#43AAC8',\n    [INTEREST_RATES.YEARS_10]: '#005bea',\n    [INTEREST_RATES.YEARS_15]: '#2075AF',\n    [INTEREST_RATES.YEARS_20]: '#3793CC',\n    [INTEREST_RATES.YEARS_25]: '#53A8E2',\n    irs10y: '#0048bb'\n  }\n};\nmodule.exportDefault(colors);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"constants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/config/constants.js                                                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  AUTOSAVE_DEBOUNCE: () => AUTOSAVE_DEBOUNCE\n});\nconst AUTOSAVE_DEBOUNCE = 400;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"financeConstants.js\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/config/financeConstants.js                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  NOTARY_FEES: () => NOTARY_FEES,\n  AMORTIZATION_STOP: () => AMORTIZATION_STOP,\n  MAINTENANCE_REAL: () => MAINTENANCE_REAL,\n  MAINTENANCE_FINMA: () => MAINTENANCE_FINMA,\n  INTERESTS_FINMA: () => INTERESTS_FINMA,\n  APPROXIMATE_LPP_FEES: () => APPROXIMATE_LPP_FEES,\n  DEFAULT_AMORTIZATION: () => DEFAULT_AMORTIZATION,\n  AMORTIZATION_YEARS: () => AMORTIZATION_YEARS,\n  DEFAULT_INTEREST_RATE: () => DEFAULT_INTEREST_RATE,\n  MAX_BORROW_RATIO_PRIMARY_PROPERTY: () => MAX_BORROW_RATIO_PRIMARY_PROPERTY,\n  MAX_BORROW_RATIO_OTHER: () => MAX_BORROW_RATIO_OTHER,\n  MAX_BORROW_RATIO_WITH_PLEDGE: () => MAX_BORROW_RATIO_WITH_PLEDGE,\n  MAX_INCOME_RATIO: () => MAX_INCOME_RATIO,\n  MAX_INCOME_RATIO_TIGHT: () => MAX_INCOME_RATIO_TIGHT,\n  FORTUNE_WARNING_TIGHT: () => FORTUNE_WARNING_TIGHT,\n  INCOME_WARNING_TIGHT: () => INCOME_WARNING_TIGHT,\n  FORTUNE_ERROR: () => FORTUNE_ERROR,\n  INCOME_ERROR: () => INCOME_ERROR,\n  CURRENCY: () => CURRENCY,\n  MIN_CASH: () => MIN_CASH,\n  AVERAGE_TAX_RATE: () => AVERAGE_TAX_RATE,\n  SECOND_PILLAR_WITHDRAWAL_TAX_RATE: () => SECOND_PILLAR_WITHDRAWAL_TAX_RATE,\n  VAT: () => VAT,\n  BONUS_CONSIDERATION: () => BONUS_CONSIDERATION,\n  BONUS_HISTORY_TO_CONSIDER: () => BONUS_HISTORY_TO_CONSIDER,\n  COMPANY_INCOME_TO_CONSIDER: () => COMPANY_INCOME_TO_CONSIDER,\n  DIVIDENDS_CONSIDERATION: () => DIVIDENDS_CONSIDERATION,\n  DIVIDENDS_HISTORY_TO_CONSIDER: () => DIVIDENDS_HISTORY_TO_CONSIDER,\n  PENSION_INCOME_CONSIDERATION: () => PENSION_INCOME_CONSIDERATION,\n  REAL_ESTATE_INCOME_CONSIDERATION: () => REAL_ESTATE_INCOME_CONSIDERATION,\n  INVESTMENT_INCOME_CONSIDERATION: () => INVESTMENT_INCOME_CONSIDERATION,\n  FORTUNE_RETURNS_RATIO: () => FORTUNE_RETURNS_RATIO,\n  ESTIMATED_COMMISSION: () => ESTIMATED_COMMISSION,\n  REFERRAL_COMMISSION: () => REFERRAL_COMMISSION,\n  REFERRAL_COMMISSION_SPLIT: () => REFERRAL_COMMISSION_SPLIT,\n  OWN_FUNDS_ROUNDING_AMOUNT: () => OWN_FUNDS_ROUNDING_AMOUNT,\n  BONUS_ALGORITHMS: () => BONUS_ALGORITHMS,\n  REAL_ESTATE_INCOME_ALGORITHMS: () => REAL_ESTATE_INCOME_ALGORITHMS\n});\nconst NOTARY_FEES = 0.05;\nconst AMORTIZATION_STOP = 0.65;\nconst MAINTENANCE_REAL = 0.005;\nconst MAINTENANCE_FINMA = 0.01;\nconst INTERESTS_FINMA = 0.05;\nconst APPROXIMATE_LPP_FEES = 0.1;\nconst DEFAULT_AMORTIZATION = 0.01;\nconst AMORTIZATION_YEARS = 15;\nconst DEFAULT_INTEREST_RATE = 0.015;\nconst MAX_BORROW_RATIO_PRIMARY_PROPERTY = 0.8;\nconst MAX_BORROW_RATIO_OTHER = 0.7;\nconst MAX_BORROW_RATIO_WITH_PLEDGE = 0.9;\nconst MAX_INCOME_RATIO = 1 / 3;\nconst MAX_INCOME_RATIO_TIGHT = 0.38;\nconst FORTUNE_WARNING_TIGHT = 'FORTUNE_WARNING_TIGHT';\nconst INCOME_WARNING_TIGHT = 'INCOME_WARNING_TIGHT';\nconst FORTUNE_ERROR = 'FORTUNE_ERROR';\nconst INCOME_ERROR = 'INCOME_ERROR';\nconst CURRENCY = 'CHF';\nconst MIN_CASH = 0.1;\nconst AVERAGE_TAX_RATE = 0.25;\nconst SECOND_PILLAR_WITHDRAWAL_TAX_RATE = 0.1;\nconst VAT = 0.077;\nconst BONUS_CONSIDERATION = 0.5;\nconst BONUS_HISTORY_TO_CONSIDER = 3;\nconst COMPANY_INCOME_TO_CONSIDER = 1;\nconst DIVIDENDS_CONSIDERATION = 1;\nconst DIVIDENDS_HISTORY_TO_CONSIDER = 1;\nconst PENSION_INCOME_CONSIDERATION = 1;\nconst REAL_ESTATE_INCOME_CONSIDERATION = 1;\nconst INVESTMENT_INCOME_CONSIDERATION = 1;\nconst FORTUNE_RETURNS_RATIO = 0;\nconst ESTIMATED_COMMISSION = 0.01;\nconst REFERRAL_COMMISSION = 0.25;\nconst REFERRAL_COMMISSION_SPLIT = 0.5;\nconst OWN_FUNDS_ROUNDING_AMOUNT = 1001;\nconst BONUS_ALGORITHMS = {\n  AVERAGE: 'AVERAGE',\n  WEAK_AVERAGE: 'WEAK_AVERAGE'\n};\nconst REAL_ESTATE_INCOME_ALGORITHMS = {\n  DEFAULT: 'DEFAULT',\n  POSITIVE_NEGATIVE_SPLIT: 'POSITIVE_NEGATIVE_SPLIT'\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"lang\":{\"fr.json\":function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/lang/fr.json                                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.exports = {\n  \"ProRevenuesPage.explained\": \"Calcul des revenus\",\n  \"ProRevenuesPage.explained1\": \"Tous les revenus que vous voyez sont les votres.{verticalSpace}Pour les statuts {lead} et {ongoing} , les revenus sont estimés en prenant en compte le commissionnement contractualisé, sur une base des revenus moyens de 1% du montant de l'hypothèque.{verticalSpace}Dès le que le dossier passe en {closing} , e-Potek a la capacité de vous renseigner sur les revenus effectifs à percevoir.\",\n  \"PropertiesPage.addProProperty\": \"Ajouter bien immo Pro\",\n  \"Forms.refId\": \"Code referral\",\n  \"Forms.secondaryType\": \"Type secondaire\",\n  \"Forms.secondaryType.DEATH_3A\": \"Décès 3A\",\n  \"Forms.secondaryType.DEATH_3B\": \"Décès 3B\",\n  \"Forms.secondaryType.INCOME_PROTECTION_3A\": \"Rente IG 3A\",\n  \"Forms.secondaryType.INCOME_PROTECTION_3B\": \"Rente IG 3B\",\n  \"Forms.secondaryType.LIFE_3A\": \"Vie 3A\",\n  \"Forms.secondaryType.LIFE_3B\": \"Vie 3B\",\n  \"PromotionModifier.title\": \"Modifier promotion\",\n  \"OrganisationTabs.revenues\": \"Revenus\",\n  \"Forms.organisationsToPay\": \"Retrocessions pour\",\n  \"Forms.sourceOrganisationLink\": \"Payé par\",\n  \"MaxPropertyValueSharing.buttonLabelOrg\": \"Certifier avec {orgName}\",\n  \"MaxPropertyValueSharing.toggleLabel\": \"Partage de solvabilité\",\n  \"MaxPropertyValue.signup.cta\": \"Envoyer\",\n  \"MaxPropertyValue.completeInfo\": \"Complétez vos informations\",\n  \"MaxPropertyValue.loading1\": \"Algorithmes au travail...\",\n  \"MaxPropertyValue.loading2\": \"Détendez-vous un instant\",\n  \"Forms.reason\": \"Raison\",\n  \"Forms.shouldNotify\": \"Recevoir une notification le jour de l'événement\",\n  \"MaxPropertyValue.noCantonError\": \"Champ obligatoire\",\n  \"Forms.bank3ASimple\": \"Banque 3A\",\n  \"Forms.insurance3ASimple\": \"Assurance 3A\",\n  \"Forms.insurance3BSimple\": \"Assurance 3B\",\n  \"Forms.insurance2Simple\": \"LPP, 2ème Pilier\",\n  \"Forms.financeInformations\": \"Informations financières\",\n  \"MaxPropertyValue.signup.title\": \"Parfait !\",\n  \"MaxPropertyValue.signup.description\": \"Pour accéder au résultat, veuillez remplir le formulaire. Vous recevrez un lien par email\",\n  \"BorrowersPage.BorrowerAdder.title\": \"Combien êtes-vous à emprunter ?\",\n  \"BorrowersPage.BorrowerAdder.description\": \"Vous pourrez changer ce réglage par la suite\",\n  \"BorrowersPage.BorrowerAdder.singleBorrower\": \"Seul\",\n  \"BorrowersPage.BorrowerAdder.twoBorrowers\": \"Deux ou plus\",\n  \"general.pick\": \"Choisissez...\",\n  \"MaxPropertyValue.empty.promotion\": \"Dans le cadre de la promotion \\\"{promotionName}\\\", calculez votre capacité d'achat et obtenez votre attestation de financement pour le canton de {canton}\",\n  \"MaxPropertyValue.empty.proProperty\": \"Obtenez votre attestation de financement pour le bien immobilier \\\"{propertyName}\\\"\",\n  \"Forms.customMessage\": \"Message personnalisé\",\n  \"Forms.customMessage.placeholder\": \"Bonjour Marie,\\n\\nVous trouverez ci-dessus la liste des informations et des documents manquants à votre dossier. J'attire plus particulièrement votre attention sur le document XYZ...\",\n  \"FinancingResultInterests.withOffer\": \"Offre de {name}\",\n  \"FinancingResultInterests.noOffer\": \"Basé sur nos taux actuels\",\n  \"Forms.isPrivate\": \"Privé\",\n  \"emails.LOAN_CHECKLIST.CTA\": \"Compléter mon dossier\",\n  \"emails.LOAN_CHECKLIST.SUBJECT\": \"Invitation à compléter votre dossier\",\n  \"emails.LOAN_CHECKLIST.TITLE\": \"Rapport du {today} sur la progression de votre dossier\",\n  \"Forms.type.COMMUNICATION\": \"Email, téléphone\",\n  \"Forms.type.EMAIL\": \"Email\",\n  \"Forms.type.PHONE\": \"Téléphone\",\n  \"Forms.type.EVENT\": \"Événement\",\n  \"Forms.type.SERVER\": \"Automatique\",\n  \"Forms.expectedAt\": \"Paiement attendu le\",\n  \"Forms.paidAt\": \"Paiement reçu le\",\n  \"Forms.dueAtTime\": \"Heure d'échéance\",\n  \"Forms.maxBorrowRatioWithPledge\": \"Taux d'avance avec nantissement\",\n  \"DetailSideNavFilters.relevantOnly\": \"Pertinents uniquement\",\n  \"FinancingCollapser.expand\": \"Afficher les détails\",\n  \"FinancingCollapser.collapse\": \"Masquer les détails\",\n  \"SuperDashboard.welcome\": \"Bienvenue, {name}\",\n  \"SuperDashboard.welcome.subtitle\": \"Vos dossiers\",\n  \"SuperDashboard.openLoan\": \"Ouvrir le dossier\",\n  \"Forms.category.STANDARD\": \"Retail\",\n  \"Forms.category.PREMIUM\": \"Premium\",\n  \"LoginPage.noAccountApp\": \"Vous n'avez pas de compte? Commencez {link}\",\n  \"LoginPage.noAccount\": \"Vous n'avez pas de compte? {contactUs}\",\n  \"AccountPage.updateUser\": \"Modifier mes informations\",\n  \"PropertyStartPage.buttonLabel\": \"Démarrer\",\n  \"AnonymousLoanClaimer.title\": \"Ajouter ce dossier à votre compte?\",\n  \"AnonymousLoanClaimer.refuse\": \"Non, supprimer\",\n  \"AnonymousLoanClaimer.claim\": \"Ajouter à mon compte\",\n  \"SignupSuccessPage.title\": \"Un email vous a été envoyé à {email}\",\n  \"SignupSuccessPage.description\": \"Ouvrez-le pour continuer votre expérience e-Potek\",\n  \"UserCreator.title\": \"Créez votre compte e-Potek\",\n  \"UserCreator.description1\": \"Soyez accompagné par votre conseiller attitré\",\n  \"UserCreator.description2\": \"Accédez à l'interface complète e-Potek\",\n  \"UserCreator.description3\": \"Obtenez des offres de tous les prêteurs du marché!\",\n  \"AnonymousAppPage.withLoanTitle\": \"Dossier anonyme\",\n  \"AnonymousAppPage.lastModifiedAt\": \"Dernière modification {date} depuis cet appareil\",\n  \"AnonymousAppPage.start\": \"Commencer\",\n  \"AnonymousAppPage.alreadyAccount\": \"Vous avez déjà un compte e-Potek?\",\n  \"WwwTopNavLinks.\": \"Accueil\",\n  \"Recap.consideredBy\": \"Considéré par {organisationName}\",\n  \"Forms.variable.zipCode\": \"Code postal du bien immobilier\",\n  \"Forms.variable.remainingBankFortune\": \"Fortune bancaire post-décaissement\",\n  \"Forms.expenses.REAL_ESTATE_DELTA_POSITIVE\": \"Delta immobilier positif\",\n  \"Forms.expenses.REAL_ESTATE_DELTA_NEGATIVE\": \"Delta immobilier négatif\",\n  \"Forms.realEstateIncomeAlgorithm\": \"Calcul des revenus/charges immobilières\",\n  \"Forms.realEstateIncomeAlgorithm.DEFAULT\": \"Charges et revenus séparés\",\n  \"Forms.realEstateIncomeAlgorithm.POSITIVE_NEGATIVE_SPLIT\": \"Deltas positifs/négatifs\",\n  \"Forms.bonusAlgorithm\": \"Calcul des bonus\",\n  \"Forms.bonusAlgorithm.AVERAGE\": \"Moyenne des bonus (y compris 0)\",\n  \"Forms.bonusAlgorithm.WEAK_AVERAGE\": \"Moyenne des bonus existants\",\n  \"Forms.realEstateIncomeConsideration\": \"Considération des revenus immobiliers\",\n  \"PasswordResetPage.disclaimer\": \"J'ai lu et accepté la {link}.\",\n  \"PasswordResetPage.disclaimer.privacyPolicy\": \"Politique de confidentialité\",\n  \"Forms.loanName\": \"No.\",\n  \"EmailVerification.error\": \"Il y a eu un souci lors de la vérification de votre email, merci de contacter info@e-potek.ch si vous avez besoin d'assistance.\",\n  \"EmailVerification.message\": \"Votre adresse email a bien été vérifiée, merci!\",\n  \"PromotionUsersTableActions.editLots.title\": \"Modifier lots de {name}\",\n  \"PromotionUsersTableActions.editLots\": \"Préselectionner lots\",\n  \"Forms.promotionLotIds\": \"Préselection de lots\",\n  \"Forms.showAllLots\": \"Le client peut voir tous les lots\",\n  \"Recap.realEstateCosts\": \"Charges immobilières théoriques\",\n  \"PasswordResetPage.errorTitle\": \"Zut, une erreur\",\n  \"PasswordResetPage.errorButton\": \"Se connecter\",\n  \"PasswordResetPage.errorDescription\": \"Vous avez déjà choisi votre mot de passe. Connectez-vous à votre compte sur la page de login.\",\n  \"AutoForm.autosaveDisclaimer\": \"Les informations dans ce formulaire sont sauvegardées à chaque instant, naviguez en toute liberté.\",\n  \"MaxPropertyValueSharing.buttonLabel\": \"Partager avec mon courtier\",\n  \"PropertyCardSubtitle.solvent\": \"Solvable\",\n  \"PropertyCardSubtitle.nonSolvent\": \"Non solvable\",\n  \"PropertyCardSubtitle.solvent.tooltip\": \"Votre capacité d'achat est suffisante pour acquérir ce bien.\",\n  \"PropertyCardSubtitle.nonSolvent.tooltip\": \"Votre capacité d'achat est insuffisante pour acquérir ce bien. Vous pouvez appeler votre conseiller e-Potek pour identifier des solutions.\",\n  \"Forms.solvency.NOT_SHARED\": \"Pas partagé\",\n  \"Forms.variable.propertyType\": \"Type de bien immobilier\",\n  \"SimpleDashboardPage.shareSolvency.title\": \"Activer le partage de solvabilité avec mon courtier\",\n  \"SimpleDashboardPage.shareSolvency.disclaimer\": \"En activant le partage de solvabilité, {orgName} peut voir si vous êtes solvable ou non sur votre bien immobilier. Aucune autre information personnelle ne sera partagée.\",\n  \"DashboardInfoInterests.link\": \"Consulter {count, plural, one {mon offre} other {mes offres}}\",\n  \"DashboardInfoInterests.subtitle\": \"{count, plural, one {Une offre} other {# offres}}\",\n  \"DashboardInfoInterests.offersTitle\": \"Vos taux d'intérêt\",\n  \"BorrowersProgress.empty\": \"Commencez à remplir le formulaire, vous verrez un récapitulatif ici\",\n  \"DashboardProgressInfo.solvency\": \"Calculez votre capacité d'achat pour obtenir une attestation de financement\",\n  \"SolvencyPage.title\": \"Attestation de financement\",\n  \"BorrowersProgress.welcomePage\": \"Écran d'accueil\",\n  \"MaxPropertyValue.missingInfos\": \"Complétez le formulaire pour obtenir votre attestation de financement\",\n  \"MaxPropertyValue.informations\": \"Pour un résultat précis, utilisez le formulaire avancé.\",\n  \"MaxPropertyValue.empty\": \"Choisissez le canton dans lequel se situe le bien immobilier. Vous pourrez le changer plus tard.\",\n  \"Forms.applicationType\": \"Interface\",\n  \"Forms.applicationType.SIMPLE\": \"Simplifiée\",\n  \"Forms.applicationType.FULL\": \"Complète\",\n  \"SimpleDashboardPage.propertyCardButton.property\": \"Voir le bien immobilier\",\n  \"SimpleDashboardPage.propertyCardButton.promotion\": \"Voir la promotion\",\n  \"general.begin\": \"Démarrer\",\n  \"WelcomeScreen.title\": \"Bienvenue sur e-Potek\",\n  \"WelcomeScreen.description\": \"e-Potek vous permet de rapidement déterminer votre capacité d’achat, et d’obtenir des offres de prêt hypothécaires de tout le marché.\",\n  \"WelcomeScreen.whoWeAre\": \"Qui sommes nous?\",\n  \"WelcomeScreen.readAboutUs\": \"En lire plus sur e-Potek\",\n  \"WelcomeScreen.readFaq\": \"Lire les questions fréquemment posées\",\n  \"WelcomeScreen.help\": \"Besoin d'aide?\",\n  \"WelcomeScreen.contactUs\": \"Contactez votre conseiller attitré\",\n  \"WelcomeScreen.other\": \"Autres infos pratiques\",\n  \"WelcomeScreen.interestRates\": \"Consultez nos derniers taux d'intérêt\",\n  \"WelcomeScreen.companyDescription\": \"Déscriptif d'e-Potek SA\",\n  \"WelcomeScreen.dontShowAgain\": \"Ne plus afficher cet écran\",\n  \"WelcomeScreen.interests\": \"Nos taux?\",\n  \"WelcomeScreen.english\": \"Do you speak English?\",\n  \"WelcomeScreen.contactUsEN\": \"Give us a call!\",\n  \"WelcomeScreen.readBlog\": \"Voir notre blog\",\n  \"WelcomeScreen.readMore\": \"En lire plus\",\n  \"WelcomeScreen.moreQuestions\": \"D'autres questions?\",\n  \"BorrowersProgress.fullApplication\": \"Demande de prêt\",\n  \"BorrowersProgress.fullApplicationDescription\": \"Votre conseiller va vous contacter afin de vous accompagner au sein de votre espace personnel e-Potek. Vous pourrez :\",\n  \"BorrowersProgress.fullApplicationDescription1\": \"Constituer un dossier complet de recherche de financement\",\n  \"BorrowersProgress.fullApplicationDescription2\": \"Identifier la structure de financement la plus adaptée à votre situation\",\n  \"BorrowersProgress.fullApplicationDescription3\": \"Obtenir des offres hypothécaires de tous les acteurs du marché\",\n  \"BorrowersProgress.fullApplicationDescription4\": \"Pour une expérience optimale, nous vous recommandons d'utiliser votre ordinateur ou tablette\",\n  \"BorrowersProgress.progress\": \"Formulaire rempli à {percent}\",\n  \"BorrowersProgress.title\": \"Emprunteurs\",\n  \"MaxPropertyValue.title\": \"Capacité d'achat\",\n  \"Forms.variable.gardenArea\": \"Jardin\",\n  \"Forms.variable.landArea\": \"Terrain\",\n  \"Forms.variable.terraceArea\": \"Terrasse\",\n  \"Forms.variable.roomCount\": \"Pièces\",\n  \"Forms.variable.constructionYear\": \"Année de construction\",\n  \"Forms.canton.placeholder\": \"Renseignez un code postal suisse\",\n  \"FinancingProjectFees.notaryFeesOverride\": \"Vous avez choisi des frais de notaire sur mesure. Pour accéder aux frais de notaire automatiques, supprimez le contenu du champ \\\"Frais de notaire\\\".\",\n  \"Financing.maxPropertyLabel\": \"Ajouter plan financier\",\n  \"Financing.maxPropertyDescription\": \"Capacité d'achat max.\",\n  \"Financing.maxPropertyDialogDescription\": \"Ajoute un nouveau plan financier qui représente votre capacité d'achat maximale dans le canton de votre choix.\",\n  \"ProOrganisationUserAdder.title\": \"Ajouter un utilisateur à {organisationName}\",\n  \"ProOrganisationUserAdder.description\": \"Crée un nouveau compte qui sera automatiquement associé à votre organisation et aura accès à tous les biens immobiliers, promotions et clients de cette organisation.\",\n  \"ProOrganisationUserAdder.tooltip\": \"Ajouter utilisateur à {organisationName}\",\n  \"AccountPage.DevelopperSection.emptyState.title\": \"Pas de clés API\",\n  \"AccountPage.DevelopperSection.emptyState.description\": \"Vous pouvez générer une paire de clés pour commencer à utiliser notre API REST.\",\n  \"AccountPage.DevelopperSection.keyPair.regenerate\": \"Regénérer une paire de clés\",\n  \"AccountPage.DevelopperSection.keyPair.generate\": \"Générer une paire de clés\",\n  \"AccountPage.DevelopperSection.key.warning\": \"Sauvegardez votre clé privée maintenant: vous ne pourrez plus y accéder !\",\n  \"AccountPage.DevelopperSection.key.createdAt\": \"Générée le {date}\",\n  \"AccountPage.DevelopperSection.key.show\": \"Afficher la clé\",\n  \"AccountPage.DevelopperSection.key.hide\": \"Masquer la clé\",\n  \"AccountPage.DevelopperSection.key.copy\": \"Copier la clé\",\n  \"AccountPage.DevelopperSection.keyType.public\": \"Clé publique\",\n  \"AccountPage.DevelopperSection.keyType.private\": \"Clé privée\",\n  \"AccountPage.DevelopperSection.title\": \"Zone développeur\",\n  \"AccountPage.DevelopperSection.description\": \"N'hésitez pas à contacter {email} pour obtenir la documentation nécessaire à l'implémentation de l'API.\",\n  \"ProPropertyPage.usersTable.removeUser.alert\": \"Supprimer {user} du bien immobilier ?\",\n  \"ProPropertyPage.usersTable.removeUser.tooltip\": \"Enlever du bien immobilier\",\n  \"ProPropertyPage.usersTable.title\": \"Utilisateurs\",\n  \"ProPropertyPage.proUserAdder.search\": \"Rechercher...\",\n  \"ProPropertyPage.proUserAdder.searchByEmail\": \"Rechercher par email...\",\n  \"ProPropertyPage.proUserAdder.noUserFound\": \"Aucun utilisateur trouvé. Contactez e-Potek pour ajouter ce compte\",\n  \"ProPropertyPage.proUserAdder.notFound\": \"Aucun utilisateur trouvé\",\n  \"ProPropertyPage.proUserAdder.notFoundInOrg\": \"Aucun utilisateur trouvé dans votre organisation\",\n  \"Forms.add\": \"Ajouter\",\n  \"ProPropertyPage.removeCustomer.alert\": \"Êtes-vous sûr de vouloir enlever l'accès à ce bien immobilier à {customerName} ?\",\n  \"ProPropertyPage.customersTable\": \"Acheteurs\",\n  \"PropertyCustomerAdder.title\": \"Ajouter acheteur\",\n  \"PropertyCustomerAdder.description\": \"Ajoute un compte pour cet acheteur, et le notifiera par email que vous l'avez invité sur e-Potek (vous recevrez aussi un email de confirmation). Si c'est un client déjà existant chez e-Potek, cette invitation lui créera un nouveau dossier hypothécaire.\",\n  \"PropertyCustomerAdder.referredUsers\": \"Vos clients existants\",\n  \"PropertyCustomerAdder.referredUsers.tooltip\": \"Sélectionnez un de vos clients existants\",\n  \"Forms.loans\": \"Dossiers\",\n  \"ProCustomerAdder.title\": \"Inviter un client\",\n  \"ProCustomerAdder.description\": \"Ajoute un compte pour ce client, et le notifiera par email (ainsi que son conseiller et le courtier) que vous l'avez invité sur e-Potek. Si c'est un client déjà existant chez e-Potek, vous devez l'inviter à une promotion ou à un bien immobilier.\",\n  \"ProCustomersTable.maxPropertyValue.placeHolder\": \"Pas encore {computed, select, true {partagé} other {calculé}}\",\n  \"ProDashboardPage.PromotionAdder.name\": \"Nom de la promotion\",\n  \"ProDashboardPage.PromotionAdder.type\": \"Type de la promotion\",\n  \"ProDashboardPage.ExternalPropertyAdder\": \"Ajouter bien immo API\",\n  \"Forms.propertyPage.residenceTypeSetter.text\": \"Choisissez le type de résidence pour afficher le bien immobilier.\",\n  \"Forms.propertyIds\": \"Inviter aux biens immobiliers\",\n  \"Forms.promotionIds\": \"Inviter aux promotions\",\n  \"ProDashboardPage.organisationProperties\": \"Biens immobiliers de mon organisation\",\n  \"ProCustomersTable.maxPropertyValue\": \"Capacité d'achat max.\",\n  \"Forms.externalId\": \"ID externe\",\n  \"Forms.externalId.placeholder\": \"123-456-789\",\n  \"Forms.useOpenGraph\": \"Utiliser données Open Graph\",\n  \"Forms.externalUrl\": \"Lien vers site web du bien immobilier\",\n  \"Forms.externalUrl.placeholder\": \"https://www.google.com/mon-bien-immo\",\n  \"Forms.imageUrls\": \"Images du bien immobilier (URLs)\",\n  \"Forms.imageUrls.placeholder\": \"https://www.google.com/mon-bien-immo.jpg\",\n  \"ProOrganisationPageTabs.referredCustomers\": \"Clients référés\",\n  \"OrganisationTabs.referredUsers\": \"Clients référés\",\n  \"WwwTopNavLinks.appLogin\": \"Login Clients\",\n  \"WwwTopNavLinks.proLogin\": \"Login Pro\",\n  \"RevenuesByStatus.revenues\": \"Revenus\",\n  \"RevenuesByStatus.loanCount\": \"Dossiers\",\n  \"ProRevenuesPage.title\": \"Revenus\",\n  \"ProRevenuesPage.loanCount\": \"{value} Dossiers\",\n  \"PropertiesTable.customers\": \"Acheteurs\",\n  \"ProOrganisationPage.empty\": \"Vous ne faites pas partie d'une organisation\",\n  \"ProOrganisationPage.empty.description\": \"Contactez-nous pour en créer une (022 566 01 10). Vous pourrez inviter vos collègues, et partager les informations entre plusieurs utilisateurs.\",\n  \"ProOrganisationPageTabs.users\": \"Utilisateurs\",\n  \"ProOrganisationPageTabs.contacts\": \"Contacts\",\n  \"ProOrganisationPageTabs.commission\": \"Commissions\",\n  \"ProSideNav.revenues\": \"Revenus\",\n  \"ProSideNav.dashboard\": \"Dashboard\",\n  \"ProSideNav.organisation\": \"Organisation\",\n  \"CommissionRatesViewer.fromThreshold\": \"À partir de {value}\",\n  \"CommissionRatesViewer.commissionRatesList\": \"Votre structure de commissionement\",\n  \"CommissionRatesViewer.currentRate\": \"Votre commission d'apporteur d'affaires\",\n  \"CommissionRatesViewer.referredRevenues\": \"Revenus apportés\",\n  \"OrganisationTabs.commission\": \"Commissionnement\",\n  \"Forms.commissionRates\": \"Taux de commissionnement\",\n  \"Forms.commissionRates.rate\": \"Taux\",\n  \"Forms.commissionRates.threshold\": \"Seuil\",\n  \"Forms.commissionRates.threshold.placeholder\": \"0\",\n  \"TopNavDropdown.app\": \"Interface App\",\n  \"Forms.phone\": \"Téléphone\",\n  \"ProCustomersTable.loanName\": \"No.\",\n  \"ProCustomersTable.status\": \"Statut\",\n  \"ProCustomersTable.name\": \"Client\",\n  \"ProCustomersTable.phone\": \"Téléphone\",\n  \"ProCustomersTable.email\": \"Email\",\n  \"ProCustomersTable.createdAt\": \"Ajouté le\",\n  \"ProCustomersTable.referredBy\": \"Référé par\",\n  \"Forms.referredBy\": \"Référé par\",\n  \"ProCustomersTable.relatedTo\": \"Lien\",\n  \"ProCustomersTable.estimatedRevenues\": \"Commission estimée\",\n  \"Forms.referOnly\": \"Référer le client\",\n  \"DashboardRecapProperty.emptyTitle\": \"Pas de bien immobilier\",\n  \"DashboardRecapProperty.emptyDescription\": \"Ajoutez un bien et il apparaîtra ici\",\n  \"DashboardRecapProperty.emptyButton\": \"Biens immobiliers\",\n  \"PropertiesPageAdder.reuseProperty\": \"Réutiliser bien immobilier\",\n  \"Forms.fortuneReturns\": \"Revenus de fortune mobilière\",\n  \"Forms.realEstateIncome\": \"Revenus de fortune immobilière\",\n  \"PDF.borrowersInfos.realEstateIncome\": \"Revenus de fortune immobilière\",\n  \"Forms.otherIncome.comment\": \"Commentaire [ADMIN]\",\n  \"Forms.otherIncome.comment.placeholder\": \"Apparaît dans le PDF\",\n  \"Forms.expenses.comment\": \"Commentaire [ADMIN]\",\n  \"Forms.expenses.comment.placeholder\": \"Apparaît dans le PDF\",\n  \"PDF.title.lenderRules\": \"Votre politique crédit\",\n  \"FinancingOffers.deselect\": \"Déselectionner\",\n  \"PDF.title.structure\": \"Scénario - {name}\",\n  \"PDF.title.property\": \"Bien immobilier\",\n  \"Forms.operator.in\": \"Inclus dans\",\n  \"Forms.birthDate\": \"Date de naissance\",\n  \"FinancingLenders.consideredIncome\": \"Revenus considérés\",\n  \"FinancingLenders.consideredExpenses\": \"Charges considérées\",\n  \"Forms.realEstate.income\": \"Revenus annuels générés\",\n  \"Forms.realEstate.name\": \"Description\",\n  \"Forms.realEstate.name.placeholder\": \"Chalet à Verbier\",\n  \"Recap.realEstateExpenses\": \"Charges immobilières\",\n  \"Recap.realEstateIncome\": \"Revenus immobiliers\",\n  \"Forms.expenses.THEORETICAL_REAL_ESTATE\": \"Charges théoriques immobilières\",\n  \"Forms.hasOwnCompany\": \"Travaillez-vous pour votre propre entreprise?\",\n  \"Forms.ownCompanies\": \"Entreprises\",\n  \"Forms.ownCompanies.description\": \"Description\",\n  \"Forms.ownCompanies.description.placeholder\": \"Nom de votre entreprise\",\n  \"Forms.ownCompanies.ownership\": \"% de parts dans la société\",\n  \"Forms.ownCompanies.netIncome2018\": \"Bénéfice net 2018\",\n  \"Forms.ownCompanies.netIncome2017\": \"Bénéfice net 2017\",\n  \"Forms.ownCompanies.netIncome2016\": \"Bénéfice net 2016\",\n  \"Forms.ownCompanies.netIncome2018.placeholder\": \"CHF 100 000\",\n  \"Forms.ownCompanies.netIncome2017.placeholder\": \"CHF 100 000\",\n  \"Forms.ownCompanies.netIncome2016.placeholder\": \"CHF 100 000\",\n  \"Recap.netSalary\": \"Salaire net\",\n  \"Forms.actions\": \"Actions\",\n  \"ProPropertyPage.addUser.label\": \"Ajouter utilisateur\",\n  \"ProPropertyPage.addUser.title\": \"Ajouter utilisateur\",\n  \"ProPropertyPage.addUser.description\": \"Ajoute un utilisateur PRO sur ce bien immobilier, qui pourra gérer les détails du bien, et consulter la liste des acheteurs. Vous pouvez restreindre ou augmenter les droits d'accès de cet utilisateur par la suite.{verticalSpace}Si la personne que vous souhaitez inviter n'a pas encore un compte PRO sur e-Potek, ajoutez le depuis la page de votre organisation, ou contactez e-Potek s'il fait partie d'une autre entreprise.\",\n  \"ProPropertyPage.ProUsers.name\": \"Nom\",\n  \"ProPropertyPage.ProUsers.email\": \"Email\",\n  \"ProPropertyPage.ProUsers.permissions\": \"Permissions\",\n  \"ProPropertyPage.ProUsers.actions\": \"Actions\",\n  \"Forms.organisationLinks._id\": \"Organisation\",\n  \"Forms.commissionRate\": \"Taux de la commission\",\n  \"Forms.organisationLinks.commissionRate\": \"Taux de la commission\",\n  \"Forms.organisationLinks.paidAt\": \"Date de paiement\",\n  \"Forms.organisationLinks.status\": \"Statut\",\n  \"Forms.status.TO_BE_PAID\": \"À payer\",\n  \"Forms.status.PAID\": \"Payé\",\n  \"Forms.organisationLinks\": \"Organisations\",\n  \"Forms.type.MORTGAGE\": \"Hypothèque\",\n  \"Forms.type.FEE\": \"Honoraires\",\n  \"Forms.status.EXPECTED\": \"Attendu\",\n  \"Forms.status.CLOSED\": \"Reçu\",\n  \"LoanTabs.revenues\": \"Revenus\",\n  \"Forms.amount.placeholder\": \"2000\",\n  \"Forms.amount\": \"Montant\",\n  \"Forms.permissions.displayCustomerNames.forPropertyStatus.FOR_SALE\": \"En vente\",\n  \"Forms.permissions.displayCustomerNames.forPropertyStatus.BOOKED\": \"Réservé\",\n  \"Forms.permissions.displayCustomerNames.forPropertyStatus.SOLD\": \"Vendu\",\n  \"Forms.permissions.displayCustomerNames.forPropertyStatus\": \"Pour les statuts du bien immobilier\",\n  \"Forms.permissions.displayCustomerNames.referredBy.ANY\": \"Tous\",\n  \"Forms.permissions.displayCustomerNames.referredBy.USER\": \"L'utilisateur\",\n  \"Forms.permissions.displayCustomerNames.referredBy.ORGANISATION\": \"Son organisation\",\n  \"Forms.permissions.displayCustomerNames.referredBy\": \"Référrés par\",\n  \"Forms.permissions.canModifyProperty\": \"Peut modifier le bien immobilier\",\n  \"Forms.permissions.canInviteProUsers\": \"Peut inviter des utilisateurs\",\n  \"Forms.permissions.canManagePermissions\": \"Peut gérer les permissions des utilisateurs\",\n  \"files.propertyDocuments\": \"Documents du bien immobilier\",\n  \"files.propertyImages\": \"Images du bien immobilier\",\n  \"ProPropertyPage.manageDocuments\": \"Gérer documents\",\n  \"ProDashboardPage.properties\": \"Biens immobiliers\",\n  \"PropertiesTable.address\": \"Adresse\",\n  \"PropertiesTable.status\": \"Statut\",\n  \"PropertiesTable.value\": \"Prix d'achat\",\n  \"Forms.invitedBy\": \"Invité par\",\n  \"Forms.features.PRO\": \"Pro\",\n  \"PromotionLotLoansTable.assignInvitedBy\": \"Modifier\",\n  \"OrganisationTabs.users\": \"Utilisateurs\",\n  \"Forms.type.REAL_ESTATE_BROKER\": \"Courtier Immobilier\",\n  \"Forms.type.NOTARY_OFFICE\": \"Étude de Notaire\",\n  \"Forms.type.CONSTRUCTION_COMPANY\": \"Entreprise Générale\",\n  \"Forms.type.DEVELOPER\": \"Promoteur\",\n  \"Forms.type.ARCHITECT\": \"Architecte\",\n  \"Forms.type.OTHER\": \"Autre\",\n  \"PromotionLotLoansTable.invitedBy\": \"Invité par\",\n  \"PromotionLotLoansTable.loanName\": \"Dossier\",\n  \"Forms.permissions.canSellLots\": \"Peut vendre des lots\",\n  \"Forms.permissions.canPreBookLots\": \"Peut pré-réserver des lots\",\n  \"Forms.permissions.canBookLots\": \"Peut réserver des lots\",\n  \"Forms.permissions.canInviteCustomers\": \"Peut inviter des clients\",\n  \"Forms.permissions.displayCustomerNames.invitedBy.ANY\": \"Tous\",\n  \"Forms.permissions.displayCustomerNames.invitedBy.USER\": \"Utilisateur\",\n  \"Forms.permissions.displayCustomerNames.invitedBy.ORGANISATION\": \"Organisation\",\n  \"Forms.permissions.displayCustomerNames.invitedBy\": \"Invité par\",\n  \"Forms.permissions.displayCustomerNames.forLotStatus\": \"Statut des lots\",\n  \"Forms.permissions.displayCustomerNames.forLotStatus.AVAILABLE\": \"Disponible\",\n  \"Forms.permissions.displayCustomerNames.forLotStatus.BOOKED\": \"Réservé\",\n  \"Forms.permissions.displayCustomerNames.forLotStatus.SOLD\": \"Vendu\",\n  \"Forms.permissions.displayCustomerNames\": \"Afficher le nom des clients\",\n  \"Forms.permissions.canSeeCustomers\": \"Peut voir les clients\",\n  \"Forms.permissions.canManageDocuments\": \"Peut gérér les documents de la promotion\",\n  \"Forms.permissions.canModifyPromotion\": \"Peut modifier la promotion\",\n  \"Forms.permissions.canRemoveLots\": \"Peut supprimer des lots\",\n  \"Forms.permissions.canModifyLots\": \"Peut modifier des lots\",\n  \"Forms.permissions.canAddLots\": \"Peut ajouter des lots\",\n  \"Forms.permissions.canViewPromotion\": \"Peut voir la promotion\",\n  \"Forms.permissions\": \"Permissions\",\n  \"Forms.bundlesSettings.consultation.invitedBy.ANY\": \"Tous\",\n  \"Forms.bundlesSettings.consultation.invitedBy.USER\": \"Utilisateur\",\n  \"Forms.bundlesSettings.consultation.invitedBy.ORGANISATION\": \"Organisation\",\n  \"Forms.bundlesSettings.consultation.invitedBy\": \"Invité par\",\n  \"Forms.bundlesSettings.consultation.forLotStatus\": \"Statut des lots\",\n  \"Forms.bundlesSettings.consultation.forLotStatus.AVAILABLE\": \"Disponible\",\n  \"Forms.bundlesSettings.consultation.forLotStatus.BOOKED\": \"Réservé\",\n  \"Forms.bundlesSettings.consultation.forLotStatus.SOLD\": \"Vendu\",\n  \"Forms.bundlesSettings.consultation\": \"Consultation - Afficher le nom des clients\",\n  \"Forms.bundlesSettings\": \"Configuration des packages\",\n  \"Forms.bundles.INVITATION\": \"Invitation\",\n  \"Forms.bundles.CONSULTATION\": \"Consultation\",\n  \"Forms.bundles.MODIFICATION\": \"Modification\",\n  \"Forms.bundles.BOOKING\": \"Réservation\",\n  \"Forms.bundles.SELLING\": \"Vente\",\n  \"Forms.bundles\": \"Packages\",\n  \"Forms.useBundles\": \"Utiliser des packages de permissions\",\n  \"AccountPage.DeveloperSection.show\": \"Zone développeur\",\n  \"PercentWithStatus.max\": \"Max: {max}\",\n  \"Forms.netSalary\": \"Revenus nets annuels\",\n  \"Forms.netSalary.placeholder\": \"CHF 80 000\",\n  \"Forms.adminComments\": \"Commentaires pour admins\",\n  \"Forms.adminComments.placeholder\": \"Ne pas soumettre si la lune est pleine\",\n  \"Forms.pdfComments\": \"Commentaires pour PDF\",\n  \"Forms.pdfComments.placeholder\": \"Considéré comme une résidence de luxe\",\n  \"Forms.fortuneReturnsRatio\": \"Taux de rendement sur la fortune mobilière\",\n  \"Forms.theoreticalInterestRate2ndRank\": \"Taux d'intérêt théorique sur 2e rang\",\n  \"Forms.borrowRatio\": \"Taux d'avance\",\n  \"Financing.disabledTooltip\": \"Ce plan financier a été verrouillé par votre conseiller\",\n  \"Forms.customName\": \"Nom personnalisé\",\n  \"Forms.customName.placeholder\": \"Avenue de la gare\",\n  \"MobileWarning.title\": \"e-Potek est optimisée pour une utilisation sur tablette ou ordinateur.\",\n  \"MobileWarning.description\": \"Pour une meilleure expérience utilisateur, nous vous recommandons d'utiliser un écran plus grand.\",\n  \"MobileWarning.buttonLabel\": \"Ignorer\",\n  \"BlogList.readMore\": \"Lire plus\",\n  \"BlogAuthor.by\": \"Par {name}\",\n  \"BlogPage.title\": \"Blog e-Potek\",\n  \"BlogPage.description\": \"Retrouvez les dernières actualités, conseils, et guides en hypothèques.\",\n  \"WwwTopNavLinks.blog\": \"Blog\",\n  \"Forms.enableOffer\": \"Montrer l'offre au client\",\n  \"Forms.option\": \"Option\",\n  \"Forms.option.POSITIVE\": \"Positif\",\n  \"Forms.option.NEGATIVE_NOT_COMPETITIVE\": \"Négatif pas compétitif\",\n  \"Forms.option.NEGATIVE_WITHOUT_FOLLOW_UP\": \"Négatif sans suite\",\n  \"Forms.option.CUSTOM\": \"Personnalisé\",\n  \"Forms.feedbackPreview\": \"Apperçu du feedback\",\n  \"Forms.customFeedback\": \"Feedback\",\n  \"Forms.customFeedback.placeholder\": \"Bonjour Mathilde,\\n\\nJe vous écris concernant votre offre du...\",\n  \"Feedback.NEGATIVE_NOT_COMPETITIVE.outro.singleBorrower\": \"<br/><br/>Nous sommes navrés de n’avoir pas réussi à convaincre {borrower}.\",\n  \"Feedback.NEGATIVE_NOT_COMPETITIVE.outro.twoBorrowers\": \"<br/><br/>Nous sommes navrés de n’avoir pas réussi à convaincre {borrower1} et {borrower2}.\",\n  \"Feedback.NEGATIVE_WITHOUT_FOLLOW_UP.outro.singleBorrower\": \"<br/><br/>Nous nous permettrons de vous solliciter à nouveau lorsque {singleBorrower, select, true {le client aura} other {les clients auront}} trouvé un nouveau projet.\",\n  \"Feedback.NEGATIVE_WITHOUT_FOLLOW_UP.outro.twoBorrowers\": \"<br/><br/>Nous nous permettrons de vous solliciter à nouveau lorsque {singleBorrower, select, true {le client aura} other {les clients auront}} trouvé un nouveau projet.\",\n  \"Feedback.NEGATIVE_WITHOUT_FOLLOW_UP.comments\": \"<br/><br/>Pour les raisons suivantes:<br/>\",\n  \"Feedback.NEGATIVE_WITHOUT_FOLLOW_UP.introduction.singleBorrower\": \"<br/><br/>Nous faisons référence à votre offre du <b>{date}</b> que nous avions présentée à <b>{borrower}</b> concernant le financement de son projet sis <b>{address}</b>.\",\n  \"Feedback.NEGATIVE_WITHOUT_FOLLOW_UP.introduction.twoBorrowers\": \"<br/><br/>Nous faisons référence à votre offre du <b>{date}</b> que nous avions présentée à <b>{borrower1}</b> et <b>{borrower2}</b> concernant le financement de leur projet sis <b>{address}</b>.\",\n  \"Feedback.NEGATIVE_WITHOUT_FOLLOW_UP.body\": \"<br/><br/>Le projet {singleBorrower, select, true {du client} other {des clients}} n’a malheureusement pas abouti.\",\n  \"Feedback.NEGATIVE_NOT_COMPETITIVE.comments\": \"<br/><br/>{singleBorrower, select, true {Il a émis} other {Ils ont émis}} les objections suivantes:<br/>\",\n  \"Feedback.NEGATIVE_NOT_COMPETITIVE.body\": \"<br/><br/>Nous n'avons malheureusement pas réussi à attirer l'attention {singleBorrower, select, true {du client} other {des clients}} sur votre offre.\",\n  \"Feedback.POSITIVE.outro.singleBorrower\": \"<br/><br/>Pourriez-vous me contacter rapidement afin d’orchestrer ensemble les prochaines étapes ?\",\n  \"Feedback.POSITIVE.outro.twoBorrowers\": \"<br/><br/>Pourriez-vous me contacter rapidement afin d’orchestrer ensemble les prochaines étapes ?\",\n  \"Feedback.POSITIVE.body\": \"<br/><br/>{singleBorrower, select, true {Il est ravi et souhaite} other {Ils sont ravis et souhaitent}} poursuivre l'expérience afin d'obtenir une offre ferme de financement.\",\n  \"Feedback.POSITIVE.comments\": \"<br/><br/>Toutefois, nous attirons votre attention sur ce qui suit:<br/>\",\n  \"Feedback.closing\": \"<br/><br/>Cordialement,<br/>{assignee}\",\n  \"Feedback.introduction.singleBorrower\": \"<br/><br/>Nous avons présenté votre offre du <b>{date}</b> à <b>{borrower}</b> concernant le financement de son projet sis <b>{address}</b>.\",\n  \"Feedback.introduction.twoBorrowers\": \"<br/><br/>Nous avons présenté votre offre du <b>{date}</b> à <b>{borrower1}</b> et <b>{borrower2}</b> concernant le financement de leur projet sis <b>{address}</b>.\",\n  \"Feedback.greetings\": \"Bonjour {contactName},\",\n  \"Forms.wantedLoan\": \"Prêt hypothécaire souhaité\",\n  \"Forms.income\": \"Revenus\",\n  \"Forms.operator.===\": \"Égale à\",\n  \"Forms.operator.>\": \"Plus grand que\",\n  \"Forms.operator.>=\": \"Plus grand, ou égale à\",\n  \"Forms.operator.<\": \"Plus petit que\",\n  \"Forms.operator.<=\": \"Plus petit, ou égale à\",\n  \"Forms.rules\": \"Règles\",\n  \"Forms.variable\": \"Variable\",\n  \"Forms.variable.propertyValue\": \"Valeur du bien immobilier\",\n  \"Forms.variable.insideArea\": \"Surface habitable\",\n  \"Forms.variable.income\": \"Revenus\",\n  \"Forms.variable.bankFortune\": \"Cash et Titres\",\n  \"Forms.variable.residenceType\": \"Type de résidence\",\n  \"Forms.variable.canton\": \"Canton du bien immobilier\",\n  \"Forms.variable.borrowRatio\": \"Taux d'avance\",\n  \"Forms.variable.wantedLoan\": \"Prêt hypothécaire\",\n  \"Forms.rules.operator\": \"Maths\",\n  \"Forms.rules.value\": \"Valeur\",\n  \"Forms.allowPledge\": \"Autoriser nantissement LPP\",\n  \"Forms.amortizationYears.placeholder\": \"15\",\n  \"Forms.bonusConsideration\": \"Considération des bonus\",\n  \"Forms.bonusHistoryToConsider\": \"Combien de bonus passés à pondérer\",\n  \"Forms.bonusHistoryToConsider.placeholder\": \"3\",\n  \"Forms.companyIncomeConsideration\": \"Considération des bénéfices d'une société\",\n  \"Forms.companyIncomeHistoryToConsider\": \"Combien de BN de société passés à pondérer\",\n  \"Forms.companyIncomeHistoryToConsider.placeholder\": \"3\",\n  \"Forms.dividendsConsideration\": \"Considération des dividendes\",\n  \"Forms.dividendsHistoryToConsider\": \"Combien de dividendes passés à pondérer\",\n  \"Forms.dividendsHistoryToConsider.placeholder\": \"1\",\n  \"Forms.incomeConsiderationType\": \"Considération des revenus\",\n  \"Forms.incomeConsiderationType.placeholder\": \"Par défaut\",\n  \"Forms.incomeConsiderationType.GROSS\": \"Bruts\",\n  \"Forms.incomeConsiderationType.NET\": \"Nets\",\n  \"Forms.investmentIncomeConsideration\": \"Considération des revenus mobiliers\",\n  \"Forms.expensesSubtractFromIncome\": \"Charges à soustraire aux revenus\",\n  \"Forms.expensesSubtractFromIncome.placeholder\": \"Par défaut\",\n  \"Forms.expensesSubtractFromIncome.ADD_TO_EXPENSES\": \"Ajouter aux charges\",\n  \"Forms.expensesSubtractFromIncome.SUBTRACT_FROM_INCOME\": \"Soustraire aux revenus\",\n  \"Forms.realEstateIncomeConsiderationType\": \"Comment considérer les revenus immobiliers\",\n  \"Forms.realEstateIncomeConsiderationType.placeholder\": \"Par défaut\",\n  \"Forms.realEstateIncomeConsiderationType.ADD_TO_INCOME\": \"Ajouter aux revenus\",\n  \"Forms.realEstateIncomeConsiderationType.SUBTRACT_FROM_EXPENSES\": \"Soustraire aux charges\",\n  \"LenderRulesEditorTitle.all\": \"Tous les dossiers\",\n  \"Forms.comments\": \"Commentaires\",\n  \"Forms.comments.placeholder\": \"Pas de financements au delà de Nyon - N'accepte pas les prêts de tiers\",\n  \"Forms.maxBorrowRatio\": \"Taux d'avance max\",\n  \"Forms.maxIncomeRatio\": \"Taux d'effort max\",\n  \"Forms.maxIncomeRatioTight\": \"Taux d'avance max, cas par cas\",\n  \"Forms.minCash\": \"Taux de fonds propres non-LPP min\",\n  \"Forms.theoreticalInterestRate\": \"Taux d'intérêt théorique\",\n  \"Forms.theoreticalMaintenanceRate\": \"Frais d'entretien théorique\",\n  \"general.and\": \"et\",\n  \"general.or\": \"ou\",\n  \"OrganisationTabs.lenderRules\": \"Critères d'octroi\",\n  \"InterestsChart.interestLibor.average\": \"Libor moyen\",\n  \"InterestsChart.interestLibor.range\": \"Libor étendue\",\n  \"InterestsChart.interest1.average\": \"1 an moyen\",\n  \"InterestsChart.interest1.range\": \"1 an étendue\",\n  \"InterestsChart.interest2.average\": \"2 ans moyen\",\n  \"InterestsChart.interest2.range\": \"2 ans étendue\",\n  \"InterestsChart.interest5.average\": \"5 ans moyen\",\n  \"InterestsChart.interest5.range\": \"5 ans étendue\",\n  \"InterestsChart.interest10.average\": \"10 ans moyen\",\n  \"InterestsChart.interest10.range\": \"10 ans étendue\",\n  \"InterestsChart.interest15.average\": \"15 ans moyen\",\n  \"InterestsChart.interest15.range\": \"15 ans étendue\",\n  \"InterestsChart.interest20.average\": \"20 ans moyen\",\n  \"InterestsChart.interest20.range\": \"20 ans étendue\",\n  \"InterestsChart.interest25.average\": \"25 ans moyen\",\n  \"InterestsChart.interest25.range\": \"25 ans étendue\",\n  \"Forms.tags.LBO\": \"LBO\",\n  \"PDF.projectInfos.property.promotionNameData\": \"Promotion {name}\",\n  \"PDF.projectInfos.property.promotionName\": \"Promotion immobilière\",\n  \"FinancingOffers.showAll\": \"Afficher toutes les offres\",\n  \"NotaryAdder.suggestNotary\": \"Nous pouvons vous suggérer {name} pour le canton de {canton}.\",\n  \"Forms.alreadyHaveNotary\": \"Avez-vous déjà un notaire?\",\n  \"Forms.alreadyHaveNotary.yes\": \"Oui\",\n  \"Forms.alreadyHaveNotary.no\": \"Non, suggérez-m'en un\",\n  \"NotaryAdder.buttonLabel\": \"Ajouter un notaire\",\n  \"general.perYear\": \"/an\",\n  \"Irs10y.name.average\": \"Taux moyen\",\n  \"Irs10y.name.range\": \"Étendue\",\n  \"Forms.tags\": \"Tags\",\n  \"Forms.tags.CH_PREMIUM\": \"CH - Premium\",\n  \"Forms.tags.CH_RETAIL\": \"CH - Retail\",\n  \"Forms.tags.FR_PREMIUM\": \"FR - Premium\",\n  \"Forms.tags.FR_RETAIL\": \"FR - Retail\",\n  \"Forms.tags.YACHTING\": \"Yachting\",\n  \"Forms.tags.HELICOPTERS_LEASING\": \"Leasing hélicoptères\",\n  \"Forms.withCounterparts\": \"Ceci est une offre avec contreparties\",\n  \"SingleContactPage.offers\": \"Offres\",\n  \"Forms.name.placeholder\": \"Jean Dupont\",\n  \"Forms.title.placeholder\": \"Notaire\",\n  \"PromotionPage.promotionLotValueDescription\": \"Veuillez ajouter un prix d'achat - OU - la valeur du terrain + le montant de la construction + la mise en valeur. Si vous ajoutez les 2, le prix d'achat précèdera les autres montants qui auraient été additionnés.\",\n  \"Forms.landValue\": \"Valeur du terrain\",\n  \"Forms.landValue.placeholder\": \"CHF 500 000\",\n  \"Forms.constructionValue\": \"Montant de la construction\",\n  \"Forms.constructionValue.placeholder\": \"CHF 500 000\",\n  \"Forms.additionalMargin\": \"Mise en valeur\",\n  \"Forms.additionalMargin.placeholder\": \"CHF 100 000\",\n  \"Forms.feedback.placeholder\": \"Bonjour M. Dubois, ...\",\n  \"offer.feedback\": \"Feedback\",\n  \"emails.SEND_FEEDBACK_TO_LENDER.TITLE\": \"Feedback client sur l'offre de {organisationName} du {date}\",\n  \"emails.SEND_FEEDBACK_TO_LENDER.SUBJECT\": \"e-Potek - {loanName} - Feedback client sur l'offre du {date}\",\n  \"offer.createdAt\": \"Date d'ajout\",\n  \"FinancingProjectFees.noCanton\": \"Ajoutez un code postal sur ce bien immobilier pour que nous puissions calculer les frais de notaire.\",\n  \"AccountPage.changePassword\": \"Changer mot de passe\",\n  \"errors.sameName.title\": \"Pas de noms identiques\",\n  \"errors.sameName.description\": \"Vous ne pouvez pas ajouter 2 fichiers avec le même nom.\",\n  \"collections.organisations\": \"Organisations\",\n  \"Forms.fees.placeholder\": \"CHF 1 000\",\n  \"Forms.epotekFees.placeholder\": \"CHF 1 000\",\n  \"Forms.conditions.placeholder\": \"Ouvrir un compte courant\",\n  \"Forms.counterparts.placeholder\": \"Ouvrir un compte épargne, contracter une assurance voiture\",\n  \"Forms.thirdPartyFortune.placeholder\": \"CHF 100 000\",\n  \"Forms.otherFortune.value.placeholder\": \"CHF 100 000\",\n  \"Forms.gardenArea.placeholder\": \"50\",\n  \"Forms.investmentRent.placeholder\": \"CHF 2 000\",\n  \"Forms.contacts.name.placeholder\": \"Marie Rochat\",\n  \"Forms.contacts.title.placeholder\": \"Architecte\",\n  \"Forms.contacts.email.placeholder\": \"nom@mail.com\",\n  \"Forms.contacts.email\": \"Email\",\n  \"Forms.contacts.address.email\": \"Email\",\n  \"Forms.emails.address.placeholder\": \"Email\",\n  \"Forms.contacts.phoneNumber.placeholder\": \"079 000 00 00\",\n  \"Forms.phoneNumber.placeholder\": \"079 000 00 00\",\n  \"Forms.phoneNumbers.placeholder\": \"079 000 00 00\",\n  \"Forms.email.placeholder\": \"nom@mail.com\",\n  \"Forms.dueAt\": \"Échéance\",\n  \"Forms.feedback\": \"Feedback\",\n  \"Forms.hasFlatDiscount\": \"Offre avec rabais sur les taux\",\n  \"Forms.flatDiscount\": \"Rabais\",\n  \"Forms.lender\": \"Prêteur\",\n  \"Forms.contact\": \"Contact\",\n  \"Forms.features\": \"Fonctionnalités\",\n  \"Forms.features.LENDER\": \"Prêteur\",\n  \"OrganisationTabs.contacts\": \"Contacts\",\n  \"OrganisationTabs.offers\": \"Offres\",\n  \"Forms.organisationId\": \"Organisation\",\n  \"Forms.contactId\": \"Contact\",\n  \"Forms.status.TO_BE_CONTACTED\": \"À contacter\",\n  \"Forms.status.CONTACTED\": \"Contacté\",\n  \"Forms.status.OFFER_RECEIVED\": \"Offre reçue\",\n  \"Forms.status.TO_EXCLUDE\": \"À exclure\",\n  \"LoanTabs.lenders\": \"Prêteurs\",\n  \"Lenders.insert\": \"Nouveau prêteur\",\n  \"Lenders.status\": \"Statut\",\n  \"Forms.organisationName\": \"Organisation\",\n  \"Forms.organisations\": \"Organisations\",\n  \"Forms.contact.title\": \"Titre\",\n  \"Forms.useSameAddress\": \"Utiliser la même adresse\",\n  \"Forms.emails\": \"Emails\",\n  \"Contacts.insert\": \"Nouveau contact\",\n  \"Contacts.modify\": \"Modifier\",\n  \"Recap.estimatedFees\": \"Frais de notaire estimés\",\n  \"Recap.buyersContract\": \"Acte d'achat de CHF {value}\",\n  \"Recap.mortgageNote\": \"Cédule hypothécaire de CHF {value}\",\n  \"Recap.propertyRegistrationTax\": \"Droits d'enregistrement\",\n  \"Recap.mortgageNoteRegistrationTax\": \"Droits d'enregistrement\",\n  \"Recap.landRegistryPropertyTax\": \"Émoluments du registre foncier\",\n  \"Recap.landRegistryMortgageNoteTax\": \"Émoluments du registre foncier\",\n  \"Recap.notaryIncomeFromProperty\": \"Émoluments du notaire (TVA incluse)\",\n  \"Recap.notaryIncomeFromMortgageNote\": \"Émoluments du notaire (TVA incluse)\",\n  \"Recap.buyersContractAdditionalFees\": \"Frais additionels\",\n  \"Recap.mortgageNoteAdditionalFees\": \"Frais additionels\",\n  \"Recap.propertyConstructionTax\": \"Droits d'enregistrement sur le contrat d'entreprise\",\n  \"Recap.total\": \"Total\",\n  \"Recap.subTotal\": \"Sous-total\",\n  \"Recap.notaryFeesRatio\": \"% du coût du projet\",\n  \"Recap.propertyRegistrationTaxDeductions\": \"Déductions sur les droits d'enregistrement\",\n  \"Recap.mortgageNoteRegistrationTaxDeductions\": \"Déductions sur les droits d'enregistrement\",\n  \"Recap.mortgageNoteDeductions\": \"Déductions sur la cédule\",\n  \"FinancingProjectFees.description\": \"Les frais de notaire indiqués sont calculés pour le canton de {canton}, et sont une estimation qui inclut une marge variable. Parfois il faut encore ajouter des honoraires, et/ou d'autres frais au cas par cas.\",\n  \"FinancingProjectFees.descriptionNoDetail\": \"Ces frais de notaire sont estimés de façon simple pour le canton de {canton}. Ils représentent 5% du prix d'achat, et peuvent être faux pour certains cantons. Nous vous recommandons d'entrer une valeur vous-même.\",\n  \"Forms.canton.AG\": \"Aargau\",\n  \"Forms.canton.AR\": \"Appenzell Ausserrhoden\",\n  \"Forms.canton.AI\": \"Appenzell Innerrhoden\",\n  \"Forms.canton.BL\": \"Basel-Land\",\n  \"Forms.canton.BS\": \"Basel-Stadt\",\n  \"Forms.canton.BE\": \"Bern\",\n  \"Forms.canton.FR\": \"Fribourg\",\n  \"Forms.canton.GE\": \"Genève\",\n  \"Forms.canton.GL\": \"Glarus\",\n  \"Forms.canton.GR\": \"Graubünden\",\n  \"Forms.canton.JU\": \"Jura\",\n  \"Forms.canton.LU\": \"Luzern\",\n  \"Forms.canton.NE\": \"Neuchâtel\",\n  \"Forms.canton.NW\": \"Nidwalden\",\n  \"Forms.canton.OW\": \"Obwalden\",\n  \"Forms.canton.SG\": \"St. Gallen\",\n  \"Forms.canton.SH\": \"Schaffhausen\",\n  \"Forms.canton.SZ\": \"Schwyz\",\n  \"Forms.canton.SO\": \"Solothurn\",\n  \"Forms.canton.TG\": \"Thurgau\",\n  \"Forms.canton.TI\": \"Ticino\",\n  \"Forms.canton.UR\": \"Uri\",\n  \"Forms.canton.VD\": \"Vaud\",\n  \"Forms.canton.VS\": \"Valais\",\n  \"Forms.canton.ZG\": \"Zug\",\n  \"Forms.canton.ZH\": \"Zürich\",\n  \"Forms.canton.LI\": \"Liechtenstein\",\n  \"FinancingMortgageNotesPicker.addMortgageNote\": \"Ajouter cédule\",\n  \"FinancingMortgageNotesPicker.emptyPropertyMortgageNotes\": \"Ajoutez des cédules sur ce bien immobilier pour les faire apparaître ici.\",\n  \"FinancingMortgageNotesPicker.noAvailableMortgageNotes\": \"Ajoutez des cédules du canton de {canton} sur un emprunteur pour pouvoir les choisir ici.\",\n  \"FinancingMortgageNotesPicker.mortgageNoteToCreate\": \"Cédule à constituer\",\n  \"FinancingMortgageNotesPicker.dialogTitle\": \"Cédules hypothécaires\",\n  \"FinancingMortgageNotesPicker.propertyMortgageNotes\": \"Cédules existantes\",\n  \"FinancingMortgageNotesPicker.borrowerMortgageNotes\": \"Autres cédules disponibles\",\n  \"FinancingMortgageNotesPicker.noProperty\": \"Choisissez un bien immobilier sur ce plan financier avant d'ajouter des cédules.\",\n  \"FinancingMortgageNotesPicker.noCanton\": \"Entrez le code postal du bien immobilier pour déterminer le canton duquel vos cédules vont provenir.\",\n  \"FinancingMortgageNotesPicker.empty\": \"Pas de cédules\",\n  \"FinancingMortgageNotesPicker.title\": \"{count, plural, one {Cédule existante} other {Cédules existantes}}\",\n  \"Financing.mortgageNoteIds\": \"Cédules hypothécaires\",\n  \"MortgageNotesForm.borrowerDescription\": \"Ajoutez ici les cédules hypothécaires disponibles, que vous pourriez réutiliser pour votre nouveau projet.\",\n  \"MortgageNotesForm.propertyDescription\": \"Ajoutez ici les cédule(s) existante(s) sur ce bien immobilier.\",\n  \"Forms.rank\": \"Rang\",\n  \"Forms.rank.placeholder\": \"1\",\n  \"Forms.canton\": \"Canton\",\n  \"Forms.type.PAPER\": \"En papier\",\n  \"Forms.type.REGISTRAR\": \"De registre\",\n  \"Forms.category.BEARER\": \"Au porteur\",\n  \"Forms.category.REGISTERED\": \"Nominative\",\n  \"general.mortgageNotes\": \"Cédules hypothécaires\",\n  \"collections.contacts\": \"Contacts\",\n  \"PromotionsTable.createdAt\": \"Créé le\",\n  \"Forms.promotionPage.residenceTypeSetter.text\": \"Choisissez le type de résidence pour afficher les lots.\",\n  \"general.refinancing\": \"Refinancement\",\n  \"Forms.loanTranches.interest1\": \"1 an\",\n  \"Forms.loanTranches.interest10\": \"10 ans\",\n  \"Forms.loanTranches.interest15\": \"15 ans\",\n  \"Forms.loanTranches.interest2\": \"2 ans\",\n  \"Forms.loanTranches.interest20\": \"20 ans\",\n  \"Forms.loanTranches.interest25\": \"25 ans\",\n  \"Forms.loanTranches.interest5\": \"5 ans\",\n  \"Forms.loanTranches.interestLibor\": \"Libor\",\n  \"Forms.previousLoanTranches.rate\": \"Taux\",\n  \"Forms.previousLoanTranches.rate.placeholder\": \"1.50%\",\n  \"Forms.mortgageNotes.rank\": \"Rang\",\n  \"Forms.mortgageNotes.rank.placeholder\": \"1\",\n  \"Forms.mortgageNotes.type\": \"Type\",\n  \"Forms.mortgageNotes.PAPER\": \"Papier\",\n  \"Forms.mortgageNotes.REGISTRAR\": \"De registre\",\n  \"Forms.mortgageNotes.category\": \"Catégorie\",\n  \"Forms.mortgageNotes.BEARER\": \"Au porteur\",\n  \"Forms.mortgageNotes.REGISTERED\": \"Nominative\",\n  \"DashboardProgressInfo.completeRefinancing\": \"Complétez les informations sur votre refinancement\",\n  \"RefinancingPage.pageTitle\": \"Votre hypothèque actuelle\",\n  \"Forms.previousLender\": \"Prêteur actuel\",\n  \"Forms.previousLender.placeholder\": \"BCGE\",\n  \"Forms.previousLoanTranches\": \"Tranches de taux actuelles\",\n  \"Forms.previousLoanTranches.value\": \"Montant de la tranche\",\n  \"Forms.loanTranches.type\": \"Durée\",\n  \"Forms.previousLoanTranches.dueDate\": \"Échéance\",\n  \"Forms.mortgageNotes\": \"Cédules hypothécaires\",\n  \"Forms.mortgageNotes.value\": \"Montant de la cédule\",\n  \"Forms.mortgageNotes.value.placeholder\": \"CHF 100 000\",\n  \"LoanTabs.refinancing\": \"Refinancement\",\n  \"RefinancingPage.title\": \"Refinancement\",\n  \"Forms.purchaseType\": \"Type de prêt\",\n  \"Forms.purchaseType.CONSTRUCTION\": \"Construction\",\n  \"BorrowerReuser.buttonLabel\": \"Réutiliser profil emprunteur\",\n  \"BorrowerReuser.dialogTitle\": \"Réutiliser profil emprunteur\",\n  \"BorrowerReuser.dialogDescription\": \"Les données personnelles, financières et les documents seront tous partagés entre vos différents dossiers.\",\n  \"BorrowerReuser.dialogDescriptionLastLoan\": \"Les données et documents de l'emprunteur actuel seront supprimées.{verticalSpace}Les données personnelles, financières et les documents seront tous partagés entre vos différents dossiers.\",\n  \"Irs10y.rate\": \"Taux\",\n  \"Irs10y.name\": \"IRS 10Y\",\n  \"Irs10y.insert\": \"Ajouter un taux\",\n  \"Forms.rate\": \"Taux\",\n  \"Forms.date\": \"Date\",\n  \"InterestRates.insert\": \"Ajouter des taux\",\n  \"InterestRates.remove\": \"Supprimer\",\n  \"Forms.trend.UP\": \"Hausse\",\n  \"Forms.trend.DOWN\": \"Baisse\",\n  \"Forms.trend.FLAT\": \"Constant\",\n  \"Forms.assignedEmployeeId\": \"Utilisateur assigné\",\n  \"Forms.assignedEmployeeId.placeholder\": \"Non assigné\",\n  \"TopNavDropdown.home\": \"Home\",\n  \"TopNavDropdown.pro\": \"Interface Pro\",\n  \"PromotionPage.lots.solvency\": \"Solvabilité\",\n  \"Forms.solvency\": \"Solvabilité\",\n  \"Forms.solvency.SOLVENT\": \"Solvable\",\n  \"Forms.solvency.INSOLVENT\": \"Non solvable\",\n  \"Forms.solvency.UNDETERMINED\": \"À déterminer\",\n  \"PromotionLotLoansTable.actions\": \"Actions\",\n  \"PDF.borrowersInfo.address\": \"Adresse\",\n  \"PDF.projectInfos.structure.totalIncome\": \"Revenus considérés\",\n  \"PDF.projectInfos.structure.theoreticalCharges\": \"Charges théoriques\",\n  \"PDF.projectInfos.structure.totalTheoreticalCharges\": \"Charges théoriques totales\",\n  \"PDF.borrowersInfos.category.general\": \"Informations générales\",\n  \"PDF.borrowersInfos.category.financialSituation\": \"Situation financière\",\n  \"PDF.borrowersInfos.name\": \"Prénom, Nom\",\n  \"PDF.borrowersInfos.address\": \"Adresse\",\n  \"Forms.title\": \"Titre\",\n  \"files.PROPERTY_FUTURE_WORKS\": \"Travaux envisagés\",\n  \"files.PROPERTY_FUTURE_WORKS.tooltip\": \"Devis et descriptifs des travaux\",\n  \"files.PROPERTY_MINERGIE_CERTIFICATE\": \"Certificat énergétique\",\n  \"files.WITHDRAWAL_JUSTIFICATION\": \"Attestation de retrait\",\n  \"files.WITHDRAWAL_JUSTIFICATION.tooltip\": \"Simulation après prélèvement du capital LPP\",\n  \"files.LEGITIMATION_CARD\": \"Carte de Légitimation\",\n  \"files.LEGITIMATION_CARD.tooltip\": \"Carte de Légitimation à jour\",\n  \"Forms.step\": \"Étape du dossier\",\n  \"files.TAX_STATEMENT\": \"Avis de taxation\",\n  \"files.OWN_FUND_JUSTIFICATION\": \"Justificatifs des fonds propres\",\n  \"files.OWN_FUND_JUSTIFICATION.tooltip\": \"Extrait des comptes justifiant la fortune et les fonds propres, ou document similaire\",\n  \"files.CURRENT_MORTGAGE_INTERESTS_STATEMENT\": \"Dernier décompte d'intérêts hypothécaires\",\n  \"files.OWN_COMPANY_COMMERCIAL_REGISTER\": \"Extrait du registre du commerce\",\n  \"files.PURCHASE_CONTRACT\": \"Projet ou acte de vente\",\n  \"files.PURCHASE_CONTRACT.tooltip\": \"Réservation, promesse ou acte de vente\",\n  \"files.PROPERTY_WORKS_QUOTE\": \"Historique des travaux\",\n  \"files.PROPERTY_WORKS_QUOTE.tooltip\": \"Historique des grandes rénovations du logement\",\n  \"files.INVESTMENT_PROPERTY_RENTAL_STATEMENT\": \"Revenus locatifs\",\n  \"files.INVESTMENT_PROPERTY_RENTAL_STATEMENT.tooltip\": \"Etats locatifs de la régie, à jour, ou baux à loyer en force\",\n  \"files.INVESTEMENT_PROPERTY_SERVICE_CHARGE_SETTLEMENT\": \"Charges immeubles\",\n  \"files.INVESTEMENT_PROPERTY_SERVICE_CHARGE_SETTLEMENT.tooltip\": \"Compte de gestion des 3 dernières années\",\n  \"files.INVESTEMENT_PROPERTY_WORKS_HISTORY\": \"Historique des travaux des 3 dernières années\",\n  \"files.INVESTMENT_PROPERTY_CONDOMINIUM_OWNERSHIP_DIVISION_REGISTER\": \"Cahier de répartition\",\n  \"files.INVESTMENT_PROPERTY_CONDOMINIUM_REGULATION\": \"Règlement\",\n  \"files.SHARE_WORKS\": \"Descriptif des travaux\",\n  \"files.SHARE_BUILDING_PERMIT\": \"Autorisation de construire\",\n  \"files.SHARE_FINANCIAL_PLAN\": \"Plan financier\",\n  \"files.SHARE_GC_QUOTE_BY_BCC\": \"Chiffrage EG par CFC\",\n  \"files.SHARE_GC_CONTRACT\": \"Contrat d'entreprise générale\",\n  \"files.SHARE_PLANS\": \"Plans\",\n  \"files.SHARE_EASEMENTS\": \"Servitudes\",\n  \"files.SHARE_INSURANCE_CERTIFICATE\": \"Police d'assurance\",\n  \"files.OTHER_FORTUNE_JUSTIFICATION\": \"Autres éléments de fortune\",\n  \"files.OTHER_FORTUNE_JUSTIFICATION.tooltip\": \"Documents attestant d'autres éléments de fortune à considérer\",\n  \"files.category.PERSONAL_DOCUMENTS\": \"Documents personnels\",\n  \"files.category.INCOMES_AND_EXPENSES\": \"Charges et revenus\",\n  \"files.category.FORTUNE_AND_OWN_FUNDS\": \"Fortune et fonds propres\",\n  \"files.category.RETIREMENT\": \"Prévoyance\",\n  \"files.category.OTHER\": \"Autre\",\n  \"files.category.HOUSING\": \"Logement\",\n  \"files.category.SHARE\": \"Promotion quote-part\",\n  \"FinancingOffers.conditions\": \"Conditions de l'offre\",\n  \"FinancingOffers.fees\": \"Frais\",\n  \"offer.fees\": \"Frais de dossier\",\n  \"Forms.fees\": \"Frais de dossier\",\n  \"offer.epotekFees\": \"Frais e-Potek\",\n  \"Forms.epotekFees\": \"Frais e-Potek\",\n  \"general.total\": \"Total\",\n  \"Forms.yearlyExpenses.short\": \"Charges d'entretien\",\n  \"offer.averagedInterestRate\": \"Votre taux\",\n  \"FinancingResultErrors.invalidInterestRates\": \"Les tranches de taux choisies n'ont pas de taux disponibles\",\n  \"FinancingOffers.invalidRate\": \"Cette offre n'a pas le taux {rate}\",\n  \"FinancingOffers.interests\": \"Intérêts\",\n  \"offer.amortizationGoal\": \"Objectif d'amortissement / 1er rang\",\n  \"Forms.amortizationGoal\": \"Objectif d'amortissement / 1er rang\",\n  \"offer.amortizationYears\": \"Durée d'amortissement\",\n  \"offer.amortizationYears.placeholder\": \"15\",\n  \"Forms.amortizationYears\": \"Durée d'amortissement\",\n  \"general.choose\": \"Choisir\",\n  \"offer.interests\": \"Taux\",\n  \"Forms.enableOffers\": \"Activer offres\",\n  \"FinancingOffers.amortization\": \"Amortissement\",\n  \"FinancingOffersHeader.empty\": \"Choisissez..\",\n  \"FinancingOffers.title\": \"PRÊTEURS\",\n  \"Financing.offerId\": \"Choix de l'offre\",\n  \"OfferModifier.dialogTitle\": \"Modifier offre\",\n  \"Forms.type.BANK\": \"Banque\",\n  \"Forms.type.INSURANCE\": \"Assurance\",\n  \"Forms.type.PRIVATE_BANK\": \"Banque Privée\",\n  \"LoanTabs.promotion\": \"Promotions\",\n  \"PromotionLotLoansTable.date\": \"Date du choix\",\n  \"Recap.thirdPartyFortune\": \"Prêt de tiers\",\n  \"Recap.netRealEstate\": \"Fortune immobilière nette\",\n  \"PromotionLotLoansTable.email\": \"Email\",\n  \"PromotionPageHeader.partners\": \"Partenaires\",\n  \"PromotionPageHeader.contacts\": \"{multipleContacts, select , true {Personnes} other {Personne}} de contact\",\n  \"Forms.ownFunds\": \"Fonds propres\",\n  \"Forms.structure\": \"Plan financier\",\n  \"Forms.status.SOLD_TO_ME\": \"Vendu à moi\",\n  \"Forms.status.BOOKED_FOR_ME\": \"Réservé pour moi\",\n  \"FinancingPropertyPicker.promotionOption\": \"Promotion: {name}\",\n  \"PromotionOptionDetail.priority\": \"{priority, plural, =0 {0} one {1er} other {#ème}} Choix\",\n  \"Forms.phoneNumbers\": \"Numéros de téléphone\",\n  \"Forms.assignedEmployee\": \"Conseiller e-Potek\",\n  \"Forms.investmentRent\": \"Loyer de rendement\",\n  \"PromotionLotLoansTable.createdAt\": \"Ajouté\",\n  \"PromotionUsersPage.title\": \"Clients de la promotion\",\n  \"PromotionPage.users\": \"Voir tous les clients\",\n  \"ProTopNav.logout\": \"Déconnexion\",\n  \"Forms.verificationStatus\": \"Vérification e-Potek\",\n  \"Forms.verificationStatus.NONE\": \"Pas demandée\",\n  \"Forms.verificationStatus.REQUESTED\": \"Vérification demandée\",\n  \"Forms.verificationStatus.OK\": \"Validé\",\n  \"Forms.verificationStatus.ERROR\": \"Non valide\",\n  \"VerificationRequester.NONE\": \"Demander\",\n  \"VerificationRequester.ERROR\": \"Problème, redemander\",\n  \"VerificationRequester.REQUESTED\": \"En cours...\",\n  \"Forms.contacts\": \"Personnes de contact pour les clients\",\n  \"Forms.city.placeholder\": \"Genève\",\n  \"Forms.isForeignAddress\": \"Addresse à l'étranger\",\n  \"DashboardProgressInfo.chooseLots\": \"Choisissez vos lots dans la promotion\",\n  \"DashboardProgressInfo.verification\": \"Obtenez votre confirmation de financement hypothécaire\",\n  \"emails.INVITE_USER_TO_PROMOTION.BODY\": \"{invitedBy} a identifié que vous êtes intéressé(e) par la promotion {promotionName}, et vous a invité sur e-Potek.{verticalSpace}e-Potek SA a été mandatée pour la gestion de la relation entre la banque qui a mis en place le crédit de construction de la Promotion Immobilière et les Futurs Propriétaires dont vous faites potentiellement partie.{verticalSpace}Votre interface personnelle vous permet d’obtenir en quelques clics une attestation de financement hypothécaire et vous permettra ainsi de valider votre intérêt pour lot de votre choix.{verticalSpace}Je suis votre conseiller en prêt hypothécaire, et je suis là pour vous accompagner tout au long de votre projet. Je répondrai à toutes vos questions relatives au financement de votre projet.{verticalSpace}Vous pouvez me contacter à tout instant en cliquant sur l'icône (ICON) en bas à droite de votre écran.{verticalSpace}Dans un deuxième temps, lorsque le lot de votre choix vous sera attribué je vous accompagnerai pour préparer un dossier de demande de prêt irréprochable afin de mettre toutes les chances d’obtenir les meilleurs conditions de la part de la Banque.{verticalSpace}{assignedEmployeeName}\",\n  \"emails.INVITE_USER_TO_PROMOTION.CTA\": \"Continuer\",\n  \"emails.INVITE_USER_TO_PROMOTION.from\": \"{promotionName}\",\n  \"emails.INVITE_USER_TO_PROMOTION.SUBJECT\": \"Promotion immobilière {promotionName}\",\n  \"emails.INVITE_USER_TO_PROMOTION.TITLE\": \"Nous vous remercions de votre intérêt pour la promotion {promotionName}\",\n  \"emails.INVITE_USER_TO_PROPERTY.BODY\": \"Vous avez été invité par {proName} {multiple, select , true {aux biens immobiliers} other {au bien immobilier}} {address} sur la plateforme e-Potek. Vous pouvez dès à présent vous connecter afin de monter un dossier de recherche de financement hypothécaire, et comparer tous les prêteurs du marché en quelques minutes.\",\n  \"emails.INVITE_USER_TO_PROPERTY.CTA\": \"Se connecter\",\n  \"emails.INVITE_USER_TO_PROPERTY.from\": \"e-Potek\",\n  \"emails.INVITE_USER_TO_PROPERTY.SUBJECT\": \"e-Potek - {address}\",\n  \"emails.INVITE_USER_TO_PROPERTY.TITLE\": \"{address}\",\n  \"Forms.promotionOptions.custom\": \"Souhaits particuliers\",\n  \"Forms.promotionOptions.custom.placeholder\": \"Parkings supplémentaires, lots adjacents, etc.\",\n  \"AppPromotionLotPage.subtitle\": \"Promotion {promotionName} - {value}\",\n  \"collections.promotionOptions\": \"Mes lots\",\n  \"PromotionPage.lots.custom\": \"Souhaits particuliers\",\n  \"PromotionPage.lots.changePriority\": \"Changer priorité\",\n  \"PromotionPage.lots.interested\": \"Intéressé\",\n  \"PromotionPage.lots.priorityOrder\": \"Priorité\",\n  \"PromotionLotLoansTable.priorityOrder\": \"Priorité\",\n  \"PromotionLotAttributer.sold\": \"Vendu\",\n  \"PromotionLotAttributer.book\": \"Réserver\",\n  \"PromotionLotAttributer.sell\": \"Confirmer vente\",\n  \"PromotionLotAttributer.cancelBooking\": \"Annuler réservation\",\n  \"PromotionLotLoansTable.attribute\": \"Attribution\",\n  \"PromotionPage.lots.attributedTo\": \"Attribué à\",\n  \"PromotionLotLoansTable.name\": \"Nom\",\n  \"PromotionLotLoansTable.phone\": \"Téléphone\",\n  \"PromotionLotLoansTable.status\": \"Niveau d'intérêt\",\n  \"PromotionLotLoansTable.custom\": \"Souhaits particuliers\",\n  \"PromotionLotLoansTable.loanProgress\": \"Progrès\",\n  \"PromotionLotLoansTable.solvency\": \"Solvabilité\",\n  \"PromotionLotLoansTable.title\": \"Acheteurs intéressés\",\n  \"PromotionLotPage.manageLot\": \"Lots annexes\",\n  \"PromotionLotPage.modifyPromotionLot\": \"Modifier le lot\",\n  \"general.back\": \"Retour\",\n  \"PromotionPage.managePropertyDocuments.description\": \"Donnez des noms clairs à vos documents avant de les uploader\",\n  \"PromotionPage.managePropertyDocuments\": \"Gérer documents du lot {name}\",\n  \"files.promotionPropertyDocuments\": \"Documents du lot\",\n  \"PromotionPage.lots.documents\": \"Documents\",\n  \"Forms.status.AVAILABLE\": \"Disponible\",\n  \"Forms.status.NOT_AVAILABLE\": \"Non disponible\",\n  \"Forms.status.BOOKED\": \"Réservé\",\n  \"Forms.status.suffix.forMe\": \" pour moi\",\n  \"Forms.status.suffix.toMe\": \" à moi\",\n  \"PromotionLotsManager.empty\": \"Pas de lots annexes\",\n  \"Forms.type\": \"Type\",\n  \"Forms.description\": \"Déscription\",\n  \"Forms.description.placeholder\": \"Ajoutez une déscription...\",\n  \"Forms.type.BASEMENT\": \"Cave\",\n  \"Forms.type.PARKING_MOTORBIKE\": \"Parking moto\",\n  \"Forms.type.PARKING_CAR\": \"Parking\",\n  \"Forms.type.PARKING_IN_A_ROW\": \"Parking en enfilade\",\n  \"Forms.type.PARKING_DISABLED\": \"Parking handicapé\",\n  \"PromotionPage.addProperty\": \"Ajouter lot principal\",\n  \"PromotionPage.addLot\": \"Ajouter lot annexe\",\n  \"Forms.name\": \"Nom\",\n  \"Forms.category\": \"Catégorie\",\n  \"Forms.category.USER\": \"Par l'utilisateur\",\n  \"Forms.category.PRO\": \"Par un pro\",\n  \"Forms.category.PROMOTION\": \"Promotion immobilière\",\n  \"Forms.status.FOR_SALE\": \"En vente\",\n  \"Forms.status.SOLD\": \"Vendu\",\n  \"Forms.type.SHARE\": \"Quote-part terrain\",\n  \"Forms.type.CREDIT\": \"Crédit promoteur\",\n  \"collections.lots\": \"Lots\",\n  \"files.promotionDocuments\": \"Documents de la promotion\",\n  \"files.promotionImage\": \"Photo de couverture\",\n  \"files.logos\": \"Logos\",\n  \"Forms.gardenArea\": \"Surface du jardin en m2\",\n  \"PromotionPage.manageDocuments\": \"Gérer documents\",\n  \"PromotionPage.lots.name\": \"Nom\",\n  \"PromotionPage.lots.status\": \"Statut\",\n  \"PromotionPage.lots.lots\": \"Lots annexes\",\n  \"PromotionPage.lots.loans\": \"Intéressés\",\n  \"PromotionPage.lots.totalValue\": \"Prix\",\n  \"PromotionPage.AdditionalLotsTable\": \"Lots annexes\",\n  \"PromotionPage.AdditionalLotsTable.allocatedToLot\": \"Alloué au lot\",\n  \"PromotionPage.AdditionalLotsTable.hideTable\": \"Masquer les lots annexes\",\n  \"PromotionPage.AdditionalLotsTable.name\": \"Nom\",\n  \"PromotionPage.AdditionalLotsTable.nonAllocated\": \"Non alloué\",\n  \"PromotionPage.AdditionalLotsTable.showTable\": \"Afficher les lots annexes\",\n  \"PromotionPage.AdditionalLotsTable.status\": \"Statut\",\n  \"PromotionPage.AdditionalLotsTable.type\": \"Type\",\n  \"PromotionPage.AdditionalLotsTable.value\": \"Prix\",\n  \"PromotionPage.AdditionalLotsTable.description\": \"Description\",\n  \"PromotionPage.addCustomer\": \"Ajouter un client\",\n  \"PromotionPage.subtitle\": \"Promotion immobilière - {promotionLotCount} lots\",\n  \"Forms.status.PREPARATION\": \"Préparation\",\n  \"ProDashboardPage.title\": \"Dashboard\",\n  \"ProDashboardPage.promotions\": \"Promotions\",\n  \"NewPromotionPage.title\": \"Nouvelle promotion\",\n  \"PromotionsTable.name\": \"Nom\",\n  \"PromotionsTable.status\": \"Statut\",\n  \"PromotionsTable.lots\": \"Lots\",\n  \"PromotionsTable.available\": \"Disponible\",\n  \"PromotionsTable.booked\": \"Réservé\",\n  \"PromotionsTable.sold\": \"Vendu\",\n  \"PromotionsTable.loans\": \"Clients\",\n  \"ProDashboardPage.addProperty\": \"Ajouter bien immobilier\",\n  \"ProDashboardPage.addPromotion\": \"Ajouter promotion immobilière\",\n  \"ProTopNav.dev\": \"Dev\",\n  \"ProTopNav.dashboard\": \"Dashboard\",\n  \"ProTopNav.account\": \"Mon compte\",\n  \"Forms.purchaseType.ACQUISITION\": \"Acquisition\",\n  \"Forms.purchaseType.REFINANCING\": \"Refinancement\",\n  \"LoanSelector.name\": \"Dossier {name}\",\n  \"SinglePropertyPage.noDelete\": \"Vous ne pouvez pas supprimer votre dernier bien immobilier\",\n  \"Forms.status\": \"Statut\",\n  \"Forms.status.TEST\": \"Test\",\n  \"Forms.status.LEAD\": \"Prospect\",\n  \"Forms.status.ONGOING\": \"En cours\",\n  \"Forms.status.PENDING\": \"Pending\",\n  \"Forms.status.CANCELLED\": \"Annulé\",\n  \"Forms.status.CLOSING\": \"Closing\",\n  \"Forms.status.BILLING\": \"Facturation\",\n  \"Forms.status.FINALIZED\": \"Finalisé\",\n  \"Forms.status.FINISHED\": \"Terminé\",\n  \"Forms.status.OPEN\": \"En cours\",\n  \"Forms.status.UNSUCCESSFUL\": \"Sans suite\",\n  \"Recap.promotionLot\": \"Détails du lot\",\n  \"Recap.promotionLot.value\": \"Valeur\",\n  \"Recap.promotionLot.totalValue\": \"Total\",\n  \"FinancingOwnFundsPledgeWarning.description\": \"Attention, vous pouvez nantir CHF {maxPledge} au maximum.\",\n  \"UserAdder.sendEnrollmentEmail\": \"Envoyer email d'invitation immédiatement\",\n  \"UserAdder.assignedEmployeeId\": \"Assigner à\",\n  \"AdminLayout.title\": \"Admin\",\n  \"DashboardRecapFinance.emptyButton\": \"Plans financiers\",\n  \"FinancingCurrentOwnFunds.error\": \"Pas assez de {type}\",\n  \"FinancingOwnFundsPickerForm.remaining\": \"Restant: CHF {value}\",\n  \"Financing.ownFundsCompleter\": \"{current} / {required} alloués\",\n  \"Financing.ownFundsCompleterButton\": \"Ajuster\",\n  \"FinancingOwnFundsActions.modify\": \"Oui, modifier\",\n  \"FinancingOwnFundsPickerForm.warning\": \"Êtes-vous certain de disposer de CHF {value} en {type} sur {name}?\",\n  \"FinancingOwnFundsPickerForm.type\": \"Source\",\n  \"FinancingOwnFundsPickerForm.borrower\": \"Emprunteur\",\n  \"FinancingOwnFundsPickerForm.value\": \"Montant\",\n  \"FinancingOwnFundsPickerForm.usageType\": \"Type d'utilisation\",\n  \"Forms.ownFundsUsageType.WITHDRAW\": \"Retrait\",\n  \"Forms.ownFundsUsageType.PLEDGE\": \"Nantissement\",\n  \"Forms.thirdPartyFortune\": \"Prêt de tiers\",\n  \"FinancingOwnFundsDialog.title\": \"Allouer des fonds propres\",\n  \"Financing.ownFundsAdder\": \"Ajouter fonds propres\",\n  \"Financing.ownFundsPicker\": \"Fonds propres alloués\",\n  \"LoanTabs.dev\": \"Dev\",\n  \"AppWidget1Page.title\": \"Calculateur\",\n  \"DashboardProgressInfo.uploadDocuments\": \"Ajoutez vos documents\",\n  \"LoanChecklist.missingFields\": \"Informations manquantes\",\n  \"LoanChecklist.missingDocuments\": \"Documents manquants\",\n  \"LoanChecklist.done\": \"Nous avons tout ce qu'il faut\",\n  \"LoanChecklist.dialogButton\": \"Voir la checklist\",\n  \"Financing.wantedLoanPercent\": \"Prêt hypothécaire (%)\",\n  \"FinancingRefresher.label\": \"Rafraîchir\",\n  \"FinancingResult.cost\": \"Charges du projet\",\n  \"FinancingPropertyPicker.placeholder\": \"Bien immobilier sans addresse\",\n  \"FileTabs.loanDocuments\": \"Autres documents\",\n  \"WwwTopNavLinks.login\": \"Se connecter\",\n  \"files.OTHER\": \"Autres documents\",\n  \"BorrowersSummary.borrower\": \"Emprunteur {index}\",\n  \"Maps.addressNotFound\": \"Cette adresse n'a pas pu être trouvée\",\n  \"FinancingResultErrors.noMortgageLoan\": \"Ajoutez un prêt hypothécaire\",\n  \"FinancingResultErrors.missingOwnFunds\": \"Allouez plus de fonds propres à ce plan financier\",\n  \"FinancingResultErrors.tooMuchOwnFunds\": \"Allouez moins de fonds propres à ce plan financier\",\n  \"FinancingResultErrors.highIncomeRatio\": \"Vos revenus ne vous permettent pas de tenir les charges de ce plan financier\",\n  \"FinancingResultErrors.missingCash\": \"Vous devez allouer au moins 10% de cash en plus des frais de notaire à votre projet\",\n  \"ReturnToDashboard.label\": \"Retourner au Tableau de Bord\",\n  \"LoanSelector.empty\": \"Nouveau projet\",\n  \"Financing.OwnFundsLabel.available\": \"Disponible:\",\n  \"SingleLoanPageHeader.title\": \"{name} - Emprunt de {value}\",\n  \"FinancingSection.expandHelper\": \"Afficher les détails\",\n  \"UploaderArray.empty\": \"Pas encore de documents dans cette catégorie. Ajoutez-en et ils apparaîtront ici.\",\n  \"DashboardProgressInfo.completeFirstStructure\": \"Complétez votre premier plan financier\",\n  \"DashboardProgressInfo.addProperty\": \"Ajoutez votre premier bien immobilier\",\n  \"DashboardProgressInfo.completeProperty\": \"Complétez les informations de votre bien immobilier\",\n  \"DashboardProgressInfo.doAnExpertise\": \"Expertisez votre bien immobilier\",\n  \"DashboardProgressInfo.completeBorrowers\": \"Complétez les détails des emprunteurs\",\n  \"DashboardProgressInfo.chooseOffer\": \"Choisissez votre prêteur\",\n  \"DashboardProgressInfo.createSecondStructure\": \"Ajoutez un 2e plan financier pour comparer vos possibilités\",\n  \"DashboardProgressInfo.callEpotek\": \"Contactez votre conseiller pour connaitre les prochaines étapes\",\n  \"AboutPageOffice.description\": \"Basés à Genève, nous travaillons tous les jours pour transformer le marché de l'hypothèque.\",\n  \"AboutPageOffice.title\": \"Nos bureaux\",\n  \"AboutPagePart1.description\": \"Les conseillers d’e-Potek sont des professionnels d’expérience, en phase avec les évolutions d’un marché en permanente évolution. L'équipe est composée d’experts de confiance sur les sujets du financement hypothécaire, de la prévoyance et de la fiscalité immobilière.\",\n  \"AboutPagePart1.title\": \"À propos d'e-Potek\",\n  \"AboutPagePart2.description1\": \"Face aux nombreuses options proposées sur le marché de l’hypothèque, comparer différents prêteurs et produits de financement hypothécaire peut devenir un processus fastidieux.{verticalSpace}Il est ainsi facile de se perdre dans la jungle hypothécaire face à des offres aux conditions de taux hypothécaires apparaissant très avantageuses mais malheureusement valables uniquement sous certaines conditions exceptionnelles et donc applicables qu’à une faible minorité du marché.\",\n  \"AboutPagePart2.description2\": \"Soyez accompagné et conseillé par des experts en financement hypothécaire et identifiez facilement les meilleures solutions de financement du marché pour vos projets d’achats immobiliers.{verticalSpace}Profitez d’un outil qu’e-Potek a créé sur-mesure, proposant des solutions rapides et impartiales, vous permettant de structurer de manière efficace vos projets de recherche de financement.\",\n  \"AboutPagePart2.title\": \"Méthodes\",\n  \"AboutPagePart2.title1\": \"Classique\",\n  \"AboutPagePart2.title2\": \"e-Potek\",\n  \"AboutPagePart3.description1\": \"e-Potek SA est une société soumise aux règles imposées par la FINMA et composée d’experts de confiance sur les sujets du financement hypothécaire, de la prévoyance et de la fiscalité immobilière.\",\n  \"AboutPagePart3.description2\": \"Disposez de conseils avisés concernant l’optimisation fiscale, les choix relatifs à vos fonds propres, l’expertise de logements ainsi que toutes informations relatives au domaine du financement hypothécaire.\",\n  \"AboutPagePart3.title1\": \"Un acteur crédible\",\n  \"AboutPagePart3.title2\": \"Un service de premier ordre\",\n  \"AboutPagePart4.description0\": \"Evitez les pièges et soyez au courant des réalités du marché hypothécaire en recevant des conditions de financement sur-mesure et classées par ordre de pertinence.\",\n  \"AboutPagePart4.description1\": \"e-Potek facilite l’accès aux financements hypothécaires et à leur traitement. La soumission de documents et l’interaction avec le prêteur deviennent plus simples et agréables.\",\n  \"AboutPagePart4.description2\": \"Les conseillers e-Potek vérifient l’intégralité des dossiers et documents justificatifs afin qu’ils soient conformes et personnalisés aux directives internes de chaque prêteur.\",\n  \"AboutPagePart4.title0\": \"Des données fiables\",\n  \"AboutPagePart4.title1\": \"Un usage facilité\",\n  \"AboutPagePart4.title2\": \"Des dossiers irréprochables\",\n  \"AboutPageTeam.title\": \"Nos experts vous accompagnent\",\n  \"AboutPageTeamMember.emailTooltip\": \"Envoyer un email à {name}\",\n  \"AboutPageTeamMember.phoneTooltip\": \"Appeler {name}\",\n  \"AboutPageTeamRecruiting.hoverText\": \"Voir nos postes ouverts\",\n  \"AboutPageTeamRecruiting.subtitle\": \"e-Potek recrute\",\n  \"AboutPageTeamRecruiting.title\": \"Vous !\",\n  \"AcceptClosingModal.description\": \"Toute l'équipe d'e-Potek vous félicite pour le décaissement de votre prêt hypothécaire, et d'être enfin propriétaire de votre bien immobilier.{verticalSpace}Vous pouvez maintenant utiliser votre tableau de bord e-Potek pour garder un oeil sur votre prochaine échéance de paiement, et consulter les taux lorsque le refinancement s'approchera.\",\n  \"AcceptClosingModal.description2\": \"Merci d'avoir utilisé e-Potek, voici votre code pour nous recommander auprès de vos proches, et empocher jusqu'a CHF 1 000 pour une affaire conclue.\",\n  \"AcceptClosingModal.title\": \"Félicitations!\",\n  \"AccountPage.change\": \"Changer\",\n  \"AccountPage.email\": \"Adresse email\",\n  \"AccountPage.language\": \"Langue\",\n  \"AccountPage.notifications.email\": \"Par email\",\n  \"AccountPage.notifications.sms\": \"Par SMS\",\n  \"AccountPage.notifications\": \"Recevoir des notifications quand mon dossier avance\",\n  \"AccountPage.password\": \"Mot de passe\",\n  \"AccountPage.phone\": \"Téléphone\",\n  \"AccountPage.title\": \"Mon Compte\",\n  \"ActionsTable.actionName\": \"À faire\",\n  \"ActionsTable.comment\": \"Commentaire\",\n  \"ActionsTable.date\": \"Date\",\n  \"ActionsTable.loanName\": \"Projet\",\n  \"AddLoanPage.logIntoOtherAccount\": \"Utiliser un autre compte\",\n  \"AdminDashboardPage.tasks\": \"Tâches\",\n  \"AdminFilesTab.empty\": \"Vos documents officiels e-Potek apparaîtront ici.\",\n  \"AdminNote.label\": \"Note d'admin\",\n  \"AdminNote.placeholder\": \"Clique pour ajouter une note d'admin...\",\n  \"AdvancedOptions.borrowRatio\": \"Endettement voulu\",\n  \"AdminPromotionPage.addUser\": \"Ajouter\",\n  \"AdminPromotionPage.addUser.label\": \"Ajouter un utilisateur\",\n  \"AdminPromotionPage.addUser.title\": \"Ajouter un utilisateur\",\n  \"AdminPromotionPage.noUserFound\": \"Aucun utilisateur trouvé\",\n  \"AdminPromotionPage.PromotionUsers\": \"Utilisateurs\",\n  \"AdminPromotionPage.PromotionUsers.name\": \"Nom\",\n  \"AdminPromotionPage.PromotionUsers.email\": \"Email\",\n  \"AdminPromotionPage.PromotionUsers.permissions\": \"Permissions\",\n  \"AdminPromotionPage.PromotionUsers.actions\": \"Actions\",\n  \"AdminPromotionPage.searchUser\": \"Rechercher un utilisateur\",\n  \"AllUsersTable.actions\": \"Actions\",\n  \"AllUsersTable.assignedTo\": \"Assigné à\",\n  \"AllUsersTable.createdAt\": \"Créé le\",\n  \"AllUsersTable.email\": \"Email\",\n  \"AllUsersTable.roles\": \"Rôles\",\n  \"AmortizationChart.amortizationSeries\": \"Amortissement mensuel\",\n  \"AmortizationChart.debtSeries\": \"Dette\",\n  \"AmortizationChart.fortuneSeries\": \"Fonds Propres\",\n  \"AmortizationChart.paymentSeries\": \"Paiement mensuel\",\n  \"AmortizationChart.refinancingFlag\": \"Refinancement\",\n  \"AmortizationChart.title\": \"Les vingt années à venir\",\n  \"AmortizationChart.yAxis1\": \"Dette et fonds propres\",\n  \"AmortizationChart.yAxis2\": \"Paiements mensuels\",\n  \"AmortizationTool.catastrophy.title\": \"Scénario catastrophe\",\n  \"AmortizationTool.futureRate\": \"Refinancement dans 10 ans\",\n  \"AmortizationTool.initialRate\": \"Taux initial à 10 ans\",\n  \"AmortizationTool.lower.title\": \"Baisse des taux\",\n  \"AmortizationTool.rate\": \"Taux à 10 ans: {rate, number, percentage}\",\n  \"AmortizationTool.rise.title\": \"Augmentation des taux\",\n  \"AmortizationTool.stable.title\": \"Taux stables\",\n  \"AmortizingPicker.description\": \"Choisir comment amortir son bien immobilier peut avoir des conséquences très importantes pour votre futur. N'hésitez pas à nous appeler pour prendre cette décision en toute confiance.\",\n  \"AmortizingPicker.title\": \"Stratégie d'amortissement\",\n  \"AmortizingSummary.direct.description\": \"Vous avez choisi l'amortissement direct.\",\n  \"AmortizingSummary.indirect.description\": \"Vous avez choisi l'amortissement indirect.\",\n  \"AppPage.title\": \"Mes dossiers\",\n  \"AppPage.begin\": \"Commencer\",\n  \"AppPage.loan.done\": \"Prêt Hypothécaire\",\n  \"AppPage.loan\": \"Demande de prêt\",\n  \"AppPage.newLoan\": \"Nouvelle demande de prêt\",\n  \"AppPage.noName\": \"Sans titre\",\n  \"AppPage.properties\": \"{count, plural, =0 {Pas de propriétés} one {Une propriété} other {# propriétés}}\",\n  \"AppPage.step\": \"{step, plural, one {1ère Étape} other {#ème Étape}}\",\n  \"ArrayInput.add\": \"Ajouter\",\n  \"AssignAdminDropdown.assignAdmin\": \"Assigner un conseiller\",\n  \"DashboardUnverified.emailVerificationSent\": \"Vérification envoyée à {email}!\",\n  \"BorrowerAdder.label\": \"+ Ajouter 2e emprunteur\",\n  \"BorrowerAddPartner.label\": \"Ajouter votre partenaire comme 2e emprunteur\",\n  \"BorrowerHeader.age\": \"{value} ans\",\n  \"BorrowerHeader.firstName\": \"Prénom\",\n  \"BorrowerHeader.lastName\": \"Nom\",\n  \"BorrowerHeader.title\": \"Emprunteur {index}\",\n  \"BorrowerIssues.itemTitle\": \"Emprunteur {index}\",\n  \"BorrowersPage.borrowers\": \"Emprunteurs\",\n  \"BorrowersPage.files\": \"Documents\",\n  \"BorrowersPage.finance\": \"Finances\",\n  \"BorrowersPage.personal\": \"Informations personnelles\",\n  \"BorrowersPage.title\": \"Emprunteurs\",\n  \"BorrowerRemover.button\": \"Supprimer\",\n  \"BorrowersTable.createdAt\": \"Créé le\",\n  \"BorrowersTable.name\": \"Nom\",\n  \"BorrowersTable.updatedAt\": \"Modifié le\",\n  \"CareersPage.description1\": \"e-Potek est en forte croissance et recrute souvent de nouveaux talents au sein de nos différents départements.\",\n  \"CareersPage.description2\": \"Nous faisons le plus possible pour créer et maintenir un environnement de travail agréable, avec beaucoup d'opportunités et de responsabilités pour ceux qui souhaitent les prendre.\",\n  \"CareersPage.title\": \"Travailler chez e-Potek\",\n  \"CareersPageJob.hoverText\": \"Voir l'annonce\",\n  \"CareersPageList.admin\": \"Opérations\",\n  \"CareersPageList.advisory\": \"Conseil\",\n  \"CareersPageList.design\": \"Design\",\n  \"CareersPageList.emptyDepartment\": \"Pas de postes ouverts dans ce département pour l'instant. Réessayez demain, ou envoyez nous une candidature spontanée en expliquant ce que vous pensez pouvoir apporter à notre entreprise, et pourquoi nous en aurions besoin !\",\n  \"CareersPageList.engineering\": \"Ingénierie\",\n  \"ClosingPage.CTA\": \"Demander le décaissement\",\n  \"ClosingPage.description\": \"Lorsque vous avez soumis les derniers documents, vous pourrez demander à votre prêteur de décaisser le prêt.\",\n  \"ClosingPage.empty\": \"Nous sommes en train de préparer les dernières étapes pour que vous puissiez décaisser votre prêt hypothécaire. Revenez bientôt!\",\n  \"ClosingPage.loading\": \"Vous serez notifié par e-mail lorsque votre prêteur est disposé au décaissement.\",\n  \"ClosingPage.progress\": \"Progrès: {value, number, percent}\",\n  \"ClosingPage.title\": \"Closing\",\n  \"collections.borrowers\": \"Emprunteurs\",\n  \"collections.loans\": \"Hypothèques\",\n  \"collections.offers\": \"Offres\",\n  \"collections.promotions\": \"Promotions\",\n  \"collections.properties\": \"Biens immobiliers\",\n  \"collections.tasks\": \"Tâches\",\n  \"collections.users\": \"Utilisateurs\",\n  \"ConditionsButton.counterpart\": \"Contreparties pour les meilleurs taux\",\n  \"ConditionsButton.counterparts\": \"Contreparties pour les meilleurs taux\",\n  \"ConditionsButton.CTA\": \"Ok\",\n  \"ConditionsButton.mandatory\": \"Conditions obligatoires\",\n  \"ConditionsButton.title\": \"Conditions\",\n  \"ConditionsPage.title\": \"Conditions générales d'utilisation\",\n  \"ConfirmMethod.dialogTitle\": \"Êtes-vous sûr ?\",\n  \"ConfirmMethod.dialogMessage\": \"Tapez {keyword} pour valider.\",\n  \"ConfirmMethod.buttonCancel\": \"Annuler\",\n  \"ConfirmMethod.buttonConfirm\": \"Confirmer\",\n  \"ContactButton.byEmail\": \"Par email\",\n  \"ContactButton.byPhone\": \"Par téléphone\",\n  \"ContactButton.yourAdvisor\": \"{gender, select, F {Votre conseillère} other {Votre conseiller}}\",\n  \"ContactPage.address\": \"Adresse\",\n  \"ContactPage.description\": \"Un de nos spécialistes hypothécaires va vous contacter rapidement pour échanger plus amplement sur votre projet ainsi que pour orchestrer les prochaines étapes.{verticalSpace}Il/elle vous donnera accès à votre interface e-Potek où vous pourrez avancer sur votre demande de prêt ensemble.\",\n  \"ContactPage.email\": \"Adresse email\",\n  \"ContactPage.phone\": \"Téléphone\",\n  \"ContactPage.title\": \"Merci de votre intérêt\",\n  \"ContactUsForm.details.placeholder\": \"N’hésitez pas à nous transmettre vos disponibilités ou tout autre message qui nous permettraient d'anticiper certaines urgences\",\n  \"ContactUsForm.details\": \"Autres détails\",\n  \"ContactUsForm.email.placeholder\": \"mon-nom@probablement-gmail.com\",\n  \"ContactUsForm.email\": \"Adresse email\",\n  \"ContactUsForm.name.placeholder\": \"Marie Rochat\",\n  \"ContactUsForm.name\": \"Prénom et Nom\",\n  \"ContactUsForm.phoneNumber.placeholder\": \"078 000 00 00\",\n  \"ContactUsForm.phoneNumber\": \"Numéro de téléphone\",\n  \"ContactUsFormSuccess.text\": \"C'est dans la boite !\",\n  \"ContractDownloader.ready\": \"Votre contrat est prêt, vous pouvez le télécharger dès maintenant.\",\n  \"ContractDownloader.waiting\": \"Votre contrat arrivera ici.\",\n  \"ContractPage.CTA\": \"Demander le contrat\",\n  \"ContractPage.description\": \"Pour obtenir un contrat officiel de prêt, votre prêteur a encore besoin de quelques documents. Dès que vous avez soumis tous les documents nécessaires, vous pourrez demander le contrat, ce qui prendra quelques jours à votre prêteur.\",\n  \"ContractPage.loading\": \"Vous serez notifié par e-mail lorsque votre contrat est prêt.\",\n  \"ContractPage.progress\": \"Progrès: {value, number, percent}\",\n  \"UserAdder.buttonLabel\": \"Créer un compte utilisateur\",\n  \"UserAdder.dialogDescription\": \"Entrez l'adresse email du compte. Un email sera envoyé à cette adresse pour qu'il se connecte et choisisse son mot de passe.\",\n  \"UserAdder.dialogTitle\": \"Créer un compte\",\n  \"UserAdder.email\": \"Adresse email\",\n  \"UserAdder.firstName\": \"Prenom\",\n  \"UserAdder.lastName\": \"Nom\",\n  \"UserAdder.phoneNumbers\": \"Numéro de téléphone\",\n  \"CustomFieldAdder.add\": \"Ajouter\",\n  \"CustomFieldAdder.attic\": \"Avec grenier\",\n  \"CustomFieldAdder.balcony\": \"Avec balcon\",\n  \"CustomFieldAdder.basement\": \"Avec cave\",\n  \"CustomFieldAdder.biscuitHouse\": \"Murs en pain d'épices\",\n  \"CustomFieldAdder.boolean\": \"Oui / Non\",\n  \"CustomFieldAdder.chimney\": \"Avec cheminée\",\n  \"CustomFieldAdder.constructionYear\": \"Année de construction\",\n  \"CustomFieldAdder.contact\": \"Contact\",\n  \"CustomFieldAdder.date\": \"Date\",\n  \"CustomFieldAdder.dishwasher\": \"Avec lave-vaisselle\",\n  \"CustomFieldAdder.extensionAllowed\": \"Aggrandissement possible\",\n  \"CustomFieldAdder.facing\": \"Orientation\",\n  \"CustomFieldAdder.floor\": \"Étage dans l'immeuble\",\n  \"CustomFieldAdder.floors\": \"Nombre d'Étages\",\n  \"CustomFieldAdder.garage\": \"Avec garage\",\n  \"CustomFieldAdder.garden\": \"Avec jardin\",\n  \"CustomFieldAdder.groundFloor\": \"Rez-de-chaussée\",\n  \"CustomFieldAdder.haunted\": \"Maison hantée\",\n  \"CustomFieldAdder.internetSpeed\": \"Débit internet max\",\n  \"CustomFieldAdder.landArea\": \"Surface du terrain\",\n  \"CustomFieldAdder.landingRunway\": \"Avec piste d'atterissage\",\n  \"CustomFieldAdder.money\": \"Montant en CHF\",\n  \"CustomFieldAdder.name\": \"Nom du champ\",\n  \"CustomFieldAdder.number\": \"Nombre\",\n  \"CustomFieldAdder.parkingSpots\": \"Places de parc\",\n  \"CustomFieldAdder.percent\": \"Pourcentage\",\n  \"CustomFieldAdder.pool\": \"Avec piscine\",\n  \"CustomFieldAdder.renovationRequired\": \"Rénovations nécessaires\",\n  \"CustomFieldAdder.richNeighbours\": \"Voisins milliardaires\",\n  \"CustomFieldAdder.rooms\": \"Nombre de pièces\",\n  \"CustomFieldAdder.summerTemperature\": \"Température en été\",\n  \"CustomFieldAdder.surface\": \"Surface habitable\",\n  \"CustomFieldAdder.terrace\": \"Avec terrasse\",\n  \"CustomFieldAdder.text\": \"Texte\",\n  \"CustomFieldAdder.title\": \"Ajouter un champ personnel\",\n  \"CustomFieldAdder.type\": \"Type de valeur\",\n  \"CustomFieldAdder.washingMachine\": \"Avec machine à laver\",\n  \"DashboardBorrowers.age\": \"{value} ans\",\n  \"DashboardBorrowers.itemTitle\": \"Emprunteur {index}\",\n  \"DashboardBorrowers.title\": \"{count, plural, one {Emprunteur} other {Emprunteurs}}\",\n  \"DashboardCharts.expensesTitle\": \"Coût Mensuel\",\n  \"DashboardDownload.contract\": \"Votre contrat\",\n  \"DashboardDownload.title\": \"Documents\",\n  \"DashboardInfo.title\": \"INFORMATIONS PRATIQUES\",\n  \"DashboardInfoInterests.title\": \" Nos taux d'intérêt\",\n  \"DashboardInfoTeam.title\": \"Votre équipe e-Potek\",\n  \"DashboardInfoTeamAdder.label\": \"Ajouter un contact personnel\",\n  \"DashboardInfoTeamExternal.title\": \"Autres contacts\",\n  \"DashboardInfoTeamForm.dialogDescription\": \"Vous pourrez le retrouver sur votre dashboard e-Potek en tout temps.\",\n  \"DashboardInfoTeamForm.dialogTitle\": \"Ajoutez un contact\",\n  \"DashboardInfoTeamForm.email\": \"E-mail\",\n  \"DashboardInfoTeamForm.name\": \"Nom complet\",\n  \"DashboardInfoTeamForm.phoneNumber\": \"Téléphone\",\n  \"DashboardInfoTeamForm.title\": \"Fonction\",\n  \"DashboardInfoTeamMember.emailTooltip\": \"Envoyer email à {email}\",\n  \"DashboardInfoTeamMember.phoneTooltip\": \"Appeler {phoneNumber}\",\n  \"DashboardLastSteps.closing\": \"Décaisser le prêt\",\n  \"DashboardLastSteps.contract\": \"Obtenir le contrat\",\n  \"DashboardLastSteps.progress\": \"Progrès: {value}/{total}\",\n  \"DashboardLastSteps.subtitle\": \"Date de Décaissement\",\n  \"DashboardLastSteps.title\": \"Date de Décaissement\",\n  \"DashboardMenu.financePage\": \"Plus de détails\",\n  \"DashboardMenu.showDetail\": \"Afficher les détails\",\n  \"DashboardMenu.showOverview\": \"Afficher le résumé\",\n  \"DashboardOffer.title\": \"Offre retenue\",\n  \"DashboardPage.title\": \"Tableau de Bord\",\n  \"DashboardPayments.lastDate\": \"Dernier paiement\",\n  \"DashboardPayments.title\": \"Prochain paiement\",\n  \"DashboardProgressBar.title\": \"Progression\",\n  \"DashboardProperty.title\": \"Bien immobilier\",\n  \"DashboardRecap.detail\": \"Détail\",\n  \"DashboardRecap.overview\": \"Résumé\",\n  \"DashboardRecap.title\": \"EN RÉSUMÉ\",\n  \"DashboardRecapChart.title\": \"Charges mensuelles\",\n  \"DashboardRecapCost.sumTitle\": \"Coût total\",\n  \"DashboardRecapFinance.emptyTitle\": \"Pas encore de plan financier\",\n  \"DashboardRecapFinance.emptyDescription\": \"Ajoutez-en un et il apparaîtra ici\",\n  \"DashboardRecapFinance.title\": \"Plan financier\",\n  \"DashboardRecapFinancing.sumTitle\": \"Financement total\",\n  \"DashboardRecapProperty.empty\": \"Ajoutez l'adresse complète de votre bien pour afficher ce récapitulatif\",\n  \"DashboardStatus.step\": \"{step, plural, one {1ère étape} =2 {2ème étape} =3 {3ème étape} =4 {4ème étape}}\",\n  \"DashboardStatus.title\": \"Statut de votre demande\",\n  \"DashboardStatus.verification\": \"Vérification en cours...\",\n  \"DashboardUnverified.CTA\": \"Renvoyer l'email\",\n  \"DashboardUnverified.description\": \"Jetez un oeil à votre boite email pour un message de notre part. Rien reçu ?\",\n  \"DashboardUnverified.title\": \"Vous n'avez pas encore vérifié votre adresse email.\",\n  \"DateInput.placeholder\": \"Choisissez une date\",\n  \"DefaultOptions.fortune\": \"Fonds propres\",\n  \"DefaultOptions.income\": \"Revenus annuels bruts\",\n  \"DefaultOptions.interestRate\": \"Taux d'intérêt\",\n  \"DescriptionItemText.application.description\": \"Assurez vous d’optimiser votre recherche de prêt hypothécaire avec l'aide de nos conseillers\",\n  \"DescriptionItemText.application.title\": \"Structurez votre dossier\",\n  \"DescriptionItemText.auction.description\": \"Placez votre dossier aux enchères, de manière anonyme, auprès de tous les prêteurs\",\n  \"DescriptionItemText.auction.title\": \"Lancez les enchères\",\n  \"DescriptionItemText.closing.description\": \"Soyez accompagnés dans vos décisions stratégiques par des spécialistes hypothécaires jusqu'à l’obtention de votre prêt\",\n  \"DescriptionItemText.closing.title\": \"Obtenez votre prêt\",\n  \"DescriptionItemText.eligibility.description\": \"Identifiez le montant que vous pouvez emprunter en quelques minutes\",\n  \"DescriptionItemText.eligibility.title\": \"Testez votre éligibilité\",\n  \"DescriptionItemText.expertise.description\": \"Vérifiez la valeur de marché de votre logement en quelques clics\",\n  \"DescriptionItemText.expertise.title\": \"Expertisez votre logement\",\n  \"DetailSideNavFilters.showAssignedToMe\": \"Assigné à moi\",\n  \"DetailSideNavHeader.sortOrder.asc\": \"Croissant\",\n  \"DetailSideNavHeader.sortOrder.desc\": \"Décroissant\",\n  \"DetailSideNavPagination.end\": \"Fin des résultats\",\n  \"DetailSideNavPagination.showMore\": \"Afficher plus\",\n  \"DisableUserFormsToggle.canEdit\": \"Autoriser le client à modifier les champs\",\n  \"Forms.userFormsEnabled\": \"Autoriser modifications\",\n  \"DropzoneArrayItem.fileCount\": \"{count, plural, =0 {Pas de fichiers} one {Un fichier} other {# fichiers}}\",\n  \"DropzoneInput.cancelUpload\": \"Annuler l'upload\",\n  \"DropzoneInput.cancelUploadConfirmation\": \"Êtes-vous sûr ?\",\n  \"DropzoneInput.invalidFileType\": \"Vous ne pouvez uploader que des fichiers PDF, JPG et PNG.\",\n  \"DropzoneInput.message\": \"Déposez un ou plusieurs fichiers ici, ou cliquez pour choisir\",\n  \"DropzoneInput.removeFile\": \"Supprimer\",\n  \"e-Potek\": \"e-Potek\",\n  \"UserModifier.buttonLabel\": \"Modifier l'utilisateur\",\n  \"UserModifier.dialogTitle\": \"Modifier l'utilisateur\",\n  \"UserModifier.firstName\": \"Prenom\",\n  \"UserModifier.lastName\": \"Nom\",\n  \"UserModifier.phoneNumbers\": \"Numéro de téléphone\",\n  \"EmailLine.alreadyAnAccount\": \"J'ai déjà un compte e-Potek\",\n  \"emails.CONTACT_US_ADMIN.BODY\": \"Nom: {name}<br />Email: {email}<br />Tel: {phoneNumber}<br />Message: {details}\",\n  \"emails.CONTACT_US_ADMIN.SUBJECT\": \"Nouveau contact: {name}\",\n  \"emails.CONTACT_US_ADMIN.TITLE\": \"Quelqu'un a rempli notre formulaire! :)\",\n  \"emails.CONTACT_US.BODY\": \"Bonjour {name},{verticalSpace}Nous avons bien reçu votre message, et vous serez contacté, dès que possible, par un de nos experts en hypothèque.{verticalSpace}Yannis<br />Directeur d'e-Potek\",\n  \"emails.CONTACT_US.SUBJECT\": \"Bienvenue chez e-Potek!\",\n  \"emails.CONTACT_US.TITLE\": \"Merci de nous avoir contacté\",\n  \"emails.ENROLL_ACCOUNT.BODY\": \"Vous pouvez dès à présent vous connecter sur votre compte e-Potek, et saisir votre nouveau mot de passe.\",\n  \"emails.ENROLL_ACCOUNT.CTA\": \"Démarrer\",\n  \"emails.ENROLL_ACCOUNT.from\": \"Yannis d'e-Potek\",\n  \"emails.ENROLL_ACCOUNT.SUBJECT\": \"Votre nouveau compte e-Potek\",\n  \"emails.ENROLL_ACCOUNT.TITLE\": \"Bienvenue chez e-Potek\",\n  \"emails.REFER_USER.BODY\": \"{proName} vous a référé sur e-Potek. Notre plateforme vous permet de déterminer votre capacité d'achat, d'obtenir une attestation de financement, et de créer un dossier de recherche de financement hypothécaire afin de comparer le marché des prêteurs depuis le confort de chez vous. Vous serez accompagné par votre conseiller en financement dédié qui vous suivra tout le long de vos démarches.{verticalSpace}Vous pouvez dès à présent vous connecter sur votre compte e-Potek, et saisir votre nouveau mot de passe.\",\n  \"emails.REFER_USER.CTA\": \"Démarrer\",\n  \"emails.REFER_USER.from\": \"e-Potek\",\n  \"emails.REFER_USER.SUBJECT\": \"Vous avez été invité sur e-Potek\",\n  \"emails.REFER_USER.TITLE\": \"Bienvenue chez e-Potek\",\n  \"emails.CONFIRM_USER_INVITATION.BODY\": \"{name} ({email}) a bien été invité sur e-Potek. Vous pouvez consulter son avancement et tous vos autres dossiers reférés en vous connectant sur e-Potek Pro.\",\n  \"emails.CONFIRM_USER_INVITATION.CTA\": \"Se connecter\",\n  \"emails.CONFIRM_USER_INVITATION.from\": \"e-Potek\",\n  \"emails.CONFIRM_USER_INVITATION.SUBJECT\": \"Invitation réussie\",\n  \"emails.CONFIRM_USER_INVITATION.TITLE\": \"Invitation réussie\",\n  \"emails.footerUser\": \"Vous recevez cet email car vous avez un compte sur {url}{unsubscribe}\",\n  \"emails.footerVisitor\": \" \",\n  \"emails.RESET_PASSWORD.BODY\": \"Suite a votre demande, nous avons réinitialisé votre mot de passe, veuillez en choisir un nouveau en cliquant sur le bouton ci-dessous.\",\n  \"emails.RESET_PASSWORD.CTA\": \"Choisir un nouveau mot de passe\",\n  \"emails.RESET_PASSWORD.from\": \"e-Potek\",\n  \"emails.RESET_PASSWORD.SUBJECT\": \"Mot de passe réinitialisé\",\n  \"emails.RESET_PASSWORD.TITLE\": \"Votre mot de passe a été réinitialisé\",\n  \"emails.unsubscribe\": \"Me Désabonner\",\n  \"emails.FIND_LENDER_NOTIFICATION.BODY\": \"Vous pouvez dès à présent consulter les offres que nous avons négociées pour vous.{verticalSpace}Votre conseiller {assigneeName} se tient à votre disposition pour avancer avec le prêteur de votre choix.{verticalSpace}Nous vous proposons une rencontre ou un échange téléphonique afin de parcourir les offres obtenues et ainsi aborder les sujets stratégiques de votre acquisition (répartition des fonds propres, choix des taux, méthode d’amortissement).{verticalSpace}Pour ce faire, nous vous remercions de bien vouloir nous communiquer quelques disponibilités.\",\n  \"emails.FIND_LENDER_NOTIFICATION.CTA\": \"Consulter les offres\",\n  \"emails.FIND_LENDER_NOTIFICATION.SUBJECT\": \"[e-Potek] Identifiez votre prêteur\",\n  \"emails.FIND_LENDER_NOTIFICATION.TITLE\": \"Identifiez votre prêteur\",\n  \"emails.VERIFICATION_ERROR.BODY\": \"Il semblerait qu'il y a eu un petit problème lors de la vérification.\",\n  \"emails.VERIFICATION_ERROR.CTA\": \"Se rendre sur e-Potek\",\n  \"emails.VERIFICATION_ERROR.SUBJECT\": \"[e-Potek] Souci de vérification\",\n  \"emails.VERIFICATION_ERROR.TITLE\": \"Oops..\",\n  \"emails.VERIFICATION_PASSED.BODY\": \"La vérification de votre dossier a réussi!\",\n  \"emails.VERIFICATION_PASSED.CTA\": \"Continuer\",\n  \"emails.VERIFICATION_PASSED.SUBJECT\": \"[e-Potek] Vérification réussie\",\n  \"emails.VERIFICATION_PASSED.TITLE\": \"Tout est en ordre\",\n  \"emails.VERIFICATION_REQUESTED.BODY\": \"Nous avons bien reçu votre demande de vérification, et nous vous reviendrons dans les plus brefs délais possibles.\",\n  \"emails.VERIFICATION_REQUESTED.SUBJECT\": \"[e-Potek] Vérification demandée\",\n  \"emails.VERIFICATION_REQUESTED.TITLE\": \"Vous avez demandé la vérification de votre dossier\",\n  \"emails.VERIFY_EMAIL.BODY\": \"Merci de confirmer votre nouvelle adresse email en cliquant ici.\",\n  \"emails.VERIFY_EMAIL.CTA\": \"Confirmer\",\n  \"emails.VERIFY_EMAIL.SUBJECT\": \"Vérifiez votre adresse email\",\n  \"emails.VERIFY_EMAIL.TITLE\": \"Vérifiez votre adresse email\",\n  \"errors.fileSize.description\": \"On ne peut prendre que des fichiers en dessous de 50MB\",\n  \"errors.fileSize.title\": \"Fichier trop gros\",\n  \"errors.fileType.description\": \"On ne peut prendre que les .pdf, .jpg, .jpeg, .xlsx et .png\",\n  \"errors.fileType.title\": \"Fichier incompatible\",\n  \"errors.general\": \"Woops, il y a eu un petit souci!\",\n  \"ExpensesChart.perMonth\": \"par mois\",\n  \"ExpensesChartInterests.libor\": \"Libor moyen: {value, number, percentage}\",\n  \"ExpensesChartInterests.selectFieldLabel\": \"Taux d'intérêt indicatif\",\n  \"ExpensesChartInterests.years\": \"{years} ans moyen: {value, number, percentage}\",\n  \"FaqPage.categories.general\": \"Général\",\n  \"FaqPage.categories.services\": \"Services\",\n  \"FaqPage.description\": \"e-Potek répond à toutes vos questions concernant le financement de votre projet.\",\n  \"FaqPage.title\": \"Questions fréquentes\",\n  \"FaqPageFaqs.cancelMandate.answer\": \"Aucun problème, en tout temps, envoyez simplement votre requête par email à {contactMail}, et vous recevrez une confirmation d’annulation.\",\n  \"FaqPageFaqs.cancelMandate.question\": \"Comment puis-je résilier le mandat ?\",\n  \"FaqPageFaqs.contact.answer\": \"Contactez-nous via la page de contact, vous pourrez y laisser un message, ou directement nous joindre par téléphone ({contactPhone}) ou e-mail ({contactMail}).\",\n  \"FaqPageFaqs.contact.question\": \"Comment puis-je contacter un employé de e-Potek ?\",\n  \"FaqPageFaqs.cost.answer\": \"e-Potek ne vous coûte rien. La société perçoit des revenus de la part de la majorité des prêteurs.\",\n  \"FaqPageFaqs.cost.question\": \"Combien me coûte le service e-Potek ?\",\n  \"FaqPageFaqs.emergencies.answer\": \"Nous sommes une équipe très réactive qui mettons la priorité maximale sur notre clientèle. Appelez-nous pour décrire votre cas, et nous vous obtiendrons votre résidence peu importe le jour ou l’heure.\",\n  \"FaqPageFaqs.emergencies.question\": \"J’aimerais acquérir un bien d’urgence car sinon il va me passer entre les mains\",\n  \"FaqPageFaqs.forWhom.answer\": \"e-Potek s’adresse à toute personne qui souhaite obtenir le meilleur financement hypothécaire du marché.\",\n  \"FaqPageFaqs.forWhom.question\": \"À qui s’adresse e-Potek ?\",\n  \"FaqPageFaqs.getFinancingCertificate.answer\": \"Contactez votre conseiller, puis il vous enverra votre attestation.\",\n  \"FaqPageFaqs.getFinancingCertificate.question\": \"Comment puis-je obtenir une attestation de financement ?\",\n  \"FaqPageFaqs.howLong.answer\": \"Du moment que nous avons toutes les pièces nécessaires un prêt peut être obtenu très rapidement. Afin de ne pas être dans le stress nous suggérons toujours un délai de 1 mois, en sachant que nous avons déjà obtenu des prêts en 48 heures dans des situations d’urgence.\",\n  \"FaqPageFaqs.howLong.question\": \"Combien de temps est-ce que ça prend pour obtenir un prêt hypothécaire ?\",\n  \"FaqPageFaqs.howMuchCanIBorrow.answer\": \"Utilisez notre calculateur {start1Link}.\",\n  \"FaqPageFaqs.howMuchCanIBorrow.question\": \"Comment puis-je savoir combien je peux emprunter ?\",\n  \"FaqPageFaqs.howToStart.answer\": \"\",\n  \"FaqPageFaqs.howToStart.question\": \"\",\n  \"FaqPageFaqs.importantElements.answer\": \"Le montant du prêt : Attentions aux incidences fiscales.{verticalSpace}Le type d’amortissement : Possibilité d’optimiser votre fiscalité.{verticalSpace}La durée des taux : Taux fixe vs. Taux variable.{verticalSpace}L’utilisation des fonds propres : Attention aux incidences fiscales (surtout dans le cadre d’une acquisition de résidence principale).\",\n  \"FaqPageFaqs.importantElements.question\": \"Quels sont les sujets importants que je dois anticiper pour mon hypothèque ?\",\n  \"FaqPageFaqs.mandate.answer\": \"Le mandat e-Potek définit les engagements d’e-Potek ainsi que les vôtres et permet à e-Potek de vous accompagner auprès du prêteur que vous aurez choisi.\",\n  \"FaqPageFaqs.mandate.question\": \"C’est quoi le Mandat e-Potek ?\",\n  \"FaqPageFaqs.propertyNotFoundYet.answer\": \"Naturellement, il est fortement conseillé de tester votre solvabilité afin d’identifier quel est le montant du prêt maximum que vous pourrez obtenir afin d'affiner vos projets, cliquez {start1Link}. Cela vous permettra d’être proactif et efficace dans vos négociations avec les vendeurs.\",\n  \"FaqPageFaqs.propertyNotFoundYet.question\": \"Je n’ai pas encore trouvé mon logement, est-ce que je peux utiliser e-Potek ?\",\n  \"FaqPageFaqs.specialCases.answer\": \"Avec toutes nos années d’expérience, nous avons vu passer et financé avec succès des milliers de dossiers, des plus simples aux très complexes. Nous pouvons vous assurer que peu importe votre situation, s'il y a une solution, nous la trouverons. N’hésitez pas à nous contacter pour en discuter !{verticalSpace}Quelques exemples de situations complexes : Indépendants et chefs d’entreprise - Rentiers - Acquisitions en famille - Successions.\",\n  \"FaqPageFaqs.specialCases.question\": \"Mon cas est particulier, est-ce qu’e-Potek peut quand même m’aider ?\",\n  \"FaqPageFaqs.what.answer\": \"e-Potek SA est une société anonyme basée à Genève spécialisée dans la recherche de financement hypothécaire soumise aux règles imposées par la FINMA.\",\n  \"FaqPageFaqs.what.question\": \"C'est quoi e-Potek ?\",\n  \"FaqPageFaqs.who.answer\": \"Depuis 2016 : un conseiller hypothécaire (actif depuis plus de 18 ans en Suisse), un conseiller en prévoyance (actif depuis plus de 20 ans en Suisse), ainsi qu’un spécialiste du domaine digital (EPFL & Stanford University) ont unis leurs visions et compétences pour créer e-Potek qui repose sur le savoir faire de plusieurs domaines ainsi qu’un système informatique conçu sur-mesure.\",\n  \"FaqPageFaqs.who.question\": \"Qui a créé e-Potek ?\",\n  \"File.status.ERROR\": \"Non valide\",\n  \"File.status.UNVERIFIED\": \"En vérification\",\n  \"File.status.VALID\": \"Validé\",\n  \"FileAdder.title\": \"+ Uploader un fichier\",\n  \"files.BONUSES.tooltip\": \"Justificatif de tous les bonus et revenus variables\",\n  \"files.BONUSES\": \"Justificatif des bonus\",\n  \"files.BUYERS_CONTRACT.tooltipa\": \"Vous pouvez demander un duplicata auprès du notaire qui était chargé de la signature par le passé\",\n  \"files.BUYERS_CONTRACT.tooltipb\": \"Le notaire est chargé de produire un projet d’acte d’achat\",\n  \"files.BUYERS_CONTRACT\": \"Acte d'achat\",\n  \"files.CONTRACT\": \"Contrat\",\n  \"files.COOWNERSHIP_AGREEMENT.tooltip\": \"Règlement de la copropriété\",\n  \"files.COOWNERSHIP_AGREEMENT\": \"Règlement PPE\",\n  \"files.COOWNERSHIP_ALLOCATION_AGREEMENT.tooltip\": \"Cahier de répartition des millièmes de la propriété\",\n  \"files.COOWNERSHIP_ALLOCATION_AGREEMENT\": \"Cahier de répartition PPE\",\n  \"files.PROPERTY_VOLUME.tooltip\": \"L'attestation d'assurance contient souvent cette information. Autrement, tout autre document disponible.\",\n  \"files.PROPERTY_VOLUME\": \"Cubage m3\",\n  \"files.CURRENT_MORTGAGES.tooltip\": \"Dernier décompte d'intérêts hypothécaires et contrat de crédit\",\n  \"files.CURRENT_MORTGAGES\": \"Charges hypothécaires\",\n  \"Files.description\": \"Voici l'endroit où vous pouvez uploader vos document en toute confidentialité.\",\n  \"files.DIVORCE_RULING\": \"Jugement de divorce\",\n  \"files.EXPENSES_JUSTIFICATION.tooltip\": \"Contrat de leasing, crédit personnel, etc...\",\n  \"files.EXPENSES_JUSTIFICATION\": \"Autres charges\",\n  \"files.FIRE_AND_WATER_INSURANCE.tooltip\": \"Incendie et dégâts d'eau émis par l'Etablissement Cantonal dans certains cantons\",\n  \"files.FIRE_AND_WATER_INSURANCE\": \"Police d'assurance\",\n  \"files.IDENTITY.tooltip\": \"Carte d'identité ou passeport à jour\",\n  \"files.IDENTITY\": \"Pièce d'identité\",\n  \"files.LAND_REGISTER_EXTRACT\": \"Extrait du registre foncier\",\n  \"files.LAST_SALARIES\": \"Fiches de salaire\",\n  \"files.LAST_SALARIES.tooltip\": \"3 dernières fiches de salaire\",\n  \"files.PROPERTY_MARKETING_BROCHURE.tooltip\": \"Plaquette de vente ou description détaillée (surface habitable, nombre de pièces, année de construction et rénovation, état, vue, etc...)\",\n  \"files.PROPERTY_MARKETING_BROCHURE\": \"Descriptif du logement\",\n  \"files.DEBT_COLLECTION_REGISTER_EXTRACT.tooltip\": \"Attestation de l'office des poursuites de moins de 3 mois\",\n  \"files.DEBT_COLLECTION_REGISTER_EXTRACT\": \"Extrait des poursuites\",\n  \"files.OTHER_INCOME_JUSTIFICATION.tooltip\": \"Justificatif de chaque autre revenu que vous avez mentionné\",\n  \"files.OTHER_INCOME_JUSTIFICATION\": \"Autres revenus\",\n  \"files.OWN_COMPANY_FINANCIAL_STATEMENTS.tooltip\": \"Lorsque l'emprunteur est employé de sa propre société ou qu'il est indépendant, il est nécessaire de présenter les 3 derniers bilans et comptes de résultat\",\n  \"files.OWN_COMPANY_FINANCIAL_STATEMENTS\": \"Bilans et PP\",\n  \"files.PENSION_FUND_YEARLY_STATEMENT.tooltip\": \"Dernier certificat de prévoyance professionnelle disponible\",\n  \"files.PENSION_FUND_YEARLY_STATEMENT\": \"Certificat de prévoyance\",\n  \"files.PROPERTY_PICTURES.tooltip\": \"Quelques photos (intérieur et extérieur). Façade, vue, cuisine, chambres, salles d'eau, etc...\",\n  \"files.PROPERTY_PICTURES\": \"Photos du logement\",\n  \"files.PROPERTY_PLANS\": \"Plans avec métrées\",\n  \"files.REIMBURSEMENT_STATEMENT.tooltip\": \"Le décompte de remboursement est produit par votre prêteur actuel\",\n  \"files.REIMBURSEMENT_STATEMENT\": \"Décompte de remboursement\",\n  \"files.INVESTMENT_PROPERTY_RENT_JUSTIFICATION.tooltip\": \"Loyer versé par le locataire existant ou justificatif du futur loyer\",\n  \"files.INVESTMENT_PROPERTY_RENT_JUSTIFICATION.tooltip2\": \"Vous pouvez obtenir cette information auprès du vendeur ou auprès de la régie qui va gérer vos locataires, si vous n’avez pas de régie nous vous recommandons de vous informer sur la régie qui s'occupe actuellement de la gestion de l'immeuble.\",\n  \"files.INVESTMENT_PROPERTY_RENT_JUSTIFICATION\": \"Loyers perçus\",\n  \"files.RESIDENCY_PERMIT.tooltip\": \"Permis d'établissement à jour\",\n  \"files.RESIDENCY_PERMIT\": \"Permis d’établissement\",\n  \"files.THIRD_PILLAR_ACCOUNTS.tooltip\": \"Justificatif des avoirs du 3ème pilier bancaire et/ou polices d'asurance 3A et 3B\",\n  \"files.THIRD_PILLAR_ACCOUNTS\": \"Justificatif 3e pilier\",\n  \"files.SALARY_CERTIFICATE\": \"Certificat annuel de salaire\",\n  \"files.SIGNED_CONTRACT.tooltip\": \"Le contrat de prêt avec votre signature à tous les endroits requis\",\n  \"files.SIGNED_CONTRACT\": \"Contrat signé\",\n  \"files.SIGNED_MANDATE\": \"Mandat e-Potek\",\n  \"files.TAXES.tooltip\": \"Dernière déclaration fiscale complète avec les annexes\",\n  \"files.TAXES\": \"Déclaration fiscale\",\n  \"Files.title\": \"Mes Documents\",\n  \"FilesPage.description\": \"Vous trouverez ici tous les documents que vous avez ajoutés à votre projet. Ils sont enregistrés en toute sécurité, et vous pourrez les y retrouver à tout instant.\",\n  \"FilesPage.title\": \"Documents\",\n  \"Finance.description\": \"Normalement, vous nous avez déjà donné tout ce dont nous avons besoin sur cette page.{verticalSpace}Vérifiez cependant que vous avez détaillé de façon exhaustive vos finances personelles. Les prêteurs vous offriront des conditions plus attractives si vos moyens dépassent le minimum nécéssaire pour votre Prêt Hypothécaire.\",\n  \"Finance.notValidated\": \"Non validées\",\n  \"Finance.recapTitle\": \"Récapitulatif\",\n  \"Finance.title\": \"Mes Finances\",\n  \"Finance.validated\": \"Validées\",\n  \"FinancePage.title\": \"Graphiques financiers\",\n  \"FinancingPage.title\": \"Plans financiers\",\n  \"Financing.amortizationCost\": \"Amortissement mensuel\",\n  \"Financing.amortizationType\": \"Type d'amortissement\",\n  \"Financing.borrowRatio\": \"Prêt / Prix d'achat\",\n  \"Financing.fortuneUsed\": \"Cash et titres\",\n  \"Financing.incomeRatio\": \"Charges / Revenus\",\n  \"Financing.interestsCost\": \"Intérêts mensuels\",\n  \"Financing.loanTranches\": \"Tranches\",\n  \"Financing.notaryFees\": \"Frais de notaire\",\n  \"Financing.pledgedAmount\": \"Nantissement\",\n  \"Financing.propertyCost\": \"Charges mensuelles\",\n  \"Financing.propertyId\": \"Bien immobilier\",\n  \"Financing.propertyValue\": \"{purchaseType, select, REFINANCING {Valeur du bien} other {Prix d'achat}}\",\n  \"Financing.propertyWork\": \"Travaux à plus-value\",\n  \"Financing.remainingCash\": \"Cash et titres restants\",\n  \"Financing.remainingInsurance2\": \"2ème pilier restant\",\n  \"Financing.remainingInsurance3A\": \"3ème pilier A assurance restant\",\n  \"Financing.remainingBank3A\": \"3ème pilier A banque restant\",\n  \"Financing.remainingInsurance3B\": \"3ème pilier B restant\",\n  \"Financing.requiredOwnFunds\": \"Fonds propres à allouer\",\n  \"Financing.requiredOwnFunds.low\": \"Ajoutez-en\",\n  \"Financing.requiredOwnFunds.high\": \"Enlevez-en\",\n  \"Financing.requiredOwnFunds.valid\": \"Parfait\",\n  \"Financing.requiredOwnFunds.low.tooltip\": \"Il manque {value} de fonds propres sur ce plan financier pour l'équilibrer. Ajoutez-en d'avantage, augmentez votre prêt hypothécaire, ou reduisez le coût de votre projet \",\n  \"Financing.requiredOwnFunds.high.tooltip\": \"Vous avez alloué {value} de fonds propres en trop sur ce plan financier, enlevez-en pour l'équilibrer, ou réduisez votre prêt hypothécaire\",\n  \"Financing.requiredOwnFunds.valid.tooltip\": \"Tout va bien!\",\n  \"Financing.totalFiscal\": \"Total\",\n  \"Financing.wantedLoan\": \"Prêt hypothécaire\",\n  \"FinancingFinancing.DIRECT\": \"Direct\",\n  \"FinancingFinancing.INDIRECT\": \"Indirect\",\n  \"FinancingFinancing.title\": \"PRÊT HYPOTHÉCAIRE\",\n  \"FinancingHeaderAdder.label\": \"Ajouter plan financier\",\n  \"FinancingOwnFunds.title\": \"FONDS PROPRES\",\n  \"FinancingProject.title\": \"PROJET\",\n  \"FinancingPropertyPicker.addProperty\": \"Ajouter bien immobilier\",\n  \"FinancingResult.finma\": \"Ratios FINMA\",\n  \"FinancingResult.fiscalTitle\": \"Incidences fiscales\",\n  \"FinancingResult.future\": \"Post décaissement\",\n  \"FinancingResult.title\": \"RÉSULTAT\",\n  \"Forms.address1.placeholder\": \"Rue des Champs 7\",\n  \"Forms.address1\": \"Adresse 1\",\n  \"Forms.address2.placeholder\": \" \",\n  \"Forms.address2\": \"Adresse 2\",\n  \"Forms.age.placeholder\": \"50\",\n  \"Forms.age\": \"Âge\",\n  \"Forms.areaNorm.NIA\": \"Nette\",\n  \"Forms.areaNorm.NLS\": \"Brutte\",\n  \"Forms.areaNorm\": \"Type de surface\",\n  \"Forms.assignedTo\": \"Assigné à\",\n  \"Forms.balconyArea.placeholder\": \"20\",\n  \"Forms.balconyArea\": \"Surface des balcons en m2\",\n  \"Forms.bank3A\": \"Banque 3A\",\n  \"Forms.bank3A.value\": \"Capital disponible\",\n  \"Forms.bank3A.description\": \"Description\",\n  \"Forms.bank3A.description.placeholder\": \"Nom de la banque\",\n  \"Forms.bank3A.value.placeholder\": \"CHF 10 000\",\n  \"Forms.bankFortune.placeholder\": \"CHF 100 000\",\n  \"Forms.bankFortune\": \"Fortune Bancaire\",\n  \"Forms.bathroomCount.info\": \"Salles de bains ou salles d’eau (respectivement avec baignoire ou douche)\",\n  \"Forms.bathroomCount.placeholder\": \"1\",\n  \"Forms.bathroomCount\": \"Nb. de salles de bain\",\n  \"Forms.birthPlace.placeholder\": \"Berne, Suisse\",\n  \"Forms.birthPlace\": \"Lieu de Naissance\",\n  \"Forms.bonus2019.placeholder\": \"CHF 10 000\",\n  \"Forms.bonus2019\": \"Bonus 2019\",\n  \"Forms.bonus2018.placeholder\": \"CHF 10 000\",\n  \"Forms.bonus2018\": \"Bonus 2018\",\n  \"Forms.bonus2015.placeholder\": \"CHF 10 000\",\n  \"Forms.bonus2015\": \"Bonus 2015\",\n  \"Forms.bonus2016.placeholder\": \"CHF 10 000\",\n  \"Forms.bonus2016\": \"Bonus 2016\",\n  \"Forms.bonus2017.placeholder\": \"CHF 10 000\",\n  \"Forms.bonus2017\": \"Bonus 2017\",\n  \"Forms.bonusExists\": \"Avez-vous reçu un bonus ?\",\n  \"Forms.borrower\": \"Emprunteur\",\n  \"Forms.box.placeholder\": \"1\",\n  \"Forms.box\": \"Box de parking\",\n  \"Forms.childrenCount.placeholder\": \"0\",\n  \"Forms.childrenCount\": \"Enfants à charge\",\n  \"Forms.citizenship.placeholder\": \"Français, Allemand, Italien\",\n  \"Forms.citizenship\": \"Nationalité\",\n  \"Forms.city\": \"Commune\",\n  \"Forms.civilStatus.DIVORCED\": \"{gender, select, F {Divorcée} other {Divorcé}}\",\n  \"Forms.civilStatus.MARRIED\": \"{gender, select, F {Mariée} other {Marié}}\",\n  \"Forms.civilStatus.PACSED\": \"{gender, select, F {Pacsée} other {Pacsé}}\",\n  \"Forms.civilStatus.SINGLE\": \"Célibataire\",\n  \"Forms.civilStatus.WIDOW\": \"{gender, select, F {Veuve} other {Veuf}}\",\n  \"Forms.civilStatus\": \"État civil\",\n  \"Forms.company.placeholder\": \"e-Potek SA\",\n  \"Forms.company\": \"Employeur\",\n  \"Forms.constructionYear.placeholder\": \"2005\",\n  \"Forms.constructionYear\": \"Année de construction\",\n  \"Forms.copropertyPercentage.info\": \"En millièmes\",\n  \"Forms.copropertyPercentage.placeholder\": \"125\",\n  \"Forms.copropertyPercentage\": \"Répartition au sein de la copropriété\",\n  \"Forms.createdAt\": \"Créé le\",\n  \"Forms.currentOwner.0\": \"{name}\",\n  \"Forms.currentOwner.1\": \"{name}\",\n  \"Forms.currentOwner.BOTH\": \"Les Deux\",\n  \"Forms.currentOwner.OTHER\": \"Autre\",\n  \"Forms.currentOwner\": \"Qui est le propriétaire actuel ?\",\n  \"Forms.email\": \"Email\",\n  \"Forms.expenses.description\": \"Type de charge\",\n  \"Forms.expenses.LEASING\": \"Leasings\",\n  \"Forms.expenses.OTHER\": \"Autre\",\n  \"Forms.expenses.PENSIONS\": \"Rentes et pensions versées\",\n  \"Forms.expenses.PERSONAL_LOAN\": \"Crédits personnels\",\n  \"Forms.expenses.THIRD_PARTY_FORTUNE_REIMBURSEMENT\": \"Remboursement prêt de tiers\",\n  \"Forms.expenses.value.placeholder\": \"CHF 10 000\",\n  \"Forms.expenses.value\": \"Montant annuel\",\n  \"Forms.expenses\": \"Charges financières\",\n  \"Forms.firstName.placeholder\": \"Marie\",\n  \"Forms.firstName\": \"Prénom\",\n  \"Forms.flatType.DUPLEX_APARTMENT\": \"Duplex\",\n  \"Forms.flatType.PENTHOUSE_APARTMENT\": \"Appartement attique\",\n  \"Forms.flatType.PENTHOUSE_MAISONETTE\": \"Duplex / attique\",\n  \"Forms.flatType.SINGLE_FLOOR_APARTMENT\": \"Appartement à l'étage\",\n  \"Forms.flatType.TERRACE_APARTMENT\": \"Appartment de rez-de-chaussée\",\n  \"Forms.flatType\": \"Type d'appartement\",\n  \"Forms.floorNumber.placeholder\": \"2\",\n  \"Forms.floorNumber\": \"Étage de votre appartement\",\n  \"Forms.fortune\": \"Fortune\",\n  \"Forms.fortuneUsed\": \"Fortune utilisé\",\n  \"Forms.futureOwner.0\": \"{name}\",\n  \"Forms.futureOwner.1\": \"{name}\",\n  \"Forms.futureOwner.both\": \"Les Deux\",\n  \"Forms.futureOwner.BOTH\": \"Les deux\",\n  \"Forms.futureOwner.other\": \"Autre\",\n  \"Forms.futureOwner.OTHER\": \"Autre\",\n  \"Forms.futureOwner\": \"Qui sera le propriétaire du bien immobilier ?\",\n  \"Forms.gender.F\": \"Femme\",\n  \"Forms.gender.M\": \"Homme\",\n  \"Forms.gender.OTHER\": \"Autre\",\n  \"Forms.gender\": \"Sexe\",\n  \"Forms.houseType.ATTACHED_END_BUILDING\": \"Mitoyenne à l'extrémité de la rangée\",\n  \"Forms.houseType.ATTACHED_MID_TERRACE_BUILDING\": \"Mitoyenne au centre de la rangée\",\n  \"Forms.houseType.DETACHED\": \"Individuelle\",\n  \"Forms.houseType\": \"Type de villa\",\n  \"Forms.incomeAndExpenses\": \"Revenus & Charges\",\n  \"Forms.parkingInside.placeholder\": \"1\",\n  \"Forms.parkingInside\": \"Places de parc intérieur\",\n  \"Forms.promotionLot\": \"Allouer au lot\",\n  \"Forms.insideArea.placeholder\": \"150\",\n  \"Forms.insideArea.recapPlaceholder\": \"À préciser\",\n  \"Forms.insideArea\": \"Surface habitable en m2\",\n  \"Forms.insurance\": \"Capitaux disponibles\",\n  \"Forms.insurance3B.placeholder\": \"CHF 100 000\",\n  \"Forms.insurance3B\": \"Assurance 3B\",\n  \"Forms.insurance3B.value\": \"Capital disponible\",\n  \"Forms.insurance3B.description\": \"Description\",\n  \"Forms.insurance3B.description.placeholder\": \"Nom de l'assurance\",\n  \"Forms.insurance3B.value.placeholder\": \"CHF 10 000\",\n  \"Forms.insuranceFortuneUsed\": \"Fortune Insurance utilisé\",\n  \"Forms.insurancePureRisk.placeholder\": \"CHF 100 000\",\n  \"Forms.insurancePureRisk\": \"Risque pure\",\n  \"Forms.insurance2.placeholder\": \"CHF 100 000\",\n  \"Forms.insurance2\": \"LPP, 2ème Pilier\",\n  \"Forms.insurance2.value\": \"Capital disponible\",\n  \"Forms.insurance2.description\": \"Description\",\n  \"Forms.insurance2.description.placeholder\": \"Nom de la caisse de prévoyance\",\n  \"Forms.insurance2.value.placeholder\": \"CHF 10 000\",\n  \"Forms.insurance3A.placeholder\": \"CHF 100 000\",\n  \"Forms.insurance3A\": \"Assurance 3A\",\n  \"Forms.insurance3A.value\": \"Capital disponible\",\n  \"Forms.insurance3A.description\": \"Description\",\n  \"Forms.insurance3A.description.placeholder\": \"Nom de l'assurance\",\n  \"Forms.insurance3A.value.placeholder\": \"CHF 10 000\",\n  \"Forms.investment\": \"Bien d'investissement\",\n  \"Forms.isCoproperty\": \"Est-ce une copropriété ?\",\n  \"Forms.isNew\": \"Est-ce un bien neuf ?\",\n  \"Forms.isSwiss\": \"Avez-vous la nationalité Suisse ?\",\n  \"Forms.isUSPerson\": \"Êtes-vous une US Person ?\",\n  \"Forms.landArea.placeholder\": \"250\",\n  \"Forms.landArea\": \"Surface du terrain en m2\",\n  \"Forms.lastName.placeholder\": \"Ducret\",\n  \"Forms.lastName\": \"Nom\",\n  \"Forms.loan\": \"Hypothèque\",\n  \"Forms.mandatory\": \"Les champs marqués avec un * sont obligatoires\",\n  \"Forms.minergie.MINERGIE_ECO\": \"Minergie-ECO\",\n  \"Forms.minergie.MINERGIE_P_ECO\": \"Minergie-P-ECO\",\n  \"Forms.minergie.MINERGIE_P\": \"Minergie-P\",\n  \"Forms.minergie.OTHER_CERTIFICATE\": \"Autre certificat Minergie\",\n  \"Forms.minergie.WITHOUT_CERTIFICATE\": \"Sans certificat Minergie\",\n  \"Forms.minergie\": \"Certificat Minergie\",\n  \"Forms.yearlyExpenses.placeholder\": \"12 000\",\n  \"Forms.yearlyExpenses\": \"Charges annuelles du bien immobilier\",\n  \"Forms.yearlyExpenses.info\": \"Facultatif: Inclut ce montant dans les charges du prêt hypothécaire\",\n  \"Forms.numberOfFloors.placeholder\": \"2\",\n  \"Forms.numberOfFloors\": \"Nombre d'étages dans l'immeuble\",\n  \"Forms.organisation\": \"Organisation\",\n  \"Forms.otherFortune.description\": \"Type de Fortune\",\n  \"Forms.otherFortune.description.placeholder\": \"Bijoux\",\n  \"Forms.otherFortune.value.description\": \"CHF 100 000\",\n  \"Forms.otherFortune.value\": \"Valeur\",\n  \"Forms.otherFortune\": \"Autre Fortune\",\n  \"Forms.otherIncome.description\": \"Type de revenu\",\n  \"Forms.otherIncome.INVESTMENT\": \"Revenus de titres\",\n  \"Forms.otherIncome.OTHER\": \"Autre\",\n  \"Forms.otherIncome.PENSIONS\": \"Rentes et pensions reçues\",\n  \"Forms.otherIncome.REAL_ESTATE\": \"Revenus de fortune immobilière\",\n  \"Forms.otherIncome.value.placeholder\": \"CHF 10 000\",\n  \"Forms.otherIncome.value\": \"Montant annuel\",\n  \"Forms.otherIncome.WELFARE\": \"Allocations\",\n  \"Forms.otherIncome\": \"Autres revenus\",\n  \"Forms.otherNotes.placeholder\": \"Aménagements extérieurs, piscine, jardins, cabanons, annexes, sous-sols utiles,...\",\n  \"Forms.otherNotes\": \"Autres informations\",\n  \"Forms.otherOwner\": \"Autre propriétaire\",\n  \"Forms.otherOwner.placeholder\": \"Marie Rochat\",\n  \"Forms.parkingOutside.placeholder\": \"1\",\n  \"Forms.parkingOutside\": \"Places de parc extérieur\",\n  \"Forms.permissions.MODIFY\": \"Modification\",\n  \"Forms.permissions.READ\": \"Consultation\",\n  \"Forms.personalBank.placeholder\": \"UBS\",\n  \"Forms.personalBank\": \"Votre Banque Personelle\",\n  \"Forms.phoneNumber\": \"Téléphone\",\n  \"Forms.primary\": \"Résidence principale\",\n  \"Forms.propertyAddress\": \"Adresse du bien immobilier\",\n  \"Forms.propertyDetails\": \"Détails du bien\",\n  \"Forms.propertyInfo\": \"Informations générales sur la propriété\",\n  \"Forms.propertyType.FLAT\": \"Appartement\",\n  \"Forms.propertyType.HOUSE\": \"Villa\",\n  \"Forms.propertyType\": \"Type de bien immobilier\",\n  \"Forms.propertyWork.placeholder\": \"CHF 50 000\",\n  \"Forms.propertyWork\": \"Travaux de plus-value\",\n  \"Forms.realEstate.description\": \"Type de propriété\",\n  \"Forms.realEstate.INVESTMENT\": \"Bien d'investissement\",\n  \"Forms.realEstate.loan.placeholder\": \"CHF 300 000\",\n  \"Forms.realEstate.loan\": \"Emprunt actuel\",\n  \"Forms.realEstate.MAIN_RESIDENCE\": \"Propriété principale\",\n  \"Forms.realEstate.COMMERCE\": \"Bien commercial\",\n  \"Forms.realEstate.PRIMARY\": \"Propriété principale\",\n  \"Forms.realEstate.SECOND_RESIDENCE\": \"Propriété secondaire\",\n  \"Forms.realEstate.SECONDARY\": \"Propriété secondaire\",\n  \"Forms.realEstate.value.placeholder\": \"CHF 400 000\",\n  \"Forms.realEstate.value\": \"Valeur du bien\",\n  \"Forms.realEstate\": \"Fortune Immobilière\",\n  \"Forms.renovationYear.info\": \"Seulement si la propriété a été rénovée\",\n  \"Forms.renovationYear.placeholder\": \"2010\",\n  \"Forms.renovationYear\": \"Année de rénovation\",\n  \"Forms.residenceType.INVESTMENT\": \"Bien d'investissement\",\n  \"Forms.residenceType.MAIN_RESIDENCE\": \"Résidence principale\",\n  \"Forms.residenceType.COMMERCE\": \"Bien commercial\",\n  \"Forms.residenceType.SECOND_RESIDENCE\": \"Résidence secondaire\",\n  \"Forms.residenceType\": \"Type d'utilisation\",\n  \"Forms.residencyPermit.b\": \"Permis B\",\n  \"Forms.residencyPermit.c\": \"Permis C\",\n  \"Forms.residencyPermit.ci\": \"Permis Ci\",\n  \"Forms.residencyPermit.f\": \"Permis F\",\n  \"Forms.residencyPermit.g\": \"Permis G\",\n  \"Forms.residencyPermit.l\": \"Permis L\",\n  \"Forms.residencyPermit.n\": \"Permis N\",\n  \"Forms.residencyPermit.none\": \"Pas de permis\",\n  \"Forms.residencyPermit.s\": \"Permis S\",\n  \"Forms.residencyPermit\": \"Permis de résidence\",\n  \"Forms.roles\": \"Roles\",\n  \"Forms.roomCount.info\": \"Sans compter la cuisine\",\n  \"Forms.roomCount.placeholder\": \"3.5\",\n  \"Forms.roomCount\": \"Nb. de pièces\",\n  \"Forms.salary.placeholder\": \"CHF 100 000\",\n  \"Forms.salary\": \"Revenus bruts annuels\",\n  \"Forms.sameAddress\": \"Utiliser la même adresse que {name} ?\",\n  \"Forms.secondary\": \"Résidence secondaire\",\n  \"Forms.terraceArea.placeholder\": \"40\",\n  \"Forms.terraceArea\": \"Surface des terrasses en m2\",\n  \"Forms.textInput.placeholderPrefix\": \"p.ex:\",\n  \"Forms.toiletCount.placeholder\": \"1\",\n  \"Forms.toiletCount\": \"Nb. de WC\",\n  \"Forms.unassigned\": \"Non assigné\",\n  \"Forms.updatedAt\": \"Modifié le\",\n  \"Forms.usageType.INVESTMENT\": \"Bien d'investissement\",\n  \"Forms.usageType.PRIMARY\": \"Résidence principale\",\n  \"Forms.usageType.SECONDARY\": \"Résidence secondaire\",\n  \"Forms.usageType\": \"Type d'utilisation\",\n  \"Forms.user\": \"Utilisateur\",\n  \"Forms.value.placeholder\": \"CHF 500 000\",\n  \"Forms.value\": \"{purchaseType, select, REFINANCING {Valeur du bien} CONSTRUCTION {Montant de la construction} mortgageNote {Montant de la cédule} other {Prix d'achat}}\",\n  \"Forms.value.info\": \"Arrondi à CHF 1000.- près\",\n  \"Forms.volume.placeholder\": \"1000\",\n  \"Forms.volume\": \"Volume/Cubage en m3\",\n  \"Forms.volumeNorm.BIC\": \"BIC\",\n  \"Forms.volumeNorm.placeholder\": \"SIA\",\n  \"Forms.volumeNorm.SIA_116\": \"SIA 116\",\n  \"Forms.volumeNorm.SIA_416\": \"SIA 416\",\n  \"Forms.volumeNorm\": \"Type de cubage\",\n  \"Forms.worksForOwnCompany\": \"Êtes-vous actionnaire significatif de cette entreprise ?\",\n  \"Forms.yourAddress\": \"Votre adresse\",\n  \"Forms.zipCode.placeholder\": \"1201\",\n  \"Forms.zipCode\": \"Code postal\",\n  \"general.1\": \"Un\",\n  \"general.2\": \"Deux\",\n  \"general.add\": \"Ajouter\",\n  \"general.amortization\": \"Amortissement\",\n  \"general.areYouSure\": \"Êtes-vous sûr ?\",\n  \"general.borrower\": \"Emprunteur\",\n  \"general.borrowerWithIndex\": \"Emprunteur {index}\",\n  \"general.buildingMaintenance\": \"Frais d'entretien\",\n  \"general.cancel\": \"Annuler\",\n  \"general.close\": \"Fermer\",\n  \"general.continue\": \"Continuer\",\n  \"general.delete\": \"Supprimer\",\n  \"general.download\": \"Télécharger\",\n  \"general.erase\": \"Effacer\",\n  \"general.filterBy\": \"Filtrer par\",\n  \"general.here\": \"ici\",\n  \"general.hide\": \"Masquer\",\n  \"general.income\": \"Revenus\",\n  \"general.insuranceFees\": \"Frais retrait Prévoyance\",\n  \"general.insuranceFunds\": \"Prévoyance\",\n  \"general.interests\": \"Intérêts\",\n  \"general.learnMore\": \"En savoir plus\",\n  \"general.lenders\": \"Prêteurs\",\n  \"general.loan\": \"Hypothèque\",\n  \"general.login\": \"Login\",\n  \"general.logout\": \"Déconnexion\",\n  \"general.maintenance\": \"Charges mensuelles\",\n  \"general.modify\": \"Modifier\",\n  \"general.mortgageLoan\": \"Prêt Hypothécaire\",\n  \"general.no\": \"Non\",\n  \"general.noBorrowersForLoan\": \"Pas d'emprunteurs pour cet hypothèque\",\n  \"general.notaryFees\": \"Frais de notaire\",\n  \"general.ok\": \"Ok\",\n  \"general.one\": \"Un\",\n  \"general.ownFunds\": \"Fonds propres\",\n  \"general.perMonth\": \"/mois\",\n  \"general.progress\": \"Progrès: {value, number, percent}\",\n  \"general.property\": \"Bien immobilier\",\n  \"general.remove\": \"Supprimer\",\n  \"general.salary\": \"Salaire\",\n  \"general.save\": \"Sauvegarder\",\n  \"general.savings\": \"Épargne\",\n  \"general.search\": \"Rechercher\",\n  \"general.settings\": \"Réglages\",\n  \"general.showAll\": \"Afficher tout\",\n  \"general.signup\": \"Créer un compte\",\n  \"general.sortBy\": \"Trier par\",\n  \"general.start\": \"Commencer\",\n  \"general.validate\": \"Valider\",\n  \"general.calculate\": \"Calculer\",\n  \"general.yes\": \"Oui\",\n  \"GoogleMapsAutocomplete.label\": \"Addresse de la propriété\",\n  \"HomeDev.CTA\": \"M'avertir par e-mail\",\n  \"HomeDev.description\": \"Nous allons bientôt ouvrir e-Potek aux refinancements, soyez le premier averti !\",\n  \"HomeDev.title\": \"En Développement\",\n  \"HomePage.CTA.buy\": \"Faire une acquisition\",\n  \"HomePage.CTA1\": \"Faire une acquisition\",\n  \"HomePage.CTA12\": \"Financement hypothécaire\",\n  \"HomePage.CTA2\": \"Refinancer un bien\",\n  \"HomePage.description\": \"Votre guide pour traverser la jungle hypothécaire.\",\n  \"HomePage.sellingpoint1.text\": \"Identifiez le montant que vous pouvez emprunter en quelques clics.\",\n  \"HomePage.sellingpoint1.title\": \"1. Testez votre éligibilité\",\n  \"HomePage.sellingpoint2.text\": \"Obtenez de manière anonyme des offres sur mesure de la part des prêteurs du marché.\",\n  \"HomePage.sellingpoint2.title\": \"2. Organisez les enchères\",\n  \"HomePage.sellingpoint3.text\": \"La plateforme simple et sécurisée vous permet de communiquer facilement avec votre prêteur.\",\n  \"HomePage.sellingpoint3.title\": \"3. Communiquez avec votre prêteur\",\n  \"HomePage.sellingpoint4.text\": \"Vous êtes accompagnés dans vos décisions stratégiques par des spécialistes en financement jusqu'à l'obtention de votre prêt.\",\n  \"HomePage.sellingpoint4.title\": \"4. Obtenez votre prêt\",\n  \"HomePage.sellingpoint5.text\": \"Avancez à votre rythme, arrêtez quand vous voulez, tout ça en toute gratuité, pour toujours.\",\n  \"HomePage.sellingpoint5.title\": \"Sans engagement et entièrement gratuit\",\n  \"HomePage.sellingpoint6.text\": \"Vos données sont en sûreté, et vous maintenez une confidentialité maximale auprès de tous les établissements financiers.\",\n  \"HomePage.sellingpoint6.title\": \"En toute sécurité\",\n  \"HomePage.tagline1\": \"Mettez votre prêt hypothécaire aux enchères\",\n  \"HomePage.tagline2\": \"Tout simplement\",\n  \"HomePage.webapp.description\": \"Notre application vous accompagne du début jusqu'à la fin et s'adapte de façon intelligente à votre situation\",\n  \"HomePage.webapp.title\": \"Votre guide personnel\",\n  \"HomePageDescription.description\": \"Face aux nombreuses options proposées sur le marché, comparer différents prêteurs et produits de financement hypothécaire peut devenir un processus fastidieux. Il est ainsi facile de se perdre dans la jungle hypothécaire face à des offres aux conditions de taux apparaissant très avantageuses mais malheureusement valables uniquement sous certaines conditions exceptionnelles et donc applicables qu’à une faible minorité du marché.\",\n  \"HomePageDescription.description2\": \"Un accompagnement total: e-Potek vous accompagne durant toute la durée de votre projet de financement et au-delà. Vous disposez également de solutions d’assurances, fiscales et juridiques. Vous pouvez, par exemple, être conseillé pour mettre en place le plan financier le plus optimal pour vos projets et même faire expertiser votre logement pour l’acquérir ou le vendre au bon prix.\",\n  \"HomePageDescription.description3\": \"Un service centralisé: e-potek réunit, en un seul endroit, l’intégralité des acteurs du marché ainsi que les informations indispensables à la bonne compréhension des enjeux du financement hypothécaire. Disposez d’un accès gratuit à des informations rédigées par des professionnels qualifiés des domaines liés à votre projet (droit, notariat, immobilier, fiscalité, économie, assurance et plus) accessibles gratuitement et en tout temps.\",\n  \"HomePageDescription.description4\": \"Des données fiables: Evitez les pièges et soyez au courant des réalités du marché hypothécaire en recevant des conditions de financement sur-mesure et classées par ordre de pertinence. Déterminez précisément et en fonction de vos caractéristiques le meilleur partenaire pour vous accompagner.\",\n  \"HomePageDescription.seoTitle\": \"e-Potek, la révolution de l’hypothèque\",\n  \"HomePageDescription.stepsTitle\": \"La méthode e-Potek\",\n  \"HomePageDescriptionSeo.less\": \"Masquer\",\n  \"HomePageDescriptionSeo.more\": \"En savoir plus\",\n  \"HomePageHeader.description\": \"Soyez accompagnés dans vos décisions stratégiques par des spécialistes en financement hypothécaire, jusqu'à l'obtention de votre prêt.\",\n  \"HomePageHeader.title\": \"Obtenez la meilleure hypothèque du marché\",\n  \"HomePageReviewsTitle.title\": \"Ce qu'on dit à propos d'e-Potek\",\n  \"Impersonation.impersonateLinkText\": \"Se faire passer pour cet utilisateur\",\n  \"Impersonation.impersonationSuccess\": \"Actuellement connecté comme {email}\",\n  \"Info.title\": \"Mes Informations Personelles\",\n  \"InsuranceStrategy.description\": \"Vous avez décidé d'utiliser votre prévoyance pour ce projet. Il faut encore décider par quel mécanisme financier vous allez le faire.\",\n  \"InsuranceStrategy.title\": \"Stratégie de prévoyance\",\n  \"InterestRanges.title\": \"Vos Taux\",\n  \"InterestsPage.description\": \"Taux hypothécaires reçus de la part des prêteurs lors des dernières négociations. Attention à ne pas oublier que les conditions de taux varient fortement selon les dossiers. Ils dépendent principalement de la solvabilité et du montant emprunté.\",\n  \"InterestsPage.title\": \"Nos taux hypothécaires\",\n  \"InterestsTable.duration\": \"Durée\",\n  \"InterestsTable.interest1\": \"1 an\",\n  \"InterestsTable.interest10\": \"10 ans\",\n  \"InterestsTable.interest15\": \"15 ans\",\n  \"InterestsTable.interest2\": \"2 ans\",\n  \"InterestsTable.interest20\": \"20 ans\",\n  \"InterestsTable.interest25\": \"25 ans\",\n  \"InterestsTable.interest5\": \"5 ans\",\n  \"InterestsTable.interestLibor\": \"Libor\",\n  \"InterestsTable.rate\": \"Taux\",\n  \"InterestsTable.rateLow\": \"Min\",\n  \"InterestsTable.rateHigh\": \"Max\",\n  \"InterestsTable.trend\": \"Tendance\",\n  \"LayoutError.description\": \"Quelque chose n'a pas fonctionné comme prévu, on en est déjà informés, et vous pouvez essayer de recharger la page.{verticalSpace}Si ça ne résoud pas le problème, écrivez-nous à digital@e-potek.ch.\",\n  \"LayoutError.redirectHome\": \"Page d'accueil\",\n  \"LayoutError.reload\": \"Recharger la page\",\n  \"LayoutError.title\": \"Woops une erreur!\",\n  \"LenderSummary.amount\": \"Montant prêté le plus élevé\",\n  \"LenderSummary.count\": \"Quantité\",\n  \"LenderSummary.monthly\": \"Coût mensuel le plus bas\",\n  \"LenderSummary.title\": \"Offres correspondant à vos critères\",\n  \"LenderTable.amount\": \"Montant prêté\",\n  \"LenderTable.conditions\": \"Conditions ?\",\n  \"LenderTable.monthly\": \"Coût mensuel\",\n  \"LenderTable.perMonth\": \"/mois\",\n  \"LoanAdder.dialogTitle\": \"Ajouter une hypothèque\",\n  \"LoanSelector.addLoan\": \"Ajouter nouvelle demande\",\n  \"LoansPage.title\": \"Hypothèques\",\n  \"LoanStrategyPicker.description\": \"Il n'y a pas une seule stratégie parfaite pour structurer votre prêt, cependant, nous pouvons vous aiguiller dans la bonne direction grâce à notre savoir-faire.{verticalSpace}Sinon, utilisez notre outil interactif ci-dessous.\",\n  \"LoanStrategyPicker.disclaimer\": \"* Ce choix est indicatif, et vous permet de déterminer quelle stratégie vous conviendra le mieux.\",\n  \"LoanStrategyPicker.title\": \"Stratégie de taux\",\n  \"LoanSummaryColumn.createdAt\": \"Créé le\",\n  \"LoanSummaryColumn.ownFunds\": \"Fonds propres\",\n  \"LoanSummaryColumn.ownFundsPledged\": \"Fonds propres nantis\",\n  \"LoanSummaryColumn.propertyValue\": \"Valeur du bien\",\n  \"LoanSummaryColumn.status\": \"Statut\",\n  \"LoanSummaryColumn.updatedAt\": \"Updaté le\",\n  \"LoanSummaryList.noLoans\": \"Aucune hypothèque trouvée!\",\n  \"LoanTabs.actions\": \"Actions\",\n  \"LoanTabs.analytics\": \"Analytics\",\n  \"LoanTabs.borrowers\": \"Emprunteurs\",\n  \"LoanTabs.communication\": \"Communication\",\n  \"LoanTabs.files\": \"Documents\",\n  \"LoanTabs.forms\": \"Formulaires\",\n  \"LoanTabs.offers\": \"Offres des prêteurs\",\n  \"LoanTabs.overview\": \"Résumé\",\n  \"LoanTabs.properties\": \"Biens immobiliers\",\n  \"LoanTabs.structures\": \"Plans financiers\",\n  \"LoanTabs.tasks\": \"Tâches\",\n  \"LoanTaskInsertForm.label\": \"Ajouter tâche\",\n  \"LoanTaskInsertForm.dialogTitle\": \"Nouvelle tâche\",\n  \"LoanTaskInsertForm.dialogDescription\": \"Cette tâche sera liée à cette hypothèque\",\n  \"LoanTaskInsertForm.title\": \"Description\",\n  \"LoanValidation.comment\": \"Commentaire\",\n  \"LoanValidation.field\": \"Champ\",\n  \"LoanValidation.file\": \"Document\",\n  \"LoanValidation.invalidatedAt\": \"Invalidé le\",\n  \"LoanValidation.notYetRequested\": \"Vérification pas encore demandée\",\n  \"LoanValidation.requestedAt\": \"Vérification demandée le\",\n  \"LoanValidation.validatedAt\": \"Vérifié le\",\n  \"LoginForm.email\": \"Adresse e-mail\",\n  \"LoginForm.password\": \"Mot de passe\",\n  \"LoginPage.title\": \"Accédez à votre compte e-Potek\",\n  \"LoginPage.description\": \"Gérez votre demande de prêt hypothécaire, accompagné(e) par nos conseillers.\",\n  \"LoginPage.contactUs\": \"Contactez-nous.\",\n  \"LoginPage.loggedIn\": \"Vous êtes connecté\",\n  \"Microlocation.open\": \"Afficher l'expertise complète\",\n  \"Microlocation.close\": \"Masquer\",\n  \"Microlocation.distanceBusStopLabel\": \"Arrêt de transport public\",\n  \"Microlocation.distanceCenterLabel\": \"Centre\",\n  \"Microlocation.distanceHighVoltagePowerLineLabel\": \"Lignes à haute tension\",\n  \"Microlocation.distanceLakeLabel\": \"Lac\",\n  \"Microlocation.distanceMainRoadResidentialLabel\": \"Route principale (résidentielle)\",\n  \"Microlocation.distanceNuclearPowerLabel\": \"Centrale nucléaire\",\n  \"Microlocation.distanceRadioAntennaLabel\": \"Antenne radio mobile\",\n  \"Microlocation.distanceRailwayLabel\": \"Chemin de fer\",\n  \"Microlocation.distanceRecreationAreaLabel\": \"Espaces de détente, nature\",\n  \"Microlocation.distanceRiverLabel\": \"Rivière\",\n  \"Microlocation.distanceSchoolLabel\": \"École/jardin d'enfants\",\n  \"Microlocation.distanceShoppingLabel\": \"Centre commercial\",\n  \"Microlocation.expositionLabel\": \"Exposition\",\n  \"Microlocation.immissionLabel\": \"Émissions\",\n  \"Microlocation.immissionStreetDayLabel\": \"Émissions routières (journée)\",\n  \"Microlocation.immissionStreetNightLabel\": \"Émissions routières (nuit)\",\n  \"Microlocation.immissionTrainDayLabel\": \"Émissions ferroviaire (journée)\",\n  \"Microlocation.immissionTrainNightLabel\": \"Émissions ferroviaire (nuit)\",\n  \"Microlocation.infrastructureLabel\": \"Infrastructure\",\n  \"Microlocation.lakeViewLabel\": \"Vue sur le lac\",\n  \"Microlocation.mountainViewLabel\": \"Vue sur les montagnes\",\n  \"Microlocation.publicTransportGradeLabel\": \"Qualité de la desserte en transports publics\",\n  \"Microlocation.slopeInclinationLabel\": \"Inclinaison\",\n  \"Microlocation.sunShineDurationSummerLabel\": \"Durée d'ensoleillement en été\",\n  \"Microlocation.sunShineDurationWinterLabel\": \"Durée d'ensoleillement en hiver\",\n  \"Microlocation.terrainLabel\": \"Terrain, vue et climat\",\n  \"Microlocation.title\": \"Analyse géographique\",\n  \"MissingDoc.redirectHome\": \"Page d'accueil\",\n  \"MissingDoc.text\": \"Le document a été supprimé ou n'existe pas!\",\n  \"NewDocumentForm.cta\": \"Ajouter\",\n  \"NewDocumentForm.label\": \"Ajouter nouveau document à ce prêt\",\n  \"NewDocumentForm.placeholder\": \"Nom du document (visible à l'utilisateur)\",\n  \"NewLoanForm.nextButton\": \"Suivant\",\n  \"NewLoanForm.previousButton\": \"Précédent\",\n  \"NewLoanForm.submitButton\": \"Valider\",\n  \"NewLoanForm.title\": \"Nous avons besoin de quelques informations afin de commencer votre projet\",\n  \"NewLoanForm.loanNameText\": \"Donnez un nom à votre projet\",\n  \"NewLoanForm.loanNameLabel\": \"Nom du projet\",\n  \"NewLoanForm.propertyValueText\": \"Quel est le prix d'achat de votre bien immobilier ?\",\n  \"NewLoanForm.propertyValueLabel\": \"Prix d'achat\",\n  \"NewLoanForm.propertyValueInfo\": \"Arrondi à CHF 1000.- près\",\n  \"NewLoanForm.borrowerSalaryText\": \"Quel est votre salaire annuel brut ?\",\n  \"NewLoanForm.borrowerSalaryLabel\": \"Salaire annuel\",\n  \"NewLoanForm.borrowerFortuneText\": \"Quels sont vos fonds propres ?\",\n  \"NewLoanForm.borrowerFortuneLabel\": \"Fonds propres\",\n  \"NewLoanModal.description\": \"Ça nous permettra de l'identifier\",\n  \"NewLoanModal.label\": \"Nom du projet\",\n  \"NewLoanModal.placeholder\": \"Rue du Pré 2\",\n  \"NewLoanModal.title\": \"Donnez un nom à votre projet, il sera visible par e-Potek.\",\n  \"NewUserOptions.description\": \"Vous pourrez monter votre dossier, lancer les enchères, et conclure votre demande de prêt depuis ici.\",\n  \"NewUserOptions.title\": \"Ça à l'air bien vide ici!\",\n  \"NotFound.button\": \"Retourner à la maison\",\n  \"NotFound.description\": \"On dirait que vous vous êtes perdu!\",\n  \"NotFound.title\": \"Oops..\",\n  \"offer.amortization\": \"Amortissement\",\n  \"offer.averagedRate\": \"Taux lissé\",\n  \"offer.conditions\": \"Conditions de base\",\n  \"Forms.conditions\": \"Conditions de base\",\n  \"offer.counterparts\": \"Contreparties\",\n  \"Forms.counterparts\": \"Contreparties\",\n  \"offer.interest1\": \"Taux 1 an\",\n  \"offer.interest10\": \"Taux 10 ans\",\n  \"offer.interest15\": \"Taux 15 ans\",\n  \"offer.interest2\": \"Taux 2 ans\",\n  \"offer.interest20\": \"Taux 20 ans\",\n  \"offer.interest25\": \"Taux 25 ans\",\n  \"offer.interest5\": \"Taux 5 ans\",\n  \"Forms.interestLibor\": \"Taux Libor\",\n  \"Forms.interest1\": \"Taux 1 an\",\n  \"Forms.interest10\": \"Taux 10 ans\",\n  \"Forms.interest15\": \"Taux 15 ans\",\n  \"Forms.interest2\": \"Taux 2 ans\",\n  \"Forms.interest20\": \"Taux 20 ans\",\n  \"Forms.interest25\": \"Taux 25 ans\",\n  \"Forms.interest5\": \"Taux 5 ans\",\n  \"offer.interestLibor\": \"Taux Libor\",\n  \"offer.interest1.short\": \"1 an\",\n  \"offer.interest10.short\": \"10 ans\",\n  \"offer.interest15.short\": \"15 ans\",\n  \"offer.interest2.short\": \"2 ans\",\n  \"offer.interest20.short\": \"20 ans\",\n  \"offer.interest25.short\": \"25 ans\",\n  \"offer.interest5.short\": \"5 ans\",\n  \"offer.interestLibor.short\": \"Libor\",\n  \"offer.maxAmount\": \"Prêt maximal\",\n  \"Forms.maxAmount\": \"Prêt maximal\",\n  \"Forms.maxAmount.placeholder\": \"CHF 800 000\",\n  \"offer.monthly\": \"Coût Mensuel\",\n  \"offer.rating\": \"Rating\",\n  \"OfferAdder.buttonLabel\": \"Ajouter une offre\",\n  \"OfferAdder.dialogDescription\": \"Ce formulaire ne perd pas ses données si tu fermes ceci par accident\",\n  \"OfferAdder.dialogTitle\": \"Ajouter une offre\",\n  \"OfferAdder.discount\": \"Rabais (valeur positive)\",\n  \"OfferAdder.hasCounterparts\": \"Ajouter une deuxième offre avec contreparties\",\n  \"Forms.hasCounterparts\": \"Ajouter une 2ème offre avec contreparties\",\n  \"OfferAdder.isDiscount\": \"Taux contreparties avec flat discount\",\n  \"OfferAdder.organisation\": \"Nom du prêteur\",\n  \"OfferPickerPage.description\": \"Choisissez l'offre qui vous convient.\",\n  \"OfferPickerPage.title\": \"Les meilleures offres\",\n  \"OffersTable.amount\": \"Montant\",\n  \"OffersTable.conditions\": \"Conditions ?\",\n  \"OffersTable.libor\": \"Taux Libor\",\n  \"OffersTable.years\": \"{years, plural, one {Taux un an} other {Taux # ans}}\",\n  \"OfferToggle.counterpart-short\": \"Avec contrepartie\",\n  \"OfferToggle.counterpart\": \"Offres avec contrepartie ({count})\",\n  \"OfferToggle.standard-short\": \"Standard\",\n  \"OfferToggle.standard\": \"Offres standard ({count})\",\n  \"OverviewTab.emptyRecap\": \"Il manque le valeur du bien et/ou les fonds propres voulus pour afficher ce recap\",\n  \"OverviewTab.recap\": \"Récapitulatif\",\n  \"Page.footer.about\": \"À Propos\",\n  \"Page.footer.careers\": \"Carrières\",\n  \"Page.footer.conditions\": \"Conditions\",\n  \"Page.footer.contact\": \"Contact\",\n  \"Page.footer.faq\": \"FAQ\",\n  \"Forms.oldPassword\": \"Ancien mot de passe\",\n  \"Forms.newPassword\": \"Nouveau mot de passe\",\n  \"Forms.newPassword2\": \"Répéter mot de passe\",\n  \"PasswordLine.create\": \"Créer\",\n  \"PasswordLine.login\": \"Connexion\",\n  \"PasswordPage.button\": \"M'avertir du lancement\",\n  \"PasswordResetPage.confirmPassword\": \"Confirmer mot de passe\",\n  \"PasswordResetPage.CTA\": \"Login\",\n  \"PasswordResetPage.password\": \"Mot de passe\",\n  \"PasswordResetPage.title\": \"Bonjour {name}, choisissez un mot de passe\",\n  \"PasswordResetPage.description\": \"Choisissez votre nouveau mot de passe\",\n  \"PDF.borrowersInfos.age\": \"Âge\",\n  \"PDF.borrowersInfos.bonus\": \"Bonus considéré\",\n  \"PDF.borrowersInfos.category.fortune\": \"Patrimoine\",\n  \"PDF.borrowersInfos.income\": \"Revenus\",\n  \"PDF.borrowersInfos.children\": \"Enfants\",\n  \"PDF.borrowersInfos.civilStatus\": \"Statut matrimonial\",\n  \"PDF.borrowersInfos.civilStatus.DIVORCED\": \"Divorcé\",\n  \"PDF.borrowersInfos.civilStatus.MARRIED\": \"Marié\",\n  \"PDF.borrowersInfos.civilStatus.PACSED\": \"Pacsé\",\n  \"PDF.borrowersInfos.civilStatus.SINGLE\": \"Célibataire\",\n  \"PDF.borrowersInfos.civilStatus.WIDOW\": \"Voeuf\",\n  \"PDF.borrowersInfos.company\": \"Employeur\",\n  \"PDF.borrowersInfos.gender.F\": \"Madame\",\n  \"PDF.borrowersInfos.gender.M\": \"Monsieur\",\n  \"PDF.borrowersInfos.expenses.LEASING\": \"Leasings\",\n  \"PDF.borrowersInfos.expenses.OTHER\": \"Autres dépenses\",\n  \"PDF.borrowersInfos.expenses.PENSIONS\": \"Pensions et rentes versées\",\n  \"PDF.borrowersInfos.expenses.PERSONAL_LOAN\": \"Crédits personnels\",\n  \"PDF.borrowersInfos.expenses.THIRD_PARTY_FORTUNE_REIMBURSEMENT\": \"Remboursement prêt de tiers\",\n  \"PDF.borrowersInfos.expenses.THEORETICAL_REAL_ESTATE\": \"Charges théoriques immobilières\",\n  \"PDF.borrowersInfos.expenses.REAL_ESTATE_DELTA_POSITIVE\": \"Delta immobilier positif\",\n  \"PDF.borrowersInfos.expenses.REAL_ESTATE_DELTA_NEGATIVE\": \"Delta immobilier négatif\",\n  \"PDF.borrowersInfos.otherFortune\": \"Autre fortune\",\n  \"PDF.borrowersInfos.otherIncome.INVESTMENT\": \"Revenus de titres\",\n  \"PDF.borrowersInfos.otherIncome.OTHER\": \"Autres revenus\",\n  \"PDF.borrowersInfos.otherIncome.PENSIONS\": \"Pensions et rentes reçues\",\n  \"PDF.borrowersInfos.otherIncome.REAL_ESTATE\": \"Revenus immobiliers\",\n  \"PDF.borrowersInfos.otherIncome.WELFARE\": \"Allocations familiales\",\n  \"PDF.borrowersInfos.ownFund.bank3A\": \"3A bancaire\",\n  \"PDF.borrowersInfos.ownFund.bankFortune\": \"Cash et Titres\",\n  \"PDF.borrowersInfos.ownFund.insurance2\": \"LPP disponible\",\n  \"PDF.borrowersInfos.ownFund.insurance3A\": \"3A assurance\",\n  \"PDF.borrowersInfos.ownFund.insurance3B\": \"3B assurance\",\n  \"PDF.borrowersInfos.ownFund.thirdPartyFortune\": \"Prêt de tiers\",\n  \"PDF.borrowersInfos.realEstateDebt\": \"Dette y relative\",\n  \"PDF.borrowersInfos.realEstateValue\": \"Immobilier\",\n  \"PDF.borrowersInfos.salary\": \"Salaire annuel brut\",\n  \"PDF.borrowersInfos.netSalary\": \"Salaire annuel net\",\n  \"PDF.borrowersInfos.total\": \"Total considéré\",\n  \"PDF.borrowersInfos.totalFortune\": \"Fonds propres disponibles\",\n  \"PDF.borrowersInfos.totalIncome\": \"Total des revenus considérés\",\n  \"PDF.projectInfos.property.address\": \"Adresse\",\n  \"PDF.projectInfos.property.constructionYear\": \"Année de construction\",\n  \"PDF.projectInfos.property.flatType\": \"Type d'appartement\",\n  \"PDF.projectInfos.property.flatType.DUPLEX_APARTMENT\": \"Duplex\",\n  \"PDF.projectInfos.property.flatType.PENTHOUSE_APARTMENT\": \"Appartement attique\",\n  \"PDF.projectInfos.property.flatType.PENTHOUSE_MAISONETTE\": \"Duplex / attique\",\n  \"PDF.projectInfos.property.flatType.SINGLE_FLOOR_APARTMENT\": \"Appartement à l'étage\",\n  \"PDF.projectInfos.property.flatType.TERRACE_APARTMENT\": \"Appartment de rez-de-chaussée\",\n  \"PDF.projectInfos.property.floorNumber\": \"Étage de l'appartement\",\n  \"PDF.projectInfos.property.houseType\": \"Type de villa\",\n  \"PDF.projectInfos.property.houseType.ATTACHED_END_BUILDING\": \"Mitoyenne à l'extrémité de la rangée\",\n  \"PDF.projectInfos.property.houseType.ATTACHED_MID_TERRACE_BUILDING\": \"Mitoyenne au centre de la rangée\",\n  \"PDF.projectInfos.property.houseType.DETACHED\": \"Individuelle\",\n  \"PDF.projectInfos.property.insideArea\": \"Surface habitable\",\n  \"PDF.projectInfos.property.landArea\": \"Surface du terrain\",\n  \"PDF.projectInfos.property.maintenance\": \"Charges annuelles\",\n  \"PDF.projectInfos.property.minergie\": \"Certificat minergie\",\n  \"PDF.projectInfos.property.minergie.MINERGIE_ECO\": \"Minergie-ECO\",\n  \"PDF.projectInfos.property.minergie.MINERGIE_P_ECO\": \"Minergie-P-ECO\",\n  \"PDF.projectInfos.property.minergie.MINERGIE_P\": \"Minergie-P\",\n  \"PDF.projectInfos.property.minergie.OTHER_CERTIFICATE\": \"Autre certificat Minergie\",\n  \"PDF.projectInfos.property.minergie.WITHOUT_CERTIFICATE\": \"Sans certificat Minergie\",\n  \"PDF.projectInfos.property.numberOfFloors\": \"Nombre d'étages\",\n  \"PDF.projectInfos.property.parking\": \"Parking\",\n  \"PDF.projectInfos.property.propertyType\": \"Type de bien immobilier\",\n  \"PDF.projectInfos.property.propertyType.FLAT\": \"Appartement\",\n  \"PDF.projectInfos.property.propertyType.HOUSE\": \"Villa\",\n  \"PDF.projectInfos.property.renovationYear\": \"Année de rénovation\",\n  \"PDF.projectInfos.property.residenceType\": \"Type de résidence\",\n  \"PDF.projectInfos.property.roomCount\": \"Nombre de pièces\",\n  \"PDF.projectInfos.property.roomCount.tooltip\": \"La cuisine n'est pas comptablisée\",\n  \"PDF.projectInfos.property.terraceArea\": \"Surface des terrasses\",\n  \"PDF.projectInfos.property.title\": \"Bien immobilier\",\n  \"PDF.projectInfos.property.volume\": \"Volume du bâtiment\",\n  \"PDF.projectInfos.property.volumeNorm.SIA_116\": \"SIA 116\",\n  \"PDF.projectInfos.property.volumeNorm.SIA_416\": \"SIA 416\",\n  \"PDF.projectInfos.structure.amortization\": \"Amortissement théorique\",\n  \"PDF.projectInfos.structure.interests\": \"Intérêts théoriques\",\n  \"PDF.projectInfos.structure.maintenance\": \"Entretien théorique\",\n  \"PDF.projectInfos.structure.notaryFees\": \"Frais de notaire\",\n  \"PDF.projectInfos.structure.pledgedOwnFunds\": \"dont fonds propres nantis\",\n  \"PDF.ownFund.bank3A\": \"Banque 3A\",\n  \"PDF.ownFund.thirdPartyFortune\": \"Prêt de tiers\",\n  \"PDF.ownFund.bankFortune\": \"Épargne\",\n  \"PDF.ownFund.insurance2\": \"LPP\",\n  \"PDF.ownFund.insurance3A\": \"Assurance 3A\",\n  \"PDF.ownFund.insurance3B\": \"Assurance 3B\",\n  \"PDF.ownFund.bank3A.PLEDGE\": \"Nantissement banque 3A\",\n  \"PDF.ownFund.bank3A.WITHDRAW\": \"Retrait banque 3A\",\n  \"PDF.ownFund.insurance2.PLEDGE\": \"Nantissement LPP\",\n  \"PDF.ownFund.insurance2.WITHDRAW\": \"Retrait LPP\",\n  \"PDF.ownFund.insurance3A.PLEDGE\": \"Nantissement assurance 3A\",\n  \"PDF.ownFund.insurance3A.WITHDRAW\": \"Retrait assurance 3A\",\n  \"PDF.ownFund.insurance3B.PLEDGE\": \"Nantissement assurance 3B\",\n  \"PDF.ownFund.insurance3B.WITHDRAW\": \"Retrait assurance 3B\",\n  \"PDF.ownFundthirdPartyFortune\": \"Prêt de tiers\",\n  \"PDF.projectInfos.structure.postDisbursementSituation.title\": \"Situation post décaissement\",\n  \"PDF.projectInfos.structure.postDisbursementSituation.total\": \"Solde\",\n  \"PDF.projectInfos.structure.propertyValue\": \"Prix d'achat\",\n  \"PDF.projectInfos.structure.propertyWork\": \"Travaux à plus-value\",\n  \"PDF.projectInfos.structure.solvency\": \"Calcul de solvabilité\",\n  \"PDF.projectInfos.structure.title\": \"Plan financier\",\n  \"PDF.projectInfos.structure.totalCost\": \"Prix de revient\",\n  \"PDF.projectInfos.structure.usedOwnFunds\": \"Fonds propres utilisés\",\n  \"PDF.projectInfos.structure.usedOwnFunds.title\": \"Fonds propres utilisés\",\n  \"PDF.projectInfos.structure.usedOwnFunds.total\": \"Total des fonds propres\",\n  \"PDF.projectInfos.structure.wantedLoan\": \"Prêt hypothécaire souhaité\",\n  \"PDF.projectInfos.structure.wantedLoanRate\": \"Taux d'avance souhaité\",\n  \"PDF.purchaseType.ACQUISITION\": \"Acquisition\",\n  \"PDF.purchaseType.REFINANCING\": \"Refinancement\",\n  \"PDF.residenceType.MAIN_RESIDENCE\": \"Résidence principale\",\n  \"PDF.residenceType.INVESTMENT\": \"Bien d'investissement\",\n  \"PDF.residenceType.COMMERCE\": \"Bien commercial\",\n  \"PDF.residenceType.SECOND_RESIDENCE\": \"Résidence secondaire\",\n  \"PDF.title.borrowers\": \"Emprunteurs\",\n  \"PDF.title.offer\": \"Offre\",\n  \"PDF.title.project\": \"Projet\",\n  \"ProcessPageBar.next\": \"Suivant\",\n  \"ProcessPageBar.nextStep\": \"Prochaine étape\",\n  \"ProcessPageBar.previous\": \"Précédent\",\n  \"PropertiesPage.description\": \"Il nous faut des informations supplémentaires sur votre bien immobilier, nous pourrons alors mieux comprendre vos besoins, et vous indiquer si le prix du bien est conforme au marché.\",\n  \"Maps.incompleteAddress\": \"Entrez votre adresse complète pour afficher la carte!\",\n  \"PropertiesPage.progress\": \"Progrès: {value, number, percent}\",\n  \"PropertiesPage.title\": \"Biens immobiliers\",\n  \"property.expertise\": \"Expertise\",\n  \"property.expertiseStatus.DONE\": \"Effectuée\",\n  \"property.expertiseStatus.ERROR\": \"Erreur\",\n  \"property.expertiseStatus.NONE\": \"À faire\",\n  \"PropertyForm.adderDialogDescription\": \"Entrez les informations de votre bien immobilier\",\n  \"PropertyForm.adderDialogTitle\": \"Ajouter un bien immobilier\",\n  \"PropertyForm.adderLabel\": \"Ajouter un bien immobilier\",\n  \"PropertyForm.address1\": \"Adresse\",\n  \"PropertyForm.city\": \"Localité\",\n  \"PropertyForm.modifierDialogDescription\": \"Entrez les informations de votre bien immobilier\",\n  \"PropertyForm.modifierDialogTitle\": \"Modifier votre bien immobilier\",\n  \"PropertyForm.modifierLabel\": \"Modifier votre bien immobilier\",\n  \"PropertyForm.value\": \"Prix d'achat\",\n  \"PropertyForm.zipCode\": \"NPA\",\n  \"PropertyPage.title\": \"{count, plural, one {Mon bien immobilier} other {Notre bien immobilier}}\",\n  \"Recap.availableFunds\": \"Fonds propres disponibles\",\n  \"Recap.bankFortune\": \"Fortune bancaire\",\n  \"Recap.borrowRatio\": \"Prêt / Prix d'achat\",\n  \"Recap.borrowRatio1\": \"Prêt / Prix d'achat\",\n  \"Recap.borrowRatio2\": \"Prêt / Valeur du bien\",\n  \"Recap.consideredBonus\": \"Bonus considéré\",\n  \"Recap.consideredIncome\": \"Revenus considérés\",\n  \"Recap.details\": \"Détails\",\n  \"Recap.expenses\": \"Charges\",\n  \"Recap.financing\": \"Financement\",\n  \"Recap.finmaRules\": \"Règles FINMA\",\n  \"Recap.fortune\": \"Fortune\",\n  \"Recap.incomeRatio\": \"Charges / Revenus\",\n  \"Recap.insuranceFortune\": \"Fortune de prévoyance\",\n  \"Recap.interestedLenders\": \"Prêteurs intéressés\",\n  \"Recap.loanIncrease\": \"Augmentation du prêt\",\n  \"Recap.loanReduction\": \"Réduction du prêt\",\n  \"Recap.maxPossibleLoan\": \"Prêt max possible\",\n  \"Recap.maxPurchasePrice\": \"Prix d'achat maximal\",\n  \"Recap.monthlyCost\": \"Charges estimées\",\n  \"Recap.netFortune\": \"Fortune nette\",\n  \"Recap.otherFortune\": \"Autre fortune\",\n  \"Recap.otherIncome\": \"Autres revenus\",\n  \"Recap.ownFunds\": \"Fonds propres\",\n  \"Recap.ownFundsPledged\": \"Fonds propres nantis\",\n  \"Recap.ownFundsCash\": \"Fonds propres - Épargne\",\n  \"Recap.ownFundsInsurance\": \"Fonds Propres - Prévoyance\",\n  \"Recap.ownFundsInsurancePledged\": \"Nantissement prévoyance\",\n  \"Recap.ownFundsInsuranceWithdrawal\": \"Retrait prévoyance\",\n  \"Recap.ownFundsTotal\": \"Fonds Propres - Total\",\n  \"Recap.project\": \"Projet\",\n  \"Recap.propAndWork\": \"Valeur du bien\",\n  \"Recap.property\": \"Bien immobilier\",\n  \"Recap.propertyValue\": \"Valeur du bien\",\n  \"Recap.propertyWork\": \"Travaux de plus-value\",\n  \"Recap.purchasePrice\": \"Prix d'achat\",\n  \"Recap.realEstate\": \"Biens immobiliers\",\n  \"Recap.realEstateLoans\": \"Emprunts actuels\",\n  \"Recap.receivedRent\": \"Loyer perçu\",\n  \"Recap.title\": \"Projet (en CHF)\",\n  \"Recap.totalCost\": \"Coût total du projet\",\n  \"Recap.totalFinancing\": \"Financement total\",\n  \"roles.admin\": \"Employé e-Potek\",\n  \"roles.pro\": \"Pro\",\n  \"roles.dev\": \"Développeur\",\n  \"roles.lender\": \"Prêteur\",\n  \"roles.user\": \"Utilisateur\",\n  \"Search.placeholder\": \"Cherchez quelque chose..\",\n  \"SearchResults.none\": \"Aucun résultat\",\n  \"SideNavStepper.title\": \"PROGRESSION\",\n  \"SideNavUser.dashboard\": \"Tableau de Bord\",\n  \"SideNavUser.files\": \"Documents\",\n  \"SingleBorrowerPageHeader.address\": \"Adresse\",\n  \"SingleBorrowerPageHeader.age\": \"{value} ans\",\n  \"SingleBorrowerPageHeader.assignedTo\": \"Assigné à\",\n  \"SingleBorrowerPageHeader.createdBy\": \"Créé par\",\n  \"SinglePropertyPage.title\": \"Bien immobilier\",\n  \"SinglePropertyPageHeader.assignedTo\": \"Assigné à\",\n  \"StatusIconTooltip.borrowRatio.ERROR\": \"Attention: vous ne pouvez pas emprunter autant (max. 90%)\",\n  \"StatusIconTooltip.borrowRatio.SUCCESS\": \"Tout est bon !\",\n  \"StatusIconTooltip.borrowRatio.WARNING\": \"Attention: vous aurez accès à moins de prêteurs avec un rapport entre 80-90%\",\n  \"StatusIconTooltip.incomeRatio.ERROR\": \"Vos revenus sont insuffisants pour couvrir les charges\",\n  \"StatusIconTooltip.incomeRatio.SUCCESS\": \"Tout est bon !\",\n  \"StatusIconTooltip.incomeRatio.WARNING\": \"Attention: vous aurez accès à moins de prêteurs avec un rapport entre 33-38%\",\n  \"steps.borrowers.title\": \"Emprunteurs\",\n  \"Forms.step.SOLVENCY\": \"Attestation de financement\",\n  \"Forms.step.REQUEST\": \"Demande de prêt\",\n  \"Forms.step.OFFERS\": \"Obtenir des offres\",\n  \"Forms.step.CLOSING\": \"Décaissement du prêt\",\n  \"Forms.step.SOLVENCY.tooltip\": \"Renseignez votre profil financier, et identifiez votre capacité d'achat auprès de tous les prêteurs\",\n  \"Forms.step.REQUEST.tooltip\": \"Montez un dossier de financement complet, simulez votre situation future, et préparez-vous à obtenir des offres de financement\",\n  \"Forms.step.OFFERS.tooltip\": \"Découvrez les offres sur-mesure qu'e-Potek a obtenues pour vous, prenez des décisions financières stratégiques avec votre conseiller, et choisissez votre prêteur\",\n  \"StrategyChoices.recommended\": \"Recommandé pour vous\",\n  \"Table.empty\": \"Rien à afficher\",\n  \"Table.sort\": \"Trier\",\n  \"TaskStatusSetter.ACTIVE\": \"Actif\",\n  \"Forms.status.ACTIVE\": \"Actif\",\n  \"TaskStatusSetter.ADD_ASSIGNED_TO\": \"Ajouter un conseiller\",\n  \"TaskStatusSetter.CANCELLED\": \"Annulé\",\n  \"TaskStatusSetter.changeTaskStatus\": \"Changer le statut de la tâche\",\n  \"TaskStatusSetter.COMPLETED\": \"Terminé\",\n  \"Forms.status.COMPLETED\": \"Terminé\",\n  \"TaskStatusSetter.CUSTOM\": \"Personnalisé\",\n  \"TaskStatusSetter.LENDER_CHOSEN\": \"Prêteur choisi\",\n  \"TaskStatusSetter.USER_ADDED_FILE\": \"Vérifier nouveau document\",\n  \"TaskStatusSetter.VERIFY\": \"Vérifier\",\n  \"TasksTable.actions\": \"Actions\",\n  \"TasksTable.assignedTo\": \"Assigné à\",\n  \"TasksTable.completedAt\": \"Complété le\",\n  \"TasksTable.createdAt\": \"Créé le\",\n  \"TasksTable.dueAt\": \"Échéance\",\n  \"TasksTable.relatedTo\": \"Relatif à\",\n  \"TasksTable.status\": \"Statut\",\n  \"TasksTable.type\": \"Type\",\n  \"TasksTable.updatedAt\": \"Modifié le\",\n  \"TasksTable.title\": \"Titre\",\n  \"TasksTable.description\": \"Description\",\n  \"TasksTabs.allTasks\": \"Toutes les tâches\",\n  \"TasksTabs.myTasks\": \"Mes tâches\",\n  \"TasksTabs.unassignedTasks\": \"Tâches non assignées\",\n  \"tooltip.bonus\": \"Revenus variables supplémentaires à votre salaire qui ne sont pas un engagement ferme de la part de votre employeur.\",\n  \"tooltip.borrower\": \"Celui qui emprunte. La personne qui est à la recherche d’un financement hypothécaire deviendra l’emprunteur lorsque le prêteur aura mis à sa disposition la somme empruntée.\",\n  \"tooltip.borrowRatio\": \"Le ratio du prêt hypothécaire et du prix d’achat (ou de la valeur du logement) est également appelé le taux d’avance par les prêteurs.\",\n  \"tooltip.financialPlan\": \"Le plan financier représente la structure de financement de votre projet.\",\n  \"tooltip.finma\": \"Autorité fédérale de surveillance des marchés financiers.\",\n  \"tooltip.income\": \"La somme cumulée des revenus bruts que perçoivent tous les emprunteurs\",\n  \"tooltip.incomeRatio\": \"Le ratio des charges financières théoriques et de vos revenus considérés est également appelé le taux d’effort par les prêteurs.\",\n  \"tooltip.interestedLenders\": \"Nous sommes en contact fréquent avec plus de 15 prêteurs. La quantité de prêteurs intéressés dépend de différents critères.\",\n  \"tooltip2.bonus\": \"Les bonus sont les montants variables que l’emprunteur perçoit. Les prêteurs ne les prennent pas en considération à 100%.{verticalSpace}Par exemple, si vous avez perçu des bonus ces 3 dernières années de 20, 30 et 40 CHF, nous utiliserons 50% de la moyenne de 20, 30 et 40, soit 15 CHF.\",\n  \"tooltip2.borrowRatio\": \"Tous les prêteurs ont des critères différents concernant les taux d’avance. Il délimite le montant maximal qu’un emprunteur peut obtenir par rapport au type de bien immobilier. Nous parlons souvent d’un taux d’avance de 80% de la valeur du logement. Cependant certains établissements ont des critères plus stricts et ne peuvent pas dépasser un taux d’avance de 65% de la valeur du logement.\",\n  \"tooltip2.financialPlan\": \"Il met en évidence la/les façon(s) dont vous pouvez financer votre projet, à l’aide de (1) vos fonds propres ainsi que (2) du Financement Hypothécaire que vous pouvez solliciter. Le plan financier vous permet d’identifier en un coup d’oeil les différents poste de votre projet (1) La Valeur du logement ou son prix d’achat (2) le montant des crédits existants que vous souhaiteriez refinancer (3) les éventuels frais de notaires (4) le montant des travaux si votre projet en contient.\",\n  \"tooltip2.finma\": \"La FINMA détermine les règles que doivent suivre les banques et les intermédiaires financiers. Elle détermine notamment quelles sont les conditions minimales à remplir pour que vous puissiez obtenir un prêt. Les taux sont très bas aujourd'hui, mais si vos finances ne sont pas assez solides et que les taux montent, vous pourriez avoir de sérieuses difficultés financières.\",\n  \"tooltip2.income\": \"Tous les prêteurs ont des critères différents pour calculer les revenus disponibles des emprunteurs. Ce calcul permet aux prêteurs d’identifier si les emprunteurs ont la capacité d’assumer la charge financière que va générer le financement hypothécaire selon les règles établies par la FINMA.{verticalSpace}Voici un exemple de calcul de revenus considérés :{verticalSpace}Salaire brut de tous les emprunteurs, (+) Derniers bonus considérés à 50%, (+) Allocations Familiales, (+) Autres allocations / pensions, (+) Revenus de la Fortune immobilière, (+) Revenus de la Fortune mobilière, (-) Loyers existants, (-) Leasings et autres charges d’intérêt et d’amortissement de crédit existant, (-) Pensions\",\n  \"tooltip2.incomeRatio\": \"Tous les prêteurs ont des critères différents pour calculer ce ratio. Ce calcul permet aux prêteurs de déterminer s’ils considèrent que vous pourrez assumer les charges du prêt hypothécaire que vous sollicitez même en cas de forte hausse des taux. En effet, les taux d’intérêt sont très bas aujourd’hui. Mais pour éviter une crise économique en cas de forte hausse des taux d’intérêt, les banques ont le devoir de prendre en compte une possible hausse des taux.{verticalSpace}C’est pour cela que le taux d’intérêt théorique imposé par la FINMA est souvent calculé à hauteur de 5%. A ce taux vous devez prendre en compte un amortissement et des charges d’entretien également théorique.\",\n  \"TooltipSynonyms.title\": \"{count, plural, one {Synonyme} other {Synonymes}}\",\n  \"TopNav.login\": \"Login\",\n  \"TopNavDropdown.account\": \"Mon Compte\",\n  \"TopNavDropdown.admin\": \"Admin Dashboard\",\n  \"TopNavDropdown.dashboard\": \"Tableau de Bord\",\n  \"TopNavDropdown.dev\": \"< dev />\",\n  \"TopNavDropdown.logout\": \"Déconnexion\",\n  \"TopNavDropdown.partner\": \"Partner Dashboard\",\n  \"TosPage.description\": \"<En Développement />\",\n  \"TosPage.title\": \"Termes et Conditions\",\n  \"Tranche.tranche\": \"Tranche\",\n  \"TrancheChart.rest\": \"Montant restant à attribuer\",\n  \"TrancheChart.value\": \"Montant\",\n  \"TrancheCount.add\": \"Ajouter\",\n  \"TrancheCount.description\": \"Nombre de tranches:\",\n  \"TranchePicker.add\": \"+ Ajouter une tranche\",\n  \"Uploader.fileCount\": \"{count, plural, =0 {Pas de fichiers} one {Un fichier} other {# fichiers}}\",\n  \"UsersTable.actions\": \"Actions\",\n  \"UsersTable.assignedTo\": \"Assigné à\",\n  \"UsersTable.createdAt\": \"Créé le\",\n  \"UsersTable.email\": \"Email\",\n  \"UsersTable.name\": \"Nom\",\n  \"UsersTable.roles\": \"Rôles\",\n  \"UsersTabs.allUsers\": \"Tous les utilisateurs\",\n  \"UsersTabs.myUsers\": \"Mes utilisateurs\",\n  \"ValidatorItem.error.fortune\": \"Manque de fortune\",\n  \"ValidatorItem.error.fortuneTight\": \"Possible avec prévoyance\",\n  \"ValidatorItem.error.income\": \"Manque de revenus\",\n  \"ValidatorItem.error.incomeTight\": \"Revenus limite limite\",\n  \"ValidatorItem.isValid\": \"Acquisition possible!\",\n  \"VerificationPage.CTA.warning\": \"Vous ne pourrez plus modifier vos informations et vos documents\",\n  \"VerificationPage.CTA\": \"Envoyer mon dossier\",\n  \"VerificationPage.CTA2\": \"Re-Vérifier\",\n  \"VerificationPage.description\": \"Votre dossier va être analysé en détail par les professionels d'e-Potek, et votre conseiller vous aidera pour préparer la meilleure demande possible.\",\n  \"VerificationPage.failedDescription\": \"Votre expert a vérifié votre dossier, et y a trouvé une faille. Veuillez addresser les points ci-dessous puis demander une re-vérification.{verticalSpace}N'hésitez pas à appeler votre expert en cas de doute.\",\n  \"VerificationPage.failedTitle\": \"Il y a eu un petit souci\",\n  \"VerificationPage.successDescription\": \"Les informations que vous nous avez confiées nous ont permis de vérifier l'intégrité et la qualité de votre demande de prêt.\",\n  \"VerificationPage.successTitle\": \"Votre dossier est valide!\",\n  \"VerificationRequested.description\": \"Vérification en cours, vous serez averti par email lorsque c'est fait.\",\n  \"Widget1Finma.title\": \"Règles FINMA\",\n  \"Widget1FinmaLine.borrowRule\": \"Prêt / Prix d'achat\",\n  \"Widget1FinmaLine.incomeRule\": \"Charges / Revenus\",\n  \"Widget1Inputs.title\": \"Calculateur\",\n  \"Widget1InputsError.borrowError\": \"Les fonds propres ne suffisent pas pour votre projet. Continuez et parlons-en\",\n  \"Widget1InputsError.borrowWarning\": \"Les fonds propres ne sont pas dans les normes attendues, mais il existe des solutions. Continuez et parlons-en\",\n  \"Widget1InputsError.empty\": \"Entrez des valeurs dans les champs au dessus !\",\n  \"Widget1InputsError.incomeError\": \"Les revenus ne suffisent pas pour votre projet. Continuez et parlons-en\",\n  \"Widget1InputsError.incomeWarning\": \"Les revenus ne sont pas dans les normes attendues, mais il existe des solutions. Continuez et parlons-en\",\n  \"Widget1InputsError.success\": \"Tout est bon !\",\n  \"Widget1LenderCount.label\": \"Prêteurs intéressés\",\n  \"Widget1Monthly.amortization\": \"Amortissement\",\n  \"Widget1Monthly.interests\": \"Intérêts\",\n  \"Widget1Monthly.maintenance\": \"Frais d'entretien\",\n  \"Widget1Monthly.title\": \"Charges Estimées\",\n  \"Widget1MonthlyInterests.label\": \"Taux d'intérêt indicatif\",\n  \"Widget1MonthlyInterests.optionLabel\": \"{type} moyen: {rate}\",\n  \"Widget1MonthlyMaintenance.label\": \"Frais d'entretien\",\n  \"Widget1MonthlyMaintenance.no\": \"Sans\",\n  \"Widget1MonthlyMaintenance.yes\": \"Estimation\",\n  \"Widget1OptionSelector.ACQUISITION\": \"Acquisition\",\n  \"Widget1OptionSelector.INVESTMENT\": \"Bien de rendement\",\n  \"Widget1OptionSelector.MAIN_RESIDENCE\": \"Résidence principale\",\n  \"Widget1OptionSelector.PRIMARY\": \"Résidence principale\",\n  \"Widget1OptionSelector.REFINANCING\": \"Refinancement\",\n  \"Widget1OptionSelector.SECOND_RESIDENCE\": \"Résidence secondaire\",\n  \"Widget1OptionSelector.SECONDARY\": \"Résidence secondaire\",\n  \"Widget1Page.description\": \"Déterminez facilement combien vous devez gagner, combien de fonds propres vous devez mettre, ou la valeur maximale du bien que vous pouvez acquérir.\",\n  \"Widget1Page.title\": \"Calculateur hypothécaire\",\n  \"Widget1Recap.title\": \"Plan Financier\",\n  \"Widget1SingleInput.currentLoan\": \"Prêt existant\",\n  \"Widget1SingleInput.fortune\": \"Fonds propres\",\n  \"Widget1SingleInput.property\": \"Prix d'achat\",\n  \"Widget1SingleInput.propertyValue\": \"Valeur du bien\",\n  \"Widget1SingleInput.salary\": \"Revenus annuels bruts\",\n  \"Widget1SingleInput.wantedLoan\": \"Nouveau prêt\",\n  \"Widget1SingleInputSlider.buttonTooltip\": \"Agrandir le slider\",\n  \"Widget1SingleInputSlider.buttonTooltipLoan\": \"Emprunter plus\",\n  \"WwwFooterLinks.about\": \"À propos\",\n  \"WwwFooterLinks.careers\": \"Carrières\",\n  \"WwwFooterLinks.company\": \"e-Potek SA est une société régulée par la FINMA.\",\n  \"WwwFooterLinks.conditions\": \"Conditions Générales\",\n  \"WwwFooterLinks.contact\": \"Nous contacter\",\n  \"WwwFooterLinks.faq\": \"FAQ\",\n  \"WwwFooterLinks.info\": \"Liens utiles\",\n  \"WwwFooterLinks.interests\": \"Nos taux\",\n  \"WwwTopNavLinks.about\": \"À propos\",\n  \"WwwTopNavLinks.careers\": \"Carrières\",\n  \"WwwTopNavLinks.contact\": \"Nous contacter\",\n  \"WwwTopNavLinks.faq\": \"FAQ\",\n  \"WwwTopNavLinks.interests\": \"Nos taux\"\n};\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}}}},{\n  \"extensions\": [\n    \".js\",\n    \".json\",\n    \".html\",\n    \".css\",\n    \".jsx\"\n  ]\n});\n\nrequire(\"/imports/core/lib/client/clientTestSetup.test.js\");\nrequire(\"/imports/core/lib/testInit.test.js\");\nrequire(\"/imports/core/components/Financing/client/FinancingOffers/OfferPicker/test/offerPickerHelpers.spec.js\");\nrequire(\"/imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/test/CurrentownFunds.spec.jsx\");\nrequire(\"/imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/test/FinancingOwnFundsPickerHelpers.spec.js\");\nrequire(\"/imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/test/OwnFundsCompleter.spec.js\");\nrequire(\"/imports/core/components/Financing/client/FinancingSection/components/test/InputAndSliderField.spec.jsx\");\nrequire(\"/imports/core/components/Financing/client/FinancingOffers/test/FinancingOffersSorterContainer.spec.js\");\nrequire(\"/imports/core/components/Financing/client/FinancingOwnFunds/test/RequiredOwnFunds.spec.jsx\");\nrequire(\"/imports/core/components/Financing/client/FinancingResult/test/FinancingResult.spec.jsx\");\nrequire(\"/imports/core/components/Financing/client/FinancingResult/test/FinancingResultErrors.spec.jsx\");\nrequire(\"/imports/core/components/PromotionPage/client/UserPromotionLotsTable/test/PromotionLotSelector.spec.jsx\");\nrequire(\"/imports/core/api/files/client/test/documents.spec.js\");\nrequire(\"/imports/core/api/files/client/test/fileHelpers.spec.js\");\nrequire(\"/imports/core/api/loans/test/client/proLoans.test.js\");\nrequire(\"/imports/core/api/queries/test/client/clientQueries.test.js\");\nrequire(\"/imports/core/components/AutoForm2/client/test/AutoForm.spec.jsx\");\nrequire(\"/imports/core/components/AutoForm2/client/test/AutoFormLayout.spec.jsx\");\nrequire(\"/imports/core/components/AutoForm2/client/test/CustomSelectField.spec.jsx\");\nrequire(\"/imports/core/components/BaseRouter/test/client/HistoryWatcher.spec.js\");\nrequire(\"/imports/core/components/BorrowersSummary/client/test/BorrowersSummary.spec.jsx\");\nrequire(\"/imports/core/components/ContactButton/test/client/ContactButton.spec.jsx\");\nrequire(\"/imports/core/components/OfferList/test/client/makeFeedback.spec.jsx\");\nrequire(\"/imports/core/components/PasswordResetPage/test/client/PasswordResetPage.test.jsx\");\nrequire(\"/imports/core/components/TranchePicker/client/test/TranchePickerContainer.test.jsx\");\nrequire(\"/imports/core/components/Translation/numberComponents/test/IntlNumber.spec.jsx\");\nrequire(\"/imports/core/components/UploaderArray/Uploader/test/UploaderController.spec.js\");\nrequire(\"/imports/core/components/widget1/Widget1Inputs/test/Widget1Inputs.spec.jsx\");\nrequire(\"/imports/core/components/widget1/Widget1Inputs/test/Widget1InputsError.spec.jsx\");\nrequire(\"/imports/core/components/widget1/Widget1SingleInput/test/Widget1SingleInputSlider.spec.jsx\");\nrequire(\"/imports/core/api/features/test/FeatureService.test.js\");\nrequire(\"/imports/core/api/promotions/test/promotionClientHelpers.spec.js\");\nrequire(\"/imports/core/components/Button/test/Button.spec.js\");\nrequire(\"/imports/core/components/InterestRatesTable/test/InterestsTableDate.spec.js\");\nrequire(\"/imports/core/components/InterestRatesTable/test/interestRates.spec.js\");\nrequire(\"/imports/core/components/ModalManager/test/ModalManager.spec.jsx\");\nrequire(\"/imports/core/components/PageHead/test/Pagehead.spec.jsx\");\nrequire(\"/imports/core/components/SearchModal/test/SearchResults.spec.jsx\");\nrequire(\"/imports/core/components/Table/test/Table.spec.js\");\nrequire(\"/imports/core/components/Tabs/test/Tabs.spec.jsx\");\nrequire(\"/imports/core/components/TextInput/test/TextInput.spec.js\");\nrequire(\"/imports/core/components/Toggle/test/Toggle.spec.jsx\");\nrequire(\"/imports/core/components/maps/test/MapWithMarkerWrapper.test.jsx\");\nrequire(\"/imports/core/components/maps/test/googleMapsHelpers.test.js\");\nrequire(\"/imports/core/components/tooltips/test/AutoTooltip.spec.jsx\");\nrequire(\"/imports/core/components/tooltips/test/TooltipContext.spec.jsx\");\nrequire(\"/imports/core/components/tooltips/test/TooltipSynonyms.spec.jsx\");\nrequire(\"/imports/core/redux/widget1/test/Widget1Suggester.spec.js\");\nrequire(\"/imports/core/redux/widget1/test/Widget1Suggestion.spec.js\");\nrequire(\"/imports/core/redux/widget1/test/widget1Actions.spec.js\");\nrequire(\"/imports/core/redux/widget1/test/widget1Reducers.spec.js\");\nrequire(\"/imports/core/redux/widget1/test/widget1Selectors.spec.js\");\nrequire(\"/imports/core/utils/Calculator/test/BorrowerCalculator.spec.js\");\nrequire(\"/imports/core/utils/Calculator/test/Calculator.spec.js\");\nrequire(\"/imports/core/utils/Calculator/test/CombinedCalculator.spec.js\");\nrequire(\"/imports/core/utils/Calculator/test/LenderRulesInitializator.spec.js\");\nrequire(\"/imports/core/utils/Calculator/test/LoanCalculator.spec.js\");\nrequire(\"/imports/core/utils/Calculator/test/OfferCalculator.spec.js\");\nrequire(\"/imports/core/utils/Calculator/test/PromotionCalculator.spec.js\");\nrequire(\"/imports/core/utils/Calculator/test/PropertyCalculator.spec.js\");\nrequire(\"/imports/core/utils/Calculator/test/Selector.spec.js\");\nrequire(\"/imports/core/utils/Calculator/test/SolvencyCalculator.spec.js\");\nrequire(\"/imports/core/utils/Calculator/test/classes.spec.js\");\nrequire(\"/imports/core/utils/Calculator/test/middleware.spec.js\");\nrequire(\"/imports/core/utils/FinanceCalculator/test/FinanceCalculator.spec.js\");\nrequire(\"/imports/core/utils/MiddlewareManager/test/MiddlewareManager.spec.js\");\nrequire(\"/imports/core/utils/MiddlewareManager/test/argumentMapperMiddleware.spec.js\");\nrequire(\"/imports/core/utils/notaryFees/test/NotaryFeesCalculator.spec.js\");\nrequire(\"/imports/core/utils/notaryFees/test/degressive.spec.js\");\nrequire(\"/imports/core/utils/phoneFormatting/test/phoneFormatting.spec.js\");\nrequire(\"/imports/core/utils/testHelpers/wallaby/wallaby.spec.js\");\nrequire(\"/imports/core/api/test/fragments.spec.js\");\nrequire(\"/imports/core/arrays/test/BorrowerFormArray.spec.js\");\nrequire(\"/imports/core/arrays/test/PropertyFormArray.spec.js\");\nrequire(\"/imports/core/arrays/test/partnerList.spec.js\");\nrequire(\"/imports/core/arrays/test/tooltips.spec.js\");\nrequire(\"/imports/core/containers/test/withMatchParam.test.jsx\");\nrequire(\"/imports/core/utils/test/APIs.spec.js\");\nrequire(\"/imports/core/utils/test/checkObjectStructure.spec.js\");\nrequire(\"/imports/core/utils/test/conversionFunctions.spec.js\");\nrequire(\"/imports/core/utils/test/formArrayHelpers.spec.js\");\nrequire(\"/imports/core/utils/test/formHelpers.spec.js\");\nrequire(\"/imports/core/utils/test/general.spec.js\");\nrequire(\"/imports/core/utils/test/loanFunctions.spec.js\");\nrequire(\"/imports/core/utils/test/reactFunctions.spec.js\");\nrequire(\"/imports/core/utils/test/redirection.test.js\");\nrequire(\"/imports/core/utils/test/routerUtils.spec.js\");\nrequire(\"/imports/core/utils/test/sortArrayOfObjects.spec.js\");\nrequire(\"/imports/core/utils/test/userFunctions.spec.js\");\nrequire(\"/imports/core/utils/test/zipcodes.spec.js\");","hash":"474704d4cdcceb40f81e1e022f286bcc517f19e8","servePath":"/app.js","sourceMap":{"version":3,"sources":["imports/core/lib/client/clientTestSetup.test.js","imports/core/lib/testInit.test.js","imports/core/components/Financing/client/FinancingOffers/OfferPicker/test/offerPickerHelpers.spec.js","imports/core/components/Financing/client/FinancingOffers/OfferPicker/offerPickerHelpers.js","imports/core/components/Financing/client/FinancingOffers/test/FinancingOffersSorterContainer.spec.js","imports/core/components/Financing/client/FinancingOffers/FinancingOffersContainer.jsx","imports/core/components/Financing/client/FinancingOffers/FinancingOffersSorterContainer.jsx","imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/test/CurrentownFunds.spec.jsx","imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/test/FinancingOwnFundsPickerHelpers.spec.js","imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/test/OwnFundsCompleter.spec.js","imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/CurrentOwnFunds.jsx","imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/FinancingOwnFundsActions.jsx","imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/FinancingOwnFundsDialog.jsx","imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/FinancingOwnFundsDialogContainer.js","imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/FinancingOwnFundsPickerContainer.js","imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/FinancingOwnFundsPickerForm.jsx","imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/FinancingOwnFundsPickerHelpers.js","imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/FinancingOwnFundsPledgeWarning.jsx","imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/FinancingOwnFundsWarning.jsx","imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/OwnFundsCompleter.jsx","imports/core/components/Financing/client/FinancingOwnFunds/FinancingOwnFundsPicker/OwnFundsCompleterContainer.js","imports/core/components/Financing/client/FinancingOwnFunds/test/RequiredOwnFunds.spec.jsx","imports/core/components/Financing/client/FinancingOwnFunds/RequiredOwnFundsBody.jsx","imports/core/components/Financing/client/FinancingSection/components/test/InputAndSliderField.spec.jsx","imports/core/components/Financing/client/FinancingSection/components/CalculatedValue.jsx","imports/core/components/Financing/client/FinancingSection/components/FinmaRatio.jsx","imports/core/components/Financing/client/FinancingSection/components/InputAndSlider.jsx","imports/core/components/Financing/client/FinancingSection/components/InputAndSliderField.jsx","imports/core/components/Financing/client/FinancingSection/components/RadioButtons.jsx","imports/core/components/Financing/client/FinancingSection/components/index.js","imports/core/components/Financing/client/FinancingSection/FinancingSection.jsx","imports/core/components/Financing/client/FinancingSection/FinancingSectionDetails.jsx","imports/core/components/Financing/client/FinancingSection/FinancingSectionExpansionPanel.jsx","imports/core/components/Financing/client/FinancingSection/FinancingSectionSummary.jsx","imports/core/components/Financing/client/FinancingSection/financingSectionHelpers.jsx","imports/core/components/Financing/client/FinancingSection/index.js","imports/core/components/Financing/client/FinancingFinancing/MortgageNotesPicker/MortgageNotesPicker.jsx","imports/core/components/Financing/client/FinancingFinancing/MortgageNotesPicker/MortgageNotesPickerContainer.jsx","imports/core/components/Financing/client/FinancingFinancing/MortgageNotesPicker/MortgageNotesPickerDialog.jsx","imports/core/components/Financing/client/FinancingFinancing/MortgageNotesPicker/MortgageNotesPickerList.jsx","imports/core/components/Financing/client/FinancingFinancing/MortgageNotesPicker/MortgageNotesPickerSummary.jsx","imports/core/components/Financing/client/FinancingFinancing/MortgageNotesPicker/index.js","imports/core/components/Financing/client/FinancingFinancing/FinancingFinancing.jsx","imports/core/components/Financing/client/FinancingFinancing/FinancingTranchePicker.jsx","imports/core/components/Financing/client/FinancingFinancing/LoanPercent.jsx","imports/core/components/Financing/client/FinancingResult/test/FinancingResult.spec.jsx","imports/core/components/Financing/client/FinancingResult/test/FinancingResultErrors.spec.jsx","imports/core/components/Financing/client/FinancingResult/FinancingResult.jsx","imports/core/components/Financing/client/FinancingResult/FinancingResultChart.jsx","imports/core/components/Financing/client/FinancingResult/FinancingResultErrors.jsx","imports/core/components/Financing/client/FinancingResult/FinancingResultInterests.jsx","imports/core/components/Financing/client/FinancingResult/financingResultHelpers.js","imports/core/components/Financing/client/containers/FinancingDataContainer.jsx","imports/core/components/Financing/client/containers/SingleStructureContainer.jsx","imports/core/components/Financing/client/containers/StructureUpdateContainer.jsx","imports/core/components/Financing/client/containers/loan-context.js","imports/core/components/Financing/client/containers/withLoan.jsx","imports/core/components/Financing/client/FinancingCalculator.js","imports/core/components/Financing/client/FinancingLabel.jsx","imports/core/components/Financing/client/FinancingLabels.jsx","imports/core/components/PromotionPage/client/UserPromotionLotsTable/test/PromotionLotSelector.spec.jsx","imports/core/components/PromotionPage/client/UserPromotionLotsTable/PromotionLotSelector.jsx","imports/core/components/AutoForm2/client/test/AutoForm.spec.jsx","imports/core/components/AutoForm2/client/test/AutoFormLayout.spec.jsx","imports/core/components/AutoForm2/client/test/CustomSelectField.spec.jsx","imports/core/components/AutoForm2/AutoForm.jsx","imports/core/components/AutoForm2/AutoFormComponents.jsx","imports/core/components/AutoForm2/AutoFormDialog.jsx","imports/core/components/AutoForm2/AutoFormDialogActions.jsx","imports/core/components/AutoForm2/AutoFormDialogChildren.jsx","imports/core/components/AutoForm2/AutoFormDialogContent.jsx","imports/core/components/AutoForm2/AutoFormLayout.jsx","imports/core/components/AutoForm2/CustomAutoFields.jsx","imports/core/components/AutoForm2/CustomListAddField.jsx","imports/core/components/AutoForm2/CustomListField.jsx","imports/core/components/AutoForm2/CustomListItemField.jsx","imports/core/components/AutoForm2/CustomNestField.jsx","imports/core/components/AutoForm2/CustomSelectField.jsx","imports/core/components/AutoForm2/CustomSelectFieldContainer.jsx","imports/core/components/AutoForm2/CustomSubmitField.jsx","imports/core/components/AutoForm2/CustomTextField.jsx","imports/core/components/AutoForm2/autoFormHelpers.js","imports/core/components/AutoForm2/constants.js","imports/core/components/AutoForm2/index.js","imports/core/components/BaseRouter/test/client/HistoryWatcher.spec.js","imports/core/components/BaseRouter/HistoryWatcher.jsx","imports/core/components/BorrowersSummary/client/test/BorrowersSummary.spec.jsx","imports/core/components/BorrowersSummary/BorrowersSummary.jsx","imports/core/components/ContactButton/test/client/ContactButton.spec.jsx","imports/core/components/ContactButton/ContactButton.jsx","imports/core/components/ContactButton/ContactButtonContainer.js","imports/core/components/ContactButton/ContactButtonContent.jsx","imports/core/components/ContactButton/ContactButtonContext.jsx","imports/core/components/ContactButton/ContactButtonOverlay.jsx","imports/core/components/OfferList/test/client/makeFeedback.spec.jsx","imports/core/components/OfferList/feedbackHelpers.js","imports/core/components/PasswordResetPage/test/client/PasswordResetPage.test.jsx","imports/core/components/PasswordResetPage/PasswordResetPage.jsx","imports/core/components/PasswordResetPage/PasswordResetPageContainer.js","imports/core/components/TranchePicker/client/test/TranchePickerContainer.test.jsx","imports/core/components/TranchePicker/Tranche.jsx","imports/core/components/TranchePicker/TranchePicker.jsx","imports/core/components/TranchePicker/TranchePickerContainer.jsx","imports/core/components/TranchePicker/TranchePickerDialog.jsx","imports/core/components/TranchePicker/index.js","imports/core/components/Translation/numberComponents/test/IntlNumber.spec.jsx","imports/core/components/Translation/numberComponents/IntlNumber.jsx","imports/core/components/Translation/numberComponents/Money.jsx","imports/core/components/Translation/numberComponents/Percent.jsx","imports/core/components/Translation/numberComponents/index.js","imports/core/components/Translation/formattingComponents/IntlDate.jsx","imports/core/components/Translation/formattingComponents/MetricArea.jsx","imports/core/components/Translation/formattingComponents/index.js","imports/core/components/Translation/FormattedMessage.jsx","imports/core/components/Translation/Translation.jsx","imports/core/components/Translation/defaultIntlValues.jsx","imports/core/components/Translation/index.js","imports/core/components/Translation/withTranslationContext.jsx","imports/core/components/UploaderArray/Uploader/test/UploaderController.spec.js","imports/core/components/UploaderArray/Uploader/UploaderController.js","imports/core/components/widget1/Widget1Inputs/test/Widget1Inputs.spec.jsx","imports/core/components/widget1/Widget1Inputs/test/Widget1InputsError.spec.jsx","imports/core/components/widget1/Widget1Inputs/Widget1Inputs.jsx","imports/core/components/widget1/Widget1Inputs/Widget1InputsContainer.js","imports/core/components/widget1/Widget1Inputs/Widget1InputsError.jsx","imports/core/components/widget1/Widget1Inputs/Widget1InputsReset.jsx","imports/core/components/widget1/Widget1Inputs/Widget1InputsResetContainer.js","imports/core/components/widget1/Widget1SingleInput/test/Widget1SingleInputSlider.spec.jsx","imports/core/components/widget1/Widget1SingleInput/Widget1SingleInput.jsx","imports/core/components/widget1/Widget1SingleInput/Widget1SingleInputContainer.js","imports/core/components/widget1/Widget1SingleInput/Widget1SingleInputInput.jsx","imports/core/components/widget1/Widget1SingleInput/Widget1SingleInputSlider.jsx","imports/core/components/widget1/Widget1SingleInput/index.js","imports/core/components/widget1/widget1Helpers.js","imports/core/components/widget1/widget1Math.js","imports/core/components/AutoForm/ValidIcon/ValidIcon.jsx","imports/core/components/AutoForm/ValidIcon/ValidIconContainer.jsx","imports/core/components/AutoForm/ValidIcon/index.js","imports/core/components/AutoForm/AutoFormTextInput.jsx","imports/core/components/AutoForm/FormValidator.jsx","imports/core/components/Button/test/Button.spec.js","imports/core/components/Button/Button.jsx","imports/core/components/Button/index.js","imports/core/components/IconLink/CollectionIconLinkPopup/CollectionIconLinkPopup.jsx","imports/core/components/IconLink/CollectionIconLinkPopup/CollectionIconLinkPopupComponents.jsx","imports/core/components/IconLink/CollectionIconLinkPopup/queries.js","imports/core/components/IconLink/CollectionIconLink.jsx","imports/core/components/IconLink/IconLink.jsx","imports/core/components/IconLink/collectionIconLinkHelpers.js","imports/core/components/IconLink/index.js","imports/core/components/Impersonate/ImpersonatePage/ImpersonatePage.jsx","imports/core/components/InterestRatesTable/test/InterestsTableDate.spec.js","imports/core/components/InterestRatesTable/test/interestRates.spec.js","imports/core/components/InterestRatesTable/InterestsTableDate.jsx","imports/core/components/InterestRatesTable/interestRates.js","imports/core/components/ModalManager/test/ModalManager.spec.jsx","imports/core/components/ModalManager/DialogComponents.jsx","imports/core/components/ModalManager/ModalManager.jsx","imports/core/components/ModalManager/ModalManagerContext.js","imports/core/components/PageHead/test/Pagehead.spec.jsx","imports/core/components/PageHead/PageHead.jsx","imports/core/components/SearchModal/test/SearchResults.spec.jsx","imports/core/components/SearchModal/SearchResults.jsx","imports/core/components/Table/test/Table.spec.js","imports/core/components/Table/tableHelpers.js","imports/core/components/Tabs/test/Tabs.spec.jsx","imports/core/components/Tabs/Tabs.jsx","imports/core/components/Tabs/TabsContainer.js","imports/core/components/TextInput/test/TextInput.spec.js","imports/core/components/TextInput/TextInput.jsx","imports/core/components/TextInput/index.js","imports/core/components/Toggle/test/Toggle.spec.jsx","imports/core/components/Toggle/Toggle.jsx","imports/core/components/maps/test/MapWithMarkerWrapper.test.jsx","imports/core/components/maps/test/googleMapsHelpers.test.js","imports/core/components/maps/GoogleMap.jsx","imports/core/components/maps/GoogleMapContainer.jsx","imports/core/components/maps/MapWithMarker.jsx","imports/core/components/maps/MapWithMarkerWrapper.jsx","imports/core/components/maps/defaultOptions.js","imports/core/components/maps/googleMapsHelpers.js","imports/core/components/maps/mapStyles.js","imports/core/components/tooltips/Tooltip/Tooltip.jsx","imports/core/components/tooltips/Tooltip/index.js","imports/core/components/tooltips/Tooltip/loadable.js","imports/core/components/tooltips/test/AutoTooltip.spec.jsx","imports/core/components/tooltips/test/TooltipContext.spec.jsx","imports/core/components/tooltips/test/TooltipSynonyms.spec.jsx","imports/core/components/tooltips/AutoTooltip.jsx","imports/core/components/tooltips/TooltipContext.jsx","imports/core/components/tooltips/TooltipOverlay.jsx","imports/core/components/tooltips/TooltipSynonyms.jsx","imports/core/components/BorrowerAddPartner/BorrowerAddPartner.jsx","imports/core/components/BorrowerAddPartner/index.js","imports/core/components/CantonField/CantonField.jsx","imports/core/components/Checkbox/Checkbox.jsx","imports/core/components/Checkbox/index.js","imports/core/components/DateField/DateField.jsx","imports/core/components/DateField/index.js","imports/core/components/DialogSimple/DialogSimple.jsx","imports/core/components/DialogSimple/index.js","imports/core/components/DialogSimple/loadable.js","imports/core/components/DropdownMenu/DropdownMenu.jsx","imports/core/components/DropdownMenu/DropdownMenuContainer.jsx","imports/core/components/DropdownMenu/index.js","imports/core/components/ErrorBoundary/DevError.jsx","imports/core/components/ErrorBoundary/LayoutError.jsx","imports/core/components/HtmlPreview/HtmlPreview.jsx","imports/core/components/HtmlPreview/index.js","imports/core/components/Icon/Icon.jsx","imports/core/components/Icon/index.js","imports/core/components/IconButton/IconButton.jsx","imports/core/components/IconButton/index.js","imports/core/components/Link/Link.jsx","imports/core/components/Link/index.js","imports/core/components/List/index.js","imports/core/components/Loading/Loading.jsx","imports/core/components/Loading/index.js","imports/core/components/Loading/withLoading.jsx","imports/core/components/Material/Chip.jsx","imports/core/components/Material/Dialog.jsx","imports/core/components/Material/Divider.jsx","imports/core/components/Material/FormControl.jsx","imports/core/components/Material/FormHelperText.jsx","imports/core/components/Material/Input.jsx","imports/core/components/Material/InputAdornment.jsx","imports/core/components/Material/InputLabel.jsx","imports/core/components/Material/Menu.jsx","imports/core/components/Material/MenuItem.jsx","imports/core/components/Material/Radio.jsx","imports/core/components/Material/Select.jsx","imports/core/components/Material/Slider.jsx","imports/core/components/Material/TextField.jsx","imports/core/components/MissingDoc/MissingDoc.jsx","imports/core/components/MissingDoc/index.js","imports/core/components/MoneyInput/MoneyInput.jsx","imports/core/components/MoneyInput/index.js","imports/core/components/PercentInput/PercentField.jsx","imports/core/components/PercentInput/PercentInput.jsx","imports/core/components/PercentInput/index.js","imports/core/components/PercentWithStatus/PercentWithStatus.jsx","imports/core/components/Select/Select.jsx","imports/core/components/Select/SelectContainer.jsx","imports/core/components/Select/index.js","imports/core/components/StatusIcon/StatusIcon.jsx","imports/core/components/StatusIcon/index.js","imports/core/components/StatusLabel/StatusLabel.jsx","imports/core/components/StatusLabel/index.js","imports/core/components/StickyPopover/StickyPopover.jsx","imports/core/components/StickyPopover/index.js","imports/core/components/UpdateField/UpdateField.jsx","imports/core/components/UpdateField/index.js","imports/core/components/charts/Chart.jsx","imports/core/components/charts/DonutChart.jsx","imports/core/components/charts/PieChart.jsx","imports/core/components/charts/chartContainer.js","imports/core/components/charts/chartSettings.js","imports/core/components/RadioButtons.jsx","imports/core/components/Roles.jsx","imports/core/api/files/client/test/documents.spec.js","imports/core/api/files/client/test/fileHelpers.spec.js","imports/core/api/files/documents.js","imports/core/api/files/fileConstants.js","imports/core/api/files/fileHelpers.js","imports/core/api/files/meteor-slingshot.js","imports/core/api/files/methodDefinitions.js","imports/core/api/loans/test/client/proLoans.test.js","imports/core/api/loans/schemas/LoanSchema.js","imports/core/api/loans/schemas/StructureSchema.js","imports/core/api/loans/schemas/otherSchemas.js","imports/core/api/loans/schemas/promotionSchema.js","imports/core/api/loans/index.js","imports/core/api/loans/links.js","imports/core/api/loans/loanConstants.js","imports/core/api/loans/loans.js","imports/core/api/loans/methodDefinitions.js","imports/core/api/loans/queries.js","imports/core/api/loans/reducers.js","imports/core/api/queries/test/client/clientQueries.test.js","imports/core/api/borrowers/schemas/BorrowerSchema.js","imports/core/api/borrowers/schemas/otherSchemas.js","imports/core/api/borrowers/borrowerConstants.js","imports/core/api/borrowers/borrowers.js","imports/core/api/borrowers/borrowersAdditionalDocuments.js","imports/core/api/borrowers/index.js","imports/core/api/borrowers/links.js","imports/core/api/borrowers/methodDefinitions.js","imports/core/api/borrowers/queries.js","imports/core/api/borrowers/reducers.js","imports/core/api/contacts/schemas/contactSchema.js","imports/core/api/contacts/contacts.js","imports/core/api/contacts/contactsConstants.js","imports/core/api/contacts/index.js","imports/core/api/contacts/links.js","imports/core/api/contacts/methodDefinitions.js","imports/core/api/contacts/queries.js","imports/core/api/contacts/reducers.js","imports/core/api/events/ClientEventService/ClientEventService.js","imports/core/api/events/ClientEventService/eventNames.js","imports/core/api/events/ClientEventService/index.js","imports/core/api/events/EventService.js","imports/core/api/features/test/FeatureService.test.js","imports/core/api/features/FeatureService.js","imports/core/api/features/featureConstants.js","imports/core/api/features/featureDecisionFactories.js","imports/core/api/interestRates/schemas/interestRatesSchema.js","imports/core/api/interestRates/index.js","imports/core/api/interestRates/interestRates.js","imports/core/api/interestRates/interestRatesConstants.js","imports/core/api/interestRates/methodDefinitions.js","imports/core/api/irs10y/schemas/irs10ySchema.js","imports/core/api/irs10y/index.js","imports/core/api/irs10y/irs10y.js","imports/core/api/irs10y/irs10yConstants.js","imports/core/api/irs10y/methodDefinitions.js","imports/core/api/lenderRules/schemas/lenderRulesSchema.js","imports/core/api/lenderRules/helpers.js","imports/core/api/lenderRules/index.js","imports/core/api/lenderRules/lenderRules.js","imports/core/api/lenderRules/lenderRulesConstants.js","imports/core/api/lenderRules/links.js","imports/core/api/lenderRules/methodDefinitions.js","imports/core/api/lenders/schemas/lenderSchema.js","imports/core/api/lenders/index.js","imports/core/api/lenders/lenderConstants.js","imports/core/api/lenders/lenders.js","imports/core/api/lenders/links.js","imports/core/api/lenders/methodDefinitions.js","imports/core/api/lots/schemas/LotSchema.js","imports/core/api/lots/index.js","imports/core/api/lots/links.js","imports/core/api/lots/lotConstants.js","imports/core/api/lots/lots.js","imports/core/api/lots/methodDefinitions.js","imports/core/api/lots/reducers.js","imports/core/api/mortgageNotes/schemas/MortgageNoteSchema.js","imports/core/api/mortgageNotes/index.js","imports/core/api/mortgageNotes/links.js","imports/core/api/mortgageNotes/methodDefinitions.js","imports/core/api/mortgageNotes/mortgageNoteConstants.js","imports/core/api/mortgageNotes/mortgageNotes.js","imports/core/api/promotionLots/schemas/PromotionLotSchema.js","imports/core/api/promotionLots/index.js","imports/core/api/promotionLots/links.js","imports/core/api/promotionLots/methodDefinitions.js","imports/core/api/promotionLots/promotionLotConstants.js","imports/core/api/promotionLots/promotionLots.js","imports/core/api/promotionLots/reducers.js","imports/core/api/promotionOptions/schemas/PromotionOptionSchema.js","imports/core/api/promotionOptions/index.js","imports/core/api/promotionOptions/links.js","imports/core/api/promotionOptions/methodDefinitions.js","imports/core/api/promotionOptions/promotionOptionConstants.js","imports/core/api/promotionOptions/promotionOptions.js","imports/core/api/promotionOptions/reducers.js","imports/core/api/promotions/schemas/PromotionSchema.js","imports/core/api/promotions/test/promotionClientHelpers.spec.js","imports/core/api/promotions/index.js","imports/core/api/promotions/links.js","imports/core/api/promotions/methodDefinitions.js","imports/core/api/promotions/promotionClientHelpers.js","imports/core/api/promotions/promotionConstants.js","imports/core/api/promotions/promotions.js","imports/core/api/promotions/queries.js","imports/core/api/promotions/reducers.js","imports/core/api/properties/schemas/PropertySchema.js","imports/core/api/properties/index.js","imports/core/api/properties/links.js","imports/core/api/properties/methodDefinitions.js","imports/core/api/properties/properties.js","imports/core/api/properties/propertiesAdditionalDocuments.js","imports/core/api/properties/propertyConstants.js","imports/core/api/properties/queries.js","imports/core/api/properties/reducers.js","imports/core/api/revenues/schemas/revenueSchema.js","imports/core/api/revenues/index.js","imports/core/api/revenues/links.js","imports/core/api/revenues/methodDefinitions.js","imports/core/api/revenues/revenueConstants.js","imports/core/api/revenues/revenues.js","imports/core/api/activities/activities.js","imports/core/api/activities/activityConstants.js","imports/core/api/activities/index.js","imports/core/api/activities/links.js","imports/core/api/analytics/analyticsConstants.js","imports/core/api/analytics/methodDefinitions.js","imports/core/api/containerToolkit/index.js","imports/core/api/containerToolkit/skipContainer.jsx","imports/core/api/containerToolkit/withSmartQuery.js","imports/core/api/email/emailConstants.js","imports/core/api/email/methodDefinitions.js","imports/core/api/factories/factories.js","imports/core/api/factories/factoriesHelpers.js","imports/core/api/factories/index.js","imports/core/api/helpers/CollectionService.js","imports/core/api/helpers/helpers.js","imports/core/api/helpers/index.js","imports/core/api/helpers/mongoHelpers.js","imports/core/api/helpers/sharedSchemaConstants.js","imports/core/api/helpers/sharedSchemas.js","imports/core/api/impersonation/impersonation.js","imports/core/api/impersonation/methodDefinitions.js","imports/core/api/links/LinkInitializer.js","imports/core/api/links/index.js","imports/core/api/methods/clientQueryManager.js","imports/core/api/methods/index.js","imports/core/api/methods/methodDefinitions.js","imports/core/api/methods/methods.js","imports/core/api/methods/registerMethodDefinitions.js","imports/core/api/notifications/index.js","imports/core/api/notifications/links.js","imports/core/api/notifications/notificationConstants.js","imports/core/api/notifications/notifications.js","imports/core/api/notifications/reducers.js","imports/core/api/offers/index.js","imports/core/api/offers/links.js","imports/core/api/offers/methodDefinitions.js","imports/core/api/offers/offerConstants.js","imports/core/api/offers/offers.js","imports/core/api/offers/queries.js","imports/core/api/offers/reducers.js","imports/core/api/organisations/index.js","imports/core/api/organisations/links.js","imports/core/api/organisations/methodDefinitions.js","imports/core/api/organisations/organisationConstants.js","imports/core/api/organisations/organisations.js","imports/core/api/organisations/queries.js","imports/core/api/organisations/reducers.js","imports/core/api/pdf/methodDefinitions.js","imports/core/api/pdf/pdfConstants.js","imports/core/api/reducers/addressReducer.js","imports/core/api/reducers/registerReducers.js","imports/core/api/security/constants.js","imports/core/api/slack/methodDefinitions.js","imports/core/api/tasks/index.js","imports/core/api/tasks/links.js","imports/core/api/tasks/methodDefinitions.js","imports/core/api/tasks/taskConstants.js","imports/core/api/tasks/tasks.js","imports/core/api/test/fragments.spec.js","imports/core/api/updateWatchers/updateWatcherConstants.js","imports/core/api/users/index.js","imports/core/api/users/links.js","imports/core/api/users/methodDefinitions.js","imports/core/api/users/queries.js","imports/core/api/users/reducers.js","imports/core/api/users/userConstants.js","imports/core/api/users/users.js","imports/core/api/api.js","imports/core/api/constants.js","imports/core/api/fragments.js","imports/core/api/index.js","imports/core/api/initialization.js","imports/core/redux/widget1/test/Widget1Suggester.spec.js","imports/core/redux/widget1/test/Widget1Suggestion.spec.js","imports/core/redux/widget1/test/widget1Actions.spec.js","imports/core/redux/widget1/test/widget1Reducers.spec.js","imports/core/redux/widget1/test/widget1Selectors.spec.js","imports/core/redux/widget1/Widget1Suggester.js","imports/core/redux/widget1/index.js","imports/core/redux/widget1/widget1Actions.js","imports/core/redux/widget1/widget1Constants.js","imports/core/redux/widget1/widget1Reducers.js","imports/core/redux/widget1/widget1Selectors.js","imports/core/redux/widget1/widget1Suggestion.js","imports/core/redux/widget1/widget1Types.js","imports/core/redux/common/index.js","imports/core/redux/common/reducers.js","imports/core/redux/common/types.js","imports/core/utils/Calculator/test/BorrowerCalculator.spec.js","imports/core/utils/Calculator/test/Calculator.spec.js","imports/core/utils/Calculator/test/CombinedCalculator.spec.js","imports/core/utils/Calculator/test/LenderRulesInitializator.spec.js","imports/core/utils/Calculator/test/LoanCalculator.spec.js","imports/core/utils/Calculator/test/OfferCalculator.spec.js","imports/core/utils/Calculator/test/PromotionCalculator.spec.js","imports/core/utils/Calculator/test/PropertyCalculator.spec.js","imports/core/utils/Calculator/test/Selector.spec.js","imports/core/utils/Calculator/test/SolvencyCalculator.spec.js","imports/core/utils/Calculator/test/classes.spec.js","imports/core/utils/Calculator/test/middleware.spec.js","imports/core/utils/Calculator/BorrowerCalculator.js","imports/core/utils/Calculator/CombinedCalculator.js","imports/core/utils/Calculator/LenderRulesInitializator.js","imports/core/utils/Calculator/LoanCalculator.js","imports/core/utils/Calculator/OfferCalculator.js","imports/core/utils/Calculator/PromotionCalculator.js","imports/core/utils/Calculator/PropertyCalculator.js","imports/core/utils/Calculator/Selector.js","imports/core/utils/Calculator/SolvencyCalculator.js","imports/core/utils/Calculator/classUtils.js","imports/core/utils/Calculator/index.js","imports/core/utils/Calculator/middleware.js","imports/core/utils/FinanceCalculator/test/FinanceCalculator.spec.js","imports/core/utils/FinanceCalculator/FinanceCalculator.js","imports/core/utils/FinanceCalculator/financeCalculatorConstants.js","imports/core/utils/FinanceCalculator/financeCalculatorMiddlewares.js","imports/core/utils/FinanceCalculator/index.js","imports/core/utils/MiddlewareManager/test/MiddlewareManager.spec.js","imports/core/utils/MiddlewareManager/test/argumentMapperMiddleware.spec.js","imports/core/utils/MiddlewareManager/MiddlewareManager.js","imports/core/utils/MiddlewareManager/argumentMapperMiddleware.js","imports/core/utils/MiddlewareManager/index.js","imports/core/utils/notaryFees/test/NotaryFeesCalculator.spec.js","imports/core/utils/notaryFees/test/degressive.spec.js","imports/core/utils/notaryFees/NotaryFeesCalculator.js","imports/core/utils/notaryFees/cantonConfigs.js","imports/core/utils/notaryFees/cantonConstants.js","imports/core/utils/notaryFees/degressive.js","imports/core/utils/notaryFees/index.js","imports/core/utils/phoneFormatting/test/phoneFormatting.spec.js","imports/core/utils/phoneFormatting/index.js","imports/core/utils/testHelpers/wallaby/wallaby.spec.js","imports/core/utils/testHelpers/wallaby/wallabyDummy.js","imports/core/utils/testHelpers/enzyme.js","imports/core/utils/testHelpers/generateData.js","imports/core/utils/testHelpers/getMountedComponent.jsx","imports/core/utils/testHelpers/index.js","imports/core/utils/testHelpers/testHelpers.js","imports/core/utils/localization/index.js","imports/core/utils/localization/localization.js","imports/core/utils/localization/simpleSchemaLocalization.js","imports/core/utils/memoizeOne/areInputsEqual.js","imports/core/utils/memoizeOne/index.js","imports/core/utils/memoizeOne/memoizeOne.js","imports/core/utils/test/APIs.spec.js","imports/core/utils/test/checkObjectStructure.spec.js","imports/core/utils/test/conversionFunctions.spec.js","imports/core/utils/test/formArrayHelpers.spec.js","imports/core/utils/test/formHelpers.spec.js","imports/core/utils/test/general.spec.js","imports/core/utils/test/loanFunctions.spec.js","imports/core/utils/test/reactFunctions.spec.js","imports/core/utils/test/redirection.test.js","imports/core/utils/test/routerUtils.spec.js","imports/core/utils/test/sortArrayOfObjects.spec.js","imports/core/utils/test/userFunctions.spec.js","imports/core/utils/test/zipcodes.spec.js","imports/core/utils/APIs.js","imports/core/utils/checkObjectStructure.js","imports/core/utils/conversionFunctions.js","imports/core/utils/cookiesHelpers.js","imports/core/utils/featureFunctions.js","imports/core/utils/formArrayHelpers.js","imports/core/utils/formHelpers.js","imports/core/utils/general.js","imports/core/utils/intl.js","imports/core/utils/loadable.js","imports/core/utils/loanFunctions.js","imports/core/utils/pollUntilReady.js","imports/core/utils/reactFunctions.js","imports/core/utils/redirection.js","imports/core/utils/routerUtils.js","imports/core/utils/sortArrayOfObjects.js","imports/core/utils/sorting.js","imports/core/utils/textMasks.js","imports/core/utils/userFunctions.js","imports/core/utils/zipcodes.js","imports/core/arrays/test/BorrowerFormArray.spec.js","imports/core/arrays/test/PropertyFormArray.spec.js","imports/core/arrays/test/partnerList.spec.js","imports/core/arrays/test/tooltips.spec.js","imports/core/arrays/BorrowerFormArray.jsx","imports/core/arrays/PropertyFormArray.jsx","imports/core/arrays/RefinancingFormArray.js","imports/core/arrays/collectionIcons.jsx","imports/core/arrays/epotekEmployees.js","imports/core/arrays/partnerList.js","imports/core/arrays/tooltips.js","imports/core/containers/test/withMatchParam.test.jsx","imports/core/containers/updateForProps.js","imports/core/containers/withMatchParam.js","imports/core/config/colors.js","imports/core/config/constants.js","imports/core/config/financeConstants.js"],"names":["require","SimpleSchema","uniforms","process","error","console","describe","it","props","loan","structure","wantedLoan","propertyWork","propertyId","offerId","offers","_id","interest10","amortizationGoal","amortizationYears","properties","value","expect","getAmortizationForStructureWithOffer","loanTranches","type","yearlyExpenses","getMonthlyForStructureWithOffer","FinancingCalculator","offer","offerOverride","getInterestsForStructureWithOffer","amort","interests","prop","getPropertyExpenses","getAvailableRates","interest2","structures","Consumer","React","withContext","Component","setOrder","compose","withStateHandlers","sortBy","setSort","sortState","rates","offerRates","pick","Object","validRates","pickBy","v","uniq","withOptions","withProps","options","id","rate","label","component","shallow","beforeEach","ownFunds","OWN_FUNDS_TYPES","borrowerId","borrowers","bankFortune","usageType","firstName","spy","sinon","BANK_FORTUNE","chooseOwnFundsTypes","residenceType","RESIDENCE_TYPE","MAIN_RESIDENCE","expected","SECOND_RESIDENCE","INVESTMENT","shouldAskForUsageType","calculateRemainingFunds","ownFundsIndex","insurance2","thirdPartyFortune","undefined","makeNewOwnFundsArray","shouldDelete","getNewWantedLoanAfterPledge","structureId","OWN_FUNDS_USAGE_TYPES","PLEDGE","WITHDRAW","context","property","getRequiredAndCurrentFunds","required","current","hasEnoughFundsOfType","getOwnFundsOfTypeAndBorrower","CurrentOwnFunds","toMoney","FinancingOwnFundsDialogContainer","FinancingOwnFundsActions","disableDelete","defaultActions","borrowerUpdateActions","displayWarning","FinancingOwnFundsDialog","handleCancelUpdateBorrower","remaining","val","handleChange","FIELDS","FinancingOwnFundsPickerContainer","open","handleOpen","handleClose","TYPE","USAGE_TYPE","BORROWER_ID","VALUE","getInitialState","addState","reset","withDisableSubmit","disableSubmit","withStructureUpdate","loanId","updateLoan","updateOwnFunds","withAdditionalProps","otherValueOfTypeAndBorrower","updateCleanup","setLoading","handleDelete","handleSubmit","event","handleUpdateBorrower","Calculator","currentlyAvailable","getAvailableFundsOfTypeAndBorrower","deltaNeeded","object","description","types","allowPledge","lifecycle","componentWillReceiveProps","nextFunds","nextIndex","JSON","withState","FinancingOwnFundsPickerForm","t","usage","index","FinancingDataContainer","bId","otherType","sum","usedValue","available","newObject","getCurrentPledgedFunds","currentPledgedFunds","maxLoanWithNewPledge","calculateMaxLoan","getMaxPledge","propertyValue","Math","FinancingOwnFundsPledgeWarning","maxPledge","color","FinancingOwnFundsWarning","borrower","name","borrowerIndex","OwnFundsCompleter","OwnFundsCompleterContainer","removePreviousValueEffect","requiredChange","currentChange","previousIsPledged","previousPledgedValue","removePledgingEffect","previousNonPledgedFunds","uT","isEditing","OWN_FUNDS_ROUNDING_AMOUNT","getLabel","RequiredOwnFundsBody","marginLeft","mount","inputValue","wrapper","sliderValue","allowUndefined","forceUndefined","onChange","max","target","FORMATS","MONEY","PERCENT","DEFAULT","formatters","CalculatedValue","format","displayValue","cx","children","rightElement","FinmaRatio","status","InputAndSlider","_max","placeholder","calculatePlaceholder","schema","optional","valueIsNotDefined","makeHandleTextChange","setValue","InputAndSliderField","disabled","maxSliderValue","maxSlider","connectField","RadioButtons","className","updateStructure","StructureUpdateContainer","default","FinancingSection","sectionProps","constructor","detailConfig","makeRenderDetail","render","noWrapper","styles","container","overflow","overflowY","entered","content","margin","paddingRight","expanded","FinancingSectionExpansionPanel","classes","expandedClass","changeExpanded","componentDidMount","ClientEventService","componentWillUnmount","withStyles","SummaryContent","renderSummary","summaryConfig","makeRenderSummary","rest","FinancingSectionSummary","ExpansionPanelSummary","makeFilterConfig","condition","renderArray","configArray","MortgageNotesPicker","disableForms","selected","MortgageNotesPickerContainer","formatMortgageNotes","mortgageNotes","notes","notesWithName","note","borrowerName","isBorrower","formatBorrowerMortgageNote","mortgageNoteIds","onClick","getProperty","canton","currentMortgageNotes","borrowerMortgageNotes","removeMortgageNote","mortgageNoteId","MortgageNotesPickerDialog","createRoute","MortgageNotesPickerList","rank","x","i","marginRight","width","height","MortgageNotesPickerSummary","allNotes","currentMortgageNotesValue","total","count","length","getPledgedAmount","calculateLoan","params","maxAmount","getOffer","pledgedAmount","pledgeOverride","enableOffers","oneStructureHasLoan","FinancingFinancing","FinancingTranchePicker","tranches","LoanPercent","getBorrowRatio","data","borrowValue","expectResult","Number","intl","defaultLocale","messages","childContextTypes","intlShape","selectedStructure","salary","insurance3A","currentInterestRates","INTEREST_RATES","monthly","string","hasNonZeroNumber","interestsCost","notaryFees","interestLibor","FinancingResult","FinancingResultErrors","getInterests","getAmortization","tooltip","getRemainingCash","makeHasOwnFundsOfType","FinancingResultChart","amortization","propertyExpenses","chart","spacingBottom","spacingTop","spacingRight","spacingLeft","plotOptions","pie","headerFormat","pointFormat","showInLegend","animation","legend","enabled","ERROR_TYPES","BREAKING","WARNING","errors","func","key","getIncomeRatio","FinanceCalculator","interestRates","getError","currentError","getTooltipTitle","InterestsTooltip","getInterestRates","marginTop","FinancingResultInterests","initCalc","InitializedCalculator","finalOffer","lenderRules","calc","getNonPledgedFundsOfType","getRemainingInsurance2","getRemainingInsurance3A","getRemainingInsurance3B","getRemainingBank3A","getBorrowRatioStatus","borrowRatio","getIncomeRatioStatus","incomeRatio","filterOffers","memoizeOne","enableOffer","Meteor","getAmortizationRateMapper","argumentMappings","monthlyIncome","monthlyPayment","propAndWork","loanValue","amortizationRate","Calc","getLoanFromBorrowRatio","getAmortizationRateBase","getInterestsWithTranches","getMinCash","fees","getFeesBase","argumentMapperMiddleware","makeArgumentMapper","middlewareObject","nodes","document","heights","Array","clientHeight","setTimeout","renderLabel","configItem","Label","FinancingLabels","config","promotionLots","PromotionLotSelector","isLoading","promotionOption","promotionOptions","promotionLotIsSelected","promotionOptionId","getMountedComponent","setInput","text","String","stuff","model","omitFields","arr","hello","onSubmit","values","allowedValues","customAllowedValues","CUSTOM_AUTOFIELD_TYPES","DATE","myText","autoFieldProps","labels","myText1","defaultValue","myText2","customAutoValue","percent","date","select","AutoField","DemoComponent","schemaKeys","fields","transform","displayEmpty","SelectField","items","item","done","Promise","text2","makeCustomAutoField","ignoreProps","OptimizedMoneyInput","OptimizedDateField","OptimizedPercentField","OptimizedBoolField","determineComponentFromProps","field","fieldType","COMPONENT_TYPES","variant","decimal","ARRAY","intlPrefix","CustomAutoField","state","submitting","additionalProps","useState","autoValue","getPlaceholder","shrink","getContext","contextTypes","includeInChain","includeParent","getAutoFormProps","disableActions","maxWidth","otherProps","setOpen","triggerComponent","e","title","onSuccessMessage","message","AutoFormDialogActions","setDisableActions","renderAdditionalActions","PropTypes","isRequired","AutoFormDialogChildren","renderFunc","AutoFormDialogContent","marginBottom","renderLayout","renderField","layout","renderLayoutItem","AutoFormLayout","automaticFocus","fieldCount","matchedField","subLayout","CustomAutoFields","createElement","autoFocus","autoField","element","CustomListAddField","ListMaterial","List","filterDOMProps","child","joinName","dense","CustomListField","ensureValue","OptimizedListField","update","propName","nextProps","ListItem","ListItemMaterial","Nest","wrapField","injectName","fullWidth","FormLabel","CustomSelectField","parent","loading","result","allowNull","query","ids","option","allowedValuesIntlId","nextModel","CustomSelectFieldContainer","shouldDisableButton","CustomSubmitField","primary","raised","validating","formatStringId","start","end","nameWithoutDots","nameWithoutDot2","flowProps","oneIsNull","placeholdersAreEnabled","formatMessage","placeholderPrefix","TEXT_AREA","MONEY_DECIMAL","HTML_PREVIEW","SELECT","RENDER","FIELDS_TO_IGNORE","routes","bar","path","foo","deleteAllCookies","cookies","cookie","eqPos","watcher","history","location","route","queryString","getCookie","trackingId","pathname","userId","sessionStorage","authToken","impersonate","getMatchingPath","matchingPath","searchParams","match","matchPath","generateTrackingId","randomId","setCookie","loadPage","parseCookies","analyticsPage","queryParams","lastName","expectedNbOfBorrowers","expectedFirstBorrowerLabel","chipsArray","BorrowersSummary","showTitle","isAdmin","collection","BORROWERS_COLLECTION","array","withContactButtonProvider","staff","employees","ContactButton","toggleOpenContact","useContext","openContact","ContactButtonContainer","currentUser","employeesByEmail","phoneNumber","email","ContactButtonContent","ContactButtonContext","Provider","ContactButtonOverlay","gender","closed","DummyComponent","makeFeedback","injectIntl","withRouter","FEEDBACK_OPTIONS","POSITIVE","lender","contact","user","assignedEmployee","address1","zipCode","city","createdAt","NEGATIVE_NOT_COMPETITIVE","NEGATIVE_WITHOUT_FOLLOW_UP","CUSTOM","FEEDBACK_OPTIONS_SETTINGS","enableComments","enableOutro","enableCustomIntro","greetings","contactName","introduction","borrower1","borrower2","outro","singleBorrower","closing","assignee","comments","customFeedback","address","feedback","moment","comment","shallowComponent","token","Random","resetDatabase","services","password","roles","PasswordResetPage","isEnrollment","window","isValid","newPassword","getUserDisplayName","link","enrollment","PasswordResetPageContainer","stateHandlers","newPassword2","hasReadConditions","changeSubmitting","Accounts","err","setError","notifyAssignee","lifeCycle","withMatchParam","button","deleteButton","input","firstTranche","Tranche","interestRatesOrder","filterOptions","currentSelectedTypes","difference","currentOption","withCurrentType","sortedOptions","id1","id2","TranchePicker","removeTranche","newValue","setType","TranchePickerContainer","initialTranches","addTranche","typeToRemove","newType","tranchesAreValid","sumIsOne","allTypesAreDefined","TranchePickerDialog","handleSave","shouldRenderDash","IntlNumber","number","getValue","rounded","currency","Money","tag","displayZero","Percent","showPlus","formattedValue","IntlDate","MetricArea","defaultTranslationValues","purchaseType","translationValues","makeAutoTooltip","T","Auto","formattedMessage","noTooltips","tooltipPlacement","defaultIntlValues","verticalSpace","translationContext","propHasChanged","checkFile","currentValue","tempFiles","ALLOWED_FILE_TYPES","file","filesExistAndAreValid","files","FILE_STATUS","oldProp","newProp","displayFullState","displayFull","showFull","hideFull","tempFileState","tempSuccessFiles","addTempSuccessFile","addTempFiles","setTempSuccessFiles","f","fileMeta","handleAddFiles","fileArray","showError","notification","handleUploadComplete","notifyOfUpload","fileName","docLabel","handleSuccess","handleRemove","Key","willReceiveProps","nextValue","nonDuplicateFiles","withMergedSuccessfulFiles","uniqBy","node","borrowRule","incomeRule","Widget1Inputs","finma","Widget1InputsContainer","mapStateToProps","widget1Selectors","connect","STATUSES","getBorrowError","getIncomeError","getMessage","worstStatus","getWorstStatus","Widget1InputsError","hideFinmaValues","statuses","messageId","Widget1InputsReset","Widget1InputsResetContainer","mapDispatchToProps","dispatch","widget1Actions","Widget1SingleInput","labelName","tabIndex","allowExtremeLoan","auto","increaseSliderMax","isLoanValue","setAuto","setInputValue","sliderMax","unsetValue","Widget1SingleInputContainer","widget1Constants","getSliderMax","widget1","withConnect","toNumber","withCorrectPropertyName","useStyles","makeStyles","theme","root","paddingBottom","paddingTop","notchedOutline","borderColor","borderWidth","Widget1SingleInputInput","classnames","any","getSliderValue","INCREASE_SLIDER_LIMIT","showIncreaseButton","Widget1SingleInputSlider","getFinmaValues","totalMonthly","finmaMonthlyCost","getFinmaMonthlyCost","getRefinancingBorrowRatio","borrowRuleStatus","validateBorrowRatio","incomeRuleStatus","validateIncomeRatio","SUCCESS","ERROR","getLoanValue","getYearlyAmortization","yearsToRetirement","percentToAmortize","getSimpleYearlyInterests","getSimpleYearlyMaintenance","maintenanceRate","monthlyCost","yearlySalary","maintenanceMonthly","interestsMonthly","amortizationMonthly","safeIncomeRatio","INCOME_WARNING_TIGHT","INCOME_ERROR","isPrimary","allowInsurance","maxRatio","FORTUNE_WARNING_TIGHT","FORTUNE_ERROR","ValidIcon","hide","STATUS","colors","fade","style","ValidIconContainer","VALID","HIDE","TODO","SAVING_ANIMATION_DURATION_MS","WrappedComponent","todo","saving","nextSaving","div","position","infoIcon","bottom","left","padding","infoStyle","cleanValue","isEqual","showInfo","inputProps","inputType","showSaving","shouldSave","updateFunc","docId","errorText","constants","valueIsDifferent","valueExistsInHistory","inputLabelProps","focused","savingIconStyle","AutoFormTextInput","autocomplete","floatingLabelFixed","info","multiline","bool","inputStyle","money","noValidator","rows","saveOnChange","showValidIconOnChange","handleCheck","isInputChecked","top","right","FormValidator","checked","get","doc","admin","backgroundColor","main","getColor","getVariant","outlined","getContent","iconAfter","icon","Button","childProps","omit","Comp","withLoadingProp","mapProps","queries","additionalPopoverContent","CollectionComponent","components","CollectionTitle","titles","forceOpen","organisation","logo","organisations","anonymous","referredByUser","referredByOrganisation","emails","emailVerified","warning","loans","lenderOrganisation","availablePromotionLots","bookedPromotionLots","soldPromotionLots","maxHeight","offerCount","makeQuery","$body","$filter","category","documents","propertyImages","totalValue","promotionImage","showPopups","getIconConfig","getLoanLinkTitle","hasPopup","ROLES","employeesById","borderRadius","getUserNameAndOrganisation","isDev","Roles","isMain","CollectionIconLink","collectionIcons","relatedDoc","IconLink","stopPropagation","showIcon","userName","impersonateUser","duration","paramsQuery","ImpersonatePage","getLastFriday","getRandomInt","testDate","prevFriday","InterestsTableDate","TRENDS","UP","DOWN","FLAT","rateLow","rateHigh","trend","averageRates","TestComp","openModal","actions","closeModal","res","returnValue","closeDialog","after","makeRenderDialogPart","dialogProps","part","DialogComponents","dialogContent","Content","closeAll","renderDialogPart","initialState","activeModal","openFirstModal","payload","modals","newState","modalId","firstModal","modal","reducer","action","pendingModals","nextModal","ModalManager","useReducer","ModalManagerContext","charSet","titleId","descriptionId","formatTitle","PageHead","list","JsSearch","intlValues","tooltipId","generalTooltips","tooltipMatch","tooltipValue1","showId","search","results","selectedResult","SearchResults","order","ORDER","orderBy","column","columns","sortedData","sortData","newOrderBy","raw","shouldDisplayLabelAndData","columnValue","makeSortFunc","sorter","makeSorter","valueA","a","valueB","b","determineOrder","changeOrder","oldOrderBy","isReversed","finalOrder","tabs","onChangeSpy","onChangeCallback","currentTab","initialIndex","indicator","tabsIndicator","labelContainer","to","Tabs","TabsContainer","flexGrow","tabsRoot","borderBottom","tabRoot","textTransform","minWidth","fontWeight","paddingLeft","routerParamName","filteredTabs","routerParam","tab","prefix","noIntl","getFinalPlaceholder","defaultPlaceholder","getDefaults","simpleOnChange","onChangeHandler","showMask","mask","parseFloat","onDateChange","finalPlaceholder","TextInput","labelWidth","useInputLabelWidth","fontSize","inputComponent","noValidate","pattern","requiredProps","toggle","onToggle","labelRight","labelTop","labelLeft","Toggle","toggled","errorParagraph","getAddressString","isIncompleteAddress","withMarker","GoogleMaps","map","infowindow","marker","draggable","combinedOptions","merge","center","latlng","GoogleMap","googleMapContainer","isLoaded","libraries","mapIsLoaded","c","GoogleMapContainer","MapWithMarker","setLatlng","getLatlngFromGoogle","getLatLngFromAddress","withLoading","MapWithMarkerWrapper","showIncompleteAddress","zoom","defaultOptions","scrollwheel","disableDefaultUI","fullscreenControl","zoomControl","mapStyles","geocodeByAddress","getLatLng","featureType","elementType","stylers","visibility","getTooltip1Id","getTooltip2Id","Tooltip","tooltipConfig","double","isDoubleTooltip","zIndex","passedProps","loadable","req","loader","tooltipList","TOOLTIP_LISTS","DEV","OFFER_TABLE","createRegexThatFindsAnyWordFromList","TooltipContainer","tooltips","match1","match2","match3","reformatString","parseTextForTooltips","reactStringReplace","autoTooltipParser","AutoTooltip","GENERAL","TooltipProvider","TooltipProviderContainer","handleClick","TooltipOverlay","global","delayShow","placement","trigger","findSynonymsForTooltipId","tooltipMatcher","synonym","TooltipSynonyms","synonyms","BorrowerAddPartner","addBorrower","sameAddress","civilStatus","CIVIL_STATUS","MARRIED","CantonField","CANTONS","readOnly","Checkbox","DateField","isSubmit","isCancel","onClose","finalActions","closeOnly","args","disableClose","enableClose","renderTrigger","renderProps","DialogSimple","autoScroll","buttonStyle","close","important","onOpen","passProps","rootStyle","secondary","getTrigger","DropdownMenu","onClickHandler","toRender","paper","paperClassName","anchorEl","iconType","isOpen","DropdownMenuContainer","menuItem","white","menuItemRoot","colorClass","mapOption","fetchedOptions","setFetchedOptions","currentTarget","fetchOptions","DevError","display","alignItems","LayoutError","HtmlPreview","__html","iconMap","check","add","addBasic","remove","menu","forum","mail","phone","waiting","up","down","dropdown","powerOff","lock","lockOpen","home","building","dashboard","folder","loop","person","face","eye","eyeCrossed","sort","more","star","starHalf","starEmpty","accountCircle","app","personAdd","offlinePin","dollarSign","contactMail","people","developerMode","save","supervisorAccount","checkCircle","radioButtonChecked","flash","report","deleteForever","deleteSweep","groupAdd","edit","trendingUp","trendingDown","trendingFlat","expandMore","backupRestore","filter","arrowUp","arrowDown","domain","attachFile","download","health","help","monetizationOn","image","delete","phoneLink","openInNew","settings","computer","notifications","snooze","dragHandle","priorityHigh","PriorityHigh","Icon","iconStyle","size","MyIcon","sizeSmall","sizeTiny","capitalize","IconButton","iconProps","Loading","small","branch","renderComponent","Dialog","Divider","inputLabelRef","setLabelWidth","Menu","MenuItem","Slider","TextField","MoneyInput","parse","helperText","PercentField","PercentInput","percentFormatters","percentMask","PercentWithStatus","makeRenderValue","rawOptions","Select","SelectContainer","mapOptions","listItemtext","fill","success","StatusIcon","getStatuses","LOAN_STATUS","PROMOTION_STATUS","PROMOTION_LOT_STATUS","PROMOTION_LOT_REDUCED_STATUS","TASK_STATUS","LENDER_STATUS","PROPERTY_STATUS","REVENUE_STATUS","COMMISSION_STATUS","showTooltip","StatusLabel","suffix","additionalActions","statusLabel","stat","onMouseEnter","clearTimeout","showPopover","exitDelay","show","enhancedChildren","onMouseLeave","ref","onFocus","onBlur","handleMouseLeave","PopoverStickOnHover","delay","makeOnSubmit","onSuccess","UpdateField","onSubmitCallback","schemas","initialazeHighcharts","ReactHighcharts","lang","months","shortMonths","weekdays","shortWeekdays","serie","proceed","HighchartsExportData","HighchartsExporting","HighchartsMore","nextData","prevData","dataPoint","Chart","addCenteredTitle","renderer","centerX","plotLeft","plotWidth","centerY","plotTop","plotHeight","titleHeight","shiftedX","titleWidth","shiftedY","y","DonutChart","events","load","redraw","series","innerSize","getConfig","subtitle","allowPointSelect","cursor","dataLabels","PieChart","chartContainer","legendConfig","itemStyle","floating","itemMarginBottom","that","legendWidth","itemsPerRow","translateX","translateY","defaultConfig","fontFamily","thousandsSep","credits","safeChange","o","radioGroupStyle","justifyContent","flexDirection","role","step","STEPS","additionalDocuments","propertyDocuments","getPropertyDocuments","DOCUMENTS","SOLVENCY","getBorrowerDocuments","general","fileId","dummyDoc","filesPercent","checkValidity","getMissingDocumentIds","PROPERTIES_COLLECTION","LOANS_COLLECTION","documentHasTooltip","documentId","DOCUMENTS_WITH_TOOLTIP","makeAllObjectDocuments","allDocuments","s3Documents","otherAdditionalDocuments","legacyCustomDocuments","requiredByAdminOnly","requiredByAdmin","formatAdditionalDoc","additionalDoc","makeGetDocuments","isLoans","additionalDocumentsExist","getLoanDocuments","UNVERIFIED","ONE_KB","MAX_FILE_SIZE","SLINGSHOT_DIRECTIVE_NAME","EXOSCALE_PATH","BUCKET_NAME","TEST_BUCKET_NAME","OBJECT_STORAGE_PATH","OBJECT_STORAGE_REGION","S3_ENDPOINT","PROPERTY_DOCUMENTS","COOWNERSHIP_AGREEMENT","COOWNERSHIP_ALLOCATION_AGREEMENT","FIRE_AND_WATER_INSURANCE","INVESTEMENT_PROPERTY_RENTAL_STATEMENT","INVESTEMENT_PROPERTY_SERVICE_CHARGE_SETTLEMENT","INVESTEMENT_PROPERTY_WORKS_HISTORY","INVESTMENT_PROPERTY_CONDOMINIUM_OWNERSHIP_DIVISION_REGISTER","INVESTMENT_PROPERTY_CONDOMINIUM_REGULATION","INVESTMENT_PROPERTY_RENT_JUSTIFICATION","LAND_REGISTER_EXTRACT","PROPERTY_FUTURE_WORKS","PROPERTY_MINERGIE_CERTIFICATE","PROPERTY_MARKETING_BROCHURE","PROPERTY_PICTURES","PROPERTY_PLANS","PROPERTY_VOLUME","PROPERTY_WORKS_QUOTE","PURCHASE_CONTRACT","SHARE_BUILDING_PERMIT","SHARE_EASEMENTS","SHARE_FINANCIAL_PLAN","SHARE_GC_CONTRACT","SHARE_GC_QUOTE_BY_BCC","SHARE_INSURANCE_CERTIFICATE","SHARE_PLANS","SHARE_WORKS","BORROWER_DOCUMENTS","BONUSES","CURRENT_MORTGAGES_INTERESTS_STATEMENT","CURRENT_MORTGAGES","DEBT_COLLECTION_REGISTER_EXTRACT","DIVORCE_RULING","EXPENSES_JUSTIFICATION","IDENTITY","LAST_SALARIES","LEGITIMATION_CARD","OTHER_FORTUNE_JUSTIFICATION","OTHER_INCOME_JUSTIFICATION","OWN_COMPANY_COMMERCIAL_REGISTER","OWN_COMPANY_FINANCIAL_STATEMENTS","OWN_FUNDS_JUSTIFICATION","PENSION_FUND_YEARLY_STATEMENT","RESIDENCY_PERMIT","SALARY_CERTIFICATE","TAX_STATEMENT","TAXES","THIRD_PILLAR_ACCOUNTS","WITHDRAWAL_JUSTIFICATION","LOAN_DOCUMENTS","CONTRACT","REIMBURSEMENT_STATEMENT","SIGNED_CONTRACT","SIGNED_MANDATE","OTHER","DOCUMENTS_CATEGORIES","PERSONAL_DOCUMENTS","INCOMES_AND_EXPENSES","FORTUNE_AND_OWN_FUNDS","RETIREMENT","HOUSING","SHARE","S3_ACLS","PRIVATE","PUBLIC_READ","PUBLIC_READ_WRITE","AUTHENTICATED_READ","BUCKET_OWNER_READ","BUCKET_OWNER_FULL_CONTROL","LOG_DELIVERY_WRITE","documentIsRequired","getDocumentsToCount","allFilesAreValid","documentsToCount","getPercent","documentExists","Slingshot","allowedFileTypes","maxSize","Method","deleteFile","fileKey","setFileStatus","newStatus","setFileError","downloadFile","getSignedUrl","updateDocumentsCache","fetchLoans","proLoans","reject","resolve","createUserWithLoan","referredByUserLink","scenario","users","createProUser","_factory","ADMIN","t0","performance","t1","t2","t3","LoanSchema","blackbox","unique","regEx","adminValidation","userFormsEnabled","verificationStatus","LOAN_VERIFICATION_STATUS","PURCHASE_TYPE","currentOwner","OWNER","futureOwner","otherOwner","previousLender","customName","applicationType","APPLICATION_TYPES","revenueLinks","userCache","displayWelcomeScreen","shareSolvency","referralId","LOAN_CATEGORIES","adminNote","lendersCache","tasksCache","financedPromotionLink","simpleBorrowersForm","structureSchema","amortizationType","sortOffersBy","loanTranchesSchema","borrowerIdsSchema","borrowerIds","previousLoanTranchesSchema","previousLoanTranches","min","propertyIdsSchema","propertyIds","maxCount","maxPropertyValueSchema","maxPropertyValue","SOLVENCY_TYPE","SIMPLE","promotionSchema","promotionLinks","promotionOptionLinks","referredByOrganisationLink","assignedEmployeeCache","contactLink","organisationLink","dueAt","isPrivate","assigneeLink","LinkInitializer","Loans","activities","inversedBy","autoremove","promotions","metadata","revenues","denormalize","body","financedPromotion","Promotions","attributedPromotionLots","lenders","tasks","LEAD","ONGOING","CLOSING","BILLING","FINALIZED","PENDING","UNSUCCESSFUL","TEST","LOAN_STATUS_ORDER","ACQUISITION","REFINANCING","CONSTRUCTION","AG","AR","AI","BL","BS","BE","FR","GE","GL","GR","JU","LU","NE","NW","OW","SG","SH","SZ","SO","TG","TI","UR","VD","VS","ZG","ZH","LI","FIRST","SECOND","BOTH","INSURANCE_USE_PRESET","WITHDRAWAL","COLLATERAL","LOAN_STRATEGY_PRESET","FIXED","MANUAL","AMORTIZATION_TYPE","INDIRECT","DIRECT","PAYMENT_SCHEDULES","MONTHLY","YEARLY","SEMESTERLY","LOAN_QUERIES","ADMIN_LOANS","ANONYMOUS_LOAN","FULL_LOAN","LOAN_FILES","LOAN_SEARCH","PRO_LOANS","PRO_PROMOTION_LOANS","PRO_PROPERTY_LOANS","PRO_REFERRED_BY_LOANS","USER_LOANS_E2E","USER_LOANS","REQUEST","OFFERS","STEP_ORDER","NONE","REQUESTED","OK","FULL","ORGANISATION_NAME_SEPARATOR","LOCAL_STORAGE_ANONYMOUS_LOAN","EMPTY_STRUCTURE","STANDARD","PREMIUM","Mongo","insert","loanInsert","Match","loanUpdate","loanDelete","requestLoanVerification","confirmClosing","pushLoanValue","popLoanValue","adminLoanInsert","userLoanInsert","proPropertyId","test","addNewStructure","removeStructure","selectStructure","duplicateStructure","assignLoanToUser","switchBorrower","oldBorrowerId","sendNegativeFeedbackToAllLenders","loanUpdatePromotionInvitedBy","promotionId","invitedBy","reuseProperty","setMaxPropertyValueWithoutBorrowRatio","addNewMaxStructure","setLoanStep","nextStep","loanShareSolvency","Boolean","anonymousLoanInsert","existingAnonymousLoanId","loanInsertBorrowers","amount","adminLoanReset","loanLinkPromotion","loanUnlinkPromotion","loanSetCreatedAtActivityDescription","adminLoans","adminLoan","withSort","$options","scoped","anonymousLoan","userLoan","maxPropertyValueExists","fullLoan","loanSearch","updatedAt","limit","proPromotionLoans","proPropertyLoans","proReferredByLoans","userLoans","withFilteredPromotions","userProperty","loanPromotionOption","reduce","formatLoanWithStructure","fullOffer","hasPromotion","hasProProperty","PROPERTY_CATEGORY","nextDueTask","nextDueTaskReducer","insertTestData","n","promises","fetchQueries","promise","queryItems","insertAndFetchTestData","fetchQuery1","fetchQuery2","fetchQuery3","fetchQuery4","$limit","$skip","$sort","BorrowerSchema","ownCompaniesSchema","protectedKeys","BorrowerSchemaAdmin","makeArrayOfObjectsSchema","intlId","personalInfoSchema","birthDate","isSwiss","residencyPermit","citizenship","isUSPerson","childrenCount","company","financeInfoSchema","netSalary","bonusExists","bonus2015","bonus2016","bonus2017","bonus2018","bonus2019","hasOwnCompany","ownCompanies","moneyField","B","C","CI","F","G","L","N","S","GENDER","M","SINGLE","PACSED","DIVORCED","WIDOW","OTHER_INCOME","WELFARE","PENSIONS","EXPENSES","LEASING","PERSONAL_LOAN","THIRD_PARTY_FORTUNE_REIMBURSEMENT","BORROWER_QUERIES","ADMIN_BORROWERS","BORROWER_SEARCH","INSURANCE_2","INSURANCE_3A","BANK_3A","INSURANCE_3B","THIRD_PARTY_FORTUNE","RETIREMENT_AGE","Borrowers","initialDocuments","conditionalDocuments","borrowerConstants","bank3A","insurance3B","realEstate","expenses","otherFortune","otherIncome","borrowerInsert","borrowerUpdate","borrowerDelete","pushBorrowerValue","popBorrowerValue","pullBorrowerValue","getReusableBorrowers","createRegexQuery","generateMatchAnyWordRegexp","adminBorrowers","adminBorrower","borrowerSearch","searchQuery","formattedSearchQuery","filters","$and","age","addressReducer","ContactSchema","Email","phoneNumbers","userLink","Contacts","CONTACTS_COLLECTION","CONTACTS_QUERIES","ADMIN_CONTACTS","CONTACT_SEARCH","contactInsert","contactRemove","contactId","contactUpdate","contactChangeOrganisations","newOrganisations","adminContacts","contactSearch","contactOffers","emmitter","MODIFIED_FILES_EVENT","LOAD_LOAN","CALLED_METHOD","IS_LOGGING","emit","emitMethod","addListener","listenerFunction","listenersForEvent","addMethodListener","methods","addErrorListener","logEmittedEvent","logListener","arg","getListenerFunctions","removeListener","removeAllListeners","featureConfig","featureOne","featureWhichIsDisabled","featureWithPriorityOfDecision","featureMap","tp1","tp2","tp3","featureNotInConfig","tp4","featureService","anotherFeatureService","A_FEATURE","TP1","ROUTES_NOT_PRODUCTION_READY","features","LITE_VERSION","enhanceChildrenWith","changeCodeWith","NOT_PRODUCTION_READY","getEnabledFeatureDecisions","enabledFeatureMap","featureIsEnabled","extend","getFeatureDecision","currentFeatureDecisions","TOGGLE_POINTS","WIDGET1_CONTINUE_BUTTON","STRIPPED_LITE_VERSION_UI","ROUTES_CONFIG_STRIPPED_IN_LITE_VERSION","childrenEnhancer","switchElements","performSwitch","codeChangingFunction","singleInterestRate","InterestRatesSchema","InterestRates","INTEREST_TREND","INTEREST_RATES_COLLECTION","LIBOR","YEARS_1","YEARS_2","YEARS_5","YEARS_10","YEARS_15","YEARS_20","YEARS_25","INTEREST_RATES_QUERIES","CURRENT_INTEREST_RATES","interestRatesInsert","interestRatesRemove","interestRatesId","interestRatesUpdate","Irs10ySchema","Irs10y","IRS10Y_COLLECTION","IRS10Y_QUERIES","IRS10Y","irs10yInsert","irs10y","irs10yRemove","irs10yId","irs10yUpdate","incomeConsideration","incomeConsiderationType","bonusAlgorithm","bonusConsideration","bonusHistoryToConsider","companyIncomeConsideration","companyIncomeHistoryToConsider","dividendsConsideration","dividendsHistoryToConsider","realEstateIncomeAlgorithm","realEstateIncomeConsideration","investmentIncomeConsideration","expensesSubtractFromIncome","$unset","EXPENSE_TYPES_WITHOUT_DELTAS","fortuneReturnsRatio","percentageField","theoreticalExpenses","theoreticalInterestRate","theoreticalInterestRate2ndRank","theoreticalMaintenanceRate","cutOffCriteria","maxBorrowRatio","maxBorrowRatioWithPledge","maxIncomeRatio","otherParams","adminComments","pdfComments","LenderRulesSchema","organisationCache","LenderRulesEditorSchema","jsonLogic","rulesToMerge","filterIsValid","mergeRules","names","oldRules","mergedObject","newRuleName","newRule","newRules","getMatchingRules","storeOrigin","rules","isAllRule","and","parseFilter","ruleObject","var","variable","formatFilter","LenderRules","BONUS_ALGORITHMS","LENDER_RULES_COLLECTION","LENDER_RULES_QUERIES","ORGANISATION_LENDER_RULES","INCOME_CONSIDERATION_TYPES","GROSS","NET","REAL_ESTATE_CONSIDERATION_TYPES","ADD_TO_INCOME","SUBTRACT_FROM_EXPENSES","EXPENSES_CONSIDERATION_TYPES","SUBTRACT_FROM_INCOME","ADD_TO_EXPENSES","LENDER_RULES_VARIABLES","INCOME","CANTON","BORROW_RATIO","WANTED_LOAN","PROPERTY_VALUE","INSIDE_AREA","PROPERTY_TYPE","ZIP_CODE","REMAINING_BANK_FORTUNE","LENDER_RULES_OPERATORS","EQUALS","MORE_THAN","MORE_THAN_OR_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","IN","DEFAULT_MAIN_RESIDENCE_RULES","DEFAULT_SECONDARY_RESIDENCE_RULES","EXPENSE_TYPES","REAL_ESTATE_DELTA_POSITIVE","REAL_ESTATE_DELTA_NEGATIVE","THEORETICAL_REAL_ESTATE","DEFAULT_VALUE_FOR_ALL","pensionIncomeConsideration","realEstateIncomeConsiderationType","lenderRulesInsert","organisationId","logicRules","lenderRulesInitialize","lenderRulesRemove","lenderRulesId","lenderRulesUpdate","lenderRulesUpdateFilter","setLenderRulesOrder","orders","LenderSchema","TO_BE_CONTACTED","loanLink","LENDERS_COLLECTION","LENDERS_QUERIES","LOAN_LENDERS","CONTACTED","OFFER_RECEIVED","TO_EXCLUDE","Lenders","lenderInsert","lenderRemove","lenderId","lenderUpdate","lenderLinkOrganisationAndContact","LotSchema","Lots","LOTS_COLLECTION","LOT_TYPES","BASEMENT","PARKING_MOTORBIKE","PARKING_CAR","PARKING_IN_A_ROW","PARKING_DISABLED","lotInsert","lot","lotUpdate","lotId","lotRemove","MortgageNoteSchema","MortgageNotes","mortgageNoteInsert","mortgageNote","mortgageNoteRemove","mortgageNoteUpdate","MORTGAGE_NOTES_COLLECTION","MORTGAGE_NOTES_QUERIES","PromotionLotSchema","AVAILABLE","propertyLinks","minCount","lotLinks","attributedToLink","PromotionLots","promotion","lots","attributedTo","promotionLotInsert","promotionLot","promotionLotUpdate","promotionLotId","promotionLotRemove","addLotToPromotionLot","removeLotLink","bookPromotionLot","cancelPromotionLotBooking","sellPromotionLot","PROMOTION_LOTS_COLLECTION","BOOKED","SOLD","BOOKED_FOR_ME","NOT_AVAILABLE","SOLD_TO_ME","PROMOTION_LOT_QUERIES","APP_PROMOTION_LOT","PRO_PROMOTION_LOT","PROMOTION_LOT_FILES","propertiesValue","lotsValue","reducedStatus","PromotionOptionSchema","promotionLotLinks","custom","solvency","PROMOTION_OPTION_SOLVENCY","PromotionOptions","promotionOptionInsert","promotionOptionRemove","promotionOptionUpdate","increaseOptionPriority","reducePriorityOrder","PROMOTION_OPTIONS_COLLECTION","PROMOTION_OPTION_QUERIES","APP_PROMOTION_OPTION","PRO_PROMOTION_OPTIONS","UNDETERMINED","SOLVENT","INSOLVENT","address2","priority","attributedToMe","SCHEMA_BOOLEAN","promotionPermissionsSchema","canAddLots","canModifyLots","canRemoveLots","canModifyPromotion","canManageDocuments","displayCustomerNames","checkboxes","PROMOTION_PERMISSIONS","canInviteCustomers","canBookLots","canSellLots","PromotionSchema","assignedEmployeeId","userLinksSchema","lenderOrganisationLink","constructionTimeline","signingDate","dateField","BasePromotionSchema","shouldAnonymize","permissions","customerOwnerType","getPromotionCustomerOwnerType","PROMOTION_INVITED_BY_TYPE","forLotStatus","promotionLotStatus","isAttributed","USER","ORGANISATION","Organisations","promotionLoan","promotionInsert","promotionUpdate","promotionRemove","insertPromotionProperty","setPromotionUserPermissions","addProUserToPromotion","removeProFromPromotion","sendPromotionInvitationEmail","isNewUser","removeLoanFromPromotion","editPromotionLoan","promotionLotIds","showAllLots","getCurrentUserPermissionsForPromotion","organisationUserIds","clientGetBestPromotionLotStatus","myPromotionLotStatuses","shouldHideForLotStatus","shouldHide","PROMOTIONS_COLLECTION","PROMOTION_TYPES","CREDIT","CANCELLED","FINISHED","OPEN","PREPARATION","PROMOTION_QUERIES","ADMIN_PROMOTIONS","APP_PROMOTION","PRO_PROMOTION","PRO_PROMOTIONS","PRO_PROMOTION_USERS","PROMOTION_FILES","PROMOTION_SEARCH","PRO_PROMOTION_SIMPLE","ANY","DISPLAY_CUSTOMER_NAMES","FOR_LOT_STATUS","INVITED_BY","PROMOTION_PERMISSIONS_BUNDLES","INVITATION","CONSULTATION","consultation","MODIFICATION","BOOKING","SELLING","PROMOTION_PERMISSIONS_FULL_ACCESS","adminPromotions","adminPromotionsFragment","proPromotion","searchPromotions","appPromotion","withFilteredLoan","promotionSearch","proPromotions","proPromotionUsers","promotionLotStatusReducer","propertyPermissionsSchema","canInviteProUsers","canModifyProperty","canManagePermissions","canSellProperty","canBookProperty","propertyConstants","referredBy","PropertySchema","rowsMax","propertyType","houseType","HOUSE","flatType","investmentRent","constructionYear","renovationYear","insideArea","areaNorm","landArea","terraceArea","gardenArea","numberOfFloors","floorNumber","roomCount","bathroomCount","volume","volumeNorm","parkingInside","parkingOutside","minergie","isCoproperty","copropertyPercentage","isNew","latitude","longitude","landValue","constructionValue","additionalMargin","externalId","useOpenGraph","externalUrl","imageUrls","Url","loanCount","userAllowedKeys","PropertySchemaAdmin","methodDefinitions","propertyMethods","Properties","propertyInsert","propertyUpdate","propertyDelete","pushPropertyValue","popPropertyValue","pullPropertyValue","evaluateProperty","loanResidenceType","propertyDataIsInvalid","addProUserToProperty","proPropertyInsert","setProPropertyPermissions","removeProFromProperty","proUserId","removeCustomerFromProperty","insertExternalProperty","getLoanResidenceType","WITHOUT_CERTIFICATE","FOR_SALE","COMMERCE","VOLUME_NORM","SIA_416","SIA_116","BIC","AREA_NORM","NIA","NLS","PROPERTY_QUERIES","ADMIN_PROPERTIES","ANONYMOUS_PROPERTY","PRO_PROPERTIES","PRO_PROPERTY_USERS","PROPERTY_FILES","PROPERTY_SEARCH","USER_PROPERTY","HOUSE_TYPE","DETACHED","ATTACHED_END_BUILDING","ATTACHED_MID_TERRACE_BUILDING","FLAT_TYPE","SINGLE_FLOOR_APARTMENT","DUPLEX_APARTMENT","PENTHOUSE_APARTMENT","PENTHOUSE_MAISONETTE","TERRACE_APARTMENT","MINERGIE_CERTIFICATE","MINERGIE_P","MINERGIE_ECO","MINERGIE_P_ECO","OTHER_CERTIFICATE","PRO","PROMOTION","PROPERTY_REFERRED_BY_TYPE","PROPERTY_PERMISSIONS","FOR_PROPERTY_STATUS","REFERRED_BY","PROPERTY_PERMISSIONS_FULL_ACCESS","forPropertyStatus","PROPERTY_SOLVENCY","NOT_SHARED","adminProperties","adminProperty","anonymousProperty","userPropertyFragment","openGraphData","propertySearch","proProperties","proProperty","proPropertyUsers","proUser","thumbnail","url","valuePerSquareMeterInside","valuePerSquareMeterLand","hasOrg","org","RevenueSchema","secondaryType","REVENUE_TYPES","INSURANCE","EXPECTED","expectedAt","paidAt","organisationLinks","TO_BE_PAID","sourceOrganisationLink","loanCache","cacheField","Revenues","sourceOrganisation","revenueInsert","revenue","revenueRemove","revenueId","revenueUpdate","consolidateRevenue","consolidateCommission","commissionRate","REVENUES_COLLECTION","REVENUE_QUERIES","ADMIN_REVENUES","MORTGAGE","FEE","REVENUE_TYPES_INSURANCE","DEATH_3A","DEATH_3B","INCOME_PROTECTION_3A","INCOME_PROTECTION_3B","LIFE_3A","LIFE_3B","REVENUE_SECONDARY_TYPES","CLOSED","PAID","Activities","ActivitySchema","createdBy","shouldNotify","ACTIVITIES_COLLECTION","ACTIVITY_QUERIES","ADMIN_ACTIVITIES","ACTIVITY_TYPES","EMAIL","EVENT","PHONE","SERVER","ACTIVITY_SECONDARY_TYPES","CREATED","REMOVE_LOAN_FROM_PROMOTION","TRACKING_COOKIE","LOGIN_IP_BLACKLIST","analyticsLogin","analyticsVerifyEmail","withSmartQuery","makeSkipContainer","skip","setWrappedComponent","FinalComponent","makeRenderMissingDocIfNoData","single","makeMapProps","dataName","withQueryRefetcher","queryName","refetch","withGlobalQueryManager","reactive","shouldActivateGlobalRefetch","refetchOnMethodCall","addQueryToRefetch","removeQueryToRefetch","calculateParams","queryOptions","renderMissingDoc","smallLoader","completeQuery","withQuery","loadOnRefetch","FROM_NAME","FROM_EMAIL","FROM_DEFAULT","CTA_URL_DEFAULT","INTERNAL_EMAIL","EPOTEK_PHONE","EMAIL_I18N_NAMESPACE","EMAIL_PARTS","SUBJECT","TITLE","BODY","CTA","FROM","FOOTER_TYPES","VISITOR","EMAIL_TEMPLATES","NOTIFICATION","mandrillId","variables","NOTIFICATION_AND_CTA","CTA_URL","PROMOTION_INVITATION","MARKETING_BLURB","COVER_IMAGE_URL","LOGO_URL_1","LOGO_URL_2","LOGO_URL_3","NOTIFICATION_AND_CTA_V2","CSS","EMAIL_IDS","CONTACT_US","CONTACT_US_ADMIN","VERIFY_EMAIL","RESET_PASSWORD","ENROLL_ACCOUNT","VERIFICATION_REQUESTED","VERIFICATION_ERROR","VERIFICATION_PASSED","INVITE_USER_TO_PROMOTION","SEND_FEEDBACK_TO_LENDER","INVITE_USER_TO_PROPERTY","REFER_USER","FIND_LENDER_NOTIFICATION","CONFIRM_USER_INVITATION","LOAN_CHECKLIST","sendEmail","emailId","sendEmailToAddress","TEST_LASTNAME","TEST_FIRSTNAME","TEST_PHONE","getRandomLoanName","Factory","faker","verified","ACTIVE","conditions","ORGANISATION_TYPES","BANK","getSingularFactoryName","COLLECTIONS","arrayify","maybeArray","findCollectionNameByLinkName","linkName","findLinkKeys","__links","linkNames","links","insertDoc","factory","docExists","useFactories","generator","docs","docsById","pushId","pushDoc","createNestedObject","linkKeys","docToInsert","insertedDoc","linksToInsert","linkCollection","linkedDocs","linkedDoc","linkId","parentId","collectionService","$metadata","docsInCollection","_update","operator","baseUpdate","safeGet","find","findOne","checkQuery","createQuery","fetchOne","safeFetchOne","$filters","fetch","getLink","countAll","getAll","exists","aggregate","addLink","linker","strategy","removeLink","updateLinkMetadata","getAssignedEmployee","getAdditionalDocLabel","setAdditionalDoc","additionalDocumentsUpdate","removeAdditionalDoc","additionalDocId","getDocFromCollection","getIdFieldNameFromCollection","collectionName","getCollectionNameFromIdField","idFieldName","createMeteorAsyncFunction","promiseFunc","callback","flattenObject","delim","delimiter","flattened","strip","k","getUserOrganisationName","organisationName","isReferredByOrganisation","isReferredByOrganisationUser","organisationUsers","getReferredBy","sortObject","sortedObject","keys","generateMatchAllWordsRegexp","words","word","splitStringIntoWords","searchQueryWords","containsMultipleWords","$regex","createSearchFilters","searchFieldsArray","$or","searchField","fieldName","MORTGAGE_NOTE_TYPES","PAPER","REGISTRAR","MORTGAGE_NOTE_CATEGORIES","BEARER","REGISTERED","zipcodes","contactsSchema","contacts","makePermissions","autoFormDisplayCondition","autoFormLabel","permissionsSchema","userLinks","mortgageNoteLinks","roundedInteger","digits","rounder","decimalMoneyField","documentsField","APP_URL","PRO_URL","IMPERSONATE_ROUTE","IMPERSONATE_USER_ID","IMPERSONATE_TOKEN","microserviceUrl","impersonateAdmin","directInit","inversedInit","setLinks","fn","isActive","init","addQuery","refetchQuery","refetchQueries","methodName","getMixpanelAuthorization","getServerTime","downloadPDF","setUserToLoan","removeBorrower","submitContactForm","details","rateLimit","timeRange","addUserToDoc","throwDevError","promiseNoReturn","migrateToLatest","updateDocument","updateDocumentUnset","generateScenario","Mutation","run","callParams","href","host","aopData","additionalData","setHandler","self","setClientUrl","Notifications","recipients","activity","task","NOTIFICATIONS_COLLECTION","NOTIFICATION_QUERIES","ADMIN_NOTIFICATIONS","NotificationSchema","recipientLinks","taskLink","activityLink","revenueLink","offerMethods","Offers","offerInsert","offerUpdate","offerDelete","offerSendFeedback","saveFeedback","OFFER_TYPE","COUNTERPARTS","OFFERS_COLLECTION","OFFER_QUERIES","LOAN_OFFERS","ADMIN_OFFERS","OfferSchema","epotekFees","lenderLink","withCounterparts","lenderCache","AdminOfferSchema","adminOffers","loanOffers","referredCustomers","sourceOfRevenues","organisationInsert","organisationUpdate","organisationRemove","addContactToOrgnaisation","addUserToOrganisation","removeUserFromOrganisation","setCommissionRates","commissionRates","ORGANISATIONS_COLLECTION","PRIVATE_BANK","REAL_ESTATE_BROKER","NOTARY_OFFICE","CONSTRUCTION_COMPANY","DEVELOPER","ARCHITECT","ORGANISATION_QUERIES","ADMIN_ORGANISATIONS","FILES","ORGANISATION_SEARCH","PRO_ORGANISATION","USER_ORGANISATIONS","ORGANISATION_FEATURES","LENDER","ORGANISATION_TAGS","CH_PREMIUM","CH_RETAIL","FR_RETAIL","FR_PREMIUM","YACHTING","HELICOPTERS_LEASING","LBO","OrganisationSchema","contactIds","tags","lenderRulesCount","adminOrganisations","fullOrganisation","organisationSearch","proOrganisation","userOrganisations","$in","userOrganisation","tot","generatePDF","htmlOnly","PDF_TYPES","LOAN","TEMPLATES","A4_HEIGHT","MARGIN_TOP","MARGIN_BOTTOM","MARGIN_SIDE","WIGGLE_ROOM","CONTENT_HEIGHT","BORDER_BLUE","BORDER_GREY","DOCUMENT_USER_PERMISSIONS","MODIFY","READ","logError","taskMethods","Tasks","taskInsert","taskUpdate","taskId","taskComplete","taskChangeStatus","setAssigneeOfTask","newAssigneeId","TASKS_COLLECTION","COMPLETED","TASK_QUERIES","TASKS","UNASSIGNED_TASKS","TASKS_FOR_DOC","SIDENAV_TASKS","TASK_PRIORITIES","HIGH","TasksSchema","completedAt","promotionLink","checkFields","obj","fragments","fragmentName","fragmentCreator","fragment","UPDATE_WATCHERS_COLLECTION","userMutations","Users","assignedEndUsers","assignedPromotions","assignedTasks","doesUserExist","sendVerificationLink","assignAdminToUser","adminId","assignAdminToNewUser","setRole","adminCreateUser","updateUser","getUserByPasswordResetToken","testCreateUser","removeUser","sendEnrollmentEmail","changeEmail","newEmail","userUpdateOrganisations","testUserAccount","generateApiKeyPair","proInviteUser","promotionIds","getUserByEmail","setUserReferredBy","proId","setUserReferredByOrganisation","proInviteUserToOrganisation","proSetShareCustomers","shareCustomers","anonymousCreateUser","referralExists","adminUsers","USER_QUERIES","adminUser","appUser","appUserFragment","fullUser","proReferredByUsers","proUserFragment","userEmails","sentEmails","userSearch","USERS_COLLECTION","ADMIN_USERS","APP_USER","CURRENT_USER","PRO_REFERRED_BY","PRO_USER","REFERRED_USERS","USER_EMAILS","USER_SEARCH","USER_EVENTS","USER_CREATED","LOCAL_STORAGE_REFERRAL","LOCAL_STORAGE_OLD_REFERRAL","UserSchema","username","heartbeat","apiPublicKey","baseBorrower","loanBorrower","birthPlace","personalBank","worksForOwnCompany","loanBase","adminLender","maxIncomeRatioTight","minCash","userPropertyValue","adminPropertyValue","userMaxPropertyValue","second","borrowerHash","adminMaxPropertyValue","loanProgress","readAt","simpleUser","baseOrganisation","generatedRevenues","organisationUser","proPromotionLot","promotionProperty","appPromotionLot","fullPromotionOption","proPromotionOption","appPromotionOption","basePromotion","propertySummary","fullProperty","pictures","proPropertySummary","apiProperty","baseTask","prepareState","overrides","fortune","currentLoan","createSuggestValue","makeSuggestValue","suggesters","widget1Suggesters","middlewares","mockStore","configureMockStore","expectActions","store","prepareStore","NAME","expectedActions","widget1Types","cappedFields","MAX_BORROW_RATIO_PRIMARY_PROPERTY","MAX_BORROW_RATIO_WITH_PLEDGE","commonTypes","interestRate","finishedTutorial","useMaintenance","initialSliderMax","SET_VALUE","currentLoanReducer","SUGGEST_VALUE","SET_AUTO","INCREASE_SLIDER_MAX","SET_ALLOW_EXTREME_LOAN","myField","selectFields","autoValues","selectAutoValues","m","mR","withAmortizing","withoutAmortizing","nF","basicValue","rank1Fortune","rank2Fortune","rankFortune","maxFortune","r","incomeLimited1","incomeLimited2","fortuneLimitedProperty","salaryLimitedProperty","INTERESTS_FINMA","MAINTENANCE_FINMA","currentNotaryFees","maxLoan","hardCap","roundTo","_widget1Selectors","suggestValues","getState","makeWidget1Selector","suggestActions","suggestValue","getPropertyCappedValue","makeSelectValue","maxValue","shouldCapValue","CAPPED_FIELDS","cleanNextValue","nextAuto","setStep","willBeFinalStep","resetCalculator","setAllowExtremeLoan","SALARY","FORTUNE","PROPERTY","CURRENT_LOAN","ACQUISITION_FIELDS","REFINANCING_FIELDS","ALL_FIELDS","FINAL_STEP","combineReducers","roundedValue","createWidget1ValueReducers","createValueReducer","createSelector","createStructuredSelector","selectWidget1","selectState","widget1Object","makeSelectAuto","pickAutoValues","acquisitionSuggesters","all","Widget1Suggester","propertyToSalary","propertyToFortune","fortuneToProperty","refinancingSuggesters","suggestWantedLoan","makeValueSuggester","suggester","thisValueIsManual","manualValueKeys","manualValues","suggestingValues","suggestedValue","_commonReducers","commonReducers","RESET_VALUE","yo","AVERAGE","WEAK_AVERAGE","logic","result2","income","subtract","REAL_ESTATE_INCOME_ALGORITHMS","POSITIVE_NEGATIVE_SPLIT","progress","borrowerDocuments","calc2","myRate","fortuneUsed","other","withBankFortune","withInsurance2","withInsurance3","withInsurance2And3","loanObject","returnVarParent","return2","parentFunc","addClass","SuperClass","withCalc2","increment","setVar","withCalc3","multiply","returnVarChild","childFunc","UberClass","Calc2","MyClass","returnNumber","myClass","memoizeMiddleware","next","memoFunc","preMiddleware","postMiddleware","middlewareManager","nothing","stringArg","parameters","withBorrowerCalculator","initBorrowerCalculator","middleware","getArrayValues","mapFunc","getBonuses","bonusKeys","getBonusIncome","acc","weighting","getConsideredValue","valuesToConsider","getBorrowerCompletion","getBorrowerFilesProgress","percentages","getFunds","getFortune","getThirdPartyFortune","getExpenses","getInsurance2","getInsurance3A","getBank3A","getInsurance3B","getInsuranceFortune","getCashFortune","getMissingBorrowerFields","formArray","getBorrowerInfoArray","formArray2","getBorrowerFinanceArray","getMissingFieldIds","getMissingBorrowerDocuments","getOtherFortune","getOtherIncome","getTotalFunds","getRealEstateFortune","getRealEstateValue","getRealEstateDebt","getRealEstateIncome","realEstateIncome","getRealEstateIncomeTotal","shouldUseNetSalary","getSalary","getNetSalary","getFortuneReturns","getTotalIncome","borrowerIncome","getRetirement","argMap","getAmortizationDuration","retirement","personalInfoPercent","personalFormArray","financeFormArray","getCountedArray","personalInfoPercentSimple","simpleFormArray","getBorrowerSimpleArray","borrowerInfoPercent","borrowerFinancePercent","getBorrowerFormHash","getFormValuesHashMultiple","sumValues","getNetFortune","getMortgageNotes","getRealEstateExpenses","realEstateCost","getRealEstateDeltas","allRealEstate","getRealEstateCost","sumArray","getAllExpenses","deltas","delta","getGroupedExpenses","flattenedExpenses","shouldSubtractExpenseFromIncome","groupRealEstateDeltas","toSubtractFromIncome","negativeDeltas","positiveDeltas","getGroupedExpensesBySide","expensesBySide","expenseType","subtractExpenseTypeFromIncome","groupedExpenses","expenseTypeIsDelta","formatRealEstateExpenses","getFormattedExpenses","getCommentsForExpenseType","expensesOfType","getCommentsForOtherIncomeType","otherIncomeOfType","canCalculateSolvency","withCombinedCalculator","filesProgress","getAggregatePercent","withLenderRulesInitializator","initialize","sortedlenderRules","orderA","orderB","globalRules","primaryRules","secondaryRules","storeRuleOrigin","ruleName","getOriginOfRule","getLenderRulesVariables","getGlobalLenderRules","matchingRules","getPrimaryLenderRules","getSecondaryLenderRules","lenderRulesIsSecondary","applyRules","rulesToApply","rule","cleanUpUnusedRules","withLoanCalculator","getProjectValue","getTotalUsed","getTotalPledged","getFees","calculator","calculatedNotaryFees","getFeesCalculator","finalInterestRates","getTheoreticalInterests","firstRank","secondRank","firstRankInterests","secondRankInterests","getTheoreticalMaintenance","offerToUse","oldAmortizationGoal","getTheoreticalAmortization","getAmortizationRate","cacheFix","getMonthly","getTheoreticalPropertyCost","asObject","maintenance","getTheoreticalMonthly","propertyCost","expensesToAddToTheoreticalCost","cost","ratio","getMaxBorrowRatio","loanHasMinimalInformation","getLoanFilesProgress","getMissingLoanDocuments","getTotalFinancing","getNonPledgedOwnFunds","getPledgedOwnFunds","getUsedFundsOfType","ownFundType","ownFundUsageType","getRemainingFundsOfType","getTotalRemainingFunds","refinancingPercent","getRefinancingFormArray","getMortgageNoteIncrease","propertyMortgageNotes","structureMortgageNotes","allMortgageNotes","mortgageNoteValue","getCashUsed","getCashRatio","cashUsed","cashRatio","hasEnoughCash","structureIsValid","getEstimatedRevenues","getEstimatedReferralRevenues","getRequiredOwnFunds","projectValue","getMissingOwnFunds","fundsRequired","totalCurrentFunds","isMissingOwnFunds","missingOwnFunds","hasTooMuchOwnFunds","hasCompleteStructure","withOfferCalculator","withPromotionCalculator","canAffordPromotionLot","getSolvency","cashFortune","cash","getMaxPropertyValueWithInsurance2","availableFortune","canAffordProperty","getIncomeLimitedProperty","formatPromotionOptionIntoProperty","shouldUseConstructionNotaryFees","withPropertyCalculator","initPropertyCalculator","propertyPercent","propertyToCalculateWith","formArray1","getPropertyArray","getPropertyLoanArray","getPropAndWork","getPropertyWork","getPropertyFilesProgress","getPropertyCompletion","selectedProperty","formsProgress","getMissingPropertyFields","getMissingPropertyDocuments","hasDetailedPropertyValue","propertyExactValue","isPromotionProperty","withSelector","selectProperty","selectOffer","makeSelectPropertyKey","selectStructureKey","selectPropertyKey","makeSelectStructureKey","selectPropertyValue","structurePropertyValue","selectPropertyWork","selectLoanValue","INITIAL_MIN_BOUND","INITIAL_MAX_BOUND","INITIAL_ABSOLUTE_MAX_BOUND","MAX_ITERATIONS","ACCURACY","ROUNDING_DIGITS","MAX_BOUND_MULTIPLICATION_FACTOR","OWN_FUNDS_ROUNDING_ALGO","INITIAL_BORROW_RATIO_STEP_SIZE","withSolvencyCalculator","getAllowedOwnFundsTypes","ownFundTypeRequiresUsageType","makeOwnFunds","ownFundsObject","suggestStructure","forcedNotaryFees","finalLoanValue","notaryCalc","mortgageNoteIncrease","requiredOwnFunds","allowedOwnFundsTypes","newOwnFunds","createLoanObject","suggestedStructureIsValid","getMaxPropertyValue","foundValue","minBound","maxBound","absoluteMax","iterations","nextPropertyValue","roundValue","getNextStepSize","cache","newStepSize","direction","currentBorrowRatio","foundBetterValue","getMaxPropertyValueWithoutBorrowRatio","stepSize","deltaX","setMax","optimalBorrowRatio","yLeft","yRight","slope","currentMax","finalBorrowRatio","finalPropertyValue","getMaxPropertyValueForLoan","suggestStructureForLoan","withConfig","extraConfig","MappedFinanceCalculator","financeCalculatorArgumentMapper","borrowerExtractorMiddleware","amortizationBaseRate","age1","gender1","age2","gender2","rateType","rateType1","rateType2","retirement1","retirement2","toRetirement1","toRetirement2","initFinanceCalculator","ownFundsRoundingAmount","taxRate","estimatedCommission","referralCommission","referralCommissionSplit","pledgedValue","getBorrowRatioWithoutLoan","getRetirementForGender","getLoanCost","getLoanCostWithParts","checkInterestsAndTranches","amountToAmortize","getMaxLoanBase","getNotaryFeesRate","getAveragedInterestRate","totalRate","NO_INTEREST_RATE_ERROR","precisionMiddleware","addingMiddleware","subtractingMiddleware","divide","calcMiddleware","calcMiddleware1","calcMiddleware2","middlewareManager2","d","middlewareManagerHash","CLASS_METHODS_TO_EXCLUDE","instance","applyToAllMethods","method","getAllMethodNames","methodNames","proto","hasMethod","desc","applyToMethod","isArray","stringStartsWithUnderscore","useObjectMiddleware","objectMiddlewares","mappings","argumentMapperFunc","newArgumentStructure","before","degressive","brackets","maxTax","minTax","NOTARY_NOTE_BRACKETS","cantonConfigs","roundToCents","roundObjectKeys","hasDetailedConfig","shouldUseConstructionMath","hasDetailedValue","getNotaryFeesForLoan","buyersContractFees","mortgageNoteFees","deductions","propertyTransferTax","propertyRegistrationTax","roundedResult","estimate","getNotaryFeesWithoutLoan","buyersContractFeesAcquisition","notaryIncomeFromProperty","landRegistryPropertyTax","additionalFees","buyersContractFeesConstruction","propertyConstructionTax","mortgageNoteRegistrationTax","notaryIncomeFromMortgageNote","landRegistryMortgageNoteTax","getDeductions","buyersContractDeductions","transferTax","mortgageNoteDeductions","getDefaultFees","isCasatax","cantons","NOTARY_PROPERTY_BRACKETS_MIN","ADDITIONAL_FEES","PROPERTY_REGISTRATION_TAX","NOTARY_PROPERTY_BRACKETS","NOTARY_NOTE_BRACKETS_MIN","MORTGAGE_NOTE_REGISTRATION_TAX","LAND_REGISTRY_PROPERTY_TAX","LAND_REGISTRY_MORTGAGE_NOTE_TAX","CASATAX_CUTOFF","CASATAX_PROPERTY_DEDUCTION","PROPERTY_CONSTRUCTION_TAX","MORTGAGE_NOTE_CASATAX_DEDUCTION","TRANSFER_TAX","INFINITY","tax","previousBracket","allBrackets","bracketTax","NotaryFeesCalculator","formatPhoneNumber","parsePhoneNumberFromString","modifyDoc","customFunc","formatNumbersHook","fieldNames","updatedValue","modifier","insertedValue","dummyFunc","defaultEnzyme","configure","defaultShallow","adapter","generateData","customMount","withStore","customMountData","intlProvider","locale","getUserLocale","formats","getFormats","testComponent","configureStore","mountedComponent","jsdom","JSDOM","createLoginToken","loginToken","hashedToken","$set","createEmailVerificationToken","$push","when","userLogin","userEmail","userPassword","checkEmails","maximumFractionDigits","minimumFractionDigits","moneyWithoutCurrency","useGrouping","percentage","percentageRounded","setupMoment","monthsShort","monthsParseExact","weekdaysShort","weekdaysMin","weekdaysParseExact","longDateFormat","LT","LTS","LL","LLL","LLLL","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","relativeTime","future","past","s","mm","h","hh","dd","MM","yy","dayOfMonthOrdinalParse","ordinal","meridiemParse","isPM","meridiem","hours","week","dow","doy","localizationStartup","setupAccounts","Intl","addLocaleData","translateSimpleSchema","T9n","fr","accountsFr","translate","keyWithoutNumbers","subKey","initialLanguage","minString","maxString","minNumber","maxNumber","minNumberExclusive","maxNumberExclusive","minDate","maxDate","badDate","noDecimal","notAllowed","expectedType","regExp","inputHasChanged","newInput","prev","newInputs","lastInputs","newArgs","lastArgs","oneInputHasChanged","calledOnce","lastThis","lastResult","resultFn","getLocations","checkObjectStructure","makeCheckObjectStructure","template","g","j","abc","def","efg","parentKey","toDecimalNumber","toDistanceString","shouldCountField","dummyArray","idx","id3","trueValue","conditionalTrueValue","inputs","conditional","getFormValuesHash","doc2","times","normalize","taskDate1","taskDate2","taskDate3","arePathsUnequal","afterEach","userWithRole","urlFor","service","microservice","originalMicroservice","getRedirectIfInRoleForOtherApp","someValue","anotherValue","expectedOutput","sortArrayOfObjects","anotherVal","inputClone","cloneDeep","getClosestStations","response","getNearbyPlace","radius","byDistance","rankBy","places","place","lat","lng","distanceService","origins","destinations","travelMode","distance","google_key","localities","l","testErrors","missingKey","shouldBeArray","shouldBeObject","emptyArray","errorMessages","checkTemplate","subObj","subTemplate","subParentKey","errorMessage","parsedValue","negativePrefix","roundedDecimals","integerPart","integer","decimalPart","decimals","rounding","commaReplaced","dist","cookieName","RegExp","decodeURIComponent","returnEmptyArray","returnFalse","getCurrentValue","formField","conditionalInputIsTriggered","rootField","shouldCountAllFields","fieldIsValid","additionalField","conditionalField","simpleHash","combos","onlyNums","onlyNumsAndPlus","numberFormatters","phoneFormatters","moneyFormatters","setRequired","initialValue","makeFormArray","percentageObjects","aggregateCount","aggregatePercent","hash","char","IntlMessageFormat","defaultValues","ReactDOMServer","fallback","legacyValues","allValues","ENABLE_LOADABLE","LoadableLoading","pastDelay","Loadable","foundStructure","formatLoanWithDocuments","structureProperty","formatLoanWithPromotion","shouldSendStepNotification","prevStep","activeTasks","assigneeId","taskStatus","tasksWithoutDate","A","noDueDate","sortedTasks","TEST_TIMEOUT","INTERVAL","pollUntilReady","interval","timeout","handleIsReady","isReady","hasTimedOut","clearInterval","poll","setInterval","isReadyFunc","childrenToComponent","renderObjectOrFunction","objectOrFunction","arePathsEqual","paths","testFunc","isLogin","WITHOUT_LOGIN","isOnAllowedRoute","allowedRoute","inApp","inRole","redirectIfInRoleForOtherApp","getBaseRedirect","withoutLoginRoutes","allowedRoutes","formatReplacerObject","replacers","formattedReplacers","ASC","DESC","isEmpty","iteratee","isDate","sortFunc","makeSort","isAscending","createNumberMask","swissFrancMask","includeThousandsSeparator","thousandsSeparatorSymbol","swissFrancMaskDecimal","allowDecimal","requireDecimal","decimalSymbol","allowLeadingZeroes","allowNegative","decimalMask","decimalLimit","intersection","isUser","userRoles","flatten","userHasRoles","zipcode","code","cantonIndex","getZipcodeForCanton","cantonIndexForZipcode","getPartnerList","partner","base","filtered","tooltipTargets","tooltipTarget","tooltipsById","shouldDisplayAddPartner","isFirst","makeArrayOfObjectsInput","multiple","disableAddress","addressFieldsAreNecessary","autoComplete","incomeArray","ignore","year","fortuneArray","insuranceArray","getSimpleBorrowerFinanceArray","simple","mapInput","intlSafeObject","getOwnerOptions","isSecond","borrowerFirstName","shouldDisplayFloorNumber","shouldDisplayTerraceArea","EPOTEK_NUMBER","src","appTitle","employee","partnerList","filteredList","partnersToAvoid","getAllPartners","WIDGET1","widget1Tooltips","revenus","bonus","gratification","emprunteurs","emprunteur","offerTableTooltips","montant","libor","amortissement","expertise","devTooltips","Error","Component1","Component2","shouldUpdate","propNames","realMatch","exact","strict","paramNameFromProps","paramName","primaryArray","tertiary","borderGrey","charts","iconColor","iconHoverColor","mui","background","contrastText","darkPrimary","darkSuccess","AUTOSAVE_DEBOUNCE","NOTARY_FEES","AMORTIZATION_STOP","MAINTENANCE_REAL","APPROXIMATE_LPP_FEES","DEFAULT_AMORTIZATION","AMORTIZATION_YEARS","DEFAULT_INTEREST_RATE","MAX_BORROW_RATIO_OTHER","MAX_INCOME_RATIO","MAX_INCOME_RATIO_TIGHT","CURRENCY","MIN_CASH","AVERAGE_TAX_RATE","SECOND_PILLAR_WITHDRAWAL_TAX_RATE","VAT","BONUS_CONSIDERATION","BONUS_HISTORY_TO_CONSIDER","COMPANY_INCOME_TO_CONSIDER","DIVIDENDS_CONSIDERATION","DIVIDENDS_HISTORY_TO_CONSIDER","PENSION_INCOME_CONSIDERATION","REAL_ESTATE_INCOME_CONSIDERATION","INVESTMENT_INCOME_CONSIDERATION","FORTUNE_RETURNS_RATIO","ESTIMATED_COMMISSION","REFERRAL_COMMISSION","REFERRAL_COMMISSION_SPLIT"],"mappings":"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A;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;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","file":"/app.js","sourcesContent":["import '../testInit.test';\n\n// Import factories and links for tests to work\nimport '../../api';\nimport '../../api/api';\nimport '../../api/factories';\n","// Somehow the .app-test files importing this can't use import statements???\n// Leave this imported here for autoforms to work\nrequire('uniforms-bridge-simple-schema-2');\nconst SimpleSchema = require('simpl-schema').default;\n\nconst uniforms = require('uniforms-material');\n\nSimpleSchema.extendOptions([\n  'condition',\n  'customAllowedValues',\n  'customAutoValue',\n]);\n\nprocess.on('uncaughtException', (error) => {\n  console.log('uncaughtException error', error);\n});\nprocess.on('unhandledRejection', (error) => {\n  console.log('unhandledRejection error', error);\n});\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport {\n  getAmortizationForStructureWithOffer,\n  getMonthlyForStructureWithOffer,\n} from '../offerPickerHelpers';\n\ndescribe('offerPickerHelpers', () => {\n  describe('getAmortizationForStructureWithOffer', () => {\n    it('returns correct amortization for a structure', () => {\n      const props = {\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            propertyWork: 0,\n            propertyId: 'prop',\n            offerId: 'off',\n          },\n          offers: [\n            {\n              _id: 'off',\n              interest10: 0.01,\n              amortizationGoal: 0.5,\n              amortizationYears: 20,\n            },\n          ],\n          properties: [{ _id: 'prop', value: 1200000 }],\n        },\n      };\n      expect(getAmortizationForStructureWithOffer(props)).to.equal(1500);\n    });\n  });\n\n  describe('getMonthlyForStructureWithOffer', () => {\n    it('test name', () => {\n      const props = {\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            propertyWork: 0,\n            loanTranches: [{ type: 'interest10', value: 1 }],\n            offerId: 'off',\n            propertyId: 'prop',\n          },\n          offers: [\n            {\n              _id: 'off',\n              interest10: 0.01,\n              amortizationGoal: 0.5,\n              amortizationYears: 20,\n            },\n          ],\n          properties: [{ _id: 'prop', value: 1200000, yearlyExpenses: 12000 }],\n        },\n        structure: {\n          wantedLoan: 960000,\n          propertyWork: 0,\n          loanTranches: [{ type: 'interest10', value: 1 }],\n          offerId: 'off',\n          propertyId: 'prop',\n        },\n      };\n\n      // 1000 property costs\n      // 1500 amortization\n      // 800 interests\n\n      expect(getMonthlyForStructureWithOffer(props)).to.equal(1000 + 1500 + 800);\n    });\n  });\n});\n","import FinancingCalculator from '../../FinancingCalculator';\nimport Calculator from '../../../../../utils/Calculator';\nimport { getPropertyExpenses } from '../../FinancingResult/financingResultHelpers';\n\nexport const getAmortizationForStructureWithOffer = ({\n  loan,\n  structureId,\n  offer,\n}) =>\n  Calculator.getAmortization({\n    loan,\n    structureId,\n    offerOverride: offer,\n  });\n\nexport const getInterestsForStructureWithOffer = props =>\n  (FinancingCalculator.getInterestsWithTranches(props)\n    * props.structure.wantedLoan)\n  / 12;\n\nexport const getMonthlyForStructureWithOffer = (props) => {\n  const amort = getAmortizationForStructureWithOffer(props);\n  const interests = getInterestsForStructureWithOffer(props);\n  const prop = getPropertyExpenses(props);\n\n  return amort + interests + prop;\n};\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { getAvailableRates } from '../FinancingOffersSorterContainer';\n\ndescribe('FinancingOffersSorterContainer', () => {\n  describe('getAvailableRates', () => {\n    it('discards rates at 0', () => {\n      expect(getAvailableRates([{ interest10: 1, interest2: 0 }], {\n        structures: [],\n      })).to.deep.equal(['interest10']);\n    });\n\n    it('filters duplicate rates', () => {\n      expect(getAvailableRates(\n        [{ interest10: 1, interest2: 0 }, { interest10: 1, interest2: 0 }],\n        { structures: [] },\n      )).to.deep.equal(['interest10']);\n    });\n\n    it('adds all rates on structures', () => {\n      expect(getAvailableRates([], {\n        structures: [\n          {\n            loanTranches: [{ type: 'interest10', value: 1 }],\n          },\n          {\n            loanTranches: [{ type: 'interest2', value: 1 }],\n          },\n        ],\n      })).to.deep.equal(['interest10', 'interest2']);\n    });\n  });\n});\n","import React from 'react';\nimport { compose, withStateHandlers } from 'recompose';\n\nexport const { Provider, Consumer } = React.createContext();\n\nconst withContext = Component => ({ sortBy, setSort, setOrder, ...props }) => (\n  <Provider value={{ sortBy, setSort, setOrder }}>\n    <Component {...props} />\n  </Provider>\n);\n\nexport default compose(\n  withStateHandlers(\n    { sortBy: 'maxAmount' },\n    {\n      setSort: () => sortBy => ({ sortBy }),\n      setOrder: () => () => ({}),\n    },\n  ),\n  withContext,\n);\n","import React from 'react';\nimport { compose, withProps } from 'recompose';\nimport pick from 'lodash/pick';\nimport uniq from 'lodash/uniq';\nimport pickBy from 'lodash/pickBy';\n\nimport { INTEREST_RATES } from '../../../../api/constants';\nimport T from '../../../Translation';\nimport FinancingDataContainer from '../containers/FinancingDataContainer';\nimport { Consumer } from './FinancingOffersContainer';\n\nconst withContext = Component => props => (\n  <Consumer>{sortState => <Component {...props} {...sortState} />}</Consumer>\n);\n\nexport const getAvailableRates = (offers, loan) => {\n  const rates = [];\n\n  offers.forEach((offer) => {\n    const offerRates = pick(offer, Object.values(INTEREST_RATES));\n    const validRates = pickBy(offerRates, v => v);\n    rates.push(...Object.keys(validRates));\n  });\n\n  loan.structures.forEach(({ loanTranches }) => {\n    if (loanTranches) {\n      loanTranches.forEach(({ type }) => {\n        rates.push(type);\n      });\n    }\n  });\n\n  return uniq(rates);\n};\n\nconst withOptions = withProps(({ offers, loan }) => ({\n  options: [\n    { id: 'maxAmount' },\n    { id: 'amortization' },\n    { id: 'averagedRate' },\n    ...getAvailableRates(offers, loan).map(rate => ({ id: rate })),\n  ].map(({ id }) => ({\n    id,\n    label: <T id={`offer.${id}`} />,\n  })),\n}));\n\nexport default compose(\n  FinancingDataContainer,\n  withContext,\n  withOptions,\n);\n","// @flow\n/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport { shallow } from 'core/utils/testHelpers/enzyme';\nimport sinon from 'sinon';\n\nimport T from '../../../../../Translation';\nimport { CurrentOwnFunds } from '../CurrentOwnFunds';\nimport { OWN_FUNDS_TYPES } from '../../../../../../api/constants';\n\ndescribe('CurrentOwnFunds', () => {\n  let props;\n  const component = () => shallow(<CurrentOwnFunds {...props} />);\n\n  beforeEach(() => {\n    props = {\n      ownFunds: {\n        value: 10,\n        type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n        borrowerId: 'id',\n      },\n      borrowers: [{ bankFortune: 100, _id: 'id' }],\n      structure: { ownFunds: [] },\n    };\n  });\n\n  it('displays usageType only if it is defined', () => {\n    const usageType = 'some type';\n    expect(component().find(T).length).to.equal(1);\n\n    props.ownFunds = { usageType };\n\n    expect(component()\n      .find(T)\n      .at(1)\n      .props().id).to.include(usageType);\n  });\n\n  it('does not display firstName if there is only one', () => {\n    props.borrowers = [{ firstName: 'joe' }];\n    props.ownFunds = { borrowerId: 'id1' };\n    expect(component().contains('joe')).to.equal(false);\n  });\n\n  it('displays firstName if there are multiple', () => {\n    props.borrowers = [{ firstName: 'joe', _id: 'id1' }, {}];\n    props.ownFunds = { borrowerId: 'id1' };\n    expect(component().contains('joe')).to.equal(true);\n  });\n\n  it('opens modal if root div is clicked', () => {\n    const spy = sinon.spy();\n    props.handleOpen = spy;\n\n    component()\n      .find('div')\n      .simulate('click');\n    expect(spy.calledOnce).to.equal(true);\n  });\n\n  it('displays an error message if funds have changed to be lower than used', () => {\n    props.borrowers = [{ firstName: 'joe', _id: 'id1', bankFortune: 20 }];\n    props.ownFunds = [\n      {\n        borrowerId: 'id1',\n        value: 100000,\n        type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n      },\n    ];\n    props.structure = { ownFunds: [props.ownFunds] };\n    expect(component()\n      .find('p.error')\n      .exists()).to.equal(true);\n  });\n\n  it('displays an error message if funds have changed to be lower than used', () => {\n    props.borrowers = [{ firstName: 'joe', _id: 'id1', bankFortune: 150 }];\n    props.ownFunds = {\n      borrowerId: 'id1',\n      value: 80,\n      type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n    };\n    props.structure = {\n      ownFunds: [\n        props.ownFunds,\n        {\n          borrowerId: 'id1',\n          value: 80,\n          type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n        },\n      ],\n    };\n    expect(component()\n      .find('p.error')\n      .exists()).to.equal(true);\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport {\n  chooseOwnFundsTypes,\n  shouldAskForUsageType,\n  calculateRemainingFunds,\n  makeNewOwnFundsArray,\n  getNewWantedLoanAfterPledge,\n} from '../FinancingOwnFundsPickerHelpers';\nimport {\n  RESIDENCE_TYPE,\n  OWN_FUNDS_TYPES,\n  OWN_FUNDS_USAGE_TYPES,\n} from '../../../../../../api/constants';\n\ndescribe('FinancingOwnFundsPickerHelpers', () => {\n  describe('chooseOwnFundsTypes', () => {\n    it('returns the right values for main', () => {\n      expect(chooseOwnFundsTypes({\n        loan: { residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE },\n      })).to.deep.equal([\n        OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE,\n        OWN_FUNDS_TYPES.BANK_FORTUNE,\n        OWN_FUNDS_TYPES.INSURANCE_3A,\n        OWN_FUNDS_TYPES.BANK_3A,\n        OWN_FUNDS_TYPES.INSURANCE_3B,\n        OWN_FUNDS_TYPES.INSURANCE_2,\n      ]);\n    });\n\n    it('returns the right values for secondary and investment', () => {\n      const expected = [\n        OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE,\n        OWN_FUNDS_TYPES.BANK_FORTUNE,\n        OWN_FUNDS_TYPES.INSURANCE_3B,\n      ];\n\n      expect(chooseOwnFundsTypes({\n        loan: { residenceType: RESIDENCE_TYPE.SECOND_RESIDENCE },\n      })).to.deep.equal(expected);\n\n      expect(chooseOwnFundsTypes({\n        loan: { residenceType: RESIDENCE_TYPE.INVESTMENT },\n      })).to.deep.equal(expected);\n    });\n  });\n\n  describe('shouldAskForUsageType', () => {\n    it('should return true for the right own funds types', () => {\n      expect(shouldAskForUsageType(OWN_FUNDS_TYPES.INSURANCE_2)).to.equal(true);\n    });\n\n    it('should return false for the other own funds types', () => {\n      expect(shouldAskForUsageType(OWN_FUNDS_TYPES.BANK_FORTUNE)).to.equal(false);\n    });\n  });\n\n  describe('calculateRemainingFunds', () => {\n    it('returns undefined if no type is given', () => {\n      expect(calculateRemainingFunds({})).to.equal(undefined);\n    });\n\n    it('should return 0 if all is used up', () => {\n      const structure = {\n        ownFunds: [\n          { type: OWN_FUNDS_TYPES.BANK_FORTUNE, value: 10, borrowerId: 'id' },\n        ],\n      };\n      const borrowers = [{ bankFortune: 10, _id: 'id' }];\n      expect(calculateRemainingFunds({\n        type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n        structure,\n        ownFundsIndex: -1,\n        borrowers,\n        borrowerId: 'id',\n      })).to.equal(0);\n    });\n\n    it('should return the remaining left over if any is', () => {\n      const structure = {\n        ownFunds: [\n          { type: OWN_FUNDS_TYPES.INSURANCE_2, value: 5, borrowerId: 'id' },\n        ],\n      };\n      const borrowers = [{ insurance2: [{ value: 10 }], _id: 'id' }];\n      expect(calculateRemainingFunds({\n        type: OWN_FUNDS_TYPES.INSURANCE_2,\n        structure,\n        ownFundsIndex: -1,\n        borrowers,\n        borrowerId: 'id',\n      })).to.equal(5);\n    });\n\n    it('should not count the currently editing ownFunds object', () => {\n      const structure = {\n        ownFunds: [\n          { type: OWN_FUNDS_TYPES.INSURANCE_2, value: 5, borrowerId: 'id' },\n          { type: OWN_FUNDS_TYPES.INSURANCE_2, value: 5, borrowerId: 'id' }, // Being edited\n        ],\n      };\n      const borrowers = [{ insurance2: [{ value: 10 }], _id: 'id' }];\n      expect(calculateRemainingFunds({\n        type: OWN_FUNDS_TYPES.INSURANCE_2,\n        structure,\n        ownFundsIndex: 1,\n        borrowers,\n        borrowerId: 'id',\n      })).to.equal(5);\n    });\n\n    it('should ignore all other ownFunds of different types', () => {\n      const structure = {\n        ownFunds: [\n          { type: OWN_FUNDS_TYPES.BANK_FORTUNE, value: 5, borrowerId: 'id' },\n          { type: OWN_FUNDS_TYPES.BANK_3A, value: 5, borrowerId: 'id' },\n          {\n            type: OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE,\n            value: 5,\n            borrowerId: 'id',\n          },\n          { type: OWN_FUNDS_TYPES.INSURANCE_2, value: 5, borrowerId: 'id' },\n        ],\n      };\n      const borrowers = [{ thirdPartyFortune: 10, _id: 'id' }];\n      expect(calculateRemainingFunds({\n        type: OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE,\n        structure,\n        ownFundsIndex: 1,\n        borrowers,\n        borrowerId: 'id',\n      })).to.equal(5);\n    });\n\n    it('ignores ownFunds from other borrowers', () => {\n      const structure = {\n        ownFunds: [\n          { type: OWN_FUNDS_TYPES.BANK_FORTUNE, value: 5, borrowerId: 'id2' },\n        ],\n      };\n      const borrowers = [{ bankFortune: 10, _id: 'id' }];\n      expect(calculateRemainingFunds({\n        type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n        structure,\n        ownFundsIndex: -1,\n        borrowers,\n        borrowerId: 'id',\n      })).to.equal(10);\n    });\n  });\n\n  describe('makeNewOwnFundsArray', () => {\n    it('adds the new object in the array if it is empty', () => {\n      const expected = [\n        { type: 1, borrowerId: 3, value: 4, usageType: undefined },\n      ];\n\n      expect(makeNewOwnFundsArray({\n        structure: { ownFunds: [] },\n        ownFundsIndex: -1,\n        ...expected[0],\n      })).to.deep.equal(expected);\n    });\n\n    it('replaces the current object at index', () => {\n      const expected = [\n        { type: 1, borrowerId: 3, value: 4, usageType: undefined },\n      ];\n\n      expect(makeNewOwnFundsArray({\n        structure: {\n          ownFunds: [{ type: 5, borrowerId: 6, value: 7, usageType: 8 }],\n        },\n        ownFundsIndex: 0,\n        ...expected[0],\n      })).to.deep.equal(expected);\n    });\n\n    it('replaces the current object at larger index', () => {\n      const expected = [\n        { type: 5, borrowerId: 6, value: 7, usageType: 8 },\n        { type: 9, borrowerId: 10, value: 11, usageType: 12 },\n        { type: 1, borrowerId: 3, value: 4, usageType: undefined },\n      ];\n\n      expect(makeNewOwnFundsArray({\n        structure: {\n          ownFunds: [\n            { type: 5, borrowerId: 6, value: 7, usageType: 8 },\n            { type: 9, borrowerId: 10, value: 11, usageType: 12 },\n            { type: 14, borrowerId: 15, value: 16, usageType: 17 },\n          ],\n        },\n        ownFundsIndex: 2,\n        ...expected[2],\n      })).to.deep.equal(expected);\n    });\n\n    it('deletes object at index', () => {\n      const expected = [\n        { type: 5, borrowerId: 6, value: 7, usageType: 8 },\n        { type: 14, borrowerId: 15, value: 16, usageType: 17 },\n      ];\n\n      expect(makeNewOwnFundsArray({\n        structure: {\n          ownFunds: [\n            { type: 5, borrowerId: 6, value: 7, usageType: 8 },\n            { type: 9, borrowerId: 10, value: 11, usageType: 12 },\n            { type: 14, borrowerId: 15, value: 16, usageType: 17 },\n          ],\n        },\n        ownFundsIndex: 1,\n        shouldDelete: true,\n        ...expected[2],\n      })).to.deep.equal(expected);\n    });\n\n    it('deletes object if value is 0', () => {\n      const expected = [\n        { type: 5, borrowerId: 6, value: 7, usageType: 8 },\n        { type: 14, borrowerId: 15, value: 16, usageType: 17 },\n      ];\n\n      expect(makeNewOwnFundsArray({\n        structure: {\n          ownFunds: [\n            { type: 5, borrowerId: 6, value: 7, usageType: 8 },\n            { type: 9, borrowerId: 10, value: 11, usageType: 12 },\n            { type: 14, borrowerId: 15, value: 16, usageType: 17 },\n          ],\n        },\n        ownFundsIndex: 1,\n        value: 0,\n      })).to.deep.equal(expected);\n    });\n  });\n\n  describe('getNewWantedLoanAfterPledge', () => {\n    it('returns the current wantedLoan if this is not a pledged value', () => {\n      expect(getNewWantedLoanAfterPledge({\n        loan: {\n          structures: [{ wantedLoan: 100, id: 'struct' }],\n        },\n        structureId: 'struct',\n        usageType: 'something else',\n      })).to.equal(100);\n    });\n\n    it('returns wantedLoan plus a small pledge', () => {\n      expect(getNewWantedLoanAfterPledge({\n        loan: {\n          properties: [{ _id: 'propertyId', value: 1000000 }],\n          residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n          structures: [\n            {\n              id: 'struct',\n              wantedLoan: 800000,\n              propertyId: 'propertyId',\n              ownFunds: [],\n              propertyWork: 0,\n            },\n          ],\n        },\n        structureId: 'struct',\n        usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE,\n        value: 50000,\n      })).to.equal(850000);\n    });\n\n    it('does not exceed maxBorrowRatioWithPledge', () => {\n      expect(getNewWantedLoanAfterPledge({\n        loan: {\n          properties: [{ _id: 'propertyId', value: 1000000 }],\n          residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n          structures: [\n            {\n              id: 'struct',\n              wantedLoan: 800000,\n              propertyId: 'propertyId',\n              ownFunds: [],\n              propertyWork: 0,\n            },\n          ],\n        },\n        structureId: 'struct',\n        usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE,\n        value: 150000,\n      })).to.equal(900000);\n    });\n\n    it('does not exceed maxBorrowRatio if not a main residence', () => {\n      expect(getNewWantedLoanAfterPledge({\n        loan: {\n          properties: [{ _id: 'propertyId', value: 1000000 }],\n          residenceType: RESIDENCE_TYPE.INVESTMENT,\n          structures: [\n            {\n              id: 'struct',\n              wantedLoan: 800000,\n              propertyId: 'propertyId',\n              ownFunds: [],\n              propertyWork: 0,\n            },\n          ],\n        },\n        structureId: 'struct',\n        usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE,\n        value: 150000,\n      })).to.equal(800000);\n    });\n\n    it('counts other pledged own funds', () => {\n      expect(getNewWantedLoanAfterPledge({\n        loan: {\n          properties: [{ _id: 'propertyId', value: 1000000 }],\n          residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n          structures: [\n            {\n              id: 'struct',\n              wantedLoan: 800000,\n              propertyId: 'propertyId',\n              ownFunds: [\n                { value: 10000, usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE },\n              ],\n              propertyWork: 0,\n            },\n          ],\n        },\n        structureId: 'struct',\n        usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE,\n        value: 50000,\n        ownFundsIndex: -1,\n      })).to.equal(860000);\n    });\n\n    it('reduces loan if pledge is reduced', () => {\n      expect(getNewWantedLoanAfterPledge({\n        loan: {\n          properties: [{ _id: 'propertyId', value: 1000000 }],\n          residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n          structures: [\n            {\n              id: 'struct',\n              wantedLoan: 800000,\n              propertyId: 'propertyId',\n              ownFunds: [\n                { value: 80000, usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE },\n              ],\n              propertyWork: 0,\n            },\n          ],\n        },\n        structureId: 'struct',\n        usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE,\n        value: 40000,\n        ownFundsIndex: 0,\n      })).to.equal(840000);\n    });\n\n    it('increases loan if usageType is changed to pledge', () => {\n      expect(getNewWantedLoanAfterPledge({\n        loan: {\n          properties: [{ _id: 'propertyId', value: 1000000 }],\n          residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n          structures: [\n            {\n              id: 'struct',\n              wantedLoan: 800000,\n              propertyId: 'propertyId',\n              ownFunds: [\n                { value: 80000, usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW },\n              ],\n              propertyWork: 0,\n            },\n          ],\n        },\n        structureId: 'struct',\n        usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE,\n        value: 40000,\n        ownFundsIndex: 0,\n      })).to.equal(840000);\n    });\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { RESIDENCE_TYPE } from 'core/api/constants';\nimport { getRequiredAndCurrentFunds } from '../OwnFundsCompleterContainer';\nimport {\n  OWN_FUNDS_USAGE_TYPES,\n  OWN_FUNDS_TYPES,\n} from '../../../../../../api/constants';\n\ndescribe('OwnFundsCompleter', () => {\n  describe('getRequiredAndCurrentFunds', () => {\n    let props;\n    let structure;\n    let property;\n\n    beforeEach(() => {\n      props = {};\n    });\n\n    context('for an initial structure', () => {\n      beforeEach(() => {\n        structure = {\n          id: 'struct1',\n          ownFunds: [],\n          propertyId: 'propertyId',\n          wantedLoan: 800000,\n          propertyWork: 0,\n        };\n        property = { _id: 'propertyId', value: 1000000 };\n        props = {\n          structure,\n          structureId: 'struct1',\n          properties: [property],\n          loan: {\n            properties: [property],\n            residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n            structures: [structure],\n          },\n          ownFundsIndex: -1,\n          value: 0,\n        };\n      });\n\n      it('returns 0 and standard value for a normal structure', () => {\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 250000,\n          current: 0,\n        });\n      });\n\n      it('returns less when a value is entered', () => {\n        props.value = 100000;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 250000,\n          current: 100000,\n        });\n      });\n\n      it('properly discounts an existing ownFunds value', () => {\n        structure.ownFunds = [{ value: 150000 }];\n        props.ownFundsIndex = 0;\n        props.value = 100000;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 250000,\n          current: 100000,\n        });\n      });\n\n      it('counts other values', () => {\n        structure.ownFunds = [\n          { value: 150000, usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW },\n        ];\n        props.ownFundsIndex = -1;\n        props.value = 100000;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 250000,\n          current: 250000,\n        });\n      });\n\n      it('counts other values, even if value is undefined', () => {\n        structure.ownFunds = [\n          { value: 150000, usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW },\n        ];\n        props.ownFundsIndex = -1;\n        props.value = undefined;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 250000,\n          current: 150000,\n        });\n      });\n\n      it('does not count other pledged values', () => {\n        structure.ownFunds = [\n          { value: 150000, usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE },\n        ];\n        props.ownFundsIndex = -1;\n        props.value = 100000;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 250000,\n          current: 100000,\n        });\n      });\n\n      it('adjusts the required ownFunds amount if you pledge a value', () => {\n        props.ownFundsIndex = -1;\n        props.value = 100000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 150000,\n          current: 0,\n        });\n      });\n\n      it('adjusts the required amount without exceeding maxBorrowRatioWithPledge', () => {\n        // FIXME: Debate to be had:\n        // 1. Do we reduce the pledged amount to 100k\n        // 2. Do we let the pledged amount at 150k, which is a valid structure\n        // But probably not what the user wants\n        // Except if he's planning to modify another ownfunds afterwards\n\n        // We chose Nb. 2, which is the simpler and more intuitive way to go\n\n        structure.ownFunds = [{ value: 150000 }];\n        props.ownFundsIndex = -1;\n        props.value = 150000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 150000,\n          current: 150000,\n        });\n      });\n\n      it('takes into account previously pledged values', () => {\n        structure.ownFunds = [\n          { value: 40000, usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE },\n          { value: 150000 },\n        ];\n        props.ownFundsIndex = -1;\n        props.value = 40000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 170000,\n          current: 150000,\n        });\n      });\n\n      it('works if changing a wrong pledged amount', () => {\n        structure.wantedLoan = 900000;\n        structure.ownFunds = [\n          { value: 150000, usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE },\n        ];\n        props.ownFundsIndex = 0;\n        props.value = 100000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 150000,\n          current: 0,\n        });\n      });\n\n      // Show warning instead\n      it.skip('works if adding a wrong pledged amount twice', () => {\n        structure.wantedLoan = 900000;\n        structure.ownFunds = [\n          { value: 150000, usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE },\n        ];\n        props.ownFundsIndex = -1;\n        props.value = 200000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 150000,\n          current: 0,\n        });\n      });\n\n      it('takes into account previously pledged values without exceeding maxBorrowRatioWithPledge 1', () => {\n        structure.ownFunds = [\n          { value: 100000, usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE },\n          { value: 150000 },\n        ];\n        props.ownFundsIndex = -1;\n        props.value = 40000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 150000,\n          current: 150000,\n        });\n      });\n\n      it('takes into account previously pledged values without exceeding maxBorrowRatioWithPledge 2', () => {\n        structure.ownFunds = [\n          { value: 150000, usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE },\n          { value: 150000 },\n        ];\n        props.ownFundsIndex = -1;\n        props.value = 40000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 150000,\n          current: 150000,\n        });\n      });\n\n      it('increases the wantedLoan only by the amount possible', () => {\n        structure.wantedLoan = 600000;\n        structure.ownFunds = [{ value: 150000 }];\n        props.value = 300000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 350000,\n          current: 150000,\n        });\n      });\n\n      it('works when editing a pledge funds with high loan', () => {\n        structure.wantedLoan = 900000;\n        structure.ownFunds = [\n          {\n            value: 120000,\n            type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n            borrowerId: 'bId',\n          },\n          {\n            value: 100000,\n            type: OWN_FUNDS_TYPES.INSURANCE_2,\n            usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE,\n            borrowerId: 'bId',\n          },\n          {\n            value: 30000,\n            type: OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE,\n            borrowerId: 'bId',\n          },\n        ];\n        props.ownFundsIndex = 1;\n        props.value = 100000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        props.borrowers = [{ _id: 'bId' }];\n\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 150000,\n          current: 150000,\n        });\n      });\n\n      it('works when changing withdraw to pledge', () => {\n        property.value = 500000;\n        structure.wantedLoan = 400000;\n        structure.ownFunds = [\n          {\n            value: 75000,\n            type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n            borrowerId: 'bId',\n          },\n          {\n            value: 50000,\n            type: OWN_FUNDS_TYPES.INSURANCE_2,\n            usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW,\n            borrowerId: 'bId',\n          },\n        ];\n        props.ownFundsIndex = 1;\n        props.value = 50000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.PLEDGE;\n        props.borrowers = [{ _id: 'bId' }];\n\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 75000,\n          current: 75000,\n        });\n      });\n\n      it('works when changing pledge to withdraw', () => {\n        property.value = 500000;\n        structure.wantedLoan = 450000;\n        structure.ownFunds = [\n          {\n            value: 75000,\n            type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n            borrowerId: 'bId',\n          },\n          {\n            value: 50000,\n            type: OWN_FUNDS_TYPES.INSURANCE_2,\n            usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE,\n            borrowerId: 'bId',\n          },\n        ];\n        props.ownFundsIndex = 1;\n        props.type = OWN_FUNDS_TYPES.INSURANCE_2;\n        props.value = 50000;\n        props.usageType = OWN_FUNDS_USAGE_TYPES.WITHDRAW;\n        props.borrowers = [{ _id: 'bId' }];\n\n        expect(getRequiredAndCurrentFunds(props)).to.deep.equal({\n          required: 125000,\n          current: 125000,\n        });\n      });\n    });\n  });\n});\n","// @flow\nimport React from 'react';\n\nimport T from '../../../../Translation';\nimport { toMoney } from '../../../../../utils/conversionFunctions';\nimport FinancingOwnFundsDialogContainer from './FinancingOwnFundsDialogContainer';\nimport FinancingOwnFundsDialog from './FinancingOwnFundsDialog';\nimport {\n  getOwnFundsOfTypeAndBorrower,\n  getAvailableFundsOfTypeAndBorrower,\n} from './FinancingOwnFundsPickerHelpers';\n\ntype CurrentOwnFundsProps = {};\n\nconst hasEnoughFundsOfType = ({ structure, type, borrowerId, borrowers }) =>\n  getAvailableFundsOfTypeAndBorrower({\n    type,\n    borrowerId,\n    borrowers,\n  }) >= getOwnFundsOfTypeAndBorrower({ structure, type, borrowerId });\n\nexport const CurrentOwnFunds = ({\n  ownFunds: { type, usageType, borrowerId, value },\n  structure,\n  borrowers,\n  open,\n  handleClose,\n  handleOpen,\n  structureId,\n  ownFundsIndex,\n}: CurrentOwnFundsProps) => (\n  <React.Fragment>\n    <div\n      className=\"current-own-funds\"\n      onClick={structure.disableForms ? null : handleOpen}\n    >\n      <h5>\n        <T id={`Forms.${type}`} />\n        {usageType && ' - '}\n        {usageType && <T id={`Forms.ownFundsUsageType.${usageType}`} />}\n      </h5>\n      {borrowers.length > 1 && (\n        <h5 className=\"secondary\">\n          {borrowers.find(({ _id }) => _id === borrowerId).firstName}\n        </h5>\n      )}\n      <p className=\"calculated-value\">\n        <span className=\"chf\">CHF</span>{' '}\n        <span className=\"primary\">{toMoney(value)}</span>\n      </p>\n      {!hasEnoughFundsOfType({ structure, type, borrowerId, borrowers }) && (\n        <p className=\"error\">\n          <T\n            id=\"FinancingCurrentOwnFunds.error\"\n            values={{ type: <T id={`Forms.${type}`} /> }}\n          />\n        </p>\n      )}\n    </div>\n    <FinancingOwnFundsDialog\n      open={open}\n      handleClose={handleClose}\n      structureId={structureId}\n      ownFundsIndex={ownFundsIndex}\n    />\n  </React.Fragment>\n);\n\nexport default FinancingOwnFundsDialogContainer(CurrentOwnFunds);\n","// @flow\nimport React from 'react';\nimport DialogActions from '@material-ui/core/DialogActions';\n\nimport Button from '../../../../Button';\nimport T from '../../../../Translation';\n\ntype FinancingOwnFundsActionsProps = {};\n\nconst FinancingOwnFundsActions = ({\n  displayWarning,\n  loading,\n  handleClose,\n  handleDelete,\n  handleSubmit,\n  handleUpdateBorrower,\n  handleCancelUpdateBorrower,\n  disableSubmit,\n  disableDelete,\n}: FinancingOwnFundsActionsProps) => {\n  const defaultActions = [\n    <Button disabled={loading} key=\"cancel\" onClick={handleClose}>\n      <T id=\"general.cancel\" />\n    </Button>,\n    !disableDelete && (\n      <Button disabled={loading} key=\"delete\" onClick={handleDelete} error>\n        <T id=\"general.delete\" />\n      </Button>\n    ),\n    <Button\n      primary\n      raised\n      key=\"ok\"\n      onClick={handleSubmit}\n      loading={loading}\n      disabled={disableSubmit}\n    >\n      <T id=\"general.ok\" />\n    </Button>,\n  ];\n\n  const borrowerUpdateActions = [\n    <Button disabled={loading} key=\"no\" onClick={handleCancelUpdateBorrower}>\n      <T id=\"general.no\" />\n    </Button>,\n    <Button\n      primary\n      raised\n      loading={loading}\n      key=\"yes\"\n      onClick={handleUpdateBorrower}\n    >\n      <T id=\"FinancingOwnFundsActions.modify\" />\n    </Button>,\n  ];\n\n  return (\n    <DialogActions>\n      {displayWarning ? borrowerUpdateActions : defaultActions}\n    </DialogActions>\n  );\n};\n\nexport default FinancingOwnFundsActions;\n","// @flow\nimport React from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\n\nimport T from '../../../../Translation';\nimport FinancingOwnFundsPickerContainer, {\n  FIELDS,\n} from './FinancingOwnFundsPickerContainer';\nimport FinancingOwnFundsActions from './FinancingOwnFundsActions';\nimport FinancingOwnFundsPickerForm from './FinancingOwnFundsPickerForm';\nimport OwnFundsCompleter from './OwnFundsCompleter';\nimport FinancingOwnFundsPledgeWarning from './FinancingOwnFundsPledgeWarning';\nimport { calculateRemainingFunds } from './FinancingOwnFundsPickerHelpers';\n\ntype FinancingOwnFundsDialogProps = {};\n\nconst FinancingOwnFundsDialog = (props: FinancingOwnFundsDialogProps) => {\n  const {\n    handleClose,\n    open,\n    handleChange,\n    type,\n    value,\n    borrowerId,\n    handleCancelUpdateBorrower,\n  } = props;\n  const remaining = calculateRemainingFunds(props);\n  const displayWarning = type && borrowerId && remaining < value;\n  return (\n    <Dialog\n      open={open}\n      onBackdropClick={handleClose}\n      onEscapeKeyDown={handleClose}\n      maxWidth=\"sm\"\n      fullWidth\n    >\n      <DialogTitle>\n        <T id=\"FinancingOwnFundsDialog.title\" />\n      </DialogTitle>\n      <DialogContent>\n        <OwnFundsCompleter\n          {...props}\n          handleChangeValue={val => handleChange(val, FIELDS.VALUE)}\n        />\n        <FinancingOwnFundsPickerForm\n          {...props}\n          displayWarning={displayWarning}\n          remaining={remaining}\n        />\n        <FinancingOwnFundsPledgeWarning {...props} />\n      </DialogContent>\n      <FinancingOwnFundsActions\n        {...props}\n        handleCancelUpdateBorrower={handleCancelUpdateBorrower(remaining)}\n        displayWarning={displayWarning}\n      />\n    </Dialog>\n  );\n};\n\nexport default FinancingOwnFundsPickerContainer(FinancingOwnFundsDialog);\n","import { withStateHandlers } from 'recompose';\n\nexport default withStateHandlers(\n  { open: false },\n  {\n    handleOpen: () => () => ({ open: true }),\n    handleClose: () => () => ({ open: false }),\n  },\n);\n","import {\n  compose,\n  withProps,\n  withStateHandlers,\n  withState,\n  lifecycle,\n} from 'recompose';\n\nimport {\n  borrowerUpdate,\n  pushBorrowerValue,\n  updateStructure,\n} from '../../../../../api';\nimport {\n  OWN_FUNDS_USAGE_TYPES,\n  RESIDENCE_TYPE,\n} from '../../../../../api/constants';\nimport Calculator from '../../../../../utils/Calculator';\nimport SingleStructureContainer from '../../containers/SingleStructureContainer';\nimport FinancingDataContainer from '../../containers/FinancingDataContainer';\nimport {\n  chooseOwnFundsTypes,\n  shouldAskForUsageType,\n  makeNewOwnFundsArray,\n  getOwnFundsOfTypeAndBorrower,\n  getAvailableFundsOfTypeAndBorrower,\n  getNewWantedLoanAfterPledge,\n} from './FinancingOwnFundsPickerHelpers';\n\nexport const FIELDS = {\n  TYPE: 'type',\n  USAGE_TYPE: 'usageType',\n  BORROWER_ID: 'borrowerId',\n  VALUE: 'value',\n};\n\nconst getInitialState = ({ structure, borrowers, ownFundsIndex }) => {\n  // On load, the redux store has not loaded yet, causing this to crash\n  // if we don't add this simple check\n  if (!structure) {\n    return {};\n  }\n\n  // New ownFunds object\n  if (ownFundsIndex < 0) {\n    return {\n      [FIELDS.TYPE]: undefined,\n      [FIELDS.USAGE_TYPE]: OWN_FUNDS_USAGE_TYPES.WITHDRAW,\n      [FIELDS.BORROWER_ID]: borrowers[0]._id,\n      [FIELDS.VALUE]: undefined,\n    };\n  }\n\n  // When editing existing ownFunds object\n  return structure.ownFunds[ownFundsIndex];\n};\n\nconst addState = withStateHandlers(getInitialState, {\n  handleChange: () => (value, id) => ({ [id]: value }),\n  reset: (_, props) => () => getInitialState(props),\n});\n\nconst withDisableSubmit = withProps(({ type, borrowerId, value, usageType }) => ({\n  disableSubmit: !(\n    type\n      && borrowerId\n      && value >= 0\n      && (!shouldAskForUsageType(type) || usageType)\n  ),\n}));\n\nconst withStructureUpdate = withProps(({ loan: { _id: loanId }, structureId }) => ({\n  updateLoan: wantedLoan =>\n    updateStructure.run({ loanId, structureId, structure: { wantedLoan } }),\n  updateOwnFunds: ownFunds =>\n    updateStructure.run({ loanId, structureId, structure: { ownFunds } }),\n}));\n\nconst withAdditionalProps = withProps((props) => {\n  const {\n    disableSubmit,\n    updateOwnFunds,\n    updateLoan,\n    handleClose,\n    setLoading,\n    borrowerId,\n    type,\n    value,\n    usageType,\n    handleChange,\n    reset,\n    ownFundsIndex,\n    loan,\n  } = props;\n  const otherValueOfTypeAndBorrower = getOwnFundsOfTypeAndBorrower(props);\n\n  const updateCleanup = () => {\n    setLoading(false);\n  };\n\n  return {\n    handleDelete: () => {\n      updateOwnFunds(makeNewOwnFundsArray({ ...props, shouldDelete: true }));\n      handleClose();\n    },\n    handleSubmit: (event) => {\n      event.preventDefault();\n      if (disableSubmit) {\n        return false;\n      }\n\n      if (\n        shouldAskForUsageType(type)\n        && usageType === OWN_FUNDS_USAGE_TYPES.PLEDGE\n      ) {\n        updateLoan(getNewWantedLoanAfterPledge(props));\n      }\n\n      updateOwnFunds(makeNewOwnFundsArray(props));\n      handleClose();\n\n      if (ownFundsIndex === -1) {\n        // Cleanup\n        reset();\n      }\n    },\n    handleUpdateBorrower: (event) => {\n      if (event && event.preventDefault) {\n        event.preventDefault();\n      }\n      setLoading(true);\n\n      if (Calculator.isTypeWithArrayValues(type)) {\n        const currentlyAvailable = getAvailableFundsOfTypeAndBorrower(props);\n        const deltaNeeded = otherValueOfTypeAndBorrower + value - currentlyAvailable;\n        return pushBorrowerValue\n          .run({\n            borrowerId,\n            object: {\n              [type]: { value: deltaNeeded, description: 'Ajout automatique' },\n            },\n          })\n          .finally(updateCleanup);\n      }\n\n      return borrowerUpdate\n        .run({\n          borrowerId,\n          object: { [type]: otherValueOfTypeAndBorrower + value },\n        })\n        .finally(updateCleanup);\n    },\n    handleCancelUpdateBorrower: remaining => () => {\n      handleChange(remaining, FIELDS.VALUE);\n    },\n    types: chooseOwnFundsTypes(props),\n    otherValueOfTypeAndBorrower,\n    allowPledge: loan.residenceType === RESIDENCE_TYPE.MAIN_RESIDENCE,\n  };\n});\n\nconst FinancingOwnFundsPickerContainer = compose(\n  SingleStructureContainer,\n  FinancingDataContainer,\n  addState,\n  lifecycle({\n    componentWillReceiveProps({\n      structure: { ownFunds: nextFunds },\n      ownFundsIndex: nextIndex,\n    }) {\n      const {\n        structure: { ownFunds },\n        ownFundsIndex,\n      } = this.props;\n      if (\n        JSON.stringify(ownFunds[ownFundsIndex])\n        !== JSON.stringify(nextFunds[nextIndex])\n      ) {\n        this.props.reset();\n      }\n    },\n  }),\n  withDisableSubmit,\n  withStructureUpdate,\n  withState('loading', 'setLoading', false),\n  withAdditionalProps,\n);\n\nexport default FinancingOwnFundsPickerContainer;\n","// @flow\nimport React from 'react';\n\nimport { toMoney } from '../../../../../utils/conversionFunctions';\nimport MoneyInput from '../../../../MoneyInput';\nimport Select from '../../../../Select';\nimport T from '../../../../Translation';\nimport FinancingDataContainer from '../../containers/FinancingDataContainer';\nimport { FIELDS } from './FinancingOwnFundsPickerContainer';\nimport { OWN_FUNDS_USAGE_TYPES } from '../../../../../api/constants';\nimport { shouldAskForUsageType } from './FinancingOwnFundsPickerHelpers';\nimport FinancingOwnFundsWarning from './FinancingOwnFundsWarning';\n\ntype FinancingOwnFundsPickerFormProps = {};\n\nconst FinancingOwnFundsPickerForm = ({\n  handleSubmit,\n  type,\n  borrowerId,\n  value,\n  handleChange,\n  borrowers,\n  types,\n  displayWarning,\n  usageType,\n  remaining,\n  otherValueOfTypeAndBorrower,\n  allowPledge,\n  handleUpdateBorrower,\n}: FinancingOwnFundsPickerFormProps) => (\n  <form\n    onSubmit={displayWarning ? handleUpdateBorrower : handleSubmit}\n    className=\"own-funds-picker-form\"\n  >\n    <div className=\"form\">\n      <Select\n        value={type}\n        onChange={(_, val) => handleChange(val, FIELDS.TYPE)}\n        options={types.map(t => ({\n          id: t,\n          label: <T id={`Forms.${t}`} />,\n        }))}\n        label={<T id=\"FinancingOwnFundsPickerForm.type\" />}\n      />\n      {allowPledge\n        && shouldAskForUsageType(type) && (\n        <Select\n          value={usageType}\n          onChange={(_, val) => handleChange(val, FIELDS.USAGE_TYPE)}\n          options={Object.values(OWN_FUNDS_USAGE_TYPES).map(usage => ({\n            id: usage,\n            label: <T id={`Forms.ownFundsUsageType.${usage}`} />,\n          }))}\n          label={<T id=\"FinancingOwnFundsPickerForm.usageType\" />}\n        />\n      )}\n      {borrowers.length > 1 && (\n        <Select\n          value={borrowerId}\n          onChange={(_, val) => handleChange(val, FIELDS.BORROWER_ID)}\n          options={borrowers.map(({ _id: id, firstName }, index) => ({\n            id,\n            label: firstName || (\n              <T id=\"BorrowerHeader.title\" values={{ index: index + 1 }} />\n            ),\n          }))}\n          label={<T id=\"FinancingOwnFundsPickerForm.borrower\" />}\n        />\n      )}\n      <MoneyInput\n        value={value}\n        onChange={val => handleChange(val, FIELDS.VALUE)}\n        helperText={\n          remaining >= 0 && (\n            <T\n              id=\"FinancingOwnFundsPickerForm.remaining\"\n              values={{\n                value: (\n                  <b className={remaining < value ? 'error' : 'primary'}>\n                    {toMoney(remaining)}\n                  </b>\n                ),\n              }}\n            />\n          )\n        }\n        label={<T id=\"FinancingOwnFundsPickerForm.value\" />}\n      />\n    </div>\n    {displayWarning && (\n      <FinancingOwnFundsWarning\n        type={type}\n        borrower={borrowers.find(({ _id }) => _id === borrowerId)}\n        borrowerIndex={borrowers.findIndex(({ _id }) => _id === borrowerId)}\n        value={value}\n        otherValueOfTypeAndBorrower={otherValueOfTypeAndBorrower}\n      />\n    )}\n  </form>\n);\n\nexport default FinancingDataContainer(FinancingOwnFundsPickerForm);\n","import {\n  OWN_FUNDS_TYPES,\n  OWN_FUNDS_USAGE_TYPES,\n} from '../../../../../api/constants';\nimport Calculator from '../../../../../utils/Calculator';\nimport { calculateMaxLoan } from '../../FinancingFinancing/FinancingFinancing';\n\nexport const chooseOwnFundsTypes = ({ loan: { residenceType } }) =>\n  Calculator.getAllowedOwnFundsTypes({ residenceType });\n\nexport const shouldAskForUsageType = type =>\n  [\n    OWN_FUNDS_TYPES.INSURANCE_2,\n    OWN_FUNDS_TYPES.INSURANCE_3A,\n    OWN_FUNDS_TYPES.INSURANCE_3B,\n    OWN_FUNDS_TYPES.BANK_3A,\n  ].includes(type);\n\nexport const getOwnFundsOfTypeAndBorrower = ({\n  structure,\n  ownFundsIndex = -1,\n  type,\n  borrowerId,\n}) =>\n  structure\n  && structure.ownFunds\n    .filter((_, index) => index !== ownFundsIndex)\n    .filter(({ type: otherType, borrowerId: bId }) =>\n      otherType === type && bId === borrowerId)\n    .reduce((sum, { value }) => sum + value, 0);\n\nexport const getAvailableFundsOfTypeAndBorrower = ({\n  type,\n  borrowerId,\n  borrowers,\n}) =>\n  Calculator.getFunds({\n    borrowers: borrowers.find(({ _id }) => _id === borrowerId),\n    type,\n  });\n\nexport const calculateRemainingFunds = ({\n  type,\n  ownFundsIndex,\n  structure,\n  borrowers,\n  borrowerId,\n}) => {\n  if (!type) {\n    return undefined;\n  }\n  const usedValue = getOwnFundsOfTypeAndBorrower({\n    structure,\n    ownFundsIndex,\n    type,\n    borrowerId,\n  });\n  const available = getAvailableFundsOfTypeAndBorrower({\n    borrowerId,\n    type,\n    borrowers,\n  });\n\n  return available - usedValue;\n};\n\nexport const makeNewOwnFundsArray = ({\n  type,\n  usageType,\n  borrowerId,\n  value,\n  structure,\n  ownFundsIndex,\n  shouldDelete,\n}) => {\n  if (shouldDelete || value === 0) {\n    return [\n      ...structure.ownFunds.slice(0, ownFundsIndex),\n      ...structure.ownFunds.slice(ownFundsIndex + 1),\n    ];\n  }\n\n  const newObject = {\n    type,\n    usageType: shouldAskForUsageType(type) ? usageType : undefined,\n    borrowerId,\n    value,\n  };\n\n  if (ownFundsIndex < 0) {\n    return [...structure.ownFunds, newObject];\n  }\n\n  return [\n    ...structure.ownFunds.slice(0, ownFundsIndex),\n    newObject,\n    ...structure.ownFunds.slice(ownFundsIndex + 1),\n  ];\n};\n\nexport const getCurrentPledgedFunds = ({ ownFundsIndex, ownFunds }) =>\n  ownFunds\n    .filter((_, index) => index !== ownFundsIndex)\n    .filter(({ usageType }) => usageType === OWN_FUNDS_USAGE_TYPES.PLEDGE)\n    .reduce((sum, { value }) => sum + value, 0);\n\nexport const getNewWantedLoanAfterPledge = (props) => {\n  const { loan, structureId, usageType, value, ownFundsIndex } = props;\n  const { wantedLoan, ownFunds } = Calculator.selectStructure({\n    loan,\n    structureId,\n  });\n  if (usageType !== OWN_FUNDS_USAGE_TYPES.PLEDGE) {\n    return wantedLoan;\n  }\n  const currentPledgedFunds = getCurrentPledgedFunds({\n    ownFunds,\n    ownFundsIndex,\n  });\n  const maxLoanWithNewPledge = calculateMaxLoan(\n    props,\n    currentPledgedFunds + value,\n  );\n\n  return maxLoanWithNewPledge;\n};\n\nexport const getMaxPledge = (props) => {\n  const { loan, structureId } = props;\n  const { propertyWork } = Calculator.selectStructure({\n    loan,\n    structureId,\n  });\n  const propertyValue = Calculator.selectPropertyValue({\n    loan,\n    structureId,\n  });\n\n  return Math.round((Calculator.maxBorrowRatioWithPledge - Calculator.maxBorrowRatio)\n      * (propertyValue + propertyWork));\n};\n","// @flow\nimport React from 'react';\n\nimport { OWN_FUNDS_USAGE_TYPES } from 'core/api/constants';\nimport Icon from 'core/components/Icon';\nimport T from '../../../../Translation';\nimport { getMaxPledge } from './FinancingOwnFundsPickerHelpers';\nimport { toMoney } from '../../../../../utils/conversionFunctions';\n\ntype FinancingOwnFundsPledgeWarningProps = {};\n\nconst FinancingOwnFundsPledgeWarning = (props: FinancingOwnFundsPledgeWarningProps) => {\n  if (props.usageType === OWN_FUNDS_USAGE_TYPES.PLEDGE) {\n    const maxPledge = getMaxPledge(props);\n    return (\n      <p className=\"financing-pledge-warning primary\">\n        <Icon type=\"info\" className=\"icon\" />\n        <T\n          id=\"FinancingOwnFundsPledgeWarning.description\"\n          values={{\n            maxPledge: (\n              <b style={{ color: 'black' }}>\n                &nbsp;\n                {toMoney(maxPledge)}\n                &nbsp;\n              </b>\n            ),\n          }}\n        />\n      </p>\n    );\n  }\n\n  return null;\n};\n\nexport default FinancingOwnFundsPledgeWarning;\n","// @flow\nimport React from 'react';\n\nimport { toMoney } from '../../../../../utils/conversionFunctions';\nimport T from '../../../../Translation';\n\ntype FinancingOwnFundsWarningProps = {};\n\nconst FinancingOwnFundsWarning = ({\n  borrower: { firstName },\n  borrowerIndex,\n  type,\n  value,\n  otherValueOfTypeAndBorrower,\n}: FinancingOwnFundsWarningProps) => (\n  <p>\n    <T\n      id=\"FinancingOwnFundsPickerForm.warning\"\n      values={{\n        name: (\n          <b>\n            {firstName || (\n              <T\n                id=\"general.borrowerWithIndex\"\n                values={{ index: borrowerIndex + 1 }}\n              />\n            )}\n          </b>\n        ),\n        value: (\n          <b className=\"primary\">\n            {toMoney(otherValueOfTypeAndBorrower + value)}\n          </b>\n        ),\n        type: (\n          <b>\n            <T id={`Forms.${type}`} />\n          </b>\n        ),\n      }}\n    />\n  </p>\n);\n\nexport default FinancingOwnFundsWarning;\n","// @flow\nimport React from 'react';\n\nimport T from '../../../../Translation';\n\nimport OwnFundsCompleterContainer from './OwnFundsCompleterContainer';\nimport { toMoney } from '../../../../../utils/conversionFunctions';\n\ntype OwnFundsCompleterProps = {};\n\nconst OwnFundsCompleter = ({ required, current }: OwnFundsCompleterProps) => (\n  <div className=\"own-funds-completer\">\n    <h4>\n      <T\n        id=\"Financing.ownFundsCompleter\"\n        values={{\n          current: (\n            <span\n              className={\n                current === required\n                  ? 'success'\n                  : current < required\n                    ? 'primary'\n                    : 'error'\n              }\n            >\n              {toMoney(current)}\n            </span>\n          ),\n          required: <span className=\"secondary\">{toMoney(required)}</span>,\n        }}\n      />\n    </h4>\n  </div>\n);\n\nexport default OwnFundsCompleterContainer(OwnFundsCompleter);\n","import { compose, withProps } from 'recompose';\n\nimport { OWN_FUNDS_USAGE_TYPES } from 'core/api/constants';\nimport FinancingDataContainer from '../../containers/FinancingDataContainer';\nimport SingleStructureContainer from '../../containers/SingleStructureContainer';\nimport {\n  getCurrentPledgedFunds,\n  getMaxPledge,\n} from './FinancingOwnFundsPickerHelpers';\nimport Calculator from '../../../../../utils/Calculator';\n\nconst removePreviousValueEffect = ({ props, ownFundsIndex, ownFunds }) => {\n  let requiredChange = 0;\n  let currentChange = 0;\n  // Editing existing value, cancel its effect\n  const previousIsPledged = ownFunds[ownFundsIndex].usageType === OWN_FUNDS_USAGE_TYPES.PLEDGE;\n\n  if (previousIsPledged) {\n    const maxPledge = getMaxPledge(props);\n    const previousPledgedValue = ownFunds[ownFundsIndex].value;\n    requiredChange = Math.min(previousPledgedValue, maxPledge);\n  } else {\n    currentChange = -ownFunds[ownFundsIndex].value;\n  }\n\n  return { requiredChange, currentChange };\n};\n\nconst removePledgingEffect = ({ props, ownFunds, ownFundsIndex, value }) => {\n  const maxPledge = getMaxPledge(props);\n  const currentPledgedFunds = getCurrentPledgedFunds({\n    ownFunds,\n    ownFundsIndex,\n  });\n\n  return {\n    requiredChange: -Math.min(currentPledgedFunds + (value || 0), maxPledge),\n    currentChange: -value || 0,\n  };\n};\n\nexport const getRequiredAndCurrentFunds = (props) => {\n  const {\n    value,\n    structure: { ownFunds },\n    ownFundsIndex,\n    usageType,\n  } = props;\n  let required = Calculator.getRequiredOwnFunds(props);\n  const previousNonPledgedFunds = ownFunds\n    .filter(({ usageType: uT }) => uT !== OWN_FUNDS_USAGE_TYPES.PLEDGE)\n    .reduce((sum, { value: v }) => sum + v, 0);\n  let current = previousNonPledgedFunds + (value || 0);\n  const isEditing = ownFundsIndex >= 0;\n\n  if (isEditing) {\n    const { requiredChange, currentChange } = removePreviousValueEffect({\n      props,\n      ownFundsIndex,\n      ownFunds,\n    });\n    required += requiredChange;\n    current += currentChange;\n  }\n\n  if (usageType === OWN_FUNDS_USAGE_TYPES.PLEDGE) {\n    const { requiredChange, currentChange } = removePledgingEffect({\n      props,\n      ownFunds,\n      ownFundsIndex,\n      value,\n    });\n    required += requiredChange;\n    current += currentChange;\n  }\n\n  return { required, current };\n};\n\nconst OwnFundsCompleterContainer = compose(\n  SingleStructureContainer,\n  FinancingDataContainer,\n  withProps(getRequiredAndCurrentFunds),\n);\n\nexport default OwnFundsCompleterContainer;\n","// @flow\n/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport { shallow } from 'core/utils/testHelpers/enzyme';\n\nimport StatusIcon from '../../../../StatusIcon';\nimport RequiredOwnFundsBody from '../RequiredOwnFundsBody';\nimport { SUCCESS, ERROR } from '../../../../../api/constants';\nimport { OWN_FUNDS_ROUNDING_AMOUNT } from '../../../../../config/financeConstants';\n\ndescribe('RequiredOwnFunds', () => {\n  let props;\n  const component = () => shallow(<RequiredOwnFundsBody {...props} />);\n\n  beforeEach(() => {\n    props = { value: 0 };\n  });\n\n  it('displays valid text when value is 0', () => {\n    expect(component()\n      .find('.text')\n      .children()\n      .first()\n      .props().id).to.include('valid');\n  });\n\n  it('shows valid when value is rounding amount', () => {\n    props.value = OWN_FUNDS_ROUNDING_AMOUNT;\n    expect(component()\n      .find('.text')\n      .children()\n      .first()\n      .props().id).to.include('valid');\n  });\n\n  it('shows valid when value is negative rounding amount', () => {\n    props.value = -OWN_FUNDS_ROUNDING_AMOUNT;\n    expect(component()\n      .find('.text')\n      .children()\n      .first()\n      .props().id).to.include('valid');\n  });\n\n  it('shows too low allocated own funds if value is high', () => {\n    props.value = OWN_FUNDS_ROUNDING_AMOUNT + 1000;\n    expect(component()\n      .find('.text')\n      .children()\n      .first()\n      .props().id).to.include('low');\n  });\n\n  it('shows too much allocated own funds if value is high', () => {\n    props.value = -OWN_FUNDS_ROUNDING_AMOUNT - 1000;\n    expect(component()\n      .find('.text')\n      .children()\n      .first()\n      .props().id).to.include('high');\n  });\n\n  it('shows success icon when value is valid', () => {\n    expect(component()\n      .find(StatusIcon)\n      .first()\n      .props().status).to.equal(SUCCESS);\n  });\n\n  it('shows success icon when value is invalid', () => {\n    props.value = OWN_FUNDS_ROUNDING_AMOUNT + 1000;\n    expect(component()\n      .find(StatusIcon)\n      .first()\n      .props().status).to.equal(ERROR);\n  });\n\n  it('shows valid when value is -rounding plus a sub-1 amount', () => {\n    props.value = -OWN_FUNDS_ROUNDING_AMOUNT + 0.5;\n    expect(component()\n      .find('.text')\n      .children()\n      .first()\n      .props().id).to.include('valid');\n  });\n\n  it('shows valid when value is rounding minus a sub-1 amount', () => {\n    props.value = OWN_FUNDS_ROUNDING_AMOUNT - 0.5;\n    expect(component()\n      .find('.text')\n      .children()\n      .first()\n      .props().id).to.include('valid');\n  });\n});\n","// @flow\nimport React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faMagic } from '@fortawesome/pro-light-svg-icons/faMagic';\n\nimport StatusIcon from '../../../StatusIcon';\nimport T, { Money } from '../../../Translation';\nimport { toMoney } from '../../../../utils/conversionFunctions';\nimport { OWN_FUNDS_ROUNDING_AMOUNT } from '../../../../config/financeConstants';\nimport { SUCCESS, ERROR } from '../../../../api/constants';\nimport IconButton from '../../../IconButton';\n\ntype RequiredOwnFundsBodyProps = {};\n\nconst getLabel = (value) => {\n  if (value > OWN_FUNDS_ROUNDING_AMOUNT) {\n    return 'Financing.requiredOwnFunds.low';\n  }\n  if (value < -OWN_FUNDS_ROUNDING_AMOUNT) {\n    return 'Financing.requiredOwnFunds.high';\n  }\n\n  return 'Financing.requiredOwnFunds.valid';\n};\n\nconst RequiredOwnFundsBody = ({\n  value,\n  suggestStructure,\n  disableForms,\n  loan = {}\n}: RequiredOwnFundsBodyProps) => {\n  const label = getLabel(value);\n  const {borrowers= []} = loan;\n  return (\n    <div className=\"requiredOwnFunds-component-body\">\n      <div className=\"text-and-value\">\n        <span className=\"text\">\n          <T id={label} />\n        </span>\n        <div className=\"value\">\n          <span className=\"chf\">CHF</span>\n          {toMoney(Math.abs(value))}\n          <StatusIcon\n            status={label.endsWith('valid') ? SUCCESS : ERROR}\n            style={{ marginLeft: 8 }}\n            tooltip={(\n              <T\n                id={`${label}.tooltip`}\n                values={{ value: <Money value={Math.abs(value)} /> }}\n              />\n            )}\n          />\n        </div>\n      </div>\n      {!disableForms && !!borrowers.length && (\n        <IconButton\n          type={<FontAwesomeIcon icon={faMagic} />}\n          onClick={suggestStructure}\n          tooltip=\"Suggérer\"\n        />\n      )}\n    </div>\n  );\n};\n\nexport default RequiredOwnFundsBody;\n","// @flow\n/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport sinon from 'sinon';\nimport { mount } from 'core/utils/testHelpers/enzyme';\n\nimport { InputAndSliderField } from '../InputAndSliderField';\nimport MoneyInput from '../../../../../MoneyInput/MoneyInput';\nimport Slider from '../../../../../Material/Slider';\n\ndescribe('InputAndSliderField', () => {\n  let props;\n  const component = () => mount(<InputAndSliderField {...props} />);\n\n  const inputValue = wrapper => wrapper.find(MoneyInput).props().value;\n  const sliderValue = wrapper => wrapper.find(Slider).props().value;\n\n  beforeEach(() => {\n    props = {};\n  });\n\n  it('allows undefined values', () => {\n    props = {\n      allowUndefined: true,\n      value: 12,\n    };\n    const wrapper = component();\n\n    expect(inputValue(wrapper)).to.equal(12);\n    expect(sliderValue(wrapper)).to.equal(12);\n\n    wrapper.setProps({ value: '' });\n    wrapper.update();\n\n    expect(inputValue(wrapper)).to.equal('');\n    expect(sliderValue(wrapper)).to.equal('');\n  });\n\n  it('does not allow undefined values', () => {\n    props = {\n      value: 12,\n    };\n    const wrapper = component();\n\n    expect(inputValue(wrapper)).to.equal(12);\n    expect(sliderValue(wrapper)).to.equal(12);\n\n    wrapper.setProps({ value: '' });\n    wrapper.update();\n\n    expect(inputValue(wrapper)).to.equal(0);\n    expect(sliderValue(wrapper)).to.equal(0);\n  });\n\n  it('forces 0 to be undefined values', () => {\n    props = {\n      allowUndefined: true,\n      forceUndefined: true,\n      value: 12,\n    };\n    const wrapper = component();\n\n    expect(inputValue(wrapper)).to.equal(12);\n    expect(sliderValue(wrapper)).to.equal(12);\n\n    wrapper.setProps({ value: 0 });\n    wrapper.update();\n\n    expect(inputValue(wrapper)).to.equal('');\n    expect(sliderValue(wrapper)).to.equal('');\n  });\n\n  it('does not force 0 to be undefined values when undefined values are not allowed', () => {\n    props = {\n      forceUndefined: true,\n      value: 12,\n    };\n    const wrapper = component();\n\n    expect(inputValue(wrapper)).to.equal(12);\n    expect(sliderValue(wrapper)).to.equal(12);\n\n    wrapper.setProps({ value: 0 });\n    wrapper.update();\n\n    expect(inputValue(wrapper)).to.equal(0);\n    expect(sliderValue(wrapper)).to.equal(0);\n  });\n\n  describe('onChange', () => {\n    it('let the user type his value when it is less than max', () => {\n      const onChange = sinon.spy();\n      props = {\n        value: 12,\n        onChange,\n        max: 50,\n      };\n      const wrapper = component();\n\n      wrapper.find('input').simulate('change', { target: { value: 15 } });\n\n      expect(onChange.calledOnce).to.equal(true);\n      expect(onChange.firstCall.args).to.deep.equal([15]);\n    });\n\n    it('does not let the user type more than max', () => {\n      const onChange = sinon.spy();\n      props = {\n        value: 12,\n        onChange,\n        max: 50,\n      };\n      const wrapper = component();\n\n      wrapper.find('input').simulate('change', { target: { value: 60 } });\n\n      expect(onChange.calledOnce).to.equal(true);\n      expect(onChange.firstCall.args).to.deep.equal([50]);\n    });\n\n    it('does not let the user type an empty string when undefined values are not allowed', () => {\n      const onChange = sinon.spy();\n      props = {\n        value: 12,\n        onChange,\n        max: 50,\n      };\n      const wrapper = component();\n\n      wrapper.find('input').simulate('change', { target: { value: '' } });\n\n      expect(onChange.calledOnce).to.equal(true);\n      expect(onChange.firstCall.args).to.deep.equal([0]);\n    });\n\n    it('let the user type empty strings when undefined values are allowed', () => {\n      const onChange = sinon.spy();\n      props = {\n        value: 12,\n        onChange,\n        allowUndefined: true,\n        max: 50,\n      };\n      const wrapper = component();\n\n      wrapper.find('input').simulate('change', { target: { value: '' } });\n\n      expect(onChange.calledOnce).to.equal(true);\n      expect(onChange.firstCall.args).to.deep.equal(['']);\n    });\n\n    it('forces 0 values to empty strings when forceUndefined and allowUndefined are true', () => {\n      const onChange = sinon.spy();\n      props = {\n        value: 12,\n        onChange,\n        allowUndefined: true,\n        forceUndefined: true,\n      };\n      const wrapper = component();\n\n      wrapper.find('input').simulate('change', { target: { value: '' } });\n\n      expect(onChange.calledOnce).to.equal(true);\n      expect(onChange.firstCall.args).to.deep.equal(['']);\n    });\n\n    it('does not force 0 values to empty strings when forceUndefined is true but undefined values are not allowed', () => {\n      const onChange = sinon.spy();\n      props = {\n        value: 12,\n        onChange,\n        forceUndefined: true,\n      };\n      const wrapper = component();\n\n      wrapper.find('input').simulate('change', { target: { value: 0 } });\n\n      expect(onChange.calledOnce).to.equal(true);\n      expect(onChange.firstCall.args).to.deep.equal([0]);\n    });\n  });\n});\n","// @flow\nimport React from 'react';\nimport cx from 'classnames';\nimport { compose } from 'recompose';\n\nimport { toMoney } from '../../../../../utils/conversionFunctions';\nimport SingleStructureContainer from '../../containers/SingleStructureContainer';\nimport FinancingDataContainer from '../../containers/FinancingDataContainer';\nimport { Percent } from '../../../../Translation';\n\ntype CalculatedValueProps = {\n  value: number,\n  format?: string,\n  className: string,\n  children?: Function,\n  rightElement?: Function,\n};\n\nexport const FORMATS = {\n  MONEY: 'MONEY',\n  PERCENT: 'PERCENT',\n  DEFAULT: 'DEFAULT',\n};\n\nconst formatters = {\n  [FORMATS.MONEY]: value => (\n    <React.Fragment>\n      <span className=\"chf\">CHF</span>\n      {toMoney(value)}\n    </React.Fragment>\n  ),\n  [FORMATS.PERCENT]: value => <Percent value={value} />,\n  [FORMATS.DEFAULT]: value => value,\n};\n\nconst CalculatedValue = ({\n  value,\n  format = FORMATS.MONEY,\n  className,\n  children,\n  rightElement,\n  ...props\n}: CalculatedValueProps) => {\n  const displayValue = typeof value === 'function' ? value(props) : value;\n\n  return (\n    <div className={cx('calculated-value', className)}>\n      {children ? children(displayValue) : formatters[format](displayValue)}\n      {rightElement ? rightElement(displayValue) : null}\n    </div>\n  );\n};\n\nexport default compose(\n  SingleStructureContainer,\n  FinancingDataContainer,\n  React.memo,\n)(CalculatedValue);\n","// @flow\nimport React from 'react';\n\nimport { compose } from 'recompose';\nimport CalculatedValue from './CalculatedValue';\nimport PercentWithStatus from '../../../../PercentWithStatus/PercentWithStatus';\nimport FinancingDataContainer from '../../containers/FinancingDataContainer';\n\ntype FinmaRatioProps = {\n  status: Function,\n  tooltip?: String,\n  id: String,\n};\n\nconst FinmaRatio = ({ status, tooltip, id, ...props }: FinmaRatioProps) => (\n  <CalculatedValue {...props}>\n    {value => (\n      <PercentWithStatus\n        value={value}\n        status={status({ ...props, value })}\n        tooltip={tooltip}\n        id={id}\n      />\n    )}\n  </CalculatedValue>\n);\n\nexport default compose(\n  FinancingDataContainer,\n  React.memo,\n)(FinmaRatio);\n","// @flow\nimport React from 'react';\nimport cx from 'classnames';\nimport AutoForm from 'uniforms-material/AutoForm';\nimport SimpleSchema from 'simpl-schema';\n\nimport { compose, withProps } from 'recompose';\nimport StructureUpdateContainer from '../../containers/StructureUpdateContainer';\nimport FinancingDataContainer from '../../containers/FinancingDataContainer';\nimport { toMoney } from '../../../../../utils/conversionFunctions';\n\nimport InputAndSliderField from './InputAndSliderField';\n\ntype InputAndSliderProps = {\n  value: number,\n  updateStructure: Function,\n  max?: number,\n  className: string,\n};\n\nexport const InputAndSlider = ({\n  className,\n  id,\n  schema,\n  value,\n  updateStructure,\n  ...props\n}: InputAndSliderProps) => (\n  <div className={cx('input-and-slider', className)}>\n    <AutoForm\n      onSubmit={updateStructure}\n      schema={schema}\n      model={{ [id]: value }}\n      autosave\n      autosaveDelay={500}\n      disabled={props.structure.disableForms}\n    >\n      <InputAndSliderField name={id} {...props} />\n    </AutoForm>\n  </div>\n);\n\nexport default compose(\n  FinancingDataContainer,\n  StructureUpdateContainer,\n  withProps(({\n    max: _max,\n    calculatePlaceholder,\n    placeholder,\n    id,\n    allowUndefined,\n    ...props\n  }) => ({\n    max: typeof _max === 'function' ? _max(props) : _max,\n    placeholder: calculatePlaceholder\n      ? toMoney(calculatePlaceholder(props))\n      : placeholder,\n    schema: new SimpleSchema({\n      [id]: { type: Number, optional: allowUndefined },\n    }),\n  })),\n)(InputAndSlider);\n","// @flow\nimport React from 'react';\nimport connectField from 'uniforms/connectField';\nimport Slider from 'core/components/Material/Slider';\n\nimport MoneyInput from '../../../../MoneyInput';\n\ntype InputAndSliderFieldProps = {};\n\nconst valueIsNotDefined = value =>\n  value === '' || value === undefined || value === null;\n\nconst makeHandleTextChange = ({\n  onChange,\n  max,\n  allowUndefined,\n  forceUndefined,\n}) => (value) => {\n  if (allowUndefined && valueIsNotDefined(value)) {\n    return onChange('');\n  }\n  if (max && value) {\n    return onChange(Math.min(value, max));\n  }\n  return onChange(value || (forceUndefined && allowUndefined ? '' : 0));\n};\n\nconst setValue = (value, allowUndefined, forceUndefined) => {\n  if (allowUndefined) {\n    return forceUndefined && value === 0\n      ? ''\n      : (valueIsNotDefined(value) && '') || value;\n  }\n  return value || 0;\n};\n\nexport const InputAndSliderField = (props: InputAndSliderFieldProps) => {\n  const {\n    value,\n    onChange,\n    placeholder,\n    forceUndefined,\n    allowUndefined,\n    max = 1000000,\n    maxSlider,\n    disabled,\n  } = props;\n  const maxSliderValue = maxSlider || max;\n  return (\n    <>\n      <MoneyInput\n        value={setValue(value, allowUndefined, forceUndefined)}\n        onChange={makeHandleTextChange(props)}\n        placeholder={placeholder === undefined ? '' : `${placeholder}`} // Placeholders should always be a string\n        className=\"money-input\"\n        disabled={disabled}\n      />\n      <Slider\n        min={0}\n        max={Math.max(maxSliderValue, value)}\n        step={1000}\n        value={setValue(value, allowUndefined, forceUndefined)}\n        onChange={onChange}\n        className=\"slider\"\n        disabled={disabled}\n      />\n    </>\n  );\n};\n\nexport default connectField(InputAndSliderField);\n","// @flow\nimport React from 'react';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport cx from 'classnames';\n\nimport T from 'core/components/Translation';\nimport StructureUpdateContainer from '../../containers/StructureUpdateContainer';\n\ntype RadioButtonsProps = {\n  value: string,\n  updateStructure: Function,\n  options: Array<{ id: string, label: string }>,\n  className: string,\n};\n\nconst RadioButtons = ({\n  value,\n  updateStructure,\n  options,\n  className,\n}: RadioButtonsProps) => (\n  <RadioGroup\n    aria-label=\"Gender\"\n    value={value}\n    onChange={event => updateStructure(event.target.value)}\n    className={cx('radio-buttons', className)}\n  >\n    {options.map(({ id, label }) => (\n      <FormControlLabel\n        key={id}\n        value={id}\n        control={<Radio />}\n        label={<T id={label} />}\n      />\n    ))}\n  </RadioGroup>\n);\n\nexport default StructureUpdateContainer(RadioButtons);\n","export { default as InputAndSlider } from './InputAndSlider';\nexport { default as RadioButtons } from './RadioButtons';\nexport { default as FinmaRatio } from './FinmaRatio';\nexport { default as CalculatedValue, FORMATS } from './CalculatedValue';\n","// @flow\nimport React from 'react';\n\nimport { ScrollSyncPane } from 'react-scroll-sync';\n\nimport FinancingDataContainer from '../containers/FinancingDataContainer';\nimport FinancingSectionExpansionPanel from './FinancingSectionExpansionPanel';\n\ntype configArray = Array<{\n  Component: React.Component,\n  id: string,\n  label?: React.Node,\n  labelKey: number,\n  changeLabelKey: Function,\n}>;\n\ntype FinancingSectionProps = {\n  data: Object,\n  summaryConfig: configArray,\n  detailConfig: configArray,\n  className?: string,\n  expanded: boolean,\n  changeExpanded: Function,\n};\n\nconst FinancingSection = ({\n  detailConfig,\n  noWrapper,\n  summaryConfig,\n  className,\n  ...sectionProps\n}: FinancingSectionProps) => (\n  <ScrollSyncPane>\n    <FinancingSectionExpansionPanel\n      noWrapper={noWrapper}\n      sectionProps={sectionProps}\n      summaryConfig={summaryConfig}\n      detailConfig={detailConfig}\n      className={className}\n    />\n  </ScrollSyncPane>\n);\n\nexport default FinancingDataContainer(FinancingSection);\n","// @flow\nimport React, { PureComponent } from 'react';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\n\nimport FinancingLabels from '../FinancingLabels';\nimport { makeRenderDetail } from './financingSectionHelpers';\n\nexport default class FinancingSectionDetails extends PureComponent {\n  constructor(props) {\n    super(props);\n    const { detailConfig } = props;\n    this.renderDetail = makeRenderDetail(detailConfig);\n  }\n\n  render() {\n    const { detailConfig, sectionProps, noWrapper } = this.props;\n    const { structures } = sectionProps;\n\n    return (\n      <ExpansionPanelDetails className=\"section-detail\">\n        <FinancingLabels config={detailConfig} />\n\n        {structures.map(structure =>\n          this.renderDetail(structure, sectionProps))}\n      </ExpansionPanelDetails>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport { compose, withState, lifecycle } from 'recompose';\nimport cx from 'classnames';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ClientEventService from '../../../../api/events/ClientEventService';\nimport FinancingSectionSummary from './FinancingSectionSummary';\nimport FinancingSectionDetails from './FinancingSectionDetails';\n\ntype FinancingSectionExpansionPanelProps = {};\n\nconst styles = {\n  container: {\n    overflow: 'visible',\n    overflowY: 'hidden',\n  },\n  entered: {\n    overflowY: 'visible',\n  },\n  content: {\n    margin: 0,\n    '& > :last-child': {\n      paddingRight: 0,\n    },\n    '&$expanded': {\n      margin: 0,\n    },\n  },\n  expanded: {},\n};\n\nconst FinancingSectionExpansionPanel = ({\n  detailConfig,\n  summaryConfig,\n  classes: { container, entered, content, expanded: expandedClass },\n  className,\n  expanded,\n  changeExpanded,\n  sectionProps,\n  noWrapper,\n}: FinancingSectionExpansionPanelProps) => (\n  <ExpansionPanel\n    className={cx('financing-structures-section', className, { expanded })}\n    CollapseProps={{ classes: { container, entered } }}\n    expanded={expanded}\n    onChange={() => changeExpanded(!expanded)}\n  >\n    <FinancingSectionSummary\n      summaryConfig={summaryConfig}\n      sectionProps={sectionProps}\n      noWrapper={noWrapper}\n      content={content}\n      expandedClass={expandedClass}\n    />\n    <FinancingSectionDetails\n      detailConfig={detailConfig}\n      sectionProps={sectionProps}\n      noWrapper={noWrapper}\n    />\n  </ExpansionPanel>\n);\n\nexport default compose(\n  withState(\n    'expanded',\n    'changeExpanded',\n    ({ sectionProps: { Calculator, loan } }) =>\n      !Calculator.hasCompleteStructure({ loan }),\n  ),\n  lifecycle({\n    componentDidMount() {\n      const { changeExpanded } = this.props;\n      ClientEventService.addListener('expandAll', () => changeExpanded(true));\n      ClientEventService.addListener('collapseAll', () =>\n        changeExpanded(false));\n    },\n    componentWillUnmount() {\n      const { changeExpanded } = this.props;\n      ClientEventService.removeListener('expandAll', () =>\n        changeExpanded(true));\n      ClientEventService.removeListener('collapseAll', () =>\n        changeExpanded(false));\n    },\n  }),\n  withStyles(styles),\n)(FinancingSectionExpansionPanel);\n","// @flow\nimport React, { PureComponent } from 'react';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\n\nimport FinancingLabels from '../FinancingLabels';\nimport { makeRenderSummary } from './financingSectionHelpers';\n\nconst SummaryContent = React.memo(({ structures, summaryConfig, sectionProps, renderSummary }) => (\n  <>\n    <FinancingLabels config={summaryConfig} className=\"summary-labels\" />\n    {structures.map(structure => renderSummary(structure, sectionProps))}\n  </>\n));\n\nexport default class FinancingSectionSummary extends PureComponent {\n  constructor(props) {\n    super(props);\n    const { summaryConfig } = props;\n    this.renderSummary = makeRenderSummary(summaryConfig);\n  }\n\n  render() {\n    const {\n      summaryConfig,\n      sectionProps,\n      noWrapper,\n      content,\n      expandedClass,\n      ...rest\n    } = this.props;\n    const { structures } = sectionProps;\n\n    return (\n      <ExpansionPanelSummary\n        className=\"section-summary\"\n        classes={{ content, expanded: expandedClass }}\n        {...rest}\n      >\n        <SummaryContent\n          structures={structures}\n          summaryConfig={summaryConfig}\n          sectionProps={sectionProps}\n          renderSummary={this.renderSummary}\n        />\n      </ExpansionPanelSummary>\n    );\n  }\n}\n\nFinancingSectionSummary.muiName = ExpansionPanelSummary.muiName;\n","import React from 'react';\nimport cx from 'classnames';\n\nexport const makeFilterConfig = structures => ({ condition }) => {\n  if (!condition) {\n    // Render components without condition property\n    return true;\n  }\n  if (typeof condition === 'function') {\n    return condition(structures);\n  }\n  return !!condition;\n};\n\nconst renderArray = (configArray, sectionProps, structureId) =>\n  configArray\n    .filter(makeFilterConfig(sectionProps))\n    .map(({ Component, id, ...props }) =>\n      (Component ? (\n        <Component\n          key={id}\n          structureId={structureId}\n          id={id}\n          className={id}\n          {...sectionProps}\n          {...props}\n        />\n      ) : (\n        <div className={cx('empty-line', id)} key={id} />\n      )));\n\nexport const makeRenderSummary = configArray => (structure, sectionProps) => {\n  const { id: structureId } = structure;\n\n  return (\n    <div className=\"structure\" key={structureId}>\n      {renderArray(configArray, { ...sectionProps, structure }, structureId)}\n    </div>\n  );\n};\n\nexport const makeRenderDetail = (configArray, noWrapper) => (\n  structure,\n  sectionProps,\n) => {\n  const { id: structureId } = structure;\n  if (noWrapper) {\n    return (\n      <div className=\"structure\" key={structureId}>\n        {renderArray(configArray, { ...sectionProps, structure }, structureId)}\n      </div>\n    );\n  }\n  return (\n    <div className=\"structure\" key={structureId}>\n      <span className=\"card1\">\n        {renderArray(configArray, { ...sectionProps, structure }, structureId)}\n      </span>\n    </div>\n  );\n};\n","export { default } from './FinancingSection';\nexport * from './components';\nexport * from './financingSectionHelpers';\n","// @flow\nimport React from 'react';\n\nimport DialogSimple from '../../../../DialogSimple';\nimport MortgageNotesPickerSummary from './MortgageNotesPickerSummary';\nimport MortgageNotesPickerContainer from './MortgageNotesPickerContainer';\nimport MortgageNotesPickerDialog from './MortgageNotesPickerDialog';\n\ntype MortgageNotesPickerProps = {};\n\nconst MortgageNotesPicker = (props: MortgageNotesPickerProps) => {\n  const {\n    borrowerMortgageNotes,\n    currentMortgageNotes,\n    className,\n    structure: { wantedLoan, disableForms },\n  } = props;\n\n  // This component does not make sense if there's no wantedLoan\n  if (!wantedLoan) {\n    return null;\n  }\n\n  return (\n    <div className={className}>\n      <DialogSimple\n        renderTrigger={({ handleOpen }) => (\n          <MortgageNotesPickerSummary\n            handleOpen={handleOpen}\n            currentMortgageNotes={currentMortgageNotes}\n            borrowerMortgageNotes={borrowerMortgageNotes.filter(({ selected }) => selected)}\n            wantedLoan={wantedLoan}\n            disabled={disableForms}\n          />\n        )}\n      >\n        <MortgageNotesPickerDialog {...props} />\n      </DialogSimple>\n    </div>\n  );\n};\n\nexport default MortgageNotesPickerContainer(MortgageNotesPicker);\n","import React from 'react';\nimport { withProps, compose } from 'recompose';\n\nimport T from '../../../../Translation';\nimport FinancingDataContainer from '../../containers/FinancingDataContainer';\nimport SingleStructureContainer from '../../containers/SingleStructureContainer';\nimport StructureUpdateContainer from '../../containers/StructureUpdateContainer';\nimport { getProperty } from '../../FinancingCalculator';\n\nconst formatMortgageNotes = (mortgageNoteIds, borrowers) =>\n  borrowers.reduce((arr, { mortgageNotes: notes = [], name }, index) => {\n    const notesWithName = notes.map(note => ({\n      ...note,\n      borrowerName: name || (\n        <T id=\"general.borrowerWithIndex\" values={{ index: index + 1 }} />\n      ),\n      isBorrower: true,\n    }));\n    return [...arr, ...notesWithName];\n  }, []);\n\nconst formatBorrowerMortgageNote = (\n  notes,\n  canton,\n  updateStructure,\n  mortgageNoteIds,\n) =>\n  notes.map((note) => {\n    const selected = mortgageNoteIds.includes(note._id);\n    const available = note.canton === canton;\n\n    return {\n      ...note,\n      selected,\n      available,\n      onClick: () => {\n        if (available) {\n          return updateStructure({\n            mortgageNoteIds: [...mortgageNoteIds, note._id],\n          });\n        }\n      },\n    };\n  });\n\nexport default compose(\n  FinancingDataContainer,\n  SingleStructureContainer,\n  StructureUpdateContainer,\n  withProps((props) => {\n    const {\n      structure: { mortgageNoteIds = [] },\n      borrowers = [],\n      updateStructure,\n    } = props;\n    const property = getProperty(props);\n    const { mortgageNotes = [], canton } = property;\n    const notes = formatMortgageNotes(mortgageNoteIds, borrowers);\n\n    return {\n      currentMortgageNotes: mortgageNotes,\n      borrowerMortgageNotes: formatBorrowerMortgageNote(\n        notes,\n        canton,\n        updateStructure,\n        mortgageNoteIds,\n      ),\n      removeMortgageNote: mortgageNoteId =>\n        updateStructure({\n          mortgageNoteIds: mortgageNoteIds.filter(id => id !== mortgageNoteId),\n        }),\n    };\n  }),\n);\n","// @flow\nimport React from 'react';\n\nimport { createRoute } from '../../../../../utils/routerUtils';\nimport { PROPERTIES_COLLECTION } from '../../../../../api/constants';\nimport T from '../../../../Translation';\nimport UpdateField from '../../../../UpdateField';\nimport { getProperty } from '../../FinancingCalculator';\nimport Link from '../../../../Link';\nimport MortgageNotesPickerList from './MortgageNotesPickerList';\n\ntype MortgageNotesPickerDialogProps = {};\n\nconst MortgageNotesPickerDialog = (props: MortgageNotesPickerDialogProps) => {\n  const {\n    borrowerMortgageNotes,\n    currentMortgageNotes,\n    availableMortgageNotes,\n    loan: { _id: loanId },\n    removeMortgageNote,\n  } = props;\n  const property = getProperty(props);\n  if (!property) {\n    return (\n      <p className=\"description\">\n        <T id=\"FinancingMortgageNotesPicker.noProperty\" />\n      </p>\n    );\n  }\n\n  const { canton, _id: propertyId } = property;\n\n  if (!canton) {\n    return (\n      <div className=\"flex-col\">\n        <p className=\"description\">\n          <T id=\"FinancingMortgageNotesPicker.noCanton\" />\n        </p>\n        <UpdateField\n          doc={property}\n          fields={['zipCode']}\n          collection={PROPERTIES_COLLECTION}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"mortgage-notes-picker-dialog\">\n      <h4>\n        <T id=\"FinancingMortgageNotesPicker.propertyMortgageNotes\" />\n      </h4>\n\n      {currentMortgageNotes.length === 0 && (\n        <Link\n          to={createRoute(`/loans/${loanId}/properties/${propertyId}`)}\n          className=\"a\"\n        >\n          <T id=\"FinancingMortgageNotesPicker.emptyPropertyMortgageNotes\" />\n        </Link>\n      )}\n      <MortgageNotesPickerList mortgageNotes={currentMortgageNotes} />\n      <h4>\n        <T id=\"FinancingMortgageNotesPicker.borrowerMortgageNotes\" />\n      </h4>\n      <MortgageNotesPickerList\n        mortgageNotes={borrowerMortgageNotes}\n        removeMortgageNote={removeMortgageNote}\n        canton={canton}\n      />\n      {!borrowerMortgageNotes.filter(({ available }) => available).length && (\n        <Link to={createRoute(`/loans/${loanId}/borrowers`)} className=\"a\">\n          <T\n            id=\"FinancingMortgageNotesPicker.noAvailableMortgageNotes\"\n            values={{ canton: <T id={`Forms.canton.${canton}`} /> }}\n          />\n        </Link>\n      )}\n    </div>\n  );\n};\n\nexport default MortgageNotesPickerDialog;\n","// @flow\nimport React from 'react';\n\nimport Icon from 'core/components/Icon/Icon';\nimport { toMoney } from '../../../../../utils/conversionFunctions';\nimport List, {\n  ListItem,\n  ListItemText,\n  ListItemSecondaryAction,\n} from '../../../../List';\nimport T from '../../../../Translation';\nimport IconButton from '../../../../IconButton';\n\ntype MortgageNotesPickerListProps = {};\n\nconst MortgageNotesPickerList = ({\n  mortgageNotes,\n  removeMortgageNote,\n  canton,\n}: MortgageNotesPickerListProps) => (\n  <List>\n    {mortgageNotes.map(({\n      _id,\n      value,\n      rank,\n      canton: noteCanton,\n      borrowerName,\n      isBorrower,\n      selected,\n      available,\n      onClick = () => null,\n    }) => (\n      <ListItem\n        key={_id}\n        button\n        selected={selected}\n        disabled={isBorrower && !available}\n        onClick={onClick}\n        className=\"mortgage-note-list-item\"\n      >\n        <ListItemText\n          primary={(\n            <span>\n              {`CHF ${toMoney(value)}`}\n                &nbsp;\n            </span>\n          )}\n          secondary={(\n            <div className=\"mortgage-note-list-item-description\">\n              <span>\n                {[\n                  isBorrower && <span>{borrowerName}</span>,\n                  rank && (\n                    <span>\n                      <T id=\"Forms.rank\" />\n                        &nbsp;\n                      {rank}\n                    </span>\n                  ),\n                ]\n                  .filter(x => x)\n                  .map((tag, i) => [i !== 0 && ', ', tag])}\n              </span>\n              {isBorrower && (\n                <span className=\"mortgage-note-list-item-description-canton\">\n                  <T id={`Forms.canton.${noteCanton}`} />\n                </span>\n              )}\n            </div>\n          )}\n        >\n            Hello\n        </ListItemText>\n        {isBorrower && selected && (\n          <ListItemSecondaryAction>\n            <IconButton\n              tooltip={<T id=\"general.remove\" />}\n              type=\"close\"\n              onClick={() => removeMortgageNote(_id)}\n            />\n          </ListItemSecondaryAction>\n        )}\n        {isBorrower && !available && (\n          <ListItemSecondaryAction>\n            <Icon\n              style={{ marginRight: 12, width: 24, height: 24 }}\n              type=\"info\"\n              tooltip={(\n                <span>\n                    Non applicable pour le canton de\n                  {' '}\n                  <T id={`Forms.canton.${canton}`} />\n                </span>\n              )}\n            />\n          </ListItemSecondaryAction>\n        )}\n      </ListItem>\n    ))}\n  </List>\n);\n\nexport default MortgageNotesPickerList;\n","// @flow\nimport React from 'react';\n\nimport T from '../../../../Translation';\nimport { toMoney } from '../../../../../utils/conversionFunctions';\n\ntype MortgageNotesPickerSummaryProps = {\n  borrowerMortgageNotes: Array<Object>,\n  currentMortgageNotes: Array<Object>,\n  handleOpen: Function,\n  wantedLoan: Number,\n};\n\nconst MortgageNotesPickerSummary = ({\n  borrowerMortgageNotes,\n  currentMortgageNotes,\n  handleOpen,\n  wantedLoan,\n  disabled,\n}: MortgageNotesPickerSummaryProps) => {\n  const allNotes = [...borrowerMortgageNotes, ...currentMortgageNotes];\n  const currentMortgageNotesValue = allNotes.reduce(\n    (total, { value = 0 }) => total + value,\n    0,\n  );\n  return (\n    <div\n      className=\"card-hover pointer mortgage-notes-picker-summary\"\n      onClick={disabled ? null : handleOpen}\n    >\n      {wantedLoan > currentMortgageNotesValue && (\n        <>\n          <h4 className=\"text-center\">\n            <T id=\"FinancingMortgageNotesPicker.mortgageNoteToCreate\" />\n          </h4>\n          <p className=\"calculated-value\">\n            <span className=\"chf\">CHF</span>{' '}\n            <span className=\"primary\">\n              {toMoney(wantedLoan - currentMortgageNotesValue)}\n            </span>\n          </p>\n        </>\n      )}\n      {allNotes.length > 0 && (\n        <>\n          <h4>\n            <T\n              id=\"FinancingMortgageNotesPicker.title\"\n              values={{ count: allNotes.length }}\n            />\n          </h4>\n          <p className=\"calculated-value\">\n            <span className=\"chf\">CHF</span>{' '}\n            <span className=\"primary\">\n              {toMoney(currentMortgageNotesValue)}\n            </span>\n          </p>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default MortgageNotesPickerSummary;\n","export { default } from './MortgageNotesPicker';\n","// @flow\nimport React from 'react';\n\nimport { OWN_FUNDS_USAGE_TYPES } from '../../../../api/constants';\nimport T from '../../../Translation';\nimport FinancingSection, {\n  InputAndSlider,\n  CalculatedValue,\n  FinmaRatio,\n} from '../FinancingSection';\nimport Calc, { getOffer } from '../FinancingCalculator';\nimport FinancingTranchePicker from './FinancingTranchePicker';\nimport MortgageNotesPicker from './MortgageNotesPicker';\nimport {\n  getBorrowRatio,\n  getBorrowRatioStatus,\n} from '../FinancingResult/financingResultHelpers';\nimport LoanPercent from './LoanPercent';\nimport Calculator from '../../../../utils/Calculator';\n\nconst getPledgedAmount = ({ structure: { ownFunds } }) =>\n  ownFunds\n    .filter(({ usageType }) => usageType === OWN_FUNDS_USAGE_TYPES.PLEDGE)\n    .reduce((sum, { value }) => sum + value, 0);\n\nexport const calculateLoan = (params) => {\n  const {\n    structure: { wantedLoan },\n  } = params;\n  return wantedLoan;\n};\n\nexport const calculateMaxLoan = (data, pledgeOverride) => {\n  const { loan, structureId } = data;\n  const offer = Calculator.selectOffer({ loan, structureId });\n  if (offer) {\n    const { maxAmount } = getOffer(data);\n    return maxAmount;\n  }\n\n  const structure = Calculator.selectStructure({ loan, structureId });\n  const propertyValue = Calculator.selectPropertyValue({ loan, structureId });\n\n  return Calc.getMaxLoanBase({\n    propertyWork: structure.propertyWork,\n    propertyValue,\n    pledgedAmount:\n      pledgeOverride !== undefined ? pledgeOverride : getPledgedAmount(data),\n    residenceType: loan.residenceType,\n  });\n};\n\nconst enableOffers = ({ loan }) => loan.enableOffers;\n\nconst oneStructureHasLoan = ({ loan: { structures } }) =>\n  structures.some(({ wantedLoan }) => wantedLoan);\n\ntype FinancingFinancingProps = {};\n\nconst FinancingFinancing = (props: FinancingFinancingProps) => (\n  <FinancingSection\n    summaryConfig={[\n      {\n        id: 'mortgageLoan',\n        label: (\n          <span className=\"section-title\">\n            <T id=\"FinancingFinancing.title\" />\n          </span>\n        ),\n        Component: props => (\n          <div className=\"mortgageLoan financing-mortgageLoan\">\n            <CalculatedValue value={calculateLoan} {...props} />\n            <FinmaRatio\n              value={getBorrowRatio}\n              status={getBorrowRatioStatus}\n              {...props}\n            />\n          </div>\n        ),\n      },\n    ]}\n    detailConfig={[\n      {\n        Component: InputAndSlider,\n        id: 'wantedLoan',\n        max: calculateMaxLoan,\n      },\n      {\n        Component: LoanPercent,\n        id: 'wantedLoanPercent',\n      },\n      {\n        Component: MortgageNotesPicker,\n        id: 'mortgageNoteIds',\n        condition: oneStructureHasLoan,\n      },\n      // TODO: To be released in the future\n      // {\n      //   Component: RadioButtons,\n      //   id: 'amortizationType',\n      //   options: Object.values(AMORTIZATION_TYPE).map(key => ({\n      //     id: key,\n      //     label: `FinancingFinancing.${key}`,\n      //   })),\n      //   condition: enableOffers,\n      // },\n      {\n        id: 'loanTranches',\n        Component: FinancingTranchePicker,\n        condition: enableOffers,\n      },\n    ]}\n  />\n);\n\nexport default FinancingFinancing;\n","// @flow\nimport React from 'react';\n\nimport { compose } from 'recompose';\nimport { TranchePickerDialog } from '../../../TranchePicker';\nimport StructureUpdateContainer from '../containers/StructureUpdateContainer';\nimport SingleStructureContainer from '../containers/SingleStructureContainer';\n\ntype FinancingTranchePickerProps = {};\n\nconst FinancingTranchePicker = ({\n  structure: { loanTranches, disableForms },\n  updateStructure,\n  className,\n}: FinancingTranchePickerProps) => (\n  <span className={className}>\n    <TranchePickerDialog\n      initialTranches={loanTranches}\n      handleSave={tranches => updateStructure({ loanTranches: tranches })}\n      disabled={disableForms}\n    />\n  </span>\n);\n\nexport default compose(\n  SingleStructureContainer,\n  StructureUpdateContainer,\n)(FinancingTranchePicker);\n","// @flow\nimport React from 'react';\nimport { compose, withProps } from 'recompose';\n\nimport PercentInput from '../../../PercentInput';\nimport FinancingDataContainer from '../containers/FinancingDataContainer';\nimport { getBorrowRatio } from '../FinancingResult/financingResultHelpers';\nimport SingleStructureContainer from '../containers/SingleStructureContainer';\nimport FinancingCalculator from '../FinancingCalculator';\nimport StructureUpdateContainer from '../containers/StructureUpdateContainer';\n\ntype LoanPercentProps = {};\n\nconst LoanPercent = ({ handleChange, ...props }: LoanPercentProps) => (\n  <span className=\"wantedLoanPercent\">\n    <PercentInput\n      value={getBorrowRatio(props)}\n      onChange={handleChange}\n      disabled={props.structure.disableForms}\n    />\n  </span>\n);\n\nexport default compose(\n  FinancingDataContainer,\n  SingleStructureContainer,\n  StructureUpdateContainer,\n  withProps(({ updateStructure, ...data }) => ({\n    handleChange: (borrowValue) => {\n      const wantedLoan = FinancingCalculator.getLoanFromBorrowRatio(\n        borrowValue,\n        data,\n      );\n      return updateStructure({ wantedLoan: Math.round(wantedLoan) });\n    },\n  })),\n)(LoanPercent);\n","// @flow\n/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport { mount } from 'core/utils/testHelpers/enzyme';\nimport { IntlProvider, intlShape } from 'react-intl';\nimport { ScrollSync } from 'react-scroll-sync';\nimport messages from 'core/lang/fr.json';\n\nimport { OWN_FUNDS_USAGE_TYPES } from 'imports/core/api/constants';\nimport FinancingResult from '../FinancingResult';\nimport { Provider } from '../../containers/loan-context';\nimport { INTEREST_RATES } from '../../../../../api/interestRates/interestRatesConstants';\nimport Calculator from '../../../../../utils/Calculator';\n\nconst expectResult = (component, name, value) => {\n  const val = component()\n    .find(name)\n    .last();\n\n  if (!Number.isInteger(value)) {\n    // On our test browsers, the comma is represented either as a , or .\n    // due to the web's \"intl\" API\n    expect(val.contains(`${value}`) || val.contains(`${value}`.replace('.', ','))).to.equal(true);\n  } else {\n    expect(val.contains(`${value}`)).to.equal(true);\n  }\n};\n\ndescribe('FinancingResult', () => {\n  let props;\n  let loan;\n  const { intl } = new IntlProvider({\n    defaultLocale: 'fr',\n    messages,\n  }).getChildContext();\n  const component = () =>\n    mount(\n      <ScrollSync>\n        <Provider value={{ loan, Calculator }}>\n          <FinancingResult {...props} />\n        </Provider>\n      </ScrollSync>,\n      {\n        context: { intl },\n        childContextTypes: { intl: intlShape },\n      },\n    );\n\n  beforeEach(() => {\n    props = {};\n    loan = {\n      structures: [],\n      borrowers: [],\n      properties: [],\n    };\n  });\n\n  context('renders the correct results for a standard structure', () => {\n    beforeEach(() => {\n      const structure = {\n        id: 'a',\n        loanTranches: [{ type: 'interest10', value: 1 }],\n        propertyId: 'house',\n        propertyWork: 0,\n        wantedLoan: 800000,\n        ownFunds: [{ type: 'bankFortune', value: 250000 }],\n      };\n      loan = {\n        selectedStructure: 'a',\n        structure,\n        structures: [structure],\n        borrowers: [\n          {\n            _id: 'john',\n            bankFortune: 250000,\n            salary: 200000,\n            insurance2: [{ value: 50 }],\n            insurance3A: [{ value: 60 }],\n          },\n        ],\n        properties: [\n          {\n            _id: 'house',\n            value: 1000000,\n            yearlyExpenses: 1200,\n          },\n        ],\n        currentInterestRates: { [INTEREST_RATES.YEARS_10]: 0.01 },\n      };\n    });\n\n    it('monthly', () => {\n      const monthly = component().find('.financing-structures-result-chart .total');\n      const string = monthly.text();\n      const hasNonZeroNumber = /[1-9]/.test(string);\n      // Interests rates change constantly, can't pin a precise value\n      expect(hasNonZeroNumber).to.equal(true);\n    });\n\n    it('interestsCost', () => {\n      const interestsCost = component()\n        .find('.interestsCost')\n        .last();\n      const string = interestsCost.text();\n      const hasNonZeroNumber = /[1-9]/.test(string);\n\n      expect(hasNonZeroNumber).to.equal(true);\n    });\n\n    it('amortizationCost', () => {\n      expectResult(component, '.amortizationCost', 833);\n    });\n\n    it('propertyCost', () => {\n      expectResult(component, '.propertyCost', 100);\n    });\n\n    it('borrowRatio', () => {\n      expectResult(component, '.borrowRatio', 0.8);\n    });\n\n    it('incomeRatio', () => {\n      expectResult(component, '.incomeRatio', 0.3);\n    });\n\n    it('remainingCash', () => {\n      expectResult(component, '.remainingCash', 0);\n    });\n\n    it('remainingInsurance2', () => {\n      expectResult(component, '.remainingInsurance2', 50);\n    });\n\n    it('remainingInsurance3A', () => {\n      expectResult(component, '.remainingInsurance3A', 60);\n    });\n  });\n\n  context('structure with an offer', () => {\n    beforeEach(() => {\n      const structure = {\n        id: 'a',\n        loanTranches: [\n          { type: 'interest2', value: 0.8 },\n          { type: 'interestLibor', value: 0.2 },\n        ],\n        propertyId: 'house',\n        offerId: 'offer',\n        propertyWork: 200000,\n        wantedLoan: 1080000,\n        notaryFees: 50000,\n        ownFunds: [\n          { type: 'bankFortune', value: 150000, borrowerId: 'John' },\n          {\n            type: 'insurance2',\n            usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE,\n            value: 120000,\n            borrowerId: 'John',\n          },\n          { type: 'thirdPartyFortune', value: 20000, borrowerId: 'Mary' },\n        ],\n      };\n      loan = {\n        selectedStructure: 'a',\n        structure,\n        structures: [structure],\n        borrowers: [\n          {\n            _id: 'John',\n            bankFortune: 250000,\n            salary: 200000,\n            insurance2: [{ value: 1000 }],\n            insurance3A: [{ value: 500 }],\n          },\n          {\n            _id: 'Mary',\n            salary: 200000,\n            thirdPartyFortune: 200000,\n            insurance2: [{ value: 2000 }],\n            insurance3A: [{ value: 0 }],\n          },\n        ],\n        properties: [\n          {\n            _id: 'house',\n            value: 1000000,\n            yearlyExpenses: 1200,\n          },\n        ],\n        offers: [\n          {\n            _id: 'offer',\n            interest2: 0.02,\n            interestLibor: 0.01,\n            amortizationGoal: 0.5,\n            amortizationYears: 5,\n          },\n        ],\n        currentInterestRates: { [INTEREST_RATES.YEARS_10]: 0.01 },\n      };\n    });\n\n    it('monthly', () => {\n      const monthly = component().find('.financing-structures-result-chart .total');\n      const string = monthly.text();\n      const value = string.match(/\\d/g).join('');\n      expect(value).to.equal('9720');\n    });\n\n    it('interestsCost', () => {\n      const interestsCost = component()\n        .find('.interestsCost')\n        .last();\n      const string = interestsCost.text();\n      const value = string.match(/\\d/g).join('');\n\n      // Average of 1.8% interests\n      expect(value).to.equal('1620');\n    });\n\n    it('amortizationCost', () => {\n      // 1080k in 5 years to 600k\n      expectResult(component, '.amortizationCost', '8 000');\n    });\n\n    it('propertyCost', () => {\n      expectResult(component, '.propertyCost', 100);\n    });\n\n    it('borrowRatio', () => {\n      expectResult(component, '.borrowRatio', 0.9);\n    });\n\n    it('incomeRatio', () => {\n      // 400k income\n      // 12k maintenance, 54k interests, 20k amortization\n      expectResult(component, '.incomeRatio', 0.215);\n    });\n\n    it('remainingCash', () => {\n      expectResult(component, '.remainingCash', '100 000');\n    });\n\n    it('remainingInsurance2', () => {\n      expectResult(component, '.remainingInsurance2', '3 000');\n    });\n\n    it('remainingInsurance3A', () => {\n      expectResult(component, '.remainingInsurance3A', 500);\n    });\n  });\n\n  it.skip('renders an error if an interest rate is not defined', () => {\n    // FIXME: Enzyme does not support componentDidCatch yet\n    // https://github.com/airbnb/enzyme/issues/1553\n    loan = {\n      structures: [\n        {\n          id: 'a',\n          loanTranches: [{ type: 'unknown_rate' }],\n        },\n      ],\n      borrowers: [{}],\n      properties: [{}],\n    };\n    expect(component()\n      .find('.error')\n      .exists()).to.equal(true);\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport { shallow } from 'core/utils/testHelpers/enzyme';\n\nimport T from 'core/components/Translation';\nimport { OWN_FUNDS_TYPES } from 'core/api/constants';\nimport { FinancingResultErrors } from '../FinancingResultErrors';\nimport FinancingResultChart from '../FinancingResultChart';\nimport { OWN_FUNDS_USAGE_TYPES } from '../../../../../api/constants';\nimport Calculator from '../../../../../utils/Calculator';\n\ndescribe('FinancingResultErrors', () => {\n  let props;\n  let property;\n  let propertyId;\n  let structureId;\n  let offer;\n  let offerId;\n  let structure;\n  let borrower;\n  const component = () => shallow(<FinancingResultErrors {...props} />);\n\n  beforeEach(() => {\n    propertyId = 'propertyId';\n    structureId = 'structureId';\n    offerId = 'offerId';\n    property = { _id: propertyId, value: 100000 };\n    offer = { _id: offerId, interest10: 0.01 };\n    structure = {\n      propertyId,\n      wantedLoan: 80000,\n      id: structureId,\n      ownFunds: [],\n      propertyWork: 0,\n    };\n    borrower = {};\n    props = {\n      loan: {\n        properties: [property],\n        structures: [structure],\n        offers: [offer],\n        borrowers: [borrower],\n      },\n      Calculator,\n      structureId,\n    };\n  });\n\n  it('warns if no mortgage loan exists', () => {\n    structure.wantedLoan = 0;\n    expect(component()\n      .find(T)\n      .props().id).to.contain('noMortgageLoan');\n\n    structure.wantedLoan = undefined;\n    expect(component()\n      .find(T)\n      .props().id).to.contain('noMortgageLoan');\n  });\n\n  it('warns of missing own funds', () => {\n    expect(component()\n      .find(T)\n      .props().id).to.contain('missingOwnFunds');\n  });\n\n  it('warns of missing own funds if the value is NaN', () => {\n    expect(component()\n      .find(T)\n      .props().id).to.contain('missingOwnFunds');\n  });\n\n  it('warns of too much own funds', () => {\n    structure.ownFunds = [{ type: OWN_FUNDS_TYPES.BANK_FORTUNE, value: 50000 }];\n\n    expect(component()\n      .find(T)\n      .props().id).to.contain('tooMuchOwnFunds');\n  });\n\n  it('warns of a high income ratio', () => {\n    structure.ownFunds = [{ type: OWN_FUNDS_TYPES.BANK_FORTUNE, value: 25000 }];\n\n    expect(component()\n      .find(T)\n      .props().id).to.contain('highIncomeRatio');\n  });\n\n  it('warns of missing cash', () => {\n    structure.ownFunds = [\n      { type: OWN_FUNDS_TYPES.BANK_FORTUNE, value: 12000 },\n      {\n        type: OWN_FUNDS_TYPES.INSURANCE_2,\n        value: 12000,\n        usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW,\n      },\n    ];\n    borrower.salary = 100000;\n\n    expect(component()\n      .find(T)\n      .props().id).to.contain('missingCash');\n  });\n\n  it('warns of invalid interest rates', () => {\n    structure.ownFunds = [{ type: OWN_FUNDS_TYPES.BANK_FORTUNE, value: 25000 }];\n    structure.offerId = offerId;\n    structure.loanTranches = [{ type: 'interest5', value: 1 }];\n    borrower.salary = 100000;\n\n    expect(component()\n      .find(T)\n      .props().id).to.contain('invalidInterestRates');\n  });\n\n  it('returns null if no error exists in the structure', () => {\n    structure.ownFunds = [{ type: OWN_FUNDS_TYPES.BANK_FORTUNE, value: 25000 }];\n    borrower.salary = 100000;\n    expect(component()\n      .find(FinancingResultChart)\n      .exists()).to.equal(true);\n  });\n});\n","// @flow\nimport React from 'react';\n\nimport T from '../../../Translation';\nimport { OWN_FUNDS_TYPES } from '../../../../api/constants';\nimport FinancingSection, {\n  CalculatedValue,\n  FinmaRatio,\n} from '../FinancingSection';\nimport FinancingResultErrors from './FinancingResultErrors';\nimport {\n  getInterests,\n  getAmortization,\n  getRemainingCash,\n  getRemainingInsurance2,\n  getRemainingInsurance3A,\n  getRemainingBank3A,\n  getRemainingInsurance3B,\n  getPropertyExpenses,\n  getBorrowRatio,\n  getIncomeRatio,\n  getBorrowRatioStatus,\n  getIncomeRatioStatus,\n  makeHasOwnFundsOfType,\n} from './financingResultHelpers';\nimport FinancingResultInterests from './FinancingResultInterests';\n\ntype FinancingResultProps = {};\n\nconst FinancingResult = ({ error }: FinancingResultProps) =>\n  (error ? (\n    <h3 className=\"error\">{error.message}</h3>\n  ) : (\n    <FinancingSection\n      className=\"result-section\"\n      summaryConfig={[\n        {\n          id: 'result',\n          label: (\n            <span className=\"section-title result\">\n              <T id=\"FinancingResult.title\" />\n            </span>\n          ),\n          Component: FinancingResultErrors,\n        },\n      ]}\n      detailConfig={[\n        {\n          id: 'cost',\n          label: (\n            <h4 className=\"section-subtitle\">\n              <T id=\"FinancingResult.cost\" />\n            </h4>\n          ),\n        },\n        {\n          id: 'interestsCost',\n          Component: FinancingResultInterests,\n          value: getInterests,\n        },\n        {\n          id: 'amortizationCost',\n          Component: CalculatedValue,\n          value: getAmortization,\n        },\n        {\n          id: 'propertyCost',\n          Component: CalculatedValue,\n          value: getPropertyExpenses,\n        },\n        {\n          id: 'finma',\n          label: (\n            <h4 className=\"section-subtitle\">\n              <T id=\"FinancingResult.finma\" />\n            </h4>\n          ),\n        },\n        {\n          id: 'borrowRatio',\n          Component: FinmaRatio,\n          value: getBorrowRatio,\n          status: getBorrowRatioStatus,\n          tooltip: true,\n        },\n        {\n          id: 'incomeRatio',\n          Component: FinmaRatio,\n          value: getIncomeRatio,\n          status: getIncomeRatioStatus,\n          tooltip: true,\n        },\n        {\n          id: 'future',\n          label: (\n            <h4 className=\"section-subtitle\">\n              <T id=\"FinancingResult.future\" />\n            </h4>\n          ),\n          className: 'section-subtitle',\n        },\n        {\n          id: 'remainingCash',\n          Component: CalculatedValue,\n          value: getRemainingCash,\n        },\n        {\n          id: 'remainingInsurance2',\n          Component: CalculatedValue,\n          value: getRemainingInsurance2,\n          condition: makeHasOwnFundsOfType(OWN_FUNDS_TYPES.INSURANCE_2),\n        },\n        {\n          id: 'remainingInsurance3A',\n          Component: CalculatedValue,\n          value: getRemainingInsurance3A,\n          condition: makeHasOwnFundsOfType(OWN_FUNDS_TYPES.INSURANCE_3A),\n        },\n        {\n          id: 'remainingBank3A',\n          Component: CalculatedValue,\n          value: getRemainingBank3A,\n          condition: makeHasOwnFundsOfType(OWN_FUNDS_TYPES.BANK_3A),\n        },\n        {\n          id: 'remainingInsurance3B',\n          Component: CalculatedValue,\n          value: getRemainingInsurance3B,\n          condition: makeHasOwnFundsOfType(OWN_FUNDS_TYPES.INSURANCE_3B),\n        },\n      ]}\n    />\n  ));\n\nexport default React.memo(FinancingResult);\n","// @flow\nimport React from 'react';\nimport { compose } from 'recompose';\nimport cx from 'classnames';\n\nimport DonutChart from 'core/components/charts/DonutChart';\nimport { toMoney } from 'core/utils/conversionFunctions';\nimport SingleStructureContainer from '../containers/SingleStructureContainer';\nimport FinancingDataContainer from '../containers/FinancingDataContainer';\nimport {\n  getAmortization,\n  getPropertyExpenses,\n  getInterests,\n} from './financingResultHelpers';\n\ntype FinancingResultChartProps = {};\n\nconst FinancingResultChart = ({\n  className,\n  ...props\n}: FinancingResultChartProps) => {\n  const interests = getInterests(props);\n  const amortization = getAmortization(props);\n  const propertyExpenses = getPropertyExpenses(props);\n\n  return (\n    <div className={cx('financing-structures-result-chart', className)}>\n      <DonutChart\n        data={[\n          { value: interests, id: 'interests' },\n          { value: amortization, id: 'amortization' },\n          { value: propertyExpenses, id: 'maintenance' },\n        ]}\n        intlPrefix=\"general\"\n        config={{\n          chart: {\n            width: 100,\n            height: 100,\n            spacingBottom: 0,\n            spacingTop: 0,\n            spacingRight: 0,\n            spacingLeft: 0,\n          },\n          plotOptions: {\n            pie: {\n              tooltip: {\n                headerFormat: '<b>{point.key}</b><br />',\n                pointFormat: 'CHF {point.y:,.0f}',\n              },\n              showInLegend: false,\n              animation: false,\n            },\n          },\n          legend: { enabled: false },\n        }}\n        title=\"\"\n      />\n      <span className=\"total\">\n        <span className=\"chf\">CHF </span>\n        {toMoney(amortization + interests + propertyExpenses)}\n      </span>\n    </div>\n  );\n};\n\nexport default compose(\n  FinancingDataContainer,\n  SingleStructureContainer,\n)(FinancingResultChart);\n","// @flow\nimport React from 'react';\nimport { compose } from 'recompose';\n\nimport T from '../../../Translation';\nimport Calculator from '../../../../utils/Calculator';\nimport SingleStructureContainer from '../containers/SingleStructureContainer';\nimport FinancingDataContainer from '../containers/FinancingDataContainer';\nimport { getIncomeRatio } from './financingResultHelpers';\nimport FinancingResultChart from './FinancingResultChart';\nimport FinanceCalculator from '../FinancingCalculator';\n\ntype FinancingResultErrorsProps = {};\n\nexport const ERROR_TYPES = {\n  BREAKING: 'BREAKING',\n  WARNING: 'WARNING',\n};\n\nconst errors = [\n  {\n    id: 'noMortgageLoan',\n    func: ({ loan, structureId }) => {\n      const wantedLoan = Calculator.selectStructureKey({\n        loan,\n        structureId,\n        key: 'wantedLoan',\n      });\n      return !wantedLoan || wantedLoan === 0;\n    },\n    type: ERROR_TYPES.BREAKING,\n  },\n  {\n    id: 'missingOwnFunds',\n    func: ({ loan, structureId }) =>\n      Calculator.isMissingOwnFunds({ loan, structureId }),\n    type: ERROR_TYPES.WARNING,\n  },\n  {\n    id: 'tooMuchOwnFunds',\n    func: ({ loan, structureId }) =>\n      Calculator.hasTooMuchOwnFunds({ loan, structureId }),\n    type: ERROR_TYPES.WARNING,\n  },\n  {\n    id: 'highIncomeRatio',\n    func: data => getIncomeRatio(data) > FinanceCalculator.maxIncomeRatio,\n    type: ERROR_TYPES.WARNING,\n  },\n  {\n    id: 'invalidInterestRates',\n    func: ({ loan, structureId }) =>\n      FinanceCalculator.checkInterestsAndTranches({\n        tranches: Calculator.selectStructureKey({\n          loan,\n          structureId,\n          key: 'loanTranches',\n        }),\n        interestRates: Calculator.selectStructureKey({\n          loan,\n          structureId,\n          key: 'offerId',\n        })\n          ? Calculator.selectOffer({ loan, structureId })\n          : loan.currentInterestRates,\n      }),\n    type: ERROR_TYPES.BREAKING,\n  },\n  {\n    id: 'missingCash',\n    func: (data) => {\n      const { loan, structureId } = data;\n      return !Calculator.hasEnoughCash({ loan, structureId });\n    },\n    type: ERROR_TYPES.WARNING,\n  },\n];\n\nconst getError = props =>\n  errors.reduce(\n    (currentError, { id, type, func }) =>\n      currentError || (func(props) && { id, type }),\n    undefined,\n  );\n\nexport const FinancingResultErrors = (props: FinancingResultErrorsProps) => {\n  const error = getError(props);\n\n  if (error.type === ERROR_TYPES.BREAKING) {\n    return (\n      <p className=\"error error-box result\">\n        <T id={`FinancingResultErrors.${error.id}`} />\n      </p>\n    );\n  }\n  if (error.type === ERROR_TYPES.WARNING) {\n    return (\n      <div className=\"result\">\n        <FinancingResultChart {...props} className=\"\" />\n\n        <p className=\"error error-box\">\n          <T id={`FinancingResultErrors.${error.id}`} />\n        </p>\n      </div>\n    );\n  }\n\n  return <FinancingResultChart {...props} />;\n};\n\nexport default compose(\n  FinancingDataContainer,\n  SingleStructureContainer,\n)(FinancingResultErrors);\n","// @flow\nimport React from 'react';\n\nimport Calculator from '../../../../utils/Calculator';\nimport T, { Percent } from '../../../Translation';\nimport Icon from '../../../Icon';\nimport { CalculatedValue } from '../FinancingSection/components';\nimport { getInterestRates } from '../FinancingCalculator';\n\ntype FinancingResultInterestsProps = {};\n\nconst getTooltipTitle = ({ structure, loan, structureId }) => {\n  const { offerId } = structure;\n\n  if (offerId) {\n    const offer = Calculator.selectOffer({\n      loan,\n      structureId,\n    });\n    return (\n      <T\n        id=\"FinancingResultInterests.withOffer\"\n        values={{ name: offer.organisation.name }}\n      />\n    );\n  }\n\n  return <T id=\"FinancingResultInterests.noOffer\" />;\n};\n\nconst InterestsTooltip = (props) => {\n  const { loanTranches } = props.structure;\n  const rates = getInterestRates(props);\n\n  return (\n    <div>\n      <h4 className=\"inherit-color\" style={{ marginTop: 0 }}>\n        {getTooltipTitle(props)}\n      </h4>\n      {loanTranches.map(({ type }) => {\n        const rate = rates[type];\n\n        return (\n          <div key={type}>\n            <b>\n              <T id={`offer.${type}.short`} />\n            </b>\n            &nbsp;\n            <Percent value={rate} />\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nconst FinancingResultInterests = ({\n  className,\n  ...props\n}: FinancingResultInterestsProps) => (\n  <div className={className}>\n    <CalculatedValue {...props} />\n    <Icon\n      type=\"info\"\n      tooltip={<InterestsTooltip {...props} />}\n      tooltipPlacement=\"right\"\n    />\n  </div>\n);\nexport default FinancingResultInterests;\n","// @flow\nimport Calculator, {\n  Calculator as CalculatorClass,\n} from 'core/utils/Calculator';\nimport FinanceCalculator, { getProperty } from '../FinancingCalculator';\nimport { OWN_FUNDS_USAGE_TYPES } from '../../../../api/constants';\n\nconst initCalc = ({\n  loan,\n  structureId,\n  offer,\n  Calculator: InitializedCalculator,\n}) => {\n  let finalOffer = offer;\n\n  if (!finalOffer) {\n    const { offers = [] } = loan;\n    const { offerId } = Calculator.selectStructure({ loan, structureId });\n    finalOffer = offers.find(({ _id }) => offerId === _id);\n  }\n\n  if (finalOffer && finalOffer.organisation && finalOffer.organisation.lenderRules) {\n    return new CalculatorClass({\n      loan,\n      structureId,\n      lenderRules: finalOffer.organisation.lenderRules,\n    });\n  }\n\n  return InitializedCalculator;\n};\nexport const getInterests = (params) => {\n  const {\n    structure: { wantedLoan },\n  } = params;\n  return (FinanceCalculator.getInterestsWithTranches(params) * wantedLoan) / 12;\n};\n\nexport const getAmortization = (params) => {\n  const calc = initCalc(params);\n  const { loan, structureId } = params;\n\n  return calc.getAmortization({ loan, structureId });\n};\n\nexport const getPropertyExpenses = (data) => {\n  const property = getProperty(data);\n  return Math.round((property && property.yearlyExpenses) / 12 || 0);\n};\n\nconst getNonPledgedFundsOfType = ({ structure: { ownFunds }, type }) =>\n  ownFunds\n    .filter(({ type: t }) => t === type)\n    .filter(({ usageType }) => usageType !== OWN_FUNDS_USAGE_TYPES.PLEDGE)\n    .reduce((sum, { value }) => sum + value, 0);\n\nexport const getRemainingCash = ({ borrowers, structure }) =>\n  Calculator.getFortune({ borrowers })\n  - getNonPledgedFundsOfType({ structure, type: 'bankFortune' });\n\nexport const getRemainingInsurance2 = ({ borrowers, structure }) =>\n  Calculator.getInsurance2({ borrowers })\n  - getNonPledgedFundsOfType({ structure, type: 'insurance2' });\n\nexport const getRemainingInsurance3A = ({ borrowers, structure }) =>\n  Calculator.getInsurance3A({ borrowers })\n  - getNonPledgedFundsOfType({ structure, type: 'insurance3A' });\n\nexport const getRemainingInsurance3B = ({ borrowers, structure }) =>\n  Calculator.getInsurance3B({ borrowers })\n  - getNonPledgedFundsOfType({ structure, type: 'insurance3B' });\n\nexport const getRemainingBank3A = ({ borrowers, structure }) =>\n  Calculator.getBank3A({ borrowers })\n  - getNonPledgedFundsOfType({ structure, type: 'bank3A' });\n\nexport const getBorrowRatio = (params) => {\n  const calc = initCalc(params);\n  const { loan, structureId } = params;\n  return calc.getBorrowRatio({ loan, structureId });\n};\n\nexport const getIncomeRatio = (params) => {\n  const calc = initCalc(params);\n  const { loan, structureId } = params;\n  return calc.getIncomeRatio({ loan, structureId });\n};\n\nexport const getBorrowRatioStatus = (params) => {\n  const calc = initCalc(params);\n  return calc.getBorrowRatioStatus({ borrowRatio: params.value });\n};\n\nexport const getIncomeRatioStatus = (params) => {\n  const calc = initCalc(params);\n  return calc.getIncomeRatioStatus({ incomeRatio: params.value });\n};\n\nexport const makeHasOwnFundsOfType = type => ({ borrowers }) =>\n  Calculator.getFunds({ borrowers, type }) > 0;\n","// @flow\nimport React from 'react';\n\nimport { Consumer } from './loan-context';\nimport memoizeOne from '../../../../utils/memoizeOne';\n\nconst filterOffers = memoizeOne(offers =>\n  (offers && !!offers.length\n    ? offers.filter(({ enableOffer = true }) => enableOffer)\n    : []));\n\nexport default Component => props => (\n  <Consumer>\n    {({ loan, Calculator }) => (\n      <Component\n        {...props}\n        Calculator={Calculator}\n        loan={loan}\n        structures={loan.structures}\n        borrowers={loan.borrowers}\n        offers={filterOffers(loan.offers)}\n        properties={loan.properties}\n        promotionOptions={loan.promotionOptions}\n      />\n    )}\n  </Consumer>\n);\n","// @flow\nimport { Meteor } from 'meteor/meteor';\n\nimport React from 'react';\nimport { Consumer } from './loan-context';\n\nexport default Component => (props) => {\n  const { structureId } = props;\n  return (\n    <Consumer>\n      {({ loan }) => {\n        const structure = loan.structures.find(({ id }) => id === structureId);\n        structure.disableForms = Meteor.microservice === 'admin' ? false : structure.disabled;\n        return <Component {...props} structure={structure} />;\n      }}\n    </Consumer>\n  );\n};\n","// @flow\nimport { compose, withProps } from 'recompose';\n\nimport SingleStructureContainer from './SingleStructureContainer';\nimport withLoan from './withLoan';\nimport { updateStructure } from '../../../../api';\n\nexport default compose(\n  withLoan,\n  SingleStructureContainer,\n  withProps(({ structure, id, loan }) => ({\n    value: structure[id],\n    updateStructure: value =>\n      updateStructure.run({\n        loanId: loan._id,\n        structureId: structure.id,\n        structure: typeof value === 'object' ? value : { [id]: value },\n      }),\n  })),\n);\n","import React from 'react';\n\nexport const { Provider, Consumer } = React.createContext();\n","import React from 'react';\nimport { Consumer } from './loan-context';\n\nexport default Component => props => (\n  <Consumer>{({ loan }) => <Component {...props} loan={loan} />}</Consumer>\n);\n","// @flow\nimport Calc, { FinanceCalculator } from 'core/utils/FinanceCalculator';\nimport Calculator from 'core/utils/Calculator';\nimport { makeArgumentMapper } from 'core/utils/MiddlewareManager';\n\nexport const getProperty = ({ loan, structureId }) =>\n  Calculator.selectProperty({ loan, structureId });\n\nexport const getOffer = ({ structureId, loan }) =>\n  Calculator.selectOffer({ loan, structureId });\n\nexport const getAmortizationRateMapper = (data) => {\n  const {\n    structure: { wantedLoan, propertyWork },\n  } = data;\n  return {\n    borrowRatio:\n      wantedLoan / (Calculator.selectPropertyValue(data) + propertyWork),\n  };\n};\n\nexport const getInterestRates = ({ structureId, loan, offer }) => {\n  const { offerId } = Calculator.selectStructure({\n    loan,\n    structureId,\n  });\n  let interestRates;\n  if (offer) {\n    interestRates = offer;\n  } else if (offerId) {\n    interestRates = Calculator.selectOffer({\n      loan,\n      structureId,\n    });\n  } else {\n    interestRates = loan.currentInterestRates;\n  }\n\n  return interestRates;\n};\n\nconst argumentMappings = {\n  getIncomeRatio: data => ({\n    monthlyIncome: Calculator.getTotalIncome(data) / 12,\n    monthlyPayment: Calc.getTheoreticalMonthly({\n      propAndWork:\n        Calculator.selectPropertyValue(data) + data.structure.propertyWork,\n      loanValue: data.structure.wantedLoan,\n      amortizationRate: Calc.getAmortizationRate(data),\n    }).total,\n  }),\n\n  getBorrowRatio: data => ({\n    propertyValue:\n      Calculator.selectPropertyValue(data) + data.structure.propertyWork,\n    loan: data.structure.wantedLoan,\n  }),\n\n  getLoanFromBorrowRatio: (borrowRatio, data) => {\n    const propertyValue = Calculator.selectPropertyValue(data) + data.structure.propertyWork;\n    return { propertyValue, borrowRatio };\n  },\n\n  getAmortizationRateBase: getAmortizationRateMapper,\n\n  getInterestsWithTranches: (data) => {\n    const { loan, structureId } = data;\n    const { loanTranches } = Calculator.selectStructure({\n      loan,\n      structureId,\n    });\n\n    return { tranches: loanTranches, interestRates: getInterestRates(data) };\n  },\n\n  getMinCash: data => ({\n    propertyValue: Calculator.selectPropertyValue(data),\n    propertyWork: data.structure.propertyWork,\n    fees: data.structure.notaryFees,\n  }),\n\n  getFeesBase: data => ({\n    propertyValue: Calculator.selectPropertyValue(data),\n    propertyWork: data.structure.propertyWork,\n    fees: data.structure.notaryFees,\n  }),\n};\n\nconst argumentMapperMiddleware = makeArgumentMapper(argumentMappings);\n\nexport default new FinanceCalculator({\n  middlewareObject: argumentMapperMiddleware,\n});\n","// @flow\nimport React, { Component } from 'react';\n\ntype FinancingLabelProps = {\n  children: React.Node,\n  id?: string,\n};\ntype FinancingLabelState = {\n  height: number,\n};\n\nexport default class FinancingLabel extends Component<\n  FinancingLabelProps,\n  FinancingLabelState,\n> {\n  constructor(props) {\n    super(props);\n    this.state = { height: 0 };\n  }\n\n  componentDidMount() {\n    setTimeout(() => this.setState({ height: this.getLabelHeight() }), 0);\n  }\n\n  getLabelHeight = () => {\n    const { id } = this.props;\n    if (id) {\n      // Set height of label field to be as high as the rest of the lines\n      const nodes = document.querySelectorAll(`.${id}`);\n      const heights = Array.prototype.slice\n        .call(nodes)\n        .map(({ clientHeight }) => clientHeight);\n\n      // This complains if heights is an empty array, so add 0 by default\n      return Math.max(...heights, 0);\n    }\n    return 0;\n  };\n\n  render() {\n    const { height } = this.state;\n    const { children } = this.props;\n\n    return (\n      <span className=\"label\" style={{ height }}>\n        {children}\n      </span>\n    );\n  }\n}\n","// @flow\nimport React from 'react';\nimport cx from 'classnames';\n\nimport T from 'core/components/Translation';\nimport { makeFilterConfig } from './FinancingSection/financingSectionHelpers';\nimport FinancingLabel from './FinancingLabel';\nimport FinancingDataContainer from './containers/FinancingDataContainer';\n\ntype FinancingLabelsProps = {\n  config: Array<{ id: string, label: React.Node }>,\n  className?: string,\n  data: Object,\n};\n\nconst renderLabel = (configItem) => {\n  const { label, id } = configItem;\n  if (!label) {\n    return <T id={`Financing.${id}`} />;\n  }\n\n  if (typeof label === 'function') {\n    const Label = label;\n    return <Label {...configItem} />;\n  }\n\n  return label;\n};\n\nconst FinancingLabels = ({\n  config,\n  className,\n  ...data\n}: FinancingLabelsProps) => (\n  <div className={cx('financing-structures-labels', className)}>\n    {config.filter(makeFilterConfig(data)).map((configItem, index) => (\n      <FinancingLabel id={configItem.id} key={configItem.id || index}>\n        {renderLabel(configItem)}\n      </FinancingLabel>\n    ))}\n  </div>\n);\n\nexport default FinancingDataContainer(FinancingLabels);\n","// @flow\n/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport { mount } from 'core/utils/testHelpers/enzyme';\n\nimport PromotionLotSelector from '../PromotionLotSelector';\n// import Checkbox from ''\n\ndescribe('PromotionLotSelector', () => {\n  let props;\n  const component = () => mount(<PromotionLotSelector {...props} />);\n\n  beforeEach(() => {\n    props = {};\n  });\n\n  it('value is true if promotionOption exists', () => {\n    props.promotionLotId = 'a';\n    props.promotionOptions = [{ promotionLots: [{ _id: 'a' }] }];\n\n    expect(component()\n      .find('Checkbox')\n      .first()\n      .props().value).to.equal(true);\n  });\n\n  it('value is false if promotionOption does not exists', () => {\n    props.promotionLotId = 'a';\n    props.promotionOptions = [{ promotionLots: [{ _id: 'b' }] }];\n\n    expect(component()\n      .find('Checkbox')\n      .first()\n      .props().value).to.equal(false);\n  });\n});\n","// @flow\nimport React from 'react';\nimport { withProps, compose, withState } from 'recompose';\n\nimport { promotionOptionRemove, promotionOptionInsert } from 'core/api';\nimport Checkbox from '../../../Checkbox';\n\ntype PromotionLotSelectorProps = {};\n\nexport const PromotionLotSelector = ({\n  promotionLotIsSelected,\n  promotionLotId,\n  isLoading,\n  onChange,\n  disabled,\n}: PromotionLotSelectorProps) => (\n  <Checkbox\n    onChange={(event) => {\n      event.preventDefault();\n      event.stopPropagation();\n      onChange();\n    }}\n    value={promotionLotIsSelected}\n    id={promotionLotId}\n    disabled={isLoading || (!promotionLotIsSelected && disabled)}\n  />\n);\n\nexport default compose(\n  withState('isLoading', 'setLoading', false),\n  withProps(({ promotionLotId, promotionOptions, setLoading, loanId }) => {\n    const promotionOption = promotionOptions.find(({ promotionLots }) =>\n      promotionLots.find(({ _id }) => _id === promotionLotId));\n\n    return {\n      promotionLotIsSelected: !!promotionOption,\n      onChange: () => {\n        setLoading(true);\n        if (promotionOption) {\n          return promotionOptionRemove\n            .run({ promotionOptionId: promotionOption._id })\n            .finally(() => setLoading(false));\n        }\n\n        return promotionOptionInsert\n          .run({ promotionLotId, loanId })\n          .finally(() => setLoading(false));\n      },\n    };\n  }),\n)(PromotionLotSelector);\n","// @flow\n/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport SimpleSchema from 'simpl-schema';\nimport Button from '@material-ui/core/Button';\nimport TextField from 'uniforms-material/TextField';\n\nimport Loading from '../../../Loading';\nimport pollUntilReady from '../../../../utils/pollUntilReady';\nimport getMountedComponent from '../../../../utils/testHelpers/getMountedComponent';\n\nimport AutoForm from '../../AutoForm';\nimport CustomSelectField from '../../CustomSelectField';\nimport DateField from '../../../DateField';\nimport { CUSTOM_AUTOFIELD_TYPES } from '../../constants';\nimport { PercentField } from '../../../PercentInput';\nimport { CustomAutoField } from '../../AutoFormComponents';\n\nlet props;\nconst component = () => getMountedComponent({ Component: AutoForm, props });\n\nconst setInput = (name, value) => {\n  component()\n    .find(`[name=\"${name}\"]`)\n    .find('input')\n    .simulate('change', { target: { value } });\n};\n\ndescribe('AutoForm', () => {\n  beforeEach(() => {\n    getMountedComponent.reset();\n    props = { schema: new SimpleSchema({ text: String }) };\n  });\n\n  it('renders a form with a field and submit button', () => {\n    expect(component()\n      .find('form')\n      .exists()).to.equal(true);\n    expect(component()\n      .find(TextField)\n      .exists()).to.equal(true);\n    expect(component()\n      .find(Button)\n      .exists()).to.equal(true);\n  });\n\n  it('does not render fields with a false condition', () => {\n    props = {\n      schema: new SimpleSchema({\n        text: { type: String, condition: () => false },\n      }),\n    };\n    expect(component()\n      .find('form')\n      .exists()).to.equal(true);\n    expect(component()\n      .find(TextField)\n      .exists()).to.equal(false);\n    expect(component()\n      .find(Button)\n      .exists()).to.equal(true);\n  });\n\n  it('does not render fields based on changes to the model', () => {\n    props = {\n      schema: new SimpleSchema({\n        text: {\n          type: String,\n          condition: ({ stuff }) => stuff !== 'dude',\n        },\n        stuff: String,\n      }),\n      model: {},\n    };\n\n    expect(component().find(TextField).length).to.equal(2);\n\n    setInput('stuff', 'dud');\n\n    expect(component().find(TextField).length).to.equal(2);\n\n    setInput('stuff', 'dude');\n\n    expect(component().find(TextField).length).to.equal(1);\n  });\n\n  it('skips fields that are omitted', () => {\n    props = {\n      schema: new SimpleSchema({ text: String, stuff: String }),\n      omitFields: ['text'],\n    };\n\n    expect(component().find(TextField).length).to.equal(1);\n  });\n\n  it('filters the model and only submits the form values', () => {\n    props = {\n      schema: new SimpleSchema({\n        stuff: String,\n        arr: Array,\n        'arr.$': Object,\n        'arr.$.text': String,\n      }),\n      model: { stuff: 'yo', arr: [{ text: 'dude' }], hello: 'dawg' },\n      onSubmit: (values) => {\n        expect(values).to.deep.equal({ stuff: 'yo', arr: [{ text: 'dude' }] });\n      },\n    };\n\n    component()\n      .find('form')\n      .simulate('submit');\n  });\n\n  describe('Custom components', () => {\n    it('renders a select field if allowedValues is passed', () => {\n      props = {\n        schema: new SimpleSchema({\n          text: { type: String, allowedValues: ['yo'] },\n        }),\n      };\n\n      expect(component().find(CustomSelectField).length).to.equal(1);\n    });\n\n    it('renders a select field if customAllowedValues is passed', () => {\n      props = {\n        schema: new SimpleSchema({\n          text: { type: String, customAllowedValues: () => ['yo'] },\n        }),\n      };\n\n      expect(component().find(CustomSelectField).length).to.equal(1);\n    });\n\n    it('renders a date field if uniforms type is Date', () => {\n      props = {\n        schema: new SimpleSchema({\n          text: { type: Date, uniforms: { type: CUSTOM_AUTOFIELD_TYPES.DATE } },\n        }),\n      };\n\n      expect(component().find(DateField).length).to.equal(1);\n    });\n\n    it('renders a percent field if uniforms type is percent', () => {\n      props = {\n        schema: new SimpleSchema({\n          text: {\n            type: Number,\n            uniforms: { type: CUSTOM_AUTOFIELD_TYPES.PERCENT },\n          },\n        }),\n      };\n\n      expect(component().find(PercentField).length).to.equal(1);\n    });\n  });\n\n  describe('labels', () => {\n    it('removes the label if null is used', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: { type: String, uniforms: { label: 'Yo' } },\n        }),\n        autoFieldProps: { labels: { myText: null } },\n      };\n\n      expect(component().find('label').length).to.equal(0);\n    });\n\n    it('sets the label', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: { type: String, uniforms: { label: 'Yo' } },\n        }),\n        autoFieldProps: { labels: { myText: 'Yo' } },\n      };\n\n      expect(component()\n        .find('label')\n        .text()).to.include('Yo');\n    });\n\n    it('overrides the label if provided on the children', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: { type: String, uniforms: { label: 'Yo' } },\n        }),\n        autoFieldProps: { labels: { myText: 'Yo' } },\n        children: <CustomAutoField name=\"myText\" overrideLabel=\"Dude\" />,\n      };\n\n      expect(component()\n        .find('label')\n        .text()).to.include('Dude');\n    });\n\n    it('uses the label on the schema', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: { type: String, uniforms: { label: 'mah dude' } },\n        }),\n      };\n\n      expect(component()\n        .find('label')\n        .text()).to.include('mah dude');\n    });\n\n    it('sets a default label with Translation', () => {\n      props = {\n        schema: new SimpleSchema({ myText: { type: String } }),\n      };\n\n      expect(component()\n        .find('label')\n        .text()).to.include('Forms.myText');\n    });\n\n    it('does not set the label if one of them is null', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: { type: String, uniforms: { label: null } },\n        }),\n      };\n\n      expect(component().find('label').length).to.equal(0);\n    });\n\n    context('in nested fields', () => {\n      it('sets the right label on nested objects', () => {\n        props = {\n          schema: new SimpleSchema({\n            myText: Array,\n            'myText.$': Object,\n            'myText.$.stuff': String,\n          }),\n        };\n\n        component()\n          .find('button')\n          .at(0)\n          .simulate('click');\n\n        expect(component()\n          .find('label')\n          .text()).to.include('Forms.myText.stuff');\n      });\n    });\n  });\n\n  describe('placeholders', () => {\n    it('does not set a placeholder if placeholder is false on the autoform', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: { type: String },\n        }),\n        placeholder: false,\n      };\n\n      expect(component()\n        .find(AutoForm)\n        .prop('placeholder')).to.equal(false);\n\n      expect(component()\n        .find('input')\n        .prop('placeholder')).to.equal('');\n    });\n\n    it('sets the placeholder', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: { type: String, uniforms: { placeholder: 'Howdy' } },\n        }),\n        placeholder: true,\n      };\n\n      expect(component()\n        .find('input')\n        .prop('placeholder')).to.equal('p.ex: Howdy');\n    });\n\n    it('does not set the placeholder if null is used', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: { type: String, uniforms: { placeholder: null } },\n        }),\n        placeholder: true,\n      };\n\n      expect(component()\n        .find('input')\n        .prop('placeholder')).to.equal(null);\n    });\n\n    it('sets a default placeholder', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText: { type: String },\n        }),\n        placeholder: true,\n      };\n\n      expect(component()\n        .find('input')\n        .prop('placeholder')).to.include('Forms.myText.placeholder');\n    });\n\n    context('in nested fields', () => {\n      it('sets a placeholder for a list item field', () => {\n        props = {\n          schema: new SimpleSchema({\n            myText: { type: String, allowedValues: ['yo', 'dude'] },\n          }),\n          placeholder: true,\n        };\n\n        component()\n          .find(CustomSelectField)\n          .at(0)\n          .simulate('click');\n\n        component().update();\n\n        expect(component()\n          .find(CustomSelectField)\n          .prop('placeholder')).to.equal('Forms.myText.placeholder');\n      });\n\n      it('does not set a placeholder for a list item field', () => {\n        props = {\n          schema: new SimpleSchema({\n            myText: [String],\n          }),\n          placeholder: false,\n        };\n\n        component()\n          .find('button')\n          .at(0)\n          .simulate('click');\n\n        expect(component()\n          .find('input')\n          .prop('placeholder')).to.equal('');\n      });\n\n      context('sets the right placeholder on nested objects', () => {\n        it('when parent label is not null', () => {\n          props = {\n            schema: new SimpleSchema({\n              myText: Array,\n              'myText.$': Object,\n              'myText.$.stuff': String,\n            }),\n            placeholder: true,\n          };\n\n          component()\n            .find('button')\n            .at(0)\n            .simulate('click');\n\n          expect(component()\n            .find('input')\n            .prop('placeholder')).to.include('Forms.myText.stuff.placeholder');\n        });\n\n        it('when parent label is null', () => {\n          props = {\n            schema: new SimpleSchema({\n              myText: Array,\n              'myText.$': { type: Object, uniforms: { label: null } },\n              'myText.$.stuff': {\n                type: String,\n                uniforms: { placeholder: 'myPlaceholder' },\n              },\n            }),\n            placeholder: true,\n          };\n\n          component()\n            .find('button')\n            .at(0)\n            .simulate('click');\n\n          expect(component()\n            .find('input')\n            .prop('placeholder')).to.include('myPlaceholder');\n        });\n      });\n\n      it('skips placeholders on nested objects', () => {\n        props = {\n          schema: new SimpleSchema({\n            myText: Array,\n            'myText.$': Object,\n            'myText.$.stuff': String,\n          }),\n          placeholder: false,\n        };\n\n        component()\n          .find('button')\n          .at(0)\n          .simulate('click');\n\n        expect(component()\n          .find('input')\n          .prop('placeholder')).to.equal('');\n      });\n    });\n  });\n\n  describe('children', () => {\n    it('have access to conditional rendering', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText1: { type: String, defaultValue: 'yo' },\n          myText2: {\n            type: String,\n            condition: ({ myText1 }) => myText1 === 'dude',\n          },\n        }),\n        children: (\n          <>\n            <CustomAutoField name=\"myText1\" />\n            <CustomAutoField name=\"myText2\" />\n          </>\n        ),\n      };\n\n      expect(component().find(TextField).length).to.equal(1);\n\n      setInput('myText1', 'dude');\n\n      expect(component().find(TextField).length).to.equal(2);\n    });\n\n    it('have access to custom auto values', () => {\n      props = {\n        schema: new SimpleSchema({\n          myText1: { type: String, defaultValue: 'yo' },\n          myText2: {\n            type: String,\n            customAutoValue: ({ myText1 }) => `${myText1} dude`,\n          },\n        }),\n        children: (\n          <>\n            <CustomAutoField name=\"myText1\" />\n            <CustomAutoField name=\"myText2\" />\n          </>\n        ),\n      };\n\n      expect(component()\n        .find('[name=\"myText2\"]')\n        .find('input')\n        .prop('value')).to.equal('yo dude');\n\n      setInput('myText1', 'hello');\n\n      expect(component()\n        .find('[name=\"myText2\"]')\n        .find('input')\n        .prop('value')).to.equal('hello dude');\n    });\n\n    it('can render custom components', () => {\n      props = {\n        schema: new SimpleSchema({\n          percent: {\n            type: Number,\n            uniforms: { type: CUSTOM_AUTOFIELD_TYPES.PERCENT },\n          },\n          date: { type: Date, uniforms: { type: CUSTOM_AUTOFIELD_TYPES.DATE } },\n          select: { type: String, customAllowedValues: () => ['yo'] },\n        }),\n        children: (\n          <>\n            <CustomAutoField name=\"percent\" />\n            <CustomAutoField name=\"date\" />\n            <CustomAutoField name=\"select\" />\n          </>\n        ),\n      };\n\n      expect(component().find(PercentField).length).to.equal(1);\n      expect(component().find(DateField).length).to.equal(1);\n      expect(component().find(CustomSelectField).length).to.equal(1);\n    });\n  });\n\n  it('does not unmount components when updating the model, and loading only displays once', () => {\n    // Checking that the loading component only renders once is like\n    // checking that the component only mounted once, since loading only\n    // renders after mounting\n    props = {\n      schema: new SimpleSchema({\n        text: { type: String, uniforms: { label: 'Text' } },\n        select: {\n          type: String,\n          customAllowedValues: () => ['yo'],\n          uniforms: { label: 'Select' },\n        },\n      }),\n      placeholder: false,\n    };\n\n    expect(component().find(Loading).length).to.equal(1);\n\n    return pollUntilReady(() => {\n      component().update();\n      return component().find(Loading).length === 0;\n    }).then(() => {\n      // Loading only reappears when the component remounts\n      expect(component().find(Loading).length).to.equal(0);\n\n      setInput('text', 'some text');\n\n      expect(component().find(Loading).length).to.equal(0);\n    });\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport getMountedComponent from '../../../../utils/testHelpers/getMountedComponent';\n\nimport AutoFormLayout from '../../AutoFormLayout';\n\nconst AutoField = props => <span {...props} />;\nconst DemoComponent = props => <span {...props} />;\n\ndescribe('AutoFormLayout', () => {\n  let props;\n  const component = () =>\n    getMountedComponent({ Component: AutoFormLayout, props });\n\n  beforeEach(() => {\n    getMountedComponent.reset();\n    props = { AutoField, schemaKeys: ['field1', 'field2', 'field3'] };\n  });\n\n  it('renders fields in a different layout', () => {\n    props.layout = [\n      { className: 'div1', fields: ['field1'] },\n      { className: 'div2', fields: ['field2'] },\n    ];\n\n    expect(component().find('.div1').length).to.equal(1);\n    expect(component().find('.div2').length).to.equal(1);\n    expect(component().find('.div1 span[name=\"field1\"]').length).to.equal(1);\n    expect(component().find('.div2 span[name=\"field2\"]').length).to.equal(1);\n  });\n\n  it('renders custom components', () => {\n    props.layout = {\n      className: 'div1',\n      fields: ['field1'],\n      Component: DemoComponent,\n    };\n\n    expect(component().find(DemoComponent).length).to.equal(1);\n    expect(component()\n      .find(DemoComponent)\n      .prop('className')).to.equal('div1');\n    expect(component()\n      .find(DemoComponent)\n      .find('span[name=\"field1\"]').length).to.equal(1);\n  });\n\n  it('renders all fields when a star is used in the field name', () => {\n    props.layout = [{ className: 'div1', fields: ['field*'] }];\n    props.schemaKeys = ['field1', 'field2', 'field3'];\n\n    expect(component().find('.div1').length).to.equal(1);\n    expect(component().find('.div1 span[name=\"field1\"]').length).to.equal(1);\n    expect(component().find('.div1 span[name=\"field2\"]').length).to.equal(1);\n    expect(component().find('.div1 span[name=\"field3\"]').length).to.equal(1);\n  });\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\nimport SimpleSchema from 'simpl-schema';\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport AutoForm from '../../AutoForm';\nimport getMountedComponent from '../../../../utils/testHelpers/getMountedComponent';\nimport CustomSelectField from '../../CustomSelectField';\nimport pollUntilReady from '../../../../utils/pollUntilReady';\n\nlet props;\nconst component = () =>\n  getMountedComponent({\n    Component: AutoForm,\n    props,\n  });\n\nconst setInput = (name, value) => {\n  component()\n    .find(`[name=\"${name}\"]`)\n    .find('input')\n    .simulate('change', { target: { value } });\n};\n\ndescribe('CustomSelectField', () => {\n\n  beforeEach(() => {\n    getMountedComponent.reset();\n    props = {};\n  });\n\n  context('with allowed values', () => {\n    it('renders allowed values', () => {\n      props = {\n        schema: new SimpleSchema({\n          text: { type: String, allowedValues: ['yo', 'dude'] },\n        }),\n      };\n\n      expect(component()\n        .find(CustomSelectField)\n        .childAt(0)\n        .prop('values')).to.deep.equal(['yo', 'dude']);\n    });\n\n    it('renders the select field', () => {\n      const transform = value => `${value}-mec`;\n      props = {\n        schema: new SimpleSchema({\n          text: {\n            type: String,\n            allowedValues: ['yo', 'hola'],\n            uniforms: { transform, displayEmpty: false, placeholder: '' },\n          },\n        }),\n      };\n\n      const SelectField = component()\n        .find(CustomSelectField)\n        .at(0);\n\n      expect(SelectField).to.not.equal(undefined);\n      SelectField.find('[role=\"button\"]').simulate('click');\n\n      const items = component()\n        .find(CustomSelectField)\n        .find(MenuItem)\n        .find('li');\n\n      items.forEach((item) => {\n        expect(item.text()).to.equal(transform(item.prop('data-value')));\n      });\n    });\n  });\n  \n  context('with custom allowed values', () => {\n    it('renders the select field', () => {\n      const transform = value => `${value}-mec`;\n      props = {\n        schema: new SimpleSchema({\n          text: {\n            type: String,\n            customAllowedValues: ({ value }) => [`${value}1`, `${value}2`],\n            uniforms: { transform, placeholder: '', displayEmpty: false },\n          },\n          value: {\n            type: String,\n          },\n        }),\n      };\n\n      setInput('value', 'yo');\n\n      return pollUntilReady(() => {\n        component().update();\n        return (\n          component()\n            .find(CustomSelectField)\n            .at(0)\n            .find('[role=\"button\"]').length === 1\n        );\n      }).then(() => {\n        const SelectField = component()\n          .find(CustomSelectField)\n          .at(0)\n          .find('[role=\"button\"]');\n\n        expect(SelectField).to.not.equal(undefined);\n        SelectField.find('[role=\"button\"]').simulate('click');\n\n        const items = component()\n          .find(CustomSelectField)\n          .find(MenuItem)\n          .find('li');\n\n        expect(items.length).to.equal(2);\n\n        items.forEach((item) => {\n          expect(item.text()).to.equal(transform(item.prop('data-value')));\n        });\n      });\n    });\n\n    it('renders custom allowed values coming from a promise', (done) => {\n      props = {\n        schema: new SimpleSchema({\n          text: {\n            type: String,\n            customAllowedValues: () => Promise.resolve(['yo', 'dude']),\n          },\n        }),\n      };\n      component();\n\n      setTimeout(() => {\n        component().update();\n        expect(component()\n          .find(CustomSelectField)\n          .childAt(0)\n          .prop('values')).to.deep.equal(['yo', 'dude']);\n        done();\n      }, 0);\n    });\n\n    it('renders custom allowed values coming from a function', (done) => {\n      props = {\n        schema: new SimpleSchema({\n          text: {\n            type: String,\n            customAllowedValues: () => ['yo', 'dude'],\n          },\n        }),\n      };\n      component();\n\n      setTimeout(() => {\n        component().update();\n        expect(component()\n          .find(CustomSelectField)\n          .childAt(0)\n          .prop('values')).to.deep.equal(['yo', 'dude']);\n        done();\n      }, 0);\n    });\n\n    it('fetches allowed values based on the model', (done) => {\n      props = {\n        schema: new SimpleSchema({\n          text: {\n            type: String,\n            customAllowedValues: ({ text2 }) => [text2],\n          },\n          text2: String,\n        }),\n      };\n      component();\n\n      setTimeout(() => {\n        component().update();\n        expect(component()\n          .find(CustomSelectField)\n          .childAt(0)\n          .prop('values')).to.deep.equal(['']);\n\n        setInput('text2', 'dude');\n\n        setTimeout(() => {\n          component().update();\n          expect(component()\n            .find(CustomSelectField)\n            .childAt(0)\n            .prop('values')).to.deep.equal(['dude']);\n          done();\n        }, 0);\n      }, 0);\n    });\n  });\n});\n","// @flow\nimport React, { PureComponent } from 'react';\nimport AutoForm from 'uniforms-material/AutoForm';\nimport pickBy from 'lodash/pickBy';\nimport pick from 'lodash/pick';\n\nimport { withProps } from 'recompose';\nimport { makeCustomAutoField, CustomAutoField } from './AutoFormComponents';\nimport CustomAutoFields from './CustomAutoFields';\nimport CustomSubmitField from './CustomSubmitField';\n\ntype CustomAutoFormProps = {\n  autoFieldProps?: Object,\n  children?: React.Node,\n  layout?: any,\n  model: Object,\n  omitFields?: Array<String>,\n  placeholder?: Boolean,\n  submitFieldProps?: Object,\n  submitting?: Boolean,\n};\n\nclass CustomAutoForm extends PureComponent<CustomAutoFormProps> {\n  constructor(props) {\n    super(props);\n    const { autoFieldProps } = props;\n\n    if (autoFieldProps) {\n      this.autoField = makeCustomAutoField(autoFieldProps);\n    } else {\n      this.autoField = CustomAutoField;\n    }\n  }\n\n  render() {\n    const {\n      children,\n      model,\n      omitFields,\n      placeholder = true,\n      submitFieldProps,\n      layout,\n      ...props\n    } = this.props;\n\n    return (\n      <AutoForm\n        showInlineError\n        model={pickBy(model, (_, key) => !key.startsWith('$'))}\n        placeholder={placeholder}\n        className=\"autoform\"\n        {...props}\n      >\n        {children || (\n          <>\n            <CustomAutoFields\n              omitFields={omitFields}\n              autoField={this.autoField}\n            />\n            <CustomSubmitField {...submitFieldProps} />\n          </>\n        )}\n      </AutoForm>\n    );\n  }\n}\n\nexport default withProps(({ onSubmit, schema }) => {\n  const schemaKeys = schema._schemaKeys;\n  return { onSubmit: values => onSubmit(pick(values, [...schemaKeys, '_id'])) };\n})(CustomAutoForm);\n","// @flow\nimport React, { useState } from 'react';\nimport { intlShape } from 'react-intl';\nimport { compose, getContext } from 'recompose';\nimport connectField from 'uniforms/connectField';\nimport nothing from 'uniforms/nothing';\nimport AutoField from 'uniforms-material/AutoField';\nimport BoolField from 'uniforms-material/BoolField';\n\nimport DateField from '../DateField';\nimport { PercentField } from '../PercentInput';\nimport {\n  CUSTOM_AUTOFIELD_TYPES,\n  COMPONENT_TYPES,\n  FIELDS_TO_IGNORE,\n} from './constants';\nimport CustomSelectField from './CustomSelectField';\nimport { OptimizedListField } from './CustomListField';\nimport CustomNestField from './CustomNestField';\nimport { getLabel, getPlaceholder } from './autoFormHelpers';\nimport MoneyInput from '../MoneyInput';\nimport HtmlPreview from '../HtmlPreview';\nimport { ignoreProps } from '../../containers/updateForProps';\n\nconst container = ignoreProps(FIELDS_TO_IGNORE);\n\nconst OptimizedMoneyInput = container(MoneyInput);\nconst OptimizedDateField = container(DateField);\nconst OptimizedPercentField = container(PercentField);\nconst OptimizedBoolField = container(BoolField);\n\nconst determineComponentFromProps = ({\n  allowedValues,\n  customAllowedValues,\n  field: { uniforms },\n  fieldType,\n}) => {\n  if (allowedValues || customAllowedValues) {\n    return {\n      Component: CustomSelectField,\n      type: COMPONENT_TYPES.SELECT,\n      props: { variant: 'outlined' },\n    };\n  }\n\n  if (uniforms && uniforms.type === CUSTOM_AUTOFIELD_TYPES.DATE) {\n    return {\n      Component: OptimizedDateField,\n      type: COMPONENT_TYPES.DATE,\n      props: { placeholder: null, variant: 'outlined' },\n    };\n  }\n\n  if (uniforms && uniforms.type === CUSTOM_AUTOFIELD_TYPES.PERCENT) {\n    return { Component: OptimizedPercentField, type: COMPONENT_TYPES.PERCENT };\n  }\n\n  if (uniforms && uniforms.type === CUSTOM_AUTOFIELD_TYPES.MONEY) {\n    return {\n      Component: OptimizedMoneyInput,\n      type: COMPONENT_TYPES.MONEY,\n      props: { margin: 'normal', variant: 'outlined' },\n    };\n  }\n\n  if (uniforms && uniforms.type === CUSTOM_AUTOFIELD_TYPES.MONEY_DECIMAL) {\n    return {\n      Component: OptimizedMoneyInput,\n      type: COMPONENT_TYPES.MONEY,\n      props: { margin: 'normal', decimal: true, variant: 'outlined' },\n    };\n  }\n\n  if (uniforms && uniforms.type === CUSTOM_AUTOFIELD_TYPES.HTML_PREVIEW) {\n    return {\n      Component: HtmlPreview,\n      type: COMPONENT_TYPES.HTML_PREVIEW,\n      props: { placeholder: null },\n    };\n  }\n\n  if (fieldType === Array) {\n    return { Component: OptimizedListField, type: COMPONENT_TYPES.ARRAY };\n  }\n\n  if (fieldType === Object) {\n    return { Component: CustomNestField, type: COMPONENT_TYPES.ARRAY };\n  }\n\n  if (fieldType === Boolean) {\n    return { Component: OptimizedBoolField };\n  }\n\n  if (uniforms && uniforms.render) {\n    return {\n      Component: uniforms.render,\n      type: COMPONENT_TYPES.RENDER,\n      props: { placeholder: null },\n    };\n  }\n\n  return { Component: false, type: null, props: { variant: 'outlined' } };\n};\n\nexport const makeCustomAutoField = ({ labels = {}, intlPrefix } = {}) => {\n  const CustomAutoField = (\n    props,\n    {\n      uniforms: {\n        schema,\n        model,\n        state: { submitting },\n      },\n    },\n  ) => {\n    const { condition, customAllowedValues, customAutoValue } = schema.getField(props.name);\n    const { allowedValues, field, fieldType, margin = 'normal' } = props;\n    let [{ Component, type, props: additionalProps = {} }] = useState(determineComponentFromProps({\n      allowedValues,\n      customAllowedValues,\n      field,\n      fieldType,\n    }));\n\n    Component = Component || AutoField;\n\n    let autoValue;\n\n    if (typeof customAutoValue === 'function') {\n      autoValue = customAutoValue(model);\n    }\n\n    // Don't recalculate these\n    const [label] = useState(getLabel({\n      ...props,\n      ...additionalProps,\n      intlPrefix,\n      label: labels[props.name],\n    }));\n    const [placeholder] = useState(getPlaceholder({ ...props, ...additionalProps, intlPrefix, type }));\n\n    if (\n      typeof condition === 'function'\n      && !condition(model, props.parent && Number(props.parent.name.slice(-1)))\n    ) {\n      return nothing;\n    }\n\n    return (\n      <Component\n        {...additionalProps}\n        {...props}\n        {...(autoValue ? { value: autoValue } : {})}\n        model={model}\n        submitting={submitting}\n        customAllowedValues={customAllowedValues}\n        label={label}\n        placeholder={placeholder}\n        InputLabelProps={{ shrink: true }}\n        margin={margin}\n      />\n    );\n  };\n\n  CustomAutoField.contextTypes = AutoField.contextTypes;\n\n  return compose(\n    getContext({ intl: intlShape, ...AutoField.contextTypes }),\n    connectField,\n  )(CustomAutoField, { includeInChain: false, includeParent: true });\n};\n\nexport const CustomAutoField = makeCustomAutoField({});\n","// @flow\nimport React, { Component } from 'react';\nimport { compose, withProps, withState } from 'recompose';\nimport pick from 'lodash/pick';\nimport MuiDialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport Button from '../Button';\nimport AutoForm from './AutoForm';\nimport { makeCustomAutoField, CustomAutoField } from './AutoFormComponents';\nimport AutoFormDialogContent from './AutoFormDialogContent';\nimport AutoFormDialogActions from './AutoFormDialogActions';\n\ntype AutoFormDialogProps = {\n  schema: Object,\n  model?: Object,\n  onSubmit: Function,\n  buttonProps: Object,\n  setOpen: Function,\n  description?: React.Node,\n  title?: React.Node,\n  important?: Boolean,\n  autoFieldProps?: Object,\n  opened: Boolean,\n  renderAdditionalActions?: Function,\n  children?: React.Node,\n  triggerComponent?: Function,\n  emptyDialog?: Boolean,\n  noButton?: Boolean,\n};\n\nconst getAutoFormProps = props =>\n  pick(props, [\n    'model',\n    'schema',\n    'onSubmit',\n    'placeholder',\n    'showInlineError',\n  ]);\n\nexport class AutoFormDialog extends Component<AutoFormDialogProps> {\n  constructor(props) {\n    super(props);\n    const { autoFieldProps } = props;\n\n    if (autoFieldProps) {\n      this.autoField = makeCustomAutoField(autoFieldProps);\n    } else {\n      this.autoField = CustomAutoField;\n    }\n  }\n\n  render() {\n    const {\n      autoFieldProps,\n      buttonProps,\n      children,\n      description,\n      emptyDialog,\n      important,\n      noButton,\n      onSubmit,\n      opened,\n      renderAdditionalActions,\n      setOpen,\n      title,\n      triggerComponent,\n      disableActions = false,\n      layout,\n      maxWidth = 'sm',\n      ...otherProps\n    } = this.props;\n    const schemaKeys = this.props.schema._schemaKeys;\n\n    const handleOpen = (event) => {\n      event.stopPropagation();\n      event.preventDefault();\n      setOpen(true);\n    };\n    const handleClose = (event) => {\n      event.stopPropagation();\n      event.preventDefault();\n      setOpen(false);\n    };\n\n    return (\n      <>\n        {triggerComponent\n          ? triggerComponent(handleOpen)\n          : !noButton && <Button {...buttonProps} onClick={handleOpen} />}\n        <MuiDialog\n          disableBackdropClick={important}\n          disableEscapeKeyDown={important}\n          onClose={handleClose}\n          className=\"autoform-dialog\"\n          maxWidth={maxWidth}\n          fullWidth\n          onClick={(e) => {\n            // Clicking on the dialog should not trigger a table row below it..\n            e.stopPropagation();\n          }}\n          {...otherProps}\n        >\n          {title && <DialogTitle>{title}</DialogTitle>}\n          <AutoForm {...getAutoFormProps(this.props)}>\n            <AutoFormDialogContent\n              autoField={this.autoField}\n              description={description}\n              emptyDialog={emptyDialog}\n              handleClose={handleClose}\n              onSubmit={onSubmit}\n              layout={layout}\n              schemaKeys={schemaKeys}\n            >\n              {children}\n            </AutoFormDialogContent>\n            <AutoFormDialogActions\n              handleClose={handleClose}\n              onSubmit={onSubmit}\n              renderAdditionalActions={renderAdditionalActions}\n              disableActions={disableActions}\n            />\n          </AutoForm>\n        </MuiDialog>\n      </>\n    );\n  }\n}\n\nexport default compose(\n  withState('open', 'setOpen', false),\n  withProps(({ onSubmit, setOpen, onSuccessMessage }) => ({\n    onSubmit: (...args) =>\n      onSubmit(...args).then(() => {\n        setOpen(false);\n        import('../../utils/message').then(({ default: message }) => {\n          message.success(\n            onSuccessMessage\n              ? typeof onSuccessMessage === 'function'\n                ? onSuccessMessage(...args)\n                : onSuccessMessage\n              : \"C'est dans la boite !\",\n            5,\n          );\n        });\n      }),\n  })),\n)(AutoFormDialog);\n","// @flow\nimport React from 'react';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport PropTypes from 'prop-types';\nimport { withState } from 'recompose';\n\nimport AutoFormDialogChildren from './AutoFormDialogChildren';\nimport Button from '../Button';\nimport CustomSubmitField from './CustomSubmitField';\nimport T from '../Translation';\n\ntype AutoFormDialogActionsProps = {\n  handleClose: Function,\n  onSubmit: Function,\n  renderAdditionalActions?: boolean,\n  disableActions: boolean,\n  setDisableActions: Function,\n};\n\nconst AutoFormDialogActions = (\n  {\n    handleClose,\n    onSubmit,\n    renderAdditionalActions,\n    disableActions,\n    setDisableActions,\n  }: AutoFormDialogActionsProps,\n  {\n    uniforms: {\n      state: { submitting },\n    },\n  },\n) => (\n  <DialogActions>\n    <AutoFormDialogChildren\n      renderFunc={() => (\n        <Button onClick={handleClose} disabled={submitting || disableActions}>\n          <T id=\"general.cancel\" />\n        </Button>\n      )}\n    />\n\n    {renderAdditionalActions && (\n      <AutoFormDialogChildren\n        renderFunc={renderAdditionalActions}\n        closeDialog={handleClose}\n        onSubmit={onSubmit}\n        setDisableActions={setDisableActions}\n        disabled={submitting || disableActions}\n      />\n    )}\n    <CustomSubmitField\n      setDisableActions={setDisableActions}\n      disableActions={disableActions}\n    />\n  </DialogActions>\n);\n\nAutoFormDialogActions.contextTypes = {\n  uniforms: PropTypes.shape({\n    state: PropTypes.shape({\n      submitting: PropTypes.bool.isRequired,\n    }).isRequired,\n  }),\n};\n\nexport default withState(\n  'disableActions',\n  'setDisableActions',\n  ({ disableActions }) => !!disableActions,\n)(AutoFormDialogActions);\n","import PropTypes from 'prop-types';\n\nconst AutoFormDialogChildren = (\n  { renderFunc, ...props },\n  {\n    uniforms: {\n      state: { submitting },\n    },\n  },\n) => renderFunc({ submitting, ...props });\n\nAutoFormDialogChildren.contextTypes = {\n  uniforms: PropTypes.shape({\n    state: PropTypes.shape({\n      submitting: PropTypes.bool.isRequired,\n    }).isRequired,\n  }).isRequired,\n};\n\nexport default AutoFormDialogChildren;\n","// @flow\nimport React from 'react';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport ErrorsField from 'uniforms-material/ErrorsField';\n\nimport CustomAutoFields from './CustomAutoFields';\nimport AutoFormDialogChildren from './AutoFormDialogChildren';\nimport AutoFormLayout from './AutoFormLayout';\n\ntype AutoFormDialogContentProps = {\n  autoField?: React.Node,\n  children?: React.Node,\n  description?: React.Node,\n  emptyDialog?: Boolean,\n  handleClose: Function,\n  layout?: any,\n  onSubmit: Function,\n  schemaKeys: Array,\n};\n\nconst AutoFormDialogContent = ({\n  description,\n  emptyDialog,\n  autoField,\n  children,\n  handleClose,\n  onSubmit,\n  layout,\n  schemaKeys,\n}: AutoFormDialogContentProps) => (\n  <DialogContent>\n    {description && (\n      <DialogContentText style={{ marginBottom: 32 }}>\n        {description}\n      </DialogContentText>\n    )}\n\n    {!emptyDialog && !layout && (\n      <CustomAutoFields autoField={autoField} automaticFocus />\n    )}\n\n    {!emptyDialog && layout && (\n      <AutoFormLayout\n        AutoField={autoField}\n        layout={layout}\n        schemaKeys={schemaKeys}\n        automaticFocus\n      />\n    )}\n\n    <ErrorsField />\n\n    {children && (\n      <AutoFormDialogChildren\n        renderFunc={children}\n        closeDialog={handleClose}\n        onSubmit={onSubmit}\n      />\n    )}\n  </DialogContent>\n);\n\nexport default AutoFormDialogContent;\n","// @flow\nimport React from 'react';\n\ntype AutoFormLayoutProps = {};\n\nconst renderLayout = ({ layout, renderLayoutItem, renderField, AutoField }) => {\n  if (!layout) {\n    return null;\n  }\n\n  if (typeof layout === 'string') {\n    return renderField(layout, AutoField);\n  }\n\n  if (Array.isArray(layout)) {\n    return layout.map(renderLayoutItem);\n  }\n\n  return renderLayoutItem(layout);\n};\n\nconst AutoFormLayout = ({\n  AutoField,\n  layout,\n  schemaKeys,\n  automaticFocus,\n}: AutoFormLayoutProps) => {\n  let fieldCount = 0;\n  const renderField = (field) => {\n    if (field[field.length - 1] === '*') {\n      return schemaKeys\n        .filter(key => key.startsWith(field.slice(0, -1)))\n        .map(matchedField => renderField(matchedField, AutoField));\n    }\n\n    if (!schemaKeys.includes(field)) {\n      return null;\n    }\n\n    return (\n      <AutoField\n        name={field}\n        key={field}\n        autoFocus={automaticFocus && fieldCount++ === 0}\n      />\n    );\n  };\n\n  const renderLayoutItem = (item) => {\n    if (typeof item === 'string') {\n      return renderField(item, AutoField);\n    }\n\n    const {\n      fields = [],\n      layout: subLayout,\n      Component = 'div',\n      ...props\n    } = item;\n\n    return (\n      <Component {...props}>\n        {fields.map(field => renderField(field, AutoField))}\n        {subLayout\n          ? renderLayout({\n            layout: subLayout,\n            renderLayoutItem,\n            renderField,\n            AutoField,\n          })\n          : null}\n      </Component>\n    );\n  };\n\n  return renderLayout({ layout, renderLayoutItem, renderField, AutoField });\n};\n\nexport default AutoFormLayout;\n","import { createElement } from 'react';\nimport PropTypes from 'prop-types';\n\nimport AutoField from 'uniforms-material/AutoField';\n\nconst CustomAutoFields = (\n  { autoField, element, fields, omitFields, automaticFocus, ...props },\n  { uniforms: { schema } },\n) =>\n  createElement(\n    element,\n    { key: 'custom-autofields', className: 'autofields', ...props },\n    (fields || schema.getSubfields())\n      .filter(field => omitFields.indexOf(field) === -1)\n      .map((field, index) =>\n        createElement(autoField, {\n          key: field,\n          name: field,\n          autoFocus: automaticFocus && index === 0,\n        })),\n  );\n\nCustomAutoFields.contextTypes = AutoField.contextTypes;\n\nCustomAutoFields.propTypes = {\n  autoField: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  element: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n  fields: PropTypes.arrayOf(PropTypes.string),\n  omitFields: PropTypes.arrayOf(PropTypes.string),\n};\n\nCustomAutoFields.defaultProps = {\n  autoField: AutoField,\n  element: 'div',\n  omitFields: [],\n};\n\nexport default CustomAutoFields;\n","// @flow\nimport React from 'react';\nimport ListAddField from 'uniforms-material/ListAddField';\n\nimport { iconMap as IconMap } from '../Icon/Icon';\n\ntype CustomListAddFieldProps = {};\n\nconst CustomListAddField = (props: CustomListAddFieldProps) => (\n  <ListAddField\n    color=\"primary\"\n    className=\"list-add-field\"\n    size=\"small\"\n    {...props}\n    icon={<IconMap.add />}\n  />\n);\n\nexport default CustomListAddField;\n","import ListMaterial from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport React, { Children } from 'react';\nimport connectField from 'uniforms/connectField';\nimport filterDOMProps from 'uniforms/filterDOMProps';\nimport joinName from 'uniforms/joinName';\n\nimport { shouldUpdate } from 'recompose';\nimport CustomListAddField from './CustomListAddField';\nimport ListItemField from './CustomListItemField';\nimport { FIELDS_TO_IGNORE } from './constants';\n\nconst List = ({\n  addIcon,\n  children,\n  dense,\n  initialCount,\n  itemProps,\n  label,\n  name,\n  value,\n  ...props\n}) => (\n  <div>\n    <ListMaterial\n      key=\"list\"\n      dense={dense}\n      subheader={\n        label ? <ListSubheader disableSticky>{label}</ListSubheader> : undefined\n      }\n      {...filterDOMProps(props)}\n    >\n      {children\n        ? value.map((item, index) =>\n          Children.map(children, child =>\n            React.cloneElement(child, {\n              key: index,\n              label: null,\n              name: joinName(\n                name,\n                child.props.name && child.props.name.replace('$', index),\n              ),\n            })))\n        : value.map((item, index) => (\n          <ListItemField\n            key={index}\n            label={null}\n            name={joinName(name, index)}\n            {...itemProps}\n          />\n        ))}\n    </ListMaterial>\n    <CustomListAddField\n      key=\"listAddField\"\n      name={`${name}.$`}\n      initialCount={initialCount}\n    />\n  </div>\n);\n\nList.defaultProps = {\n  dense: true,\n};\n\nconst CustomListField = connectField(List, {\n  ensureValue: false,\n  includeInChain: false,\n});\n\nexport const OptimizedListField = shouldUpdate((props, nextProps) => {\n  let update = false;\n\n  Object.keys(nextProps)\n    .filter(propName => ![...FIELDS_TO_IGNORE, 'value'].includes(propName))\n    .some((propName) => {\n      const prop = nextProps[propName];\n\n      if (prop !== props[propName]) {\n        update = true;\n        return true;\n      }\n\n      return false;\n    });\n\n  if (JSON.stringify(props.value) !== JSON.stringify(nextProps.value)) {\n    // Add an exception for list value, as it is an array,\n    // it always updates because [] !== []\n    update = true;\n  }\n\n  return update;\n})(CustomListField);\n\nexport default CustomListField;\n","import ListItemMaterial from '@material-ui/core/ListItem';\nimport React, { Children } from 'react';\nimport connectField from 'uniforms/connectField';\nimport joinName from 'uniforms/joinName';\n\nimport ListDelField from 'uniforms-material/ListDelField';\nimport { CustomAutoField } from './AutoFormComponents';\nimport { iconMap as IconMap } from '../Icon/Icon';\n\nconst ListItem = ({ dense, divider, disableGutters, removeIcon, ...props }) => (\n  <ListItemMaterial\n    dense={dense}\n    divider={divider}\n    disableGutters={disableGutters}\n  >\n    {props.children ? (\n      Children.map(props.children, child =>\n        React.cloneElement(child, {\n          name: joinName(props.name, child.props.name),\n          label: null,\n        }))\n    ) : (\n      <CustomAutoField isListField {...props} />\n    )}\n    <ListDelField\n      className=\"list-del-field\"\n      name={props.name}\n      icon={<IconMap.remove />}\n      size=\"small\"\n    />\n  </ListItemMaterial>\n);\n\nListItem.defaultProps = {\n  dense: true,\n};\n\nexport default connectField(ListItem, {\n  includeInChain: false,\n  includeParent: true,\n});\n","import FormLabel from '@material-ui/core/FormLabel';\nimport React from 'react';\nimport connectField from 'uniforms/connectField';\nimport injectName from 'uniforms/injectName';\nimport joinName from 'uniforms/joinName';\nimport wrapField from 'uniforms-material/wrapField';\n\nimport { CustomAutoField } from './AutoFormComponents';\n\nconst Nest = ({ children, fields, itemProps, label, name, ...props }) =>\n  wrapField(\n    { ...props, component: undefined },\n    label && <FormLabel component=\"legend\">{label}</FormLabel>,\n    children\n      ? injectName(name, children)\n      : fields.map(key => (\n        <CustomAutoField\n          key={key}\n          name={joinName(name, key)}\n          {...itemProps}\n        />\n      )),\n  );\n\nNest.defaultProps = {\n  fullWidth: true,\n  margin: 'none',\n};\n\nexport default connectField(Nest, {\n  ensureValue: false,\n  includeInChain: false,\n  includeParent: true,\n});\n","// @flow\nimport React from 'react';\nimport SelectField from 'uniforms-material/SelectField';\n\nimport { compose } from 'recompose';\nimport CustomSelectFieldContainer from './CustomSelectFieldContainer';\nimport { ignoreProps } from '../../containers/updateForProps';\n\ntype CustomSelectFieldProps = {\n  transform: Function,\n  allowedValues: Array,\n  customAllowedValues: Function,\n  model: Object,\n};\n\nconst CustomSelectField = ({\n  transform,\n  values = [],\n  renderValue,\n  ...props\n}: CustomSelectFieldProps) => (\n  <SelectField\n    {...props}\n    allowedValues={values}\n    transform={transform}\n    renderValue={renderValue}\n    labelProps={{ shrink: true }}\n  />\n);\n\nexport default compose(\n  CustomSelectFieldContainer,\n  React.memo,\n  ignoreProps(['label', 'InputLabelProps', 'onChange', 'changedMap']),\n)(CustomSelectField);\n","import React, { PureComponent } from 'react';\n\nimport T from '../Translation';\nimport Chip from '../Material/Chip';\nimport Loading from '../Loading';\n\nexport default (Component) => {\n  class CustomSelectFieldContainer extends PureComponent {\n    constructor(props) {\n      super(props);\n      this.state = { values: props.allowedValues, data: null, error: null };\n    }\n\n    componentDidMount() {\n      this.getAllowedValues(this.props);\n    }\n\n    componentWillReceiveProps(nextProps) {\n      const { model: nextModel } = nextProps;\n      const { model } = this.props;\n\n      if (model !== nextModel) {\n        this.getAllowedValues(nextProps);\n      }\n    }\n\n    getAllowedValues = (props) => {\n      const { customAllowedValues, model, parent } = props;\n      const { values } = this.state;\n\n      if (customAllowedValues) {\n        this.setState({ loading: !values || !values.length });\n      }\n\n      if (customAllowedValues && typeof customAllowedValues === 'function') {\n        Promise.resolve()\n          .then(() =>\n            customAllowedValues(model, parent && Number(parent.name.slice(-1))))\n          .then(result => this.setState({ values: result }))\n          .finally(() => this.setState({ loading: false }));\n      } else if (\n        customAllowedValues\n        && typeof customAllowedValues === 'object'\n      ) {\n        const { query, params = () => ({}), allowNull } = customAllowedValues;\n\n        query.clone(params(model)).fetch((error, data) => {\n          if (error) {\n            return this.setState({ error });\n          }\n\n          const ids = data.map(({ _id }) => _id);\n\n          this.setState({\n            values: allowNull ? [null, ...ids] : ids,\n            data: allowNull ? [null, ...data] : data,\n            error: null,\n            loading: false,\n          });\n        });\n      }\n    };\n\n    formatOption = (option) => {\n      const { allowedValuesIntlId, intlId, name } = this.props;\n      return (\n        <T id={`Forms.${allowedValuesIntlId || intlId || name}.${option}`} />\n      );\n    };\n\n    renderValue = (value) => {\n      const transform = this.makeTransform();\n      const { placeholder } = this.props;\n\n      if (!value) {\n        return placeholder;\n      }\n\n      if (Array.isArray(value)) {\n        if (value.length === 0) {\n          return placeholder;\n        }\n        return value.map(val => (\n          <Chip\n            key={val}\n            label={transform ? transform(val) : this.formatOption(val)}\n            style={{ marginRight: 4 }}\n          />\n        ));\n      }\n\n      if (transform) {\n        return transform(value);\n      }\n\n      return this.formatOption(value);\n    };\n\n    makeTransform = () => {\n      const { transform } = this.props;\n      const { data } = this.state;\n      if (data) {\n        return (value) => {\n          if (!value) {\n            // If the value is falsy, just transform it\n            return transform(value);\n          }\n          return transform(data.find(item => (item && item._id) === value));\n        };\n      }\n      return transform;\n    };\n\n    render() {\n      const { values, error, loading } = this.state;\n      const {\n        placeholder,\n        displayEmpty,\n        model,\n        uniforms,\n        field,\n        fields,\n        ...rest\n      } = this.props;\n\n      if (error) {\n        return <span className=\"error\">{error.message || error.reason}</span>;\n      }\n\n      if (loading) {\n        return <Loading small />;\n      }\n\n      return (\n        <Component\n          {...rest}\n          placeholder={displayEmpty ? placeholder : ''}\n          values={values}\n          formatOption={this.formatOption}\n          renderValue={this.renderValue}\n          transform={this.makeTransform() || this.formatOption}\n        />\n      );\n    }\n  }\n\n  CustomSelectFieldContainer.defaultProps = {\n    displayEmpty: true,\n  };\n\n  return CustomSelectFieldContainer;\n};\n","import React from 'react';\nimport filterDOMProps from 'uniforms/filterDOMProps';\nimport PropTypes from 'prop-types';\n\nimport Button from '../Button';\nimport T from '../Translation';\n\nconst shouldDisableButton = ({\n  disableActions,\n  error,\n  state: { submitting, validating, disabled },\n}) => !!(disableActions || error || disabled || submitting || validating);\n\nconst CustomSubmitField = (\n  {\n    children,\n    disableActions,\n    inputRef,\n    label,\n    value,\n    setDisableActions,\n    primary = true,\n    raised = true,\n    secondary,\n    ...props\n  },\n  { uniforms: { state, error } },\n) => (\n  <Button\n    disabled={shouldDisableButton({\n      disableActions,\n      error,\n      state,\n      setDisableActions,\n    })}\n    ref={inputRef}\n    type=\"submit\"\n    value={value}\n    loading={state.submitting}\n    primary={!secondary && primary}\n    raised={raised}\n    secondary={secondary}\n    label={label || <T id=\"general.ok\" />}\n    onClick={(e) => {\n      // Make sure the target type is event, even if the label of the button\n      // was clicked. This is useful in PropertyForm and DashboardRecapProperty\n      e.target.type = 'submit';\n    }}\n    {...filterDOMProps(props)}\n  >\n    {children}\n  </Button>\n);\n\nCustomSubmitField.contextTypes = {\n  uniforms: PropTypes.shape({\n    error: PropTypes.any,\n    state: PropTypes.shape({\n      submitting: PropTypes.bool.isRequired,\n      disabled: PropTypes.bool.isRequired,\n      validating: PropTypes.bool.isRequired,\n    }).isRequired,\n  }),\n};\n\nCustomSubmitField.defaultProps = { variant: 'contained' };\n\nexport default CustomSubmitField;\n","import React from 'react';\nimport TextField from 'uniforms-material/TextField';\n\nexport default props => <TextField variant=\"outlined\" {...props} />;\n","import React from 'react';\n\nimport T from '../Translation';\nimport { COMPONENT_TYPES } from './constants';\n\nconst formatStringId = ({ intlId, name, intlPrefix, parent }) => {\n  const start = `${intlPrefix || 'Forms'}.`;\n  let end = name;\n\n  if (parent) {\n    const nameWithoutDots = name.replace(/\\.\\d+$/g, '');\n    const nameWithoutDot2 = nameWithoutDots.replace(/\\.\\d+\\./g, '.');\n    end = nameWithoutDot2;\n  }\n\n  if (intlId) {\n    end = intlId;\n  }\n\n  return start + end;\n};\n\nconst flowProps = arr =>\n  arr.reduce((val, i) => {\n    if (val === null) {\n      return null;\n    }\n    if (val) {\n      return val;\n    }\n\n    return i;\n  }, '');\n\nconst oneIsNull = arr => arr.some(i => i === null);\n\nexport const getLabel = ({\n  name,\n  field: { uniforms },\n  overrideLabel,\n  intlId,\n  intlPrefix,\n  label,\n  isListField,\n  parent,\n}) => {\n  if (label === null) {\n    return null;\n  }\n\n  if (isListField) {\n    return null;\n  }\n\n  return flowProps([\n    overrideLabel,\n    label,\n    uniforms && uniforms.label,\n    <T id={formatStringId({ intlPrefix, intlId, name, parent })} />,\n  ]);\n};\n\nconst placeholdersAreEnabled = ({ placeholder, parent }) => {\n  if (parent) {\n    return parent.placeholder !== '';\n  }\n\n  return placeholder !== '';\n};\n\nexport const getPlaceholder = ({\n  field: { uniforms },\n  fieldType,\n  intl: { formatMessage },\n  intlId,\n  intlPrefix,\n  name,\n  placeholder,\n  type,\n  parent,\n}) => {\n  let placeholderPrefix = 'p.ex: ';\n\n  // Doesn't make sense to add example prefix on select field\n  if (type === COMPONENT_TYPES.SELECT) {\n    placeholderPrefix = '';\n  }\n\n  if (fieldType === Boolean || fieldType === Date) {\n    return '';\n  }\n\n  if (fieldType === Array) {\n    return placeholder;\n  }\n\n  if (uniforms && uniforms.placeholder !== undefined) {\n    return uniforms.placeholder\n      ? `${placeholderPrefix}${uniforms.placeholder}`\n      : uniforms.placeholder;\n  }\n  // When you set placeholder to `false`, it sets the default placeholder to\n  // an empty string\n  if (!placeholdersAreEnabled({ placeholder, parent })) {\n    return '';\n  }\n\n  if (oneIsNull([placeholder, uniforms && uniforms.placeholder])) {\n    return '';\n  }\n\n  // Let select fields manage their own null states\n  if (type === COMPONENT_TYPES.PERCENT) {\n    return '';\n  }\n\n  return `${placeholderPrefix}${formatMessage({\n    id: `${formatStringId({\n      intlPrefix,\n      intlId,\n      name,\n      parent,\n    })}.placeholder`,\n  })}`;\n};\n","export const CUSTOM_AUTOFIELD_TYPES = {\n  DATE: 'DATE',\n  PERCENT: 'PERCENT',\n  TEXT_AREA: 'TEXT_AREA',\n  MONEY: 'MONEY',\n  MONEY_DECIMAL: 'MONEY_DECIMAL',\n  HTML_PREVIEW: 'HTML_PREVIEW',\n};\n\n// Use internally to manage exceptions\nexport const COMPONENT_TYPES = {\n  ARRAY: 'ARRAY',\n  DATE: 'DATE',\n  PERCENT: 'PERCENT',\n  SELECT: 'SELECT',\n  TEXT_AREA: 'TEXT_AREA',\n  MONEY: 'MONEY',\n  RENDER: 'RENDER',\n  HTML_PREVIEW: 'HTML_PREVIEW',\n};\n\nexport const FIELDS_TO_IGNORE = [\n  'label',\n  'field',\n  'fields',\n  'uniforms',\n  'InputLabelProps',\n  'onChange',\n  'model',\n  'changedMap',\n];\n","export { default } from './AutoForm';\nexport { default as AutoFormDialog } from './AutoFormDialog';\nexport * from './AutoFormComponents';\n","/* eslint-env mocha */\nimport { expect } from 'chai';\nimport { TRACKING_COOKIE } from 'core/api/analytics/analyticsConstants';\n\nimport { getCookie } from 'core/utils/cookiesHelpers';\nimport HistoryWatcher from '../../HistoryWatcher';\n\nconst routes = {\n  bar: { path: '/foo/:id' },\n  foo: { path: '/foo' },\n};\n\nconst deleteAllCookies = () => {\n  const cookies = document.cookie.split(';');\n\n  for (let i = 0; i < cookies.length; i++) {\n    const cookie = cookies[i];\n    const eqPos = cookie.indexOf('=');\n    const name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;\n    document.cookie = `${name}=;expires=Thu, 01 Jan 1970 00:00:00 GMT`;\n  }\n};\n\ndescribe('HistoryWatcher', () => {\n  const watcher = new HistoryWatcher({ routes, history: { location: {} } });\n\n  context('getMatchingPath', () => {\n    it('returns the matching path', () => {\n      const path = watcher.getMatchingPath('/foo');\n      expect(path).to.deep.equal({\n        path: '/foo',\n        route: 'foo',\n        params: {},\n        queryString: {},\n      });\n    });\n\n    it('returns the matching path with params', () => {\n      const path = watcher.getMatchingPath('/foo/abc');\n      expect(path).to.deep.equal({\n        path: '/foo/abc',\n        route: 'bar',\n        params: { id: 'abc' },\n        queryString: {},\n      });\n    });\n\n    it('returns the NOT_FOUND if no matching path is found', () => {\n      const path = watcher.getMatchingPath('/test');\n      expect(path).to.deep.equal({\n        path: '/test',\n        route: 'NOT_FOUND',\n        params: {},\n        queryString: {},\n      });\n    });\n  });\n\n  context('generateTrackingId', () => {\n    beforeEach(() => {\n      deleteAllCookies();\n    });\n\n    it('generates a new tracking id', () => {\n      expect(getCookie(TRACKING_COOKIE)).to.equal('');\n      watcher.generateTrackingId();\n      expect(getCookie(TRACKING_COOKIE)).to.not.equal('');\n    });\n\n    it('does not generate a new tracking id if one already exists', () => {\n      watcher.generateTrackingId();\n      const trackingId = getCookie(TRACKING_COOKIE);\n      watcher.generateTrackingId();\n      expect(getCookie(TRACKING_COOKIE)).to.equal(trackingId);\n    });\n  });\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { Component } from 'react';\nimport { matchPath } from 'react-router-dom';\n\nimport { TRACKING_COOKIE } from 'core/api/analytics/analyticsConstants';\nimport { analyticsPage } from 'core/api/methods';\n\nimport { getCookie, setCookie, parseCookies } from 'core/utils/cookiesHelpers';\nimport { impersonate } from '../Impersonate/ImpersonatePage/ImpersonatePage';\n\nexport default class HistoryWatcher extends Component {\n  componentDidMount() {\n    const { history } = this.props;\n    this.generateTrackingId();\n    this.loadPage(history.location.pathname);\n    this.unlisten = history.listen(({ pathname }) => this.loadPage(pathname));\n\n    if (Meteor.isDevelopment && !(Meteor.isTest || Meteor.isAppTest)) {\n      const userId = sessionStorage.getItem('dev_impersonate_userId');\n      const authToken = sessionStorage.getItem('dev_impersonate_authToken');\n      if (userId && authToken) {\n        impersonate({ userId, authToken });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    // Sometimes the component unmounts before listening is done\n    if (this.unlisten) {\n      this.unlisten();\n    }\n  }\n\n  getMatchingPath(pathname) {\n    const { routes = {}, history } = this.props;\n    let matchingPath = null;\n\n    const searchParams = history.location.search;\n    const queryString = {};\n\n    Object.keys(routes).forEach((route) => {\n      if (matchingPath === null && route !== 'NOT_FOUND') {\n        const match = matchPath(pathname, routes[route]);\n\n        if (searchParams) {\n          const params = new URLSearchParams(searchParams);\n          [...params.entries()].forEach(([key, value]) => {\n            queryString[key] = value;\n          });\n        }\n\n        matchingPath = match && {\n          path: pathname,\n          route,\n          params: match.params,\n          queryString,\n        };\n      }\n    });\n\n    return (\n      matchingPath || {\n        path: pathname,\n        route: 'NOT_FOUND',\n        params: {},\n        queryString,\n      }\n    );\n  }\n\n  generateTrackingId() {\n    const trackingId = getCookie(TRACKING_COOKIE);\n    if (!trackingId) {\n      const randomId = Math.random()\n        .toString(36)\n        .substr(2)\n        + Math.random()\n          .toString(36)\n          .substr(2);\n      setCookie(TRACKING_COOKIE, randomId);\n    }\n  }\n\n  loadPage(pathname) {\n    const {\n      path,\n      route,\n      params,\n      searchParams,\n      queryString,\n    } = this.getMatchingPath(pathname);\n    const cookies = parseCookies();\n    const { sessionStorage } = window;\n    analyticsPage.run({\n      cookies,\n      sessionStorage,\n      path,\n      route,\n      queryParams: params,\n      queryString,\n    });\n  }\n\n  render() {\n    return this.props.children;\n  }\n}\n","/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport { shallow } from 'core/utils/testHelpers/enzyme';\nimport Chip from '@material-ui/core/Chip';\n\nimport T from '../../../Translation';\nimport BorrowersSummary from '../../BorrowersSummary';\n\ndescribe('BorrowersSummary />', () => {\n  const borrowers = [\n    {\n      _id: 'firstBorrowerId',\n      firstName: 'John',\n      lastName: 'Doe',\n    },\n    {\n      _id: 'secondBorrowerId',\n      firstName: 'John',\n      lastName: 'Doe2',\n    },\n  ];\n\n  it('renders the correct number of Chips with correct props', () => {\n    const expectedNbOfBorrowers = borrowers.length;\n    const expectedFirstBorrowerLabel = (\n      <T id=\"BorrowersSummary.borrower\" values={{ index: 1 }} />\n    );\n    const props = { borrowers };\n    const wrapper = shallow(<BorrowersSummary {...props} />);\n    const chipsArray = wrapper.find(Chip);\n\n    expect(chipsArray).to.have.length(expectedNbOfBorrowers);\n\n    expect(chipsArray.first().prop('label').props).to.deep.equal(expectedFirstBorrowerLabel.props);\n  });\n\n  it('displays just the corresponding message when there are no borrowers', () => {\n    const props = { borrowers: [] };\n    const wrapper = shallow(<BorrowersSummary {...props} />);\n\n    expect(wrapper.find('.borrowers-list').children()).to.have.length(1);\n    expect(wrapper\n      .find('.borrowers-list')\n      .children()\n      .find(T)\n      .prop('id')).to.equal('general.noBorrowersForLoan');\n  });\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Avatar from '@material-ui/core/Avatar';\nimport Chip from '@material-ui/core/Chip';\n\nimport Icon from '../Icon';\nimport { CollectionIconLink } from '../IconLink';\nimport T from '../Translation';\nimport { BORROWERS_COLLECTION } from '../../api/constants';\n\nconst BorrowersSummary = ({ borrowers, showTitle = true }) => {\n  const isAdmin = Meteor.microservice === 'admin';\n  return (\n    <div className=\"borrowers-summary\">\n      {showTitle && (\n        <h5>\n          <T id=\"collections.borrowers\" />\n        </h5>\n      )}\n      <div className=\"borrowers-list\">\n        {borrowers.length > 0 ? (\n          borrowers.map((borrower, index) =>\n            (isAdmin ? (\n              <CollectionIconLink\n                relatedDoc={{ ...borrower, collection: BORROWERS_COLLECTION }}\n              />\n            ) : (\n              <Chip\n                style={{ margin: 8 }}\n                key={borrower._id}\n                avatar={(\n                  <Avatar>\n                    <Icon type=\"face\" />\n                  </Avatar>\n                )}\n                label={\n                  borrower.name || (\n                    <T\n                      id=\"BorrowersSummary.borrower\"\n                      values={{ index: index + 1 }}\n                    />\n                  )\n                }\n              />\n            )))\n        ) : (\n          <T id=\"general.noBorrowersForLoan\" />\n        )}\n      </div>\n    </div>\n  );\n};\n\nBorrowersSummary.propTypes = {\n  borrowers: PropTypes.array,\n};\n\nBorrowersSummary.defaultProps = {\n  borrowers: [],\n};\n\nexport default BorrowersSummary;\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\nimport { getMountedComponent } from '../../../../utils/testHelpers';\nimport employees from '../../../../arrays/epotekEmployees';\n\nimport { ContactButton } from '../../ContactButton';\nimport { withContactButtonProvider } from '../../ContactButtonContext';\n\ndescribe('ContactButton', () => {\n  let props;\n  const component = () =>\n    getMountedComponent({\n      Component: withContactButtonProvider(ContactButton),\n      props,\n    });\n\n  beforeEach(() => {\n    getMountedComponent.reset();\n    props = {\n      open: false,\n      staff: employees[0],\n    };\n  });\n\n  it('renders the closed version', () => {\n    expect(component()\n      .find('.contact-button-overlay')\n      .hasClass('closed')).to.equal(true);\n  });\n\n  it('renders the opened version', () => {\n    expect(component()\n      .find('.contact-button-overlay')\n      .hasClass('closed')).to.equal(true);\n\n    component()\n      .find('button')\n      .simulate('click');\n\n    expect(component()\n      .find('.contact-button-overlay')\n      .hasClass('closed')).to.equal(false);\n  });\n\n  describe('renders staff value', () => {\n    it('name', () => {\n      expect(component()\n        .find('.staff-name')\n        .text()).to.equal(employees[0].name);\n    });\n\n    it('phoneNumber', () => {\n      expect(component().contains(employees[0].phoneNumber)).to.equal(true);\n    });\n\n    it('mail', () => {\n      expect(component().contains(employees[0].email)).to.equal(true);\n    });\n  });\n});\n","// @flow\nimport React, { useContext } from 'react';\n\nimport Fab from '@material-ui/core/Fab';\nimport Icon from 'core/components/Icon';\n\nimport ContactButtonContainer from './ContactButtonContainer';\nimport ContactButtonOverlay from './ContactButtonOverlay';\nimport { ContactButtonContext } from './ContactButtonContext';\n\ntype ContactButtonProps = {};\n\nexport const ContactButton = ({ ...props }: ContactButtonProps) => {\n  const { openContact, toggleOpenContact } = useContext(ContactButtonContext);\n\n  return (\n    <div className=\"contact-button\">\n      <Fab onClick={() => toggleOpenContact(!openContact)} color=\"primary\">\n        {openContact ? <Icon type=\"close\" /> : <Icon type=\"forum\" />}\n      </Fab>\n      <ContactButtonOverlay {...props} openContact={openContact} />\n    </div>\n  );\n};\n\nexport default ContactButtonContainer(ContactButton);\n","import { withProps, compose } from 'recompose';\n\nimport { employeesByEmail, EPOTEK_NUMBER } from 'core/arrays/epotekEmployees';\n\nconst ContactButtonContainer = compose(withProps(({ currentUser }) => {\n  let staff;\n  if (currentUser && currentUser.assignedEmployee) {\n    staff = employeesByEmail[currentUser.assignedEmployee.email];\n  }\n  if (!staff) {\n    staff = {\n      ...employeesByEmail['lydia@e-potek.ch'],\n      phoneNumber: EPOTEK_NUMBER,\n      email: 'financement@e-potek.ch',\n    };\n  }\n  return { staff };\n}));\n\nexport default ContactButtonContainer;\n","// @flow\nimport React from 'react';\nimport T from 'core/components/Translation';\n\ntype ContactButtonContentProps = {\n  titleId: string,\n  icon: React.Node,\n  href: string,\n  label: string,\n};\n\nconst ContactButtonContent = ({\n  titleId,\n  icon,\n  href,\n  label,\n}: ContactButtonContentProps) => (\n  <a href={href} className=\"contact-button-content primary\">\n    <div className=\"iconDiv\">{icon}</div>\n    <div className=\"text\">\n      <p className=\"bold\">\n        <T id={titleId} />\n      </p>\n      {label}\n    </div>\n  </a>\n);\n\nexport default ContactButtonContent;\n","import React from 'react';\nimport { compose, withState } from 'recompose';\n\nexport const ContactButtonContext = React.createContext();\n\nexport const { Consumer, Provider } = ContactButtonContext;\n\nexport const withContactButtonProvider = compose(\n  withState('openContact', 'toggleOpenContact', false),\n  Component => ({ openContact, toggleOpenContact, ...props }) => (\n    <Provider value={{ openContact, toggleOpenContact }}>\n      <Component {...props} />\n    </Provider>\n  ),\n);\n","// @flow\nimport React from 'react';\nimport cx from 'classnames';\nimport Icon from 'core/components/Icon';\nimport T from 'core/components/Translation';\n\nimport ContactButtonContent from './ContactButtonContent';\n\ntype ContactButtonOverlayProps = {\n  staff: {\n    name: string,\n    email: string,\n    phoneNumber: string,\n    src: string,\n  },\n  openContact: boolean,\n};\n\nconst ContactButtonOverlay = ({\n  staff: { src, name, phoneNumber, email, gender } = {},\n  openContact,\n}: ContactButtonOverlayProps) => (\n  <div\n    className={cx('card1 shadow-2 card-top contact-button-overlay', {\n      closed: !openContact,\n    })}\n  >\n    <div className=\"top\">\n      <img src={src} alt={name} />\n      <div className=\"text\">\n        <h4 className=\"fixed-size no-margin staff-name\">{name}</h4>\n        <p className=\"secondary\">\n          <T id=\"ContactButton.yourAdvisor\" values={{ gender }} />\n        </p>\n      </div>\n    </div>\n    <hr />\n    <ContactButtonContent\n      titleId=\"ContactButton.byPhone\"\n      icon={<Icon type=\"phone\" className=\"icon\" />}\n      href={`tel:${phoneNumber}`}\n      label={phoneNumber}\n    />\n    <ContactButtonContent\n      titleId=\"ContactButton.byEmail\"\n      icon={<Icon type=\"mail\" className=\"icon\" />}\n      href={`mailto:${email}`}\n      label={email}\n    />\n  </div>\n);\n\nexport default ContactButtonOverlay;\n","// @flow\n/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport { injectIntl } from 'react-intl';\n\nimport { getMountedComponent } from '../../../../utils/testHelpers';\nimport { makeFeedback, FEEDBACK_OPTIONS } from '../../feedbackHelpers';\nimport HtmlPreview from '../../../HtmlPreview/HtmlPreview';\n\ntype DummyComponentProps = {\n  intl: Object,\n  model: Object,\n  offer: Object,\n};\n\nconst DummyComponent = ({\n  intl: { formatMessage },\n  model,\n  offer,\n}: DummyComponentProps) => (\n  <HtmlPreview value={makeFeedback({ model, offer, formatMessage })} />\n);\n\nconst component = props =>\n  getMountedComponent({\n    Component: injectIntl(DummyComponent),\n    props,\n    withRouter: false,\n  });\n\ndescribe('makeFeedback', () => {\n  beforeEach(() => {\n    getMountedComponent.reset();\n  });\n\n  // Not working during meteor tests\n  it.skip('renders the feedback with correct intl values', () => {\n    const model = { option: FEEDBACK_OPTIONS.POSITIVE };\n    const offer = {\n      lender: {\n        contact: { firstName: 'Bob' },\n        loan: {\n          borrowers: [{ name: 'John' }],\n          user: { assignedEmployee: { name: 'Julia' } },\n        },\n      },\n      property: {\n        address1: 'Rue du test 1',\n        zipCode: '1201',\n        city: 'Genève',\n      },\n      createdAt: new Date(),\n    };\n    expect(component({ model, offer })\n      .text()\n      .includes('Bob')).to.equal(true);\n    expect(component({ model, offer })\n      .text()\n      .includes('John')).to.equal(true);\n    expect(component({ model, offer })\n      .text()\n      .includes('Julia')).to.equal(true);\n    expect(component({ model, offer })\n      .text()\n      .includes('Rue du test 1, 1201 Genève')).to.equal(true);\n  });\n});\n","import { Meteor } from 'meteor/meteor';\nimport moment from 'moment';\n\nexport const FEEDBACK_OPTIONS = {\n  POSITIVE: 'POSITIVE',\n  NEGATIVE_NOT_COMPETITIVE: 'NEGATIVE_NOT_COMPETITIVE',\n  NEGATIVE_WITHOUT_FOLLOW_UP: 'NEGATIVE_WITHOUT_FOLLOW_UP',\n  CUSTOM: 'CUSTOM',\n};\n\nexport const FEEDBACK_OPTIONS_SETTINGS = {\n  [FEEDBACK_OPTIONS.POSITIVE]: {\n    enableComments: true,\n    enableOutro: true,\n  },\n  [FEEDBACK_OPTIONS.NEGATIVE_NOT_COMPETITIVE]: {\n    enableComments: true,\n    enableOutro: true,\n  },\n  [FEEDBACK_OPTIONS.NEGATIVE_WITHOUT_FOLLOW_UP]: {\n    enableComments: true,\n    enableCustomIntro: true,\n    enableOutro: true,\n  },\n  [FEEDBACK_OPTIONS.CUSTOM]: {\n    enableCustomIntro: false,\n    enableComments: false,\n    enableOutro: false,\n  },\n};\n\nconst greetings = ({ contactName, formatMessage }) =>\n  formatMessage({ id: 'Feedback.greetings' }, { contactName });\n\nconst introduction = ({\n  option,\n  borrowers,\n  singleBorrower,\n  address,\n  date,\n  formatMessage,\n}) => {\n  if (singleBorrower) {\n    return formatMessage(\n      {\n        id: FEEDBACK_OPTIONS_SETTINGS[option].enableCustomIntro\n          ? `Feedback.${option}.introduction.singleBorrower`\n          : 'Feedback.introduction.singleBorrower',\n      },\n      {\n        borrower: borrowers[0].name,\n        address,\n        date,\n      },\n    );\n  }\n\n  return formatMessage(\n    {\n      id: FEEDBACK_OPTIONS_SETTINGS[option].enableCustomIntro\n        ? `Feedback.${option}.introduction.twoBorrowers`\n        : 'Feedback.introduction.twoBorrowers',\n    },\n    {\n      borrower1: borrowers[0].name,\n      borrower2: borrowers[1].name,\n      address,\n      date,\n    },\n  );\n};\n\nconst outro = ({ borrowers, singleBorrower, option, formatMessage }) => {\n  if (singleBorrower) {\n    return formatMessage(\n      { id: `Feedback.${option}.outro.singleBorrower` },\n      { borrower: borrowers[0].name, singleBorrower: true },\n    );\n  }\n\n  return formatMessage(\n    { id: `Feedback.${option}.outro.twoBorrowers` },\n    {\n      borrower1: borrowers[0].name,\n      borrower2: borrowers[1].name,\n      singleBorrower: false,\n    },\n  );\n};\n\nconst closing = ({ assignee, formatMessage }) =>\n  formatMessage({ id: 'Feedback.closing' }, { assignee });\n\nexport const makeFeedback = ({ model, offer, formatMessage }) => {\n  const { option, comments = [], customFeedback = '' } = model;\n  const {\n    lender: {\n      contact: { firstName: contactName },\n      loan: {\n        borrowers,\n        user: { assignedEmployee },\n      },\n    },\n    property,\n    createdAt,\n  } = offer;\n\n  const { firstName: assignee = 'e-Potek' } = assignedEmployee || {};\n  const { address1, zipCode, city } = property || {};\n\n  if (!property || !address1 || !zipCode || !city) {\n    throw new Meteor.Error('No property or address');\n  }\n\n  const address = `${address1}, ${zipCode} ${city}`;\n\n  if (option === FEEDBACK_OPTIONS.CUSTOM) {\n    // Replace all returns into HTML\n    return customFeedback.replace(/(?:\\r\\n|\\r|\\n)/g, '<br>');\n  }\n\n  let feedback = '';\n  const singleBorrower = borrowers.length === 1;\n\n  if (option) {\n    feedback = feedback.concat(greetings({ contactName, formatMessage }));\n    feedback = feedback.concat(introduction({\n      option,\n      borrowers,\n      singleBorrower,\n      address,\n      date: moment(createdAt).format('DD.MM.YYYY'),\n      formatMessage,\n    }));\n    feedback = feedback.concat(formatMessage({ id: `Feedback.${option}.body` }, { singleBorrower }));\n\n    if (comments.length && FEEDBACK_OPTIONS_SETTINGS[option].enableComments) {\n      feedback = feedback.concat(formatMessage(\n        { id: `Feedback.${option}.comments` },\n        { singleBorrower },\n      ));\n      feedback = feedback.concat(\n        '<ul>',\n        comments\n          .filter(x => x)\n          .map(comment => `<li><b>${comment}</b></li>`)\n          .join('\\n'),\n        '</ul>',\n      );\n    }\n\n    if (FEEDBACK_OPTIONS_SETTINGS[option].enableOutro) {\n      feedback = feedback.concat(outro({ option, singleBorrower, borrowers, formatMessage }));\n    }\n\n    feedback = feedback.concat(closing({ assignee, formatMessage }));\n  }\n\n  return feedback;\n};\n","// @flow\n/* eslint-env mocha */\nimport { Random } from 'meteor/random';\n\nimport React from 'react';\nimport { expect } from 'chai';\nimport { Redirect } from 'react-router-dom';\n\nimport { resetDatabase } from 'core/utils/testHelpers/testHelpers';\nimport { testCreateUser } from '../../../../api';\nimport { shallow, getMountedComponent } from '../../../../utils/testHelpers';\nimport pollUntilReady from '../../../../utils/pollUntilReady';\nimport Loading from '../../../Loading/Loading';\nimport PasswordResetPage, {\n  PasswordResetPage as PasswordResetPageDumb,\n} from '../../PasswordResetPage';\n\ndescribe('PasswordResetPage', () => {\n  let props;\n  const component = () =>\n    getMountedComponent({\n      Component: PasswordResetPage,\n      props,\n      withRouter: true,\n    });\n  const shallowComponent = () => shallow(<PasswordResetPageDumb {...props} />);\n\n  beforeEach(() => {\n    getMountedComponent.reset();\n    props = { token: Random.id(), email: 'john.doe@test.com' };\n    return resetDatabase();\n  });\n\n  it('renders the name', async () => {\n    const { email, token } = props;\n    const firstName = 'John';\n    const lastName = 'Doe';\n\n    // FIXME: testCreateUser is called twice\n    try {\n      await testCreateUser.run({\n        user: {\n          email,\n          firstName,\n          lastName,\n          services: { password: { reset: { token } } },\n          roles: ['user'],\n        },\n      });\n    } catch (error) {\n      console.log('error:', error);\n    }\n\n    return pollUntilReady(() => {\n      component().update();\n      return !component().find(Loading).length;\n    }, 10).then(() => expect(component().contains('John Doe')).to.equal(true));\n  });\n\n  it('Redirects to the login page if there is an error', () => {\n    props.error = { message: 'Test error' };\n\n    expect(shallowComponent().find(Redirect).length).to.equal(1);\n  });\n\n  context('disables submit button when', () => {\n    it('new password is not set', () => {\n      props.user = { id: 'userId' };\n\n      expect(shallowComponent()\n        .find('[type=\"submit\"]')\n        .first()\n        .props().disabled).to.equal(true);\n    });\n\n    it('passwords do not match', () => {\n      props.newPassword = 'password1';\n      props.newPassword2 = 'password2';\n      props.user = { id: 'userId' };\n\n      expect(shallowComponent()\n        .find('[type=\"submit\"]')\n        .first()\n        .props().disabled).to.equal(true);\n    });\n  });\n\n  it('loads while submitting', () => {\n    const password = 'password';\n    props.submitting = true;\n    props.newPassword = password;\n    props.newPassword2 = password;\n    props.user = { id: 'userId' };\n\n    expect(shallowComponent()\n      .find('[type=\"submit\"]')\n      .first()\n      .props().loading).to.equal(true);\n  });\n});\n","// @flow\nimport { Meteor } from 'meteor/meteor';\n\nimport React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUserCircle } from '@fortawesome/pro-light-svg-icons/faUserCircle';\nimport { Redirect } from 'react-router-dom';\nimport cx from 'classnames';\n\nimport TextField from '../Material/TextField';\nimport Loading from '../Loading/Loading';\nimport Button from '../Button';\nimport Checkbox from '../Checkbox';\nimport T from '../Translation';\nimport { getUserDisplayName } from '../../utils/userFunctions';\nimport PasswordResetPageContainer from './PasswordResetPageContainer';\n\nexport const PasswordResetPage = ({\n  newPassword,\n  newPassword2,\n  hasReadConditions,\n  handleChange,\n  handleSubmit,\n  user,\n  error,\n  submitting,\n}) => {\n  const isEnrollment = window.location && window.location.pathname.includes('enroll-account');\n  const isValid = !!newPassword\n    && newPassword === newPassword2\n    && (!isEnrollment || hasReadConditions);\n\n  if (error) {\n    return <Redirect to=\"/login\" />;\n  }\n\n  if (!user) {\n    return <Loading />;\n  }\n\n  return (\n    <form\n      onSubmit={handleSubmit}\n      id=\"password-reset-page\"\n      className=\"password-reset-page\"\n    >\n      <div className=\"card1 card-top\">\n        <div className=\"top\">\n          <div className=\"text\">\n            <FontAwesomeIcon icon={faUserCircle} className=\"icon\" />\n            <h1>{getUserDisplayName(user)}</h1>\n          </div>\n          <h4 className=\"secondary\">\n            <T id=\"PasswordResetPage.description\" />\n          </h4>\n        </div>\n        <TextField\n          label={<T id=\"PasswordResetPage.password\" />}\n          floatingLabelFixed\n          type=\"password\"\n          value={newPassword}\n          onChange={e => handleChange(e.target.value, 'newPassword')}\n          className=\"password-reset-page-input\"\n        />\n        <TextField\n          label={<T id=\"PasswordResetPage.confirmPassword\" />}\n          floatingLabelFixed\n          type=\"password\"\n          value={newPassword2}\n          onChange={e => handleChange(e.target.value, 'newPassword2')}\n          className=\"password-reset-page-input\"\n        />\n\n        {isEnrollment && (\n          <Checkbox\n            label={(\n              <span className=\"disclaimer\">\n                <T\n                  id=\"PasswordResetPage.disclaimer\"\n                  values={{\n                    link: (\n                      <a\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        href={`${Meteor.settings.public.subdomains.app}/files/Privacy Policy - e-Potek.pdf`}\n                      >\n                        <T id=\"PasswordResetPage.disclaimer.privacyPolicy\" />\n                      </a>\n                    ),\n                  }}\n                />\n              </span>\n            )}\n            value={hasReadConditions}\n            onChange={(e, c) => handleChange(c, 'hasReadConditions')}\n          />\n        )}\n\n        <div\n          className={cx('password-reset-page-button', {\n            enrollment: isEnrollment,\n          })}\n        >\n          <Button\n            raised\n            label={<T id=\"PasswordResetPage.CTA\" />}\n            disabled={!isValid}\n            type=\"submit\"\n            primary\n            loading={submitting}\n          />\n        </div>\n      </div>\n    </form>\n  );\n};\n\nexport default PasswordResetPageContainer(PasswordResetPage);\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\n\nimport {\n  withStateHandlers,\n  lifecycle,\n  withState,\n  withProps,\n  compose,\n} from 'recompose';\nimport { withRouter } from 'react-router-dom';\n\nimport withMatchParam from '../../containers/withMatchParam';\nimport { getUserByPasswordResetToken, notifyAssignee } from '../../api';\n\nconst stateHandlers = withStateHandlers(\n  { newPassword: '', newPassword2: '', hasReadConditions: false },\n  { handleChange: () => (value, key) => ({ [key]: value }) },\n);\n\nconst props = withProps(({ newPassword, token, history, setError, changeSubmitting }) => ({\n  handleSubmit: (event) => {\n    event.preventDefault();\n    changeSubmitting(true);\n    Accounts.resetPassword(token, newPassword, (err) => {\n      if (err) {\n        setError(err);\n      } else {\n        history.push('/');\n        notifyAssignee.run({ title: 'A choisi/changé son mot de passe!' });\n      }\n      changeSubmitting(false);\n    });\n  },\n}));\n\nconst lifeCycle = lifecycle({\n  componentDidMount() {\n    if (Meteor.user()) {\n      // Avoid multi user issues\n      Meteor.logout();\n    }\n    return getUserByPasswordResetToken\n      .run({ token: this.props.token })\n      .then((user) => {\n        if (!user) {\n          throw new Error('user not found');\n        }\n        this.setState({ user });\n      })\n      .catch(this.props.setError);\n  },\n});\n\nexport default compose(\n  withMatchParam('token'),\n  withState('error', 'setError', null),\n  withRouter,\n  stateHandlers,\n  withState('submitting', 'changeSubmitting', false),\n  props,\n  lifeCycle,\n);\n","// @flow\n/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport { IntlProvider, intlShape } from 'react-intl';\nimport { mount } from 'core/utils/testHelpers/enzyme';\n\nimport DefaultTranchePicker, { TranchePicker } from '../../TranchePicker';\nimport Tranche from '../../Tranche';\n\ndescribe('TranchePicker', () => {\n  let props;\n  const { intl } = new IntlProvider({ defaultLocale: 'fr' }).getChildContext();\n  const component = () =>\n    mount(<DefaultTranchePicker {...props} />, {\n      context: { intl },\n      childContextTypes: { intl: intlShape },\n    });\n\n  beforeEach(() => {\n    props = { types: ['interest10', 'interest2', 'interest5'] };\n  });\n\n  it('adds a tranche', () => {\n    const wrapper = component();\n    const button = wrapper.find('.add').first();\n\n    expect(wrapper.find('.tranche').length).to.equal(0);\n\n    button.simulate('click');\n\n    expect(wrapper.find('.tranche').length).to.equal(1);\n  });\n\n  it('removes a tranche', () => {\n    props.initialTranches = [{ value: 1, type: 'test' }];\n    const wrapper = component();\n    const deleteButton = wrapper.find('.delete').first();\n\n    expect(wrapper.find('.tranche').length).to.equal(1);\n\n    deleteButton.simulate('click');\n\n    expect(wrapper.find('.tranche').length).to.equal(0);\n  });\n\n  it('edits a tranche with an input', () => {\n    props.initialTranches = [{ value: 1, type: 'test' }];\n    const wrapper = component();\n    let input = wrapper.find('.value').first();\n\n    expect(input.prop('value')).to.equal(1);\n\n    input.prop('onChange')(0.8);\n\n    wrapper.update();\n    input = wrapper.find('.value').first();\n\n    expect(input.prop('value')).to.equal(0.8);\n    expect(wrapper.find(TranchePicker).props().tranches).to.deep.equal([\n      { value: 0.8, type: 'test' },\n    ]);\n  });\n\n  it('edits type with the Select field', () => {\n    props.initialTranches = [{ value: 1, type: 'type1' }];\n    const wrapper = component();\n    let select = wrapper.find('.select').first();\n\n    expect(select.prop('value')).to.equal('type1');\n\n    select.props().onChange(null, 'type2');\n\n    wrapper.update();\n    select = wrapper.find('.select').first();\n\n    expect(select.prop('value')).to.equal('type2');\n    expect(wrapper.find(TranchePicker).props().tranches).to.deep.equal([\n      { value: 1, type: 'type2' },\n    ]);\n  });\n\n  it('filters options passed to a tranche', () => {\n    props.initialTranches = [\n      { value: 1, type: 'interest2' },\n      { value: 1, type: 'interest5' },\n    ];\n    const wrapper = component();\n    const firstTranche = wrapper.find(Tranche).first();\n\n    expect(firstTranche.prop('options').map(({ id }) => id)).to.deep.equal([\n      'interest2',\n      'interest10',\n    ]);\n  });\n\n  it('sorts options properly', () => {\n    props.types = [\n      'interest20',\n      'interest15',\n      'interest5',\n      'interest10',\n      'interest2',\n    ];\n    props.initialTranches = [{ value: 1, type: 'interest2' }];\n    const wrapper = component();\n    const firstTranche = wrapper.find(Tranche).first();\n\n    expect(firstTranche.prop('options').map(({ id }) => id)).to.deep.equal([\n      'interest2',\n      'interest5',\n      'interest10',\n      'interest15',\n      'interest20',\n    ]);\n  });\n});\n","// @flow\nimport React from 'react';\nimport Button from '../Button';\nimport Select from '../Select';\nimport PercentInput from '../PercentInput';\n\ntype TrancheProps = {\n  value: number,\n  type: string,\n  removeTranche: Function,\n  setValue: Function,\n  setType: Function,\n  options: Array<Object>,\n};\n\nconst Tranche = ({\n  value,\n  type,\n  removeTranche,\n  setValue,\n  setType,\n  options,\n}: TrancheProps) => (\n  <span className=\"tranche\">\n    <PercentInput value={value} onChange={setValue} className=\"value\" />\n    <Select\n      value={type}\n      onChange={setType}\n      options={options}\n      className=\"select\"\n    />\n    <Button className=\"delete\" onClick={removeTranche}>\n      Supprimer\n    </Button>\n  </span>\n);\n\nexport default Tranche;\n","// @flow\nimport React from 'react';\nimport TranchePickerContainer from './TranchePickerContainer';\nimport Button from '../Button';\nimport Tranche from './Tranche';\nimport { INTEREST_RATES } from '../../api/constants';\n\ntype TranchePickerProps = {\n  tranches: Array<{ value: number, type: string }>,\n  addTranche: Function,\n  removeTranche: Function,\n  setValue: Function,\n  setType: Function,\n  options: Array<Object>,\n};\n\nconst interestRatesOrder = Object.values(INTEREST_RATES);\n\nconst filterOptions = (options, tranches, currentType) => {\n  const currentSelectedTypes = tranches.map(({ type }) => type);\n  const difference = options.filter(({ id }) => !currentSelectedTypes.includes(id));\n  const currentOption = options.find(({ id }) => id === currentType);\n  const withCurrentType = currentOption\n    ? [...difference, currentOption]\n    : difference;\n\n  const sortedOptions = withCurrentType.sort(({ id: id1 }, { id: id2 }) =>\n    interestRatesOrder.indexOf(id1) - interestRatesOrder.indexOf(id2));\n  return sortedOptions;\n};\n\nexport const TranchePicker = ({\n  tranches,\n  addTranche,\n  removeTranche,\n  setValue,\n  setType,\n  options,\n}: TranchePickerProps) => (\n  <div className=\"tranche-picker\">\n    {tranches.map(({ value, type }) => (\n      <Tranche\n        key={type}\n        value={value}\n        type={type}\n        removeTranche={() => removeTranche(type)}\n        setValue={newValue => setValue(type, newValue)}\n        setType={(_, newType) => setType(type, newType)}\n        options={filterOptions(options, tranches, type)}\n      />\n    ))}\n    <Button className=\"add\" primary onClick={addTranche}>\n      Ajouter\n    </Button>\n  </div>\n);\n\nexport default TranchePickerContainer(TranchePicker);\n","import React from 'react';\nimport { withStateHandlers, compose, withProps } from 'recompose';\nimport { INTEREST_RATES } from '../../api/constants';\nimport T from '../Translation';\n\nconst TranchePickerContainer = compose(\n  withStateHandlers(\n    ({ initialTranches = [] }) => ({ tranches: initialTranches }),\n    {\n      addTranche: ({ tranches }) => () => ({\n        tranches: [...tranches, { value: 0, type: '' }],\n      }),\n      removeTranche: ({ tranches }) => typeToRemove => ({\n        tranches: tranches.filter(({ type }) => type !== typeToRemove),\n      }),\n      setValue: ({ tranches }) => (type, value) => ({\n        tranches: tranches.reduce(\n          (acc, tranche) =>\n            (tranche.type === type\n              ? [...acc, { ...tranche, value }]\n              : [...acc, tranche]),\n          [],\n        ),\n      }),\n      setType: ({ tranches }) => (oldType, newType) => ({\n        tranches: tranches.reduce(\n          (acc, tranche) =>\n            (tranche.type === oldType\n              ? [...acc, { ...tranche, type: newType }]\n              : [...acc, tranche]),\n          [],\n        ),\n      }),\n    },\n  ),\n  withProps(({ types = Object.values(INTEREST_RATES) }) => ({\n    options: types.map(type => ({\n      id: type,\n      label: <T id={`InterestsTable.${type}`} />,\n    })),\n  })),\n);\n\nexport default TranchePickerContainer;\n","// @flow\nimport React from 'react';\nimport { TranchePicker } from './TranchePicker';\nimport DialogSimple from '../DialogSimple';\nimport Button from '../Button';\nimport TranchePickerContainer from './TranchePickerContainer';\n\ntype TranchePickerDialogProps = {};\n\nconst tranchesAreValid = (tranches) => {\n  const sum = tranches.reduce((total, { value }) => total + value, 0);\n  const sumIsOne = sum === 1;\n  const allTypesAreDefined = tranches.every(({ type }) => !!type);\n\n  return sumIsOne && allTypesAreDefined;\n};\n\nconst TranchePickerDialog = ({\n  title,\n  tranches,\n  handleSave,\n  disabled,\n  ...props\n}: TranchePickerDialogProps) => (\n  <DialogSimple\n    title={title}\n    actions={handleClose => [\n      <Button key=\"cancel\" onClick={handleClose}>\n        Annuler\n      </Button>,\n      <Button\n        key=\"save\"\n        onClick={() => {\n          handleSave(tranches);\n          handleClose();\n        }}\n        disabled={disabled || !tranchesAreValid(tranches)}\n      >\n        Enregistrer\n      </Button>,\n    ]}\n    label=\"Choisir tranches\"\n    primary\n    raised={false}\n  >\n    <TranchePicker {...props} tranches={tranches} />\n  </DialogSimple>\n);\n\nexport default TranchePickerContainer(TranchePickerDialog);\n","export { default } from './TranchePicker';\nexport { default as TranchePickerDialog } from './TranchePickerDialog';\n","/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport { shallow } from 'core/utils/testHelpers/enzyme';\nimport { FormattedNumber } from 'react-intl';\n\nimport IntlNumber from '../IntlNumber';\n\ndescribe('IntlNumber', () => {\n  let props;\n  const component = () => shallow(<IntlNumber {...props} />);\n\n  beforeEach(() => {\n    props = {};\n  });\n\n  it('should render FormattedNumber for a regular number', () => {\n    props.value = 10000;\n    expect(component().find(FormattedNumber).length).to.equal(1);\n  });\n\n  it('does not render a dash for a normal number', () => {\n    props.value = 10000;\n    expect(component().equals('-')).to.equal(false);\n  });\n\n  it('should render FormattedNumber for 0', () => {\n    props.value = 0;\n    expect(component().find(FormattedNumber).length).to.equal(1);\n  });\n\n  it('should render a dash for falsy values', () => {\n    props.value = undefined;\n    expect(component().equals('-')).to.equal(true);\n    props.value = false;\n    expect(component().equals('-')).to.equal(true);\n    props.value = null;\n    expect(component().equals('-')).to.equal(true);\n    props.value = NaN;\n    expect(component().equals('-')).to.equal(true);\n  });\n\n  it('should render a dash for + and - Infinity', () => {\n    props.value = Number.Infinity;\n    expect(component().equals('-')).to.equal(true);\n    props.value = -Number.Infinity;\n    expect(component().equals('-')).to.equal(true);\n  });\n\n  it('renders the value if it is not a number', () => {\n    props.value = 'hello world';\n    expect(component().equals('hello world')).to.equal(true);\n  });\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormattedNumber, FormattedPlural } from 'react-intl';\n\nconst shouldRenderDash = value => (!value && value !== 0) || value === Infinity;\n\nconst IntlNumber = ({ type, value, ...rest }) => {\n  // Render a dash if the number is not well specified\n  if (shouldRenderDash(value)) {\n    return '-';\n  }\n  if (typeof value !== 'number') {\n    // Render whatever comes if it is not a number\n    return value;\n  }\n\n  switch (type) {\n  case 'plural':\n    return <FormattedPlural {...rest} value={value} />;\n  default:\n    return <FormattedNumber {...rest} value={value} />;\n  }\n};\n\nIntlNumber.propTypes = {\n  value: PropTypes.number,\n};\n\nIntlNumber.defaultProps = {\n  value: undefined,\n};\n\nexport default IntlNumber;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { toMoney } from '../../../utils/conversionFunctions';\n\nconst getValue = ({ displayZero, value, currency, rounded }) => {\n  if (!displayZero && (!value || value === 0)) {\n    return '-';\n  }\n\n  if (value !== 0 && !value) {\n    return currency ? 0 : <>CHF&nbsp;0</>;\n  }\n\n  return currency ? (\n    <>\n      CHF&nbsp;\n      {toMoney(value, { rounded })}\n    </>\n  ) : (\n    toMoney(value, { rounded })\n  );\n};\n\n// The Intl standard for CHF is messed up, and display the currency after the\n// monetary value, which is not what we want. We can use IntlNumber later on\n// if needed\nconst Money = ({\n  value,\n  currency,\n  displayZero,\n  className,\n  tag: Tag,\n  rounded,\n}) => (\n  <Tag className={className}>\n    {getValue({ displayZero, value, currency, rounded })}\n  </Tag>\n);\n\nMoney.propTypes = {\n  className: PropTypes.string,\n  currency: PropTypes.bool,\n  displayZero: PropTypes.bool,\n  tag: PropTypes.string,\n  value: PropTypes.number,\n};\n\nMoney.defaultProps = {\n  className: '',\n  currency: true,\n  displayZero: true,\n  tag: 'span',\n  value: 0,\n};\n\nexport default Money;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { IntlNumber } from '..';\n\nconst Percent = ({ value, rounded, showPlus }) => (\n  <IntlNumber\n    value={value}\n    format={rounded ? 'percentageRounded' : 'percentage'}\n  >\n    {formattedValue => (\n      <span>\n        {showPlus ? (value > 0 ? '+' : '') : ''}\n        {formattedValue}\n      </span>\n    )}\n  </IntlNumber>\n);\n\nPercent.propTypes = {\n  showPlus: PropTypes.boolean,\n  value: PropTypes.number,\n};\n\nPercent.defaultProps = {\n  showPlus: false,\n  value: undefined,\n};\n\nexport default Percent;\n","export { default as Money } from './Money';\nexport { default as Percent } from './Percent';\nexport { default as IntlNumber } from './IntlNumber';\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormattedDate, FormattedTime, FormattedRelative } from 'react-intl';\n\nexport const IntlDate = ({ type, ...props }) => {\n  switch (type) {\n  case 'time':\n    return <FormattedTime {...props} />;\n  case 'relative':\n    return <FormattedRelative {...props} />;\n  default:\n    return <FormattedDate {...props} />;\n  }\n};\n\nIntlDate.propTypes = {\n  type: PropTypes.string,\n};\n\nexport default IntlDate;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst MetricArea = ({ value, placeholder }) => {\n  if (!value || value === 0) {\n    return (\n      placeholder || (\n        <span>\n          0 m<sup>2</sup>\n        </span>\n      )\n    );\n  }\n\n  return (\n    <span>\n      {value} m<sup>2</sup>\n    </span>\n  );\n};\n\nMetricArea.propTypes = {\n  value: PropTypes.number,\n};\n\nMetricArea.defaultProps = {\n  value: undefined,\n};\n\nexport default MetricArea;\n","export { default as MetricArea } from './MetricArea';\nexport { default as IntlDate } from './IntlDate';\n","import React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport { Consumer } from './withTranslationContext';\n\n// For some \"select\" strings that need a default value\nconst defaultTranslationValues = {\n  purchaseType: 'ACQUISITION',\n};\n\nexport default ({ values = {}, ...props }) => (\n  <Consumer>\n    {(translationValues = {}) => (\n      <FormattedMessage\n        {...props}\n        values={{\n          ...defaultTranslationValues,\n          ...translationValues,\n          ...values,\n        }}\n      />\n    )}\n  </Consumer>\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport AutoTooltip from '../tooltips/AutoTooltip';\nimport defaultIntlValues from './defaultIntlValues';\nimport FormattedMessage from './FormattedMessage';\n\nconst makeAutoTooltip = props => (content, key) => (\n  <AutoTooltip {...props} placement={props.tooltipPlacement} key={key}>\n    {content}\n  </AutoTooltip>\n);\n\n/**\n * T - A wrapper around react-intl's Formatted Message, it\n * automatically adds tooltips if they exist.\n * It is only rerendered if the id changes\n * @extends Component\n */\nexport const T = (props) => {\n  const { noTooltips, id, values, tooltipPlacement, ...rest } = props;\n\n  if (noTooltips) {\n    return <FormattedMessage {...props} />;\n  }\n  if (typeof id !== 'string') {\n    return id;\n  }\n  if (!id) {\n    throw new Error('Undefined id in Translation component');\n  }\n\n  const Auto = makeAutoTooltip(props);\n\n  return (\n    <FormattedMessage\n      id={id}\n      values={{ ...defaultIntlValues, ...values }}\n      {...rest}\n    >\n      {(...formattedMessage) => formattedMessage.map((msg, i) => Auto(msg, i))}\n    </FormattedMessage>\n  );\n};\n\nT.propTypes = {\n  id: PropTypes.string.isRequired,\n  noTooltips: PropTypes.bool,\n  tooltipPlacement: PropTypes.string,\n  values: PropTypes.object,\n};\n\nT.defaultProps = {\n  noTooltips: false,\n  tooltipPlacement: undefined,\n  values: {},\n};\n\nexport default T;\n","import React from 'react';\n\n// These values are injected into every intl message for convenience\nconst defaultIntlValues = {\n  verticalSpace: (\n    <span>\n      <br />\n      <br />\n    </span>\n  ),\n  purchaseType: '',\n  name: '',\n};\n\nexport default defaultIntlValues;\n","export * from './Translation';\nexport { default } from './Translation';\nexport * from './numberComponents';\nexport * from './formattingComponents';\n","import React from 'react';\n\nexport const { Consumer, Provider } = React.createContext();\n\nexport default translationValues => Component => props => (\n  <Consumer>\n    {(translationContext = {}) => (\n      <Provider value={{ ...translationContext, ...translationValues(props) }}>\n        <Component {...props} />\n      </Provider>\n    )}\n  </Consumer>\n);\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { propHasChanged } from '../UploaderController';\n\ndescribe('UploaderController', () => {\n  describe('propHasChanged', () => {\n    it('returns true if the initial prop is undefined', () => {\n      expect(propHasChanged(undefined, [{}])).to.equal(true);\n    });\n\n    it('returns true if the length has changed', () => {\n      expect(propHasChanged([{}], [{}, {}])).to.equal(true);\n    });\n\n    it('returns false if both are undefined', () => {\n      expect(propHasChanged(undefined, undefined)).to.equal(false);\n    });\n\n    it('returns false if both have same length', () => {\n      expect(propHasChanged([{}], [{}])).to.equal(false);\n    });\n  });\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { compose, withStateHandlers, withProps, lifecycle } from 'recompose';\nimport { injectIntl } from 'react-intl';\nimport uniqBy from 'lodash/uniqBy';\n\nimport {\n  FILE_STATUS,\n  ALLOWED_FILE_TYPES,\n  MAX_FILE_SIZE,\n} from '../../../api/constants';\nimport ClientEventService, {\n  MODIFIED_FILES_EVENT,\n} from '../../../api/events/ClientEventService';\nimport { notifyOfUpload } from '../../../api/slack/methodDefinitions';\nimport withMatchParam from '../../../containers/withMatchParam';\n\nconst checkFile = (file, currentValue = [], tempFiles = []) => {\n  if (ALLOWED_FILE_TYPES.indexOf(file.type) < 0) {\n    return 'fileType';\n  }\n  if (file.size > MAX_FILE_SIZE) {\n    return 'fileSize';\n  }\n  if (\n    currentValue.some(({ name }) => name === file.name)\n    || tempFiles.some(({ name }) => name === file.name)\n  ) {\n    return 'sameName';\n  }\n  return true;\n};\n\nconst filesExistAndAreValid = files =>\n  files\n  && files.length > 0\n  && files.every(file => file.status === FILE_STATUS.VALID);\n\nexport const propHasChanged = (oldProp, newProp) =>\n  !!(\n    (!oldProp && newProp)\n    || (oldProp && !newProp)\n    || (oldProp && newProp && oldProp.length !== newProp.length)\n  );\n\nconst displayFullState = withStateHandlers(\n  ({ currentValue }) => ({\n    displayFull:\n      Meteor.microservice === 'admin' || !filesExistAndAreValid(currentValue),\n  }),\n  {\n    showFull: () => () => ({ displayFull: true }),\n    hideFull: () => () => ({ displayFull: false }),\n  },\n);\n\nconst tempFileState = withStateHandlers(\n  { tempFiles: [], tempSuccessFiles: [] },\n  {\n    addTempSuccessFile: ({ tempSuccessFiles, tempFiles }) => file => ({\n      tempSuccessFiles: [...tempSuccessFiles, file],\n      tempFiles: tempFiles.filter(({ name }) => name !== file.name),\n    }),\n    addTempFiles: ({ tempFiles }) => (files = []) => ({\n      tempFiles: [...tempFiles, ...files],\n    }),\n    setTempSuccessFiles: () => (files = []) => ({\n      tempSuccessFiles: files,\n    }),\n  },\n);\n\nconst props = withProps(({\n  deleteFile,\n  addTempFiles,\n  addTempSuccessFile,\n  intl: { formatMessage: f },\n  handleSuccess,\n  currentValue = [],\n  tempFiles,\n  tempSuccessFiles,\n  fileMeta: { id, label },\n  loanId,\n  setTempSuccessFiles,\n  docId,\n  collection,\n}) => ({\n  handleAddFiles: (files) => {\n    const fileArray = [];\n    let showError = false;\n\n    files.forEach((file) => {\n      const isValid = checkFile(\n        file,\n        [...currentValue, ...tempSuccessFiles],\n        tempFiles,\n      );\n      if (isValid === true) {\n        fileArray.push(file);\n      } else {\n        showError = isValid;\n      }\n    });\n\n    if (showError) {\n        import('../../../utils/notification').then(({ default: notification }) => {\n          notification.error({\n            message: f({ id: `errors.${showError}.title` }),\n            description: f({ id: `errors.${showError}.description` }),\n          });\n        });\n        return;\n    }\n\n    addTempFiles(files);\n  },\n  handleUploadComplete: (file, url) => {\n    addTempSuccessFile(file);\n    ClientEventService.emit(MODIFIED_FILES_EVENT);\n    notifyOfUpload.run({\n      fileName: file.name,\n      docLabel: label || f({ id: `files.${id}` }),\n      loanId,\n    });\n    if (handleSuccess) {\n      handleSuccess(file, url);\n    }\n  },\n  handleRemove: key =>\n    deleteFile(key).then(() => {\n      // Filter temp files if this is not a real file from the DB\n      setTempSuccessFiles(tempSuccessFiles.filter(({ Key }) => Key !== key));\n\n      // Wait for a sec before pinging the DB again\n      setTimeout(() => {\n        ClientEventService.emit(MODIFIED_FILES_EVENT);\n      }, 0);\n    }),\n}));\n\nconst willReceiveProps = lifecycle({\n  componentWillReceiveProps({ currentValue: nextValue = [] }) {\n    const {\n      currentValue = [],\n      tempSuccessFiles,\n      setTempSuccessFiles,\n    } = this.props;\n\n    if (\n      propHasChanged(currentValue, nextValue)\n      && tempSuccessFiles.length > 0\n    ) {\n      const nonDuplicateFiles = tempSuccessFiles.filter(({ name }) => !nextValue.find(file => file.name === name));\n      setTempSuccessFiles(nonDuplicateFiles);\n    }\n  },\n});\n\nconst withMergedSuccessfulFiles = withProps(({ currentValue = [], tempSuccessFiles }) => ({\n  currentValue: uniqBy([...currentValue, ...tempSuccessFiles], 'name'),\n}));\n\nexport default compose(\n  injectIntl,\n  displayFullState,\n  tempFileState,\n  withMatchParam('loanId'),\n  props,\n  willReceiveProps,\n  withMergedSuccessfulFiles,\n);\n","/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport { shallow } from 'core/utils/testHelpers/enzyme';\n\nimport { Widget1Inputs } from '../Widget1Inputs';\nimport Widget1SingleInput from '../../Widget1SingleInput';\n\ndescribe('Widget1Input', () => {\n  let props;\n  const component = () => shallow(<Widget1Inputs {...props} />);\n\n  beforeEach(() => {\n    props = { fields: ['field1', 'field2'] };\n  });\n\n  it('renders a root div with the right class', () => {\n    expect(component()\n      .find('div')\n      .first()\n      .hasClass('widget1-inputs')).to.equal(true);\n  });\n\n  it('renders multiple fields', () => {\n    expect(component().find(Widget1SingleInput).length).to.equal(props.fields.length);\n  });\n\n  it('passes the proper field name to each field', () => {\n    component()\n      .find(Widget1SingleInput)\n      .forEach((node, index) => {\n        expect(node.prop('name')).to.equal(props.fields[index]);\n      });\n  });\n});\n","/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport { shallow } from 'core/utils/testHelpers/enzyme';\n\nimport T from 'core/components/Translation';\nimport StatusIcon from 'core/components/StatusIcon';\nimport Widget1InputsError from '../Widget1InputsError';\n\ndescribe('Widget1InputsError', () => {\n  let props;\n  const component = () => shallow(<Widget1InputsError {...props} />);\n\n  beforeEach(() => {\n    props = { borrowRule: {}, incomeRule: {} };\n  });\n\n  it('renders the tutorial if incomeRatio is not well defined', () => {\n    props.borrowRule.value = 1;\n    expect(component()\n      .find(T)\n      .props().id).to.include('empty');\n  });\n\n  it('renders the tutorial if borrowRatio is not well defined', () => {\n    props.incomeRule.value = 1;\n    expect(component()\n      .find(T)\n      .props().id).to.include('empty');\n  });\n\n  it('renders the worst of both status for error', () => {\n    props.incomeRule = { value: 1, status: 'ERROR' };\n    props.borrowRule = { value: 1, status: 'SUCCESS' };\n    expect(component()\n      .find(StatusIcon)\n      .props().status).to.equal('ERROR');\n    expect(component()\n      .find(T)\n      .props().id).to.include('income');\n  });\n\n  it('renders the worst of both status for warning', () => {\n    props.incomeRule = { value: 1, status: 'WARNING' };\n    props.borrowRule = { value: 1, status: 'SUCCESS' };\n    expect(component()\n      .find(StatusIcon)\n      .props().status).to.equal('WARNING');\n    expect(component()\n      .find(T)\n      .props().id).to.include('income');\n  });\n\n  it('renders the worst of both status for warning and error', () => {\n    props.incomeRule = { value: 1, status: 'WARNING' };\n    props.borrowRule = { value: 1, status: 'ERROR' };\n    expect(component()\n      .find(StatusIcon)\n      .props().status).to.equal('ERROR');\n    expect(component()\n      .find(T)\n      .props().id).to.include('borrow');\n  });\n\n  it('renders success if both are success', () => {\n    props.incomeRule = { value: 1, status: 'SUCCESS' };\n    props.borrowRule = { value: 1, status: 'SUCCESS' };\n    expect(component()\n      .find(StatusIcon)\n      .props().status).to.equal('SUCCESS');\n    expect(component()\n      .find(T)\n      .props().id).to.include('success');\n  });\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport T from 'core/components/Translation';\n\nimport Widget1SingleInput from '../Widget1SingleInput';\nimport Widget1InputsError from './Widget1InputsError';\nimport Widget1InputsReset from './Widget1InputsReset';\nimport Widget1InputsContainer from './Widget1InputsContainer';\n\nexport const Widget1Inputs = ({ finma, fields }) => (\n  <div className=\"widget1-inputs card1\">\n    <div className=\"card-top\">\n      <h3>\n        <T id=\"Widget1Inputs.title\" />\n      </h3>\n      <Widget1InputsReset />\n      <div className=\"widget1-inputs-list\">\n        {fields.map((field, index) => (\n          <Widget1SingleInput key={field} name={field} tabIndex={index} />\n        ))}\n      </div>\n    </div>\n\n    <Widget1InputsError {...finma} />\n  </div>\n);\n\nWidget1Inputs.propTypes = {\n  fields: PropTypes.arrayOf(PropTypes.string).isRequired,\n  finma: PropTypes.object.isRequired,\n};\n\nexport default Widget1InputsContainer(Widget1Inputs);\n","import { connect } from 'react-redux';\n\nimport { widget1Selectors } from '../../../redux/widget1';\n\nconst mapStateToProps = state => ({\n  fields: widget1Selectors.selectFields(state),\n});\n\nexport default connect(mapStateToProps);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { SUCCESS, WARNING, ERROR } from 'core/api/constants';\nimport T from 'core/components/Translation';\nimport Icon from 'core/components/Icon';\nimport StatusIcon from 'core/components/StatusIcon';\nimport { hideFinmaValues } from '../widget1Helpers';\n\nconst STATUSES = [SUCCESS, WARNING, ERROR];\n\nconst getBorrowError = status =>\n  (status === ERROR\n    ? 'Widget1InputsError.borrowError'\n    : 'Widget1InputsError.borrowWarning');\nconst getIncomeError = status =>\n  (status === ERROR\n    ? 'Widget1InputsError.incomeError'\n    : 'Widget1InputsError.incomeWarning');\n\nconst getMessage = (worstStatus, index, borrowStatus, incomeStatus) => {\n  if (worstStatus === SUCCESS) {\n    return 'Widget1InputsError.success';\n  }\n  if (index === 0) {\n    return getBorrowError(borrowStatus);\n  }\n  return getIncomeError(incomeStatus);\n};\n\n// Get the worst of the 2 statuses, if one is error and the other warning\n// It should return error.\n// Spread the array because reverse() changes the array in place\nconst getWorstStatus = (values, orderedValues) => {\n  const match = [...orderedValues]\n    .reverse()\n    .find(value => values.indexOf(value) >= 0);\n  return { match, index: values.indexOf(match) };\n};\n\nconst Widget1InputsError = ({\n  borrowRule: { status: borrowStatus, value: borrowRatio },\n  incomeRule: { status: incomeStatus, value: incomeRatio },\n}) => {\n  if (hideFinmaValues(borrowRatio, incomeRatio)) {\n    return (\n      <div className=\"card-bottom no-responsive-typo-s\">\n        <Icon type=\"up\" className=\"icon\" />\n        <p>\n          <T id=\"Widget1InputsError.empty\" />\n        </p>\n      </div>\n    );\n  }\n\n  const statuses = [borrowStatus, incomeStatus];\n  const { match: worstStatus, index } = getWorstStatus(statuses, STATUSES);\n  const messageId = getMessage(worstStatus, index, borrowStatus, incomeStatus);\n\n  return (\n    <div className=\"card-bottom no-responsive-typo-s\">\n      <StatusIcon status={worstStatus} className=\"icon\" />\n      <p className=\"message\">\n        <T id={messageId} />\n      </p>\n    </div>\n  );\n};\n\nWidget1InputsError.propTypes = {\n  borrowRule: PropTypes.object.isRequired,\n  incomeRule: PropTypes.object.isRequired,\n};\n\nexport default Widget1InputsError;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport IconButton from 'core/components/IconButton';\nimport Widget1InputsResetContainer from './Widget1InputsResetContainer';\n\nconst Widget1InputsReset = ({ onClick }) => (\n  <span className=\"widget1-inputs-reset\">\n    <IconButton type=\"backupRestore\" tooltip=\"Reset\" onClick={onClick} />\n  </span>\n);\n\nWidget1InputsReset.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default Widget1InputsResetContainer(Widget1InputsReset);\n","import { connect } from 'react-redux';\nimport { widget1Actions } from '../../../redux/widget1';\n\nconst mapDispatchToProps = dispatch => ({\n  onClick: () => dispatch(widget1Actions.resetCalculator()),\n});\n\nexport default connect(\n  null,\n  mapDispatchToProps,\n);\n","/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport { shallow } from 'core/utils/testHelpers/enzyme';\n\nimport Slider from 'core/components/Material/Slider';\nimport IconButton from 'core/components/IconButton';\nimport Widget1SingleInputSlider from '../Widget1SingleInputSlider';\n\ndescribe('Widget1SingleInputSlider', () => {\n  let props;\n  const component = () => shallow(<Widget1SingleInputSlider {...props} />);\n\n  beforeEach(() => {\n    props = {};\n  });\n\n  it('should render a Slider', () => {\n    expect(component().find(Slider).length).to.equal(1);\n  });\n\n  it('should pass the value to the slider', () => {\n    props.value = 100;\n    props.sliderMax = 150;\n    expect(component()\n      .find(Slider)\n      .props().value).to.equal(100);\n  });\n\n  it('should pass a value of 0 to slider if value is falsy', () => {\n    props.value = '';\n    expect(component()\n      .find(Slider)\n      .props().value).to.equal(0);\n    props.value = undefined;\n    expect(component()\n      .find(Slider)\n      .props().value).to.equal(0);\n    props.value = null;\n    expect(component()\n      .find(Slider)\n      .props().value).to.equal(0);\n  });\n\n  it('should pass the sliderMax to the Slider if the value is larger', () => {\n    props.value = 100;\n    props.sliderMax = 50;\n    expect(component()\n      .find(Slider)\n      .props().value).to.equal(50);\n  });\n\n  it('should render an IconButton if value is large than sliderMax', () => {\n    props.sliderMax = 1;\n    props.value = 2;\n    expect(component().find(IconButton).length).to.equal(1);\n  });\n\n  it('should render an IconButton if value is at least 90% of sliderMax', () => {\n    props.sliderMax = 1;\n    props.value = 0.95;\n    expect(component().find(IconButton).length).to.equal(1);\n  });\n\n  it('should not render an IconButton if sliderMax is 0', () => {\n    props.sliderMax = 0;\n    expect(component().find(IconButton).length).to.equal(0);\n  });\n\n  it('should not render an IconButton if value is smaller than sliderMax', () => {\n    props.sliderMax = 2;\n    props.value = 1;\n    expect(component().find(IconButton).length).to.equal(0);\n  });\n\n  it('should not render an IconButton if sliderMax is allowExtremeLoan is true', () => {\n    props.sliderMax = 1;\n    props.value = 2;\n    props.allowExtremeLoan = true;\n    expect(component().find(IconButton).length).to.equal(0);\n  });\n\n  it('should use a special tooltip on the button if this is a loanValue', () => {\n    props.sliderMax = 1;\n    props.value = 2;\n    props.isLoanValue = true;\n\n    expect(component()\n      .find(IconButton)\n      .props().tooltip.props.id).to.include('buttonTooltipLoan');\n\n    props.isLoanValue = false;\n    expect(component()\n      .find(IconButton)\n      .props().tooltip.props.id).to.not.include('buttonTooltipLoan');\n  });\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport T from 'core/components/Translation';\n\nimport Widget1SingleInputContainer from './Widget1SingleInputContainer';\nimport Widget1SingleInputInput from './Widget1SingleInputInput';\nimport Widget1SingleInputSlider from './Widget1SingleInputSlider';\n\nconst Widget1SingleInput = ({\n  value,\n  auto,\n  name,\n  labelName = name,\n  setValue,\n  setInputValue,\n  unsetValue,\n  setAuto,\n  sliderMax,\n  increaseSliderMax,\n  isLoanValue,\n  allowExtremeLoan,\n  tabIndex,\n}) => (\n  <div className=\"widget1-single-input\">\n    <div className=\"widget1-single-input-box\">\n      <label htmlFor={name}>\n        <T id={`Widget1SingleInput.${labelName}`} />\n      </label>\n      <div className=\"widget1-single-input-box-content\">\n        <Widget1SingleInputInput\n          value={value}\n          setInputValue={setInputValue}\n          auto={auto}\n          setAuto={setAuto}\n          unsetValue={unsetValue}\n          name={name}\n          tabIndex={tabIndex}\n        />\n        <Widget1SingleInputSlider\n          value={value}\n          setValue={setValue}\n          sliderMax={sliderMax}\n          increaseSliderMax={increaseSliderMax}\n          isLoanValue={isLoanValue}\n          allowExtremeLoan={allowExtremeLoan}\n        />\n      </div>\n    </div>\n  </div>\n);\n\nWidget1SingleInput.propTypes = {\n  allowExtremeLoan: PropTypes.bool,\n  auto: PropTypes.bool.isRequired,\n  increaseSliderMax: PropTypes.func.isRequired,\n  isLoanValue: PropTypes.bool.isRequired,\n  labelName: PropTypes.string,\n  name: PropTypes.string.isRequired,\n  setAuto: PropTypes.func.isRequired,\n  setInputValue: PropTypes.func.isRequired,\n  setValue: PropTypes.func.isRequired,\n  sliderMax: PropTypes.number.isRequired,\n  tabIndex: PropTypes.number,\n  unsetValue: PropTypes.func.isRequired,\n  value: PropTypes.number,\n};\n\nWidget1SingleInput.defaultProps = {\n  value: undefined,\n  allowExtremeLoan: undefined,\n  labelName: undefined,\n  tabIndex: undefined,\n};\n\nexport default Widget1SingleInputContainer(Widget1SingleInput);\n","import { connect } from 'react-redux';\nimport { withProps, compose } from 'recompose';\nimport { toNumber } from 'core/utils/conversionFunctions';\nimport { widget1Constants, widget1Actions } from '../../../redux/widget1';\n\nconst isLoanValue = name => widget1Constants.CAPPED_FIELDS.includes(name);\n\nconst getSliderMax = (widget1, name) => {\n  if (isLoanValue(name)) {\n    return widget1Actions.getPropertyCappedValue(name, { widget1 });\n  }\n\n  return widget1[name].sliderMax;\n};\n\nconst withConnect = connect(\n  ({ widget1 }, { name }) => ({\n    ...widget1[name],\n    sliderMax: getSliderMax(widget1, name),\n    isLoanValue: isLoanValue(name),\n    purchaseType: widget1.purchaseType,\n  }),\n  (dispatch, { name }) => ({\n    setInputValue: (event) => {\n      let { value } = event.target;\n      if (value) {\n        value = toNumber(value);\n      }\n      dispatch(widget1Actions.setValue(name, value));\n    },\n    setValue: value => dispatch(widget1Actions.setValue(name, value)),\n    unsetValue: () => dispatch(widget1Actions.setValue(name, '')),\n    setAuto: () => dispatch(widget1Actions.setAuto(name)),\n    increaseSliderMax: () => {\n      if (isLoanValue(name)) {\n        return dispatch(widget1Actions.setAllowExtremeLoan(name));\n      }\n      return dispatch(widget1Actions.increaseSliderMax(name));\n    },\n  }),\n);\n\nconst withCorrectPropertyName = withProps(({ name, purchaseType }) => ({\n  labelName:\n    name === widget1Constants.PROPERTY\n    && purchaseType === widget1Constants.PURCHASE_TYPE.REFINANCING\n      ? 'propertyValue'\n      : undefined,\n}));\n\nexport default compose(\n  withConnect,\n  withCorrectPropertyName,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { toMoney } from '../../../utils/conversionFunctions';\nimport InputAdornment from '../../Material/InputAdornment';\nimport Input from '../../Material/Input';\nimport T from '../../Translation';\nimport IconButton from '../../IconButton';\n\nconst useStyles = makeStyles(theme => ({\n  root: {},\n  input: {\n    paddingBottom: 8,\n    paddingTop: 8,\n  },\n  notchedOutline: {\n    borderColor: 'unset',\n    borderWidth: 0,\n  },\n}));\n\nconst Widget1SingleInputInput = ({\n  name,\n  value,\n  setInputValue,\n  auto,\n  unsetValue,\n  tabIndex,\n}) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classnames('widget1-input', { auto })}>\n      {/* Use type tel to display right keyboard without type number issues */}\n      <Input\n        id={name}\n        type=\"tel\"\n        value={toMoney(value)}\n        onChange={setInputValue}\n        startAdornment={(\n          <InputAdornment position=\"start\">\n            <span className=\"widget1-input-currency\">CHF</span>\n          </InputAdornment>\n        )}\n        endAdornment={(\n          <InputAdornment position=\"end\">\n            <IconButton\n              type=\"close\"\n              tooltip={<T id=\"general.erase\" />}\n              onClick={unsetValue}\n              tabIndex={-1}\n              size=\"small\"\n            />\n          </InputAdornment>\n        )}\n        tabIndex={tabIndex}\n        classes={classes}\n      />\n    </div>\n  );\n};\n\nWidget1SingleInputInput.propTypes = {\n  auto: PropTypes.bool.isRequired,\n  name: PropTypes.string.isRequired,\n  setInputValue: PropTypes.func.isRequired,\n  tabIndex: PropTypes.number,\n  unsetValue: PropTypes.func.isRequired,\n  value: PropTypes.any,\n};\n\nWidget1SingleInputInput.defaultProps = {\n  value: '',\n  tabIndex: undefined,\n};\n\nexport default Widget1SingleInputInput;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Slider from 'core/components/Material/Slider';\nimport T from 'core/components/Translation';\nimport IconButton from 'core/components/IconButton';\n\n// Avoid weird slider bug, by first checking if value exists\n// https://github.com/react-component/slider/issues/387\nconst getSliderValue = (value, sliderMax) => {\n  if (value) {\n    if (value >= sliderMax) {\n      return sliderMax;\n    }\n    return value;\n  }\n  return 0;\n};\n\nconst INCREASE_SLIDER_LIMIT = 0.9;\n\nconst showIncreaseButton = (value, sliderMax, allowExtremeLoan) =>\n  sliderMax > 0\n  && value >= INCREASE_SLIDER_LIMIT * sliderMax\n  && !allowExtremeLoan;\n\nconst Widget1SingleInputSlider = ({\n  value,\n  setValue,\n  sliderMax,\n  increaseSliderMax,\n  isLoanValue,\n  allowExtremeLoan,\n}) => (\n  <div className=\"widget1-slider\">\n    <Slider\n      min={0}\n      max={sliderMax}\n      step={5000}\n      // Do this to prevent an onChange event when typing in a value larger\n      // than sliderMax, which sets the value back to sliderMax\n      value={getSliderValue(value, sliderMax)}\n      onChange={setValue}\n      className=\"slider\"\n      tabIndex={-1}\n    />\n    {showIncreaseButton(value, sliderMax, allowExtremeLoan) ? (\n      <IconButton\n        type=\"add\"\n        tooltip={(\n          <T\n            id={`Widget1SingleInputSlider.${\n              isLoanValue ? 'buttonTooltipLoan' : 'buttonTooltip'\n            }`}\n          />\n        )}\n        onClick={increaseSliderMax}\n        tabIndex={-1}\n        size=\"small\"\n      />\n    ) : (\n      <div className=\"button-placeholder\" />\n    )}\n  </div>\n);\n\nWidget1SingleInputSlider.propTypes = {\n  allowExtremeLoan: PropTypes.bool,\n  increaseSliderMax: PropTypes.func.isRequired,\n  isLoanValue: PropTypes.bool.isRequired,\n  setValue: PropTypes.func.isRequired,\n  sliderMax: PropTypes.number.isRequired,\n  value: PropTypes.number,\n};\n\nWidget1SingleInputSlider.defaultProps = {\n  value: undefined,\n  allowExtremeLoan: undefined,\n};\n\nexport default Widget1SingleInputSlider;\n","export { default } from './Widget1SingleInput.jsx';\n","import { widget1Constants } from '../../redux/widget1';\nimport {\n  getBorrowRatio,\n  getRefinancingBorrowRatio,\n  getIncomeRatio,\n  getFinmaMonthlyCost,\n  validateIncomeRatio,\n  validateBorrowRatio,\n} from './widget1Math';\n\nexport const hideFinmaValues = (borrowRatio, incomeRatio) =>\n  !(borrowRatio && incomeRatio)\n  || Math.abs(borrowRatio) === Infinity\n  || Math.abs(incomeRatio) === Infinity;\n\nexport const getFinmaValues = ({\n  salary,\n  fortune,\n  wantedLoan,\n  propertyValue,\n  purchaseType,\n}) => {\n  const { totalMonthly: finmaMonthlyCost } = getFinmaMonthlyCost(\n    propertyValue,\n    fortune,\n    wantedLoan,\n  );\n  const borrowRatio = purchaseType === widget1Constants.PURCHASE_TYPE.ACQUISITION\n    ? getBorrowRatio(propertyValue, fortune)\n    : getRefinancingBorrowRatio(propertyValue, wantedLoan);\n  const incomeRatio = getIncomeRatio(salary, finmaMonthlyCost);\n  const borrowRuleStatus = validateBorrowRatio(borrowRatio);\n  const incomeRuleStatus = validateIncomeRatio(incomeRatio);\n\n  if (hideFinmaValues(borrowRatio, incomeRatio)) {\n    return {\n      borrowRule: { value: 0, ...borrowRuleStatus },\n      incomeRule: { value: 0, ...incomeRuleStatus },\n      finmaMonthlyCost: 0,\n    };\n  }\n\n  return {\n    borrowRule: { value: borrowRatio, ...borrowRuleStatus },\n    incomeRule: { value: incomeRatio, ...incomeRuleStatus },\n    finmaMonthlyCost,\n  };\n};\n","import { SUCCESS, WARNING, ERROR } from 'core/api/constants';\n\nimport {\n  NOTARY_FEES,\n  AMORTIZATION_STOP,\n  MAINTENANCE_REAL,\n  MAINTENANCE_FINMA,\n  INTERESTS_FINMA,\n  MAX_BORROW_RATIO_PRIMARY_PROPERTY,\n  MAX_BORROW_RATIO_OTHER,\n  MAX_BORROW_RATIO_WITH_PLEDGE,\n  FORTUNE_WARNING_TIGHT,\n  INCOME_WARNING_TIGHT,\n  FORTUNE_ERROR,\n  INCOME_ERROR,\n  MAX_INCOME_RATIO,\n  MAX_INCOME_RATIO_TIGHT,\n} from 'core/config/financeConstants';\n\nexport const getLoanValue = (propertyValue, fortune) =>\n  propertyValue * (1 + NOTARY_FEES) - fortune;\n\nexport const getRefinancingBorrowRatio = (propertyValue, loan) =>\n  loan / propertyValue;\n\nexport const getBorrowRatio = (propertyValue, fortune) =>\n  getRefinancingBorrowRatio(\n    propertyValue,\n    getLoanValue(propertyValue, fortune),\n  );\n\nexport const getYearlyAmortization = ({\n  propertyValue,\n  loanValue,\n  yearsToRetirement = 15,\n}) => {\n  const borrowValue = loanValue / propertyValue;\n  const percentToAmortize = borrowValue - AMORTIZATION_STOP;\n\n  if (percentToAmortize <= 0) {\n    // If you're below the cut-off value, no need to amortize\n    return 0;\n  }\n\n  // borrowValue is above 65%\n  // 15 years amortization is the default, but if you're older, you'll\n  // have to amortize faster\n  return (percentToAmortize * propertyValue) / yearsToRetirement;\n};\n\n// Given the value of a property, the down payment and interest rate,\n// return the yearly interests to pay.\n// This includes the money lost through NOTARY_FEES\nexport const getSimpleYearlyInterests = (loanValue, interests) =>\n  loanValue * interests;\n\nexport const getSimpleYearlyMaintenance = (\n  propertyValue,\n  maintenanceRate = MAINTENANCE_REAL,\n) => maintenanceRate * propertyValue;\n\nexport const getIncomeRatio = (yearlySalary, monthlyCost) =>\n  monthlyCost / (yearlySalary / 12);\n\nexport const getFinmaMonthlyCost = (propertyValue, fortune, wantedLoan) => {\n  const maintenanceMonthly = getSimpleYearlyMaintenance(propertyValue, MAINTENANCE_FINMA) / 12;\n  const loanValue = wantedLoan || getLoanValue(propertyValue, fortune);\n  const interestsMonthly = getSimpleYearlyInterests(loanValue, INTERESTS_FINMA) / 12;\n  const amortizationMonthly = getYearlyAmortization({ propertyValue, loanValue }) / 12;\n\n  return {\n    maintenanceMonthly,\n    interestsMonthly,\n    amortizationMonthly,\n    totalMonthly: maintenanceMonthly + interestsMonthly + amortizationMonthly,\n  };\n};\n\nexport const validateIncomeRatio = (incomeRatio) => {\n  // add 0.01% to avoid rounding issues\n  const safeIncomeRatio = incomeRatio - 0.0001;\n  if (safeIncomeRatio <= MAX_INCOME_RATIO) {\n    return { status: SUCCESS, error: undefined };\n  }\n  if (safeIncomeRatio <= MAX_INCOME_RATIO_TIGHT) {\n    return { status: WARNING, error: INCOME_WARNING_TIGHT };\n  }\n\n  return { status: ERROR, error: INCOME_ERROR };\n};\n\nexport const validateBorrowRatio = (\n  borrowRatio,\n  isPrimary = true,\n  allowInsurance = true,\n) => {\n  const maxRatio = isPrimary\n    ? MAX_BORROW_RATIO_PRIMARY_PROPERTY\n    : MAX_BORROW_RATIO_OTHER;\n\n  if (borrowRatio <= maxRatio) {\n    return { status: SUCCESS, error: undefined };\n  }\n  if (allowInsurance && borrowRatio <= MAX_BORROW_RATIO_WITH_PLEDGE) {\n    return { status: WARNING, error: FORTUNE_WARNING_TIGHT };\n  }\n\n  return { status: ERROR, error: FORTUNE_ERROR };\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport classnames from 'classnames';\n\nimport Icon from 'core/components/Icon';\nimport colors from 'core/config/colors';\nimport ValidIconContainer, { STATUS } from './ValidIconContainer';\n\nconst ValidIcon = ({ status, style, fade, hide }) => {\n  if (hide) {\n    return null;\n  }\n\n  switch (status) {\n  case STATUS.HIDE:\n    return null;\n  case STATUS.ERROR:\n    return (\n      <Icon\n        style={{ ...style, color: colors.error }}\n        icon=\"close\"\n        size={50}\n      />\n    );\n  case STATUS.VALID:\n    return (\n      <span\n        style={style}\n        className={classnames('saving-icon', { 'animated zoomOut': !!fade })}\n      >\n        <svg\n          className=\"checkmark\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 52 52\"\n        >\n          <circle\n            className=\"checkmark__circle\"\n            cx=\"26\"\n            cy=\"26\"\n            r=\"25\"\n            fill=\"none\"\n          />\n          <path\n            className=\"checkmark__check\"\n            fill=\"none\"\n            d=\"M14.1 27.2l7.1 7.2 16.7-16.8\"\n          />\n        </svg>\n      </span>\n    );\n  case STATUS.TODO:\n    return (\n      <span className=\"todo-circle\" style={style}>\n        <span className=\"inside\" />\n      </span>\n    );\n  default:\n    return null;\n  }\n};\n\nValidIcon.propTypes = {\n  hide: PropTypes.bool,\n  style: PropTypes.objectOf(PropTypes.any),\n};\n\nValidIcon.defaultProps = {\n  style: {},\n  hide: false,\n};\n\nexport default ValidIconContainer(ValidIcon);\n","import { Meteor } from 'meteor/meteor';\n\nimport React, { Component } from 'react';\n\nexport const STATUS = {\n  ERROR: 'ERROR',\n  VALID: 'VALID',\n  HIDE: 'HIDE',\n  TODO: 'TODO',\n};\n\nconst SAVING_ANIMATION_DURATION_MS = 900;\n\nexport default WrappedComponent =>\n  class extends Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        status: this.getStatus(),\n      };\n\n      this.timer = null;\n    }\n\n    componentWillReceiveProps({ saving: nextSaving }) {\n      // If the animation is going on, don't trigger this again\n      if (this.timer) {\n        return;\n      }\n\n      const { saving } = this.props;\n\n      if (saving === false && nextSaving === true) {\n        // If saving is happening, hide the icon, and then make it reappear\n        this.setState({ status: STATUS.HIDE }, () => {\n          this.timer = Meteor.setTimeout(() => {\n            Meteor.clearTimeout(this.timer);\n            this.timer = null;\n          }, SAVING_ANIMATION_DURATION_MS);\n\n          this.setState({ status: this.getStatus() });\n        });\n      }\n    }\n\n    getStatus = () => {\n      const { error, required, value, todo } = this.props;\n\n      if (error) {\n        return STATUS.ERROR;\n      }\n      if (\n        todo\n        || (required === true && [undefined, '', null].includes(value))\n      ) {\n        return STATUS.TODO;\n      }\n\n      return STATUS.VALID;\n    };\n\n    render() {\n      const { status } = this.state;\n      return <WrappedComponent {...this.props} status={status} />;\n    }\n  };\n","export { default } from './ValidIcon.jsx';\n","import { Meteor } from 'meteor/meteor';\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\n\nimport * as constants from '../../config/constants';\nimport colors from '../../config/colors';\nimport { toNumber, toDecimalNumber } from '../../utils/conversionFunctions';\nimport MyTextInput from '../TextInput';\nimport ValidIcon from './ValidIcon';\nimport FormValidator from './FormValidator';\n\nconst styles = {\n  div: {\n    position: 'relative',\n  },\n  infoIcon: {\n    position: 'absolute',\n    bottom: 5,\n    left: -40,\n    padding: 10,\n  },\n  infoStyle: {\n    color: colors.primary,\n    borderColor: colors.primary,\n  },\n};\n\nconst cleanValue = v => (v === 0 ? 0 : v || '');\n\nconst isEqual = (value, currentValue, type) => {\n  if (type === 'date') {\n    // To avoid the saving icon from firing twice when chaning the date,\n    // only compare the date without times\n    // If we ever have date inputs in autoform that need time, we'll have to find another hack\n\n    return moment(value).isSame(currentValue, 'day');\n  }\n\n  return value === cleanValue(currentValue);\n};\n\nclass AutoFormTextInput extends Component {\n  constructor(props) {\n    super(props);\n\n    const { currentValue, number, decimal } = props.inputProps;\n\n    this.state = {\n      // Make sure 0 values are displayed properly\n      value: cleanValue(currentValue),\n      errorText: '',\n      saving: false,\n      showInfo: false,\n      history: [cleanValue(currentValue)],\n    };\n\n    if (number) {\n      if (decimal) {\n        this.formatter = toDecimalNumber;\n      } else {\n        this.formatter = toNumber;\n      }\n    } else {\n      this.formatter = v => v;\n    }\n  }\n\n  componentWillUnmount() {\n    Meteor.clearTimeout(this.timeout);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const valueIsDifferent = nextProps.inputProps.currentValue !== this.props.inputProps.currentValue;\n    if (valueIsDifferent) {\n      // To handle race conditions, check if the new value from the DB\n      // has been typed in the past\n      // If it has, then don't update the textfield\n      // If it hasn't, override it, because the backend says it should be a new value\n      const valueExistsInHistory = this.state.history.includes(nextProps.inputProps.currentValue);\n\n      if (!valueExistsInHistory) {\n        this.handleChange(null, nextProps.inputProps.currentValue);\n      }\n    }\n  }\n\n  handleBlur = () => {\n    this.setState({ showInfo: false });\n    // If the value has changed, save it\n    // state is initialized as '', but currentValue is initially undefined, so check that too\n    this.saveValue(true);\n  };\n\n  handleChange = (_, value) => {\n    const {\n      saveOnChange,\n      showValidIconOnChange,\n      inputProps: { currentValue, inputType },\n    } = this.props;\n\n    // Make sure value is a number if this is a number or money input\n    // const safeValue =\n    //   this.props.number || this.props.money\n    //     ? toNumber(event.target.value)\n    //     : event.target.value;\n\n    if (isEqual(value, currentValue, inputType)) {\n      return;\n    }\n\n    this.setState(\n      ({ history }) => ({ value, history: [...history, value] }),\n      () => {\n        // do not show saving icon when changing text, only show it on blur\n        if (saveOnChange) {\n          this.saveValue(showValidIconOnChange);\n        }\n      },\n    );\n  };\n\n  handleFocus = () => {\n    this.setState({ showInfo: true });\n  };\n\n  saveValue = (showSaving) => {\n    const {\n      updateFunc,\n      docId,\n      inputProps: { id, currentValue, inputType },\n    } = this.props;\n    const { value } = this.state;\n    // Save data to DB\n    const object = { [id]: value };\n    let shouldSave = true;\n\n    // Don't save if value hasn't changed\n    if (isEqual(value, currentValue, inputType)) {\n      shouldSave = false;\n    }\n\n    Meteor.clearTimeout(this.timeout);\n    this.timeout = Meteor.setTimeout(() => {\n      Promise.resolve()\n        .then(() => shouldSave && updateFunc({ object, id: docId }))\n        // on success, set saving briefly to true, before setting it to false again to trigger icon\n        .then(() => this.setState({ errorText: '', saving: showSaving }))\n        // If there was an error, reset value to the backend value\n        .catch(() => this.setState({ value: currentValue }))\n        .finally(() => this.setState({ saving: false }));\n    }, constants.AUTOSAVE_DEBOUNCE);\n  };\n\n  render() {\n    const {\n      inputProps: {\n        style,\n        label,\n        placeholder,\n        number,\n        id,\n        multiline,\n        rows,\n        info,\n        disabled,\n        money,\n        required,\n        date,\n        percent,\n        onFocusChange,\n        focused,\n        todo,\n\n        // Destructure these props to avoid warnings\n        inputRef,\n        currentValue,\n        condition,\n        decimal,\n        intlId,\n        saveOnChange,\n\n        ...otherProps\n      },\n      noValidator,\n      savingIconStyle,\n      admin,\n      inputLabelProps,\n    } = this.props;\n    const { value, errorText, saving, showInfo } = this.state;\n\n    let type;\n    if (money) {\n      type = 'money';\n    } else if (number) {\n      type = 'number';\n    } else if (date) {\n      type = 'date';\n    } else if (percent) {\n      type = 'percent';\n    } else {\n      type = 'text';\n    }\n\n    return (\n      <div className=\"form-input__row\" style={{ ...styles.div, ...style }}>\n        <MyTextInput\n          {...otherProps}\n          InputProps={{ onFocusChange, focused }}\n          label={label}\n          placeholder={placeholder}\n          value={value}\n          onChange={this.handleChange}\n          onBlur={this.handleBlur}\n          onFocus={this.handleFocus}\n          type={type}\n          id={id}\n          multiline={multiline}\n          rows={rows}\n          info={errorText || (showInfo && info)}\n          error={!!errorText}\n          disabled={disabled}\n          style={{ width: '100%', ...style, marginBottom: 16 }}\n          noValidate\n          fullWidth\n          inputLabelProps={inputLabelProps}\n        />\n        <ValidIcon\n          saving={saving}\n          error={!!errorText}\n          style={{ ...styles.savingIcon, ...savingIconStyle }}\n          value={value}\n          required={required}\n          hide={admin}\n          todo={todo}\n        />\n        {!noValidator && <FormValidator {...this.props} />}\n      </div>\n    );\n  }\n}\n\nAutoFormTextInput.propTypes = {\n  autocomplete: PropTypes.string,\n  currentValue: PropTypes.any,\n  decimal: PropTypes.bool,\n  docId: PropTypes.string.isRequired,\n  floatingLabelFixed: PropTypes.bool,\n  info: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.object,\n    PropTypes.array,\n  ]),\n  inputProps: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    label: PropTypes.node.isRequired,\n    placeholder: PropTypes.node.isRequired,\n    style: PropTypes.objectOf(PropTypes.any),\n    multiline: PropTypes.bool,\n    disabled: PropTypes.bool,\n  }).isRequired,\n  inputStyle: PropTypes.objectOf(PropTypes.any),\n  money: PropTypes.bool,\n  noValidator: PropTypes.bool,\n  number: PropTypes.bool,\n  rows: PropTypes.number,\n  saveOnChange: PropTypes.bool,\n  savingIconStyle: PropTypes.object,\n  showValidIconOnChange: PropTypes.bool,\n  updateFunc: PropTypes.func,\n};\n\nAutoFormTextInput.defaultProps = {\n  autocomplete: '',\n  currentValue: '',\n  decimal: false,\n  floatingLabelFixed: true,\n  info: '',\n  inputStyle: undefined,\n  money: false,\n  noValidator: false,\n  number: false,\n  rows: 1,\n  saveOnChange: true,\n  savingIconStyle: {},\n  showValidIconOnChange: false,\n};\n\nexport default AutoFormTextInput;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport get from 'lodash/get';\n\nimport Checkbox from 'core/components/Checkbox';\n\nconst handleCheck = (\n  { updateFunc, docId, inputProps: { id } },\n  isInputChecked,\n) => {\n  const object = { [`adminValidation.${id}`]: isInputChecked };\n  updateFunc({ object, id: docId });\n};\n\nconst styles = {\n  div: {\n    position: 'absolute',\n    top: '0px',\n    right: '0px',\n  },\n  wrapper: {\n    position: 'relative',\n    right: '-100%',\n  },\n};\n\nconst FormValidator = (props) => {\n  let id;\n  const { admin, doc, inputProps } = props;\n  if (!admin) {\n    return null;\n  }\n\n  if (!inputProps) {\n    id = props.id;\n  } else {\n    id = inputProps.id;\n  }\n\n  const checked = !!get(doc.adminValidation, id);\n\n  return (\n    <div style={styles.div}>\n      <div style={styles.wrapper}>\n        <Checkbox\n          label={checked ? 'Validé' : 'Valider'}\n          value={checked}\n          onChange={(e, c) => handleCheck(props, c)}\n        />\n      </div>\n    </div>\n  );\n};\n\nFormValidator.propTypes = {\n  admin: PropTypes.bool,\n  doc: PropTypes.objectOf(PropTypes.any).isRequired,\n};\n\nFormValidator.defaultProps = {\n  admin: false,\n};\n\nexport default FormValidator;\n","/* eslint-env mocha */\nimport React from 'react';\nimport { shallow } from 'core/utils/testHelpers/enzyme';\nimport { expect } from 'chai';\n\nimport Button from 'core/components/Button';\n\ndescribe('Button', () => {\n  // Label removes testing warnings\n  const wrapper = props => shallow(<Button label=\"test\" {...props} />);\n\n  it('renders', () => {\n    expect(wrapper().exists()).to.equal(true);\n  });\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport omit from 'lodash/omit';\nimport MuiButton from '@material-ui/core/Button';\nimport { withStyles } from '@material-ui/core/styles';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Fab from '@material-ui/core/Fab';\nimport { mapProps, compose } from 'recompose';\nimport cx from 'classnames';\n\nimport Icon from 'core/components/Icon';\nimport Link from '../Link';\n\nconst styles = theme => ({\n  root: {\n    color: theme.palette.error.main,\n    borderColor: theme.palette.error.main,\n    '&$raised': {\n      color: theme.palette.error.contrastText,\n      backgroundColor: theme.palette.error.main,\n    },\n    '&:hover': {\n      backgroundColor: fade(\n        theme.palette.text.primary,\n        theme.palette.action.hoverOpacity,\n      ),\n    },\n  },\n  raised: {},\n});\n\nconst getColor = ({ primary, secondary, color, error }) => {\n  if (primary) {\n    return 'primary';\n  }\n  if (secondary) {\n    return 'secondary';\n  }\n  if (error) {\n    return 'error';\n  }\n\n  return color;\n};\n\nconst getVariant = ({ raised, outlined }) => {\n  if (raised) {\n    return 'contained';\n  }\n  if (outlined) {\n    return 'outlined';\n  }\n  return undefined;\n};\n\nconst getContent = ({ icon, fab, label, children, iconAfter }) => {\n  if (iconAfter) {\n    return (\n      <>\n        {label || children}\n        {icon && !fab && <span style={{ height: '100%', width: 8 }} />}\n        {icon}\n      </>\n    );\n  }\n\n  return (\n    <>\n      {icon}\n      {icon && !fab && <span style={{ height: '100%', width: 8 }} />}\n      {label || children}\n    </>\n  );\n};\n\nconst Button = (props) => {\n  const childProps = omit(props, [\n    'iconAfter',\n    'primary',\n    'secondary',\n    'label',\n    'icon',\n    'link',\n    'raised',\n    'outlined',\n    'error',\n    'classes',\n  ]);\n\n  const variant = props.variant || getVariant(props);\n  const color = props.color || getColor(props);\n\n  const Comp = props.fab ? Fab : MuiButton;\n\n  const button = (\n    <Comp\n      {...childProps}\n      color={color}\n      variant={variant}\n      component={props.component || (props.link ? Link : 'button')}\n      to={props.to || undefined}\n      className={cx(props.className, {\n        [props.classes.root]: color === 'error',\n        [props.classes.raised]: !!(color === 'error' && variant === 'raised'),\n      })}\n    >\n      {getContent(props)}\n    </Comp>\n  );\n\n  if (props.tooltip) {\n    if (props.disabled) {\n      // When the button is disabled, it does not trigger pointer-events,\n      // so a tooltip will not appear\n      // Careful with styling here, as the additional span might break layouts\n      return (\n        <Tooltip title={props.tooltip}>\n          <span>{button}</span>\n        </Tooltip>\n      );\n    }\n\n    return <Tooltip title={props.tooltip}>{button}</Tooltip>;\n  }\n\n  return button;\n};\n\nButton.propTypes = {\n  children: PropTypes.node,\n  icon: PropTypes.node,\n  label: PropTypes.node,\n  link: PropTypes.bool,\n  raised: PropTypes.bool,\n};\n\nButton.defaultProps = {\n  raised: false,\n  link: false,\n};\n\nconst withLoadingProp = mapProps(({ loading, ...props }) =>\n  (loading\n    ? {\n      ...props,\n      disabled: true,\n      icon: <Icon type=\"loop-spin\" />,\n      children: props.fab ? null : props.children,\n    }\n    : props));\n\nexport default compose(\n  withLoadingProp,\n  withStyles(styles),\n)(Button);\n","export { default } from './Button';\n","// @flow\nimport React, { Component } from 'react';\n\nimport Loading from '../../Loading';\nimport StickyPopover from '../../StickyPopover';\nimport queries from './queries';\nimport { titles, components } from './CollectionIconLinkPopupComponents';\n\ntype CollectionIconLinkPopupProps = {\n  _id: string,\n  children: any,\n  collection: string,\n};\ntype CollectionIconLinkPopupState = {\n  data?: Object,\n};\n\nexport default class CollectionIconLinkPopup extends Component<\n  CollectionIconLinkPopupProps,\n  CollectionIconLinkPopupState,\n> {\n  constructor(props) {\n    super(props);\n    this.state = { data: null };\n  }\n\n  loadData = () => {\n    const { collection, _id } = this.props;\n    const query = queries[collection];\n\n    query(_id, (err, data) => this.setState({ data }));\n  };\n\n  getPopoverContent = () => {\n    const { data } = this.state;\n    const { collection, additionalPopoverContent } = this.props;\n\n    if (!data) {\n      return <Loading small />;\n    }\n\n    const CollectionComponent = components[collection];\n\n    return (\n      <CollectionComponent {...data}>\n        {additionalPopoverContent}\n      </CollectionComponent>\n    );\n  };\n\n  getPopoverTitle = () => {\n    const { data } = this.state;\n    const { collection } = this.props;\n\n    if (!data) {\n      return null;\n    }\n\n    const CollectionTitle = titles[collection];\n\n    return <CollectionTitle {...data} />;\n  };\n\n  render() {\n    const { children, forceOpen } = this.props;\n    const { data } = this.state;\n\n    return (\n      <StickyPopover\n        component={this.getPopoverContent()}\n        title={this.getPopoverTitle()}\n        onMouseEnter={!data ? this.loadData : null}\n        delay={data ? 0 : 200}\n        forceOpen={forceOpen}\n      >\n        {children}\n      </StickyPopover>\n    );\n  }\n}\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheckCircle } from '@fortawesome/pro-light-svg-icons/faCheckCircle';\nimport { faExclamationCircle } from '@fortawesome/pro-light-svg-icons/faExclamationCircle';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport colors from 'core/config/colors';\nimport {\n  LOANS_COLLECTION,\n  USERS_COLLECTION,\n  BORROWERS_COLLECTION,\n  PROPERTIES_COLLECTION,\n  OFFERS_COLLECTION,\n  PROMOTIONS_COLLECTION,\n  ORGANISATIONS_COLLECTION,\n  CONTACTS_COLLECTION,\n} from '../../../api/constants';\nimport StatusLabel from '../../StatusLabel';\nimport Roles from '../../Roles';\nimport T, { Money, IntlDate } from '../../Translation';\n\nexport const titles = {\n  [LOANS_COLLECTION]: ({ name, status }) => (\n    <span>\n      {name}\n      {' '}\n      <StatusLabel status={status} collection={LOANS_COLLECTION} />\n    </span>\n  ),\n  [USERS_COLLECTION]: ({ name, roles }) => (\n    <span>\n      {name}\n      {' '}\n      <Roles className=\"secondary\" roles={roles} />\n    </span>\n  ),\n  [BORROWERS_COLLECTION]: ({ name }) => <span>{name}</span>,\n  [PROPERTIES_COLLECTION]: ({ address1, name, status }) => (\n    <span>\n      {name || address1}\n      {' '}\n      {status && (\n        <StatusLabel status={status} collection={PROPERTIES_COLLECTION} />\n      )}\n    </span>\n  ),\n  [OFFERS_COLLECTION]: ({\n    lender: {\n      loan: { name },\n      organisation: { name: orgName, logo },\n    },\n  }) => (\n    <span>\n      {orgName}\n      {' '}\npour\n      {name}\n    </span>\n  ),\n  [PROMOTIONS_COLLECTION]: ({ name, status }) => (\n    <span>\n      {name}\n      {' '}\n      <StatusLabel status={status} collection={PROMOTIONS_COLLECTION} />\n    </span>\n  ),\n  [ORGANISATIONS_COLLECTION]: ({ name, type }) => (\n    <span>\n      {name}\n      {' '}\n      <span className=\"secondary\">\n        <T id={`Forms.type.${type}`} />\n      </span>\n    </span>\n  ),\n  [CONTACTS_COLLECTION]: ({ name, organisations = [] }) => (\n    <span>\n      {name}\n      {' '}\n      <span className=\"secondary\">\n        {organisations.length > 0 && organisations[0].name}\n      </span>\n    </span>\n  ),\n};\n\nexport const components = {\n  [LOANS_COLLECTION]: ({\n    user,\n    structures = [],\n    selectedStructure,\n    anonymous,\n    children,\n    borrowers = [],\n  }) => {\n    const structure = structures.find(({ id }) => id === selectedStructure);\n\n    return (\n      <div>\n        {children}\n        {borrowers.length > 0 && (\n          <div>\n            <b>Emprunteurs</b>\n            <ul style={{ margin: 0 }}>\n              {borrowers.map(({ _id, name }, index) => (\n                <li key={_id}>{name || `Emprunteur ${index + 1}`}</li>\n              ))}\n            </ul>\n          </div>\n        )}\n        <div>\n          <b>Hypothèque:</b>\n          {' '}\n          {structure ? <Money value={structure.wantedLoan} /> : '-'}\n        </div>\n        {anonymous && <div>Anonyme</div>}\n        {user && (\n          <div>\n            <b>Utilisateur:</b>\n            {' '}\n            {user.name}\n          </div>\n        )}\n        <div>\n          <b>Conseiller:</b>\n          {' '}\n          <span>\n            {user && user.assignedEmployee ? user.assignedEmployee.name : '-'}\n          </span>\n        </div>\n      </div>\n    );\n  },\n  [USERS_COLLECTION]: ({\n    email,\n    phoneNumber,\n    assignedEmployee,\n    children,\n    referredByUser = {},\n    referredByOrganisation = {},\n    emails = [],\n  }) => {\n    const emailVerified = !!emails.length && emails[0].verified;\n\n    return (\n      <div>\n        {children}\n        <div>\n          <a\n            className=\"color\"\n            href={`mailto:${email}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            {email}\n          </a>\n          <Tooltip\n            title={\n              emailVerified\n                ? \"Cette adresse email a été vérifiée, le client s'est connecté avec.\"\n                : \"Cette adresse email n'a pas été vérifiée, le client ne s'est pas connecté avec.\"\n            }\n          >\n            <FontAwesomeIcon\n              icon={emailVerified ? faCheckCircle : faExclamationCircle}\n              style={{ marginLeft: '4px', color: emailVerified ? colors.success : colors.warning }}\n            />\n          </Tooltip>\n        </div>\n        <div>\n          <a className=\"color\" href={`tel:${phoneNumber}`}>\n            {phoneNumber}\n          </a>\n        </div>\n        <div>\n          <b>Conseiller:</b>\n          {' '}\n          <span>{assignedEmployee ? assignedEmployee.name : '-'}</span>\n        </div>\n        {(referredByUser.name || referredByOrganisation.name) && (\n          <div>\n            <b>Référé par:</b>\n            {' '}\n            <span>\n              {[referredByUser.name, referredByOrganisation.name]\n                .filter(x => x)\n                .join(' - ')}\n            </span>\n          </div>\n        )}\n      </div>\n    );\n  },\n  [BORROWERS_COLLECTION]: ({ user, loans = [], children }) => (\n    <div>\n      {children}\n      {user && <div>{user.name}</div>}\n      <div>\n        <b>Conseiller:</b>\n        {' '}\n        {user && user.assignedEmployee ? user.assignedEmployee.name : '-'}\n      </div>\n      <div>\n        <b>Dossiers:</b>\n        {loans.map(({ name }) => name).join(', ')}\n      </div>\n    </div>\n  ),\n  [PROPERTIES_COLLECTION]: ({ totalValue, children }) => (\n    <div>\n      {children}\n      <Money value={totalValue} />\n    </div>\n  ),\n  [OFFERS_COLLECTION]: ({ maxAmount, feedback, children }) => (\n    <div>\n      {children}\n      <Money value={maxAmount} />\n      <div>\n        <b>Feedback:</b>\n        {' '}\n        {feedback && feedback.date ? (\n          <span className=\"success\">\n            Donné\n            {' '}\n            <IntlDate type=\"relative\" value={feedback.date} />\n          </span>\n        ) : (\n          <span>Non</span>\n        )}\n      </div>\n    </div>\n  ),\n  [PROMOTIONS_COLLECTION]: ({\n    availablePromotionLots,\n    bookedPromotionLots,\n    soldPromotionLots,\n    lenderOrganisation,\n    children,\n  }) => (\n    <div>\n      {children}\n      {lenderOrganisation && (\n        <div>\n          <b>Prêteur:</b>\n          {' '}\n          <b>{lenderOrganisation.name}</b>\n        </div>\n      )}\n      <div>\n        <b>Lots dispo:</b>\n        {availablePromotionLots.length}\n      </div>\n      <div>\n        <b>Réservés:</b>\n        {bookedPromotionLots.length}\n      </div>\n      <div>\n        <b>Vendus:</b>\n        {soldPromotionLots.length}\n      </div>\n    </div>\n  ),\n  [ORGANISATIONS_COLLECTION]: ({ logo, offerCount, children }) => (\n    <div>\n      {children}\n      {logo && (\n        <div style={{ width: 100, height: 50 }}>\n          <img src={logo} style={{ maxWidth: 100, maxHeight: 50 }} />\n        </div>\n      )}\n      {offerCount > 0 && (\n        <div>\n          <b>Offres:</b>\n          {' '}\n          {offerCount}\n        </div>\n      )}\n    </div>\n  ),\n  [CONTACTS_COLLECTION]: ({\n    organisations = [],\n    email,\n    phoneNumber,\n    children,\n  }) => (\n    <div>\n      {children}\n      <div>{organisations.length > 0 && organisations[0].$metadata.title}</div>\n      <div>\n        <a\n          className=\"color\"\n          href={`mailto:${email}`}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          {email}\n        </a>\n      </div>\n      <div>\n        <a className=\"color\" href={`tel:${phoneNumber}`}>\n          {phoneNumber}\n        </a>\n      </div>\n    </div>\n  ),\n};\n","import { adminLoans } from 'core/api/loans/queries';\nimport { adminUsers } from 'core/api/users/queries';\nimport { adminBorrowers } from 'core/api/borrowers/queries';\nimport { adminProperties } from 'core/api/properties/queries';\nimport { adminOffers } from 'core/api/offers/queries';\nimport { proPromotions } from 'core/api/promotions/queries';\nimport { adminOrganisations } from 'core/api/organisations/queries';\nimport { adminContacts } from 'core/api/contacts/queries';\nimport {\n  LOANS_COLLECTION,\n  USERS_COLLECTION,\n  BORROWERS_COLLECTION,\n  PROPERTIES_COLLECTION,\n  OFFERS_COLLECTION,\n  PROMOTIONS_COLLECTION,\n  ORGANISATIONS_COLLECTION,\n  CONTACTS_COLLECTION,\n} from '../../../api/constants';\n\nconst makeQuery = (query, params, cb) => query.clone(params).fetchOne(cb);\n\nexport default {\n  [LOANS_COLLECTION]: (_id, cb) =>\n    makeQuery(\n      adminLoans,\n      {\n        _id,\n        $body: {\n          anonymous: true,\n          borrowers: { name: 1 },\n          name: 1,\n          selectedStructure: 1,\n          status: 1,\n          structures: { wantedLoan: 1, id: 1 },\n          user: { name: 1, assignedEmployee: { name: 1 } },\n        },\n      },\n      cb,\n    ),\n  [USERS_COLLECTION]: (_id, cb) =>\n    makeQuery(\n      adminUsers,\n      {\n        _id,\n        $body: {\n          $filter: 1,\n          assignedEmployee: { name: 1 },\n          email: 1,\n          loans: { name: 1 },\n          name: 1,\n          phoneNumber: 1,\n          roles: 1,\n          referredByUser: { name: 1 },\n          referredByOrganisation: { name: 1 },\n          emails: 1,\n        },\n      },\n      cb,\n    ),\n  [BORROWERS_COLLECTION]: (_id, cb) =>\n    makeQuery(\n      adminBorrowers,\n      {\n        _id,\n        $body: {\n          loans: { name: 1 },\n          name: 1,\n          user: { name: 1, assignedEmployee: { name: 1 } },\n        },\n      },\n      cb,\n    ),\n  [PROPERTIES_COLLECTION]: (_id, cb) =>\n    makeQuery(\n      adminProperties,\n      {\n        _id,\n        $body: {\n          address1: 1,\n          category: 1,\n          documents: { propertyImages: 1 },\n          name: 1,\n          status: 1,\n          totalValue: 1,\n        },\n      },\n      cb,\n    ),\n  [OFFERS_COLLECTION]: (_id, cb) =>\n    makeQuery(\n      adminOffers,\n      {\n        _id,\n        $body: {\n          feedback: 1,\n          lender: { organisation: { name: 1, logo: 1 }, loan: { name: 1 } },\n          maxAmount: 1,\n        },\n      },\n      cb,\n    ),\n  [PROMOTIONS_COLLECTION]: (_id, cb) =>\n    makeQuery(\n      proPromotions,\n      {\n        _id,\n        $body: {\n          availablePromotionLots: 1,\n          bookedPromotionLots: 1,\n          documents: { promotionImage: 1 },\n          lenderOrganisation: { name: 1 },\n          name: 1,\n          soldPromotionLots: 1,\n          status: 1,\n        },\n      },\n      cb,\n    ),\n  [ORGANISATIONS_COLLECTION]: (_id, cb) =>\n    makeQuery(\n      adminOrganisations,\n      {\n        _id,\n        $body: { name: 1, logo: 1, type: 1, offerCount: 1 },\n      },\n      cb,\n    ),\n  [CONTACTS_COLLECTION]: (_id, cb) =>\n    makeQuery(\n      adminContacts,\n      {\n        _id,\n        $body: {\n          email: 1,\n          name: 1,\n          organisations: { name: 1, logo: 1 },\n          phoneNumber: 1,\n        },\n      },\n      cb,\n    ),\n};\n","// @flow\nimport { Meteor } from 'meteor/meteor';\nimport React from 'react';\nimport { Roles } from 'meteor/alanning:roles';\n\nimport { getUserNameAndOrganisation } from '../../api/helpers';\nimport IconLink from './IconLink';\nimport {\n  LOANS_COLLECTION,\n  USERS_COLLECTION,\n  BORROWERS_COLLECTION,\n  PROPERTIES_COLLECTION,\n  OFFERS_COLLECTION,\n  PROMOTIONS_COLLECTION,\n  ORGANISATIONS_COLLECTION,\n  CONTACTS_COLLECTION,\n  ROLES,\n} from '../../api/constants';\nimport { employeesById } from '../../arrays/epotekEmployees';\nimport collectionIcons from '../../arrays/collectionIcons';\nimport CollectionIconLinkPopup from './CollectionIconLinkPopup/CollectionIconLinkPopup';\nimport { getLoanLinkTitle } from './collectionIconLinkHelpers';\n\ntype CollectionIconLinkProps = {\n  relatedDoc: Object,\n  stopPropagation?: Boolean,\n  iconClassName?: string,\n  showIcon?: Boolean,\n};\n\nconst showPopups = Meteor.microservice === 'admin';\n\nconst getIconConfig = ({ collection, _id: docId, ...data } = {}, variant) => {\n  if (!docId) {\n    return {\n      link: '/',\n      icon: 'help',\n      text: \"N'existe plus\",\n    };\n  }\n\n  switch (collection) {\n  case LOANS_COLLECTION: {\n    let text;\n\n    if (variant === 'TASKS_TABLE') {\n      text = getLoanLinkTitle(data);\n    } else {\n      text = data.name;\n    }\n\n    return {\n      link: `/loans/${docId}`,\n      text,\n      hasPopup: true,\n    };\n  }\n  case USERS_COLLECTION: {\n    let text;\n    const { organisations = [], roles = [] } = data;\n    if (\n      (roles.includes(ROLES.ADMIN) || roles.includes(ROLES.DEV))\n        && employeesById[docId]\n    ) {\n      text = (\n        <img\n          src={employeesById[docId].src}\n          alt={data.name}\n          style={{ borderRadius: '50%', width: 20, height: 20 }}\n        />\n      );\n    } else if (organisations.length) {\n      text = getUserNameAndOrganisation({ user: data });\n    } else {\n      text = data.name;\n    }\n\n    return {\n      link: `/users/${docId}`,\n      text,\n      hasPopup: true,\n    };\n  }\n  case BORROWERS_COLLECTION:\n    return {\n      link: `/borrowers/${docId}`,\n      text: data.name,\n      hasPopup: true,\n    };\n  case PROPERTIES_COLLECTION:\n    return {\n      link: `/properties/${docId}`,\n      text: data.address1,\n      hasPopup: true,\n    };\n  case OFFERS_COLLECTION:\n    return {\n      link: `/offers/${docId}`,\n      text: data.organisation.name,\n      hasPopup: true,\n    };\n  case PROMOTIONS_COLLECTION:\n    return {\n      link: `/promotions/${docId}`,\n      text: data.name,\n      hasPopup: true,\n    };\n  case ORGANISATIONS_COLLECTION: {\n    let text;\n    const isDev = Roles.userIsInRole(Meteor.userId(), 'dev');\n    const isMain = data.$metadata && data.$metadata.isMain;\n\n    if (data.$metadata && data.$metadata.title) {\n      text = `${data.$metadata.title} @ ${data.name}${\n        isDev && isMain ? ' (main)' : ''\n      }`;\n    } else {\n      text = `${data.name}${isDev && isMain ? ' (main)' : ''}`;\n    }\n\n    return {\n      link: `/organisations/${docId}`,\n      text,\n      hasPopup: true,\n    };\n  }\n  case CONTACTS_COLLECTION:\n    return {\n      link: `/contacts/${docId}`,\n      text: data.name,\n      hasPopup: true,\n    };\n  case 'NOT_FOUND':\n    return {\n      link: '/',\n      icon: 'help',\n      text: \"N'existe plus\",\n    };\n\n  default:\n    return { text: 'Unknown collection' };\n  }\n};\n\nconst CollectionIconLink = ({\n  forceOpen,\n  iconClassName,\n  relatedDoc,\n  showIcon,\n  stopPropagation,\n  variant,\n}: CollectionIconLinkProps) => {\n  const { collection, _id: docId } = relatedDoc;\n\n  if (!docId) {\n    return null;\n  }\n\n  const {\n    link,\n    icon = collectionIcons[collection],\n    text,\n    hasPopup,\n  } = getIconConfig(relatedDoc, variant);\n\n  if (showPopups && hasPopup) {\n    return (\n      <CollectionIconLinkPopup\n        {...relatedDoc}\n        key={relatedDoc._id}\n        forceOpen={forceOpen}\n      >\n        <IconLink\n          link={link}\n          icon={icon}\n          text={text}\n          className=\"collection-icon\"\n          stopPropagation={stopPropagation}\n          iconClassName={iconClassName}\n          showIcon={showIcon}\n        />\n      </CollectionIconLinkPopup>\n    );\n  }\n\n  return (\n    <IconLink\n      link={link}\n      icon={icon}\n      text={text}\n      stopPropagation={stopPropagation}\n      className=\"collection-icon\"\n      iconClassName={iconClassName}\n      showIcon={showIcon}\n      noIcon\n    />\n  );\n};\n\nexport default CollectionIconLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\n\nimport Icon from '../Icon';\nimport Link from '../Link';\n\nconst IconLink = React.forwardRef((\n  {\n    link,\n    icon,\n    text,\n    children,\n    className,\n    stopPropagation = true,\n    iconClassName,\n    showIcon,\n    ...rest\n  },\n  ref,\n) => (\n  <Link\n    to={link}\n    className={cx('icon-link', iconClassName)}\n    onClick={(e) => {\n      if (stopPropagation) {\n        e.stopPropagation();\n      }\n    }}\n    innerRef={ref}\n    {...rest}\n  >\n    {showIcon && (\n      <Icon type={icon} className={className || 'icon-link-icon'} />\n    )}\n    {children || (typeof text === 'string' ? <span>{text}</span> : text)}\n  </Link>\n));\n\nIconLink.propTypes = {\n  icon: PropTypes.node.isRequired,\n  link: PropTypes.string.isRequired,\n  showIcon: PropTypes.bool,\n  text: PropTypes.node.isRequired,\n};\n\nIconLink.defaultProps = {\n  showIcon: true,\n};\n\nexport default IconLink;\n","export const getLoanLinkTitle = ({ name, user = {}, borrowers = [] }) => {\n  const borrowerName = !!borrowers.length && borrowers[0].name;\n  const userName = user.name || [user.firstName, user.lastName].filter(x => x).join(' ');\n\n  return borrowerName || userName || name;\n};\n","export { default } from './IconLink';\nexport { default as CollectionIconLink } from './CollectionIconLink';\n","import { Meteor } from 'meteor/meteor';\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { impersonateUser } from '../../../api/methods';\n\nexport const impersonate = ({ userId, authToken, history }) => {\n  impersonateUser\n    .run({ userId, authToken })\n    .then(({ emails }) => {\n      Meteor.connection.setUserId(userId);\n      import('../../../utils/notification').then(({ default: notification }) => {\n        notification.success({\n          message: <span id=\"impersonation-success-message\">Yay</span>,\n          description: `Actuellement connecté comme ${emails[0].address}`,\n          duration: 5,\n        });\n      });\n      if (history) {\n        history.push('/');\n      }\n    })\n    .then(() => {\n      if (Meteor.isDevelopment) {\n        sessionStorage.setItem('dev_impersonate_userId', userId);\n        sessionStorage.setItem('dev_impersonate_authToken', authToken);\n      }\n    });\n};\n\nclass ImpersonatePage extends Component {\n  static propTypes = {\n    history: PropTypes.object.isRequired,\n    location: PropTypes.object.isRequired,\n  };\n\n  componentDidMount = () => {\n    const { location, history } = this.props;\n    const paramsQuery = new URLSearchParams(location.search);\n    const userId = paramsQuery.get('userId');\n    const authToken = paramsQuery.get('authToken');\n\n    impersonate({ userId, authToken, history });\n  };\n\n  render() {\n    return <section className=\"impersonate-page\">Impersonating...</section>;\n  }\n}\n\nexport default ImpersonatePage;\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { getLastFriday } from '../InterestsTableDate';\n\ndescribe('InterestsTableDate getLastFriday', () => {\n  it('should return a friday', () => {\n    expect(getLastFriday('June 14, 2018 12:00:00 UTC+2').getDay()).to.equal(5);\n    expect(getLastFriday('June 19, 2018 12:00:00 UTC+2').getDay()).to.equal(5);\n    expect(getLastFriday('June 30, 2018 12:00:00 UTC+2').getDay()).to.equal(5);\n    expect(getLastFriday('June 1, 2018 12:00:00 UTC+2').getDay()).to.equal(5);\n  });\n\n  it('should return the previous friday on a friday', () => {\n    expect(getLastFriday('June 15, 2018 18:00:00 UTC+2').getDate()).to.equal(8);\n  });\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { INTEREST_RATES } from 'core/api/constants';\nimport interestRates, { TRENDS } from '../interestRates';\n\ndescribe('interestRates', () => {\n  it('should be an array of objects', () => {\n    interestRates.forEach((rate, index) =>\n      expect(typeof rate).to.equal('object', index));\n  });\n\n  it('each interest rate should have a type from a constant', () => {\n    interestRates.forEach(rate =>\n      expect(Object.values(INTEREST_RATES).indexOf(rate.type)).to.be.above(\n        -1,\n        rate.type,\n      ));\n  });\n\n  it('each interest rate should have a trend from a constant', () => {\n    interestRates.forEach(rate =>\n      expect(Object.values(TRENDS).indexOf(rate.trend)).to.be.above(\n        -1,\n        rate.trend,\n      ));\n  });\n\n  it('rateLow and rateHigh should be between 0.5% and 3%', () => {\n    interestRates.forEach((rate) => {\n      expect(rate.rateLow).to.be.at.least(0.005);\n      expect(rate.rateHigh).to.be.at.most(0.03);\n    });\n  });\n\n  // This does not apply\n  it.skip('each rate should be higher than the previous one', () => {\n    interestRates.forEach((rate, index, array) => {\n      if (index > 0) {\n        expect(rate.rateLow).to.be.above(array[index - 1].rateLow);\n        expect(rate.rateHigh).to.be.above(array[index - 1].rateHigh);\n      }\n    });\n  });\n});\n","import React from 'react';\n\nimport { IntlDate } from 'core/components/Translation';\n\nconst getRandomInt = (min, max) =>\n  Math.floor(Math.random() * (max - min + 1)) + min;\n\nexport const getLastFriday = (testDate) => {\n  const prevFriday = testDate ? new Date(testDate) : new Date();\n  prevFriday.setHours(getRandomInt(9, 17));\n  prevFriday.setMinutes(getRandomInt(0, 59));\n  prevFriday.setSeconds(getRandomInt(0, 59));\n\n  if (prevFriday.getDay() === 5) {\n    prevFriday.setDate(prevFriday.getDate() - 7);\n  } else {\n    prevFriday.setDate(prevFriday.getDate() - ((prevFriday.getDay() + 2) % 7));\n  }\n  return prevFriday;\n};\n\nconst InterestsTableDate = () => (\n  <small className=\"interests-table-date\">\n    <IntlDate value={getLastFriday()} />\n  </small>\n);\n\nexport default InterestsTableDate;\n","// @flow\nimport { INTEREST_RATES } from 'core/api/constants';\n\nexport const TRENDS = {\n  UP: 'UP',\n  DOWN: 'DOWN',\n  FLAT: 'FLAT',\n};\n\nconst interestRates = [\n  {\n    type: INTEREST_RATES.LIBOR,\n    rateLow: 0.005,\n    rateHigh: 0.01,\n    trend: TRENDS.FLAT,\n  },\n  {\n    type: INTEREST_RATES.YEARS_5,\n    rateLow: 0.008,\n    rateHigh: 0.011,\n    trend: TRENDS.DOWN,\n  },\n  {\n    type: INTEREST_RATES.YEARS_10,\n    rateLow: 0.0113,\n    rateHigh: 0.015,\n    trend: TRENDS.DOWN,\n  },\n  {\n    type: INTEREST_RATES.YEARS_15,\n    rateLow: 0.0155,\n    rateHigh: 0.0195,\n    trend: TRENDS.DOWN,\n  },\n  {\n    type: INTEREST_RATES.YEARS_20,\n    rateLow: 0.018,\n    rateHigh: 0.024,\n    trend: TRENDS.FLAT,\n  },\n  // {\n  //   type: INTEREST_RATES.YEARS_25,\n  //   rateLow: 0.0192,\n  //   rateHigh: 0.0232,\n  //   trend: TRENDS.FLAT,\n  // },\n];\n\nexport const averageRates = interestRates.reduce(\n  (rates, { type, rateLow, rateHigh }) => ({\n    ...rates,\n    [type]: (rateLow + rateHigh) / 2,\n  }),\n  {},\n);\n\nexport default interestRates;\n","// @flow\n/* eslint-env mocha */\nimport React, { useContext } from 'react';\nimport { expect } from 'chai';\nimport Dialog from '@material-ui/core/Dialog';\n\nimport getMountedComponent from 'core/utils/testHelpers/getMountedComponent';\n\nimport ModalManager from '../ModalManager';\nimport ModalManagerContext from '../ModalManagerContext';\n\nconst TestComp = () => {\n  const { openModal } = useContext(ModalManagerContext);\n  return (\n    <div>\n      <button\n        id=\"btn1\"\n        type=\"button\"\n        onClick={() =>\n          openModal({\n            content: <div className=\"dialog-1-content\">Hello world</div>,\n          })\n        }\n      >\n        Click me\n      </button>\n      <button\n        id=\"btn2\"\n        type=\"button\"\n        onClick={() =>\n          openModal({\n            content: <div className=\"dialog-2-content\">Hello world</div>,\n          })\n        }\n      >\n        Click me\n      </button>\n      <button\n        id=\"btn3\"\n        type=\"button\"\n        onClick={() =>\n          openModal([\n            { content: <div className=\"dialog-3-content\">Hello world</div> },\n            { content: <div className=\"dialog-4-content\">Hello world</div> },\n            { content: <div className=\"dialog-5-content\">Hello world</div> },\n          ])\n        }\n      >\n        Click me\n      </button>\n      <button\n        id=\"btn4\"\n        type=\"button\"\n        onClick={() =>\n          openModal([\n            {\n              content: <div className=\"dialog-6-content\">Hello world</div>,\n              actions: ({ closeModal }) => (\n                <button\n                  type=\"button\"\n                  className=\"dialog-close\"\n                  onClick={() =>\n                    new Promise((res) => {\n                      res('Promise worked!');\n                    }).then(closeModal)\n                  }\n                >\n                  Close me\n                </button>\n              ),\n            },\n            {\n              content: ({ returnValue }) => (\n                <div className=\"dialog-7-content\">{returnValue}</div>\n              ),\n            },\n          ])\n        }\n      >\n        Click me\n      </button>\n    </div>\n  );\n};\n\ndescribe('ModalManager', () => {\n  const component = () =>\n    getMountedComponent({\n      Component: props => (\n        <ModalManager>\n          <TestComp {...props} />\n        </ModalManager>\n      ),\n    });\n\n  const closeDialog = () =>\n    component()\n      .find('.dialog-close')\n      .first()\n      .simulate('click');\n\n  beforeEach(() => {\n    getMountedComponent.reset();\n  });\n\n  after(() => {\n    // Avoid polluting test reporting UI with an open Modal\n    closeDialog();\n  });\n\n  it('opens a modal', () => {\n    component()\n      .find('button')\n      .first()\n      .simulate('click');\n\n    expect(component().find('.dialog-1-content').length).to.equal(1);\n    expect(component()\n      .find('.dialog-1-content')\n      .text()).to.equal('Hello world');\n  });\n\n  it('closes a modal', () => {\n    component()\n      .find('button')\n      .first()\n      .simulate('click');\n\n    expect(component().find('.dialog-1-content').length).to.equal(1);\n    closeDialog();\n\n    expect(component().find('.dialog-1-content').length).to.equal(0);\n  });\n\n  it('opens 2 modals one after the other', () => {\n    component()\n      .find('#btn1')\n      .first()\n      .simulate('click');\n\n    component()\n      .find('#btn2')\n      .last()\n      .simulate('click');\n\n    expect(component().find('.dialog-1-content').length).to.equal(1);\n\n    closeDialog();\n\n    expect(component().find('.dialog-2-content').length).to.equal(1);\n\n    closeDialog();\n\n    expect(component()\n      .find(Dialog)\n      .prop('open')).to.equal(false);\n  });\n\n  it('allows passing an array of modals', () => {\n    component()\n      .find('#btn3')\n      .first()\n      .simulate('click');\n\n    expect(component().find('.dialog-3-content').length).to.equal(1);\n\n    closeDialog();\n\n    expect(component().find('.dialog-4-content').length).to.equal(1);\n\n    closeDialog();\n\n    expect(component().find('.dialog-5-content').length).to.equal(1);\n\n    closeDialog();\n\n    expect(component()\n      .find(Dialog)\n      .prop('open')).to.equal(false);\n  });\n\n  it('can pass values between modals', (done) => {\n    component()\n      .find('#btn4')\n      .first()\n      .simulate('click');\n\n    expect(component().find('.dialog-6-content').length).to.equal(1);\n\n    closeDialog();\n\n    // Wait for the promise to resolve\n    setTimeout(() => {\n      component().update();\n\n      expect(component().find('.dialog-7-content').length).to.equal(1);\n      expect(component()\n        .find('.dialog-7-content')\n        .text()).to.equal('Promise worked!');\n\n      closeDialog();\n\n      expect(component()\n        .find(Dialog)\n        .prop('open')).to.equal(false);\n\n      done();\n    }, 0);\n  });\n});\n","// @flow\nimport React from 'react';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport Button from '../Button';\nimport T from '../Translation';\n\ntype DialogComponentsProps = {};\n\nconst makeRenderDialogPart = dialogProps => (part) => {\n  if (typeof part === 'function') {\n    return part(dialogProps);\n  }\n\n  return part;\n};\n\nconst defaultActions = ({ closeModal }) => (\n  <Button className=\"dialog-close\" primary onClick={closeModal}>\n    <T id=\"general.close\" />\n  </Button>\n);\n\nconst DialogComponents = ({\n  closeModal,\n  returnValue,\n  closeAll,\n  dialogContent: Content = {},\n}: DialogComponentsProps) => {\n  if (React.isValidElement(Content)) {\n    return React.cloneElement(Content, { closeModal, returnValue, closeAll });\n  }\n  const renderDialogPart = makeRenderDialogPart({\n    closeModal,\n    returnValue,\n    closeAll,\n  });\n\n  const { title, description, content, actions = defaultActions } = Content;\n\n  return (\n    <>\n      {title && <DialogTitle>{renderDialogPart(title)}</DialogTitle>}\n      <DialogContent>\n        {description && (\n          <DialogContentText>{renderDialogPart(description)}</DialogContentText>\n        )}\n        {renderDialogPart(content)}\n      </DialogContent>\n      <DialogActions>{renderDialogPart(actions)}</DialogActions>\n    </>\n  );\n};\n\nexport default DialogComponents;\n","// @flow\nimport React, { useReducer } from 'react';\nimport Dialog from '@material-ui/core/Dialog';\n\nimport ModalManagerContext from './ModalManagerContext';\nimport DialogComponents from './DialogComponents';\n\ntype ModalManagerProps = {};\n\nconst initialState = { activeModal: null };\n\nlet id = 0;\n\nconst openFirstModal = (state, { payload: modals }) => {\n  let firstModal;\n\n  if (modals.length === 0) {\n    throw new Error('Cannot pass an empty array to ModalManager');\n  }\n\n  const newState = modals.reduce((obj, modal, index) => {\n    const modalId = id;\n\n    if (index === 0) {\n      firstModal = modalId;\n    }\n\n    id += 1;\n    return { ...obj, [modalId]: modal };\n  }, state);\n\n  return { ...newState, activeModal: firstModal };\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n  case 'OPEN_MODAL': {\n    if (Array.isArray(action.payload)) {\n      return openFirstModal(state, action);\n    }\n\n    const modalId = id;\n    id += 1;\n    if (state.activeModal === null) {\n      return { ...state, [modalId]: action.payload, activeModal: modalId };\n    }\n    return { ...state, [modalId]: action.payload };\n  }\n  case 'CLOSE_MODAL': {\n    const {\n      [action.payload.activeModal]: removedModal,\n      activeModal,\n      ...newState\n    } = state;\n    const pendingModals = Object.keys(newState);\n    if (pendingModals.length > 0) {\n      const nextModal = Math.min(...pendingModals);\n      return {\n        ...newState,\n        activeModal: nextModal,\n        [nextModal]: {\n          ...newState[nextModal],\n          returnValue: action.payload.returnValue,\n        },\n      };\n    }\n    return { ...newState, activeModal: null };\n  }\n  case 'CLOSE_ALL': {\n    return initialState;\n  }\n\n  default:\n    return state;\n  }\n};\n\nconst ModalManager = ({ children }: ModalManagerProps) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const { activeModal } = state;\n  const { title, actions, description, content, ...dialogProps } = state[activeModal] || {};\n\n  const openModal = (payload) => {\n    dispatch({ type: 'OPEN_MODAL', payload });\n  };\n\n  const closeModal = returnValue =>\n    dispatch({ type: 'CLOSE_MODAL', payload: { activeModal, returnValue } });\n\n  const closeAll = () => dispatch({ type: 'CLOSE_ALL' });\n\n  return (\n    <ModalManagerContext.Provider value={{ openModal }}>\n      {children}\n      <Dialog {...dialogProps} open={activeModal !== null} onClose={closeModal}>\n        <DialogComponents\n          returnValue={state[activeModal] && state[activeModal].returnValue}\n          dialogContent={state[activeModal]}\n          closeModal={closeModal}\n          closeAll={closeAll}\n        />\n      </Dialog>\n    </ModalManagerContext.Provider>\n  );\n};\n\nexport default ModalManager;\n","import React from 'react';\n\nconst ModalManagerContext = React.createContext();\n\nexport default ModalManagerContext;\n","/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport { shallow } from 'core/utils/testHelpers/enzyme';\n\nimport { PageHead } from '../PageHead';\n\ndescribe('PageHead', () => {\n  let props;\n  const component = () => shallow(<PageHead {...props} />);\n\n  beforeEach(() => {\n    props = { intl: { formatMessage: ({ id }) => id } };\n  });\n\n  it('renders a title tag with just e-Potek in it if no title is provided', () => {\n    expect(component().props('title').title).to.equal('e-Potek');\n  });\n\n  it('renders a meta tag with a charSet', () => {\n    expect(component().props().meta).to.deep.include({\n      charSet: 'UTF-8',\n    });\n  });\n\n  it('renders the title with more stuff if titleId is provided', () => {\n    const titleId = 'yo';\n    props.titleId = titleId;\n    expect(component().props().title).to.equal(`e-Potek | ${titleId}.title`);\n  });\n\n  it('does not add .title at the end of the i18n id if it is already provided', () => {\n    const titleId = 'yo.title';\n    props.titleId = titleId;\n    expect(component().props().title).to.equal(`e-Potek | ${titleId}`);\n  });\n\n  it('does not render a description tag if no descriptionId is provided', () => {\n    expect(component().find('meta[name=\"description\"]').length).to.equal(0);\n  });\n\n  it('renders a description tag if a descriptionId is provided', () => {\n    const descriptionId = 'test';\n    props.descriptionId = descriptionId;\n    expect(component().props().meta).to.deep.include({\n      name: 'description',\n      content: descriptionId,\n    });\n  });\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Helmet } from 'react-helmet';\nimport { injectIntl } from 'react-intl';\n\nconst formatTitle = ({ titleId, title }, formatMessage) => {\n  if (title && typeof title === 'string') {\n    return ` | ${title}`;\n  }\n  if (titleId) {\n    if (titleId.includes('.title')) {\n      return ` | ${formatMessage({ id: `${titleId}` })}`;\n    }\n    return ` | ${formatMessage({ id: `${titleId}.title` })}`;\n  }\n\n  return '';\n};\n\n// Use Helmet in a weird way because of this bug\n// https://github.com/nfl/react-helmet/issues/373\nexport const PageHead = ({\n  descriptionId,\n  intl: { formatMessage },\n  ...props\n}) => (\n  <Helmet\n    defaultTitle=\"e-Potek\"\n    title={`e-Potek${formatTitle(props, formatMessage)}`}\n    meta={[\n      ...(descriptionId\n        ? [\n          {\n            name: 'description',\n            content: formatMessage({ id: descriptionId }),\n          },\n        ]\n        : []),\n      {\n        charSet: 'UTF-8',\n      },\n    ]}\n  />\n);\n\nPageHead.propTypes = {\n  descriptionId: PropTypes.string,\n  intl: PropTypes.object.isRequired,\n  titleId: PropTypes.string,\n};\n\nPageHead.defaultProps = {\n  titleId: undefined,\n  descriptionId: undefined,\n};\n\nexport default injectIntl(PageHead);\n","/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport { shallow } from 'core/utils/testHelpers/enzyme';\n\nimport SearchResults from '../SearchResults';\n\ndescribe('SearchResults', () => {\n  let props;\n  const component = () => shallow(<SearchResults {...props} />);\n\n  beforeEach(() => {\n    props = {};\n  });\n\n  it('This component is a pain to test', () => {\n    // Please refactor me\n  });\n});\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport JsSearch from 'js-search';\nimport { injectIntl } from 'react-intl';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nimport T from 'core/components/Translation';\nimport { generalTooltips } from 'core/arrays/tooltips';\nimport Button from 'core/components/Button';\n\nconst styles = {\n  list: {\n    width: '100%',\n    maxWidth: 800,\n  },\n  selected: {\n    width: '100%',\n    maxWidth: 800,\n  },\n};\n\nclass SearchResults extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { showId: '' };\n    this.setupSearch();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    // Cancel viewing results if something new is typed/deleted\n    if (nextProps.search !== this.props.search && this.state.showId) {\n      this.setState({ showId: '' });\n    }\n  }\n\n  setupSearch = () => {\n    this.search = new JsSearch.Search('id');\n    this.search.addIndex('tooltipMatch');\n    this.search.addIndex('tooltipValue1');\n    this.search.addIndex('tooltipValue2');\n\n    this.tooltips = this.getTooltips();\n    this.search.addDocuments(this.tooltips);\n  };\n\n  getTooltips = () => {\n    const f = this.props.intl.formatMessage;\n    const intlValues = { verticalSpace: ' ' };\n\n    return Object.keys(generalTooltips).map((match) => {\n      const tooltipId = generalTooltips[match].id;\n      const tooltip = {\n        id: tooltipId,\n        tooltipMatch: match,\n        tooltipValue1: f({ id: `tooltip.${tooltipId}` }, intlValues),\n      };\n      if (generalTooltips[match].double) {\n        tooltip.tooltipValue2 = f({ id: `tooltip2.${tooltipId}` }, intlValues);\n      }\n\n      return tooltip;\n    });\n  };\n\n  render() {\n    const { search } = this.props;\n    const { showId } = this.state;\n    const results = this.search.search(search);\n\n    if (showId) {\n      const selectedResult = this.tooltips.filter(result => result.id === showId)[0];\n      return (\n        <div className=\"flex-col\" style={styles.selected}>\n          <h3>{selectedResult.tooltipMatch}</h3>\n          <p>{selectedResult.tooltipValue1}</p>\n          <p>{selectedResult.tooltipValue2}</p>\n          <div className=\"text-center\" style={{ paddingTop: 16 }}>\n            <Button\n              primary\n              label={<T id=\"general.ok\" />}\n              onClick={() => this.setState({ showId: '' })}\n            />\n          </div>\n        </div>\n      );\n    }\n\n    if (search === '') {\n      return (\n        <List style={styles.list}>\n          {this.tooltips.map(result => (\n            <ListItem\n              button\n              divider\n              onClick={() => this.setState({ showId: result.id })}\n              key={result.id}\n            >\n              <ListItemText\n                primary={result.tooltipMatch}\n                secondary={result.tooltipValue1}\n              />\n            </ListItem>\n          ))}\n        </List>\n      );\n    }\n\n    if (search && results.length === 0) {\n      return (\n        <div className=\"description\">\n          <p>\n            <T id=\"SearchResults.none\" />\n          </p>\n        </div>\n      );\n    }\n\n    return (\n      <List style={styles.list}>\n        {results.map(result => (\n          <ListItem\n            button\n            divider\n            onClick={() => this.setState({ showId: result.id })}\n            key={result.id}\n          >\n            <ListItemText\n              primary={result.tooltipMatch}\n              secondary={result.tooltipValue1}\n            />\n          </ListItem>\n        ))}\n      </List>\n    );\n  }\n}\n\nSearchResults.propTypes = {\n  intl: PropTypes.object.isRequired,\n  search: PropTypes.string.isRequired,\n};\n\nexport default injectIntl(SearchResults);\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { sortData, ORDER } from '../tableHelpers';\n\ndescribe('<Table />', () => {\n  describe('sortData', () => {\n    let order;\n    let orderBy;\n    let data;\n    let column;\n\n    beforeEach(() => {\n      order = ORDER.ASC;\n      orderBy = undefined;\n      column = 0;\n    });\n\n    describe('when data is strings', () => {\n      beforeEach(() => {\n        data = [{ columns: ['3'] }, { columns: ['1'] }, { columns: ['2'] }];\n      });\n\n      it('sorts 2 rows of data ascending', () => {\n        const { data: sortedData } = sortData({\n          data,\n          newOrderBy: column,\n          order,\n          orderBy,\n        });\n        expect(sortedData).to.deep.equal([\n          { columns: ['1'] },\n          { columns: ['2'] },\n          { columns: ['3'] },\n        ]);\n      });\n\n      it('sorts 2 rows of data descending when the same column is sorted again', () => {\n        // Initially, the data is already sorted by \"column\"\n        orderBy = column;\n\n        const { data: sortedData } = sortData({\n          data,\n          // Sort it again by \"column\"\n          newOrderBy: column,\n          order,\n          orderBy,\n        });\n\n        expect(sortedData).to.deep.equal([\n          { columns: ['3'] },\n          { columns: ['2'] },\n          { columns: ['1'] },\n        ]);\n      });\n\n      it('sorts 3 rows of data ascending', () => {\n        data = [\n          { columns: ['test 2'] },\n          { columns: ['test 3'] },\n          { columns: ['test 1'] },\n        ];\n        const { data: sortedData } = sortData({\n          data,\n          newOrderBy: column,\n          order,\n          orderBy,\n        });\n        expect(sortedData).to.deep.equal([\n          { columns: ['test 1'] },\n          { columns: ['test 2'] },\n          { columns: ['test 3'] },\n        ]);\n      });\n    });\n\n    describe('when data is numbers', () => {\n      beforeEach(() => {\n        order = ORDER.ASC;\n        data = [{ columns: [3] }, { columns: [2] }];\n      });\n\n      it('sorts 2 rows of data ascending', () => {\n        const { data: sortedData } = sortData({\n          data,\n          newOrderBy: column,\n          order,\n          orderBy,\n        });\n\n        expect(sortedData).to.deep.equal([{ columns: [2] }, { columns: [3] }]);\n      });\n\n      it('sorts 2 rows of data descending', () => {\n        orderBy = column;\n\n        const { data: sortedData } = sortData({\n          data,\n          newOrderBy: column,\n          order,\n          orderBy,\n        });\n\n        expect(sortedData).to.deep.equal([{ columns: [3] }, { columns: [2] }]);\n      });\n    });\n\n    describe('when data is an object', () => {\n      beforeEach(() => {\n        order = ORDER.ASC;\n        data = [\n          { columns: [{ label: 'one', raw: 10 }] },\n          { columns: [{ label: 'three', raw: -2 }] },\n          { columns: [{ label: 'four', raw: 5 }] },\n        ];\n      });\n\n      it('sorts 3 rows of data ascending', () => {\n        const { data: sortedData } = sortData({\n          data,\n          newOrderBy: column,\n          order,\n          orderBy,\n        });\n\n        expect(sortedData).to.deep.equal([\n          { columns: [{ label: 'three', raw: -2 }] },\n          { columns: [{ label: 'four', raw: 5 }] },\n          { columns: [{ label: 'one', raw: 10 }] },\n        ]);\n      });\n\n      it('sorts 3 rows of data descending', () => {\n        orderBy = column;\n        const { data: sortedData } = sortData({\n          data,\n          newOrderBy: column,\n          order,\n          orderBy,\n        });\n\n        expect(sortedData).to.deep.equal([\n          { columns: [{ label: 'one', raw: 10 }] },\n          { columns: [{ label: 'four', raw: 5 }] },\n          { columns: [{ label: 'three', raw: -2 }] },\n        ]);\n      });\n    });\n\n    describe('when data is a Date', () => {\n      beforeEach(() => {\n        order = ORDER.ASC;\n        data = [\n          { columns: [{ label: 'one', raw: new Date('02.05.2015') }] },\n          { columns: [{ label: 'three', raw: new Date('01.01.2010') }] },\n          { columns: [{ label: 'four', raw: new Date('04.06.2010') }] },\n        ];\n      });\n\n      it('sorts 3 rows of data ascending', () => {\n        const { data: sortedData } = sortData({\n          data,\n          newOrderBy: column,\n          order,\n          orderBy,\n        });\n\n        expect(sortedData).to.deep.equal([\n          { columns: [{ label: 'three', raw: new Date('01.01.2010') }] },\n          { columns: [{ label: 'four', raw: new Date('04.06.2010') }] },\n          { columns: [{ label: 'one', raw: new Date('02.05.2015') }] },\n        ]);\n      });\n\n      it('sorts 3 rows of data descending', () => {\n        orderBy = column;\n        const { data: sortedData } = sortData({\n          data,\n          newOrderBy: column,\n          order,\n          orderBy,\n        });\n\n        expect(sortedData).to.deep.equal([\n          { columns: [{ label: 'one', raw: new Date('02.05.2015') }] },\n          { columns: [{ label: 'four', raw: new Date('04.06.2010') }] },\n          { columns: [{ label: 'three', raw: new Date('01.01.2010') }] },\n        ]);\n      });\n    });\n  });\n});\n","import { ORDER } from '../../utils/sortArrayOfObjects';\nimport makeSorter from '../../utils/sorting';\n\nexport { ORDER } from '../../utils/sortArrayOfObjects';\n\n// \"raw\" and \"label\" keys have to be present in the object to display it\n// this way\nexport const shouldDisplayLabelAndData = columnValue =>\n  columnValue !== null\n  && typeof columnValue === 'object'\n  && 'raw' in columnValue\n  && 'label' in columnValue;\n\nconst makeSortFunc = (orderBy, isReversed) => {\n  const sorter = makeSorter(!isReversed);\n\n  return (a, b) => {\n    let valueA = a.columns[orderBy];\n    let valueB = b.columns[orderBy];\n\n    // Add support for columns that have a label and raw data\n    if (shouldDisplayLabelAndData(valueA)) {\n      valueA = valueA.raw;\n      valueB = valueB.raw;\n    }\n\n    return sorter(valueA, valueB);\n  };\n};\n\nconst determineOrder = ({\n  oldOrderBy,\n  newOrderBy,\n  order,\n  changeOrder = true,\n}) => {\n  let isReversed;\n  let finalOrder;\n\n  if (oldOrderBy !== newOrderBy) {\n    // First click, Initial ascending order\n    isReversed = false;\n    finalOrder = ORDER.ASC;\n  } else if (changeOrder) {\n    // Clicked a second time, reverse order\n    isReversed = order === ORDER.ASC;\n    finalOrder = isReversed ? ORDER.DESC : ORDER.ASC;\n  } else {\n    // If data is just being sorted again without user changing the order,\n    // don't change the order and keep it as is.\n    // This can happen if new data is added to the table, or some data changed\n    isReversed = order !== ORDER.ASC;\n    finalOrder = order;\n  }\n\n  return { isReversed, finalOrder };\n};\n\nexport const sortData = ({\n  data,\n  newOrderBy,\n  orderBy: oldOrderBy,\n  order,\n  changeOrder,\n}) => {\n  const { isReversed, finalOrder } = determineOrder({\n    oldOrderBy,\n    newOrderBy,\n    order,\n    changeOrder,\n  });\n\n  const sortedData = data.sort(makeSortFunc(newOrderBy, isReversed));\n\n  return { data: sortedData, order: finalOrder, orderBy: newOrderBy };\n};\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\nimport sinon from 'sinon';\nimport getMountedComponent from 'core/utils/testHelpers/getMountedComponent';\n\nimport Tabs from '../Tabs';\n\ndescribe('Tabs', () => {\n  let props;\n  const component = () =>\n    getMountedComponent({\n      Component: Tabs,\n      props,\n    });\n\n  beforeEach(() => {\n    props = {\n      tabs: [\n        { label: 'test1', content: 'hello world' },\n        { label: 'test2', content: 'hello world' },\n      ],\n    };\n  });\n\n  it.skip('calls onChange prop when changing tabs', () => {\n    const onChangeSpy = sinon.spy();\n    props.onChange = sinon.spy();\n\n    component()\n      .find('.core-tabs-tab')\n      .last()\n      .simulate('click');\n    component().update();\n\n    expect(onChangeSpy.calledOnce).to.equal(true);\n  });\n});\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport MuiTabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport cx from 'classnames';\n\nimport Link from '../Link';\nimport TabsContainer from './TabsContainer';\n\nclass Tabs extends Component {\n  constructor(props) {\n    super(props);\n    // Make sure a tab index of -1 is not used\n    this.state = { value: Math.max(this.props.initialIndex, 0) };\n  }\n\n  componentWillReceiveProps({ initialIndex: nextIndex }) {\n    const { initialIndex } = this.props;\n\n    if (nextIndex !== initialIndex) {\n      this.setState({ value: nextIndex });\n    }\n  }\n\n  handleChange = (event, value) => {\n    const { onChangeCallback } = this.props;\n    this.setState({ value });\n\n    if (typeof onChange === 'function') {\n      onChangeCallback(event);\n    }\n  };\n\n  getContent = () => {\n    const { value } = this.state;\n    const { tabs } = this.props;\n\n    if (tabs.length === 0) {\n      return null;\n    }\n\n    const currentTab = tabs[value];\n\n    if (!currentTab) {\n      // When tabs are added or removed, tabs can break, so readjust current tab value\n      return this.setState({ value: tabs.length - 1 });\n    }\n\n    return currentTab.content;\n  };\n\n  render() {\n    const {\n      classes,\n      tabs,\n      initialIndex,\n      className,\n      onChangeCallback,\n      disableTouchRipple,\n      ...otherProps\n    } = this.props;\n    const { value } = this.state;\n    // initial index is destructured to avoid passing down an unrecognized prop\n    // to MuiTabs\n\n    return (\n      <div className={cx('card1 card-top core-tabs', classes.root, className)}>\n        <MuiTabs\n          classes={{ root: classes.tabsRoot, indicator: classes.tabsIndicator }}\n          className=\"core-tabs-top\"\n          value={value}\n          onChange={this.handleChange}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          {...otherProps}\n        >\n          {tabs.map(({ label, to, id }, i) => (\n            <Tab\n              classes={{\n                root: classes.tabRoot,\n                selected: classes.tabSelected,\n                labelContainer: classes.labelContainer,\n              }}\n              label={label}\n              component={to ? Link : undefined}\n              to={to}\n              key={id || i}\n              className=\"core-tabs-tab\"\n              disableTouchRipple={disableTouchRipple}\n            />\n          ))}\n        </MuiTabs>\n        <div className=\"tab-content\">{this.getContent()}</div>\n      </div>\n    );\n  }\n}\n\nTabs.propTypes = {\n  // Array of objects with 'label' and 'content'\n  classes: PropTypes.object.isRequired,\n  className: PropTypes.string,\n  initialIndex: PropTypes.number,\n  tabs: PropTypes.arrayOf(PropTypes.object).isRequired,\n};\n\nTabs.defaultProps = {\n  className: '',\n  initialIndex: 0,\n};\n\nexport default TabsContainer(Tabs);\n","import { withStyles } from '@material-ui/core/styles';\nimport { withProps, compose } from 'recompose';\n\nimport withMatchParam from '../../containers/withMatchParam';\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  tabsRoot: {\n    borderBottom: '1px solid #e8e8e8',\n  },\n  tabRoot: {\n    textTransform: 'initial',\n    minWidth: 72,\n    fontWeight: theme.typography.fontWeightRegular,\n    maxWidth: 'unset',\n  },\n  labelContainer: {\n    paddingRight: 12,\n    paddingLeft: 12,\n  },\n});\n\nexport default compose(\n  withStyles(styles),\n  withMatchParam(({ routerParamName }) => routerParamName),\n  withProps(({ routerParamName, tabs, ...props }) => {\n    const filteredTabs = tabs.filter(({ condition = true }) => condition);\n    if (!routerParamName) {\n      return { tabs: filteredTabs };\n    }\n\n    const routerParam = props[routerParamName];\n\n    if (!routerParam) {\n      return { initialIndex: 0, tabs: filteredTabs };\n    }\n\n    return {\n      initialIndex: filteredTabs.map(tab => tab.id).indexOf(routerParam),\n      tabs: filteredTabs,\n    };\n  }),\n);\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { getFinalPlaceholder } from '../TextInput';\n\ndescribe('getFinalPlaceholder', () => {\n  context('when noIntl is false', () => {\n    it('should return a placeholder with a prefix', () => {\n      const intl = {\n        formatMessage: ({ id }) => id,\n      };\n      const prefix = 'Forms.textInput.placeholderPrefix';\n      const placeholder = 'placeholer';\n      const options = {\n        noIntl: false,\n        intl,\n        placeholder,\n      };\n      expect(getFinalPlaceholder(options)).to.equal(`${prefix} ${placeholder}`);\n    });\n\n    it('should return default placeholder if no placeholder is provided', () => {\n      const intl = {\n        formatMessage: ({ id }) => id,\n      };\n      const defaultPlaceholder = 'defaultPlaceholder';\n      const options = {\n        noIntl: false,\n        intl,\n        defaultPlaceholder,\n      };\n      expect(getFinalPlaceholder(options)).to.equal(defaultPlaceholder);\n    });\n\n    it('should return defaultPlaceholder when type is money', () => {\n      const defaultPlaceholder = 'defaultPlaceholder';\n      const options = {\n        defaultPlaceholder,\n        type: 'money',\n      };\n\n      expect(getFinalPlaceholder(options)).to.equal(defaultPlaceholder);\n    });\n  });\n  context('when noIntl is true', () => {\n    it('should return placeholder when it is defined', () => {\n      const placeholder = 'placeholder';\n      const options = {\n        noIntl: true,\n        placeholder,\n      };\n      expect(getFinalPlaceholder(options)).to.equal(placeholder);\n    });\n\n    it('should return default placeholder when no placeholder is defined', () => {\n      const placeholder = undefined;\n      const defaultPlaceholder = 'defaultPlaceholder';\n      const options = {\n        noIntl: true,\n        placeholder,\n        defaultPlaceholder,\n      };\n      expect(getFinalPlaceholder(options)).to.equal(defaultPlaceholder);\n    });\n  });\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { injectIntl } from 'react-intl';\nimport MaskedInput from 'react-text-mask';\nimport moment from 'moment';\nimport classnames from 'classnames';\n\nimport InputAdornment from '../Material/InputAdornment';\nimport FormHelperText from '../Material/FormHelperText';\nimport InputLabel, { useInputLabelWidth } from '../Material/InputLabel';\nimport FormControl from '../Material/FormControl';\nimport Input from '../Material/Input';\nimport { swissFrancMask, percentMask } from '../../utils/textMasks';\nimport { toNumber } from '../../utils/conversionFunctions';\n\nconst getDefaults = ({ type, id, onChange, value, simpleOnChange }) => {\n  if (simpleOnChange) {\n    return { onChangeHandler: onChange, value };\n  }\n\n  switch (type) {\n  case 'money':\n    return {\n      onChangeHandler: event => onChange(id, toNumber(event.target.value)),\n      showMask: true,\n      mask: swissFrancMask,\n      placeholder: 0,\n      value,\n    };\n  case 'percent':\n    return {\n      onChangeHandler: event =>\n        onChange(\n          id,\n          Math.round(parseFloat(event.target.value) * 100) / 10000,\n        ),\n      showMask: true,\n      mask: percentMask,\n      placeholder: '%',\n      value: (value * 100).toFixed(2),\n    };\n  case 'number':\n    return {\n      onChangeHandler: event => onChange(id, toNumber(event.target.value)),\n      showMask: false,\n      value,\n    };\n  case 'date':\n    return {\n      onChangeHandler: event => onChange(id, event.target.value, event),\n      onDateChange: (val) => {\n        // This specific format should be used for the server to get the\n        // date in the right order\n        const date = moment(val).format('YYYY-MM-DD');\n        // Allow setting a date to null\n        onChange(id, val ? date : null, {});\n      },\n      showMask: false,\n      value: value ? moment(value) : null,\n    };\n  default:\n    return {\n      // Pass event as third argument, for some components which need it\n      // like react-autosuggest\n      onChangeHandler: event => onChange(id, event.target.value, event),\n      showMask: false,\n      value,\n    };\n  }\n};\n\nexport const getFinalPlaceholder = ({\n  noIntl,\n  placeholder,\n  defaultPlaceholder,\n  intl,\n  type,\n}) => {\n  let finalPlaceholder;\n  if (noIntl) {\n    finalPlaceholder = placeholder || defaultPlaceholder;\n  } else {\n    finalPlaceholder = placeholder && typeof placeholder === 'string'\n      ? `${intl.formatMessage({\n        id: 'Forms.textInput.placeholderPrefix',\n      })} ${intl.formatMessage({ id: placeholder })}`\n      : defaultPlaceholder;\n  }\n\n  // Ignore placeholder for money inputs, and just show the currency\n  // Showing an amount is confusing\n  if (type === 'money') {\n    finalPlaceholder = defaultPlaceholder;\n  }\n\n  return finalPlaceholder;\n};\nconst TextInput = (props) => {\n  const {\n    classes,\n    className,\n    error,\n    fullWidth,\n    id,\n    info,\n    inputComponent,\n    InputProps,\n    inputProps,\n    inputRef,\n    intl,\n    label,\n    labelStyle,\n    noIntl,\n    onChange,\n    placeholder,\n    simpleOnChange,\n    style,\n    type,\n    inputType,\n    inputLabelProps,\n    ...otherProps\n  } = props;\n\n  const {\n    onChangeHandler,\n    onDateChange,\n    showMask,\n    mask,\n    placeholder: defaultPlaceholder,\n    value,\n  } = getDefaults(props);\n  const { inputLabelRef, labelWidth } = useInputLabelWidth(!!label);\n\n  return (\n    <FormControl\n      error={error}\n      className={classnames('mui-text-input', className)}\n      style={style}\n      fullWidth={fullWidth}\n    >\n      {label && (\n        <InputLabel\n          ref={inputLabelRef}\n          htmlFor={id}\n          style={labelStyle}\n          {...inputLabelProps}\n        >\n          {label}\n        </InputLabel>\n      )}\n      <Input\n        {...otherProps}\n        labelWidth={labelWidth}\n        className={classes ? Object.values(classes).join(' ') : ''}\n        id={id}\n        onChange={onChangeHandler}\n        type={inputType || 'text'}\n        style={{ fontSize: 'inherit' }}\n        inputComponent={showMask ? MaskedInput : inputComponent || undefined}\n        inputProps={{\n          ...inputProps, // Backwards compatible\n          ...InputProps,\n          value,\n          placeholder: getFinalPlaceholder({\n            noIntl,\n            placeholder,\n            defaultPlaceholder,\n            intl,\n            type,\n          }),\n          noValidate: true,\n          mask: mask || undefined,\n          pattern: mask ? '[0-9]*' : undefined,\n          onDateChange: inputType === 'date' ? onDateChange : undefined,\n        }}\n        startAdornment={\n          props.type === 'money' ? (\n            <InputAdornment position=\"start\">CHF</InputAdornment>\n          ) : null\n        }\n      />\n      {info && <FormHelperText>{info}</FormHelperText>}\n    </FormControl>\n  );\n};\n\nTextInput.propTypes = {\n  error: PropTypes.bool,\n  id: PropTypes.string,\n  info: PropTypes.node,\n  inputComponent: PropTypes.func,\n  inputProps: PropTypes.object,\n  label: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n  noIntl: PropTypes.bool,\n  onChange: PropTypes.func,\n  placeholder: PropTypes.node,\n  simpleOnChange: PropTypes.bool, // Removes all onChange modifications\n  type: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n};\n\nTextInput.defaultProps = {\n  error: false,\n  id: undefined,\n  info: undefined,\n  inputComponent: null,\n  inputProps: undefined,\n  label: '',\n  noIntl: false,\n  onChange: undefined,\n  placeholder: undefined,\n  simpleOnChange: false,\n  type: undefined,\n  value: undefined,\n};\n\nexport default injectIntl(TextInput);\n","export { default } from './TextInput';\n","/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\n\nimport Switch from '@material-ui/core/Switch';\n\nimport { shallow } from 'core/utils/testHelpers/enzyme';\nimport Toggle from '../Toggle';\n\nconst requiredProps = { toggle: false, onToggle: () => {} };\n\nconst component = props => shallow(<Toggle {...props} />);\n\ndescribe('Toggle', () => {\n  it('renders only the right label', () => {\n    const labels = component({\n      ...requiredProps,\n      labelRight: 'Right Label',\n    }).find('.toggle-label');\n    expect(labels.length).to.equal(1);\n    expect(labels.first().text()).to.equal('Right Label');\n  });\n\n  it('renders top, left and right labels', () => {\n    const props = {\n      ...requiredProps,\n      labelTop: 'Top Label',\n      labelLeft: 'Left Label',\n      labelRight: 'Right Label',\n    };\n    const labels = component(props).find('.toggle-label');\n    expect(labels.length).to.equal(3);\n    expect(labels.at(0).text()).to.equal('Top Label');\n    expect(labels.at(1).text()).to.equal('Left Label');\n    expect(labels.at(2).text()).to.equal('Right Label');\n  });\n\n  it('passes the toggle callback function to the Switch component', () => {\n    const onToggle = () => {};\n    expect(component({ ...requiredProps, onToggle })\n      .find(Switch)\n      .first()\n      .prop('onChange')).to.equal(onToggle);\n  });\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\n\nimport Switch from '@material-ui/core/Switch';\n\nconst Toggle = ({\n  toggled,\n  onToggle,\n  labelTop,\n  labelLeft,\n  labelRight,\n  className,\n}) => (\n  <div className={cx('toggle', className)}>\n    {labelTop && (\n      <div className=\"toggle-label toggle-label-top\">{labelTop}</div>\n    )}\n\n    <div className=\"toggle-content\">\n      {labelLeft && (\n        <span className=\"toggle-label toggle-label-left\">{labelLeft}</span>\n      )}\n\n      <Switch checked={toggled} onChange={onToggle} />\n\n      {labelRight && (\n        <span className=\"toggle-label toggle-label-right\">{labelRight}</span>\n      )}\n    </div>\n  </div>\n);\n\nToggle.propTypes = {\n  className: PropTypes.string,\n  labelLeft: PropTypes.node,\n  labelRight: PropTypes.node,\n  labelTop: PropTypes.node,\n  onToggle: PropTypes.func.isRequired,\n  toggled: PropTypes.bool.isRequired,\n};\n\nToggle.defaultProps = {\n  className: undefined,\n  labelTop: undefined,\n  labelLeft: undefined,\n  labelRight: undefined,\n};\n\nexport default Toggle;\n","/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\n\nimport { shallow } from 'core/utils/testHelpers/enzyme';\nimport MapWithMarkerWrapper from '../MapWithMarkerWrapper';\nimport MapWithMarker from '../MapWithMarker';\n\nimport { getAddressString } from '../googleMapsHelpers';\n\nconst component = props => shallow(<MapWithMarkerWrapper {...props} />);\n\ndescribe('MapWithMarkerWrapper', () => {\n  let address;\n\n  beforeEach(() => {\n    address = { address1: 'Thamel Marg', city: 'Kathmandu', zipCode: '123456' };\n  });\n\n  it(\"doesn't render MapWithMarker if the address is incomplete\", () => {\n    address = { city: 'Kathmandu', zipCode: '123456' };\n    const errorParagraph = component(address).find('.incomplete-address');\n    expect(errorParagraph.length).to.equal(1);\n  });\n\n  it('renders MapWithMarker if address is complete', () =>\n    expect(component(address).find(MapWithMarker).length).to.equal(1));\n\n  it('passes the correct address to the MapWithMarker component', () =>\n    expect(component(address)\n      .find(MapWithMarker)\n      .first()\n      .prop('address')).to.equal(getAddressString(address)));\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { getAddressString, isIncompleteAddress } from '../googleMapsHelpers';\n\ndescribe('googleMapsHelpers', () => {\n  let address;\n\n  beforeEach(() => {\n    address = { address1: 'Thamel Marg', city: 'Kathmandu', zipCode: '123456' };\n  });\n\n  describe('isIncompleteAddress', () => {\n    it('returns true when the address is incomplete', () => {\n      address = { city: 'Kathmandu', zipCode: '123456' };\n      expect(isIncompleteAddress(address)).to.equal(true);\n    });\n\n    it('returns true when the address is an empty string', () => {\n      address = { address1: '', city: 'Kathmandu', zipCode: '123456' };\n      expect(isIncompleteAddress(address)).to.equal(true);\n    });\n\n    it('returns false when the address is complete', () => {\n      expect(isIncompleteAddress(address)).to.equal(false);\n    });\n  });\n\n  describe('getAddressString', () => {\n    it('returns a formated address', () => {\n      expect(getAddressString(address)).to.equal('Thamel Marg, 123456 Kathmandu');\n    });\n  });\n});\n","import { Meteor } from 'meteor/meteor';\nimport { GoogleMaps } from 'meteor/epotek:google-maps';\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport merge from 'lodash/merge';\n\nimport defaultOptions from './defaultOptions';\n\nexport default class GoogleMap extends Component {\n  componentDidMount() {\n    const { id, latlng, options } = this.props;\n    const combinedOptions = merge(\n      {},\n      defaultOptions,\n      { center: latlng },\n      options,\n    );\n\n    GoogleMaps.create({\n      name: id,\n      element: this.map,\n      options: combinedOptions,\n    });\n\n    this.addMarker();\n  }\n\n  componentWillUnmount() {\n    const { id } = this.props;\n    if (GoogleMaps.maps[id]) {\n      window.google.maps.event.clearInstanceListeners(GoogleMaps.maps[id].instance);\n      delete GoogleMaps.maps[id];\n    }\n  }\n\n  addMarker = () => {\n    const { id, latlng, address, withMarker } = this.props;\n\n    GoogleMaps.ready(id, (map) => {\n      const infowindow = new window.google.maps.InfoWindow({\n        content: address,\n      });\n\n      map.instance.setCenter(latlng);\n\n      if (withMarker) {\n        const marker = new window.google.maps.Marker({\n          draggable: false,\n          animation: window.google.maps.Animation.DROP,\n          position: latlng,\n          map: map.instance,\n          id: 'propertyMarker',\n        });\n\n        marker.addListener('click', () => {\n          infowindow.open(map.instance, marker);\n        });\n\n        Meteor.setTimeout(() => infowindow.open(map.instance, marker), 1000);\n      }\n    });\n  };\n\n  render() {\n    return (\n      <div\n        className=\"google-map\"\n        id={this.props.id}\n        ref={(component) => {\n          this.map = component;\n        }}\n      />\n    );\n  }\n}\n\nGoogleMap.propTypes = {\n  address: PropTypes.string,\n  id: PropTypes.string,\n  latlng: PropTypes.object.isRequired,\n  options: PropTypes.object,\n  withMarker: PropTypes.bool,\n};\n\nGoogleMap.defaultProps = {\n  id: 'myMap',\n  address: undefined,\n  options: {},\n  withMarker: true,\n};\n","import { Meteor } from 'meteor/meteor';\nimport { GoogleMaps } from 'meteor/epotek:google-maps';\nimport { Tracker } from 'meteor/tracker';\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\nimport Loading from '../Loading';\n\nconst googleMapContainer = (WrappedComponent) => {\n  class GoogleMapContainer extends Component {\n    constructor(props) {\n      super(props);\n      this.state = { isLoaded: false };\n    }\n\n    componentDidMount() {\n      GoogleMaps.load({\n        v: '3',\n        key: Meteor.settings.public.google_maps_key,\n        libraries: 'places',\n      });\n\n      // Fuck this, it works for an obscure reason\n      // https://github.com/meteor/react-packages/issues/99#issuecomment-168772806\n      setTimeout(this.trackIsLoading, 0);\n    }\n\n    componentWillUnmount() {\n      if (this.tracker) {\n        this.tracker.stop();\n      }\n    }\n\n    trackIsLoading = () => {\n      this.tracker = Tracker.autorun(() => {\n        const isLoaded = GoogleMaps.loaded();\n\n        this.setState({ isLoaded });\n      });\n    };\n\n    render() {\n      const { isLoaded } = this.state;\n      const { className } = this.props;\n      const mapIsLoaded = isLoaded && !!window.google && !!window.google.maps;\n\n      if (mapIsLoaded) {\n        return (\n          <div\n            className={classnames({ 'map-container': true, [className]: true })}\n            ref={(c) => {\n              this.container = c;\n            }}\n          >\n            <WrappedComponent {...this.props} />\n          </div>\n        );\n      }\n\n      return <Loading />;\n    }\n  }\n\n  GoogleMapContainer.propTypes = {\n    className: PropTypes.string,\n  };\n\n  GoogleMapContainer.defaultProps = {\n    className: '',\n  };\n\n  return GoogleMapContainer;\n};\n\nexport default googleMapContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { compose, withState, lifecycle, withProps } from 'recompose';\nimport T from '../Translation';\nimport { withLoading } from '../Loading';\nimport GoogleMapContainer from './GoogleMapContainer';\nimport GoogleMap from './GoogleMap';\nimport { getLatLngFromAddress } from './googleMapsHelpers';\n\nconst MapWithMarker = (props) => {\n  const { address, options, id, latlng } = props;\n\n  return latlng ? (\n    <GoogleMap address={address} latlng={latlng} id={id} options={options} />\n  ) : (\n    <p className=\"description\">\n      <T id=\"Maps.addressNotFound\" />\n    </p>\n  );\n};\n\nMapWithMarker.propTypes = {\n  address: PropTypes.string.isRequired,\n  id: PropTypes.string,\n  options: PropTypes.object,\n};\n\nMapWithMarker.defaultProps = {\n  options: undefined,\n  id: undefined,\n};\n\nexport default compose(\n  GoogleMapContainer,\n  withState('loading', 'setLoading', false),\n  withState('latlng', 'setLatlng', undefined),\n  withProps(({ address, setLoading, setLatlng }) => ({\n    getLatlngFromGoogle: () => {\n      setLoading(true);\n      getLatLngFromAddress(address)\n        .then(setLatlng)\n        .finally(() => setLoading(false));\n    },\n  })),\n  lifecycle({\n    componentDidMount() {\n      this.props.getLatlngFromGoogle();\n    },\n    componentWillReceiveProps({ address }) {\n      if (address !== this.props.address) {\n        this.props.getLatlngFromGoogle();\n      }\n    },\n  }),\n  withLoading(),\n)(MapWithMarker);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport MapWithMarker from './MapWithMarker';\nimport T from '../Translation';\nimport { getAddressString, isIncompleteAddress } from './googleMapsHelpers';\n\nconst MapWithMarkerWrapper = ({\n  address1,\n  zipCode,\n  city,\n  options,\n  className,\n  showIncompleteAddress,\n}) => {\n  if (isIncompleteAddress({ address1, zipCode, city })) {\n    if (!showIncompleteAddress) {\n      return null;\n    }\n\n    return (\n      <p className=\"description incomplete-address\">\n        <T id=\"Maps.incompleteAddress\" />\n      </p>\n    );\n  }\n\n  return (\n    <MapWithMarker\n      address={getAddressString({ address1, zipCode, city })}\n      className={`map ${className}`}\n      options={options}\n    />\n  );\n};\n\nMapWithMarkerWrapper.propTypes = {\n  address1: PropTypes.string,\n  city: PropTypes.string,\n  options: PropTypes.object,\n  showIncompleteAddress: PropTypes.bool,\n  zipCode: PropTypes.number,\n};\n\nMapWithMarkerWrapper.defaultProps = {\n  address1: '',\n  city: '',\n  showIncompleteAddress: true,\n  zipCode: undefined,\n  options: { zoom: 10 },\n};\n\nexport default MapWithMarkerWrapper;\n","import mapStyles from './mapStyles';\n\nconst defaultOptions = {\n  zoom: 14,\n  scrollwheel: false,\n  disableDefaultUI: true,\n  fullscreenControl: true,\n  zoomControl: true,\n  styles: mapStyles,\n};\n\nexport default defaultOptions;\n","import { geocodeByAddress, getLatLng } from 'react-places-autocomplete';\n\nexport const getLatLngFromAddress = address =>\n  geocodeByAddress(address)\n    .then(results => getLatLng(results[0]))\n    .catch(console.log);\n\nexport const getAddressString = ({ address1, zipCode, city }) =>\n  `${address1}, ${zipCode} ${city}`;\n\nexport const isIncompleteAddress = ({ address1, zipCode, city }) =>\n  !address1 || !city || !zipCode;\n","const mapStyles = [\n  {\n    featureType: 'administrative.land_parcel',\n    elementType: 'labels',\n    stylers: [\n      {\n        visibility: 'off',\n      },\n    ],\n  },\n  {\n    featureType: 'administrative.province',\n    elementType: 'labels.text',\n  },\n  {\n    featureType: 'landscape',\n    stylers: [\n      {\n        visibility: 'simplified',\n      },\n    ],\n  },\n  {\n    featureType: 'poi',\n    stylers: [\n      {\n        visibility: 'simplified',\n      },\n    ],\n  },\n  {\n    featureType: 'poi',\n    elementType: 'labels.text',\n    stylers: [\n      {\n        visibility: 'off',\n      },\n    ],\n  },\n  {\n    featureType: 'poi.attraction',\n    stylers: [\n      {\n        visibility: 'off',\n      },\n    ],\n  },\n  {\n    featureType: 'poi.business',\n    stylers: [\n      {\n        visibility: 'off',\n      },\n    ],\n  },\n  {\n    featureType: 'poi.park',\n    elementType: 'labels.text',\n    stylers: [\n      {\n        visibility: 'off',\n      },\n    ],\n  },\n  {\n    featureType: 'road.highway',\n    stylers: [\n      {\n        color: '#f3af50',\n      },\n      {},\n    ],\n  },\n  {\n    featureType: 'water',\n    stylers: [\n      {\n        color: '#4c7ff7',\n      },\n    ],\n  },\n  {\n    featureType: 'water',\n    elementType: 'labels',\n    stylers: [\n      {\n        visibility: 'simplified',\n      },\n    ],\n  },\n];\n\nexport default mapStyles;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport omit from 'lodash/omit';\nimport { FormattedMessage } from 'react-intl';\nimport Popover from 'react-bootstrap/lib/Popover';\n\nimport DialogSimple from '../../DialogSimple/loadable';\nimport Button from '../../Button';\nimport defaultIntlValues from '../../Translation/defaultIntlValues';\nimport T from '../../Translation';\nimport TooltipSynonyms from '../TooltipSynonyms';\n\nconst getTooltip1Id = id => (id.includes('tooltip') ? id : `tooltip.${id}`);\nconst getTooltip2Id = id => (id.includes('tooltip') ? id : `tooltip2.${id}`);\n\nconst Tooltip = ({\n  tooltipConfig: { id, double: isDoubleTooltip },\n  match,\n  ...rest\n}) => {\n  let content = null;\n\n  if (isDoubleTooltip) {\n    content = (\n      <span className=\"tooltip\">\n        <FormattedMessage id={getTooltip1Id(id)} />\n        <DialogSimple\n          title={match}\n          // Dialogs normally have zIndex of 1500\n          // Usually dialogs should be behind tooltips (which are\n          // at zindex 1501), but when you trigger a dialog from a tooltip,\n          // it should be above the previous tooltip, hence 1502\n          style={{ zIndex: 1502 }}\n          buttonStyle={{ marginTop: 16 }}\n          label={<FormattedMessage id=\"general.learnMore\" />}\n          autoFocus\n          actions={handleClose => (\n            <Button\n              primary\n              label={<T id=\"general.ok\" />}\n              onClick={handleClose}\n            />\n          )}\n        >\n          <TooltipSynonyms tooltipId={id} match={match} />\n          <br />\n          <br />\n          <FormattedMessage id={getTooltip2Id(id)} values={defaultIntlValues} />\n        </DialogSimple>\n      </span>\n    );\n  } else {\n    content = <FormattedMessage id={getTooltip1Id(id)} />;\n  }\n\n  const passedProps = omit(rest, ['trigger', 'hide', 'match']);\n\n  return (\n    <Popover {...passedProps} id={id}>\n      {content}\n    </Popover>\n  );\n};\n\nTooltip.propTypes = {\n  match: PropTypes.string,\n  tooltipConfig: PropTypes.object.isRequired,\n};\n\nexport default Tooltip;\n","export { default } from './Tooltip';\n","import loadable from 'core/utils/loadable';\n\nexport default loadable({\n  req: () => require('./index'),\n  loader: () => import('./index'),\n});\n","/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport { shallow } from '../../../utils/testHelpers/enzyme';\n\nimport {\n  AutoTooltip,\n  createRegexThatFindsAnyWordFromList,\n} from '../AutoTooltip';\nimport { TOOLTIP_LISTS } from '../../../arrays/tooltips';\n\ndescribe('<AutoTooltip />', () => {\n  let props;\n  const component = () => shallow(<AutoTooltip {...props} />);\n\n  beforeEach(() => {\n    props = {};\n  });\n\n  it('returns null if no children are given ', () => {\n    expect(component().getElement()).to.equal(null);\n  });\n\n  it('returns a span with text if a child is provided', () => {\n    props = { children: 'test' };\n    expect(component().equals(<span>test</span>)).to.equal(true);\n  });\n\n  it('returns the child if it is not a string', () => {\n    props = { children: <React.Fragment>test</React.Fragment> };\n    expect(component().equals(<React.Fragment>test</React.Fragment>)).to.equal(true);\n  });\n\n  it('returns a parsed string with tooltips', () => {\n    const text = 'a match1 b';\n    props = { children: text, tooltipList: TOOLTIP_LISTS.DEV };\n    expect(component().text()).to.equal('a <TooltipOverlay /> b');\n  });\n\n  it('returns a parsed string with multiple tooltips', () => {\n    const text = 'a match1 b match2 c';\n    props = { children: text, tooltipList: TOOLTIP_LISTS.DEV };\n    expect(component().text()).to.equal('a <TooltipOverlay /> b <TooltipOverlay /> c');\n  });\n\n  it('takes a list as a string to take tooltips from', () => {\n    const text = 'a 123test b';\n    props = { children: text, tooltipList: TOOLTIP_LISTS.OFFER_TABLE };\n    expect(component().text()).to.equal('a 123test b');\n  });\n\n  it('throws if a non existent list is provided', () => {\n    props = { tooltipList: 'yo', children: 'test' };\n    expect(() => component()).to.throw();\n  });\n\n  it('returns null if no list is provided', () => {\n    expect(createRegexThatFindsAnyWordFromList()).to.equal(null);\n  });\n});\n","/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\nimport { mount, shallow } from '../../../utils/testHelpers/enzyme';\nimport { TooltipProvider, TooltipContainer } from '../TooltipContext';\n\ndescribe('TooltipContext', () => {\n  it.skip('passes tooltips down', () => {\n    // FIXME: Can't test react context for now\n    // https://github.com/airbnb/enzyme/pulls\n    const id = 'test';\n    const Component = TooltipContainer(({ tooltipList }) => (\n      <React.Fragment>{tooltipList}</React.Fragment>\n    ));\n    const wrapper = mount(<TooltipProvider tooltipList={id}>\n      <React.Fragment>\n        <span>\n          <Component />\n        </span>\n      </React.Fragment>\n    </TooltipProvider>);\n    expect(wrapper.find(Component)).to.have.length(1);\n    expect(wrapper\n      .find(Component)\n      .dive()\n      .prop('tooltipList')).to.equal(true);\n  });\n});\n","/* eslint-env mocha */\nimport React from 'react';\nimport { expect } from 'chai';\n\nimport { shallow } from '../../../utils/testHelpers/enzyme';\nimport { TooltipSynonyms } from '../TooltipSynonyms';\n\ndescribe('TooltipSynonyms', () => {\n  let props;\n  const component = () => shallow(<TooltipSynonyms {...props} />);\n\n  beforeEach(() => {\n    props = { tooltips: {} };\n  });\n\n  it('renders null if no tooltipId is passed', () => {\n    expect(component().getElement()).to.equal(null);\n  });\n\n  it('renders null if no tooltipId is passed', () => {\n    expect(component().getElement()).to.equal(null);\n  });\n\n  it('does not render a synonym if none other exists', () => {\n    props = {\n      tooltipId: 'test',\n      match: 'match1',\n      tooltips: { match1: { id: 'test' } },\n    };\n\n    expect(component().getElement()).to.equal(null);\n    expect(component().contains('match1')).to.equal(false);\n  });\n\n  it('renders a synonym if 2 exist, but not the match', () => {\n    props = {\n      tooltipId: 'test',\n      match: 'match2',\n      tooltips: { match1: { id: 'test' }, match2: { id: 'test' } },\n    };\n\n    expect(component().contains('match2, match1')).to.equal(false);\n    expect(component().contains('match1')).to.equal(true);\n  });\n\n  it('renders 2 synonyms if 3 exist, but not the match', () => {\n    props = {\n      tooltipId: 'test',\n      match: 'match2',\n      tooltips: {\n        match1: { id: 'test' },\n        match2: { id: 'test' },\n        match3: { id: 'test' },\n      },\n    };\n\n    expect(component().contains('match1, match3')).to.equal(true);\n  });\n\n  it('ignores case', () => {\n    props = {\n      tooltipId: 'test',\n      match: 'Match2',\n      tooltips: { match1: { id: 'test' }, match2: { id: 'test' } },\n    };\n\n    expect(component().contains('match2, match1')).to.equal(false);\n    expect(component().contains('match1')).to.equal(true);\n  });\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport reactStringReplace from 'react-string-replace';\n\nimport { tooltips, TOOLTIP_LISTS } from 'core/arrays/tooltips';\nimport TooltipOverlay from './TooltipOverlay';\nimport { TooltipContainer } from './TooltipContext';\n\nexport const createRegexThatFindsAnyWordFromList = (list) => {\n  if (list) {\n    return new RegExp(`(${Object.keys(tooltips(list)).join('|')})`, 'gi');\n  }\n\n  return null;\n};\n\nexport const reformatString = string => string.replace(/’/gi, \"'\");\n\nconst parseTextForTooltips = props =>\n  reactStringReplace(\n    reformatString(props.children),\n    createRegexThatFindsAnyWordFromList(props.tooltipList),\n    (match, index) => (\n      <TooltipOverlay {...props} key={index} match={match}>\n        {match}\n      </TooltipOverlay>\n    ),\n  );\n\nexport const autoTooltipParser = (\n  string,\n  tooltipList = TOOLTIP_LISTS.GENERAL,\n) => parseTextForTooltips({ children: string, tooltipList });\n\nexport const AutoTooltip = (props) => {\n  const { children, tooltipId } = props;\n  if (!children) {\n    return null;\n  }\n\n  if (typeof children !== 'string') {\n    // If no id is given and children is not a string, return\n    return children;\n  }\n\n  if (tooltipId) {\n    return <TooltipOverlay {...props}>{children}</TooltipOverlay>;\n  }\n\n  // If no id is given and children is a string,\n  // automatically replace all matching strings with tooltips\n  const content = parseTextForTooltips(props);\n\n  return <span>{content}</span>;\n};\n\nAutoTooltip.propTypes = {\n  children: PropTypes.node,\n  tooltipList: PropTypes.string,\n};\n\nAutoTooltip.defaultProps = {\n  children: null,\n  tooltipList: TOOLTIP_LISTS.GENERAL,\n};\n\nexport default TooltipContainer(AutoTooltip);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { TOOLTIP_LISTS } from '../../arrays/tooltips';\n\nconst { Provider, Consumer } = React.createContext();\n\nexport const TooltipProvider = ({ tooltipList, children }) => (\n  <Provider value={tooltipList}>{children}</Provider>\n);\nexport const TooltipProviderContainer = tooltipList => Component => props => (\n  <Provider value={tooltipList}>\n    <Component {...props} />\n  </Provider>\n);\n\nexport const TooltipContainer = Component => props => (\n  <Consumer>\n    {tooltipList => <Component tooltipList={tooltipList} {...props} />}\n  </Consumer>\n);\n\nTooltipProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  tooltipList: PropTypes.string,\n};\n\nTooltipProvider.defaultProps = {\n  tooltipList: TOOLTIP_LISTS.GENERAL,\n};\n\nexport { TOOLTIP_LISTS };\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport OverlayTrigger from 'react-bootstrap/lib/OverlayTrigger';\n\nimport { tooltips } from '../../arrays/tooltips';\nimport Tooltip from './Tooltip/loadable';\n\nconst handleClick = (event) => {\n  // Trigger tooltip instead of another onClick handler in a parent\n  event.preventDefault();\n  event.stopPropagation();\n};\n\nconst TooltipOverlay = ({\n  placement,\n  tooltipList,\n  match,\n  trigger,\n  delayShow,\n  children,\n  tooltipId,\n}) => {\n  const tooltipConfig = tooltipId\n    ? { id: tooltipId, double: Array.isArray(tooltipId) }\n    : tooltips(tooltipList)[match.toLowerCase()];\n\n  return (\n    <OverlayTrigger\n      placement={placement}\n      overlay={(\n        <Tooltip\n          placement={placement}\n          trigger={trigger}\n          tooltipConfig={tooltipConfig}\n          match={match}\n        />\n      )}\n      rootClose\n      animation={false}\n      trigger={trigger}\n      delayShow={delayShow}\n      container={global.document !== undefined ? document.body : undefined}\n      onClick={handleClick}\n    >\n      <span className=\"tooltip-overlay\" tabIndex={-1}>\n        {children}\n      </span>\n    </OverlayTrigger>\n  );\n};\n\nTooltipOverlay.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.string])\n    .isRequired,\n  delayShow: PropTypes.number,\n  match: PropTypes.oneOfType([PropTypes.element, PropTypes.string]),\n  placement: PropTypes.string,\n  tooltipList: PropTypes.string.isRequired,\n  trigger: PropTypes.arrayOf(PropTypes.string),\n};\n\nTooltipOverlay.defaultProps = {\n  delayShow: 300,\n  match: undefined,\n  placement: 'bottom',\n  trigger: ['click'], // Can be 'click', 'hover', and/or 'focus'\n};\n\nexport default TooltipOverlay;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withProps } from 'recompose';\n\nimport { generalTooltips } from '../../arrays/tooltips';\nimport T from '../Translation';\n\nconst findSynonymsForTooltipId = (tooltipId, match, tooltips) =>\n  Object.keys(tooltips)\n    .filter(tooltipMatcher => tooltips[tooltipMatcher].id === tooltipId)\n    .filter(synonym => synonym !== match.toLowerCase());\n\nexport const TooltipSynonyms = ({ tooltipId, match, tooltips }) => {\n  const synonyms = findSynonymsForTooltipId(tooltipId, match, tooltips);\n\n  if (!synonyms || synonyms.length <= 0) {\n    return null;\n  }\n\n  return (\n    <span className=\"tooltip-synonyms\">\n      <b>\n        <T id=\"TooltipSynonyms.title\" values={{ count: synonyms.length }} />\n        {': '}\n      </b>\n      <i>{synonyms.join(', ')}</i>\n    </span>\n  );\n};\n\nTooltipSynonyms.propTypes = {\n  match: PropTypes.string.isRequired,\n  tooltipId: PropTypes.string.isRequired,\n  tooltips: PropTypes.object.isRequired,\n};\n\nexport default withProps({ tooltips: generalTooltips })(TooltipSynonyms);\n","// @flow\n// @flow\nimport React from 'react';\nimport { withProps, withState, compose } from 'recompose';\n\nimport RadioButtons from 'core/components/RadioButtons';\nimport { addBorrower } from 'core/api';\nimport T from '../Translation';\nimport Button from '../Button';\nimport { CIVIL_STATUS } from '../../api/constants';\n\ntype BorrowerAddPartnerProps = {\n  handleClick: Function,\n  isLoading: boolean,\n};\n\nconst BorrowerAddPartner = ({\n  handleClick,\n  isLoading,\n}: BorrowerAddPartnerProps) => (\n  <div className=\"borrower-add-partner\">\n    <Button\n      onClick={handleClick}\n      primary\n      outlined\n      label={<T id=\"BorrowerAddPartner.label\" />}\n      loading={isLoading}\n    />\n  </div>\n);\n\nexport default compose(\n  withState('isLoading', 'setLoading', false),\n  withProps(({ loanId, setLoading }) => ({\n    handleClick: () => {\n      setLoading(true);\n      addBorrower\n        .run({\n          loanId,\n          borrower: { sameAddress: true, civilStatus: CIVIL_STATUS.MARRIED },\n        })\n        .finally(() => setLoading(false));\n    },\n  })),\n)(BorrowerAddPartner);\n","export { default } from './BorrowerAddPartner';\n","// @flow\nimport React from 'react';\nimport { injectIntl } from 'react-intl';\n\nimport T from '../Translation';\nimport AutoFormTextInput from '../AutoForm/AutoFormTextInput';\nimport { CANTONS } from '../../api/constants';\n\ntype CantonFieldProps = {\n  canton: String,\n  intl: Object,\n};\n\nconst CantonField = ({ canton, intl: { formatMessage } }: CantonFieldProps) => (\n  <AutoFormTextInput\n    inputProps={{\n      currentValue:\n        CANTONS[canton] || formatMessage({ id: 'Forms.canton.placeholder' }),\n      label: <T id=\"Forms.canton\" />,\n      style: { width: '100%', maxWidth: '400px' },\n      readOnly: true,\n      required: true,\n      todo: !canton,\n      multiline: true,\n    }}\n    saveOnChange\n    showValidIconOnChange\n    updateFunc={() => Promise.resolve()}\n  />\n);\n\nexport default injectIntl(CantonField);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport MuiCheckbox from '@material-ui/core/Checkbox';\n\nconst Checkbox = ({ value, onChange, id, ...props }) => (\n  <FormControlLabel\n    control={(\n      <MuiCheckbox\n        className=\"checkbox\"\n        checked={value}\n        onChange={onChange}\n        value={id}\n      />\n    )}\n    {...props}\n  />\n);\n\nCheckbox.propTypes = {\n  disabled: PropTypes.bool,\n  id: PropTypes.string,\n  label: PropTypes.node,\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.bool.isRequired,\n};\n\nCheckbox.defaultProps = {\n  id: undefined,\n  label: undefined,\n  disabled: false,\n};\n\nexport default Checkbox;\n","export { default } from './Checkbox';\n","// @flow\nimport React from 'react';\nimport moment from 'moment';\n\nimport TextField from '../AutoForm2/CustomTextField';\n\ntype DateFieldProps = {};\n\nconst DateField = (props: DateFieldProps) => (\n  <TextField\n    {...props}\n    value={props.value && moment(props.value).format('YYYY-MM-DD')}\n    type=\"date\"\n    InputLabelProps={{ shrink: true }}\n  />\n);\nexport default DateField;\n","export { default } from './DateField';\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Dialog from '../Material/Dialog';\nimport Button from '../Button';\nimport T from '../Translation';\n\nexport default class DialogSimple extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { open: false, disabled: false, isCancel: true };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!this.props.close && nextProps.close) {\n      this.setState({ open: false });\n    }\n  }\n\n  handleOpen = event =>\n    this.setState(\n      { open: true },\n      () => this.props.onOpen && this.props.onOpen(),\n    );\n\n  handleClose = isSubmit => this.setState({ open: false, isCancel: !isSubmit });\n\n  disableClose = () => this.setState({ disabled: true });\n\n  enableClose = () => this.setState({ disabled: false });\n\n  render() {\n    const { open, disabled, isCancel } = this.state;\n    const {\n      actions,\n      autoFocus,\n      autoScroll,\n      bodyStyle,\n      buttonProps,\n      buttonStyle,\n      closeOnly,\n      children,\n      contentStyle,\n      important,\n      label,\n      onOpen,\n      passProps,\n      primary,\n      raised = true,\n      renderProps,\n      rootStyle,\n      secondary,\n      style,\n      title,\n      renderTrigger,\n      onClose = () => null,\n      ...otherProps\n    } = this.props;\n\n    const finalActions = (actions && actions(this.handleClose))\n      || (closeOnly\n        ? [\n          <Button\n            primary\n            label={<T id=\"general.close\" />}\n            onClick={(args) => {\n              onClose();\n              this.handleClose(args);\n            }}\n            key=\"close\"\n          />,\n        ]\n        : [\n          <Button\n            primary\n            label={<T id=\"general.cancel\" />}\n            onClick={this.handleClose}\n            key=\"cancel\"\n          />,\n          <Button\n            primary\n            label=\"Ok\"\n            onClick={() => this.handleClose(true)}\n            autoFocus={autoFocus} // TODO doesn't work with tooltips\n            disabled={disabled}\n            key=\"submit\"\n          />,\n        ]);\n\n    const childProps = {\n      disableClose: this.disableClose,\n      enableClose: this.enableClose,\n      isCancel,\n      handleClose: this.handleClose,\n    };\n\n    return (\n      // Prevent triggering background clicks\n      <span style={rootStyle} onClick={e => e.stopPropagation()}>\n        {renderTrigger ? (\n          renderTrigger({ handleOpen: this.handleOpen })\n        ) : (\n          <Button\n            raised={raised}\n            label={label}\n            onClick={this.handleOpen}\n            primary={primary}\n            secondary={secondary}\n            style={buttonStyle}\n            {...buttonProps}\n          />\n        )}\n        <Dialog\n          {...otherProps}\n          title={title}\n          actions={finalActions}\n          important={important}\n          open={open}\n          onClose={this.handleClose}\n          style={style}\n        >\n          {!!children && passProps\n            ? React.cloneElement(children, { ...childProps })\n            : renderProps\n              ? children(childProps)\n              : children}\n        </Dialog>\n      </span>\n    );\n  }\n}\n\nDialogSimple.propTypes = {\n  actions: PropTypes.func,\n  autoFocus: PropTypes.bool,\n  autoScroll: PropTypes.bool,\n  buttonStyle: PropTypes.objectOf(PropTypes.any),\n  close: PropTypes.bool,\n  closeOnly: PropTypes.bool,\n  important: PropTypes.bool,\n  label: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  onOpen: PropTypes.func,\n  passProps: PropTypes.bool,\n  primary: PropTypes.bool,\n  rootStyle: PropTypes.objectOf(PropTypes.any),\n  secondary: PropTypes.bool,\n  title: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n};\n\nDialogSimple.defaultProps = {\n  actions: undefined,\n  autoFocus: false,\n  autoScroll: false,\n  buttonStyle: {},\n  closeOnly: false,\n  close: undefined,\n  important: false,\n  label: null,\n  onOpen: () => {},\n  passProps: false,\n  primary: false,\n  rootStyle: {},\n  secondary: false,\n  title: null,\n};\n","export { default } from './DialogSimple';\n","import loadable from 'core/utils/loadable';\n\nexport default loadable({\n  req: () => require('./index'),\n  loader: () => import('./index'),\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Menu from '../Material/Menu';\nimport IconButton from '../IconButton';\nimport Button from '../Button';\nimport DropdownMenuContainer from './DropdownMenuContainer';\n\nconst getTrigger = ({\n  button,\n  buttonProps,\n  renderTrigger,\n  onClickHandler,\n  iconType,\n  tooltip,\n  tooltipPlacement,\n  disabled,\n}) => {\n  if (button) {\n    return (\n      <Button onClick={onClickHandler} disabled={disabled} {...buttonProps} />\n    );\n  }\n  if (renderTrigger) {\n    return renderTrigger({ handleOpen: onClickHandler, disabled });\n  }\n\n  return (\n    <IconButton\n      onClick={onClickHandler}\n      type={iconType}\n      tooltip={tooltip}\n      tooltipPlacement={tooltipPlacement}\n      disabled={disabled}\n      {...buttonProps}\n    />\n  );\n};\n\nconst DropdownMenu = ({\n  anchorEl,\n  button,\n  buttonProps,\n  className,\n  handleClose,\n  handleOpen,\n  iconType,\n  isOpen,\n  options,\n  style,\n  tooltip,\n  tooltipPlacement,\n  renderTrigger,\n  maxHeight,\n  paperClassName,\n  disabled,\n  noWrapper,\n}) => {\n  const onClickHandler = (event) => {\n    // Prevent background from receiving clicks\n    event.stopPropagation();\n    // Pass currentTarget directly, to avoid it resetting to null\n    // https://stackoverflow.com/questions/17607766/how-come-my-event-currenttarget-is-changing-automatically\n    handleOpen(event.currentTarget);\n  };\n\n  const toRender = (\n    <>\n      {getTrigger({\n        button,\n        buttonProps,\n        renderTrigger,\n        onClickHandler,\n        iconType,\n        tooltip,\n        tooltipPlacement,\n        disabled,\n      })}\n      <Menu\n        anchorEl={anchorEl}\n        open={isOpen}\n        onClose={(event) => {\n          // Stop propagation here to avoid parents' onClick from firing\n          event.stopPropagation();\n          handleClose();\n        }}\n        classes={{ paper: paperClassName }}\n        PaperProps={{\n          style: {\n            maxHeight:\n              maxHeight >= 0\n                ? maxHeight === 0\n                  ? maxHeight\n                  : undefined\n                : 48 * 4.5,\n          },\n        }}\n      >\n        {options}\n      </Menu>\n    </>\n  );\n\n  if (noWrapper) {\n    return toRender;\n  }\n\n  return (\n    <div className={className} style={{ ...style }}>\n      {toRender}\n    </div>\n  );\n};\n\nDropdownMenu.propTypes = {\n  anchorEl: PropTypes.any,\n  className: PropTypes.string,\n  handleClose: PropTypes.func.isRequired,\n  handleOpen: PropTypes.func.isRequired,\n  iconType: PropTypes.string,\n  isOpen: PropTypes.bool.isRequired,\n  options: PropTypes.array.isRequired,\n  style: PropTypes.objectOf(PropTypes.any),\n  tooltip: PropTypes.node,\n  tooltipPlacement: PropTypes.string,\n};\n\nDropdownMenu.defaultProps = {\n  anchorEl: null,\n  className: '',\n  iconType: undefined,\n  style: {},\n  tooltip: undefined,\n  tooltipPlacement: undefined,\n};\n\nexport default DropdownMenuContainer(DropdownMenu);\n","import React from 'react';\nimport { compose, withProps, withStateHandlers, withState } from 'recompose';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Link from '../Link';\nimport Divider from '../Material/Divider';\nimport MenuItem from '../Material/MenuItem';\nimport Icon from '../Icon';\n\nconst styles = theme => ({\n  menuItem: {\n    '&:hover': {\n      backgroundColor: theme.palette.primary.main,\n      '& $colorClass': {\n        color: theme.palette.common.white,\n      },\n    },\n  },\n  menuItemRoot: {\n    height: 'unset',\n  },\n  colorClass: {},\n});\n\nconst mapOption = (\n  {\n    id,\n    onClick,\n    link,\n    icon,\n    label,\n    dividerTop,\n    dividerBottom,\n    secondary,\n    ...otherProps\n  },\n  handleClose,\n  { menuItem: menuItemClass, menuItemRoot, colorClass },\n) => {\n  const arr = [\n    <MenuItem\n      key={id}\n      onClick={(event, index) => {\n        // Prevent background from receiving clicks\n        event.stopPropagation();\n        if (onClick) {\n          onClick(index);\n        }\n        handleClose();\n      }}\n      {...otherProps}\n      component={link ? Link : null}\n      className={menuItemClass}\n      classes={{ root: menuItemRoot }}\n    >\n      {icon && (\n        <ListItemIcon className={colorClass}>\n          <Icon type={icon} />\n        </ListItemIcon>\n      )}\n      <ListItemText\n        classes={{ primary: colorClass, secondary: colorClass }}\n        primary={label}\n        secondary={secondary}\n      />\n    </MenuItem>,\n  ];\n\n  // Add support for adding Dividers at the top or bottom of an option\n  if (dividerTop) {\n    arr.unshift(<Divider key={`divider${id}`} />);\n  } else if (dividerBottom) {\n    arr.push(<Divider key={`divider${id}`} />);\n  }\n\n  return arr;\n};\n\nconst addState = compose(\n  withState('fetchedOptions', 'setFetchedOptions', []),\n  withStateHandlers(\n    { anchorEl: null, isOpen: false, fetchedOptions: [] },\n    {\n      handleOpen: (_, { fetchOptions, setFetchedOptions }) => (currentTarget) => {\n        if (fetchOptions) {\n          fetchOptions().then(setFetchedOptions);\n        }\n\n        return {\n          isOpen: true,\n          anchorEl: currentTarget,\n        };\n      },\n      handleClose: () => () => ({ isOpen: false }),\n    },\n  ),\n);\n\nexport default compose(\n  addState,\n  withStyles(styles),\n  withProps(({\n    options = [],\n    fetchedOptions = [],\n    fetchOptions,\n    handleClose,\n    classes,\n  }) => {\n    if (fetchOptions) {\n      return {\n        options: fetchedOptions.map(option =>\n          mapOption(option, handleClose, classes)),\n      };\n    }\n\n    return {\n      options: options.map(option => mapOption(option, handleClose, classes)),\n    };\n  }),\n);\n","export { default } from './DropdownMenu';\n","import { Meteor } from 'meteor/meteor';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst DevError = ({ error }) =>\n  (Meteor.isDevelopment || Meteor.isTest ? (\n    <div className=\"error\" style={{ margin: 40 }}>\n      <span style={{ display: 'flex', alignItems: 'center' }}>\n        <h4>{error.name}</h4>:\n        <h3 style={{ marginLeft: 16 }}>{error.message}</h3>\n      </span>\n      {error.stack}\n    </div>\n  ) : null);\n\nDevError.propTypes = {\n  error: PropTypes.object.isRequired,\n};\n\nexport default DevError;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n// import T from '../Translation';\nimport Button from '../Button';\nimport DevError from './DevError';\n\n// Don't user Translation here, because Loadable depends on it...\n// Find another solution once we really need this to be translated\nconst LayoutError = ({ style, error }) => (\n  <div className=\"flex-col center animated jackInTheBox\" style={style}>\n    <h2 className=\"error\">Woops une erreur!</h2>\n    <div className=\"description\">\n      <p>\n        Quelque chose n'a pas fonctionné comme prévu, on en est déjà informés,\n        et vous pouvez essayer de recharger la page.\n        <br />\n        Si ça ne résoud pas le problème, écrivez-nous à digital@e-potek.ch.\n      </p>\n    </div>\n    <DevError error={error} />\n    <div className=\"flex center\">\n      <Button raised color=\"primary\" onClick={() => location.reload()}>\n        Recharger la page\n      </Button>\n      <a href=\"/\" className=\"home-link\">\n        <Button raised color=\"secondary\">\n          Page d'accueil\n        </Button>\n      </a>\n    </div>\n  </div>\n);\n\nLayoutError.propTypes = {\n  error: PropTypes.object.isRequired,\n  style: PropTypes.object,\n};\n\nLayoutError.defaultProps = {\n  style: {},\n};\n\nexport default LayoutError;\n","// @flow\nimport React from 'react';\n\ntype HtmlPreviewProps = {\n  value: String,\n};\n\nconst HtmlPreview = ({ value }: HtmlPreviewProps) => (\n  <div dangerouslySetInnerHTML={{ __html: value }} />\n);\n\nexport default HtmlPreview;\n","export { default } from './HtmlPreview';\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Badge from '@material-ui/core/Badge';\n\nimport CheckIcon from '@material-ui/icons/Check';\nimport CloseIcon from '@material-ui/icons/Close';\nimport AddIcon from '@material-ui/icons/AddCircleOutline';\nimport RemoveIcon from '@material-ui/icons/RemoveCircleOutline';\nimport LoopIcon from '@material-ui/icons/Loop';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport ForumIcon from '@material-ui/icons/Forum';\nimport MailIcon from '@material-ui/icons/MailOutline';\nimport PhoneIcon from '@material-ui/icons/Call';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport WaitingIcon from '@material-ui/icons/HourglassEmpty';\nimport ArrowUp from '@material-ui/icons/KeyboardArrowUp';\nimport DropDownCircle from '@material-ui/icons/ArrowDropDownCircle';\nimport ArrowDown from '@material-ui/icons/KeyboardArrowDown';\nimport ArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\nimport ArrowRight from '@material-ui/icons/KeyboardArrowRight';\nimport SearchIcon from '@material-ui/icons/Search';\nimport PowerOffIcon from '@material-ui/icons/PowerSettingsNew';\nimport LockOpen from '@material-ui/icons/LockOpen';\nimport Lock from '@material-ui/icons/Lock';\nimport BuildingIcon from '@material-ui/icons/Business';\nimport HomeIcon from '@material-ui/icons/Home';\nimport AssessmentIcon from '@material-ui/icons/Assessment';\nimport FolderIcon from '@material-ui/icons/FolderOpen';\nimport Person from '@material-ui/icons/Person';\nimport FaceIcon from '@material-ui/icons/Face';\nimport Eye from '@material-ui/icons/Visibility';\nimport EyeCrossed from '@material-ui/icons/VisibilityOff';\nimport SortIcon from '@material-ui/icons/Sort';\nimport MoreIcon from '@material-ui/icons/MoreHoriz';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport Apps from '@material-ui/icons/Apps';\nimport DollarSign from '@material-ui/icons/AttachMoney';\nimport ContactMail from '@material-ui/icons/ContactMail';\nimport People from '@material-ui/icons/People';\nimport DeveloperMode from '@material-ui/icons/DeveloperMode';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport CheckCircle from '@material-ui/icons/CheckCircle';\nimport RadioButtonChecked from '@material-ui/icons/RadioButtonChecked';\nimport Edit from '@material-ui/icons/Edit';\nimport TrendingUp from '@material-ui/icons/TrendingUp';\nimport TrendingDown from '@material-ui/icons/TrendingDown';\nimport TrendingFlat from '@material-ui/icons/TrendingFlat';\nimport Star from '@material-ui/icons/Star';\nimport StarHalf from '@material-ui/icons/StarHalf';\nimport StarEmpty from '@material-ui/icons/StarBorder';\nimport PersonAdd from '@material-ui/icons/PersonAdd';\nimport OfflinePin from '@material-ui/icons/OfflinePin';\nimport Save from '@material-ui/icons/Save';\nimport SupervisorAccount from '@material-ui/icons/SupervisedUserCircle';\nimport FlashOn from '@material-ui/icons/FlashOn';\nimport Report from '@material-ui/icons/Report';\nimport DeleteForever from '@material-ui/icons/DeleteForever';\nimport DeleteSweep from '@material-ui/icons/DeleteSweep';\nimport GroupAdd from '@material-ui/icons/GroupAdd';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport SettingsBackupRestore from '@material-ui/icons/SettingsBackupRestore';\nimport FilterList from '@material-ui/icons/FilterList';\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\nimport ArrowUpward from '@material-ui/icons/ArrowUpward';\nimport Domain from '@material-ui/icons/Domain';\nimport Info from '@material-ui/icons/Info';\nimport AttachFile from '@material-ui/icons/AttachFile';\nimport CloudDownload from '@material-ui/icons/CloudDownload';\nimport LocalHospital from '@material-ui/icons/LocalHospital';\nimport Help from '@material-ui/icons/Help';\nimport MonetizationOn from '@material-ui/icons/MonetizationOn';\nimport InsertChart from '@material-ui/icons/InsertChart';\nimport Image from '@material-ui/icons/Image';\nimport Delete from '@material-ui/icons/Delete';\nimport Phonelink from '@material-ui/icons/Phonelink';\nimport OpenInNew from '@material-ui/icons/OpenInNew';\nimport Add from '@material-ui/icons/Add';\nimport Settings from '@material-ui/icons/Settings';\nimport Event from '@material-ui/icons/Event';\nimport Computer from '@material-ui/icons/Computer';\nimport Notifications from '@material-ui/icons/Notifications';\nimport Snooze from '@material-ui/icons/Snooze';\nimport DragHandle from '@material-ui/icons/DragHandle';\nimport PriorityHigh from '@material-ui/icons/PriorityHigh';\n\nexport const iconMap = {\n  close: CloseIcon,\n  check: CheckIcon,\n  add: AddIcon,\n  addBasic: Add,\n  remove: RemoveIcon,\n  warning: WarningIcon,\n  menu: MenuIcon,\n  forum: ForumIcon,\n  mail: MailIcon,\n  phone: PhoneIcon,\n  waiting: WaitingIcon,\n  up: ArrowUp,\n  down: ArrowDown,\n  right: ArrowRight,\n  left: ArrowLeft,\n  dropdown: DropDownCircle,\n  search: SearchIcon,\n  powerOff: PowerOffIcon,\n  lock: Lock,\n  lockOpen: LockOpen,\n  home: HomeIcon,\n  building: BuildingIcon,\n  dashboard: AssessmentIcon,\n  folder: FolderIcon,\n  loop: LoopIcon,\n  'loop-spin': { component: LoopIcon, props: { className: 'fa-spin' } },\n  person: Person,\n  face: FaceIcon,\n  eye: Eye,\n  eyeCrossed: EyeCrossed,\n  sort: SortIcon,\n  more: MoreIcon,\n  star: Star,\n  starHalf: StarHalf,\n  starEmpty: StarEmpty,\n  accountCircle: AccountCircle,\n  app: Apps,\n  personAdd: PersonAdd,\n  offlinePin: OfflinePin,\n  dollarSign: DollarSign,\n  contactMail: ContactMail,\n  people: People,\n  developerMode: DeveloperMode,\n  save: Save,\n  supervisorAccount: SupervisorAccount,\n  error: ErrorIcon,\n  checkCircle: CheckCircle,\n  radioButtonChecked: RadioButtonChecked,\n  flash: FlashOn,\n  report: Report,\n  deleteForever: DeleteForever,\n  deleteSweep: DeleteSweep,\n  groupAdd: GroupAdd,\n  edit: Edit,\n  trendingUp: TrendingUp,\n  trendingDown: TrendingDown,\n  trendingFlat: TrendingFlat,\n  expandMore: ExpandMoreIcon,\n  backupRestore: SettingsBackupRestore,\n  filter: FilterList,\n  arrowUp: ArrowUpward,\n  arrowDown: ArrowDownward,\n  domain: Domain,\n  info: Info,\n  attachFile: AttachFile,\n  download: CloudDownload,\n  health: LocalHospital,\n  help: Help,\n  monetizationOn: MonetizationOn,\n  chart: InsertChart,\n  image: Image,\n  delete: Delete,\n  phoneLink: Phonelink,\n  openInNew: OpenInNew,\n  settings: Settings,\n  event: Event,\n  computer: Computer,\n  notifications: Notifications,\n  snooze: Snooze,\n  dragHandle: DragHandle,\n  priorityHigh: PriorityHigh,\n};\n\nconst Icon = React.forwardRef((\n  {\n    type,\n    size,\n    tooltip,\n    tooltipPlacement,\n    style = {},\n    badgeContent,\n    ...props\n  },\n  ref,\n) => {\n  const iconStyle = {\n    ...style,\n    ...(size ? { width: size, height: size } : {}),\n  };\n\n  if (type !== null && typeof type === 'object') {\n    return React.cloneElement(type, { style: iconStyle });\n  }\n\n  const MyIcon = iconMap[type];\n\n  if (!MyIcon) {\n    throw new Error(`invalid icon type: ${type}`);\n  } else if (MyIcon.component) {\n    return <MyIcon.component {...MyIcon.props} {...props} {...iconStyle} />;\n  }\n\n  let icon = <MyIcon ref={ref} style={iconStyle} {...props} />;\n\n  if (tooltip) {\n    icon = (\n      <Tooltip\n        placement={tooltipPlacement}\n        title={tooltip}\n        enterTouchDelay={0}\n      >\n        {icon}\n      </Tooltip>\n    );\n  }\n\n  if (badgeContent) {\n    icon = (\n      <Badge badgeContent={badgeContent} color=\"error\">\n        {icon}\n      </Badge>\n    );\n  }\n\n  return icon;\n});\n\nIcon.propTypes = {\n  size: PropTypes.number,\n  type: PropTypes.node.isRequired,\n};\n\nIcon.defaultProps = {\n  size: undefined,\n};\n\nexport default Icon;\n","export { default } from './Icon';\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core';\nimport cx from 'classnames';\nimport { capitalize } from '@material-ui/core/utils/helpers';\n\nimport MuiIconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Icon from '../Icon';\n\nconst styles = theme => ({\n  sizeSmall: {\n    padding: 3,\n    fontSize: theme.typography.pxToRem(18),\n  },\n  sizeTiny: {\n    padding: 2,\n    fontSize: theme.typography.pxToRem(12),\n  },\n});\n\n// Keep this a class to avoid warnings from IconMenu which adds a ref to this\n// component\nclass IconButton extends Component {\n  constructor(props) {\n    super(props);\n    // To avoid linter warnings\n    this.state = {};\n  }\n\n  render() {\n    const {\n      onClick,\n      type,\n      tooltip,\n      tooltipPlacement,\n      style,\n      iconStyle,\n      iconProps,\n      disabled,\n      classes,\n      size = 'medium',\n      className,\n      ...rest\n    } = this.props;\n\n    const button = (\n      <MuiIconButton\n        onClick={onClick}\n        style={style}\n        className={cx(\n          'icon-button',\n          {\n            [classes[`size${capitalize(size)}`]]: size !== 'medium',\n          },\n          className,\n        )}\n        aria-label={tooltip || undefined}\n        disabled={disabled}\n        {...rest}\n      >\n        <Icon type={type} style={iconStyle} fontSize=\"inherit\" {...iconProps} />\n      </MuiIconButton>\n    );\n\n    if (tooltip) {\n      return (\n        <Tooltip placement={tooltipPlacement} title={tooltip}>\n          {button}\n        </Tooltip>\n      );\n    }\n    return button;\n  }\n}\n\nIconButton.propTypes = {\n  disabled: PropTypes.bool,\n  iconProps: PropTypes.object,\n  iconStyle: PropTypes.object,\n  onClick: PropTypes.func,\n  style: PropTypes.objectOf(PropTypes.any),\n  tooltip: PropTypes.node,\n  tooltipPlacement: PropTypes.string,\n  type: PropTypes.string.isRequired,\n};\n\nIconButton.defaultProps = {\n  onClick: () => {},\n  tooltip: null,\n  tooltipPlacement: 'bottom',\n  style: {},\n  iconStyle: {},\n  iconProps: {},\n  disabled: false,\n};\n\nexport default withStyles(styles)(IconButton);\n","export { default } from './IconButton';\n","// @flow\nimport { Link as DefaultLink } from 'react-router-dom';\nimport { withProps } from 'recompose';\n\nexport default withProps(({ disabled, onClick }) => ({\n  onClick: disabled ? e => e.preventDefault() : onClick,\n}))(DefaultLink);\n","export { default } from './Link';\n","export { default } from '@material-ui/core/List';\nexport { default as ListItem } from '@material-ui/core/ListItem';\nexport { default as ListItemText } from '@material-ui/core/ListItemText';\nexport {\n  default as ListItemSecondaryAction,\n} from '@material-ui/core/ListItemSecondaryAction';\n","import React from 'react';\nimport cx from 'classnames';\n\n// http://codepen.io/TaniaLD/pen/oKxep\nconst Loading = ({ small }) => (\n  // Fade it in so that the loader doesn't show up if loading is super fast\n  <div className={cx('loading-container animated fadeIn', { small })}>\n    <div className=\"loading-box\">\n      <div className=\"loader2\" />\n    </div>\n  </div>\n);\n\nexport default Loading;\n","export { default } from './Loading';\nexport { default as withLoading } from './withLoading';\n","import React from 'react';\nimport { branch, renderComponent } from 'recompose';\nimport Loading from './Loading';\n\nexport default (small, disableVar) =>\n  branch(\n    ({ loading, isLoading, ...props }) =>\n      (loading || isLoading) && (!disableVar || !props[disableVar]),\n    renderComponent(() => <Loading small={small} />),\n  );\n","export { default } from '@material-ui/core/Chip';\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport MuiDialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nconst Dialog = (props) => {\n  const { title, actions, children, important, text, ...otherProps } = props;\n  return (\n    <MuiDialog\n      disableBackdropClick={important}\n      disableEscapeKeyDown={important}\n      {...otherProps}\n    >\n      {title && <DialogTitle>{title}</DialogTitle>}\n      <DialogContent>\n        {text && <DialogContentText>{text}</DialogContentText>}\n        {children}\n      </DialogContent>\n      {actions && <DialogActions>{actions}</DialogActions>}\n    </MuiDialog>\n  );\n};\n\nDialog.propTypes = {\n  // A dialog can only be closed using the buttons if this boolean is set\n  actions: PropTypes.array,\n  children: PropTypes.node,\n  important: PropTypes.bool,\n  text: PropTypes.node,\n  title: PropTypes.node,\n};\n\nDialog.defaultProps = {\n  important: false,\n  title: undefined,\n  text: undefined,\n  actions: undefined,\n  children: undefined,\n};\n\nexport default Dialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport MuiDivider from '@material-ui/core/Divider';\n\nconst Divider = props => <MuiDivider {...props} />;\n\nDivider.propTypes = {};\n\nexport default Divider;\n","// @flow\nimport React from 'react';\nimport FormControl from '@material-ui/core/FormControl';\n\nexport default props => <FormControl variant=\"outlined\" {...props} />;\n","// @flow\nimport React from 'react';\nimport FormHelperText from '@material-ui/core/FormHelperText';\n\nexport default props => <FormHelperText variant=\"outlined\" {...props} />;\n","export { default } from '@material-ui/core/OutlinedInput';\n","// @flow\nimport React from 'react';\nimport InputAdornment from '@material-ui/core/InputAdornment';\n\nexport default props => <InputAdornment {...props} />;\n","// @flow\nimport React from 'react';\nimport InputLabel from '@material-ui/core/InputLabel';\n\nexport default React.forwardRef((props, ref) => (\n  <InputLabel variant=\"outlined\" ref={ref} {...props} />\n));\n\nexport const useInputLabelWidth = () => {\n  const inputLabelRef = React.useRef(null);\n  const [labelWidth, setLabelWidth] = React.useState(0);\n  React.useEffect(() => {\n    if (inputLabelRef && inputLabelRef.current) {\n      setLabelWidth(inputLabelRef.current.offsetWidth);\n    }\n  }, []);\n\n  return { inputLabelRef, labelWidth };\n};\n","import React from 'react';\n\nimport MuiMenu from '@material-ui/core/Menu';\n\nconst Menu = props => <MuiMenu {...props} />;\n\nMenu.propTypes = {};\n\nexport default Menu;\n","import React from 'react';\n\nimport MuiMenuItem from '@material-ui/core/MenuItem';\n\nconst MenuItem = props => <MuiMenuItem {...props} />;\n\nMenuItem.propTypes = {};\n\nexport default MenuItem;\n","export { default } from '@material-ui/core/Radio';\nexport { default as RadioGroup } from '@material-ui/core/RadioGroup';\n","// @flow\nimport React from 'react';\nimport Select from '@material-ui/core/Select';\n\nexport default props => <Select variant=\"outlined\" {...props} />;\n","import React from 'react';\n\nimport RcSlider from 'rc-slider';\n\nimport colors from 'core/config/colors';\n\nconst styles = {\n  color: {\n    color: colors.primary,\n  },\n};\n\nconst Slider = props => <RcSlider {...props} />;\n\nSlider.propTypes = {};\n\nexport default Slider;\n","import React from 'react';\n\nimport MuiTextField from '@material-ui/core/TextField';\n\n// To be removed with refactoring\nconst TextField = props => <MuiTextField variant=\"outlined\" {...props} />;\n\nTextField.propTypes = {};\n\nexport default TextField;\n","import React, { Component } from 'react';\n\nimport Link from '../Link';\nimport T from '../Translation';\nimport Button from '../Button';\nimport Loading from '../Loading';\n\nclass MissingDoc extends Component {\n  constructor() {\n    super();\n    this.state = { render: false };\n  }\n\n  componentDidMount() {\n    // Set a timeout to allow subscriptions to refetch data before\n    // showing the missingdoc component\n    // 500ms is chosen because it should catch most subscription refreshes\n    // on regular connections\n    setTimeout(() => {\n      this.setState({ render: true });\n    }, 500);\n  }\n\n  render() {\n    const { render } = this.state;\n\n    if (!render) {\n      return <Loading />;\n    }\n\n    return (\n      <div className=\"flex-col center animated jackInTheBox\">\n        <div className=\"description\">\n          <p>\n            <T id=\"MissingDoc.text\" />\n          </p>\n        </div>\n        <div className=\"flex center\">\n          <Link to=\"/\" className=\"home-link\">\n            <Button raised color=\"secondary\">\n              <T id=\"MissingDoc.redirectHome\" />\n            </Button>\n          </Link>\n        </div>\n      </div>\n    );\n  }\n}\nexport default MissingDoc;\n","export { default } from './MissingDoc';\n","// @flow\nimport React from 'react';\nimport MaskedInput from 'react-text-mask';\n\nimport InputAdornment from '../Material/InputAdornment';\nimport FormHelperText from '../Material/FormHelperText';\nimport InputLabel, { useInputLabelWidth } from '../Material/InputLabel';\nimport FormControl from '../Material/FormControl';\nimport Input from '../Material/Input';\nimport { swissFrancMask, swissFrancMaskDecimal } from '../../utils/textMasks';\nimport { toNumber, toDecimalNumber } from '../../utils/conversionFunctions';\n\ntype MoneyInputProps = {\n  fullWidth?: boolean,\n  helperText?: React.Node,\n  label?: React.Node,\n  margin?: string,\n  onChange: Function,\n  required?: boolean,\n  value: number,\n};\n\nconst MoneyInput = ({\n  fullWidth = true,\n  helperText,\n  label,\n  onChange,\n  required,\n  margin,\n  decimal = false,\n  ...props\n}: MoneyInputProps) => {\n  const { inputLabelRef, labelWidth } = useInputLabelWidth(!!label);\n  const parse = decimal ? toDecimalNumber : toNumber;\n  const mask = decimal ? swissFrancMaskDecimal : swissFrancMask;\n\n  return (\n    <FormControl\n      className=\"money-input\"\n      required={required}\n      fullWidth={fullWidth}\n      margin={margin}\n    >\n      {label && <InputLabel ref={inputLabelRef}>{label}</InputLabel>}\n      <Input\n        labelWidth={labelWidth}\n        startAdornment={<InputAdornment position=\"start\">CHF</InputAdornment>}\n        onChange={event => onChange(parse(event.target.value))}\n        type=\"tel\"\n        inputComponent={MaskedInput}\n        inputProps={{ mask }}\n        {...props}\n      />\n      {helperText && <FormHelperText>{helperText}</FormHelperText>}\n    </FormControl>\n  );\n};\nexport default MoneyInput;\n","// @flow\nexport { default } from './MoneyInput';\n","// @flow\nimport React from 'react';\n\nimport FormHelperText from '../Material/FormHelperText';\nimport InputLabel, { useInputLabelWidth } from '../Material/InputLabel';\nimport FormControl from '../Material/FormControl';\nimport PercentInput from './PercentInput';\n\ntype PercentFieldProps = {\n  fullWidth?: boolean,\n  label?: React.Node,\n  helperText?: React.Node,\n  required?: boolean,\n};\n\nconst PercentField = ({\n  fullWidth = true,\n  helperText,\n  label,\n  required,\n  margin,\n  ...props\n}: PercentFieldProps) => {\n  const { inputLabelRef, labelWidth } = useInputLabelWidth(!!label);\n\n  return (\n    <FormControl required={required} fullWidth={fullWidth} margin={margin}>\n      <InputLabel ref={inputLabelRef}>{label}</InputLabel>\n      <PercentInput labelWidth={labelWidth} {...props} />\n      {helperText && <FormHelperText>{helperText}</FormHelperText>}\n    </FormControl>\n  );\n};\n\nexport default PercentField;\n","// @flow\nimport React from 'react';\nimport MaskedInput from 'react-text-mask';\n\nimport Input from '../Material/Input';\nimport { percentMask } from '../../utils/textMasks';\nimport { percentFormatters } from '../../utils/formHelpers';\n\ntype PercentInputProps = {\n  onChange: Function,\n  value: number,\n};\n\nconst PercentInput = ({ onChange, value, ...props }: PercentInputProps) => (\n  <Input\n    onChange={(event) => {\n      onChange(percentFormatters.parse(event.target.value));\n    }}\n    value={percentFormatters.format(value)}\n    inputComponent={MaskedInput}\n    inputProps={{ mask: percentMask }}\n    type=\"tel\"\n    {...props}\n  />\n);\n\nexport default PercentInput;\n","// @flow\nexport { default } from './PercentInput';\nexport { default as PercentField } from './PercentField';\n","// @flow\nimport React from 'react';\n\nimport { Percent } from '../Translation';\nimport StatusIcon from '../StatusIcon';\nimport { SUCCESS, ERROR } from '../../api/constants';\n\ntype PercentWithStatusProps = {\n  value: number,\n  status?: String,\n  tooltip?: String,\n  id?: String,\n  rounded?: boolean,\n};\n\nconst PercentWithStatus = ({\n  value,\n  status = value >= 1 ? SUCCESS : ERROR,\n  id,\n  tooltip,\n  rounded,\n}: PercentWithStatusProps) => (\n  <React.Fragment>\n    {Number.isNaN(value) ? '-' : <Percent value={value} rounded={rounded} />}\n    {!Number.isNaN(value) && (\n      <StatusIcon\n        status={status}\n        className=\"icon\"\n        style={{ marginLeft: 4 }}\n        tooltip={tooltip}\n        id={id}\n      />\n    )}\n  </React.Fragment>\n);\n\nexport default PercentWithStatus;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport MuiSelect from '../Material/Select';\nimport FormHelperText from '../Material/FormHelperText';\nimport InputLabel, { useInputLabelWidth } from '../Material/InputLabel';\nimport FormControl from '../Material/FormControl';\nimport Input from '../Material/Input';\nimport SelectContainer from './SelectContainer';\n\nconst makeRenderValue = ({ multiple, rawOptions }) => {\n  if (!multiple) {\n    return (value) => {\n      const option = rawOptions.find(({ id }) => id === value);\n      return option && option.label;\n    };\n  }\n\n  return values =>\n    values.map((value, i) => {\n      const option = rawOptions.find(({ id }) => id === value);\n      return [i !== 0 && ', ', option && option.label];\n    });\n};\n\nconst Select = ({\n  value,\n  onChange,\n  options,\n  id,\n  label,\n  style,\n  required,\n  error,\n  placeholder,\n  multiple,\n  rawOptions,\n  fullWidth,\n  ...otherProps\n}) => {\n  const { inputLabelRef, labelWidth } = useInputLabelWidth(!!label);\n\n  return (\n    <FormControl\n      fullWidth={fullWidth}\n      variant=\"outlined\"\n      className=\"mui-select\"\n      style={style}\n    >\n      {label && (\n        <InputLabel ref={inputLabelRef} htmlFor={id}>\n          {label}\n          {required && ' '}\n          {required && <span className=\"error\">*</span>}\n        </InputLabel>\n      )}\n      <MuiSelect\n        renderValue={makeRenderValue({ multiple, rawOptions })}\n        {...otherProps}\n        value={value}\n        onChange={onChange}\n        input={<Input labelWidth={labelWidth} id={id} />}\n        multiple={multiple}\n        displayEmpty={!!placeholder}\n      >\n        {[\n          placeholder && <MenuItem value=\"\">{placeholder}</MenuItem>,\n          ...options,\n        ].filter(x => x)}\n      </MuiSelect>\n      {error && <FormHelperText>{error}</FormHelperText>}\n    </FormControl>\n  );\n};\n\nSelect.propTypes = {\n  id: PropTypes.string,\n  label: PropTypes.node,\n  onChange: PropTypes.func.isRequired,\n  options: PropTypes.arrayOf(PropTypes.object).isRequired,\n  style: PropTypes.object,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n};\n\nSelect.defaultProps = {\n  value: '',\n  label: undefined,\n  style: {},\n  id: '',\n};\n\nexport default SelectContainer(Select);\n","import React from 'react';\nimport { compose, mapProps } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nimport MenuItem from '../Material/MenuItem';\nimport Divider from '../Material/Divider';\nimport Icon from '../Icon';\n\nconst styles = theme => ({\n  // menuItem: {\n  //   '&:hover': {\n  //     backgroundColor: theme.palette.primary.main,\n  //     '& $colorClass': { color: theme.palette.common.white },\n  //   },\n  // },\n  // menuItemRoot: { height: 'unset' },\n  // listItemTextWithIcon: { paddingLeft: 0 },\n  // listItemtext: { paddingLeft: 0, paddingRight: 0 },\n  // colorClass: {},\n});\n\nconst mapOptions = (\n  options,\n  {\n    menuItem: menuItemClass,\n    menuItemRoot,\n    listItemTextWithIcon,\n    listItemtext,\n    colorClass,\n  },\n) => {\n  const array = [];\n  options.forEach((option) => {\n    if (React.isValidElement(option)) {\n      return option;\n    }\n    const {\n      id,\n      label,\n      icon,\n      dividerTop,\n      dividerBottom,\n      secondary,\n      ...otherProps\n    } = option;\n\n    if (dividerTop) {\n      array.push(<Divider key={`divider${id}`} />);\n    }\n\n    array.push(<MenuItem\n      value={id}\n      key={id}\n      className={menuItemClass}\n      classes={{ root: menuItemRoot }}\n      {...otherProps}\n    >\n      <>\n        {icon && (\n          <ListItemIcon className={colorClass}>\n            <Icon type={icon} />\n          </ListItemIcon>\n        )}\n        <ListItemText\n          classes={{\n            primary: colorClass,\n            secondary: colorClass,\n            root: icon ? listItemTextWithIcon : listItemtext,\n          }}\n          // inset={!!icon}\n          primary={label}\n          secondary={secondary}\n        />\n      </>\n    </MenuItem>);\n\n    if (dividerBottom) {\n      array.push(<Divider key={`divider${id}`} />);\n    }\n  });\n\n  return array;\n};\n\nconst SelectContainer = compose(\n  withStyles(styles),\n  mapProps(({ options, classes, onChange, id, ...otherProps }) => ({\n    rawOptions: options,\n    options: mapOptions(options, classes),\n    onChange: e => onChange(id, e.target.value),\n    id,\n    ...otherProps,\n  })),\n);\n\nexport default SelectContainer;\n","export { default } from './Select';\n","// @flow\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport Icon from 'core/components/Icon';\nimport { SUCCESS, WARNING, ERROR } from 'core/api/constants';\nimport colors from 'core/config/colors';\nimport T from '../Translation';\n\nconst styles = {\n  [SUCCESS]: { color: colors.success, fill: colors.success },\n  [WARNING]: { color: colors.warning, fill: colors.warning },\n  [ERROR]: { color: colors.error, fill: colors.error },\n};\n\nconst StatusIcon = React.forwardRef(({ id, status, style = {}, tooltip, ...rest }, ref) => {\n  if (!status) {\n    return null;\n  }\n\n  const icon = (\n    <Icon\n      type={status === SUCCESS ? 'checkCircle' : 'error'}\n      style={{ ...styles[status], ...style }}\n      ref={ref}\n      {...rest}\n    />\n  );\n\n  if (tooltip) {\n    return (\n      <Tooltip\n        title={\n          typeof tooltip === 'object' ? (\n            tooltip\n          ) : (\n            <T id={`StatusIconTooltip.${id}.${status}`} />\n          )\n        }\n        placement=\"right\"\n        enterTouchDelay={0}\n      >\n        {icon}\n      </Tooltip>\n    );\n  }\n\n  return icon;\n});\n\nStatusIcon.propTypes = {\n  status: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n};\n\nStatusIcon.defaultProps = {\n  status: undefined,\n};\n\nexport default StatusIcon;\n","// @flow\nexport { default } from './StatusIcon.jsx';\n","// @flow\nimport React from 'react';\nimport cx from 'classnames';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport colors from '../../config/colors';\nimport {\n  PROMOTION_STATUS,\n  PROMOTIONS_COLLECTION,\n  PROMOTION_LOTS_COLLECTION,\n  PROMOTION_LOT_STATUS,\n  PROMOTION_LOT_REDUCED_STATUS,\n  TASKS_COLLECTION,\n  TASK_STATUS,\n  LOANS_COLLECTION,\n  LOAN_STATUS,\n  LENDERS_COLLECTION,\n  LENDER_STATUS,\n  PROPERTIES_COLLECTION,\n  PROPERTY_STATUS,\n  REVENUES_COLLECTION,\n  REVENUE_STATUS,\n  COMMISSION_STATUS,\n} from '../../api/constants';\nimport T from '../Translation';\nimport DropdownMenu from '../DropdownMenu';\nimport { updateDocument } from '../../api/methods/methodDefinitions';\n\ntype StatusLabelProps = {\n  status: string,\n  collection: string,\n  suffix?: string,\n  label: React.Node,\n  color: string,\n};\n\nconst getStatuses = (collection) => {\n  switch (collection) {\n  case LOANS_COLLECTION:\n    return {\n      [LOAN_STATUS.LEAD]: colors.secondary,\n      [LOAN_STATUS.ONGOING]: colors.primary,\n      [LOAN_STATUS.PENDING]: colors.warning,\n      [LOAN_STATUS.CLOSING]: colors.tertiary,\n      [LOAN_STATUS.BILLING]: colors.success,\n      [LOAN_STATUS.FINALIZED]: colors.success,\n      [LOAN_STATUS.UNSUCCESSFUL]: colors.error,\n      [LOAN_STATUS.TEST]: colors.warning,\n    };\n\n  case PROMOTIONS_COLLECTION:\n    return {\n      [PROMOTION_STATUS.CANCELLED]: colors.warning,\n      [PROMOTION_STATUS.FINISHED]: colors.error,\n      [PROMOTION_STATUS.OPEN]: colors.success,\n      [PROMOTION_STATUS.PREPARATION]: colors.primary,\n    };\n\n  case PROMOTION_LOTS_COLLECTION:\n    return {\n      [PROMOTION_LOT_STATUS.AVAILABLE]: colors.success,\n      [PROMOTION_LOT_STATUS.BOOKED]: colors.primary,\n      [PROMOTION_LOT_STATUS.SOLD]: colors.error,\n      [PROMOTION_LOT_REDUCED_STATUS.SOLD_TO_ME]: colors.tertiary,\n      [PROMOTION_LOT_REDUCED_STATUS.BOOKED_FOR_ME]: colors.primary,\n      [PROMOTION_LOT_REDUCED_STATUS.NOT_AVAILABLE]: colors.warning,\n    };\n\n  case TASKS_COLLECTION:\n    return {\n      [TASK_STATUS.ACTIVE]: colors.primary,\n      [TASK_STATUS.COMPLETED]: colors.success,\n      [TASK_STATUS.CANCELLED]: colors.error,\n    };\n\n  case LENDERS_COLLECTION:\n    return {\n      [LENDER_STATUS.TO_BE_CONTACTED]: colors.warning,\n      [LENDER_STATUS.CONTACTED]: colors.primary,\n      [LENDER_STATUS.OFFER_RECEIVED]: colors.success,\n      [LENDER_STATUS.TO_EXCLUDE]: colors.error,\n    };\n\n  case PROPERTIES_COLLECTION:\n    return {\n      [PROPERTY_STATUS.FOR_SALE]: colors.success,\n      [PROPERTY_STATUS.BOOKED]: colors.primary,\n      [PROPERTY_STATUS.SOLD]: colors.error,\n    };\n\n  case REVENUES_COLLECTION:\n    return {\n      [REVENUE_STATUS.EXPECTED]: colors.primary,\n      [REVENUE_STATUS.CLOSED]: colors.success,\n      [COMMISSION_STATUS.TO_BE_PAID]: colors.primary,\n      [COMMISSION_STATUS.PAID]: colors.success,\n    };\n\n  default:\n    throw new Error(`Unknown collection \"${collection}\" in StatusLabel`);\n  }\n};\nconst getLabel = ({\n  allowModify,\n  color,\n  label,\n  status,\n  statuses,\n  suffix,\n  variant,\n}) => {\n  switch (variant) {\n  case 'full':\n    return props => (\n      <span\n        className={cx({ allowModify, 'status-label': true })}\n        style={{ backgroundColor: color || statuses[status] }}\n        {...props}\n      >\n        <span>\n          {label || <T id={`Forms.status.${status}`} />}\n          {suffix}\n        </span>\n      </span>\n    );\n  case 'dot':\n    return ({ showTooltip, ...props }) =>\n      (showTooltip ? (\n        <Tooltip title={label || <T id={`Forms.status.${status}`} />}>\n          <span\n            className={cx({ allowModify, 'status-label-dot': true })}\n            {...props}\n          >\n            <span style={{ backgroundColor: color || statuses[status] }} />\n          </span>\n        </Tooltip>\n      ) : (\n        <span\n          className={cx({ allowModify, 'status-label-dot': true })}\n          {...props}\n        >\n          <span style={{ backgroundColor: color || statuses[status] }} />\n        </span>\n      ));\n\n  default:\n    break;\n  }\n};\n\nconst StatusLabel = ({\n  status,\n  collection,\n  suffix = '',\n  label = null,\n  color = null,\n  allowModify,\n  docId,\n  additionalActions = () => Promise.resolve(),\n  variant = 'full',\n  showTooltip = true,\n}: StatusLabelProps) => {\n  const statuses = getStatuses(collection);\n  const statusLabel = getLabel({\n    allowModify,\n    color,\n    docId,\n    label,\n    status,\n    statuses,\n    suffix,\n    variant,\n  });\n\n  if (allowModify) {\n    return (\n      <DropdownMenu\n        noWrapper\n        renderTrigger={({ handleOpen }) =>\n          statusLabel({ onClick: handleOpen, showTooltip })\n        }\n        options={Object.keys(statuses).map(stat => ({\n          id: stat,\n          label: <T id={`Forms.status.${stat}`} />,\n          onClick: () =>\n            additionalActions(stat, status).then(() =>\n              updateDocument.run({\n                collection,\n                object: { status: stat },\n                docId,\n              })),\n        }))}\n      />\n    );\n  }\n\n  return statusLabel({ showTooltip });\n};\n\nexport default StatusLabel;\n","export { default } from './StatusLabel';\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Overlay from 'react-bootstrap/lib/Overlay';\nimport Popover from 'react-bootstrap/lib/Popover';\n\nexport default class PopoverStickOnHover extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { showPopover: false };\n    this.enterTimeout = null;\n    this.exitTimeout = null;\n    this.ref = React.createRef();\n  }\n\n  componentWillUnmount() {\n    if (this.enterTimeout) {\n      clearTimeout(this.enterTimeout);\n    }\n    if (this.exitTimeout) {\n      clearTimeout(this.exitTimeout);\n    }\n  }\n\n  handleMouseEnter = () => {\n    const { delay, onMouseEnter } = this.props;\n\n    clearTimeout(this.exitTimeout);\n    this.enterTimeout = setTimeout(() => {\n      this.setState({ showPopover: true }, () => {\n        if (onMouseEnter) {\n          onMouseEnter();\n        }\n      });\n    }, delay);\n  };\n\n  handleMousePopoverEnter = () => {\n    clearTimeout(this.exitTimeout);\n    this.setState({ showPopover: true });\n  };\n\n  handleMouseLeave = () => {\n    const { exitDelay } = this.props;\n\n    clearTimeout(this.enterTimeout);\n    this.exitTimeout = setTimeout(() => {\n      this.setState({ showPopover: false });\n    }, exitDelay);\n  };\n\n  render() {\n    const { component, children, placement, title, forceOpen } = this.props;\n    const { showPopover } = this.state;\n    const show = forceOpen || showPopover;\n\n    const enhancedChildren = React.Children.map(children, child =>\n      React.cloneElement(child, {\n        onMouseEnter: this.handleMouseEnter,\n        onMouseLeave: this.handleMouseLeave,\n        ref: this.ref,\n        onFocus: this.handleMouseEnter,\n        onBlur: this.handleMouseLeave,\n      }))[0];\n\n    return (\n      <>\n        {enhancedChildren}\n        <Overlay\n          show={show}\n          placement={placement}\n          target={this.ref.current}\n          shouldUpdatePosition\n          transition={null}\n          animation={null}\n        >\n          <Popover\n            onMouseEnter={this.handleMousePopoverEnter}\n            onMouseLeave={this.handleMouseLeave}\n            title={title}\n            onClick={e => e.stopPropagation()}\n          >\n            {component}\n          </Popover>\n        </Overlay>\n      </>\n    );\n  }\n}\n\nPopoverStickOnHover.defaultProps = {\n  delay: 0,\n  exitDelay: 100,\n  onMouseEnter: undefined,\n  placement: 'right',\n  title: null,\n};\n\nPopoverStickOnHover.propTypes = {\n  children: PropTypes.element.isRequired,\n  component: PropTypes.node.isRequired,\n  delay: PropTypes.number,\n  exitDelay: PropTypes.number,\n  onMouseEnter: PropTypes.func,\n  placement: PropTypes.string,\n  title: PropTypes.node,\n};\n","export { default } from './StickyPopover';\n","// @flow\nimport React from 'react';\nimport pick from 'lodash/pick';\n\nimport AutoForm, { CustomAutoField } from '../AutoForm2';\nimport { updateDocument, schemas } from '../../api';\n\ntype UpdateFieldProps = {};\n\nconst makeOnSubmit = ({ collection, doc, fields, onSuccess }) => values =>\n  updateDocument\n    .run({ collection, docId: doc._id, object: pick(values, fields) })\n    .then(() => (onSuccess ? onSuccess(values) : null));\n\nconst UpdateField = ({\n  collection,\n  doc,\n  fields,\n  onSuccess,\n  onSubmit = makeOnSubmit({ collection, doc, fields, onSuccess }),\n  onSubmitCallback = () => ({}),\n  ...props\n}: UpdateFieldProps) => (\n  <AutoForm\n    autosave\n    schema={schemas[collection].pick(...fields)}\n    model={doc}\n    onSubmit={values => onSubmit(values).then(onSubmitCallback)}\n    className=\"update-field\"\n    {...props}\n  >\n    {fields.map(field => (\n      <CustomAutoField name={field} key={field} fullWidth />\n    ))}\n  </AutoForm>\n);\n\nexport default UpdateField;\n","export { default } from './UpdateField';\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactHighcharts from 'react-highcharts';\n\nconst initialazeHighcharts = () => {\n  ReactHighcharts.Highcharts.setOptions({\n    lang: {\n      months: 'Janvier_Février_Mars_Avril_Mai_Juin_Juillet_Août_Septembre_Octobre_Novembre_Décembre'.split('_'),\n      shortMonths: 'Janv._Févr._Mars_Avr._Mai_Juin_Juil._Août_Sept._Oct._Nov._Déc.'.split('_'),\n      weekdays: 'Dimanche_Lundi_Mardi_Mercredi_Jeudi_Vendredi_Samedi'.split('_'),\n      shortWeekdays: 'Dim._Lun._Mar._Mer._Jeu._Ven._Sam.'.split('_'),\n    },\n  });\n\n  ReactHighcharts.Highcharts.wrap(\n    ReactHighcharts.Highcharts.Chart.prototype,\n    'init',\n    function (proceed, options, callback) {\n      if (options.chart && options.chart.forExport && options.series) {\n        options.series.forEach((serie) => {\n          if (serie.visible === false) {\n            serie.showInLegend = false;\n          }\n        });\n      }\n\n      return proceed.call(this, options, callback);\n    },\n  );\n};\n\nexport default class Chart extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.chart = null;\n    const {\n      HighchartsExporting,\n      HighchartsMore,\n      HighchartsExportData,\n    } = this.props;\n\n    if (HighchartsExporting) {\n      HighchartsExporting(ReactHighcharts.Highcharts);\n    }\n    if (HighchartsMore) {\n      HighchartsMore(ReactHighcharts.Highcharts);\n    }\n    if (HighchartsExportData) {\n      HighchartsExportData(ReactHighcharts.Highcharts);\n    }\n\n    initialazeHighcharts();\n  }\n\n  componentWillReceiveProps({ data: nextData }) {\n    const { data: prevData } = this.props;\n    // If previous data[i].value is different from next data, update chart\n\n    if (\n      prevData.length !== nextData.length\n      || nextData.some((dataPoint, index) => dataPoint.value !== prevData[index].value)\n    ) {\n      this.update(nextData);\n    }\n  }\n\n  update = (data) => {\n    if (this.chart) {\n      // FIXME: This should animate the chart somehow\n      this.chart.getChart().series[0].setData(data);\n      this.chart.getChart().update({});\n    }\n  };\n\n  componentWillUnmount() {\n    this.chart = null;\n  }\n\n  render() {\n    const { config } = this.props;\n\n    return (\n      <ReactHighcharts\n        config={config}\n        ref={(c) => {\n          this.chart = c;\n        }}\n      />\n    );\n  }\n}\n\nChart.propTypes = {\n  config: PropTypes.object.isRequired,\n  data: PropTypes.array.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport merge from 'lodash/merge';\n\nimport PieChart from './PieChart';\n\nconst addCenteredTitle = (chart, title) => {\n  // Destroy old version of the title\n  if (chart.title) {\n    chart.title.destroy();\n  }\n\n  const { plotLeft, plotTop, plotWidth, plotHeight, renderer } = chart;\n  const centerX = plotLeft + plotWidth * 0.5;\n  const centerY = plotTop + plotHeight * 0.5;\n\n  // Add title but hide it\n  chart.title = renderer\n    .text(title, 0, 0)\n    .css({ color: '#333333', fontSize: '16px', fontWeight: 400 })\n    .hide()\n    .add();\n\n  const { width: titleWidth, height: titleHeight } = chart.title.getBBox();\n  const shiftedX = centerX - titleWidth / 2;\n  // Divide by 4 works better than divide by 2, for some reason\n  const shiftedY = centerY + titleHeight / 4;\n\n  // Reposition title and show it\n  chart.title.attr({ x: shiftedX, y: shiftedY }).show();\n};\n\nconst DonutChart = ({ config, title, ...rest }) => (\n  <PieChart\n    config={merge(\n      {},\n      {\n        chart: {\n          events: {\n            load() {\n              addCenteredTitle(this, title);\n            },\n            redraw() {\n              addCenteredTitle(this, title);\n            },\n          },\n        },\n        title: { text: '' },\n        series: [{ innerSize: '60%' }],\n      },\n      config,\n    )}\n    {...rest}\n  />\n);\n\nDonutChart.propTypes = {\n  config: PropTypes.object,\n  title: PropTypes.string,\n};\n\nDonutChart.defaultProps = {\n  config: {},\n  title: '',\n};\n\nexport default DonutChart;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport merge from 'lodash/merge';\n\nimport { defaultConfig } from './chartSettings';\nimport chartContainer from './chartContainer';\nimport Chart from './Chart';\n\nconst getConfig = ({ data, title, subtitle, config }) =>\n  merge(\n    {},\n    defaultConfig,\n    {\n      chart: { type: 'pie' },\n      title: { text: title },\n      subtitle: { text: subtitle },\n      plotOptions: {\n        pie: {\n          size: '100%',\n          borderWidth: 0,\n          allowPointSelect: false,\n          cursor: 'pointer',\n          dataLabels: { enabled: false },\n          showInLegend: true,\n          animation: { duration: 400 },\n        },\n      },\n      series: [\n        {\n          type: 'pie',\n          data: data.map(({ name, value }) => ({ name, y: value })),\n        },\n      ],\n    },\n    config,\n  );\n\nconst PieChart = props => <Chart config={getConfig(props)} data={props.data} />;\n\nPieChart.propTypes = {\n  config: PropTypes.object,\n  data: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    value: PropTypes.number.isRequired,\n  })),\n  intlPrefix: PropTypes.string,\n  subtitle: PropTypes.string,\n  title: PropTypes.string,\n};\n\nPieChart.defaultProps = {\n  data: [],\n  title: '',\n  subtitle: '',\n  config: {},\n  intlPrefix: undefined,\n};\n\nexport default chartContainer(PieChart);\n","import { injectIntl } from 'react-intl';\nimport { withProps, compose } from 'recompose';\n\nexport default compose(\n  injectIntl,\n  withProps(({ intlPrefix, data, intl: { formatMessage: f } }) => ({\n    data: data.map((dataPoint) => {\n      const name = f({\n        id: intlPrefix ? `${intlPrefix}.${dataPoint.id}` : dataPoint.id,\n      });\n      // Use || 0 to make sure the chart does not crash\n      return { ...dataPoint, value: dataPoint.value || 0, name };\n    }),\n  })),\n);\n","import colors from '../../config/colors';\n\nexport const legendConfig = {\n  itemStyle: {\n    fontSize: '14px',\n  },\n  floating: false,\n  itemMarginBottom: 4,\n  margin: 30,\n};\n\nexport function adjustLegend(that) {\n  const legend = that.legend;\n  const legendWidth = that.chartWidth - 20;\n\n  legend.allItems.forEach((item, i, allItems) => {\n    const { width, height } = item.legendGroup.getBBox();\n    const itemsPerRow = i < 3 ? 3 : 2;\n\n    item.legendGroup.attr({\n      translateX:\n        ((i % itemsPerRow) * (legendWidth - width)) / (itemsPerRow - 1),\n      translateY: Math.floor(i / 3) * (height + 5),\n    });\n  });\n}\n\nexport const defaultConfig = {\n  chart: {\n    style: { fontFamily: 'Eina04-Regular, Helvetica' },\n    animation: { duration: 400 },\n    backgroundColor: 'rgba(255, 255, 255, 0.0)',\n  },\n  title: { style: { fontSize: '18px', color: '#222', fontWeight: 400 } },\n  subtitle: { style: { fontSize: '14px' } },\n  tooltip: { style: { fontSize: '14px' } },\n  colors: colors.charts,\n  lang: { thousandsSep: \"'\" },\n  credits: { enabled: false },\n  legend: legendConfig,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Radio, { RadioGroup } from 'core/components/Material/Radio';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\n\nimport T from 'core/components/Translation';\n\nconst safeChange = (value, id, onChange, options) => {\n  // If all options are booleans, transform the onChange handler's value\n  // to booleans\n  if (options.every(o => typeof o === 'boolean' || typeof o.id === 'boolean')) {\n    return onChange(id, value === 'true');\n  }\n  return onChange(id, value);\n};\n\n// Cast value to strings, so that is plays nicely with material-ui,\n// in the onChange handler, convert back to boolean\nconst RadioButtons = ({\n  options,\n  onChange,\n  id,\n  intlPrefix,\n  value,\n  label,\n  style,\n  radioGroupStyle,\n  disabled,\n}) => (\n  <FormControl style={style} className=\"mui-radio-group\">\n    {React.isValidElement(label) && <FormLabel htmlFor={id}>{label}</FormLabel>}\n\n    <RadioGroup\n      onChange={(event, newValue) =>\n        safeChange(newValue, id, onChange, options)\n      }\n      value={`${value}`}\n      name={id}\n      id={id}\n      className=\"radio-group flex\"\n      style={\n        radioGroupStyle || {\n          justifyContent: 'flex-start',\n          flexDirection: 'row',\n        }\n      }\n    >\n      {options.map(option => (\n        <FormControlLabel\n          control={<Radio className=\"radio\" />}\n          key={option.id || option}\n          value={`${option.id !== undefined ? option.id : option}`}\n          label={option.label || <T id={`${intlPrefix}.${option}`} />}\n          disabled={disabled}\n        />\n      ))}\n    </RadioGroup>\n  </FormControl>\n);\n\nRadioButtons.propTypes = {\n  disabled: PropTypes.bool,\n  id: PropTypes.string,\n  intlPrefix: PropTypes.string,\n  label: PropTypes.node,\n  onChange: PropTypes.func.isRequired,\n  options: PropTypes.array.isRequired,\n  style: PropTypes.object,\n  value: PropTypes.any,\n};\n\nRadioButtons.defaultProps = {\n  label: '',\n  style: {},\n  value: undefined,\n  intlPrefix: '',\n  disabled: false,\n};\n\nexport default RadioButtons;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport T from './Translation';\n\nconst Roles = ({ roles, className }) => (\n  <span className={className}>\n    {roles && roles.length > 0\n      ? roles\n        .map(role => <T id={`roles.${role}`} key={role} />)\n        .reduce((acc, currentValue, currentIndex) => [\n          acc,\n          <span key={currentIndex}>,&nbsp;</span>,\n          currentValue,\n        ])\n      : null}\n  </span>\n);\n\nRoles.propTypes = {\n  className: PropTypes.string,\n  roles: PropTypes.array,\n};\n\nRoles.defaultProps = {\n  className: '',\n  roles: [],\n};\n\nexport default Roles;\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { STEPS } from 'core/api/constants';\nimport { initialDocuments as propertyDocuments } from 'core/api/properties/propertiesAdditionalDocuments';\nimport {\n  getPropertyDocuments,\n  getBorrowerDocuments,\n  getLoanDocuments,\n} from '../../documents';\nimport { DOCUMENTS } from '../../fileConstants';\n\ndescribe('documents', () => {\n  describe('getPropertyDocuments', () => {\n    let loan;\n\n    beforeEach(() => {\n      loan = {\n        step: STEPS.SOLVENCY,\n        properties: [\n          {\n            _id: 'propertyId',\n            additionalDocuments: propertyDocuments,\n          },\n        ],\n      };\n    });\n\n    it('returns an empty array if no propertyId is specified', () => {\n      expect(getPropertyDocuments({ loan })).to.deep.equal([]);\n    });\n\n    it('returns an array of documents for the first step', () => {\n      expect(getPropertyDocuments({ loan, id: 'propertyId' }).map(({ id }) => id)).to.deep.equal([\n        ...propertyDocuments.map(({ id }) => id),\n        DOCUMENTS.OTHER,\n      ]);\n    });\n\n    it('adds additionalDocuments to it', () => {\n      loan.properties[0].additionalDocuments = [\n        { id: 'someId' },\n        { id: 'someId2' },\n      ];\n      expect(getPropertyDocuments({ loan, id: 'propertyId' }).map(({ id }) => id)).to.deep.equal(['someId', 'someId2', DOCUMENTS.OTHER]);\n    });\n  });\n\n  describe('borrowerDocuments', () => {\n    let loan;\n\n    beforeEach(() => {\n      loan = {\n        borrowers: [{ _id: 'borrowerId' }],\n        step: STEPS.SOLVENCY,\n      };\n    });\n\n    it('returns an empty array if no Id is provided', () => {\n      expect(getBorrowerDocuments({ loan })).to.deep.equal([]);\n    });\n  });\n\n  describe('getLoanDocuments', () => {\n    it('returns documents for the loan', () => {\n      expect(getLoanDocuments({\n        loan: { general: {} },\n      }).map(({ id }) => id)).to.deep.equal([DOCUMENTS.OTHER]);\n    });\n  });\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { filesPercent, getMissingDocumentIds } from '../../fileHelpers';\n\ndescribe('fileHelpers', () => {\n  let fileArray;\n  let dummyDoc;\n  let fileId;\n\n  beforeEach(() => {\n    fileId = 'myFile';\n    fileArray = [{ id: fileId }];\n    dummyDoc = { documents: {} };\n  });\n\n  describe('filesPercent', () => {\n    it('returns 0 if an empty doc is given', () => {\n      expect(filesPercent({ doc: {}, fileArray })).to.deep.equal({\n        percent: 0,\n        count: 1,\n      });\n    });\n\n    it('returns 0 if no doc is given', () => {\n      expect(filesPercent({ fileArray })).to.deep.equal({\n        percent: 0,\n        count: 1,\n      });\n    });\n\n    it('returns 1 if a file exists', () => {\n      // file exists\n      dummyDoc.documents.myFile = [{}];\n      expect(filesPercent({ doc: dummyDoc, fileArray })).to.deep.equal({\n        percent: 1,\n        count: 1,\n      });\n    });\n\n    it('returns 0 if an empty array is given', () => {\n      dummyDoc.documents.myFile = [];\n      expect(filesPercent({ doc: dummyDoc, fileArray })).to.deep.equal({\n        percent: 0,\n        count: 1,\n      });\n    });\n\n    it(\"doesn't count files which aren't required\", () => {\n      fileArray = [{ id: 'myFile', required: false }];\n      dummyDoc.documents.myFile = [];\n      expect(filesPercent({ doc: dummyDoc, fileArray })).to.deep.equal({\n        percent: 1,\n        count: 0,\n      });\n    });\n\n    describe('status verification', () => {\n      it('returns 0 if no files are valid', () => {\n        fileArray = [{ id: 'myFile', condition: undefined }];\n        dummyDoc.documents.myFile = [{ status: 'INVALID' }];\n        expect(filesPercent({\n          doc: dummyDoc,\n          fileArray,\n          checkValidity: true,\n        })).to.deep.equal({\n          percent: 0,\n          count: 1,\n        });\n      });\n\n      it('returns 0.5 if one file is valid', () => {\n        fileArray = [\n          { id: 'myFile', condition: undefined },\n          { id: 'myFile2', condition: undefined },\n        ];\n\n        dummyDoc.documents.myFile = [{ status: 'INVALID' }];\n        dummyDoc.documents.myFile2 = [{ status: 'VALID' }];\n        expect(filesPercent({\n          doc: dummyDoc,\n          fileArray,\n          checkValidity: true,\n        })).to.deep.equal({\n          percent: 0.5,\n          count: 2,\n        });\n      });\n    });\n  });\n\n  describe('getMissingDocumentIds', () => {\n    it('returns the array of missing docs', () => {\n      expect(getMissingDocumentIds({\n        doc: dummyDoc,\n        fileArray,\n      })).to.deep.equal([fileId]);\n    });\n\n    it('returns an empty array if all documents have been uploaded', () => {\n      dummyDoc.documents[fileId] = [{}];\n      expect(getMissingDocumentIds({\n        doc: dummyDoc,\n        fileArray,\n      })).to.deep.equal([]);\n    });\n  });\n});\n","import {\n  PROPERTIES_COLLECTION,\n  BORROWERS_COLLECTION,\n  LOANS_COLLECTION,\n} from '../constants';\nimport {\n  DOCUMENTS,\n  DOCUMENTS_WITH_TOOLTIP,\n  BORROWER_DOCUMENTS,\n  PROPERTY_DOCUMENTS,\n  LOAN_DOCUMENTS,\n} from './fileConstants';\n\nexport const documentHasTooltip = documentId =>\n  !DOCUMENTS_WITH_TOOLTIP.some(id => documentId === id);\n\nconst makeAllObjectDocuments = documents =>\n  Object.values(documents).map(id => ({\n    id,\n    noTooltips: documentHasTooltip(id),\n  }));\n\nexport const allDocuments = ({ doc, collection }) => {\n  const s3Documents = doc.documents\n    ? Object.keys(doc.documents).map(key => ({ id: key }))\n    : [];\n  let documents = [];\n  switch (collection) {\n  case BORROWERS_COLLECTION:\n    documents = makeAllObjectDocuments(BORROWER_DOCUMENTS);\n    break;\n  case PROPERTIES_COLLECTION:\n    documents = makeAllObjectDocuments(PROPERTY_DOCUMENTS);\n    break;\n  case LOANS_COLLECTION:\n    documents = makeAllObjectDocuments(LOAN_DOCUMENTS);\n    break;\n  default:\n    break;\n  }\n\n  const otherAdditionalDocuments = documents.filter(({ id }) => !doc.additionalDocuments.some(document => id === document.id));\n  const legacyCustomDocuments = s3Documents.filter(({ id }) =>\n    !doc.additionalDocuments.some(document => id === document.id)\n      && !documents.some(document => id === document.id));\n\n  return doc.additionalDocuments && doc.additionalDocuments.length > 0\n    ? [\n      ...doc.additionalDocuments,\n      ...otherAdditionalDocuments,\n      ...legacyCustomDocuments,\n    ]\n    : documents;\n};\n\nconst requiredByAdminOnly = ({ requiredByAdmin }) => requiredByAdmin !== false;\n\nconst formatAdditionalDoc = additionalDoc => ({\n  ...additionalDoc,\n  required: true,\n  noTooltips: documentHasTooltip(additionalDoc.id),\n});\n\nconst makeGetDocuments = collection => ({ loan, id }, options = {}) => {\n  const { doc } = options;\n\n  const isLoans = collection === LOANS_COLLECTION;\n  if (!id && !isLoans) {\n    return [];\n  }\n\n  const document = doc || (!isLoans && loan[collection].find(({ _id }) => _id === id)) || loan;\n  const additionalDocumentsExist = document\n    && document.additionalDocuments\n    && document.additionalDocuments.length > 0;\n\n  return [\n    ...(additionalDocumentsExist\n      ? document.additionalDocuments\n        .filter(requiredByAdminOnly)\n        .map(formatAdditionalDoc)\n      : []),\n    { id: DOCUMENTS.OTHER, required: false, noTooltips: true },\n  ];\n};\n\nexport const getPropertyDocuments = makeGetDocuments(PROPERTIES_COLLECTION);\nexport const getBorrowerDocuments = makeGetDocuments(BORROWERS_COLLECTION);\nexport const getLoanDocuments = makeGetDocuments(LOANS_COLLECTION);\n","import { Meteor } from 'meteor/meteor';\n\nexport const FILE_STATUS = {\n  UNVERIFIED: 'UNVERIFIED',\n  VALID: 'VALID',\n  ERROR: 'ERROR',\n};\n\nexport const ALLOWED_FILE_TYPES = [\n  'image/png',\n  'image/jpeg',\n  'application/pdf',\n  'application/vnd.ms-excel',\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n];\n\nexport const ONE_KB = 1024;\n\n// 50 MB (use null for unlimited)\nexport const MAX_FILE_SIZE = 50 * ONE_KB * ONE_KB;\n\nexport const SLINGSHOT_DIRECTIVE_NAME = 'exoscale';\n\nexport const EXOSCALE_PATH = 'sos-ch-dk-2.exo.io';\n\nexport const BUCKET_NAME = Meteor.isServer\n  ? Meteor.settings.storage.bucketName\n  : '';\n\nexport const TEST_BUCKET_NAME = 'e-potek-test-bucket';\n\nexport const OBJECT_STORAGE_PATH = `https://${BUCKET_NAME}.${EXOSCALE_PATH}`;\n\nexport const OBJECT_STORAGE_REGION = 'CH-DK-2';\n\nexport const S3_ENDPOINT = 'https://sos-ch-dk-2.exo.io';\n\nexport const PROPERTY_DOCUMENTS = {\n  COOWNERSHIP_AGREEMENT: 'COOWNERSHIP_AGREEMENT',\n  COOWNERSHIP_ALLOCATION_AGREEMENT: 'COOWNERSHIP_ALLOCATION_AGREEMENT',\n  FIRE_AND_WATER_INSURANCE: 'FIRE_AND_WATER_INSURANCE',\n  INVESTEMENT_PROPERTY_RENTAL_STATEMENT: 'INVESTMENT_PROPERTY_RENTAL_STATEMENT',\n  INVESTEMENT_PROPERTY_SERVICE_CHARGE_SETTLEMENT:\n    'INVESTEMENT_PROPERTY_SERVICE_CHARGE_SETTLEMENT',\n  INVESTEMENT_PROPERTY_WORKS_HISTORY: 'INVESTEMENT_PROPERTY_WORKS_HISTORY',\n  INVESTMENT_PROPERTY_CONDOMINIUM_OWNERSHIP_DIVISION_REGISTER:\n    'INVESTMENT_PROPERTY_CONDOMINIUM_OWNERSHIP_DIVISION_REGISTER',\n  INVESTMENT_PROPERTY_CONDOMINIUM_REGULATION:\n    'INVESTMENT_PROPERTY_CONDOMINIUM_REGULATION',\n  INVESTMENT_PROPERTY_RENT_JUSTIFICATION:\n    'INVESTMENT_PROPERTY_RENT_JUSTIFICATION',\n  LAND_REGISTER_EXTRACT: 'LAND_REGISTER_EXTRACT',\n  PROPERTY_FUTURE_WORKS: 'PROPERTY_FUTURE_WORKS',\n  PROPERTY_MINERGIE_CERTIFICATE: 'PROPERTY_MINERGIE_CERTIFICATE',\n  PROPERTY_MARKETING_BROCHURE: 'PROPERTY_MARKETING_BROCHURE',\n  PROPERTY_PICTURES: 'PROPERTY_PICTURES',\n  PROPERTY_PLANS: 'PROPERTY_PLANS',\n  PROPERTY_VOLUME: 'PROPERTY_VOLUME',\n  PROPERTY_WORKS_QUOTE: 'PROPERTY_WORKS_QUOTE',\n  PURCHASE_CONTRACT: 'PURCHASE_CONTRACT',\n  SHARE_BUILDING_PERMIT: 'SHARE_BUILDING_PERMIT',\n  SHARE_EASEMENTS: 'SHARE_EASEMENTS',\n  SHARE_FINANCIAL_PLAN: 'SHARE_FINANCIAL_PLAN',\n  SHARE_GC_CONTRACT: 'SHARE_GC_CONTRACT',\n  SHARE_GC_QUOTE_BY_BCC: 'SHARE_GC_QUOTE_BY_BCC',\n  SHARE_INSURANCE_CERTIFICATE: 'SHARE_INSURANCE_CERTIFICATE',\n  SHARE_PLANS: 'SHARE_PLANS',\n  SHARE_WORKS: 'SHARE_WORKS',\n};\n\nexport const BORROWER_DOCUMENTS = {\n  BONUSES: 'BONUSES',\n  CURRENT_MORTGAGES_INTERESTS_STATEMENT: 'CURRENT_MORTGAGE_INTERESTS_STATEMENT',\n  CURRENT_MORTGAGES: 'CURRENT_MORTGAGES',\n  DEBT_COLLECTION_REGISTER_EXTRACT: 'DEBT_COLLECTION_REGISTER_EXTRACT',\n  DIVORCE_RULING: 'DIVORCE_RULING',\n  EXPENSES_JUSTIFICATION: 'EXPENSES_JUSTIFICATION',\n  IDENTITY: 'IDENTITY',\n  LAST_SALARIES: 'LAST_SALARIES',\n  LEGITIMATION_CARD: 'LEGITIMATION_CARD',\n  OTHER_FORTUNE_JUSTIFICATION: 'OTHER_FORTUNE_JUSTIFICATION',\n  OTHER_INCOME_JUSTIFICATION: 'OTHER_INCOME_JUSTIFICATION',\n  OWN_COMPANY_COMMERCIAL_REGISTER: 'OWN_COMPANY_COMMERCIAL_REGISTER',\n  OWN_COMPANY_FINANCIAL_STATEMENTS: 'OWN_COMPANY_FINANCIAL_STATEMENTS',\n  OWN_FUNDS_JUSTIFICATION: 'OWN_FUND_JUSTIFICATION',\n  PENSION_FUND_YEARLY_STATEMENT: 'PENSION_FUND_YEARLY_STATEMENT',\n  RESIDENCY_PERMIT: 'RESIDENCY_PERMIT',\n  SALARY_CERTIFICATE: 'SALARY_CERTIFICATE',\n  TAX_STATEMENT: 'TAX_STATEMENT',\n  TAXES: 'TAXES',\n  THIRD_PILLAR_ACCOUNTS: 'THIRD_PILLAR_ACCOUNTS',\n  WITHDRAWAL_JUSTIFICATION: 'WITHDRAWAL_JUSTIFICATION',\n};\n\nexport const LOAN_DOCUMENTS = {\n  CONTRACT: 'CONTRACT',\n  REIMBURSEMENT_STATEMENT: 'REIMBURSEMENT_STATEMENT',\n  SIGNED_CONTRACT: 'SIGNED_CONTRACT',\n  SIGNED_MANDATE: 'SIGNED_MANDATE',\n};\n\nexport const DOCUMENTS = {\n  ...PROPERTY_DOCUMENTS,\n  ...BORROWER_DOCUMENTS,\n  ...LOAN_DOCUMENTS,\n  OTHER: 'OTHER',\n};\n\nexport const DOCUMENTS_CATEGORIES = {\n  PERSONAL_DOCUMENTS: [\n    BORROWER_DOCUMENTS.IDENTITY,\n    BORROWER_DOCUMENTS.RESIDENCY_PERMIT,\n    BORROWER_DOCUMENTS.LEGITIMATION_CARD,\n    BORROWER_DOCUMENTS.DEBT_COLLECTION_REGISTER_EXTRACT,\n    BORROWER_DOCUMENTS.DIVORCE_RULING,\n  ],\n  INCOMES_AND_EXPENSES: [\n    BORROWER_DOCUMENTS.TAXES,\n    BORROWER_DOCUMENTS.SALARY_CERTIFICATE,\n    BORROWER_DOCUMENTS.LAST_SALARIES,\n    BORROWER_DOCUMENTS.BONUSES,\n    BORROWER_DOCUMENTS.OTHER_INCOME_JUSTIFICATION,\n    BORROWER_DOCUMENTS.EXPENSES_JUSTIFICATION,\n    BORROWER_DOCUMENTS.CURRENT_MORTGAGES,\n  ],\n  FORTUNE_AND_OWN_FUNDS: [\n    BORROWER_DOCUMENTS.OWN_FUNDS_JUSTIFICATION,\n    BORROWER_DOCUMENTS.OTHER_FORTUNE_JUSTIFICATION,\n    BORROWER_DOCUMENTS.OWN_COMPANY_FINANCIAL_STATEMENTS,\n  ],\n  RETIREMENT: [\n    BORROWER_DOCUMENTS.PENSION_FUND_YEARLY_STATEMENT,\n    BORROWER_DOCUMENTS.THIRD_PILLAR_ACCOUNTS,\n    BORROWER_DOCUMENTS.WITHDRAWAL_JUSTIFICATION,\n  ],\n  HOUSING: [\n    PROPERTY_DOCUMENTS.PROPERTY_MARKETING_BROCHURE,\n    PROPERTY_DOCUMENTS.PROPERTY_PICTURES,\n    PROPERTY_DOCUMENTS.PROPERTY_PLANS,\n    PROPERTY_DOCUMENTS.PROPERTY_VOLUME,\n    PROPERTY_DOCUMENTS.PROPERTY_MINERGIE_CERTIFICATE,\n    PROPERTY_DOCUMENTS.FIRE_AND_WATER_INSURANCE,\n    PROPERTY_DOCUMENTS.PROPERTY_WORKS_QUOTE,\n    PROPERTY_DOCUMENTS.COOWNERSHIP_AGREEMENT,\n    PROPERTY_DOCUMENTS.COOWNERSHIP_ALLOCATION_AGREEMENT,\n    PROPERTY_DOCUMENTS.PROPERTY_FUTURE_WORKS,\n    PROPERTY_DOCUMENTS.INVESTEMENT_PROPERTY_RENTAL_STATEMENT,\n    PROPERTY_DOCUMENTS.INVESTEMENT_PROPERTY_SERVICE_CHARGE_SETTLEMENT,\n    PROPERTY_DOCUMENTS.PURCHASE_CONTRACT,\n    PROPERTY_DOCUMENTS.LAND_REGISTER_EXTRACT,\n  ],\n  SHARE: [\n    PROPERTY_DOCUMENTS.SHARE_BUILDING_PERMIT,\n    PROPERTY_DOCUMENTS.SHARE_EASEMENTS,\n    PROPERTY_DOCUMENTS.SHARE_FINANCIAL_PLAN,\n    PROPERTY_DOCUMENTS.SHARE_GC_CONTRACT,\n    PROPERTY_DOCUMENTS.SHARE_GC_QUOTE_BY_BCC,\n    PROPERTY_DOCUMENTS.SHARE_INSURANCE_CERTIFICATE,\n    PROPERTY_DOCUMENTS.SHARE_PLANS,\n    PROPERTY_DOCUMENTS.SHARE_WORKS,\n  ],\n};\n\nexport const DOCUMENTS_WITH_TOOLTIP = [\n  DOCUMENTS.BONUSES,\n  DOCUMENTS.BUYERS_CONTRACT,\n  DOCUMENTS.COOWNERSHIP_AGREEMENT,\n  DOCUMENTS.COOWNERSHIP_ALLOCATION_AGREEMENT,\n  DOCUMENTS.CURRENT_MORTGAGES,\n  DOCUMENTS.DEBT_COLLECTION_REGISTER_EXTRACT,\n  DOCUMENTS.EXPENSES_JUSTIFICATION,\n  DOCUMENTS.FIRE_AND_WATER_INSURANCE,\n  DOCUMENTS.IDENTITY,\n  DOCUMENTS.INVESTEMENT_PROPERTY_RENTAL_STATEMENT,\n  DOCUMENTS.INVESTEMENT_PROPERTY_SERVICE_CHARGE_SETTLEMENT,\n  DOCUMENTS.PURCHASE_CONTRACT,\n  DOCUMENTS.LAST_SALARIES,\n  DOCUMENTS.LEGITIMATION_CARD,\n  DOCUMENTS.OTHER_INCOME_JUSTIFICATION,\n  DOCUMENTS.OTHER_FORTUNE_JUSTIFICATION,\n  DOCUMENTS.OWN_COMPANY_FINANCIAL_STATEMENTS,\n  DOCUMENTS.OWN_FUNDS_JUSTIFICATION,\n  DOCUMENTS.PENSION_FUND_YEARLY_STATEMENT,\n  DOCUMENTS.PROPERTY_MARKETING_BROCHURE,\n  DOCUMENTS.PROPERTY_PICTURES,\n  DOCUMENTS.PROPERTY_VOLUME,\n  DOCUMENTS.PROPERTY_WORKS_QUOTE,\n  DOCUMENTS.PROPERTY_FUTURE_WORKS,\n  DOCUMENTS.REIMBURSEMENT_STATEMENT,\n  DOCUMENTS.RESIDENCY_PERMIT,\n  DOCUMENTS.SIGNED_CONTRACT,\n  DOCUMENTS.TAXES,\n  DOCUMENTS.THIRD_PILLAR_ACCOUNTS,\n  DOCUMENTS.WITHDRAWAL_JUSTIFICATION,\n];\n\nexport const S3_ACLS = {\n  PRIVATE: 'private',\n  PUBLIC_READ: 'public-read',\n  PUBLIC_READ_WRITE: 'public-read-write',\n  AUTHENTICATED_READ: 'authenticated-read',\n  BUCKET_OWNER_READ: 'bucket-owner-read',\n  BUCKET_OWNER_FULL_CONTROL: 'bucket-owner-full-control',\n  LOG_DELIVERY_WRITE: 'log-delivery-write',\n};\n","// @flow\nimport { getPercent } from '../../utils/general';\nimport { FILE_STATUS } from './fileConstants';\n\nconst documentIsRequired = required => required !== false;\n\nconst getDocumentsToCount = (\n  documentArray: Array<Object>,\n  doc: Object,\n  checkDocumentStatus?: boolean,\n): Array<Object> => {\n  if (!doc || !doc.documents) {\n    return [undefined];\n  }\n  const { documents } = doc;\n\n  return documentArray.reduce(\n    (documentsToCount, { required, id: documentId }) => {\n      if (!documentIsRequired(required)) {\n        // Don't count this document\n        return documentsToCount;\n      }\n\n      if (!documents[documentId]) {\n        // No document has been added yet, count this one, and as todo\n        return [...documentsToCount, undefined];\n      }\n\n      if (checkDocumentStatus) {\n        // Make sure all documents have a valid status\n        const allFilesAreValid = documents[documentId].every(({ status }) => status === FILE_STATUS.VALID);\n        return [...documentsToCount, allFilesAreValid ? true : undefined];\n      }\n\n      return [...documentsToCount, documents[documentId]];\n    },\n    [],\n  );\n};\n\n/**\n * filesPercent - Determines the completion rate of file upload for a given\n * step, doc and array of files\n *\n * @param {object} doc           The mongoDB document where files are saved\n * @param {function} fileArray   Array of files\n\n *\n * @return {number} a value between 0 and 1 indicating the percentage of\n * completion, 1 is complete, 0 is not started\n */\nexport const filesPercent = ({ fileArray, doc, checkValidity }) => {\n  const documentsToCount = getDocumentsToCount(fileArray, doc, checkValidity);\n  return {\n    percent: getPercent(documentsToCount),\n    count: documentsToCount.length,\n  };\n};\n\nconst documentExists = (doc, id) =>\n  doc && doc.documents && doc.documents[id] && doc.documents[id].length > 0;\n\nexport const getMissingDocumentIds = ({ fileArray, doc }) => {\n  const ids = fileArray\n    .filter(({ required, id }) =>\n      documentIsRequired(required) && !documentExists(doc, id))\n    .map(({ id }) => id);\n  return ids;\n};\n","import { Slingshot } from 'meteor/edgee:slingshot';\nimport {\n  SLINGSHOT_DIRECTIVE_NAME,\n  ALLOWED_FILE_TYPES,\n  MAX_FILE_SIZE,\n} from './fileConstants';\n\nSlingshot.fileRestrictions(SLINGSHOT_DIRECTIVE_NAME, {\n  allowedFileTypes: ALLOWED_FILE_TYPES,\n  maxSize: MAX_FILE_SIZE,\n});\n","import { Method } from '../methods/methods';\n\nexport const deleteFile = new Method({\n  name: 'deleteFile',\n  params: {\n    collection: String,\n    docId: String,\n    fileKey: String,\n  },\n});\n\nexport const setFileStatus = new Method({\n  name: 'setFileStatus',\n  params: {\n    fileKey: String,\n    newStatus: String,\n  },\n});\n\nexport const setFileError = new Method({\n  name: 'setFileError',\n  params: {\n    error: String,\n    fileKey: String,\n  },\n});\n\nexport const downloadFile = new Method({\n  name: 'downloadFile',\n  params: {\n    key: String,\n  },\n});\n\nexport const getSignedUrl = new Method({\n  name: 'getSignedUrl',\n  params: {\n    key: String,\n  },\n});\n\nexport const updateDocumentsCache = new Method({\n  name: 'updateDocumentsCache',\n  params: {\n    docId: String,\n    collection: String,\n  },\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport {\n  userLogin,\n  resetDatabase,\n} from '../../../../utils/testHelpers/testHelpers';\nimport { ROLES } from '../../../constants';\nimport { generateScenario } from '../../../methods/index';\nimport proLoans from '../proLoans.app-test';\n\nconst fetchLoans = userId =>\n  new Promise((resolve, reject) => {\n    proLoans\n      .clone({ userId })\n      .fetch((err, data) => (err ? reject(err) : resolve(data)));\n  });\n\nconst createUserWithLoan = referredByUserLink =>\n  generateScenario.run({\n    scenario: { users: { referredByUserLink, loans: {} } },\n  });\n\nconst createProUser = userId =>\n  generateScenario.run({\n    scenario: { users: { _factory: 'pro', _id: userId } },\n  });\n\ndescribe('loanQueries', function () {\n  this.timeout(10000);\n  beforeEach(() => resetDatabase());\n\n  describe('proLoans', () => {\n    it('uses the cache when necessary', () => {\n      let t0;\n      let t1;\n\n      return userLogin({ role: ROLES.ADMIN })\n        .then(() => createProUser('proId'))\n        .then(() => createUserWithLoan('proId'))\n        .then(() => {\n          t0 = performance.now();\n          return fetchLoans('proId');\n        })\n        .then((loans) => {\n          t1 = performance.now();\n          expect(loans.length).to.equal(1);\n          expect(t1 - t0).to.be.within(500, 2000);\n          return fetchLoans('proId');\n        })\n        .then((loans) => {\n          const t2 = performance.now();\n          expect(loans.length).to.equal(1);\n          expect(t2 - t1).to.be.within(0, 100);\n        });\n    });\n\n    it('resets the cache when necessary', () => {\n      let t0;\n      let t1;\n      let t2;\n\n      return userLogin({ role: ROLES.ADMIN })\n        .then(() => createProUser('proId'))\n        .then(() => createUserWithLoan('proId'))\n        .then(() => {\n          t0 = performance.now();\n          return fetchLoans('proId');\n        })\n        .then((loans) => {\n          t1 = performance.now();\n          expect(loans.length).to.equal(1);\n          expect(t1 - t0).to.be.within(500, 2000);\n          return createUserWithLoan('proId');\n        })\n        .then(() => {\n          t2 = performance.now();\n          return fetchLoans('proId');\n        })\n        .then((loans) => {\n          const t3 = performance.now();\n          expect(loans.length).to.equal(2);\n          expect(t3 - t2).to.be.within(500, 2000);\n        });\n    });\n  });\n});\n","// @flow\nimport SimpleSchema from 'simpl-schema';\n\nimport {\n  createdAt,\n  updatedAt,\n  contactsSchema,\n  additionalDocuments,\n  documentsField,\n  cacheField,\n} from '../../helpers/sharedSchemas';\nimport {\n  LOAN_STATUS,\n  LOAN_VERIFICATION_STATUS,\n  PURCHASE_TYPE,\n  OWNER,\n  CANTONS,\n  STEPS,\n  APPLICATION_TYPES,\n  LOAN_CATEGORIES,\n} from '../loanConstants';\nimport { RESIDENCE_TYPE } from '../../constants';\nimport StructureSchema from './StructureSchema';\nimport promotionSchema from './promotionSchema';\nimport {\n  borrowerIdsSchema,\n  propertyIdsSchema,\n  previousLoanTranchesSchema,\n  maxPropertyValueSchema,\n} from './otherSchemas';\n\nconst LoanSchema = new SimpleSchema({\n  userId: {\n    type: String,\n    optional: true,\n  },\n  createdAt,\n  updatedAt,\n  status: {\n    type: String,\n    defaultValue: LOAN_STATUS.LEAD,\n    allowedValues: Object.values(LOAN_STATUS),\n  },\n  general: { type: Object, optional: true, blackbox: true, defaultValue: {} }, // To be removed once migrations are done\n  name: { type: String, unique: true, regEx: /^\\d{2}-\\d{4}$/ },\n  adminValidation: { type: Object, defaultValue: {}, blackbox: true },\n  userFormsEnabled: { type: Boolean, defaultValue: true, optional: true },\n  structures: { type: Array, defaultValue: [] },\n  'structures.$': StructureSchema,\n  selectedStructure: { type: String, optional: true },\n  verificationStatus: {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(LOAN_VERIFICATION_STATUS),\n    defaultValue: LOAN_VERIFICATION_STATUS.NONE,\n    uniforms: { displayEmpty: false },\n  },\n  purchaseType: {\n    type: String,\n    defaultValue: PURCHASE_TYPE.ACQUISITION,\n    allowedValues: Object.values(PURCHASE_TYPE),\n    uniforms: { displayEmpty: false },\n  },\n  residenceType: {\n    type: String,\n    allowedValues: Object.values(RESIDENCE_TYPE),\n    optional: true,\n    uniforms: { displayEmpty: false },\n  },\n  canton: {\n    type: String,\n    optional: true,\n    allowedValues: Object.keys(CANTONS),\n  },\n  currentOwner: {\n    type: String,\n    defaultValue: OWNER.FIRST,\n    allowedValues: Object.values(OWNER),\n  },\n  futureOwner: {\n    type: String,\n    defaultValue: OWNER.FIRST,\n    allowedValues: Object.values(OWNER),\n  },\n  otherOwner: {\n    type: String,\n    optional: true,\n  },\n  enableOffers: { type: Boolean, optional: true, defaultValue: false },\n  previousLender: { type: String, optional: true },\n  customName: { type: String, optional: true },\n  applicationType: {\n    type: String,\n    allowedValues: Object.values(APPLICATION_TYPES),\n    defaultValue: APPLICATION_TYPES.SIMPLE,\n    uniforms: { placeholder: null },\n  },\n  ...promotionSchema,\n  ...borrowerIdsSchema,\n  ...propertyIdsSchema,\n  ...contactsSchema,\n  ...previousLoanTranchesSchema,\n  ...additionalDocuments([]),\n  revenueLinks: { type: Array, optional: true },\n  'revenueLinks.$': String,\n  userCache: cacheField,\n  step: {\n    type: String,\n    defaultValue: STEPS.SOLVENCY,\n    allowedValues: Object.values(STEPS),\n    uniforms: { placeholder: '' },\n  },\n  displayWelcomeScreen: {\n    type: Boolean,\n    defaultValue: true,\n    optional: true,\n  },\n  ...maxPropertyValueSchema,\n  shareSolvency: { type: Boolean, optional: true },\n  documents: documentsField,\n  anonymous: { type: Boolean, optional: true, defaultValue: false },\n  referralId: { type: String, optional: true },\n  category: {\n    type: String,\n    defaultValue: LOAN_CATEGORIES.STANDARD,\n    allowedValues: Object.values(LOAN_CATEGORIES),\n    uniforms: { placeholder: null },\n  },\n  adminNote: {\n    type: String,\n    optional: true,\n  },\n  lendersCache: { type: Array, optional: true },\n  'lendersCache.$': cacheField,\n  tasksCache: { type: Array, optional: true },\n  'tasksCache.$': cacheField,\n  financedPromotionLink: { type: Object, optional: true },\n  'financedPromotionLink._id': { type: String, optional: true },\n  simpleBorrowersForm: { type: Boolean, defaultValue: true },\n});\n\nexport default LoanSchema;\n","// @flow\nimport SimpleSchema from 'simpl-schema';\nimport { AMORTIZATION_TYPE, OWN_FUNDS_USAGE_TYPES } from '../loanConstants';\nimport { OWN_FUNDS_TYPES } from '../../constants';\nimport { loanTranchesSchema } from './otherSchemas';\nimport { moneyField } from '../../helpers/sharedSchemas';\n\nexport const structureSchema = {\n  amortization: { ...moneyField, defaultValue: 0 },\n  amortizationType: {\n    type: String,\n    allowedValues: Object.values(AMORTIZATION_TYPE),\n    optional: true,\n  },\n  description: { type: String, optional: true },\n  disabled: { type: Boolean, defaultValue: false },\n  id: String,\n  mortgageNoteIds: { type: Array, optional: true },\n  'mortgageNoteIds.$': String,\n  name: { type: String, optional: true },\n  notaryFees: { ...moneyField, defaultValue: null },\n  propertyValue: { ...moneyField, defaultValue: null },\n  offerId: { type: String, optional: true },\n  propertyId: { type: String, optional: true },\n  promotionOptionId: { type: String, optional: true },\n  propertyWork: { ...moneyField, defaultValue: 0 },\n  sortOffersBy: { type: String, optional: true },\n  ownFunds: { type: Array, defaultValue: [] },\n  'ownFunds.$': Object,\n  'ownFunds.$.borrowerId': String,\n  'ownFunds.$.type': {\n    type: String,\n    allowedValues: Object.values(OWN_FUNDS_TYPES),\n    optional: true,\n  },\n  'ownFunds.$.value': { ...moneyField, optional: false },\n  'ownFunds.$.usageType': {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(OWN_FUNDS_USAGE_TYPES),\n  },\n  'ownFunds.$.description': {\n    type: String,\n    optional: true,\n  },\n  wantedLoan: { ...moneyField, defaultValue: 0 },\n  ...loanTranchesSchema,\n};\n\nexport type structureType = {\n  id: string,\n  amortization: number,\n  amortizationType: string,\n  description: string,\n  name: string,\n  offerId: string,\n  propertyId: string,\n  propertyWork: number,\n  sortOffersBy: string,\n  wantedLoan: number,\n  ownFunds: Array<Object>,\n};\n\nexport default new SimpleSchema(structureSchema);\n","// @flow\nimport { INTEREST_RATES, SOLVENCY_TYPE, CANTONS } from '../../constants';\nimport { moneyField, percentageField } from '../../helpers/sharedSchemas';\n\nexport const borrowerIdsSchema = {\n  borrowerIds: { type: Array, defaultValue: [] },\n  'borrowerIds.$': String,\n};\n\nexport const loanTranchesSchema = {\n  loanTranches: {\n    type: Array,\n    defaultValue: [{ type: INTEREST_RATES.YEARS_10, value: 1 }],\n    optional: true,\n  },\n  'loanTranches.$': Object,\n  'loanTranches.$.type': {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(INTEREST_RATES),\n  },\n  'loanTranches.$.value': {\n    ...moneyField,\n    type: Number, // Can be specified as percentages or monetary amounts\n  },\n};\n\nexport const previousLoanTranchesSchema = {\n  previousLoanTranches: {\n    type: Array,\n    defaultValue: [],\n    optional: true,\n  },\n  'previousLoanTranches.$': Object,\n  'previousLoanTranches.$.value': {\n    ...moneyField,\n    type: Number, // Can be specified as percentages or monetary amounts\n  },\n  'previousLoanTranches.$.dueDate': {\n    type: Date,\n    optional: true,\n  },\n  'previousLoanTranches.$.rate': {\n    type: Number,\n    min: 0,\n    max: 1,\n  },\n};\n\nexport type loanTranchesType = Array<{\n  type: string,\n  value: number,\n}>;\n\nexport const propertyIdsSchema = {\n  propertyIds: { type: Array, defaultValue: [], maxCount: 5 },\n  'propertyIds.$': String,\n};\n\nexport const maxPropertyValueSchema = {\n  maxPropertyValue: { type: Object, optional: true },\n  'maxPropertyValue.type': {\n    type: String,\n    allowedValues: Object.values(SOLVENCY_TYPE),\n    defaultValue: SOLVENCY_TYPE.SIMPLE,\n  },\n  'maxPropertyValue.canton': {\n    type: String,\n    allowedValues: Object.keys(CANTONS),\n  },\n  'maxPropertyValue.borrowerHash': { type: String, optional: true },\n  'maxPropertyValue.date': Date,\n  'maxPropertyValue.main': Object,\n  'maxPropertyValue.main.min': { type: Object, optional: true },\n  'maxPropertyValue.main.min.propertyValue': moneyField,\n  'maxPropertyValue.main.min.borrowRatio': percentageField,\n  'maxPropertyValue.main.min.organisationName': String,\n  'maxPropertyValue.main.max': Object,\n  'maxPropertyValue.main.max.propertyValue': moneyField,\n  'maxPropertyValue.main.max.borrowRatio': percentageField,\n  'maxPropertyValue.main.max.organisationName': String,\n  'maxPropertyValue.second': Object,\n  'maxPropertyValue.second.min': { type: Object, optional: true },\n  'maxPropertyValue.second.min.propertyValue': moneyField,\n  'maxPropertyValue.second.min.borrowRatio': percentageField,\n  'maxPropertyValue.second.min.organisationName': String,\n  'maxPropertyValue.second.max': Object,\n  'maxPropertyValue.second.max.propertyValue': moneyField,\n  'maxPropertyValue.second.max.borrowRatio': percentageField,\n  'maxPropertyValue.second.max.organisationName': String,\n};\n","const promotionSchema = {\n  promotionLinks: { type: Array, defaultValue: [] },\n  'promotionLinks.$': Object,\n  'promotionLinks.$._id': { type: String, optional: true },\n  'promotionLinks.$.priorityOrder': {\n    type: Array,\n    defaultValue: [],\n  },\n  'promotionLinks.$.priorityOrder.$': String,\n  'promotionLinks.$.invitedBy': { type: String, optional: true },\n  'promotionLinks.$.showAllLots': {\n    type: Boolean,\n    optional: true,\n    defaultValue: true,\n  },\n  promotionOptionLinks: { type: Array, defaultValue: [] },\n  'promotionOptionLinks.$': Object,\n  'promotionOptionLinks.$._id': { type: String, optional: true },\n};\n\nexport default promotionSchema;\n","// @flow\nexport * from './methodDefinitions';\nexport { default } from './loans';\n","// @flow\n\nimport Loans from './loans';\nimport {\n  Borrowers,\n  Lenders,\n  PromotionLots,\n  PromotionOptions,\n  Promotions,\n  Properties,\n  Revenues,\n  Tasks,\n  Users,\n} from '..';\n\nimport LinkInitializer from '../links/LinkInitializer';\nimport Activities from '../activities/activities';\n\nexport const userCache = {\n  _id: 1,\n  firstName: 1,\n  lastName: 1,\n  referredByOrganisationLink: 1,\n  assignedEmployeeCache: 1,\n};\n\nexport const lendersCache = {\n  status: 1,\n  contactLink: 1,\n  organisationLink: 1,\n};\n\nexport const tasksCache = {\n  createdAt: 1,\n  dueAt: 1,\n  status: 1,\n  title: 1,\n  isPrivate: 1,\n  assigneeLink: 1,\n};\n\nLinkInitializer.directInit(() => {\n  Loans.addLinks({\n    activities: {\n      inversedBy: 'loan',\n      collection: Activities,\n      autoremove: true,\n    },\n    borrowers: {\n      field: 'borrowerIds',\n      collection: Borrowers,\n      type: 'many',\n    },\n    promotions: {\n      field: 'promotionLinks',\n      collection: Promotions,\n      type: 'many',\n      metadata: true,\n    },\n    promotionOptions: {\n      field: 'promotionOptionLinks',\n      collection: PromotionOptions,\n      type: 'many',\n      unique: true,\n      metadata: true,\n      autoremove: true,\n    },\n    properties: {\n      field: 'propertyIds',\n      collection: Properties,\n      type: 'many',\n    },\n    revenues: {\n      field: 'revenueLinks',\n      collection: Revenues,\n      type: 'many',\n      unique: true,\n    },\n    user: {\n      field: 'userId',\n      collection: Users,\n      type: 'one',\n      denormalize: {\n        field: 'userCache',\n        body: userCache,\n      },\n    },\n    financedPromotion: {\n      field: 'financedPromotionLink',\n      type: 'one',\n      metadata: true,\n      unique: true,\n      collection: Promotions,\n    },\n  });\n});\n\nLinkInitializer.inversedInit(() => {\n  Loans.addLinks({\n    attributedPromotionLots: {\n      collection: PromotionLots,\n      inversedBy: 'attributedTo',\n    },\n    lenders: {\n      collection: Lenders,\n      inversedBy: 'loan',\n      unique: true,\n      autoremove: true,\n      denormalize: {\n        field: 'lendersCache',\n        body: lendersCache,\n      },\n    },\n    tasks: {\n      collection: Tasks,\n      inversedBy: 'loan',\n      autoremove: true,\n      denormalize: {\n        field: 'tasksCache',\n        body: tasksCache,\n      },\n    },\n  });\n});\n","// @flow\nexport const LOANS_COLLECTION = 'loans';\n\nexport const LOAN_STATUS = {\n  LEAD: 'LEAD',\n  ONGOING: 'ONGOING',\n  CLOSING: 'CLOSING',\n  BILLING: 'BILLING',\n  FINALIZED: 'FINALIZED',\n  PENDING: 'PENDING',\n  UNSUCCESSFUL: 'UNSUCCESSFUL',\n  TEST: 'TEST',\n};\n\nexport const LOAN_STATUS_ORDER = [\n  LOAN_STATUS.LEAD,\n  LOAN_STATUS.ONGOING,\n  LOAN_STATUS.PENDING,\n  LOAN_STATUS.CLOSING,\n  LOAN_STATUS.BILLING,\n  LOAN_STATUS.FINALIZED,\n  LOAN_STATUS.UNSUCCESSFUL,\n  LOAN_STATUS.TEST,\n];\n\nexport const PURCHASE_TYPE = {\n  ACQUISITION: 'ACQUISITION',\n  REFINANCING: 'REFINANCING',\n  // TODO: Figure out what needs to be changed for this\n  CONSTRUCTION: 'CONSTRUCTION',\n};\n\n// Keep these sorted alphabetically for zipcode search to work\nexport const CANTONS = {\n  AG: 'Aargau',\n  AR: 'Appenzell Ausserrhoden',\n  AI: 'Appenzell Innerrhoden',\n  BL: 'Basel-Land',\n  BS: 'Basel-Stadt',\n  BE: 'Bern',\n  FR: 'Fribourg',\n  GE: 'Genève',\n  GL: 'Glarus',\n  GR: 'Graubünden',\n  JU: 'Jura',\n  LU: 'Luzern',\n  NE: 'Neuchâtel',\n  NW: 'Nidwalden',\n  OW: 'Obwalden',\n  SG: 'St. Gallen',\n  SH: 'Schaffhausen',\n  SZ: 'Schwyz',\n  SO: 'Solothurn',\n  TG: 'Thurgau',\n  TI: 'Ticino',\n  UR: 'Uri',\n  VD: 'Vaud',\n  VS: 'Valais',\n  ZG: 'Zug',\n  ZH: 'Zürich',\n  LI: 'Liechtenstein',\n};\n\nexport const OWNER = {\n  FIRST: '0',\n  SECOND: '1',\n  BOTH: 'BOTH',\n  OTHER: 'OTHER',\n};\n\nexport const INSURANCE_USE_PRESET = {\n  WITHDRAWAL: 'WITHDRAWAL',\n  COLLATERAL: 'COLLATERAL',\n};\n\nexport const LOAN_STRATEGY_PRESET = {\n  FIXED: 'FIXED',\n  MANUAL: 'MANUAL',\n};\n\nexport const AMORTIZATION_TYPE = {\n  INDIRECT: 'INDIRECT',\n  DIRECT: 'DIRECT',\n};\n\nexport const PAYMENT_SCHEDULES = {\n  MONTHLY: 'MONTHLY',\n  YEARLY: 'YEARLY',\n  SEMESTERLY: 'SEMESTERLY',\n};\n\nexport const LOAN_QUERIES = {\n  ADMIN_LOANS: 'ADMIN_LOANS',\n  ANONYMOUS_LOAN: 'ANONYMOUS_LOAN',\n  FULL_LOAN: 'FULL_LOAN',\n  LOAN_FILES: 'LOAN_FILES',\n  LOAN_SEARCH: 'LOAN_SEARCH',\n  PRO_LOANS: 'PRO_LOANS',\n  PRO_PROMOTION_LOANS: 'PRO_PROMOTION_LOANS',\n  PRO_PROPERTY_LOANS: 'PRO_PROPERTY_LOANS',\n  PRO_REFERRED_BY_LOANS: 'PRO_REFERRED_BY_LOANS',\n  USER_LOANS_E2E: 'USER_LOANS_E2E',\n  USER_LOANS: 'USER_LOANS',\n};\n\nexport const OWN_FUNDS_USAGE_TYPES = {\n  WITHDRAW: 'WITHDRAW',\n  PLEDGE: 'PLEDGE',\n};\n\nexport const STEPS = {\n  SOLVENCY: 'SOLVENCY',\n  REQUEST: 'REQUEST',\n  OFFERS: 'OFFERS',\n  CLOSING: 'CLOSING',\n};\n\nexport const STEP_ORDER = [\n  STEPS.SOLVENCY,\n  STEPS.REQUEST,\n  STEPS.OFFERS,\n  STEPS.CLOSING,\n];\n\nexport const LOAN_VERIFICATION_STATUS = {\n  NONE: 'NONE',\n  REQUESTED: 'REQUESTED',\n  OK: 'OK',\n  ERROR: 'ERROR',\n};\n\nexport const SOLVENCY_TYPE = {\n  SIMPLE: 'SIMPLE',\n  FULL: 'FULL',\n};\n\nexport const APPLICATION_TYPES = {\n  SIMPLE: 'SIMPLE',\n  FULL: 'FULL',\n};\n\nexport const ORGANISATION_NAME_SEPARATOR = ' / ';\n\nexport const LOCAL_STORAGE_ANONYMOUS_LOAN = 'ANONYMOUS_LOAN_ID';\n\nexport const EMPTY_STRUCTURE = {\n  ownFunds: [],\n  loanTranches: [],\n};\n\nexport const LOAN_CATEGORIES = {\n  STANDARD: 'STANDARD',\n  PREMIUM: 'PREMIUM',\n};\n","import { Mongo } from 'meteor/mongo';\n\nimport LoanSchema from './schemas/LoanSchema';\nimport { LOANS_COLLECTION } from './loanConstants';\n\nconst Loans = new Mongo.Collection(LOANS_COLLECTION);\n\n// Prevent all client side modifications of mongoDB\nLoans.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true,\n});\nLoans.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false,\n});\n\nLoans.attachSchema(LoanSchema);\nexport default Loans;\n","// @flow\nimport { Match } from 'meteor/check';\nimport { Method } from '../methods/methods';\n\nexport const loanInsert = new Method({\n  name: 'loanInsert',\n  params: {\n    loan: Object,\n    userId: Match.Optional(String),\n  },\n});\n\nexport const loanUpdate = new Method({\n  name: 'loanUpdate',\n  params: {\n    loanId: String,\n    object: Object,\n  },\n});\n\nexport const loanDelete = new Method({\n  name: 'loanDelete',\n  params: {\n    loanId: String,\n  },\n});\n\nexport const requestLoanVerification = new Method({\n  name: 'requestLoanVerification',\n  params: {\n    loanId: String,\n  },\n});\n\nexport const confirmClosing = new Method({\n  name: 'confirmClosing',\n  params: {\n    loanId: String,\n    object: Object,\n  },\n});\n\nexport const pushLoanValue = new Method({\n  name: 'pushLoanValue',\n  params: {\n    loanId: String,\n    object: Object,\n  },\n});\n\nexport const popLoanValue = new Method({\n  name: 'popLoanValue',\n  params: {\n    loanId: String,\n    object: Object,\n  },\n});\n\nexport const adminLoanInsert = new Method({\n  name: 'adminLoanInsert',\n  params: {\n    userId: Match.Optional(String),\n  },\n});\n\nexport const userLoanInsert = new Method({\n  name: 'userLoanInsert',\n  params: {\n    proPropertyId: Match.Maybe(String),\n    test: Match.Optional(Boolean),\n  },\n});\n\nexport const addNewStructure = new Method({\n  name: 'addNewStructure',\n  params: {\n    loanId: String,\n  },\n});\n\nexport const removeStructure = new Method({\n  name: 'removeStructure',\n  params: {\n    loanId: String,\n    structureId: String,\n  },\n});\n\nexport const updateStructure = new Method({\n  name: 'updateStructure',\n  params: {\n    loanId: String,\n    structureId: String,\n    structure: Object,\n  },\n});\n\nexport const selectStructure = new Method({\n  name: 'selectStructure',\n  params: {\n    loanId: String,\n    structureId: String,\n  },\n});\n\nexport const duplicateStructure = new Method({\n  name: 'duplicateStructure',\n  params: {\n    loanId: String,\n    structureId: String,\n  },\n});\n\nexport const assignLoanToUser = new Method({\n  name: 'assignLoanToUser',\n  params: {\n    loanId: String,\n    userId: Match.OneOf(String, null),\n  },\n});\n\nexport const switchBorrower = new Method({\n  name: 'switchBorrower',\n  params: {\n    loanId: String,\n    borrowerId: String,\n    oldBorrowerId: String,\n  },\n});\n\nexport const sendNegativeFeedbackToAllLenders = new Method({\n  name: 'sendNegativeFeedbackToAllLenders',\n  params: { loanId: String },\n});\n\nexport const loanUpdatePromotionInvitedBy = new Method({\n  name: 'loanUpdatePromotionInvitedBy',\n  params: { loanId: String, promotionId: String, invitedBy: String },\n});\n\nexport const reuseProperty = new Method({\n  name: 'reuseProperty',\n  params: { loanId: String, propertyId: String },\n});\n\nexport const setMaxPropertyValueWithoutBorrowRatio = new Method({\n  name: 'setMaxPropertyValueWithoutBorrowRatio',\n  params: { loanId: String, canton: String },\n});\n\nexport const addNewMaxStructure = new Method({\n  name: 'addNewMaxStructure',\n  params: {\n    loanId: String,\n    residenceType: Match.Maybe(String),\n    canton: String,\n  },\n});\n\nexport const setLoanStep = new Method({\n  name: 'setLoanStep',\n  params: { loanId: String, nextStep: String },\n});\n\nexport const loanShareSolvency = new Method({\n  name: 'loanShareSolvency',\n  params: { loanId: String, shareSolvency: Boolean },\n});\n\nexport const anonymousLoanInsert = new Method({\n  name: 'anonymousLoanInsert',\n  params: {\n    trackingId: String,\n    proPropertyId: Match.Maybe(String),\n    referralId: Match.Maybe(String),\n    existingAnonymousLoanId: Match.Maybe(Match.OneOf(String, null)),\n  },\n});\n\nexport const loanInsertBorrowers = new Method({\n  name: 'loanInsertBorrowers',\n  params: {\n    loanId: String,\n    amount: Number,\n  },\n});\n\nexport const adminLoanReset = new Method({\n  name: 'adminLoanReset',\n  params: {\n    loanId: String,\n  },\n});\n\nexport const loanLinkPromotion = new Method({\n  name: 'loanLinkPromotion',\n  params: {\n    promotionId: String,\n    loanId: String,\n  },\n});\n\nexport const loanUnlinkPromotion = new Method({\n  name: 'loanUnlinkPromotion',\n  params: {\n    promotionId: String,\n    loanId: String,\n  },\n});\n\nexport const loanSetCreatedAtActivityDescription = new Method({\n  name: 'loanSetCreatedAtActivityDescription',\n  params: { loanId: String, description: String },\n});\n","import omit from 'lodash/omit';\n\nimport Loans from '.';\nimport { LOAN_QUERIES } from './loanConstants';\nimport { adminLoan, userLoan } from '../fragments';\n\nexport const adminLoans = Loans.createQuery(\n  LOAN_QUERIES.ADMIN_LOANS,\n  {\n    ...adminLoan({ withSort: true }),\n    $options: { sort: { createdAt: -1 } },\n  },\n  { scoped: true },\n);\n\nexport const anonymousLoan = Loans.createQuery(\n  LOAN_QUERIES.ANONYMOUS_LOAN,\n  { ...omit(userLoan(), ['maxPropertyValue']), maxPropertyValueExists: 1 },\n  { scoped: true },\n);\n\n// This query can be used on the server to get a complete loan, just like on the client\nexport const fullLoan = Loans.createQuery(LOAN_QUERIES.FULL_LOAN, {\n  ...adminLoan({ withSort: true }),\n});\n\nexport const loanSearch = Loans.createQuery(LOAN_QUERIES.LOAN_SEARCH, {\n  name: 1,\n  createdAt: 1,\n  updatedAt: 1,\n  step: 1,\n  $options: { sort: { createdAt: -1 }, limit: 5 },\n});\n\n// Sort this query properly so that the merge on the client succeeds\nexport const proLoans = Loans.createQuery(LOAN_QUERIES.PRO_LOANS, () => {});\n\nexport const proPromotionLoans = Loans.createQuery(\n  LOAN_QUERIES.PRO_PROMOTION_LOANS,\n  () => {},\n);\n\nexport const proPropertyLoans = Loans.createQuery(\n  LOAN_QUERIES.PRO_PROPERTY_LOANS,\n  () => {},\n);\n\nexport const proReferredByLoans = Loans.createQuery(\n  LOAN_QUERIES.PRO_REFERRED_BY_LOANS,\n  () => {},\n);\n\nexport const userLoans = Loans.createQuery(\n  LOAN_QUERIES.USER_LOANS,\n  {\n    ...userLoan({ withSort: true, withFilteredPromotions: true }),\n    maxPropertyValueExists: 1,\n  },\n  { scoped: true },\n);\n","import omit from 'lodash/omit';\nimport Loans from '.';\nimport {\n  formatLoanWithStructure,\n  nextDueTaskReducer,\n} from '../../utils/loanFunctions';\nimport { STEPS, STEP_ORDER } from './loanConstants';\nimport { fullOffer, userProperty, loanPromotionOption } from '../fragments';\nimport { PROPERTY_CATEGORY } from '../properties/propertyConstants';\n\nLoans.addReducers({\n  structure: {\n    body: {\n      selectedStructure: 1,\n      structures: 1,\n      properties: omit(userProperty(), ['loans', '$options', 'user']),\n      offers: 1,\n      promotionOptions: loanPromotionOption(),\n    },\n    reduce: formatLoanWithStructure,\n  },\n  offers: {\n    body: { lenders: { offers: omit(fullOffer(), ['user']) } },\n    reduce: ({ lenders = [] }) =>\n      lenders.reduce(\n        (allOffers, { offers = [] }) => [...allOffers, ...offers],\n        [],\n      ),\n  },\n  hasPromotion: {\n    body: { promotions: { _id: 1 } },\n    reduce: ({ promotions }) => !!(promotions && promotions.length > 0),\n  },\n  enableOffers: {\n    body: { step: 1 },\n    reduce: ({ step }) =>\n      step && STEP_ORDER.indexOf(step) >= STEP_ORDER.indexOf(STEPS.OFFERS),\n  },\n  hasProProperty: {\n    body: { properties: { category: 1 } },\n    reduce: ({ properties = [] }) =>\n      properties.some(({ category }) => category === PROPERTY_CATEGORY.PRO),\n  },\n  maxPropertyValueExists: {\n    body: { maxPropertyValue: { date: 1 }, user: { _id: 1 } },\n    reduce: ({ maxPropertyValue, user }) =>\n      !!(!user && maxPropertyValue && maxPropertyValue.date),\n  },\n  nextDueTask: {\n    body: { tasksCache: 1 },\n    reduce: nextDueTaskReducer,\n  },\n});\n","/* eslint-env mocha */\nimport { Meteor } from 'meteor/meteor';\n\nimport { expect } from 'chai';\n\nimport { userLogin, resetDatabase } from 'core/utils/testHelpers/index';\nimport {\n  query1,\n  query2,\n  query3,\n  query4,\n  testCollectionInsert,\n} from '../collection.app-test';\n\nconsole.log('testCollectionInsert:', testCollectionInsert);\n\nconst insertTestData = (n) => {\n  const promises = [...Array(n)].map((_, index) =>\n    testCollectionInsert.run({\n      _id: `test${index}`,\n      name: `test${index % 4}`,\n      value: index,\n    }));\n  return Promise.all(promises).then(() => ({}));\n};\n\nconst fetchQueries = ({ queries = [], params, promise }) => {\n  queries.forEach((query) => {\n    promise = promise.then((items = {}) =>\n      new Promise((resolve, reject) => {\n        query\n          .clone(params)\n          .fetch((err, queryItems) =>\n            (err\n              ? reject(err)\n              : resolve({ ...items, [query.name]: queryItems })));\n      }));\n  });\n\n  return promise;\n};\n\nconst insertAndFetchTestData = (\n  n,\n  params = {},\n  {\n    fetchQuery1 = true,\n    fetchQuery2 = true,\n    fetchQuery3 = false,\n    fetchQuery4 = false,\n  } = {},\n) => {\n  const promise = insertTestData(n);\n  return fetchQueries({\n    queries: [\n      fetchQuery1 && query1,\n      fetchQuery2 && query2,\n      fetchQuery3 && query3,\n      fetchQuery4 && query4,\n    ].filter(x => x),\n    params,\n    promise,\n  });\n};\n\ndescribe('exposeQuery', () => {\n  beforeEach(() => resetDatabase());\n\n  it('returns expected data without using overrides', () =>\n    insertAndFetchTestData(100).then((items) => {\n      expect(items.named_query_TEST_QUERY_1.length).to.equal(10);\n      expect(items.named_query_TEST_QUERY_1[0].value).to.equal(31);\n      expect(items.named_query_TEST_QUERY_2.length).to.equal(10);\n      expect(items.named_query_TEST_QUERY_2[0].value).to.equal(21);\n    }));\n\n  context('returns expected data when overriding', () => {\n    it('the body', () =>\n      insertAndFetchTestData(100, { $body: { value: 1 } }).then((items) => {\n        expect(items.named_query_TEST_QUERY_1.length).to.equal(10);\n        expect(items.named_query_TEST_QUERY_1[0].value).to.equal(31);\n        expect(items.named_query_TEST_QUERY_1[0].name).to.equal(undefined);\n        expect(items.named_query_TEST_QUERY_2.length).to.equal(10);\n        expect(items.named_query_TEST_QUERY_2[0].value).to.equal(21);\n        expect(items.named_query_TEST_QUERY_2[0].name).to.equal(undefined);\n      }));\n\n    it('the limit option', () =>\n      insertAndFetchTestData(100, { $limit: 5 }).then((items) => {\n        expect(items.named_query_TEST_QUERY_1.length).to.equal(5);\n        expect(items.named_query_TEST_QUERY_1[0].value).to.equal(31);\n        expect(items.named_query_TEST_QUERY_2.length).to.equal(5);\n        expect(items.named_query_TEST_QUERY_2[0].value).to.equal(21);\n      }));\n\n    it('the limit option greather than the server value', () =>\n      insertAndFetchTestData(100, { $limit: 20 }).then((items) => {\n        expect(items.named_query_TEST_QUERY_1.length).to.equal(10);\n        expect(items.named_query_TEST_QUERY_1[0].value).to.equal(31);\n        expect(items.named_query_TEST_QUERY_2.length).to.equal(10);\n        expect(items.named_query_TEST_QUERY_2[0].value).to.equal(21);\n      }));\n\n    it('the skip option', () =>\n      insertAndFetchTestData(100, { $skip: 7 }).then((items) => {\n        expect(items.named_query_TEST_QUERY_1.length).to.equal(10);\n        expect(items.named_query_TEST_QUERY_1[0].value).to.equal(38);\n        expect(items.named_query_TEST_QUERY_2.length).to.equal(10);\n        expect(items.named_query_TEST_QUERY_2[0].value).to.equal(28);\n      }));\n\n    it('the sort option', () =>\n      insertAndFetchTestData(100, { $sort: { value: -1 } }).then((items) => {\n        expect(items.named_query_TEST_QUERY_1.length).to.equal(10);\n        expect(items.named_query_TEST_QUERY_1[0].value).to.equal(99);\n        expect(items.named_query_TEST_QUERY_2.length).to.equal(10);\n        expect(items.named_query_TEST_QUERY_2[0].value).to.equal(99);\n      }));\n\n    it('the sort option on multiple fields ', () =>\n      insertAndFetchTestData(50, { $sort: { name: -1, value: -1 } })\n        .then((items) => {\n          expect(items.named_query_TEST_QUERY_1.length).to.equal(10);\n          expect(items.named_query_TEST_QUERY_1[0].value).to.equal(47);\n          expect(items.named_query_TEST_QUERY_2.length).to.equal(10);\n          expect(items.named_query_TEST_QUERY_2[0].value).to.equal(47);\n        })\n        .then(() => resetDatabase())\n        .then(() =>\n          insertAndFetchTestData(50, { $sort: { name: -1, value: 1 } }))\n        .then((items) => {\n          expect(items.named_query_TEST_QUERY_1.length).to.equal(10);\n          expect(items.named_query_TEST_QUERY_1[0].value).to.equal(31);\n          expect(items.named_query_TEST_QUERY_2.length).to.equal(10);\n          expect(items.named_query_TEST_QUERY_2[0].value).to.equal(23);\n        }));\n  });\n\n  it('throws when client tries to filter by _id when it is not allowed', () =>\n    insertAndFetchTestData(100, { _id: 'test50' }, { fetchQuery2: false })\n      .then(() => {\n        throw new Meteor.Error('Test should throw');\n      })\n      .catch(error => expect(error.message).to.contain('Match failed')));\n\n  describe('returns expected data when using filters', () => {\n    it('on client only', () =>\n      insertAndFetchTestData(100, { name: 'test3' }).then((items) => {\n        expect(items.named_query_TEST_QUERY_1.length).to.equal(10);\n        expect(items.named_query_TEST_QUERY_1[0].value).to.equal(31);\n        items.named_query_TEST_QUERY_1.forEach(({ name }) =>\n          expect(name).to.equal('test3'));\n        expect(items.named_query_TEST_QUERY_2.length).to.equal(10);\n        expect(items.named_query_TEST_QUERY_2[0].value).to.equal(23);\n        items.named_query_TEST_QUERY_2.forEach(({ name }) =>\n          expect(name).to.equal('test3'));\n      }));\n\n    it('on server only', () =>\n      insertAndFetchTestData(\n        100,\n        { _id: 'test50' },\n        { fetchQuery1: false },\n      ).then((items) => {\n        expect(items.named_query_TEST_QUERY_2.length).to.equal(1);\n        expect(items.named_query_TEST_QUERY_2[0].value).to.equal(50);\n      }));\n\n    it('on client and server', () =>\n      insertAndFetchTestData(\n        30,\n        { name: 'test3', _id: 'test50' },\n        { fetchQuery1: false },\n      ).then((items) => {\n        // Name and _id filters apply in query2, resulting in an empty array of results\n        expect(items.named_query_TEST_QUERY_2.length).to.equal(0);\n      }));\n  });\n\n  it('uses default firewall if not overriden', () =>\n    insertAndFetchTestData(\n      30,\n      {},\n      { fetchQuery1: false, fetchQuery2: false, fetchQuery3: true },\n    )\n      .then(() => {\n        throw new Meteor.Error('Test should throw');\n      })\n      .catch(error => expect(error.message).to.contain('NOT_AUTHORIZED')));\n\n  it('injects _userId in params', () =>\n    userLogin({})\n      .then(() =>\n        insertAndFetchTestData(\n          30,\n          { name: 'test3' },\n          { fetchQuery1: false, fetchQuery2: false, fetchQuery4: true },\n        ))\n      .then((items) => {\n        const userId = Meteor.userId();\n        items.named_query_TEST_QUERY_4.forEach(({ _userId, name }) => {\n          expect(_userId).to.equal(userId);\n          expect(name).to.equal('test3');\n        });\n      }));\n});\n","import SimpleSchema from 'simpl-schema';\nimport {\n  createdAt,\n  updatedAt,\n  additionalDocuments,\n  mortgageNoteLinks,\n  documentsField,\n} from '../../helpers/sharedSchemas';\nimport { initialDocuments } from '../borrowersAdditionalDocuments';\nimport {\n  personalInfoSchema,\n  financeInfoSchema,\n  ownCompaniesSchema,\n} from './otherSchemas';\n\n// Documentation is in the google drive dev/MongoDB Schemas\nconst BorrowerSchema = new SimpleSchema({\n  userId: {\n    type: String,\n    optional: true,\n  },\n  createdAt,\n  updatedAt,\n  admin: {\n    // TODO\n    type: Object,\n    optional: true,\n  },\n  adminValidation: {\n    type: Object,\n    defaultValue: {},\n    blackbox: true,\n  },\n  documents: documentsField,\n  ...personalInfoSchema,\n  ...financeInfoSchema,\n  ...additionalDocuments(initialDocuments),\n  ...mortgageNoteLinks,\n  ...ownCompaniesSchema,\n});\n\nconst protectedKeys = [\n  '_id',\n  'additionalDocuments',\n  'admin',\n  'adminValidation',\n  'createdAt',\n  'logic',\n  'mortgageNoteLinks',\n  'updatedAt',\n  'userId',\n  'documents',\n];\n\nexport const BorrowerSchemaAdmin = BorrowerSchema.omit(...protectedKeys);\nexport default BorrowerSchema;\n","import SimpleSchema from 'simpl-schema';\n\nimport {\n  percentageField,\n  moneyField,\n  address,\n} from '../../helpers/sharedSchemas';\nimport {\n  RESIDENCY_PERMIT,\n  GENDER,\n  CIVIL_STATUS,\n  OTHER_INCOME,\n  EXPENSES,\n  OWN_FUNDS_TYPES,\n} from '../borrowerConstants';\nimport { RESIDENCE_TYPE } from '../../constants';\nimport { CUSTOM_AUTOFIELD_TYPES } from '../../../components/AutoForm2/constants';\n\nconst makeArrayOfObjectsSchema = (name, allowedValues) => ({\n  [name]: { type: Array, defaultValue: [], optional: true },\n  [`${name}.$`]: Object,\n  [`${name}.$.value`]: { ...moneyField, optional: false },\n  [`${name}.$.description`]: {\n    type: String,\n    optional: true,\n    allowedValues,\n    uniforms: {\n      displayEmpty: false,\n      intlId: `${name}.description`,\n      allowedValuesIntlId: name,\n    },\n  },\n});\n\nexport const personalInfoSchema = {\n  firstName: { type: String, optional: true },\n  lastName: { type: String, optional: true },\n  gender: {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(GENDER),\n    uniforms: { displayEmpty: false },\n  },\n  birthDate: {\n    type: Date,\n    optional: true,\n    uniforms: { type: CUSTOM_AUTOFIELD_TYPES.DATE },\n  },\n  ...address,\n  sameAddress: { type: Boolean, optional: true },\n  isSwiss: { type: Boolean, optional: true },\n  residencyPermit: {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(RESIDENCY_PERMIT),\n    uniforms: { displayEmpty: false },\n  },\n  citizenship: { type: String, optional: true },\n  isUSPerson: { type: Boolean, optional: true },\n  civilStatus: {\n    type: String,\n    allowedValues: Object.values(CIVIL_STATUS),\n    optional: true,\n    uniforms: { displayEmpty: false },\n  },\n  childrenCount: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0,\n    max: 20,\n  },\n  company: { type: String, optional: true },\n};\n\nexport const financeInfoSchema = {\n  salary: moneyField,\n  netSalary: moneyField,\n  bonusExists: { type: Boolean, optional: true },\n  bonus2015: moneyField,\n  bonus2016: moneyField,\n  bonus2017: moneyField,\n  bonus2018: moneyField,\n  bonus2019: moneyField,\n  [OWN_FUNDS_TYPES.BANK_FORTUNE]: moneyField,\n  ...makeArrayOfObjectsSchema(OWN_FUNDS_TYPES.INSURANCE_2),\n  ...makeArrayOfObjectsSchema(OWN_FUNDS_TYPES.INSURANCE_3A),\n  ...makeArrayOfObjectsSchema(OWN_FUNDS_TYPES.BANK_3A),\n  ...makeArrayOfObjectsSchema(OWN_FUNDS_TYPES.INSURANCE_3B),\n  [OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE]: moneyField,\n  ...makeArrayOfObjectsSchema('otherIncome', Object.values(OTHER_INCOME)),\n  'otherIncome.$.comment': { type: String, optional: true },\n  ...makeArrayOfObjectsSchema('otherFortune'),\n  ...makeArrayOfObjectsSchema('expenses', Object.values(EXPENSES)),\n  'expenses.$.comment': { type: String, optional: true },\n  ...makeArrayOfObjectsSchema('realEstate', Object.values(RESIDENCE_TYPE)),\n  'realEstate.$.loan': { ...moneyField, optional: false },\n  'realEstate.$.name': { type: String, optional: true },\n  'realEstate.$.income': { ...moneyField, optional: true, defaultValue: 0 },\n};\n\nexport const ownCompaniesSchema = {\n  hasOwnCompany: { type: Boolean, optional: true },\n  ownCompanies: { type: Array, defaultValue: [], optional: true },\n  'ownCompanies.$': Object,\n  'ownCompanies.$.description': { type: String, optional: false },\n  'ownCompanies.$.ownership': percentageField,\n  'ownCompanies.$.netIncome2016': moneyField,\n  'ownCompanies.$.netIncome2017': moneyField,\n  'ownCompanies.$.netIncome2018': moneyField,\n};\n","// @flow\nexport const BORROWERS_COLLECTION = 'borrowers';\n\nexport const RESIDENCY_PERMIT = {\n  B: 'b',\n  C: 'c',\n  CI: 'ci',\n  F: 'f',\n  G: 'g',\n  L: 'l',\n  N: 'n',\n  S: 's',\n  NONE: 'none',\n};\n\nexport const GENDER = {\n  M: 'M',\n  F: 'F',\n  OTHER: 'OTHER',\n};\n\nexport const CIVIL_STATUS = {\n  MARRIED: 'MARRIED',\n  SINGLE: 'SINGLE',\n  PACSED: 'PACSED',\n  DIVORCED: 'DIVORCED',\n  WIDOW: 'WIDOW',\n};\n\nexport const OTHER_INCOME = {\n  WELFARE: 'WELFARE',\n  PENSIONS: 'PENSIONS',\n  // REAL_ESTATE: 'REAL_ESTATE',\n  // INVESTMENT: 'INVESTMENT', // We probably don't need this\n  OTHER: 'OTHER',\n};\n\nexport const EXPENSES = {\n  LEASING: 'LEASING',\n  PERSONAL_LOAN: 'PERSONAL_LOAN',\n  PENSIONS: 'PENSIONS',\n  THIRD_PARTY_FORTUNE_REIMBURSEMENT: 'THIRD_PARTY_FORTUNE_REIMBURSEMENT',\n  OTHER: 'OTHER',\n};\n\nexport const BORROWER_QUERIES = {\n  ADMIN_BORROWERS: 'ADMIN_BORROWERS',\n  BORROWER_SEARCH: 'BORROWER_SEARCH',\n};\n\nexport const OWN_FUNDS_TYPES = {\n  BANK_FORTUNE: 'bankFortune',\n  INSURANCE_2: 'insurance2',\n  INSURANCE_3A: 'insurance3A',\n  BANK_3A: 'bank3A',\n  INSURANCE_3B: 'insurance3B',\n  THIRD_PARTY_FORTUNE: 'thirdPartyFortune',\n};\n\nexport const RETIREMENT_AGE = {\n  [GENDER.M]: 65,\n  [GENDER.F]: 64,\n};\n","import { Mongo } from 'meteor/mongo';\nimport { BORROWERS_COLLECTION } from './borrowerConstants';\nimport BorrowerSchema from './schemas/BorrowerSchema';\n\nconst Borrowers = new Mongo.Collection(BORROWERS_COLLECTION);\n\n// Prevent all client side modifications of mongoDB\nBorrowers.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true,\n});\n\nBorrowers.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false,\n});\n\nBorrowers.attachSchema(BorrowerSchema);\nexport default Borrowers;\n","import { DOCUMENTS } from '../files/fileConstants';\nimport * as borrowerConstants from './borrowerConstants';\n\nexport const initialDocuments = [\n  { id: DOCUMENTS.IDENTITY },\n  { id: DOCUMENTS.DEBT_COLLECTION_REGISTER_EXTRACT },\n  { id: DOCUMENTS.TAXES },\n  { id: DOCUMENTS.SALARY_CERTIFICATE },\n  { id: DOCUMENTS.LAST_SALARIES },\n  { id: DOCUMENTS.OWN_FUNDS_JUSTIFICATION },\n];\n\nexport const conditionalDocuments = [\n  {\n    id: DOCUMENTS.RESIDENCY_PERMIT,\n    condition: ({ doc: { isSwiss } }) => isSwiss === false,\n  },\n  {\n    id: DOCUMENTS.DIVORCE_RULING,\n    condition: ({ doc: { civilStatus } }) =>\n      civilStatus === borrowerConstants.CIVIL_STATUS.DIVORCED,\n  },\n  {\n    id: DOCUMENTS.BONUSES,\n    condition: ({ doc: { bonusExists } }) => bonusExists === true,\n  },\n  {\n    id: DOCUMENTS.PENSION_FUND_YEARLY_STATEMENT,\n    condition: ({ doc: { insurance2 } }) => insurance2 && insurance2.length > 0,\n  },\n  {\n    id: DOCUMENTS.THIRD_PILLAR_ACCOUNTS,\n    condition: ({ doc: { insurance3A, insurance3B, bank3A } }) =>\n      (insurance3A && insurance3A.length > 0)\n      || (insurance3B && insurance3B.length > 0)\n      || (bank3A && bank3A.length > 0),\n  },\n  {\n    id: DOCUMENTS.CURRENT_MORTGAGES,\n    condition: ({ doc: { realEstate } }) =>\n      realEstate\n      && realEstate.length > 0\n      && realEstate.some(({ loan }) => loan > 0),\n  },\n  {\n    id: DOCUMENTS.EXPENSES_JUSTIFICATION,\n    condition: ({ doc: { expenses } }) => expenses && expenses.length > 0,\n  },\n  {\n    id: DOCUMENTS.OTHER_FORTUNE_JUSTIFICATION,\n    condition: ({ doc: { otherFortune } }) =>\n      otherFortune && otherFortune.length > 0,\n  },\n  {\n    id: DOCUMENTS.OTHER_INCOME_JUSTIFICATION,\n    condition: ({ doc: { otherIncome } }) =>\n      otherIncome && otherIncome.length > 0,\n  },\n];\n","export { default } from './borrowers';\nexport * from './methodDefinitions';\n","import Borrowers from './borrowers';\nimport { Loans, Users, MortgageNotes } from '..';\n\nBorrowers.addLinks({\n  user: {\n    field: 'userId',\n    collection: Users,\n    type: 'one',\n  },\n  loans: {\n    collection: Loans,\n    inversedBy: 'borrowers',\n  },\n  mortgageNotes: {\n    field: 'mortgageNoteLinks',\n    collection: MortgageNotes,\n    type: 'many',\n    metadata: true,\n    autoremove: true,\n    unique: true,\n  },\n});\n","import { Match } from 'meteor/check';\nimport { Method } from '../methods/methods';\n\nexport const borrowerInsert = new Method({\n  name: 'borrowerInsert',\n  params: { borrower: Object, userId: Match.Optional(String) },\n});\n\nexport const borrowerUpdate = new Method({\n  name: 'borrowerUpdate',\n  params: { borrowerId: String, object: Object },\n});\n\nexport const borrowerDelete = new Method({\n  name: 'borrowerDelete',\n  params: { borrowerId: String, loanId: Match.Optional(String) },\n});\n\nexport const pushBorrowerValue = new Method({\n  name: 'pushBorrowerValue',\n  params: { borrowerId: String, object: Object },\n});\n\nexport const popBorrowerValue = new Method({\n  name: 'popBorrowerValue',\n  params: { borrowerId: String, object: Object },\n});\n\nexport const pullBorrowerValue = new Method({\n  name: 'pullBorrowerValue',\n  params: { borrowerId: String, object: Object },\n});\n\nexport const getReusableBorrowers = new Method({\n  name: 'getReusableBorrowers',\n  params: { loanId: String, borrowerId: String },\n});\n","import {\n  createRegexQuery,\n  generateMatchAnyWordRegexp,\n} from '../helpers/mongoHelpers';\nimport { adminBorrower } from '../fragments';\nimport { BORROWER_QUERIES } from './borrowerConstants';\nimport Borrowers from '.';\n\nexport const adminBorrowers = Borrowers.createQuery(\n  BORROWER_QUERIES.ADMIN_BORROWERS,\n  adminBorrower(),\n  { scoped: true },\n);\n\nexport const borrowerSearch = Borrowers.createQuery(\n  BORROWER_QUERIES.BORROWER_SEARCH,\n  {\n    $filter({ filters, params: { searchQuery } }) {\n      // the following method forces one word to be found in lastname field\n      // and one word in firstName field.\n      const formattedSearchQuery = generateMatchAnyWordRegexp(searchQuery);\n\n      filters.$or = [\n        createRegexQuery('_id', searchQuery),\n        createRegexQuery('firstName', searchQuery),\n        createRegexQuery('lastName', searchQuery),\n        {\n          $and: [\n            createRegexQuery('firstName', formattedSearchQuery),\n            createRegexQuery('lastName', formattedSearchQuery),\n          ],\n        },\n      ];\n    },\n    name: 1,\n    createdAt: 1,\n    updatedAt: 1,\n    $options: { sort: { createdAt: -1 }, limit: 5 },\n  },\n);\n","import addressReducer from '../reducers/addressReducer';\nimport Borrowers from './borrowers';\n\nBorrowers.addReducers({\n  name: {\n    body: {\n      firstName: 1,\n      lastName: 1,\n    },\n    reduce: ({ firstName, lastName }) =>\n      [firstName, lastName].filter(x => x).join(' '),\n  },\n  age: {\n    body: { birthDate: 1 },\n    reduce: ({ birthDate }) => {\n      const age = Math.floor((new Date() - new Date(birthDate)) / 1000 / 60 / 60 / 24 / 365.25);\n      return age;\n    },\n  },\n  ...addressReducer,\n});\n","import SimpleSchema from 'simpl-schema';\nimport { createdAt, updatedAt, address } from '../../helpers/sharedSchemas';\n\nconst ContactSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  firstName: String,\n  lastName: String,\n  ...address,\n  emails: { type: Array, optional: true },\n  'emails.$': Object,\n  'emails.$.address': { type: String, regEx: SimpleSchema.RegEx.Email },\n  phoneNumbers: { type: Array, optional: true },\n  'phoneNumbers.$': String,\n  userLink: { type: String, optional: true },\n});\n\nexport default ContactSchema;\n","import { Mongo } from 'meteor/mongo';\n\nimport ContactSchema from './schemas/contactSchema';\nimport { CONTACTS_COLLECTION } from './contactsConstants';\n\nconst Contacts = new Mongo.Collection(CONTACTS_COLLECTION);\n\nContacts.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true,\n});\n\nContacts.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false,\n});\n\nContacts.attachSchema(ContactSchema);\nexport default Contacts;\n","export const CONTACTS_COLLECTION = 'contacts';\n\nexport const CONTACTS_QUERIES = {\n  ADMIN_CONTACTS: 'ADMIN_CONTACTS',\n  CONTACT_SEARCH: 'CONTACT_SEARCH',\n};\n","export * from './methodDefinitions';\nexport { default } from './contacts';\n","import Contacts from '.';\n\nimport { Users, Organisations, Lenders, Offers } from '..';\n\nContacts.addLinks({\n  user: {\n    collection: Users,\n    field: 'userLink',\n    type: 'one',\n    metadata: true,\n  },\n  organisations: {\n    collection: Organisations,\n    inversedBy: 'contacts',\n  },\n  lenders: {\n    collection: Lenders,\n    inversedBy: 'contact',\n  },\n});\n","import { Method } from '../methods/methods';\n\nexport const contactInsert = new Method({\n  name: 'contactInsert',\n  params: {\n    contact: Object,\n  },\n});\n\nexport const contactRemove = new Method({\n  name: 'contactRemove',\n  params: {\n    contactId: String,\n  },\n});\n\nexport const contactUpdate = new Method({\n  name: 'contactUpdate',\n  params: {\n    contactId: String,\n    object: Object,\n  },\n});\n\nexport const contactChangeOrganisations = new Method({\n  name: 'contactChangeOrganisations',\n  params: {\n    contactId: String,\n    newOrganisations: Array,\n  },\n});\n","import {\n  generateMatchAnyWordRegexp,\n  createRegexQuery,\n} from '../helpers/mongoHelpers';\nimport { contact } from '../fragments';\nimport { CONTACTS_QUERIES } from './contactsConstants';\nimport Contacts from '.';\n\nexport const adminContacts = Contacts.createQuery(\n  CONTACTS_QUERIES.ADMIN_CONTACTS,\n  contact(),\n);\n\nexport const contactSearch = Contacts.createQuery(\n  CONTACTS_QUERIES.CONTACT_SEARCH,\n  {\n    $filter({ filters, params: { searchQuery } }) {\n      const formattedSearchQuery = generateMatchAnyWordRegexp(searchQuery);\n\n      filters.$or = [\n        createRegexQuery('_id', searchQuery),\n        createRegexQuery('firstName', searchQuery),\n        createRegexQuery('lastName', searchQuery),\n        {\n          $and: [\n            createRegexQuery('firstName', formattedSearchQuery),\n            createRegexQuery('lastName', formattedSearchQuery),\n          ],\n        },\n      ];\n    },\n    name: 1,\n    organisations: { name: 1 },\n    $options: { sort: { createdAt: -1 }, limit: 5 },\n  },\n);\n","import addressReducer from '../reducers/addressReducer';\nimport Contacts from './contacts';\nimport { fullOffer } from '../fragments';\n\nContacts.addReducers({\n  name: {\n    body: {\n      firstName: 1,\n      lastName: 1,\n    },\n    reduce: ({ firstName, lastName }) =>\n      [firstName, lastName].filter(x => x).join(' '),\n  },\n  email: {\n    body: {\n      emails: 1,\n    },\n    reduce: ({ emails }) => emails && !!emails.length && emails[0].address,\n  },\n  phoneNumber: {\n    body: {\n      phoneNumbers: 1,\n    },\n    reduce: ({ phoneNumbers }) =>\n      phoneNumbers && !!phoneNumbers.length && phoneNumbers[0],\n  },\n  offers: {\n    body: {\n      lenders: { offers: fullOffer() },\n    },\n    reduce: ({ lenders = [] }) => {\n      const contactOffers = lenders.reduce(\n        (allOffers, { offers = [] }) => [...allOffers, ...offers],\n        [],\n      );\n      return contactOffers;\n    },\n  },\n  ...addressReducer,\n});\n","import { EventEmitter } from 'events';\nimport EventService from '../EventService';\n\nexport default new EventService({ emmitter: new EventEmitter() });\nexport * from './eventNames';\n","export const MODIFIED_FILES_EVENT = 'MODIFIED_FILES_EVENT';\nexport const LOAD_LOAN = 'LOAD_LOAN';\nexport const CALLED_METHOD = 'CALLED_METHOD';\n","export { default } from './ClientEventService';\nexport * from './eventNames';\n","import { Meteor } from 'meteor/meteor';\n\nconst IS_LOGGING = !Meteor.isProduction;\n\nexport default class EventService {\n  constructor({ emmitter }) {\n    this.emmitter = emmitter;\n    // contains arrays of listener functions, grouped by event names\n    this.listenerFunctions = {};\n    this.addErrorListener();\n  }\n\n  emit(eventName, ...args) {\n    this.logEmittedEvent(eventName, ...args);\n    this.emmitter.emit(eventName, ...args);\n  }\n\n  emitMethod({ name }, ...args) {\n    this.emit(name, ...args);\n  }\n\n  addListener(eventName, listenerFunction) {\n    this.emmitter.addListener(eventName, (...args) => {\n      this.logListener(eventName, ...args);\n      listenerFunction(...args);\n    });\n\n    const listenersForEvent = this.listenerFunctions[eventName] || [];\n\n    this.listenerFunctions[eventName] = [\n      ...listenersForEvent,\n      listenerFunction,\n    ];\n  }\n\n  addMethodListener(methods, listenerFunction) {\n    if (Array.isArray(methods)) {\n      methods.forEach(({ config: { name } }) => {\n        this.addListener(name, listenerFunction);\n      });\n    } else {\n      const {\n        config: { name },\n      } = methods;\n      this.addListener(name, listenerFunction);\n    }\n  }\n\n  addErrorListener() {\n    this.addListener('error', (error) => {\n      console.log('An error occured in an event listener:');\n      console.log(error);\n      throw error;\n    });\n  }\n\n  logEmittedEvent(eventName, ...args) {\n    if (IS_LOGGING && !Meteor.isTest) {\n      // console.log(`Event \"${eventName}\" triggered with params:`);\n      // console.log(params);\n    }\n  }\n\n  logListener(eventName, ...args) {\n    if (IS_LOGGING && !Meteor.isTest) {\n      console.log(`Event \"${eventName}\" listened to with args:`);\n      args.forEach(arg => console.log(arg));\n    }\n  }\n\n  getListenerFunctions(eventName) {\n    return this.listenerFunctions[eventName] || [];\n  }\n\n  removeListener(eventName, listener) {\n    this.emmitter.removeListener(eventName, listener);\n  }\n\n  removeAllListeners(eventName) {\n    this.emmitter.removeAllListeners(eventName);\n  }\n}\n","import { expect } from 'chai';\nimport { FeatureService } from '../FeatureService';\n\nlet featureService;\n\ndescribe('FeatureService', () => {\n  describe('getFeatureDecision', () => {\n    beforeEach(() => {\n      const featureConfig = {\n        featureOne: true,\n        featureWhichIsDisabled: false,\n        featureWithPriorityOfDecision: true,\n      };\n\n      const featureMap = {\n        featureOne: { tp1: true, tp2: 'tp2-v1' },\n        featureWhichIsDisabled: { tp3: true },\n        featureWithPriorityOfDecision: { tp2: 'tp2-v2' },\n        featureNotInConfig: { tp4: true, tp2: 'tp2-v3' },\n      };\n\n      featureService = new FeatureService({ featureMap, featureConfig });\n    });\n\n    it('should return a feature decision that belongs to an enabled feature', () => {\n      expect(featureService.getFeatureDecision('tp1')).to.be.true;\n    });\n\n    it('should return the latter feature decision for two decisions both belonging to different enabled features', () => {\n      expect(featureService.getFeatureDecision('tp2')).to.equal('tp2-v2');\n    });\n\n    it('should not return a feature decision that does not exist anywhere', () => {\n      expect(featureService.getFeatureDecision('tp9')).to.be.undefined;\n    });\n\n    it('should not return a feature decision of a feature disabled in the config but present in the feature map', () => {\n      expect(featureService.getFeatureDecision('tp3')).to.be.undefined;\n    });\n\n    it('should not return a feature decision of a feature not existing in the config but present in the feature map', () => {\n      expect(featureService.getFeatureDecision('tp4')).to.be.undefined;\n    });\n\n    it('should return undefined and not crash if the feature config does not exist', () => {\n      const anotherFeatureService = new FeatureService({\n        featureMap: { A_FEATURE: { TP1: true } },\n        featureConfig: undefined,\n      });\n      expect(anotherFeatureService.getFeatureDecision('tp123')).to.be.undefined;\n    });\n  });\n});\n","import { Meteor } from 'meteor/meteor';\nimport pickBy from 'lodash/pickBy';\nimport extend from 'lodash/extend';\nimport { withProps, renderNothing } from 'recompose';\nimport { TOGGLE_POINTS } from './featureConstants';\nimport {\n  enhanceChildrenWith,\n  changeCodeWith,\n} from './featureDecisionFactories';\nimport { returnEmptyArray, returnFalse } from '../../utils/featureFunctions';\n\nconst {\n  WIDGET1_CONTINUE_BUTTON,\n  STRIPPED_LITE_VERSION_UI,\n  ROUTES_CONFIG_STRIPPED_IN_LITE_VERSION,\n  ROUTES_NOT_PRODUCTION_READY,\n} = TOGGLE_POINTS;\n\nconst { features: featureConfig } = Meteor.settings.public;\n\n/**\n * A `Feature`, when enabled, changes the application in some way\n * (on frontend, backend, anywhere); when disabled, the application remains unchanged.\n *\n * A `Feature Decision` belongs to a certain feature and\n * represents a change performed in the application when that feature is enabled.\n * The actual place in the code where the feature decision will be applied\n * to change the code is called a `Toggle Point`.\n *\n * The `Toggle Point` is the technical implementation of the Feature Decision concept\n *\n * The `Feature Map` is a list of maches between a feature and its decisions.\n *\n * When multiple features are enabled, all their decisions get merged into\n * a single list of decisions. If the same feature decision (represented by a Toggle Point)\n * is used in more than one feature, the one in the latter feature overwrites others before it\n * (so only the latter decision gets applied); the features' order is dictated by the Feature Map.\n *\n * So in the end, tehnically speaking, we get a single list of Toggle Points which will\n * customize the code as we specify in the Feature Map.\n *\n * For each decision/toggle point it, you should pass a decision value\n * suitable for the way you use that Toggle Point.\n * E.g.: for a toggle point that wraps chilren, use `enhanceChildrenWith`\n *       for a toggle point that switches components on/off, use `switchElements`\n * First check how your TogglePoint component is used,\n * then configure it's behaviour here.\n */\n\nconst featureMap = {\n  LITE_VERSION: {\n    // change the link of the Continuer button to '/contact'\n    [WIDGET1_CONTINUE_BUTTON]: enhanceChildrenWith(withProps({\n      to: '/contact',\n    })),\n\n    // don't render the React UI that we don't want in the lite www version\n    [STRIPPED_LITE_VERSION_UI]: enhanceChildrenWith(renderNothing),\n\n    // remove the routes that we don't want in the lite www version\n    [ROUTES_CONFIG_STRIPPED_IN_LITE_VERSION]: changeCodeWith(returnEmptyArray),\n  },\n  NOT_PRODUCTION_READY: {\n    [ROUTES_NOT_PRODUCTION_READY]: changeCodeWith(returnEmptyArray),\n  },\n};\n\nexport class FeatureService {\n  constructor({ featureMap = {}, featureConfig = {} }) {\n    this.featureMap = featureMap;\n    this.featureConfig = featureConfig;\n  }\n\n  // Merges all feature decisions of the features that are enabled\n  getEnabledFeatureDecisions({ featureMap, featureConfig }) {\n    // Get a feature map of all enabled features\n    const enabledFeatureMap = pickBy(\n      featureMap,\n      (featureDecisions, featureName) => {\n        const featureIsEnabled = featureConfig[featureName];\n        return featureIsEnabled;\n      },\n    );\n\n    // merge all enabled feature decisions into a single object\n    return extend({}, ...Object.values(enabledFeatureMap));\n  }\n\n  getFeatureDecision(togglePointId) {\n    const { featureMap, featureConfig } = this;\n    const currentFeatureDecisions = this.getEnabledFeatureDecisions({\n      featureMap,\n      featureConfig,\n    });\n\n    return currentFeatureDecisions[togglePointId];\n  }\n}\n\nexport default new FeatureService({ featureMap, featureConfig });\n","// Look in the `FeatureService` file at the `featureMap`\n// to see how these toggle points impact the system\nexport const TOGGLE_POINTS = {\n  WIDGET1_CONTINUE_BUTTON: 'WIDGET1_CONTINUE_BUTTON',\n  STRIPPED_LITE_VERSION_UI: 'STRIPPED_LITE_VERSION_UI',\n  ROUTES_CONFIG_STRIPPED_IN_LITE_VERSION:\n    'ROUTES_CONFIG_STRIPPED_IN_LITE_VERSION',\n  ROUTES_NOT_PRODUCTION_READY: 'ROUTES_NOT_PRODUCTION_READY',\n};\n","// these factories help the developer/reader to understand\n// what the value of the feature decision means\nexport const enhanceChildrenWith = childrenEnhancer => childrenEnhancer;\n\nexport const switchElements = (performSwitch = true) => performSwitch;\n\nexport const changeCodeWith = codeChangingFunction => codeChangingFunction;\n","import SimpleSchema from 'simpl-schema';\nimport {\n  createdAt,\n  updatedAt,\n  percentageField,\n} from '../../helpers/sharedSchemas';\nimport { TRENDS, INTEREST_RATES } from '../interestRatesConstants';\n\nconst singleInterestRate = type => ({\n  [type]: { type: Object, optional: true, defaultValue: {} },\n  [`${type}.rateLow`]: percentageField,\n  [`${type}.rateHigh`]: percentageField,\n  [`${type}.trend`]: {\n    type: String,\n    allowedValues: Object.values(TRENDS),\n    optional: true,\n  },\n});\n\nconst rates = Object.values(INTEREST_RATES).reduce(\n  (interestRates, type) => ({ ...interestRates, ...singleInterestRate(type) }),\n  {},\n);\n\nconst InterestRatesSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  date: Date,\n  ...rates,\n});\n\nexport default InterestRatesSchema;\n","export * from './methodDefinitions';\nexport { default } from './interestRates';\n","import { Mongo } from 'meteor/mongo';\n\nimport InterestRatesSchema from './schemas/interestRatesSchema';\nimport { INTEREST_RATES_COLLECTION } from './interestRatesConstants';\n\nconst InterestRates = new Mongo.Collection(INTEREST_RATES_COLLECTION);\n\nInterestRates.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true,\n});\n\nInterestRates.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false,\n});\n\nInterestRates.attachSchema(InterestRatesSchema);\nexport default InterestRates;\n","export const INTEREST_TREND = {\n  UP: 'UP',\n  DOWN: 'DOWN',\n};\n\nexport const INTEREST_RATES_COLLECTION = 'interestRates';\n\nexport const TRENDS = {\n  UP: 'UP',\n  DOWN: 'DOWN',\n  FLAT: 'FLAT',\n};\n\nexport const INTEREST_RATES = {\n  LIBOR: 'interestLibor',\n  YEARS_1: 'interest1',\n  YEARS_2: 'interest2',\n  YEARS_5: 'interest5',\n  YEARS_10: 'interest10',\n  YEARS_15: 'interest15',\n  YEARS_20: 'interest20',\n  YEARS_25: 'interest25',\n};\n\nexport const INTEREST_RATES_QUERIES = {\n  INTEREST_RATES: 'INTEREST_RATES',\n  CURRENT_INTEREST_RATES: 'CURRENT_INTEREST_RATES',\n};\n","import { Method } from '../methods/methods';\n\nexport const interestRatesInsert = new Method({\n  name: 'interestRatesInsert',\n  params: {\n    interestRates: Object,\n  },\n});\n\nexport const interestRatesRemove = new Method({\n  name: 'interestRatesRemove',\n  params: {\n    interestRatesId: String,\n  },\n});\n\nexport const interestRatesUpdate = new Method({\n  name: 'interestRatesUpdate',\n  params: {\n    interestRatesId: String,\n    object: Object,\n  },\n});\n","import SimpleSchema from 'simpl-schema';\nimport {\n  createdAt,\n  updatedAt,\n  percentageField,\n} from '../../helpers/sharedSchemas';\n\nconst Irs10ySchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  date: Date,\n  rate: { ...percentageField, optional: false },\n});\n\nexport default Irs10ySchema;\n","export * from './methodDefinitions';\nexport { default } from './irs10y';\n","import { Mongo } from 'meteor/mongo';\n\nimport Irs10ySchema from './schemas/irs10ySchema';\nimport { IRS10Y_COLLECTION } from './irs10yConstants';\n\nconst Irs10y = new Mongo.Collection(IRS10Y_COLLECTION);\n\nIrs10y.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true,\n});\n\nIrs10y.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false,\n});\n\nIrs10y.attachSchema(Irs10ySchema);\nexport default Irs10y;\n","export const IRS10Y_COLLECTION = 'irs10y';\n\nexport const IRS10Y_QUERIES = {\n  IRS10Y: 'IRS10Y',\n};\n","import { Method } from '../methods/methods';\n\nexport const irs10yInsert = new Method({\n  name: 'irs10yInsert',\n  params: {\n    irs10y: Object,\n  },\n});\n\nexport const irs10yRemove = new Method({\n  name: 'irs10yRemove',\n  params: {\n    irs10yId: String,\n  },\n});\n\nexport const irs10yUpdate = new Method({\n  name: 'irs10yUpdate',\n  params: {\n    irs10yId: String,\n    object: Object,\n  },\n});\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\n\nimport {\n  BONUS_ALGORITHMS,\n  REAL_ESTATE_INCOME_ALGORITHMS,\n} from '../../../config/financeConstants';\nimport {\n  createdAt,\n  updatedAt,\n  percentageField,\n} from '../../helpers/sharedSchemas';\nimport {\n  INCOME_CONSIDERATION_TYPES,\n  EXPENSE_TYPES_WITHOUT_DELTAS,\n} from '../lenderRulesConstants';\n\n// When adding new rules to lenderRules, make sure to edit the\n// applyRules method on LenderRulesInitializator\n\nexport const incomeConsideration = {\n  incomeConsiderationType: {\n    type: String,\n    allowedValues: Object.values(INCOME_CONSIDERATION_TYPES),\n    optional: true,\n  },\n  bonusAlgorithm: {\n    type: String,\n    allowedValues: Object.values(BONUS_ALGORITHMS),\n    optional: true,\n    uniforms: { placeholder: null },\n  },\n  bonusConsideration: percentageField,\n  bonusHistoryToConsider: { type: SimpleSchema.Integer, optional: true },\n  companyIncomeConsideration: percentageField,\n  companyIncomeHistoryToConsider: {\n    type: SimpleSchema.Integer,\n    optional: true,\n  },\n  dividendsConsideration: percentageField,\n  dividendsHistoryToConsider: { type: SimpleSchema.Integer, optional: true },\n  realEstateIncomeAlgorithm: {\n    type: String,\n    allowedValues: Object.values(REAL_ESTATE_INCOME_ALGORITHMS),\n    optional: true,\n    uniforms: { placeholder: null },\n  },\n  realEstateIncomeConsideration: percentageField,\n  // realEstateIncomeConsiderationType: {\n  //   type: String,\n  //   allowedValues: Object.values(REAL_ESTATE_CONSIDERATION_TYPES),\n  //   optional: true,\n  // },\n  investmentIncomeConsideration: percentageField,\n  expensesSubtractFromIncome: {\n    type: Array,\n    optional: true,\n    uniforms: {\n      intlId: 'expenses',\n      placeholder: 'Ajouter toutes les charges aux charges théoriques',\n      label: 'Charges à soustraire aux revenus',\n    },\n    autoValue() {\n      if (\n        Meteor.isServer\n        && this.isSet\n        && Array.isArray(this.value)\n        && this.value.length === 0\n      ) {\n        return { $unset: true };\n      }\n    },\n  },\n  'expensesSubtractFromIncome.$': {\n    type: String,\n    // REAL_ESTATE_DELTAS are handled internally\n    allowedValues: EXPENSE_TYPES_WITHOUT_DELTAS,\n  },\n  fortuneReturnsRatio: percentageField,\n};\n\nexport const theoreticalExpenses = {\n  theoreticalInterestRate: percentageField,\n  theoreticalInterestRate2ndRank: percentageField,\n  theoreticalMaintenanceRate: percentageField,\n  amortizationGoal: percentageField,\n  amortizationYears: {\n    type: SimpleSchema.Integer,\n    min: 0,\n    max: 20,\n    optional: true,\n  },\n};\n\nexport const cutOffCriteria = {\n  maxBorrowRatio: percentageField,\n  maxBorrowRatioWithPledge: percentageField,\n  maxIncomeRatio: percentageField,\n};\n\nexport const otherParams = {\n  allowPledge: {\n    type: Boolean,\n    optional: true,\n    autoValue() {\n      if (Meteor.isServer && this.isSet && this.value === false) {\n        return { $unset: true };\n      }\n    },\n  },\n  adminComments: { type: Array, defaultValue: [] },\n  'adminComments.$': String,\n  pdfComments: { type: Array, defaultValue: [] },\n  'pdfComments.$': String,\n};\n\nconst LenderRulesSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  organisationLink: { type: Object, optional: true },\n  'organisationLink._id': { type: String, optional: true },\n  filter: { type: Object, blackbox: true },\n  name: { type: String, optional: true },\n  order: { type: Number, min: 0 },\n  organisationCache: {\n    type: Object,\n    blackbox: true,\n    optional: true,\n  },\n  ...incomeConsideration,\n  ...theoreticalExpenses,\n  ...cutOffCriteria,\n  ...otherParams,\n});\n\nexport const LenderRulesEditorSchema = LenderRulesSchema.pick(\n  ...Object.keys(incomeConsideration),\n  ...Object.keys(theoreticalExpenses),\n  ...Object.keys(cutOffCriteria),\n  ...Object.keys(otherParams),\n);\n\nexport default LenderRulesSchema;\n","import jsonLogic from 'json-logic-js';\n\nconst rulesToMerge = ['pdfComments', 'adminComments'];\n\nconst filterIsValid = (filter, variables) => jsonLogic.apply(filter, variables);\n\nconst mergeRules = ({ names = [], ...oldRules }, newRules) => {\n  let mergedObject = { ...oldRules };\n\n  Object.keys(newRules).forEach((newRuleName) => {\n    const newRule = newRules[newRuleName];\n\n    if (rulesToMerge.includes(newRuleName) && mergedObject[newRuleName]) {\n      mergedObject = {\n        ...mergedObject,\n        [newRuleName]: [...mergedObject[newRuleName], ...newRule],\n      };\n    } else if (newRule !== undefined && newRule !== null) {\n      mergedObject = { ...mergedObject, [newRuleName]: newRule };\n    }\n  });\n\n  return {\n    ...mergedObject,\n    names: [...names, newRules.name],\n  };\n};\n\nexport const getMatchingRules = (\n  lenderRules,\n  variables,\n  storeOrigin = () => {},\n) =>\n  lenderRules.reduce((validRules, { filter, ...rules }) => {\n    if (filterIsValid(filter, variables)) {\n      storeOrigin(rules, rules._id);\n      return mergeRules(validRules, rules);\n    }\n\n    return validRules;\n  }, {});\n\nexport const isAllRule = ({ filter: { and } }) => and[0] === true;\n\nexport const parseFilter = (ruleObject) => {\n  if (ruleObject === true) {\n    // Handle exception for rules that are true, i.e. apply to all loans\n    return { value: true };\n  }\n\n  const [operator] = Object.keys(ruleObject);\n  const { var: variable } = ruleObject[operator].find(o => o && o.var);\n  const value = ruleObject[operator].find(o => !(o && o.var));\n\n  return { operator, variable, value };\n};\n\nexport const formatFilter = ({ variable, operator, value }) => ({\n  [operator]: [{ var: variable }, value],\n});\n","export * from './methodDefinitions';\nexport { default } from './lenderRules';\n","import { Mongo } from 'meteor/mongo';\n\nimport LenderRulesSchema from './schemas/lenderRulesSchema';\nimport { LENDER_RULES_COLLECTION } from './lenderRulesConstants';\n\nconst LenderRules = new Mongo.Collection(LENDER_RULES_COLLECTION);\n\nLenderRules.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true,\n});\n\nLenderRules.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false,\n});\n\nLenderRules.attachSchema(LenderRulesSchema);\nexport default LenderRules;\n","import { BONUS_ALGORITHMS } from 'core/config/financeConstants';\nimport { RESIDENCE_TYPE } from '../properties/propertyConstants';\nimport { EXPENSES } from '../borrowers/borrowerConstants';\n\nexport const LENDER_RULES_COLLECTION = 'lenderRules';\n\nexport const LENDER_RULES_QUERIES = {\n  ORGANISATION_LENDER_RULES: 'ORGANISATION_LENDER_RULES',\n};\n\nexport const INCOME_CONSIDERATION_TYPES = {\n  GROSS: 'GROSS',\n  NET: 'NET',\n};\n\nexport const REAL_ESTATE_CONSIDERATION_TYPES = {\n  ADD_TO_INCOME: 'ADD_TO_INCOME',\n  SUBTRACT_FROM_EXPENSES: 'SUBTRACT_FROM_EXPENSES',\n};\n\nexport const EXPENSES_CONSIDERATION_TYPES = {\n  SUBTRACT_FROM_INCOME: 'SUBTRACT_FROM_INCOME',\n  ADD_TO_EXPENSES: 'ADD_TO_EXPENSES',\n};\n\nexport const LENDER_RULES_VARIABLES = {\n  INCOME: 'income',\n  RESIDENCE_TYPE: 'residenceType',\n  CANTON: 'canton',\n  BORROW_RATIO: 'borrowRatio',\n  WANTED_LOAN: 'wantedLoan',\n  PROPERTY_VALUE: 'propertyValue',\n  INSIDE_AREA: 'insideArea',\n  BANK_FORTUNE: 'bankFortune',\n  PROPERTY_TYPE: 'propertyType',\n  ZIP_CODE: 'zipCode',\n  REMAINING_BANK_FORTUNE: 'remainingBankFortune',\n};\n\nexport const LENDER_RULES_OPERATORS = {\n  EQUALS: '===',\n  MORE_THAN: '>',\n  MORE_THAN_OR_EQUAL: '>=',\n  LESS_THAN: '<',\n  LESS_THAN_OR_EQUAL: '<=',\n  IN: 'in',\n};\n\nexport const DEFAULT_MAIN_RESIDENCE_RULES = [\n  {\n    [LENDER_RULES_OPERATORS.IN]: [\n      { var: 'residenceType' },\n      [RESIDENCE_TYPE.MAIN_RESIDENCE],\n    ],\n  },\n];\n\nexport const DEFAULT_SECONDARY_RESIDENCE_RULES = [\n  {\n    [LENDER_RULES_OPERATORS.IN]: [\n      { var: 'residenceType' },\n      [RESIDENCE_TYPE.SECOND_RESIDENCE],\n    ],\n  },\n];\n\n// Keep the deltas above other expenses so they appear in the right order\nexport const EXPENSE_TYPES = {\n  REAL_ESTATE_DELTA_POSITIVE: 'REAL_ESTATE_DELTA_POSITIVE',\n  REAL_ESTATE_DELTA_NEGATIVE: 'REAL_ESTATE_DELTA_NEGATIVE',\n  ...EXPENSES,\n  THEORETICAL_REAL_ESTATE: 'THEORETICAL_REAL_ESTATE',\n};\n\nexport const EXPENSE_TYPES_WITHOUT_DELTAS = Object.values(EXPENSE_TYPES).filter(value =>\n  ![\n    EXPENSE_TYPES.REAL_ESTATE_DELTA_POSITIVE,\n    EXPENSE_TYPES.REAL_ESTATE_DELTA_NEGATIVE,\n  ].includes(value));\n\nexport const DEFAULT_VALUE_FOR_ALL = {\n  incomeConsiderationType: INCOME_CONSIDERATION_TYPES.GROSS,\n  bonusAlgorithm: BONUS_ALGORITHMS.WEAK_AVERAGE,\n  bonusConsideration: 0.5,\n  bonusHistoryToConsider: 3,\n  companyIncomeConsideration: 1,\n  companyIncomeHistoryToConsider: 3,\n  dividendsConsideration: 1,\n  dividendsHistoryToConsider: 1,\n  pensionIncomeConsideration: 1,\n  realEstateIncomeConsideration: 1,\n  realEstateIncomeConsiderationType:\n    REAL_ESTATE_CONSIDERATION_TYPES.SUBTRACT_FROM_EXPENSES,\n  investmentIncomeConsideration: 1,\n  expensesSubtractFromIncome: EXPENSE_TYPES_WITHOUT_DELTAS,\n  theoreticalInterestRate: 0.05,\n  theoreticalMaintenanceRate: 0.01,\n  amortizationGoal: 0.65,\n  amortizationYears: 15,\n  maxBorrowRatio: 0.9,\n  maxIncomeRatio: 0.3333,\n  allowPledge: true,\n};\n","import LenderRules from '.';\nimport { Organisations } from '..';\n\nLenderRules.addLinks({\n  organisation: {\n    field: 'organisationLink',\n    type: 'one',\n    metadata: true,\n    collection: Organisations,\n    denormalize: {\n      field: 'organisationCache',\n      body: { _id: 1, name: 1 },\n    },\n  },\n});\n","import { Match } from 'meteor/check';\n\nimport { Method } from '../methods/methods';\n\nexport const lenderRulesInsert = new Method({\n  name: 'lenderRulesInsert',\n  params: {\n    organisationId: String,\n    logicRules: Array,\n    object: Match.Maybe(Object),\n  },\n});\nexport const lenderRulesInitialize = new Method({\n  name: 'lenderRulesInitialize',\n  params: {\n    organisationId: String,\n  },\n});\n\nexport const lenderRulesRemove = new Method({\n  name: 'lenderRulesRemove',\n  params: {\n    lenderRulesId: String,\n  },\n});\n\nexport const lenderRulesUpdate = new Method({\n  name: 'lenderRulesUpdate',\n  params: {\n    lenderRulesId: String,\n    object: Object,\n  },\n});\n\nexport const lenderRulesUpdateFilter = new Method({\n  name: 'lenderRulesUpdateFilter',\n  params: {\n    lenderRulesId: String,\n    logicRules: Array,\n    name: Match.Optional(String),\n  },\n});\n\nexport const setLenderRulesOrder = new Method({\n  name: 'setLenderRulesOrder',\n  params: {\n    orders: Object,\n  },\n});\n","import SimpleSchema from 'simpl-schema';\nimport { createdAt, updatedAt } from '../../helpers/sharedSchemas';\nimport { LENDER_STATUS } from '../lenderConstants';\n\nconst LenderSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  status: {\n    type: String,\n    allowedValues: Object.values(LENDER_STATUS),\n    defaultValue: LENDER_STATUS.TO_BE_CONTACTED,\n  },\n  contactLink: { type: Object, optional: true },\n  'contactLink._id': { type: String, optional: true },\n  organisationLink: { type: Object, optional: true },\n  'organisationLink._id': { type: String, optional: true },\n  loanLink: { type: Object, optional: true },\n  'loanLink._id': { type: String, optional: true },\n  adminNote: { type: String, optional: true },\n});\n\nexport default LenderSchema;\n","export * from './methodDefinitions';\nexport { default } from './lenders';\n","export const LENDERS_COLLECTION = 'lenders';\n\nexport const LENDERS_QUERIES = {\n  LOAN_LENDERS: 'LOAN_LENDERS',\n};\n\nexport const LENDER_STATUS = {\n  TO_BE_CONTACTED: 'TO_BE_CONTACTED',\n  CONTACTED: 'CONTACTED',\n  OFFER_RECEIVED: 'OFFER_RECEIVED',\n  TO_EXCLUDE: 'TO_EXCLUDE',\n};\n","import { Mongo } from 'meteor/mongo';\n\nimport LenderSchema from './schemas/lenderSchema';\nimport { LENDERS_COLLECTION } from './lenderConstants';\n\nconst Lenders = new Mongo.Collection(LENDERS_COLLECTION);\n\nLenders.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true,\n});\n\nLenders.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false,\n});\n\nLenders.attachSchema(LenderSchema);\nexport default Lenders;\n","import Lenders from '.';\nimport { Contacts, Organisations, Loans, Offers } from '..';\nimport Tasks from '../tasks';\n\nLenders.addLinks({\n  contact: {\n    field: 'contactLink',\n    collection: Contacts,\n    type: 'one',\n    metadata: true,\n  },\n  organisation: {\n    field: 'organisationLink',\n    collection: Organisations,\n    type: 'one',\n    metadata: true,\n  },\n  loan: {\n    field: 'loanLink',\n    collection: Loans,\n    type: 'one',\n    metadata: true,\n  },\n  offers: {\n    collection: Offers,\n    inversedBy: 'lender',\n    autoremove: true,\n  },\n  tasks: {\n    inversedBy: 'lender',\n    collection: Tasks,\n    autoremove: true,\n  },\n});\n","import { Match } from 'meteor/check';\nimport { Method } from '../methods/methods';\n\nexport const lenderInsert = new Method({\n  name: 'lenderInsert',\n  params: {\n    lender: Object,\n    organisationId: String,\n    contactId: Match.OneOf(String, null),\n  },\n});\n\nexport const lenderRemove = new Method({\n  name: 'lenderRemove',\n  params: {\n    lenderId: String,\n  },\n});\n\nexport const lenderUpdate = new Method({\n  name: 'lenderUpdate',\n  params: {\n    lenderId: String,\n    object: Object,\n  },\n});\n\nexport const lenderLinkOrganisationAndContact = new Method({\n  name: 'lenderLinkOrganisationAndContact',\n  params: {\n    lenderId: String,\n    organisationId: Match.OneOf(String, null),\n    contactId: Match.OneOf(String, null),\n  },\n});\n","import SimpleSchema from 'simpl-schema';\nimport { LOT_TYPES } from '../lotConstants';\nimport { createdAt, updatedAt, moneyField } from '../../helpers/sharedSchemas';\n\nconst LotSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  name: String,\n  type: {\n    type: String,\n    allowedValues: Object.values(LOT_TYPES),\n    uniforms: { displayEmpty: false },\n  },\n  description: { type: String, optional: true },\n  value: {\n    ...moneyField,\n    optional: false,\n  },\n});\n\nexport default LotSchema;\n","export * from './methodDefinitions';\nexport { default } from './lots';\n","import Lots from '.';\n\nimport { Promotions, PromotionLots, PromotionOptions } from '..';\n\nLots.addLinks({\n  promotions: {\n    collection: Promotions,\n    inversedBy: 'lots',\n  },\n  promotionLots: {\n    collection: PromotionLots,\n    inversedBy: 'lots',\n  },\n  promotionOptions: {\n    collection: PromotionOptions,\n    inversedBy: 'lots',\n  },\n});\n","export const LOTS_COLLECTION = 'lots';\n\nexport const LOT_TYPES = {\n  BASEMENT: 'BASEMENT',\n  PARKING_MOTORBIKE: 'PARKING_MOTORBIKE',\n  PARKING_CAR: 'PARKING_CAR',\n  PARKING_IN_A_ROW: 'PARKING_IN_A_ROW',\n  PARKING_DISABLED: 'PARKING_DISABLED',\n};\n","import { Mongo } from 'meteor/mongo';\n\nimport LotSchema from './schemas/LotSchema';\nimport { LOTS_COLLECTION } from './lotConstants';\n\nconst Lots = new Mongo.Collection(LOTS_COLLECTION);\n\nLots.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true,\n});\n\nLots.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false,\n});\n\nLots.attachSchema(LotSchema);\nexport default Lots;\n","import { Match } from 'meteor/check';\nimport { Method } from '../methods/methods';\n\nexport const lotInsert = new Method({\n  name: 'lotInsert',\n  params: {\n    promotionId: String,\n    lot: Object,\n  },\n});\n\nexport const lotUpdate = new Method({\n  name: 'lotUpdate',\n  params: {\n    lotId: String,\n    object: Object,\n  },\n});\n\nexport const lotRemove = new Method({\n  name: 'lotRemove',\n  params: {\n    lotId: String,\n  },\n});\n","import Lots from '.';\n\nLots.addReducers({\n  status: {\n    body: {\n      promotionLots: { status: 1, value: 1 },\n    },\n    reduce: ({ promotionLots }) =>\n      promotionLots && promotionLots[0] && promotionLots[0].status,\n  },\n});\n","import SimpleSchema from 'simpl-schema';\nimport { createdAt, updatedAt, moneyField } from '../../helpers/sharedSchemas';\nimport {\n  CANTONS,\n  MORTGAGE_NOTE_TYPES,\n  MORTGAGE_NOTE_CATEGORIES,\n} from '../../constants';\n\nconst MortgageNoteSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  value: moneyField,\n  rank: { type: Number, min: 0, max: 10, optional: true },\n  type: {\n    type: String,\n    allowedValues: Object.values(MORTGAGE_NOTE_TYPES),\n    optional: true,\n    uniforms: { placeholder: null },\n  },\n  category: {\n    type: String,\n    allowedValues: Object.values(MORTGAGE_NOTE_CATEGORIES),\n    optional: true,\n    uniforms: { placeholder: null },\n  },\n  canton: {\n    type: String,\n    allowedValues: Object.keys(CANTONS),\n    optional: true,\n    uniforms: { placeholder: null },\n  },\n});\n\nexport default MortgageNoteSchema;\n","export * from './methodDefinitions';\nexport { default } from './mortgageNotes';\n","import MortgageNotes from '.';\nimport { Borrowers, Properties } from '..';\n\n// If you want to use links, don't forget to import this file in 'core/api/links.js'\n\nMortgageNotes.addLinks({\n  borrower: {\n    collection: Borrowers,\n    inversedBy: 'mortgageNotes',\n  },\n  property: {\n    collection: Properties,\n    inversedBy: 'mortgageNotes',\n  },\n});\n","import { Match } from 'meteor/check';\n\nimport { Method } from '../methods/methods';\n\nexport const mortgageNoteInsert = new Method({\n  name: 'mortgageNoteInsert',\n  params: {\n    mortgageNote: Match.Optional(Object),\n    propertyId: Match.Optional(String),\n    borrowerId: Match.Optional(String),\n  },\n});\n\nexport const mortgageNoteRemove = new Method({\n  name: 'mortgageNoteRemove',\n  params: {\n    mortgageNoteId: String,\n  },\n});\n\nexport const mortgageNoteUpdate = new Method({\n  name: 'mortgageNoteUpdate',\n  params: {\n    mortgageNoteId: String,\n    object: Object,\n  },\n});\n","export const MORTGAGE_NOTES_COLLECTION = 'mortgageNotes';\n\nexport const MORTGAGE_NOTES_QUERIES = {\n// Insert your queries name here\n// Example:\n// EXAMPLE_QUERIE: 'EXAMPLE_QUERIE',\n};\n","import { Mongo } from 'meteor/mongo';\n\nimport MortgageNoteSchema from './schemas/MortgageNoteSchema';\nimport { MORTGAGE_NOTES_COLLECTION } from './mortgageNoteConstants';\n\nconst MortgageNotes = new Mongo.Collection(MORTGAGE_NOTES_COLLECTION);\n\nMortgageNotes.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true,\n});\n\nMortgageNotes.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false,\n});\n\nMortgageNotes.attachSchema(MortgageNoteSchema);\nexport default MortgageNotes;\n","import SimpleSchema from 'simpl-schema';\nimport { PROMOTION_LOT_STATUS } from '../promotionLotConstants';\nimport {\n  createdAt,\n  updatedAt,\n} from '../../helpers/sharedSchemas';\n\nconst PromotionLotSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  status: {\n    type: String,\n    allowedValues: Object.values(PROMOTION_LOT_STATUS),\n    defaultValue: PROMOTION_LOT_STATUS.AVAILABLE,\n  },\n  propertyLinks: { type: Array, minCount: 1, maxCount: 1 },\n  'propertyLinks.$': Object,\n  'propertyLinks.$._id': { type: String, optional: true },\n  lotLinks: { type: Array, defaultValue: [] },\n  'lotLinks.$': Object,\n  'lotLinks.$._id': { type: String, optional: true },\n  attributedToLink: { type: Object, optional: true },\n  'attributedToLink._id': { type: String, optional: true },\n});\n\nexport default PromotionLotSchema;\n","export * from './methodDefinitions';\nexport { default } from './promotionLots';\n","import PromotionLots from '.';\n\nimport { Promotions, Properties, Lots, PromotionOptions, Loans } from '..';\n\nPromotionLots.addLinks({\n  promotion: {\n    collection: Promotions,\n    inversedBy: 'promotionLots',\n  },\n  properties: {\n    collection: Properties,\n    field: 'propertyLinks',\n    type: 'many',\n    metadata: true,\n  },\n  lots: {\n    collection: Lots,\n    field: 'lotLinks',\n    type: 'many',\n    metadata: true,\n  },\n  promotionOptions: {\n    collection: PromotionOptions,\n    inversedBy: 'promotionLots',\n    autoremove: true,\n  },\n  attributedTo: {\n    collection: Loans,\n    field: 'attributedToLink',\n    type: 'one',\n    metadata: true,\n  },\n});\n","import { Match } from 'meteor/check';\nimport { Method } from '../methods/methods';\n\nexport const promotionLotInsert = new Method({\n  name: 'promotionLotInsert',\n  params: {\n    promotionLot: Object,\n    promotionId: String,\n  },\n});\n\nexport const promotionLotUpdate = new Method({\n  name: 'promotionLotUpdate',\n  params: {\n    promotionLotId: String,\n    object: Object,\n  },\n});\n\nexport const promotionLotRemove = new Method({\n  name: 'promotionLotRemove',\n  params: {\n    promotionLotId: String,\n  },\n});\n\nexport const addLotToPromotionLot = new Method({\n  name: 'addLotToPromotionLot',\n  params: {\n    promotionLotId: String,\n    lotId: String,\n  },\n});\n\nexport const removeLotLink = new Method({\n  name: 'removeLotLink',\n  params: {\n    promotionLotId: String,\n    lotId: String,\n  },\n});\n\nexport const bookPromotionLot = new Method({\n  name: 'bookPromotionLot',\n  params: {\n    promotionLotId: String,\n    loanId: String,\n  },\n});\n\nexport const cancelPromotionLotBooking = new Method({\n  name: 'cancelPromotionLotBooking',\n  params: {\n    promotionLotId: String,\n  },\n});\n\nexport const sellPromotionLot = new Method({\n  name: 'sellPromotionLot',\n  params: {\n    promotionLotId: String,\n  },\n});\n","export const PROMOTION_LOTS_COLLECTION = 'promotionLots';\n\nexport const PROMOTION_LOT_STATUS = {\n  AVAILABLE: 'AVAILABLE',\n  BOOKED: 'BOOKED',\n  SOLD: 'SOLD',\n};\n\nexport const PROMOTION_LOT_REDUCED_STATUS = {\n  BOOKED_FOR_ME: 'BOOKED_FOR_ME',\n  NOT_AVAILABLE: 'NOT_AVAILABLE',\n  SOLD_TO_ME: 'SOLD_TO_ME',\n};\n\nexport const PROMOTION_LOT_QUERIES = {\n  APP_PROMOTION_LOT: 'APP_PROMOTION_LOT',\n  PRO_PROMOTION_LOT: 'PRO_PROMOTION_LOT',\n  PROMOTION_LOT_FILES: 'PROMOTION_LOT_FILES',\n};\n","import { Mongo } from 'meteor/mongo';\n\nimport PromotionLotSchema from './schemas/PromotionLotSchema';\nimport { PROMOTION_LOTS_COLLECTION } from './promotionLotConstants';\n\nconst PromotionLots = new Mongo.Collection(PROMOTION_LOTS_COLLECTION);\n\nPromotionLots.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true,\n});\n\nPromotionLots.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false,\n});\n\nPromotionLots.attachSchema(PromotionLotSchema);\nexport default PromotionLots;\n","import { Meteor } from 'meteor/meteor';\nimport {\n  PROMOTION_LOT_STATUS,\n  PROMOTION_LOT_REDUCED_STATUS,\n} from 'core/api/constants';\nimport PromotionLots from './promotionLots';\n\nPromotionLots.addReducers({\n  name: {\n    body: { properties: { name: 1 } },\n    reduce: ({ properties }) =>\n      properties && properties[0] && properties[0].name,\n  },\n  documents: {\n    body: { properties: { documents: 1 } },\n    reduce: ({ properties }) =>\n      properties && properties[0] && properties[0].documents,\n  },\n  value: {\n    body: { properties: { totalValue: 1 }, lots: { value: 1 } },\n    reduce: ({ properties, lots }) => {\n      // Sometimes, lots are undefined........ fuck me\n      const propertiesValue = properties.reduce(\n        (total, { totalValue }) => total + totalValue,\n        0,\n      );\n      const lotsValue = lots\n        ? lots.reduce((total, { value }) => total + value, 0)\n        : 0;\n\n      return propertiesValue + lotsValue;\n    },\n  },\n  reducedStatus: {\n    body: { status: 1, attributedTo: { user: { _id: 1 } } },\n    reduce: ({ status, attributedTo }) => {\n      if (\n        attributedTo\n        && attributedTo.user\n        && attributedTo.user._id === Meteor.userId()\n      ) {\n        switch (status) {\n        case PROMOTION_LOT_STATUS.BOOKED:\n          return PROMOTION_LOT_REDUCED_STATUS.BOOKED_FOR_ME;\n        case PROMOTION_LOT_STATUS.SOLD:\n          return PROMOTION_LOT_REDUCED_STATUS.SOLD_TO_ME;\n        default:\n          return status;\n        }\n      }\n      if (status === PROMOTION_LOT_STATUS.BOOKED) {\n        return PROMOTION_LOT_REDUCED_STATUS.NOT_AVAILABLE;\n      }\n      return status;\n    },\n  },\n});\n","import SimpleSchema from 'simpl-schema';\nimport { createdAt, updatedAt } from '../../helpers/sharedSchemas';\nimport { PROMOTION_OPTION_SOLVENCY } from '../promotionOptionConstants';\n\nconst PromotionOptionSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  promotionLotLinks: { type: Array, defaultValue: [] },\n  'promotionLotLinks.$': Object,\n  'promotionLotLinks.$._id': { type: String, optional: true },\n  lotLinks: { type: Array, optional: true },\n  'lotLinks.$': Object,\n  'lotLinks.$._id': { type: String, optional: true },\n  custom: {\n    type: String,\n    optional: true,\n  },\n  solvency: {\n    type: String,\n    allowedValues: Object.values(PROMOTION_OPTION_SOLVENCY),\n    defaultValue: PROMOTION_OPTION_SOLVENCY.UNDETERMINED,\n    uniforms: { displayEmpty: false },\n  },\n});\n\nexport default PromotionOptionSchema;\n","export * from './methodDefinitions';\nexport { default } from './promotionOptions';\n","import PromotionOptions from '.';\n\nimport { PromotionLots, Lots, Loans } from '..';\n\nPromotionOptions.addLinks({\n  promotionLots: {\n    field: 'promotionLotLinks',\n    collection: PromotionLots,\n    type: 'many',\n    metadata: true,\n  },\n  lots: {\n    field: 'lotLinks',\n    collection: Lots,\n    type: 'many',\n    metadata: true,\n  },\n  loan: {\n    collection: Loans,\n    inversedBy: 'promotionOptions',\n  },\n});\n","import { Match } from 'meteor/check';\nimport { Method } from '../methods/methods';\n\nexport const promotionOptionInsert = new Method({\n  name: 'promotionOptionInsert',\n  params: {\n    promotionLotId: String,\n    loanId: String,\n  },\n});\n\nexport const promotionOptionRemove = new Method({\n  name: 'promotionOptionRemove',\n  params: {\n    promotionOptionId: String,\n  },\n});\n\nexport const promotionOptionUpdate = new Method({\n  name: 'promotionOptionUpdate',\n  params: {\n    promotionOptionId: String,\n    object: Object,\n  },\n});\n\nexport const increaseOptionPriority = new Method({\n  name: 'increaseOptionPriority',\n  params: { promotionOptionId: String },\n});\n\nexport const reducePriorityOrder = new Method({\n  name: 'reducePriorityOrder',\n  params: { promotionOptionId: String },\n});\n","export const PROMOTION_OPTIONS_COLLECTION = 'promotionOptions';\n\nexport const PROMOTION_OPTION_QUERIES = {\n  APP_PROMOTION_OPTION: 'APP_PROMOTION_OPTION',\n  PRO_PROMOTION_OPTIONS: 'PRO_PROMOTION_OPTIONS',\n};\n\nexport const PROMOTION_OPTION_SOLVENCY = {\n  UNDETERMINED: 'UNDETERMINED',\n  SOLVENT: 'SOLVENT',\n  INSOLVENT: 'INSOLVENT',\n};\n","import { Mongo } from 'meteor/mongo';\n\nimport PromotionOptionSchema from './schemas/PromotionOptionSchema';\nimport { PROMOTION_OPTIONS_COLLECTION } from './promotionOptionConstants';\n\nconst PromotionOptions = new Mongo.Collection(PROMOTION_OPTIONS_COLLECTION);\n\nPromotionOptions.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true,\n});\n\nPromotionOptions.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false,\n});\n\nPromotionOptions.attachSchema(PromotionOptionSchema);\nexport default PromotionOptions;\n","import { Meteor } from 'meteor/meteor';\nimport PromotionOptions from '.';\n\nPromotionOptions.addReducers({\n  promotion: {\n    body: {\n      promotionLots: {\n        promotion: {\n          name: 1,\n          address1: 1,\n          address2: 1,\n          zipCode: 1,\n          canton: 1,\n          city: 1,\n        },\n      },\n    },\n    reduce: ({ promotionLots = [] }) =>\n      (promotionLots.length > 0 ? promotionLots[0].promotion : {}),\n  },\n  name: {\n    body: { promotionLots: { name: 1 } },\n    reduce: ({ promotionLots = [] }) =>\n      (promotionLots.length > 0 ? promotionLots[0].name : ''),\n  },\n  value: {\n    body: { promotionLots: { value: 1 } },\n    reduce: ({ promotionLots = [] }) => {\n      if (promotionLots.length === 0) {\n        return 0;\n      }\n      const { value } = promotionLots[0];\n      return value;\n    },\n  },\n  priority: {\n    body: { loan: { promotionLinks: 1 } },\n    reduce: ({ loan, _id: promotionOptionId }) => {\n      const { promotionLinks } = loan;\n      if (promotionLinks && promotionLinks.length > 0) {\n        return promotionLinks[0].priorityOrder.findIndex(id => id === promotionOptionId);\n      }\n      return null;\n    },\n  },\n  attributedToMe: {\n    body: { promotionLots: { attributedTo: { userId: 1 } } },\n    reduce: ({ promotionLots = [] }) =>\n      !!(\n        promotionLots[0]\n        && promotionLots[0].attributedTo\n        && promotionLots[0].attributedTo.userId === Meteor.userId()\n      ),\n  },\n  canton: {\n    body: { promotionLots: { promotion: { canton: 1 } } },\n    reduce: ({ promotionLots = [] }) =>\n      (promotionLots.length > 0 ? promotionLots[0].promotion.canton : undefined),\n  },\n});\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\nimport {\n  PROMOTION_TYPES,\n  PROMOTION_STATUS,\n  PROMOTION_PERMISSIONS,\n} from '../promotionConstants';\nimport {\n  address,\n  contactsSchema,\n  userLinksSchema,\n  createdAt,\n  updatedAt,\n  documentsField,\n  percentageField,\n  dateField,\n} from '../../helpers/sharedSchemas';\n\nconst SCHEMA_BOOLEAN = { type: Boolean, optional: true, defaultValue: false };\n\nexport const promotionPermissionsSchema = {\n  canAddLots: SCHEMA_BOOLEAN,\n  canModifyLots: SCHEMA_BOOLEAN,\n  canRemoveLots: SCHEMA_BOOLEAN,\n  canModifyPromotion: SCHEMA_BOOLEAN,\n  canManageDocuments: SCHEMA_BOOLEAN,\n  displayCustomerNames: {\n    type: SimpleSchema.oneOf(Boolean, Object),\n    optional: true,\n    autoValue() {\n      if (Meteor.isServer && this.isSet) {\n        if (this.value === undefined) {\n          return false;\n        }\n\n        if (this.value instanceof Object) {\n          if (!Object.keys(this.value).length) {\n            return false;\n          }\n\n          if (!this.value.invitedBy) {\n            return false;\n          }\n        }\n\n        return this.value;\n      }\n    },\n  },\n  'displayCustomerNames.forLotStatus': {\n    type: Array,\n    optional: true,\n    defaultValue: [],\n    uniforms: { displayEmpty: false, placeholder: '', checkboxes: true },\n  },\n  'displayCustomerNames.forLotStatus.$': {\n    type: String,\n    allowedValues: Object.values(PROMOTION_PERMISSIONS.DISPLAY_CUSTOMER_NAMES.FOR_LOT_STATUS),\n  },\n  'displayCustomerNames.invitedBy': {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(PROMOTION_PERMISSIONS.DISPLAY_CUSTOMER_NAMES.INVITED_BY),\n    uniforms: { displayEmpty: false, placeholder: '' },\n  },\n  canInviteCustomers: SCHEMA_BOOLEAN,\n  canBookLots: SCHEMA_BOOLEAN,\n  // canPreBookLots: SCHEMA_BOOLEAN,\n  canSellLots: SCHEMA_BOOLEAN,\n};\n\nconst PromotionSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  name: { type: String, uniforms: { placeholder: 'Les Terrasses de Versoix' } },\n  type: {\n    type: String,\n    allowedValues: Object.values(PROMOTION_TYPES),\n    uniforms: { displayEmpty: false },\n  },\n  status: {\n    type: String,\n    allowedValues: Object.values(PROMOTION_STATUS),\n    defaultValue: PROMOTION_STATUS.PREPARATION,\n    uniforms: { displayEmpty: false },\n  },\n  ...address,\n  ...contactsSchema,\n  propertyLinks: { type: Array, defaultValue: [] },\n  'propertyLinks.$': Object,\n  'propertyLinks.$._id': { type: String, optional: true },\n  lotLinks: { type: Array, defaultValue: [] },\n  'lotLinks.$': Object,\n  'lotLinks.$._id': { type: String, optional: true },\n  promotionLotLinks: { type: Array, defaultValue: [] },\n  'promotionLotLinks.$': Object,\n  'promotionLotLinks.$._id': { type: String, optional: true },\n  assignedEmployeeId: { type: String, optional: true },\n  ...userLinksSchema(promotionPermissionsSchema),\n  documents: documentsField,\n  lenderOrganisationLink: { type: Object, optional: true },\n  'lenderOrganisationLink._id': { type: String, optional: true },\n  constructionTimeline: { type: Array, defaultValue: [] },\n  'constructionTimeline.$': Object,\n  'constructionTimeline.$.description': String,\n  'constructionTimeline.$.duration': Number,\n  'constructionTimeline.$.percent': { ...percentageField, optional: false },\n  signingDate: dateField,\n});\n\nexport const BasePromotionSchema = PromotionSchema.pick(\n  'name',\n  'type',\n  'address1',\n  'address2',\n  'zipCode',\n  'city',\n  'contacts',\n);\n\nexport default PromotionSchema;\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport {\n  shouldAnonymize,\n  getPromotionCustomerOwnerType,\n} from '../promotionClientHelpers';\nimport { PROMOTION_INVITED_BY_TYPE } from '../promotionConstants';\nimport { PROMOTION_LOT_STATUS } from '../../promotionLots/promotionLotConstants';\n\ndescribe('promotionClientHelpers', () => {\n  context('shouldAnonymize', () => {\n    it('returns true if user cannot view the promotion', () => {\n      expect(shouldAnonymize({ permissions: {} })).to.equal(true);\n    });\n\n    it('returns true if user cannot see customers', () => {\n      expect(shouldAnonymize({\n        permissions: { displayCustomerNames: false },\n      })).to.equal(true);\n    });\n\n    it('returns true if customer is invited by nobody', () => {\n      const currentUser = { _id: 'bob' };\n      const customerOwnerType = getPromotionCustomerOwnerType({\n        currentUser,\n      });\n      expect(shouldAnonymize({\n        customerOwnerType,\n        permissions: {},\n      })).to.equal(true);\n    });\n\n    it('returns true if lot status is not in permissions', () => {\n      const currentUser = { _id: 'bob' };\n      const invitedBy = 'bob';\n      const customerOwnerType = getPromotionCustomerOwnerType({\n        currentUser,\n        invitedBy,\n      });\n      expect(shouldAnonymize({\n        customerOwnerType,\n        permissions: {\n          displayCustomerNames: {\n            invitedBy: PROMOTION_INVITED_BY_TYPE.ANY,\n            forLotStatus: [PROMOTION_LOT_STATUS.AVAILABLE],\n          },\n        },\n        promotionLotStatus: PROMOTION_LOT_STATUS.BOOKED,\n      })).to.equal(true);\n    });\n\n    it('returns true if lot status is in permissions and belongs to owner, but not attributed', () => {\n      const currentUser = { _id: 'bob' };\n      const invitedBy = 'bob';\n      const customerOwnerType = getPromotionCustomerOwnerType({\n        currentUser,\n        invitedBy,\n      });\n      expect(shouldAnonymize({\n        customerOwnerType,\n        permissions: {\n          displayCustomerNames: {\n            invitedBy: PROMOTION_INVITED_BY_TYPE.USER,\n            forLotStatus: [\n              PROMOTION_LOT_STATUS.AVAILABLE,\n              PROMOTION_LOT_STATUS.BOOKED,\n            ],\n          },\n        },\n        promotionLotStatus: PROMOTION_LOT_STATUS.BOOKED,\n        isAttributed: false,\n      })).to.equal(true);\n    });\n\n    it('returns false if lot status is in permissions and belongs to owner', () => {\n      const currentUser = { _id: 'bob' };\n      const invitedBy = 'bob';\n      const customerOwnerType = getPromotionCustomerOwnerType({\n        currentUser,\n        invitedBy,\n      });\n      expect(shouldAnonymize({\n        customerOwnerType,\n        permissions: {\n          displayCustomerNames: {\n            invitedBy: PROMOTION_INVITED_BY_TYPE.USER,\n            forLotStatus: [\n              PROMOTION_LOT_STATUS.AVAILABLE,\n              PROMOTION_LOT_STATUS.BOOKED,\n            ],\n          },\n        },\n        promotionLotStatus: PROMOTION_LOT_STATUS.BOOKED,\n        isAttributed: true,\n      })).to.equal(false);\n    });\n\n    it('returns true if lot status is undefined', () => {\n      const currentUser = { _id: 'bob' };\n      const invitedBy = 'bob';\n      const customerOwnerType = getPromotionCustomerOwnerType({\n        currentUser,\n        invitedBy,\n      });\n      expect(shouldAnonymize({\n        customerOwnerType,\n        permissions: {\n          displayCustomerNames: {\n            invitedBy: PROMOTION_INVITED_BY_TYPE.USER,\n            forLotStatus: [\n              PROMOTION_LOT_STATUS.BOOKED,\n              PROMOTION_LOT_STATUS.SOLD,\n            ],\n          },\n        },\n      })).to.equal(true);\n    });\n\n    it('returns true if customer is not invited by current user', () => {\n      const currentUser = { _id: 'bob' };\n      const invitedBy = 'john';\n      const customerOwnerType = getPromotionCustomerOwnerType({\n        currentUser,\n        invitedBy,\n      });\n      expect(shouldAnonymize({\n        customerOwnerType,\n        permissions: {\n          displayCustomerNames: {\n            invitedBy: PROMOTION_INVITED_BY_TYPE.USER,\n          },\n        },\n      })).to.equal(true);\n    });\n\n    it('returns true if customer is not invited by current user organisation member', () => {\n      const currentUser = {\n        _id: 'bob',\n        organisations: [{ users: [{ _id: 'bob' }, { _id: 'dylan' }] }],\n      };\n      const invitedBy = 'john';\n      const customerOwnerType = getPromotionCustomerOwnerType({\n        currentUser,\n        invitedBy,\n      });\n      expect(shouldAnonymize({\n        customerOwnerType,\n        permissions: {\n          displayCustomerNames: {\n            invitedBy: PROMOTION_INVITED_BY_TYPE.ORGANISATION,\n          },\n        },\n      })).to.equal(true);\n    });\n\n    it('returns false if customer is invited by current user organisation member', () => {\n      const currentUser = {\n        _id: 'bob',\n        organisations: [\n          { users: [{ _id: 'bob' }, { _id: 'dylan' }] },\n          { users: [{ _id: 'bob' }, { _id: 'john' }] },\n        ],\n      };\n      const invitedBy = 'john';\n      const customerOwnerType = getPromotionCustomerOwnerType({\n        currentUser,\n        invitedBy,\n      });\n      expect(shouldAnonymize({\n        customerOwnerType,\n        permissions: {\n          displayCustomerNames: {\n            invitedBy: PROMOTION_INVITED_BY_TYPE.ORGANISATION,\n            forLotStatus: [PROMOTION_LOT_STATUS.AVAILABLE],\n          },\n        },\n      })).to.equal(false);\n    });\n\n    it('returns true if current user has no organisation', () => {\n      const currentUser = { _id: 'bob' };\n      const invitedBy = 'john';\n      const customerOwnerType = getPromotionCustomerOwnerType({\n        currentUser,\n        invitedBy,\n      });\n      expect(shouldAnonymize({\n        customerOwnerType,\n        permissions: {\n          displayCustomerNames: {\n            invitedBy: PROMOTION_INVITED_BY_TYPE.ORGANISATION,\n          },\n        },\n      })).to.equal(true);\n    });\n  });\n});\n","export * from './methodDefinitions';\nexport { default } from './promotions';\n","import Promotions from '.';\n\nimport {\n  Properties,\n  Lots,\n  PromotionLots,\n  Users,\n  Loans,\n  Organisations,\n} from '..';\nimport Tasks from '../tasks';\n\nPromotions.addLinks({\n  properties: {\n    field: 'propertyLinks',\n    collection: Properties,\n    type: 'many',\n    metadata: true,\n    autoremove: true,\n    unique: true,\n  },\n  lots: {\n    field: 'lotLinks',\n    collection: Lots,\n    type: 'many',\n    metadata: true,\n    autoremove: true,\n    unique: true,\n  },\n  promotionLots: {\n    field: 'promotionLotLinks',\n    collection: PromotionLots,\n    type: 'many',\n    metadata: true,\n    autoremove: true,\n    unique: true,\n  },\n  users: {\n    field: 'userLinks',\n    collection: Users,\n    type: 'many',\n    metadata: true,\n  },\n  loans: {\n    collection: Loans,\n    inversedBy: 'promotions',\n  },\n  assignedEmployee: {\n    collection: Users,\n    field: 'assignedEmployeeId',\n    type: 'one',\n  },\n  lenderOrganisation: {\n    field: 'lenderOrganisationLink',\n    type: 'one',\n    metadata: true,\n    collection: Organisations,\n  },\n  tasks: {\n    inversedBy: 'promotion',\n    collection: Tasks,\n    autoremove: true,\n  },\n  promotionLoan: {\n    inversedBy: 'financedPromotion',\n    type: 'one',\n    collection: Loans,\n  },\n});\n","// @flow\nimport { Match } from 'meteor/check';\nimport { Method } from '../methods/methods';\n\nexport const promotionInsert = new Method({\n  name: 'promotionInsert',\n  params: {\n    promotion: Object,\n  },\n});\n\nexport const promotionUpdate = new Method({\n  name: 'promotionUpdate',\n  params: {\n    promotionId: String,\n    object: Object,\n  },\n});\n\nexport const promotionRemove = new Method({\n  name: 'promotionRemove',\n  params: {\n    promotionId: String,\n  },\n});\n\nexport const insertPromotionProperty = new Method({\n  name: 'insertPromotionProperty',\n  params: {\n    promotionId: String,\n    property: Object,\n  },\n});\n\nexport const setPromotionUserPermissions = new Method({\n  name: 'setPromotionUserPermissions',\n  params: {\n    promotionId: String,\n    userId: String,\n    permissions: Object,\n  },\n});\n\nexport const addProUserToPromotion = new Method({\n  name: 'addProUserToPromotion',\n  params: {\n    promotionId: String,\n    userId: String,\n  },\n});\n\nexport const removeProFromPromotion = new Method({\n  name: 'removeProFromPromotion',\n  params: {\n    promotionId: String,\n    userId: String,\n  },\n});\n\nexport const sendPromotionInvitationEmail = new Method({\n  name: 'sendPromotionInvitationEmail',\n  params: {\n    userId: String,\n    email: String,\n    isNewUser: Boolean,\n    promotionId: String,\n    firstName: String,\n  },\n});\n\nexport const removeLoanFromPromotion = new Method({\n  name: 'removeLoanFromPromotion',\n  params: {\n    promotionId: String,\n    loanId: String,\n  },\n});\n\nexport const editPromotionLoan = new Method({\n  name: 'editPromotionLoan',\n  params: {\n    promotionId: String,\n    loanId: String,\n    promotionLotIds: [String],\n    showAllLots: Match.Optional(Boolean),\n  },\n});\n","import { PROMOTION_INVITED_BY_TYPE } from './promotionConstants';\nimport { PROMOTION_LOT_STATUS } from '../promotionLots/promotionLotConstants';\n\nexport const getCurrentUserPermissionsForPromotion = ({\n  currentUser: { promotions = [] } = {},\n  promotionId,\n}) => {\n  const promotion = promotions.find(({ _id }) => _id === promotionId);\n  return promotion && promotion.$metadata.permissions;\n};\n\nexport const getPromotionCustomerOwnerType = ({ invitedBy, currentUser }) => {\n  const { _id: userId, organisations = [] } = currentUser;\n\n  // Is invited by nobody\n  if (!invitedBy) {\n    return null;\n  }\n\n  // Is invited by user\n  if (invitedBy === userId) {\n    return PROMOTION_INVITED_BY_TYPE.USER;\n  }\n\n  const organisationUserIds = organisations.reduce(\n    (userIds, { users = [] }) => [...userIds, ...users.map(({ _id }) => _id)],\n    [],\n  );\n\n  // Is invited by organisation\n  if (organisationUserIds.includes(invitedBy)) {\n    return PROMOTION_INVITED_BY_TYPE.ORGANISATION;\n  }\n\n  // Is invited by someone else\n  return PROMOTION_INVITED_BY_TYPE.ANY;\n};\n\nexport const clientGetBestPromotionLotStatus = (promotionOptions, loanId) => {\n  const myPromotionLotStatuses = promotionOptions\n    .reduce((arr, { promotionLots }) => [...arr, ...promotionLots], [])\n    .filter(({ attributedToLink = {} }) => attributedToLink._id === loanId)\n    .map(({ status }) => status);\n\n  if (myPromotionLotStatuses.indexOf(PROMOTION_LOT_STATUS.SOLD) >= 0) {\n    return PROMOTION_LOT_STATUS.SOLD;\n  }\n  if (myPromotionLotStatuses.indexOf(PROMOTION_LOT_STATUS.BOOKED) >= 0) {\n    return PROMOTION_LOT_STATUS.BOOKED;\n  }\n  if (myPromotionLotStatuses.indexOf(PROMOTION_LOT_STATUS.AVAILABLE) >= 0) {\n    return PROMOTION_LOT_STATUS.AVAILABLE;\n  }\n\n  // return undefined if no promotion lots are attributed to this user\n};\n\nconst shouldHideForLotStatus = (\n  { forLotStatus = [] },\n  promotionLotStatus,\n  isAttributed,\n) => {\n  if (\n    promotionLotStatus === PROMOTION_LOT_STATUS.AVAILABLE\n    && forLotStatus.includes(promotionLotStatus)\n  ) {\n    return false;\n  }\n\n  // For status BOOKED and SOLD, we check that it is attributed\n  if (forLotStatus.includes(promotionLotStatus) && isAttributed) {\n    return false;\n  }\n\n  return true;\n};\n\nexport const shouldAnonymize = ({\n  customerOwnerType,\n  permissions,\n  promotionLotStatus = PROMOTION_LOT_STATUS.AVAILABLE,\n  isAttributed,\n}) => {\n  const { displayCustomerNames } = permissions;\n\n  if (displayCustomerNames === false || !customerOwnerType) {\n    return true;\n  }\n\n  const shouldHide = shouldHideForLotStatus(\n    displayCustomerNames,\n    promotionLotStatus,\n    isAttributed,\n  );\n\n  if (displayCustomerNames.invitedBy === PROMOTION_INVITED_BY_TYPE.ANY) {\n    return shouldHide;\n  }\n\n  switch (customerOwnerType) {\n  case PROMOTION_INVITED_BY_TYPE.USER:\n    return (\n      shouldHide\n        || ![\n          PROMOTION_INVITED_BY_TYPE.USER,\n          PROMOTION_INVITED_BY_TYPE.ORGANISATION,\n        ].includes(displayCustomerNames.invitedBy)\n    );\n  case PROMOTION_INVITED_BY_TYPE.ORGANISATION:\n    return (\n      shouldHide\n        || displayCustomerNames.invitedBy\n          !== PROMOTION_INVITED_BY_TYPE.ORGANISATION\n    );\n  default:\n    return true;\n  }\n};\n","import merge from 'lodash/merge';\nimport { PROMOTION_LOT_STATUS } from '../promotionLots/promotionLotConstants';\n\nexport const PROMOTIONS_COLLECTION = 'promotions';\n\nexport const PROMOTION_TYPES = {\n  CREDIT: 'CREDIT',\n  SHARE: 'SHARE',\n};\n\nexport const PROMOTION_STATUS = {\n  CANCELLED: 'CANCELLED',\n  FINISHED: 'FINISHED',\n  OPEN: 'OPEN',\n  PREPARATION: 'PREPARATION',\n};\n\nexport const PROMOTION_QUERIES = {\n  ADMIN_PROMOTIONS: 'ADMIN_PROMOTIONS',\n  APP_PROMOTION: 'APP_PROMOTION',\n  PRO_PROMOTION: 'PRO_PROMOTION',\n  PRO_PROMOTIONS: 'PRO_PROMOTIONS',\n  PRO_PROMOTION_USERS: 'PRO_PROMOTION_USERS',\n  PROMOTION_FILES: 'PROMOTION_FILES',\n  PROMOTION_SEARCH: 'PROMOTION_SEARCH',\n  PRO_PROMOTION_SIMPLE: 'PRO_PROMOTION_SIMPLE',\n};\n\nexport const PROMOTION_INVITED_BY_TYPE = {\n  ANY: 'ANY',\n  USER: 'USER',\n  ORGANISATION: 'ORGANISATION',\n};\n\nexport const PROMOTION_PERMISSIONS = {\n  DISPLAY_CUSTOMER_NAMES: {\n    FOR_LOT_STATUS: { ...PROMOTION_LOT_STATUS },\n    INVITED_BY: { ...PROMOTION_INVITED_BY_TYPE },\n  },\n};\n\nexport const PROMOTION_PERMISSIONS_BUNDLES = {\n  INVITATION: settings => ({\n    canInviteCustomers: true,\n    displayCustomerNames: {\n      forLotStatus: Object.values(PROMOTION_PERMISSIONS.DISPLAY_CUSTOMER_NAMES.FOR_LOT_STATUS),\n      invitedBy:\n        PROMOTION_PERMISSIONS.DISPLAY_CUSTOMER_NAMES.INVITED_BY.ORGANISATION,\n    },\n  }),\n  CONSULTATION: ({ consultation = {} } = {}) => {\n    const {\n      forLotStatus = [],\n      invitedBy = PROMOTION_PERMISSIONS.DISPLAY_CUSTOMER_NAMES.INVITED_BY.ANY,\n    } = consultation;\n    return {\n      displayCustomerNames: { forLotStatus, invitedBy },\n    };\n  },\n  MODIFICATION: settings => ({\n    canAddLots: true,\n    canModifyLots: true,\n    canRemoveLots: true,\n    canModifyPromotion: true,\n    canManageDocuments: true,\n  }),\n  BOOKING: settings => ({ canBookLots: true }),\n  SELLING: settings => ({ canSellLots: true }),\n};\n\nexport const PROMOTION_PERMISSIONS_FULL_ACCESS = () => {\n  const settings = {\n    consultation: {\n      forLotStatus: Object.values(PROMOTION_PERMISSIONS.DISPLAY_CUSTOMER_NAMES.FOR_LOT_STATUS),\n      invitedBy: PROMOTION_PERMISSIONS.DISPLAY_CUSTOMER_NAMES.INVITED_BY.ANY,\n    },\n  };\n\n  return Object.keys(PROMOTION_PERMISSIONS_BUNDLES).reduce(\n    (bundles, bundle) =>\n      merge({}, bundles, PROMOTION_PERMISSIONS_BUNDLES[bundle](settings)),\n    {},\n  );\n};\n","import { Mongo } from 'meteor/mongo';\n\nimport PromotionSchema from './schemas/PromotionSchema';\nimport { PROMOTIONS_COLLECTION } from './promotionConstants';\n\nconst Promotions = new Mongo.Collection(PROMOTIONS_COLLECTION);\n\nPromotions.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true,\n});\n\nPromotions.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false,\n});\n\nPromotions.attachSchema(PromotionSchema);\nexport default Promotions;\n","import {\n  adminPromotions as adminPromotionsFragment,\n  proPromotion,\n  searchPromotions,\n} from '../fragments';\nimport { PROMOTION_QUERIES } from './promotionConstants';\nimport Promotions from '.';\n\nexport const adminPromotions = Promotions.createQuery(\n  PROMOTION_QUERIES.ADMIN_PROMOTIONS,\n  adminPromotionsFragment(),\n);\n\nexport const appPromotion = Promotions.createQuery(\n  PROMOTION_QUERIES.APP_PROMOTION,\n  proPromotion({ withFilteredLoan: true }),\n);\n\nexport const promotionSearch = Promotions.createQuery(\n  PROMOTION_QUERIES.PROMOTION_SEARCH,\n  {\n    ...searchPromotions(),\n    $options: { sort: { createdAt: -1 }, limit: 5 },\n  },\n);\n\nexport const proPromotions = Promotions.createQuery(\n  PROMOTION_QUERIES.PRO_PROMOTIONS,\n  proPromotion(),\n);\n\nexport const proPromotionUsers = Promotions.createQuery(\n  PROMOTION_QUERIES.PRO_PROMOTION_USERS,\n  {\n    users: {\n      name: 1,\n      organisations: { name: 1, users: { _id: 1 } },\n    },\n  },\n);\n","import { PROMOTION_LOT_STATUS } from '../constants';\nimport addressReducer from '../reducers/addressReducer';\nimport Promotions from '.';\n\nconst promotionLotStatusReducer = status => ({\n  body: {\n    promotionLots: { status: 1 },\n  },\n  reduce: ({ promotionLots = [] }) =>\n    promotionLots.filter(({ status: promotionLotStatus }) => status === promotionLotStatus),\n});\n\nPromotions.addReducers({\n  ...addressReducer,\n  soldPromotionLots: promotionLotStatusReducer(PROMOTION_LOT_STATUS.SOLD),\n  bookedPromotionLots: promotionLotStatusReducer(PROMOTION_LOT_STATUS.BOOKED),\n  availablePromotionLots: promotionLotStatusReducer(PROMOTION_LOT_STATUS.AVAILABLE),\n});\n","import { Meteor } from 'meteor/meteor';\nimport SimpleSchema from 'simpl-schema';\n\nimport {\n  createdAt,\n  updatedAt,\n  additionalDocuments,\n  address,\n  mortgageNoteLinks,\n  moneyField,\n  userLinksSchema,\n  documentsField,\n  cacheField,\n} from '../../helpers/sharedSchemas';\nimport * as propertyConstants from '../propertyConstants';\nimport { initialDocuments } from '../propertiesAdditionalDocuments';\n\nconst SCHEMA_BOOLEAN = { type: Boolean, optional: true, defaultValue: false };\n\nexport const propertyPermissionsSchema = {\n  canInviteCustomers: SCHEMA_BOOLEAN,\n  canInviteProUsers: SCHEMA_BOOLEAN,\n  canModifyProperty: SCHEMA_BOOLEAN,\n  canManagePermissions: SCHEMA_BOOLEAN,\n  canSellProperty: SCHEMA_BOOLEAN,\n  canBookProperty: SCHEMA_BOOLEAN,\n  displayCustomerNames: {\n    type: SimpleSchema.oneOf(Boolean, Object),\n    optional: true,\n    autoValue() {\n      if (Meteor.isServer && this.isSet) {\n        if (this.value === undefined) {\n          return false;\n        }\n\n        if (this.value instanceof Object) {\n          if (!Object.keys(this.value).length) {\n            return false;\n          }\n\n          if (!this.value.referredBy) {\n            return false;\n          }\n        }\n\n        return this.value;\n      }\n    },\n  },\n  'displayCustomerNames.referredBy': {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(propertyConstants.PROPERTY_PERMISSIONS.DISPLAY_CUSTOMER_NAMES.REFERRED_BY),\n    uniforms: {\n      displayEmpty: true,\n      placeholder: 'Ne pas afficher le nom des clients',\n    },\n  },\n  'displayCustomerNames.forPropertyStatus': {\n    type: Array,\n    optional: true,\n    defaultValue: [],\n    uniforms: { displayEmpty: false, placeholder: '', checkboxes: true },\n    condition: ({ permissions: { displayCustomerNames = {} } }) => {\n      const { referredBy } = displayCustomerNames;\n      return !!referredBy;\n    },\n  },\n  'displayCustomerNames.forPropertyStatus.$': {\n    type: String,\n    allowedValues: Object.values(propertyConstants.PROPERTY_PERMISSIONS.DISPLAY_CUSTOMER_NAMES\n      .FOR_PROPERTY_STATUS),\n  },\n};\n\nexport const PropertySchema = new SimpleSchema({\n  userId: {\n    type: String,\n    optional: true,\n  },\n  createdAt,\n  updatedAt,\n  name: {\n    type: String,\n    optional: true,\n    uniforms: { placeholder: null },\n  },\n  description: {\n    type: String,\n    optional: true,\n    uniforms: { placeholder: null, multiline: true, rows: 5, rowsMax: 15 },\n  },\n  category: {\n    type: String,\n    optional: true,\n    defaultValue: propertyConstants.PROPERTY_CATEGORY.USER,\n    allowedValues: Object.values(propertyConstants.PROPERTY_CATEGORY),\n    uniforms: { placeholder: null },\n  },\n  value: moneyField,\n  status: {\n    type: String,\n    defaultValue: propertyConstants.PROPERTY_STATUS.FOR_SALE,\n    allowedValues: Object.values(propertyConstants.PROPERTY_STATUS),\n    uniforms: { placeholder: null },\n  },\n  propertyType: {\n    type: String,\n    optional: true,\n    defaultValue: propertyConstants.PROPERTY_TYPE.FLAT,\n    allowedValues: Object.values(propertyConstants.PROPERTY_TYPE),\n    uniforms: { placeholder: null },\n  },\n  houseType: {\n    type: String,\n    optional: true,\n    defaultValue: propertyConstants.HOUSE_TYPE.DETACHED,\n    allowedValues: Object.values(propertyConstants.HOUSE_TYPE),\n    uniforms: { placeholder: null },\n    condition: ({ propertyType }) =>\n      propertyType === propertyConstants.PROPERTY_TYPE.HOUSE,\n  },\n  flatType: {\n    type: String,\n    optional: true,\n    defaultValue: propertyConstants.FLAT_TYPE.SINGLE_FLOOR_APARTMENT,\n    allowedValues: Object.values(propertyConstants.FLAT_TYPE),\n    uniforms: { placeholder: null },\n    condition: ({ propertyType }) =>\n      propertyType === propertyConstants.PROPERTY_TYPE.FLAT,\n  },\n  investmentRent: {\n    // Rent of property if investment\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0,\n    max: 100000000,\n  },\n  ...address,\n  constructionYear: {\n    type: SimpleSchema.Integer,\n    min: 0,\n    max: 2030,\n    optional: true,\n  },\n  renovationYear: {\n    type: SimpleSchema.Integer,\n    min: 0,\n    max: 2030,\n    optional: true,\n  },\n  insideArea: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0,\n  },\n  areaNorm: {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(propertyConstants.AREA_NORM),\n    defaultValue: propertyConstants.AREA_NORM.NIA,\n    uniforms: { placeholder: null },\n  },\n  landArea: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0,\n  },\n  terraceArea: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0,\n  },\n  gardenArea: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0,\n  },\n  numberOfFloors: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0,\n    max: 20,\n  },\n  floorNumber: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0,\n    max: 20,\n  },\n  roomCount: {\n    type: Number,\n    optional: true,\n    min: 0,\n    max: 100,\n  },\n  bathroomCount: {\n    type: Number,\n    optional: true,\n    min: 0,\n    max: 100,\n  },\n  volume: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0,\n    max: 100000,\n  },\n  volumeNorm: {\n    type: String,\n    defaultValue: propertyConstants.VOLUME_NORM.SIA_416,\n    allowedValues: Object.values(propertyConstants.VOLUME_NORM),\n    uniforms: { placeholder: null },\n  },\n  parkingInside: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0,\n    max: 100,\n  },\n  parkingOutside: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 0,\n    max: 100,\n  },\n  minergie: {\n    type: String,\n    defaultValue: propertyConstants.MINERGIE_CERTIFICATE.WITHOUT_CERTIFICATE,\n    allowedValues: Object.values(propertyConstants.MINERGIE_CERTIFICATE),\n    uniforms: { placeholder: null },\n  },\n  isCoproperty: {\n    type: Boolean,\n    defaultValue: false,\n  },\n  copropertyPercentage: {\n    type: SimpleSchema.Integer,\n    min: 0,\n    max: 1000,\n    optional: true,\n  },\n  isNew: {\n    type: Boolean,\n    defaultValue: false,\n  },\n  latitude: {\n    type: Number,\n    optional: true,\n    min: -90,\n    max: 90,\n  },\n  longitude: {\n    type: Number,\n    optional: true,\n    min: -180,\n    max: 180,\n  },\n  adminValidation: { type: Object, defaultValue: {}, blackbox: true },\n  yearlyExpenses: moneyField,\n  landValue: moneyField,\n  constructionValue: moneyField,\n  additionalMargin: moneyField,\n  ...additionalDocuments(initialDocuments),\n  ...mortgageNoteLinks,\n  ...userLinksSchema(propertyPermissionsSchema),\n  externalId: {\n    type: String,\n    optional: true,\n  },\n  useOpenGraph: {\n    type: Boolean,\n    optional: true,\n    condition: ({ externalUrl }) => externalUrl,\n  },\n  externalUrl: {\n    type: String,\n    regEx: SimpleSchema.RegEx.Url,\n    optional: true,\n  },\n  imageUrls: {\n    type: Array,\n    optional: true,\n    defaultValue: [],\n  },\n  'imageUrls.$': {\n    type: String,\n    regEx: SimpleSchema.RegEx.Url,\n  },\n  documents: documentsField,\n  loanCount: { type: Number, optional: true },\n});\n\nconst protectedKeys = [\n  '_id',\n  'additionalDocuments',\n  'address',\n  'adminValidation',\n  'createdAt',\n  'latitude',\n  'longitude',\n  'mortgageNoteLinks',\n  'updatedAt',\n  'userId',\n  'documents',\n  'userLinks',\n];\n\nexport const userAllowedKeys = [\n  'externalId',\n  'address1',\n  'address2',\n  'zipCode',\n  'city',\n  'value',\n  'description',\n  'propertyType',\n  'flatType',\n  'houseType',\n  'roomCount',\n  'insideArea',\n  'landArea',\n  'terraceArea',\n  'gardenArea',\n  'constructionYear',\n  'externalUrl',\n  'useOpenGraph',\n  'imageUrls',\n];\n\nexport const PropertySchemaAdmin = PropertySchema.omit(...protectedKeys);\nexport default PropertySchema;\n","import * as methodDefinitions from './methodDefinitions';\n\nexport * from './methodDefinitions';\nexport { default } from './properties';\nexport const propertyMethods = methodDefinitions;\n","import Properties from './properties';\nimport { Users, Loans, Promotions, PromotionLots, MortgageNotes } from '..';\n\nProperties.addLinks({\n  user: {\n    field: 'userId',\n    collection: Users,\n    type: 'one',\n  },\n  loans: {\n    collection: Loans,\n    inversedBy: 'properties',\n  },\n  promotion: {\n    collection: Promotions,\n    inversedBy: 'properties',\n    unique: true,\n  },\n  promotionLots: {\n    collection: PromotionLots,\n    inversedBy: 'properties',\n  },\n  mortgageNotes: {\n    field: 'mortgageNoteLinks',\n    collection: MortgageNotes,\n    type: 'many',\n    metadata: true,\n    autoremove: true,\n    unique: true,\n  },\n  users: {\n    field: 'userLinks',\n    collection: Users,\n    type: 'many',\n    metadata: true,\n  },\n});\n","import { Match } from 'meteor/check';\nimport { Method } from '../methods/methods';\n\nexport const propertyInsert = new Method({\n  name: 'propertyInsert',\n  params: {\n    property: Object,\n    userId: Match.Optional(String),\n    loanId: Match.Optional(String),\n  },\n});\n\nexport const propertyUpdate = new Method({\n  name: 'propertyUpdate',\n  params: {\n    propertyId: String,\n    object: Object,\n  },\n});\n\nexport const propertyDelete = new Method({\n  name: 'propertyDelete',\n  params: {\n    propertyId: String,\n    loanId: Match.Maybe(String),\n  },\n});\n\nexport const pushPropertyValue = new Method({\n  name: 'pushPropertyValue',\n  params: {\n    propertyId: String,\n    object: Object,\n  },\n});\n\nexport const popPropertyValue = new Method({\n  name: 'popPropertyValue',\n  params: {\n    propertyId: String,\n    object: Object,\n  },\n});\n\nexport const pullPropertyValue = new Method({\n  name: 'pullPropertyValue',\n  params: {\n    propertyId: String,\n    object: Object,\n  },\n});\n\nexport const evaluateProperty = new Method({\n  name: 'evaluateProperty',\n  params: {\n    propertyId: String,\n    loanResidenceType: String,\n  },\n});\n\nexport const propertyDataIsInvalid = new Method({\n  name: 'propertyDataIsInvalid',\n  params: {\n    propertyId: String,\n    loanResidenceType: Match.Optional(String),\n  },\n});\n\nexport const addProUserToProperty = new Method({\n  name: 'addProUserToProperty',\n  params: { propertyId: String, userId: String },\n});\n\nexport const proPropertyInsert = new Method({\n  name: 'proPropertyInsert',\n  params: { userId: String, property: Object },\n});\n\nexport const setProPropertyPermissions = new Method({\n  name: 'setProPropertyPermissions',\n  params: { propertyId: String, userId: String, permissions: Object },\n});\n\nexport const removeProFromProperty = new Method({\n  name: 'removeProFromProperty',\n  params: { propertyId: String, proUserId: String },\n});\n\nexport const removeCustomerFromProperty = new Method({\n  name: 'removeCustomerFromProperty',\n  params: { propertyId: String, loanId: String },\n});\n\nexport const insertExternalProperty = new Method({\n  name: 'insertExternalProperty',\n  params: { property: Object },\n});\n","import { Mongo } from 'meteor/mongo';\nimport * as propertyConstants from './propertyConstants';\nimport PropertySchema from './schemas/PropertySchema';\n\nconst Properties = new Mongo.Collection(propertyConstants.PROPERTIES_COLLECTION);\n\n// Prevent all client side modifications of mongoDB\nProperties.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true,\n});\nProperties.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false,\n});\n\n// Attach schema\nProperties.attachSchema(PropertySchema);\nexport default Properties;\n","import { DOCUMENTS } from '../files/fileConstants';\nimport * as propertyConstants from './propertyConstants';\nimport { RESIDENCE_TYPE } from '../constants';\nimport Loans from '../loans';\n\nexport const initialDocuments = [\n  { id: DOCUMENTS.PURCHASE_CONTRACT },\n  { id: DOCUMENTS.LAND_REGISTER_EXTRACT },\n  { id: DOCUMENTS.PROPERTY_MARKETING_BROCHURE },\n  { id: DOCUMENTS.PROPERTY_PICTURES },\n  { id: DOCUMENTS.PROPERTY_PLANS },\n  { id: DOCUMENTS.FIRE_AND_WATER_INSURANCE },\n];\n\nconst getLoanResidenceType = (propertyId) => {\n  // If a property is shared among multiple loans, this may work in unexpected ways,\n  // since each of those properties could have a different residenceType\n  const loan = Loans.findOne(\n    { propertyIds: propertyId },\n    { fields: { residenceType: 1 }, sort: { createdAt: 1 } },\n  );\n  return loan && loan.residenceType;\n};\n\nexport const conditionalDocuments = [\n  {\n    id: DOCUMENTS.PROPERTY_VOLUME,\n    condition: ({ doc: { propertyType } }) =>\n      propertyType === propertyConstants.PROPERTY_TYPE.HOUSE,\n  },\n  {\n    id: DOCUMENTS.PROPERTY_MINERGIE_CERTIFICATE,\n    condition: ({ doc: { minergie } }) =>\n      minergie !== propertyConstants.MINERGIE_CERTIFICATE.WITHOUT_CERTIFICATE,\n  },\n  {\n    id: DOCUMENTS.COOWNERSHIP_AGREEMENT,\n    condition: ({ doc: { isCoproperty } }) => isCoproperty === true,\n  },\n  {\n    id: DOCUMENTS.COOWNERSHIP_ALLOCATION_AGREEMENT,\n    condition: ({ doc: { isCoproperty } }) => isCoproperty === true,\n  },\n  {\n    id: DOCUMENTS.INVESTEMENT_PROPERTY_RENTAL_STATEMENT,\n    condition: ({ doc: { _id: propertyId } }) =>\n      getLoanResidenceType(propertyId) === RESIDENCE_TYPE.INVESTMENT,\n  },\n  {\n    id: DOCUMENTS.INVESTEMENT_PROPERTY_SERVICE_CHARGE_SETTLEMENT,\n    condition: ({ doc: { _id: propertyId } }) =>\n      getLoanResidenceType(propertyId) === RESIDENCE_TYPE.INVESTMENT,\n  },\n];\n","// @flow\nexport const PROPERTIES_COLLECTION = 'properties';\n\nexport const PROPERTY_STATUS = {\n  FOR_SALE: 'FOR_SALE',\n  BOOKED: 'BOOKED',\n  SOLD: 'SOLD',\n};\n\nexport const RESIDENCE_TYPE = {\n  MAIN_RESIDENCE: 'MAIN_RESIDENCE',\n  SECOND_RESIDENCE: 'SECOND_RESIDENCE',\n  INVESTMENT: 'INVESTMENT',\n  COMMERCE: 'COMMERCE',\n};\n\nexport const PROPERTY_TYPE = {\n  FLAT: 'FLAT',\n  HOUSE: 'HOUSE',\n};\n\nexport const VOLUME_NORM = {\n  SIA_416: 'SIA_416',\n  SIA_116: 'SIA_116',\n  BIC: 'BIC',\n};\n\nexport const AREA_NORM = {\n  NIA: 'NIA',\n  NLS: 'NLS',\n};\n\nexport const PROPERTY_QUERIES = {\n  ADMIN_PROPERTIES: 'ADMIN_PROPERTIES',\n  ANONYMOUS_PROPERTY: 'ANONYMOUS_PROPERTY',\n  PRO_PROPERTIES: 'PRO_PROPERTIES',\n  PRO_PROPERTY_USERS: 'PRO_PROPERTY_USERS',\n  PROPERTY_FILES: 'PROPERTY_FILES',\n  PROPERTY_SEARCH: 'PROPERTY_SEARCH',\n  USER_PROPERTY: 'USER_PROPERTY',\n};\n\nexport const HOUSE_TYPE = {\n  DETACHED: 'DETACHED',\n  ATTACHED_END_BUILDING: 'ATTACHED_END_BUILDING',\n  ATTACHED_MID_TERRACE_BUILDING: 'ATTACHED_MID_TERRACE_BUILDING',\n};\n\nexport const FLAT_TYPE = {\n  SINGLE_FLOOR_APARTMENT: 'SINGLE_FLOOR_APARTMENT',\n  DUPLEX_APARTMENT: 'DUPLEX_APARTMENT',\n  PENTHOUSE_APARTMENT: 'PENTHOUSE_APARTMENT',\n  PENTHOUSE_MAISONETTE: 'PENTHOUSE_MAISONETTE',\n  TERRACE_APARTMENT: 'TERRACE_APARTMENT',\n};\n\nexport const MINERGIE_CERTIFICATE = {\n  WITHOUT_CERTIFICATE: 'WITHOUT_CERTIFICATE',\n  MINERGIE_P: 'MINERGIE_P',\n  MINERGIE_ECO: 'MINERGIE_ECO',\n  MINERGIE_P_ECO: 'MINERGIE_P_ECO',\n  OTHER_CERTIFICATE: 'OTHER_CERTIFICATE',\n};\n\nexport const PROPERTY_CATEGORY = {\n  USER: 'USER',\n  PRO: 'PRO',\n  PROMOTION: 'PROMOTION',\n};\n\nexport const PROPERTY_REFERRED_BY_TYPE = {\n  ANY: 'ANY',\n  USER: 'USER',\n  ORGANISATION: 'ORGANISATION',\n};\n\nexport const PROPERTY_PERMISSIONS = {\n  DISPLAY_CUSTOMER_NAMES: {\n    FOR_PROPERTY_STATUS: PROPERTY_STATUS,\n    REFERRED_BY: PROPERTY_REFERRED_BY_TYPE,\n  },\n};\n\nexport const PROPERTY_PERMISSIONS_FULL_ACCESS = {\n  canInviteCustomers: true,\n  canInviteProUsers: true,\n  canModifyProperty: true,\n  canManagePermissions: true,\n  canSellProperty: true,\n  canBookProperty: true,\n  displayCustomerNames: {\n    forPropertyStatus: Object.values(PROPERTY_STATUS),\n    referredBy: PROPERTY_REFERRED_BY_TYPE.ANY,\n  },\n};\n\nexport const PROPERTY_SOLVENCY = {\n  UNDETERMINED: 'UNDETERMINED',\n  NOT_SHARED: 'NOT_SHARED',\n  SOLVENT: 'SOLVENT',\n  INSOLVENT: 'INSOLVENT',\n};\n","import Properties from '.';\nimport { PROPERTY_QUERIES } from './propertyConstants';\nimport {\n  adminProperty,\n  userProperty as userPropertyFragment,\n  proProperty,\n  proUser,\n} from '../fragments';\n\nexport const adminProperties = Properties.createQuery(\n  PROPERTY_QUERIES.ADMIN_PROPERTIES,\n  adminProperty(),\n);\n\nexport const anonymousProperty = Properties.createQuery(\n  PROPERTY_QUERIES.ANONYMOUS_PROPERTY,\n  {\n    ...userPropertyFragment(),\n    // Ask these for non-reactive queries, like ProPropertyPage\n    documents: 1,\n    openGraphData: 1,\n  },\n);\n\nexport const propertySearch = Properties.createQuery(\n  PROPERTY_QUERIES.PROPERTY_SEARCH,\n  {\n    address1: 1,\n    address2: 1,\n    city: 1,\n    zipCode: 1,\n    totalValue: 1,\n    status: 1,\n    style: 1,\n    insideArea: 1,\n    $options: { limit: 5 },\n  },\n);\n\nexport const proProperties = Properties.createQuery(\n  PROPERTY_QUERIES.PRO_PROPERTIES,\n  proProperty(),\n);\n\nexport const proPropertyUsers = Properties.createQuery(\n  PROPERTY_QUERIES.PRO_PROPERTY_USERS,\n  { users: proUser() },\n);\n\nexport const userProperty = Properties.createQuery(\n  PROPERTY_QUERIES.USER_PROPERTY,\n  {\n    $filter({ filters, params: { propertyId } }) {\n      filters._id = propertyId;\n    },\n    ...userPropertyFragment(),\n    // Ask these for non-reactive queries, like ProPropertyPage\n    openGraphData: 1,\n    documents: 1,\n  },\n);\n","import addressReducer from '../reducers/addressReducer';\nimport Properties from '.';\nimport { PROPERTY_DOCUMENTS } from '../files/fileConstants';\n\nProperties.addReducers({\n  ...addressReducer,\n  thumbnail: {\n    body: {\n      documents: { [PROPERTY_DOCUMENTS.PROPERTY_PICTURES]: { url: 1 } },\n      imageUrls: 1,\n    },\n    reduce: ({ documents = {}, imageUrls = [] }) => {\n      if (imageUrls.length > 0) {\n        return imageUrls[0];\n      }\n\n      if (\n        documents\n        && documents[PROPERTY_DOCUMENTS.PROPERTY_PICTURES]\n        && documents[PROPERTY_DOCUMENTS.PROPERTY_PICTURES].length\n      ) {\n        return documents[PROPERTY_DOCUMENTS.PROPERTY_PICTURES][0].url;\n      }\n    },\n  },\n  totalValue: {\n    body: { value: 1, landValue: 1, constructionValue: 1, additionalMargin: 1 },\n    reduce: ({\n      value = 0,\n      landValue = 0,\n      constructionValue = 0,\n      additionalMargin = 0,\n    }) => value || landValue + constructionValue + additionalMargin,\n  },\n  valuePerSquareMeterInside: {\n    body: { totalValue: 1, insideArea: 1 },\n    reduce: ({ totalValue = 0, insideArea = 0 }) =>\n      (insideArea === 0 ? 0 : totalValue / insideArea),\n  },\n  valuePerSquareMeterLand: {\n    body: { totalValue: 1, landArea: 1 },\n    reduce: ({ totalValue = 0, landArea = 0 }) =>\n      (landArea === 0 ? 0 : totalValue / landArea),\n  },\n  organisation: {\n    body: { users: { organisations: { name: 1 } } },\n    reduce: ({ users = [] }) => {\n      if (users.length === 0) {\n        return undefined;\n      }\n\n      let org;\n\n      const hasOrg = users.every(({ organisations = [] }) => {\n        if (organisations.length !== 1) {\n          return false;\n        }\n\n        if (!org) {\n          org = organisations[0];\n          return true;\n        }\n\n        return organisations[0]._id === org._id;\n      });\n\n      return hasOrg ? org : null;\n    },\n  },\n});\n","import SimpleSchema from 'simpl-schema';\n\nimport { CUSTOM_AUTOFIELD_TYPES } from 'core/components/AutoForm2/constants';\nimport {\n  createdAt,\n  updatedAt,\n  percentageField,\n  decimalMoneyField,\n  cacheField,\n} from '../../helpers/sharedSchemas';\nimport {\n  REVENUE_TYPES,\n  REVENUE_STATUS,\n  COMMISSION_STATUS,\n  REVENUE_SECONDARY_TYPES,\n} from '../revenueConstants';\n\nconst RevenueSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  amount: { ...decimalMoneyField, optional: false },\n  description: { type: String, optional: true },\n  type: {\n    type: String,\n    allowedValues: Object.values(REVENUE_TYPES),\n    uniforms: { displayEmpty: false, placeholder: '' },\n  },\n  secondaryType: {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(REVENUE_SECONDARY_TYPES),\n    uniforms: { displayEmpty: false, placeholder: '' },\n    condition: ({ type }) => type === REVENUE_TYPES.INSURANCE,\n  },\n  status: {\n    type: String,\n    allowedValues: Object.values(REVENUE_STATUS),\n    uniforms: { displayEmpty: false, placeholder: '' },\n    defaultValue: REVENUE_STATUS.EXPECTED,\n  },\n  expectedAt: {\n    type: Date,\n    optional: true,\n    uniforms: { type: CUSTOM_AUTOFIELD_TYPES.DATE },\n  },\n  paidAt: {\n    type: Date,\n    optional: true,\n    uniforms: { type: CUSTOM_AUTOFIELD_TYPES.DATE },\n  },\n  organisationLinks: {\n    type: Array,\n    defaultValue: [],\n  },\n  'organisationLinks.$': Object,\n  'organisationLinks.$._id': String,\n  'organisationLinks.$.commissionRate': { ...percentageField, optional: false },\n  'organisationLinks.$.paidAt': {\n    type: Date,\n    optional: true,\n    uniforms: { type: CUSTOM_AUTOFIELD_TYPES.DATE },\n  },\n  'organisationLinks.$.status': {\n    type: String,\n    allowedValues: Object.values(COMMISSION_STATUS),\n    defaultValue: COMMISSION_STATUS.TO_BE_PAID,\n  },\n  sourceOrganisationLink: { type: Object, defaultValue: {}, optional: true },\n  'sourceOrganisationLink._id': { type: String, optional: true },\n  // This should be an object, since there's only one loan\n  // https://github.com/Herteby/denormalize/issues/17\n  loanCache: { type: Array, optional: true },\n  'loanCache.$': cacheField,\n});\n\nexport default RevenueSchema;\n","export * from './methodDefinitions';\nexport { default } from './revenues';\n","import LinkInitializer from '../links/LinkInitializer';\nimport Revenues from '.';\nimport { Loans, Organisations } from '..';\n\nRevenues.addLinks({\n  organisations: {\n    collection: Organisations,\n    field: 'organisationLinks',\n    type: 'many',\n    metadata: true,\n  },\n  sourceOrganisation: {\n    collection: Organisations,\n    field: 'sourceOrganisationLink',\n    type: 'one',\n    metadata: true,\n  },\n});\n\nLinkInitializer.inversedInit(() => {\n  Revenues.addLinks({\n    loan: {\n      collection: Loans,\n      inversedBy: 'revenues',\n      denormalize: {\n        field: 'loanCache',\n        body: { _id: 1, name: 1 },\n      },\n    },\n  });\n});\n","import { Match } from 'meteor/check';\n\nimport { Method } from '../methods/methods';\n\nexport const revenueInsert = new Method({\n  name: 'revenueInsert',\n  params: {\n    revenue: Object,\n    loanId: Match.Maybe(String),\n  },\n});\n\nexport const revenueRemove = new Method({\n  name: 'revenueRemove',\n  params: {\n    revenueId: String,\n  },\n});\n\nexport const revenueUpdate = new Method({\n  name: 'revenueUpdate',\n  params: {\n    revenueId: String,\n    object: Object,\n  },\n});\n\nexport const consolidateRevenue = new Method({\n  name: 'consolidateRevenue',\n  params: {\n    revenueId: String,\n    amount: Number,\n    paidAt: String,\n  },\n});\n\nexport const consolidateCommission = new Method({\n  name: 'consolidateCommission',\n  params: {\n    revenueId: String,\n    organisationId: String,\n    paidAt: String,\n    commissionRate: Number,\n  },\n});\n","export const REVENUES_COLLECTION = 'revenues';\n\nexport const REVENUE_QUERIES = {\n  ADMIN_REVENUES: 'ADMIN_REVENUES',\n};\n\nexport const REVENUE_TYPES = {\n  INSURANCE: 'INSURANCE',\n  MORTGAGE: 'MORTGAGE',\n  FEE: 'FEE',\n  OTHER: 'OTHER',\n};\n\nconst REVENUE_TYPES_INSURANCE = {\n  DEATH_3A: 'DEATH_3A',\n  DEATH_3B: 'DEATH_3B',\n  INCOME_PROTECTION_3A: 'INCOME_PROTECTION_3A',\n  INCOME_PROTECTION_3B: 'INCOME_PROTECTION_3B',\n  LIFE_3A: 'LIFE_3A',\n  LIFE_3B: 'LIFE_3B',\n};\n\nexport const REVENUE_SECONDARY_TYPES = {\n  ...REVENUE_TYPES_INSURANCE,\n};\n\nexport const REVENUE_STATUS = {\n  EXPECTED: 'EXPECTED',\n  CLOSED: 'CLOSED',\n};\n\nexport const COMMISSION_STATUS = {\n  PAID: 'PAID',\n  TO_BE_PAID: 'TO_BE_PAID',\n};\n","import { Mongo } from 'meteor/mongo';\n\nimport RevenueSchema from './schemas/revenueSchema';\nimport { REVENUES_COLLECTION } from './revenueConstants';\n\nconst Revenues = new Mongo.Collection(REVENUES_COLLECTION);\n\nRevenues.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true,\n});\n\nRevenues.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false,\n});\n\nRevenues.attachSchema(RevenueSchema);\nexport default Revenues;\n","import { Mongo } from 'meteor/mongo';\n\nimport SimpleSchema from 'simpl-schema';\n\nimport { createdAt, updatedAt } from '../helpers/sharedSchemas';\nimport {\n  ACTIVITY_TYPES,\n  ACTIVITY_SECONDARY_TYPES,\n  ACTIVITIES_COLLECTION,\n} from './activityConstants';\n\nconst Activities = new Mongo.Collection(ACTIVITIES_COLLECTION);\n\nconst ActivitySchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  createdBy: {\n    type: String,\n    optional: true,\n    autoValue() {\n      if (this.isInsert) {\n        return this.value || this.userId;\n      }\n      this.unset();\n    },\n  },\n  title: String,\n  description: { type: String, optional: true },\n  type: { type: String, allowedValues: Object.values(ACTIVITY_TYPES) },\n  secondaryType: {\n    type: String,\n    optional: true,\n    allowedValues: Object.values(ACTIVITY_SECONDARY_TYPES),\n  },\n  date: {\n    type: Date,\n    autoValue() {\n      if (this.isInsert) {\n        return this.value || new Date();\n      }\n    },\n  },\n  loanLink: { type: Object, optional: true },\n  'loanLink._id': { type: String, optional: true },\n  shouldNotify: { type: Boolean, optional: true },\n});\n\nActivities.attachSchema(ActivitySchema);\n\nexport default Activities;\n","export const ACTIVITIES_COLLECTION = 'activities';\n\nexport const ACTIVITY_QUERIES = {\n  ADMIN_ACTIVITIES: 'ADMIN_ACTIVITIES',\n};\n\nexport const ACTIVITY_TYPES = {\n  EMAIL: 'EMAIL',\n  EVENT: 'EVENT',\n  PHONE: 'PHONE',\n  SERVER: 'SERVER',\n  OTHER: 'OTHER',\n};\n\nexport const ACTIVITY_SECONDARY_TYPES = {\n  CREATED: 'CREATED',\n  REMOVE_LOAN_FROM_PROMOTION: 'REMOVE_LOAN_FROM_PROMOTION',\n};\n","export { default } from './activities';\n","import Notifications from '../notifications';\nimport Loans from '../loans';\nimport Activities from './activities';\n\nActivities.addLinks({\n  notifications: {\n    collection: Notifications,\n    inversedBy: 'activity',\n    autoremove: true,\n  },\n  loan: {\n    collection: Loans,\n    field: 'loanLink',\n    metadata: true,\n  },\n});\n","export const TRACKING_COOKIE = 'epotek_trackingid';\n\n// e-Potek's office and VPN IPs\n// Those addresses are blacklisted from 'app' and 'pro' tracked events\n// to avoid wrong tracking when impersonating users\nexport const LOGIN_IP_BLACKLIST = ['185.19.31.79', '213.3.47.70'];\n","import { Method } from '../methods/methods';\n\nexport const analyticsLogin = new Method({\n  name: 'analyticsLogin',\n  params: {\n    trackingId: String,\n  },\n});\n\nexport const analyticsPage = new Method({\n  name: 'analyticsPage',\n  params: {\n    cookies: Object,\n    sessionStorage: Object,\n    path: String,\n    route: String,\n    queryParams: Object,\n    queryString: Object,\n  },\n});\n\nexport const analyticsVerifyEmail = new Method({\n  name: 'analyticsVerifyEmail',\n});\n","export { default as withSmartQuery } from './withSmartQuery';\nexport { branch, renderComponent } from 'recompose';\n","// @flow\nimport React, { Component } from 'react';\n\n// Determine whether to skip adding an HOC `container` based on a `skip`\n// function, only change the wrappedComponent when needed to avoid UI flashes\nconst makeSkipContainer = (container, skip) => WrappedComponent =>\n  class extends Component {\n    constructor(props) {\n      super(props);\n      this.setWrappedComponent(props);\n    }\n\n    componentWillReceiveProps(nextProps) {\n      if (skip(this.props) !== skip(nextProps)) {\n        this.setWrappedComponent(nextProps);\n        this.forceUpdate();\n      }\n    }\n\n    setWrappedComponent(props) {\n      this.wrappedComponent = skip(props)\n        ? WrappedComponent\n        : container(WrappedComponent);\n    }\n\n    render() {\n      const FinalComponent = this.wrappedComponent;\n      return <FinalComponent {...this.props} />;\n    }\n  };\n\nexport default makeSkipContainer;\n","// @flow\nimport { withQuery } from 'meteor/cultofcoders:grapher-react';\nimport {\n  mapProps,\n  compose,\n  branch,\n  renderComponent,\n  lifecycle,\n} from 'recompose';\nimport { withLoading } from '../../components/Loading';\nimport MissingDoc from '../../components/MissingDoc';\nimport ClientEventService from '../events/ClientEventService';\nimport {\n  addQueryToRefetch,\n  removeQueryToRefetch,\n} from '../methods/clientQueryManager';\nimport makeSkipContainer from './skipContainer';\n\n// render the missing doc component only when we want to\nconst makeRenderMissingDocIfNoData = (render: boolean = false, { single }) => {\n  let renderFunc;\n  if (typeof render === 'function') {\n    renderFunc = props =>\n      render(props) && single && (!props.isLoading && !props.data);\n  } else {\n    renderFunc = ({ isLoading, data }) =>\n      render && single && (!isLoading && !data);\n  }\n\n  return branch(renderFunc, renderComponent(MissingDoc));\n};\n\n// Use proper name for data, and remove unnecessary props from children\n// error should be thrown and catched by our errorboundaries anyways\n// or displayed by an alert\nconst makeMapProps = dataName =>\n  mapProps(({ data, isLoading, error, ...rest }) => ({\n    [dataName]: data,\n    ...rest,\n  }));\n\nconst withQueryRefetcher = ({ queryName }) =>\n  lifecycle({\n    componentDidMount() {\n      const { refetch } = this.props;\n\n      if (refetch) {\n        ClientEventService.addListener(queryName, refetch);\n      }\n    },\n    componentWillUnmount() {\n      const { refetch } = this.props;\n      if (refetch) {\n        ClientEventService.removeListener(queryName, refetch);\n      }\n    },\n  });\n\n// This adds all non-reactive queries on the window object, and removes them\n// when the query disappears\n// These queries can then all be refreshed from `clientMethodsConfig`\n// every time a method is called\nconst withGlobalQueryManager = (\n  { queryName },\n  { reactive },\n  refetchOnMethodCall,\n) => {\n  const shouldActivateGlobalRefetch = refetchOnMethodCall && !reactive && global.window;\n\n  if (!shouldActivateGlobalRefetch) {\n    return x => x;\n  }\n\n  return lifecycle({\n    componentDidMount() {\n      addQueryToRefetch(queryName, refetchOnMethodCall);\n    },\n    componentWillUnmount() {\n      removeQueryToRefetch(queryName);\n    },\n  });\n};\n\ntype withSmartQueryArgs = {\n  query: () => mixed,\n  params: (props: Object) => Object,\n  queryOptions?: { single: boolean },\n  dataName?: string,\n  renderMissingDoc?: boolean | Function,\n  smallLoader?: boolean,\n};\n\nconst calculateParams = (params, props) => {\n  if (typeof params === 'function') {\n    return params(props);\n  }\n  return params;\n};\n\nconst withSmartQuery = ({\n  query,\n  params = {},\n  queryOptions = { single: false },\n  dataName = 'data',\n  // used to bypass the missing doc component\n  renderMissingDoc = true,\n  smallLoader = false,\n  refetchOnMethodCall = 'all',\n  skip,\n}: withSmartQueryArgs) => {\n  let completeQuery;\n\n  if (typeof query === 'function') {\n    completeQuery = props => query(props).clone(calculateParams(params, props));\n  } else {\n    completeQuery = props => query.clone(calculateParams(params, props));\n  }\n\n  const container = compose(\n    withGlobalQueryManager(query, queryOptions, refetchOnMethodCall),\n    withQuery(completeQuery, { loadOnRefetch: false, ...queryOptions }),\n    withLoading(smallLoader),\n    makeRenderMissingDocIfNoData(renderMissingDoc, queryOptions),\n    makeMapProps(dataName),\n    withQueryRefetcher(query),\n  );\n\n  if (skip) {\n    return makeSkipContainer(container, skip);\n  }\n\n  return container;\n};\n\nexport default withSmartQuery;\n","import { Meteor } from 'meteor/meteor';\n\nexport const FROM_NAME = 'e-Potek';\nexport const FROM_EMAIL = 'info@e-potek.ch';\nexport const FROM_DEFAULT = `${FROM_NAME} <${FROM_EMAIL}>`;\nexport const CTA_URL_DEFAULT = Meteor.settings.public.subdomains.app;\nexport const INTERNAL_EMAIL = Meteor.settings.public.environment === 'production'\n  ? FROM_EMAIL\n  : 'dev@e-potek.ch';\nexport const EPOTEK_PHONE = '+41 22 566 01 10';\n\nexport const EMAIL_I18N_NAMESPACE = 'emails';\n\nexport const EMAIL_PARTS = {\n  SUBJECT: 'SUBJECT',\n  TITLE: 'TITLE',\n  BODY: 'BODY',\n  CTA: 'CTA',\n  FROM: 'FROM',\n};\n\nexport const FOOTER_TYPES = {\n  USER: 'footerUser',\n  VISITOR: 'footerVisitor',\n};\n\nexport const EMAIL_TEMPLATES = {\n  NOTIFICATION: {\n    name: 'NOTIFICATION',\n    mandrillId: 'notification',\n    variables: {\n      TITLE: 'TITLE',\n      BODY: 'BODY',\n    },\n  },\n  NOTIFICATION_AND_CTA: {\n    name: 'NOTIFICATION_AND_CTA',\n    mandrillId: 'notification-cta',\n    variables: {\n      TITLE: 'TITLE',\n      BODY: 'BODY',\n      CTA: 'CTA',\n      CTA_URL: 'CTA_URL',\n    },\n  },\n  PROMOTION_INVITATION: {\n    name: 'PROMOTION_INVITATION',\n    mandrillId: 'promotion-invitation',\n    variables: {\n      TITLE: 'TITLE',\n      MARKETING_BLURB: 'MARKETING_BLURB',\n      BODY: 'BODY',\n      CTA: 'CTA',\n      CTA_URL: 'CTA_URL',\n      COVER_IMAGE_URL: 'COVER_IMAGE_URL',\n      LOGO_URL_1: 'LOGO_URL_1',\n      LOGO_URL_2: 'LOGO_URL_2',\n      LOGO_URL_3: 'LOGO_URL_3',\n    },\n  },\n  SIMPLE: {\n    name: 'SIMPLE',\n    mandrillId: 'simple',\n    variables: {\n      TITLE: 'TITLE',\n      BODY: 'BODY',\n    },\n  },\n  NOTIFICATION_AND_CTA_V2: {\n    name: 'NOTIFICATION_AND_CTA_V2',\n    mandrillId: 'notification-cta-v2',\n    variables: {\n      TITLE: 'TITLE',\n      BODY: 'BODY',\n      CTA: 'CTA',\n      CTA_URL: 'CTA_URL',\n      CSS: 'CSS',\n    },\n  },\n};\n\nexport const EMAIL_IDS = {\n  CONTACT_US: 'CONTACT_US',\n  CONTACT_US_ADMIN: 'CONTACT_US_ADMIN',\n  VERIFY_EMAIL: 'VERIFY_EMAIL',\n  RESET_PASSWORD: 'RESET_PASSWORD',\n  ENROLL_ACCOUNT: 'ENROLL_ACCOUNT',\n  VERIFICATION_REQUESTED: 'VERIFICATION_REQUESTED',\n  VERIFICATION_ERROR: 'VERIFICATION_ERROR',\n  VERIFICATION_PASSED: 'VERIFICATION_PASSED',\n  INVITE_USER_TO_PROMOTION: 'INVITE_USER_TO_PROMOTION',\n  SEND_FEEDBACK_TO_LENDER: 'SEND_FEEDBACK_TO_LENDER',\n  INVITE_USER_TO_PROPERTY: 'INVITE_USER_TO_PROPERTY',\n  REFER_USER: 'REFER_USER',\n  FIND_LENDER_NOTIFICATION: 'FIND_LENDER_NOTIFICATION',\n  CONFIRM_USER_INVITATION: 'CONFIRM_USER_INVITATION',\n  LOAN_CHECKLIST: 'LOAN_CHECKLIST',\n};\n","import { Match } from 'meteor/check';\n\nimport { Method } from '../methods/methods';\n\nexport const sendEmail = new Method({\n  name: 'sendEmail',\n  params: {\n    emailId: String,\n    params: Object,\n    userId: String,\n  },\n});\n\nexport const sendEmailToAddress = new Method({\n  name: 'sendEmailToAddress',\n  params: {\n    address: String,\n    emailId: String,\n    name: Match.Maybe(String),\n    params: Object,\n  },\n});\n","import { Factory } from 'meteor/dburles:factory';\nimport faker from 'faker';\n\nimport {\n  LOT_TYPES,\n  ORGANISATION_TYPES,\n  PROMOTION_TYPES,\n  REVENUE_TYPES,\n  ROLES,\n  STEPS,\n  TASK_STATUS,\n  DEFAULT_VALUE_FOR_ALL,\n  DEFAULT_MAIN_RESIDENCE_RULES,\n  DEFAULT_SECONDARY_RESIDENCE_RULES,\n} from '../constants';\nimport {\n  Borrowers,\n  Contacts,\n  InterestRates,\n  LenderRules,\n  Lenders,\n  Loans,\n  Lots,\n  MortgageNotes,\n  Offers,\n  Organisations,\n  PromotionLots,\n  PromotionOptions,\n  Promotions,\n  Properties,\n  Revenues,\n  Tasks,\n  Users,\n} from '..';\nimport { PROPERTY_CATEGORY } from '../properties/propertyConstants';\nimport Notifications from '../notifications/index';\nimport Activities from '../activities/index';\n\nconst TEST_LASTNAME = 'TestLastName';\nconst TEST_FIRSTNAME = 'TestFirstName';\nconst TEST_PHONE = '0123456789';\n\nconst getRandomLoanName = () => `19-0${Math.floor(Math.random() * 899 + 100)}`;\n\nFactory.define('user', Users, {\n  roles: [ROLES.USER],\n  emails: () => [{ address: faker.internet.email(), verified: false }],\n  lastName: TEST_LASTNAME,\n  firstName: TEST_FIRSTNAME,\n  phoneNumbers: [TEST_PHONE],\n});\n\nFactory.define('dev', Users, {\n  roles: [ROLES.DEV],\n  emails: () => [{ address: faker.internet.email(), verified: false }],\n  lastName: TEST_LASTNAME,\n  firstName: TEST_FIRSTNAME,\n  phoneNumbers: [TEST_PHONE],\n});\n\nFactory.define('admin', Users, {\n  roles: [ROLES.ADMIN],\n  emails: () => [{ address: faker.internet.email(), verified: false }],\n  lastName: TEST_LASTNAME,\n  firstName: TEST_FIRSTNAME,\n  phoneNumbers: [TEST_PHONE],\n});\n\nFactory.define('adminEpotek', Users, {\n  roles: [ROLES.ADMIN],\n  emails: () => [{ address: 'dev@e-potek.ch', verified: true }],\n  lastName: 'e-Potek',\n  firstName: 'Dev',\n  phoneNumbers: [TEST_PHONE],\n});\n\nFactory.define('pro', Users, {\n  roles: [ROLES.PRO],\n  emails: () => [{ address: faker.internet.email(), verified: false }],\n  lastName: TEST_LASTNAME,\n  firstName: TEST_FIRSTNAME,\n  phoneNumbers: [TEST_PHONE],\n});\n\nFactory.define('borrower', Borrowers);\n\nFactory.define('task', Tasks, {\n  createdAt: () => new Date(),\n  status: TASK_STATUS.ACTIVE,\n});\n\nFactory.define('loan', Loans, {\n  createdAt: () => new Date(),\n  borrowerIds: [],\n  documents: () => ({}),\n  step: STEPS.SOLVENCY,\n  name: () => {\n    // there is a 1/900% chance that 2 loan names collide,\n    // make sure it never happens instead\n    while (true) {\n      const name = getRandomLoanName();\n\n      if (!Loans.findOne({ name })) {\n        return name;\n      }\n    }\n  },\n  emails: () => [],\n  propertyIds: [],\n});\n\nFactory.define('property', Properties, {\n  value: 1000000,\n  category: PROPERTY_CATEGORY.USER,\n});\n\nFactory.define('offer', Offers, {\n  userId: () => faker.random.uuid(),\n  createdAt: () => new Date(),\n  canton: 'GE',\n  conditions: ['Do something'],\n  maxAmount: 800000,\n  amortizationGoal: 0.65,\n});\n\nFactory.define('promotion', Promotions, {\n  name: 'Test promotion',\n  type: PROMOTION_TYPES.CREDIT,\n});\n\nFactory.define('promotionOption', PromotionOptions, {});\nFactory.define('promotionLot', PromotionLots, {});\n\nFactory.define('lot', Lots, {\n  name: 'test',\n  type: LOT_TYPES.PARKING_CAR,\n  value: 1000,\n});\n\nFactory.define('task', Tasks, {});\n\nFactory.define('mortgageNote', MortgageNotes, {\n  value: 100000,\n  canton: 'GE',\n});\n\nFactory.define('organisation', Organisations, {\n  name: () => {\n    // Make sure organisation names don't collide\n    while (true) {\n      const name = faker.company.companyName();\n\n      if (!Organisations.findOne({ name })) {\n        return name;\n      }\n    }\n  },\n  type: ORGANISATION_TYPES.BANK,\n});\n\nFactory.define('lender', Lenders, {});\n\nFactory.define('interestRates', InterestRates, {});\n\nFactory.define('contact', Contacts, {\n  firstName: 'John',\n  lastName: 'Doe',\n});\n\nFactory.define('lenderRules', LenderRules, {\n  filter: { and: [] },\n  order: 0,\n});\n\nFactory.define('revenues', Revenues, {\n  amount: 1000,\n  type: REVENUE_TYPES.MORTGAGE,\n});\n\nFactory.define('lenderRulesAll', LenderRules, {\n  ...DEFAULT_VALUE_FOR_ALL,\n  order: 0,\n  filter: { and: [true] },\n});\n\nFactory.define('lenderRulesMain', LenderRules, {\n  maxBorrowRatio: 0.8,\n  order: 0,\n  filter: { and: DEFAULT_MAIN_RESIDENCE_RULES },\n});\n\nFactory.define('lenderRulesSecondary', LenderRules, {\n  maxBorrowRatio: 0.7,\n  order: 0,\n  filter: { and: DEFAULT_SECONDARY_RESIDENCE_RULES },\n});\n\nFactory.define('notification', Notifications, {});\n\nFactory.define('activity', Activities, {});\n","import { Factory } from 'meteor/dburles:factory';\nimport { Mongo } from 'meteor/mongo';\nimport pick from 'lodash/pick';\nimport omit from 'lodash/omit';\nimport uniq from 'lodash/uniq';\nimport uniqBy from 'lodash/uniqBy';\n\nimport CollectionService from '../helpers/CollectionService';\nimport { COLLECTIONS } from '../constants';\nimport { NOTIFICATIONS_COLLECTION } from '../notifications/notificationConstants';\nimport { ACTIVITIES_COLLECTION } from '../activities/activityConstants';\n\nconst getSingularFactoryName = (collection) => {\n  switch (collection) {\n  case COLLECTIONS.LOANS_COLLECTION:\n    return 'loan';\n  case COLLECTIONS.BORROWERS_COLLECTION:\n    return 'borrower';\n  case COLLECTIONS.PROPERTIES_COLLECTION:\n    return 'property';\n  case COLLECTIONS.USERS_COLLECTION:\n    return 'user';\n  case COLLECTIONS.TASKS_COLLECTION:\n    return 'task';\n  case COLLECTIONS.OFFERS_COLLECTION:\n    return 'offer';\n  case COLLECTIONS.PROMOTIONS_COLLECTION:\n    return 'promotion';\n  case COLLECTIONS.PROMOTION_OPTIONS_COLLECTION:\n    return 'promotionOption';\n  case COLLECTIONS.PROMOTION_LOTS_COLLECTION:\n    return 'promotionLot';\n  case COLLECTIONS.LOTS_COLLECTION:\n    return 'lot';\n  case COLLECTIONS.MORTGAGE_NOTES_COLLECTION:\n    return 'mortgageNote';\n  case COLLECTIONS.ORGANISATIONS_COLLECTION:\n    return 'organisation';\n  case COLLECTIONS.LENDERS_COLLECTION:\n    return 'lender';\n  case COLLECTIONS.CONTACTS_COLLECTION:\n    return 'contact';\n  case NOTIFICATIONS_COLLECTION:\n    return 'notification';\n  case ACTIVITIES_COLLECTION:\n    return 'activity';\n  default:\n    throw new Error(`No singular factory name found for ${collection}, add it in the generator`);\n  }\n};\n\nconst arrayify = maybeArray =>\n  (Array.isArray(maybeArray) ? maybeArray : [maybeArray]);\n\nconst findCollectionNameByLinkName = ({ collection, linkName }) =>\n  Mongo.Collection.get(collection).__links[linkName].linkConfig.collection\n    ._name;\n\nconst findLinkKeys = ({ collection }) => {\n  const { __links: linkNames = {} } = Mongo.Collection.get(collection);\n  const links = Object.keys(linkNames);\n  return links;\n};\n\nconst insertDoc = ({ doc, collection, useFactories, factory }) => {\n  let docExists = false;\n\n  if (doc._id) {\n    docExists = !!Mongo.Collection.get(collection).findOne(doc._id);\n  }\n\n  if (docExists) {\n    return doc;\n  }\n\n  if (useFactories && factory !== null) {\n    if (factory) {\n      return Factory.create(factory, doc);\n    }\n\n    try {\n      return Factory.create(collection, doc);\n    } catch (error) {\n      if (\n        error.message\n        && error.message === `Factory: There is no factory named ${collection}`\n      ) {\n        return Factory.create(getSingularFactoryName(collection), doc);\n      }\n      throw error;\n    }\n  }\n\n  const _id = Mongo.Collection.get(collection).insert(doc);\n  return Mongo.Collection.get(collection).findOne(_id);\n};\n\nconst generator = (scenario, { useFactories = true } = {}) => {\n  const ids = {};\n  const docs = {};\n  const docsById = {};\n\n  const pushId = ({ id, collection }) => {\n    ids[collection] = ids[collection] ? [...ids[collection], id] : [id];\n    ids[collection] = uniq(ids[collection]);\n  };\n\n  const pushDoc = ({ doc, collection }) => {\n    docs[collection] = docs[collection] ? [...docs[collection], doc] : [doc];\n    docs[collection] = uniqBy(docs[collection], '_id');\n\n    docsById[collection] = docsById[collection]\n      ? { ...docsById[collection], [doc._id]: doc }\n      : { [doc._id]: doc };\n  };\n\n  const createNestedObject = ({ doc, collection }) => {\n    const linkKeys = findLinkKeys({ doc, collection });\n\n    const docToInsert = omit(doc, [...linkKeys, '_factory', '$metadata']);\n\n    const insertedDoc = insertDoc({\n      collection,\n      doc: docToInsert,\n      useFactories,\n      factory: doc._factory,\n    });\n    const { _id: id } = insertedDoc;\n    pushId({ id, collection });\n    pushDoc({ doc: insertedDoc, collection });\n\n    const linksToInsert = pick(doc, linkKeys);\n\n    Object.keys(linksToInsert).forEach((linkName) => {\n      const linkCollection = findCollectionNameByLinkName({\n        collection,\n        linkName,\n      });\n      const linkedDocs = arrayify(linksToInsert[linkName]);\n      linkedDocs.forEach((linkedDoc) => {\n        const linkId = createNestedObject({\n          doc: linkedDoc,\n          collection: linkCollection,\n          parentId: id,\n        });\n        const collectionService = new CollectionService(Mongo.Collection.get(collection));\n        collectionService.addLink({\n          id,\n          linkName,\n          linkId,\n          metadata: linkedDoc.$metadata,\n        });\n      });\n    });\n\n    return id;\n  };\n\n  Object.keys(scenario).forEach((collection) => {\n    const docsInCollection = arrayify(scenario[collection]);\n    docsInCollection.forEach(doc => createNestedObject({ doc, collection }));\n  });\n\n  return { ids, docs, docsById };\n};\n\nexport default generator;\n","import './factories';\n\nexport { default } from './factoriesHelpers';\n","import { Meteor } from 'meteor/meteor';\n\nclass CollectionService {\n  constructor(collection) {\n    if (!collection) {\n      throw new Error('A collection is needed in CollectionService, but none was passed');\n    }\n    this.collection = collection;\n  }\n\n  insert(object = {}) {\n    return this.collection.insert(object);\n  }\n\n  _update({ id, object, operator = '$set' }) {\n    if (Object.keys(object).length > 0) {\n      // debugger;\n      return this.collection.update(id, { [operator]: object });\n    }\n    return null;\n  }\n\n  baseUpdate(...args) {\n    return this.collection.update(...args);\n  }\n\n  remove(...args) {\n    return this.collection.remove(...args);\n  }\n\n  get(id) {\n    return this.collection.findOne(id);\n  }\n\n  safeGet(id) {\n    const result = this.get(id);\n\n    if (!result) {\n      throw new Meteor.Error(`Could not find object with id \"${id}\" in collection \"${\n        this.collection._name\n      }\"`);\n    }\n\n    return result;\n  }\n\n  find(...args) {\n    return this.collection.find(...args);\n  }\n\n  findOne(...args) {\n    return this.collection.findOne(...args);\n  }\n\n  checkQuery(body) {\n    if (body && body.$filter) {\n      throw new Meteor.Error('$filter found in query body, did you mean $filters?');\n    }\n  }\n\n  createQuery(...args) {\n    this.checkQuery(args[0]);\n    return this.collection.createQuery(...args);\n  }\n\n  fetchOne(...args) {\n    this.checkQuery(args[0]);\n    return this.createQuery(...args).fetchOne();\n  }\n\n  safeFetchOne(...args) {\n    const { $filters = {} } = args.find(arg => arg.$filters);\n    const result = this.fetchOne(...args);\n\n    if (!result) {\n      throw new Meteor.Error(`Could not find object with filters \"${JSON.stringify($filters)}\" in collection \"${this.collection._name}\"`);\n    }\n\n    return result;\n  }\n\n  fetch(...args) {\n    this.checkQuery(args[0]);\n    return this.createQuery(...args).fetch();\n  }\n\n  getLink(...args) {\n    return this.collection.getLink(...args);\n  }\n\n  count(...args) {\n    this.checkQuery(args[0]);\n    return this.createQuery(...args).getCount();\n  }\n\n  countAll() {\n    return this.find({}).count();\n  }\n\n  getAll() {\n    return this.find({}).fetch();\n  }\n\n  get rawCollection() {\n    return this.collection.rawCollection();\n  }\n\n  exists(_id) {\n    return !!(_id && this.findOne({ _id }, { fields: { _id: 1 } }));\n  }\n\n  aggregate(...args) {\n    return this.rawCollection.aggregate(...args);\n  }\n\n  // Don't return the results from linker\n  addLink({ id, linkName, linkId, metadata = {} }) {\n    const linker = this.collection.getLink(id, linkName);\n    const {\n      linker: { strategy },\n    } = linker;\n\n    switch (strategy) {\n    case 'one':\n      linker.set(linkId);\n      return;\n    case 'many':\n      linker.add(linkId);\n      return;\n    case 'one-meta':\n      linker.set(linkId, metadata);\n      return;\n    case 'many-meta':\n      linker.add(linkId, metadata);\n      return;\n    default:\n      return null;\n    }\n  }\n\n  // Don't return the results from linker\n  removeLink({ id, linkName, linkId }) {\n    const linker = this.getLink(id, linkName);\n    const {\n      linker: { strategy },\n    } = linker;\n\n    switch (strategy.split('-')[0]) {\n    case 'one':\n      linker.unset(linkId);\n      return;\n    case 'many':\n      linker.remove(linkId);\n      return;\n    default:\n      return null;\n    }\n  }\n\n  updateLinkMetadata({ id, linkName, linkId, metadata }) {\n    const linker = this.getLink(id, linkName);\n    const {\n      linker: { strategy },\n    } = linker;\n\n    switch (strategy.split('-')[0]) {\n    case 'one':\n      linker.metadata(metadata);\n      return;\n    case 'many':\n      linker.metadata(linkId, metadata);\n      return;\n    default:\n      return null;\n    }\n  }\n\n  getAssignedEmployee({ id }) {\n    const { assignee } = this.fetchOne({ $filters: { _id: id }, assignee: 1 });\n\n    return assignee;\n  }\n\n  getAdditionalDocLabel({ label, additionalDoc }) {\n    if (label) {\n      return label;\n    }\n    if (additionalDoc.label) {\n      return additionalDoc.label;\n    }\n\n    return undefined;\n  }\n\n  setAdditionalDoc({ id, additionalDocId, requiredByAdmin, label, category }) {\n    const { additionalDocuments } = this.get(id);\n\n    const additionalDoc = additionalDocuments.find(doc => doc.id === additionalDocId);\n\n    if (additionalDoc) {\n      const additionalDocumentsUpdate = [\n        ...additionalDocuments.filter(doc => doc.id !== additionalDocId),\n        {\n          id: additionalDocId,\n          requiredByAdmin,\n          label: this.getAdditionalDocLabel({ label, additionalDoc }),\n          category,\n        },\n      ];\n      return this._update({\n        id,\n        object: { additionalDocuments: additionalDocumentsUpdate },\n      });\n    }\n\n    return this._update({\n      id,\n      object: {\n        additionalDocuments: [\n          ...additionalDocuments,\n          { id: additionalDocId, requiredByAdmin, label, category },\n        ],\n      },\n    });\n  }\n\n  removeAdditionalDoc({ id: docId, additionalDocId }) {\n    const { additionalDocuments = [] } = this.get(docId);\n    return this._update({\n      id: docId,\n      object: {\n        additionalDocuments: additionalDocuments.filter(({ id }) => id !== additionalDocId),\n      },\n    });\n  }\n}\n\nexport default CollectionService;\n","import { Meteor } from 'meteor/meteor';\n\nimport { Loans, Borrowers, Offers, Properties, Tasks, Users } from '..';\nimport {\n  LOANS_COLLECTION,\n  BORROWERS_COLLECTION,\n  PROPERTIES_COLLECTION,\n} from '../constants';\n\nexport const getDocFromCollection = (collectionName, docId) => {\n  let collection;\n  switch (collectionName) {\n  case 'loans':\n    collection = Loans;\n    break;\n  case 'borrowers':\n    collection = Borrowers;\n    break;\n  case 'properties':\n    collection = Properties;\n    break;\n  case 'offers':\n    collection = Offers;\n    break;\n  case 'tasks':\n    collection = Tasks;\n    break;\n  case 'users':\n    collection = Users;\n    break;\n  default:\n    break;\n  }\n\n  return collection.findOne(docId);\n};\n\nexport const getIdFieldNameFromCollection = collectionName =>\n  ({\n    [LOANS_COLLECTION]: 'loanId',\n    [BORROWERS_COLLECTION]: 'borrowerId',\n    [PROPERTIES_COLLECTION]: 'propertyId',\n  }[collectionName]);\n\nexport const getCollectionNameFromIdField = idFieldName =>\n  ({\n    loanId: LOANS_COLLECTION,\n    borrowerId: BORROWERS_COLLECTION,\n    propertyId: PROPERTIES_COLLECTION,\n  }[idFieldName]);\n\nexport const createMeteorAsyncFunction = promiseFunc =>\n  Meteor.wrapAsync((params, callback) =>\n    promiseFunc(params)\n      .then(result => callback(null, result))\n      .catch(callback));\n\nexport const flattenObject = (object, delimiter) => {\n  const delim = delimiter || '.';\n  let flattened = {};\n\n  Object.keys(object).forEach((key) => {\n    const val = object[key];\n    if (val instanceof Object && !(val instanceof Array)) {\n      const strip = flattenObject(val);\n      Object.keys(strip).forEach((k) => {\n        const v = strip[k];\n        flattened = { ...flattened, [`${key}${delim}${k}`]: v };\n      });\n    } else {\n      flattened = { ...flattened, [key]: val };\n    }\n  });\n\n  return flattened;\n};\n\nexport const getUserOrganisationName = ({ user }) => {\n  const { organisations = [] } = user;\n  const organisationName = !!organisations.length && organisations[0].name;\n  return organisationName;\n};\n\nexport const getUserNameAndOrganisation = ({ user }) => {\n  const { name, organisations = [] } = user;\n  const organisationName = !!organisations.length && organisations[0].name;\n  return organisationName ? `${name} (${organisationName})` : name;\n};\n\nconst isReferredByOrganisation = ({ organisations, referredByOrganisation }) =>\n  organisations.some(({ _id }) => referredByOrganisation._id === _id);\nconst isReferredByOrganisationUser = ({ organisationUsers, referredByUser }) =>\n  organisationUsers.some(({ _id }) => referredByUser._id === _id);\n\nexport const getReferredBy = ({ user, proUser = {}, isAdmin }) => {\n  if (!user) {\n    return { raw: null, label: '' };\n  }\n\n  const { organisations = [] } = proUser;\n  const organisationUsers = organisations.length ? organisations[0].users : [];\n  const { referredByUser = {}, referredByOrganisation = {} } = user;\n\n  let label = 'Déjà référé';\n\n  if (\n    isAdmin\n    || isReferredByOrganisation({ organisations, referredByOrganisation })\n    || isReferredByOrganisationUser({ organisationUsers, referredByUser })\n  ) {\n    label = getUserNameAndOrganisation({ user: referredByUser });\n  }\n\n  return { raw: referredByUser.name, label };\n};\n\nexport const sortObject = (object) => {\n  if (!object || typeof object !== 'object' || object instanceof Array) {\n    return object;\n  }\n\n  const sortedObject = {};\n  const keys = Object.keys(object);\n\n  keys.sort();\n\n  keys.forEach((key) => {\n    sortedObject[key] = sortObject(object[key]);\n  });\n\n  return sortedObject;\n};\n","export * from './helpers';\nexport * from './mongoHelpers';\n","export const generateMatchAllWordsRegexp = words =>\n  `${words.map(word => `(?=.*${word})`).join('')}.+`;\n\nexport const generateMatchAnyWordRegexp = string =>\n  string.trim().replace(/\\s+/g, '|');\n\nexport const splitStringIntoWords = string => string.trim().split(/\\s+/);\n\nexport const createRegexQuery = (fieldName, searchQuery) => {\n  const searchQueryWords = splitStringIntoWords(searchQuery);\n  const containsMultipleWords = searchQueryWords.length > 1;\n\n  if (containsMultipleWords) {\n    return {\n      [fieldName]: {\n        $regex: generateMatchAllWordsRegexp(searchQueryWords),\n        $options: 'gi',\n      },\n    };\n  }\n\n  return { [fieldName]: { $regex: searchQuery.trim(), $options: 'ix' } };\n};\n\nexport const createSearchFilters = (searchFieldsArray, searchQuery) => {\n  if (searchFieldsArray.length > 1) {\n    // multiple fields to match\n    return {\n      $or: searchFieldsArray.map(searchField =>\n        createRegexQuery(searchField, searchQuery)),\n    };\n  }\n  // single field to match\n  const fieldName = searchFieldsArray[0];\n  return createRegexQuery(fieldName, searchQuery);\n};\n","export const MORTGAGE_NOTE_TYPES = {\n  PAPER: 'PAPER',\n  REGISTRAR: 'REGISTRAR',\n};\n\nexport const MORTGAGE_NOTE_CATEGORIES = {\n  BEARER: 'BEARER',\n  REGISTERED: 'REGISTERED',\n};\n","import SimpleSchema from 'simpl-schema';\n\nimport { CUSTOM_AUTOFIELD_TYPES } from 'core/components/AutoForm2/constants';\nimport { CANTONS } from '../loans/loanConstants';\nimport zipcodes from '../../utils/zipcodes';\n\nexport const createdAt = {\n  type: Date,\n  autoValue() {\n    if (this.isInsert) {\n      return new Date();\n    }\n    this.unset();\n  },\n  optional: true,\n};\n\nexport const updatedAt = {\n  type: Date,\n  autoValue() {\n    if (this.isUpdate || this.isInsert || this.isUpsert) {\n      return new Date();\n    }\n  },\n  optional: true,\n};\n\nexport const additionalDocuments = initialDocuments => ({\n  additionalDocuments: { type: Array, defaultValue: initialDocuments },\n  'additionalDocuments.$': Object,\n  'additionalDocuments.$.id': String,\n  'additionalDocuments.$.label': { type: String, optional: true },\n  'additionalDocuments.$.requiredByAdmin': { type: Boolean, optional: true },\n  'additionalDocuments.$.category': { type: String, optional: true },\n});\n\nexport const address = {\n  address1: { type: String, optional: true },\n  address2: { type: String, optional: true },\n  zipCode: {\n    type: SimpleSchema.Integer,\n    optional: true,\n    min: 1000,\n    max: 99999,\n  },\n  city: { type: String, optional: true },\n  canton: {\n    type: String,\n    allowedValues: Object.keys(CANTONS),\n    optional: true,\n    autoValue() {\n      return zipcodes(this.field('zipCode').value);\n    },\n    uniforms: { placeholder: null },\n  },\n};\n\nexport const contactsSchema = {\n  contacts: { type: Array, defaultValue: [] },\n  'contacts.$': Object,\n  'contacts.$.name': { type: String, uniforms: { label: 'Prénom Nom' } },\n  'contacts.$.title': { type: String, uniforms: { label: 'Fonction/Titre' } },\n  'contacts.$.email': {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email,\n    optional: true,\n  },\n  'contacts.$.phoneNumber': {\n    type: String,\n    uniforms: { label: 'No. de Téléphone' },\n    optional: true,\n  },\n};\n\nexport const makePermissions = ({\n  permissionsSchema,\n  prefix,\n  autoFormDisplayCondition = () => true,\n  autoFormLabel,\n}) =>\n  Object.keys(permissionsSchema).reduce(\n    (permissions, key) => ({\n      ...permissions,\n      [`${prefix}.${key}`]: permissionsSchema[key],\n    }),\n    {\n      [prefix]: {\n        type: Object,\n        optional: true,\n        condition: autoFormDisplayCondition,\n        uniforms: { label: autoFormLabel || prefix },\n      },\n    },\n  );\n\nexport const userLinksSchema = permissionsSchema => ({\n  userLinks: { type: Array, defaultValue: [] },\n  'userLinks.$': Object,\n  'userLinks.$._id': { type: String, optional: true },\n  ...(permissionsSchema\n    ? makePermissions({ permissionsSchema, prefix: 'userLinks.$.permissions' })\n    : {}),\n});\n\nexport const mortgageNoteLinks = {\n  mortgageNoteLinks: { type: Array, optional: true },\n  'mortgageNoteLinks.$': Object,\n  'mortgageNoteLinks.$._id': { type: String, optional: true },\n};\n\nexport const roundedInteger = (digits) => {\n  const rounder = 10 ** digits;\n  return {\n    type: SimpleSchema.Integer,\n    min: 0,\n    max: 1000000000,\n    autoValue() {\n      if (this.isSet) {\n        return Math.round(this.value / rounder) * rounder;\n      }\n    },\n    optional: true,\n  };\n};\n\nexport const percentageField = {\n  type: Number,\n  min: -1,\n  max: 1,\n  optional: true,\n  autoValue() {\n    if (this.isSet) {\n      return Math.round(Number(this.value) * 10000) / 10000;\n    }\n  },\n  uniforms: { type: CUSTOM_AUTOFIELD_TYPES.PERCENT, placeholder: '0.00%' },\n};\n\nexport const moneyField = {\n  type: SimpleSchema.Integer,\n  min: 0,\n  max: 1000000000,\n  optional: true,\n  uniforms: { type: CUSTOM_AUTOFIELD_TYPES.MONEY },\n};\n\nexport const decimalMoneyField = {\n  ...moneyField,\n  type: Number,\n  uniforms: { type: CUSTOM_AUTOFIELD_TYPES.MONEY_DECIMAL },\n};\n\nexport const documentsField = {\n  type: Object,\n  defaultValue: {},\n  optional: true,\n  blackbox: true,\n};\n\nexport const dateField = {\n  type: Date,\n  optional: true,\n  uniforms: { type: CUSTOM_AUTOFIELD_TYPES.DATE },\n};\n\nexport const cacheField = {\n  type: Object,\n  optional: true,\n  blackbox: true,\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\n\nimport { ROLES } from 'core/api/constants';\n\nconst APP_URL = Meteor.settings.public.subdomains.app;\nconst PRO_URL = Meteor.settings.public.subdomains.pro;\n\nexport const IMPERSONATE_ROUTE = '/impersonate';\nexport const IMPERSONATE_USER_ID = 'userId';\nexport const IMPERSONATE_TOKEN = 'authToken';\n\nexport function generateImpersonateLink({ _id: userId, roles }) {\n  // eslint-disable-next-line no-underscore-dangle\n  const token = Accounts._storedLoginToken();\n  const queryString = `${IMPERSONATE_USER_ID}=${userId}&${IMPERSONATE_TOKEN}=${token}`;\n  const microserviceUrl = roles.includes(ROLES.USER) ? APP_URL : PRO_URL;\n\n  return `${microserviceUrl}${IMPERSONATE_ROUTE}?${queryString}`;\n}\n","import { Method } from '../methods/methods';\n\nexport const impersonateUser = new Method({\n  name: 'impersonateUser',\n  params: {\n    authToken: String,\n    userId: String,\n  },\n});\n\nexport const impersonateAdmin = new Method({\n  name: 'impersonateAdmin',\n  params: {\n    userId: String,\n  },\n});\n","// Inversed links need to be defined after direct links, use this\n// class to manage that\n// Might become obsolete after this is fixed in grapher\n// https://github.com/cult-of-coders/grapher/issues/200#issuecomment-500803766\nclass LinkInitializer {\n  constructor() {\n    this.direct = [];\n    this.inversed = [];\n  }\n\n  directInit(fn) {\n    this.direct.push(fn);\n  }\n\n  inversedInit(fn) {\n    this.inversed.push(fn);\n  }\n\n  setLinks() {\n    this.direct.forEach(fn => fn());\n    this.inversed.forEach(fn => fn());\n    // Don't unnecessarily store these functions\n    delete this.direct;\n    delete this.inversed;\n  }\n}\n\nexport default new LinkInitializer();\n","import '../activities/links';\nimport '../borrowers/links';\nimport '../contacts/links';\nimport '../lenderRules/links';\nimport '../lenders/links';\nimport '../loans/links';\nimport '../lots/links';\nimport '../mortgageNotes/links';\nimport '../notifications/links';\nimport '../offers/links';\nimport '../organisations/links';\nimport '../promotionLots/links';\nimport '../promotionOptions/links';\nimport '../promotions/links';\nimport '../properties/links';\nimport '../revenues/links';\nimport '../tasks/links';\nimport '../users/links';\nimport LinkInitializer from './LinkInitializer';\n\nLinkInitializer.setLinks();\n","import { Meteor } from 'meteor/meteor';\nimport ClientEventService from '../events/ClientEventService';\n\nconst isActive = () => !!global.window;\n\nconst init = () => {\n  if (isActive()) {\n    window.activeQueries = {};\n  }\n};\n\ninit();\n\nconst addQuery = (queryName, type) => {\n  // Add support for passing method config objects\n  if (typeof type === 'object') {\n    window.activeQueries[type.config.name] = [\n      ...(window.activeQueries[type.config.name] || []),\n      queryName,\n    ];\n  } else {\n    window.activeQueries[type] = [\n      ...(window.activeQueries[type] || []),\n      queryName,\n    ];\n  }\n};\n\nexport const addQueryToRefetch = (queryName, type) => {\n  if (isActive()) {\n    if (!type) {\n      return;\n    }\n\n    if (Array.isArray(type)) {\n      type.forEach((t) => {\n        addQuery(queryName, t);\n      });\n    } else {\n      addQuery(queryName, type);\n    }\n  }\n};\n\nexport const removeQueryToRefetch = (queryName) => {\n  if (isActive()) {\n    Object.keys(window.activeQueries).forEach((type) => {\n      if (Array.isArray(window.activeQueries[type])) {\n        window.activeQueries[type] = window.activeQueries[type].filter(query => query !== queryName);\n\n        // Clean up this particular refetch key if there is no query in it anymore\n        if (window.activeQueries[type].length === 0) {\n          window.activeQueries[type] = undefined;\n        }\n      }\n    });\n  }\n};\n\nexport const refetchQuery = query => ClientEventService.emit(query);\n\nexport const refetchQueries = (methodName) => {\n  if (isActive()) {\n    if (window.activeQueries.all) {\n      window.activeQueries.all.forEach(refetchQuery);\n    }\n\n    if (window.activeQueries[methodName]) {\n      window.activeQueries[methodName].forEach(refetchQuery);\n    }\n  }\n};\n\nif (Meteor.isAppTest && global.window) {\n  global.window.refetchQueries = refetchQueries;\n}\n","export * from './registerMethodDefinitions';\nexport * from './methods';\n","import { Match } from 'meteor/check';\nimport { Method } from './methods';\n\nexport const getMixpanelAuthorization = new Method({\n  name: 'getMixpanelAuthorization',\n});\n\nexport const getServerTime = new Method({\n  name: 'getServerTime',\n});\n\nexport const downloadPDF = new Method({\n  name: 'downloadPDF',\n  params: {\n    loanId: String,\n    type: String,\n  },\n});\n\nexport const addBorrower = new Method({\n  name: 'addBorrower',\n  params: {\n    loanId: String,\n    borrower: Match.Optional(Object),\n  },\n});\n\nexport const setUserToLoan = new Method({\n  name: 'setUserToLoan',\n  params: {\n    loanId: String,\n  },\n});\n\nexport const removeBorrower = new Method({\n  name: 'removeBorrower',\n  params: {\n    loanId: String,\n    borrowerId: String,\n  },\n});\n\nexport const submitContactForm = new Method({\n  name: 'submitContactForm',\n  params: {\n    name: String,\n    email: String,\n    phoneNumber: String,\n    details: Match.Optional(String),\n  },\n  rateLimit: {\n    global: {\n      limit: 1,\n      timeRange: 5000,\n    },\n  },\n});\n\nexport const addUserToDoc = new Method({\n  name: 'addUserToDoc',\n  params: {\n    docId: String,\n    collection: String,\n    options: Object,\n    userId: String,\n  },\n});\n\nexport const throwDevError = new Method({\n  name: 'throwDevError',\n  params: {\n    promise: Match.Maybe(Boolean),\n    promiseNoReturn: Match.Maybe(Boolean),\n  },\n});\n\nexport const setAdditionalDoc = new Method({\n  name: 'setAdditionalDoc',\n  params: {\n    collection: String,\n    id: String,\n    additionalDocId: String,\n    requiredByAdmin: Boolean,\n    label: Match.Optional(String),\n    category: Match.Optional(String),\n  },\n});\n\nexport const removeAdditionalDoc = new Method({\n  name: 'removeAdditionalDoc',\n  params: {\n    collection: String,\n    id: String,\n    additionalDocId: String,\n  },\n});\n\nexport const migrateToLatest = new Method({\n  name: 'migrateToLatest',\n});\n\nexport const updateDocument = new Method({\n  name: 'updateDocument',\n  params: {\n    collection: String,\n    docId: String,\n    object: Object,\n  },\n});\n\nexport const updateDocumentUnset = new Method({\n  name: 'updateDocumentUnset',\n  params: {\n    collection: String,\n    docId: String,\n    object: Object,\n  },\n});\n\nexport const generateScenario = new Method({\n  name: 'generateScenario',\n  params: {\n    scenario: Object,\n  },\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Mutation } from 'meteor/cultofcoders:mutations';\nimport { Match, check } from 'meteor/check';\n\nif (Meteor.isTest) {\n  Mutation.isDebugEnabled = false;\n} else {\n  Mutation.isDebugEnabled = { omit: ['analyticsPage', 'analyticsLogin'] };\n}\n\nexport class Method extends Mutation {\n  run(callParams = {}, options = {}) {\n    const { config } = this;\n    let location;\n    if (Meteor.isClient && window && window.location) {\n      location = {\n        href: window.location.href,\n        host: window.location.host,\n        pathname: window.location.pathname,\n      };\n    }\n\n    const aopData = { config, params: callParams };\n    Mutation.callAOP.executeBefores(aopData);\n    this.callAOP.executeBefores(aopData);\n\n    const { name, params } = config;\n    const additionalData = { location };\n\n    return new Promise((resolve, reject) => {\n      Meteor.apply(\n        name,\n        [callParams, additionalData],\n        options,\n        (error, result) => {\n          const aopData = {\n            config,\n            params: callParams,\n            result,\n            error,\n          };\n\n          Mutation.callAOP.executeAfters(aopData);\n          this.callAOP.executeAfters(aopData);\n\n          if (error) {\n            reject(error);\n          } else {\n            resolve(result);\n          }\n        },\n      );\n    });\n  }\n\n  setHandler(fn) {\n    const { config } = this;\n    const { name, params } = config;\n    const self = this;\n\n    Meteor.methods({\n      [name](params = {}, additionalData) {\n        check(additionalData, Object);\n        check(\n          additionalData.location,\n          Match.Maybe({\n            href: Match.Maybe(String),\n            host: Match.Maybe(String),\n            pathname: Match.Maybe(String),\n          }),\n        );\n\n        if (Meteor.isServer && additionalData.location) {\n          const { setClientUrl } = require('../../utils/server/getClientUrl');\n          setClientUrl(additionalData.location);\n        }\n\n        if (config.validate) {\n          config.validate(params);\n        } else if (config.params) {\n          check(params, config.params);\n        }\n\n        let aopData = {\n          context: this,\n          config,\n          params,\n        };\n\n        Mutation.executionAOP.executeBefores(aopData);\n        self.executionAOP.executeBefores(aopData);\n\n        let error;\n        let result;\n        try {\n          result = fn.call(null, this, params);\n        } catch (e) {\n          error = e;\n        }\n\n        aopData = {\n          context: this,\n          config,\n          params,\n          result,\n          error,\n        };\n\n        Mutation.executionAOP.executeAfters(aopData);\n        self.executionAOP.executeAfters(aopData);\n\n        if (error) {\n          throw error;\n        }\n\n        return result;\n      },\n    });\n  }\n}\n","// Export all method definitions here\nexport * from '../borrowers/methodDefinitions';\nexport * from '../contacts/methodDefinitions';\nexport * from '../email/methodDefinitions';\nexport * from '../files/methodDefinitions';\nexport * from '../impersonation/methodDefinitions';\nexport * from '../interestRates/methodDefinitions';\nexport * from '../irs10y/methodDefinitions';\nexport * from '../lenderRules/methodDefinitions';\nexport * from '../lenders/methodDefinitions';\nexport * from '../loans/methodDefinitions';\nexport * from '../lots/methodDefinitions';\nexport * from '../mortgageNotes/methodDefinitions';\nexport * from '../offers/methodDefinitions';\nexport * from '../organisations/methodDefinitions';\nexport * from '../pdf/methodDefinitions';\nexport * from '../promotionLots/methodDefinitions';\nexport * from '../promotionOptions/methodDefinitions';\nexport * from '../promotions/methodDefinitions';\nexport * from '../properties/methodDefinitions';\nexport * from '../slack/methodDefinitions';\nexport * from '../tasks/methodDefinitions';\nexport * from '../users/methodDefinitions';\nexport * from '../analytics/methodDefinitions';\n\nexport * from './methodDefinitions';\n","export { default } from './notifications';\n","import Notifications from './notifications';\nimport Users from '../users';\nimport Activities from '../activities';\nimport Tasks from '../tasks';\nimport Revenues from '../revenues';\n\nNotifications.addLinks({\n  recipients: {\n    collection: Users,\n    field: 'recipientLinks',\n    type: 'many',\n    metadata: true,\n  },\n  activity: {\n    collection: Activities,\n    field: 'activityLink',\n    type: 'one',\n    metadata: true,\n  },\n  task: {\n    collection: Tasks,\n    field: 'taskLink',\n    type: 'one',\n    metadata: true,\n  },\n  revenue: {\n    collection: Revenues,\n    field: 'revenueLink',\n    type: 'one',\n    metadata: true,\n  },\n});\n","export const NOTIFICATIONS_COLLECTION = 'notifications';\n\nexport const NOTIFICATION_QUERIES = {\n  ADMIN_NOTIFICATIONS: 'ADMIN_NOTIFICATIONS',\n};\n","import { Mongo } from 'meteor/mongo';\n\nimport SimpleSchema from 'simpl-schema';\n\nimport { createdAt, updatedAt } from '../helpers/sharedSchemas';\nimport { NOTIFICATIONS_COLLECTION } from './notificationConstants';\n\nconst Notifications = new Mongo.Collection(NOTIFICATIONS_COLLECTION);\nconst NotificationSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  recipientLinks: { type: Array, minCount: 1 },\n  'recipientLinks.$': Object,\n  'recipientLinks.$._id': String,\n  'recipientLinks.$.read': { type: Boolean, defaultValue: false },\n  'recipientLinks.$.readDate': { type: Date, optional: true },\n  'recipientLinks.$.snoozeDate': { type: Date, optional: true },\n  taskLink: { type: Object, optional: true },\n  'taskLink._id': String,\n  activityLink: { type: Object, optional: true },\n  'activityLink._id': String,\n  revenueLink: { type: Object, optional: true },\n  'revenueLink._id': String,\n});\n\nNotifications.attachSchema(NotificationSchema);\n\nexport default Notifications;\n","import Notifications from './notifications';\nimport { LOANS_COLLECTION } from '../loans/loanConstants';\n\nNotifications.addReducers({\n  relatedDoc: {\n    body: {\n      activity: { loan: { name: 1 } },\n      task: { loan: { name: 1 } },\n      revenue: { loan: { name: 1 } },\n    },\n    reduce: ({ activity, task, revenue }) => {\n      if (activity) {\n        if (activity.loan) {\n          return { ...activity.loan, collection: LOANS_COLLECTION };\n        }\n      }\n      if (task) {\n        if (task.loan) {\n          return { ...task.loan, collection: LOANS_COLLECTION };\n        }\n      }\n      if (revenue) {\n        if (revenue.loan) {\n          return { ...revenue.loan, collection: LOANS_COLLECTION };\n        }\n      }\n    },\n  },\n  title: {\n    body: {\n      task: { title: 1, dueAt: 1 },\n      activity: { title: 1, date: 1 },\n      revenue: { type: 1, description: 1 },\n    },\n    reduce: ({ task, activity, revenue }) => {\n      let title;\n      if (task) {\n        title = task.title;\n      } else if (activity) {\n        title = activity.title;\n      } else if (revenue) {\n        title = `Paiement \"${revenue.type}\" attendu`;\n      } else {\n        title = \"L'orgine de la notification a été supprimée\";\n      }\n\n      return title;\n    },\n  },\n});\n","import * as methodDefinitions from './methodDefinitions';\n\nexport * from './methodDefinitions';\nexport { default } from './offers';\nexport const offerMethods = methodDefinitions;\n","import Offers from './offers';\nimport { Users, Lenders } from '..';\n\nOffers.addLinks({\n  user: {\n    field: 'userId',\n    collection: Users,\n    type: 'one',\n  },\n  lender: {\n    field: 'lenderLink',\n    collection: Lenders,\n    type: 'one',\n    metadata: true,\n    denormalize: {\n      field: 'lenderCache',\n      body: {\n        loanLink: 1,\n      },\n    },\n  },\n});\n","import { Match } from 'meteor/check';\nimport { Method } from '../methods/methods';\n\nexport const offerInsert = new Method({\n  name: 'offerInsert',\n  params: {\n    offer: Object,\n  },\n});\n\nexport const offerUpdate = new Method({\n  name: 'offerUpdate',\n  params: {\n    offerId: String,\n    object: Object,\n  },\n});\n\nexport const offerDelete = new Method({\n  name: 'offerDelete',\n  params: {\n    offerId: String,\n  },\n});\n\nexport const offerSendFeedback = new Method({\n  name: 'offerSendFeedback',\n  params: {\n    offerId: String,\n    feedback: String,\n    saveFeedback: Match.Maybe(Boolean),\n  },\n});\n","export const OFFER_TYPE = {\n  STANDARD: 'STANDARD',\n  COUNTERPARTS: 'COUNTERPARTS',\n};\n\nexport const OFFERS_COLLECTION = 'offers';\n\nexport const OFFER_QUERIES = {\n  LOAN_OFFERS: 'LOAN_OFFERS',\n  ADMIN_OFFERS: 'ADMIN_OFFERS',\n};\n","import { Mongo } from 'meteor/mongo';\nimport SimpleSchema from 'simpl-schema';\n\nimport { INTEREST_RATES, OFFERS_COLLECTION } from '../constants';\nimport {\n  createdAt,\n  updatedAt,\n  percentageField,\n  moneyField,\n  cacheField,\n} from '../helpers/sharedSchemas';\n\nconst Offers = new Mongo.Collection(OFFERS_COLLECTION);\n\n// Prevent all client side modifications of mongoDB\nOffers.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true,\n});\nOffers.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false,\n});\n\nexport const OfferSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  organisationLink: { type: Object, optional: true },\n  'organisationLink._id': { type: String, optional: true },\n  contactLink: { type: Object, optional: true },\n  'contactLink._id': String,\n  'contactLink.feedback': { type: String, optional: true },\n  maxAmount: moneyField,\n  amortizationGoal: percentageField,\n  amortizationYears: {\n    type: SimpleSchema.Integer,\n    min: 0,\n    max: 100,\n    optional: true,\n  },\n  fees: moneyField,\n  epotekFees: moneyField,\n  // For each existing rate, insert an allowed value in the schema\n  ...Object.values(INTEREST_RATES).reduce(\n    (accumulator, interestKey) => ({\n      ...accumulator,\n      [interestKey]: percentageField,\n    }),\n    {},\n  ),\n  conditions: {\n    type: Array,\n    optional: true,\n    defaultValue: [],\n  },\n  'conditions.$': { type: String, optional: true },\n  lenderLink: { type: Object, optional: true },\n  'lenderLink._id': { type: String, optional: true },\n  feedback: { type: Object, optional: true },\n  'feedback.message': { type: String, optional: true },\n  'feedback.date': { type: Date, optional: true },\n  withCounterparts: { type: Boolean, optional: true },\n  enableOffer: { type: Boolean, defaultValue: true, optional: true },\n  lenderCache: cacheField,\n});\n\nexport const AdminOfferSchema = OfferSchema.omit(\n  'lenderLink',\n  'organisationLink',\n  'contactLink',\n  'createdAt',\n  'updatedAt',\n  'feedback',\n  'lenderCache',\n);\n\n// Attach schema\nOffers.attachSchema(OfferSchema);\nexport default Offers;\n","import { fullOffer } from '../fragments';\nimport { OFFER_QUERIES } from './offerConstants';\nimport Offers from '.';\n\nexport const adminOffers = Offers.createQuery(\n  OFFER_QUERIES.ADMIN_OFFERS,\n  fullOffer(),\n);\n\nexport const loanOffers = Offers.createQuery(OFFER_QUERIES.LOAN_OFFERS, {\n  ...fullOffer(),\n  $options: { sort: { createdAt: -1 } },\n});\n","import Offers from '.';\n\nOffers.addReducers({\n  loanId: {\n    body: { lender: { loan: { _id: 1 } } },\n    reduce: ({\n      lender: {\n        loan: { _id: loanId },\n      },\n    }) => loanId,\n  },\n  organisation: {\n    body: { lender: { organisation: { name: 1, logo: 1 } } },\n    reduce: ({ lender: { organisation } }) => organisation,\n  },\n});\n","export { default } from './organisations';\n","import LinkInitializer from '../links/LinkInitializer';\nimport { Contacts, Lenders, Users, LenderRules, Revenues, Tasks } from '..';\nimport Organisations from './organisations';\n\nOrganisations.addLinks({\n  contacts: {\n    collection: Contacts,\n    field: 'contactIds',\n    type: 'many',\n    metadata: true,\n  },\n  lenders: {\n    collection: Lenders,\n    inversedBy: 'organisation',\n  },\n  users: {\n    collection: Users,\n    field: 'userLinks',\n    type: 'many',\n    metadata: true,\n  },\n  lenderRules: {\n    collection: LenderRules,\n    inversedBy: 'organisation',\n    autoremove: true,\n  },\n  referredCustomers: {\n    collection: Users,\n    inversedBy: 'referredByOrganisation',\n    type: 'many',\n  },\n  revenues: {\n    collection: Revenues,\n    inversedBy: 'organisations',\n    type: 'many',\n  },\n  tasks: {\n    inversedBy: 'organisation',\n    collection: Tasks,\n    autoremove: true,\n  },\n});\n\nLinkInitializer.inversedInit(() => {\n  Organisations.addLinks({\n    sourceOfRevenues: {\n      collection: Revenues,\n      inversedBy: 'organisations',\n    },\n  });\n});\n","import { Match } from 'meteor/check';\nimport { Method } from '../methods/methods';\n\nexport const organisationInsert = new Method({\n  name: 'organisationInsert',\n  params: {\n    organisation: Object,\n  },\n});\n\nexport const organisationUpdate = new Method({\n  name: 'organisationUpdate',\n  params: {\n    organisationId: String,\n    object: Object,\n  },\n});\n\nexport const organisationRemove = new Method({\n  name: 'organisationRemove',\n  params: {\n    organisationId: String,\n  },\n});\n\nexport const addContactToOrgnaisation = new Method({\n  name: 'addContactToOrganisation',\n  params: {\n    organisationId: String,\n    contactId: String,\n    metadata: Object,\n  },\n});\n\nexport const addUserToOrganisation = new Method({\n  name: 'addUserToOrganisation',\n  params: {\n    organisationId: String,\n    userId: String,\n    metadata: Object,\n  },\n});\n\nexport const removeUserFromOrganisation = new Method({\n  name: 'removeUserFromOrganisation',\n  params: {\n    organisationId: String,\n    userId: String,\n  },\n});\n\nexport const setCommissionRates = new Method({\n  name: 'setCommissionRates',\n  params: {\n    organisationId: String,\n    commissionRates: Array,\n  },\n});\n","export const ORGANISATIONS_COLLECTION = 'organisations';\n\nexport const ORGANISATION_TYPES = {\n  BANK: 'BANK',\n  INSURANCE: 'INSURANCE',\n  PRIVATE_BANK: 'PRIVATE_BANK',\n  REAL_ESTATE_BROKER: 'REAL_ESTATE_BROKER',\n  NOTARY_OFFICE: 'NOTARY_OFFICE',\n  CONSTRUCTION_COMPANY: 'CONSTRUCTION_COMPANY',\n  DEVELOPER: 'DEVELOPER',\n  ARCHITECT: 'ARCHITECT',\n  OTHER: 'OTHER',\n};\n\nexport const ORGANISATION_QUERIES = {\n  ADMIN_ORGANISATIONS: 'ADMIN_ORGANISATIONS',\n  FILES: 'FILES',\n  ORGANISATION_SEARCH: 'ORGANISATION_SEARCH',\n  PRO_ORGANISATION: 'PRO_ORGANISATION',\n  USER_ORGANISATIONS: 'USER_ORGANISATIONS',\n};\n\nexport const ORGANISATION_FEATURES = {\n  LENDER: 'LENDER',\n  PRO: 'PRO',\n};\n\nexport const ORGANISATION_TAGS = {\n  CH_PREMIUM: 'CH_PREMIUM',\n  CH_RETAIL: 'CH_RETAIL',\n  FR_RETAIL: 'FR_RETAIL',\n  FR_PREMIUM: 'FR_PREMIUM',\n  YACHTING: 'YACHTING',\n  HELICOPTERS_LEASING: 'HELICOPTERS_LEASING',\n  LBO: 'LBO',\n};\n","import { Mongo } from 'meteor/mongo';\n\nimport SimpleSchema from 'simpl-schema';\n\nimport {\n  address,\n  percentageField,\n  moneyField,\n  documentsField,\n} from '../helpers/sharedSchemas';\nimport {\n  ORGANISATIONS_COLLECTION,\n  ORGANISATION_TYPES,\n  ORGANISATION_FEATURES,\n  ORGANISATION_TAGS,\n} from './organisationConstants';\n\n// console.trace();\n\nconst Organisations = new Mongo.Collection(ORGANISATIONS_COLLECTION);\n\nOrganisations.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true,\n});\n\nOrganisations.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false,\n});\n\nexport const OrganisationSchema = new SimpleSchema({\n  name: {\n    type: String,\n    uniforms: { placeholder: 'Crédit Suisse' },\n    unique: true,\n  },\n  type: {\n    type: String,\n    allowedValues: Object.values(ORGANISATION_TYPES),\n    uniforms: { displayEmpty: false },\n  },\n  features: {\n    type: Array,\n    optional: true,\n    defaultValue: [],\n    uniforms: { placeholder: null },\n  },\n  'features.$': {\n    type: String,\n    allowedValues: Object.values(ORGANISATION_FEATURES),\n  },\n  logo: {\n    type: String,\n    optional: true,\n  },\n  ...address,\n  contactIds: { type: Array, defaultValue: [] },\n  'contactIds.$': Object,\n  'contactIds.$._id': { type: String, optional: true },\n  'contactIds.$.title': { type: String, optional: true },\n  'contactIds.$.useSameAddress': { type: Boolean, optional: true },\n  tags: {\n    type: Array,\n    optional: true,\n    defaultValue: [],\n    uniforms: { placeholder: null },\n  },\n  'tags.$': { type: String, allowedValues: Object.values(ORGANISATION_TAGS) },\n  userLinks: { type: Array, defaultValue: [] },\n  'userLinks.$': Object,\n  'userLinks.$._id': { type: String, optional: true },\n  'userLinks.$.title': { type: String, optional: true },\n  'userLinks.$.isMain': { type: Boolean, optional: true },\n  'userLinks.$.shareCustomers': { type: Boolean, optional: true },\n  commissionRates: { type: Array, defaultValue: [] },\n  'commissionRates.$': Object,\n  'commissionRates.$.rate': percentageField,\n  'commissionRates.$.threshold': moneyField,\n  documents: documentsField,\n  lenderRulesCount: { type: Number, optional: true },\n});\n\nOrganisations.attachSchema(OrganisationSchema);\nexport default Organisations;\n","import { createSearchFilters } from '../helpers';\nimport { fullOrganisation, userOrganisation } from '../fragments';\nimport {\n  ORGANISATION_QUERIES,\n  ORGANISATION_FEATURES,\n} from './organisationConstants';\nimport Organisations from '.';\n\nexport const adminOrganisations = Organisations.createQuery(\n  ORGANISATION_QUERIES.ADMIN_ORGANISATIONS,\n  fullOrganisation(),\n  { scoped: true },\n);\n\nexport const organisationSearch = Organisations.createQuery(\n  ORGANISATION_QUERIES.ORGANISATION_SEARCH,\n  {\n    $filter({ filters, params: { searchQuery } }) {\n      Object.assign(\n        filters,\n        createSearchFilters(['name', '_id', 'type'], searchQuery),\n      );\n    },\n    name: 1,\n    $options: { sort: { name: 1 }, limit: 5 },\n  },\n);\n\nexport const proOrganisation = Organisations.createQuery(\n  ORGANISATION_QUERIES.PRO_ORGANISATION,\n  fullOrganisation(),\n);\n\nexport const userOrganisations = Organisations.createQuery(\n  ORGANISATION_QUERIES.USER_ORGANISATIONS,\n  {\n    $filter({ filters }) {\n      filters.features = { $in: [ORGANISATION_FEATURES.LENDER] };\n    },\n    $options: { sort: { name: 1 } },\n    ...userOrganisation(),\n  },\n);\n","import addressReducer from '../reducers/addressReducer';\nimport Organisations from './organisations';\nimport { fullOffer } from '../fragments';\n\nOrganisations.addReducers({\n  ...addressReducer,\n  offers: {\n    body: {\n      lenders: { offers: fullOffer() },\n    },\n    reduce: ({ lenders = [] }) =>\n      lenders.reduce(\n        (allOffers, { offers = [] }) => [...allOffers, ...offers],\n        [],\n      ),\n  },\n  offerCount: {\n    body: {\n      lenders: { offers: { _id: 1 } },\n    },\n    reduce: ({ lenders = [] }) =>\n      lenders.reduce((tot, { offers = [] }) => tot + offers.length, 0),\n  },\n});\n","import { Match } from 'meteor/check';\nimport { Method } from '../methods/methods';\nimport { PDF_TYPES } from './pdfConstants';\n\nexport const generatePDF = new Method({\n  name: 'generatePDF',\n  params: {\n    type: Match.OneOf(...Object.values(PDF_TYPES)),\n    params: Object,\n    options: Object,\n    htmlOnly: Match.Maybe(Boolean),\n  },\n});\n","export const PDF_TYPES = {\n  LOAN: 'LOAN',\n};\n\nexport const TEMPLATES = {\n  [PDF_TYPES.LOAN]: {\n    name: 1,\n    purchaseType: 1,\n    residenceType: 1,\n    borrowers: [\n      {\n        gender: 1,\n        zipCode: { $or: 'sameAddress' },\n        city: { $or: 'sameAddress' },\n      },\n    ],\n    structure: {\n      ownFunds: [1],\n      property: {\n        propertyType: 1,\n        address1: 1,\n        zipCode: 1,\n        city: 1,\n      },\n    },\n    user: {\n      assignedEmployee: {\n        name: 1,\n        email: 1,\n        phoneNumbers: [1],\n      },\n    },\n  },\n};\n\nexport const A4_HEIGHT = 295;\nexport const MARGIN_TOP = 10;\nexport const MARGIN_BOTTOM = 15;\nexport const MARGIN_SIDE = 15;\nexport const WIGGLE_ROOM = 2; // Required to make things fit on one page\nexport const CONTENT_HEIGHT = A4_HEIGHT - MARGIN_BOTTOM - MARGIN_TOP - WIGGLE_ROOM;\nexport const BORDER_BLUE = '#213875';\nexport const BORDER_GREY = '#DEE2E6';\n","const addressReducer = {\n  address: {\n    body: {\n      address1: 1,\n      zipCode: 1,\n      city: 1,\n    },\n    reduce(object) {\n      const { address1, zipCode, city } = object;\n      return address1\n        ? `${address1}, ${zipCode} ${city}`\n        : 'Aucune addresse indiquée';\n    },\n  },\n};\n\nexport default addressReducer;\n","import '../borrowers/reducers';\nimport '../contacts/reducers';\nimport '../loans/reducers';\nimport '../lots/reducers';\nimport '../notifications/reducers';\nimport '../offers/reducers';\nimport '../organisations/reducers';\nimport '../promotionLots/reducers';\nimport '../promotionOptions/reducers';\nimport '../promotions/reducers';\nimport '../properties/reducers';\nimport '../users/reducers';\n","export const DOCUMENT_USER_PERMISSIONS = {\n  MODIFY: 'MODIFY',\n  READ: 'READ',\n};\n","import { Match } from 'meteor/check';\nimport { Method } from '../methods/methods';\n\nexport const notifyAssignee = new Method({\n  name: 'notifyAssignee',\n  params: {\n    message: Match.Optional(String),\n    title: Match.Optional(String),\n  },\n});\n\nexport const notifyOfUpload = new Method({\n  name: 'notifyOfUpload',\n  params: {\n    docLabel: String,\n    fileName: String,\n    loanId: Match.Optional(String),\n  },\n});\n\nexport const logError = new Method({\n  name: 'logError',\n  params: {\n    error: Match.Any,\n    additionalData: Match.Maybe(Match.Any),\n    url: Match.Optional(String),\n  },\n});\n","import * as methodDefinitions from './methodDefinitions';\n\nexport * from './methodDefinitions';\nexport { default } from './tasks';\nexport const taskMethods = methodDefinitions;\n","import Tasks from './tasks';\nimport { Users, Loans } from '..';\nimport Notifications from '../notifications';\nimport Promotions from '../promotions';\nimport Organisations from '../organisations';\nimport Lenders from '../lenders';\n\nTasks.addLinks({\n  assignee: {\n    field: 'assigneeLink',\n    collection: Users,\n    type: 'one',\n    metadata: true,\n  },\n  loan: {\n    field: 'loanLink',\n    collection: Loans,\n    type: 'one',\n    metadata: true,\n  },\n  user: {\n    field: 'userLink',\n    collection: Users,\n    type: 'one',\n    metadata: true,\n  },\n  promotion: {\n    field: 'promotionLink',\n    collection: Promotions,\n    type: 'one',\n    metadata: true,\n  },\n  organisation: {\n    field: 'organisationLink',\n    collection: Organisations,\n    type: 'one',\n    metadata: true,\n  },\n  lender: {\n    field: 'lenderLink',\n    collection: Lenders,\n    type: 'one',\n    metadata: true,\n  },\n  notifications: {\n    collection: Notifications,\n    inversedBy: 'task',\n    autoremove: true,\n  },\n});\n","import { Method } from '../methods/methods';\n\nexport const taskInsert = new Method({\n  name: 'taskInsert',\n  params: {\n    object: Object,\n  },\n});\n\nexport const taskUpdate = new Method({\n  name: 'taskUpdate',\n  params: {\n    taskId: String,\n    object: Object,\n  },\n});\n\nexport const taskComplete = new Method({\n  name: 'taskComplete',\n  params: {\n    taskId: String,\n  },\n});\n\nexport const taskChangeStatus = new Method({\n  name: 'taskChangeStatus',\n  params: {\n    taskId: String,\n    newStatus: String,\n  },\n});\n\nexport const setAssigneeOfTask = new Method({\n  name: 'setAssigneeOfTask',\n  params: {\n    taskId: String,\n    newAssigneeId: String,\n  },\n});\n","export const TASKS_COLLECTION = 'tasks';\n\nexport const TASK_STATUS = {\n  ACTIVE: 'ACTIVE',\n  COMPLETED: 'COMPLETED',\n  CANCELLED: 'CANCELLED',\n};\n\nexport const TASK_QUERIES = {\n  TASKS: 'TASKS',\n  UNASSIGNED_TASKS: 'UNASSIGNED_TASKS',\n  TASKS_FOR_DOC: 'TASKS_FOR_DOC',\n  SIDENAV_TASKS: 'SIDENAV_TASKS',\n};\n\nexport const TASK_PRIORITIES = {\n  DEFAULT: 'DEFAULT',\n  HIGH: 'HIGH',\n};\n","import { Mongo } from 'meteor/mongo';\nimport SimpleSchema from 'simpl-schema';\n\nimport { createdAt, updatedAt } from '../helpers/sharedSchemas';\nimport {\n  TASK_STATUS,\n  TASKS_COLLECTION,\n  TASK_PRIORITIES,\n} from './taskConstants';\n\nconst Tasks = new Mongo.Collection(TASKS_COLLECTION);\n\n// Prevent all client side modifications of mongoDB\nTasks.deny({\n  insert: () => true,\n  update: () => true,\n  remove: () => true,\n});\n\nTasks.allow({\n  insert: () => false,\n  update: () => false,\n  remove: () => false,\n});\n\nexport const TasksSchema = new SimpleSchema({\n  createdAt,\n  updatedAt,\n  status: {\n    type: String,\n    defaultValue: TASK_STATUS.ACTIVE,\n    allowedValues: Object.values(TASK_STATUS),\n  },\n  completedAt: {\n    type: Date,\n    optional: true,\n  },\n  dueAt: {\n    type: Date,\n    optional: true,\n  },\n  createdBy: {\n    type: String,\n    optional: true,\n    autoValue() {\n      if (this.isInsert) {\n        return this.userId;\n      }\n      this.unset();\n    },\n  },\n  assigneeLink: {\n    type: Object,\n    optional: true,\n  },\n  'assigneeLink._id': {\n    type: String,\n    optional: true,\n  },\n  title: {\n    type: String,\n    optional: true,\n  },\n  description: {\n    type: String,\n    optional: true,\n  },\n  loanLink: {\n    type: Object,\n    optional: true,\n  },\n  'loanLink._id': {\n    type: String,\n    optional: true,\n  },\n  userLink: {\n    type: Object,\n    optional: true,\n  },\n  'userLink._id': {\n    type: String,\n    optional: true,\n  },\n  promotionLink: {\n    type: Object,\n    optional: true,\n  },\n  'promotionLink._id': {\n    type: String,\n    optional: true,\n  },\n  organisationLink: {\n    type: Object,\n    optional: true,\n  },\n  'organisationLink._id': {\n    type: String,\n    optional: true,\n  },\n  lenderLink: {\n    type: Object,\n    optional: true,\n  },\n  'lenderLink._id': {\n    type: String,\n    optional: true,\n  },\n  isPrivate: {\n    type: Boolean,\n    defaultValue: false,\n  },\n  priority: {\n    type: String,\n    defaultValue: TASK_PRIORITIES.DEFAULT,\n    allowedValues: Object.values(TASK_PRIORITIES),\n  },\n});\n\nTasks.attachSchema(TasksSchema);\nexport default Tasks;\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport * as fragments from '../fragments';\n\nconst checkFields = (obj) => {\n  Object.keys(obj).forEach((fieldName) => {\n    const field = obj[fieldName];\n    expect(typeof field).to.not.equal('function', fieldName);\n    expect(field).to.not.equal(undefined, fieldName);\n\n    if (typeof field === 'object') {\n      checkFields(field);\n    }\n  });\n};\n\ndescribe('fragments', () => {\n  it('mortgageNote is defined', () => {\n    expect(fragments.loanBorrower().mortgageNotes).to.deep.include({\n      value: 1,\n    });\n  });\n\n  it('works', () => {\n    expect(fragments.adminLoan()).to.deep.include({ status: 1 });\n  });\n\n  describe('fragments are all well defined and do not crash', () => {\n    Object.keys(fragments).forEach((fragmentName) => {\n      it(fragmentName, () => {\n        const fragmentCreator = fragments[fragmentName];\n        const fragment = fragmentCreator();\n\n        checkFields(fragment);\n      });\n    });\n  });\n});\n","export const UPDATE_WATCHERS_COLLECTION = 'updateWatchers';\n","import * as methodDefinitions from './methodDefinitions';\n\nexport * from './methodDefinitions';\nexport { default } from './users';\nexport const userMutations = methodDefinitions;\n","import Users from './users';\nimport {\n  Loans,\n  Offers,\n  Borrowers,\n  Properties,\n  Promotions,\n  Contacts,\n  Organisations,\n  Tasks,\n} from '..';\n\nconst assignedEmployeeCache = {\n  _id: 1,\n  firstName: 1,\n  lastName: 1,\n};\n\nUsers.addLinks({\n  assignedEmployee: {\n    collection: Users,\n    field: 'assignedEmployeeId',\n    type: 'one',\n    denormalize: {\n      field: 'assignedEmployeeCache',\n      body: assignedEmployeeCache,\n    },\n  },\n  assignedEndUsers: {\n    collection: Users,\n    inversedBy: 'assignedEmployee',\n  },\n  assignedPromotions: {\n    collection: Promotions,\n    inversedBy: 'assignedEmployee',\n  },\n  assignedTasks: {\n    collection: Tasks,\n    inversedBy: 'assignee',\n  },\n  borrowers: {\n    collection: Borrowers,\n    inversedBy: 'user',\n    autoremove: true,\n  },\n  contact: {\n    collection: Contacts,\n    inversedBy: 'user',\n  },\n  loans: {\n    collection: Loans,\n    inversedBy: 'user',\n    autoremove: true,\n  },\n  promotions: {\n    collection: Promotions,\n    inversedBy: 'users',\n  },\n  properties: {\n    collection: Properties,\n    inversedBy: 'user',\n    autoremove: true,\n  },\n  offers: {\n    collection: Offers,\n    inversedBy: 'user',\n  },\n  organisations: {\n    collection: Organisations,\n    inversedBy: 'users',\n  },\n  proProperties: {\n    collection: Properties,\n    inversedBy: 'users',\n  },\n  referredByUser: {\n    collection: Users,\n    field: 'referredByUserLink',\n    type: 'one',\n  },\n  referredCustomers: {\n    collection: Users,\n    inversedBy: 'referredByUser',\n    type: 'many',\n  },\n  referredByOrganisation: {\n    collection: Organisations,\n    field: 'referredByOrganisationLink',\n    type: 'one',\n  },\n  tasks: {\n    collection: Tasks,\n    inversedBy: 'user',\n    autoremove: true,\n  },\n});\n","import { check, Match } from 'meteor/check';\nimport { Meteor } from 'meteor/meteor';\n\nimport { Method } from '../methods/methods';\n\nexport const doesUserExist = new Method({\n  name: 'doesUserExist',\n  params: {\n    email: String,\n  },\n});\n\nexport const sendVerificationLink = new Method({\n  name: 'sendVerificationLink',\n  params: {\n    userId: Match.Optional(String),\n  },\n});\n\nexport const assignAdminToUser = new Method({\n  name: 'assignAdminToUser',\n  params: {\n    userId: String,\n    adminId: String,\n  },\n});\n\nexport const assignAdminToNewUser = new Method({\n  name: 'assignAdminToNewUser',\n  params: {\n    userId: String,\n    adminId: String,\n  },\n});\n\nexport const setRole = new Method({\n  name: 'setRole',\n  params: {\n    userId: String,\n    role: String,\n  },\n});\n\nexport const adminCreateUser = new Method({\n  name: 'adminCreateUser',\n  params: {\n    options: Object,\n    role: String,\n  },\n});\n\nexport const updateUser = new Method({\n  name: 'updateUser',\n  params: {\n    userId: String,\n    object: Object,\n  },\n});\n\nexport const getUserByPasswordResetToken = new Method({\n  name: 'getUserByPasswordResetToken',\n  params: {\n    token: String,\n  },\n});\n\nexport const testCreateUser = new Method({\n  name: 'testCreateUser',\n  params: {\n    user: Object,\n  },\n});\n\nexport const removeUser = new Method({\n  name: 'removeUser',\n  params: {\n    userId: String,\n  },\n});\n\nexport const sendEnrollmentEmail = new Method({\n  name: 'sendEnrollmentEmail',\n  params: {\n    userId: String,\n  },\n});\n\nexport const changeEmail = new Method({\n  name: 'changeEmail',\n  params: {\n    userId: String,\n    newEmail: String,\n  },\n});\n\nexport const userUpdateOrganisations = new Method({\n  name: 'userUpdateOrganisations',\n  params: {\n    userId: String,\n    newOrganisations: Array,\n  },\n});\n\nexport const testUserAccount = new Method({\n  name: 'testUserAccount',\n  params: {\n    email: String,\n    password: String,\n    role: String,\n  },\n});\n\nexport const generateApiKeyPair = new Method({\n  name: 'generateApiKeyPair',\n  params: {\n    userId: String,\n  },\n});\n\nexport const proInviteUser = new Method({\n  name: 'proInviteUser',\n  params: {\n    user: Object,\n    propertyIds: Match.Maybe([String]),\n    promotionIds: Match.Maybe([String]),\n    properties: Match.Maybe(Array),\n    shareSolvency: Match.Maybe(Match.OneOf(Boolean, undefined)),\n  },\n});\n\nexport const getUserByEmail = new Method({\n  name: 'getUserByEmail',\n  params: {\n    email: String,\n  },\n});\n\nexport const setUserReferredBy = new Method({\n  name: 'setUserReferredBy',\n  params: {\n    userId: String,\n    proId: String,\n  },\n});\n\nexport const setUserReferredByOrganisation = new Method({\n  name: 'setUserReferredByOrganisation',\n  params: { userId: String, organisationId: String },\n});\n\nexport const proInviteUserToOrganisation = new Method({\n  name: 'proInviteUserToOrganisation',\n  params: { user: Object, organisationId: String, title: String },\n});\n\nexport const proSetShareCustomers = new Method({\n  name: 'proSetShareCustomers',\n  params: { userId: String, organisationId: String, shareCustomers: Boolean },\n});\n\nexport const anonymousCreateUser = new Method({\n  name: 'anonymousCreateUser',\n  params: {\n    loanId: Match.Maybe(String),\n    user: {\n      firstName: String,\n      lastName: String,\n      email: String,\n      phoneNumber: String,\n    },\n    trackingId: String,\n    referralId: Match.Maybe(String),\n  },\n});\n\nexport const referralExists = new Method({\n  name: 'referralExists',\n  params: {\n    ref: String,\n  },\n});\n","import {\n  createRegexQuery,\n  generateMatchAnyWordRegexp,\n} from '../helpers/mongoHelpers';\nimport {\n  adminUser,\n  appUser as appUserFragment,\n  fullUser,\n  proUser as proUserFragment,\n} from '../fragments';\n\nimport { USER_QUERIES } from './userConstants';\nimport Users from '.';\n\nexport const adminUsers = Users.createQuery(\n  USER_QUERIES.ADMIN_USERS,\n  adminUser(),\n);\n\nexport const appUser = Users.createQuery(\n  USER_QUERIES.APP_USER,\n  appUserFragment(),\n  { scoped: true },\n);\n\nexport const currentUser = Users.createQuery(\n  USER_QUERIES.CURRENT_USER,\n  fullUser(),\n  { scoped: true },\n);\n\nexport const proReferredByUsers = Users.createQuery(\n  USER_QUERIES.PRO_REFERRED_BY,\n  () => {},\n);\n\nexport const proUser = Users.createQuery(\n  USER_QUERIES.PRO_USER,\n  proUserFragment(),\n);\n\nexport const userEmails = Users.createQuery(USER_QUERIES.USER_EMAILS, {\n  $filter({ filters, params: { _id } }) {\n    filters._id = _id;\n  },\n  sentEmails: 1,\n});\n\nexport const userSearch = Users.createQuery(USER_QUERIES.USER_SEARCH, {\n  $filter({ filters, params: { searchQuery, roles } }) {\n    const formattedSearchQuery = generateMatchAnyWordRegexp(searchQuery);\n    if (roles) {\n      filters.roles = { $in: roles };\n    }\n    filters.$or = [\n      createRegexQuery('_id', searchQuery),\n      createRegexQuery('emails.0.address', searchQuery),\n      createRegexQuery('firstName', searchQuery),\n      createRegexQuery('lastName', searchQuery),\n      {\n        $and: [\n          createRegexQuery('firstName', formattedSearchQuery),\n          createRegexQuery('lastName', formattedSearchQuery),\n        ],\n      },\n    ];\n  },\n  assignedEmployee: { name: 1 },\n  createdAt: 1,\n  email: 1,\n  loans: { name: 1 },\n  name: 1,\n  organisations: { name: 1 },\n  roles: 1,\n  $options: { limit: 5 },\n});\n","import { getUserDisplayName } from 'core/utils/userFunctions';\nimport Users from './users';\n\nUsers.addReducers({\n  email: {\n    body: {\n      emails: 1,\n    },\n    reduce: ({ emails }) => emails && emails.length && emails[0].address,\n  },\n  name: {\n    body: { firstName: 1, lastName: 1, emails: 1 },\n    reduce: getUserDisplayName,\n  },\n  phoneNumber: {\n    body: {\n      phoneNumbers: 1,\n    },\n    reduce: ({ phoneNumbers = [] }) =>\n      (!!phoneNumbers.length && phoneNumbers[0]) || '',\n  },\n});\n","// Not actually used to create a meteor collection, but useful to switch()\n// on collection names\nexport const USERS_COLLECTION = 'users';\n\nexport const ROLES = {\n  ADMIN: 'admin',\n  DEV: 'dev',\n  USER: 'user',\n  PRO: 'pro',\n};\n\nexport const USER_QUERIES = {\n  ADMIN_USERS: 'ADMIN_USERS',\n  APP_USER: 'APP_USER',\n  CURRENT_USER: 'CURRENT_USER',\n  PRO_REFERRED_BY: 'PRO_REFERRED_BY',\n  PRO_USER: 'PRO_USER',\n  REFERRED_USERS: 'REFERRED_USERS',\n  USER_EMAILS: 'USER_EMAILS',\n  USER_SEARCH: 'USER_SEARCH',\n};\n\nexport const USER_EVENTS = {\n  USER_CREATED: 'USER_CREATED',\n};\n\nexport const LOCAL_STORAGE_REFERRAL = 'REFERRAL_ID';\nexport const LOCAL_STORAGE_OLD_REFERRAL = 'OLD_REFERRAL_ID';\n","import SimpleSchema from 'simpl-schema';\nimport { Meteor } from 'meteor/meteor';\n\nimport { createdAt, updatedAt, cacheField } from '../helpers/sharedSchemas';\nimport { ROLES } from './userConstants';\n\nexport const UserSchema = new SimpleSchema({\n  username: {\n    type: String,\n    // For accounts-password, either emails or username is required, but not both. It is OK to make this\n    // optional here because the accounts-password package does its own validation.\n    // Third-party login packages may not require either. Adjust this schema as necessary for your usage.\n    optional: true,\n  },\n  emails: {\n    type: Array,\n    // For accounts-password, either emails or username is required, but not both. It is OK to make this\n    // optional here because the accounts-password package does its own validation.\n    // Third-party login packages may not require either. Adjust this schema as necessary for your usage.\n    optional: true,\n  },\n  'emails.$': {\n    type: Object,\n  },\n  'emails.$.address': {\n    type: String,\n    regEx: SimpleSchema.RegEx.Email,\n  },\n  'emails.$.verified': {\n    type: Boolean,\n  },\n  createdAt,\n  updatedAt,\n  // Make sure this services field is in your schema if you're using any of the accounts packages\n  services: {\n    type: Object,\n    optional: true,\n    blackbox: true,\n  },\n  // Add `roles` to your schema if you use the meteor-roles package.\n  // Option 1: Object type\n  // If you specify that type as Object, you must also specify the\n  // `Roles.GLOBAL_GROUP` group whenever you add a user to a role.\n  // Example:\n  // Roles.addUsersToRoles(userId, [\"admin\"], Roles.GLOBAL_GROUP);\n  // You can't mix and match adding with and without a group since\n  // you will fail validation in some cases.\n  // roles: {\n  //   type: Object,\n  //   optional: true,\n  //   blackbox: true,\n  // },\n  // Option 2: [String] type\n  // If you are sure you will never need to use role groups, then\n  // you can specify [String] as the type\n  roles: {\n    type: Array,\n    optional: true,\n    defaultValue: [ROLES.USER],\n  },\n  'roles.$': {\n    type: String,\n    allowedValues: Object.values(ROLES),\n  },\n  // In order to avoid an 'Exception in setInterval callback' from Meteor\n  heartbeat: {\n    type: Date,\n    optional: true,\n  },\n  assignedEmployeeId: {\n    type: String,\n    optional: true,\n  },\n  firstName: {\n    type: String,\n    optional: true,\n  },\n  lastName: {\n    type: String,\n    optional: true,\n  },\n  phoneNumbers: {\n    type: Array,\n    optional: true,\n  },\n  'phoneNumbers.$': {\n    type: String,\n  },\n  apiPublicKey: {\n    type: Object,\n    optional: true,\n  },\n  'apiPublicKey.publicKey': {\n    type: String,\n    optional: true,\n  },\n  'apiPublicKey.createdAt': { type: Date, optional: true },\n  referredByUserLink: { type: String, optional: true },\n  referredByOrganisationLink: { type: String, optional: true },\n  assignedEmployeeCache: cacheField,\n});\n\nMeteor.users.attachSchema(UserSchema);\n\nconst Users = Meteor.users;\nexport default Users;\n","import './initialization';\nimport './files/meteor-slingshot';\nimport './links';\nimport './reducers/registerReducers';\n","// @flow\nimport { BORROWERS_COLLECTION } from './borrowers/borrowerConstants';\nimport { LOANS_COLLECTION } from './loans/loanConstants';\nimport { LOTS_COLLECTION } from './lots/lotConstants';\nimport { OFFERS_COLLECTION } from './offers/offerConstants';\nimport { ORGANISATIONS_COLLECTION } from './organisations/organisationConstants';\nimport { PROMOTION_LOTS_COLLECTION } from './promotionLots/promotionLotConstants';\nimport { PROMOTION_OPTIONS_COLLECTION } from './promotionOptions/promotionOptionConstants';\nimport { PROMOTIONS_COLLECTION } from './promotions/promotionConstants';\nimport { PROPERTIES_COLLECTION } from './properties/propertyConstants';\nimport { TASKS_COLLECTION } from './tasks/taskConstants';\nimport { USERS_COLLECTION } from './users/userConstants';\nimport { INTEREST_RATES_COLLECTION } from './interestRates/interestRatesConstants';\nimport { IRS10Y_COLLECTION } from './irs10y/irs10yConstants';\nimport { MORTGAGE_NOTES_COLLECTION } from './mortgageNotes/mortgageNoteConstants';\nimport { CONTACTS_COLLECTION } from './contacts/contactsConstants';\nimport { LENDERS_COLLECTION } from './lenders/lenderConstants';\nimport { LENDER_RULES_COLLECTION } from './lenderRules/lenderRulesConstants';\nimport { REVENUES_COLLECTION } from './revenues/revenueConstants';\n\nexport * from './borrowers/borrowerConstants';\nexport * from './contacts/contactsConstants';\nexport * from './email/emailConstants';\nexport * from './files/fileConstants';\nexport * from './helpers/sharedSchemaConstants';\nexport * from './interestRates/interestRatesConstants';\nexport * from './irs10y/irs10yConstants';\nexport * from './lenderRules/lenderRulesConstants';\nexport * from './lenders/lenderConstants';\nexport * from './loans/loanConstants';\nexport * from './lots/lotConstants';\nexport * from './mortgageNotes/mortgageNoteConstants';\nexport * from './offers/offerConstants';\nexport * from './organisations/organisationConstants';\nexport * from './pdf/pdfConstants';\nexport * from './promotionLots/promotionLotConstants';\nexport * from './promotionOptions/promotionOptionConstants';\nexport * from './promotions/promotionConstants';\nexport * from './properties/propertyConstants';\nexport * from './revenues/revenueConstants';\nexport * from './security/constants';\nexport * from './tasks/taskConstants';\nexport * from './updateWatchers/updateWatcherConstants';\nexport * from './users/userConstants';\n\nexport const SUCCESS = 'SUCCESS';\nexport const WARNING = 'WARNING';\nexport const ERROR = 'ERROR';\n\n// Preserve order, as we sometimes loop over these, and the most common\n// collections should come first\nexport const COLLECTIONS = {\n  LOANS_COLLECTION,\n  BORROWERS_COLLECTION,\n  PROPERTIES_COLLECTION,\n  PROMOTIONS_COLLECTION,\n  LOTS_COLLECTION,\n  PROMOTION_OPTIONS_COLLECTION,\n  PROMOTION_LOTS_COLLECTION,\n  TASKS_COLLECTION,\n  OFFERS_COLLECTION,\n  ORGANISATIONS_COLLECTION,\n  USERS_COLLECTION,\n  INTEREST_RATES_COLLECTION,\n  IRS10Y_COLLECTION,\n  MORTGAGE_NOTES_COLLECTION,\n  CONTACTS_COLLECTION,\n  LENDERS_COLLECTION,\n  LENDER_RULES_COLLECTION,\n  REVENUES_COLLECTION,\n};\n","// import merge from 'lodash/merge';\n\nimport { Meteor } from 'meteor/meteor';\nimport { INTEREST_RATES } from './constants';\n\n// //\n// // activity fragments\n// //\nexport const activity = () => ({\n  createdAt: 1,\n  createdBy: 1,\n  date: 1,\n  description: 1,\n  loan: { name: 1 },\n  secondaryType: 1,\n  shouldNotify: 1,\n  title: 1,\n  type: 1,\n  updatedAt: 1,\n});\n\n// //\n// // borrower fragments\n// //\nexport const baseBorrower = () => ({\n  createdAt: 1,\n  firstName: 1,\n  lastName: 1,\n  name: 1,\n  updatedAt: 1,\n  userId: 1,\n});\n\nexport const loanBorrower = ({ withSort } = {}) => ({\n  ...baseBorrower(),\n  additionalDocuments: 1,\n  address1: 1,\n  address2: 1,\n  adminValidation: 1,\n  age: 1,\n  bank3A: 1,\n  bankFortune: 1,\n  birthDate: 1,\n  birthPlace: 1,\n  bonus2015: 1,\n  bonus2016: 1,\n  bonus2017: 1,\n  bonus2018: 1,\n  bonus2019: 1,\n  bonusExists: 1,\n  canton: 1,\n  childrenCount: 1,\n  citizenship: 1,\n  city: 1,\n  civilStatus: 1,\n  company: 1,\n  documents: 1,\n  expenses: 1,\n  gender: 1,\n  hasOwnCompany: 1,\n  insurance2: 1,\n  insurance3A: 1,\n  insurance3B: 1,\n  isSwiss: 1,\n  isUSPerson: 1,\n  loans: { name: 1 },\n  mortgageNotes: mortgageNote(),\n  netSalary: 1,\n  otherFortune: 1,\n  otherIncome: 1,\n  ownCompanies: 1,\n  personalBank: 1,\n  realEstate: 1,\n  residencyPermit: 1,\n  salary: 1,\n  sameAddress: 1,\n  step: 1,\n  thirdPartyFortune: 1,\n  worksForOwnCompany: 1,\n  zipCode: 1,\n  ...(withSort ? { $options: { sort: { createdAt: 1 } } } : {}),\n});\n\nexport const adminBorrower = () => ({\n  ...loanBorrower(),\n  loans: loanBase(),\n  user: appUser(),\n});\n\n// //\n// // Contact fragments\n// //\nexport const contact = () => ({\n  address: 1,\n  address1: 1,\n  address2: 1,\n  canton: 1,\n  city: 1,\n  email: 1,\n  emails: 1,\n  firstName: 1,\n  lastName: 1,\n  name: 1,\n  organisations: { name: 1, address: 1 },\n  phoneNumber: 1,\n  phoneNumbers: 1,\n  zipCode: 1,\n  offers: { _id: 1 },\n});\n\n// //\n// // InterestRate fragments\n// //\nconst singleInterestRate = type => ({\n  [type]: { rateLow: 1, rateHigh: 1, trend: 1 },\n});\n\nconst rates = Object.values(INTEREST_RATES).reduce(\n  (interestRates, type) => ({\n    ...interestRates,\n    ...singleInterestRate(type),\n  }),\n  {},\n);\n\nexport const interestRates = () => ({\n  ...rates,\n  createdAt: 1,\n  updatedAt: 1,\n  date: 1,\n});\n\nexport const currentInterestRates = () => ({\n  ...rates,\n  date: 1,\n});\n\n// //\n// // Irs10Y fragments\n// //\nexport const irs10y = () => ({\n  date: 1,\n  rate: 1,\n});\n\n// //\n// // Lender fragments\n// //\nexport const lender = () => ({\n  contact: contact(),\n  loan: { _id: 1 },\n  offers: fullOffer(),\n  organisation: {\n    address: 1,\n    address1: 1,\n    address2: 1,\n    canton: 1,\n    city: 1,\n    contacts: contact(),\n    logo: 1,\n    name: 1,\n    type: 1,\n    zipCode: 1,\n  },\n});\n\nexport const adminLender = () => ({\n  ...lender(),\n  status: 1,\n  adminNote: 1,\n});\n\n// //\n// // LenderRules fragments\n// //\nexport const lenderRules = () => ({\n  adminComments: 1,\n  allowPledge: 1,\n  amortizationGoal: 1,\n  amortizationYears: 1,\n  bonusAlgorithm: 1,\n  bonusConsideration: 1,\n  bonusHistoryToConsider: 1,\n  companyIncomeConsideration: 1,\n  companyIncomeHistoryToConsider: 1,\n  createdAt: 1,\n  dividendsConsideration: 1,\n  dividendsHistoryToConsider: 1,\n  expensesSubtractFromIncome: 1,\n  filter: 1,\n  fortuneReturnsRatio: 1,\n  incomeConsiderationType: 1,\n  investmentIncomeConsideration: 1,\n  maxBorrowRatio: 1,\n  maxBorrowRatioWithPledge: 1,\n  maxIncomeRatio: 1,\n  maxIncomeRatioTight: 1,\n  minCash: 1,\n  name: 1,\n  order: 1,\n  organisation: { name: 1 },\n  pdfComments: 1,\n  pensionIncomeConsideration: 1,\n  realEstateIncomeAlgorithm: 1,\n  realEstateIncomeConsideration: 1,\n  realEstateIncomeConsiderationType: 1,\n  theoreticalInterestRate: 1,\n  theoreticalInterestRate2ndRank: 1,\n  theoreticalMaintenanceRate: 1,\n  updatedAt: 1,\n});\n\n// //\n// // Loan fragments\n// //\nexport const loan = () => ({\n  additionalDocuments: 1,\n  applicationType: 1,\n  anonymous: 1,\n  borrowerIds: 1,\n  borrowers: { firstName: 1, lastName: 1, name: 1 },\n  canton: 1,\n  createdAt: 1,\n  currentOwner: 1,\n  customName: 1,\n  enableOffers: 1,\n  futureOwner: 1,\n  hasProProperty: 1,\n  hasPromotion: 1,\n  name: 1,\n  otherOwner: 1,\n  previousLender: 1,\n  previousLoanTranches: 1,\n  promotions: {\n    address: 1,\n    contacts: 1,\n    lenderOrganisationLink: 1,\n    name: 1,\n    type: 1,\n    users: { name: 1, email: 1, phoneNumber: 1 },\n  },\n  properties: { totalValue: 1, address1: 1 },\n  propertyIds: 1,\n  purchaseType: 1,\n  residenceType: 1,\n  selectedStructure: 1,\n  status: 1,\n  step: 1,\n  structure: 1,\n  structures: {\n    amortization: 1,\n    amortizationType: 1,\n    description: 1,\n    disabled: 1,\n    id: 1,\n    loanTranches: 1,\n    mortgageNoteIds: 1,\n    name: 1,\n    notaryFees: 1,\n    offerId: 1,\n    ownFunds: 1,\n    promotionOptionId: 1,\n    propertyId: 1,\n    propertyValue: 1,\n    propertyWork: 1,\n    sortOffersBy: 1,\n    wantedLoan: 1,\n  },\n  updatedAt: 1,\n  userId: 1,\n  verificationStatus: 1,\n  shareSolvency: 1,\n  simpleBorrowersForm: 1,\n});\n\nexport const loanBase = () => ({\n  ...loan(),\n  promotionOptions: loanPromotionOption(),\n});\n\nconst userPropertyValue = { borrowRatio: 1, propertyValue: 1 };\nconst adminPropertyValue = { ...userPropertyValue, organisationName: 1 };\nconst userMaxPropertyValue = {\n  main: { min: userPropertyValue, max: userPropertyValue },\n  second: { min: userPropertyValue, max: userPropertyValue },\n  canton: 1,\n  date: 1,\n  borrowerHash: 1,\n};\nconst adminMaxPropertyValue = {\n  main: { min: adminPropertyValue, max: adminPropertyValue },\n  second: { min: adminPropertyValue, max: adminPropertyValue },\n  canton: 1,\n  date: 1,\n  borrowerHash: 1,\n};\n\nexport const userLoan = ({ withSort, withFilteredPromotions } = {}) => ({\n  ...loanBase(),\n  adminValidation: 1,\n  borrowers: loanBorrower({ withSort }),\n  contacts: 1,\n  displayWelcomeScreen: 1,\n  documents: 1,\n  offers: 1,\n  properties: userProperty({ withSort }),\n  user: appUser(),\n  userFormsEnabled: 1,\n  maxPropertyValue: userMaxPropertyValue,\n  ...(withFilteredPromotions\n    ? {\n      promotions: {\n        address: 1,\n        contacts: 1,\n        documents: { promotionImage: 1 },\n        lenderOrganisationLink: 1,\n        name: 1,\n        status: 1,\n        type: 1,\n        canton: 1,\n        users: {\n          _id: 1,\n          name: 1,\n          email: 1,\n          phoneNumber: 1,\n          organisations: { users: { title: 1 } },\n        },\n        loans: {\n          _id: 1,\n          $filter({ filters, params: { loanId } }) {\n            filters.userId = Meteor.userId();\n            filters._id = loanId;\n          },\n        },\n      },\n    }\n    : {}),\n});\n\nexport const adminLoan = ({ withSort } = {}) => ({\n  ...userLoan({ withSort }),\n  adminNote: 1,\n  category: 1,\n  lenders: adminLender(),\n  maxPropertyValue: adminMaxPropertyValue,\n  nextDueTask: 1,\n  properties: adminProperty({ withSort }),\n  revenues: revenue(),\n  status: 1,\n  tasksCache: {\n    createdAt: 1,\n    dueAt: 1,\n    status: 1,\n    title: 1,\n    isPrivate: 1,\n    assigneeLink: 1,\n  },\n  user: adminUser(),\n  financedPromotion: { name: 1 },\n  financedPromotionLink: 1,\n});\n\nexport const adminLoans = () => ({\n  ...loanBase(),\n  borrowers: { name: 1 },\n  category: 1,\n  properties: { totalValue: 1, address1: 1 },\n  status: 1,\n  user: { assignedEmployee: { email: 1 }, name: 1 },\n});\n\nexport const proLoans = () => ({\n  anonymous: 1,\n  createdAt: 1,\n  name: 1,\n  status: 1,\n  promotions: {\n    name: 1,\n    users: { _id: 1 },\n    status: 1,\n    lenderOrganisationLink: 1,\n  },\n  promotionLinks: 1,\n  promotionOptions: {\n    name: 1,\n    status: 1,\n    promotionLots: { attributedTo: { user: { _id: 1 } } },\n    solvency: 1,\n    value: 1,\n  },\n  loanProgress: 1,\n  user: {\n    name: 1,\n    phoneNumbers: 1,\n    email: 1,\n    referredByUser: { name: 1, organisations: { name: 1 } },\n    referredByOrganisation: { name: 1 },\n  },\n  hasPromotion: 1,\n  hasProProperty: 1,\n  maxPropertyValue: userMaxPropertyValue,\n  properties: { address1: 1, category: 1, users: { _id: 1 }, totalValue: 1 },\n  referralId: 1,\n  residenceType: 1,\n  shareSolvency: 1,\n  structure: 1,\n});\n\n// //\n// // MortgageNote fragments\n// //\nexport const mortgageNote = () => ({\n  canton: 1,\n  category: 1,\n  rank: 1,\n  type: 1,\n  value: 1,\n});\n\n// //\n// // Notification fragments\n// //\nexport const notification = () => ({\n  activity: activity(),\n  createdAt: 1,\n  readAt: 1,\n  recipients: { firstName: 1, lastName: 1, name: 1 },\n  relatedDoc: 1,\n  task: task(),\n  title: 1,\n  revenue: revenue(),\n  updatedAt: 1,\n});\n\n// //\n// // Offer fragments\n// //\nexport const fullOffer = () => ({\n  amortizationGoal: 1,\n  amortizationYears: 1,\n  conditions: 1,\n  epotekFees: 1,\n  feedback: 1,\n  ...Object.values(INTEREST_RATES).reduce(\n    (obj, rate) => ({ ...obj, [rate]: 1 }),\n    {},\n  ),\n  fees: 1,\n  lender: {\n    loan: {\n      status: 1,\n      name: 1,\n      user: { name: 1, assignedEmployee: { email: 1, name: 1, firstName: 1 } },\n      borrowers: { name: 1 },\n    },\n    contact: { name: 1, email: 1 },\n    organisation: { name: 1, lenderRules: lenderRules() },\n  },\n  loanId: 1,\n  maxAmount: 1,\n  organisation: 1,\n  user: simpleUser(),\n  createdAt: 1,\n  withCounterparts: 1,\n  enableOffer: 1,\n});\n\n// //\n// // Organisation fragments\n// //\nexport const baseOrganisation = () => ({\n  address: 1,\n  address1: 1,\n  address2: 1,\n  canton: 1,\n  city: 1,\n  contacts: { title: 1, email: 1, name: 1 },\n  features: 1,\n  logo: 1,\n  name: 1,\n  type: 1,\n  zipCode: 1,\n  tags: 1,\n  users: { _id: 1 },\n});\n\nexport const fullOrganisation = () => ({\n  ...baseOrganisation(),\n  commissionRate: 1,\n  commissionRates: 1,\n  contacts: contact(),\n  documents: 1,\n  generatedRevenues: 1,\n  lenderRules: lenderRules(),\n  lenders: lender(),\n  offers: 1,\n  offerCount: 1,\n  users: organisationUser(),\n});\n\nexport const userOrganisation = () => ({\n  logo: 1,\n  name: 1,\n  lenderRules: lenderRules(),\n});\n\n// //\n// // PromotionLot fragments\n// //\nexport const proPromotionLot = () => ({\n  attributedTo: { user: { name: 1 } },\n  createdAt: 1,\n  documents: 1,\n  lots: { name: 1, value: 1, type: 1, description: 1 },\n  name: 1,\n  promotion: {\n    status: 1,\n    name: 1,\n    promotionLots: { name: 1 },\n    users: { _id: 1 },\n    lots: {\n      name: 1,\n      value: 1,\n      type: 1,\n      description: 1,\n      promotionLots: { _id: 1 },\n    },\n  },\n  promotionOptions: { _id: 1 },\n  properties: promotionProperty(),\n  status: 1,\n  updatedAt: 1,\n  value: 1,\n});\n\nexport const appPromotionLot = () => ({\n  attributedTo: { user: { _id: 1 } },\n  createdAt: 1,\n  documents: 1,\n  lots: { name: 1, value: 1, type: 1, description: 1 },\n  name: 1,\n  promotion: { name: 1, status: 1 },\n  properties: promotionProperty(),\n  reducedStatus: 1,\n  status: 1,\n  updatedAt: 1,\n  value: 1,\n});\n\n// //\n// // PromotionOption fragments\n// //\nexport const fullPromotionOption = () => ({\n  canton: 1,\n  createdAt: 1,\n  custom: 1,\n  loan: { name: 1 },\n  lots: { name: 1, type: 1, status: 1, description: 1 },\n  priority: 1,\n  promotionLots: { name: 1, promotion: { name: 1 } },\n  solvency: 1,\n  updatedAt: 1,\n});\n\nexport const proPromotionOption = () => ({\n  canton: 1,\n  createdAt: 1,\n  custom: 1,\n  loan: {\n    name: 1,\n    solvency: 1,\n    status: 1,\n    user: { phoneNumbers: 1, name: 1, email: 1 },\n    promotions: { users: { _id: 1, name: 1, organisations: { name: 1 } } },\n    promotionOptions: {\n      name: 1,\n      promotionLots: { attributedTo: { user: { _id: 1 } } },\n      solvency: 1,\n    },\n    loanProgress: 1,\n  },\n  lots: { name: 1, type: 1, description: 1 },\n  priority: 1,\n  solvency: 1,\n  updatedAt: 1,\n  promotion: { users: { _id: 1 } },\n  promotionLots: { _id: 1 },\n});\n\nexport const appPromotionOption = () => ({\n  attributedToMe: 1,\n  canton: 1,\n  createdAt: 1,\n  custom: 1,\n  lots: { description: 1, name: 1, type: 1, value: 1 },\n  promotionLots: appPromotionLot(),\n  priority: 1,\n  solvency: 1,\n  updatedAt: 1,\n});\n\nexport const loanPromotionOption = () => ({\n  attributedToMe: 1,\n  canton: 1,\n  custom: 1,\n  name: 1,\n  priority: 1,\n  promotion: 1,\n  promotionLots: {\n    name: 1,\n    status: 1,\n    reducedStatus: 1,\n    value: 1,\n    properties: promotionProperty(),\n  },\n  solvency: 1,\n  value: 1,\n});\n\n// //\n// // Promotion fragments\n// //\nexport const basePromotion = () => ({\n  address: 1,\n  address1: 1,\n  availablePromotionLots: 1,\n  bookedPromotionLots: 1,\n  canton: 1,\n  city: 1,\n  constructionTimeline: 1,\n  contacts: 1,\n  createdAt: 1,\n  documents: 1,\n  lenderOrganisation: { name: 1, logo: 1 },\n  loans: { _id: 1 },\n  lots: {\n    value: 1,\n    name: 1,\n    type: 1,\n    description: 1,\n    promotionLots: { name: 1 },\n    status: 1,\n  },\n  name: 1,\n  promotionLots: {\n    status: 1,\n    reducedStatus: 1,\n    lots: { name: 1 },\n    promotionOptions: { _id: 1 },\n    name: 1,\n  },\n  properties: promotionProperty(),\n  soldPromotionLots: 1,\n  status: 1,\n  type: 1,\n  updatedAt: 1,\n  users: {\n    name: 1,\n    email: 1,\n    roles: 1,\n    phoneNumber: 1,\n    organisations: { name: 1 },\n  },\n  zipCode: 1,\n});\n\nexport const proPromotion = ({ withFilteredLoan } = {}) => ({\n  ...basePromotion(),\n  assignedEmployee: { name: 1, email: 1 },\n  assignedEmployeeId: 1,\n  promotionLots: {\n    attributedTo: { user: { name: 1 } },\n    lots: { name: 1, value: 1, type: 1, description: 1, status: 1 },\n    name: 1,\n    promotionOptions: { _id: 1 },\n    properties: promotionProperty(),\n    reducedStatus: 1,\n    status: 1,\n    value: 1,\n    promotion: { _id: 1 },\n  },\n  promotionLoan: { _id: 1, name: 1 },\n  ...(withFilteredLoan\n    ? {\n      loans: {\n        $filter({ filters, params: { loanId } }) {\n          filters._id = loanId;\n        },\n      },\n    }\n    : {}),\n});\n\nexport const proPromotions = () => ({\n  ...basePromotion(),\n  promotionLots: { attributedTo: { user: { name: 1 } }, promotion: { _id: 1 } },\n});\n\nexport const adminPromotions = proPromotion;\n\nexport const searchPromotions = () => ({\n  createdAt: 1,\n  name: 1,\n  promotionLotLinks: 1,\n  updatedAt: 1,\n});\n\nexport const propertySummary = () => ({\n  address: 1,\n  address1: 1,\n  address2: 1,\n  canton: 1,\n  city: 1,\n  externalId: 1,\n  externalUrl: 1,\n  imageUrls: 1,\n  insideArea: 1,\n  organisation: 1,\n  promotion: { name: 1 },\n  propertyType: 1,\n  status: 1,\n  thumbnail: 1,\n  totalValue: 1,\n  userId: 1,\n  value: 1,\n  zipCode: 1,\n});\n\nexport const fullProperty = ({ withSort } = {}) => ({\n  ...propertySummary(),\n  additionalDocuments: 1,\n  additionalMargin: 1,\n  adminValidation: 1,\n  areaNorm: 1,\n  bathroomCount: 1,\n  category: 1,\n  constructionValue: 1,\n  constructionYear: 1,\n  copropertyPercentage: 1,\n  createdAt: 1,\n  description: 1,\n  documents: 1,\n  flatType: 1,\n  floorNumber: 1,\n  gardenArea: 1,\n  houseType: 1,\n  investmentRent: 1,\n  isCoproperty: 1,\n  isNew: 1,\n  landArea: 1,\n  landValue: 1,\n  latitude: 1,\n  loans: loanBase(),\n  longitude: 1,\n  minergie: 1,\n  mortgageNotes: mortgageNote(),\n  name: 1,\n  numberOfFloors: 1,\n  parkingInside: 1,\n  parkingOutside: 1,\n  pictures: 1,\n  promotion: { name: 1 },\n  renovationYear: 1,\n  residenceType: 1,\n  roomCount: 1,\n  terraceArea: 1,\n  totalValue: 1,\n  updatedAt: 1,\n  user: appUser(),\n  users: { _id: 1 },\n  useOpenGraph: 1,\n  volume: 1,\n  volumeNorm: 1,\n  yearlyExpenses: 1,\n  ...(withSort ? { $options: { sort: { createdAt: 1 } } } : {}),\n});\n\nexport const adminProperty = ({ withSort } = {}) => ({\n  ...fullProperty({ withSort }),\n  loanCount: 1,\n  useOpenGraph: 1,\n});\n\nexport const promotionProperty = () => ({\n  additionalMargin: 1,\n  address: 1,\n  bathroomCount: 1,\n  canton: 1,\n  constructionValue: 1,\n  description: 1,\n  gardenArea: 1,\n  insideArea: 1,\n  landValue: 1,\n  mortgageNotes: mortgageNote(),\n  name: 1,\n  propertyType: 1,\n  roomCount: 1,\n  terraceArea: 1,\n  totalValue: 1,\n  value: 1,\n  yearlyExpenses: 1,\n});\n\nexport const userProperty = ({ withSort } = {}) => {\n  const obj = { ...fullProperty({ withSort }) };\n  delete obj.users;\n  return obj;\n};\n\nexport const proPropertySummary = () => ({\n  address1: 1,\n  city: 1,\n  status: 1,\n  totalValue: 1,\n  loanCount: 1,\n});\n\nexport const proProperty = ({ withSort } = {}) => ({\n  ...fullProperty({ withSort }),\n  loanCount: 1,\n  useOpenGraph: 1,\n  users: { name: 1, organisations: { name: 1 }, email: 1, phoneNumber: 1 },\n});\n\nexport const apiProperty = () => ({\n  externalId: 1,\n  address1: 1,\n  address2: 1,\n  city: 1,\n  zipCode: 1,\n  value: 1,\n  description: 1,\n  propertyType: 1,\n  houseType: 1,\n  flatType: 1,\n  roomCount: 1,\n  insideArea: 1,\n  landArea: 1,\n  terraceArea: 1,\n  constructionYear: 1,\n  externalUrl: 1,\n  useOpenGraph: 1,\n  imageUrls: 1,\n});\n\n// //\n// // Task fragments\n// //\nexport const baseTask = () => ({\n  completedAt: 1,\n  createdAt: 1,\n  dueAt: 1,\n  status: 1,\n  title: 1,\n  description: 1,\n  updatedAt: 1,\n  isPrivate: 1,\n  priority: 1,\n});\n\nexport const task = () => ({\n  ...baseTask(),\n  assigneeLink: 1,\n  assignee: simpleUser(),\n  loan: { name: 1, borrowers: { name: 1 }, user: { name: 1 } },\n  user: { name: 1 },\n});\n\n// //\n// // User fragments\n// //\nexport const simpleUser = () => ({\n  email: 1,\n  emails: 1,\n  name: 1,\n  firstName: 1,\n  lastName: 1,\n  phoneNumbers: 1,\n  phoneNumber: 1,\n  roles: 1,\n});\n\nexport const organisationUser = () => ({\n  ...simpleUser(),\n  organisations: baseOrganisation(),\n});\n\nexport const fullUser = () => ({\n  ...simpleUser(),\n  apiPublicKey: 1,\n  assignedEmployee: simpleUser(),\n  createdAt: 1,\n  emails: 1,\n  loans: loanBase(),\n  updatedAt: 1,\n  organisations: fullOrganisation(),\n});\n\nexport const adminUser = () => ({\n  ...fullUser(),\n  assignedEmployee: simpleUser(),\n  assignedEmployeeCache: 1,\n  promotions: { name: 1, status: 1 },\n  proProperties: { address1: 1, status: 1, loanCount: 1, totalValue: 1 },\n  referredByUser: { name: 1, organisations: { name: 1 } },\n  referredByOrganisation: { name: 1 },\n  referredByOrganisationLink: 1,\n});\n\nexport const appUser = () => ({\n  ...fullUser(),\n  assignedEmployee: simpleUser(),\n  borrowers: { name: 1 },\n  loans: {\n    borrowers: { _id: 1, name: 1 },\n    customName: 1,\n    hasPromotion: 1,\n    hasProProperty: 1,\n    name: 1,\n    promotions: { address: 1, name: 1, documents: 1 },\n    properties: { address: 1, documents: 1 },\n    purchaseType: 1,\n    step: 1,\n  },\n  properties: { _id: 1 },\n});\n\nexport const proUser = () => ({\n  ...fullUser(),\n  assignedEmployee: simpleUser(),\n  promotions: { _id: 1, name: 1, permissions: 1, status: 1, users: { _id: 1 } },\n  properties: { _id: 1 },\n  proProperties: {\n    _id: 1,\n    address1: 1,\n    permissions: 1,\n    status: 1,\n    users: { _id: 1 },\n  },\n});\n\n// //\n// // Revenues fragments\n// //\nexport const revenue = () => ({\n  amount: 1,\n  createdAt: 1,\n  description: 1,\n  expectedAt: 1,\n  loan: { name: 1 },\n  organisationLinks: 1,\n  organisations: { name: 1 },\n  paidAt: 1,\n  secondaryType: 1,\n  sourceOrganisationLink: 1,\n  sourceOrganisation: { name: 1 },\n  status: 1,\n  type: 1,\n});\n","// @flow\nimport './initialization';\nimport { Meteor } from 'meteor/meteor';\n\nimport * as _constants from './constants';\nimport LoanSchema from './loans/schemas/LoanSchema';\nimport PromotionOptionSchema from './promotionOptions/schemas/PromotionOptionSchema';\nimport BorrowerSchema from './borrowers/schemas/BorrowerSchema';\nimport PropertySchema from './properties/schemas/PropertySchema';\nimport { TasksSchema } from './tasks/tasks';\nimport PromotionSchema from './promotions/schemas/PromotionSchema';\nimport LotSchema from './lots/schemas/LotSchema';\nimport { OfferSchema } from './offers/offers';\nimport PromotionLotSchema from './promotionLots/schemas/PromotionLotSchema';\nimport { OrganisationSchema } from './organisations/organisations';\nimport { UserSchema } from './users/users';\nimport InterestRatesSchema from './interestRates/schemas/interestRatesSchema';\nimport Irs10ySchema from './irs10y/schemas/irs10ySchema';\nimport MortgageNoteSchema from './mortgageNotes/schemas/MortgageNoteSchema';\nimport ContactSchema from './contacts/schemas/contactSchema';\nimport LenderSchema from './lenders/schemas/lenderSchema';\nimport RevenueSchema from './revenues/schemas/revenueSchema';\n\nexport { default as Borrowers } from './borrowers';\nexport { default as Loans } from './loans';\nexport { default as Lots } from './lots';\nexport { default as Offers } from './offers';\nexport { default as Organisations } from './organisations';\nexport { default as PromotionLots } from './promotionLots';\nexport { default as PromotionOptions } from './promotionOptions';\nexport { default as Promotions } from './promotions';\nexport { default as Properties } from './properties';\nexport { default as Tasks } from './tasks';\nexport { default as Users } from './users';\nexport { default as InterestRates } from './interestRates';\nexport { default as Irs10y } from './irs10y';\nexport { default as MortgageNotes } from './mortgageNotes';\nexport { default as Contacts } from './contacts';\nexport { default as Lenders } from './lenders';\nexport { default as LenderRules } from './lenderRules';\nexport { default as Revenues } from './revenues';\n\nexport * from './methods';\nexport * from './helpers';\nexport * from './containerToolkit';\n\n// Do this for autocompletion...\nexport const constants = _constants;\nexport const schemas = {\n  [constants.BORROWERS_COLLECTION]: BorrowerSchema,\n  [constants.LOANS_COLLECTION]: LoanSchema,\n  [constants.LOTS_COLLECTION]: LotSchema,\n  [constants.OFFERS_COLLECTION]: OfferSchema,\n  [constants.PROMOTION_LOTS_COLLECTION]: PromotionLotSchema,\n  [constants.PROMOTION_OPTIONS_COLLECTION]: PromotionOptionSchema,\n  [constants.PROMOTIONS_COLLECTION]: PromotionSchema,\n  [constants.PROPERTIES_COLLECTION]: PropertySchema,\n  [constants.TASKS_COLLECTION]: TasksSchema,\n  [constants.ORGANISATIONS_COLLECTION]: OrganisationSchema,\n  [constants.USERS_COLLECTION]: UserSchema,\n  [constants.INTEREST_RATES_COLLECTION]: InterestRatesSchema,\n  [constants.IRS10Y_COLLECTION]: Irs10ySchema,\n  [constants.MORTGAGE_NOTES_COLLECTION]: MortgageNoteSchema,\n  [constants.CONTACTS_COLLECTION]: ContactSchema,\n  [constants.LENDERS_COLLECTION]: LenderSchema,\n  [constants.REVENUES_COLLECTION]: RevenueSchema,\n};\n\nMeteor.isStaging = Meteor.settings.public.environment === 'staging';\nMeteor.isDevEnvironment = Meteor.settings.public.environment === 'dev-production';\n","// Leave this imported here for autoforms to work\nimport 'uniforms-bridge-simple-schema-2';\nimport SimpleSchema from 'simpl-schema';\n\nSimpleSchema.extendOptions([\n  'condition',\n  'customAllowedValues',\n  'customAutoValue',\n]);\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport Widget1Suggester from '../Widget1Suggester';\n\ndescribe('Widget1SuggesterClass', () => {\n  describe('getMaxPossibleLoan', () => {\n    it('returns the hard cap if salary is not a problem', () => {\n      expect(Widget1Suggester.getMaxPossibleLoan({ property: 10000, salary: 5000 })).to.equal(8000);\n    });\n    it('returns a value modified by salary', () => {\n      expect(Widget1Suggester.getMaxPossibleLoan({\n        property: 1000000,\n        salary: 120000,\n      })).to.equal(600000);\n    });\n  });\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\nimport merge from 'lodash/merge';\n\nimport widget1Suggesters, { makeSuggestValue } from '../widget1Suggestion';\nimport {\n  PURCHASE_TYPE,\n  SALARY,\n  PROPERTY,\n  FORTUNE,\n  WANTED_LOAN,\n} from '../widget1Constants';\n\nconst value = 100;\nconst prepareState = overrides => ({\n  widget1: merge(\n    {\n      purchaseType: PURCHASE_TYPE.ACQUISITION,\n      property: { value, auto: false },\n      salary: { value, auto: false },\n      fortune: { value, auto: false },\n      currentLoan: { value, auto: false },\n      wantedLoan: { value, auto: false },\n    },\n    overrides,\n  ),\n});\n\ndescribe('suggestValue', () => {\n  let suggesters;\n  const createSuggestValue = () => makeSuggestValue(suggesters);\n\n  beforeEach(() => {\n    suggesters = {\n      [PURCHASE_TYPE.ACQUISITION]: {\n        [SALARY]: {},\n      },\n      [PURCHASE_TYPE.REFINANCING]: {},\n    };\n  });\n\n  it('should not suggest a value if it is currently manual', () => {\n    expect(createSuggestValue()('salary', prepareState())).to.equal(value);\n  });\n\n  it('should suggest a value with \"all\" if it is in auto and the others false', () => {\n    suggesters[PURCHASE_TYPE.ACQUISITION][SALARY].all = () => 1;\n    expect(createSuggestValue()('salary', prepareState({ salary: { auto: true } }))).to.equal(1);\n  });\n\n  it('should suggest a value with \"fortune\" if property is in auto', () => {\n    suggesters[PURCHASE_TYPE.ACQUISITION][SALARY].fortune = () => 1;\n    expect(createSuggestValue()(\n      'salary',\n      prepareState({ salary: { auto: true }, property: { auto: true } }),\n    )).to.equal(1);\n  });\n\n  it('should use the default suggester if none is found', () => {\n    suggesters[PURCHASE_TYPE.ACQUISITION][SALARY] = { default: () => 42 };\n    expect(createSuggestValue()(SALARY, prepareState({ salary: { auto: true } }))).to.equal(42);\n  });\n});\n\ndescribe('widget1Suggesters', () => {\n  describe('salary', () => {\n    it('suggests a salary with all', () => {\n      expect(widget1Suggesters(\n        SALARY,\n        prepareState({\n          salary: { auto: true },\n          property: { auto: false },\n          fortune: { auto: false },\n        }),\n      )).to.equal(5);\n    });\n\n    it('suggests a salary with all and proper values', () => {\n      expect(widget1Suggesters(\n        SALARY,\n        prepareState({\n          salary: { auto: true },\n          property: { auto: false, value: 1000000 },\n          fortune: { auto: false, value: 250000 },\n        }),\n        // + 1 here because of rounding issues\n      )).to.equal(180000 + 1);\n    });\n\n    it('suggests a salary with property', () => {\n      expect(widget1Suggesters(\n        SALARY,\n        prepareState({\n          salary: { auto: true },\n          property: { auto: false },\n          fortune: { auto: true },\n        }),\n      )).to.be.within(18, 18.1);\n    });\n\n    it('suggests a salary with fortune', () => {\n      expect(widget1Suggesters(\n        SALARY,\n        prepareState({\n          salary: { auto: true },\n          property: { auto: true },\n          fortune: { auto: false },\n        }),\n      )).to.be.within(72, 72.1);\n    });\n  });\n\n  describe('fortune', () => {\n    it('suggests a fortune with all', () => {\n      expect(widget1Suggesters(\n        FORTUNE,\n        prepareState({\n          salary: { auto: false },\n          property: { auto: false },\n          fortune: { auto: true },\n        }),\n      )).to.equal(25);\n    });\n\n    it('suggests a fortune with all and proper values', () => {\n      expect(widget1Suggesters(\n        FORTUNE,\n        prepareState({\n          property: { auto: false, value: 1000000 },\n          salary: { auto: false, value: 180000 },\n          fortune: { auto: true },\n        }),\n      )).to.equal(250000);\n    });\n\n    it('suggests a fortune with property', () => {\n      expect(widget1Suggesters(\n        FORTUNE,\n        prepareState({\n          salary: { auto: true },\n          property: { auto: false },\n          fortune: { auto: true },\n        }),\n      )).to.be.within(24.9, 25);\n    });\n\n    it('suggests a fortune with salary', () => {\n      expect(widget1Suggesters(\n        FORTUNE,\n        prepareState({\n          salary: { auto: false },\n          property: { auto: true },\n          fortune: { auto: true },\n        }),\n      )).to.be.within(138.9, 139);\n    });\n  });\n\n  describe('property', () => {\n    it('suggests a property with all', () => {\n      expect(widget1Suggesters(\n        PROPERTY,\n        prepareState({\n          salary: { auto: false },\n          property: { auto: true },\n          fortune: { auto: false },\n        }),\n      )).to.equal(400);\n    });\n\n    it('suggests a property with proper values', () => {\n      expect(widget1Suggesters(\n        PROPERTY,\n        prepareState({\n          salary: { auto: false, value: 180000 },\n          property: { auto: true },\n          fortune: { auto: false, value: 250000 },\n        }),\n      )).to.equal(1000000);\n    });\n\n    it('suggests a property with salary', () => {\n      expect(widget1Suggesters(\n        PROPERTY,\n        prepareState({\n          salary: { auto: false },\n          property: { auto: true },\n          fortune: { auto: true },\n        }),\n      )).to.equal(556);\n    });\n\n    it('suggests a property with fortune', () => {\n      expect(widget1Suggesters(\n        PROPERTY,\n        prepareState({\n          salary: { auto: true },\n          property: { auto: true },\n          fortune: { auto: false },\n        }),\n      )).to.be.within(400, 400.1);\n    });\n  });\n\n  describe('wantedLoan', () => {\n    it('suggests a wantedLoan with currentLoan', () => {\n      expect(widget1Suggesters(\n        WANTED_LOAN,\n        prepareState({\n          wantedLoan: { auto: true },\n          currentLoan: { auto: false, value: 42 },\n          fortune: { auto: false },\n          purchaseType: PURCHASE_TYPE.REFINANCING,\n        }),\n      )).to.equal(42);\n    });\n  });\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\nimport configureMockStore from 'redux-mock-store';\nimport thunk from 'redux-thunk';\n\nimport {\n  MAX_BORROW_RATIO_PRIMARY_PROPERTY,\n  MAX_BORROW_RATIO_WITH_PLEDGE,\n} from 'core/config/financeConstants';\nimport * as widget1Actions from '../widget1Actions';\nimport * as widget1Types from '../widget1Types';\nimport * as widget1Constants from '../widget1Constants';\nimport { commonTypes } from '../../common';\n\nconst middlewares = [thunk];\nconst mockStore = configureMockStore(middlewares);\nlet store;\nconst expectActions = (actionCreator, expectedActions, comment) =>\n  store.dispatch(actionCreator).then(() => {\n    expect(store.getActions()).deep.equal(expectedActions, comment);\n  });\nconst prepareStore = overrides =>\n  mockStore({\n    widget1: {\n      ...widget1Constants.ALL_FIELDS.reduce(\n        (acc, name) => ({ ...acc, [name]: { value: 0, auto: true } }),\n        {},\n      ),\n      step: widget1Constants.FINAL_STEP,\n      purchaseType: widget1Constants.PURCHASE_TYPE.ACQUISITION,\n      ...overrides,\n    },\n  });\n\ndescribe('widget1Actions', () => {\n  const NAME = 'testName';\n  const value = 100;\n\n  beforeEach(() => {\n    store = prepareStore();\n  });\n\n  describe('suggestValues', () => {\n    it('does not dispatch anything if the user is not at the full calculator', () => {\n      store = prepareStore({ step: 0 });\n      const expectedActions = [];\n      return expectActions(widget1Actions.suggestValues(), expectedActions);\n    });\n\n    it('dispatches one action for each NAME if the step is the final one', () => {\n      const expectedActions = widget1Constants.ACQUISITION_FIELDS.map(name => ({\n        type: widget1Types.SUGGEST_VALUE(name),\n        value: 0,\n      }));\n      return expectActions(widget1Actions.suggestValues(), expectedActions);\n    });\n\n    it('suggests the right values for a 180k salary', () => {\n      store = prepareStore();\n      const expectedActions = widget1Constants.ACQUISITION_FIELDS.map(name => ({\n        type: widget1Types.SUGGEST_VALUE(name),\n        value: 0,\n      }));\n      return expectActions(widget1Actions.suggestValues(), expectedActions);\n    });\n  });\n\n  describe('setValue', () => {\n    it('sets a value and suggests values', () => {\n      const expectedActions = [\n        { type: widget1Types.SET_VALUE(NAME), value },\n        ...widget1Constants.ACQUISITION_FIELDS.map(name => ({\n          type: widget1Types.SUGGEST_VALUE(name),\n          value: 0,\n        })),\n      ];\n\n      return expectActions(\n        widget1Actions.setValue(NAME, value),\n        expectedActions,\n      );\n    });\n\n    widget1Constants.ALL_FIELDS.forEach((field) => {\n      const cappedFields = widget1Constants.CAPPED_FIELDS;\n\n      it(`caps field ${field} at 80% of the property price`, () => {\n        const propertyValue = 100;\n        const nextValue = 200;\n        store = prepareStore({ step: 0, property: { value: propertyValue } });\n        const expectedActions = [\n          {\n            type: widget1Types.SET_VALUE(field),\n            value: cappedFields.includes(field)\n              ? MAX_BORROW_RATIO_PRIMARY_PROPERTY * propertyValue\n              : nextValue,\n          },\n        ];\n\n        return expectActions(\n          widget1Actions.setValue(field, nextValue),\n          expectedActions,\n          `failed for field: ${field}`,\n        );\n      });\n    });\n\n    it('caps a field at 90% of the property price if allowExtremeValue is true', () => {\n      const propertyValue = 100;\n      const nextValue = 200;\n      store = prepareStore({\n        step: 0,\n        property: { value: propertyValue },\n        wantedLoan: { allowExtremeLoan: true },\n      });\n      const expectedActions = [\n        {\n          type: widget1Types.SET_VALUE(widget1Constants.WANTED_LOAN),\n          value: MAX_BORROW_RATIO_WITH_PLEDGE * propertyValue,\n        },\n      ];\n\n      return expectActions(\n        widget1Actions.setValue(widget1Constants.WANTED_LOAN, nextValue),\n        expectedActions,\n      );\n    });\n\n    it('allows capped fields to be set to an empty string', () => {\n      const propertyValue = 100;\n      const nextValue = '';\n      store = prepareStore({\n        step: 0,\n        property: { value: propertyValue },\n        wantedLoan: { allowExtremeLoan: true },\n      });\n      const expectedActions = [\n        {\n          type: widget1Types.SET_VALUE(widget1Constants.WANTED_LOAN),\n          value: '',\n        },\n      ];\n\n      return expectActions(\n        widget1Actions.setValue(widget1Constants.WANTED_LOAN, nextValue),\n        expectedActions,\n      );\n    });\n  });\n\n  describe('setAuto', () => {\n    it('sets a value to auto, and resuggests all values', () => {\n      const expectedActions = [\n        { type: widget1Types.SET_AUTO(NAME), auto: true },\n        ...widget1Constants.ACQUISITION_FIELDS.map(name => ({\n          type: widget1Types.SUGGEST_VALUE(name),\n          value: 0,\n        })),\n      ];\n\n      return expectActions(widget1Actions.setAuto(NAME, true), expectedActions);\n    });\n  });\n\n  describe('increaseSliderMax', () => {\n    it('creates the right action', () => {\n      const expectedActions = {\n        type: widget1Types.INCREASE_SLIDER_MAX(NAME),\n      };\n\n      expect(widget1Actions.increaseSliderMax(NAME)).to.deep.equal(expectedActions);\n    });\n  });\n\n  describe('setStep', () => {\n    it('does not dispatch anything if the next step if lower than current step', () => {\n      store = prepareStore({ step: 1 });\n      const expectedActions = [];\n      return expectActions(widget1Actions.setStep(0), expectedActions);\n    });\n\n    it('sets the step if it is not the final step', () => {\n      store = prepareStore({ step: 0 });\n      const expectedActions = [\n        { type: commonTypes.SET_VALUE('step'), value: 1 },\n      ];\n      return expectActions(widget1Actions.setStep(1), expectedActions);\n    });\n\n    it('sets the step and suggests values if it will be the final step', () => {\n      // getState does not work in redux-mock-store, so set the final step\n      // initially as well to make sure getState gets the right value\n      // for the `suggestValues` action\n      store = prepareStore({\n        step: widget1Constants.ACQUISITION_FIELDS.length,\n      });\n      const expectedActions = [\n        {\n          type: commonTypes.SET_VALUE('step'),\n          value: widget1Constants.ACQUISITION_FIELDS.length,\n        },\n        ...widget1Constants.ACQUISITION_FIELDS.map(name => ({\n          type: widget1Types.SUGGEST_VALUE(name),\n          value: 0,\n        })),\n        { type: commonTypes.SET_VALUE('finishedTutorial'), value: true },\n      ];\n      return expectActions(\n        widget1Actions.setStep(widget1Constants.ACQUISITION_FIELDS.length),\n        expectedActions,\n      );\n    });\n  });\n\n  describe('resetCalculator', () => {\n    it('resets all the values', () => {\n      const expectedActions = widget1Constants.ALL_FIELDS.reduce(\n        (acc, field) => [\n          ...acc,\n          { type: widget1Types.SET_VALUE(field), value: 0 },\n          { type: widget1Types.SET_AUTO(field), auto: true },\n        ],\n        [],\n      );\n      return expectActions(widget1Actions.resetCalculator(), expectedActions);\n    });\n\n    it('sets property and currentLoan to auto false in refinancing', () => {\n      store = prepareStore({\n        purchaseType: widget1Constants.PURCHASE_TYPE.REFINANCING,\n      });\n\n      const expectedActions = widget1Constants.ALL_FIELDS.reduce(\n        (acc, field) => [\n          ...acc,\n          { type: widget1Types.SET_VALUE(field), value: 0 },\n          { type: widget1Types.SET_AUTO(field), auto: true },\n        ],\n        [],\n      );\n      return expectActions(widget1Actions.resetCalculator(), [\n        ...expectedActions,\n        { type: widget1Types.SET_AUTO(widget1Constants.PROPERTY), auto: false },\n        {\n          type: widget1Types.SET_AUTO(widget1Constants.CURRENT_LOAN),\n          auto: false,\n        },\n      ]);\n    });\n  });\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport widget1, { createWidget1ValueReducers } from '../widget1Reducers';\nimport {\n  SET_VALUE,\n  SUGGEST_VALUE,\n  SET_AUTO,\n  INCREASE_SLIDER_MAX,\n  SET_ALLOW_EXTREME_LOAN,\n} from '../widget1Types';\n\nimport { ALL_FIELDS, SALARY, FORTUNE, CURRENT_LOAN } from '../widget1Constants';\n\ndescribe('widget1 Reducer', () => {\n  it('should return the initial state', () => {\n    expect(widget1()).to.deep.equal({\n      ...ALL_FIELDS.reduce(\n        (acc, name) => ({\n          ...acc,\n          [name]: {\n            value: 0,\n            auto: false,\n            sliderMax: name === SALARY || name === FORTUNE ? 500000 : 2000000,\n          },\n        }),\n        {},\n      ),\n      step: 0,\n      interestRate: 0.015,\n      purchaseType: 'ACQUISITION',\n      finishedTutorial: false,\n      useMaintenance: true,\n    });\n  });\n\n  describe('widget1 value reducer', () => {\n    const initialSliderMax = 10;\n    const TEST = 'TEST';\n    const reducer = createWidget1ValueReducers([\n      { name: TEST, initialSliderMax },\n    ])[TEST];\n    const initialState = {\n      value: 0,\n      auto: false,\n      sliderMax: initialSliderMax,\n    };\n\n    it('should return the initial state', () => {\n      expect(reducer(undefined, {})).to.deep.equal(initialState);\n    });\n\n    describe('setValue action', () => {\n      it('should handle setValue and put auto to false', () => {\n        const value = 100;\n        expect(reducer({}, { type: SET_VALUE(TEST), value })).to.deep.equal({\n          value,\n          auto: false,\n        });\n      });\n\n      it('It should set auto to true and value to 0 if the value is set to 0 or falsy', () => {\n        let value = 0;\n        expect(reducer({}, { type: SET_VALUE(TEST), value })).to.deep.equal({\n          value: 0,\n          auto: true,\n        });\n        value = undefined;\n        expect(reducer({}, { type: SET_VALUE(TEST), value })).to.deep.equal({\n          value: 0,\n          auto: true,\n        });\n        value = false;\n        expect(reducer({}, { type: SET_VALUE(TEST), value })).to.deep.equal({\n          value: 0,\n          auto: true,\n        });\n      });\n\n      it('should not set auto to true for CURRENT_LOAN if it is set to 0', () => {\n        const currentLoanReducer = createWidget1ValueReducers([\n          { name: CURRENT_LOAN, initialSliderMax },\n        ])[CURRENT_LOAN];\n        const value = 0;\n        expect(currentLoanReducer({}, { type: SET_VALUE(CURRENT_LOAN), value })).to.deep.equal({\n          value: 0,\n          auto: false,\n        });\n      });\n\n      it('should allow the value to be an empty string, so that the user can keep typing', () => {\n        const value = '';\n        expect(reducer({}, { type: SET_VALUE(TEST), value })).to.deep.equal({\n          value,\n          auto: false,\n        });\n      });\n\n      it('rounds the value that is set', () => {\n        const value = 100.2;\n        expect(reducer({}, { type: SET_VALUE(TEST), value })).to.deep.equal({\n          value: 100,\n          auto: false,\n        });\n      });\n    });\n\n    describe('suggestValue action', () => {\n      it('sets the value without changing auto', () => {\n        const value = 100;\n        let auto = true;\n        expect(reducer({ auto }, { type: SUGGEST_VALUE(TEST), value })).to.deep.equal({\n          value,\n          auto,\n        });\n\n        auto = false;\n        expect(reducer({ auto }, { type: SUGGEST_VALUE(TEST), value })).to.deep.equal({\n          value,\n          auto,\n        });\n      });\n    });\n\n    describe('setAuto action', () => {\n      it('sets auto', () => {\n        let auto = true;\n        expect(reducer({}, { type: SET_AUTO(TEST), auto })).to.deep.equal({\n          auto,\n        });\n        auto = false;\n        expect(reducer({}, { type: SET_AUTO(TEST), auto })).to.deep.equal({\n          auto,\n        });\n      });\n\n      it('toggles auto if no value is provided', () => {\n        let auto = true;\n        expect(reducer({ auto }, { type: SET_AUTO(TEST) })).to.deep.equal({\n          auto: !auto,\n        });\n        auto = false;\n        expect(reducer({ auto }, { type: SET_AUTO(TEST) })).to.deep.equal({\n          auto: !auto,\n        });\n      });\n    });\n\n    describe('increaseSliderMax action', () => {\n      it('doubles sliderMax', () => {\n        expect(reducer({ sliderMax: 50 }, { type: INCREASE_SLIDER_MAX(TEST) })).to.deep.equal({\n          sliderMax: 2 * 50,\n        });\n      });\n\n      it('prevents a user from going above 100M', () => {\n        expect(reducer({ sliderMax: 50000001 }, { type: INCREASE_SLIDER_MAX(TEST) })).to.deep.equal({ sliderMax: 100000000 });\n      });\n    });\n\n    describe('setAllowExtremeLoan action', () => {\n      it('sets allowExtremeLoan to true', () => {\n        expect(reducer({}, { type: SET_ALLOW_EXTREME_LOAN(TEST) })).to.deep.equal({\n          allowExtremeLoan: true,\n        });\n      });\n    });\n  });\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport {\n  makeWidget1Selector,\n  makeSelectValue,\n  selectFields,\n  selectAutoValues,\n} from '../widget1Selectors';\nimport {\n  PURCHASE_TYPE,\n  ACQUISITION_FIELDS,\n  REFINANCING_FIELDS,\n} from '../widget1Constants';\n\ndescribe('selectors', () => {\n  describe('makeWidget1Selector', () => {\n    it('should select widget1', () => {\n      const myField = 'hello world';\n      expect(makeWidget1Selector('myField')({ widget1: { myField } })).to.equal(myField);\n    });\n  });\n\n  describe('makeSelectValue', () => {\n    it('should get the value of a field', () => {\n      const myField = { value: 200 };\n      expect(makeSelectValue('myField')({ widget1: { myField } })).to.equal(myField.value);\n    });\n  });\n\n  describe('selectFields', () => {\n    it('should select the right fields', () => {\n      expect(selectFields({\n        widget1: { purchaseType: PURCHASE_TYPE.ACQUISITION },\n      })).to.equal(ACQUISITION_FIELDS);\n      expect(selectFields({\n        widget1: { purchaseType: PURCHASE_TYPE.REFINANCING },\n      })).to.equal(REFINANCING_FIELDS);\n    });\n  });\n\n  describe('selectAutoValues', () => {\n    it('selects all auto values based on purchase type', () => {\n      const autoValues = {\n        salary: { auto: 1 },\n        fortune: { auto: 2 },\n        property: { auto: 3 },\n      };\n      expect(selectAutoValues({\n        widget1: { purchaseType: PURCHASE_TYPE.ACQUISITION, ...autoValues },\n      })).to.deep.equal({\n        salary: autoValues.salary.auto,\n        fortune: autoValues.fortune.auto,\n        property: autoValues.property.auto,\n      });\n    });\n\n    it('selects all auto values based on purchase type', () => {\n      const autoValues = {\n        salary: { auto: 1 },\n        fortune: { auto: 2 },\n        property: { auto: 3 },\n        wantedLoan: { auto: 4 },\n        currentLoan: { auto: 5 },\n      };\n      expect(selectAutoValues({\n        widget1: { purchaseType: PURCHASE_TYPE.REFINANCING, ...autoValues },\n      })).to.deep.equal({\n        salary: autoValues.salary.auto,\n        property: autoValues.property.auto,\n        currentLoan: autoValues.currentLoan.auto,\n        wantedLoan: autoValues.wantedLoan.auto,\n      });\n    });\n\n    it.skip('memoizes properly, running the same computation only once', () => {\n      let autoValues = {\n        salary: { auto: 1 },\n        fortune: { auto: 2 },\n        property: { auto: 3 },\n      };\n      expect(selectAutoValues.recomputations()).to.equal(0);\n      expect(selectAutoValues({\n        widget1: { purchaseType: PURCHASE_TYPE.ACQUISITION, ...autoValues },\n      })).to.deep.equal({\n        salary: autoValues.salary.auto,\n        fortune: autoValues.fortune.auto,\n        property: autoValues.property.auto,\n      });\n      autoValues = {\n        salary: { auto: 1 },\n        fortune: { auto: 2 },\n        property: { auto: 3 },\n      };\n      expect(selectAutoValues({\n        widget1: { purchaseType: PURCHASE_TYPE.ACQUISITION, ...autoValues },\n      })).to.deep.equal({\n        salary: autoValues.salary.auto,\n        fortune: autoValues.fortune.auto,\n        property: autoValues.property.auto,\n      });\n      expect(selectAutoValues.recomputations()).to.equal(1);\n    });\n  });\n});\n","import {\n  NOTARY_FEES,\n  MAINTENANCE_FINMA,\n  INTERESTS_FINMA,\n  MAX_INCOME_RATIO,\n  MAX_BORROW_RATIO_PRIMARY_PROPERTY,\n  MAX_BORROW_RATIO_WITH_PLEDGE,\n  AMORTIZATION_STOP,\n  AMORTIZATION_YEARS,\n} from 'core/config/financeConstants';\nimport { roundTo } from 'core/utils/conversionFunctions';\n\nexport class Widget1SuggesterClass {\n  constructor({ notaryFees }) {\n    this.notaryFees = notaryFees || NOTARY_FEES;\n  }\n\n  // This function is documented in the google drive: \"Maths widget1.pdf\" document\n  suggestSalary = ({ property, fortune }) => {\n    const loan = property * (1 + this.notaryFees) - fortune;\n    const m = MAINTENANCE_FINMA;\n    const i = INTERESTS_FINMA;\n    const mR = MAX_INCOME_RATIO;\n\n    const withAmortizing = (property * m + loan * (i + (loan - 0.65 * property) / (15 * loan))) / mR;\n\n    const withoutAmortizing = (property * m + loan * i) / mR;\n\n    return Math.round(Math.max(withAmortizing, withoutAmortizing) + 1);\n  };\n\n  // This function is documented in the google drive: \"Maths widget1.pdf\" document\n  suggestFortune = ({ property, salary }) => {\n    const m = MAINTENANCE_FINMA;\n    const i = INTERESTS_FINMA;\n    const mR = MAX_INCOME_RATIO;\n    const nF = this.notaryFees;\n\n    // It has to cover 20% and notaryfees\n    const basicValue = property * (0.2 + nF);\n\n    // When there is very little income, go to rank 1 (basically, amortization = 0)\n    const rank1Fortune = (property * (m + i * (1 + nF)) - mR * salary) / i;\n\n    // For the case that there is a reasonable amount of fortune, go to rank 2\n    // Here amortization is complex and depends on the borrow Ratio\n    const rank2Fortune = (property * (15 * m + nF + 0.35 + 15 * i * (1 + nF)) - mR * 15 * salary)\n      / (15 * i + 1);\n\n    const rankFortune = Math.max(rank1Fortune, rank2Fortune);\n\n    const maxFortune = Math.round(Math.max(0, rankFortune, basicValue));\n\n    // Make sure fortune never goes above the property value\n    return Math.min(maxFortune, property);\n  };\n\n  // This function is documented in the google drive: \"Maths widget1.pdf\" document\n  getSalaryLimitedProperty = ({ salary, fortune }) => {\n    // The arithmetic relation to have the cost of the loan be at exactly the max ratio of income\n    // Derive it like this:\n    // maxRatio * salary >= property * maintenance + loan * loanCost\n    // loan = (property + notaryFees + lppFees) - totalFortune\n    // Extract property from this relation\n    const nF = this.notaryFees;\n    const i = INTERESTS_FINMA;\n    const mR = MAX_INCOME_RATIO;\n    const m = MAINTENANCE_FINMA;\n    const r = AMORTIZATION_YEARS;\n\n    // The first one is with 0 amortization\n    const incomeLimited1 = (mR * salary + fortune * i) / (m + (1 + nF) * i);\n\n    // The second is with amortization factored in (and it could be negative due to math)\n    const incomeLimited2 = ((1 + r * i) * fortune + mR * r * salary)\n      / (r * (m + i) + nF * (1 + r * i) + 0.35);\n\n    // Therefore, take the minimum value of both, which is the most limiting one\n    // Because of the ratios, round this value down\n    return Math.floor(Math.min(incomeLimited1, incomeLimited2));\n  };\n\n  suggestProperty = ({ salary, fortune }) => {\n    const fortuneLimitedProperty = this.fortuneToProperty({ fortune });\n    const salaryLimitedProperty = this.getSalaryLimitedProperty({\n      salary,\n      fortune,\n    });\n\n    // Use floor to make sure the ratios are respected and avoid edge cases\n    return Math.round(Math.min(fortuneLimitedProperty, salaryLimitedProperty));\n  };\n\n  //\n  // Property < > Fortune\n  //\n  propertyToFortuneRatio = () =>\n    1 - MAX_BORROW_RATIO_PRIMARY_PROPERTY + this.notaryFees;\n\n  propertyToFortune = ({ property }) =>\n    property * this.propertyToFortuneRatio();\n\n  fortuneToProperty = ({ fortune }) => fortune / this.propertyToFortuneRatio();\n\n  //\n  // Property < > Salary\n  //\n  defaultAmortization = () =>\n    (MAX_BORROW_RATIO_PRIMARY_PROPERTY - AMORTIZATION_STOP)\n    / MAX_BORROW_RATIO_PRIMARY_PROPERTY\n    / AMORTIZATION_YEARS;\n\n  loanCost = () => INTERESTS_FINMA + this.defaultAmortization();\n\n  propertyToSalaryRatio = () =>\n    3\n    * (MAINTENANCE_FINMA + MAX_BORROW_RATIO_PRIMARY_PROPERTY * this.loanCost());\n\n  propertyToSalary = ({ property }) => property * this.propertyToSalaryRatio();\n\n  // This one flickers between 80% and >80%, so round it up to make sure\n  // the loan is always at or below 80%\n  salaryToProperty = ({ salary }) =>\n    Math.ceil(salary / this.propertyToSalaryRatio());\n\n  suggestWantedLoan = ({ currentLoan }) => currentLoan;\n\n  getMaxPossibleLoan = ({ property, salary }) => {\n    // temporarily disable notaryFees\n    const currentNotaryFees = this.notaryFees;\n    this.notaryFees = 0;\n\n    const fortune = this.suggestFortune({ property, salary });\n\n    this.notaryFees = currentNotaryFees;\n\n    const maxLoan = property - fortune;\n    const hardCap = Math.floor(property * MAX_BORROW_RATIO_WITH_PLEDGE);\n    return roundTo(Math.min(maxLoan, hardCap), 3);\n  };\n}\n\nexport default new Widget1SuggesterClass({});\n","import * as _widget1Selectors from './widget1Selectors';\nimport * as _widget1Actions from './widget1Actions';\nimport * as _widget1Constants from './widget1Constants';\nimport * as _widget1Types from './widget1Types';\n\nexport { default as Widget1Suggester } from './Widget1Suggester';\nexport { default } from './widget1Reducers';\nexport const widget1Selectors = _widget1Selectors;\nexport const widget1Actions = _widget1Actions;\nexport const widget1Constants = _widget1Constants;\nexport const widget1Types = _widget1Types;\n","import {\n  MAX_BORROW_RATIO_PRIMARY_PROPERTY,\n  MAX_BORROW_RATIO_WITH_PLEDGE,\n} from 'core/config/financeConstants';\nimport * as types from './widget1Types';\nimport {\n  makeWidget1Selector,\n  selectFields,\n  makeSelectValue,\n} from './widget1Selectors';\nimport {\n  ALL_FIELDS,\n  FINAL_STEP,\n  PROPERTY,\n  CAPPED_FIELDS,\n  CURRENT_LOAN,\n  PURCHASE_TYPE,\n} from './widget1Constants';\nimport suggestValue from './widget1Suggestion';\nimport { commonTypes } from '../common';\n\nexport const suggestValues = () => (dispatch, getState) => {\n  const state = getState();\n  const step = makeWidget1Selector('step')(state);\n  let suggestActions = [];\n\n  if (step >= FINAL_STEP) {\n    suggestActions = selectFields(state).map(NAME =>\n      dispatch({\n        type: types.SUGGEST_VALUE(NAME),\n        value: suggestValue(NAME, state),\n      }));\n  }\n\n  return Promise.all(suggestActions);\n};\n\nexport const getPropertyCappedValue = (name, state) => {\n  const propertyValue = makeSelectValue(PROPERTY)(state);\n  const { allowExtremeLoan } = makeWidget1Selector(name)(state);\n  const maxValue = allowExtremeLoan\n    ? propertyValue * MAX_BORROW_RATIO_WITH_PLEDGE\n    : propertyValue * MAX_BORROW_RATIO_PRIMARY_PROPERTY;\n\n  return Math.floor(maxValue);\n};\n\nconst shouldCapValue = (name, nextValue) =>\n  CAPPED_FIELDS.includes(name) && nextValue !== '';\n\nexport const cleanNextValue = (name, nextValue, getState) => {\n  if (shouldCapValue(name, nextValue)) {\n    const state = getState();\n    const maxValue = getPropertyCappedValue(name, state);\n\n    return Math.min(nextValue, maxValue);\n  }\n\n  return nextValue;\n};\n\nexport const setValue = (name, nextValue) => (dispatch, getState) =>\n  Promise.resolve()\n    .then(() =>\n      dispatch({\n        type: types.SET_VALUE(name),\n        value: cleanNextValue(name, nextValue, getState),\n      }))\n    .then(() => dispatch(suggestValues()));\n\nexport const setAuto = (name, nextAuto) => dispatch =>\n  Promise.resolve()\n    .then(() => dispatch({ type: types.SET_AUTO(name), auto: nextAuto }))\n    .then(() => dispatch(suggestValues()));\n\nexport const increaseSliderMax = name => ({\n  type: types.INCREASE_SLIDER_MAX(name),\n});\n\nexport const setStep = nextStep => (dispatch, getState) => {\n  const state = getState();\n  const step = makeWidget1Selector('step')(state);\n\n  // Only set the step if we're not going down\n  if (step > nextStep) {\n    return Promise.resolve();\n  }\n\n  const willBeFinalStep = nextStep === FINAL_STEP;\n  return Promise.resolve()\n    .then(() =>\n      dispatch({ type: commonTypes.SET_VALUE('step'), value: nextStep }))\n    .then(() =>\n    // Special exception here, as suggestValues only runs once\n    // the widget1 is at the FINAL_STEP. Suggest values should be run\n    // if the user enters a value here\n      willBeFinalStep && dispatch(suggestValues()))\n    .then(() => {\n      const fields = selectFields(state);\n      if (step >= fields.length - 1) {\n        dispatch({\n          type: commonTypes.SET_VALUE('finishedTutorial'),\n          value: true,\n        });\n      }\n    });\n};\n\nexport const resetCalculator = () => (dispatch, getState) => {\n  const state = getState();\n  const purchaseType = makeWidget1Selector('purchaseType')(state);\n\n  return Promise.all(ALL_FIELDS.map((name) => {\n    dispatch({ type: types.SET_VALUE(name), value: 0 });\n    dispatch({ type: types.SET_AUTO(name), auto: true });\n  })).then(() => {\n    if (purchaseType === PURCHASE_TYPE.REFINANCING) {\n      // Keep property and current loan to false during refinancing\n      dispatch({ type: types.SET_AUTO(PROPERTY), auto: false });\n      dispatch({ type: types.SET_AUTO(CURRENT_LOAN), auto: false });\n    }\n  });\n};\n\nexport const setAllowExtremeLoan = name => ({\n  type: types.SET_ALLOW_EXTREME_LOAN(name),\n});\n","export const SALARY = 'salary';\nexport const FORTUNE = 'fortune';\nexport const PROPERTY = 'property';\nexport const CURRENT_LOAN = 'currentLoan';\nexport const WANTED_LOAN = 'wantedLoan';\nexport const ACQUISITION_FIELDS = [PROPERTY, SALARY, FORTUNE];\nexport const REFINANCING_FIELDS = [PROPERTY, SALARY, CURRENT_LOAN, WANTED_LOAN];\nexport const ALL_FIELDS = [\n  PROPERTY,\n  SALARY,\n  FORTUNE,\n  CURRENT_LOAN,\n  WANTED_LOAN,\n];\nexport const CAPPED_FIELDS = [CURRENT_LOAN, WANTED_LOAN];\nexport const FINAL_STEP = 3;\nexport const PURCHASE_TYPE = {\n  ACQUISITION: 'ACQUISITION',\n  REFINANCING: 'REFINANCING',\n};\n","import { combineReducers } from 'redux';\nimport { DEFAULT_INTEREST_RATE } from 'core/config/financeConstants';\nimport { createValueReducer } from '../common/reducers';\nimport {\n  SALARY,\n  PROPERTY,\n  FORTUNE,\n  PURCHASE_TYPE,\n  CURRENT_LOAN,\n  WANTED_LOAN,\n} from './widget1Constants';\nimport {\n  SET_VALUE,\n  SUGGEST_VALUE,\n  SET_AUTO,\n  INCREASE_SLIDER_MAX,\n  SET_ALLOW_EXTREME_LOAN,\n} from './widget1Types';\n\nconst roundedValue = value => value && Math.round(value);\n\nexport const createWidget1ValueReducers = names =>\n  names.reduce(\n    (acc, { name, initialSliderMax }) => ({\n      ...acc,\n      [name]: (\n        state = { value: 0, auto: false, sliderMax: initialSliderMax },\n        action = {},\n      ) => {\n        switch (action.type) {\n        case SET_VALUE(name):\n          if (action.value === '') {\n            // Allow empty string if the user edits the textfield\n            return { ...state, value: '', auto: false };\n          }\n          if (!action.value && name !== CURRENT_LOAN) {\n            // Set auto to true if the value is changed to 0\n            // (via slider or by typing 0)\n            // Exception for current_loan which is the only value that\n            // can explicitly be set to 0\n            return { ...state, value: 0, auto: true };\n          }\n          // Set auto to false if this value is set\n          return { ...state, auto: false, value: roundedValue(action.value) };\n        case SUGGEST_VALUE(name):\n          // If the value is suggested, don't change auto\n          return { ...state, value: roundedValue(action.value) };\n        case SET_AUTO(name): {\n          const nextAuto = action.auto !== undefined ? action.auto : !state.auto;\n          return { ...state, auto: nextAuto };\n        }\n        case INCREASE_SLIDER_MAX(name):\n          return {\n            ...state,\n            sliderMax: Math.min(state.sliderMax * 2, 100000000),\n          };\n        case SET_ALLOW_EXTREME_LOAN(name):\n          return { ...state, allowExtremeLoan: true };\n        default:\n          return state;\n        }\n      },\n    }),\n    {},\n  );\n\nconst widget1 = combineReducers({\n  ...createWidget1ValueReducers([\n    { name: SALARY, initialSliderMax: 500000 },\n    { name: FORTUNE, initialSliderMax: 500000 },\n    { name: PROPERTY, initialSliderMax: 2000000 },\n    { name: CURRENT_LOAN, initialSliderMax: 2000000 },\n    { name: WANTED_LOAN, initialSliderMax: 2000000 },\n  ]),\n  step: createValueReducer('step', 0), // TODO: Set me back to 0 for production\n  interestRate: createValueReducer('interestRate', DEFAULT_INTEREST_RATE),\n  purchaseType: createValueReducer('purchaseType', PURCHASE_TYPE.ACQUISITION),\n  finishedTutorial: createValueReducer('finishedTutorial', false),\n  useMaintenance: createValueReducer('useMaintenance', true),\n});\n\nexport default widget1;\n","import { createSelector, createStructuredSelector } from 'reselect';\nimport {\n  PURCHASE_TYPE,\n  ACQUISITION_FIELDS,\n  REFINANCING_FIELDS,\n} from './widget1Constants';\n\nconst selectWidget1 = state => state.widget1;\n\nconst selectState = state => state;\n\nexport const makeWidget1Selector = name =>\n  createSelector(selectWidget1, widget1 => widget1[name]);\n\nexport const makeSelectValue = name =>\n  createSelector(\n    makeWidget1Selector(name),\n    widget1Object => widget1Object.value,\n  );\n\nexport const makeSelectAuto = name =>\n  createSelector(\n    makeWidget1Selector(name),\n    widget1Object => widget1Object.auto,\n  );\n\nexport const selectFields = createSelector(\n  makeWidget1Selector('purchaseType'),\n  purchaseType =>\n    (purchaseType === PURCHASE_TYPE.ACQUISITION\n      ? ACQUISITION_FIELDS\n      : REFINANCING_FIELDS),\n);\n\nconst pickAutoValues = (state, fields) =>\n  createStructuredSelector(fields.reduce(\n    (acc, name) => ({ ...acc, [name]: makeSelectAuto(name) }),\n    {},\n  ))(state);\n\nexport const selectAutoValues = createSelector(\n  [selectState, selectFields],\n  pickAutoValues,\n);\n","import { compose } from 'recompose';\nimport {\n  makeSelectValue,\n  selectAutoValues,\n  makeWidget1Selector,\n} from './widget1Selectors';\nimport {\n  SALARY,\n  FORTUNE,\n  PROPERTY,\n  CURRENT_LOAN,\n  WANTED_LOAN,\n  PURCHASE_TYPE,\n} from './widget1Constants';\nimport Widget1Suggester from './Widget1Suggester';\n\n// For each name, there are 3 suggesters, based on which other values are\n// currently set to `auto` or not.\n// If all other values are set to `auto: false`, use `all` function,\n// otherwise use the 2nd or 3rd function\nconst acquisitionSuggesters = {\n  [SALARY]: {\n    all: Widget1Suggester.suggestSalary,\n    [FORTUNE]: compose(\n      Widget1Suggester.propertyToSalary,\n      property => ({ property }),\n      Widget1Suggester.fortuneToProperty,\n    ),\n    [PROPERTY]: Widget1Suggester.propertyToSalary,\n  },\n  [FORTUNE]: {\n    all: Widget1Suggester.suggestFortune,\n    [SALARY]: compose(\n      Widget1Suggester.propertyToFortune,\n      property => ({ property }),\n      Widget1Suggester.salaryToProperty,\n    ),\n    [PROPERTY]: Widget1Suggester.propertyToFortune,\n  },\n  [PROPERTY]: {\n    all: Widget1Suggester.suggestProperty,\n    [SALARY]: Widget1Suggester.salaryToProperty,\n    [FORTUNE]: Widget1Suggester.fortuneToProperty,\n  },\n};\n\nconst refinancingSuggesters = {\n  [SALARY]: {\n    all: () => 0,\n    [WANTED_LOAN]: () => 0,\n    [PROPERTY]: () => 0,\n  },\n  [PROPERTY]: {\n    default: () => 0,\n  },\n  [CURRENT_LOAN]: {\n    default: () => 0,\n  },\n  [WANTED_LOAN]: {\n    default: Widget1Suggester.suggestWantedLoan,\n  },\n};\n\n// Pick the right suggester for `name`\nconst makeValueSuggester = (\n  suggesters,\n  name,\n  [firstManualKey, secondManualKey],\n) => {\n  let suggester;\n  if (secondManualKey) {\n    // Both keys are manual, use `all` suggester\n    suggester = suggesters[name].all;\n  } else if (!firstManualKey) {\n    // If all values are auto, just set them all to 0\n    suggester = () => 0;\n  } else {\n    // Only one value is manual, use it to suggest the other ones\n    suggester = suggesters[name][firstManualKey];\n  }\n\n  // Make sure we have a fallback suggester\n  return suggester || suggesters[name].default;\n};\n\nexport const makeSuggestValue = suggesters => (name, state) => {\n  // Get the number value for this name\n  const value = makeSelectValue(name)(state);\n  const purchaseType = makeWidget1Selector('purchaseType')(state);\n\n  // Get an object with all the auto values for every key\n  // The auto value for the current name should be true\n  const autoValues = selectAutoValues(state);\n  const thisValueIsManual = !autoValues[name];\n\n  if (thisValueIsManual) {\n    return value;\n  }\n\n  // Get an array of the keys that are manual and should be used to compute\n  // the next value\n  const manualValueKeys = Object.keys(autoValues).filter(key => !autoValues[key]);\n  const manualValues = manualValueKeys.map(key => makeSelectValue(key)(state));\n  const suggester = makeValueSuggester(\n    suggesters[purchaseType],\n    name,\n    manualValueKeys,\n  );\n\n  // Allow all values to be accessed by key as well, for suggestWantedLoan\n  const suggestingValues = manualValueKeys.reduce(\n    (acc, key, index) => ({ ...acc, [key]: manualValues[index] }),\n    {},\n  );\n\n  const suggestedValue = suggester(suggestingValues);\n  return suggestedValue;\n};\n\nexport default makeSuggestValue({\n  [PURCHASE_TYPE.REFINANCING]: refinancingSuggesters,\n  [PURCHASE_TYPE.ACQUISITION]: acquisitionSuggesters,\n});\n","export const SET_VALUE = name => `[${name}] Set value`;\nexport const SUGGEST_VALUE = name => `[${name}] Suggest value`;\nexport const SET_AUTO = name => `[${name}] Set auto`;\nexport const INCREASE_SLIDER_MAX = name => `[${name}] Increase slider max`;\nexport const SET_ALLOW_EXTREME_LOAN = name =>\n  `[${name}] Set allow extreme loan`;\n","import * as _commonReducers from './reducers';\nimport * as _commonTypes from './types';\n\nexport const commonReducers = _commonReducers;\nexport const commonTypes = _commonTypes;\n","import { SET_VALUE, RESET_VALUE } from './types';\n\nexport const createValueReducer = (valueName, initialState = null) => (\n  state = initialState,\n  { type, value } = {},\n) => {\n  switch (type) {\n  case SET_VALUE(valueName):\n    return value;\n  case RESET_VALUE(valueName):\n    return initialState;\n  default:\n    return state;\n  }\n};\n","export const SET_VALUE = name => `[${name}] Set`;\nexport const RESET_VALUE = name => `[${name}] Reset`;\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport Calculator, { Calculator as CalculatorClass } from '..';\nimport { STEPS, GENDER, EXPENSES } from 'core/api/constants';\nimport { DOCUMENTS } from '../../../api/constants';\nimport { initialDocuments } from '../../../api/borrowers/borrowersAdditionalDocuments';\nimport {\n  BONUS_ALGORITHMS,\n  REAL_ESTATE_INCOME_ALGORITHMS,\n} from '../../../config/financeConstants';\n\ndescribe('BorrowerCalculator', () => {\n  describe('getArrayValues', () => {\n    it(\"returns 0 if the key doesn't exist\", () => {\n      expect(Calculator.getArrayValues({}, 'key')).to.equal(0);\n    });\n\n    it(\"returns the sum of all value keys in an object's array\", () => {\n      expect(Calculator.getArrayValues({\n        borrowers: {\n          array: [{ value: 1 }, { value: 2 }],\n        },\n        key: 'array',\n      })).to.equal(3);\n    });\n\n    it('works with arrays', () => {\n      expect(Calculator.getArrayValues({\n        borrowers: [\n          { array: [{ value: 1 }, { value: 2 }] },\n          { array: [{ value: 3 }, { value: 4 }] },\n        ],\n        key: 'array',\n      })).to.equal(10);\n    });\n\n    it('works with a provided mapFunc', () => {\n      expect(Calculator.getArrayValues(\n        {\n          borrowers: [\n            { array: [{ yo: 1 }, { value: 2 }] },\n            { array: [{ value: 3 }, { yo: 4 }] },\n          ],\n          key: 'array',\n        },\n\n        item => item.yo,\n      )).to.equal(5);\n    });\n  });\n\n  describe('getBonusIncome', () => {\n    it('returns half of 1 bonus', () => {\n      expect(Calculator.getBonusIncome({\n        borrowers: { bonusExists: true, bonus2018: 100 },\n      })).to.equal(50);\n    });\n\n    it('returns half of average 2 bonuses', () => {\n      expect(Calculator.getBonusIncome({\n        borrowers: { bonusExists: true, bonus2018: 100, bonus2015: 0 },\n      })).to.equal(50);\n    });\n\n    it('returns half of average 3 bonuses', () => {\n      expect(Calculator.getBonusIncome({\n        borrowers: {\n          bonusExists: true,\n          bonus2018: 100,\n          bonus2017: 0,\n          bonus2016: 200,\n        },\n      })).to.equal(75);\n    });\n\n    it('returns 0 if bonusExists is false', () => {\n      expect(Calculator.getBonusIncome({\n        borrowers: {\n          bonusExists: false,\n          bonus2015: 50,\n          bonus2016: 150,\n          bonus2017: 40,\n          bonus2018: 100,\n        },\n      })).to.equal(0);\n    });\n\n    it('considers bonuses differently based on bonusConsideration', () => {\n      const calc = new CalculatorClass({ bonusConsideration: 1 });\n\n      expect(calc.getBonusIncome({\n        borrowers: {\n          bonusExists: true,\n          bonus2015: 40,\n          bonus2016: 150,\n          bonus2017: 50,\n          bonus2018: 100,\n        },\n      })).to.equal(100);\n    });\n\n    it('considers fewer bonuses with bonusHistoryToConsider', () => {\n      const calc = new CalculatorClass({\n        bonusConsideration: 1,\n        bonusHistoryToConsider: 1,\n      });\n\n      expect(calc.getBonusIncome({\n        borrowers: {\n          bonusExists: true,\n          bonus2015: 50,\n          bonus2016: 150,\n          bonus2017: 40,\n          bonus2019: 200,\n        },\n      })).to.equal(200);\n    });\n\n    it('works with 2 borrowers', () => {\n      expect(Calculator.getBonusIncome({\n        borrowers: [\n          {\n            bonusExists: true,\n            bonus2018: 100,\n            bonus2017: 0,\n            bonus2016: 200,\n          },\n          {\n            bonusExists: false,\n            bonus2018: 100,\n            bonus2017: 0,\n            bonus2016: 200,\n          },\n        ],\n      })).to.equal(75);\n    });\n\n    it('uses the AVERAGE algorithm', () => {\n      const calc = new CalculatorClass({\n        bonusConsideration: 1,\n        bonusHistoryToConsider: 2,\n        bonusAlgorithm: BONUS_ALGORITHMS.AVERAGE,\n      });\n\n      expect(calc.getBonusIncome({\n        borrowers: {\n          bonusExists: true,\n          bonus2019: 200,\n        },\n      })).to.equal(100);\n    });\n\n    it('uses the WEAK_AVERAGE algorithm', () => {\n      const calc = new CalculatorClass({\n        bonusConsideration: 1,\n        bonusHistoryToConsider: 3,\n        bonusAlgorithm: BONUS_ALGORITHMS.WEAK_AVERAGE,\n      });\n\n      expect(calc.getBonusIncome({\n        borrowers: {\n          bonusExists: true,\n          bonus2019: 200,\n          bonus2018: 200,\n          bonus2017: 0,\n        },\n      })).to.equal(200);\n    });\n  });\n\n  describe('getBonuses', () => {\n    it('returns the sum of bonuses for a given year', () => {\n      expect(Calculator.getBonuses({\n        borrowers: [\n          {\n            bonusExists: 10,\n            bonus2018: null,\n            bonus2016: 200,\n          },\n          {\n            bonusExists: true,\n            bonus2017: 5,\n            bonus2016: 200,\n            bonus2019: 5,\n          },\n        ],\n      })).to.deep.equal({ bonus2016: 400, bonus2017: 5, bonus2019: 5 });\n    });\n\n    it('omits borrowers with bonusExists false', () => {\n      expect(Calculator.getBonuses({\n        borrowers: [\n          {\n            bonusExists: 10,\n            bonus2018: null,\n            bonus2016: 200,\n          },\n          {\n            bonusExists: false,\n            bonus2017: 5,\n            bonus2016: 200,\n            bonus2019: 5,\n          },\n        ],\n      })).to.deep.equal({ bonus2016: 200 });\n    });\n  });\n\n  describe('getBorrowerCompletion', () => {\n    it('should be 0% for a new borrower', () => {\n      expect(Calculator.getBorrowerCompletion({\n        loan: {\n          borrowers: [\n            {\n              documents: {},\n              _id: 'docId',\n              additionalDocuments: initialDocuments,\n            },\n          ],\n        },\n      })).to.equal(0);\n    });\n\n    it('should not be 0% when adding data', () => {\n      expect(Calculator.getBorrowerCompletion({\n        loan: {\n          borrowers: [\n            {\n              firstName: 'joe',\n              lastName: 'johnson',\n              documents: {},\n              logic: {},\n              _id: 'docId',\n              additionalDocuments: initialDocuments,\n            },\n          ],\n        },\n      })).to.be.within(0.01, 0.1);\n    });\n\n    it('should not be 0% when adding a document', () => {\n      expect(Calculator.getBorrowerCompletion({\n        loan: {\n          borrowers: [\n            {\n              documents: { [DOCUMENTS.IDENTITY]: [{}] },\n              logic: {},\n              _id: 'docId',\n              additionalDocuments: initialDocuments,\n            },\n          ],\n        },\n      })).to.be.within(0.01, 0.1);\n    });\n\n    it('should count files and info', () => {\n      expect(Calculator.getBorrowerCompletion({\n        loan: {\n          borrowers: [\n            {\n              firstName: 'joe',\n              lastName: 'johnson',\n              documents: { [DOCUMENTS.IDENTITY]: [{}] },\n              logic: {},\n              _id: 'borrowerId',\n              additionalDocuments: initialDocuments,\n            },\n          ],\n        },\n      })).to.be.within(0.13, 0.14);\n    });\n  });\n\n  describe('getBorrowerFilesProgress', () => {\n    it('returns 0 when no file is present', () => {\n      expect(Calculator.getBorrowerFilesProgress({\n        loan: {\n          borrowers: [\n            {\n              documents: {},\n              _id: 'borrowerId',\n              additionalDocuments: initialDocuments,\n            },\n          ],\n        },\n      })).to.deep.equal({ percent: 0, count: 6 });\n    });\n\n    it('returns 0 when no documents are present', () => {\n      expect(Calculator.getBorrowerFilesProgress({\n        loan: {\n          borrowers: [{}],\n        },\n      })).to.deep.equal({ percent: 0, count: 1 });\n    });\n\n    it('returns more than 0 when a file is present', () => {\n      expect(Calculator.getBorrowerFilesProgress({\n        loan: {\n          borrowers: [\n            {\n              documents: { [DOCUMENTS.IDENTITY]: [{}] },\n              _id: 'borrowerId',\n              additionalDocuments: initialDocuments,\n            },\n          ],\n        },\n      })).to.deep.equal({ percent: 1 / 6, count: 6 });\n    });\n  });\n\n  describe('getExpenses', () => {\n    it('Should return 0 if given an empty object', () => {\n      expect(Calculator.getExpenses({})).to.equal(0);\n    });\n\n    it('sums expenses array', () => {\n      expect(Calculator.getExpenses({\n        borrowers: { expenses: [{ value: 2 }, { value: 3 }] },\n      })).to.equal(5);\n    });\n  });\n\n  describe('getFortune', () => {\n    it('Should return 0 if given an empty object', () => {\n      expect(Calculator.getFortune({})).to.equal(0);\n    });\n\n    it('sums bankFortunes if given multiple borrowers', () => {\n      expect(Calculator.getFortune({\n        borrowers: [{ bankFortune: 1 }, { bankFortune: 2 }],\n      })).to.equal(3);\n    });\n  });\n\n  describe('getInsuranceFortune', () => {\n    it('properly sums insurance2, insurance3A, insurance3B and bank3A', () => {\n      expect(Calculator.getInsuranceFortune({\n        borrowers: {\n          insurance2: [{ value: 2 }],\n          insurance3A: [{ value: 3 }],\n          insurance3B: [{ value: 4 }],\n          bank3A: [{ value: 5 }],\n        },\n      })).to.equal(14);\n\n      expect(Calculator.getInsuranceFortune({\n        borrowers: {\n          insurance3B: [{ value: 2 }],\n          bank3A: [{ value: undefined }],\n        },\n      })).to.equal(2);\n    });\n\n    it('works with multiple borrowers', () => {\n      expect(Calculator.getInsuranceFortune({\n        borrowers: [\n          {\n            insurance2: [{ value: 2 }],\n            insurance3A: [{ value: 3 }],\n          },\n          {\n            bank3A: [{ value: 4 }],\n            insurance3B: [{ value: 5 }],\n          },\n        ],\n      })).to.equal(14);\n    });\n  });\n\n  describe('getMissingBorrowerDocuments', () => {\n    it('returns all missing ids for an empty borrower', () => {\n      expect(Calculator.getMissingBorrowerDocuments({\n        loan: {\n          borrowers: [\n            { _id: 'borrowerId', additionalDocuments: initialDocuments },\n          ],\n          step: STEPS.SOLVENCY,\n        },\n      })).to.deep.equal(initialDocuments.map(({ id }) => id));\n    });\n  });\n\n  describe('getMissingBorrowerFields', () => {\n    it('returns all missing ids for an empty borrower', () => {\n      expect(Calculator.getMissingBorrowerFields({ borrowers: {} })).to.deep.equal([\n        'firstName',\n        'lastName',\n        'gender',\n        'address1',\n        'city',\n        'zipCode',\n        'canton',\n        'isSwiss',\n        'birthDate',\n        'citizenship',\n        'isUSPerson',\n        'civilStatus',\n        'childrenCount',\n        'salary',\n        'netSalary',\n        'bonusExists',\n        'hasOwnCompany',\n        'bankFortune',\n      ]);\n    });\n\n    it('returns all missing ids for an empty borrower', () => {\n      const result = Calculator.getMissingBorrowerFields({\n        borrowers: { hasOwnCompany: true, ownCompanies: [] },\n      });\n      expect(result).to.include('ownCompanies');\n      const result2 = Calculator.getMissingBorrowerFields({\n        borrowers: { hasOwnCompany: false, ownCompanies: [] },\n      });\n      expect(result2).to.not.include('ownCompanies');\n    });\n  });\n\n  describe('getOtherFortune', () => {\n    it('Should return 0 if given an empty object', () => {\n      expect(Calculator.getOtherFortune({})).to.equal(0);\n    });\n\n    it('sums otherFortune if given multiple borrowers', () => {\n      expect(Calculator.getOtherFortune({\n        borrowers: [\n          { otherFortune: [{ value: 3 }, { value: 4 }] },\n          { otherFortune: [{ value: 5 }, { value: 6 }] },\n        ],\n      })).to.equal(18);\n    });\n  });\n\n  describe('getRealEstateFortune', () => {\n    it('returns the difference between property values and loans', () => {\n      expect(Calculator.getRealEstateFortune({\n        borrowers: { realEstate: [{ value: 2, loan: 1 }] },\n      })).to.equal(1);\n    });\n  });\n\n  describe('getRealEstateValue', () => {\n    it('returns value of all realEstate', () => {\n      expect(Calculator.getRealEstateValue({\n        borrowers: { realEstate: [{ value: 2, loan: 1 }] },\n      })).to.equal(2);\n    });\n  });\n\n  describe('getRealEstateValue', () => {\n    it('returns loans of all realEstate', () => {\n      expect(Calculator.getRealEstateDebt({\n        borrowers: { realEstate: [{ value: 2, loan: 1 }] },\n      })).to.equal(1);\n    });\n  });\n\n  describe('getRealEstateIncome', () => {\n    it('returns realEstate income', () => {\n      expect(Calculator.getRealEstateIncome({\n        borrowers: { realEstate: [{ income: 10 }] },\n      })).to.equal(10);\n    });\n\n    it('changes with realEstateIncomeConsideration', () => {\n      const calc = new CalculatorClass({\n        realEstateIncomeConsideration: 0.5,\n      });\n      expect(calc.getRealEstateIncome({\n        borrowers: { realEstate: [{ income: 10 }, { income: 20 }] },\n      })).to.equal(15);\n    });\n  });\n\n  describe('getSalary', () => {\n    it('returns 0 for an empty object', () => {\n      expect(Calculator.getSalary({})).to.equal(0);\n    });\n\n    it(\"returns sum of borrowers' salary\", () => {\n      expect(Calculator.getSalary({ borrowers: { salary: 1 } })).to.equal(1);\n      expect(Calculator.getSalary({\n        borrowers: [{ salary: 1 }, { salary: 2 }],\n      })).to.equal(3);\n    });\n  });\n\n  describe('getTotalFunds', () => {\n    it('should return 0 for an empty object', () => {\n      expect(Calculator.getTotalFunds({})).to.equal(0);\n    });\n\n    it('should sum all fortune items in a borrower', () => {\n      expect(Calculator.getTotalFunds({\n        borrowers: {\n          bankFortune: 1,\n          insurance2: [{ value: 2 }],\n          insurance3A: [{ value: 3 }],\n        },\n      })).to.equal(6);\n    });\n  });\n\n  describe('getTotalIncome', () => {\n    it('should return 0 an empty borrower', () => {\n      expect(Calculator.getTotalIncome({})).to.equal(0);\n    });\n\n    it('should return sum of all incomes for a borrower, and subtract expenses', () => {\n      expect(Calculator.getTotalIncome({\n        borrowers: {\n          salary: 1,\n          bonusExists: true,\n          bonus2018: 2, // Adds 1\n          otherIncome: [{ value: 3 }],\n          expenses: [{ value: 5, description: EXPENSES.LEASING }], // Subtracts 5\n        },\n      })).to.equal(0);\n    });\n\n    it('adds fortuneReturns if they exist', () => {\n      const calc = new CalculatorClass({ fortuneReturnsRatio: 0.01 });\n      expect(calc.getTotalIncome({\n        borrowers: {\n          bankFortune: 100,\n          salary: 1,\n          bonusExists: true,\n          bonus2018: 2, // Adds 1\n          otherIncome: [{ value: 3 }],\n          expenses: [{ value: 5, description: EXPENSES.LEASING }], // Subtracts 5\n        },\n      })).to.equal(1);\n    });\n\n    it('should only subtract expenses that are meant to be subtracted', () => {\n      const calc = new CalculatorClass({\n        expensesSubtractFromIncome: [EXPENSES.LEASING],\n      });\n      expect(calc.getTotalIncome({\n        borrowers: {\n          salary: 1,\n          bonusExists: true,\n          bonus2018: 2, // Adds 1\n          otherIncome: [{ value: 3 }],\n          expenses: [\n            { value: 1, description: EXPENSES.LEASING },\n            { value: 5, description: EXPENSES.OTHER },\n          ],\n        },\n      })).to.equal(4);\n    });\n  });\n\n  describe('personalInfoPercent', () => {\n    it('works', () => {\n      expect(Calculator.personalInfoPercent({\n        borrowers: [{\n          _id: 'aBcNvYnq34rnb29nh',\n          adminValidation: {},\n          birthDate: '1992-04-14',\n          bonusExists: false,\n          childrenCount: 0,\n          citizenship: 'hello',\n          civilStatus: 'MARRIED',\n          createdAt: '2018-08-23T10:18:18.139Z',\n          expenses: [],\n          firstName: 'dfadf',\n          gender: 'M',\n          isSwiss: false,\n          isUSPerson: false,\n          lastName: 'asdfasd',\n          otherFortune: [],\n          otherIncome: [],\n          realEstate: [],\n          residencyPermit: 'b',\n          sameAddress: true,\n          updatedAt: '2018-08-23T10:20:22.234Z',\n          userId: 'fAksm7pJveZybme5F',\n          salary: 100,\n          netSalary: 80,\n          bankFortune: 1000,\n          hasOwnCompany: false,\n          ownCompanies: [],\n        }],\n      })).to.equal(1);\n    });\n  });\n\n  describe('sumValues', () => {\n    it('sums values with a single key', () => {\n      expect(Calculator.sumValues({\n        borrowers: [{ a: 1 }, { a: 2 }],\n        keys: 'a',\n      })).to.equal(3);\n    });\n\n    it('sums values with multiple keys', () => {\n      expect(Calculator.sumValues({\n        borrowers: [{ a: 1, b: 4 }, { a: 2, b: 3 }],\n        keys: ['a', 'b'],\n      })).to.equal(10);\n    });\n\n    it('omits keys if they are not provided', () => {\n      expect(Calculator.sumValues({ borrowers: [{ a: 1 }, {}], keys: 'a' })).to.equal(1);\n    });\n  });\n\n  describe('getYearsToRetirement', () => {\n    it('returns the proper difference for a male', () => {\n      expect(Calculator.getRetirement({\n        borrowers: [{ age: 25, gender: GENDER.M }],\n      })).to.equal(40);\n    });\n\n    it('returns 0 for a retired person', () => {\n      expect(Calculator.getRetirement({\n        borrowers: [{ age: 70, gender: GENDER.M }],\n      })).to.equal(0);\n    });\n  });\n\n  describe('getFortuneReturns', () => {\n    it('returns 0 if the ratio is not set', () => {\n      expect(Calculator.getFortuneReturns({\n        borrowers: [{ bankFortune: 100 }],\n      })).to.equal(0);\n    });\n\n    it('returns some revenue if the constant is set', () => {\n      const calc = new CalculatorClass({\n        fortuneReturnsRatio: 0.01,\n      });\n      expect(calc.getFortuneReturns({\n        borrowers: [{ bankFortune: 100 }],\n      })).to.equal(1);\n    });\n  });\n\n  describe('getRealEstateExpenses', () => {\n    it('adds up expenses for real estate', () => {\n      // 12k maintenance, 48k interests, 12k amort\n      expect(Calculator.getRealEstateExpenses({\n        borrowers: [{ realEstate: [{ value: 1200000, loan: 960000 }] }],\n      })).to.equal(6000);\n    });\n\n    it('counts no amortization if the loan is below amortizationGoal', () => {\n      // 12k maintenance, 39k interests, 0 amort\n      expect(Calculator.getRealEstateExpenses({\n        borrowers: [{ realEstate: [{ value: 1200000, loan: 780000 }] }],\n      })).to.equal(4250);\n    });\n  });\n\n  describe('getGroupedExpenses', () => {\n    it('groups expenses between borrowers', () => {\n      const borrowers = [\n        {\n          expenses: [\n            { description: 'a', value: 10 },\n            { description: 'c', value: 1 },\n          ],\n        },\n        {\n          expenses: [\n            { description: 'b', value: 5 },\n            { description: 'a', value: 5 },\n          ],\n        },\n      ];\n      expect(Calculator.getGroupedExpenses({ borrowers })).to.deep.equal({\n        a: 15,\n        b: 5,\n        c: 1,\n      });\n    });\n  });\n\n  describe('getFormattedExpenses', () => {\n    it('gets an object with expenses to add or subtract', () => {\n      const calc = new CalculatorClass({\n        expensesSubtractFromIncome: [EXPENSES.LEASING],\n      });\n      const borrowers = [\n        {\n          expenses: [\n            { description: EXPENSES.LEASING, value: 10 },\n            { description: EXPENSES.PENSIONS, value: 1 },\n          ],\n        },\n        {\n          expenses: [\n            { description: EXPENSES.LEASING, value: 5 },\n            { description: EXPENSES.OTHER, value: 1 },\n          ],\n        },\n      ];\n      expect(calc.getFormattedExpenses({ borrowers })).to.deep.equal({\n        add: 2,\n        subtract: 15,\n      });\n    });\n  });\n\n  describe('getBorrowerFormHash', () => {\n    it('returns a value for a borrower', () => {\n      const borrowers = [\n        {\n          expenses: [\n            { description: EXPENSES.LEASING, value: 10 },\n            { description: EXPENSES.PENSIONS, value: 1 },\n          ],\n        },\n      ];\n\n      expect(Calculator.getBorrowerFormHash({ borrowers })).to.equal(-559003621);\n    });\n\n    it('changes for non required form values as well', () => {\n      const borrower1 = { company: 'a' };\n      const borrower2 = { company: 'b' };\n\n      expect(Calculator.getBorrowerFormHash({ borrowers: borrower1 })).to.not.equal(Calculator.getBorrowerFormHash({ borrowers: borrower2 }));\n    });\n\n    it('returns a different value for multiple borrowers', () => {\n      const borrowers = [\n        {\n          expenses: [\n            { description: EXPENSES.LEASING, value: 10 },\n            { description: EXPENSES.PENSIONS, value: 1 },\n          ],\n        },\n        {\n          expenses: [\n            { description: EXPENSES.LEASING, value: 5 },\n            { description: EXPENSES.OTHER, value: 1 },\n          ],\n        },\n      ];\n\n      expect(Calculator.getBorrowerFormHash({ borrowers })).to.equal(1188420103);\n    });\n  });\n\n  describe('real estate income algorithm', () => {\n    it('adds income to - and subtract theoretical cost from - totalIncome for DEFAULT', () => {\n      const borrowers = [\n        { realEstate: [{ income: 72000, value: 1200000, loan: 960000 }] },\n        { realEstate: [{ income: 72000, value: 1200000, loan: 960000 }] },\n      ];\n\n      expect(Calculator.getRealEstateIncome({ borrowers })).to.equal(144000);\n      expect(Calculator.getTotalIncome({ borrowers })).to.equal(0);\n    });\n\n    context('with algoritm POSITIVE_NEGATIVE_SPLIT', () => {\n      let calc;\n\n      beforeEach(() => {\n        calc = new CalculatorClass({\n          realEstateIncomeAlgorithm:\n            REAL_ESTATE_INCOME_ALGORITHMS.POSITIVE_NEGATIVE_SPLIT,\n        });\n      });\n\n      it('adds to income if delta is positive', () => {\n        const borrowers = [\n          { realEstate: [{ income: 50000, value: 1200000, loan: 960000 }] },\n          { realEstate: [{ income: 73000, value: 1200000, loan: 960000 }] },\n        ];\n\n        expect(calc.getTotalIncome({ borrowers })).to.equal(1000);\n      });\n\n      it('adds to income if delta is positive', () => {\n        const borrowers = [\n          { realEstate: [{ income: 100000, value: 1200000, loan: 960000 }] },\n        ];\n\n        expect(calc.getTotalIncome({ borrowers })).to.equal(28000);\n      });\n\n      it('adds to expenses if delta is negative', () => {\n        const borrowers = [\n          { realEstate: [{ income: 50000, value: 1200000, loan: 960000 }] },\n          { realEstate: [{ income: 100000, value: 1200000, loan: 960000 }] },\n        ];\n\n        expect(calc.getFormattedExpenses({ borrowers })).to.deep.equal({\n          subtract: -28000,\n          add: 22000,\n        });\n      });\n\n      it('considers income based on realEstateIncomeConsideration', () => {\n        calc = new CalculatorClass({\n          realEstateIncomeAlgorithm:\n            REAL_ESTATE_INCOME_ALGORITHMS.POSITIVE_NEGATIVE_SPLIT,\n          realEstateIncomeConsideration: 0.8,\n        });\n        const borrowers = [\n          { realEstate: [{ income: 100000, value: 1200000, loan: 960000 }] },\n        ];\n\n        expect(calc.getTotalIncome({ borrowers })).to.equal(8000);\n      });\n    });\n  });\n\n  describe('shouldUseNetSalary', () => {\n    it('works when applying global rules', () => {\n      const loan = {\n        structures: [],\n        borrowers: [{ salary: 120000, netSalary: 10000 }],\n      };\n      const calc = new CalculatorClass({\n        loan,\n        lenderRules: [\n          { filter: { and: [true] }, incomeConsiderationType: 'NET' },\n          { filter: { and: [{ '>': [{ var: 'INCOME' }, 100000] }] },  },\n        ],\n      });\n      const result = calc.shouldUseNetSalary();\n      expect(result).to.equal(true);\n\n      const salary = calc.getSalary({ loan });\n      expect(salary).to.equal(10000);\n    });\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport Calculator from '..';\n\ndescribe('Calculator', () => {\n  it('combines all calculators', () => {\n    // Test code\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\nimport { DOCUMENTS, STEPS } from 'core/api/constants';\nimport { initialDocuments as borrowerDocuments } from 'core/api/borrowers/borrowersAdditionalDocuments';\nimport { initialDocuments as propertyDocuments } from 'core/api/properties/propertiesAdditionalDocuments';\n\nimport Calculator from '..';\n\ndescribe('CombinedCalculator', () => {\n  describe('filesProgress', () => {\n    it('sums file progress across the loan', () => {\n      const property = {\n        documents: { [DOCUMENTS.PROPERTY_PLANS]: [{}] },\n        _id: 'jo',\n        additionalDocuments: propertyDocuments,\n      };\n      const progress = Calculator.filesProgress({\n        loan: {\n          structure: {\n            property,\n          },\n          borrowers: [\n            {\n              documents: { [DOCUMENTS.IDENTITY]: [{}] },\n              _id: 'id1',\n              additionalDocuments: borrowerDocuments,\n            },\n            {\n              documents: { [DOCUMENTS.TAXES]: [{}] },\n              _id: 'id2',\n              additionalDocuments: borrowerDocuments,\n            },\n          ],\n          properties: [property],\n          step: STEPS.SOLVENCY,\n        },\n      });\n      expect(progress.percent).to.be.within(0.15, 0.16);\n      expect(progress.count).to.equal(19);\n    });\n\n    it('skips the property if there is none', () => {\n      const progress = Calculator.filesProgress({\n        loan: {\n          structure: {},\n          borrowers: [\n            {\n              documents: { [DOCUMENTS.IDENTITY]: [{}] },\n              _id: 'id1',\n              additionalDocuments: borrowerDocuments,\n            },\n            {\n              documents: {\n                [DOCUMENTS.TAXES]: [{}],\n                [DOCUMENTS.IDENTITY]: [{}],\n              },\n              _id: 'id2',\n              additionalDocuments: borrowerDocuments,\n            },\n          ],\n          step: STEPS.SOLVENCY,\n        },\n      });\n      expect(progress.percent).to.be.within(0.23, 0.24);\n      expect(progress.count).to.equal(13);\n    });\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { Calculator } from '..';\nimport { LENDER_RULES_VARIABLES } from '../../../api/constants';\n\ndescribe('LenderRulesInitializator', () => {\n  let loan;\n  let lenderRules;\n  let structure;\n  let property;\n\n  beforeEach(() => {\n    property = {\n      _id: 'propertyId',\n      value: 120000,\n    };\n    structure = {\n      id: 'selectedStructure',\n      propertyId: 'propertyId',\n      property,\n    };\n    loan = {\n      structures: [structure],\n      properties: [property],\n      selectedStructure: 'selectedStructure',\n    };\n    lenderRules = [];\n  });\n\n  it('does not initialize if no lenderRules are passed in the constructor', () => {\n    const calc = new Calculator({});\n    expect(calc.maxBorrowRatio).to.equal(0.8);\n  });\n\n  it('changes the rules based on the selected structure', () => {\n    lenderRules = [\n      {\n        filter: {\n          and: [\n            { '>': [{ var: LENDER_RULES_VARIABLES.PROPERTY_VALUE }, 100000] },\n          ],\n        },\n        maxBorrowRatio: 0.7,\n      },\n    ];\n    const calc = new Calculator({ loan, lenderRules });\n    expect(calc.maxBorrowRatio).to.equal(0.7);\n\n    property.value = 90000;\n    const calc2 = new Calculator({ loan, lenderRules });\n    expect(calc2.maxBorrowRatio).to.equal(0.8);\n  });\n\n  // TODO\n  it.skip('uses primary rules to match secondary rules', () => {\n    lenderRules = [\n      {\n        filter: {\n          and: [\n            { '>': [{ var: LENDER_RULES_VARIABLES.PROPERTY_VALUE }, 100000] },\n          ],\n        },\n        bonusConsideration: 1,\n      },\n      {\n        filter: {\n          and: [{ '<': [{ var: LENDER_RULES_VARIABLES.INCOME }, 0.5] }],\n        },\n        maxIncomeRatio: 0.39,\n      },\n    ];\n  });\n\n  it('merges rules in the right order', () => {\n    lenderRules = [\n      {\n        filter: {\n          and: [\n            { '>': [{ var: LENDER_RULES_VARIABLES.PROPERTY_VALUE }, 100000] },\n          ],\n        },\n        maxBorrowRatio: 0.7,\n      },\n      {\n        filter: {\n          and: [\n            { '>': [{ var: LENDER_RULES_VARIABLES.PROPERTY_VALUE }, 110000] },\n          ],\n        },\n        maxBorrowRatio: 0.6,\n      },\n    ];\n    const calc = new Calculator({ loan, lenderRules });\n    expect(calc.maxBorrowRatio).to.equal(0.6);\n  });\n\n  it('merges comments together', () => {\n    lenderRules = [\n      {\n        filter: {\n          and: [\n            { '>': [{ var: LENDER_RULES_VARIABLES.PROPERTY_VALUE }, 100000] },\n          ],\n        },\n        adminComments: ['a'],\n      },\n      {\n        filter: {\n          and: [\n            { '>': [{ var: LENDER_RULES_VARIABLES.PROPERTY_VALUE }, 110000] },\n          ],\n        },\n        adminComments: ['b'],\n      },\n    ];\n    const calc = new Calculator({ loan, lenderRules });\n    expect(calc.adminComments).to.deep.equal(['a', 'b']);\n  });\n\n  it('does not skip a rule if it is 0', () => {\n    lenderRules = [{ filter: { and: [true] }, dividendsConsideration: 0 }];\n    const calc = new Calculator({ loan, lenderRules });\n    expect(calc.dividendsConsideration).to.equal(0);\n  });\n\n  it('skips undefined and null rules', () => {\n    lenderRules = [\n      { filter: { and: [true] }, dividendsConsideration: 0.5 },\n      { filter: { and: [true] }, dividendsConsideration: undefined },\n      { filter: { and: [true] }, dividendsConsideration: null },\n    ];\n    const calc = new Calculator({ loan, lenderRules });\n    expect(calc.dividendsConsideration).to.equal(0.5);\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport Calculator, { Calculator as CalculatorClass } from '..';\nimport { INTEREST_RATES, EXPENSES } from 'core/api/constants';\nimport { OWN_FUNDS_USAGE_TYPES } from '../../../api/constants';\n\ndescribe('LoanCalculator', () => {\n  describe('getProjectValue', () => {\n    it('returns 0 if the property value is 0 or does not exist', () => {\n      expect(Calculator.getProjectValue({ loan: { structure: {} } })).to.equal(0);\n      expect(Calculator.getProjectValue({\n        loan: { structure: { property: { value: 0 } }, propertyWork: 100 },\n      })).to.equal(0);\n    });\n\n    it('calculates project with propertyValue, notary fees and propertyWork', () => {\n      expect(Calculator.getProjectValue({\n        loan: { structure: { property: { value: 100 }, propertyWork: 50 } },\n      })).to.equal(155);\n    });\n  });\n\n  describe('getTotalUsed', () => {\n    it('it gets the sum of all used own funds, without pledged funds', () => {\n      expect(Calculator.getTotalUsed({\n        loan: {\n          structure: {\n            ownFunds: [\n              { value: 3, usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW },\n              { value: 2, usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE },\n              { value: 1 },\n            ],\n          },\n        },\n      })).to.equal(6);\n    });\n  });\n\n  describe('getFees', () => {\n    it('calculates fees if no notary fees exist', () => {\n      expect(Calculator.getFees({\n        loan: {\n          structure: {\n            propertyId: 'prop',\n            property: { _id: 'prop', value: 100 },\n          },\n        },\n      }).total).to.equal(5);\n    });\n\n    it('uses provided notary fees if they are defined', () => {\n      expect(Calculator.getFees({\n        loan: { structure: { property: { value: 100 }, notaryFees: 123 } },\n      }).total).to.equal(123);\n    });\n\n    it('uses provided notary fees if they are 0', () => {\n      expect(Calculator.getFees({\n        loan: { structure: { property: { value: 100 }, notaryFees: 0 } },\n      }).total).to.equal(0);\n    });\n\n    it('returns accurate notary fees if data is sufficient', () => {\n      expect(Calculator.getFees({\n        loan: {\n          structure: {\n            propertyId: 'prop',\n            wantedLoan: 800000,\n            property: { _id: 'prop', value: 1000000, canton: 'GE' },\n          },\n        },\n      })).to.deep.include({ total: 55159.1 });\n    });\n\n    it('calculates accurate fees for a promotionOption', () => {\n      expect(Calculator.getFees({\n        loan: {\n          structures: [\n            {\n              id: 'struct1',\n              promotionOptionId: 'option1',\n              wantedLoan: 800000,\n            },\n          ],\n          promotionOptions: [\n            {\n              value: 1000000,\n              _id: 'option1',\n              promotionLots: [\n                {\n                  properties: [{ _id: 'prop', canton: 'GE' }],\n                },\n              ],\n            },\n          ],\n        },\n        structureId: 'struct1',\n      })).to.deep.include({ total: 55159.1 });\n    });\n  });\n\n  describe('getInterests', () => {\n    it('uses interest rates if provided', () => {\n      expect(Calculator.getInterests({\n        loan: {\n          structure: {\n            property: { value: 100000 },\n            wantedLoan: 500000,\n            loanTranches: [{ value: 1, type: 'myRate' }],\n          },\n        },\n        interestRates: { myRate: 0.012 },\n      })).to.equal(500);\n    });\n\n    it('uses the rates from the offer if it exists, even if interest rate is provided', () => {\n      expect(Calculator.getInterests({\n        loan: {\n          structure: {\n            property: { value: 100000 },\n            wantedLoan: 500000,\n            loanTranches: [{ value: 1, type: 'myRate' }],\n            offer: { myRate: 0.012 },\n          },\n        },\n        interestRates: { myRate: 0.024 },\n      })).to.equal(500);\n    });\n  });\n\n  describe('getTheoretialInterests', () => {\n    it('uses the theoretical rate', () => {\n      expect(Calculator.getTheoreticalInterests({\n        loan: {\n          structure: { wantedLoan: 1200000, property: { value: 1000000 } },\n        },\n      })).to.equal(5000);\n    });\n\n    it('uses the overridden theoretial rate', () => {\n      const Calc = new CalculatorClass({\n        theoreticalInterestRate: 0.04,\n        theoreticalInterestRate2ndRank: 0.04,\n      });\n      expect(Calc.getTheoreticalInterests({\n        loan: {\n          structure: { wantedLoan: 1200000, property: { value: 1000000 } },\n        },\n      })).to.equal(4000);\n    });\n\n    it('uses theoreticalInterestRate2ndRank to calculate the rate', () => {\n      const Calc = new CalculatorClass({\n        theoreticalInterestRate: 0.01,\n        theoreticalInterestRate2ndRank: 0.1,\n      });\n\n      // 650k at 1%\n      // 150k at 10%\n      // -> 1791\n\n      expect(Calc.getTheoreticalInterests({\n        loan: {\n          structure: { wantedLoan: 800000, property: { value: 1000000 } },\n        },\n      })).to.be.within(1791, 1792);\n    });\n  });\n\n  describe('getAmortization', () => {\n    it('figures out what amortization should be', () => {\n      expect(Calculator.getAmortization({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            propertyWork: 0,\n            property: { value: 1200000 },\n          },\n        },\n      })).to.equal(1000);\n    });\n\n    it('does not amortize if loan is lower than 65%', () => {\n      expect(Calculator.getAmortization({\n        loan: {\n          structure: {\n            wantedLoan: 650000,\n            propertyWork: 0,\n            property: { value: 1000000 },\n          },\n        },\n      })).to.equal(0);\n\n      expect(Calculator.getAmortization({\n        loan: {\n          structure: {\n            wantedLoan: 1000,\n            propertyWork: 0,\n            property: { value: 1000000 },\n          },\n        },\n      })).to.equal(0);\n    });\n\n    it('does amortize if the loan is even a little bit above 65%', () => {\n      expect(Calculator.getAmortization({\n        loan: {\n          structure: {\n            wantedLoan: 650001,\n            propertyWork: 0,\n            property: { value: 1000000 },\n          },\n        },\n      })).to.be.above(0);\n    });\n\n    it('should amortize faster if borrowers are old');\n\n    it('gets amortization from the offer if it is defined', () => {\n      expect(Calculator.getAmortization({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            propertyWork: 0,\n            offer: { amortizationGoal: 0.5 },\n            property: { value: 1200000 },\n          },\n        },\n      })).to.equal(2000);\n    });\n\n    it('uses amortizationYears from the offer if defined', () => {\n      expect(Calculator.getAmortization({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            propertyWork: 0,\n            offer: { amortizationGoal: 0.5, amortizationYears: 30 },\n            property: { value: 1200000 },\n          },\n        },\n      })).to.equal(1000);\n    });\n\n    it('resets amortizationGoal after calculating with offers', () => {\n      expect(Calculator.getAmortization({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            propertyWork: 0,\n            offer: { amortizationGoal: 0.5 },\n            property: { value: 1200000 },\n          },\n        },\n      })).to.equal(2000);\n\n      expect(Calculator.getAmortization({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            propertyWork: 0,\n            property: { value: 1200000 },\n          },\n        },\n      })).to.equal(1000);\n    });\n\n    it('calculates amortization with an overrideOffer if provided', () => {\n      expect(Calculator.getAmortization({\n        loan: {\n          structures: [\n            {\n              id: 'asdf',\n              wantedLoan: 640000,\n              propertyWork: 0,\n              propertyId: 'prop',\n            },\n          ],\n          properties: [{ _id: 'prop', value: 1000000 }],\n        },\n        offerOverride: { amortizationGoal: 0.65 },\n        structureId: 'asdf',\n      })).to.equal(0);\n\n      expect(Calculator.getAmortization({\n        loan: {\n          structures: [\n            {\n              id: 'asdf',\n              wantedLoan: 650000,\n              propertyWork: 0,\n              propertyId: 'prop',\n            },\n          ],\n          properties: [{ _id: 'prop', value: 1000000 }],\n        },\n        offerOverride: { amortizationGoal: 0.5, amortizationYears: 10 },\n        structureId: 'asdf',\n      })).to.equal(1250);\n    });\n  });\n\n  describe('getMonthly', () => {\n    it('sums amortization and interests', () => {\n      expect(Calculator.getMonthly({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            property: { value: 1200000 },\n            propertyWork: 0,\n            loanTranches: [{ type: INTEREST_RATES.YEARS_10, value: 1 }],\n          },\n          currentInterestRates: { [INTEREST_RATES.YEARS_10]: 0.01 },\n        },\n      })).to.be.within(1800, 2500);\n    });\n\n    it('uses provided interestRates', () => {\n      expect(Calculator.getMonthly({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            property: { value: 1200000 },\n            propertyWork: 0,\n            loanTranches: [{ type: INTEREST_RATES.YEARS_10, value: 1 }],\n          },\n        },\n        interestRates: { [INTEREST_RATES.YEARS_10]: 0.01 },\n      })).to.equal(1800);\n    });\n\n    it('uses the offer interestRates', () => {\n      expect(Calculator.getMonthly({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            property: { value: 1200000 },\n            offer: {\n              amortizationGoal: 0.5,\n              [INTEREST_RATES.YEARS_10]: 0.02,\n            },\n            propertyWork: 0,\n            loanTranches: [{ type: INTEREST_RATES.YEARS_10, value: 1 }],\n          },\n        },\n        interestRates: { [INTEREST_RATES.YEARS_10]: 0.01 },\n      })).to.equal(3600);\n    });\n  });\n\n  describe('getTheoreticalMonthly', () => {\n    it('uses the default theoretical rate', () => {\n      expect(Calculator.getTheoreticalMonthly({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            property: { value: 1200000 },\n            propertyWork: 0,\n            loanTranches: [{ type: INTEREST_RATES.YEARS_10, value: 1 }],\n          },\n        },\n      })).to.equal(6000);\n    });\n\n    it('uses the provided theoretical rate', () => {\n      const Calc = new CalculatorClass({\n        interestRates: { myRate: 0.012 },\n        theoreticalInterestRate: 0.01,\n      });\n      expect(Calc.getTheoreticalMonthly({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            property: { value: 1200000 },\n            propertyWork: 0,\n            loanTranches: [{ type: INTEREST_RATES.YEARS_10, value: 1 }],\n          },\n        },\n      })).to.equal(2800);\n    });\n\n    it('adds any expenses from the borrowers', () => {\n      const Calc = new CalculatorClass({\n        interestRates: { myRate: 0.012 },\n        theoreticalInterestRate: 0.01,\n        expensesSubtractFromIncome: Object.values(EXPENSES).filter(v => v !== EXPENSES.LEASING),\n      });\n\n      // 2800 for the loan\n      // 100 more for the leasing\n      // 2800 for the other property\n\n      expect(Calc.getTheoreticalMonthly({\n        loan: {\n          structure: {\n            wantedLoan: 960000,\n            property: { value: 1200000 },\n            propertyWork: 0,\n            loanTranches: [{ type: INTEREST_RATES.YEARS_10, value: 1 }],\n          },\n          borrowers: [\n            {\n              expenses: { description: EXPENSES.LEASING, value: 1200 },\n              realEstate: [{ value: 1200000, loan: 960000 }],\n            },\n          ],\n        },\n      })).to.equal(5700);\n    });\n  });\n\n  describe('getIncomeRatio', () => {\n    it('compares theoretical monthly cost and income', () => {\n      expect(Calculator.getIncomeRatio({\n        loan: {\n          structure: {\n            wantedLoan: 800000,\n            property: { value: 1000000 },\n            propertyWork: 0,\n            loanTranches: [{ type: INTEREST_RATES.YEARS_10, value: 1 }],\n          },\n          borrowers: [{ salary: 180000 }],\n        },\n        interestRates: { [INTEREST_RATES.YEARS_10]: 0.01 },\n      })).to.be.within(0.33, 0.34);\n    });\n\n    it('returns 1 if the incomeRatio is negative', () => {\n      expect(Calculator.getIncomeRatio({\n        loan: {\n          structure: {\n            wantedLoan: 800000,\n            property: { value: 1000000 },\n            propertyWork: 0,\n            loanTranches: [{ type: INTEREST_RATES.YEARS_10, value: 1 }],\n          },\n          borrowers: [\n            { expenses: [{ value: 10000, description: EXPENSES.LEASING }] },\n          ],\n        },\n        interestRates: { [INTEREST_RATES.YEARS_10]: 0.01 },\n      })).to.equal(1);\n    });\n  });\n\n  describe('getBorrowRatio', () => {\n    it('calculates ratio based on loan, property value, and propertyWork', () => {\n      expect(Calculator.getBorrowRatio({\n        loan: {\n          structure: {\n            wantedLoan: 500,\n            propertyWork: 100,\n            property: { value: 900 },\n          },\n        },\n      })).to.equal(0.5);\n    });\n  });\n\n  describe('getMaxBorrowRatio', () => {\n    it('returns the max ratio for a loan', () => {\n      expect(Calculator.getMaxBorrowRatio({ loan: {} })).to.equal(0.8);\n    });\n  });\n\n  describe('loanHasMinimalInformation', () => {\n    it('returns true if ownFunds, property value and wantedLoan are defined', () => {\n      expect(Calculator.loanHasMinimalInformation({\n        loan: {\n          structure: {\n            wantedLoan: 1,\n            ownFunds: [{ value: 100000 }],\n            property: { value: 1 },\n          },\n        },\n      })).to.equal(true);\n    });\n\n    it('returns false if one of these fields is undefined', () => {\n      expect(Calculator.loanHasMinimalInformation({\n        loan: {\n          structure: {\n            fortuneUsed: 1,\n            property: { value: 1 },\n          },\n        },\n      })).to.equal(false);\n      expect(Calculator.loanHasMinimalInformation({\n        loan: {\n          structure: {\n            wantedLoan: 1,\n            property: { value: 1 },\n          },\n        },\n      })).to.equal(false);\n      expect(Calculator.loanHasMinimalInformation({\n        loan: {\n          structure: {\n            wantedLoan: 1,\n            fortuneUsed: 1,\n          },\n        },\n      })).to.equal(false);\n    });\n  });\n\n  describe('getLoanFilesProgress', () => {\n    it('returns 0 for an empty loan', () => {\n      expect(Calculator.getLoanFilesProgress({ loan: { logic: {} } })).to.deep.equal({ percent: 0, count: 1 });\n    });\n\n    it('returns 100% for a loan initially, when documents have arrived', () => {\n      expect(Calculator.getLoanFilesProgress({\n        loan: { documents: {}, logic: {} },\n      })).to.deep.equal({ percent: 1, count: 0 });\n    });\n  });\n\n  describe('getMissingLoanDocuments', () => {\n    it('shows nothing is required initially', () => {\n      expect(Calculator.getMissingLoanDocuments({\n        loan: { logic: {} },\n      })).to.deep.equal([]);\n      expect(Calculator.getMissingLoanDocuments({\n        loan: { logic: {} },\n      })).to.deep.equal([]);\n      expect(Calculator.getMissingLoanDocuments({\n        loan: { documents: {}, logic: {} },\n      })).to.deep.equal([]);\n      expect(Calculator.getMissingLoanDocuments({\n        loan: {\n          documents: { other: [{ key: 'hello' }] },\n          logic: {},\n        },\n      })).to.deep.equal([]);\n    });\n  });\n\n  describe('getMortgageNoteIncrease', () => {\n    it('returns the loan value if no mortgage note is added', () => {\n      expect(Calculator.getMortgageNoteIncrease({\n        loan: {\n          structure: {\n            propertyId: 'propertyId',\n            wantedLoan: 800000,\n            property: {},\n          },\n        },\n      })).to.equal(800000);\n    });\n\n    it('returns the loan value if no property is selected', () => {\n      expect(Calculator.getMortgageNoteIncrease({\n        loan: {\n          structure: {\n            wantedLoan: 800000,\n            property: {},\n          },\n        },\n      })).to.equal(800000);\n    });\n\n    it('returns the increase with mortgageNotes on the property', () => {\n      expect(Calculator.getMortgageNoteIncrease({\n        loan: {\n          structure: {\n            propertyId: 'propertyId',\n            wantedLoan: 800000,\n            property: { mortgageNotes: [{ value: 100000 }] },\n          },\n        },\n      })).to.equal(700000);\n    });\n\n    it('counts a mortgagenote as 0 if no value is set on it', () => {\n      expect(Calculator.getMortgageNoteIncrease({\n        loan: {\n          structure: {\n            propertyId: 'propertyId',\n            wantedLoan: 800000,\n            property: {},\n          },\n        },\n      })).to.equal(800000);\n    });\n\n    it('works with borrowers mortgageNotes', () => {\n      expect(Calculator.getMortgageNoteIncrease({\n        loan: {\n          structure: {\n            wantedLoan: 800000,\n            mortgageNoteIds: ['note'],\n            property: {},\n          },\n          borrowers: [{ mortgageNotes: [{ _id: 'note' }] }],\n        },\n      })).to.equal(800000);\n      expect(Calculator.getMortgageNoteIncrease({\n        loan: {\n          structure: {\n            wantedLoan: 800000,\n            mortgageNoteIds: ['note'],\n            property: {},\n          },\n          borrowers: [{ mortgageNotes: [{ _id: 'note', value: 200000 }] }],\n        },\n      })).to.equal(600000);\n    });\n\n    it('caps the increase at 0', () => {\n      expect(Calculator.getMortgageNoteIncrease({\n        loan: {\n          structure: {\n            wantedLoan: 800000,\n            propertyId: 'propertyId',\n            mortgageNoteIds: ['note'],\n            property: { mortgageNotes: [{ value: 500000 }] },\n          },\n          borrowers: [{ mortgageNotes: [{ _id: 'note', value: 500000 }] }],\n        },\n      })).to.equal(0);\n    });\n  });\n\n  describe('getNonPledgedOwnFunds', () => {\n    it('gets them', () => {\n      const loan = {\n        structure: {\n          ownFunds: [\n            { value: 100 },\n            { value: 100, usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE },\n          ],\n        },\n      };\n\n      expect(Calculator.getNonPledgedOwnFunds({ loan })).to.equal(100);\n    });\n  });\n\n  describe('calculateMissingOwnFunds', () => {\n    it('returns a standard amount', () => {\n      expect(Calculator.getMissingOwnFunds({\n        properties: [{ _id: 'propertyId', value: 1000000 }],\n        loan: {\n          properties: [{ _id: 'propertyId', value: 1000000 }],\n          structures: [\n            {\n              id: 'struct1',\n              wantedLoan: 800000,\n              propertyId: 'propertyId',\n              propertyWork: 0,\n              ownFunds: [],\n            },\n          ],\n          borrowers: [{}],\n        },\n        structureId: 'struct1',\n        structure: {\n          id: 'struct1',\n          wantedLoan: 800000,\n          propertyId: 'propertyId',\n          propertyWork: 0,\n          ownFunds: [],\n        },\n      })).to.equal(250000);\n    });\n\n    it('overrides notaryFees if provided', () => {\n      expect(Calculator.getMissingOwnFunds({\n        structure: {\n          id: 'struct1',\n          wantedLoan: 800000,\n          propertyId: 'propertyId',\n          propertyWork: 0,\n          ownFunds: [],\n          notaryFees: 0,\n        },\n        properties: [{ _id: 'propertyId', value: 1000000 }],\n        loan: {\n          properties: [{ _id: 'propertyId', value: 1000000 }],\n          structures: [\n            {\n              id: 'struct1',\n              wantedLoan: 800000,\n              propertyId: 'propertyId',\n              propertyWork: 0,\n              ownFunds: [],\n              notaryFees: 0,\n            },\n          ],\n        },\n        borrowers: [{}],\n        structureId: 'struct1',\n      })).to.equal(200000);\n    });\n\n    it('uses property work', () => {\n      expect(Calculator.getMissingOwnFunds({\n        structure: {\n          id: 'struct1',\n          wantedLoan: 800000,\n          propertyId: 'propertyId',\n          propertyWork: 100000,\n          ownFunds: [],\n        },\n        properties: [{ _id: 'propertyId', value: 900000 }],\n        loan: {\n          properties: [{ _id: 'propertyId', value: 900000 }],\n          structures: [\n            {\n              id: 'struct1',\n              wantedLoan: 800000,\n              propertyId: 'propertyId',\n              propertyWork: 100000,\n              ownFunds: [],\n            },\n          ],\n          borrowers: [{}],\n        },\n        structureId: 'struct1',\n      })).to.equal(245000);\n    });\n\n    it('subtracts used own funds', () => {\n      expect(Calculator.getMissingOwnFunds({\n        structure: {\n          id: 'struct1',\n          wantedLoan: 800000,\n          propertyId: 'propertyId',\n          propertyWork: 0,\n          ownFunds: [{ value: 100000 }],\n        },\n        properties: [{ _id: 'propertyId', value: 1000000 }],\n        loan: {\n          properties: [{ _id: 'propertyId', value: 1000000 }],\n          structures: [\n            {\n              id: 'struct1',\n              wantedLoan: 800000,\n              propertyId: 'propertyId',\n              propertyWork: 0,\n              ownFunds: [{ value: 100000 }],\n            },\n          ],\n        },\n        borrowers: [{}],\n        structureId: 'struct1',\n      })).to.equal(150000);\n    });\n\n    it('does not count pledge as own funds', () => {\n      expect(Calculator.getMissingOwnFunds({\n        structure: {\n          id: 'struct1',\n          wantedLoan: 800000,\n          propertyId: 'propertyId',\n          propertyWork: 0,\n          ownFunds: [\n            { value: 100000, usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE },\n            { value: 100000, usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW },\n          ],\n        },\n        properties: [{ _id: 'propertyId', value: 1000000 }],\n        loan: {\n          properties: [{ _id: 'propertyId', value: 1000000 }],\n          structures: [\n            {\n              id: 'struct1',\n              wantedLoan: 800000,\n              propertyId: 'propertyId',\n              propertyWork: 0,\n              ownFunds: [\n                { value: 100000, usageType: OWN_FUNDS_USAGE_TYPES.PLEDGE },\n                { value: 100000, usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW },\n              ],\n            },\n          ],\n        },\n        borrowers: [{}],\n        structureId: 'struct1',\n      })).to.equal(150000);\n    });\n\n    it('uses calculated notary fees and rounds them', () => {\n      expect(Calculator.getMissingOwnFunds({\n        structure: {\n          id: 'struct1',\n          wantedLoan: 1179750,\n          propertyId: 'propertyId',\n          propertyWork: 165000,\n          ownFunds: [],\n        },\n        properties: [{ _id: 'propertyId', value: 1650000, canton: 'GE' }],\n        loan: {\n          properties: [{ _id: 'propertyId', value: 1650000, canton: 'GE' }],\n          structures: [\n            {\n              id: 'struct1',\n              wantedLoan: 1179750,\n              propertyId: 'propertyId',\n              propertyWork: 165000,\n              ownFunds: [],\n            },\n          ],\n          borrowers: [{}],\n        },\n        structureId: 'struct1',\n      })).to.be.within(720693, 720694);\n    });\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport OfferCalculator from '..';\n\ndescribe('OfferCalculator', () => {\n  it('test name', () => {\n    // Test code\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport Calculator from '..';\n\ndescribe('PromotionCalculator', () => {\n  describe('canAffordPromotionOption', () => {\n    it('test name', () => {\n      // Test code\n    });\n  });\n\n  describe('getSolvency', () => {\n    context('with infinite salary', () => {\n      it('returns property value with bank fortune only', () => {\n        expect(Calculator.getSolvency({\n          loan: { borrowers: [{ bankFortune: 250000, salary: 10000000 }] },\n          notaryFees: 50000,\n        })).to.deep.include({ withBankFortune: 1000000 });\n      });\n\n      it('returns property value with insurance2', () => {\n        expect(Calculator.getSolvency({\n          loan: {\n            borrowers: [\n              {\n                bankFortune: 150000,\n                insurance2: [{ value: 100000 }],\n                salary: 10000000,\n              },\n            ],\n          },\n          notaryFees: 50000,\n        })).to.deep.include({ withInsurance2: 1000000 });\n      });\n\n      it('returns a smaller propertyValue if little insurance2 is available', () => {\n        expect(Calculator.getSolvency({\n          loan: {\n            borrowers: [\n              {\n                bankFortune: 150000,\n                insurance2: [{ value: 60000 }],\n                salary: 10000000,\n              },\n            ],\n          },\n          notaryFees: 50000,\n        })).to.deep.include({ withInsurance2: 800000 });\n      });\n\n      it('returns a propertyValue with insurance3', () => {\n        expect(Calculator.getSolvency({\n          loan: {\n            borrowers: [\n              {\n                bankFortune: 200000,\n                insurance3A: [{ value: 50000 }],\n                salary: 10000000,\n              },\n            ],\n          },\n          notaryFees: 50000,\n        })).to.deep.include({ withInsurance3: 1000000 });\n      });\n\n      it('returns a propertyValue with insurance3 and insurance2', () => {\n        expect(Calculator.getSolvency({\n          loan: {\n            borrowers: [\n              {\n                bankFortune: 100000,\n                insurance3A: [{ value: 50000 }],\n                insurance2: [{ value: 100000 }],\n                salary: 10000000,\n              },\n            ],\n          },\n          notaryFees: 50000,\n        })).to.deep.include({ withInsurance2And3: 1000000 });\n      });\n    });\n\n    context.skip('limited by income', () => {\n      it('returns a salary limited value', () => {\n        expect(Calculator.getSolvency({\n          loan: { borrowers: [{ bankFortune: 10000000, salary: 180000 }] },\n          notaryFees: 50000,\n        })).to.deep.include({ withBankFortune: 1000000 });\n      });\n    });\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport Calculator from '..';\nimport { PROPERTY_DOCUMENTS, DOCUMENTS, STEPS } from '../../../api/constants';\nimport { initialDocuments } from '../../../api/properties/propertiesAdditionalDocuments';\n\ndescribe('PropertyCalculator', () => {\n  let params;\n  let property;\n\n  beforeEach(() => {\n    property = { _id: 'propertyId', additionalDocuments: initialDocuments };\n    params = {\n      loan: {\n        structure: { property },\n        borrowers: [{}],\n        properties: [property],\n        step: STEPS.SOLVENCY,\n      },\n    };\n  });\n\n  describe('propertyPercent', () => {\n    it('returns 0 for a new property', () => {\n      expect(Calculator.propertyPercent(params)).to.deep.equal(0);\n    });\n\n    it('returns 1 for a complete property', () => {\n      params.loan.structure.property = {\n        value: 1,\n        propertyType: '',\n        address1: 'yo',\n        city: 'Genève',\n        zipCode: 1000,\n        canton: 'GE',\n        constructionYear: 2000,\n        numberOfFloors: 3,\n        roomCount: 2,\n        minergie: '',\n        copropertyPercentage: 100,\n        isCoproperty: false,\n      };\n      params.loan.residenceType = ' ';\n      expect(Calculator.propertyPercent(params)).to.deep.equal(1);\n    });\n  });\n\n  describe('getPropAndWork', () => {\n    it('sums propertyWork and property value', () => {\n      params.loan.structure.property.value = 1;\n      params.loan.structure.propertyWork = 2;\n      expect(Calculator.getPropAndWork(params)).to.deep.equal(3);\n    });\n  });\n\n  describe('getPropertyFilesProgress', () => {\n    it('returns 0 if no documents are provided', () => {\n      property = {};\n      expect(Calculator.getPropertyFilesProgress(params)).to.deep.equal({\n        percent: 0,\n        count: 1,\n      });\n    });\n\n    it('returns 1/6 if one document is provided', () => {\n      params.loan.structure.property = {\n        documents: { [PROPERTY_DOCUMENTS.PROPERTY_PLANS]: [{}] },\n        _id: 'propertyId',\n      };\n      expect(Calculator.getPropertyFilesProgress(params)).to.deep.equal({\n        percent: 1 / 6,\n        count: 6,\n      });\n    });\n  });\n\n  describe('getMissingPropertyFields', () => {\n    it('returns the list of missing data from a property', () => {\n      expect(Calculator.getMissingPropertyFields(params)).to.deep.equal([\n        'value',\n        'propertyType',\n        'isCoproperty',\n        'copropertyPercentage',\n        'address1',\n        'zipCode',\n        'city',\n        'canton',\n        'numberOfFloors',\n        'constructionYear',\n        'roomCount',\n        'minergie',\n        'residenceType',\n      ]);\n    });\n  });\n\n  describe('getMissingPropertyDocuments', () => {\n    it('returns the list of missing documents from a property 1', () => {\n      expect(Calculator.getMissingPropertyDocuments(params)).to.deep.equal(initialDocuments.map(({ id }) => id));\n    });\n\n    it('returns the list of missing documents from a property 2', () => {\n      params.loan.structure.property.documents = {\n        [DOCUMENTS.PROPERTY_PLANS]: [{}],\n        [DOCUMENTS.PROPERTY_PICTURES]: [{}],\n      };\n      expect(Calculator.getMissingPropertyDocuments(params)).to.deep.equal(initialDocuments\n        .map(({ id }) => id)\n        .filter(id =>\n          ![DOCUMENTS.PROPERTY_PLANS, DOCUMENTS.PROPERTY_PICTURES].includes(id)));\n    });\n  });\n\n  describe('hasDetailedPropertyValue', () => {\n    it('returns false for a simple property', () => {\n      params = {\n        loan: { structure: { property: { value: 100 } } },\n      };\n      expect(Calculator.hasDetailedPropertyValue(params)).to.equal(false);\n    });\n\n    it('returns true for a detailed property', () => {\n      params = {\n        loan: {\n          structure: {\n            property: {\n              landValue: 100,\n              additionalMargin: 100,\n              constructionValue: 200,\n            },\n          },\n        },\n      };\n      expect(Calculator.hasDetailedPropertyValue(params)).to.equal(true);\n    });\n\n    it('returns true if both are provided', () => {\n      params = {\n        loan: {\n          structure: {\n            property: {\n              value: 5,\n              landValue: 100,\n              additionalMargin: 100,\n              constructionValue: 200,\n            },\n          },\n        },\n      };\n      expect(Calculator.hasDetailedPropertyValue(params)).to.equal(true);\n    });\n\n    it('works for promotionOption structures', () => {\n      params = {\n        loan: {\n          structure: {\n            promotionOption: {\n              value: 50,\n              promotionLots: [\n                {\n                  properties: [\n                    {\n                      landValue: 100,\n                      additionalMargin: 100,\n                      constructionValue: 200,\n                    },\n                  ],\n                },\n              ],\n            },\n          },\n        },\n      };\n      expect(Calculator.hasDetailedPropertyValue(params)).to.equal(true);\n    });\n\n    it('works for specific promotionOption structures', () => {\n      params = {\n        loan: {\n          structures: [{ id: 'yo', promotionOptionId: 'option1' }],\n          promotionOptions: [\n            {\n              value: 500,\n              _id: 'option1',\n              promotionLots: [\n                {\n                  properties: [\n                    {\n                      landValue: 100,\n                      additionalMargin: 100,\n                      constructionValue: 200,\n                    },\n                  ],\n                },\n              ],\n            },\n          ],\n        },\n        structureId: 'yo',\n      };\n      expect(Calculator.hasDetailedPropertyValue(params)).to.equal(true);\n    });\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport Calculator from '..';\n\ndescribe('Calculator Selector', () => {\n  let params;\n  let structure;\n  let property;\n\n  beforeEach(() => {\n    property = { value: 100 };\n    structure = { id: 'struct', propertyId: 'prop', property };\n    params = {\n      loan: { structure, structures: [structure], properties: [property] },\n    };\n  });\n\n  describe('selectProperty', () => {\n    it('returns an empty object if nothing is on the structure', () => {\n      expect(Calculator.selectProperty(params)).to.deep.equal(property);\n    });\n\n    it('returns the property if it exists', () => {\n      const property = { yo: 'dude' };\n      params.loan.structure.property = property;\n      expect(Calculator.selectProperty(params)).to.deep.equal(property);\n    });\n\n    it('returns the promotionOption if it exists, and there is no property', () => {\n      const promotionOption = {\n        promotionLots: [{ properties: [{}] }],\n        value: 100,\n      };\n      structure.promotionOption = promotionOption;\n      structure.property = undefined;\n      structure.propertyId = undefined;\n      expect(Calculator.selectProperty(params)).to.deep.equal({\n        ...promotionOption,\n        totalValue: 100,\n      });\n    });\n\n    context('with a structureId', () => {\n      beforeEach(() => {\n        params.structureId = 'struct';\n      });\n\n      it('returns an empty object if nothing is on the structure', () => {\n        structure.property = undefined;\n        structure.propertyId = undefined;\n        expect(Calculator.selectProperty(params)).to.deep.equal({});\n      });\n\n      it('returns the property if it exists', () => {\n        property = { _id: 'dude' };\n        structure.propertyId = property._id;\n        params.loan.properties = [property];\n        expect(Calculator.selectProperty(params)).to.deep.equal(property);\n      });\n\n      it('returns the promotionOption if it exists', () => {\n        const promotionOption = {\n          _id: 'dawg',\n          promotionLots: [{ properties: [{}] }],\n          value: 100,\n        };\n        structure.promotionOptionId = promotionOption._id;\n        structure.propertyId = undefined;\n        params.loan.promotionOptions = [promotionOption];\n        expect(Calculator.selectProperty(params)).to.deep.equal({\n          ...promotionOption,\n          totalValue: 100,\n        });\n      });\n    });\n  });\n\n  describe('selectPropertyValue', () => {\n    it('returns the propertyValue on the structure, even if propertyValue or totalValue exists', () => {\n      structure.propertyValue = 300;\n      property.totalValue = 200;\n      expect(Calculator.selectPropertyValue(params)).to.deep.equal(300);\n    });\n\n    it('returns the totalValue if it exists', () => {\n      property.totalValue = 200;\n      expect(Calculator.selectPropertyValue(params)).to.deep.equal(200);\n    });\n\n    it('returns the property value if it exists', () => {\n      expect(Calculator.selectPropertyValue(params)).to.deep.equal(100);\n    });\n\n    it('returns the right value for a promotionOption with additionalLots', () => {\n      const promotionOption = {\n        _id: 'dawg',\n        value: 110,\n        promotionLots: [\n          {\n            properties: [{ value: 100, totalValue: 100 }],\n            lots: [{ value: 10 }, { value: 0 }],\n          },\n        ],\n      };\n      structure.promotionOptionId = promotionOption._id;\n      structure.property = undefined;\n      structure.propertyId = undefined;\n      params.loan.promotionOptions = [promotionOption];\n      expect(Calculator.selectPropertyValue(params)).to.deep.equal(110);\n    });\n  });\n\n  describe('makeSelectPropertyKey', () => {\n    it('returns the exact value of a property for a promotionOption', () => {\n      const params = {\n        loan: {\n          structures: [{ id: 'dude', promotionOptionId: 'yo' }],\n          promotionOptions: [\n            {\n              _id: 'yo',\n              value: 100,\n              promotionLots: [{ properties: [{ value: 0 }] }],\n            },\n          ],\n        },\n        structureId: 'dude',\n      };\n      expect(Calculator.makeSelectPropertyKey('value')(params)).to.equal(0);\n    });\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport Calculator, { Calculator as CalculatorClass } from '..';\nimport { OWN_FUNDS_USAGE_TYPES } from 'core/api/constants';\nimport {\n  OWN_FUNDS_TYPES,\n  RESIDENCE_TYPE,\n  DEFAULT_SECONDARY_RESIDENCE_RULES,\n  INCOME_CONSIDERATION_TYPES,\n} from '../../../api/constants';\n\ndescribe('SolvencyCalculator', () => {\n  describe('suggestStructure', () => {\n    let loan;\n    let borrower;\n\n    beforeEach(() => {\n      borrower = { _id: 'borrowerId' };\n      loan = { borrowers: [borrower] };\n    });\n\n    it('suggests a structure with all bankFortune if possible', () => {\n      borrower.bankFortune = 500000;\n      expect(Calculator.suggestStructure({ loan, propertyValue: 1000000 })).to.deep.equal([\n        {\n          type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n          value: 250000,\n          borrowerId: 'borrowerId',\n        },\n      ]);\n    });\n\n    it('calculates exact notary fees if the canton is set', () => {\n      borrower.bankFortune = 500000;\n      expect(Calculator.suggestStructure({\n        loan,\n        propertyValue: 1000008,\n        canton: 'GE',\n      })).to.deep.equal([\n        {\n          type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n          value: 255162,\n          borrowerId: 'borrowerId',\n        },\n      ]);\n    });\n\n    it('suggests a structure with multiple ownFunds', () => {\n      borrower.bankFortune = 200000;\n      borrower.insurance3B = [{ value: 100000 }];\n      expect(Calculator.suggestStructure({ loan, propertyValue: 1000000 })).to.deep.equal([\n        {\n          type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n          value: 200000,\n          borrowerId: 'borrowerId',\n        },\n        {\n          type: OWN_FUNDS_TYPES.INSURANCE_3B,\n          value: 50000,\n          borrowerId: 'borrowerId',\n          usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW,\n        },\n      ]);\n    });\n\n    it('does not use 2nd pillar if not a main residence', () => {\n      borrower.bankFortune = 200000;\n      borrower.insurance2 = [{ value: 100000 }];\n      expect(Calculator.suggestStructure({ loan, propertyValue: 1000000 })).to.deep.equal([\n        {\n          type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n          value: 200000,\n          borrowerId: 'borrowerId',\n        },\n      ]);\n    });\n\n    it('uses 2nd pillar if not a main residence', () => {\n      borrower.bankFortune = 200000;\n      borrower.insurance2 = [{ value: 100000 }];\n      expect(Calculator.suggestStructure({\n        loan,\n        propertyValue: 1000000,\n        residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n      })).to.deep.equal([\n        {\n          type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n          value: 200000,\n          borrowerId: 'borrowerId',\n        },\n        {\n          type: OWN_FUNDS_TYPES.INSURANCE_2,\n          value: 50000,\n          borrowerId: 'borrowerId',\n          usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW,\n        },\n      ]);\n    });\n\n    it('always gets up to the exact value', () => {\n      const loanValue = 800000;\n      loan.structure = {\n        wantedLoan: loanValue,\n        property: { totalValue: 1000000, canton: 'GE' },\n        propertyWork: 100000,\n      };\n      loan.residenceType = RESIDENCE_TYPE.MAIN_RESIDENCE;\n      const required = Calculator.getRequiredOwnFunds({ loan });\n      borrower.bankFortune = 200000;\n      borrower.insurance2 = [{ value: 150000 }];\n      const ownFunds = Calculator.suggestStructure({\n        loan,\n        propertyValue: 1100000,\n        residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n        loanValue,\n        canton: 'GE',\n        notaryFees: 31944.1,\n      });\n      const total = ownFunds.reduce((t, { value }) => t + value, 0);\n\n      expect(total).to.equal(Math.round(required));\n    });\n  });\n\n  describe('getMaxPropertyValue', () => {\n    it('recommends a standard value with unlimited income', () => {\n      expect(Calculator.getMaxPropertyValue({\n        borrowers: [{ bankFortune: 500000, salary: 1000000 }],\n      })).to.equal(2000000);\n    });\n\n    it('recommends a standard value with unlimited income', () => {\n      expect(Calculator.getMaxPropertyValue({\n        borrowers: [{ bankFortune: 455000, salary: 1000000 }],\n      })).to.equal(1820000);\n    });\n\n    it('returns 0 with no income', () => {\n      expect(Calculator.getMaxPropertyValue({\n        borrowers: [{ bankFortune: 500000, salary: 0 }],\n      })).to.equal(0);\n    });\n\n    it('returns 0 with no fortune', () => {\n      expect(Calculator.getMaxPropertyValue({\n        borrowers: [{ bankFortune: 0, salary: 1000000 }],\n      })).to.equal(0);\n    });\n\n    it('recommends a standard value with unlimited own Funds', () => {\n      expect(Calculator.getMaxPropertyValue({\n        borrowers: [{ bankFortune: 500000, salary: 180000 }],\n      })).to.equal(1000000);\n    });\n  });\n\n  describe('suggestStructureForLoan', () => {\n    it('suggests a structure including for property work', () => {\n      expect(Calculator.suggestStructureForLoan({\n        loan: {\n          borrowers: [\n            { bankFortune: 500000, salary: 180000, _id: 'borrower1' },\n          ],\n          structures: [\n            { id: 'struct1', propertyValue: 900000, propertyWork: 100000 },\n          ],\n        },\n        structureId: 'struct1',\n      })).to.deep.equal([\n        { type: 'bankFortune', value: 245000, borrowerId: 'borrower1' },\n      ]);\n    });\n  });\n\n  describe('getMaxPropertyValueWithoutBorrowRatio', () => {\n    it('finds the ideal borrowRatio', () => {\n      const {\n        borrowRatio,\n        propertyValue,\n      } = Calculator.getMaxPropertyValueWithoutBorrowRatio({\n        borrowers: [{ bankFortune: 500000, salary: 1000000 }],\n      });\n      expect(borrowRatio).to.equal(0.8);\n      expect(propertyValue).to.equal(2000000);\n    });\n\n    it('finds the ideal borrowRatio', () => {\n      const {\n        borrowRatio,\n        propertyValue,\n      } = Calculator.getMaxPropertyValueWithoutBorrowRatio({\n        borrowers: [{ bankFortune: 250000, salary: 100000 }],\n      });\n      expect(borrowRatio).to.equal(0.6938);\n      expect(propertyValue).to.equal(700000);\n    });\n\n    it('finds the ideal borrowRatio', () => {\n      const {\n        borrowRatio,\n        propertyValue,\n      } = Calculator.getMaxPropertyValueWithoutBorrowRatio({\n        borrowers: [{ bankFortune: 250000, salary: 50000 }],\n      });\n      expect(borrowRatio).to.equal(0.515);\n      expect(propertyValue).to.equal(466000);\n    });\n\n    it('finds the ideal borrowRatio', () => {\n      const {\n        borrowRatio,\n        propertyValue,\n      } = Calculator.getMaxPropertyValueWithoutBorrowRatio({\n        borrowers: [{ bankFortune: 200000, salary: 83000 }],\n      });\n      expect(borrowRatio).to.equal(0.7);\n      expect(propertyValue).to.equal(571000);\n    });\n\n    it('finds the ideal borrowRatio for main residence type with insurance2', () => {\n      const {\n        borrowRatio,\n        propertyValue,\n      } = Calculator.getMaxPropertyValueWithoutBorrowRatio({\n        borrowers: [\n          {\n            bankFortune: 500000,\n            salary: 1000000,\n            insurance2: [{ value: 100000 }],\n          },\n        ],\n        residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n      });\n      expect(borrowRatio).to.equal(0.8);\n      expect(propertyValue).to.equal(2400000);\n    });\n\n    it('finds the ideal borrowRatio for second residence type with insurance2', () => {\n      const {\n        borrowRatio,\n        propertyValue,\n      } = Calculator.getMaxPropertyValueWithoutBorrowRatio({\n        borrowers: [\n          {\n            bankFortune: 230000,\n            salary: 120000,\n          },\n        ],\n        residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n        canton: 'GE',\n      });\n      expect(borrowRatio).to.equal(0.7313);\n      expect(propertyValue).to.equal(769000);\n    });\n\n    it('should not exceed max borrow ratio of a lender', () => {\n      const lenderRules = [\n        {\n          order: 0,\n          maxBorrowRatio: 0.9,\n          bonusConsideration: 0.7,\n          expensesSubtractFromIncome: [],\n          theoreticalInterestRate: 0.045,\n          theoreticalMaintenanceRate: 0.007,\n          maxIncomeRatio: 0.38,\n          filter: { and: [true] },\n          incomeConsiderationType: INCOME_CONSIDERATION_TYPES.NET,\n        },\n        {\n          order: 1,\n          maxBorrowRatio: 0.7,\n          filter: { and: DEFAULT_SECONDARY_RESIDENCE_RULES },\n          amortizationGoal: 0.5,\n          amortizationYears: 12,\n        },\n      ];\n\n      const borrowers = [\n        {\n          bankFortune: 130000,\n          insurance2: [{ value: 100000 }],\n          netSalary: 125000,\n          salary: 182000,\n          bonusExists: true,\n          bonus2015: 50000,\n          bonus2016: 50000,\n          bonus2017: 50000,\n          bonus2018: 50000,\n        },\n      ];\n      const loanObject = Calculator.createLoanObject({\n        residenceType: RESIDENCE_TYPE.SECOND_RESIDENCE,\n        borrowers,\n        canton: 'GE',\n      });\n\n      const calc = new CalculatorClass({ lenderRules, loan: loanObject });\n      const results = calc.getMaxPropertyValueWithoutBorrowRatio({\n        borrowers,\n        canton: 'GE',\n        residenceType: RESIDENCE_TYPE.SECOND_RESIDENCE,\n      });\n\n      expect(results.borrowRatio).to.equal(0.7);\n      expect(results.propertyValue).to.equal(362000);\n    });\n\n    it('should work with a very small borrowRatio', () => {\n      const lenderRules = [\n        {\n          order: 0,\n          maxBorrowRatio: 0.5,\n          bonusConsideration: 0.7,\n          expensesSubtractFromIncome: [],\n          theoreticalInterestRate: 0.045,\n          theoreticalMaintenanceRate: 0.007,\n          maxIncomeRatio: 0.38,\n          filter: { and: [true] },\n          incomeConsiderationType: INCOME_CONSIDERATION_TYPES.NET,\n        },\n      ];\n\n      const borrowers = [\n        {\n          bankFortune: 130000,\n          insurance2: [{ value: 100000 }],\n          netSalary: 125000,\n          salary: 182000,\n          bonusExists: true,\n          bonus2015: 50000,\n          bonus2016: 50000,\n          bonus2017: 50000,\n          bonus2018: 50000,\n        },\n      ];\n      const loanObject = Calculator.createLoanObject({\n        residenceType: RESIDENCE_TYPE.SECOND_RESIDENCE,\n        borrowers,\n        canton: 'GE',\n      });\n\n      const calc = new CalculatorClass({ lenderRules, loan: loanObject });\n      const results = calc.getMaxPropertyValueWithoutBorrowRatio({\n        borrowers,\n        canton: 'GE',\n        residenceType: RESIDENCE_TYPE.SECOND_RESIDENCE,\n      });\n\n      expect(results.borrowRatio).to.equal(0.5);\n      expect(results.propertyValue).to.equal(232000);\n    });\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\nimport { compose } from 'recompose';\nimport memoizeOne, { memoizeOneObjectArg } from '../../memoizeOne';\nimport MiddlewareManager from '../../MiddlewareManager';\nimport { borrowerExtractorMiddleware } from '../middleware';\nimport { precisionMiddleware } from '../../FinanceCalculator/financeCalculatorMiddlewares';\n\nclass RootCalculator {\n  constructor() {\n    this.initializer = 2;\n  }\n\n  add(a: number, b: number): number {\n    return a + b;\n  }\n\n  returnVarParent() {\n    return this.var;\n  }\n\n  return2(): number {\n    return 2;\n  }\n\n  parentFunc() {\n    return this.childFunc();\n  }\n\n  static staticFunc() {\n    return 'hi';\n  }\n}\n\nconst addClass = SuperClass => class extends SuperClass {};\n\nconst withCalc2 = (SuperClass = class {}) =>\n  class extends SuperClass {\n    constructor() {\n      super();\n      this.initializer = this.initializer * 2;\n    }\n\n    increment(a: number): number {\n      return a + 1;\n    }\n\n    setVar(value): void {\n      this.var = value;\n    }\n  };\n\nconst withCalc3 = SuperClass =>\n  class extends SuperClass {\n    constructor() {\n      super();\n      this.initializer = this.initializer + 1;\n    }\n\n    multiply(a: number, b: number): number {\n      return a * b;\n    }\n\n    returnVarChild(): void {\n      return this.var;\n    }\n\n    return2(): number {\n      return -2;\n    }\n\n    childFunc() {\n      return 'it works';\n    }\n  };\n\nconst UberClass = compose(\n  withCalc3,\n  withCalc2,\n)(RootCalculator);\n\ndescribe('Class composition', () => {\n  it('extends properly', () => {\n    class MyClass extends RootCalculator {}\n\n    expect(new MyClass().add(1, 2)).to.equal(3);\n  });\n\n  it('combines classes with the mixin', () => {\n    const Calc2 = withCalc2();\n    class MyClass extends addClass(Calc2) {}\n\n    expect(new MyClass().increment(1)).to.equal(2);\n  });\n\n  it('combines multiple classes', () => {\n    class MyClass extends withCalc3(withCalc2(RootCalculator)) {}\n\n    expect(new MyClass().increment(1)).to.equal(2);\n    expect(new MyClass().add(1, 2)).to.equal(3);\n    expect(new MyClass().multiply(2, 3)).to.equal(6);\n  });\n\n  it('combines multiple classes with compose', () => {\n    class MyClass extends compose(\n      withCalc3,\n      withCalc2,\n    )(RootCalculator) {}\n\n    expect(new MyClass().increment(1)).to.equal(2);\n    expect(new MyClass().add(1, 2)).to.equal(3);\n    expect(new MyClass().multiply(2, 3)).to.equal(6);\n  });\n\n  it('combines multiple classes with compose hidden away', () => {\n    const MyClass = class extends UberClass {};\n\n    expect(new MyClass().increment(1)).to.equal(2);\n    expect(new MyClass().add(1, 2)).to.equal(3);\n    expect(new MyClass().multiply(2, 3)).to.equal(6);\n  });\n\n  it('calls the constructor chain from Root to Calc3', () => {\n    class MyClass extends UberClass {}\n\n    expect(new MyClass().initializer).to.equal(5);\n  });\n\n  it('autocompletion works', () => {\n    class MyClass extends compose(\n      withCalc3,\n      withCalc2,\n    )(RootCalculator) {}\n\n    const Calc = new MyClass();\n\n    // Play around here..\n  });\n\n  it('can use instance variables across calculators', () => {\n    class MyClass extends UberClass {}\n\n    const Calc = new MyClass();\n\n    expect(Calc.returnVarParent()).to.equal(undefined);\n    expect(Calc.returnVarChild()).to.equal(undefined);\n\n    Calc.setVar(2);\n\n    expect(Calc.var).to.equal(2);\n    expect(Calc.returnVarParent()).to.equal(2);\n    expect(Calc.returnVarChild()).to.equal(2);\n  });\n\n  it('overwrites parent methods ', () => {\n    class MyClass extends UberClass {\n      add(a, b) {\n        return a - b;\n      }\n    }\n\n    expect(new MyClass().add(2, 3)).to.equal(-1);\n  });\n\n  it('overwrites in the right order', () => {\n    expect(new UberClass().return2()).to.equal(-2);\n  });\n\n  it('can call super', () => {\n    class MyClass extends UberClass {\n      add = super.multiply;\n\n      increment(a) {\n        return super.increment(a - 1);\n      }\n    }\n\n    expect(new MyClass().add(2, 3)).to.equal(6);\n    expect(new MyClass().increment(2)).to.equal(2);\n  });\n\n  it('shows the right types with flow-type', () => {\n    class MyClass extends UberClass {\n      return2(): string {\n        return '2';\n      }\n\n      returnNumber() {\n        return super.return2();\n      }\n    }\n\n    // Inspect types here to make sure they are correct\n    expect(new MyClass().return2()).to.equal('2');\n    expect(new MyClass().returnNumber()).to.equal(-2);\n  });\n\n  it('parent can call child funcs', () => {\n    expect(new UberClass().parentFunc()).to.equal('it works');\n  });\n\n  it('does not inherit static methods as expected', () => {\n    class MyClass extends UberClass {\n      constructor(props) {\n        super(props);\n      }\n\n      return2(): string {\n        return '2';\n      }\n\n      static returnNumber() {\n        return 5;\n      }\n\n      static returnNumber2 = () => 5;\n    }\n\n    const myClass = new MyClass();\n    expect(myClass.returnNumber2).to.equal(undefined);\n    expect(myClass.returnNumber).to.equal(undefined);\n    expect(myClass.staticFunc).to.equal(undefined);\n  });\n\n  describe('memoization', () => {\n    const memoizeMiddleware = calc => (next) => {\n      const memoFunc = memoizeOne(next);\n      return (...args) => {\n        calc.memo += 1;\n        return memoFunc(...args);\n      };\n    };\n\n    const preMiddleware = precisionMiddleware;\n    const postMiddleware = borrowerExtractorMiddleware;\n\n    class MemoizedClass {\n      constructor() {\n        this.count = 0;\n        this.memo = 0;\n        this.init();\n      }\n\n      init() {\n        const middlewareManager = new MiddlewareManager(this);\n        middlewareManager.applyToAllMethods([\n          preMiddleware,\n          memoizeMiddleware,\n          postMiddleware,\n        ]);\n      }\n\n      add({ a, b }) {\n        this.count += 1;\n        return a + b;\n      }\n\n      div({ a, b }) {\n        this.count += 1;\n        return a / b;\n      }\n\n      stuff({ borrowers }) {\n        this.count += 1;\n        return borrowers.a;\n      }\n\n      nothing() {\n        this.count += 1;\n        return 'yo';\n      }\n\n      stringArg(index) {\n        this.count += 1;\n        return [1, 2, 3][index];\n      }\n    }\n\n    it('memoizes additions once', () => {\n      const myClass = new MemoizedClass();\n\n      expect(myClass.add({ a: 1, b: 2 })).to.equal(3);\n      expect(myClass.add({ a: 1, b: 2 })).to.equal(3);\n      expect(myClass.add({ a: 2, b: 2 })).to.equal(4);\n      expect(myClass.add({ a: 1, b: 2 })).to.equal(3);\n\n      expect(myClass.memo).to.equal(4);\n      expect(myClass.count).to.equal(3);\n    });\n\n    it('memoizes divisions', () => {\n      const myClass = new MemoizedClass();\n\n      expect(myClass.div({ a: 2, b: 3 })).to.equal(0.6666666667);\n      expect(myClass.div({ a: 2, b: 3 })).to.equal(0.6666666667);\n\n      expect(myClass.memo).to.equal(2);\n      expect(myClass.count).to.equal(1);\n    });\n\n    it('does not care about other middlewares', () => {\n      const loan = { borrowers: { a: 3 } };\n      const myClass = new MemoizedClass();\n\n      expect(myClass.stuff({ loan })).to.equal(3);\n      expect(myClass.stuff({ loan })).to.equal(3);\n\n      expect(myClass.memo).to.equal(2);\n      expect(myClass.count).to.equal(1);\n    });\n\n    it('works for functions without arguments', () => {\n      const loan = { borrowers: { a: 3 } };\n      const myClass = new MemoizedClass();\n\n      expect(myClass.nothing({ loan })).to.equal('yo');\n      expect(myClass.nothing({ loan })).to.equal('yo');\n\n      expect(myClass.memo).to.equal(2);\n      expect(myClass.count).to.equal(1);\n    });\n\n    it('works for regular functions', () => {\n      const myClass = new MemoizedClass();\n\n      expect(myClass.stringArg(0)).to.equal(1);\n      expect(myClass.stringArg(1)).to.equal(2);\n      expect(myClass.stringArg(1)).to.equal(2);\n      expect(myClass.stringArg(2)).to.equal(3);\n\n      expect(myClass.memo).to.equal(4);\n      expect(myClass.count).to.equal(3);\n    });\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport MiddlewareManager from '../../MiddlewareManager';\nimport { borrowerExtractorMiddleware } from '../middleware';\n\ndescribe('Calculator middleware', () => {\n  describe('borrowerExtractorMiddleware', () => {\n    class Calc {\n      constructor() {\n        const middlewareManager = new MiddlewareManager(this);\n        middlewareManager.applyToAllMethods(borrowerExtractorMiddleware);\n      }\n\n      parameters(params) {\n        return params;\n      }\n\n      parameters2 = params => params;\n    }\n\n    it('extracts borrower', () => {\n      const calc = new Calc();\n\n      expect(calc.parameters({ loan: { borrowers: 1 } })).to.deep.equal({\n        loan: { borrowers: 1 },\n        borrowers: 1,\n      });\n    });\n\n    it('does not overwrite existing borrowers', () => {\n      const calc = new Calc();\n\n      expect(calc.parameters({ loan: { borrowers: 1 }, borrowers: 2 })).to.deep.equal({\n        loan: { borrowers: 1 },\n        borrowers: 2,\n      });\n    });\n\n    it('does not work for arrow function', () => {\n      const calc = new Calc();\n\n      expect(calc.parameters2({ loan: { borrowers: 1 } })).to.deep.equal({\n        loan: { borrowers: 1 },\n      });\n    });\n  });\n});\n","// @flow\nimport { OWN_FUNDS_TYPES } from 'imports/core/api/constants';\nimport { getBorrowerDocuments } from 'imports/core/api/files/documents';\nimport {\n  filesPercent,\n  getMissingDocumentIds,\n} from '../../api/files/fileHelpers';\nimport {\n  getBorrowerInfoArray,\n  getBorrowerFinanceArray,\n  getBorrowerSimpleArray,\n} from '../../arrays/BorrowerFormArray';\nimport { arrayify, getPercent } from '../general';\nimport {\n  getCountedArray,\n  getMissingFieldIds,\n  getFormValuesHashMultiple,\n} from '../formArrayHelpers';\nimport MiddlewareManager from '../MiddlewareManager';\nimport { INCOME_CONSIDERATION_TYPES, EXPENSE_TYPES } from '../../api/constants';\nimport { borrowerExtractorMiddleware } from './middleware';\nimport {\n  BONUS_ALGORITHMS,\n  REAL_ESTATE_INCOME_ALGORITHMS,\n} from '../../config/financeConstants';\n\nexport const withBorrowerCalculator = (SuperClass = class {}) =>\n  class extends SuperClass {\n    constructor(config) {\n      super(config);\n      this.initBorrowerCalculator(config);\n    }\n\n    initBorrowerCalculator(config) {\n      const middleware = (config && config.borrowerMiddleware) || borrowerExtractorMiddleware;\n      const middlewareManager = new MiddlewareManager(this);\n      middlewareManager.applyToAllMethods([middleware]);\n    }\n\n    getArrayValues({ borrowers, key, mapFunc }) {\n      let sum = 0;\n\n      arrayify(borrowers).forEach((borrower) => {\n        if (!borrower[key]) {\n          return 0;\n        }\n        sum += [\n          ...(borrower[key] && borrower[key].length > 0\n            ? borrower[key].map(mapFunc || (i => i.value))\n            : []),\n        ].reduce((tot, val) => (val > 0 && tot + val) || tot, 0);\n      });\n\n      return Math.max(0, Math.round(sum));\n    }\n\n    getBonuses({ borrowers }) {\n      return arrayify(borrowers).reduce((obj, borrower) => {\n        if (!borrower.bonusExists) {\n          return obj;\n        }\n\n        const bonusKeys = Object.keys(borrower).filter(key =>\n          key.includes('bonus')\n            && key !== 'bonusExists'\n            && borrower[key] >= 0\n            && borrower[key] !== null);\n\n        bonusKeys.forEach((key) => {\n          const value = borrower[key];\n\n          if (obj[key]) {\n            obj = { ...obj, [key]: obj[key] + value };\n          } else {\n            obj = { ...obj, [key]: value };\n          }\n        });\n\n        return obj;\n      }, {});\n    }\n\n    getBonusIncome({ borrowers }) {\n      const bonusKeys = [\n        'bonus2015',\n        'bonus2016',\n        'bonus2017',\n        'bonus2018',\n        'bonus2019',\n      ];\n      const total = arrayify(borrowers).reduce((acc, borrower) => {\n        if (!borrower.bonusExists) {\n          return acc + 0;\n        }\n\n        const arr = bonusKeys\n          .map(key => borrower[key])\n          .filter(val =>\n            (this.bonusAlgorithm === BONUS_ALGORITHMS.WEAK_AVERAGE\n              ? val > 0\n              : true));\n\n        return (\n          acc\n          + this.getConsideredValue({\n            values: arr,\n            history: this.bonusHistoryToConsider,\n            weighting: this.bonusConsideration,\n          })\n        );\n      }, 0);\n      return Math.max(0, Math.round(total));\n    }\n\n    getConsideredValue({ values, history, weighting }) {\n      const valuesToConsider = values.slice(Math.max(0, values.length - history));\n      const sum = valuesToConsider.reduce((tot, val = 0) => tot + val, 0);\n      return (weighting * sum) / valuesToConsider.length || 0;\n    }\n\n    getBorrowerCompletion({ loan, borrowers }) {\n      return (\n        (this.getBorrowerFilesProgress({ loan, borrowers }).percent\n          + this.personalInfoPercent({ borrowers }))\n        / 2\n      );\n    }\n\n    getBorrowerFilesProgress({ loan, borrowers }) {\n      const percentages = arrayify(borrowers).reduce(\n        (total, borrower) => {\n          const { percent, count } = filesPercent({\n            fileArray: getBorrowerDocuments({ loan, id: borrower._id }, this),\n            doc: borrower,\n          });\n          return {\n            percent: total.percent + percent * count,\n            count: total.count + count,\n          };\n        },\n        { percent: 0, count: 0 },\n      );\n\n      return {\n        ...percentages,\n        percent:\n          percentages.count === 0 ? 1 : percentages.percent / percentages.count,\n      };\n    }\n\n    isTypeWithArrayValues = type =>\n      [\n        OWN_FUNDS_TYPES.INSURANCE_2,\n        OWN_FUNDS_TYPES.INSURANCE_3A,\n        OWN_FUNDS_TYPES.BANK_3A,\n        OWN_FUNDS_TYPES.INSURANCE_3B,\n      ].includes(type);\n\n    getFunds({ borrowers, type }) {\n      if (this.isTypeWithArrayValues(type)) {\n        return this.getArrayValues({ borrowers, key: type });\n      }\n\n      return this.sumValues({ borrowers, keys: type });\n    }\n\n    getFortune({ borrowers }) {\n      return this.sumValues({ borrowers, keys: OWN_FUNDS_TYPES.BANK_FORTUNE });\n    }\n\n    getThirdPartyFortune({ borrowers }) {\n      const val = this.sumValues({\n        borrowers,\n        keys: OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE,\n      });\n      return val;\n    }\n\n    getExpenses({ borrowers }) {\n      return this.getArrayValues({ borrowers, key: 'expenses' });\n    }\n\n    getInsurance2({ borrowers }) {\n      return this.getArrayValues({\n        borrowers,\n        key: OWN_FUNDS_TYPES.INSURANCE_2,\n      });\n    }\n\n    getInsurance3A({ borrowers }) {\n      return this.getArrayValues({\n        borrowers,\n        key: OWN_FUNDS_TYPES.INSURANCE_3A,\n      });\n    }\n\n    getBank3A({ borrowers }) {\n      return this.getArrayValues({ borrowers, key: OWN_FUNDS_TYPES.BANK_3A });\n    }\n\n    getInsurance3B({ borrowers }) {\n      return this.getArrayValues({\n        borrowers,\n        key: OWN_FUNDS_TYPES.INSURANCE_3B,\n      });\n    }\n\n    getInsuranceFortune({ borrowers }) {\n      return [\n        this.getInsurance2,\n        this.getInsurance3A,\n        this.getInsurance3B,\n        this.getBank3A,\n      ].reduce((sum, func) => sum + func({ borrowers }), 0);\n    }\n\n    getCashFortune({ borrowers }) {\n      return [\n        this.getFortune,\n        this.getThirdPartyFortune,\n        this.getInsurance3A,\n        this.getInsurance3B,\n        this.getBank3A,\n      ].reduce((sum, func) => sum + func({ borrowers }), 0);\n    }\n\n    getMissingBorrowerFields({ borrowers }) {\n      const res = arrayify(borrowers).reduce((missingIds, borrower) => {\n        const formArray = getBorrowerInfoArray({\n          borrowers: arrayify(borrowers),\n          borrowerId: borrower._id,\n        });\n        const formArray2 = getBorrowerFinanceArray({\n          borrowers: arrayify(borrowers),\n          borrowerId: borrower._id,\n        });\n\n        return [\n          ...missingIds,\n          ...getMissingFieldIds(formArray, borrower),\n          ...getMissingFieldIds(formArray2, borrower),\n        ];\n      }, []);\n\n      return res;\n    }\n\n    getMissingBorrowerDocuments({ loan, borrowers }) {\n      return arrayify(borrowers).reduce(\n        (missingIds, borrower) => [\n          ...missingIds,\n          ...getMissingDocumentIds({\n            doc: borrower,\n            fileArray: getBorrowerDocuments({ loan, id: borrower._id }, this),\n          }),\n        ],\n        [],\n      );\n    }\n\n    getOtherFortune({ borrowers }) {\n      return this.getArrayValues({ borrowers, key: 'otherFortune' });\n    }\n\n    getOtherIncome({ borrowers }) {\n      return this.getArrayValues({ borrowers, key: 'otherIncome' });\n    }\n\n    getTotalFunds({ borrowers }) {\n      return (\n        this.getFortune({ borrowers })\n        + this.getThirdPartyFortune({ borrowers })\n        + this.getInsuranceFortune({ borrowers })\n      );\n    }\n\n    getRealEstateFortune({ borrowers }) {\n      return this.getArrayValues({\n        borrowers,\n        key: 'realEstate',\n        mapFunc: ({ value = 0, loan = 0 }) => value - loan,\n      });\n    }\n\n    getRealEstateValue({ borrowers }) {\n      return this.getArrayValues({ borrowers, key: 'realEstate' });\n    }\n\n    getRealEstateDebt({ borrowers }) {\n      return this.getArrayValues({\n        borrowers,\n        key: 'realEstate',\n        mapFunc: ({ loan = 0 }) => loan,\n      });\n    }\n\n    getRealEstateIncome({ borrowers }) {\n      const realEstateIncome = this.getArrayValues({\n        borrowers,\n        key: 'realEstate',\n        mapFunc: ({ income = 0 }) => income,\n      }) * this.realEstateIncomeConsideration;\n\n      return realEstateIncome;\n    }\n\n    getRealEstateIncomeTotal({ borrowers }) {\n      if (\n        this.realEstateIncomeAlgorithm\n        === REAL_ESTATE_INCOME_ALGORITHMS.POSITIVE_NEGATIVE_SPLIT\n      ) {\n        return 0;\n      }\n\n      return this.getRealEstateIncome({ borrowers });\n    }\n\n    shouldUseNetSalary() {\n      return this.incomeConsiderationType === INCOME_CONSIDERATION_TYPES.NET;\n    }\n\n    getSalary({ borrowers }) {\n      if (this.shouldUseNetSalary()) {\n        return this.getNetSalary({ borrowers });\n      }\n      return this.sumValues({ borrowers, keys: 'salary' });\n    }\n\n    getNetSalary({ borrowers }) {\n      return this.sumValues({ borrowers, keys: 'netSalary' });\n    }\n\n    getFortuneReturns({ borrowers }) {\n      if (this.fortuneReturnsRatio) {\n        return this.fortuneReturnsRatio * this.getFortune({ borrowers });\n      }\n\n      return 0;\n    }\n\n    getTotalIncome({ borrowers }) {\n      let sum = arrayify(borrowers).reduce((total, borrower) => {\n        let borrowerIncome = 0;\n        borrowerIncome += this.getSalary({ borrowers: borrower }) || 0;\n        borrowerIncome += this.getBonusIncome({ borrowers: borrower }) || 0;\n        borrowerIncome += this.getOtherIncome({ borrowers: borrower }) || 0;\n        borrowerIncome += this.getFortuneReturns({ borrowers: borrower }) || 0;\n        borrowerIncome\n          += this.getRealEstateIncomeTotal({ borrowers: borrower }) || 0;\n        return total + borrowerIncome;\n      }, 0);\n\n      sum -= this.getFormattedExpenses({ borrowers }).subtract || 0;\n\n      return sum;\n    }\n\n    getRetirement({ borrowers }) {\n      const argMap = borrowers.reduce(\n        (obj, { age, gender }, index) => ({\n          ...obj,\n          [`${`age${index + 1}`}`]: age,\n          [`${`gender${index + 1}`}`]: gender,\n        }),\n        {},\n      );\n      return this.getYearsToRetirement(argMap);\n    }\n\n    getAmortizationDuration({ borrowers }) {\n      const retirement = this.getRetirement({ borrowers });\n      return Math.min(15, retirement);\n    }\n\n    // personalInfoPercent - Determines the completion rate of the borrower's\n    // personal information forms\n    personalInfoPercent({ borrowers }) {\n      if (!borrowers || (Array.isArray(borrowers) && !borrowers.length)) {\n        return 0;\n      }\n\n      const array = arrayify(borrowers).reduce((arr, b) => {\n        const personalFormArray = getBorrowerInfoArray({\n          borrowers: arrayify(borrowers),\n          borrowerId: b._id,\n        });\n        const financeFormArray = getBorrowerFinanceArray({\n          borrowers: arrayify(borrowers),\n          borrowerId: b._id,\n        });\n        return [\n          ...arr,\n          ...getCountedArray(personalFormArray, b),\n          ...getCountedArray(financeFormArray, b),\n        ];\n      }, []);\n\n      return getPercent(array);\n    }\n\n    personalInfoPercentSimple({ borrowers, loan }) {\n      if ((!borrowers || !borrowers.length) && !loan.borrowers.length) {\n        return 0;\n      }\n      const array = arrayify(borrowers).reduce((arr, b) => {\n        const simpleFormArray = getBorrowerSimpleArray({\n          borrowers: arrayify(borrowers),\n          borrowerId: b._id,\n          loan,\n        });\n        return [...arr, ...getCountedArray(simpleFormArray, b)];\n      }, []);\n\n      return getPercent(array);\n    }\n\n    borrowerInfoPercent({ borrowers }) {\n      if (!borrowers || !borrowers.length) {\n        return 0;\n      }\n      const array = arrayify(borrowers).reduce((arr, b) => {\n        const personalFormArray = getBorrowerInfoArray({\n          borrowers: arrayify(borrowers),\n          borrowerId: b._id,\n        });\n        return [...arr, ...getCountedArray(personalFormArray, b)];\n      }, []);\n\n      return getPercent(array);\n    }\n\n    borrowerFinancePercent({ borrowers }) {\n      const array = arrayify(borrowers).reduce((arr, b) => {\n        const financeFormArray = getBorrowerFinanceArray({\n          borrowers: arrayify(borrowers),\n          borrowerId: b._id,\n        });\n        return [...arr, ...getCountedArray(financeFormArray, b)];\n      }, []);\n\n      return getPercent(array);\n    }\n\n    getBorrowerFormHash({ borrowers }) {\n      return getFormValuesHashMultiple(arrayify(borrowers).reduce(\n        (arr, borrower) => [\n          ...arr,\n          {\n            formArray: getBorrowerFinanceArray({\n              borrowers: arrayify(borrowers),\n              borrowerId: borrower._id,\n            }),\n            doc: borrower,\n          },\n          {\n            formArray: getBorrowerInfoArray({\n              borrowers: arrayify(borrowers),\n              borrowerId: borrower._id,\n            }),\n            doc: borrower,\n          },\n        ],\n        [],\n      ));\n    }\n\n    sumValues({ borrowers, keys }) {\n      return arrayify(keys).reduce(\n        (total, key) =>\n          total + arrayify(borrowers).reduce((t, b) => t + (b[key] || 0), 0),\n        0,\n      );\n    }\n\n    getNetFortune({ borrowers }) {\n      return (\n        this.getTotalFunds({ borrowers })\n        + this.getRealEstateFortune({ borrowers })\n        + this.getOtherFortune({ borrowers })\n      );\n    }\n\n    getMortgageNotes({ borrowers }) {\n      return borrowers.reduce(\n        (arr, { mortgageNotes: notes = [] }) => [...arr, ...notes],\n        [],\n      );\n    }\n\n    getRealEstateExpenses({ borrowers }) {\n      const realEstate = arrayify(borrowers).reduce(\n        (arr, borrower) => [...arr, ...(borrower.realEstate || [])],\n        [],\n      );\n      const realEstateCost = realEstate.reduce(\n        (tot, obj) => tot + this.getRealEstateCost(obj),\n        0,\n      );\n\n      return realEstateCost;\n    }\n\n    getRealEstateDeltas({ borrowers }) {\n      const allRealEstate = arrayify(borrowers)\n        .map(({ realEstate }) => realEstate)\n        .reduce((arr, realEstate) => [...arr, ...realEstate], []);\n\n      return allRealEstate.map((realEstate) => {\n        const { income } = realEstate;\n        const expenses = this.getRealEstateCost(realEstate) * 12;\n\n        return (\n          Math.round(income * this.realEstateIncomeConsideration) - expenses\n        );\n      });\n    }\n\n    getRealEstateCost({ loan, value }) {\n      const amortizationRate = this.getAmortizationRateBase({\n        borrowRatio: super.getBorrowRatio({ loan, propertyValue: value }),\n      });\n\n      return super.getTheoreticalMonthly({\n        propAndWork: value,\n        loanValue: loan,\n        amortizationRate,\n      }).total;\n    }\n\n    sumArray(arr) {\n      return arr.reduce((tot, v = 0) => tot + v, 0);\n    }\n\n    // Returns an object with all the types of expenses, combined between\n    // borrowers:\n    // {\n    //  LEASING: 23000,\n    //  WELFARE: 4000,\n    //  THEORETICAL_REAL_ESTATE: 30000,\n    //  etc\n    // }\n    getAllExpenses({ borrowers }) {\n      if (\n        this.realEstateIncomeAlgorithm\n        === REAL_ESTATE_INCOME_ALGORITHMS.POSITIVE_NEGATIVE_SPLIT\n      ) {\n        const deltas = this.getRealEstateDeltas({\n          borrowers,\n        });\n        return {\n          // Negative deltas should be made positive so they can be added to expenses\n          [EXPENSE_TYPES.REAL_ESTATE_DELTA_NEGATIVE]: -this.sumArray(deltas.filter(delta => delta < 0)),\n          // Positive deltas should be made negative so they can be subtracted from income,\n          // and therefore increase income\n          [EXPENSE_TYPES.REAL_ESTATE_DELTA_POSITIVE]: -this.sumArray(deltas.filter(delta => delta > 0)),\n          ...this.getGroupedExpenses({ borrowers }),\n        };\n      }\n\n      return {\n        [EXPENSE_TYPES.THEORETICAL_REAL_ESTATE]:\n          this.getRealEstateExpenses({ borrowers }) * 12, // All expenses are annualized\n        ...this.getGroupedExpenses({ borrowers }),\n      };\n    }\n\n    // Same as getAllExpenses, but without real estate expenses\n    getGroupedExpenses({ borrowers }) {\n      const flattenedExpenses = []\n        .concat([], ...arrayify(borrowers).map(({ expenses }) => expenses))\n        .filter(x => x);\n      return flattenedExpenses.reduce(\n        (obj, { value, description }) => ({\n          ...obj,\n          [description]: (obj[description] || 0) + value,\n        }),\n        {},\n      );\n    }\n\n    shouldSubtractExpenseFromIncome(expenseType) {\n      return this.expensesSubtractFromIncome.includes(expenseType);\n    }\n\n    groupRealEstateDeltas({ groupedExpenses, expenses, toSubtractFromIncome }) {\n      const negativeDeltas = expenses[EXPENSE_TYPES.REAL_ESTATE_DELTA_NEGATIVE];\n      const positiveDeltas = expenses[EXPENSE_TYPES.REAL_ESTATE_DELTA_POSITIVE];\n\n      if (toSubtractFromIncome) {\n        // If we want to get expenses to subtract from income, add the\n        // positiveDeltas negatively, so they are in fact added to income\n        return {\n          ...groupedExpenses,\n          [EXPENSE_TYPES.REAL_ESTATE_DELTA_POSITIVE]: positiveDeltas,\n        };\n      }\n\n      return {\n        ...groupedExpenses,\n        [EXPENSE_TYPES.REAL_ESTATE_DELTA_NEGATIVE]: negativeDeltas,\n      };\n    }\n\n    // Returns an object with all expenses to subtract from income\n    // or all expenses to add to expenses, depending on the param `toSubtractFromIncome`¨\n    // {\n    //  LEASING: 23000,\n    // }\n    getGroupedExpensesBySide({ borrowers, toSubtractFromIncome = true }) {\n      const expenses = this.getAllExpenses({ borrowers });\n\n      const expensesBySide = Object.keys(expenses)\n        .filter(expenseType => !this.expenseTypeIsDelta(expenseType))\n        .filter((expenseType) => {\n          const subtractExpenseTypeFromIncome = this.expensesSubtractFromIncome.includes(expenseType);\n          return toSubtractFromIncome\n            ? subtractExpenseTypeFromIncome\n            : !subtractExpenseTypeFromIncome;\n        });\n\n      const groupedExpenses = expensesBySide.reduce(\n        (obj, expenseType) => ({\n          ...obj,\n          [expenseType]: expenses[expenseType],\n        }),\n        {},\n      );\n\n      if (\n        this.realEstateIncomeAlgorithm\n        === REAL_ESTATE_INCOME_ALGORITHMS.POSITIVE_NEGATIVE_SPLIT\n      ) {\n        return this.groupRealEstateDeltas({\n          groupedExpenses,\n          expenses,\n          toSubtractFromIncome,\n        });\n      }\n\n      return groupedExpenses;\n    }\n\n    expenseTypeIsDelta(expenseType) {\n      return [\n        EXPENSE_TYPES.REAL_ESTATE_DELTA_NEGATIVE,\n        EXPENSE_TYPES.REAL_ESTATE_DELTA_POSITIVE,\n      ].includes(expenseType);\n    }\n\n    formatRealEstateExpenses({ obj, expenseType, value }) {\n      if (expenseType === EXPENSE_TYPES.REAL_ESTATE_DELTA_NEGATIVE) {\n        return { ...obj, add: obj.add + value };\n      }\n\n      return { ...obj, subtract: obj.subtract + value };\n    }\n\n    // Returns an object with 2 keys, `subtract` and `add` that contain the sum\n    // of all expenses to \"subtract from income\" and \"add to expenses\", respectively\n    getFormattedExpenses({ borrowers }) {\n      const expenses = this.getAllExpenses({ borrowers });\n\n      return Object.keys(expenses).reduce(\n        (obj, expenseType) => {\n          const value = expenses[expenseType];\n          if (this.expenseTypeIsDelta(expenseType)) {\n            return this.formatRealEstateExpenses({ obj, expenseType, value });\n          }\n\n          if (this.expensesSubtractFromIncome.indexOf(expenseType) >= 0) {\n            return { ...obj, subtract: obj.subtract + value };\n          }\n\n          return { ...obj, add: obj.add + value };\n        },\n        { subtract: 0, add: 0 },\n      );\n    }\n\n    getCommentsForExpenseType({ borrowers, type }) {\n      return arrayify(borrowers).reduce((comments, { expenses = [] }) => {\n        const expensesOfType = expenses.filter(({ description }) => description === type);\n        return [\n          ...comments,\n          ...expensesOfType.map(({ comment }) => comment),\n        ].filter(x => x);\n      }, []);\n    }\n\n    getCommentsForOtherIncomeType({ borrowers, type }) {\n      return arrayify(borrowers).reduce((comments, { otherIncome = [] }) => {\n        const otherIncomeOfType = otherIncome.filter(({ description }) => description === type);\n        return [\n          ...comments,\n          ...otherIncomeOfType.map(({ comment }) => comment),\n        ].filter(x => x);\n      }, []);\n    }\n\n    canCalculateSolvency({ borrowers }) {\n      if (!borrowers.length) {\n        return false;\n      }\n\n      if (this.getCashFortune({ borrowers }) === 0) {\n        return false;\n      }\n\n      if (this.getSalary({ borrowers }) === 0) {\n        return false;\n      }\n\n      return true;\n    }\n  };\n","// @flow\nimport { getAggregatePercent } from '../general';\n\nexport const withCombinedCalculator = (SuperClass = class {}) =>\n  class extends SuperClass {\n    filesProgress({ loan }) {\n      const hasPromotion = loan.promotions && loan.promotions.length > 0;\n      const progress = [\n        this.getLoanFilesProgress,\n        this.getBorrowerFilesProgress,\n        !hasPromotion && this.getPropertyFilesProgress,\n      ]\n        .filter(x => x !== false)\n        .map(f => f({ loan }))\n        .filter(x => x);\n\n      return getAggregatePercent(progress);\n    }\n  };\n","import { parseFilter } from 'core/api/lenderRules/helpers';\nimport { getMatchingRules } from '../../api/lenderRules/helpers';\nimport { LENDER_RULES_VARIABLES, OWN_FUNDS_TYPES } from '../../api/constants';\n\n// @flow\n\nexport const withLenderRulesInitializator = (SuperClass = class {}) =>\n  class extends SuperClass {\n    constructor(settings) {\n      super(settings);\n      this.initialize(settings);\n    }\n\n    initialize({ loan, structureId, lenderRules = [] }) {\n      if (!(loan && lenderRules && lenderRules.length > 0)) {\n        return;\n      }\n\n      const sortedlenderRules = lenderRules.sort(({ order: orderA }, { order: orderB }) => orderA - orderB);\n\n      // Store the rules for retrieval later\n      this.lenderRules = sortedlenderRules;\n      this.setOrganisationName(sortedlenderRules);\n      this.ruleOrigin = {};\n      this.matchedRules = [];\n\n      // Global rules\n      const globalRules = this.getGlobalLenderRules({\n        loan,\n        structureId,\n        lenderRules: sortedlenderRules,\n      });\n      this.applyRules(globalRules);\n\n      // Primary rules depend only on raw data\n      const primaryRules = this.getPrimaryLenderRules({\n        loan,\n        structureId,\n        lenderRules: sortedlenderRules,\n      });\n      this.applyRules(primaryRules);\n\n      // Secondary rules depend on what is calculated with the rules applied from the primary rules\n      const secondaryRules = this.getSecondaryLenderRules({\n        loan,\n        structureId,\n        lenderRules: sortedlenderRules,\n      });\n      this.applyRules(secondaryRules);\n\n      this.cleanUpUnusedRules();\n    }\n\n    setOrganisationName = (lenderRules) => {\n      this.organisationName = lenderRules.length\n        ? lenderRules[0].organisation && lenderRules[0].organisation.name\n        : null;\n    };\n\n    storeRuleOrigin(rules, lenderRulesId) {\n      Object.keys(rules).forEach((ruleName) => {\n        this.ruleOrigin[ruleName] = lenderRulesId;\n      });\n    }\n\n    getOriginOfRule(ruleName) {\n      const lenderRulesId = this.ruleOrigin[ruleName];\n      const lenderRules = this.lenderRules.find(({ _id }) => _id === lenderRulesId);\n      return lenderRules;\n    }\n\n    getLenderRulesVariables({ loan, structureId }) {\n      return {\n        [LENDER_RULES_VARIABLES.RESIDENCE_TYPE]: loan.residenceType,\n        [LENDER_RULES_VARIABLES.CANTON]: this.selectPropertyKey({\n          loan,\n          structureId,\n          key: LENDER_RULES_VARIABLES.CANTON,\n        }),\n        [LENDER_RULES_VARIABLES.WANTED_LOAN]: this.selectStructureKey({\n          loan,\n          structureId,\n          key: LENDER_RULES_VARIABLES.WANTED_LOAN,\n        }),\n        [LENDER_RULES_VARIABLES.PROPERTY_VALUE]: this.selectPropertyValue({\n          loan,\n          structureId,\n        }),\n        [LENDER_RULES_VARIABLES.INSIDE_AREA]: this.selectPropertyKey({\n          loan,\n          structureId,\n          key: LENDER_RULES_VARIABLES.INSIDE_AREA,\n        }),\n        [LENDER_RULES_VARIABLES.BANK_FORTUNE]: this.getFortune({ loan }),\n        [LENDER_RULES_VARIABLES.BORROW_RATIO]: this.getBorrowRatio({\n          loan,\n          structureId,\n        }),\n        [LENDER_RULES_VARIABLES.INCOME]: this.getTotalIncome({ loan }),\n        [LENDER_RULES_VARIABLES.PROPERTY_TYPE]: this.selectPropertyKey({\n          loan,\n          structureId,\n          key: LENDER_RULES_VARIABLES.PROPERTY_TYPE,\n        }),\n        [LENDER_RULES_VARIABLES.ZIP_CODE]: this.selectPropertyKey({\n          loan,\n          structureId,\n          key: LENDER_RULES_VARIABLES.ZIP_CODE,\n        }),\n        [LENDER_RULES_VARIABLES.REMAINING_BANK_FORTUNE]: this.getRemainingFundsOfType({\n          loan,\n          structureId,\n          type: OWN_FUNDS_TYPES.BANK_FORTUNE,\n        }),\n      };\n    }\n\n    getGlobalLenderRules({ lenderRules }) {\n      const globalRules = lenderRules.filter(({ filter }) =>\n        filter.and && filter.and.length === 1 && filter.and[0] === true);\n      const matchingRules = getMatchingRules(\n        globalRules,\n        {},\n        this.storeRuleOrigin,\n      );\n      return matchingRules;\n    }\n\n    getPrimaryLenderRules({ loan, structureId, lenderRules }) {\n      const primaryRules = lenderRules.filter(rules => !this.lenderRulesIsSecondary(rules));\n      const matchingRules = getMatchingRules(\n        primaryRules,\n        this.getLenderRulesVariables({ loan, structureId }),\n        this.storeRuleOrigin,\n      );\n      return matchingRules;\n    }\n\n    // Gets the secondary lender rules that require other lender rules to\n    // already have been applied\n    getSecondaryLenderRules({ loan, structureId, lenderRules }) {\n      const secondaryRules = lenderRules.filter(this.lenderRulesIsSecondary);\n      const matchingRules = getMatchingRules(\n        secondaryRules,\n        this.getLenderRulesVariables({ loan, structureId }),\n        this.storeRuleOrigin,\n      );\n      return matchingRules;\n    }\n\n    lenderRulesIsSecondary({ filter }) {\n      return filter.and\n        .map(parseFilter)\n        .some(({ variable }) =>\n          [\n            LENDER_RULES_VARIABLES.BORROW_RATIO,\n            LENDER_RULES_VARIABLES.INCOME,\n          ].includes(variable));\n    }\n\n    applyRules(rules) {\n      if (rules.names) {\n        this.matchedRules = [\n          ...this.matchedRules,\n          ...rules.names.filter(x => x),\n        ];\n      }\n\n      const rulesToApply = [\n        'adminComments',\n        'allowPledge',\n        'amortizationGoal',\n        'amortizationYears',\n        'bonusAlgorithm',\n        'bonusConsideration',\n        'bonusHistoryToConsider',\n        'companyIncomeConsideration',\n        'companyIncomeHistoryToConsider',\n        'dividendsConsideration',\n        'dividendsHistoryToConsider',\n        'expensesSubtractFromIncome',\n        'fortuneReturnsRatio',\n        'incomeConsiderationType',\n        'investmentIncomeConsideration',\n        'maxBorrowRatio',\n        'maxIncomeRatio',\n        'pdfComments',\n        'pensionIncomeConsideration',\n        'realEstateIncomeAlgorithm',\n        'realEstateIncomeConsideration',\n        'realEstateIncomeConsiderationType',\n        'theoreticalInterestRate',\n        'theoreticalInterestRate2ndRank',\n        'theoreticalMaintenanceRate',\n      ];\n\n      rulesToApply.forEach((rule) => {\n        if (rules[rule] !== undefined && rules[rule] !== null) {\n          this[rule] = rules[rule];\n        }\n      });\n    }\n\n    cleanUpUnusedRules() {\n      this.maxIncomeRatioTight = 0;\n      this.maxBorrowRatioWithPledge = 0;\n    }\n  };\n","// @flow\nimport { OWN_FUNDS_TYPES } from 'core/api/constants';\nimport { getLoanDocuments } from '../../api/files/documents';\nimport { OWN_FUNDS_USAGE_TYPES } from '../../api/constants';\nimport {\n  filesPercent,\n  getMissingDocumentIds,\n} from '../../api/files/fileHelpers';\nimport getRefinancingFormArray from '../../arrays/RefinancingFormArray';\nimport NotaryFeesCalculator from '../notaryFees/NotaryFeesCalculator';\nimport { getCountedArray } from '../formArrayHelpers';\nimport { getPercent } from '../general';\n\nexport const withLoanCalculator = (SuperClass = class {}) =>\n  class extends SuperClass {\n    getProjectValue({ loan, structureId }) {\n      const propAndWork = this.getPropAndWork({ loan, structureId });\n      if (!propAndWork) {\n        return 0;\n      }\n\n      const value = propAndWork + this.getFees({ loan, structureId }).total;\n\n      return value;\n    }\n\n    getTotalUsed({ loan, structureId }) {\n      const ownFunds = this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'ownFunds',\n      });\n      return ownFunds.reduce((sum, { value }) => sum + value, 0);\n    }\n\n    getTotalPledged({ loan, structureId }) {\n      const ownFunds = this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'ownFunds',\n      });\n      return ownFunds\n        .filter(({ usageType }) => usageType === OWN_FUNDS_USAGE_TYPES.PLEDGE)\n        .reduce((sum, { value }) => sum + value, 0);\n    }\n\n    getFees({ loan, structureId }): number {\n      const notaryFees = this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'notaryFees',\n      });\n\n      // Custom notary fees are provided\n      if (notaryFees === 0 || notaryFees) {\n        return { total: notaryFees };\n      }\n\n      const calculator = this.getFeesCalculator({ loan, structureId });\n\n      const calculatedNotaryFees = calculator.getNotaryFeesForLoan({\n        loan,\n        structureId,\n      });\n\n      return calculatedNotaryFees;\n    }\n\n    getFeesCalculator({ loan, structureId }) {\n      const canton = this.selectPropertyKey({\n        loan,\n        structureId,\n        key: 'canton',\n      });\n      return new NotaryFeesCalculator({ canton });\n    }\n\n    getInterests({ loan, interestRates, structureId }) {\n      let finalInterestRates = interestRates || loan.currentInterestRates;\n      const offer = this.selectStructureKey({\n        loan,\n        key: 'offer',\n        structureId,\n      });\n      const loanTranches = this.selectStructureKey({\n        loan,\n        key: 'loanTranches',\n        structureId,\n      });\n      const loanValue = this.selectLoanValue({ loan, structureId });\n      if (offer) {\n        finalInterestRates = offer;\n      }\n\n      const interests = this.getInterestsWithTranches({\n        tranches: loanTranches,\n        interestRates: finalInterestRates,\n      });\n\n      return (interests * loanValue) / 12;\n    }\n\n    getTheoreticalInterests({ loan, structureId }) {\n      const loanValue = this.selectLoanValue({ loan, structureId });\n      const propertyValue = this.selectPropertyValue({ loan, structureId });\n      const propertyWork = this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'propertyWork',\n      }) || 0;\n      const firstRank = Math.min(\n        loanValue,\n        this.amortizationGoal * (propertyValue + propertyWork),\n      );\n      const secondRank = Math.max(0, loanValue - firstRank);\n\n      const firstRankInterests = firstRank * this.theoreticalInterestRate;\n      const secondRankInterests = secondRank\n        * (this.theoreticalInterestRate2ndRank || this.theoreticalInterestRate);\n\n      return (firstRankInterests + secondRankInterests) / 12;\n    }\n\n    getTheoreticalMaintenance({ loan, structureId }) {\n      return (\n        (this.getPropAndWork({ loan, structureId })\n          * this.theoreticalMaintenanceRate)\n        / 12\n      );\n    }\n\n    getAmortization({ loan, structureId, offerOverride }) {\n      const offer = this.selectOffer({ loan, structureId });\n      const loanValue = this.selectLoanValue({ loan, structureId });\n      const offerToUse = offerOverride || offer;\n\n      if (offerToUse) {\n        // Temporarily change amortizationGoal\n        const oldAmortizationGoal = this.amortizationGoal;\n        this.amortizationGoal = offerToUse.amortizationGoal;\n\n        const amortizationRate = this.getAmortizationRate({\n          loan,\n          amortizationYears: offerToUse.amortizationYears,\n          structureId,\n        });\n\n        const amortization = (amortizationRate * loanValue) / 12;\n\n        this.amortizationGoal = oldAmortizationGoal;\n\n        return amortization;\n      }\n\n      const amortizationRate = this.getAmortizationRate({ loan, structureId });\n      return (amortizationRate * loanValue) / 12;\n    }\n\n    getTheoreticalAmortization({ loan, structureId }) {\n      const loanValue = this.selectLoanValue({ loan, structureId });\n\n      return (this.getAmortizationRate({ loan, structureId }) * loanValue) / 12;\n    }\n\n    getAmortizationRate({ loan, amortizationYears, structureId }) {\n      const borrowRatio = this.getBorrowRatio({ loan, structureId });\n      return this.getAmortizationRateBase({\n        borrowRatio,\n        amortizationYears,\n        // Prevent caching of this function if amortizationGoal has changed\n        cacheFix: this.amortizationGoal,\n      });\n    }\n\n    getMonthly({ loan, interestRates, structureId }) {\n      return (\n        this.getInterests({ loan, interestRates, structureId })\n        + this.getAmortization({ loan, structureId })\n      );\n    }\n\n    getTheoreticalPropertyCost({ loan, structureId, asObject = false }) {\n      const interests = this.getTheoreticalInterests({ loan, structureId });\n      const amortization = this.getTheoreticalAmortization({\n        loan,\n        structureId,\n      });\n      const maintenance = this.getTheoreticalMaintenance({ loan, structureId });\n      return asObject\n        ? {\n          interests,\n          amortization,\n          maintenance,\n          total: interests + amortization + maintenance,\n        }\n        : interests + amortization + maintenance;\n    }\n\n    getTheoreticalMonthly({ loan, structureId }) {\n      const propertyCost = this.getTheoreticalPropertyCost({\n        loan,\n        structureId,\n      });\n      const expensesToAddToTheoreticalCost = this.getFormattedExpenses({ loan, structureId }).add / 12;\n\n      return propertyCost + expensesToAddToTheoreticalCost;\n    }\n\n    getIncomeRatio({ loan, structureId }) {\n      const cost = this.getTheoreticalMonthly({ loan, structureId });\n      const income = this.getTotalIncome({ borrowers: loan.borrowers });\n      const ratio = cost / (income / 12);\n\n      if (ratio > 1 || ratio < 0) {\n        return 1;\n      }\n\n      return ratio;\n    }\n\n    getBorrowRatio({ loan, structureId }) {\n      const wantedLoan = this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'wantedLoan',\n      });\n      const propAndWork = this.getPropAndWork({ loan, structureId });\n      return wantedLoan / propAndWork;\n    }\n\n    getMaxBorrowRatio() {\n      return this.maxBorrowRatio;\n    }\n\n    loanHasMinimalInformation({ loan }) {\n      const structure = this.selectStructure({ loan });\n\n      return !!(\n        structure.ownFunds\n        && structure.ownFunds.length > 0\n        && this.selectPropertyValue({ loan })\n        && this.selectLoanValue({ loan })\n      );\n    }\n\n    getLoanFilesProgress({ loan }) {\n      return filesPercent({ fileArray: getLoanDocuments({ loan }), doc: loan });\n    }\n\n    getMissingLoanDocuments({ loan }) {\n      return getMissingDocumentIds({\n        fileArray: getLoanDocuments({ loan }),\n        doc: loan,\n      });\n    }\n\n    getTotalFinancing({ loan, structureId }) {\n      return (\n        this.selectStructureKey({ loan, structureId, key: 'wantedLoan' })\n        + this.getNonPledgedOwnFunds({ loan, structureId })\n      );\n    }\n\n    getNonPledgedOwnFunds({ loan, structureId }) {\n      const ownFunds = this.selectStructureKey({ loan, structureId, key: 'ownFunds' }) || [];\n      return ownFunds\n        .filter(({ usageType }) => usageType !== OWN_FUNDS_USAGE_TYPES.PLEDGE)\n        .reduce((sum, { value }) => sum + value, 0);\n    }\n\n    getPledgedOwnFunds({ loan, structureId }) {\n      const ownFunds = this.selectStructureKey({ loan, structureId, key: 'ownFunds' }) || [];\n      return ownFunds\n        .filter(({ usageType }) => usageType === OWN_FUNDS_USAGE_TYPES.PLEDGE)\n        .reduce((sum, { value }) => sum + value, 0);\n    }\n\n    getUsedFundsOfType({ loan, type, usageType, structureId }) {\n      const ownFunds = this.selectStructureKey({ loan, structureId, key: 'ownFunds' }) || [];\n      return ownFunds\n        .filter(({ type: ownFundType }) => (type ? ownFundType === type : true))\n        .filter(({ usageType: ownFundUsageType }) =>\n          (usageType ? ownFundUsageType === usageType : true))\n        .reduce((sum, { value }) => sum + value, 0);\n    }\n\n    getRemainingFundsOfType({ loan, structureId, type }) {\n      const ownFunds = this.getFunds({ loan, type, structureId });\n      return (\n        ownFunds\n        - this.getUsedFundsOfType({\n          loan,\n          type,\n          structureId,\n          usageType:\n            type !== OWN_FUNDS_TYPES.BANK_FORTUNE\n              ? OWN_FUNDS_USAGE_TYPES.WITHDRAW\n              : undefined,\n        })\n      );\n    }\n\n    getTotalRemainingFunds({ loan, structureId }) {\n      // Don't count extra third party fortune, as it is not a real \"loan\" from them\n      return Object.values(OWN_FUNDS_TYPES)\n        .filter(type => type !== OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE)\n        .reduce(\n          (sum, type) =>\n            sum + this.getRemainingFundsOfType({ loan, structureId, type }),\n          0,\n        );\n    }\n\n    refinancingPercent({ loan }) {\n      const array = getCountedArray(getRefinancingFormArray({ loan }), loan);\n      return getPercent(array);\n    }\n\n    getMortgageNoteIncrease({ loan, structureId }) {\n      const { borrowers = [] } = loan;\n      const { mortgageNoteIds = [] } = this.selectStructure({\n        loan,\n        structureId,\n      });\n\n      const { mortgageNotes: propertyMortgageNotes = [] } = this.selectProperty({ loan, structureId });\n      const borrowerMortgageNotes = this.getMortgageNotes({ borrowers });\n      const structureMortgageNotes = mortgageNoteIds.map(id =>\n        borrowerMortgageNotes.find(({ _id }) => _id === id));\n\n      const allMortgageNotes = [\n        ...structureMortgageNotes,\n        ...propertyMortgageNotes,\n      ];\n      const mortgageNoteValue = allMortgageNotes.reduce(\n        (total, { value }) => total + (value || 0),\n        0,\n      );\n      const loanValue = this.selectLoanValue({ loan, structureId });\n\n      return Math.max(0, loanValue - mortgageNoteValue);\n    }\n\n    getCashUsed({ loan, structureId }) {\n      const { ownFunds } = this.selectStructure({ loan, structureId });\n\n      return ownFunds\n        .filter(({ type, usageType }) =>\n          type !== OWN_FUNDS_TYPES.INSURANCE_2\n            && usageType !== OWN_FUNDS_USAGE_TYPES.PLEDGE)\n        .reduce((sum, { value }) => sum + value, 0);\n    }\n\n    getCashRatio({ loan, structureId }) {\n      const propAndWork = this.getPropAndWork({ loan, structureId });\n      const fees = this.getFees({ loan, structureId }).total;\n      const cashUsed = this.getCashUsed({ loan, structureId });\n\n      const cashRatio = (cashUsed - fees) / propAndWork;\n      return cashRatio;\n    }\n\n    hasEnoughCash({ loan, structureId }) {\n      return this.getCashRatio({ loan, structureId }) >= this.minCash;\n    }\n\n    structureIsValid({ loan, structureId }) {\n      const incomeRatio = this.getIncomeRatio({ loan, structureId });\n      const borrowRatio = this.getBorrowRatio({ loan, structureId });\n\n      if (\n        incomeRatio > this.maxIncomeRatio\n        || borrowRatio > this.maxBorrowRatio\n      ) {\n        return false;\n      }\n\n      if (\n        !this.allowPledge\n        && this.getPledgedOwnFunds({ loan, structureId }) > 0\n      ) {\n        return false;\n      }\n\n      return true;\n    }\n\n    getEstimatedRevenues({ loan, structureId }) {\n      const propertyValue = this.selectPropertyValue({ loan, structureId });\n      return propertyValue * this.estimatedCommission;\n    }\n\n    getEstimatedReferralRevenues({ loan, structureId }) {\n      return (\n        this.getEstimatedRevenues({ loan, structureId })\n        * this.referralCommission\n      );\n    }\n\n    getRequiredOwnFunds({ loan, structureId }) {\n      const projectValue = this.getProjectValue({ loan, structureId });\n      const loanValue = this.selectLoanValue({ loan, structureId });\n      return projectValue - loanValue;\n    }\n\n    getMissingOwnFunds({ loan, structureId }) {\n      const fundsRequired = this.getRequiredOwnFunds({ loan, structureId });\n      const totalCurrentFunds = this.getNonPledgedOwnFunds({\n        loan,\n        structureId,\n      });\n\n      return fundsRequired - totalCurrentFunds;\n    }\n\n    isMissingOwnFunds({ loan, structureId }) {\n      const missingOwnFunds = this.getMissingOwnFunds({ loan, structureId });\n      return missingOwnFunds >= this.ownFundsRoundingAmount;\n    }\n\n    hasTooMuchOwnFunds({ loan, structureId }) {\n      const missingOwnFunds = this.getMissingOwnFunds({ loan, structureId });\n      return missingOwnFunds <= -this.ownFundsRoundingAmount;\n    }\n\n    hasCompleteStructure({ loan }) {\n      return loan.structures.some(({ id }) => {\n        const fundsRequired = this.getRequiredOwnFunds({\n          loan,\n          structureId: id,\n        });\n\n        if (fundsRequired === 0) {\n          return false;\n        }\n\n        if (\n          !this.isMissingOwnFunds({ loan, structureId: id })\n          && !this.hasTooMuchOwnFunds({ loan, structureId: id })\n        ) {\n          return true;\n        }\n\n        return false;\n      });\n    }\n  };\n","// @flow\n\nexport const withOfferCalculator = (SuperClass = class {}) =>\n  class extends SuperClass {};\n","import pick from 'lodash/pick';\n\nimport { PROMOTION_TYPES, PURCHASE_TYPE } from '../../api/constants';\n\nexport const withPromotionCalculator = (SuperClass = class {}) =>\n  class extends SuperClass {\n    canAffordPromotionLot({ loan, promotionLot }) {\n      const { value, notaryFees } = promotionLot;\n      return true;\n    }\n\n    getSolvency({ loan, notaryFees = 0 }) {\n      const income = this.getTotalIncome({ loan });\n      const bankFortune = this.getFortune({ loan });\n      const cashFortune = this.getCashFortune({ loan });\n      const insurance2 = this.getInsurance2({ loan });\n\n      const results = {\n        withBankFortune: Math.round((bankFortune - notaryFees) / (1 - this.maxBorrowRatio)),\n        withInsurance2: this.getMaxPropertyValueWithInsurance2({\n          cash: bankFortune,\n          insurance2,\n          notaryFees,\n        }),\n        withInsurance3: Math.round((cashFortune - notaryFees) / (1 - this.maxBorrowRatio)),\n        withInsurance2And3: this.getMaxPropertyValueWithInsurance2({\n          cash: cashFortune,\n          insurance2,\n          notaryFees,\n        }),\n      };\n\n      return Object.keys(results).reduce(\n        (obj, key) => ({ ...obj, [key]: Math.round(results[key]) }),\n        {},\n      );\n    }\n\n    getMaxPropertyValueWithInsurance2({ cash, insurance2, notaryFees }) {\n      const availableFortune = cash - notaryFees;\n      const maxPropertyValue = availableFortune / this.minCash;\n      const canAffordProperty = (maxPropertyValue - availableFortune - insurance2) / maxPropertyValue\n        <= this.maxBorrowRatio;\n\n      if (canAffordProperty) {\n        return Math.round(maxPropertyValue);\n      }\n\n      return Math.round((availableFortune + insurance2) / (1 - this.maxBorrowRatio));\n    }\n\n    getIncomeLimitedProperty({\n      borrowers,\n      income,\n      fortune,\n      propertyValue,\n      notaryFees,\n    }) {\n      return this.getIncomeLimitedPropertyValue({\n        nF: notaryFees / propertyValue,\n        r: this.getAmortizationDuration({ borrowers }),\n        i: this.theoreticalInterestRate,\n        mR: this.maxIncomeRatio,\n        m: this.theoreticalMaintenanceRate,\n      })({ income, fortune });\n    }\n\n    formatPromotionOptionIntoProperty(promotionOption) {\n      if (!promotionOption) {\n        return;\n      }\n\n      const property = promotionOption.promotionLots[0].properties[0];\n\n      return {\n        // Get the address from the promotion\n        ...pick(promotionOption.promotion, [\n          'address1',\n          'address2',\n          'zipCode',\n          'city',\n        ]),\n        ...promotionOption,\n        ...property,\n        totalValue: promotionOption.value,\n      };\n    }\n\n    shouldUseConstructionNotaryFees({ loan, structureId }) {\n      const { promotions } = loan;\n\n      if (loan.purchaseType === PURCHASE_TYPE.CONSTRUCTION) {\n        return true;\n      }\n\n      if (!this.isPromotionProperty({ loan, structureId })) {\n        return false;\n      }\n\n      if (!promotions || (promotions.length && promotions.length === 0)) {\n        return false;\n      }\n\n      const promotion = promotions[0];\n\n      return promotion.type === PROMOTION_TYPES.SHARE;\n    }\n  };\n","// @flow\nimport {\n  getPropertyArray,\n  getPropertyLoanArray,\n} from '../../arrays/PropertyFormArray';\nimport { getPercent } from '../general';\nimport { getCountedArray, getMissingFieldIds } from '../formArrayHelpers';\nimport {\n  filesPercent,\n  getMissingDocumentIds,\n} from '../../api/files/fileHelpers';\nimport { getPropertyDocuments } from '../../api/files/documents';\nimport MiddlewareManager from '../MiddlewareManager';\n\nexport const withPropertyCalculator = (SuperClass = class {}) =>\n  class extends SuperClass {\n    constructor(config) {\n      super(config);\n      this.initPropertyCalculator(config);\n    }\n\n    initPropertyCalculator(config) {\n      if (config && config.propertyMiddleware) {\n        const middlewareManager = new MiddlewareManager(this);\n        middlewareManager.applyToAllMethods([config.propertyMiddleware]);\n      }\n    }\n\n    propertyPercent({ loan, structureId, property }) {\n      const { borrowers } = loan;\n      const structure = this.selectStructure({ loan, structureId });\n      const propertyToCalculateWith = property || structure.property;\n\n      if (!propertyToCalculateWith) {\n        return 0;\n      }\n\n      const formArray1 = getPropertyArray({\n        loan,\n        borrowers,\n        property: propertyToCalculateWith,\n      });\n      const formArray2 = getPropertyLoanArray({\n        loan,\n        borrowers,\n        property: propertyToCalculateWith,\n      });\n\n      return getPercent([\n        ...getCountedArray(formArray1, propertyToCalculateWith),\n        ...getCountedArray(formArray2, loan),\n      ]);\n    }\n\n    getPropAndWork({ loan, structureId }) {\n      const propertyValue = this.selectPropertyValue({ loan, structureId });\n      const propertyWork = this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'propertyWork',\n      }) || 0;\n      return super.getPropAndWork({ propertyValue, propertyWork });\n    }\n\n    getPropertyWork({ loan, structureId }) {\n      return this.selectPropertyWork({ loan, structureId });\n    }\n\n    getPropertyFilesProgress({ loan, structureId, property }) {\n      const structure = this.selectStructure({ loan, structureId });\n      const propertyToCalculateWith = property || structure.property;\n\n      if (!propertyToCalculateWith) {\n        return 0;\n      }\n\n      return filesPercent({\n        doc: propertyToCalculateWith,\n        fileArray: getPropertyDocuments({\n          loan,\n          id: propertyToCalculateWith._id,\n        }),\n      });\n    }\n\n    getPropertyCompletion({ loan, structureId, property }) {\n      const { borrowers } = loan;\n      const selectedProperty = this.selectProperty({ loan, structureId });\n      const propertyToCalculateWith = property || selectedProperty;\n\n      const formsProgress = this.propertyPercent({\n        loan,\n        borrowers,\n        property: propertyToCalculateWith,\n      });\n      const filesProgress = this.getPropertyFilesProgress({\n        loan,\n        property: propertyToCalculateWith,\n      });\n\n      return (formsProgress + filesProgress) / 2;\n    }\n\n    getMissingPropertyFields({ loan, structureId, property }) {\n      const { borrowers } = loan;\n      const selectedProperty = this.selectProperty({ loan, structureId });\n\n      const propertyToCalculateWith = property || selectedProperty;\n\n      const formArray1 = getPropertyArray({\n        loan,\n        borrowers,\n        property: propertyToCalculateWith,\n      });\n      const formArray2 = getPropertyLoanArray({\n        loan,\n        borrowers,\n        property: propertyToCalculateWith,\n      });\n\n      return [\n        ...getMissingFieldIds(formArray1, propertyToCalculateWith),\n        ...getMissingFieldIds(formArray2, loan),\n      ];\n    }\n\n    getMissingPropertyDocuments({ loan, structureId, property }) {\n      const selectedProperty = this.selectProperty({ loan, structureId });\n      const propertyToCalculateWith = property || selectedProperty;\n\n      return getMissingDocumentIds({\n        doc: propertyToCalculateWith,\n        fileArray: getPropertyDocuments({\n          loan,\n          id: propertyToCalculateWith._id,\n        }),\n      });\n    }\n\n    hasDetailedPropertyValue({ loan, structureId }) {\n      const propertyExactValue = this.selectPropertyKey({\n        key: 'value',\n        loan,\n        structureId,\n      });\n      const landValue = this.selectPropertyKey({\n        key: 'landValue',\n        loan,\n        structureId,\n      });\n      const constructionValue = this.selectPropertyKey({\n        key: 'constructionValue',\n        loan,\n        structureId,\n      });\n\n      return !propertyExactValue || !!(landValue && constructionValue);\n    }\n\n    isPromotionProperty({ loan, structureId }) {\n      const structure = this.selectStructure({ loan, structureId });\n      return !!structure.promotionOptionId;\n    }\n  };\n","// @flow\nimport { createSelector } from 'reselect';\n\nimport { EMPTY_STRUCTURE } from '../../api/loans/loanConstants';\n\nexport const withSelector = (SuperClass = class {}) =>\n  class extends SuperClass {\n    selectProperty({ loan, structureId } = {}) {\n      let propertyId = loan.structure && loan.structure.propertyId;\n      let promotionOptionId = loan.structure && loan.structure.promotionOptionId;\n      const structure = this.selectStructure({ loan, structureId });\n\n      if (!structureId) {\n        if (structure.property) {\n          return structure.property;\n        }\n        if (structure.propertyId) {\n          return loan.properties.find(({ _id }) => _id === structure.propertyId);\n        }\n        if (structure.promotionOption) {\n          return this.formatPromotionOptionIntoProperty(structure.promotionOption);\n        }\n        if (structure.promotionOptionId) {\n          const promotionOption = loan.promotionOptions.find(({ _id }) => _id === structure.promotionOptionId);\n          return this.formatPromotionOptionIntoProperty(promotionOption);\n        }\n\n        return {};\n      }\n\n      if (structureId) {\n        propertyId = structure.propertyId;\n        promotionOptionId = structure.promotionOptionId;\n      }\n\n      if (propertyId) {\n        return loan.properties.find(({ _id }) => _id === propertyId);\n      }\n\n      if (promotionOptionId) {\n        return this.formatPromotionOptionIntoProperty(loan.promotionOptions.find(({ _id }) => _id === promotionOptionId));\n      }\n\n      return {};\n    }\n\n    selectOffer({ loan, structureId }) {\n      const { offers = [] } = loan;\n      const { offerId, offer } = this.selectStructure({ loan, structureId });\n\n      if (offer) {\n        return offer;\n      }\n\n      if (!offerId) {\n        return undefined;\n      }\n\n      return offers.find(({ _id }) => _id === offerId);\n    }\n\n    selectStructure({ loan, structureId } = {}): {} {\n      if (structureId) {\n        return loan.structures.find(({ id }) => id === structureId);\n      }\n      return (\n        loan.structure\n        || loan.structures.find(({ id }) => id === loan.selectedStructure)\n        || EMPTY_STRUCTURE\n      );\n    }\n\n    makeSelectPropertyKey(key: string): Function {\n      return createSelector(\n        this.selectProperty,\n        property => property && property[key],\n      );\n    }\n\n    selectStructureKey({ loan, structureId, key }) {\n      return this.makeSelectStructureKey(key)({ loan, structureId });\n    }\n\n    selectPropertyKey({ loan, structureId, key }) {\n      return this.makeSelectPropertyKey(key)({ loan, structureId });\n    }\n\n    makeSelectStructureKey(key: string): Function {\n      return createSelector(\n        this.selectStructure,\n        structure => structure && structure[key],\n      );\n    }\n\n    selectPropertyValue({\n      loan,\n      structureId,\n    }: { loan: userLoan } = {}): number {\n      const structurePropertyValue = this.selectStructureKey({\n        key: 'propertyValue',\n        loan,\n        structureId,\n      });\n      return (\n        structurePropertyValue\n        || this.selectPropertyKey({ loan, structureId, key: 'totalValue' })\n        || this.selectPropertyKey({ loan, structureId, key: 'value' })\n      );\n    }\n\n    selectPropertyWork({ loan, structureId } = {}): number {\n      return this.selectStructureKey({\n        loan,\n        structureId,\n        key: 'propertyWork',\n      });\n    }\n\n    selectLoanValue({ loan, structureId } = {}): number {\n      return this.selectStructureKey({ loan, structureId, key: 'wantedLoan' });\n    }\n\n    getCashUsed = this.makeSelectStructureKey('fortuneUsed');\n  };\n","// @flow\nimport { OWN_FUNDS_ROUNDING_AMOUNT } from '../../config/financeConstants';\nimport {\n  OWN_FUNDS_TYPES,\n  RESIDENCE_TYPE,\n  OWN_FUNDS_USAGE_TYPES,\n} from '../../api/constants';\nimport { arrayify } from '../general';\nimport { NotaryFeesCalculator } from '../notaryFees/index';\nimport { roundValue } from '../conversionFunctions';\n\nconst INITIAL_MIN_BOUND = 0;\nconst INITIAL_MAX_BOUND = 1000000;\nconst INITIAL_ABSOLUTE_MAX_BOUND = 100000000;\nconst MAX_ITERATIONS = 50;\nconst ACCURACY = 1000;\nconst ROUNDING_DIGITS = Math.log10(ACCURACY);\nconst MAX_BOUND_MULTIPLICATION_FACTOR = 2;\nconst OWN_FUNDS_ROUNDING_ALGO = 100;\nconst INITIAL_BORROW_RATIO_STEP_SIZE = 0.05;\n\nexport const withSolvencyCalculator = (SuperClass = class {}) =>\n  class extends SuperClass {\n    getAllowedOwnFundsTypes({ residenceType }) {\n      return residenceType === RESIDENCE_TYPE.MAIN_RESIDENCE\n        ? [\n          OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE,\n          OWN_FUNDS_TYPES.BANK_FORTUNE,\n          OWN_FUNDS_TYPES.INSURANCE_3A,\n          OWN_FUNDS_TYPES.BANK_3A,\n          OWN_FUNDS_TYPES.INSURANCE_3B,\n          OWN_FUNDS_TYPES.INSURANCE_2,\n        ]\n        : [\n          OWN_FUNDS_TYPES.THIRD_PARTY_FORTUNE,\n          OWN_FUNDS_TYPES.BANK_FORTUNE,\n          OWN_FUNDS_TYPES.INSURANCE_3B,\n        ];\n    }\n\n    ownFundTypeRequiresUsageType({ type }) {\n      return [\n        OWN_FUNDS_TYPES.INSURANCE_2,\n        OWN_FUNDS_TYPES.INSURANCE_3A,\n        OWN_FUNDS_TYPES.INSURANCE_3B,\n      ].includes(type);\n    }\n\n    makeOwnFunds({ borrowers, type, usageType, max }) {\n      return arrayify(borrowers)\n        .map((borrower) => {\n          const ownFundsObject = {\n            type,\n            value: Math.ceil(Math.min(max, this.getFunds({ borrowers: borrower, type }))),\n            borrowerId: borrower._id,\n          };\n\n          if (!usageType && this.ownFundTypeRequiresUsageType({ type })) {\n            return {\n              ...ownFundsObject,\n              usageType: OWN_FUNDS_USAGE_TYPES.WITHDRAW,\n            };\n          }\n\n          if (usageType) {\n            return { ...ownFundsObject, usageType };\n          }\n\n          return ownFundsObject;\n        })\n        .filter(({ value }) => value > 0);\n    }\n\n    suggestStructure({\n      borrowers,\n      propertyValue,\n      maxBorrowRatio = this.maxBorrowRatio,\n      loanValue,\n      canton,\n      residenceType,\n      notaryFees: forcedNotaryFees,\n    }) {\n      let notaryFees;\n\n      const finalLoanValue = loanValue || Math.round(propertyValue * maxBorrowRatio);\n\n      if (forcedNotaryFees) {\n        notaryFees = forcedNotaryFees;\n      } else {\n        const notaryCalc = new NotaryFeesCalculator({ canton });\n        notaryFees = notaryCalc.getNotaryFeesWithoutLoan({\n          propertyValue,\n          mortgageNoteIncrease: finalLoanValue,\n          residenceType,\n        }).total;\n      }\n\n      let requiredOwnFunds = Math.round(propertyValue + notaryFees - finalLoanValue);\n      let ownFunds = [];\n\n      // Get all possible OWN_FUNDS_TYPES\n      const allowedOwnFundsTypes = this.getAllowedOwnFundsTypes({\n        residenceType,\n      });\n\n      allowedOwnFundsTypes.forEach((type) => {\n        borrowers.forEach((borrower) => {\n          const newOwnFunds = this.makeOwnFunds({\n            borrowers: borrower,\n            type,\n            max: requiredOwnFunds,\n          });\n\n          requiredOwnFunds -= newOwnFunds.reduce(\n            (tot, { value }) => tot + value,\n            0,\n          );\n\n          ownFunds = [...ownFunds, ...newOwnFunds];\n        });\n      });\n\n      return ownFunds;\n    }\n\n    createLoanObject({\n      residenceType,\n      borrowers,\n      wantedLoan,\n      propertyValue,\n      canton,\n      ownFunds = [],\n      loanTranches = [],\n      ...rest\n    }) {\n      return {\n        residenceType,\n        borrowers,\n        structure: {\n          wantedLoan,\n          propertyValue,\n          property: { canton },\n          ownFunds,\n          loanTranches,\n        },\n        ...rest,\n      };\n    }\n\n    suggestedStructureIsValid({\n      borrowers,\n      propertyValue,\n      maxBorrowRatio = this.maxBorrowRatio,\n      loanValue,\n      canton,\n      residenceType,\n      ownFunds,\n    }) {\n      const finalLoanValue = loanValue || Math.round(propertyValue * maxBorrowRatio);\n      const loanObject = this.createLoanObject({\n        residenceType,\n        borrowers,\n        wantedLoan: finalLoanValue,\n        propertyValue,\n        canton,\n        ownFunds,\n      });\n\n      // If the calculator has been initialized, reinitialize it according to this new potential loan\n      if (this.lenderRules) {\n        this.initialize({ loan: loanObject, lenderRules: this.lenderRules });\n      }\n\n      if (this.isMissingOwnFunds({ loan: loanObject })) {\n        return false;\n      }\n\n      if (!this.hasEnoughCash({ loan: loanObject })) {\n        return false;\n      }\n\n      if (!this.structureIsValid({ loan: loanObject })) {\n        return false;\n      }\n\n      return true;\n    }\n\n    getMaxPropertyValue({ borrowers, maxBorrowRatio, canton, residenceType }) {\n      // Immediately stop iterating if maxBorrowRatio is above what is allowed\n      if (this.maxBorrowRatio < maxBorrowRatio) {\n        return 0;\n      }\n\n      let foundValue = false;\n      let minBound = INITIAL_MIN_BOUND;\n      let maxBound = INITIAL_MAX_BOUND;\n      let absoluteMax = INITIAL_ABSOLUTE_MAX_BOUND;\n      let iterations = 0;\n\n      // The rounding amount of 1000 is helpful when the user tries to\n      // fit his own funds into a structure without being overly accurate\n      // which is annoying.\n      // However for this calculation we don't need to round own funds as loosely\n      this.ownFundsRoundingAmount = OWN_FUNDS_ROUNDING_ALGO;\n\n      while (!foundValue) {\n        iterations += 1;\n        const nextPropertyValue = roundValue(\n          (minBound + maxBound) / 2,\n          ROUNDING_DIGITS,\n        );\n\n        const ownFunds = this.suggestStructure({\n          borrowers,\n          maxBorrowRatio,\n          canton,\n          residenceType,\n          propertyValue: nextPropertyValue,\n        });\n\n        if (\n          this.suggestedStructureIsValid({\n            borrowers,\n            maxBorrowRatio,\n            canton,\n            residenceType,\n            propertyValue: nextPropertyValue,\n            ownFunds,\n          })\n        ) {\n          minBound = nextPropertyValue;\n          maxBound = Math.min(\n            maxBound * MAX_BOUND_MULTIPLICATION_FACTOR,\n            absoluteMax,\n          );\n        } else {\n          maxBound = nextPropertyValue;\n          absoluteMax = maxBound;\n        }\n\n        if (maxBound - minBound <= ACCURACY) {\n          foundValue = true;\n        }\n\n        if (iterations > MAX_ITERATIONS) {\n          foundValue = true;\n        }\n      }\n\n      this.ownFundsRoundingAmount = OWN_FUNDS_ROUNDING_AMOUNT;\n\n      return minBound;\n    }\n\n    getNextStepSize({\n      currentMax,\n      currentBorrowRatio,\n      stepSize,\n      borrowers,\n      residenceType,\n      canton,\n      direction,\n      cache,\n    }) {\n      let newStepSize = stepSize;\n      let foundBetterValue;\n\n      while (!foundBetterValue) {\n        let nextValue;\n        if (direction === 'upwards') {\n          nextValue = cache[currentBorrowRatio + stepSize]\n            || this.getMaxPropertyValue({\n              borrowers,\n              residenceType,\n              maxBorrowRatio: currentBorrowRatio + stepSize,\n              canton,\n            });\n        } else {\n          nextValue = cache[currentBorrowRatio - stepSize]\n            || this.getMaxPropertyValue({\n              borrowers,\n              residenceType,\n              maxBorrowRatio: currentBorrowRatio - stepSize,\n              canton,\n            });\n        }\n\n        if (nextValue > currentMax) {\n          foundBetterValue = true;\n        } else {\n          newStepSize /= 2;\n        }\n\n        if (newStepSize < 0.05) {\n          foundBetterValue = true;\n        }\n      }\n\n      return newStepSize;\n    }\n\n    getMaxPropertyValueWithoutBorrowRatio({\n      borrowers,\n      residenceType,\n      canton,\n    }) {\n      let borrowRatio = 0.7;\n      let foundValue = false;\n      let iterations = 0;\n      let stepSize = INITIAL_BORROW_RATIO_STEP_SIZE;\n      const deltaX = 0.01;\n      let maxPropertyValue = 0;\n      let optimalBorrowRatio;\n      const cache = {};\n\n      const setMax = (ratio, propertyValue) => {\n        // Cache each result to avoid recalculating it later\n        if (!cache[`${ratio}`]) {\n          cache[`${ratio}`] = propertyValue;\n        }\n\n        // Always store the highest encountered value, in case the loop\n        // stops prematurely, or if the stopping conditions would've skipped\n        // a value that we already calculated\n        if (propertyValue > maxPropertyValue) {\n          maxPropertyValue = propertyValue;\n          optimalBorrowRatio = ratio;\n        }\n      };\n\n      while (!foundValue) {\n        iterations += 1;\n\n        const center = cache[borrowRatio]\n          || this.getMaxPropertyValue({\n            borrowers,\n            residenceType,\n            maxBorrowRatio: borrowRatio,\n            canton,\n          });\n        setMax(borrowRatio, center);\n\n        const yLeft = cache[borrowRatio - deltaX]\n          || this.getMaxPropertyValue({\n            borrowers,\n            residenceType,\n            maxBorrowRatio: borrowRatio - deltaX,\n            canton,\n          });\n        setMax(borrowRatio - deltaX, yLeft);\n        const yRight = cache[borrowRatio + deltaX]\n          || this.getMaxPropertyValue({\n            borrowers,\n            residenceType,\n            maxBorrowRatio: borrowRatio + deltaX,\n            canton,\n          });\n        setMax(borrowRatio + deltaX, yRight);\n\n        const slope = yRight - yLeft;\n\n        if (yRight === 0 && yLeft === 0) {\n          // If the algorithm is at 0 on both sides, it means the borrowRatio\n          // is way too high, so start him over again at 0, but with a large\n          // step size to allow it to recover quickly\n          borrowRatio = INITIAL_BORROW_RATIO_STEP_SIZE;\n          stepSize = 0.2;\n        } else if (slope > 0) {\n          stepSize = this.getNextStepSize({\n            currentMax: center,\n            currentBorrowRatio: borrowRatio,\n            stepSize,\n            borrowers,\n            residenceType,\n            canton,\n            direction: 'upwards',\n            cache,\n          });\n          borrowRatio += stepSize;\n        } else {\n          stepSize = this.getNextStepSize({\n            currentMax: center,\n            currentBorrowRatio: borrowRatio,\n            stepSize,\n            borrowers,\n            residenceType,\n            canton,\n            direction: 'downwards',\n            cache,\n          });\n          borrowRatio -= stepSize;\n        }\n\n        if (stepSize < deltaX / 2) {\n          foundValue = true;\n        }\n\n        if (iterations > 50) {\n          foundValue = true;\n        }\n      }\n\n      // Round the borrowRatio, and recompute the exact property value\n      const finalBorrowRatio = Math.round(optimalBorrowRatio * 10000) / 10000;\n      const finalPropertyValue = cache[finalBorrowRatio]\n        || this.getMaxPropertyValue({\n          borrowers,\n          residenceType,\n          maxBorrowRatio: finalBorrowRatio,\n          canton,\n        });\n\n      return {\n        borrowRatio: finalBorrowRatio,\n        propertyValue: finalPropertyValue,\n      };\n    }\n\n    getMaxPropertyValueForLoan({\n      loan,\n      maxBorrowRatio,\n      canton,\n      residenceType,\n    }) {\n      const { borrowers, residenceType: loanResidenceType } = loan;\n      return this.getMaxPropertyValue({\n        borrowers,\n        residenceType: residenceType || loanResidenceType,\n        maxBorrowRatio,\n        canton,\n      });\n    }\n\n    suggestStructureForLoan({ loan, structureId }) {\n      const propertyValue = this.getPropAndWork({ loan, structureId });\n      const loanValue = this.selectLoanValue({ loan, structureId });\n      const notaryFees = this.getFees({ loan, structureId }).total;\n\n      return this.suggestStructure({\n        borrowers: loan.borrowers,\n        propertyValue,\n        loanValue,\n        residenceType: loan.residenceType,\n        notaryFees,\n      });\n    }\n  };\n","export const withConfig = extraConfig => SuperClass =>\n  class extends SuperClass {\n    constructor(config) {\n      super({ ...config, ...extraConfig });\n    }\n  };\n","import { compose } from 'recompose';\n\nimport { FinanceCalculator } from '../FinanceCalculator';\nimport { withLoanCalculator } from './LoanCalculator';\nimport { withBorrowerCalculator } from './BorrowerCalculator';\nimport { withOfferCalculator } from './OfferCalculator';\nimport { withPropertyCalculator } from './PropertyCalculator';\nimport { withPromotionCalculator } from './PromotionCalculator';\nimport { withCombinedCalculator } from './CombinedCalculator';\nimport { withSelector } from './Selector';\nimport { withLenderRulesInitializator } from './LenderRulesInitializator';\nimport { withSolvencyCalculator } from './SolvencyCalculator';\nimport { withConfig } from './classUtils';\nimport { financeCalculatorArgumentMapper } from './middleware';\n\nconst MappedFinanceCalculator = withConfig({\n  middlewareObject: financeCalculatorArgumentMapper,\n})(FinanceCalculator);\n\n// Put CombinedCalculator first, so that it can modify the following calculators\n// with middleware\nexport const Calculator = compose(\n  withLenderRulesInitializator,\n  withSolvencyCalculator,\n  withCombinedCalculator,\n  withPromotionCalculator,\n  withLoanCalculator,\n  withBorrowerCalculator,\n  withPropertyCalculator,\n  withOfferCalculator,\n  withSelector,\n)(MappedFinanceCalculator);\n\nexport default new Calculator({});\n","// @flow\n\n// Map loan onto FinanceCalculator\n\nimport { makeArgumentMapper } from '../MiddlewareManager';\nimport memoizeOne from '../memoizeOne';\n\nconst argumentMappings = {};\n\nexport const financeCalculatorArgumentMapper = makeArgumentMapper(argumentMappings);\n\nexport const borrowerExtractorMiddleware = () => next => (params, ...args) => {\n  if (params && params.loan && !params.borrowers) {\n    return next({ ...params, borrowers: params.loan.borrowers }, ...args);\n  }\n  return next(params, ...args);\n};\n\nexport const memoizeMiddleware = () => (next) => {\n  const memoFunc = memoizeOne(next);\n  return memoFunc;\n};\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport DefaultFinanceCalculator, {\n  FinanceCalculator,\n} from '../FinanceCalculator';\nimport { NO_INTEREST_RATE_ERROR } from '../financeCalculatorConstants';\nimport { RESIDENCE_TYPE } from '../../../api/constants';\n\ndescribe('FinanceCalculator', () => {\n  let calc;\n\n  beforeEach(() => {\n    calc = new FinanceCalculator();\n  });\n\n  describe('getLoanValue', () => {\n    it('returns the difference between property and fortune without fees', () => {\n      expect(calc.getLoanValue({ propertyValue: 100, fortune: 20 })).to.equal(85);\n    });\n\n    it('uses fortune to pay for fees', () => {\n      calc = new FinanceCalculator({ notaryFees: 0.1 });\n      expect(calc.getLoanValue({ propertyValue: 100, fortune: 30 })).to.equal(80);\n    });\n  });\n\n  describe('getBorrowRatio', () => {\n    it('returns a percentage borrowRatio', () => {\n      expect(calc.getBorrowRatio({ propertyValue: 100, loan: 80 })).to.equal(0.8);\n    });\n\n    it('returns zero if no loan is provided', () => {\n      expect(calc.getBorrowRatio({ propertyValue: 100 })).to.equal(0);\n    });\n  });\n\n  describe('getBorrowRatioWithoutLoan', () => {\n    it('returns a percentage borrowRatio', () => {\n      expect(calc.getBorrowRatioWithoutLoan({ propertyValue: 100, fortune: 25 })).to.equal(0.8);\n    });\n  });\n\n  describe('getRetirementForGender', () => {\n    it('returns a different value for male and female', () => {\n      expect(calc.getRetirementForGender({ gender: 'M' })).to.not.equal(undefined);\n      expect(calc.getRetirementForGender({ gender: 'M' })).to.not.equal(undefined);\n      expect(calc.getRetirementForGender({ gender: 'M' })).to.not.equal(calc.getRetirementForGender({ gender: 'F' }));\n    });\n\n    it('returns male retirement if nothing is provided', () => {\n      expect(calc.getRetirementForGender({})).to.equal(65);\n      expect(calc.getRetirementForGender()).to.equal(65);\n    });\n  });\n\n  describe('getIncomeRatio', () => {\n    it('returns the ratio between payment and income', () => {\n      expect(calc.getIncomeRatio({ monthlyIncome: 1, monthlyPayment: 0.5 })).to.equal(0.5);\n    });\n\n    it('returns zero if no payment is provided', () => {\n      expect(calc.getIncomeRatio({ monthlyIncome: 1, monthlyPayment: 0 })).to.equal(0);\n    });\n  });\n\n  describe('getLoanCost', () => {\n    it('returns the sum of the 3 components', () => {\n      expect(calc.getLoanCost({ maintenance: 1, interests: 2, amortization: 3 })).to.equal(6);\n    });\n\n    it('ignores a value if not provided', () => {\n      expect(calc.getLoanCost({ interests: 2, amortization: 3 })).to.equal(5);\n      expect(calc.getLoanCost({ maintenance: 1, amortization: 3 })).to.equal(4);\n      expect(calc.getLoanCost({ maintenance: 1, interests: 2 })).to.equal(3);\n    });\n\n    it('returns zero if nothing is provided', () => {\n      expect(calc.getLoanCost()).to.equal(0);\n    });\n  });\n\n  describe('getInterestsWithTranches', () => {\n    it('aggregates interest rates with loan tranches', () => {\n      expect(calc.getInterestsWithTranches({\n        tranches: [{ value: 0.5, type: 'a' }, { value: 0.5, type: 'b' }],\n        interestRates: { a: 0.01, b: 0.02 },\n      })).to.equal(0.5 * 0.01 + 0.5 * 0.02);\n    });\n\n    it('returns zero if nothing is provided', () => {\n      expect(calc.getInterestsWithTranches()).to.equal(0);\n    });\n\n    it('return a dash if an interest rate is not present', () => {\n      expect(calc.getInterestsWithTranches({\n        tranches: [{ value: 0.5, type: 'a' }],\n        interestRates: { b: 0.02 },\n      })).to.equal('-');\n    });\n  });\n\n  describe('getAmortizationRateBase', () => {\n    it('returns the amortization base rate for an 80% loan with proper precision', () => {\n      calc = new FinanceCalculator({\n        amortizationBaseRate: 0.01,\n        amortizationGoal: 0.65,\n      });\n      expect(calc.getAmortizationRateBase({ borrowRatio: 0.8 })).to.equal(0.0125);\n    });\n\n    it('returns zero if already below the amortizationGoal', () => {\n      calc = new FinanceCalculator({\n        amortizationBaseRate: 0.01,\n        amortizationGoal: 0.65,\n      });\n      expect(calc.getAmortizationRateBase({ borrowRatio: 0.64 })).to.equal(0);\n    });\n\n    it('returns zero if already exactly at the amortizationGoal', () => {\n      calc = new FinanceCalculator({\n        amortizationBaseRate: 0.01,\n        amortizationGoal: 0.65,\n      });\n      expect(calc.getAmortizationRateBase({ borrowRatio: 0.65 })).to.equal(0);\n    });\n\n    it('returns zero if nothing is provided', () => {\n      calc = new FinanceCalculator({\n        amortizationBaseRate: 0.01,\n        amortizationGoal: 0.65,\n      });\n      expect(calc.getAmortizationRateBase()).to.equal(0);\n      expect(calc.getAmortizationRateBase({})).to.equal(0);\n    });\n  });\n\n  describe('DefaultFinanceCalculator', () => {\n    beforeEach(() => {\n      calc = DefaultFinanceCalculator;\n    });\n\n    it('has default initialization settings', () => {\n      expect(calc.getLoanValue({ propertyValue: 100, fortune: 25 })).to.equal(80);\n      expect(calc.getAmortizationRateBase({ borrowRatio: 0.8 })).to.equal(0.0125);\n    });\n  });\n\n  describe('Calculate Years to Retirement', () => {\n    it('Should return 35 with a male of 30 yo', () => {\n      expect(calc.getYearsToRetirement({ age1: 30, gender1: 'M' })).to.equal(35);\n    });\n\n    it('Should return 34 with a female of 30 yo', () => {\n      expect(calc.getYearsToRetirement({ age1: 30, gender1: 'F' })).to.equal(34);\n    });\n\n    it('Should return 35 with an undefined gender of 30 yo', () => {\n      expect(calc.getYearsToRetirement({ age1: 30 })).to.equal(35);\n    });\n\n    it('Should return 0 with a female of 64 yo', () => {\n      expect(calc.getYearsToRetirement({ age1: 64, gender1: 'F' })).to.equal(0);\n    });\n\n    it('Should return 0 with a female over 64 yo', () => {\n      expect(calc.getYearsToRetirement({ age1: 80, gender1: 'F' })).to.equal(0);\n    });\n\n    it('Should return 10 with a female of 54 yo and male of 54 yo', () => {\n      expect(calc.getYearsToRetirement({\n        age1: 54,\n        age2: 54,\n        gender1: 'F',\n        gender2: 'M',\n      })).to.equal(10);\n    });\n  });\n\n  describe('getFeesBase', () => {\n    it('returns fees if its above 0 or 0', () => {\n      expect(calc.getFeesBase({ fees: 0 })).to.equal(0);\n      expect(calc.getFeesBase({ fees: 123 })).to.equal(123);\n    });\n\n    it('returns 0 if nothing is passed', () => {\n      expect(calc.getFeesBase({})).to.equal(0);\n    });\n\n    it('returns calculated fees if no fees are provided', () => {\n      expect(calc.getFeesBase({ propertyValue: 100 })).to.equal(5);\n      expect(calc.getFeesBase({ propertyValue: 0 })).to.equal(0);\n    });\n  });\n\n  describe('getTheoreticalMonthly', () => {\n    it('returns a correct value', () => {\n      const expected = {\n        maintenance: 1000,\n        interests: 4000,\n        amortization: 1000,\n        total: 6000,\n      };\n\n      expect(calc.getTheoreticalMonthly({\n        propAndWork: 1200000,\n        loanValue: 960000,\n        amortizationRate: calc.getAmortizationRateBase({ borrowRatio: 0.8 }),\n      })).to.deep.equal(expected);\n    });\n  });\n\n  describe('getMaxLoanBase', () => {\n    it('returns 80% of the property by default', () => {\n      expect(calc.getMaxLoanBase({\n        propertyValue: 90,\n        propertyWork: 10,\n        pledgedAmount: 1000,\n      })).to.equal(80);\n    });\n\n    it('returns 80% of the property for a main residence if nothing is pledged', () => {\n      expect(calc.getMaxLoanBase({\n        propertyValue: 90,\n        propertyWork: 10,\n        residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n      })).to.equal(80);\n    });\n\n    it('returns between 80 and 90% of the property for a main residence if a little is pledged', () => {\n      expect(calc.getMaxLoanBase({\n        propertyValue: 90,\n        propertyWork: 10,\n        residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n        pledgedAmount: 5,\n      })).to.equal(85);\n    });\n\n    it('caps at 90% of the property', () => {\n      expect(calc.getMaxLoanBase({\n        propertyValue: 90,\n        propertyWork: 10,\n        residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n        pledgedAmount: 20,\n      })).to.equal(90);\n    });\n  });\n\n  describe('getAveragedInterestRate', () => {\n    it('returns the same value if only one rate at 100%', () => {\n      expect(calc.getAveragedInterestRate({\n        tranches: [{ type: 'rateType', value: 1 }],\n        interestRates: { rateType: 0.01 },\n      })).to.equal(0.01);\n    });\n\n    it('averages 2 rates out', () => {\n      expect(calc.getAveragedInterestRate({\n        tranches: [\n          { type: 'rateType1', value: 0.5 },\n          { type: 'rateType2', value: 0.5 },\n        ],\n        interestRates: { rateType1: 0.01, rateType2: 0.02 },\n      })).to.equal(0.015);\n    });\n  });\n});\n","// @flow\nimport {\n  GENDER,\n  SUCCESS,\n  ERROR,\n  WARNING,\n  RESIDENCE_TYPE,\n  REAL_ESTATE_CONSIDERATION_TYPES,\n  EXPENSE_TYPES_WITHOUT_DELTAS,\n} from '../../api/constants';\nimport {\n  AMORTIZATION_STOP,\n  AMORTIZATION_YEARS,\n  AVERAGE_TAX_RATE,\n  BONUS_ALGORITHMS,\n  BONUS_CONSIDERATION,\n  BONUS_HISTORY_TO_CONSIDER,\n  COMPANY_INCOME_TO_CONSIDER,\n  DEFAULT_AMORTIZATION,\n  DIVIDENDS_CONSIDERATION,\n  DIVIDENDS_HISTORY_TO_CONSIDER,\n  ESTIMATED_COMMISSION,\n  FORTUNE_RETURNS_RATIO,\n  INTERESTS_FINMA,\n  INVESTMENT_INCOME_CONSIDERATION,\n  MAINTENANCE_FINMA,\n  MAX_BORROW_RATIO_PRIMARY_PROPERTY,\n  MAX_BORROW_RATIO_WITH_PLEDGE,\n  MAX_INCOME_RATIO_TIGHT,\n  MAX_INCOME_RATIO,\n  MIN_CASH,\n  NOTARY_FEES,\n  OWN_FUNDS_ROUNDING_AMOUNT,\n  PENSION_INCOME_CONSIDERATION,\n  REAL_ESTATE_INCOME_ALGORITHMS,\n  REAL_ESTATE_INCOME_CONSIDERATION,\n  REFERRAL_COMMISSION_SPLIT,\n  REFERRAL_COMMISSION,\n} from '../../config/financeConstants';\nimport MiddlewareManager from '../MiddlewareManager';\nimport { precisionMiddleware } from './financeCalculatorMiddlewares';\nimport { memoizeMiddleware } from '../Calculator/middleware';\n\nexport class FinanceCalculator {\n  constructor(settings?: Object) {\n    this.initFinanceCalculator(settings);\n  }\n\n  notaryFees: number;\n\n  amortizationBaseRate: number;\n\n  amortizationGoal: number;\n\n  initFinanceCalculator({\n    allowPledge = true,\n    amortizationBaseRate = DEFAULT_AMORTIZATION,\n    amortizationGoal = AMORTIZATION_STOP,\n    amortizationYears = AMORTIZATION_YEARS,\n    bonusAlgorithm = BONUS_ALGORITHMS.WEAK_AVERAGE,\n    bonusConsideration = BONUS_CONSIDERATION,\n    bonusHistoryToConsider = BONUS_HISTORY_TO_CONSIDER,\n    companyIncomeHistoryToConsider = COMPANY_INCOME_TO_CONSIDER,\n    dividendsConsideration = DIVIDENDS_CONSIDERATION,\n    dividendsHistoryToConsider = DIVIDENDS_HISTORY_TO_CONSIDER,\n    expensesSubtractFromIncome = EXPENSE_TYPES_WITHOUT_DELTAS,\n    fortuneReturnsRatio = FORTUNE_RETURNS_RATIO,\n    investmentIncomeConsideration = INVESTMENT_INCOME_CONSIDERATION,\n    maxBorrowRatio = MAX_BORROW_RATIO_PRIMARY_PROPERTY,\n    maxBorrowRatioWithPledge = MAX_BORROW_RATIO_WITH_PLEDGE,\n    maxIncomeRatio = MAX_INCOME_RATIO,\n    maxIncomeRatioTight = MAX_INCOME_RATIO_TIGHT,\n    minCash = MIN_CASH,\n    notaryFees = NOTARY_FEES,\n    ownFundsRoundingAmount = OWN_FUNDS_ROUNDING_AMOUNT,\n    pensionIncomeConsideration = PENSION_INCOME_CONSIDERATION,\n    realEstateIncomeAlgorithm = REAL_ESTATE_INCOME_ALGORITHMS.DEFAULT,\n    realEstateIncomeConsideration = REAL_ESTATE_INCOME_CONSIDERATION,\n    realEstateIncomeConsiderationType = REAL_ESTATE_CONSIDERATION_TYPES.ADD_TO_INCOME,\n    taxRate = AVERAGE_TAX_RATE,\n    theoreticalInterestRate = INTERESTS_FINMA,\n    theoreticalInterestRate2ndRank = null,\n    theoreticalMaintenanceRate = MAINTENANCE_FINMA,\n    estimatedCommission = ESTIMATED_COMMISSION,\n    referralCommission = REFERRAL_COMMISSION,\n    referralCommissionSplit = REFERRAL_COMMISSION_SPLIT,\n    middlewares = [],\n    middlewareObject,\n  } = {}) {\n    this.allowPledge = allowPledge;\n    this.amortizationBaseRate = amortizationBaseRate;\n    this.amortizationGoal = amortizationGoal;\n    this.amortizationYears = amortizationYears;\n    this.bonusAlgorithm = bonusAlgorithm;\n    this.bonusConsideration = bonusConsideration;\n    this.bonusHistoryToConsider = bonusHistoryToConsider;\n    this.companyIncomeHistoryToConsider = companyIncomeHistoryToConsider;\n    this.dividendsConsideration = dividendsConsideration;\n    this.dividendsHistoryToConsider = dividendsHistoryToConsider;\n    this.expensesSubtractFromIncome = expensesSubtractFromIncome;\n    this.fortuneReturnsRatio = fortuneReturnsRatio;\n    this.investmentIncomeConsideration = investmentIncomeConsideration;\n    this.maxBorrowRatio = maxBorrowRatio;\n    this.maxBorrowRatioWithPledge = maxBorrowRatioWithPledge;\n    this.maxIncomeRatio = maxIncomeRatio;\n    this.maxIncomeRatioTight = maxIncomeRatioTight;\n    this.minCash = minCash;\n    this.notaryFees = notaryFees;\n    this.ownFundsRoundingAmount = ownFundsRoundingAmount;\n    this.pensionIncomeConsideration = pensionIncomeConsideration;\n    this.realEstateIncomeAlgorithm = realEstateIncomeAlgorithm;\n    this.realEstateIncomeConsideration = realEstateIncomeConsideration;\n    this.realEstateIncomeConsiderationType = realEstateIncomeConsiderationType;\n    this.taxRate = taxRate;\n    this.theoreticalInterestRate = theoreticalInterestRate;\n    this.theoreticalInterestRate2ndRank = theoreticalInterestRate2ndRank;\n    this.theoreticalMaintenanceRate = theoreticalMaintenanceRate;\n    this.estimatedCommission = estimatedCommission;\n    this.referralCommission = referralCommission;\n    this.referralCommissionSplit = referralCommissionSplit;\n    this.setMiddleware(middlewares, middlewareObject);\n  }\n\n  setMiddleware = (middlewares?: Array<Function>, middlewareObject) => {\n    const middlewareManager = new MiddlewareManager(this, middlewareObject);\n    middlewareManager.applyToAllMethods([\n      precisionMiddleware,\n      memoizeMiddleware,\n      ...middlewares,\n    ]);\n  };\n\n  getLoanValue({\n    propertyValue,\n    propertyWork = 0,\n    fortune,\n    pledgedValue = 0,\n    fees = this.getFeesBase({ propertyValue, propertyWork }),\n  }: {\n    propertyValue: number,\n    fortune: number,\n    pledgedValue?: number,\n    fees?: number,\n  }) {\n    return propertyValue + propertyWork + fees + pledgedValue - fortune;\n  }\n\n  getPropAndWork({ propertyValue, propertyWork }) {\n    return propertyValue + propertyWork;\n  }\n\n  getBorrowRatio({\n    propertyValue,\n    loan = 0,\n  }: {\n    propertyValue: number,\n    loan: number,\n  }) {\n    return loan / propertyValue;\n  }\n\n  getLoanFromBorrowRatio({\n    propertyValue,\n    borrowRatio,\n  }: {\n    propertyValue: number,\n    borrowRatio: number,\n  }) {\n    return borrowRatio * propertyValue;\n  }\n\n  getBorrowRatioWithoutLoan({\n    propertyValue,\n    fortune,\n  }: {\n    propertyValue: number,\n    fortune: number,\n  }) {\n    return this.getBorrowRatio({\n      propertyValue,\n      loan: this.getLoanValue({ propertyValue, fortune }),\n    });\n  }\n\n  getBorrowRatioStatus({ borrowRatio }) {\n    if (borrowRatio <= this.maxBorrowRatio) {\n      return SUCCESS;\n    }\n    if (borrowRatio <= this.maxBorrowRatioWithPledge) {\n      return WARNING;\n    }\n    return ERROR;\n  }\n\n  getRetirementForGender({ gender = GENDER.M }: { gender?: string } = {}) {\n    return gender === GENDER.F ? 64 : 65;\n  }\n\n  getIncomeRatio({\n    monthlyIncome,\n    monthlyPayment = 0,\n  }: {\n    monthlyIncome: number,\n    monthlyPayment: number,\n  }) {\n    return monthlyPayment / monthlyIncome;\n  }\n\n  getIncomeRatioStatus({ incomeRatio }) {\n    if (incomeRatio <= this.maxIncomeRatio) {\n      return SUCCESS;\n    }\n    if (this.maxIncomeRatioTight && incomeRatio <= this.maxIncomeRatioTight) {\n      // This ratio can be disabled, i.e. set to 0, and then it'll skip the warning\n      // and only display success or error\n      return WARNING;\n    }\n    return ERROR;\n  }\n\n  getLoanCost({\n    maintenance = 0,\n    interests = 0,\n    amortization = 0,\n  }: {\n    maintenance?: number,\n    interests?: number,\n    amortization?: number,\n  } = {}) {\n    return maintenance + interests + amortization;\n  }\n\n  getLoanCostWithParts({\n    maintenance,\n    interests,\n    amortization,\n  }: {\n    maintenance: number,\n    interests: number,\n    amortization?: number,\n  }) {\n    return {\n      maintenance,\n      interests,\n      amortization,\n      total: this.getLoanCost({ maintenance, interests, amortization }),\n    };\n  }\n\n  checkInterestsAndTranches({\n    tranches = [],\n    interestRates,\n  }: {\n    tranches: Array<{ type: string, value: number }>,\n    interestRates: Object,\n  }) {\n    return tranches.reduce((invalidRate, { type }) => {\n      if (invalidRate) {\n        return invalidRate;\n      }\n\n      if (!interestRates[type]) {\n        return type;\n      }\n    }, undefined);\n  }\n\n  getInterestsWithTranches({\n    tranches = [],\n    interestRates,\n  }: {\n    tranches: Array<{ type: string, value: number }>,\n    interestRates: Object,\n  } = {}) {\n    return tranches.reduce((acc, { type, value }) => {\n      const rate = interestRates[type];\n\n      if (!rate || acc === '-') {\n        return '-';\n      }\n\n      return acc + value * rate;\n    }, 0);\n  }\n\n  getAmortizationRateBase({\n    borrowRatio = 0,\n    amortizationYears = this.amortizationYears,\n  }: { borrowRatio: number, amortizationRate?: number } = {}) {\n    let amortizationRate = 0;\n    if (borrowRatio > this.amortizationGoal) {\n      // The loan has to be below 65% before 15 years or before retirement,\n      // whichever comes first\n      const amountToAmortize = borrowRatio - this.amortizationGoal;\n\n      // Make sure we don't create a black hole, or use negative values by error\n      if (amortizationYears > 0) {\n        // Amortization is the amount to amortize divided by the amount\n        // of years before the deadline\n        amortizationRate = amountToAmortize / amortizationYears;\n      }\n    } else {\n      // For projects below 65%, stop amortizing\n      // yearlyAmortization = propAndWork * constants.amortization;\n    }\n\n    return amortizationRate / borrowRatio || 0;\n  }\n\n  getMaxLoanBase({\n    propertyValue,\n    propertyWork,\n    pledgedAmount = 0,\n    residenceType,\n  }: {\n    propertyValue: number,\n    propertyWork: number,\n    pledgedAmount: number,\n    residenceType: string,\n  } = {}): number {\n    if (residenceType === RESIDENCE_TYPE.MAIN_RESIDENCE) {\n      return Math.min(\n        (propertyValue + propertyWork) * this.maxBorrowRatio + pledgedAmount,\n\n        (propertyValue + propertyWork) * this.maxBorrowRatioWithPledge,\n      );\n    }\n    return (propertyValue + propertyWork) * this.maxBorrowRatio;\n  }\n\n  getYearsToRetirement = ({\n    age1,\n    age2,\n    gender1,\n    gender2,\n  }: {\n    age1?: number,\n    age2?: number,\n    gender1?: 'F' | 'M',\n    gender2?: 'F' | 'M',\n  } = {}) => {\n    const retirement1 = this.getRetirementForGender({ gender: gender1 });\n    let retirement2 = null;\n    if (gender2) {\n      retirement2 = this.getRetirementForGender({ gender: gender2 });\n    }\n\n    // Substract age to determine remaining time to retirement for both borrowers\n    const toRetirement1 = retirement1 - age1;\n    let toRetirement2;\n    if (retirement2 && age2) {\n      toRetirement2 = retirement2 - age2;\n    }\n\n    // Get the most limiting time to retirement for both borrowers, in years\n    let yearsToRetirement;\n    if (toRetirement2) {\n      yearsToRetirement = Math.min(toRetirement1, toRetirement2);\n    } else {\n      yearsToRetirement = toRetirement1;\n    }\n\n    return Math.max(yearsToRetirement, 0);\n  };\n\n  getTheoreticalMonthly({ propAndWork, loanValue, amortizationRate }) {\n    const maintenance = (propAndWork * this.theoreticalMaintenanceRate) / 12;\n    const interests = (loanValue * this.theoreticalInterestRate) / 12;\n    const amortization = (loanValue * amortizationRate) / 12;\n    return this.getLoanCostWithParts({ maintenance, interests, amortization });\n  }\n\n  getNotaryFeesRate() {\n    return this.notaryFees;\n  }\n\n  getMinCash({\n    propertyValue,\n    propertyWork,\n    fees = this.getFeesBase({ propertyValue, propertyWork }),\n  }) {\n    return (propertyValue + propertyWork) * this.minCash + fees;\n  }\n\n  getFeesBase({ fees, propertyValue = 0 }) {\n    if (fees === 0 || fees > 0) {\n      return fees;\n    }\n\n    return propertyValue * this.notaryFees;\n  }\n\n  getIncomeLimitedPropertyValue = ({ nF, r, i, mR, m }) => ({\n    income,\n    fortune,\n  }) => {\n    // The first one is with 0 amortization\n    const incomeLimited1 = (mR * income + fortune * i) / (m + (1 + nF) * i);\n\n    // The second is with amortization factored in (and it could be negative due to math)\n    const incomeLimited2 = ((1 + r * i) * fortune + mR * r * income)\n      / (r * (m + i) + nF * (1 + r * i) + 0.35);\n\n    // Therefore, take the minimum value of both, which is the most limiting one\n    // Because of the ratios, round this value down\n    return Math.floor(Math.min(incomeLimited1, incomeLimited2));\n  };\n\n  getAveragedInterestRate({ tranches = [], interestRates = {} }) {\n    return tranches.reduce(\n      (totalRate, { type, value }) => totalRate + interestRates[type] * value,\n      0,\n    );\n  }\n}\n\nexport default new FinanceCalculator();\n","// @flow\nexport const NO_INTEREST_RATE_ERROR = 'NO_INTEREST_RATE_ERROR';\n","export const precisionMiddleware = () => next => (...args) => {\n  const result = next(...args);\n\n  if (typeof result === 'number') {\n    return Number(result.toPrecision(10));\n  }\n\n  return result;\n};\n","// @flow\nexport { default, FinanceCalculator } from './FinanceCalculator';\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport MiddlewareManager from '../MiddlewareManager';\n\nconst addingMiddleware = calc => next => (...args) =>\n  next(args[0] + 1, args[1]);\nconst subtractingMiddleware = calc => next => (...args) =>\n  next(args[0] - 1, args[1]);\n\ndescribe('MiddlewareManager', () => {\n  describe('with Classes', () => {\n    class Calculator {\n      multiply(a, b) {\n        return a * b;\n      }\n\n      divide(a, b) {\n        return a / b;\n      }\n    }\n\n    let calc;\n    let middlewareManager;\n\n    beforeEach(() => {\n      calc = new Calculator();\n      middlewareManager = new MiddlewareManager(calc);\n    });\n\n    it('behaves normally without wrapping', () => {\n      expect(calc.multiply(2, 3)).to.equal(6);\n    });\n\n    describe('applyToMethod', () => {\n      it('intercepts a class method and modifies it', () => {\n        middlewareManager.applyToMethod('multiply', [addingMiddleware]);\n        expect(calc.multiply(2, 3)).to.equal(9);\n      });\n\n      it('allows non-arrays to be passed as a single param', () => {\n        middlewareManager.applyToMethod('multiply', addingMiddleware);\n        expect(calc.multiply(2, 3)).to.equal(9);\n      });\n\n      it('works with multiple middlewares', () => {\n        middlewareManager.applyToMethod('multiply', [\n          addingMiddleware,\n          subtractingMiddleware,\n        ]);\n        expect(calc.multiply(2, 3)).to.equal(6);\n      });\n    });\n\n    describe('middlewareObjects', () => {\n      it('works with a middleware object', () => {\n        const calcMiddleware = {\n          multiply: addingMiddleware,\n        };\n        middlewareManager = new MiddlewareManager(calc, calcMiddleware);\n        expect(calc.multiply(2, 3)).to.equal(9);\n      });\n\n      it('works with a middleware object in array', () => {\n        const calcMiddleware = {\n          multiply: addingMiddleware,\n        };\n        middlewareManager = new MiddlewareManager(calc, [calcMiddleware]);\n        expect(calc.multiply(2, 3)).to.equal(9);\n      });\n\n      it('works with multiple middleware object', () => {\n        const calcMiddleware1 = {\n          multiply: addingMiddleware,\n        };\n        const calcMiddleware2 = {\n          multiply: subtractingMiddleware,\n        };\n        middlewareManager = new MiddlewareManager(calc, [\n          calcMiddleware1,\n          calcMiddleware2,\n        ]);\n        expect(calc.multiply(2, 3)).to.equal(6);\n      });\n    });\n\n    describe('applyToAllMethods', () => {\n      it('applies one middleware to all methods', () => {\n        expect(calc.multiply(2, 3)).to.equal(6);\n        expect(calc.divide(4, 4)).to.equal(1);\n\n        middlewareManager.applyToAllMethods(addingMiddleware);\n\n        expect(calc.multiply(2, 3)).to.equal(9);\n        expect(calc.divide(4, 4)).to.equal(1.25);\n      });\n    });\n\n    it('works with multiple middleware managers', () => {\n      middlewareManager.applyToMethod('multiply', [addingMiddleware]);\n\n      const middlewareManager2 = new MiddlewareManager(calc);\n      middlewareManager2.applyToMethod('multiply', [subtractingMiddleware]);\n\n      expect(calc.multiply(2, 3)).to.equal(6);\n    });\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport makeArgumentMapper from '../argumentMapperMiddleware';\nimport MiddlewareManager from '../MiddlewareManager';\n\ndescribe('argumentMapperMiddleware', () => {\n  class Calculator {\n    multiply({ a, b }) {\n      return a * b;\n    }\n\n    divide(a, b) {\n      return a / b;\n    }\n  }\n\n  let calc;\n\n  beforeEach(() => {\n    calc = new Calculator();\n  });\n\n  it('works for functions that take objects', () => {\n    expect(calc.multiply({ a: 2, b: 3 })).to.equal(6);\n\n    const middleware = makeArgumentMapper({\n      multiply: ({ c, d }) => ({ a: c, b: d }),\n    });\n    const middlewareManager = new MiddlewareManager(calc, middleware);\n\n    expect(calc.multiply({ c: 2, d: 3 })).to.equal(6);\n  });\n\n  it('works for functions that take multiple arguments', () => {\n    expect(calc.divide(4, 4)).to.equal(1);\n\n    const middleware = makeArgumentMapper({\n      divide: ({ a, b }) => [a, b],\n    });\n    const middlewareManager = new MiddlewareManager(calc, middleware);\n\n    expect(calc.divide({ a: 4, b: 4 })).to.equal(1);\n  });\n\n  it('does not alter methods without mappings', () => {\n    const middleware = makeArgumentMapper({\n      multiply: ({ c, d }) => ({ a: c, b: d }),\n    });\n    const middlewareManager = new MiddlewareManager(calc, middleware);\n\n    expect(calc.multiply({ c: 2, d: 3 })).to.equal(6);\n    expect(calc.divide(4, 4)).to.equal(1);\n  });\n});\n","// @flow\nimport { compose } from 'recompose';\nimport isArray from 'lodash/isArray';\nimport difference from 'lodash/difference';\n\nconst middlewareManagerHash = [];\nconst CLASS_METHODS_TO_EXCLUDE = [\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toString',\n  'valueOf',\n  'toLocaleString',\n  '__defineGetter__',\n  '__defineSetter__',\n  '__lookupGetter__',\n  '__lookupSetter__',\n];\n\ntype MiddlewareType = Array<Function> | Function;\ntype MiddlewareObjectType = Array<Object> | Object;\n\n// Careful, methods starting with \"_\" will not be wrapped by middleware,\n// except if you use a middlewareObject\nclass MiddlewareManager {\n  constructor(target: Object, middlewareObjects?: MiddlewareObjectType) {\n    let instance = middlewareManagerHash.find(key => key._target === target);\n    // a target can only has one MiddlewareManager instance\n    if (instance === undefined) {\n      this._target = target;\n      this._methods = {};\n      this._methodMiddlewares = {};\n      middlewareManagerHash.push(this);\n      instance = this;\n    }\n\n    if (middlewareObjects) {\n      instance.useObjectMiddleware(middlewareObjects);\n    }\n\n    return instance;\n  }\n\n  applyToAllMethods(_middlewares: MiddlewareType, omit) {\n    const middlewares = this.arrayify(_middlewares);\n    const methods = this.getAllMethodNames(this._target);\n\n    methods\n      .filter((name) => {\n        if (omit) {\n          return !omit.includes(name);\n        }\n        return true;\n      })\n      .forEach(method => this.applyToMethod(method, middlewares));\n\n    return this;\n  }\n\n  getAllMethodNames(obj: Object = {}, stop: mixed) {\n    const methodNames = [];\n    let proto = Object.getPrototypeOf(obj);\n    while (proto && proto !== stop) {\n      Object.getOwnPropertyNames(proto).forEach((name) => {\n        if (name !== 'constructor') {\n          if (this.hasMethod(proto, name)) {\n            methodNames.push(name);\n          }\n        }\n      });\n      proto = Object.getPrototypeOf(proto);\n    }\n    return difference(methodNames, CLASS_METHODS_TO_EXCLUDE);\n  }\n\n  hasMethod(obj: Object, name: string) {\n    const desc = Object.getOwnPropertyDescriptor(obj, name);\n    return !!desc && typeof desc.value === 'function';\n  }\n\n  applyToMethod(methodName: string, _middlewares: MiddlewareType) {\n    const middlewares = this.arrayify(_middlewares);\n\n    if (\n      typeof methodName === 'string'\n      && !this.stringStartsWithUnderscore(methodName)\n    ) {\n      const method = this._methods[methodName] || this._target[methodName];\n      if (typeof method === 'function') {\n        this._methods[methodName] = method;\n\n        if (\n          this._methodMiddlewares[methodName] === undefined\n          || !isArray(this._methodMiddlewares[methodName])\n        ) {\n          this._methodMiddlewares[methodName] = [];\n        }\n\n        middlewares.forEach(middleware =>\n          typeof middleware === 'function'\n            && this._methodMiddlewares[methodName].push(middleware(this._target)));\n        this._target[methodName] = compose(...this._methodMiddlewares[methodName])(method.bind(this._target));\n      }\n    }\n\n    return this;\n  }\n\n  stringStartsWithUnderscore(string: string) {\n    return /^_+|_+$/g.test(string);\n  }\n\n  useObjectMiddleware(_objectMiddlewares: MiddlewareObjectType) {\n    const objectMiddlewares = this.arrayify(_objectMiddlewares);\n\n    Array.prototype.slice.call(objectMiddlewares).forEach((arg) => {\n      // A middleware object can specify target functions within middlewareMethods (Array).\n      // e.g. obj.middlewareMethods = ['method1', 'method2'];\n      // only method1 and method2 will be the target function.\n      typeof arg === 'object'\n        && (arg.middlewareMethods || Object.keys(arg)).forEach((key) => {\n          typeof arg[key] === 'function'\n            && this.applyToMethod(key, arg[key].bind(arg));\n        });\n    });\n\n    return this;\n  }\n\n  arrayify(maybeArray: mixed | Array): Array<Object | Function> {\n    return isArray(maybeArray) ? maybeArray : [maybeArray];\n  }\n}\n\nexport default MiddlewareManager;\n","// @flow\nimport isArray from 'lodash/isArray';\n\nexport const makeArgumentMapper = (mappings: { [key: string]: Function }) =>\n  Object.keys(mappings).reduce(\n    (mapper, key) => ({\n      ...mapper,\n      [key]: () => next => (...args) => {\n        const argumentMapperFunc = mappings[key];\n        const newArgumentStructure = argumentMapperFunc(...args);\n\n        if (isArray(newArgumentStructure)) {\n          return next(...newArgumentStructure);\n        }\n\n        return next(newArgumentStructure);\n      },\n    }),\n    {},\n  );\n\nexport default makeArgumentMapper;\n","export { default } from './MiddlewareManager';\nexport * from './argumentMapperMiddleware';\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { RESIDENCE_TYPE } from 'core/api/constants';\nimport NotaryFeesCalculator from '../NotaryFeesCalculator';\nimport { PURCHASE_TYPE } from '../../../api/constants';\nimport { GE } from '../cantonConstants';\n\ndescribe('NotaryFeesCalculator', () => {\n  let calc;\n  let loan;\n\n  beforeEach(() => {\n    loan = {\n      structure: {\n        property: { value: 1000000 },\n        wantedLoan: 800000,\n      },\n      borrowers: [{ _id: 'borrower1' }],\n    };\n  });\n\n  describe('general', () => {\n    before(() => {\n      calc = new NotaryFeesCalculator({ canton: 'GE' });\n    });\n\n    it('returns 0 for buyers contract fees for a refinancing loan', () => {\n      loan.purchaseType = PURCHASE_TYPE.REFINANCING;\n\n      const fees = calc.getNotaryFeesForLoan({ loan });\n\n      expect(fees.buyersContractFees.total).to.equal(0);\n    });\n  });\n\n  describe('GE', () => {\n    before(() => {\n      calc = new NotaryFeesCalculator({ canton: 'GE' });\n    });\n\n    it('returns the correct amount for a buyers contract', () => {\n      const fees = calc.getNotaryFeesForLoan({ loan });\n\n      expect(fees.buyersContractFees.total).to.equal(39100.4);\n    });\n\n    it('returns the correct amount for a new mortgage note', () => {\n      const fees = calc.getNotaryFeesForLoan({ loan });\n\n      expect(fees.mortgageNoteFees.total).to.equal(16058.7);\n    });\n\n    it('returns the correct amount as a whole', () => {\n      const fees = calc.getNotaryFeesForLoan({ loan });\n\n      expect(fees.total).to.equal(55159.1);\n    });\n\n    it('returns the correct amount for a main residence with casatax', () => {\n      loan.residenceType = RESIDENCE_TYPE.MAIN_RESIDENCE;\n\n      const fees = calc.getNotaryFeesForLoan({ loan });\n\n      expect(fees.total).to.equal(31944.1);\n    });\n\n    it('ignores propertyWork', () => {\n      loan.residenceType = RESIDENCE_TYPE.MAIN_RESIDENCE;\n      loan.structure.propertyWork = 100000;\n\n      const fees = calc.getNotaryFeesForLoan({ loan });\n\n      expect(fees.total).to.equal(31944.1);\n    });\n\n    it('caps casatax deductions for very small properties', () => {\n      loan.residenceType = RESIDENCE_TYPE.MAIN_RESIDENCE;\n      loan.structure.property.value = 400000;\n      loan.structure.wantedLoan = 320000;\n\n      const fees = calc.getNotaryFeesForLoan({ loan });\n\n      expect(fees.total).to.equal(9898.16);\n    });\n\n    it('works for large properties', () => {\n      loan.structure.property.value = 3000000;\n      loan.structure.wantedLoan = 2400000;\n      const fees = calc.getNotaryFeesForLoan({ loan });\n\n      expect(fees.total).to.equal(154530.65);\n    });\n\n    it('adds tax on propertyWork', () => {\n      // Test code\n    });\n\n    it('calculates 0 mortgageNoteFees if no mortgageNote is required', () => {\n      loan.structure.mortgageNoteIds = ['asdf'];\n      loan.borrowers[0].mortgageNotes = [{ _id: 'asdf', value: 800000 }];\n\n      const fees = calc.getNotaryFeesForLoan({ loan });\n      expect(fees.mortgageNoteFees.total).to.equal(0);\n    });\n\n    it('calculates fees for a different structure', () => {\n      loan = {\n        structures: [{ id: 'struct2', wantedLoan: 800000, propertyId: 'prop' }],\n        properties: [{ _id: 'prop', value: 1000000 }],\n      };\n\n      const fees = calc.getNotaryFeesForLoan({ loan, structureId: 'struct2' });\n      expect(fees.total).to.equal(55159.1);\n    });\n\n    it('calculates fees for properties with landValue and constructionValue, if it is a construction', () => {\n      loan.purchaseType = PURCHASE_TYPE.CONSTRUCTION;\n      loan.structure.property.value = 0;\n      loan.structure.property.totalValue = 1000000;\n      loan.structure.property.landValue = 400000;\n      loan.structure.property.constructionValue = 400000;\n      loan.structure.property.additionalMargin = 200000;\n\n      const fees = calc.getNotaryFeesForLoan({ loan });\n      expect(fees.buyersContractFees.total).to.equal(28269.5);\n    });\n\n    it('calculates casatax properly for a construction', () => {\n      loan.residenceType = RESIDENCE_TYPE.MAIN_RESIDENCE;\n      loan.purchaseType = PURCHASE_TYPE.CONSTRUCTION;\n      loan.structure.property.value = 0;\n      loan.structure.property.landValue = 400000;\n      loan.structure.property.constructionValue = 650000;\n      loan.structure.property.additionalMargin = 100000;\n\n      const fees = calc.getNotaryFeesForLoan({ loan });\n      expect(fees.buyersContractFees.propertyRegistrationTax).to.equal(fees.deductions.buyersContractDeductions);\n      expect(fees.mortgageNoteFees.mortgageNoteRegistrationTax\n          * GE.MORTGAGE_NOTE_CASATAX_DEDUCTION).to.equal(fees.deductions.mortgageNoteDeductions);\n      expect(fees.buyersContractFees.total).to.equal(27034.85);\n    });\n  });\n\n  describe('VD', () => {\n    before(() => {\n      calc = new NotaryFeesCalculator({ canton: 'VD' });\n    });\n\n    it('returns the correct amounts for a regular loan', () => {\n      const fees = calc.getNotaryFeesForLoan({ loan });\n\n      expect(fees).to.deep.include({\n        total: 44954.25,\n      });\n      expect(fees.buyersContractFees).to.deep.include({\n        total: 38596.38,\n      });\n      expect(fees.mortgageNoteFees).to.deep.include({\n        total: 6357.88,\n      });\n    });\n  });\n\n  describe('unknown cantons', () => {\n    before(() => {\n      calc = new NotaryFeesCalculator({ canton: 'XX' });\n    });\n\n    it(\"returns 5% for cantons where we don't have any Math\", () => {\n      const fees = calc.getNotaryFeesForLoan({ loan });\n\n      expect(fees.total).to.equal(50000);\n    });\n  });\n\n  describe('getNotaryFeesWithoutLoan', () => {\n    it('should work', () => {\n      calc = new NotaryFeesCalculator({ canton: 'GE' });\n\n      const notaryFees = calc.getNotaryFeesWithoutLoan({\n        propertyValue: 1000000,\n        mortgageNoteIncrease: 800000,\n        residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n      });\n\n      expect(notaryFees.total).to.equal(31944.1);\n    });\n\n    it('should work for unknown cantons', () => {\n      calc = new NotaryFeesCalculator({ canton: 'XX' });\n\n      const notaryFees = calc.getNotaryFeesWithoutLoan({\n        propertyValue: 1000000,\n        mortgageNoteIncrease: 800000,\n        residenceType: RESIDENCE_TYPE.MAIN_RESIDENCE,\n      });\n\n      expect(notaryFees.total).to.equal(50000);\n    });\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport degressive from '../degressive';\nimport { VD } from '../cantonConstants';\n\ndescribe('degressive', () => {\n  it('returns 0 for amount of 0', () => {\n    expect(degressive({ amount: 0 })).to.equal(0);\n  });\n\n  it('returns 0 for negative amounts', () => {\n    expect(degressive({ amount: -5 })).to.equal(0);\n  });\n\n  it('returns 0 if no brackets are given', () => {\n    expect(degressive({ amount: 100 })).to.equal(0);\n    expect(degressive({ amount: 100, brackets: [] })).to.equal(0);\n  });\n\n  it('uses single brackets', () => {\n    expect(degressive({ amount: 100, brackets: [{ rate: 0.1, max: 1000 }] })).to.equal(10);\n  });\n\n  it('uses multiple brackets', () => {\n    expect(degressive({\n      amount: 800,\n      brackets: [{ rate: 0.1, max: 500 }, { rate: 0.2, max: 1000 }],\n    })).to.equal(110);\n  });\n\n  it('ignores higher brackets', () => {\n    expect(degressive({\n      amount: 800,\n      brackets: [\n        { rate: 0.1, max: 500 },\n        { rate: 0.2, max: 1000 },\n        { rate: 0.3, max: 1100 },\n      ],\n    })).to.equal(110);\n  });\n\n  it('works with longer tax bracket tables', () => {\n    expect(degressive({\n      amount: 800,\n      brackets: [\n        { rate: 0.1, max: 100 },\n        { rate: 0.2, max: 200 },\n        { rate: 0.3, max: 300 },\n        { rate: 0.4, max: 400 },\n        { rate: 0.5, max: 500 },\n        { rate: 0.6, max: 600 },\n        { rate: 0.7, max: 700 },\n        { rate: 0.8, max: 800 },\n        { rate: 0.9, max: 900 },\n      ],\n    })).to.equal(360);\n  });\n\n  it(\"should throw if tax brackets aren't provided in the right order\", () => {\n    expect(() =>\n      degressive({\n        amount: 100,\n        brackets: [{ rate: 0.1, max: 50 }, { rate: 0.2, max: 30 }],\n      })).to.throw('increasing order');\n  });\n\n  it('should cap the degressive tax if maxTax is given', () => {\n    expect(degressive({\n      amount: 1000,\n      brackets: [{ max: 500, rate: 0.5 }],\n      maxTax: 200,\n    })).to.equal(200);\n  });\n\n  it('should use minTax if provided', () => {\n    expect(degressive({\n      amount: 1000,\n      brackets: [{ max: 500, rate: 0.5 }],\n      minTax: 400,\n    })).to.equal(400);\n  });\n\n  it('should use the last bracket on the remaining amount if it has no max value', () => {\n    expect(degressive({\n      amount: 1000,\n      brackets: [{ rate: 0.1, max: 200 }, { rate: 0.2 }],\n    })).to.equal(180);\n  });\n\n  it('should use minTax if min and max are provided', () => {\n    expect(degressive({\n      amount: 1000,\n      brackets: [{ max: 500, rate: 0.5 }],\n      minTax: 400,\n      maxTax: 1000,\n    })).to.equal(400);\n  });\n\n  it('should use maxTax if min and max are provided', () => {\n    expect(degressive({\n      amount: 1000000,\n      brackets: [{ max: 100000, rate: 0.5 }],\n      minTax: 400,\n      maxTax: 1000,\n    })).to.equal(1000);\n  });\n\n  it('works for this VD example confirmed by a notary', () => {\n    expect(degressive({\n      amount: 940000,\n      brackets: VD.NOTARY_NOTE_BRACKETS,\n    })).to.equal(2585);\n  });\n});\n","import * as cantonConfigs from './cantonConfigs';\nimport Calculator from '../Calculator';\nimport { NOTARY_FEES } from '../../config/financeConstants';\nimport { PURCHASE_TYPE } from '../../api/constants';\n\nconst roundToCents = val => Number(val.toFixed(2));\n\nconst roundObjectKeys = obj =>\n  Object.keys(obj).reduce(\n    (newObj, key) => ({\n      ...newObj,\n      [key]: typeof obj[key] === 'number' ? roundToCents(obj[key]) : obj[key],\n    }),\n    {},\n  );\n\nclass NotaryFeesCalculator {\n  constructor({ canton }) {\n    this.init(canton);\n  }\n\n  init(canton) {\n    const config = cantonConfigs[canton];\n    this.canton = canton;\n\n    Object.assign(this, config);\n  }\n\n  hasDetailedConfig() {\n    return cantonConfigs[this.canton];\n  }\n\n  shouldUseConstructionMath({ loan, structureId }) {\n    const hasDetailedValue = Calculator.hasDetailedPropertyValue({\n      loan,\n      structureId,\n    });\n    const shouldUseConstructionNotaryFees = Calculator.shouldUseConstructionNotaryFees({ loan, structureId });\n\n    return hasDetailedValue && shouldUseConstructionNotaryFees;\n  }\n\n  getNotaryFeesForLoan({ loan, structureId }) {\n    const propertyValue = Calculator.selectPropertyValue({ loan, structureId });\n\n    if (!this.hasDetailedConfig()) {\n      return this.getDefaultFees({ propertyValue });\n    }\n\n    const { residenceType } = loan;\n\n    const mortgageNoteIncrease = Calculator.getMortgageNoteIncrease({\n      loan,\n      structureId,\n    });\n\n    // Acte d'achat\n    const buyersContractFees = this.buyersContractFees({ loan, structureId });\n\n    // Cédule hypothécaire\n    const mortgageNoteFees = this.mortgageNoteFees({ mortgageNoteIncrease });\n\n    // Déductions\n    const deductions = this.getDeductions({\n      propertyValue,\n      mortgageNoteFees,\n      residenceType,\n      mortgageNoteIncrease,\n      propertyTransferTax: buyersContractFees.propertyRegistrationTax,\n    });\n\n    const roundedResult = roundObjectKeys({\n      total:\n        buyersContractFees.total + mortgageNoteFees.total - deductions.total,\n      buyersContractFees: roundObjectKeys(buyersContractFees),\n      mortgageNoteFees: roundObjectKeys(mortgageNoteFees),\n      deductions: roundObjectKeys(deductions),\n      canton: this.canton,\n      estimate: false,\n    });\n\n    return roundedResult;\n  }\n\n  getNotaryFeesWithoutLoan({\n    propertyValue,\n    mortgageNoteIncrease,\n    residenceType,\n  }) {\n    if (!this.hasDetailedConfig()) {\n      return this.getDefaultFees({ propertyValue });\n    }\n\n    // Acte d'achat\n    const buyersContractFees = this.buyersContractFeesAcquisition({\n      propertyValue,\n    });\n\n    // Cédule hypothécaire\n    const mortgageNoteFees = this.mortgageNoteFees({ mortgageNoteIncrease });\n\n    // Déductions\n    const deductions = this.getDeductions({\n      propertyValue,\n      mortgageNoteIncrease,\n      residenceType,\n      propertyTransferTax: this.propertyRegistrationTax({ propertyValue }),\n    });\n\n    const roundedResult = roundObjectKeys({\n      total:\n        buyersContractFees.total + mortgageNoteFees.total - deductions.total,\n      buyersContractFees: roundObjectKeys(buyersContractFees),\n      mortgageNoteFees: roundObjectKeys(mortgageNoteFees),\n      deductions: roundObjectKeys(deductions),\n      canton: this.canton,\n      estimate: false,\n    });\n\n    return roundedResult;\n  }\n\n  buyersContractFees({ loan, structureId }) {\n    if (loan.purchaseType === PURCHASE_TYPE.REFINANCING) {\n      return { total: 0 };\n    }\n\n    if (this.shouldUseConstructionMath({ loan, structureId })) {\n      const {\n        landValue = 0,\n        constructionValue = 0,\n        additionalMargin = 0,\n      } = Calculator.selectProperty({ loan, structureId });\n      return this.buyersContractFeesConstruction({\n        landValue,\n        constructionValue,\n        additionalMargin,\n      });\n    }\n\n    const propertyValue = Calculator.selectPropertyValue({ loan, structureId });\n    return this.buyersContractFeesAcquisition({ propertyValue });\n  }\n\n  buyersContractFeesAcquisition({ propertyValue }) {\n    // Frais d'enregistrement/Droits de mutation\n    const propertyRegistrationTax = this.propertyRegistrationTax({\n      propertyValue,\n    });\n    // Emoluments du notaire\n    const notaryIncomeFromProperty = this.notaryIncomeFromProperty({\n      propertyValue,\n    });\n    // Registre foncier\n    const landRegistryPropertyTax = this.landRegistryPropertyTax({\n      propertyValue,\n    });\n    // Frais du notaire additionnels estimés\n    const additionalFees = this.additionalFees();\n\n    return {\n      total:\n        propertyRegistrationTax\n        + notaryIncomeFromProperty\n        + landRegistryPropertyTax\n        + additionalFees,\n      propertyRegistrationTax,\n      landRegistryPropertyTax,\n      notaryIncomeFromProperty,\n      additionalFees,\n    };\n  }\n\n  buyersContractFeesConstruction({\n    landValue,\n    constructionValue,\n    additionalMargin,\n  }) {\n    // Frais d'enregistrement/Droits de mutation\n    const propertyRegistrationTax = this.propertyRegistrationTax({\n      propertyValue: landValue + additionalMargin,\n    });\n\n    // Emoluments du notaire\n    const notaryIncomeFromProperty = this.notaryIncomeFromProperty({\n      propertyValue: landValue + additionalMargin,\n    });\n\n    // Registre foncier\n    const landRegistryPropertyTax = this.landRegistryPropertyTax({\n      propertyValue: landValue + additionalMargin,\n    });\n\n    // Contrat de construction\n    const propertyConstructionTax = this.propertyConstructionTax({\n      constructionValue,\n    });\n\n    // Frais du notaire additionnels estimés\n    const additionalFees = this.additionalFees();\n\n    return {\n      total:\n        propertyRegistrationTax\n        + notaryIncomeFromProperty\n        + landRegistryPropertyTax\n        + propertyConstructionTax\n        + additionalFees,\n      propertyRegistrationTax,\n      propertyConstructionTax,\n      landRegistryPropertyTax,\n      notaryIncomeFromProperty,\n      additionalFees,\n    };\n  }\n\n  mortgageNoteFees({ mortgageNoteIncrease }) {\n    // Frais d'enregistrement\n    const mortgageNoteRegistrationTax = this.mortgageNoteRegistrationTax({\n      mortgageNoteIncrease,\n    });\n    // Emoluments du notaire\n    const notaryIncomeFromMortgageNote = this.notaryIncomeFromMortgageNote({\n      mortgageNoteIncrease,\n    });\n    // Registre foncier\n    const landRegistryMortgageNoteTax = this.landRegistryMortgageNoteTax({\n      mortgageNoteIncrease,\n    });\n    // Frais du notaire additionnels estimés\n    // Nuls si aucune cédule nécessaire\n    const additionalFees = mortgageNoteIncrease > 0 ? this.additionalFees() : 0;\n\n    return {\n      total:\n        mortgageNoteRegistrationTax\n        + landRegistryMortgageNoteTax\n        + notaryIncomeFromMortgageNote\n        + additionalFees,\n      mortgageNoteRegistrationTax,\n      landRegistryMortgageNoteTax,\n      notaryIncomeFromMortgageNote,\n      additionalFees,\n    };\n  }\n\n  getDeductions({\n    propertyValue,\n    mortgageNoteIncrease,\n    residenceType,\n    propertyTransferTax,\n  }) {\n    const buyersContractDeductions = this.buyersContractDeductions\n      ? this.buyersContractDeductions({\n        residenceType,\n        propertyValue,\n        transferTax: propertyTransferTax,\n      })\n      : 0;\n\n    const mortgageNoteDeductions = this.mortgageNoteDeductions\n      ? this.mortgageNoteDeductions({\n        residenceType,\n        propertyValue,\n        mortgageNoteRegistrationTax: this.mortgageNoteRegistrationTax({\n          mortgageNoteIncrease,\n        }),\n      })\n      : 0;\n\n    return {\n      buyersContractDeductions,\n      mortgageNoteDeductions,\n      total: buyersContractDeductions + mortgageNoteDeductions,\n    };\n  }\n\n  getDefaultFees({ propertyValue }) {\n    return {\n      total: propertyValue * NOTARY_FEES,\n      canton: this.canton,\n      estimate: true,\n    };\n  }\n}\n\nexport default NotaryFeesCalculator;\n","import { RESIDENCE_TYPE } from 'core/api/constants';\nimport degressive from './degressive';\nimport * as cantons from './cantonConstants';\nimport { VAT } from '../../config/financeConstants';\n\nconst isCasatax = ({ residenceType, propertyValue }) =>\n  residenceType === RESIDENCE_TYPE.MAIN_RESIDENCE\n  && propertyValue <= cantons.GE.CASATAX_CUTOFF;\n\nexport const GE = {\n  notaryIncomeFromProperty: ({ propertyValue }) =>\n    degressive({\n      amount: propertyValue,\n      brackets: cantons.GE.NOTARY_PROPERTY_BRACKETS,\n      minTax: cantons.GE.NOTARY_PROPERTY_BRACKETS_MIN,\n    })\n    * (1 + VAT),\n  notaryIncomeFromMortgageNote: ({ mortgageNoteIncrease }) =>\n    degressive({\n      amount: mortgageNoteIncrease,\n      brackets: cantons.GE.NOTARY_NOTE_BRACKETS,\n    })\n    * (1 + VAT),\n  propertyConstructionTax: ({ constructionValue }) =>\n    constructionValue * cantons.GE.PROPERTY_CONSTRUCTION_TAX,\n  propertyRegistrationTax: ({ propertyValue }) =>\n    propertyValue * cantons.GE.PROPERTY_REGISTRATION_TAX,\n  landRegistryPropertyTax: ({ propertyValue }) =>\n    propertyValue * cantons.GE.LAND_REGISTRY_PROPERTY_TAX,\n  mortgageNoteRegistrationTax: ({ mortgageNoteIncrease }) =>\n    mortgageNoteIncrease * cantons.GE.MORTGAGE_NOTE_REGISTRATION_TAX,\n  landRegistryMortgageNoteTax: ({ mortgageNoteIncrease }) =>\n    mortgageNoteIncrease * cantons.GE.LAND_REGISTRY_MORTGAGE_NOTE_TAX,\n  buyersContractDeductions: ({ residenceType, propertyValue, transferTax }) =>\n    (isCasatax({ residenceType, propertyValue })\n      ? Math.min(cantons.GE.CASATAX_PROPERTY_DEDUCTION, transferTax)\n      : 0),\n  additionalFees: () => cantons.GE.ADDITIONAL_FEES,\n  mortgageNoteDeductions: ({\n    residenceType,\n    propertyValue,\n    mortgageNoteRegistrationTax,\n  }) =>\n    (isCasatax({ residenceType, propertyValue })\n      ? mortgageNoteRegistrationTax * cantons.GE.MORTGAGE_NOTE_CASATAX_DEDUCTION\n      : 0),\n};\n\nexport const VD = {\n  notaryIncomeFromProperty: ({ propertyValue }) =>\n    degressive({\n      amount: propertyValue,\n      brackets: cantons.VD.NOTARY_PROPERTY_BRACKETS,\n      minTax: cantons.VD.NOTARY_PROPERTY_BRACKETS_MIN,\n    })\n    * (1 + VAT),\n  propertyConstructionTax: () => 0, // TODO\n  notaryIncomeFromMortgageNote: ({ mortgageNoteIncrease }) =>\n    degressive({\n      amount: mortgageNoteIncrease,\n      brackets: cantons.VD.NOTARY_NOTE_BRACKETS,\n    })\n    * (1 + VAT),\n  propertyRegistrationTax: ({ propertyValue }) =>\n    propertyValue * cantons.VD.PROPERTY_REGISTRATION_TAX,\n  landRegistryPropertyTax: ({ propertyValue }) =>\n    propertyValue * cantons.VD.LAND_REGISTRY_PROPERTY_TAX,\n  mortgageNoteRegistrationTax: ({ mortgageNoteIncrease }) => 0,\n  landRegistryMortgageNoteTax: ({ mortgageNoteIncrease }) =>\n    mortgageNoteIncrease * cantons.VD.LAND_REGISTRY_MORTGAGE_NOTE_TAX,\n  additionalFees: () => cantons.VD.ADDITIONAL_FEES,\n};\n","// Rates and sources are documented in this google doc:\n// https://docs.google.com/document/d/1EF373nmAZ7dZB22NELh-ffaaOwYkFCuTeQ5JrST5wUg\n\nexport const GE = {\n  PROPERTY_REGISTRATION_TAX: 0.03,\n  NOTARY_PROPERTY_BRACKETS_MIN: 200,\n  NOTARY_PROPERTY_BRACKETS: [\n    { rate: 0.007, max: 200000 },\n    { rate: 0.006, max: 400000 },\n    { rate: 0.0045, max: 800000 },\n    { rate: 0.004, max: 1000000 },\n    { rate: 0.0035, max: 1500000 },\n    { rate: 0.003, max: 2000000 },\n    { rate: 0.0025, max: 3500000 },\n    { rate: 0.002, max: 5000000 },\n    { rate: 0.0015, max: 7500000 },\n    { rate: 0.001, max: 10000000 },\n    { rate: 0.00075, max: 20000000 },\n    { rate: 0.0005 },\n  ],\n  NOTARY_NOTE_BRACKETS_MIN: 100,\n  NOTARY_NOTE_BRACKETS: [\n    { rate: 0.005, max: 200000 },\n    { rate: 0.004, max: 500000 },\n    { rate: 0.003, max: 2000000 },\n    { rate: 0.002, max: 5000000 },\n    { rate: 0.001 },\n  ],\n  MORTGAGE_NOTE_REGISTRATION_TAX: 0.01365,\n  LAND_REGISTRY_PROPERTY_TAX: 0.0025,\n  LAND_REGISTRY_MORTGAGE_NOTE_TAX: 0.001,\n  ADDITIONAL_FEES: 1000,\n  CASATAX_CUTOFF: 1183649,\n  CASATAX_PROPERTY_DEDUCTION: 17755,\n  PROPERTY_CONSTRUCTION_TAX: 0.01,\n  MORTGAGE_NOTE_CASATAX_DEDUCTION: 0.5,\n};\n\nexport const VD = {\n  PROPERTY_REGISTRATION_TAX: 0.033,\n  NOTARY_PROPERTY_BRACKETS_MIN: 300,\n  NOTARY_PROPERTY_BRACKETS: [\n    { rate: 0.007, max: 100000 },\n    { rate: 0.004, max: 300000 },\n    { rate: 0.0025, max: 500000 },\n    { rate: 0.002, max: 750000 },\n    { rate: 0.0015, max: 2500000 },\n    { rate: 0.001, max: 10000000 },\n    { rate: 0.0005, max: 20000000 },\n    { rate: 0.00025 },\n  ],\n  NOTARY_NOTE_BRACKETS_MIN: 100,\n  NOTARY_NOTE_BRACKETS: [\n    { rate: 0.005, max: 100000 },\n    { rate: 0.0035, max: 300000 },\n    { rate: 0.003, max: 500000 },\n    { rate: 0.002, max: 750000 },\n    { rate: 0.0015, max: 1000000 },\n    { rate: 0.001, max: 5000000 },\n    { rate: 0.0005, max: 10000000 },\n    { rate: 0.00025, max: 20000000 },\n    { rate: 0.000125 },\n  ],\n  LAND_REGISTRY_PROPERTY_TAX: 0.0015,\n  LAND_REGISTRY_MORTGAGE_NOTE_TAX: 0.0035,\n  ADDITIONAL_FEES: 1000,\n};\n\n// TODO: Complete\nexport const VS = {\n  TRANSFER_TAX: 0.0225,\n  NOTARY_PROPERTY_BRACKETS_MIN: 200,\n  NOTARY_PROPERTY_BRACKETS: [\n    { rate: 0.005, max: 200000 },\n    { rate: 0.004, max: 500000 },\n    { rate: 0.003, max: 1000000 },\n    { rate: 0.002, max: 10000000 },\n    { rate: 0.001 },\n  ],\n  NOTARY_NOTE_BRACKETS_MIN: 200,\n  NOTARY_NOTE_BRACKETS: [\n    { rate: 0.005, max: 100000 },\n    { rate: 0.004, max: 200000 },\n    { rate: 0.003, max: 500000 },\n    { rate: 0.002, max: 1000000 },\n    { rate: 0.001 },\n  ],\n};\n\n// TODO: Complete\nexport const FR = {\n  TRANSFER_TAX: 0.03,\n};\n","// @flow\n\nconst INFINITY = 100000000000000;\n\ntype degressiveArgs = {\n  amount: number,\n  brackets: Array<{ rate: number, max: number }>,\n  maxTax?: number,\n  minTax?: number,\n};\n\n// Calculates the degressive tax on an amount, based on brackets with varying rates\nconst degressive = ({\n  amount,\n  brackets = [],\n  maxTax,\n  minTax,\n}: degressiveArgs): number => {\n  if (amount <= 0) {\n    return 0;\n  }\n\n  let tax = 0;\n\n  brackets.every(({ max = INFINITY, rate }, index, allBrackets) => {\n    let previousBracket = { rate: 0, max: 0 };\n    if (index > 0) {\n      previousBracket = allBrackets[index - 1];\n    }\n\n    if (max < previousBracket.max) {\n      throw new Error(`Tax brackets should come in increasing order, but found ${\n        previousBracket.max\n      } -> ${max}`);\n    }\n\n    const bracketTax = Math.min(amount - previousBracket.max, max - previousBracket.max) * rate;\n\n    tax += bracketTax;\n\n    // Stop calculating once you've reached the highest bracket you're in\n    return max <= amount;\n  });\n\n  if (maxTax) {\n    tax = Math.min(tax, maxTax);\n  }\n\n  if (minTax) {\n    tax = Math.max(tax, minTax);\n  }\n\n  return tax;\n};\n\nexport default degressive;\n","export { default as NotaryFeesCalculator } from './NotaryFeesCalculator';\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { formatPhoneNumber } from '..';\n\ndescribe('formatPhoneNumber', () => {\n  it('formats a swiss number', () => {\n    expect(formatPhoneNumber('225660110')).to.equal('+41 22 566 01 10');\n    expect(formatPhoneNumber('00412332')).to.equal('+41 2332');\n    expect(formatPhoneNumber('22/566/01/10')).to.equal('+41 22 566 01 10');\n    expect(formatPhoneNumber('22.566.01.10')).to.equal('+41 22 566 01 10');\n  });\n\n  it('does not format an incomplete swiss number', () => {\n    expect(formatPhoneNumber('1')).to.equal('1');\n    expect(formatPhoneNumber('12')).to.equal('+41 12');\n    expect(formatPhoneNumber('22566011')).to.equal('+41 22566011');\n  });\n\n  it('formats foreign numbers properly', () => {\n    expect(formatPhoneNumber('+33645781457')).to.equal('+33 6 45 78 14 57');\n  });\n});\n","import { parsePhoneNumberFromString } from 'libphonenumber-js/max';\n\nexport const formatPhoneNumber = (string) => {\n  const phoneNumber = parsePhoneNumberFromString(string, 'CH');\n\n  if (!phoneNumber) {\n    // Couldn't parse a phone number from the string\n    return string;\n  }\n\n  const intl = phoneNumber.formatInternational();\n\n  return intl;\n};\n\nconst modifyDoc = (doc, fieldName, currentValue, customFunc) => {\n  if (customFunc) {\n    doc[fieldName] = customFunc(currentValue);\n  } else if (Array.isArray(currentValue)) {\n    doc[fieldName] = currentValue.map(formatPhoneNumber);\n  } else {\n    doc[fieldName] = formatPhoneNumber(currentValue);\n  }\n};\n\nconst formatNumbersHook = (collection, fieldName, customFunc) => {\n  collection.before.update((userId, doc, fieldNames, modifier) => {\n    if (fieldNames.includes(fieldName)) {\n      const updatedValue = modifier.$set[fieldName];\n      modifyDoc(modifier.$set, fieldName, updatedValue, customFunc);\n    }\n  });\n\n  collection.before.insert((userId, doc) => {\n    const insertedValue = doc[fieldName];\n    if (insertedValue) {\n      modifyDoc(doc, fieldName, insertedValue, customFunc);\n    }\n  });\n};\n\nexport default formatNumbersHook;\n","/* eslint-env mocha */\nimport { expect } from 'chai';\nimport { Meteor } from 'meteor/meteor';\nimport { resetDatabase } from 'meteor/xolvio:cleaner';\n\nimport dummyFunc from 'core/utils/testHelpers/wallaby/wallabyDummy';\n\ndescribe('Wallaby examples', () => {\n  it('should work', () => {\n    expect(1 + 1).to.equal(2);\n    expect(true).to.not.equal(false);\n  });\n\n  it('should set the IS_WALLABY global variable', () => {\n    if (global.IS_WALLABY) {\n      expect(global.IS_WALLABY).to.equal(true);\n    }\n  });\n\n  it('should mock meteor packages', () => {\n    if (global.IS_WALLABY) {\n      expect(Meteor.userId()).to.equal('userId');\n    }\n  });\n\n  it('should import from core properly with stubbed packages', () => {\n    if (global.IS_WALLABY) {\n      expect(dummyFunc()).to.equal(resetDatabase());\n    }\n  });\n});\n","import { resetDatabase } from 'meteor/xolvio:cleaner';\n\nexport default () => resetDatabase();\n","import defaultEnzyme, {\n  configure,\n  mount as defaultMount,\n  shallow as defaultShallow,\n} from 'enzyme';\nimport Adapter from 'enzyme-adapter-react-16';\n\nconfigure({ adapter: new Adapter() });\n\n// Avoid weird wallaby bug, inspired from here\n// https://github.com/wallabyjs/public/issues/1487\nif (global.IS_WALLABY) {\n  global.HTMLInputElement = () => {};\n}\n\nexport default defaultEnzyme;\nexport const mount = defaultMount;\nexport const shallow = defaultShallow;\n","import { Factory } from 'meteor/dburles:factory';\nimport Tasks from '../../api/tasks/tasks';\n\nexport const generateData = (overrides = {}) => {\n  const user = Factory.create('user', { ...overrides.user });\n  const admin = Factory.create('admin', { ...overrides.admin });\n  const borrower = Factory.create('borrower', {\n    userId: user._id,\n    ...overrides.borrowers,\n  });\n  const property = Factory.create('property', {\n    userId: user._id,\n    ...overrides.property,\n  });\n  const loan = Factory.create('loan', {\n    userId: user._id,\n    propertyIds: [property._id],\n    borrowerIds: [borrower._id],\n    ...overrides.loan,\n  });\n  const offer = Factory.create('offer', {\n    loanId: loan._id,\n    ...overrides.offers,\n  });\n\n  return {\n    loan,\n    user,\n    admin,\n    borrowers: [borrower],\n    property,\n    offers: [offer],\n  };\n};\n","import { Meteor } from 'meteor/meteor';\n\nimport React from 'react';\nimport { MemoryRouter } from 'react-router-dom';\nimport { IntlProvider, intlShape } from 'react-intl';\n\nimport { mount } from './enzyme';\nimport { getUserLocale, getFormats } from '../localization';\nimport messages from '../../lang/fr.json';\n\n// Mounts a component for testing, and wraps it around everything it needs\nconst customMount = ({ Component, props = {}, withRouter, withStore }) => {\n  const customMountData = {};\n  const intlProvider = new IntlProvider({\n    locale: getUserLocale(),\n    messages,\n    formats: getFormats(),\n    defaultLocale: 'fr',\n  });\n  const { intl } = intlProvider.getChildContext();\n\n  let testComponent = <Component {...props} />;\n\n  if (withRouter) {\n    testComponent = (\n      <MemoryRouter>\n        {React.cloneElement(testComponent, {\n          history: { location: { pathname: '' } },\n        })}\n      </MemoryRouter>\n    );\n  }\n\n  if (withStore) {\n    const configureStore = require('redux-mock-store').default;\n    const { Provider } = require('react-redux');\n    const mockStore = configureStore();\n    const initialState = withStore;\n    const store = mockStore(initialState);\n    testComponent = <Provider store={store}>{testComponent}</Provider>;\n    customMountData.store = store;\n  }\n\n  return {\n    mountedComponent: mount(testComponent, {\n      context: { intl },\n      childContextTypes: { intl: intlShape },\n    }),\n    customMountData,\n  };\n};\n\n/**\n * getMountedComponent - Returns a mounted component with all the required\n * wrappers for testing\n *\n * @param {object} Component  A React component\n * @param {object} props      optional props to be passed into the component\n * @param {boolean} withRouter Wraps the component with a mocked router if this\n * component uses any of the react-router-dom components, like Link or NavLink\n *\n * @return {object} A mounted component, ready for testing with Enzyme\n */\nconst getMountedComponent = ({ Component, props, withRouter, withStore }) => {\n  if (!getMountedComponent.mountedComponent) {\n    const { mountedComponent, customMountData } = customMount({\n      Component,\n      props,\n      withRouter,\n      withStore,\n    });\n    getMountedComponent.getData = () => customMountData;\n    getMountedComponent.mountedComponent = mountedComponent;\n  }\n  return getMountedComponent.mountedComponent;\n};\n\n/**\n * Unknown - Resets the component, to be called in beforeEach hooks\n *\n * @return {type} undefined\n */\ngetMountedComponent.reset = () => {\n  getMountedComponent.mountedComponent = undefined;\n  if (Meteor.isServer) {\n    global.document = undefined;\n    global.window = undefined;\n    const jsdom = require('jsdom');\n    const { JSDOM } = jsdom;\n    const { document } = new JSDOM('<!doctype html><html><body></body></html>').window;\n    global.document = document;\n    global.window = document.defaultView;\n    // Do this to avoid an annoying bug resulting of the mix of jsdom and kadira\n    // https://github.com/kadirahq/node-eventloop-monitor/blob/master/lib/index.js:73\n    // https://github.com/jsdom/jsdom/blob/master/lib/jsdom/living/hr-time/Performance-impl.js:13\n    global.window.performance.now = () => {};\n  }\n};\n\nexport default getMountedComponent;\n","export * from './testHelpers';\nexport * from './generateData';\nexport { default as getMountedComponent } from './getMountedComponent';\nexport * from './enzyme';\n","import { Meteor } from 'meteor/meteor';\nimport { Random } from 'meteor/random';\nimport { Accounts } from 'meteor/accounts-base';\n\nimport faker from 'faker';\nimport { expect } from 'chai';\n\nimport { Users, testUserAccount } from '../../api';\nimport { ROLES } from '../../api/constants';\n\n/**\n * createLoginToken - Generate & saves a login token on the user with the given id\n *\n * @param {string} userId  A Meteor user id\n *\n * @return {string} the generated login token\n */\nexport const createLoginToken = (userId) => {\n  const loginToken = Random.id();\n  const hashedToken = Accounts._hashLoginToken(loginToken);\n\n  Users.update(userId, {\n    $set: {\n      'services.resume.loginTokens': [{ hashedToken }],\n    },\n  });\n\n  return loginToken;\n};\n\n/**\n * createEmailVerificationToken - Generate & saves a email verification token on the user with the given id\n *\n * @param {string} userId  A Meteor user id\n * @param {string} email  The email to be verified\n *\n * @return {string} the generated token\n */\nexport const createEmailVerificationToken = (userId, email) => {\n  const token = Random.id();\n\n  Users.update(\n    { _id: userId },\n    {\n      $push: {\n        'services.email.verificationTokens': {\n          // token has to be uniq in the Users collection\n          token,\n          address: email,\n          when: new Date(),\n        },\n      },\n    },\n  );\n\n  return token;\n};\n\nexport const userLogin = ({ email, password, role }) => {\n  const userEmail = email || faker.internet.email();\n  const userPassword = password || faker.random.word();\n\n  if (Meteor.isServer) {\n    const user = testUserAccount.run({\n      email: userEmail,\n      password: userPassword,\n      role: role || ROLES.USER,\n    });\n    Meteor.loginWithPassword({ id: user._id }, userPassword);\n    return Promise.resolve(user);\n  }\n\n  if (Meteor.isClient) {\n    return testUserAccount\n      .run({\n        email: userEmail,\n        password: userPassword,\n        role: role || ROLES.USER,\n      })\n      .then(user =>\n        new Promise((resolve, reject) => {\n          Meteor.loginWithPassword({ id: user._id }, userPassword, err =>\n            (err ? reject(err) : resolve(user)));\n        }));\n  }\n};\n\nexport const checkEmails = (expected, options = {}) =>\n  new Promise((resolve, reject) => {\n    Meteor.call('getAllTestEmails', { expected, ...options }, (err, emails) => {\n      if (err) {\n        reject(err);\n      }\n\n      try {\n        // getAllTestEmails returns when at least `expected` emails are found\n        // So it could be more. Make sure we always get exactly what we expect\n        if (expected && !options.noExpect) {\n          expect(emails.length).to.equal(expected);\n        }\n      } catch (error) {\n        reject(error);\n      }\n\n      resolve(emails);\n    });\n  });\n\nexport const resetDatabase = () =>\n  new Promise((resolve, reject) => {\n    Meteor.call('resetDatabase', (err, res) =>\n      (err ? reject(err) : resolve(res)));\n  });\n","export * from './localization';\n","// This file is shared between client and server to allow server-side tests to have access to it\n\nimport { addLocaleData } from 'react-intl';\nimport moment from 'moment';\nimport fr from 'react-intl/locale-data/fr';\nimport translateSimpleSchema from './simpleSchemaLocalization';\nimport Intl from '../intl';\n\nexport const getUserLocale = () => 'fr-CH';\n\nexport const getFormats = () => ({\n  number: {\n    money: {\n      style: 'currency',\n      currency: 'CHF',\n      maximumFractionDigits: 0,\n      minimumFractionDigits: 0,\n    },\n    moneyWithoutCurrency: {\n      style: 'decimal',\n      useGrouping: true,\n      maximumFractionDigits: 0,\n      minimumFractionDigits: 0,\n    },\n    percentage: {\n      style: 'percent',\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2,\n    },\n    percentageRounded: {\n      style: 'percent',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    },\n  },\n});\n\nconst setupMoment = () => {\n  moment.locale('fr', {\n    months: 'Janvier_Février_Mars_Avril_Mai_Juin_Juillet_Août_Septembre_Octobre_Novembre_Décembre'.split('_'),\n    monthsShort: 'Janv._Févr._Mars_Avr._Mai_Juin_Juil._Août_Sept._Oct._Nov._Déc.'.split('_'),\n    monthsParseExact: true,\n    weekdays: 'Dimanche_Lundi_Mardi_Mercredi_Jeudi_Vendredi_Samedi'.split('_'),\n    weekdaysShort: 'Dim._Lun._Mar._Mer._Jeu._Ven._Sam.'.split('_'),\n    weekdaysMin: 'Di_Lu_Ma_Me_Je_Ve_Sa'.split('_'),\n    weekdaysParseExact: true,\n    longDateFormat: {\n      LT: 'HH:mm',\n      LTS: 'HH:mm:ss',\n      L: 'DD/MM/YYYY',\n      LL: 'D MMMM YYYY',\n      LLL: 'D MMMM YYYY HH:mm',\n      LLLL: 'dddd D MMMM YYYY HH:mm',\n    },\n    calendar: {\n      sameDay: '[Aujourd’hui à] LT',\n      nextDay: '[Demain à] LT',\n      nextWeek: 'dddd [à] LT',\n      lastDay: '[Hier à] LT',\n      lastWeek: 'dddd [dernier à] LT',\n      sameElse: 'L',\n    },\n    relativeTime: {\n      future: 'dans %s',\n      past: 'il y a %s',\n      s: 'qq secs',\n      m: '1m',\n      mm: '%dm',\n      h: '1h',\n      hh: '%dh',\n      d: '1j',\n      dd: '%dj',\n      M: '1 mois',\n      MM: '%d mois',\n      y: '1 an',\n      yy: '%d ans',\n    },\n    dayOfMonthOrdinalParse: /\\d{1,2}(er|e)/,\n    ordinal(number) {\n      return number + (number === 1 ? 'er' : 'e');\n    },\n    meridiemParse: /PD|MD/,\n    isPM(input) {\n      return input.charAt(0) === 'M';\n    },\n    // In case the meridiem units are not separated around 12, then implement\n    // this function (look at locale/id.js for an example).\n    // meridiemHour : function (hour, meridiem) {\n    //     return /* 0-23 hour, given meridiem token and hour 1-12 */ ;\n    // },\n    meridiem(hours, minutes, isLower) {\n      return hours < 12 ? 'PD' : 'MD';\n    },\n    week: {\n      dow: 1, // Monday is the first day of the week.\n      doy: 4, // The week that contains Jan 4th is the first week of the year.\n    },\n  });\n};\n\nexport const localizationStartup = ({\n  setupAccounts = true,\n  messages,\n} = {}) => {\n  // Add locales used in app here\n  Intl.init(messages);\n  addLocaleData(fr);\n  setupMoment();\n  moment.locale('fr');\n  translateSimpleSchema();\n\n  if (setupAccounts) {\n    const { T9n } = require('meteor-accounts-t9n');\n    const { fr: accountsFr } = require('meteor-accounts-t9n/build/fr');\n    T9n.map('fr', accountsFr);\n    T9n.setLanguage('fr');\n  }\n};\n","import SimpleSchema from 'simpl-schema';\nimport Intl from '../intl';\n\nconst translate = ({ key }) => {\n  // Turns a key called \"expenses.0.value\" into \"expenses.value\"\n  const keyWithoutNumbers = key\n    .split('.')\n    .filter(subKey => subKey.length !== 1)\n    .join('.');\n  return Intl.formatMessage({ id: `Forms.${keyWithoutNumbers}` });\n};\n\nconst translateSimpleSchema = () => {\n  SimpleSchema.setDefaultMessages({\n    initialLanguage: 'fr',\n    messages: {\n      fr: {\n        // Can also use \"name\"\n        required: args => `${translate(args)} est requis`,\n        minString: args =>\n          `${translate(args)} doit faire au minimum ${args.min} caractères`,\n        maxString: args =>\n          `${translate(args)} peut faire au maximum ${args.max} caractères`,\n        minNumber: args => `${translate(args)} doit être au moins ${args.min}`,\n        maxNumber: args =>\n          `${translate(args)} ne peut pas dépasser ${args.max}`,\n        minNumberExclusive: args =>\n          `${translate(args)} doit être plus grand que ${args.min}`,\n        maxNumberExclusive: args =>\n          `${translate(args)} doit être plus petit que ${args.max}`,\n        minDate: args =>\n          `${translate(args)} doit être au plus tôt le ${args.min}`,\n        maxDate: args =>\n          `${translate(args)} doit être au plus tard le ${args.max}`,\n        badDate: args => `${translate(args)} n'est pas une date valide`,\n        minCount: ({ minCount }) =>\n          `Vous devez ajouter au moins ${minCount} valeurs`,\n        maxCount: ({ maxCount }) =>\n          `Vous devez choisir moins de ${maxCount} valeurs`,\n        noDecimal: args => `${translate(args)} doit être un nombre entier`,\n        notAllowed: ({ value }) => `${value} n'est pas valide`,\n        expectedType: args =>\n          `${translate(args)} doit être un ${args.dataType}`,\n        regEx({ label, regExp }) {\n          switch (regExp) {\n          case SimpleSchema.RegEx.Email:\n          case SimpleSchema.RegEx.WeakEmail:\n            return 'Cette adresse e-mail est incorrecte';\n          default:\n            return \"Le format n'est pas valide\";\n          }\n        },\n      },\n    },\n  });\n};\n\nexport default translateSimpleSchema;\n","// @flow\n\nconst inputHasChanged = (next, prev) =>\n  next.some((newInput, index) => newInput !== prev[index]);\n\nexport default function areInputsEqual(\n  newInputs: mixed[],\n  lastInputs: mixed[],\n) {\n  // no checks needed if the inputs length has changed\n  if (newInputs.length !== lastInputs.length) {\n    return false;\n  }\n\n  // Handle memoization for functions with 1 argument which is an object\n  if (\n    newInputs.length === 1\n    && typeof newInputs[0] === 'object'\n    && typeof lastInputs[0] === 'object'\n    && newInputs[0] !== null\n    && lastInputs[0] !== null\n  ) {\n    const newArgs = Object.values(newInputs[0]);\n    const lastArgs = Object.values(lastInputs[0]);\n\n    if (newArgs.length !== lastArgs.length) {\n      return false;\n    }\n\n    const oneInputHasChanged = inputHasChanged(newArgs, lastArgs);\n    return !oneInputHasChanged;\n  }\n\n  const oneInputHasChanged = inputHasChanged(newInputs, lastInputs);\n  return !oneInputHasChanged;\n}\n","export { default } from './memoizeOne';\nexport * from './memoizeOne';\n","// @flow\nimport areInputsEqual from './areInputsEqual';\n\nexport type EqualityFn = (newArgs: mixed[], lastArgs: mixed[]) => boolean;\n\n// <ResultFn: (...any[]) => mixed>\n// The purpose of this typing is to ensure that the returned memoized\n// function has the same type as the provided function (`resultFn`).\n// ResultFn:        Generic type (which is the same as the resultFn).\n// (...any[]): Accepts any length of arguments - and they are not checked\n// mixed:           The result can be anything but needs to be checked before usage\nconst memoizeOne = function<ResultFn: (\n...any[]) => mixed>(\n  resultFn: ResultFn,\n  isEqual?: EqualityFn = areInputsEqual,\n): ResultFn {\n  let lastThis: mixed;\n  let lastArgs: mixed[] = [];\n  let lastResult: mixed;\n  let calledOnce: boolean = false;\n\n  // breaking cache when context (this) or arguments change\n  const result = function (...newArgs: mixed[]) {\n    if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {\n      return lastResult;\n    }\n\n    // Throwing during an assignment aborts the assignment: https://codepen.io/alexreardon/pen/RYKoaz\n    // Doing the lastResult assignment first so that if it throws\n    // nothing will be overwritten\n    lastResult = resultFn.apply(this, newArgs);\n    calledOnce = true;\n    lastThis = this;\n    lastArgs = newArgs;\n    return lastResult;\n  };\n\n  return (result: any);\n};\n\nexport default memoizeOne;\n","/* eslint-env mocha */\nimport { expect } from 'chai';\nimport { getLocations } from '../APIs';\n\n// FIXME: These tests don't work reliably\ndescribe.skip('getLocations', () => {\n  it('fetches all locations based on zip 1400', () =>\n    getLocations(1400).then(result =>\n      expect(result).to.deep.equal(['Cheseaux-Noréaz', 'Yverdon-les-Bains'])));\n\n  it('fetches all locations based on zip 1201', () =>\n    getLocations(1201).then(result =>\n      expect(result).to.deep.equal(['Genève'])));\n\n  it('fetches all locations based on zip 1000', () =>\n    getLocations(1000).then(result =>\n      expect(result).to.deep.equal(['Lausanne'])));\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { makeCheckObjectStructure } from '../checkObjectStructure';\n\nconst checkObjectStructure = makeCheckObjectStructure();\n\ndescribe('checkObjectStructure', () => {\n  describe('does not throw when object matches the template', () => {\n    it('with a single key string', () => {\n      const template = { a: 1 };\n      const obj = { a: 'hello' };\n\n      expect(() => checkObjectStructure({ obj, template })).to.not.throw();\n    });\n\n    it('with a single key number', () => {\n      const template = { a: 1 };\n      const obj = { a: 12 };\n\n      expect(() => checkObjectStructure({ obj, template })).to.not.throw();\n    });\n\n    it('with a single key empty array that can be empty', () => {\n      const template = { a: [] };\n      const obj = { a: [] };\n\n      expect(() => checkObjectStructure({ obj, template })).to.not.throw();\n    });\n\n    it('with a single key array that can be empty', () => {\n      const template = { a: [] };\n      const obj = { a: [1, 2, 3] };\n\n      expect(() => checkObjectStructure({ obj, template })).to.not.throw();\n    });\n\n    it('with a single key array that cannot be empty', () => {\n      const template = { a: [1] };\n      const obj = { a: [1, 2, 3] };\n\n      expect(() => checkObjectStructure({ obj, template })).to.not.throw();\n    });\n\n    it('with a single key array that contains objects', () => {\n      const template = { a: [{ b: 1, c: [], d: { e: 1, f: 1 } }] };\n      const obj = {\n        a: [\n          {\n            b: 'hello',\n            c: [],\n            d: { e: 123, f: 456 },\n          },\n          {\n            b: 'hola',\n            c: [1, 2, 3],\n            d: { e: 123, f: 456 },\n          },\n        ],\n      };\n\n      expect(() => checkObjectStructure({ obj, template })).to.not.throw();\n    });\n\n    it('with a single key object', () => {\n      const template = { a: { b: 1 } };\n      const obj = { a: { b: 'hello' } };\n\n      expect(() => checkObjectStructure({ obj, template })).to.not.throw();\n    });\n\n    it('with several keys and nested objects', () => {\n      const template = {\n        a: 1,\n        b: [],\n        c: [1],\n        d: { e: 1, f: [], g: [1], h: { i: 1, j: 1 } },\n      };\n      const obj = {\n        a: 'hello',\n        b: [1, 2, 3],\n        c: [1, 2, 3],\n        d: { e: 12, f: [], g: ['hello'], h: { i: 123, j: 'hello' } },\n      };\n\n      expect(() => checkObjectStructure({ obj, template })).to.not.throw();\n    });\n  });\n\n  describe('throws when the object does not match the template', () => {\n    it('with a key missing', () => {\n      const template = { abc: 1 };\n      const obj = {};\n\n      expect(() => checkObjectStructure({ obj, template })).to.throw('Missing key abc from object');\n    });\n\n    it('with a key that is undefined', () => {\n      const template = { abc: 1 };\n      const obj = { abc: undefined };\n\n      expect(() => checkObjectStructure({ obj, template })).to.throw('Missing key abc from object');\n    });\n\n    it('with a key that is expected to be an array but is not', () => {\n      const template = { abc: [] };\n      const obj = { abc: 2 };\n\n      expect(() => checkObjectStructure({ obj, template })).to.throw('Object key abc must be an array');\n    });\n\n    it('with a key that is expected to be a non-empty array but is empty', () => {\n      const template = { abc: [1] };\n      const obj = { abc: [] };\n\n      expect(() => checkObjectStructure({ obj, template })).to.throw('Array at object key abc in undefined should not be empty');\n    });\n\n    it('with a key that is expected to be a non-empty array but is empty and parent object', () => {\n      const template = { abc: { def: [1] } };\n      const obj = { abc: { def: [] } };\n\n      expect(() => checkObjectStructure({ obj, template })).to.throw('Array at object key def in abc should not be empty');\n    });\n\n    it('with a non matching object in array', () => {\n      const template = { a: [{ b: 1, c: [], d: { e: 1, f: 1 } }] };\n      const obj = {\n        a: [\n          {\n            b: 'hello',\n            c: [],\n            d: { e: 123, f: 456 },\n          },\n          {\n            b: 'hola',\n            d: { e: 123, f: 456 },\n          },\n        ],\n      };\n\n      expect(() => checkObjectStructure({ obj, template })).to.throw('Missing key c from object');\n    });\n\n    it('with a key that is expected to be an object but is not', () => {\n      const template = { abc: {} };\n      const obj = { abc: [] };\n\n      expect(() => checkObjectStructure({ obj, template })).to.throw('Object key abc must be an object');\n    });\n\n    it('says which parent object a key should be in', () => {\n      const template = { abc: { efg: 1 } };\n      const obj = { abc: {} };\n\n      expect(() => checkObjectStructure({ obj, template })).to.throw('Missing key efg from object abc');\n    });\n\n    it('throws multiple errors', () => {\n      const template = { a: { b: 1 }, c: {}, d: [1] };\n      const obj = { a: {}, c: [], d: [] };\n\n      expect(() => checkObjectStructure({ obj, template })).to.throw('Missing key b from object a, Object key c must be an object, Array at object key d in undefined should not be empty');\n    });\n\n    it('skips the rest of the function if it should be an object but it is empty', () => {\n      const template = { a: { b: { c: 1 } } };\n      const obj = {};\n\n      expect(() => checkObjectStructure({ obj, template, parentKey: 'Root' })).to.throw('Missing key a from object Root');\n    });\n  });\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport {\n  toMoney,\n  toNumber,\n  toDecimalNumber,\n  toDistanceString,\n  roundTo,\n} from '../conversionFunctions';\n\ndescribe('Conversion functions', () => {\n  describe('To money', () => {\n    it(\"Should return '1 000' for 1000\", () => {\n      expect(toMoney(1000)).to.equal('1 000');\n    });\n\n    it('Should return 0 for 0', () => {\n      expect(toMoney(0)).to.equal(0);\n    });\n\n    it(\"Should return '100 000' for 100000\", () => {\n      expect(toMoney(100000)).to.equal('100 000');\n    });\n\n    it(\"Should return '-100 000' for -100000\", () => {\n      expect(toMoney(-100000)).to.equal('-100 000');\n    });\n\n    it('rounds decimal numbers', () => {\n      expect(toMoney(1000.2)).to.equal('1 000');\n    });\n\n    it('rounds decimal numbers', () => {\n      expect(toMoney(1000.8)).to.equal('1 001');\n    });\n\n    it('returns undefined for undefined', () => {\n      expect(toMoney(undefined)).to.equal(undefined);\n    });\n\n    it('returns an empty string for an empty string', () => {\n      expect(toMoney('')).to.equal('');\n    });\n\n    it('shouldnt add a negative sign if the value is close to 0', () => {\n      expect(toMoney(-0.1)).to.equal('0');\n    });\n\n    describe('rounded = false', () => {\n      it('should allow decimals', () => {\n        expect(toMoney(123456.78, { rounded: false })).to.equal('123 456.78');\n      });\n\n      it('works below 1', () => {\n        expect(toMoney(0.45, { rounded: false })).to.equal('0.45');\n      });\n\n      it('should only show the last 2 decimals', () => {\n        expect(toMoney(0.129, { rounded: false })).to.equal('0.13');\n\n        expect(toMoney(0.1234, { rounded: false })).to.equal('0.12');\n\n        expect(toMoney(0.12345, { rounded: false })).to.equal('0.12');\n      });\n\n      it('should round to 2 decimals', () => {\n        expect(toMoney(0.9999999, { rounded: false })).to.equal('1.00');\n      });\n\n      it('should handle negative values', () => {\n        expect(toMoney(-0.9999999, { rounded: false })).to.equal('-1.00');\n        expect(toMoney(-123456.789, { rounded: false })).to.equal('-123 456.79');\n      });\n    });\n  });\n\n  describe('To number', () => {\n    it(\"Should return 0 for 'a'\", () => {\n      expect(toNumber('a')).to.equal(0);\n    });\n\n    it('Should return 100 for 100', () => {\n      expect(toNumber(100)).to.equal(100);\n    });\n\n    it(\"Should return 100 for '100'\", () => {\n      expect(toNumber('100')).to.equal(100);\n    });\n\n    it('Should return 100.9 for 100.9', () => {\n      expect(toNumber(100.9)).to.equal(100.9);\n    });\n\n    it(\"Should return 1009 for '100.9'\", () => {\n      expect(toNumber('100.9')).to.equal(1009);\n    });\n\n    it('should return the same value if given a falsy non-number', () => {\n      expect(toNumber('')).to.equal('');\n      expect(toNumber(undefined)).to.equal(undefined);\n      expect(toNumber(null)).to.equal(null);\n      expect(toNumber(false)).to.equal(false);\n    });\n\n    it('should return 0 if given true', () => {\n      expect(toNumber(true)).to.equal(0);\n    });\n\n    it('should return number types', () => {\n      expect(toNumber('1 000 000')).to.equal(1000000);\n      expect(typeof toNumber('1 000 000')).to.equal('number');\n    });\n\n    it('returns undefined for undefined', () => {\n      expect(toNumber(undefined)).to.equal(undefined);\n    });\n\n    it('returns an empty string for an empty string', () => {\n      expect(toNumber('')).to.equal('');\n    });\n  });\n\n  describe('To decimal number', () => {\n    it(\"Should return 0.1 for '0.1'\", () => {\n      expect(toDecimalNumber('0.1')).to.equal(0.1);\n    });\n\n    it(\"Should return 0.1 for '0,1'\", () => {\n      expect(toDecimalNumber('0,1')).to.equal(0.1);\n    });\n\n    it(\"Should return 1 for '1'\", () => {\n      expect(toDecimalNumber('1')).to.equal(1);\n    });\n\n    it(\"Should return 1 for '001'\", () => {\n      expect(toDecimalNumber('001')).to.equal(1);\n    });\n\n    it('Should return -1 for -1', () => {\n      expect(toDecimalNumber(-1)).to.equal(-1);\n    });\n\n    it('should return the same value if given a falsy non-number', () => {\n      expect(toDecimalNumber('')).to.equal('');\n      expect(toDecimalNumber(undefined)).to.equal(undefined);\n      expect(toDecimalNumber(null)).to.equal(null);\n      expect(toDecimalNumber(false)).to.equal(false);\n    });\n  });\n\n  describe('To Distance String', () => {\n    it('returns 0 for a negative distance', () => {\n      expect(toDistanceString(-1)).to.equal('0 m');\n    });\n\n    it('returns 0 for 0', () => {\n      expect(toDistanceString(0)).to.equal('0 m');\n    });\n\n    it('returns 80 for 81', () => {\n      expect(toDistanceString(81)).to.equal('80 m');\n    });\n\n    it('returns 10 for 9', () => {\n      expect(toDistanceString(9)).to.equal('10 m');\n    });\n\n    it('returns 420 for 425', () => {\n      expect(toDistanceString(425)).to.equal('430 m');\n    });\n\n    it('returns 1.0 for 1000', () => {\n      expect(toDistanceString(1000)).to.equal('1.0 km');\n    });\n\n    it('returns 5.4 for 5432', () => {\n      expect(toDistanceString(5432)).to.equal('5.4 km');\n    });\n\n    it('returns 10 for 10000', () => {\n      expect(toDistanceString(10000)).to.equal('10 km');\n    });\n\n    it('returns 55 for 54987', () => {\n      expect(toDistanceString(54987)).to.equal('55 km');\n    });\n  });\n\n  describe('roundTo', () => {\n    it('rounds to nearest 10000', () => {\n      expect(roundTo(12345, 4)).to.equal(10000);\n    });\n\n    it('rounds to nearest 10', () => {\n      expect(roundTo(12, 1)).to.equal(10);\n    });\n\n    it('rounds 1 to nearest 10000', () => {\n      expect(roundTo(1, 4)).to.equal(0);\n    });\n\n    it('rounds decimal values to decimal places', () => {\n      expect(roundTo(0.5689, -2)).to.equal(0.57);\n    });\n\n    it('does nothing if 0 is used', () => {\n      expect(roundTo(123.456789, 0)).to.equal(123.456789);\n    });\n\n    it('rounds 0 properly', () => {\n      expect(roundTo(0, 4)).to.equal(0);\n      expect(roundTo(0, 0)).to.equal(0);\n      expect(roundTo(0, -4)).to.equal(0);\n    });\n\n    it('parses strings with numbers to get a number out of it', () => {\n      expect(roundTo('123', 2)).to.equal(100);\n      expect(roundTo('123.321', -2)).to.equal(123.32);\n    });\n\n    it('parses weird strings as NaN', () => {\n      expect(roundTo('hello', 3)).to.deep.equal(NaN);\n    });\n  });\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport {\n  shouldCountField,\n  getCountedArray,\n  getMissingFieldIds,\n  getFormValuesHash,\n} from '../formArrayHelpers';\n\ndescribe('formArrayHelpers', () => {\n  describe('shouldCountField', () => {\n    it('counts fields whose condition is true or undefined', () => {\n      expect(shouldCountField({ condition: true })).to.equal(true);\n      expect(shouldCountField({ condition: undefined })).to.equal(true);\n    });\n\n    it('should return true for an empty object', () => {\n      // Meaning, condition is undefined\n      expect(shouldCountField({})).to.equal(true);\n    });\n\n    it('should return false if required is explicitly set to false', () => {\n      expect(shouldCountField({ required: false })).to.equal(false);\n      expect(shouldCountField({ required: undefined })).to.equal(true);\n      expect(shouldCountField({ required: true })).to.equal(true);\n    });\n\n    it('should return false if disabled is set to true', () => {\n      expect(shouldCountField({ disabled: true })).to.equal(false);\n      expect(shouldCountField({ disabled: false })).to.equal(true);\n      expect(shouldCountField({ disabled: undefined })).to.equal(true);\n    });\n\n    it('should return false for h3 types', () => {\n      expect(shouldCountField({ type: 'h3' })).to.equal(false);\n    });\n  });\n\n  describe('getCountedArray', () => {\n    const dummyArray = [{ id: 'id1' }, { id: 'id2' }];\n    it('returns an empty array if it is given an empty formArray', () => {\n      expect(getCountedArray([], {})).to.deep.equal([]);\n    });\n\n    it('should return an array with 2 undefined values for a simple array and an empty object', () => {\n      expect(getCountedArray(dummyArray, {})).to.deep.equal([\n        undefined,\n        undefined,\n      ]);\n    });\n\n    it('should return an array with the values of the document', () => {\n      expect(getCountedArray(dummyArray, { id1: '1', id2: '2', idx: 'x' })).to.deep.equal(['1', '2']);\n    });\n\n    it('should work with nested id values', () => {\n      expect(getCountedArray([...dummyArray, { id: 'id3.id' }], {\n        id1: '1',\n        id2: '2',\n        id3: { id: '3' },\n        idx: 'x',\n      })).to.deep.equal(['1', '2', '3']);\n    });\n\n    it('should not count non required values', () => {\n      expect(getCountedArray([{ id: 'id', required: false }], {\n        id: 'yo',\n      })).to.deep.equal([]);\n    });\n\n    it('should count non required values if specified', () => {\n      expect(getCountedArray([{ id: 'id', required: false }], { id: 'yo' }, true)).to.deep.equal(['yo']);\n    });\n\n    describe('conditional values', () => {\n      const trueValue = 'something';\n      let array = [\n        {\n          type: 'conditionalInput',\n          id: 'id1',\n          conditionalTrueValue: trueValue,\n          inputs: [{ id: 'conditional' }, { id: 'test' }],\n        },\n      ];\n\n      it('should only count the conditional value if it is false', () => {\n        expect(getCountedArray(array, { conditional: 'anything' })).to.deep.equal(['anything']);\n      });\n\n      it('should count the conditional value and the following if it is true', () => {\n        expect(getCountedArray(array, { conditional: trueValue })).to.deep.equal([trueValue, undefined]);\n      });\n\n      it('should not count the additionalValue if its not required', () => {\n        array = [\n          {\n            type: 'conditionalInput',\n            id: 'id1',\n            conditionalTrueValue: trueValue,\n            inputs: [{ id: 'conditional', required: false }, { id: 'test' }],\n          },\n        ];\n        expect(getCountedArray(array, { conditional: trueValue })).to.deep.equal([undefined]);\n      });\n    });\n  });\n\n  describe('getMissingFieldIds', () => {\n    let array;\n    let doc;\n\n    beforeEach(() => {\n      array = [{ id: 'test' }];\n      doc = {};\n    });\n\n    it('returns the list of missing fields', () => {\n      expect(getMissingFieldIds(array, doc)).to.deep.equal(['test']);\n    });\n\n    it('returns an empty array if all fields are valid', () => {\n      doc.test = 'stuff';\n      expect(getMissingFieldIds(array, doc)).to.deep.equal([]);\n    });\n\n    it('works with nested data', () => {\n      array = [{ id: 'test.value' }];\n      doc.test = { value: 'stuff' };\n      expect(getMissingFieldIds(array, doc)).to.deep.equal([]);\n    });\n\n    it('properly counts conditional undefined values', () => {\n      const trueValue = 'something';\n      array = [\n        {\n          type: 'conditionalInput',\n          id: 'id1',\n          conditionalTrueValue: trueValue,\n          inputs: [{ id: 'conditional' }, { id: 'test' }],\n        },\n      ];\n      expect(getMissingFieldIds(array, doc)).to.deep.equal(['conditional']);\n    });\n\n    it('properly counts conditional false values', () => {\n      const trueValue = false;\n      array = [\n        {\n          type: 'conditionalInput',\n          id: 'id1',\n          conditionalTrueValue: trueValue,\n          inputs: [{ id: 'conditional' }, { id: 'test' }],\n        },\n      ];\n      doc.conditional = true;\n      expect(getMissingFieldIds(array, doc)).to.deep.equal([]);\n    });\n\n    it('properly counts conditional true values', () => {\n      const trueValue = 'something';\n      array = [\n        {\n          type: 'conditionalInput',\n          id: 'id1',\n          conditionalTrueValue: trueValue,\n          inputs: [{ id: 'conditional' }, { id: 'test' }],\n        },\n      ];\n      doc.conditional = trueValue;\n      expect(getMissingFieldIds(array, doc)).to.deep.equal(['test']);\n    });\n\n    it('properly counts conditional true values and its children', () => {\n      const trueValue = 'something';\n      array = [\n        {\n          type: 'conditionalInput',\n          id: 'id1',\n          conditionalTrueValue: trueValue,\n          inputs: [{ id: 'conditional' }, { id: 'test' }],\n        },\n      ];\n      doc.conditional = trueValue;\n      doc.test = 'stuff';\n      expect(getMissingFieldIds(array, doc)).to.deep.equal([]);\n    });\n\n    it('does not count non required fields', () => {\n      const trueValue = 'something';\n      array = [\n        {\n          type: 'conditionalInput',\n          id: 'id1',\n          conditionalTrueValue: trueValue,\n          inputs: [{ id: 'conditional' }, { id: 'test', required: false }],\n        },\n      ];\n      expect(getMissingFieldIds(array, doc)).to.deep.equal(['conditional']);\n    });\n\n    it('deals with custom fields', () => {\n      array = [{ id: 'test.value' }];\n      doc.test = { value: 'stuff' };\n      expect(getMissingFieldIds(array, doc)).to.deep.equal([]);\n    });\n  });\n\n  describe('getFormValuesHash', () => {\n    let array;\n    let doc;\n\n    beforeEach(() => {\n      array = [{ id: 'test' }];\n      doc = { test: { value: 'stuff' } };\n    });\n\n    it('returns a hash for the data', () => {\n      array = [{ id: 'test.value' }];\n\n      expect(getFormValuesHash(array, doc)).to.equal(272289896);\n    });\n\n    it('changes if the data changes', () => {\n      array = [{ id: 'test.value' }];\n      const doc2 = { test: { value: 'stuff2' } };\n\n      expect(getFormValuesHash(array, doc)).to.not.equal(getFormValuesHash(array, doc2));\n    });\n\n    it('ignores irrelevant fields', () => {\n      array = [{ id: 'test.value' }];\n      const doc2 = { test: { value: 'stuff' }, a: 'b' };\n\n      expect(getFormValuesHash(array, doc)).to.equal(getFormValuesHash(array, doc2));\n    });\n\n    it('counts non required values', () => {\n      array = [{ id: 'test.value' }, { id: 'stuff', required: false }];\n      const doc2 = { test: { value: 'stuff' }, stuff: 'r' };\n\n      expect(getFormValuesHash(array, doc)).to.not.equal(getFormValuesHash(array, doc2));\n    });\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { percentFormatters } from '../formHelpers';\n\ndescribe('form helpers', () => {\n  describe('percentFormatters', () => {\n    it('does not return NaN if an input is emptied', () => {\n      expect(percentFormatters.parse('')).to.equal('');\n      expect(percentFormatters.format('')).to.equal('');\n    });\n\n    it('does allows negative inputs', () => {\n      expect(percentFormatters.parse('-2.00%')).to.equal(-0.02);\n      expect(percentFormatters.format('-0.02')).to.equal('-2.00');\n    });\n  });\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\nimport times from 'lodash/times';\n\nimport { getAggregatePercent } from 'core/utils/general';\nimport { arrayify, getPercent, normalize } from '../general';\n\ndescribe('general helpers', () => {\n  describe('arrayify', () => {\n    it('returns an array if given an array', () => {\n      expect(arrayify([])).to.deep.equal([]);\n    });\n\n    it('returns an array if given nothing', () => {\n      expect(arrayify()).to.deep.equal([]);\n    });\n\n    it('returns an array with a given value if value is not an array', () => {\n      expect(arrayify({})).to.deep.equal([{}]);\n      expect(arrayify('hello')).to.deep.equal(['hello']);\n      expect(arrayify(1)).to.deep.equal([1]);\n    });\n  });\n\n  describe('getPercent', () => {\n    it('returns 1 for an empty array', () => {\n      expect(getPercent([])).to.equal(1);\n    });\n\n    it('returns 1 for a simple array', () => {\n      expect(getPercent(['hello'])).to.equal(1);\n    });\n\n    it('returns 0 for a simple array with undefined', () => {\n      expect(getPercent([undefined])).to.equal(0);\n    });\n\n    it('counts false values', () => {\n      expect(getPercent([false])).to.equal(1);\n    });\n\n    it(\"doesn't count null values\", () => {\n      expect(getPercent([null])).to.equal(0);\n    });\n\n    it('returns 0.2 for an array with 10 values and 8 undefined values', () => {\n      const array = times(10, () => undefined);\n      array[0] = true;\n      array[1] = true;\n\n      expect(getPercent(array)).to.equal(0.2);\n    });\n\n    it(\"throws an error if it isn't given an array\", () => {\n      expect(() => getPercent('hello')).to.throw();\n    });\n\n    it(\"returns 0 if it isn't given any argument\", () => {\n      expect(getPercent()).to.equal(0);\n    });\n\n    it('returns 1 if it is given an empty array', () => {\n      // Empty array means that there was nothing to do, so it should be 100%\n      expect(getPercent([])).to.equal(1);\n    });\n  });\n\n  describe('getAggregatePercent', () => {\n    it('calculates the true progress based on count', () => {\n      expect(getAggregatePercent([\n        { percent: 0.1, count: 10 },\n        { percent: 0.4, count: 20 },\n      ])).to.deep.equal({ count: 30, percent: 0.3 });\n    });\n\n    it('returns 0 for empty arrays', () => {\n      expect(getAggregatePercent([])).to.deep.equal({\n        count: 0,\n        percent: 0,\n      });\n    });\n\n    it('returns the same value for a single object', () => {\n      expect(getAggregatePercent([{ percent: 0.1, count: 10 }])).to.deep.equal({\n        count: 10,\n        percent: 0.1,\n      });\n    });\n  });\n\n  describe('normalize', () => {\n    it('transforms an array of objects into a normalized object', () => {\n      expect(normalize([{ id: 1 }, { id: 2 }])).to.deep.equal({\n        1: { id: 1 },\n        2: { id: 2 },\n      });\n    });\n\n    it('works with _id', () => {\n      expect(normalize([{ _id: 1 }, { _id: 2 }])).to.deep.equal({\n        1: { _id: 1 },\n        2: { _id: 2 },\n      });\n    });\n  });\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { formatLoanWithStructure, nextDueTaskReducer } from '../loanFunctions';\nimport { TASK_STATUS } from '../../api/constants';\n\ndescribe('Loan functions', () => {\n  describe('formatLoanWithStructure', () => {\n    it('sets the right structure', () => {\n      expect(formatLoanWithStructure({\n        selectedStructure: 'test',\n        structures: [{ id: 'test', hello: 'world' }],\n      })).to.deep.include({ id: 'test', hello: 'world' });\n    });\n\n    it('adds an empty structure if the structure was not found', () => {\n      expect(formatLoanWithStructure({\n        selectedStructure: 'test2',\n        structures: [{ id: 'test', hello: 'world' }],\n      })).to.deep.include({});\n    });\n\n    it('adds an empty structure if selectedStructure is not defined', () => {\n      expect(formatLoanWithStructure({\n        structures: [{ id: 'test', hello: 'world' }],\n      })).to.deep.equal({});\n    });\n\n    it('adds the right property if it exists', () => {\n      expect(formatLoanWithStructure({\n        properties: [{ _id: 'property1', value: 100 }],\n        selectedStructure: 'test',\n        structures: [{ id: 'test', propertyId: 'property1' }],\n      })).to.deep.include({\n        id: 'test',\n        propertyId: 'property1',\n        property: { _id: 'property1', value: 100 },\n      });\n    });\n\n    it('adds the right offer if it exists', () => {\n      expect(formatLoanWithStructure({\n        offers: [{ _id: 'offer1', amortization: 100 }],\n        selectedStructure: 'test',\n        structures: [{ id: 'test', offerId: 'offer1' }],\n      })).to.deep.include({\n        id: 'test',\n        offerId: 'offer1',\n        offer: { _id: 'offer1', amortization: 100 },\n      });\n    });\n\n    it('adds both offer and property', () => {\n      expect(formatLoanWithStructure({\n        offers: [{ _id: 'offer1', amortization: 100 }],\n        properties: [{ _id: 'property1', value: 100 }],\n        selectedStructure: 'test',\n        structures: [\n          { id: 'test', offerId: 'offer1', propertyId: 'property1' },\n        ],\n      })).to.deep.include({\n        id: 'test',\n        offerId: 'offer1',\n        propertyId: 'property1',\n        offer: { _id: 'offer1', amortization: 100 },\n        property: { _id: 'property1', value: 100 },\n      });\n    });\n\n    it('returns undefined if no structures exist', () => {\n      expect(formatLoanWithStructure({\n        selectedStructure: 'test',\n        structures: [],\n      })).to.deep.equal(undefined);\n    });\n\n    it('formats the promotionOption properly', () => {\n      expect(formatLoanWithStructure({\n        promotionOptions: [\n          {\n            _id: 'id',\n            value: 100,\n            promotionLots: [\n              { properties: [{ landValue: 50, constructionValue: 80 }] },\n            ],\n          },\n        ],\n        selectedStructure: 'test',\n        structures: [{ id: 'test', promotionOptionId: 'id' }],\n      })).to.deep.include({\n        id: 'test',\n        promotionOptionId: 'id',\n        property: {\n          _id: 'id',\n          value: 100,\n          totalValue: 100,\n          landValue: 50,\n          constructionValue: 80,\n          promotionLots: [\n            { properties: [{ landValue: 50, constructionValue: 80 }] },\n          ],\n        },\n      });\n    });\n  });\n\n  describe('nextDueTaskReducer', () => {\n    it('returns undefined if no dates exist', () => {\n      const loan = {};\n      expect(nextDueTaskReducer(loan)).to.equal(undefined);\n    });\n\n    it('gets the next task date', () => {\n      const taskDate1 = new Date();\n      taskDate1.setDate(taskDate1.getDate() - 1);\n      const taskDate2 = new Date();\n      taskDate2.setDate(taskDate2.getDate() - 2);\n      const tasksCache = [\n        { dueAt: taskDate1, title: 'task A', status: TASK_STATUS.ACTIVE },\n        { dueAt: taskDate2, title: 'task B', status: TASK_STATUS.ACTIVE },\n      ];\n      const loan = { tasksCache };\n      expect(nextDueTaskReducer(loan)).to.deep.include({\n        dueAt: taskDate2,\n        title: 'task B',\n      });\n    });\n\n    it('only returns active task dates', () => {\n      const taskDate1 = new Date();\n      taskDate1.setDate(taskDate1.getDate() - 1);\n      const taskDate2 = new Date();\n      taskDate2.setDate(taskDate2.getDate() - 2);\n      const tasksCache = [\n        { dueAt: taskDate1, title: 'task A', status: TASK_STATUS.ACTIVE },\n        { dueAt: taskDate2, title: 'task B', status: TASK_STATUS.CANCELLED },\n      ];\n      const loan = { tasksCache };\n      expect(nextDueTaskReducer(loan)).to.deep.include({\n        dueAt: taskDate1,\n        title: 'task A',\n        status: TASK_STATUS.ACTIVE,\n      });\n    });\n\n    it('puts tasks without due dates first', () => {\n      const taskDate1 = new Date();\n      taskDate1.setDate(taskDate1.getDate() - 1);\n      const tasksCache = [\n        { dueAt: taskDate1, title: 'task A', status: TASK_STATUS.ACTIVE },\n        { title: 'task B', status: TASK_STATUS.ACTIVE },\n      ];\n      const loan = { tasksCache };\n      expect(nextDueTaskReducer(loan)).to.deep.include({\n        title: 'task B',\n        status: TASK_STATUS.ACTIVE,\n      });\n    });\n\n    it('puts older tasks first', () => {\n      const taskDate1 = new Date();\n      taskDate1.setDate(taskDate1.getDate() - 1);\n      const taskDate2 = new Date();\n      taskDate2.setDate(taskDate2.getDate() - 2);\n      const taskDate3 = new Date();\n      taskDate3.setDate(taskDate3.getDate() - 3);\n      const tasksCache = [\n        { dueAt: taskDate1, title: 'task A', status: TASK_STATUS.ACTIVE },\n        { createdAt: taskDate2, title: 'task B', status: TASK_STATUS.ACTIVE },\n        { createdAt: taskDate3, title: 'task C', status: TASK_STATUS.ACTIVE },\n      ];\n      const loan = { tasksCache };\n      expect(nextDueTaskReducer(loan)).to.deep.include({\n        title: 'task C',\n        status: TASK_STATUS.ACTIVE,\n      });\n    });\n\n    it('puts older tasks first', () => {\n      const taskDate1 = new Date();\n      taskDate1.setDate(taskDate1.getDate() - 1);\n      const taskDate2 = new Date();\n      taskDate2.setDate(taskDate2.getDate() - 2);\n      const taskDate3 = new Date();\n      taskDate3.setDate(taskDate3.getDate() - 3);\n      const tasksCache = [\n        { createdAt: taskDate2, title: 'task B', status: TASK_STATUS.ACTIVE },\n        { dueAt: taskDate1, title: 'task A', status: TASK_STATUS.ACTIVE },\n        { dueAt: taskDate3, title: 'task C', status: TASK_STATUS.ACTIVE },\n      ];\n      const loan = { tasksCache };\n      expect(nextDueTaskReducer(loan)).to.deep.include({\n        title: 'task B',\n        status: TASK_STATUS.ACTIVE,\n      });\n    });\n  });\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { arePathsUnequal } from '../reactFunctions';\n\ndescribe('reactFunctions', () => {\n  describe('arePathsUnequal', () => {\n    it('returns true or false if paths are unequal', () => {\n      const func = arePathsUnequal(['a']);\n      expect(func({ a: 1 }, { a: 2 })).to.equal(true);\n      expect(func({ a: 1 }, { a: 1 })).to.equal(false);\n    });\n\n    it('does not fail with nested objects', () => {\n      const func = arePathsUnequal(['a.b']);\n      expect(func({ a: 1 }, { a: { b: 1 } })).to.equal(true);\n      expect(func({ a: 1 }, { a: 1 })).to.equal(false);\n      expect(func({ a: { b: 1 } }, { a: { b: 1 } })).to.equal(false);\n    });\n\n    it('compares arrays', () => {\n      const func = arePathsUnequal(['a']);\n      expect(func({ a: [1] }, { a: [1] })).to.equal(false);\n      expect(func({ a: [1] }, { a: [] })).to.equal(true);\n    });\n\n    it('throws if trying to compare objects', () => {\n      const func = arePathsUnequal(['a']);\n      expect(() => func({ a: {} }, { a: {} })).to.throw('Should not');\n    });\n\n    it('works if one value is null', () => {\n      const func = arePathsUnequal(['a']);\n      expect(func({ a: null }, { a: 2 })).to.equal(true);\n      expect(func({ a: 2 }, { a: null })).to.equal(true);\n    });\n  });\n});\n","/* eslint-env mocha */\nimport { Accounts } from 'meteor/accounts-base';\nimport { Meteor } from 'meteor/meteor';\nimport { Random } from 'meteor/random';\n\nimport { expect } from 'chai';\nimport sinon from 'sinon';\n\nimport { getRedirectIfInRoleForOtherApp } from '../redirection';\nimport { ROLES } from '../../api/constants';\n\ndescribe('getRedirectIfInRoleForOtherApp', () => {\n  const token = Random.id();\n\n  beforeEach(() => {\n    // It's available only on the client.\n    Accounts._storedLoginToken = sinon.stub().callsFake(() => token);\n  });\n\n  afterEach(() => {\n    delete Accounts._storedLoginToken;\n  });\n\n  const userWithRole = role => ({ roles: [role] });\n  const urlFor = service =>\n    `${Meteor.settings.public.subdomains[service]}/login-token/${token}`;\n\n  [\n    ['app', [userWithRole(ROLES.PRO), ROLES.PRO, 'pro'], urlFor('pro')],\n    ['app', [userWithRole(ROLES.PRO), ROLES.USER, 'app']],\n    ['app', [userWithRole(ROLES.USER), ROLES.PRO, 'pro']],\n    ['app', [userWithRole(ROLES.USER), ROLES.USER, 'app']],\n    ['pro', [userWithRole(ROLES.PRO), ROLES.PRO, 'pro']],\n    ['pro', [userWithRole(ROLES.PRO), ROLES.USER, 'app']],\n    ['pro', [userWithRole(ROLES.USER), ROLES.PRO, 'pro']],\n    ['pro', [userWithRole(ROLES.USER), ROLES.USER, 'app'], urlFor('app')],\n  ].forEach(([microservice, args, url]) => {\n    it(`Should work in ${microservice} for ${JSON.stringify(args)}`, () => {\n      const originalMicroservice = Meteor.settings.public.microservice;\n      Meteor.settings.public.microservice = microservice;\n\n      expect(getRedirectIfInRoleForOtherApp(...args)).to.equal(url);\n\n      Meteor.settings.public.microservice = originalMicroservice;\n    });\n  });\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { createRoute } from '../routerUtils';\n\ndescribe('routerUtils', () => {\n  describe('createRoute', () => {\n    it('replaces wildcard params with real value', () => {\n      expect(createRoute(':hello', { ':hello': 'yo' })).to.equal('yo');\n    });\n\n    it('replaces multiple wildcard params with real value', () => {\n      expect(createRoute(':hello/:yo', { ':hello': 'yo', ':yo': 'dude' })).to.equal('yo/dude');\n    });\n\n    it('returns the initial path if no params are passed', () => {\n      expect(createRoute('yo')).to.equal('yo');\n    });\n\n    it('prefixes replacers with a colon if none is provided', () => {\n      expect(createRoute(':hello', { hello: 'yo' })).to.equal('yo');\n      expect(createRoute(':hello/:yo', { hello: 'yo', yo: 'dude' })).to.equal('yo/dude');\n    });\n\n    it('replaces wildcard params while removing interrogation marks', () => {\n      expect(createRoute('/abc/:hello?', { ':hello': '' })).to.equal('/abc/');\n    });\n  });\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\nimport cloneDeep from 'lodash/cloneDeep';\n\nimport sortArrayOfObjects, { ORDER } from '../sortArrayOfObjects';\n\ndescribe('sortArrayOfObjects', () => {\n  it('sorts objects ascending by root values', () => {\n    const input = [\n      { someValue: 3, anotherValue: 2 },\n      { someValue: 1, anotherValue: 5 },\n      { someValue: -2, anotherValue: 0 },\n      { someValue: 0, anotherValue: 2 },\n      { someValue: -2, anotherValue: 2 },\n    ];\n    const expectedOutput = [\n      { someValue: -2, anotherValue: 0 },\n      { someValue: -2, anotherValue: 2 },\n      { someValue: 0, anotherValue: 2 },\n      { someValue: 1, anotherValue: 5 },\n      { someValue: 3, anotherValue: 2 },\n    ];\n    expect(sortArrayOfObjects(input, 'someValue', ORDER.ASC)).to.deep.equal(expectedOutput);\n  });\n\n  it('sorts objects descending by root values', () => {\n    const input = [\n      { someValue: 3, anotherValue: 2 },\n      { someValue: 1, anotherValue: 5 },\n      { someValue: -2, anotherValue: 0 },\n      { someValue: 0, anotherValue: 2 },\n      { someValue: -2, anotherValue: 2 },\n    ];\n    const expectedOutput = [\n      { someValue: 3, anotherValue: 2 },\n      { someValue: 1, anotherValue: 5 },\n      { someValue: 0, anotherValue: 2 },\n      { someValue: -2, anotherValue: 0 },\n      { someValue: -2, anotherValue: 2 },\n    ];\n    expect(sortArrayOfObjects(input, 'someValue', ORDER.DESC)).to.deep.equal(expectedOutput);\n  });\n\n  it('sorts objects ascending by nested values', () => {\n    const input = [\n      { someValue: -3, anotherVal: 'val', a: { b: 'x' } },\n      { someValue: 2, anotherVal: 'val', a: { b: 'a' } },\n      { someValue: 4, a: { b: 'z' } },\n      { someValue: 1, a: { b: 'cc' } },\n      { a: { b: 'dd' }, someValue: 4 },\n    ];\n    const expectedOutput = [\n      { someValue: 2, anotherVal: 'val', a: { b: 'a' } },\n      { someValue: 1, a: { b: 'cc' } },\n      { a: { b: 'dd' }, someValue: 4 },\n      { someValue: -3, anotherVal: 'val', a: { b: 'x' } },\n      { someValue: 4, a: { b: 'z' } },\n    ];\n    expect(sortArrayOfObjects(input, 'a.b', ORDER.ASC)).to.deep.equal(expectedOutput);\n  });\n\n  it('sorts objects descending by nested values', () => {\n    const input = [\n      { someValue: -3, anotherVal: 'val', a: { b: 'x' } },\n      { someValue: 2, anotherVal: 'val', a: { b: 'a' } },\n      { someValue: 4, a: { b: 'z' } },\n      { someValue: 1, a: { b: 'cc' } },\n      { a: { b: 'dd' }, someValue: 4 },\n    ];\n    const expectedOutput = [\n      { someValue: 4, a: { b: 'z' } },\n      { someValue: -3, anotherVal: 'val', a: { b: 'x' } },\n      { a: { b: 'dd' }, someValue: 4 },\n      { someValue: 1, a: { b: 'cc' } },\n      { someValue: 2, anotherVal: 'val', a: { b: 'a' } },\n    ];\n    expect(sortArrayOfObjects(input, 'a.b', ORDER.DESC)).to.deep.equal(expectedOutput);\n  });\n\n  it('sorts objects by case-insensitive string values', () => {\n    const input = [{ a: 'ba' }, { a: 'aa' }, { a: 'Aa' }, { a: 'Zz' }];\n    const expectedOutput = [{ a: 'aa' }, { a: 'Aa' }, { a: 'ba' }, { a: 'Zz' }];\n    expect(sortArrayOfObjects(input, 'a', ORDER.ASC)).to.deep.equal(expectedOutput);\n  });\n\n  it('sorts objects ascending by default', () => {\n    const input = [{ a: 2 }, { a: 1 }];\n    const expectedOutput = [{ a: 1 }, { a: 2 }];\n    expect(sortArrayOfObjects(input, 'a')).to.deep.equal(expectedOutput);\n  });\n\n  it('does not mutate the input array', () => {\n    const input = [{ a: 2 }, { a: 1 }];\n    const inputClone = cloneDeep(input);\n    sortArrayOfObjects(input, 'a', ORDER.ASC);\n    expect(input).to.deep.equal(inputClone);\n  });\n\n  it('returns the same input when the sort field is undefined', () => {\n    const input = [{ a: 2 }, { a: 1 }];\n    expect(sortArrayOfObjects(input, undefined, ORDER.ASC)).to.equal(input);\n  });\n\n  it('returns the same input when the sort field is an empty string', () => {\n    const input = [{ a: 2 }, { a: 1 }];\n    expect(sortArrayOfObjects(input, '', ORDER.ASC)).to.equal(input);\n  });\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { getUserDisplayName } from '../userFunctions';\n\ndescribe('User Functions', () => {\n  const firstName = 'firstName';\n  const lastName = 'lastName';\n  const username = 'username';\n  const emails = [{ address: 'email@email.com' }];\n\n  describe('getUserDisplayName', () => {\n    it('should return an empty string when no arguments are passed', () => {\n      expect(getUserDisplayName({})).to.equal('');\n    });\n\n    it(\"should return the user's names when they are defined\", () => {\n      expect(getUserDisplayName({ firstName, lastName })).to.equal(`${firstName} ${lastName}`);\n    });\n\n    it('should return just the firstName when the lastName is undefined', () => {\n      expect(getUserDisplayName({ firstName })).to.equal(firstName);\n    });\n\n    it('should return the email address when it is defined and the names and username are undefined', () => {\n      expect(getUserDisplayName({ emails })).to.equal(emails[0].address);\n    });\n  });\n});\n","// @flow\n/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport zipcodes from '../zipcodes';\n\ndescribe('zipcodes', () => {\n  it('returns the canton for a zipcode', () => {\n    expect(zipcodes(1201)).to.equal('GE');\n    expect(zipcodes(1400)).to.equal('VD');\n    expect(zipcodes(8004)).to.equal('ZH');\n    expect(zipcodes(9485)).to.equal('LI');\n  });\n\n  it('allows using 1200 for geneva', () => {\n    expect(zipcodes(1200)).to.equal('GE');\n  });\n\n  it('returns null if no canton is found', () => {\n    expect(zipcodes(100)).to.equal(null);\n    expect(zipcodes(100)).to.equal(null);\n  });\n});\n","import { Meteor } from 'meteor/meteor';\n\nlet fetch;\nif (Meteor.isServer) {\n  fetch = require('node-fetch');\n} else {\n  fetch = global.fetch;\n}\n\nexport const getClosestStations = (latitude, longitude) =>\n  fetch(`https://transport.opendata.ch/v1/locations?x=${latitude}&y=${longitude}&type=station`)\n    .then((response) => {\n      if (response.status !== 200) {\n        throw new Error('error code: ', response.status);\n      } else {\n        return response.json();\n      }\n    })\n    .then(data => data.stations);\n\n/**\n * getPlace - Description\n *\n * @param {Object} origin {lat: Number, lng: Number}\n * @param {String} type   type of place to search for\n *\n * @return {type} returns a promise with object {name: String, distance: Object}\n */\nexport const getNearbyPlace = (latitude, longitude, type, byDistance) => {\n  const location = new window.google.maps.LatLng(latitude, longitude);\n\n  return new Promise((resolve, reject) => {\n    const div = document.createElement('div');\n    const service = new window.google.maps.places.PlacesService(div);\n    service.nearbySearch(\n      {\n        location,\n        radius: byDistance ? undefined : 5000,\n        rankBy: byDistance\n          ? window.google.maps.places.RankBy.DISTANCE\n          : window.google.maps.places.RankBy.PROMINENCE,\n        type: [type],\n      },\n      (places, status) => {\n        if (status === window.google.maps.places.PlacesServiceStatus.OK) {\n          resolve(places[0]);\n        } else {\n          reject(status);\n        }\n      },\n    );\n  }).then((place) => {\n    const lat = place.geometry.location.lat();\n    const lng = place.geometry.location.lng();\n    const name = place.name;\n\n    return new Promise((resolve, reject) => {\n      const distanceService = new window.google.maps.DistanceMatrixService();\n\n      distanceService.getDistanceMatrix(\n        {\n          origins: [location],\n          destinations: [new window.google.maps.LatLng(lat, lng)],\n          travelMode: 'WALKING',\n        },\n        (result, status) => {\n          if (status !== 'OK') {\n            reject(status);\n          }\n          resolve({ distance: result.rows[0].elements[0].distance, name });\n        },\n      );\n    });\n  });\n};\n\nconst google_key = 'AIzaSyCdoi6BxlTf7GgxqAGAsd1ADM_UwgqWUP8';\nexport const getLocations = zipCode =>\n  fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${zipCode}&components=country:CH&language=fr&key=${google_key}`)\n    .then(result => result.json())\n    .then((result) => {\n      const array = result.results[0].postcode_localities || [];\n      const localities = result.results[0].address_components.filter(obj => obj.types.indexOf('locality') >= 0);\n      if (localities && localities.length) {\n        localities.forEach(l => array.push(l.long_name));\n      }\n      // filter duplicates\n      return array.filter((value, index) => array.indexOf(value) === index);\n    });\n","export const testErrors = {\n  missingKey: (key, parentKey) => `Missing key ${key} from object ${parentKey}`,\n  shouldBeArray: key => `Object key ${key} must be an array`,\n  shouldBeObject: key => `Object key ${key} must be an object`,\n  emptyArray: (key, parentKey) =>\n    `Array at object key ${key} in ${parentKey} should not be empty`,\n};\n\nexport const makeCheckObjectStructure = (errorMessages = testErrors) => {\n  const {\n    missingKey,\n    shouldBeArray,\n    shouldBeObject,\n    emptyArray,\n  } = errorMessages;\n  let errors = [];\n\n  const checkObjectStructure = ({ obj, template, parentKey }) => {\n    const checkTemplate = (subObj, subTemplate, subParentKey) =>\n      Object.keys(subTemplate).forEach((key) => {\n        if (subObj[key] === undefined) {\n          if (typeof subTemplate[key] === 'object' && subTemplate[key].$or) {\n            if (!subObj[subTemplate[key].$or]) {\n              errors.push(missingKey(key, subParentKey || ''));\n              return;\n            }\n          } else {\n            errors.push(missingKey(key, subParentKey || ''));\n            return;\n          }\n        }\n\n        if (Array.isArray(subTemplate[key])) {\n          if (!Array.isArray(subObj[key])) {\n            errors.push(shouldBeArray(key));\n          }\n          if (subTemplate[key].length > 0 && subObj[key].length === 0) {\n            errors.push(emptyArray(key, subParentKey));\n          }\n\n          if (\n            subTemplate[key].length > 0\n            && typeof subTemplate[key][0] === 'object'\n            && !Array.isArray(subTemplate[key][0])\n          ) {\n            subObj[key].forEach(object =>\n              checkTemplate(object, subTemplate[key][0]));\n          }\n        } else if (\n          typeof subTemplate[key] === 'object'\n          && !Object.keys(subTemplate[key]).includes('$or')\n        ) {\n          if (typeof subObj[key] !== 'object' || Array.isArray(subObj[key])) {\n            errors.push(shouldBeObject(key));\n          } else {\n            checkTemplate(subObj[key], subTemplate[key], key);\n          }\n        }\n      });\n\n    checkTemplate(obj, template, parentKey);\n\n    if (errors.length) {\n      const errorMessage = errors.join(', ');\n      errors = [];\n      throw errorMessage;\n    }\n\n    errors = [];\n  };\n  return checkObjectStructure;\n};\n","// Rounds the value, adds thousands markers every 3 digits\n// (and removes non-digit characters)\nexport function toMoney(value, { noPrefix, rounded = true } = {}) {\n  if (value === 0) {\n    return 0;\n  }\n  if (Number.isNaN(value)) {\n    // Exception for isNaN which should never appear\n    return 0;\n  }\n  if (!value) {\n    // Don't format the value if it is undefined or an empty string\n    return value;\n  }\n  const parsedValue = rounded\n    ? Math.round(Number(Math.round(value)))\n    : Number(value);\n  const negativePrefix = !noPrefix && value < 0 && parsedValue !== 0 ? '-' : '';\n\n  if (rounded) {\n    return (\n      negativePrefix\n      + String(parsedValue)\n        .replace(/\\D/g, '')\n        .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ' ')\n    );\n  }\n\n  const roundedDecimals = Math.round(parsedValue * 100) / 100;\n\n  const [integer, decimals] = String(roundedDecimals).split('.');\n\n  const integerPart = negativePrefix\n    + integer.replace(/\\D/g, '').replace(/\\B(?=(\\d{3})+(?!\\d))/g, ' ');\n  let decimalPart = decimals;\n\n  if (!decimals) {\n    return [integerPart, '00'].join('.');\n  }\n\n  if (decimals && decimals.length > 2) {\n    const rounding = 10 ** (decimals.length - 2);\n    decimalPart = Math.round(Number(decimals) / rounding) * rounding;\n  }\n\n  return [integerPart, String(decimalPart).slice(0, 2)].join('.');\n}\n\n// Replaces any nondigit character by an empty character,\n// to prevent the use of non-digits\n// Only do this if the value actually exists\nexport function toNumber(value) {\n  if (typeof value === 'number') {\n    return value;\n  }\n  return value ? Number(String(value).replace(/\\D/g, '')) : value;\n}\n\n// Like toNumber, but allows decimals\nexport function toDecimalNumber(value) {\n  if (typeof value === 'number') {\n    return value;\n  }\n  // Remove unwanted characters, except digits, dots and commas\n  const newValue = value ? String(value).replace(/[^\\d.,]/g, '') : value;\n  // replace commas with dots\n  const commaReplaced = newValue\n    ? Number(newValue.replace(',', '.'))\n    : newValue;\n  return commaReplaced;\n}\n\nexport const toDistanceString = (dist) => {\n  if (dist <= 0) {\n    return '0 m';\n  }\n  if (dist < 1000) {\n    return `${Math.round(dist / 10) * 10} m`;\n  }\n  if (dist < 10000) {\n    return `${(Math.round(dist / 100) / 10).toFixed(1)} km`;\n  }\n\n  return `${Math.round(dist / 1000)} km`;\n};\n\nexport const roundValue = (value, digits) =>\n  Math.round(value / 10 ** digits) * 10 ** digits;\n\nexport const roundTo = (value, digits) => {\n  if (digits === 0) {\n    return value;\n  }\n\n  const roundedValue = roundValue(value, digits);\n\n  if (digits > 0) {\n    return roundedValue;\n  }\n\n  return parseFloat(roundedValue.toFixed(-digits));\n};\n","export const getCookie = (cookieName) => {\n  const cookie = RegExp(`${cookieName}[^;]+`).exec(document.cookie);\n  return decodeURIComponent(cookie ? cookie.toString().replace(/^[^=]+./, '') : '');\n};\n\nexport const setCookie = (cookieName, value) => {\n  document.cookie = `${cookieName}=${value}`;\n};\n\nexport const parseCookies = () =>\n  document.cookie.split(';').reduce((res, c) => {\n    const [key, val] = c\n      .trim()\n      .split('=')\n      .map(decodeURIComponent);\n    try {\n      return Object.assign(res, { [key]: JSON.parse(val) });\n    } catch (e) {\n      return Object.assign(res, { [key]: val });\n    }\n  }, {});\n","export const returnEmptyArray = () => [];\n\nexport const returnFalse = () => false;\n","// @flow\nimport get from 'lodash/get';\n\nimport { arrayify, simpleHash } from './general';\n\n// Returns the current value of an autoForm input\nconst getCurrentValue = (input, doc) => get(doc, input.id);\n\ntype formFieldType = {\n  condition?: boolean,\n  required?: boolean,\n  disabled?: boolean,\n  type: string,\n};\n\n// shouldCountField - A boolean to determine if a field in an array\n// should be counted or not\nexport const shouldCountField = (formField: formFieldType) =>\n  (formField.condition === undefined || formField.condition === true)\n  && formField.required !== false\n  && !formField.disabled\n  && formField.type !== 'h3';\n\nconst conditionalInputIsTriggered = (rootField, doc) =>\n  getCurrentValue(rootField.inputs[0], doc) === rootField.conditionalTrueValue;\n\n// getCountedArray - Returns an array of values that are mandatory and should\n// be counted to determine a completion percentage of a form\nexport const getCountedArray = (formArray, doc, shouldCountAllFields) => {\n  const arr = [];\n\n  formArray.forEach((i) => {\n    if (shouldCountAllFields || shouldCountField(i)) {\n      if (i.type === 'conditionalInput') {\n        if (conditionalInputIsTriggered(i, doc)) {\n          // If the conditional input is triggering the next input, add all values\n          i.inputs.forEach((input) => {\n            if (shouldCountField(input)) {\n              arr.push(getCurrentValue(input, doc));\n            }\n          });\n        } else {\n          // If conditional value is not triggering\n          arr.push(getCurrentValue(i.inputs[0], doc));\n        }\n      } else {\n        arr.push(getCurrentValue(i, doc));\n      }\n    }\n  });\n\n  return arr;\n};\n\nconst fieldIsValid = (field, doc) => {\n  const currentValue = getCurrentValue(field, doc);\n\n  if (Array.isArray(currentValue)) {\n    return currentValue.length > 0;\n  }\n\n  return currentValue !== undefined;\n};\n\n// Returns a list of fields that are missing from the doc, given a form array\n// Helps you know which fields still need to be filled\nexport const getMissingFieldIds = (formArray, doc) =>\n  formArray.reduce((missingFieldIds, field) => {\n    const { type, id, inputs } = field;\n    if (!shouldCountField(field)) {\n      return missingFieldIds;\n    }\n\n    if (type === 'conditionalInput') {\n      const [conditionalField, ...additionalFields] = inputs;\n      if (conditionalInputIsTriggered(field, doc)) {\n        return [\n          ...missingFieldIds,\n          ...additionalFields.reduce(\n            (missingConditionalFields, additionalField) => {\n              if (\n                fieldIsValid(additionalField, doc)\n                || !shouldCountField(additionalField)\n              ) {\n                return missingConditionalFields;\n              }\n\n              return [...missingConditionalFields, additionalField.id];\n            },\n            [],\n          ),\n        ];\n      }\n\n      if (!fieldIsValid(conditionalField, doc)) {\n        return [...missingFieldIds, conditionalField.id];\n      }\n\n      return missingFieldIds;\n    }\n\n    if (!fieldIsValid(field, doc)) {\n      return [...missingFieldIds, id];\n    }\n\n    return missingFieldIds;\n  }, []);\n\n/**\n * Returns the hash of a form's values\n *\n * @param {Array} formArray\n * @param {Object} doc\n * @returns {Number} 32-bit integer hash\n */\nexport const getFormValuesHash = (formArray, doc) => {\n  const values = getCountedArray(formArray, doc, true);\n\n  return simpleHash(values);\n};\n\n// Sums multiple hashes together from multiple forms\nexport const getFormValuesHashMultiple = combos =>\n  combos.reduce(\n    (tot, { formArray, doc }) => tot + getFormValuesHash(formArray, doc),\n    0,\n  );\n","import React from 'react';\n\nimport T from '../components/Translation';\nimport { toNumber } from './conversionFunctions';\n\nconst onlyNums = value => value.replace(/[^\\d]/g, '');\nconst onlyNumsAndPlus = value => value.replace(/[^\\d&+]/g, '');\n\nexport const numberFormatters = {\n  parse: value => value && toNumber(value),\n  // format: value => value,\n};\n\nexport const phoneFormatters = {\n  parse: value => value && onlyNumsAndPlus(value),\n  format: value => (value ? onlyNumsAndPlus(value) : ''),\n};\n\nexport const percentFormatters = {\n  parse: value =>\n    (value === '' ? '' : Math.round(parseFloat(value) * 100) / 10000),\n  format: value => (value === '' ? '' : (value * 100).toFixed(2)),\n};\n\nexport const moneyFormatters = {\n  parse: value => toNumber(value),\n};\n\nconst setRequired = initialValue =>\n  (initialValue === undefined ? true : initialValue);\n\nexport const makeFormArray = (array, intlPrefix) =>\n  array.map(field => ({\n    ...field,\n    required: setRequired(field.required),\n    label: field.label || <T id={`${intlPrefix}.${field.id}`} />,\n  }));\n","// @flow\nimport isArray from 'lodash/isArray';\n\nexport const arrayify = (value) => {\n  if (value) {\n    if (isArray(value)) {\n      return value;\n    }\n    return [value];\n  }\n\n  return [];\n};\n\n/**\n * getPercent - Given an array of values, any value that is undefined or null\n * will be counted as incomplete, make sure we don't divide by 0\n *\n * @param {array} array Array of numbers, strings, or dates\n *\n * @return {number} a value between 0 and 1\n */\nexport const getPercent = (array) => {\n  if (!array) {\n    return 0;\n  }\n  if (array.length === 0) {\n    // If array is empty, return 100%\n    return 1;\n  }\n\n  const percent = array.reduce((tot, val) => {\n    if (isArray(val)) {\n      // Empty arrays need to be filled\n      return tot + (val.length ? 1 : 0);\n    }\n    if (val !== undefined && val !== null) {\n      return tot + 1;\n    }\n    return tot;\n  }, 0) / array.length;\n  return Number.isFinite(percent) ? percent : 0;\n};\n\n// Given multiple objects of the form { percent, count },\n// Merge them together with a single count and percent\nexport const getAggregatePercent = (percentageObjects) => {\n  const {\n    percent: aggregatePercent,\n    count: aggregateCount,\n  } = percentageObjects.reduce(\n    (obj, { percent, count }) => ({\n      percent: obj.percent + percent * count,\n      count: obj.count + count,\n    }),\n    { percent: 0, count: 0 },\n  );\n\n  return {\n    count: aggregateCount,\n    percent: aggregateCount === 0 ? 0 : aggregatePercent / aggregateCount,\n  };\n};\n\nexport const normalize = array =>\n  array.reduce((obj, item) => ({ ...obj, [item.id || item._id]: item }), {});\n\nexport const simpleHash = (data) => {\n  let string = data;\n  if (typeof data !== 'string') {\n    string = JSON.stringify(data);\n  }\n\n  let hash = 0;\n  if (string.length === 0) {\n    return hash;\n  }\n  for (let i = 0; i < string.length; i++) {\n    const char = string.charCodeAt(i);\n    hash = (hash << 5) - hash + char;\n    hash &= hash; // Convert to 32bit integer\n  }\n  return hash;\n};\n","import IntlMessageFormat from 'intl-messageformat';\nimport ReactDOMServer from 'react-dom/server';\n\nimport {\n  getUserLocale,\n  //   getFormats,\n} from 'core/utils/localization/localization';\nimport defaultIntlValues from 'core/components/Translation/defaultIntlValues';\n\nconst defaultValues = Object.keys(defaultIntlValues).reduce((obj, key) => {\n  const value = defaultIntlValues[key];\n\n  return { ...obj, [key]: ReactDOMServer.renderToString(value) };\n}, {});\n\nexport class Intl {\n  constructor(messages) {\n    this.init(messages);\n  }\n\n  init(messages) {\n    this.messages = messages;\n  }\n\n  formatMessage({ id, values = {}, fallback } = {}, legacyValues = {}) {\n    const allValues = { ...values, ...legacyValues };\n    if (id === undefined) {\n      throw new Error('an id is required in formatMessage');\n    }\n\n    const message = new IntlMessageFormat(\n      this.messages[id] || (fallback !== undefined ? fallback : id),\n      getUserLocale(),\n      // getFormats(),\n    );\n    return message.format({ ...defaultValues, ...allValues });\n  }\n}\n\nexport default new Intl();\n","import { Meteor } from 'meteor/meteor';\n\nimport React from 'react';\nimport Loadable from 'react-loadable';\n\nimport { logError } from '../api/methods/index';\nimport LayoutError from '../components/ErrorBoundary/LayoutError';\nimport Loading from '../components/Loading';\n\nconst ENABLE_LOADABLE = true;\n\nif (!ENABLE_LOADABLE && Meteor.isProduction) {\n  throw new Error('ENABLE_LOADABLE should be true in production');\n}\n\nconst LoadableLoading = ({ error, retry, pastDelay }) => {\n  if (error) {\n    logError.run({\n      error: JSON.parse(\n        JSON.stringify(error, Object.getOwnPropertyNames(error)),\n      ),\n      additionalData: ['Loadable error'],\n      url:\n        window && window.location && window.location.href\n          ? window.location.href\n          : '',\n    });\n    return <LayoutError error={error} />;\n  }\n  if (pastDelay) {\n    return <Loading />;\n  }\n  return null;\n};\n\nexport default ({ req, loader, ...options }) => {\n  if (!ENABLE_LOADABLE && req) {\n    return req();\n  }\n\n  return Loadable({\n    loading: LoadableLoading,\n    delay: 200, // Hides the loading component for 200ms, to avoid flickering\n    loader,\n    ...options,\n  });\n};\n","import { Meteor } from 'meteor/meteor';\nimport { STEPS, TASK_STATUS } from '../api/constants';\nimport Calculator from './Calculator';\n\nexport const formatLoanWithStructure = ({\n  selectedStructure,\n  structures = [],\n  properties,\n  offers,\n  promotionOptions,\n  borrowers = [],\n}) => {\n  if (structures.length === 0) {\n    return undefined;\n  }\n\n  let structure = {};\n\n  if (selectedStructure) {\n    const foundStructure = structures.find(({ id }) => id === selectedStructure);\n\n    if (foundStructure) {\n      structure = foundStructure;\n\n      if (structure.propertyId) {\n        const property = properties.find(({ _id }) => _id === structure.propertyId);\n        structure = { ...structure, property };\n      }\n\n      if (structure.promotionOptionId) {\n        const promotionOption = promotionOptions.find(({ _id }) => _id === structure.promotionOptionId);\n        structure = {\n          ...structure,\n          property: Calculator.formatPromotionOptionIntoProperty(promotionOption),\n        };\n      }\n\n      if (structure.offerId) {\n        const offer = offers.find(({ _id }) => _id === structure.offerId);\n        structure = { ...structure, offer };\n      }\n\n      if (structure.mortgageNoteIds) {\n        const borrowerMortgageNotes = borrowers.reduce(\n          (arr, { mortgageNotes: notes = [] }) => [...arr, ...notes],\n          [],\n        );\n        const mortgageNotes = structure.mortgageNoteIds.map(id =>\n          borrowerMortgageNotes.find(({ _id }) => _id === id));\n\n        structure = { ...structure, mortgageNotes };\n      }\n    } else {\n      structure = {};\n    }\n\n    return structure;\n  }\n\n  return structure;\n};\n\nexport const formatLoanWithDocuments = (loan) => {\n  if (!loan || !loan.structure) {\n    return loan;\n  }\n\n  const { structure, properties = [] } = loan;\n  const { property, propertyId } = structure;\n  const structureProperty = properties.find(({ _id }) => _id === propertyId);\n  const propertyDocuments = structureProperty && structureProperty.documents;\n\n  return {\n    ...loan,\n    structure: {\n      ...structure,\n      property: property && {\n        ...property,\n        documents: propertyDocuments,\n      },\n    },\n  };\n};\n\nexport const formatLoanWithPromotion = (loan) => {\n  if (loan.structure.promotionOptionId) {\n    const property = Calculator.selectProperty({\n      loan,\n      // Do this to make sure we're getting the promotionOption and not the\n      // fake property created from it\n      structureId: loan.structure.id,\n    });\n    return { ...loan, structure: { ...loan.structure, property } };\n  }\n\n  return loan;\n};\n\nexport const shouldSendStepNotification = (prevStep, nextStep) =>\n  (prevStep === STEPS.SOLVENCY || prevStep === STEPS.REQUEST)\n  && nextStep === STEPS.OFFERS;\n\nexport const nextDueTaskReducer = ({ tasksCache: tasks = [] }) => {\n  const activeTasks = tasks.filter(({\n    status: taskStatus,\n    isPrivate = false,\n    assigneeLink: { _id: assigneeId } = {},\n  }) => {\n    if (taskStatus !== TASK_STATUS.ACTIVE) {\n      return false;\n    }\n\n    if (isPrivate && assigneeId) {\n      return assigneeId === Meteor.userId();\n    }\n\n    return true;\n  });\n  const tasksWithoutDate = activeTasks\n    .filter(({ dueAt }) => !dueAt)\n    .sort(({ createdAt: A }, { createdAt: B }) => A - B);\n\n  if (tasksWithoutDate.length > 0) {\n    const task = tasksWithoutDate[0];\n    return { ...task, dueAt: task.createdAt, noDueDate: true };\n  }\n\n  const sortedTasks = activeTasks.sort(({ dueAt: A }, { dueAt: B }) => A - B);\n\n  if (sortedTasks.length > 0) {\n    return sortedTasks[0];\n  }\n};\n","// @flow\nconst TEST_TIMEOUT = 2000;\nconst INTERVAL = 50;\n\nconst pollUntilReady = (\n  isReadyFunc: (() => boolean) | (() => Promise<boolean>),\n  interval: number = INTERVAL,\n  timeout: number = TEST_TIMEOUT,\n) =>\n  new Promise((resolve, reject) => {\n    let count = 0;\n    let poll;\n\n    const handleIsReady = (isReady) => {\n      const hasTimedOut = count > timeout / interval;\n\n      if (isReady) {\n        clearInterval(poll);\n        resolve(isReady);\n      } else if (hasTimedOut) {\n        clearInterval(poll);\n        reject();\n      }\n\n      count += 1;\n    };\n\n    poll = setInterval(() => {\n      if (isReadyFunc.then) {\n        return isReadyFunc()\n          .then(handleIsReady)\n          .catch(reject);\n      }\n\n      handleIsReady(isReadyFunc());\n    }, interval);\n  });\n\nexport default pollUntilReady;\n","import React from 'react';\nimport { renderComponent } from 'recompose';\nimport get from 'lodash/get';\n\nexport const childrenToComponent = children => props =>\n  React.Children.map(children, child => React.cloneElement(child, props));\n\nexport const renderObjectOrFunction = objectOrFunction =>\n  renderComponent(typeof objectOrFunction === 'function'\n    ? objectOrFunction\n    : () => objectOrFunction);\n\nconst isEqual = (a, b) => {\n  if (Array.isArray(a) || Array.isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    return a.every((item, i) => isEqual(item, b[i]));\n  }\n\n  if (\n    (typeof a === 'object' && a !== null)\n    || (typeof b === 'object' && b !== null)\n  ) {\n    throw new Error('Should not compare objects between each other, use a more nested key');\n  }\n\n  // Ignore edge cases, normally our props should never be NaN or Infinity\n  return a === b;\n};\n\nexport const arePathsEqual = paths => (object1, object2) =>\n  paths.every(path => isEqual(get(object1, path), get(object2, path)));\n\nexport const arePathsUnequal = (paths) => {\n  const testFunc = arePathsEqual(paths);\n  return (...args) => !testFunc(...args);\n};\n","import { Accounts } from 'meteor/accounts-base';\nimport { Meteor } from 'meteor/meteor';\nimport { Roles } from 'meteor/alanning:roles';\n\nimport { ROLES } from '../api/constants';\nimport { IMPERSONATE_ROUTE } from '../api/impersonation/impersonation';\n\nexport const isLogin = path => path.slice(0, 6) === '/login';\n\nexport const WITHOUT_LOGIN = [\n  '/login',\n  '/enroll-account',\n  '/reset-password',\n  '/verify-email',\n  IMPERSONATE_ROUTE,\n];\n\nexport const isOnAllowedRoute = (path, routes) =>\n  routes.some((allowedRoute) => {\n    if (allowedRoute === '/') {\n      return path === allowedRoute;\n    }\n    return path.startsWith(allowedRoute);\n  });\n\nexport const getRedirectIfInRoleForOtherApp = (currentUser, role, app) => {\n  const inApp = Meteor.settings.public.microservice === app;\n  if (inApp) return;\n\n  const inRole = Roles.userIsInRole(currentUser, role);\n  if (!inRole) return;\n\n  const url = [\n    Meteor.settings.public.subdomains[app],\n    '/login-token/',\n    Accounts._storedLoginToken(),\n  ];\n\n  return url.join('');\n};\n\nconst redirectIfInRoleForOtherApp = (...args) => {\n  const url = getRedirectIfInRoleForOtherApp(...args);\n  if (url) window.location.replace(url);\n};\n\nconst getBaseRedirect = (currentUser, pathname, withoutLoginRoutes = []) => {\n  if (!currentUser) {\n    const allowedRoutes = [...WITHOUT_LOGIN, ...withoutLoginRoutes];\n\n    return isOnAllowedRoute(pathname, allowedRoutes)\n      ? false\n      : `/login?path=${pathname}`;\n  }\n\n  const isDev = Roles.userIsInRole(currentUser, ROLES.DEV);\n  if (isDev) {\n    return false;\n  }\n\n  // redirectIfInRoleForOtherApp(currentUser, ROLES.USER, 'app');\n  // redirectIfInRoleForOtherApp(currentUser, ROLES.PRO, 'pro');\n};\n\nexport default getBaseRedirect;\n","// @flow\n\nconst formatReplacerObject = replacers =>\n  Object.keys(replacers).reduce(\n    (obj, key) => ({\n      ...obj,\n      [key.startsWith(':') ? key : `:${key}`]: replacers[key],\n    }),\n    {},\n  );\n\nexport const createRoute = (\n  wildcardPath: string,\n  replacers: { [string]: string } = {},\n): string => {\n  if (!replacers) {\n    return wildcardPath;\n  }\n\n  const formattedReplacers = formatReplacerObject(replacers);\n\n  return Object.keys(formattedReplacers).reduce(\n    (path, replacer) =>\n      path\n        .replace(`${replacer}?`, formattedReplacers[replacer])\n        .replace(replacer, formattedReplacers[replacer]),\n    wildcardPath,\n  );\n};\n","import orderBy from 'lodash/orderBy';\nimport get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\n\nexport const ORDER = {\n  ASC: 'asc',\n  DESC: 'desc',\n};\n\n// Sorts an array of objects by a root or nested property\nexport default (data, fieldPath, order) => {\n  if (isEmpty(fieldPath)) {\n    return data;\n  }\n\n  const iteratee = (item) => {\n    const value = get(item, fieldPath);\n    if (typeof value === 'string') {\n      return value.toLowerCase();\n    }\n\n    return value;\n  };\n\n  return orderBy(data, iteratee, order);\n};\n","// @flow\n// Sorting basics:\n// If the return value is positive, sort a higher up than b\nimport moment from 'moment';\n\nconst isDate = date => date instanceof Date;\n\nconst sortFunc = (a, b) => {\n  if (!a) {\n    return -1;\n  }\n  if (!b) {\n    return 1;\n  }\n\n  if (typeof a === 'string') {\n    if (typeof b === 'string') {\n      // a and b are strings\n\n      return a.localeCompare(b);\n    }\n    // a string and b number\n    return 1; // a > b\n  }\n  if (typeof b === 'string') {\n    // a number and b string\n    return -1; // a < b\n  }\n\n  // a and b are Date\n  if (isDate(a) && isDate(b)) {\n    return moment(b).isBefore(a) ? 1 : -1;\n  }\n\n  // a and b are numbers\n  return Number.parseFloat(a) - Number.parseFloat(b);\n};\n\nconst makeSort = (isAscending = true) => {\n  if (isAscending) {\n    return sortFunc;\n  }\n\n  return (...args) => -1 * sortFunc(...args);\n};\n\nexport default makeSort;\n","import createNumberMask from 'text-mask-addons/dist/createNumberMask';\n\nexport const swissFrancMask = createNumberMask({\n  prefix: '',\n  suffix: '',\n  includeThousandsSeparator: true,\n  thousandsSeparatorSymbol: ' ',\n});\n\nexport const swissFrancMaskDecimal = createNumberMask({\n  prefix: '',\n  suffix: '',\n  includeThousandsSeparator: true,\n  thousandsSeparatorSymbol: ' ',\n  allowDecimal: true,\n  requireDecimal: true,\n});\n\nexport const percentMask = createNumberMask({\n  prefix: '',\n  suffix: '%',\n  allowDecimal: true,\n  decimalSymbol: '.',\n  allowLeadingZeroes: true,\n  allowNegative: true,\n});\n\nexport const decimalMask = createNumberMask({\n  prefix: '',\n  allowDecimal: true,\n  decimalLimit: 3,\n  decimalSymbol: '.',\n  requireDecimal: false,\n  allowLeadingZeroes: true,\n});\n","import intersection from 'lodash/intersection';\nimport flatten from 'lodash/flatten';\n\nimport { ROLES } from '../api/users/userConstants';\n\nexport const isUser = (user) => {\n  if (!user) {\n    return false;\n  }\n\n  const { ADMIN, DEV } = ROLES;\n  const { roles } = user;\n  // make sure `userRoles` is always an array - in case `roles` is a string\n  const userRoles = flatten([roles]);\n\n  const userHasRoles = userRoles && userRoles.length > 0;\n  return userHasRoles && intersection(userRoles, [ADMIN, DEV]).length === 0;\n};\n\nexport const getUserDisplayName = ({ firstName, lastName, emails }) =>\n  [firstName, lastName].filter(name => name).join(' ')\n  || (emails && emails[0] && emails[0].address)\n  || '';\n","import { CANTONS } from '../api/constants';\n\n// Each zipcode has a corresponding number, which is the index of all\n// cantons in an array, sorted by short form ('GE', 'ZH')\nexport const zipcodes = {\n  1000: 22,\n  1200: 7, // Edited to allow 1200 to be used as a zipcode in geneva\n  1260: 22,\n  1281: 7,\n  1291: 22,\n  1292: 7,\n  1295: 22,\n  1298: 7,\n  1299: 22,\n  1468: 6,\n  1509: 22,\n  1527: 6,\n  1530: 22,\n  1532: 6,\n  1534: 22,\n  1541: 6,\n  1543: 22,\n  1544: 6,\n  1545: 22,\n  1553: 6,\n  1554: 22,\n  1563: 6,\n  1580: 22,\n  1583: 6,\n  1584: 22,\n  1609: 6,\n  1610: 22,\n  1611: 6,\n  1612: 22,\n  1614: 6,\n  1657: 5,\n  1658: 22,\n  1661: 6,\n  1682: 22,\n  1684: 6,\n  1738: 5,\n  1740: 6,\n  1797: 5,\n  1800: 22,\n  1868: 23,\n  1880: 22,\n  1890: 23,\n  1892: 22,\n  1893: 23,\n  2000: 12,\n  2333: 5,\n  2336: 10,\n  2400: 12,\n  2502: 5,\n  2523: 12,\n  2532: 5,\n  2540: 18,\n  2542: 5,\n  2544: 18,\n  2552: 5,\n  2714: 10,\n  2715: 5,\n  2718: 10,\n  2720: 5,\n  2800: 10,\n  2814: 3,\n  2822: 10,\n  2827: 5,\n  2828: 10,\n  3004: 5,\n  3175: 6,\n  3176: 5,\n  3178: 6,\n  3179: 5,\n  3182: 6,\n  3183: 5,\n  3184: 6,\n  3202: 5,\n  3206: 6,\n  3207: 5,\n  3210: 6,\n  3225: 5,\n  3253: 18,\n  3255: 5,\n  3280: 6,\n  3282: 5,\n  3284: 6,\n  3292: 5,\n  3307: 18,\n  3308: 5,\n  3801: 23,\n  3803: 5,\n  3900: 23,\n  4001: 4,\n  4101: 3,\n  4108: 18,\n  4117: 3,\n  4118: 18,\n  4123: 3,\n  4125: 4,\n  4127: 3,\n  4143: 18,\n  4144: 3,\n  4145: 18,\n  4147: 3,\n  4204: 18,\n  4207: 3,\n  4208: 18,\n  4222: 3,\n  4226: 18,\n  4242: 3,\n  4245: 18,\n  4246: 3,\n  4247: 18,\n  4253: 3,\n  4303: 0,\n  4304: 3,\n  4305: 0,\n  4402: 3,\n  4412: 18,\n  4414: 3,\n  4421: 18,\n  4422: 3,\n  4468: 18,\n  4469: 3,\n  4500: 18,\n  4536: 5,\n  4542: 18,\n  4564: 5,\n  4565: 18,\n  4663: 0,\n  4702: 18,\n  4704: 5,\n  4710: 18,\n  4800: 0,\n  4806: 11,\n  4812: 0,\n  4900: 5,\n  4915: 11,\n  4916: 5,\n  5000: 0,\n  5012: 18,\n  5017: 0,\n  5735: 11,\n  5736: 0,\n  5746: 18,\n  6003: 11,\n  6042: 0,\n  6043: 11,\n  6052: 13,\n  6053: 14,\n  6083: 5,\n  6102: 11,\n  6197: 5,\n  6203: 11,\n  6300: 24,\n  6344: 11,\n  6345: 24,\n  6353: 11,\n  6362: 13,\n  6377: 21,\n  6382: 13,\n  6388: 14,\n  6402: 17,\n  6404: 11,\n  6405: 17,\n  6441: 21,\n  6442: 17,\n  6452: 21,\n  6500: 20,\n  6534: 9,\n  6571: 20,\n  7000: 9,\n  7310: 15,\n  7402: 9,\n  8001: 25,\n  8109: 0,\n  8112: 25,\n  8200: 16,\n  8212: 25,\n  8213: 16,\n  8245: 25,\n  8252: 19,\n  8260: 16,\n  8264: 19,\n  8302: 25,\n  8355: 19,\n  8400: 25,\n  8454: 16,\n  8457: 25,\n  8500: 19,\n  8523: 25,\n  8524: 19,\n  8542: 25,\n  8547: 19,\n  8548: 25,\n  8552: 19,\n  8600: 25,\n  8638: 15,\n  8700: 25,\n  8715: 15,\n  8750: 8,\n  8751: 21,\n  8752: 8,\n  8800: 25,\n  8806: 17,\n  8810: 25,\n  8832: 17,\n  8833: 25,\n  8834: 17,\n  8865: 8,\n  8872: 15,\n  8874: 8,\n  8877: 15,\n  8902: 25,\n  8905: 0,\n  8906: 25,\n  8916: 0,\n  8925: 25,\n  8956: 0,\n  9000: 15,\n  9035: 1,\n  9036: 15,\n  9037: 1,\n  9050: 2,\n  9052: 1,\n  9054: 2,\n  9055: 1,\n  9057: 2,\n  9062: 1,\n  9108: 2,\n  9112: 1,\n  9113: 15,\n  9213: 19,\n  9230: 15,\n  9306: 19,\n  9308: 15,\n  9314: 19,\n  9323: 15,\n  9325: 19,\n  9327: 15,\n  9405: 1,\n  9413: 2,\n  9414: 1,\n  9422: 15,\n  9426: 1,\n  9430: 15,\n  9442: 2,\n  9443: 15,\n  9485: 26,\n  9500: 15,\n  9502: 19,\n  9512: 15,\n  9514: 19,\n  9523: 15,\n  9532: 19,\n  9533: 15,\n  9535: 19,\n  9536: 15,\n  9542: 19,\n  9552: 15,\n  9553: 19,\n  9601: 15,\n  9999: 5,\n};\n\nexport default (zipcode) => {\n  let result;\n\n  if (zipcode > 9999 || zipcode < 1000) {\n    return null;\n  }\n\n  Object.keys(zipcodes).some((code) => {\n    if (zipcode >= code) {\n      result = code;\n      return false;\n    }\n    return true;\n  });\n\n  const cantonIndex = zipcodes[result];\n\n  const canton = Object.keys(CANTONS)[cantonIndex];\n  return canton;\n};\n\n/**\n * Returns the first zipcode that matches the given canton\n *\n * @param {String} canton\n * @returns Number\n */\nexport const getZipcodeForCanton = (canton) => {\n  const cantonIndex = Object.keys(CANTONS).findIndex(c => c === canton);\n\n  return Object.keys(zipcodes).find((zipcode) => {\n    const cantonIndexForZipcode = zipcodes[zipcode];\n    return cantonIndexForZipcode === cantonIndex;\n  });\n};\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport {\n  getBorrowerInfoArray,\n  getBorrowerFinanceArray,\n} from '../BorrowerFormArray';\n\ndescribe('BorrowerFormArrays', () => {\n  describe('getBorrowerInfoArray', () => {\n    const borrowers = [{ _id: 'id1' }, { _id: 'id2' }, { _id: 'id3' }];\n\n    it('throws an error if a wrong ID is passed', () => {\n      expect(() =>\n        getBorrowerInfoArray({ borrowers, borrowerId: 'id4' })).to.throw();\n    });\n\n    it('returns an array of objects, each having an id', () => {\n      const array = getBorrowerInfoArray({ borrowers, borrowerId: 'id1' });\n\n      expect(typeof array).to.equal('object');\n      expect(array).to.have.length.above(0);\n      array.forEach((field) => {\n        expect(typeof field).to.equal('object');\n        if (field.type !== 'conditionalInput' && field.type !== 'h3') {\n          expect(!!field.id).to.equal(true);\n        }\n      });\n    });\n  });\n\n  describe('getBorrowerFinanceArray', () => {\n    const borrowers = [{ _id: 'id1' }, { _id: 'id2' }, { _id: 'id3' }];\n\n    it('throws an error if a wrong ID is passed', () => {\n      expect(() =>\n        getBorrowerFinanceArray({ borrowers, borrowerId: 'id4' })).to.throw();\n    });\n\n    it('returns an array of objects, each having an id', () => {\n      const array = getBorrowerFinanceArray({ borrowers, borrowerId: 'id1' });\n\n      expect(typeof array).to.equal('object');\n      expect(array).to.have.length.above(0);\n      array.forEach((field) => {\n        expect(typeof field).to.equal('object');\n        if (field.type !== 'conditionalInput' && field.type !== 'h3') {\n          expect(!!field.id).to.equal(true);\n        }\n      });\n    });\n  });\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { getPropertyArray, getPropertyLoanArray } from '../PropertyFormArray';\n\ndescribe('getPropertyArray', () => {\n  it('throws if no loan is passed', () => {\n    expect(() => getPropertyArray({})).to.throw();\n  });\n\n  it('returns an array of objects, with an id in each', () => {\n    const arr = getPropertyArray({\n      property: {},\n      loan: {},\n      borrowers: [{}],\n    });\n    expect(arr).to.have.length.above(0);\n\n    arr.forEach((field) => {\n      if (field.type !== 'conditionalInput' && field.type !== 'h3') {\n        expect(!!field.id).to.equal(true);\n      }\n    });\n  });\n});\n\ndescribe('getPropertyLoanArray', () => {\n  it('returns an array of objects, with an id in each', () => {\n    const arr = getPropertyLoanArray({\n      property: {},\n      loan: {},\n      borrowers: [{}],\n    });\n    expect(arr).to.have.length.above(0);\n\n    arr.forEach((field) => {\n      if (field.type !== 'conditionalInput' && field.type !== 'h3') {\n        expect(!!field.id).to.equal(true);\n      }\n    });\n  });\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport { getPartnerList } from '../partnerList';\n\ndescribe('getPartnerList', () => {\n  it('returns an array of objects', () => {\n    const list = getPartnerList('GE', '');\n    expect(typeof list).to.equal('object');\n    expect(list).to.have.length.above(0);\n    list.forEach(partner => expect(typeof partner).to.equal('object'));\n  });\n\n  it('filters out partners to avoid', () => {\n    const base = getPartnerList('GE');\n    const filtered = getPartnerList('GE', ['banqueDuLeman']);\n\n    expect(base.length).to.equal(filtered.length + 1);\n    expect(!!filtered.find(partner => partner.key === 'banqueDuLeman')).to.be\n      .false;\n  });\n\n  it(\"doesn't filter anything if the partner doesn't exist in the canton\", () => {\n    const base = getPartnerList('VD');\n    const filtered = getPartnerList('VD', ['banqueDuLeman']);\n\n    expect(base.length).to.equal(filtered.length);\n  });\n\n  it(\"doesn't filter anything if the partner doesn't exist in the list\", () => {\n    const base = getPartnerList('GE');\n    const filtered = getPartnerList('GE', ['fakePartner']);\n\n    expect(base.length).to.equal(filtered.length);\n  });\n});\n","/* eslint-env mocha */\nimport { expect } from 'chai';\n\nimport {\n  tooltips,\n  tooltipsById,\n  generalTooltips,\n  offerTableTooltips,\n  TOOLTIP_LISTS,\n} from '../tooltips';\n\ndescribe('tooltips', () => {\n  describe('tooltip lists', () => {\n    [\n      { list: generalTooltips, name: 'general' },\n      { list: offerTableTooltips, name: 'offerTable' },\n    ].forEach(({ list, name }) => {\n      describe(`List: ${name}`, () => {\n        it('is made of objects with at least an id', () => {\n          const tooltipTargets = Object.keys(list);\n\n          tooltipTargets.forEach((tooltipTarget) => {\n            const value = list[tooltipTarget];\n            expect(value).to.be.an('object');\n            expect(value.id).to.be.a('string');\n          });\n        });\n      });\n    });\n  });\n\n  describe('tooltips func', () => {\n    it('should throw if it is given an invalid list id', () => {\n      expect(() => tooltips('wrong id')).to.throw();\n    });\n\n    it('should return an object if given a correct id', () => {\n      expect(typeof tooltips(TOOLTIP_LISTS.GENERAL)).to.equal('object');\n    });\n  });\n\n  describe('tooltipsById', () => {\n    it(\"throws if the id given isn't made of 2 strings with a dot\", () => {\n      expect(() => tooltipsById('')).to.throw('Wrong');\n      expect(() => tooltipsById(TOOLTIP_LISTS.GENERAL)).to.throw('Wrong');\n      expect(() => tooltipsById(1)).to.throw('string');\n      expect(() => tooltipsById(`${TOOLTIP_LISTS.GENERAL}.`)).to.throw('Wrong');\n    });\n\n    it('returns undefined for a non-existent tooltip', () => {\n      expect(tooltipsById(`${TOOLTIP_LISTS.GENERAL}.noexist`)).to.equal(undefined);\n    });\n  });\n});\n","import * as constants from 'core/api/constants';\nimport React from 'react';\n\nimport CantonField from 'core/components/CantonField/CantonField';\nimport BorrowerAddPartner from '../components/BorrowerAddPartner';\n\nconst shouldDisplayAddPartner = ({ b: { civilStatus }, multiple, isFirst }) =>\n  civilStatus === constants.CIVIL_STATUS.MARRIED && !multiple && isFirst;\n\nconst makeArrayOfObjectsInput = id => ({\n  id,\n  type: 'arrayInput',\n  required: false,\n  inputs: [\n    { id: 'description', type: 'textInput' },\n    { id: 'value', type: 'textInput', money: true },\n  ],\n});\n\nexport const getBorrowerInfoArray = ({ borrowers, borrowerId, loanId }) => {\n  const b = borrowers.find(({ _id }) => _id === borrowerId);\n  const multiple = borrowers.length > 1;\n  // If this is the first borrower in the array of borrowers, don't ask for same address\n  const isFirst = borrowers[0]._id === borrowerId;\n\n  if (!b) {\n    throw new Error(\"couldn't find borrower\");\n  }\n\n  const disableAddress = !!b.sameAddress && !isFirst;\n  const addressFieldsAreNecessary = !b.sameAddress;\n\n  return [\n    { id: 'firstName', type: 'textInput' },\n    { id: 'lastName', type: 'textInput' },\n    {\n      id: 'gender',\n      type: 'radioInput',\n      options: Object.values(constants.GENDER),\n    },\n    {\n      id: 'sameAddress',\n      type: 'radioInput',\n      intlValues: { name: borrowers[0].firstName || 'Emprunteur 1' },\n      options: [true, false],\n      condition: multiple && !isFirst,\n    },\n    // {\n    //   id: 'isForeignAddress',\n    //   type: 'radioInput',\n    //   options: [true, false],\n    //   condition: !disableAddress,\n    //   required: addressFieldsAreNecessary,\n    // },\n    {\n      id: 'address1',\n      type: 'textInput',\n      condition: !disableAddress,\n      placeholder: disableAddress && borrowers[0].address1,\n      noIntl: disableAddress,\n      required: addressFieldsAreNecessary,\n    },\n    {\n      id: 'address2',\n      type: 'textInput',\n      condition: !disableAddress,\n      required: false,\n      placeholder: disableAddress && borrowers[0].address2,\n      noIntl: disableAddress,\n    },\n    {\n      id: 'city',\n      type: 'textInput',\n      condition: !disableAddress,\n      placeholder: disableAddress && borrowers[0].address1,\n      noIntl: disableAddress,\n      required: addressFieldsAreNecessary,\n    },\n    {\n      id: 'zipCode',\n      type: 'textInput',\n      condition: !disableAddress,\n      placeholder: disableAddress && borrowers[0].address1,\n      noIntl: disableAddress,\n      required: addressFieldsAreNecessary,\n    },\n    {\n      type: 'custom',\n      id: 'canton',\n      component: <CantonField canton={b.canton} />,\n      condition: !disableAddress,\n      required: addressFieldsAreNecessary,\n    },\n    {\n      type: 'conditionalInput',\n      conditionalTrueValue: false,\n      inputs: [\n        { id: 'isSwiss', type: 'radioInput', options: [true, false] },\n        {\n          id: 'residencyPermit',\n          type: 'selectFieldInput',\n          options: Object.values(constants.RESIDENCY_PERMIT),\n        },\n      ],\n    },\n    // {\n    //   id: 'age',\n    //   type: 'textInput',\n    //   number: true,\n    //   saveOnChange: false,\n    // },\n    {\n      id: 'birthDate',\n      type: 'dateInput',\n    },\n    { id: 'citizenship', type: 'textInput', condition: !b.isSwiss },\n    { id: 'isUSPerson', type: 'radioInput', options: [true, false] },\n    {\n      id: 'civilStatus',\n      type: 'radioInput',\n      options: Object.values(constants.CIVIL_STATUS).map(value => ({\n        id: value,\n      })),\n    },\n    {\n      id: 'addPartner',\n      type: 'custom',\n      component: <BorrowerAddPartner loanId={loanId} />,\n      condition: shouldDisplayAddPartner({ b, multiple, isFirst }),\n      required: false,\n    },\n    { id: 'childrenCount', type: 'textInput', number: true },\n    {\n      id: 'company',\n      type: 'textInput',\n      required: false,\n      autoComplete: 'organisation',\n    },\n  ];\n};\n\nexport const getBorrowerFinanceArray = ({ borrowers, borrowerId }) => {\n  const b = borrowers.find(({ _id }) => _id === borrowerId);\n\n  if (!b) {\n    throw new Error(\"couldn't find borrower\");\n  }\n\n  const incomeArray = [\n    {\n      type: 'h3',\n      id: 'incomeAndExpenses',\n      ignore: true,\n      required: false,\n      className: 'v-align-incomeAndExpenses',\n    },\n    { id: 'salary', type: 'textInput', money: true },\n    { id: 'netSalary', type: 'textInput', money: true },\n    {\n      type: 'conditionalInput',\n      conditionalTrueValue: true,\n      inputs: [\n        {\n          id: 'bonusExists',\n          type: 'radioInput',\n          options: [true, false],\n        },\n        ...[2019, 2018, 2017, 2016, 2015].map(year => ({\n          id: `bonus${year}`,\n          type: 'textInput',\n          money: true,\n          condition: year === 2015 ? !!b.bonus2015 : true,\n        })),\n      ],\n    },\n    {\n      id: 'otherIncome',\n      type: 'arrayInput',\n      required: false,\n      inputs: [\n        {\n          id: 'description',\n          type: 'selectInput',\n          options: Object.values(constants.OTHER_INCOME),\n        },\n        { id: 'value', type: 'textInput', money: true },\n      ],\n    },\n    {\n      id: 'expenses',\n      type: 'arrayInput',\n      required: false,\n      inputs: [\n        {\n          id: 'description',\n          type: 'selectInput',\n          options: Object.values(constants.EXPENSES),\n        },\n        { id: 'value', type: 'textInput', money: true },\n      ],\n    },\n    {\n      type: 'conditionalInput',\n      conditionalTrueValue: true,\n      inputs: [\n        {\n          id: 'hasOwnCompany',\n          type: 'radioInput',\n          options: [true, false],\n        },\n        {\n          id: 'ownCompanies',\n          type: 'arrayInput',\n          inputs: [\n            { id: 'description', type: 'textInput' },\n            { id: 'ownership', type: 'textInput', percent: true },\n            { id: 'netIncome2018', type: 'textInput', money: true },\n            { id: 'netIncome2017', type: 'textInput', money: true },\n            { id: 'netIncome2016', type: 'textInput', money: true },\n          ],\n        },\n      ],\n    },\n  ];\n\n  const fortuneArray = [\n    {\n      type: 'h3',\n      id: 'fortune',\n      ignore: true,\n      required: false,\n      className: 'v-align-fortune',\n    },\n    { id: 'bankFortune', type: 'textInput', money: true },\n    {\n      id: 'thirdPartyFortune',\n      type: 'textInput',\n      money: true,\n      required: false,\n    },\n    {\n      id: 'realEstate',\n      type: 'arrayInput',\n      required: false,\n      inputs: [\n        { id: 'name', type: 'textInput' },\n        {\n          id: 'description',\n          type: 'selectInput',\n          options: Object.values(constants.RESIDENCE_TYPE),\n        },\n        { id: 'value', type: 'textInput', money: true },\n        { id: 'loan', type: 'textInput', money: true },\n        { id: 'income', type: 'textInput', money: true, required: false },\n      ],\n    },\n    makeArrayOfObjectsInput('otherFortune'),\n  ];\n\n  const insuranceArray = [\n    {\n      type: 'h3',\n      id: 'insurance',\n      required: false,\n      ignore: true,\n      className: 'v-align-insurance',\n    },\n    makeArrayOfObjectsInput('insurance2'),\n    makeArrayOfObjectsInput('bank3A'),\n    makeArrayOfObjectsInput('insurance3A'),\n    makeArrayOfObjectsInput('insurance3B'),\n  ];\n\n  return incomeArray.concat([...fortuneArray, ...insuranceArray]);\n};\n\nexport const getSimpleBorrowerFinanceArray = ({ borrowers, borrowerId }) => {\n  const b = borrowers.find(({ _id }) => _id === borrowerId);\n\n  if (!b) {\n    throw new Error(\"couldn't find borrower\");\n  }\n\n  const incomeArray = [\n    {\n      type: 'h3',\n      id: 'financeInformations',\n      ignore: true,\n      required: false,\n      className: 'v-align-financeInformations',\n    },\n    { id: 'salary', type: 'textInput', money: true },\n    { id: 'netSalary', type: 'textInput', money: true },\n    {\n      type: 'conditionalInput',\n      conditionalTrueValue: true,\n      inputs: [\n        {\n          id: 'bonusExists',\n          type: 'radioInput',\n          options: [true, false],\n        },\n        ...[2019, 2018, 2017, 2016, 2015].map(year => ({\n          id: `bonus${year}`,\n          type: 'textInput',\n          money: true,\n          condition: year === 2015 ? !!b.bonus2015 : true,\n        })),\n      ],\n    },\n  ];\n\n  const fortuneArray = [{ id: 'bankFortune', type: 'textInput', money: true }];\n\n  const insuranceArray = [\n    { id: 'insurance2Simple', type: 'textInput', money: true, required: false },\n    { id: 'bank3ASimple', type: 'textInput', money: true, required: false },\n    {\n      id: 'insurance3ASimple',\n      type: 'textInput',\n      money: true,\n      required: false,\n    },\n    {\n      id: 'insurance3BSimple',\n      type: 'textInput',\n      money: true,\n      required: false,\n    },\n  ];\n\n  return incomeArray.concat([...fortuneArray, ...insuranceArray]);\n};\n\nexport const getBorrowerSimpleArray = ({\n  borrowers,\n  borrowerId,\n  loan = {},\n}) => {\n  const b = borrowers.find(borrower => borrower._id === borrowerId);\n  const { simpleBorrowersForm: simple = true } = loan;\n\n  if (!b) {\n    throw new Error(\"couldn't find borrower\");\n  }\n\n  return [\n    { id: 'firstName', type: 'textInput', condition: !loan.anonymous },\n    { id: 'lastName', type: 'textInput', condition: !loan.anonymous },\n    { id: 'birthDate', type: 'dateInput', condition: !loan.anonymous },\n    ...(simple\n      ? getSimpleBorrowerFinanceArray({ borrowers, borrowerId })\n      : getBorrowerFinanceArray({ borrowers, borrowerId })),\n  ];\n};\n","import React from 'react';\n\nimport {\n  PROPERTY_TYPE,\n  PURCHASE_TYPE,\n  OWNER,\n  RESIDENCE_TYPE,\n  MINERGIE_CERTIFICATE,\n  HOUSE_TYPE,\n  FLAT_TYPE,\n  VOLUME_NORM,\n} from 'core/api/constants';\nimport CantonField from 'core/components/CantonField/CantonField';\n\nconst mapInput = (input) => {\n  const intlSafeObject = { ...input };\n  // If the id contains a dot in it, split it and add a intlId\n  // This makes it easier to write intl messages\n  if (input.id && input.id.indexOf('.') > 0) {\n    // Perform some additional slicing to make sure ids with multiple dots\n    // work by removing only the first part\n    intlSafeObject.intlId = input.id\n      .split('.')\n      .slice(1)\n      .join('.');\n  }\n\n  if (input.inputs) {\n    // If there are nested inputs, give them an intlId too\n    intlSafeObject.inputs = input.inputs.map(obj =>\n      (obj.id && obj.id.indexOf('.') > 0\n        ? { ...obj, intlId: obj.id.split('.')[1] }\n        : obj));\n  }\n\n  return intlSafeObject;\n};\n\nconst getOwnerOptions = ({ borrowers }) =>\n  Object.values(OWNER)\n    .filter(value => (borrowers.length === 1 ? value !== OWNER.SECOND : true))\n    .map((value) => {\n      const isFirst = value === OWNER.FIRST;\n      const isSecond = value === OWNER.SECOND;\n      let borrowerFirstName;\n\n      if (borrowers.length <= 1) {\n        borrowerFirstName = null;\n      } else {\n        borrowerFirstName = borrowers[isFirst ? 0 : 1].firstName;\n      }\n\n      return isFirst || isSecond\n        ? {\n          id: isFirst ? 0 : 1,\n          intlValues: {\n            name: borrowerFirstName || `Emprunteur ${isFirst ? 1 : 2}`,\n          },\n        }\n        : value;\n    });\n\nexport const getPropertyLoanArray = ({ loan, borrowers }) => {\n  const r = loan;\n\n  if (!r) {\n    throw new Error('requires a loan');\n  }\n\n  const array = [\n    {\n      type: 'h3',\n      id: 'propertyInfo',\n      ignore: true,\n      required: false,\n    },\n    {\n      id: 'residenceType',\n      type: 'radioInput',\n      options: Object.values(RESIDENCE_TYPE),\n    },\n    {\n      type: 'conditionalInput',\n      conditionalTrueValue: OWNER.OTHER,\n      condition:\n        borrowers.length > 1 && r.purchaseType === PURCHASE_TYPE.REFINANCING,\n      inputs: [\n        {\n          id: 'currentOwner',\n          type: 'radioInput',\n          options: getOwnerOptions({ borrowers }),\n        },\n        { id: 'otherOwner', type: 'textInput' },\n      ],\n    },\n    {\n      type: 'conditionalInput',\n      conditionalTrueValue: OWNER.OTHER,\n      condition:\n        borrowers.length > 1 && r.purchaseType !== PURCHASE_TYPE.REFINANCING,\n      inputs: [\n        {\n          id: 'futureOwner',\n          type: 'radioInput',\n          options: getOwnerOptions({ borrowers }),\n        },\n        {\n          id: 'otherOwner',\n          type: 'textInput',\n        },\n      ],\n    },\n  ];\n\n  return array.map(mapInput);\n};\n\nconst shouldDisplayFloorNumber = ({ propertyType, flatType }) =>\n  propertyType === PROPERTY_TYPE.FLAT\n  && flatType !== FLAT_TYPE.PENTHOUSE_APARTMENT\n  && flatType !== FLAT_TYPE.PENTHOUSE_MAISONETTE\n  && flatType !== FLAT_TYPE.TERRACE_APARTMENT;\n\nconst shouldDisplayTerraceArea = ({ propertyType, flatType }) =>\n  propertyType === PROPERTY_TYPE.FLAT;\n\nexport const getPropertyArray = ({ loan, borrowers, property }) => {\n  const r = loan;\n\n  if (!r) {\n    throw new Error('requires a loan');\n  }\n\n  const array = [\n    { id: 'value', type: 'textInput', money: true },\n    {\n      id: 'investmentRent',\n      type: 'textInput',\n      money: true,\n      condition: r.residenceType === RESIDENCE_TYPE.INVESTMENT,\n    },\n    {\n      id: 'propertyType',\n      type: 'radioInput',\n      options: Object.values(PROPERTY_TYPE),\n    },\n    {\n      id: 'isNew',\n      type: 'radioInput',\n      options: [true, false],\n      condition: r.purchaseType === PURCHASE_TYPE.ACQUISITION,\n    },\n    {\n      id: 'isCoproperty',\n      type: 'radioInput',\n      options: [true, false],\n    },\n    {\n      id: 'copropertyPercentage',\n      type: 'textInput',\n      condition: property.isCoproperty,\n      info: true,\n    },\n    {\n      type: 'h3',\n      id: 'propertyAddress',\n      ignore: true,\n      required: false,\n    },\n    {\n      id: 'address1',\n      type: 'textInput',\n    },\n    {\n      id: 'address2',\n      type: 'textInput',\n      required: false,\n    },\n    {\n      id: 'zipCode',\n      type: 'textInput',\n    },\n    {\n      id: 'city',\n      type: 'textInput',\n    },\n    {\n      type: 'custom',\n      id: 'canton',\n      component: <CantonField canton={property.canton} />,\n    },\n    {\n      type: 'h3',\n      id: 'propertyDetails',\n      ignore: true,\n      required: false,\n    },\n    {\n      id: 'houseType',\n      type: 'radioInput',\n      options: Object.values(HOUSE_TYPE),\n      condition: property.propertyType === PROPERTY_TYPE.HOUSE,\n    },\n    {\n      id: 'flatType',\n      type: 'radioInput',\n      options: Object.values(FLAT_TYPE),\n      condition: property.propertyType === PROPERTY_TYPE.FLAT,\n    },\n    {\n      id: 'numberOfFloors',\n      type: 'textInput',\n      number: true,\n    },\n    {\n      id: 'floorNumber',\n      type: 'textInput',\n      number: true,\n      condition: shouldDisplayFloorNumber(property),\n    },\n    { id: 'constructionYear', type: 'textInput', number: true },\n    {\n      id: 'renovationYear',\n      type: 'textInput',\n      number: true,\n      required: false,\n      info: true,\n    },\n    {\n      id: 'landArea',\n      type: 'textInput',\n      number: true,\n      condition: property.propertyType === PROPERTY_TYPE.HOUSE,\n    },\n    {\n      id: 'insideArea',\n      type: 'textInput',\n      number: true,\n      condition: property.propertyType === PROPERTY_TYPE.FLAT,\n    },\n    {\n      id: 'terraceArea',\n      type: 'textInput',\n      number: true,\n      required: true,\n      condition: shouldDisplayTerraceArea(property),\n    },\n    {\n      id: 'volume',\n      type: 'textInput',\n      number: true,\n      condition: property.propertyType === PROPERTY_TYPE.HOUSE,\n    },\n    {\n      id: 'volumeNorm',\n      type: 'radioInput',\n      options: Object.values(VOLUME_NORM),\n      condition: property.propertyType === PROPERTY_TYPE.HOUSE,\n    },\n    {\n      id: 'roomCount',\n      type: 'textInput',\n      decimal: true,\n      info: true,\n    },\n    { id: 'parkingInside', type: 'textInput', number: true, required: false },\n    { id: 'parkingOutside', type: 'textInput', number: true, required: false },\n    {\n      id: 'minergie',\n      type: 'radioInput',\n      options: Object.values(MINERGIE_CERTIFICATE),\n    },\n    {\n      id: 'yearlyExpenses',\n      type: 'textInput',\n      money: true,\n      required: false,\n      info: true,\n    },\n  ];\n\n  return array.map(mapInput);\n};\n","import {\n  INTEREST_RATES,\n  MORTGAGE_NOTE_TYPES,\n  MORTGAGE_NOTE_CATEGORIES,\n} from '../api/constants';\n\nconst getRefinancingFormArray = ({ loan }) => [\n  {\n    id: 'previousLender',\n    type: 'textInput',\n  },\n  {\n    id: 'previousLoanTranches',\n    type: 'arrayInput',\n    inputs: [\n      {\n        id: 'type',\n        type: 'selectInput',\n        options: Object.values(INTEREST_RATES),\n        intlId: 'loanTranches',\n      },\n      { id: 'value', type: 'textInput', money: true },\n      { id: 'dueDate', type: 'dateInput' },\n      { id: 'rate', type: 'textInput', percent: true },\n    ],\n  },\n  {\n    id: 'mortgageNotes',\n    type: 'arrayInput',\n    inputs: [\n      { id: 'value', type: 'textInput', money: true },\n      { id: 'rank', type: 'textInput', number: true },\n      {\n        id: 'type',\n        type: 'selectInput',\n        options: Object.values(MORTGAGE_NOTE_TYPES),\n      },\n      {\n        id: 'category',\n        type: 'selectInput',\n        options: Object.values(MORTGAGE_NOTE_CATEGORIES),\n      },\n    ],\n  },\n];\n\nexport default getRefinancingFormArray;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCity } from '@fortawesome/pro-light-svg-icons/faCity';\nimport { faBriefcase } from '@fortawesome/pro-light-svg-icons/faBriefcase';\nimport { faChartLine } from '@fortawesome/pro-light-svg-icons/faChartLine';\nimport { faUserTie } from '@fortawesome/pro-light-svg-icons/faUserTie';\nimport { faMoneyBillWave } from '@fortawesome/pro-light-svg-icons/faMoneyBillWave';\n\nimport {\n  BORROWERS_COLLECTION,\n  LOANS_COLLECTION,\n  TASKS_COLLECTION,\n  USERS_COLLECTION,\n  PROPERTIES_COLLECTION,\n  OFFERS_COLLECTION,\n  PROMOTIONS_COLLECTION,\n  ORGANISATIONS_COLLECTION,\n  CONTACTS_COLLECTION,\n  INTEREST_RATES_COLLECTION,\n  REVENUES_COLLECTION,\n} from '../api/constants';\n\nexport default {\n  [BORROWERS_COLLECTION]: 'people',\n  [LOANS_COLLECTION]: 'dollarSign',\n  [TASKS_COLLECTION]: 'check',\n  [USERS_COLLECTION]: 'contactMail',\n  [PROPERTIES_COLLECTION]: 'building',\n  [PROMOTIONS_COLLECTION]: (\n    <FontAwesomeIcon icon={faCity} className=\"collection-icon\" />\n  ),\n  [ORGANISATIONS_COLLECTION]: (\n    <FontAwesomeIcon icon={faBriefcase} className=\"collection-icon\" />\n  ),\n  [CONTACTS_COLLECTION]: (\n    <FontAwesomeIcon icon={faUserTie} className=\"collection-icon\" />\n  ),\n  [OFFERS_COLLECTION]: 'monetizationOn',\n  [INTEREST_RATES_COLLECTION]: (\n    <FontAwesomeIcon icon={faChartLine} className=\"collection-icon\" />\n  ),\n  [REVENUES_COLLECTION]: (\n    <FontAwesomeIcon icon={faMoneyBillWave} className=\"collection-icon\" />\n  ),\n};\n","export const EPOTEK_NUMBER = '+41 22 566 01 10';\nconst employees = [\n  {\n    email: 'lydia@e-potek.ch',\n    src: '/img/team/lydia.jpg',\n    name: 'Lydia Abraha',\n    title: 'Conseillère en financement',\n    appTitle: 'Financement',\n    phoneNumber: '+41 22 566 82 92',\n    _id: 'LGGMr68iXXtW6bQEx',\n    gender: 'F',\n  },\n  {\n    email: 'florian@e-potek.ch',\n    src: '/img/team/florian.jpg',\n    name: 'Florian Bienefelt',\n    title: 'CTO',\n    phoneNumber: '+41 22 566 82 91',\n    _id: 'CHPzFxTDDekwi4JJP',\n    gender: 'M',\n  },\n  {\n    email: 'quentin@e-potek.ch',\n    src: '/img/team/quentin.jpg',\n    name: 'Quentin Herzig',\n    title: 'Software Engineer',\n    phoneNumber: EPOTEK_NUMBER,\n    _id: 'NJskZ6E38JHfqSyNg',\n    gender: 'M',\n  },\n  {\n    email: 'yannis@e-potek.ch',\n    src: '/img/team/yannis.jpg',\n    name: 'Yannis Eggert',\n    title: 'Directeur',\n    appTitle: 'Financement',\n    phoneNumber: '+41 22 566 82 90',\n    _id: 'dcXkoTWLZPemu9x9a',\n    gender: 'M',\n  },\n  {\n    email: 'jeanluc@e-potek.ch',\n    src: '/img/team/jeanluc.jpg',\n    name: 'Jean-Luc Kringel',\n    title: 'Responsable Assurances',\n    appTitle: 'Planification et prévoyance',\n    phoneNumber: '+41 22 566 82 94',\n    _id: 'efe2jpwvRh8J4z4p8',\n    gender: 'M',\n  },\n  {\n    email: '',\n    src: '/img/team/tarik.jpg',\n    name: 'Tarik Lamkarfed',\n    title: 'Marketing & Communications',\n    gender: 'M',\n  },\n  {\n    email: 'max@e-potek.ch',\n    src: '/img/team/max.jpg',\n    name: 'Max Martinez',\n    title: 'Conseiller en financement',\n    appTitle: 'Financement',\n    phoneNumber: '+41 22 566 82 95',\n    _id: 'NumFEubdw2nra6Su8',\n    gender: 'M',\n  },\n];\n\nexport const employeesByEmail = employees.reduce(\n  (acc, employee) =>\n    (employee.email ? { ...acc, [employee.email]: employee } : acc),\n  {},\n);\n\nexport const employeesById = employees.reduce(\n  (acc, employee) =>\n    (employee._id ? { ...acc, [employee._id]: employee } : acc),\n  {},\n);\n\nexport default employees;\n","export const partnerList = [\n  {\n    key: 'banqueDuLeman',\n    name: 'Banque du Léman',\n    logo: 'banqueDuLeman_logo.png',\n    cantons: ['GE'],\n  },\n  {\n    key: 'creditAgricole',\n    name: 'Crédit Agricole Financements Suisse',\n    logo: 'creditAgricole_logo.png',\n    cantons: ['GE'],\n  },\n  {\n    key: 'KFH',\n    name: 'Kreditanstalt für Hypotheken',\n    logo: 'KFH_logo.png',\n    cantons: ['GE'],\n  },\n  {\n    key: 'allianz',\n    name: 'Allianz Suisse',\n    logo: 'allianz_logo.png',\n    cantons: ['GE', 'VD'],\n  },\n  {\n    key: 'postFinance',\n    name: 'PostFinance',\n    logo: 'postFinance_logo.png',\n    cantons: ['GE', 'VD'],\n  },\n  {\n    key: 'banqueMigros',\n    name: 'Banque Migros',\n    logo: 'banqueMigros_logo.png',\n    cantons: ['GE', 'VD'],\n  },\n  {\n    key: 'vaudoiseAssurances',\n    name: 'Vaudoise Assurances',\n    logo: 'vaudoiseAssurances_logo.png',\n    cantons: ['GE', 'VD'],\n  },\n  {\n    key: 'banqueWir',\n    name: 'Banque Wir',\n    logo: 'banqueWir_logo.png',\n    cantons: ['GE'],\n  },\n  {\n    key: 'raiffeisen',\n    name: 'Raiffeisen',\n    logo: 'raiffeisen_logo.png',\n    cantons: ['GE', 'VD'],\n  },\n  {\n    key: 'valiant',\n    name: 'Valiant',\n    logo: 'valiant_logo.png',\n    cantons: ['GE'],\n  },\n  {\n    key: 'swisslife',\n    name: 'Swisslife',\n    logo: 'swisslife_logo.png',\n    cantons: ['GE', 'VD'],\n  },\n  {\n    key: 'banqueCoop',\n    name: 'Banque Coop',\n    logo: 'banqueCoop_logo.png',\n    cantons: ['GE', 'VD'],\n  },\n  {\n    key: 'baloiseAssurances',\n    name: 'Bâloise Assurances',\n    logo: 'baloiseAssurances_logo.png',\n    cantons: ['GE', 'VD'],\n  },\n  {\n    key: 'helvetia',\n    name: 'Helvetia Assurance',\n    logo: 'helvetia_logo.png',\n    cantons: ['GE'],\n  },\n  {\n    key: 'zurichSuisse',\n    name: 'Zurich Suisse',\n    logo: 'zurichSuisse_logo.png',\n    cantons: ['GE'],\n  },\n];\n\n// Given the canton of the borrower and the partners he wants to avoid, return a list of all the\n// lenders we will potentially contact\nexport const getPartnerList = (canton, partnersToAvoid) => {\n  const filteredList = partnerList.filter(partner =>\n    partner.cantons.includes(canton));\n\n  if (partnersToAvoid && partnersToAvoid.length > 0) {\n    partnersToAvoid.forEach((partnerToAvoid, index) => {\n      if (filteredList[index].key === partnerToAvoid) {\n        filteredList.splice(index, 1);\n      }\n    });\n  }\n\n  return filteredList;\n};\n\nexport const getAllPartners = () => partnerList;\n","export const TOOLTIP_LISTS = {\n  GENERAL: 'GENERAL',\n  OFFER_TABLE: 'OFFER_TABLE',\n  DEV: 'DEV',\n  WIDGET1: 'WIDGET1',\n};\n\n// Write the keys in lowercase\n// If `double` is true, it means there need to be 2 strings for the\n// \"Learn More\" part.\nexport const generalTooltips = {\n  finma: { id: 'finma', double: true },\n\n  \"taux d'effort\": { id: 'incomeRatio', double: true },\n  \"taux d'avance\": { id: 'borrowRatio', double: true },\n};\n\nexport const widget1Tooltips = {\n  'plan financier': { id: 'financialPlan', double: true },\n  'structure de financement': { id: 'financialPlan', double: true },\n\n  'charges / revenus': { id: 'incomeRatio', double: true },\n  \"taux d'effort\": { id: 'incomeRatio', double: true },\n\n  'revenus annuels bruts': { id: 'income', double: true },\n  'salaire brut': { id: 'income', double: true },\n  revenus: { id: 'income', double: true },\n\n  bonus: { id: 'bonus', double: true },\n  gratification: { id: 'bonus', double: true },\n\n  emprunteurs: { id: 'borrower' },\n  emprunteur: { id: 'borrower' },\n\n  finma: { id: 'finma', double: true },\n\n  'prêteurs intéressés': { id: 'interestedLenders' },\n\n  \"prêt / prix d'achat\": { id: 'borrowRatio', double: true },\n  \"taux d'avance\": { id: 'borrowRatio', double: true },\n};\n\nexport const offerTableTooltips = {\n  montant: { id: 'offerTable.amount' },\n  libor: { id: 'offerTable.libor' },\n  '2 ans': { id: 'offerTable.2' },\n  '5 ans': { id: 'offerTable.5' },\n  '10 ans': { id: 'offerTable.10' },\n  amortissement: { id: 'offerTable.amortization' },\n  expertise: { id: 'offerTable.expertise' },\n  conditions: { id: 'offerTable.conditions' },\n};\n\nexport const devTooltips = {\n  match1: { id: 'id1' },\n  match2: { id: 'id2' },\n};\n\nexport const tooltips = (list) => {\n  switch (list) {\n  case TOOLTIP_LISTS.GENERAL:\n    return generalTooltips;\n  case TOOLTIP_LISTS.OFFER_TABLE:\n    return offerTableTooltips;\n  case TOOLTIP_LISTS.DEV:\n    return devTooltips;\n  case TOOLTIP_LISTS.WIDGET1:\n    return widget1Tooltips;\n  default:\n    throw new Error(`Unknown tooltip list: \"${list}\"`);\n  }\n};\n\nexport const tooltipsById = (id) => {\n  if (typeof id !== 'string') {\n    throw new Error('not a string');\n  }\n  const [listId, ...ids] = id.split('.');\n\n  if (ids.length < 1 || ids[0] === '') {\n    throw Error('Wrong id given for tooltips, requires 2 strings separated by a .');\n  }\n\n  const list = tooltips(listId);\n\n  return list[ids.join('.')];\n};\n","/* eslint-env mocha */\nimport { Meteor } from 'meteor/meteor';\nimport React from 'react';\nimport { expect } from 'chai';\nimport { mount } from 'core/utils/testHelpers/enzyme';\nimport { MemoryRouter, Route } from 'react-router-dom';\n\nimport withMatchParam from '../withMatchParam';\n\nlet Component1 = withMatchParam('loanId')(props => <div {...props} />);\nconst Component2 = withMatchParam('loanId', '/loans/:loanId')(props => (\n  <span {...props} />\n));\nlet url = '/loans/test/hello';\n\nif (Meteor.isClient) {\n  describe('withMatchParam', () => {\n    const component = () =>\n      mount(<MemoryRouter initialEntries={[url]}>\n        <React.Fragment>\n          <Route path=\"/loans/:loanId/:borrowerId\">\n            <Component1 />\n          </Route>\n          <Component2 />\n        </React.Fragment>\n            </MemoryRouter>);\n\n    beforeEach(() => {});\n\n    it('Finds both components used for testing', () => {\n      expect(component().find('div').length).to.equal(1);\n      expect(component().find('span').length).to.equal(1);\n    });\n\n    it('passes the matched param to the nested component', () => {\n      expect(component()\n        .find('div')\n        .props()).to.deep.include({ loanId: 'test' });\n    });\n\n    it('works if multiple params are passed in an array', () => {\n      Component1 = withMatchParam(['loanId', 'borrowerId'])(props => (\n        <div {...props} />\n      ));\n      expect(component()\n        .find('div')\n        .props()).to.deep.include({ loanId: 'test', borrowerId: 'hello' });\n    });\n\n    it('passes the matched param to the non-nested component', () => {\n      expect(component()\n        .find('span')\n        .props()).to.deep.include({ loanId: 'test' });\n    });\n\n    it('does not break if a totally different url is given', () => {\n      url = '/profile/userId2';\n      expect(component()\n        .find('span')\n        .props()).to.not.contain.key('loanId');\n    });\n  });\n}\n","import { shouldUpdate } from 'recompose';\nimport { arePathsUnequal } from '../utils/reactFunctions';\n\n// Given an array of prop paths, only rerender the component\n// when they change\nexport default paths => shouldUpdate(arePathsUnequal(paths));\n\nexport const ignoreProps = propNames =>\n  shouldUpdate((props, nextProps) => {\n    let update = false;\n\n    Object.keys(nextProps)\n      .filter(propName => !propNames.includes(propName))\n      .some((propName) => {\n        const prop = nextProps[propName];\n\n        if (prop !== props[propName]) {\n          update = true;\n          return true;\n        }\n\n        return false;\n      });\n\n    return update;\n  });\n","// @flow\nimport { withRouter, matchPath } from 'react-router-dom';\nimport isArray from 'lodash/isArray';\nimport { compose, mapProps } from 'recompose';\n\n// Lets you pass a param as a string, or an array of params, and you will get\n// them as simple props from react-router, instead of drilling down\n// match.params.paramName\nexport default (\n  paramName: string | string[] | (() => string),\n  path,\n  { passProps } = {},\n) =>\n  compose(\n    withRouter,\n    mapProps(({ match, history, location, ...rest }) => {\n      let realMatch;\n      if (path) {\n        realMatch = matchPath(history.location.pathname, {\n          path,\n          exact: false,\n          strict: false,\n        });\n      } else {\n        realMatch = match;\n      }\n\n      if (!realMatch) {\n        return { ...rest };\n      }\n\n      if (isArray(paramName)) {\n        return paramName.reduce(\n          (acc, param) => ({ ...acc, [param]: realMatch.params[param] }),\n          { ...rest },\n        );\n      }\n\n      if (typeof paramName === 'function') {\n        const paramNameFromProps = paramName(rest);\n        return {\n          [paramNameFromProps]: realMatch.params[paramNameFromProps],\n          ...rest,\n        };\n      }\n\n      if (passProps) {\n        return {\n          match,\n          history,\n          location,\n          [paramName]: realMatch.params[paramName],\n          ...rest,\n        };\n      }\n\n      return { [paramName]: realMatch.params[paramName], ...rest };\n    }),\n  );\n","import { INTEREST_RATES } from 'core/api/interestRates/interestRatesConstants';\n\nconst colors = {\n  primary: '#005bea',\n  primaryArray: [0, 91, 234],\n  secondary: '#00c6ff',\n  tertiary: '#001a8f',\n  success: '#21d3b5',\n  warning: '#F3AF50',\n  error: '#e01076',\n  borderGrey: '#DEE2E6',\n  charts: ['#2C82BE', '#76DDFB', '#DBECF8', '#53A8E2', '#6AC6FF', '#005bea'],\n  iconColor: '#444',\n  iconHoverColor: '#888',\n  body: '#666',\n  title: '#444',\n  mui: {\n    background: '#fff',\n    contrastText: '#fff',\n    darkPrimary: '#0048bb', // Darken 20%\n    darkSuccess: '#1aa890', // Darken 20%\n  },\n  interestRates: {\n    [INTEREST_RATES.LIBOR]: '#0047AC',\n    [INTEREST_RATES.YEARS_1]: '#2C82BE',\n    [INTEREST_RATES.YEARS_2]: '#A8B9C5',\n    [INTEREST_RATES.YEARS_5]: '#43AAC8',\n    [INTEREST_RATES.YEARS_10]: '#005bea',\n    [INTEREST_RATES.YEARS_15]: '#2075AF',\n    [INTEREST_RATES.YEARS_20]: '#3793CC',\n    [INTEREST_RATES.YEARS_25]: '#53A8E2',\n    irs10y: '#0048bb',\n  },\n};\n\nexport default colors;\n","export const AUTOSAVE_DEBOUNCE = 400; // milliseconds\n","export const NOTARY_FEES = 0.05; // Percent\nexport const AMORTIZATION_STOP = 0.65; // Percent\nexport const MAINTENANCE_REAL = 0.005; // Percent\nexport const MAINTENANCE_FINMA = 0.01; // Percent\nexport const INTERESTS_FINMA = 0.05; // Percent\nexport const APPROXIMATE_LPP_FEES = 0.1; // Percent\nexport const DEFAULT_AMORTIZATION = 0.01; // Percent of property value\nexport const AMORTIZATION_YEARS = 15; // Years\nexport const DEFAULT_INTEREST_RATE = 0.015; // Percent, use 1.5% by default\nexport const MAX_BORROW_RATIO_PRIMARY_PROPERTY = 0.8; // Percent\nexport const MAX_BORROW_RATIO_OTHER = 0.7; // Percent\nexport const MAX_BORROW_RATIO_WITH_PLEDGE = 0.9; // Percent\nexport const MAX_INCOME_RATIO = 1 / 3; // Percent\nexport const MAX_INCOME_RATIO_TIGHT = 0.38; // Percent\nexport const FORTUNE_WARNING_TIGHT = 'FORTUNE_WARNING_TIGHT';\nexport const INCOME_WARNING_TIGHT = 'INCOME_WARNING_TIGHT';\nexport const FORTUNE_ERROR = 'FORTUNE_ERROR';\nexport const INCOME_ERROR = 'INCOME_ERROR';\nexport const CURRENCY = 'CHF';\nexport const MIN_CASH = 0.1; // Percent of property value\nexport const AVERAGE_TAX_RATE = 0.25; // Percent\nexport const SECOND_PILLAR_WITHDRAWAL_TAX_RATE = 0.1; // Percent\nexport const VAT = 0.077;\nexport const BONUS_CONSIDERATION = 0.5;\nexport const BONUS_HISTORY_TO_CONSIDER = 3;\nexport const COMPANY_INCOME_TO_CONSIDER = 1;\nexport const DIVIDENDS_CONSIDERATION = 1;\nexport const DIVIDENDS_HISTORY_TO_CONSIDER = 1;\nexport const PENSION_INCOME_CONSIDERATION = 1;\nexport const REAL_ESTATE_INCOME_CONSIDERATION = 1;\nexport const INVESTMENT_INCOME_CONSIDERATION = 1;\nexport const FORTUNE_RETURNS_RATIO = 0;\nexport const ESTIMATED_COMMISSION = 0.01;\nexport const REFERRAL_COMMISSION = 0.25;\nexport const REFERRAL_COMMISSION_SPLIT = 0.5;\n// Add extra 1 so that rounding errors don't break the comparison\n// f.ex: ???\nexport const OWN_FUNDS_ROUNDING_AMOUNT = 1001;\nexport const BONUS_ALGORITHMS = {\n  AVERAGE: 'AVERAGE',\n  WEAK_AVERAGE: 'WEAK_AVERAGE',\n};\nexport const REAL_ESTATE_INCOME_ALGORITHMS = {\n  DEFAULT: 'DEFAULT',\n  POSITIVE_NEGATIVE_SPLIT: 'POSITIVE_NEGATIVE_SPLIT',\n};\n"]}},{"type":"js","data":"function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/message.js                                                                                       //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet message;\nmodule.link(\"antd/lib/message\", {\n  default(v) {\n    message = v;\n  }\n\n}, 0);\nmodule.exportDefault(message);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}","servePath":"dynamic/imports/core/utils/message.js","sourceMap":{"version":3,"sources":["imports/core/utils/message.js"],"names":["message"],"mappings":";;;;;;;;AAAA;AAAA,gCACA;AAAA;AAAA;AAAA;;AAAA,CADA,EACA,CADA;AAAA,OAAOA,aAAP,CAcA,OAdA,E","file":"dynamic/imports/core/utils/message.js","sourcesContent":["import message from 'antd/lib/message';\n// import 'antd/lib/message/style/index.css';\n\n// API: https://ant.design/components/message/\n// duration is in seconds\n// content can be a string or JSX\n\n// message.success(content, [duration], onClose);\n// message.error(content, [duration], onClose);\n// message.info(content, [duration], onClose);\n// message.warning(content, [duration], onClose);\n// message.warn(content, [duration], onClose); // alias of warning\n// message.loading(content, [duration], onClose);\n\nexport default message;\n"]}},{"type":"js","data":"function(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// imports/core/utils/notification.js                                                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet notification;\nmodule.link(\"antd/lib/notification\", {\n  default(v) {\n    notification = v;\n  }\n\n}, 0);\nmodule.exportDefault(notification);\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}","servePath":"dynamic/imports/core/utils/notification.js","sourceMap":{"version":3,"sources":["imports/core/utils/notification.js"],"names":["notification"],"mappings":";;;;;;;;AAAA;AAAA,qCACA;AAAA;AAAA;AAAA;;AAAA,CADA,EACA,CADA;AAAA,OAAOA,aAAP,CAwBA,YAxBA,E","file":"dynamic/imports/core/utils/notification.js","sourcesContent":["import notification from 'antd/lib/notification';\n// import 'antd/lib/notification/style/index.css';\n\n// API: https://ant.design/components/notification/\n\n// notification.success(config);\n// notification.error(config);\n// notification.info(config);\n// notification.warning(config);\n// notification.warn(config);\n// notification.open(config);\n// notification.close((key: String));\n// notification.destroy();\n\n// Config API\n// Property\t    Description\t                                                                                                  Type\t          Default\n// message     title of the notification (string/JSX)\n// description     message below the title (string/JSX)\n// bottom\t      Distance from the bottom of the viewport, when placement is bottomRight or bottomLeft(unit: pixels).          number\t        24\n// duration\t    Time in seconds before Notification is closed.When set to 0 or null, it will never be closed automatically\t  number\t        4.5\n// getContainer\tReturn the mount node for Notification                                                                        () => HTMLNode  () => document.body\n// placement\t  Position of Notification, can be one of topLeft topRight bottomLeft bottomRight\t                              string\t        topRight\n// top\t        Distance from the top of the viewport, when placement is topRight or topLeft(unit: pixels).                   number\t        24\n\nexport default notification;\n"]}}]