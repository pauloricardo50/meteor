//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
// Source maps are supported by all recent versions of Chrome, Safari,  //
// and Firefox, and by Internet Explorer 11.                            //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var meteorInstall = Package.modules.meteorInstall;
var meteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;
var Promise = Package.promise.Promise;
var Symbol = Package['ecmascript-runtime-client'].Symbol;
var Map = Package['ecmascript-runtime-client'].Map;
var Set = Package['ecmascript-runtime-client'].Set;

/* Package-scope variables */
var userEmail, normalize, analytics;

var require = meteorInstall({"node_modules":{"meteor":{"okgrow:analytics":{"client":{"main.js":function(require,exports,module){

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                    //
// packages/okgrow_analytics/client/main.js                                                                           //
//                                                                                                                    //
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                      //
module.export({                                                                                                       // 1
  analytics: function () {                                                                                            // 1
    return analytics;                                                                                                 // 1
  }                                                                                                                   // 1
});                                                                                                                   // 1
var OKGAnalytics = void 0,                                                                                            // 1
    analytics = void 0,                                                                                               // 1
    trackEventWhenReady = void 0,                                                                                     // 1
    identifyWhenReady = void 0;                                                                                       // 1
module.watch(require("@okgrow/auto-analytics"), {                                                                     // 1
  "default": function (v) {                                                                                           // 1
    OKGAnalytics = v;                                                                                                 // 1
  },                                                                                                                  // 1
  analytics: function (v) {                                                                                           // 1
    analytics = v;                                                                                                    // 1
  },                                                                                                                  // 1
  trackEventWhenReady: function (v) {                                                                                 // 1
    trackEventWhenReady = v;                                                                                          // 1
  },                                                                                                                  // 1
  identifyWhenReady: function (v) {                                                                                   // 1
    identifyWhenReady = v;                                                                                            // 1
  }                                                                                                                   // 1
}, 0);                                                                                                                // 1
var Meteor = void 0;                                                                                                  // 1
module.watch(require("meteor/meteor"), {                                                                              // 1
  Meteor: function (v) {                                                                                              // 1
    Meteor = v;                                                                                                       // 1
  }                                                                                                                   // 1
}, 1);                                                                                                                // 1
var Mongo = void 0;                                                                                                   // 1
module.watch(require("meteor/mongo"), {                                                                               // 1
  Mongo: function (v) {                                                                                               // 1
    Mongo = v;                                                                                                        // 1
  }                                                                                                                   // 1
}, 2);                                                                                                                // 1
var Tracker = void 0;                                                                                                 // 1
module.watch(require("meteor/tracker"), {                                                                             // 1
  Tracker: function (v) {                                                                                             // 1
    Tracker = v;                                                                                                      // 1
  }                                                                                                                   // 1
}, 3);                                                                                                                // 1
/* eslint-enable */var AnalyticsUsers = new Mongo.Collection('AnalyticsUsers');                                       // 7
var SETTINGS = Meteor.settings && Meteor.settings.public && Meteor.settings.public.analyticsSettings || false;        // 11
OKGAnalytics(SETTINGS);                                                                                               // 16
                                                                                                                      //
var getUserEmail = function () {                                                                                      // 18
  function getUserEmail() {                                                                                           // 18
    var userEmailAddress = null;                                                                                      // 19
                                                                                                                      //
    if (Meteor.userId()) {                                                                                            // 21
      var user = AnalyticsUsers.findOne({                                                                             // 22
        _id: Meteor.userId()                                                                                          // 22
      }, {                                                                                                            // 22
        fields: {                                                                                                     // 23
          emails: 1,                                                                                                  // 24
          'services.facebook.email': 1,                                                                               // 25
          'services.google.email': 1,                                                                                 // 26
          'services.github.email': 1                                                                                  // 27
        }                                                                                                             // 23
      });                                                                                                             // 22
                                                                                                                      //
      if (user && user.emails && user.emails[0]) {                                                                    // 31
        userEmailAddress = user.emails[0].address;                                                                    // 32
      } else if (user && user.services) {                                                                             // 33
        var services = user.services;                                                                                 // 34
                                                                                                                      //
        if (services.facebook) {                                                                                      // 36
          userEmailAddress = services.facebook.email;                                                                 // 37
        } else if (services.github) {                                                                                 // 38
          userEmailAddress = services.github.email;                                                                   // 39
        } else if (services.google) {                                                                                 // 40
          userEmailAddress = services.google.email;                                                                   // 41
        }                                                                                                             // 42
      }                                                                                                               // 43
    }                                                                                                                 // 44
                                                                                                                      //
    return userEmailAddress;                                                                                          // 46
  }                                                                                                                   // 47
                                                                                                                      //
  return getUserEmail;                                                                                                // 18
}(); // Track and report Meteor's login & logout events to analytics.                                                 // 18
// TODO: Add support for sign up event.                                                                               // 50
// TODO: Refactor to remove initialized.                                                                              // 51
                                                                                                                      //
                                                                                                                      //
var initialized = false;                                                                                              // 52
                                                                                                                      //
var trackLogins = function () {                                                                                       // 54
  function trackLogins() {                                                                                            // 54
    // Don't run on first time. We need to access Meteor.userId() for reactivity.                                     // 55
    Meteor.userId();                                                                                                  // 56
                                                                                                                      //
    if (initialized) {                                                                                                // 58
      // When Meteor.userId() changes this will run.                                                                  // 59
      if (Meteor.userId()) {                                                                                          // 60
        // TODO: I think it's not guaranteed that userEmail has been set because the                                  // 61
        // 'AnalyticsUsers' publication might not be ready yet.                                                       // 62
        identifyWhenReady(Meteor.userId(), {                                                                          // 63
          email: getUserEmail()                                                                                       // 63
        });                                                                                                           // 63
        trackEventWhenReady('Signed in');                                                                             // 64
      } else {                                                                                                        // 65
        trackEventWhenReady('Signed out');                                                                            // 66
      }                                                                                                               // 67
    }                                                                                                                 // 68
                                                                                                                      //
    initialized = true;                                                                                               // 70
  }                                                                                                                   // 71
                                                                                                                      //
  return trackLogins;                                                                                                 // 54
}();                                                                                                                  // 54
                                                                                                                      //
Meteor.startup(function () {                                                                                          // 73
  if (Package['accounts-base']) {                                                                                     // 74
    Tracker.autorun(function () {                                                                                     // 75
      userEmail = getUserEmail();                                                                                     // 76
    });                                                                                                               // 77
    Tracker.autorun(trackLogins);                                                                                     // 79
  }                                                                                                                   // 80
});                                                                                                                   // 81
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"node_modules":{"@okgrow":{"auto-analytics":{"index.js":function(require,exports,module){

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                    //
// node_modules/meteor/okgrow_analytics/node_modules/@okgrow/auto-analytics/index.js                                  //
//                                                                                                                    //
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                      //
module.exports = require('./dist/index');                                                                             // 1
                                                                                                                      // 2
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"dist":{"index.js":function(require,exports){

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                    //
// node_modules/meteor/okgrow_analytics/node_modules/@okgrow/auto-analytics/dist/index.js                             //
//                                                                                                                    //
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                      //
'use strict';                                                                                                         // 1
                                                                                                                      // 2
Object.defineProperty(exports, "__esModule", {                                                                        // 3
  value: true                                                                                                         // 4
});                                                                                                                   // 5
exports.identifyWhenReady = exports.trackPageWhenReady = exports.trackEventWhenReady = exports.analytics = undefined;
                                                                                                                      // 7
exports.default = function (settings) {                                                                               // 8
  // Doing this because some weird things happen when we just pass this to                                            // 9
  // the functions above.                                                                                             // 10
  SETTINGS = settings;                                                                                                // 11
  // Set everything up...                                                                                             // 12
  bootstrapAnalytics();                                                                                               // 13
};                                                                                                                    // 14
                                                                                                                      // 15
var _helpers = require('./helpers');                                                                                  // 16
                                                                                                                      // 17
var _analytics = require('../vendor/analytics.min');                                                                  // 18
                                                                                                                      // 19
var _analytics2 = _interopRequireDefault(_analytics);                                                                 // 20
                                                                                                                      // 21
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }                       // 22
                                                                                                                      // 23
// Make anayltics available globally in the console                                                                   // 24
/* globals window, location, document */                                                                              // 25
                                                                                                                      // 26
window.analytics = _analytics2.default;                                                                               // 27
                                                                                                                      // 28
// Doing this because some weird things happen when we just pass settings as an                                       // 29
// argument to the functions below.                                                                                   // 30
var SETTINGS = false;                                                                                                 // 31
                                                                                                                      // 32
// This is where analytics gets called...                                                                             // 33
var logPageLoad = function logPageLoad(title, referrer) {                                                             // 34
  // Use setTimeout so it uses the location from after the route change                                               // 35
  setTimeout(function () {                                                                                            // 36
    var page = {                                                                                                      // 37
      title: title,                                                                                                   // 38
      referrer: referrer,                                                                                             // 39
      path: location.pathname,                                                                                        // 40
      search: location.search,                                                                                        // 41
      url: location.href                                                                                              // 42
    };                                                                                                                // 43
                                                                                                                      // 44
    // Track page on analytics                                                                                        // 45
    (0, _helpers.trackPageWhenReady)(page.title, page);                                                               // 46
  }, 0);                                                                                                              // 47
};                                                                                                                    // 48
                                                                                                                      // 49
// A simple wrapper to be explicit about doing the first page load...                                                 // 50
var logFirstPageLoad = function logFirstPageLoad() {                                                                  // 51
  logPageLoad(document.title, document.referrer);                                                                     // 52
};                                                                                                                    // 53
                                                                                                                      // 54
//                                                                                                                    // 55
// What we're doing here is Monkey Patching(tm) the window.history.pushState()                                        // 56
// function because, currently, the History API provides the 'popstate' event                                         // 57
// but this event only gets fired when history.back(), history.go() are called                                        // 58
// or the user uses the browser buttons, but NOT when history.pushState() is                                          // 59
// called.                                                                                                            // 60
//                                                                                                                    // 61
                                                                                                                      // 62
var configurePageLoadTracking = function configurePageLoadTracking() {                                                // 63
  // Save reference to original pushState.                                                                            // 64
  var originalPushState = window.history.pushState;                                                                   // 65
                                                                                                                      // 66
  // Wrap original pushState to call new push state function                                                          // 67
  // NOTE: this can't be an arrow function!                                                                           // 68
  window.history.pushState = function okgrowAnalyticsMonkeyPatchedPushState() {                                       // 69
    // Make sure we catch any exception here so that we're sure to call the                                           // 70
    // originalPushState function (below)                                                                             // 71
    try {                                                                                                             // 72
      logPageLoad(document.title, location.href);                                                                     // 73
    } catch (e) {                                                                                                     // 74
      console.error(e); // eslint-disable-line no-console                                                             // 75
    }                                                                                                                 // 76
                                                                                                                      // 77
    // Call original pushState with incoming arguments                                                                // 78
                                                                                                                      // 79
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {                            // 80
      args[_key] = arguments[_key];                                                                                   // 81
    }                                                                                                                 // 82
                                                                                                                      // 83
    return originalPushState.apply(window.history, args);                                                             // 84
  };                                                                                                                  // 85
                                                                                                                      // 86
  window.addEventListener('popstate', function () {                                                                   // 87
    logPageLoad(document.title, location.href);                                                                       // 88
  }, false);                                                                                                          // 89
};                                                                                                                    // 90
                                                                                                                      // 91
var analyticsStartup = function analyticsStartup() {                                                                  // 92
  if (SETTINGS) {                                                                                                     // 93
    // Pass a new object based on settings in case analytics wants or tries to                                        // 94
    // modify the settings object being passed.                                                                       // 95
    _analytics2.default.initialize(Object.assign({}, SETTINGS));                                                      // 96
                                                                                                                      // 97
    if (SETTINGS.autorun !== false) {                                                                                 // 98
      logFirstPageLoad();                                                                                             // 99
      configurePageLoadTracking();                                                                                    // 100
    }                                                                                                                 // 101
  } else {                                                                                                            // 102
    console.error('Missing analyticsSettings in Meteor.settings.public'); // eslint-disable-line no-console           // 103
  }                                                                                                                   // 104
};                                                                                                                    // 105
                                                                                                                      // 106
//                                                                                                                    // 107
// What we're doing here is hooking into the window.onload event to:                                                  // 108
//                                                                                                                    // 109
// a) log the first page load, and                                                                                    // 110
// b) setup logging for subsequent page/history changes                                                               // 111
//                                                                                                                    // 112
// NOTE: One concern here is the following scenario:                                                                  // 113
//                                                                                                                    // 114
//       1. This code loads                                                                                           // 115
//       2. Some other code loads and replaces window.onload kicking us out                                           // 116
//          BEFORE our function can execute.                                                                          // 117
//                                                                                                                    // 118
// Possible solution is that we make analyticsStartup() (above) a public API                                          // 119
// a developer can call to manually set this all up.                                                                  // 120
//                                                                                                                    // 121
                                                                                                                      // 122
var bootstrapAnalytics = function bootstrapAnalytics() {                                                              // 123
  var originalWindowOnLoad = window.onload;                                                                           // 124
                                                                                                                      // 125
  if (typeof originalWindowOnLoad === 'function') {                                                                   // 126
    window.onload = function okgrowAnalyticsMonkeyPatchedOnLoad() {                                                   // 127
      analyticsStartup(SETTINGS);                                                                                     // 128
                                                                                                                      // 129
      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {                    // 130
        args[_key2] = arguments[_key2];                                                                               // 131
      }                                                                                                               // 132
                                                                                                                      // 133
      originalWindowOnLoad.apply(this, args);                                                                         // 134
    };                                                                                                                // 135
  } else {                                                                                                            // 136
    window.onload = analyticsStartup;                                                                                 // 137
  }                                                                                                                   // 138
};                                                                                                                    // 139
                                                                                                                      // 140
// Make analytics available as an export                                                                              // 141
exports.analytics = _analytics2.default; // eslint-disable-line import/prefer-default-export                          // 142
                                                                                                                      // 143
// Make our helpers available                                                                                         // 144
                                                                                                                      // 145
exports.trackEventWhenReady = _helpers.trackEventWhenReady;                                                           // 146
exports.trackPageWhenReady = _helpers.trackPageWhenReady;                                                             // 147
exports.identifyWhenReady = _helpers.identifyWhenReady;                                                               // 148
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

},"helpers.js":function(require,exports){

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                    //
// node_modules/meteor/okgrow_analytics/node_modules/@okgrow/auto-analytics/dist/helpers.js                           //
//                                                                                                                    //
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                      //
'use strict';                                                                                                         // 1
                                                                                                                      // 2
Object.defineProperty(exports, "__esModule", {                                                                        // 3
  value: true                                                                                                         // 4
});                                                                                                                   // 5
exports.identifyWhenReady = exports.trackPageWhenReady = exports.trackEventWhenReady = undefined;                     // 6
                                                                                                                      // 7
var _analytics = require('../vendor/analytics.min');                                                                  // 8
                                                                                                                      // 9
var _analytics2 = _interopRequireDefault(_analytics);                                                                 // 10
                                                                                                                      // 11
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }                       // 12
                                                                                                                      // 13
//                                                                                                                    // 14
// analytics.js may not have loaded it's integrations by the time we start                                            // 15
// tracking events, page views and identifies. So we can use these *WhenReady()                                       // 16
// functions to defer the action until all the intgrations are ready.                                                 // 17
//                                                                                                                    // 18
// TODO: Consider whether to export something like this, maybe provide our own                                        // 19
//       API instead of just using analytics.js API.                                                                  // 20
//                                                                                                                    // 21
                                                                                                                      // 22
var trackEventWhenReady = function trackEventWhenReady() {                                                            // 23
  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {                              // 24
    args[_key] = arguments[_key];                                                                                     // 25
  }                                                                                                                   // 26
                                                                                                                      // 27
  return _analytics2.default.ready(function () {                                                                      // 28
    return _analytics2.default.track.apply(undefined, args);                                                          // 29
  });                                                                                                                 // 30
};                                                                                                                    // 31
                                                                                                                      // 32
var trackPageWhenReady = function trackPageWhenReady() {                                                              // 33
  for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {                        // 34
    args[_key2] = arguments[_key2];                                                                                   // 35
  }                                                                                                                   // 36
                                                                                                                      // 37
  return _analytics2.default.ready(function () {                                                                      // 38
    return _analytics2.default.page.apply(undefined, args);                                                           // 39
  });                                                                                                                 // 40
};                                                                                                                    // 41
                                                                                                                      // 42
var identifyWhenReady = function identifyWhenReady() {                                                                // 43
  for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {                        // 44
    args[_key3] = arguments[_key3];                                                                                   // 45
  }                                                                                                                   // 46
                                                                                                                      // 47
  return _analytics2.default.ready(function () {                                                                      // 48
    return _analytics2.default.identify.apply(undefined, args);                                                       // 49
  });                                                                                                                 // 50
};                                                                                                                    // 51
                                                                                                                      // 52
exports.trackEventWhenReady = trackEventWhenReady;                                                                    // 53
exports.trackPageWhenReady = trackPageWhenReady;                                                                      // 54
exports.identifyWhenReady = identifyWhenReady;                                                                        // 55
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"vendor":{"analytics.min.js":function(require,exports,module){

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                    //
// node_modules/meteor/okgrow_analytics/node_modules/@okgrow/auto-analytics/vendor/analytics.min.js                   //
//                                                                                                                    //
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                      //
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.analytics=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var analytics=require("@segment/analytics.js-core");var Integrations=require("./integrations");module.exports=exports=analytics;analytics.require=require;exports.VERSION=require("../package.json").version;Object.keys(Integrations).forEach(function(name){analytics.use(Integrations[name])})},{"../package.json":190,"./integrations":2,"@segment/analytics.js-core":23}],2:[function(require,module,exports){"use strict";module.exports={amplitude:require("@segment/analytics.js-integration-amplitude"),chartbeat:require("@segment/analytics.js-integration-chartbeat"),comscore:require("@segment/analytics.js-integration-comscore"),"google-analytics":require("@segment/analytics.js-integration-google-analytics"),hubspot:require("@segment/analytics.js-integration-hubspot"),intercom:require("@segment/analytics.js-integration-intercom"),"keen-io":require("@segment/analytics.js-integration-keen-io"),kissmetrics:require("@segment/analytics.js-integration-kissmetrics"),mixpanel:require("@segment/analytics.js-integration-mixpanel"),quantcast:require("@segment/analytics.js-integration-quantcast"),segmentio:require("@segment/analytics.js-integration-segmentio")}},{"@segment/analytics.js-integration-amplitude":30,"@segment/analytics.js-integration-chartbeat":37,"@segment/analytics.js-integration-comscore":44,"@segment/analytics.js-integration-google-analytics":51,"@segment/analytics.js-integration-hubspot":58,"@segment/analytics.js-integration-intercom":65,"@segment/analytics.js-integration-keen-io":72,"@segment/analytics.js-integration-kissmetrics":79,"@segment/analytics.js-integration-mixpanel":86,"@segment/analytics.js-integration-quantcast":93,"@segment/analytics.js-integration-segmentio":100}],3:[function(require,module,exports){"use strict";var arity=require("@ndhoule/arity");var objToString=Object.prototype.toString;var isFunction=function(val){return typeof val==="function"};var isNumber=function(val){var type=typeof val;return type==="number"||type==="object"&&objToString.call(val)==="[object Number]"};var after=function after(n,fn){if(!isNumber(n)){throw new TypeError("Expected a number but received "+typeof n)}if(!isFunction(fn)){throw new TypeError("Expected a function but received "+typeof fn)}var callCount=0;return arity(fn.length,function(){callCount+=1;if(callCount<n){return}return fn.apply(this,arguments)})};module.exports=after},{"@ndhoule/arity":4}],4:[function(require,module,exports){"use strict";var objToString=Object.prototype.toString;var isFunction=function(val){return typeof val==="function"};var isNumber=function(val){var type=typeof val;return type==="number"||type==="object"&&objToString.call(val)==="[object Number]"};var createParams=function createParams(n){var args=[];for(var i=1;i<=n;i+=1){args.push("arg"+i)}return args};var createArityWrapper=function createArityWrapper(n){var paramNames=createParams(n).join(", ");var wrapperBody="".concat("  return function(",paramNames,") {\n","    return func.apply(this, arguments);\n","  };");return new Function("func",wrapperBody)};var arityWrapperCache=[function(fn){return function(){return fn.apply(this,arguments)}},function(fn){return function(arg1){return fn.apply(this,arguments)}},function(fn){return function(arg1,arg2){return fn.apply(this,arguments)}},function(fn){return function(arg1,arg2,arg3){return fn.apply(this,arguments)}},function(fn){return function(arg1,arg2,arg3,arg4){return fn.apply(this,arguments)}},function(fn){return function(arg1,arg2,arg3,arg4,arg5){return fn.apply(this,arguments)}}];var arity=function arity(n,func){if(!isFunction(func)){throw new TypeError("Expected a function but got "+typeof func)}n=Math.max(isNumber(n)?n:0,0);if(!arityWrapperCache[n]){arityWrapperCache[n]=createArityWrapper(n)}return arityWrapperCache[n](func)};module.exports=arity},{}],5:[function(require,module,exports){"use strict";var type=require("component-type");var clone=function clone(obj){var t=type(obj);if(t==="object"){var copy={};for(var key in obj){if(obj.hasOwnProperty(key)){copy[key]=clone(obj[key])}}return copy}if(t==="array"){var copy=new Array(obj.length);for(var i=0,l=obj.length;i<l;i++){copy[i]=clone(obj[i])}return copy}if(t==="regexp"){var flags="";flags+=obj.multiline?"m":"";flags+=obj.global?"g":"";flags+=obj.ignoreCase?"i":"";return new RegExp(obj.source,flags)}if(t==="date"){return new Date(obj.getTime())}return obj};module.exports=clone},{"component-type":134}],6:[function(require,module,exports){"use strict";var drop=require("@ndhoule/drop");var rest=require("@ndhoule/rest");var has=Object.prototype.hasOwnProperty;var objToString=Object.prototype.toString;var isObject=function isObject(value){return Boolean(value)&&typeof value==="object"};var isPlainObject=function isPlainObject(value){return Boolean(value)&&objToString.call(value)==="[object Object]"};var shallowCombiner=function shallowCombiner(target,source,value,key){if(has.call(source,key)&&target[key]===undefined){target[key]=value}return source};var deepCombiner=function(target,source,value,key){if(has.call(source,key)){if(isPlainObject(target[key])&&isPlainObject(value)){target[key]=defaultsDeep(target[key],value)}else if(target[key]===undefined){target[key]=value}}return source};var defaultsWith=function(combiner,target){if(!isObject(target)){return target}combiner=combiner||shallowCombiner;var sources=drop(2,arguments);for(var i=0;i<sources.length;i+=1){for(var key in sources[i]){combiner(target,sources[i],sources[i][key],key)}}return target};var defaultsDeep=function defaultsDeep(target){return defaultsWith.apply(null,[deepCombiner,target].concat(rest(arguments)))};var defaults=function(target){return defaultsWith.apply(null,[null,target].concat(rest(arguments)))};module.exports=defaults;module.exports.deep=defaultsDeep},{"@ndhoule/drop":7,"@ndhoule/rest":16}],7:[function(require,module,exports){"use strict";var max=Math.max;var drop=function drop(count,collection){var length=collection?collection.length:0;if(!length){return[]}var toDrop=max(Number(count)||0,0);var resultsLength=max(length-toDrop,0);var results=new Array(resultsLength);for(var i=0;i<resultsLength;i+=1){results[i]=collection[i+toDrop]}return results};module.exports=drop},{}],8:[function(require,module,exports){"use strict";var keys=require("@ndhoule/keys");var objToString=Object.prototype.toString;var isNumber=function isNumber(val){var type=typeof val;return type==="number"||type==="object"&&objToString.call(val)==="[object Number]"};var isArray=typeof Array.isArray==="function"?Array.isArray:function isArray(val){return objToString.call(val)==="[object Array]"};var isArrayLike=function isArrayLike(val){return val!=null&&(isArray(val)||val!=="function"&&isNumber(val.length))};var arrayEach=function arrayEach(iterator,array){for(var i=0;i<array.length;i+=1){if(iterator(array[i],i,array)===false){break}}};var baseEach=function baseEach(iterator,object){var ks=keys(object);for(var i=0;i<ks.length;i+=1){if(iterator(object[ks[i]],ks[i],object)===false){break}}};var each=function each(iterator,collection){return(isArrayLike(collection)?arrayEach:baseEach).call(this,iterator,collection)};module.exports=each},{"@ndhoule/keys":13}],9:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var every=function every(predicate,collection){if(typeof predicate!=="function"){throw new TypeError("`predicate` must be a function but was a "+typeof predicate)}var result=true;each(function(val,key,collection){result=!!predicate(val,key,collection);if(!result){return false}},collection);return result};module.exports=every},{"@ndhoule/each":8}],10:[function(require,module,exports){"use strict";var has=Object.prototype.hasOwnProperty;var extend=function extend(dest){var sources=Array.prototype.slice.call(arguments,1);for(var i=0;i<sources.length;i+=1){for(var key in sources[i]){if(has.call(sources[i],key)){dest[key]=sources[i][key]}}}return dest};module.exports=extend},{}],11:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var foldl=function foldl(iterator,accumulator,collection){if(typeof iterator!=="function"){throw new TypeError("Expected a function but received a "+typeof iterator)}each(function(val,i,collection){accumulator=iterator(accumulator,val,i,collection)},collection);return accumulator};module.exports=foldl},{"@ndhoule/each":8}],12:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var strIndexOf=String.prototype.indexOf;var sameValueZero=function sameValueZero(value1,value2){if(value1===value2){return value1!==0||1/value1===1/value2}return value1!==value1&&value2!==value2};var includes=function includes(searchElement,collection){var found=false;if(typeof collection==="string"){return strIndexOf.call(collection,searchElement)!==-1}each(function(value){if(sameValueZero(value,searchElement)){found=true;return false}},collection);return found};module.exports=includes},{"@ndhoule/each":8}],13:[function(require,module,exports){"use strict";var hop=Object.prototype.hasOwnProperty;var strCharAt=String.prototype.charAt;var toStr=Object.prototype.toString;var charAt=function(str,index){return strCharAt.call(str,index)};var has=function has(context,prop){return hop.call(context,prop)};var isString=function isString(val){return toStr.call(val)==="[object String]"};var isArrayLike=function isArrayLike(val){return val!=null&&(typeof val!=="function"&&typeof val.length==="number")};var indexKeys=function indexKeys(target,pred){pred=pred||has;var results=[];for(var i=0,len=target.length;i<len;i+=1){if(pred(target,i)){results.push(String(i))}}return results};var objectKeys=function objectKeys(target,pred){pred=pred||has;var results=[];for(var key in target){if(pred(target,key)){results.push(String(key))}}return results};var keys=function keys(source){if(source==null){return[]}if(isString(source)){return indexKeys(source,charAt)}if(isArrayLike(source)){return indexKeys(source,has)}return objectKeys(source)};module.exports=keys},{}],14:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var map=function map(iterator,collection){if(typeof iterator!=="function"){throw new TypeError("Expected a function but received a "+typeof iterator)}var result=[];each(function(val,i,collection){result.push(iterator(val,i,collection))},collection);return result};module.exports=map},{"@ndhoule/each":8}],15:[function(require,module,exports){"use strict";var objToString=Object.prototype.toString;var existy=function(val){return val!=null};var isArray=function(val){return objToString.call(val)==="[object Array]"};var isString=function(val){return typeof val==="string"||objToString.call(val)==="[object String]"};var isObject=function(val){return val!=null&&typeof val==="object"};var pick=function pick(props,object){if(!existy(object)||!isObject(object)){return{}}if(isString(props)){props=[props]}if(!isArray(props)){props=[]}var result={};for(var i=0;i<props.length;i+=1){if(isString(props[i])&&props[i]in object){result[props[i]]=object[props[i]]}}return result};module.exports=pick},{}],16:[function(require,module,exports){"use strict";var max=Math.max;var rest=function rest(collection){if(collection==null||!collection.length){return[]}var results=new Array(max(collection.length-2,0));for(var i=1;i<collection.length;i+=1){results[i-1]=collection[i]}return results};module.exports=rest},{}],17:[function(require,module,exports){"use strict";var parse=require("component-querystring").parse;var QUERYIDS={btid:"dataxu",urid:"millennial-media"};function ads(query){var params=parse(query);for(var key in params){if(params.hasOwnProperty(key)){for(var id in QUERYIDS){if(QUERYIDS.hasOwnProperty(id)){if(key===id){return{id:params[key],type:QUERYIDS[id]}}}}}}}module.exports=ads},{"component-querystring":132}],18:[function(require,module,exports){var type=require("component-type");var clone=require("component-clone");module.exports=alias;function alias(obj,method){switch(type(method)){case"object":return aliasByDictionary(clone(obj),method);case"function":return aliasByFunction(clone(obj),method)}}function aliasByDictionary(obj,aliases){for(var key in aliases){if(undefined===obj[key])continue;obj[aliases[key]]=obj[key];delete obj[key]}return obj}function aliasByFunction(obj,convert){var output={};for(var key in obj)output[convert(key)]=obj[key];return output}},{"component-clone":124,"component-type":134}],19:[function(require,module,exports){(function(global){"use strict";var _analytics=global.analytics;var Alias=require("segmentio-facade").Alias;var Emitter=require("component-emitter");var Group=require("segmentio-facade").Group;var Identify=require("segmentio-facade").Identify;var Page=require("segmentio-facade").Page;var Track=require("segmentio-facade").Track;var after=require("@ndhoule/after");var bindAll=require("bind-all");var clone=require("@ndhoule/clone");var cookie=require("./cookie");var debug=require("debug");var defaults=require("@ndhoule/defaults");var each=require("@ndhoule/each");var foldl=require("@ndhoule/foldl");var group=require("./group");var is=require("is");var isMeta=require("@segment/is-meta");var keys=require("@ndhoule/keys");var memory=require("./memory");var nextTick=require("next-tick");var normalize=require("./normalize");var on=require("component-event").bind;var pageDefaults=require("./pageDefaults");var pick=require("@ndhoule/pick");var prevent=require("@segment/prevent-default");var querystring=require("component-querystring");var store=require("./store");var user=require("./user");var type=require("component-type");function Analytics(){this._options({});this.Integrations={};this._integrations={};this._readied=false;this._timeout=300;this._user=user;this.log=debug("analytics.js");bindAll(this);var self=this;this.on("initialize",function(settings,options){if(options.initialPageview)self.page();self._parseQuery(window.location.search)})}Emitter(Analytics.prototype);Analytics.prototype.use=function(plugin){plugin(this);return this};Analytics.prototype.addIntegration=function(Integration){var name=Integration.prototype.name;if(!name)throw new TypeError("attempted to add an invalid integration");this.Integrations[name]=Integration;return this};Analytics.prototype.init=Analytics.prototype.initialize=function(settings,options){settings=settings||{};options=options||{};this._options(options);this._readied=false;var self=this;each(function(opts,name){var Integration=self.Integrations[name];if(!Integration)delete settings[name]},settings);each(function(opts,name){var Integration=self.Integrations[name];var integration=new Integration(clone(opts));self.log("initialize %o - %o",name,opts);self.add(integration)},settings);var integrations=this._integrations;user.load();group.load();var integrationCount=keys(integrations).length;var ready=after(integrationCount,function(){self._readied=true;self.emit("ready")});if(integrationCount<=0){ready()}each(function(integration){if(options.initialPageview&&integration.options.initialPageview===false){integration.page=after(2,integration.page)}integration.analytics=self;integration.once("ready",ready);integration.initialize()},integrations);this.initialized=true;this.emit("initialize",settings,options);return this};Analytics.prototype.setAnonymousId=function(id){this.user().anonymousId(id);return this};Analytics.prototype.add=function(integration){this._integrations[integration.name]=integration;return this};Analytics.prototype.identify=function(id,traits,options,fn){if(is.fn(options))fn=options,options=null;if(is.fn(traits))fn=traits,options=null,traits=null;if(is.object(id))options=traits,traits=id,id=user.id();user.identify(id,traits);var msg=this.normalize({options:options,traits:user.traits(),userId:user.id()});this._invoke("identify",new Identify(msg));this.emit("identify",id,traits,options);this._callback(fn);return this};Analytics.prototype.user=function(){return user};Analytics.prototype.group=function(id,traits,options,fn){if(!arguments.length)return group;if(is.fn(options))fn=options,options=null;if(is.fn(traits))fn=traits,options=null,traits=null;if(is.object(id))options=traits,traits=id,id=group.id();group.identify(id,traits);var msg=this.normalize({options:options,traits:group.traits(),groupId:group.id()});this._invoke("group",new Group(msg));this.emit("group",id,traits,options);this._callback(fn);return this};Analytics.prototype.track=function(event,properties,options,fn){if(is.fn(options))fn=options,options=null;if(is.fn(properties))fn=properties,options=null,properties=null;var plan=this.options.plan||{};var events=plan.track||{};var msg=this.normalize({properties:properties,options:options,event:event});plan=events[event];if(plan){this.log("plan %o - %o",event,plan);if(plan.enabled===false)return this._callback(fn);defaults(msg.integrations,plan.integrations||{})}this._invoke("track",new Track(msg));this.emit("track",event,properties,options);this._callback(fn);return this};Analytics.prototype.trackClick=Analytics.prototype.trackLink=function(links,event,properties){if(!links)return this;if(type(links)==="element")links=[links];var self=this;each(function(el){if(type(el)!=="element"){throw new TypeError("Must pass HTMLElement to `analytics.trackLink`.")}on(el,"click",function(e){var ev=is.fn(event)?event(el):event;var props=is.fn(properties)?properties(el):properties;var href=el.getAttribute("href")||el.getAttributeNS("http://www.w3.org/1999/xlink","href")||el.getAttribute("xlink:href");self.track(ev,props);if(href&&el.target!=="_blank"&&!isMeta(e)){prevent(e);self._callback(function(){window.location.href=href})}})},links);return this};Analytics.prototype.trackSubmit=Analytics.prototype.trackForm=function(forms,event,properties){if(!forms)return this;if(type(forms)==="element")forms=[forms];var self=this;each(function(el){if(type(el)!=="element")throw new TypeError("Must pass HTMLElement to `analytics.trackForm`.");function handler(e){prevent(e);var ev=is.fn(event)?event(el):event;var props=is.fn(properties)?properties(el):properties;self.track(ev,props);self._callback(function(){el.submit()})}var $=window.jQuery||window.Zepto;if($){$(el).submit(handler)}else{on(el,"submit",handler)}},forms);return this};Analytics.prototype.page=function(category,name,properties,options,fn){if(is.fn(options))fn=options,options=null;if(is.fn(properties))fn=properties,options=properties=null;if(is.fn(name))fn=name,options=properties=name=null;if(type(category)==="object")options=name,properties=category,name=category=null;if(type(name)==="object")options=properties,properties=name,name=null;if(type(category)==="string"&&type(name)!=="string")name=category,category=null;properties=clone(properties)||{};if(name)properties.name=name;if(category)properties.category=category;var defs=pageDefaults();defaults(properties,defs);var overrides=pick(keys(defs),properties);if(!is.empty(overrides)){options=options||{};options.context=options.context||{};options.context.page=overrides}var msg=this.normalize({properties:properties,category:category,options:options,name:name});this._invoke("page",new Page(msg));this.emit("page",category,name,properties,options);this._callback(fn);return this};Analytics.prototype.pageview=function(url){var properties={};if(url)properties.path=url;this.page(properties);return this};Analytics.prototype.alias=function(to,from,options,fn){if(is.fn(options))fn=options,options=null;if(is.fn(from))fn=from,options=null,from=null;if(is.object(from))options=from,from=null;var msg=this.normalize({options:options,previousId:from,userId:to});this._invoke("alias",new Alias(msg));this.emit("alias",to,from,options);this._callback(fn);return this};Analytics.prototype.ready=function(fn){if(is.fn(fn)){if(this._readied){nextTick(fn)}else{this.once("ready",fn)}}return this};Analytics.prototype.timeout=function(timeout){this._timeout=timeout};Analytics.prototype.debug=function(str){if(!arguments.length||str){debug.enable("analytics:"+(str||"*"))}else{debug.disable()}};Analytics.prototype._options=function(options){options=options||{};this.options=options;cookie.options(options.cookie);store.options(options.localStorage);user.options(options.user);group.options(options.group);return this};Analytics.prototype._callback=function(fn){if(is.fn(fn)){this._timeout?setTimeout(fn,this._timeout):nextTick(fn)}return this};Analytics.prototype._invoke=function(method,facade){this.emit("invoke",facade);each(function(integration,name){if(!facade.enabled(name))return;integration.invoke.call(integration,method,facade)},this._integrations);return this};Analytics.prototype.push=function(args){var method=args.shift();if(!this[method])return;this[method].apply(this,args)};Analytics.prototype.reset=function(){this.user().logout();this.group().logout()};Analytics.prototype._parseQuery=function(query){var q=querystring.parse(query);var traits=pickPrefix("ajs_trait_",q);var props=pickPrefix("ajs_prop_",q);if(q.ajs_uid)this.identify(q.ajs_uid,traits);if(q.ajs_event)this.track(q.ajs_event,props);if(q.ajs_aid)user.anonymousId(q.ajs_aid);return this;function pickPrefix(prefix,object){var length=prefix.length;var sub;return foldl(function(acc,val,key){if(key.substr(0,length)===prefix){sub=key.substr(length);acc[sub]=val}return acc},{},object)}};Analytics.prototype.normalize=function(msg){msg=normalize(msg,keys(this._integrations));if(msg.anonymousId)user.anonymousId(msg.anonymousId);msg.anonymousId=user.anonymousId();msg.context.page=defaults(msg.context.page||{},pageDefaults());return msg};Analytics.prototype.noConflict=function(){window.analytics=_analytics;return this};module.exports=Analytics;module.exports.cookie=cookie;module.exports.memory=memory;module.exports.store=store}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./cookie":20,"./group":22,"./memory":24,"./normalize":25,"./pageDefaults":26,"./store":27,"./user":28,"@ndhoule/after":3,"@ndhoule/clone":5,"@ndhoule/defaults":6,"@ndhoule/each":8,"@ndhoule/foldl":11,"@ndhoule/keys":13,"@ndhoule/pick":15,"@segment/is-meta":111,"@segment/prevent-default":115,"bind-all":122,"component-emitter":128,"component-event":129,"component-querystring":132,"component-type":134,debug:137,is:148,"next-tick":160,"segmentio-facade":172}],20:[function(require,module,exports){"use strict";var bindAll=require("bind-all");var clone=require("@ndhoule/clone");var cookie=require("component-cookie");var debug=require("debug")("analytics.js:cookie");var defaults=require("@ndhoule/defaults");var json=require("json3");var topDomain=require("@segment/top-domain");function Cookie(options){this.options(options)}Cookie.prototype.options=function(options){if(arguments.length===0)return this._options;options=options||{};var domain="."+topDomain(window.location.href);if(domain===".")domain=null;this._options=defaults(options,{maxage:31536e6,path:"/",domain:domain});this.set("ajs:test",true);if(!this.get("ajs:test")){debug("fallback to domain=null");this._options.domain=null}this.remove("ajs:test")};Cookie.prototype.set=function(key,value){try{value=json.stringify(value);cookie(key,value,clone(this._options));return true}catch(e){return false}};Cookie.prototype.get=function(key){try{var value=cookie(key);value=value?json.parse(value):null;return value}catch(e){return null}};Cookie.prototype.remove=function(key){try{cookie(key,null,clone(this._options));return true}catch(e){return false}};module.exports=bindAll(new Cookie);module.exports.Cookie=Cookie},{"@ndhoule/clone":5,"@ndhoule/defaults":6,"@segment/top-domain":120,"bind-all":122,"component-cookie":125,debug:137,json3:149}],21:[function(require,module,exports){"use strict";var clone=require("@ndhoule/clone");var cookie=require("./cookie");var debug=require("debug")("analytics:entity");var defaults=require("@ndhoule/defaults");var extend=require("@ndhoule/extend");var memory=require("./memory");var store=require("./store");var isodateTraverse=require("@segment/isodate-traverse");module.exports=Entity;function Entity(options){this.options(options);this.initialize()}Entity.prototype.initialize=function(){cookie.set("ajs:cookies",true);if(cookie.get("ajs:cookies")){cookie.remove("ajs:cookies");this._storage=cookie;return}if(store.enabled){this._storage=store;return}debug("warning using memory store both cookies and localStorage are disabled");this._storage=memory};Entity.prototype.storage=function(){return this._storage};Entity.prototype.options=function(options){if(arguments.length===0)return this._options;this._options=defaults(options||{},this.defaults||{})};Entity.prototype.id=function(id){switch(arguments.length){case 0:return this._getId();case 1:return this._setId(id);default:}};Entity.prototype._getId=function(){var ret=this._options.persist?this.storage().get(this._options.cookie.key):this._id;return ret===undefined?null:ret};Entity.prototype._setId=function(id){if(this._options.persist){this.storage().set(this._options.cookie.key,id)}else{this._id=id}};Entity.prototype.properties=Entity.prototype.traits=function(traits){switch(arguments.length){case 0:return this._getTraits();case 1:return this._setTraits(traits);default:}};Entity.prototype._getTraits=function(){var ret=this._options.persist?store.get(this._options.localStorage.key):this._traits;return ret?isodateTraverse(clone(ret)):{}};Entity.prototype._setTraits=function(traits){traits=traits||{};if(this._options.persist){store.set(this._options.localStorage.key,traits)}else{this._traits=traits}};Entity.prototype.identify=function(id,traits){traits=traits||{};var current=this.id();if(current===null||current===id)traits=extend(this.traits(),traits);if(id)this.id(id);this.debug("identify %o, %o",id,traits);this.traits(traits);this.save()};Entity.prototype.save=function(){if(!this._options.persist)return false;cookie.set(this._options.cookie.key,this.id());store.set(this._options.localStorage.key,this.traits());return true};Entity.prototype.logout=function(){this.id(null);this.traits({});cookie.remove(this._options.cookie.key);store.remove(this._options.localStorage.key)};Entity.prototype.reset=function(){this.logout();this.options({})};Entity.prototype.load=function(){this.id(cookie.get(this._options.cookie.key));this.traits(store.get(this._options.localStorage.key))}},{"./cookie":20,"./memory":24,"./store":27,"@ndhoule/clone":5,"@ndhoule/defaults":6,"@ndhoule/extend":10,"@segment/isodate-traverse":112,debug:137}],22:[function(require,module,exports){"use strict";var Entity=require("./entity");var bindAll=require("bind-all");var debug=require("debug")("analytics:group");var inherit=require("inherits");Group.defaults={persist:true,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}};function Group(options){this.defaults=Group.defaults;this.debug=debug;Entity.call(this,options)}inherit(Group,Entity);module.exports=bindAll(new Group);module.exports.Group=Group},{"./entity":21,"bind-all":122,debug:137,inherits:144}],23:[function(require,module,exports){"use strict";var Analytics=require("./analytics");var analytics=new Analytics;analytics.require=require;analytics.VERSION=require("../package.json").version;module.exports=analytics},{"../package.json":29,"./analytics":19}],24:[function(require,module,exports){"use strict";var bindAll=require("bind-all");var clone=require("@ndhoule/clone");var has=Object.prototype.hasOwnProperty;module.exports=bindAll(new Memory);function Memory(){this.store={}}Memory.prototype.set=function(key,value){this.store[key]=clone(value);return true};Memory.prototype.get=function(key){if(!has.call(this.store,key))return;return clone(this.store[key])};Memory.prototype.remove=function(key){delete this.store[key];return true}},{"@ndhoule/clone":5,"bind-all":122}],25:[function(require,module,exports){"use strict";var debug=require("debug")("analytics.js:normalize");var defaults=require("@ndhoule/defaults");var each=require("@ndhoule/each");var includes=require("@ndhoule/includes");var map=require("@ndhoule/map");var type=require("component-type");var has=Object.prototype.hasOwnProperty;module.exports=normalize;var toplevel=["integrations","anonymousId","timestamp","context"];function normalize(msg,list){var lower=map(function(s){return s.toLowerCase()},list);var opts=msg.options||{};var integrations=opts.integrations||{};var providers=opts.providers||{};var context=opts.context||{};var ret={};debug("<-",msg);each(function(value,key){if(!integration(key))return;if(!has.call(integrations,key))integrations[key]=value;delete opts[key]},opts);delete opts.providers;each(function(value,key){if(!integration(key))return;if(type(integrations[key])==="object")return;if(has.call(integrations,key)&&typeof providers[key]==="boolean")return;integrations[key]=value},providers);each(function(value,key){if(includes(key,toplevel)){ret[key]=opts[key]}else{context[key]=opts[key]}},opts);delete msg.options;ret.integrations=integrations;ret.context=context;ret=defaults(ret,msg);debug("->",ret);return ret;function integration(name){return!!(includes(name,list)||name.toLowerCase()==="all"||includes(name.toLowerCase(),lower))}}},{"@ndhoule/defaults":6,"@ndhoule/each":8,"@ndhoule/includes":12,"@ndhoule/map":14,"component-type":134,debug:137}],26:[function(require,module,exports){"use strict";var canonical=require("@segment/canonical");var includes=require("@ndhoule/includes");var url=require("component-url");function pageDefaults(){return{path:canonicalPath(),referrer:document.referrer,search:location.search,title:document.title,url:canonicalUrl(location.search)}}function canonicalPath(){var canon=canonical();if(!canon)return window.location.pathname;var parsed=url.parse(canon);return parsed.pathname}function canonicalUrl(search){var canon=canonical();if(canon)return includes("?",canon)?canon:canon+search;var url=window.location.href;var i=url.indexOf("#");return i===-1?url:url.slice(0,i)}module.exports=pageDefaults},{"@ndhoule/includes":12,"@segment/canonical":108,"component-url":135}],27:[function(require,module,exports){"use strict";var bindAll=require("bind-all");var defaults=require("@ndhoule/defaults");var store=require("@segment/store");function Store(options){this.options(options)}Store.prototype.options=function(options){if(arguments.length===0)return this._options;options=options||{};defaults(options,{enabled:true});this.enabled=options.enabled&&store.enabled;this._options=options};Store.prototype.set=function(key,value){if(!this.enabled)return false;return store.set(key,value)};Store.prototype.get=function(key){if(!this.enabled)return null;return store.get(key)};Store.prototype.remove=function(key){if(!this.enabled)return false;return store.remove(key)};module.exports=bindAll(new Store);module.exports.Store=Store},{"@ndhoule/defaults":6,"@segment/store":118,"bind-all":122}],28:[function(require,module,exports){"use strict";var Entity=require("./entity");var bindAll=require("bind-all");var cookie=require("./cookie");var debug=require("debug")("analytics:user");var inherit=require("inherits");var rawCookie=require("component-cookie");var uuid=require("uuid");User.defaults={persist:true,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"
}};function User(options){this.defaults=User.defaults;this.debug=debug;Entity.call(this,options)}inherit(User,Entity);User.prototype.id=function(id){var prev=this._getId();var ret=Entity.prototype.id.apply(this,arguments);if(prev==null)return ret;if(prev!=id&&id)this.anonymousId(null);return ret};User.prototype.anonymousId=function(anonymousId){var store=this.storage();if(arguments.length){store.set("ajs_anonymous_id",anonymousId);return this}anonymousId=store.get("ajs_anonymous_id");if(anonymousId){return anonymousId}anonymousId=rawCookie("_sio");if(anonymousId){anonymousId=anonymousId.split("----")[0];store.set("ajs_anonymous_id",anonymousId);store.remove("_sio");return anonymousId}anonymousId=uuid.v4();store.set("ajs_anonymous_id",anonymousId);return store.get("ajs_anonymous_id")};User.prototype.logout=function(){Entity.prototype.logout.call(this);this.anonymousId(null)};User.prototype.load=function(){if(this._loadOldCookie())return;Entity.prototype.load.call(this)};User.prototype._loadOldCookie=function(){var user=cookie.get(this._options.cookie.oldKey);if(!user)return false;this.id(user.id);this.traits(user.traits);cookie.remove(this._options.cookie.oldKey);return true};module.exports=bindAll(new User);module.exports.User=User},{"./cookie":20,"./entity":21,"bind-all":122,"component-cookie":125,debug:137,inherits:144,uuid:187}],29:[function(require,module,exports){module.exports={_args:[["@segment/analytics.js-core@^3.0.0","/Users/work/dev/exp_analytics/analytics.js"]],_from:"@segment/analytics.js-core@>=3.0.0 <4.0.0",_id:"@segment/analytics.js-core@3.0.0",_inCache:true,_installable:true,_location:"/@segment/analytics.js-core",_nodeVersion:"4.4.5",_npmOperationalInternal:{host:"packages-16-east.internal.npmjs.com",tmp:"tmp/analytics.js-core-3.0.0.tgz_1464222726516_0.005199481267482042"},_npmUser:{email:"tools+npm@segment.com",name:"segment"},_npmVersion:"2.15.5",_phantomChildren:{},_requested:{name:"@segment/analytics.js-core",raw:"@segment/analytics.js-core@^3.0.0",rawSpec:"^3.0.0",scope:"@segment",spec:">=3.0.0 <4.0.0",type:"range"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/@segment/analytics.js-core/-/analytics.js-core-3.0.0.tgz",_shasum:"166e682023e6086d41e53abe5cddb23bf02b14ed",_shrinkwrap:null,_spec:"@segment/analytics.js-core@^3.0.0",_where:"/Users/work/dev/exp_analytics/analytics.js",author:{email:"friends@segment.com",name:"Segment"},bugs:{url:"https://github.com/segmentio/analytics.js-core/issues"},dependencies:{"@ndhoule/after":"^1.0.0","@ndhoule/clone":"^1.0.0","@ndhoule/defaults":"^2.0.1","@ndhoule/each":"^2.0.1","@ndhoule/extend":"^2.0.0","@ndhoule/foldl":"^2.0.1","@ndhoule/includes":"^2.0.1","@ndhoule/keys":"^2.0.0","@ndhoule/map":"^2.0.1","@ndhoule/pick":"^2.0.0","@segment/canonical":"^1.0.0","@segment/is-meta":"^1.0.0","@segment/isodate":"^1.0.2","@segment/isodate-traverse":"^1.0.1","@segment/prevent-default":"^1.0.0","@segment/store":"^1.3.20","@segment/top-domain":"^3.0.0","bind-all":"^1.0.0","component-cookie":"^1.1.2","component-emitter":"^1.2.1","component-event":"^0.1.4","component-querystring":"^2.0.0","component-type":"^1.2.1","component-url":"^0.2.1",debug:"^0.7.4",inherits:"^2.0.1",install:"^0.7.3",is:"^3.1.0",json3:"^3.3.2","new-date":"^1.0.0","next-tick":"^0.2.2","segmentio-facade":"^3.0.2",uuid:"^2.0.2"},description:"The hassle-free way to integrate analytics into any web application.",devDependencies:{"@segment/analytics.js-integration":"^2.0.0","@segment/eslint-config":"^3.1.1",browserify:"^13.0.0","browserify-istanbul":"^2.0.0","compat-trigger-event":"^1.0.0","component-each":"^0.2.6",eslint:"^2.9.0","eslint-plugin-mocha":"^2.2.0","eslint-plugin-require-path-exists":"^1.1.5",istanbul:"^0.4.3",jquery:"^1.12.3",karma:"^0.13.22","karma-browserify":"^5.0.4","karma-chrome-launcher":"^1.0.1","karma-coverage":"^1.0.0","karma-junit-reporter":"^1.0.0","karma-mocha":"^1.0.1","karma-phantomjs-launcher":"^1.0.0","karma-sauce-launcher":"^1.0.0","karma-spec-reporter":"0.0.26",mocha:"^2.2.5","phantomjs-prebuilt":"^2.1.7",proclaim:"^3.4.1",sinon:"^1.7.3",watchify:"^3.7.0"},directories:{},dist:{shasum:"166e682023e6086d41e53abe5cddb23bf02b14ed",tarball:"https://registry.npmjs.org/@segment/analytics.js-core/-/analytics.js-core-3.0.0.tgz"},homepage:"https://github.com/segmentio/analytics.js-core#readme",keywords:["analytics","analytics.js","segment","segment.io"],license:"SEE LICENSE IN LICENSE",main:"lib/index.js",maintainers:[{email:"tools+npm@segment.com",name:"segment"}],name:"@segment/analytics.js-core",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+https://github.com/segmentio/analytics.js-core.git"},scripts:{test:"make test"},version:"3.0.0"}},{}],30:[function(require,module,exports){"use strict";var bind=require("component-bind");var integration=require("@segment/analytics.js-integration");var topDomain=require("@segment/top-domain");var when=require("do-when");var umd=typeof window.define==="function"&&window.define.amd;var src="//d24n15hnbwhuhn.cloudfront.net/libs/amplitude-2.12.1-min.gz.js";var Amplitude=module.exports=integration("Amplitude").global("amplitude").option("apiKey","").option("trackAllPages",false).option("trackNamedPages",true).option("trackCategorizedPages",true).option("trackUtmProperties",true).option("trackReferrer",false).option("batchEvents",false).option("eventUploadThreshold",30).option("eventUploadPeriodMillis",3e4).tag('<script src="'+src+'">');Amplitude.prototype.initialize=function(){(function(e,t){var r=e.amplitude||{_q:[]};function n(e,t){e.prototype[t]=function(){this._q.push([t].concat(Array.prototype.slice.call(arguments,0)));return this}}var s=function(){this._q=[];return this};var i=["add","append","clearAll","prepend","set","setOnce","unset"];for(var o=0;o<i.length;o++){n(s,i[o])}r.Identify=s;var a=function(){this._q=[];return this};var u=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"];for(var c=0;c<u.length;c++){n(a,u[c])}r.Revenue=a;var p=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId"];function l(e){function t(t){e[t]=function(){e._q.push([t].concat(Array.prototype.slice.call(arguments,0)))}}for(var r=0;r<p.length;r++){t(p[r])}}l(r);e.amplitude=r})(window,document);this.setDomain(window.location.href);window.amplitude.init(this.options.apiKey,null,{includeUtm:this.options.trackUtmProperties,includeReferrer:this.options.trackReferrer,batchEvents:this.options.batchEvents,eventUploadThreshold:this.options.eventUploadThreshold,eventUploadPeriodMillis:this.options.eventUploadPeriodMillis});var loaded=bind(this,this.loaded);var ready=this.ready;if(umd){window.require([src],function(amplitude){window.amplitude=amplitude;when(loaded,function(){window.amplitude.runQueuedFunctions();ready()})});return}this.load(function(){when(loaded,function(){window.amplitude.runQueuedFunctions();ready()})})};Amplitude.prototype.loaded=function(){return!!(window.amplitude&&window.amplitude.options)};Amplitude.prototype.page=function(page){var category=page.category();var name=page.fullName();var opts=this.options;if(opts.trackAllPages){this.track(page.track())}if(category&&opts.trackCategorizedPages){this.track(page.track(category))}if(name&&opts.trackNamedPages){this.track(page.track(name))}};Amplitude.prototype.identify=function(identify){var id=identify.userId();var traits=identify.traits();if(id)window.amplitude.setUserId(id);if(traits)window.amplitude.setUserProperties(traits)};Amplitude.prototype.track=function(track){var props=track.properties();var event=track.event();var revenue=track.revenue();window.amplitude.logEvent(event,props);if(revenue){window.amplitude.logRevenue(revenue,props.quantity,props.productId)}};Amplitude.prototype.group=function(group){var groupId=group.groupId();if(groupId)window.amplitude.setGroup("[Segment] Group",groupId)};Amplitude.prototype.setDomain=function(href){var domain=topDomain(href);window.amplitude.setDomain(domain)};Amplitude.prototype.setDeviceId=function(deviceId){if(deviceId)window.amplitude.setDeviceId(deviceId)}},{"@segment/analytics.js-integration":31,"@segment/top-domain":120,"component-bind":123,"do-when":138}],31:[function(require,module,exports){"use strict";var bind=require("component-bind");var clone=require("@ndhoule/clone");var debug=require("debug");var defaults=require("@ndhoule/defaults");var extend=require("@ndhoule/extend");var slug=require("slug-component");var protos=require("./protos");var statics=require("./statics");function createIntegration(name){function Integration(options){if(options&&options.addIntegration){return options.addIntegration(Integration)}this.debug=debug("analytics:integration:"+slug(name));this.options=defaults(clone(options)||{},this.defaults);this._queue=[];this.once("ready",bind(this,this.flush));Integration.emit("construct",this);this.ready=bind(this,this.ready);this._wrapInitialize();this._wrapPage();this._wrapTrack()}Integration.prototype.defaults={};Integration.prototype.globals=[];Integration.prototype.templates={};Integration.prototype.name=name;extend(Integration,statics);extend(Integration.prototype,protos);return Integration}module.exports=createIntegration},{"./protos":32,"./statics":33,"@ndhoule/clone":5,"@ndhoule/defaults":6,"@ndhoule/extend":10,"component-bind":123,debug:35,"slug-component":178}],32:[function(require,module,exports){"use strict";var Emitter=require("component-emitter");var after=require("@ndhoule/after");var each=require("@ndhoule/each");var events=require("analytics-events");var every=require("@ndhoule/every");var fmt=require("@segment/fmt");var foldl=require("@ndhoule/foldl");var is=require("is");var loadIframe=require("load-iframe");var loadScript=require("@segment/load-script");var nextTick=require("next-tick");var normalize=require("to-no-case");var has=Object.prototype.hasOwnProperty;var noop=function noop(){};var onerror=window.onerror;var onload=null;Emitter(exports);exports.initialize=function(){var ready=this.ready;nextTick(ready)};exports.loaded=function(){return false};exports.page=function(page){};exports.track=function(track){};exports.map=function(options,key){var normalizedComparator=normalize(key);var mappingType=getMappingType(options);if(mappingType==="unknown"){return[]}return foldl(function(matchingValues,val,key){var compare;var result;if(mappingType==="map"){compare=key;result=val}if(mappingType==="array"){compare=val;result=val}if(mappingType==="mixed"){compare=val.key;result=val.value}if(normalize(compare)===normalizedComparator){matchingValues.push(result)}return matchingValues},[],options)};exports.invoke=function(method){if(!this[method])return;var args=Array.prototype.slice.call(arguments,1);if(!this._ready)return this.queue(method,args);var ret;try{this.debug("%s with %o",method,args);ret=this[method].apply(this,args)}catch(e){this.debug("error %o calling %s with %o",e,method,args)}return ret};exports.queue=function(method,args){if(method==="page"&&this._assumesPageview&&!this._initialized){return this.page.apply(this,args)}this._queue.push({method:method,args:args})};exports.flush=function(){this._ready=true;var self=this;each(function(call){self[call.method].apply(self,call.args)},this._queue);this._queue.length=0};exports.reset=function(){for(var i=0;i<this.globals.length;i++){window[this.globals[i]]=undefined}window.onerror=onerror;window.onload=onload};exports.load=function(name,locals,callback){if(typeof name==="function"){callback=name;locals=null;name=null}if(name&&typeof name==="object"){callback=locals;locals=name;name=null}if(typeof locals==="function"){callback=locals;locals=null}name=name||"library";locals=locals||{};locals=this.locals(locals);var template=this.templates[name];if(!template)throw new Error(fmt('template "%s" not defined.',name));var attrs=render(template,locals);callback=callback||noop;var self=this;var el;switch(template.type){case"img":attrs.width=1;attrs.height=1;el=loadImage(attrs,callback);break;case"script":el=loadScript(attrs,function(err){if(!err)return callback();self.debug('error loading "%s" error="%s"',self.name,err)});delete attrs.src;each(function(val,key){el.setAttribute(key,val)},attrs);break;case"iframe":el=loadIframe(attrs,callback);break;default:}return el};exports.locals=function(locals){locals=locals||{};var cache=Math.floor((new Date).getTime()/36e5);if(!locals.hasOwnProperty("cache"))locals.cache=cache;each(function(val,key){if(!locals.hasOwnProperty(key))locals[key]=val},this.options);return locals};exports.ready=function(){this.emit("ready")};exports._wrapInitialize=function(){var initialize=this.initialize;this.initialize=function(){this.debug("initialize");this._initialized=true;var ret=initialize.apply(this,arguments);this.emit("initialize");return ret};if(this._assumesPageview)this.initialize=after(2,this.initialize)};exports._wrapPage=function(){var page=this.page;this.page=function(){if(this._assumesPageview&&!this._initialized){return this.initialize.apply(this,arguments)}return page.apply(this,arguments)}};exports._wrapTrack=function(){var t=this.track;this.track=function(track){var event=track.event();var called;var ret;for(var method in events){if(has.call(events,method)){var regexp=events[method];if(!this[method])continue;if(!regexp.test(event))continue;ret=this[method].apply(this,arguments);called=true;break}}if(!called)ret=t.apply(this,arguments);return ret}};function getMappingType(mapping){if(is.array(mapping)){return every(isMixed,mapping)?"mixed":"array"}if(is.object(mapping))return"map";return"unknown"}function isMixed(item){if(!is.object(item))return false;if(!is.string(item.key))return false;if(!has.call(item,"value"))return false;return true}function loadImage(attrs,fn){fn=fn||function(){};var img=new Image;img.onerror=error(fn,"failed to load pixel",img);img.onload=function(){fn()};img.src=attrs.src;img.width=1;img.height=1;return img}function error(fn,message,img){return function(e){e=e||window.event;var err=new Error(message);err.event=e;err.source=img;fn(err)}}function render(template,locals){return foldl(function(attrs,val,key){attrs[key]=val.replace(/\{\{\ *(\w+)\ *\}\}/g,function(_,$1){return locals[$1]});return attrs},{},template.attrs)}},{"@ndhoule/after":3,"@ndhoule/each":8,"@ndhoule/every":9,"@ndhoule/foldl":11,"@segment/fmt":110,"@segment/load-script":114,"analytics-events":34,"component-emitter":128,is:148,"load-iframe":154,"next-tick":160,"to-no-case":181}],33:[function(require,module,exports){"use strict";var Emitter=require("component-emitter");var domify=require("domify");var each=require("@ndhoule/each");var includes=require("@ndhoule/includes");Emitter(exports);exports.option=function(key,value){this.prototype.defaults[key]=value;return this};exports.mapping=function(name){this.option(name,[]);this.prototype[name]=function(key){return this.map(this.options[name],key)};return this};exports.global=function(key){this.prototype.globals.push(key);return this};exports.assumesPageview=function(){this.prototype._assumesPageview=true;return this};exports.readyOnLoad=function(){this.prototype._readyOnLoad=true;return this};exports.readyOnInitialize=function(){this.prototype._readyOnInitialize=true;return this};exports.tag=function(name,tag){if(tag==null){tag=name;name="library"}this.prototype.templates[name]=objectify(tag);return this};function objectify(str){str=str.replace(' src="',' data-src="');var el=domify(str);var attrs={};each(function(attr){var name=attr.name==="data-src"?"src":attr.name;if(!includes(attr.name+"=",str))return;attrs[name]=attr.value},el.attributes);return{type:el.tagName.toLowerCase(),attrs:attrs}}},{"@ndhoule/each":8,"@ndhoule/includes":12,"component-emitter":128,domify:139}],34:[function(require,module,exports){module.exports={promotionViewed:/^[ _]?promotion[ _]?viewed?[ _]?$/i,viewedPromotion:/^[ _]?viewed[ _]?promotion?[ _]?$/i,promotionClicked:/^[ _]?promotion[ _]?clicked?[ _]?$/i,clickedPromotion:/^[ _]?clicked[ _]?promotion?[ _]?$/i,productsSearched:/^[ _]?products[ _]?searched[ _]?$/i,productListViewed:/^[ _]?product[ _]?list[ _]?viewed[ _]?$/i,productListFiltered:/^[ _]?product[ _]?list[ _]?filtered[ _]?$/i,viewedProductCategory:/^[ _]?viewed[ _]?product[ _]?category[ _]?$/i,viewedProductDetails:/^[ _]?viewed[ _]?product[ _]?details?[ _]?$/i,productClicked:/^[ _]?product[ _]?clicked[ _]?$/i,clickedProduct:/^[ _]?clicked[ _]?product[ _]?$/i,productViewed:/^[ _]?product[ _]?viewed[ _]?$/i,viewedProduct:/^[ _]?viewed[ _]?product[ _]?$/i,productAdded:/^[ _]?product[ _]?added[ _]?$/i,addedProduct:/^[ _]?added[ _]?product[ _]?$/i,productRemoved:/^[ _]?product[ _]?removed[ _]?$/i,removedProduct:/^[ _]?removed[ _]?product[ _]?$/i,cartViewed:/^[ _]?cart[ _]?viewed[ _]?$/i,orderStarted:/^[ _]?order[ _]?started[ _]?$/i,startedOrder:/^[ _]?started[ _]?order[ _]?$/i,orderUpdated:/^[ _]?order[ _]?updated[ _]?$/i,updatedOrder:/^[ _]?updated[ _]?order[ _]?$/i,orderCompleted:/^[ _]?order[ _]?completed[ _]?$/i,completedOrder:/^[ _]?completed[ _]?order[ _]?$/i,orderRefunded:/^[ _]?order[ _]?refunded[ _]?$/i,refundedOrder:/^[ _]?refunded[ _]?order[ _]?$/i,orderCancelled:/^[ _]?order[ _]?cancelled[ _]?$/i,paymentInfoAdded:/^[ _]?payment[ _]?info[ _]?added[ _]?$/i,checkoutStarted:/^[ _]?checkout[ _]?started[ _]?$/i,checkoutStepViewed:/^[ _]?checkout[ _]?step[ _]?viewed[ _]?$/i,viewedCheckoutStep:/^[ _]?viewed[ _]?checkout[ _]?step[ _]?$/i,checkoutStepCompleted:/^[ _]?checkout[ _]?step[ _]?completed[ _]?$/i,completedCheckoutStep:/^[ _]?completed[ _]?checkout[ _]?step[ _]?$/i,couponEntered:/^[ _]?coupon[ _]?entered[ _]?$/i,couponApplied:/^[ _]?coupon[ _]?applied[ _]?$/i,couponDenied:/^[ _]?coupon[ _]?denied[ _]?$/i,couponRemoved:/^[ _]?coupon[ _]?removed[ _]?$/i,productAddedToWishlist:/^[ _]?product[ _]?added[ _]?to[ _]?wishlist[ _]?$/i,wishlistProductRemoved:/^[ _]?wishlist[ _]?product[ _]?removed[ _]?$/i,wishlistProductAddedToCart:/^[ _]?wishlist[ _]?product[ _]?added[ _]?to[ _]?cart[ _]?$/i,productShared:/^[ _]?product[ _]?shared[ _]?$/i,cartShared:/^[ _]?cart[ _]?shared[ _]?$/i,productRemoved:/^[ _]?product[ _]?removed[ _]?$/i,applicationInstalled:/^[ _]?application[ _]?installed[ _]?$/i,applicationUpdated:/^[ _]?application[ _]?updated[ _]?$/i,applicationOpened:/^[ _]?application[ _]?opened[ _]?$/i,applicationBackgrounded:/^[ _]?application[ _]?backgrounded[ _]?$/i,applicationUninstalled:/^[ _]?application[ _]?uninstalled[ _]?$/i,installAttributed:/^[ _]?install[ _]?attributed[ _]?$/i,deepLinkOpened:/^[ _]?deep[ _]?link[ _]?opened[ _]?$/i,pushNotificationReceived:/^[ _]?push[ _]?notification[ _]?received[ _]?$/i,pushNotificationTapped:/^[ _]?push[ _]?notification[ _]?received[ _]?$/i,pushNotificationBounced:/^[ _]?push[ _]?notification[ _]?bounced[ _]?$/i}},{}],35:[function(require,module,exports){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},{"./debug":36}],36:[function(require,module,exports){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});if("function"===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args)}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:155}],37:[function(require,module,exports){"use strict";var defaults=require("@ndhoule/defaults");var integration=require("@segment/analytics.js-integration");var onBody=require("on-body");var Chartbeat=module.exports=integration("Chartbeat").assumesPageview().global("_sf_async_config").global("_sf_endpt").global("pSUPERFLY").option("domain","").option("uid",null).option("video",false).tag('<script src="//static.chartbeat.com/js/{{ script }}">');Chartbeat.prototype.initialize=function(){var self=this;var script=this.options.video?"chartbeat_video.js":"chartbeat.js";window._sf_async_config=window._sf_async_config||{};window._sf_async_config.useCanonical=true;defaults(window._sf_async_config,{domain:this.options.domain,uid:this.options.uid});onBody(function(){window._sf_endpt=(new Date).getTime();self.load({script:script},self.ready)})};Chartbeat.prototype.loaded=function(){return!!window.pSUPERFLY};Chartbeat.prototype.page=function(page){var category=page.category();if(category)window._sf_async_config.sections=category;var author=page.proxy("properties.author");if(author)window._sf_async_config.authors=author;var props=page.properties();var name=page.fullName();window.pSUPERFLY.virtualPage(props.path,name||props.title)}},{"@ndhoule/defaults":6,"@segment/analytics.js-integration":38,"on-body":163}],38:[function(require,module,exports){arguments[4][31][0].apply(exports,arguments)},{"./protos":39,"./statics":40,"@ndhoule/clone":5,"@ndhoule/defaults":6,"@ndhoule/extend":10,"component-bind":123,debug:42,dup:31,"slug-component":178}],39:[function(require,module,exports){arguments[4][32][0].apply(exports,arguments)},{"@ndhoule/after":3,"@ndhoule/each":8,"@ndhoule/every":9,"@ndhoule/foldl":11,"@segment/fmt":110,"@segment/load-script":114,"analytics-events":41,"component-emitter":128,dup:32,is:148,"load-iframe":154,"next-tick":160,"to-no-case":181}],40:[function(require,module,exports){arguments[4][33][0].apply(exports,arguments)},{"@ndhoule/each":8,"@ndhoule/includes":12,"component-emitter":128,domify:139,dup:33}],41:[function(require,module,exports){arguments[4][34][0].apply(exports,arguments)},{dup:34}],42:[function(require,module,exports){arguments[4][35][0].apply(exports,arguments)},{"./debug":43,dup:35}],43:[function(require,module,exports){arguments[4][36][0].apply(exports,arguments)},{dup:36,ms:155}],44:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var useHttps=require("use-https");var Comscore=module.exports=integration("comScore").assumesPageview().global("_comscore").global("COMSCORE").option("c1","2").option("c2","").tag("http",'<script src="http://b.scorecardresearch.com/beacon.js">').tag("https",'<script src="https://sb.scorecardresearch.com/beacon.js">');Comscore.prototype.initialize=function(){window._comscore=window._comscore||[this.options];var tagName=useHttps()?"https":"http";this.load(tagName,this.ready)};Comscore.prototype.loaded=function(){return!!window.COMSCORE};Comscore.prototype.page=function(){window.COMSCORE.beacon(this.options)}},{"@segment/analytics.js-integration":45,"use-https":184}],45:[function(require,module,exports){arguments[4][31][0].apply(exports,arguments)},{"./protos":46,"./statics":47,"@ndhoule/clone":5,"@ndhoule/defaults":6,"@ndhoule/extend":10,"component-bind":123,debug:49,dup:31,"slug-component":178}],46:[function(require,module,exports){arguments[4][32][0].apply(exports,arguments)},{"@ndhoule/after":3,"@ndhoule/each":8,"@ndhoule/every":9,"@ndhoule/foldl":11,"@segment/fmt":110,"@segment/load-script":114,"analytics-events":48,"component-emitter":128,dup:32,is:148,"load-iframe":154,"next-tick":160,"to-no-case":181}],47:[function(require,module,exports){arguments[4][33][0].apply(exports,arguments)},{"@ndhoule/each":8,"@ndhoule/includes":12,"component-emitter":128,domify:139,dup:33}],48:[function(require,module,exports){arguments[4][34][0].apply(exports,arguments)},{dup:34}],49:[function(require,module,exports){arguments[4][35][0].apply(exports,arguments)},{"./debug":50,dup:35}],50:[function(require,module,exports){arguments[4][36][0].apply(exports,arguments)},{dup:36,ms:155}],51:[function(require,module,exports){"use strict";var Track=require("segmentio-facade").Track;var defaults=require("@ndhoule/defaults");var dot=require("obj-case");var each=require("component-each");var integration=require("@segment/analytics.js-integration");var is=require("is");var len=require("object-component").length;var push=require("global-queue")("_gaq");var reject=require("reject");var useHttps=require("use-https");var user;module.exports=exports=function(analytics){analytics.addIntegration(GA);user=analytics.user()};var GA=exports.Integration=integration("Google Analytics").readyOnLoad().global("ga").global("gaplugins").global("_gaq").global("GoogleAnalyticsObject").option("anonymizeIp",false).option("classic",false).option("contentGroupings",{}).option("dimensions",{}).option("domain","auto").option("doubleClick",false).option("enhancedEcommerce",false).option("enhancedLinkAttribution",false).option("ignoredReferrers",null).option("includeSearch",false).option("metrics",{}).option("nonInteraction",false).option("sendUserId",false).option("siteSpeedSampleRate",1).option("sampleRate",100).option("trackCategorizedPages",true).option("trackNamedPages",true).option("trackingId","").tag("library",'<script src="//www.google-analytics.com/analytics.js">').tag("double click",'<script src="//stats.g.doubleclick.net/dc.js">').tag("http",'<script src="http://www.google-analytics.com/ga.js">').tag("https",'<script src="https://ssl.google-analytics.com/ga.js">');GA.on("construct",function(integration){if(integration.options.classic){integration.initialize=integration.initializeClassic;integration.loaded=integration.loadedClassic;integration.page=integration.pageClassic;integration.track=integration.trackClassic;integration.completedOrder=integration.completedOrderClassic}else if(integration.options.enhancedEcommerce){integration.viewedProduct=integration.viewedProductEnhanced;integration.clickedProduct=integration.clickedProductEnhanced;integration.addedProduct=integration.addedProductEnhanced;integration.removedProduct=integration.removedProductEnhanced;integration.startedOrder=integration.startedOrderEnhanced;integration.viewedCheckoutStep=integration.viewedCheckoutStepEnhanced;integration.completedCheckoutStep=integration.completedCheckoutStepEnhanced;integration.updatedOrder=integration.updatedOrderEnhanced;integration.completedOrder=integration.completedOrderEnhanced;integration.refundedOrder=integration.refundedOrderEnhanced;integration.viewedPromotion=integration.viewedPromotionEnhanced;integration.clickedPromotion=integration.clickedPromotionEnhanced}});GA.prototype.initialize=function(){this.pageCalled=false;var opts=this.options;window.GoogleAnalyticsObject="ga";window.ga=window.ga||function(){window.ga.q=window.ga.q||[];window.ga.q.push(arguments)};window.ga.l=(new Date).getTime();if(window.location.hostname==="localhost")opts.domain="none";window.ga("create",opts.trackingId,{cookieDomain:opts.domain||GA.prototype.defaults.domain,siteSpeedSampleRate:opts.siteSpeedSampleRate,sampleRate:opts.sampleRate,allowLinker:true});if(opts.doubleClick){window.ga("require","displayfeatures")}if(opts.enhancedLinkAttribution){window.ga("require","linkid","linkid.js")}if(opts.sendUserId&&user.id()){window.ga("set","userId",user.id())}if(opts.anonymizeIp)window.ga("set","anonymizeIp",true);var custom=metrics(user.traits(),opts);if(len(custom))window.ga("set",custom);this.load("library",this.ready)};GA.prototype.loaded=function(){return!!window.gaplugins};GA.prototype.page=function(page){var category=page.category();var props=page.properties();var name=page.fullName();var opts=this.options;var campaign=page.proxy("context.campaign")||{};var pageview={};var pagePath=path(props,this.options);var pageTitle=name||props.title;var pageReferrer=page.referrer()||"";var track;this._category=category;pageview.page=pagePath;pageview.title=pageTitle;pageview.location=props.url;if(campaign.name)pageview.campaignName=campaign.name;if(campaign.source)pageview.campaignSource=campaign.source;if(campaign.medium)pageview.campaignMedium=campaign.medium;if(campaign.content)pageview.campaignContent=campaign.content;if(campaign.term)pageview.campaignKeyword=campaign.term;var custom=metrics(props,opts);if(len(custom))window.ga("set",custom);var payload={page:pagePath,title:pageTitle};if(pageReferrer!==document.referrer)payload.referrer=pageReferrer;window.ga("set",payload);if(this.pageCalled)delete pageview.location;window.ga("send","pageview",pageview);if(category&&this.options.trackCategorizedPages){track=page.track(category);this.track(track,{nonInteraction:1})}if(name&&this.options.trackNamedPages){track=page.track(name);this.track(track,{nonInteraction:1})}this.pageCalled=true};GA.prototype.identify=function(identify){var opts=this.options;if(opts.sendUserId&&identify.userId()){window.ga("set","userId",identify.userId())}var custom=metrics(user.traits(),opts);if(len(custom))window.ga("set",custom)};GA.prototype.track=function(track,options){var contextOpts=track.options(this.name);var interfaceOpts=this.options;var opts=defaults(options||{},contextOpts);opts=defaults(opts,interfaceOpts);var props=track.properties();var campaign=track.proxy("context.campaign")||{};var custom=metrics(props,interfaceOpts);if(len(custom))window.ga("set",custom);
var payload={eventAction:track.event(),eventCategory:track.category()||this._category||"All",eventLabel:props.label,eventValue:formatValue(props.value||track.revenue()),nonInteraction:!!(props.nonInteraction||opts.nonInteraction)};if(campaign.name)payload.campaignName=campaign.name;if(campaign.source)payload.campaignSource=campaign.source;if(campaign.medium)payload.campaignMedium=campaign.medium;if(campaign.content)payload.campaignContent=campaign.content;if(campaign.term)payload.campaignKeyword=campaign.term;window.ga("send","event",payload)};GA.prototype.completedOrder=function(track){var total=track.total()||track.revenue()||0;var orderId=track.orderId();var products=track.products();var props=track.properties();if(!orderId)return;if(!this.ecommerce){window.ga("require","ecommerce");this.ecommerce=true}window.ga("ecommerce:addTransaction",{affiliation:props.affiliation,shipping:track.shipping(),revenue:total,tax:track.tax(),id:orderId,currency:track.currency()});each(products,function(product){var productTrack=createProductTrack(track,product);window.ga("ecommerce:addItem",{category:productTrack.category(),quantity:productTrack.quantity(),price:productTrack.price(),name:productTrack.name(),sku:productTrack.sku(),id:orderId,currency:productTrack.currency()})});window.ga("ecommerce:send")};GA.prototype.initializeClassic=function(){var opts=this.options;var anonymize=opts.anonymizeIp;var domain=opts.domain;var enhanced=opts.enhancedLinkAttribution;var ignore=opts.ignoredReferrers;var sample=opts.siteSpeedSampleRate;window._gaq=window._gaq||[];push("_setAccount",opts.trackingId);push("_setAllowLinker",true);if(anonymize)push("_gat._anonymizeIp");if(domain)push("_setDomainName",domain);if(sample)push("_setSiteSpeedSampleRate",sample);if(enhanced){var protocol=document.location.protocol==="https:"?"https:":"http:";var pluginUrl=protocol+"//www.google-analytics.com/plugins/ga/inpage_linkid.js";push("_require","inpage_linkid",pluginUrl)}if(ignore){if(!is.array(ignore))ignore=[ignore];each(ignore,function(domain){push("_addIgnoredRef",domain)})}if(this.options.doubleClick){this.load("double click",this.ready)}else{var name=useHttps()?"https":"http";this.load(name,this.ready)}};GA.prototype.loadedClassic=function(){return!!(window._gaq&&window._gaq.push!==Array.prototype.push)};GA.prototype.pageClassic=function(page){var category=page.category();var props=page.properties();var name=page.fullName();var track;push("_trackPageview",path(props,this.options));if(category&&this.options.trackCategorizedPages){track=page.track(category);this.track(track,{nonInteraction:1})}if(name&&this.options.trackNamedPages){track=page.track(name);this.track(track,{nonInteraction:1})}};GA.prototype.trackClassic=function(track,options){var opts=options||track.options(this.name);var props=track.properties();var revenue=track.revenue();var event=track.event();var category=this._category||track.category()||"All";var label=props.label;var value=formatValue(revenue||props.value);var nonInteraction=!!(props.nonInteraction||opts.nonInteraction);push("_trackEvent",category,event,label,value,nonInteraction)};GA.prototype.completedOrderClassic=function(track){var total=track.total()||track.revenue()||0;var orderId=track.orderId();var products=track.products()||[];var props=track.properties();var currency=track.currency();if(!orderId)return;push("_addTrans",orderId,props.affiliation,total,track.tax(),track.shipping(),track.city(),track.state(),track.country());each(products,function(product){var track=new Track({properties:product});push("_addItem",orderId,track.sku(),track.name(),track.category(),track.price(),track.quantity())});push("_set","currencyCode",currency);push("_trackTrans")};function path(properties,options){if(!properties)return;var str=properties.path;if(options.includeSearch&&properties.search)str+=properties.search;return str}function formatValue(value){if(!value||value<0)return 0;return Math.round(value)}function metrics(obj,data){var dimensions=data.dimensions;var metrics=data.metrics;var contentGroupings=data.contentGroupings;var ret={};each([metrics,dimensions,contentGroupings],function(group){each(group,function(prop,key){var value=dot(obj,prop)||obj[prop];if(is.bool(value))value=value.toString();if(value)ret[key]=value})});return ret}GA.prototype.loadEnhancedEcommerce=function(track){if(!this.enhancedEcommerceLoaded){window.ga("require","ec");this.enhancedEcommerceLoaded=true}window.ga("set","&cu",track.currency())};GA.prototype.pushEnhancedEcommerce=function(track){var args=reject(["send","event",track.category()||"EnhancedEcommerce",track.event()||"Action not defined",track.properties().label,{nonInteraction:1}]);window.ga.apply(window,args)};GA.prototype.startedOrderEnhanced=function(track){this.viewedCheckoutStep(track)};GA.prototype.updatedOrderEnhanced=function(track){this.startedOrderEnhanced(track)};GA.prototype.viewedCheckoutStepEnhanced=function(track){var products=track.products();var props=track.properties();var options=extractCheckoutOptions(props);this.loadEnhancedEcommerce(track);each(products,function(product){var productTrack=createProductTrack(track,product);enhancedEcommerceTrackProduct(productTrack)});window.ga("ec:setAction","checkout",{step:props.step||1,option:options||undefined});this.pushEnhancedEcommerce(track)};GA.prototype.completedCheckoutStepEnhanced=function(track){var props=track.properties();var options=extractCheckoutOptions(props);if(!props.step||!options)return;this.loadEnhancedEcommerce(track);window.ga("ec:setAction","checkout_option",{step:props.step||1,option:options});window.ga("send","event","Checkout","Option")};GA.prototype.completedOrderEnhanced=function(track){var total=track.total()||track.revenue()||0;var orderId=track.orderId();var products=track.products();var props=track.properties();if(!orderId)return;this.loadEnhancedEcommerce(track);each(products,function(product){var productTrack=createProductTrack(track,product);enhancedEcommerceTrackProduct(productTrack)});window.ga("ec:setAction","purchase",{id:orderId,affiliation:props.affiliation,revenue:total,tax:track.tax(),shipping:track.shipping(),coupon:track.coupon()});this.pushEnhancedEcommerce(track)};GA.prototype.refundedOrderEnhanced=function(track){var orderId=track.orderId();var products=track.products();if(!orderId)return;this.loadEnhancedEcommerce(track);each(products,function(product){var track=new Track({properties:product});window.ga("ec:addProduct",{id:track.id()||track.sku(),quantity:track.quantity()})});window.ga("ec:setAction","refund",{id:orderId});this.pushEnhancedEcommerce(track)};GA.prototype.addedProductEnhanced=function(track){this.loadEnhancedEcommerce(track);enhancedEcommerceProductAction(track,"add");this.pushEnhancedEcommerce(track)};GA.prototype.removedProductEnhanced=function(track){this.loadEnhancedEcommerce(track);enhancedEcommerceProductAction(track,"remove");this.pushEnhancedEcommerce(track)};GA.prototype.viewedProductEnhanced=function(track){var props=track.properties();var data={};this.loadEnhancedEcommerce(track);if(props.list)data.list=props.list;enhancedEcommerceProductAction(track,"detail",data);this.pushEnhancedEcommerce(track)};GA.prototype.clickedProductEnhanced=function(track){var props=track.properties();var data={};this.loadEnhancedEcommerce(track);if(props.list)data.list=props.list;enhancedEcommerceProductAction(track,"click",data);this.pushEnhancedEcommerce(track)};GA.prototype.viewedPromotionEnhanced=function(track){var props=track.properties();this.loadEnhancedEcommerce(track);window.ga("ec:addPromo",{id:track.id(),name:track.name(),creative:props.creative,position:props.position});this.pushEnhancedEcommerce(track)};GA.prototype.clickedPromotionEnhanced=function(track){var props=track.properties();this.loadEnhancedEcommerce(track);window.ga("ec:addPromo",{id:track.id(),name:track.name(),creative:props.creative,position:props.position});window.ga("ec:setAction","promo_click",{});this.pushEnhancedEcommerce(track)};function enhancedEcommerceTrackProduct(track){var props=track.properties();var product={id:track.id()||track.sku(),name:track.name(),category:track.category(),quantity:track.quantity(),price:track.price(),brand:props.brand,variant:props.variant,currency:track.currency()};var coupon=track.proxy("properties.coupon");if(coupon)product.coupon=coupon;window.ga("ec:addProduct",product)}function enhancedEcommerceProductAction(track,action,data){enhancedEcommerceTrackProduct(track);window.ga("ec:setAction",action,data||{})}function extractCheckoutOptions(props){var options=[props.paymentMethod,props.shippingMethod];var valid=reject(options);return valid.length>0?valid.join(", "):null}function createProductTrack(track,properties){properties.currency=properties.currency||track.currency();return new Track({properties:properties})}},{"@ndhoule/defaults":6,"@segment/analytics.js-integration":52,"component-each":126,"global-queue":140,is:148,"obj-case":161,"object-component":162,reject:165,"segmentio-facade":172,"use-https":184}],52:[function(require,module,exports){arguments[4][31][0].apply(exports,arguments)},{"./protos":53,"./statics":54,"@ndhoule/clone":5,"@ndhoule/defaults":6,"@ndhoule/extend":10,"component-bind":123,debug:56,dup:31,"slug-component":178}],53:[function(require,module,exports){arguments[4][32][0].apply(exports,arguments)},{"@ndhoule/after":3,"@ndhoule/each":8,"@ndhoule/every":9,"@ndhoule/foldl":11,"@segment/fmt":110,"@segment/load-script":114,"analytics-events":55,"component-emitter":128,dup:32,is:148,"load-iframe":154,"next-tick":160,"to-no-case":181}],54:[function(require,module,exports){arguments[4][33][0].apply(exports,arguments)},{"@ndhoule/each":8,"@ndhoule/includes":12,"component-emitter":128,domify:139,dup:33}],55:[function(require,module,exports){arguments[4][34][0].apply(exports,arguments)},{dup:34}],56:[function(require,module,exports){arguments[4][35][0].apply(exports,arguments)},{"./debug":57,dup:35}],57:[function(require,module,exports){arguments[4][36][0].apply(exports,arguments)},{dup:36,ms:155}],58:[function(require,module,exports){"use strict";var convert=require("@segment/convert-dates");var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_hsq");var HubSpot=module.exports=integration("HubSpot").assumesPageview().global("_hsq").option("portalId",null).tag('<script id="hs-analytics" src="https://js.hs-analytics.net/analytics/{{ cacheBuster }}/{{ portalId }}.js">');HubSpot.prototype.initialize=function(){window._hsq=[];var cacheBuster=Math.ceil(new Date/3e5)*3e5;this.load({cacheBuster:cacheBuster},this.ready)};HubSpot.prototype.loaded=function(){return!!(window._hsq&&window._hsq.push!==Array.prototype.push)};HubSpot.prototype.page=function(){push("trackPageView")};HubSpot.prototype.identify=function(identify){if(!identify.email())return;var traits=identify.traits({firstName:"firstname",lastName:"lastname"});traits=convertDates(traits);push("identify",traits)};HubSpot.prototype.track=function(track){var props=convertDates(track.properties({id:"_id",revenue:"value"}));props.id=track.event();push("trackEvent",track.event(),props)};function convertDates(properties){return convert(properties,function(date){return date.getTime()})}},{"@segment/analytics.js-integration":59,"@segment/convert-dates":109,"global-queue":140}],59:[function(require,module,exports){arguments[4][31][0].apply(exports,arguments)},{"./protos":60,"./statics":61,"@ndhoule/clone":5,"@ndhoule/defaults":6,"@ndhoule/extend":10,"component-bind":123,debug:63,dup:31,"slug-component":178}],60:[function(require,module,exports){arguments[4][32][0].apply(exports,arguments)},{"@ndhoule/after":3,"@ndhoule/each":8,"@ndhoule/every":9,"@ndhoule/foldl":11,"@segment/fmt":110,"@segment/load-script":114,"analytics-events":62,"component-emitter":128,dup:32,is:148,"load-iframe":154,"next-tick":160,"to-no-case":181}],61:[function(require,module,exports){arguments[4][33][0].apply(exports,arguments)},{"@ndhoule/each":8,"@ndhoule/includes":12,"component-emitter":128,domify:139,dup:33}],62:[function(require,module,exports){arguments[4][34][0].apply(exports,arguments)},{dup:34}],63:[function(require,module,exports){arguments[4][35][0].apply(exports,arguments)},{"./debug":64,dup:35}],64:[function(require,module,exports){arguments[4][36][0].apply(exports,arguments)},{dup:36,ms:155}],65:[function(require,module,exports){"use strict";var convertDates=require("@segment/convert-dates");var defaults=require("@ndhoule/defaults");var del=require("obj-case").del;var integration=require("@segment/analytics.js-integration");var is=require("is-type");var Intercom=module.exports=integration("Intercom").global("Intercom").option("activator","#IntercomDefaultWidget").option("appId","").tag('<script src="https://widget.intercom.io/widget/{{ appId }}">');Intercom.prototype.initialize=function(){window.Intercom=function(){window.Intercom.q.push(arguments)};window.Intercom.q=[];this.load(this.ready)};Intercom.prototype.loaded=function(){return typeof window.Intercom==="function"};Intercom.prototype.page=function(){this.bootOrUpdate()};Intercom.prototype.identify=function(identify){var traits=identify.traits({userId:"user_id"});var opts=identify.options(this.name);var companyCreated=identify.companyCreated();var created=identify.created();var name=identify.name();var id=identify.userId();var group=this.analytics.group();if(!id&&!traits.email){return}if(traits.company!==null&&!is.object(traits.company)){delete traits.company}if(traits.company){defaults(traits.company,group.traits())}if(name)traits.name=name;if(created){del(traits,"created");del(traits,"createdAt");traits.created_at=created}if(companyCreated){del(traits.company,"created");del(traits.company,"createdAt");traits.company.created_at=companyCreated}traits=convertDates(traits,formatDate);if(opts.userHash)traits.user_hash=opts.userHash;if(opts.user_hash)traits.user_hash=opts.user_hash;this.bootOrUpdate(traits)};Intercom.prototype.group=function(group){var props=group.traits({createdAt:"created",created:"created_at"});props=convertDates(props,formatDate);var id=group.groupId();if(id)props.id=id;api("update",{company:props})};Intercom.prototype.track=function(track){api("trackEvent",track.event(),track.properties())};Intercom.prototype.bootOrUpdate=function(options){options=options||{};var method=this.booted===true?"update":"boot";var activator=this.options.activator;options.app_id=this.options.appId;if(activator!=="#IntercomDefaultWidget"){options.widget={activator:activator}}api(method,options);this.booted=true};function formatDate(date){return Math.floor(date/1e3)}function api(){window.Intercom.apply(window.Intercom,arguments)}},{"@ndhoule/defaults":6,"@segment/analytics.js-integration":66,"@segment/convert-dates":109,"is-type":147,"obj-case":161}],66:[function(require,module,exports){arguments[4][31][0].apply(exports,arguments)},{"./protos":67,"./statics":68,"@ndhoule/clone":5,"@ndhoule/defaults":6,"@ndhoule/extend":10,"component-bind":123,debug:70,dup:31,"slug-component":178}],67:[function(require,module,exports){arguments[4][32][0].apply(exports,arguments)},{"@ndhoule/after":3,"@ndhoule/each":8,"@ndhoule/every":9,"@ndhoule/foldl":11,"@segment/fmt":110,"@segment/load-script":114,"analytics-events":69,"component-emitter":128,dup:32,is:148,"load-iframe":154,"next-tick":160,"to-no-case":181}],68:[function(require,module,exports){arguments[4][33][0].apply(exports,arguments)},{"@ndhoule/each":8,"@ndhoule/includes":12,"component-emitter":128,domify:139,dup:33}],69:[function(require,module,exports){arguments[4][34][0].apply(exports,arguments)},{dup:34}],70:[function(require,module,exports){arguments[4][35][0].apply(exports,arguments)},{"./debug":71,dup:35}],71:[function(require,module,exports){arguments[4][36][0].apply(exports,arguments)},{dup:36,ms:155}],72:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Keen=module.exports=integration("Keen IO").global("KeenSegment").option("ipAddon",false).option("projectId","").option("readKey","").option("referrerAddon",false).option("trackAllPages",false).option("trackCategorizedPages",true).option("trackNamedPages",true).option("uaAddon",false).option("urlAddon",false).option("writeKey","").tag('<script src="//d26b395fwzu5fz.cloudfront.net/3.1.0/{{ lib }}.min.js">');Keen.prototype.initialize=function(){var lib=this.options.readKey?"keen":"keen-tracker";var options=this.options;var previousKeen=window.Keen||null;var self=this;if(!window.Keen||window.Keen.version!=="3.1.0"){window.Keen=undefined;!function(a,b){if(void 0===b[a]){b["_"+a]={},b[a]=function(c){b["_"+a].clients=b["_"+a].clients||{},b["_"+a].clients[c.projectId]=this,this._config=c},b[a].ready=function(c){b["_"+a].ready=b["_"+a].ready||[],b["_"+a].ready.push(c)};for(var c=["addEvent","setGlobalProperties","trackExternalLink","on"],d=0;d<c.length;d++){var e=c[d],f=function(a){return function(){return this["_"+a]=this["_"+a]||[],this["_"+a].push(arguments),this}};b[a].prototype[e]=f(e)}}}("Keen",window)}window.KeenSegment=window.Keen;this.client=new window.KeenSegment({projectId:options.projectId,readKey:options.readKey,writeKey:options.writeKey});this.load({lib:lib},function(){window.KeenSegment=window.Keen;if(previousKeen){window.Keen=previousKeen;previousKeen=undefined}self.ready()})};Keen.prototype.loaded=function(){return!!(window.KeenSegment&&window.KeenSegment.prototype.configure)};Keen.prototype.page=function(page){var category=page.category();var name=page.fullName();var opts=this.options;if(opts.trackAllPages){this.track(page.track())}if(name&&opts.trackNamedPages){this.track(page.track(name))}if(category&&opts.trackCategorizedPages){this.track(page.track(category))}};Keen.prototype.identify=function(identify){var traits=identify.traits();var id=identify.userId();var user={};if(id)user.userId=id;if(traits)user.traits=traits;var props={user:user};this.addons(props,identify);this.client.setGlobalProperties(function(){return props})};Keen.prototype.track=function(track){var props=track.properties();this.addons(props,track);this.client.addEvent(track.event(),props)};Keen.prototype.addons=function(obj,msg){var options=this.options;var addons=[];if(options.ipAddon){addons.push({name:"keen:ip_to_geo",input:{ip:"ip_address"},output:"ip_geo_info"});obj.ip_address="${keen.ip}"}if(options.uaAddon){addons.push({name:"keen:ua_parser",input:{ua_string:"user_agent"},output:"parsed_user_agent"});obj.user_agent="${keen.user_agent}"}if(options.urlAddon){addons.push({name:"keen:url_parser",input:{url:"page_url"},output:"parsed_page_url"});obj.page_url=document.location.href}if(options.referrerAddon){addons.push({name:"keen:referrer_parser",input:{referrer_url:"referrer_url",page_url:"page_url"},output:"referrer_info"});obj.referrer_url=document.referrer;obj.page_url=document.location.href}obj.keen={timestamp:msg.timestamp(),addons:addons}}},{"@segment/analytics.js-integration":73}],73:[function(require,module,exports){arguments[4][31][0].apply(exports,arguments)},{"./protos":74,"./statics":75,"@ndhoule/clone":5,"@ndhoule/defaults":6,"@ndhoule/extend":10,"component-bind":123,debug:77,dup:31,"slug-component":178}],74:[function(require,module,exports){arguments[4][32][0].apply(exports,arguments)},{"@ndhoule/after":3,"@ndhoule/each":8,"@ndhoule/every":9,"@ndhoule/foldl":11,"@segment/fmt":110,"@segment/load-script":114,"analytics-events":76,"component-emitter":128,dup:32,is:148,"load-iframe":154,"next-tick":160,"to-no-case":181}],75:[function(require,module,exports){arguments[4][33][0].apply(exports,arguments)},{"@ndhoule/each":8,"@ndhoule/includes":12,"component-emitter":128,domify:139,dup:33}],76:[function(require,module,exports){arguments[4][34][0].apply(exports,arguments)},{dup:34}],77:[function(require,module,exports){arguments[4][35][0].apply(exports,arguments)},{"./debug":78,dup:35}],78:[function(require,module,exports){arguments[4][36][0].apply(exports,arguments)},{dup:36,ms:155}],79:[function(require,module,exports){"use strict";var each=require("component-each");var integration=require("@segment/analytics.js-integration");var is=require("is");var push=require("global-queue")("_kmq");var extend=require("@ndhoule/extend");var KISSmetrics=module.exports=integration("KISSmetrics").global("KM").global("_kmil").global("_kmq").option("apiKey","").option("prefixProperties",true).option("trackCategorizedPages",true).option("trackNamedPages",true).tag("library",'<script src="//scripts.kissmetrics.com/{{ apiKey }}.2.js">');exports.isMobile=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone|iPod/i);KISSmetrics.prototype.initialize=function(){window._kmq=window._kmq||[];if(exports.isMobile)push("set",{"Mobile Session":"Yes"});this.load("library",this.ready)};KISSmetrics.prototype.loaded=function(){return is.object(window.KM)};KISSmetrics.prototype.page=function(page){if(!window.KM_SKIP_PAGE_VIEW){push("record","Page View",{"Viewed URL":page.url(),Referrer:page.referrer()||"Direct"})}this.trackPage(page)};KISSmetrics.prototype.trackPage=function(page){var category=page.category();var name=page.fullName();var opts=this.options;var e;if(opts.trackCategorizedPages&&category){e=page.category()}if(opts.trackNamedPages&&name){e=page.name()}if(!e){return}var event="Viewed "+e+" Page";var properties=prefix("Page",page.properties());push("record",event,properties)};KISSmetrics.prototype.identify=function(identify){var traits=clean(identify.traits());var id=identify.userId();if(id)push("identify",id);if(traits)push("set",traits)};KISSmetrics.prototype.track=function(track){var mapping={revenue:"Billing Amount"};var event=track.event();var properties=clean(track.properties(mapping));var revenue=track.revenue();if(revenue){properties.revenue=revenue}if(this.options.prefixProperties)properties=prefix(event,properties);push("record",event,properties)};KISSmetrics.prototype.alias=function(alias){push("alias",alias.to(),alias.from())};KISSmetrics.prototype.group=function(group){push("set",prefix("Group",group.traits()))};KISSmetrics.prototype.completedOrder=function(track){var opts=this.options;var event=track.event();var products=track.products();var timestamp=toUnixTimestamp(track.timestamp()||new Date);var properties=track.properties();if(opts.prefixProperties)properties=prefix(event,properties);push("record",event,properties);window._kmq.push(function(){each(products,function(product,i){var item=product;if(opts)item=prefix(event,item);item._t=timestamp+i;item._d=1;window.KM.set(item)})})};function prefix(event,properties){var prefixed={};each(properties,function(key,val){if(key==="Billing Amount"){prefixed[key]=val}else{prefixed[event+" - "+key]=val}});return prefixed}function toUnixTimestamp(date){date=new Date(date);return Math.floor(date.getTime()/1e3)}function clean(obj){var ret={};for(var k in obj){if(obj.hasOwnProperty(k)){var value=obj[k];if(value===null)continue;if(is.date(value)){ret[k]=toUnixTimestamp(value);continue}if(is.bool(value)){ret[k]=value;continue}if(is.number(value)){ret[k]=value;continue}if(value.toString()!=="[object Object]"){ret[k]=value.toString();continue}var nestedObj={};nestedObj[k]=value;var flattenedObj=flatten(nestedObj,{safe:true});for(var key in flattenedObj){if(is.array(flattenedObj[key])){flattenedObj[key]=flattenedObj[key].toString()}}ret=extend(ret,flattenedObj);delete ret[k]}}return ret}function flatten(target,opts){opts=opts||{};var delimiter=opts.delimiter||".";var maxDepth=opts.maxDepth;var currentDepth=1;var output={};function step(object,prev){for(var key in object){if(object.hasOwnProperty(key)){var value=object[key];var isarray=opts.safe&&is.array(value);var type=Object.prototype.toString.call(value);var isobject=type==="[object Object]"||type==="[object Array]";var arr=[];var newKey=prev?prev+delimiter+key:key;if(!opts.maxDepth){maxDepth=currentDepth+1}for(var keys in value){if(value.hasOwnProperty(keys)){arr.push(keys)}}if(!isarray&&isobject&&arr.length&&currentDepth<maxDepth){++currentDepth;return step(value,newKey)}output[newKey]=value}}}step(target);return output}},{"@ndhoule/extend":10,"@segment/analytics.js-integration":80,"component-each":126,"global-queue":140,is:148}],80:[function(require,module,exports){arguments[4][31][0].apply(exports,arguments)},{"./protos":81,"./statics":82,"@ndhoule/clone":5,"@ndhoule/defaults":6,"@ndhoule/extend":10,"component-bind":123,debug:84,dup:31,"slug-component":178}],81:[function(require,module,exports){arguments[4][32][0].apply(exports,arguments)},{"@ndhoule/after":3,"@ndhoule/each":8,"@ndhoule/every":9,"@ndhoule/foldl":11,"@segment/fmt":110,"@segment/load-script":114,"analytics-events":83,"component-emitter":128,dup:32,is:148,"load-iframe":154,"next-tick":160,"to-no-case":181}],82:[function(require,module,exports){arguments[4][33][0].apply(exports,arguments)},{"@ndhoule/each":8,"@ndhoule/includes":12,"component-emitter":128,domify:139,dup:33}],83:[function(require,module,exports){arguments[4][34][0].apply(exports,arguments)},{dup:34}],84:[function(require,module,exports){arguments[4][35][0].apply(exports,arguments)},{"./debug":85,dup:35}],85:[function(require,module,exports){arguments[4][36][0].apply(exports,arguments)},{dup:36,ms:155}],86:[function(require,module,exports){"use strict";var alias=require("@segment/alias");var dates=require("@segment/convert-dates");var del=require("obj-case").del;var includes=require("@ndhoule/includes");var integration=require("@segment/analytics.js-integration");var iso=require("@segment/to-iso-string");var pick=require("@ndhoule/pick");var is=require("is");var indexOf=require("component-indexof");var Mixpanel=module.exports=integration("Mixpanel").global("mixpanel").option("increments",[]).option("peopleProperties",[]).option("superProperties",[]).option("cookieName","").option("crossSubdomainCookie",false).option("secureCookie",false).option("persistence","cookie").option("nameTag",true).option("pageview",false).option("people",false).option("token","").option("setAllTraitsByDefault",true).option("consolidatedPageCalls",true).option("trackAllPages",false).option("trackNamedPages",false).option("trackCategorizedPages",false).tag('<script src="//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js">');var optionsAliases={cookieName:"cookie_name",crossSubdomainCookie:"cross_subdomain_cookie",secureCookie:"secure_cookie"};Mixpanel.prototype.initialize=function(){(function(c,a){window.mixpanel=a;var b,d,h,e;a._i=[];a.init=function(b,c,f){function d(a,b){var c=b.split(".");2==c.length&&(a=a[c[0]],b=c[1]);a[b]=function(){a.push([b].concat(Array.prototype.slice.call(arguments,0)))}}var g=a;"undefined"!==typeof f?g=a[f]=[]:f="mixpanel";g.people=g.people||[];h=["disable","time_event","track","track_pageview","track_links","track_forms","register","register_once","unregister","identify","alias","name_tag","set_config","people.set","people.increment","people.track_charge","people.append","people.union","people.track_charge","people.clear_charges","people.delete_user"];for(e=0;e<h.length;e++)d(g,h[e]);a._i.push([b,c,f])};a.__SV=1.2})(document,window.mixpanel||[]);this.options.increments=lowercase(this.options.increments);var options=alias(this.options,optionsAliases);window.mixpanel.init(options.token,options);this.load(this.ready)};Mixpanel.prototype.loaded=function(){return!!(window.mixpanel&&window.mixpanel.config)};Mixpanel.prototype.page=function(page){var category=page.category();var name=page.name();var opts=this.options;if(opts.consolidatedPageCalls){this.track(page.track());return}if(opts.trackAllPages){this.track(page.track());return}if(opts.trackCategorizedPages&&category){if(name){this.track(page.track(page.fullName()));return}this.track(page.track(category));return}if(name&&opts.trackNamedPages){this.track(page.track(name))}};var traitAliases={created:"$created",email:"$email",firstName:"$first_name",lastName:"$last_name",lastSeen:"$last_seen",name:"$name",username:"$username",phone:"$phone"};Mixpanel.prototype.identify=function(identify){var username=identify.username();var email=identify.email();var id=identify.userId();var setAllTraitsByDefault=this.options.setAllTraitsByDefault;var people=this.options.people;var peopleProperties=extendTraits(this.options.peopleProperties);var superProperties=this.options.superProperties;if(id)window.mixpanel.identify(id);var nametag=email||username||id;if(nametag)window.mixpanel.name_tag(nametag);var traits=identify.traits(traitAliases);if(traits.$created)del(traits,"createdAt");if(setAllTraitsByDefault){window.mixpanel.register(dates(traits,iso));if(this.options.people)window.mixpanel.people.set(traits)}var mappedSuperProps=mapTraits(superProperties);var superProps=pick(mappedSuperProps||[],traits);if(!is.empty(superProps))window.mixpanel.register(superProps);if(people){var mappedPeopleProps=mapTraits(peopleProperties);var peopleProps=pick(mappedPeopleProps||[],traits);if(!is.empty(peopleProps))window.mixpanel.people.set(peopleProps)}};Mixpanel.prototype.track=function(track){var increments=this.options.increments;var increment=track.event().toLowerCase();var people=this.options.people;var props=track.properties();var revenue=track.revenue();var superProps=pick(this.options.superProperties,props);delete props.distinct_id;delete props.ip;delete props.mp_name_tag;delete props.mp_note;delete props.token;if(people&&includes(increment,increments)){window.mixpanel.people.increment(track.event());window.mixpanel.people.set("Last "+track.event(),new Date)}props=dates(props,iso);window.mixpanel.track(track.event(),props);if(!is.empty(superProps)){window.mixpanel.register(superProps)}if(revenue&&people){window.mixpanel.people.track_charge(revenue)}};Mixpanel.prototype.alias=function(alias){var mp=window.mixpanel;var to=alias.to();if(mp.get_distinct_id&&mp.get_distinct_id()===to)return;if(mp.get_property&&mp.get_property("$people_distinct_id")===to)return;mp.alias(to,alias.from())};function lowercase(arr){var ret=new Array(arr.length);for(var i=0;i<arr.length;++i){ret[i]=String(arr[i]).toLowerCase()}return ret}function mapTraits(arr){var ret=new Array(arr.length);for(var i=0;i<arr.length;++i){if(traitAliases.hasOwnProperty(arr[i])){ret.push(traitAliases[arr[i]])}else{ret.push(arr[i])}}return ret}function extendTraits(arr){var keys=[];for(var key in traitAliases){if(traitAliases.hasOwnProperty(key)){keys.push(key)}}for(var i=0;i<keys.length;++i){if(indexOf(arr,keys[i])<0){arr.push(keys[i])}}return arr}},{"@ndhoule/includes":12,"@ndhoule/pick":15,"@segment/alias":18,"@segment/analytics.js-integration":87,"@segment/convert-dates":109,"@segment/to-iso-string":119,"component-indexof":130,is:148,"obj-case":161}],87:[function(require,module,exports){arguments[4][31][0].apply(exports,arguments)},{"./protos":88,"./statics":89,"@ndhoule/clone":5,"@ndhoule/defaults":6,"@ndhoule/extend":10,"component-bind":123,debug:91,dup:31,"slug-component":178}],88:[function(require,module,exports){arguments[4][32][0].apply(exports,arguments)},{"@ndhoule/after":3,"@ndhoule/each":8,"@ndhoule/every":9,"@ndhoule/foldl":11,"@segment/fmt":110,"@segment/load-script":114,"analytics-events":90,"component-emitter":128,dup:32,is:148,"load-iframe":154,"next-tick":160,"to-no-case":181}],89:[function(require,module,exports){arguments[4][33][0].apply(exports,arguments)},{"@ndhoule/each":8,"@ndhoule/includes":12,"component-emitter":128,domify:139,dup:33}],90:[function(require,module,exports){arguments[4][34][0].apply(exports,arguments)},{dup:34}],91:[function(require,module,exports){arguments[4][35][0].apply(exports,arguments)},{"./debug":92,dup:35}],92:[function(require,module,exports){arguments[4][36][0].apply(exports,arguments)},{dup:36,ms:155}],93:[function(require,module,exports){"use strict";var push=require("global-queue")("_qevents",{wrap:false});var integration=require("@segment/analytics.js-integration");
var useHttps=require("use-https");var is=require("is");var Quantcast=module.exports=integration("Quantcast").assumesPageview().global("_qevents").global("__qc").option("pCode",null).option("advertise",false).tag("http",'<script src="http://edge.quantserve.com/quant.js">').tag("https",'<script src="https://secure.quantserve.com/quant.js">');Quantcast.prototype.initialize=function(page){window._qevents=window._qevents||[];var opts=this.options;var settings={qacct:opts.pCode};var user=this.analytics.user();if(user.id())settings.uid=user.id().toString();if(page){settings.labels=this._labels(page)}push(settings);var name=useHttps()?"https":"http";this.load(name,this.ready)};Quantcast.prototype.loaded=function(){return!!window.__qc};Quantcast.prototype.page=function(page){var settings={event:"refresh",labels:this._labels(page),qacct:this.options.pCode};var user=this.analytics.user();if(!this.options.advertise&&!page.name()&&!page.category())delete settings.labels;if(user.id())settings.uid=user.id().toString();push(settings)};Quantcast.prototype.identify=function(identify){if(identify.userId()){window._qevents[0]=window._qevents[0]||{};window._qevents[0].uid=identify.userId().toString()}};Quantcast.prototype.track=function(track){var revenue=track.revenue();var orderId=track.orderId();var user=this.analytics.user();var settings={event:"click",labels:this._labels(track),qacct:this.options.pCode};if(revenue)settings.revenue=String(revenue);if(orderId)settings.orderid=String(orderId);if(user.id())settings.uid=user.id().toString();push(settings)};Quantcast.prototype.completedOrder=function(track){var labels=this._labels(track);var category=safe(track.category());if(this.options.advertise&&category){labels+=",_fp.pcat."+category}var repeat=track.proxy("properties.repeat");if(this.options.advertise&&typeof repeat==="boolean"){labels+=",_fp.customer."+(repeat?"repeat":"new")}var settings={event:"refresh",labels:labels,revenue:String(track.total()),orderid:String(track.orderId()),qacct:this.options.pCode};push(settings)};Quantcast.prototype._labels=function(facade){var action=facade.action();var autoLabels=[];var ret;if(action==="page"){if(facade.category())autoLabels.push(safe(facade.category()));autoLabels.push(safe(facade.name()||"Default"));autoLabels=autoLabels.join(".")}else if(action==="track"){autoLabels=safe(facade.event())}var label=safe(facade.proxy("properties.label"));var customLabels=facade.options("Quantcast").labels||[];if(is.string(customLabels))customLabels=[customLabels];customLabels=customLabels.map(function(label){return safe(label)});if(is.string(label))customLabels.unshift(label);customLabels=customLabels.join(",");if(this.options.advertise){ret="_fp.event."+autoLabels}else{ret=autoLabels}if(customLabels)ret+=","+customLabels;return ret};function safe(str){if(str)return str.replace(/[^\w\s]|_/gi,"")}},{"@segment/analytics.js-integration":94,"global-queue":140,is:148,"use-https":184}],94:[function(require,module,exports){arguments[4][31][0].apply(exports,arguments)},{"./protos":95,"./statics":96,"@ndhoule/clone":5,"@ndhoule/defaults":6,"@ndhoule/extend":10,"component-bind":123,debug:98,dup:31,"slug-component":178}],95:[function(require,module,exports){arguments[4][32][0].apply(exports,arguments)},{"@ndhoule/after":3,"@ndhoule/each":8,"@ndhoule/every":9,"@ndhoule/foldl":11,"@segment/fmt":110,"@segment/load-script":114,"analytics-events":97,"component-emitter":128,dup:32,is:148,"load-iframe":154,"next-tick":160,"to-no-case":181}],96:[function(require,module,exports){arguments[4][33][0].apply(exports,arguments)},{"@ndhoule/each":8,"@ndhoule/includes":12,"component-emitter":128,domify:139,dup:33}],97:[function(require,module,exports){arguments[4][34][0].apply(exports,arguments)},{dup:34}],98:[function(require,module,exports){arguments[4][35][0].apply(exports,arguments)},{"./debug":99,dup:35}],99:[function(require,module,exports){arguments[4][36][0].apply(exports,arguments)},{dup:36,ms:155}],100:[function(require,module,exports){"use strict";var ads=require("@segment/ad-params");var clone=require("component-clone");var cookie=require("component-cookie");var extend=require("@ndhoule/extend");var integration=require("@segment/analytics.js-integration");var json=require("json3");var localstorage=require("yields-store");var md5=require("spark-md5").hash;var protocol=require("@segment/protocol");var send=require("@segment/send-json");var topDomain=require("@segment/top-domain");var utm=require("@segment/utm-params");var uuid=require("uuid").v4;var cookieOptions={maxage:31536e6,secure:false,path:"/"};var Segment=exports=module.exports=integration("Segment.io").option("apiKey","");exports.storage=function(){return protocol()==="file:"||protocol()==="chrome-extension:"?localstorage:cookie};exports.global=window;Segment.prototype.initialize=function(){var self=this;this.ready();this.analytics.on("invoke",function(msg){var action=msg.action();var listener="on"+msg.action();self.debug("%s %o",action,msg);if(self[listener])self[listener](msg);self.ready()})};Segment.prototype.loaded=function(){return true};Segment.prototype.onpage=function(page){this.send("/p",page.json())};Segment.prototype.onidentify=function(identify){this.send("/i",identify.json())};Segment.prototype.ongroup=function(group){this.send("/g",group.json())};Segment.prototype.ontrack=function(track){var json=track.json();delete json.traits;this.send("/t",json)};Segment.prototype.onalias=function(alias){var json=alias.json();var user=this.analytics.user();json.previousId=json.previousId||json.from||user.id()||user.anonymousId();json.userId=json.userId||json.to;delete json.from;delete json.to;this.send("/a",json)};Segment.prototype.normalize=function(msg){this.debug("normalize %o",msg);var user=this.analytics.user();var global=exports.global;var query=global.location.search;var ctx=msg.context=msg.context||msg.options||{};var traits=this.analytics.user().traits();delete msg.options;msg.writeKey=this.options.apiKey;ctx.traits=ctx.traits||traits;ctx.userAgent=navigator.userAgent;if(!ctx.library)ctx.library={name:"analytics.js",version:this.analytics.VERSION};if(query)ctx.campaign=utm(query);this.referrerId(query,ctx);msg.userId=msg.userId||user.id();msg.anonymousId=user.anonymousId();msg.sentAt=new Date;msg.messageId="ajs-"+md5(json.stringify(msg)+uuid());this.debug("normalized %o",msg);this.ampId(ctx);return msg};Segment.prototype.ampId=function(ctx){var ampId=this.cookie("segment_amp_id");if(ampId)ctx.amp={id:ampId}};Segment.prototype.send=function(path,msg,fn){var url=scheme()+"//api.segment.io/v1"+path;var headers={"Content-Type":"text/plain"};fn=fn||noop;var self=this;msg=this.normalize(msg);send(url,msg,headers,function(err,res){self.debug("sent %O, received %O",msg,arguments);if(err)return fn(err);res.url=url;fn(null,res)})};Segment.prototype.cookie=function(name,val){var store=Segment.storage();if(arguments.length===1)return store(name);var global=exports.global;var href=global.location.href;var domain="."+topDomain(href);if(domain===".")domain="";this.debug("store domain %s -> %s",href,domain);var opts=clone(cookieOptions);opts.domain=domain;this.debug("store %s, %s, %o",name,val,opts);store(name,val,opts);if(store(name))return;delete opts.domain;this.debug("fallback store %s, %s, %o",name,val,opts);store(name,val,opts)};Segment.prototype.referrerId=function(query,ctx){var stored=this.cookie("s:context.referrer");var ad;if(stored)stored=json.parse(stored);if(query)ad=ads(query);ad=ad||stored;if(!ad)return;ctx.referrer=extend(ctx.referrer||{},ad);this.cookie("s:context.referrer",json.stringify(ad))};function scheme(){return protocol()==="http:"?"http:":"https:"}function noop(){}},{"@ndhoule/extend":10,"@segment/ad-params":17,"@segment/analytics.js-integration":101,"@segment/protocol":116,"@segment/send-json":117,"@segment/top-domain":120,"@segment/utm-params":121,"component-clone":124,"component-cookie":125,json3:149,"spark-md5":179,uuid:187,"yields-store":188}],101:[function(require,module,exports){arguments[4][31][0].apply(exports,arguments)},{"./protos":102,"./statics":103,"@ndhoule/clone":5,"@ndhoule/defaults":6,"@ndhoule/extend":10,"component-bind":123,debug:105,dup:31,"slug-component":178}],102:[function(require,module,exports){arguments[4][32][0].apply(exports,arguments)},{"@ndhoule/after":3,"@ndhoule/each":8,"@ndhoule/every":9,"@ndhoule/foldl":11,"@segment/fmt":110,"@segment/load-script":114,"analytics-events":104,"component-emitter":128,dup:32,is:148,"load-iframe":154,"next-tick":160,"to-no-case":181}],103:[function(require,module,exports){arguments[4][33][0].apply(exports,arguments)},{"@ndhoule/each":8,"@ndhoule/includes":12,"component-emitter":128,domify:139,dup:33}],104:[function(require,module,exports){arguments[4][34][0].apply(exports,arguments)},{dup:34}],105:[function(require,module,exports){arguments[4][35][0].apply(exports,arguments)},{"./debug":106,dup:35}],106:[function(require,module,exports){arguments[4][36][0].apply(exports,arguments)},{dup:36,ms:155}],107:[function(require,module,exports){var utf8Encode=require("utf8-encode");var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";module.exports=encode;function encode(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=utf8Encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=(chr1&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}output=output+keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4)}return output}},{"utf8-encode":185}],108:[function(require,module,exports){"use strict";function canonical(){var tags=document.getElementsByTagName("link");for(var i=0,tag;tag=tags[i];i++){if(tag.getAttribute("rel")==="canonical"){return tag.getAttribute("href")}}}module.exports=canonical},{}],109:[function(require,module,exports){"use strict";var clone=require("@ndhoule/clone");var each=require("@ndhoule/each");var type=require("component-type");function convertDates(obj,convert){obj=clone(obj);each(function(val,key){if(type(val)==="date"){obj[key]=convert(val)}if(type(val)==="object"){obj[key]=convertDates(val,convert)}},obj);return obj}module.exports=convertDates},{"@ndhoule/clone":5,"@ndhoule/each":8,"component-type":134}],110:[function(require,module,exports){(function(global){"use strict";var toString=global.JSON&&typeof JSON.stringify==="function"?JSON.stringify:String;function fmt(str){var args=Array.prototype.slice.call(arguments,1);var j=0;return str.replace(/%([a-z])/gi,function(match,f){return fmt[f]?fmt[f](args[j++]):match+f})}fmt.o=toString;fmt.s=String;fmt.d=parseInt;module.exports=fmt}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],111:[function(require,module,exports){"use strict";function isMeta(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey){return true}var which=e.which;var button=e.button;if(!which&&button!==undefined){return!button&1&&!button&2&&button&4}else if(which===2){return true}return false}module.exports=isMeta},{}],112:[function(require,module,exports){"use strict";var type=require("component-type");var each=require("component-each");var isodate=require("@segment/isodate");module.exports=traverse;function traverse(input,strict){if(strict===undefined)strict=true;if(type(input)==="object")return object(input,strict);if(type(input)==="array")return array(input,strict);return input}function object(obj,strict){each(obj,function(key,val){if(isodate.is(val,strict)){obj[key]=isodate.parse(val)}else if(type(val)==="object"||type(val)==="array"){traverse(val,strict)}});return obj}function array(arr,strict){each(arr,function(val,x){if(type(val)==="object"){traverse(val,strict)}else if(isodate.is(val,strict)){arr[x]=isodate.parse(val)}});return arr}},{"@segment/isodate":113,"component-each":126,"component-type":134}],113:[function(require,module,exports){"use strict";var matcher=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;exports.parse=function(iso){var numericKeys=[1,5,6,7,11,12];var arr=matcher.exec(iso);var offset=0;if(!arr){return new Date(iso)}for(var i=0,val;val=numericKeys[i];i++){arr[val]=parseInt(arr[val],10)||0}arr[2]=parseInt(arr[2],10)||1;arr[3]=parseInt(arr[3],10)||1;arr[2]--;arr[8]=arr[8]?(arr[8]+"00").substring(0,3):0;if(arr[4]===" "){offset=(new Date).getTimezoneOffset()}else if(arr[9]!=="Z"&&arr[10]){offset=arr[11]*60+arr[12];if(arr[10]==="+"){offset=0-offset}}var millis=Date.UTC(arr[1],arr[2],arr[3],arr[5],arr[6]+offset,arr[7],arr[8]);return new Date(millis)};exports.is=function(string,strict){if(strict&&/^\d{4}-\d{2}-\d{2}/.test(string)===false){return false}return matcher.test(string)}},{}],114:[function(require,module,exports){"use strict";var onload=require("script-onload");var tick=require("next-tick");var type=require("component-type");function loadScript(options,cb){if(!options){throw new Error("Can't load nothing...")}if(type(options)==="string"){options={src:options}}var https=document.location.protocol==="https:"||document.location.protocol==="chrome-extension:";if(options.src&&options.src.indexOf("//")===0){options.src=(https?"https:":"http:")+options.src}if(https&&options.https){options.src=options.https}else if(!https&&options.http){options.src=options.http}var script=document.createElement("script");script.type="text/javascript";script.async=true;script.src=options.src;if(type(cb)==="function"){onload(script,cb)}tick(function(){var firstScript=document.getElementsByTagName("script")[0];firstScript.parentNode.insertBefore(script,firstScript)});return script}module.exports=loadScript},{"component-type":134,"next-tick":160,"script-onload":166}],115:[function(require,module,exports){"use strict";function preventDefault(e){e=e||window.event;return e.preventDefault?e.preventDefault():e.returnValue=false}module.exports=preventDefault},{}],116:[function(require,module,exports){"use strict";var define=Object.defineProperty;var initialProtocol=window.location.protocol;var mockedProtocol;module.exports=function(protocol){if(arguments.length===0){return get()}return set(protocol)};module.exports.http=function(){set("http:")};module.exports.https=function(){set("https:")};module.exports.reset=function(){set(initialProtocol)};function get(){return mockedProtocol||window.location.protocol}function set(protocol){try{define(window.location,"protocol",{get:function(){return protocol}})}catch(err){mockedProtocol=protocol}}},{}],117:[function(require,module,exports){"use strict";var JSON=require("json3");var base64encode=require("@segment/base64-encode");var cors=require("has-cors");var jsonp=require("jsonp");exports=module.exports=cors?json:base64;exports.callback="callback";exports.prefix="data";exports.json=json;exports.base64=base64;exports.type=cors?"xhr":"jsonp";function json(url,obj,headers,fn){if(arguments.length===3)fn=headers,headers={};var req=new XMLHttpRequest;req.onerror=fn;req.onreadystatechange=done;req.open("POST",url,true);for(var k in headers){req.setRequestHeader(k,headers[k])}req.send(JSON.stringify(obj));function done(){if(req.readyState===4){return fn(null,req)}}}function base64(url,obj,_,fn){if(arguments.length===3)fn=_;var prefix=exports.prefix;var data=encode(obj);url+="?"+prefix+"="+data;jsonp(url,{param:exports.callback},function(err,obj){if(err)return fn(err);fn(null,{url:url,body:obj})})}function encode(obj){var str="";str=JSON.stringify(obj);str=base64encode(str);str=str.replace(/\+/g,"-").replace(/\//g,"_");return encodeURIComponent(str)}},{"@segment/base64-encode":107,"has-cors":143,json3:149,jsonp:150}],118:[function(require,module,exports){(function(global){"use strict";var JSON=require("json3");module.exports=function(){var store={},win=typeof window!="undefined"?window:global,doc=win.document,localStorageName="localStorage",scriptTag="script",storage;store.disabled=false;store.version="1.3.20";store.set=function(key,value){};store.get=function(key,defaultVal){};store.has=function(key){return store.get(key)!==undefined};store.remove=function(key){};store.clear=function(){};store.transact=function(key,defaultVal,transactionFn){if(transactionFn==null){transactionFn=defaultVal;defaultVal=null}if(defaultVal==null){defaultVal={}}var val=store.get(key,defaultVal);transactionFn(val);store.set(key,val)};store.getAll=function(){var ret={};store.forEach(function(key,val){ret[key]=val});return ret};store.forEach=function(){};store.serialize=function(value){return JSON.stringify(value)};store.deserialize=function(value){if(typeof value!="string"){return undefined}try{return JSON.parse(value)}catch(e){return value||undefined}};function isLocalStorageNameSupported(){try{return localStorageName in win&&win[localStorageName]}catch(err){return false}}if(isLocalStorageNameSupported()){storage=win[localStorageName];store.set=function(key,val){if(val===undefined){return store.remove(key)}storage.setItem(key,store.serialize(val));return val};store.get=function(key,defaultVal){var val=store.deserialize(storage.getItem(key));return val===undefined?defaultVal:val};store.remove=function(key){storage.removeItem(key)};store.clear=function(){storage.clear()};store.forEach=function(callback){for(var i=0;i<storage.length;i++){var key=storage.key(i);callback(key,store.get(key))}}}else if(doc&&doc.documentElement.addBehavior){var storageOwner,storageContainer;try{storageContainer=new ActiveXObject("htmlfile");storageContainer.open();storageContainer.write("<"+scriptTag+">document.w=window</"+scriptTag+'><iframe src="/favicon.ico"></iframe>');storageContainer.close();storageOwner=storageContainer.w.frames[0].document;storage=storageOwner.createElement("div")}catch(e){storage=doc.createElement("div");storageOwner=doc.body}var withIEStorage=function(storeFunction){return function(){var args=Array.prototype.slice.call(arguments,0);args.unshift(storage);storageOwner.appendChild(storage);storage.addBehavior("#default#userData");storage.load(localStorageName);var result=storeFunction.apply(store,args);storageOwner.removeChild(storage);return result}};var forbiddenCharsRegex=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");var ieKeyFix=function(key){return key.replace(/^d/,"___$&").replace(forbiddenCharsRegex,"___")};store.set=withIEStorage(function(storage,key,val){key=ieKeyFix(key);if(val===undefined){return store.remove(key)}storage.setAttribute(key,store.serialize(val));storage.save(localStorageName);return val});store.get=withIEStorage(function(storage,key,defaultVal){key=ieKeyFix(key);var val=store.deserialize(storage.getAttribute(key));return val===undefined?defaultVal:val});store.remove=withIEStorage(function(storage,key){key=ieKeyFix(key);storage.removeAttribute(key);storage.save(localStorageName)});store.clear=withIEStorage(function(storage){var attributes=storage.XMLDocument.documentElement.attributes;storage.load(localStorageName);for(var i=attributes.length-1;i>=0;i--){storage.removeAttribute(attributes[i].name)}storage.save(localStorageName)});store.forEach=withIEStorage(function(storage,callback){var attributes=storage.XMLDocument.documentElement.attributes;for(var i=0,attr;attr=attributes[i];++i){callback(attr.name,store.deserialize(storage.getAttribute(attr.name)))}})}try{var testKey="__storejs__";store.set(testKey,testKey);if(store.get(testKey)!=testKey){store.disabled=true}store.remove(testKey)}catch(e){store.disabled=true}store.enabled=!store.disabled;return store}()}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{json3:149}],119:[function(require,module,exports){"use strict";function pad(number){var n=number.toString();return n.length===1?"0"+n:n}function toISOString(date){return date.getUTCFullYear()+"-"+pad(date.getUTCMonth()+1)+"-"+pad(date.getUTCDate())+"T"+pad(date.getUTCHours())+":"+pad(date.getUTCMinutes())+":"+pad(date.getUTCSeconds())+"."+String((date.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}module.exports=toISOString},{}],120:[function(require,module,exports){"use strict";var parse=require("component-url").parse;var cookie=require("component-cookie");function domain(url){var cookie=exports.cookie;var levels=exports.levels(url);for(var i=0;i<levels.length;++i){var cname="__tld__";var domain=levels[i];var opts={domain:"."+domain};cookie(cname,1,opts);if(cookie(cname)){cookie(cname,null,opts);return domain}}return""}domain.levels=function(url){var host=parse(url).hostname;var parts=host.split(".");var last=parts[parts.length-1];var levels=[];if(parts.length===4&&last===parseInt(last,10)){return levels}if(parts.length<=1){return levels}for(var i=parts.length-2;i>=0;--i){levels.push(parts.slice(i).join("."))}return levels};domain.cookie=cookie;exports=module.exports=domain},{"component-cookie":125,"component-url":135}],121:[function(require,module,exports){"use strict";var foldl=require("@ndhoule/foldl");var parse=require("component-querystring").parse;var has=Object.prototype.hasOwnProperty;function utm(query){if(query.charAt(0)==="?"){query=query.substring(1)}query=query.replace(/\?/g,"&");var param;var params=parse(query);var results={};for(var key in params){if(has.call(params,key)){if(key.substr(0,4)==="utm_"){param=key.substr(4);if(param==="campaign")param="name";results[param]=params[key]}}}return results}var allowedKeys={name:true,term:true,source:true,medium:true,content:true};function strict(query){return foldl(function(acc,val,key){if(has.call(allowedKeys,key))acc[key]=val;return acc},{},utm(query))}module.exports=utm;module.exports.strict=strict},{"@ndhoule/foldl":11,"component-querystring":132}],122:[function(require,module,exports){"use strict";var bind=require("component-bind");function bindAll(obj){for(var key in obj){var val=obj[key];if(typeof val==="function"){obj[key]=bind(obj,obj[key])}}return obj}module.exports=bindAll},{"component-bind":123}],123:[function(require,module,exports){var slice=[].slice;module.exports=function(obj,fn){if("string"==typeof fn)fn=obj[fn];if("function"!=typeof fn)throw new Error("bind() requires a function");var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)))}}},{}],124:[function(require,module,exports){var type;try{type=require("component-type")}catch(_){type=require("type")}module.exports=clone;function clone(obj){switch(type(obj)){case"object":var copy={};for(var key in obj){if(obj.hasOwnProperty(key)){copy[key]=clone(obj[key])}}return copy;case"array":var copy=new Array(obj.length);for(var i=0,l=obj.length;i<l;i++){copy[i]=clone(obj[i])}return copy;case"regexp":var flags="";flags+=obj.multiline?"m":"";flags+=obj.global?"g":"";flags+=obj.ignoreCase?"i":"";return new RegExp(obj.source,flags);case"date":return new Date(obj.getTime());default:return obj}}},{"component-type":134,type:134}],125:[function(require,module,exports){var debug=require("debug")("cookie");module.exports=function(name,value,options){switch(arguments.length){case 3:case 2:return set(name,value,options);case 1:return get(name);default:return all()}};function set(name,value,options){options=options||{};var str=encode(name)+"="+encode(value);if(null==value)options.maxage=-1;if(options.maxage){options.expires=new Date(+new Date+options.maxage)}if(options.path)str+="; path="+options.path;if(options.domain)str+="; domain="+options.domain;if(options.expires)str+="; expires="+options.expires.toUTCString();if(options.secure)str+="; secure";document.cookie=str}function all(){var str;try{str=document.cookie}catch(err){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(err.stack||err)}return{}}return parse(str)}function get(name){return all()[name]}function parse(str){var obj={};var pairs=str.split(/ *; */);var pair;if(""==pairs[0])return obj;for(var i=0;i<pairs.length;++i){pair=pairs[i].split("=");obj[decode(pair[0])]=decode(pair[1])}return obj}function encode(value){try{return encodeURIComponent(value)}catch(e){debug("error `encode(%o)` - %o",value,e)}}function decode(value){try{return decodeURIComponent(value)}catch(e){debug("error `decode(%o)` - %o",value,e)}}},{debug:137}],126:[function(require,module,exports){try{var type=require("type")}catch(err){var type=require("component-type")}var toFunction=require("to-function");var has=Object.prototype.hasOwnProperty;module.exports=function(obj,fn,ctx){fn=toFunction(fn);ctx=ctx||this;switch(type(obj)){case"array":return array(obj,fn,ctx);case"object":if("number"==typeof obj.length)return array(obj,fn,ctx);return object(obj,fn,ctx);case"string":return string(obj,fn,ctx)}};function string(obj,fn,ctx){for(var i=0;i<obj.length;++i){fn.call(ctx,obj.charAt(i),i)}}function object(obj,fn,ctx){for(var key in obj){if(has.call(obj,key)){fn.call(ctx,key,obj[key])}}}function array(obj,fn,ctx){for(var i=0;i<obj.length;++i){fn.call(ctx,obj[i],i)}}},{"component-type":127,"to-function":180,type:127}],127:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if(val===null)return"null";if(val===undefined)return"undefined";if(val&&val.nodeType===1)return"element";if(val===Object(val))return"object";return typeof val}},{}],128:[function(require,module,exports){if(typeof module!=="undefined"){module.exports=Emitter}function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){function on(){this.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks["$"+event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks["$"+event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],129:[function(require,module,exports){var bind=window.addEventListener?"addEventListener":"attachEvent",unbind=window.removeEventListener?"removeEventListener":"detachEvent",prefix=bind!=="addEventListener"?"on":"";exports.bind=function(el,type,fn,capture){el[bind](prefix+type,fn,capture||false);return fn};exports.unbind=function(el,type,fn,capture){el[unbind](prefix+type,fn,capture||false);return fn}},{}],130:[function(require,module,exports){module.exports=function(arr,obj){if(arr.indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i){if(arr[i]===obj)return i}return-1}},{}],131:[function(require,module,exports){var globals=/\b(Array|Date|Object|Math|JSON)\b/g;module.exports=function(str,fn){var p=unique(props(str));if(fn&&"string"==typeof fn)fn=prefixed(fn);if(fn)return map(str,p,fn);return p};function props(str){return str.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\//g,"").replace(globals,"").match(/[a-zA-Z_]\w*/g)||[]}function map(str,props,fn){var re=/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\/|[a-zA-Z_]\w*/g;return str.replace(re,function(_){if("("==_[_.length-1])return fn(_);if(!~props.indexOf(_))return _;return fn(_)})}function unique(arr){var ret=[];for(var i=0;i<arr.length;i++){if(~ret.indexOf(arr[i]))continue;ret.push(arr[i])}return ret}function prefixed(str){return function(_){return str+_}}},{}],132:[function(require,module,exports){var trim=require("trim");var type=require("type");var pattern=/(\w+)\[(\d+)\]/;var encode=function(str){try{return encodeURIComponent(str)}catch(e){return str}};var decode=function(str){try{return decodeURIComponent(str.replace(/\+/g," "))}catch(e){return str}};exports.parse=function(str){if("string"!=typeof str)return{};str=trim(str);if(""==str)return{};if("?"==str.charAt(0))str=str.slice(1);var obj={};var pairs=str.split("&");for(var i=0;i<pairs.length;i++){var parts=pairs[i].split("=");var key=decode(parts[0]);var m;if(m=pattern.exec(key)){obj[m[1]]=obj[m[1]]||[];obj[m[1]][m[2]]=decode(parts[1]);continue}obj[parts[0]]=null==parts[1]?"":decode(parts[1])}return obj};exports.stringify=function(obj){if(!obj)return"";var pairs=[];for(var key in obj){var value=obj[key];if("array"==type(value)){for(var i=0;i<value.length;++i){pairs.push(encode(key+"["+i+"]")+"="+encode(value[i]))}continue}pairs.push(encode(key)+"="+encode(obj[key]))}return pairs.join("&")}},{trim:182,type:133}],133:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}if(val===null)return"null";if(val===undefined)return"undefined";if(val!==val)return"nan";if(val&&val.nodeType===1)return"element";val=val.valueOf?val.valueOf():Object.prototype.valueOf.apply(val);return typeof val}},{}],134:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}if(val===null)return"null";if(val===undefined)return"undefined";if(val!==val)return"nan";if(val&&val.nodeType===1)return"element";if(isBuffer(val))return"buffer";val=val.valueOf?val.valueOf():Object.prototype.valueOf.apply(val);return typeof val};function isBuffer(obj){return!!(obj!=null&&(obj._isBuffer||obj.constructor&&typeof obj.constructor.isBuffer==="function"&&obj.constructor.isBuffer(obj)))}},{}],135:[function(require,module,exports){exports.parse=function(url){var a=document.createElement("a");a.href=url;return{href:a.href,host:a.host||location.host,port:"0"===a.port||""===a.port?port(a.protocol):a.port,hash:a.hash,hostname:a.hostname||location.hostname,pathname:a.pathname.charAt(0)!="/"?"/"+a.pathname:a.pathname,protocol:!a.protocol||":"==a.protocol?location.protocol:a.protocol,search:a.search,query:a.search.slice(1)}};exports.isAbsolute=function(url){return 0==url.indexOf("//")||!!~url.indexOf("://")};exports.isRelative=function(url){return!exports.isAbsolute(url)};exports.isCrossDomain=function(url){url=exports.parse(url);var location=exports.parse(window.location.href);return url.hostname!==location.hostname||url.port!==location.port||url.protocol!==location.protocol};function port(protocol){switch(protocol){case"http:":return 80;case"https:":return 443;default:return location.port}}},{}],136:[function(require,module,exports){(function(Buffer){function isArray(arg){if(Array.isArray){return Array.isArray(arg)}return objectToString(arg)==="[object Array]"}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;
function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return objectToString(e)==="[object Error]"||e instanceof Error}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=Buffer.isBuffer;function objectToString(o){return Object.prototype.toString.call(o)}}).call(this,{isBuffer:require("../../is-buffer/index.js")})},{"../../is-buffer/index.js":145}],137:[function(require,module,exports){module.exports=debug;function debug(name){if(!debug.enabled(name))return function(){};return function(fmt){fmt=coerce(fmt);var curr=new Date;var ms=curr-(debug[name]||curr);debug[name]=curr;fmt=name+" "+fmt+" +"+debug.humanize(ms);window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}}debug.names=[];debug.skips=[];debug.enable=function(name){try{localStorage.debug=name}catch(e){}var split=(name||"").split(/[\s,]+/),len=split.length;for(var i=0;i<len;i++){name=split[i].replace("*",".*?");if(name[0]==="-"){debug.skips.push(new RegExp("^"+name.substr(1)+"$"))}else{debug.names.push(new RegExp("^"+name+"$"))}}};debug.disable=function(){debug.enable("")};debug.humanize=function(ms){var sec=1e3,min=60*1e3,hour=60*min;if(ms>=hour)return(ms/hour).toFixed(1)+"h";if(ms>=min)return(ms/min).toFixed(1)+"m";if(ms>=sec)return(ms/sec|0)+"s";return ms+"ms"};debug.enabled=function(name){for(var i=0,len=debug.skips.length;i<len;i++){if(debug.skips[i].test(name)){return false}}for(var i=0,len=debug.names.length;i<len;i++){if(debug.names[i].test(name)){return true}}return false};function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}try{if(window.localStorage)debug.enable(localStorage.debug)}catch(e){}},{}],138:[function(require,module,exports){var nextTick=require("next-tick");function when(condition,fn,interval){if(typeof condition!=="function")throw new Error("condition must be a function");if(typeof fn!=="function")throw new Error("fn must be a function");if(condition())return nextTick(fn);var ref=setInterval(function(){if(!condition())return;nextTick(fn);clearInterval(ref)},interval||10)}module.exports=when},{"next-tick":160}],139:[function(require,module,exports){module.exports=parse;var innerHTMLBug=false;var bugTestDiv;if(typeof document!=="undefined"){bugTestDiv=document.createElement("div");bugTestDiv.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';innerHTMLBug=!bugTestDiv.getElementsByTagName("link").length;bugTestDiv=undefined}var map={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:innerHTMLBug?[1,"X<div>","</div>"]:[0,"",""]};map.td=map.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];map.option=map.optgroup=[1,'<select multiple="multiple">',"</select>"];map.thead=map.tbody=map.colgroup=map.caption=map.tfoot=[1,"<table>","</table>"];map.polyline=map.ellipse=map.polygon=map.circle=map.text=map.line=map.path=map.rect=map.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function parse(html,doc){if("string"!=typeof html)throw new TypeError("String expected");if(!doc)doc=document;var m=/<([\w:]+)/.exec(html);if(!m)return doc.createTextNode(html);html=html.replace(/^\s+|\s+$/g,"");var tag=m[1];if(tag=="body"){var el=doc.createElement("html");el.innerHTML=html;return el.removeChild(el.lastChild)}var wrap=map[tag]||map._default;var depth=wrap[0];var prefix=wrap[1];var suffix=wrap[2];var el=doc.createElement("div");el.innerHTML=prefix+html+suffix;while(depth--)el=el.lastChild;if(el.firstChild==el.lastChild){return el.removeChild(el.firstChild)}var fragment=doc.createDocumentFragment();while(el.firstChild){fragment.appendChild(el.removeChild(el.firstChild))}return fragment}},{}],140:[function(require,module,exports){var debug=require("debug");module.exports=generate;function generate(name,options){var log=debug("global-queue:"+name);options=options||{};return function(args){args=[].slice.call(arguments);window[name]||(window[name]=[]);log("%o",args);options.wrap===false?window[name].push.apply(window[name],args):window[name].push(args)}}},{debug:141}],141:[function(require,module,exports){arguments[4][35][0].apply(exports,arguments)},{"./debug":142,dup:35}],142:[function(require,module,exports){arguments[4][36][0].apply(exports,arguments)},{dup:36,ms:155}],143:[function(require,module,exports){try{module.exports=typeof XMLHttpRequest!=="undefined"&&"withCredentials"in new XMLHttpRequest}catch(err){module.exports=false}},{}],144:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],145:[function(require,module,exports){module.exports=function(obj){return!!(obj!=null&&(obj._isBuffer||obj.constructor&&typeof obj.constructor.isBuffer==="function"&&obj.constructor.isBuffer(obj)))}},{}],146:[function(require,module,exports){module.exports=function isEmail(string){return/.+\@.+\..+/.test(string)}},{}],147:[function(require,module,exports){var is=require("core-util-is");Object.keys(is).forEach(function(m){var name=m.slice(2);name=name[0].toLowerCase()+name.slice(1);exports[name]=is[m]})},{"core-util-is":136}],148:[function(require,module,exports){var objProto=Object.prototype;var owns=objProto.hasOwnProperty;var toStr=objProto.toString;var symbolValueOf;if(typeof Symbol==="function"){symbolValueOf=Symbol.prototype.valueOf}var isActualNaN=function(value){return value!==value};var NON_HOST_TYPES={boolean:1,number:1,string:1,undefined:1};var base64Regex=/^([A-Za-z0-9+\/]{4})*([A-Za-z0-9+\/]{4}|[A-Za-z0-9+\/]{3}=|[A-Za-z0-9+\/]{2}==)$/;var hexRegex=/^[A-Fa-f0-9]+$/;var is=module.exports={};is.a=is.type=function(value,type){return typeof value===type};is.defined=function(value){return typeof value!=="undefined"};is.empty=function(value){var type=toStr.call(value);var key;if(type==="[object Array]"||type==="[object Arguments]"||type==="[object String]"){return value.length===0}if(type==="[object Object]"){for(key in value){if(owns.call(value,key)){return false}}return true}return!value};is.equal=function equal(value,other){if(value===other){return true}var type=toStr.call(value);var key;if(type!==toStr.call(other)){return false}if(type==="[object Object]"){for(key in value){if(!is.equal(value[key],other[key])||!(key in other)){return false}}for(key in other){if(!is.equal(value[key],other[key])||!(key in value)){return false}}return true}if(type==="[object Array]"){key=value.length;if(key!==other.length){return false}while(--key){if(!is.equal(value[key],other[key])){return false}}return true}if(type==="[object Function]"){return value.prototype===other.prototype}if(type==="[object Date]"){return value.getTime()===other.getTime()}return false};is.hosted=function(value,host){var type=typeof host[value];return type==="object"?!!host[value]:!NON_HOST_TYPES[type]};is.instance=is["instanceof"]=function(value,constructor){return value instanceof constructor};is.nil=is["null"]=function(value){return value===null};is.undef=is.undefined=function(value){return typeof value==="undefined"};is.args=is.arguments=function(value){var isStandardArguments=toStr.call(value)==="[object Arguments]";var isOldArguments=!is.array(value)&&is.arraylike(value)&&is.object(value)&&is.fn(value.callee);return isStandardArguments||isOldArguments};is.array=Array.isArray||function(value){return toStr.call(value)==="[object Array]"};is.args.empty=function(value){return is.args(value)&&value.length===0};is.array.empty=function(value){return is.array(value)&&value.length===0};is.arraylike=function(value){return!!value&&!is.bool(value)&&owns.call(value,"length")&&isFinite(value.length)&&is.number(value.length)&&value.length>=0};is.bool=is["boolean"]=function(value){return toStr.call(value)==="[object Boolean]"};is["false"]=function(value){return is.bool(value)&&Boolean(Number(value))===false};is["true"]=function(value){return is.bool(value)&&Boolean(Number(value))===true};is.date=function(value){return toStr.call(value)==="[object Date]"};is.element=function(value){return value!==undefined&&typeof HTMLElement!=="undefined"&&value instanceof HTMLElement&&value.nodeType===1};is.error=function(value){return toStr.call(value)==="[object Error]"};is.fn=is["function"]=function(value){var isAlert=typeof window!=="undefined"&&value===window.alert;return isAlert||toStr.call(value)==="[object Function]"};is.number=function(value){return toStr.call(value)==="[object Number]"};is.infinite=function(value){return value===Infinity||value===-Infinity};is.decimal=function(value){return is.number(value)&&!isActualNaN(value)&&!is.infinite(value)&&value%1!==0};is.divisibleBy=function(value,n){var isDividendInfinite=is.infinite(value);var isDivisorInfinite=is.infinite(n);var isNonZeroNumber=is.number(value)&&!isActualNaN(value)&&is.number(n)&&!isActualNaN(n)&&n!==0;return isDividendInfinite||isDivisorInfinite||isNonZeroNumber&&value%n===0};is.integer=is["int"]=function(value){return is.number(value)&&!isActualNaN(value)&&value%1===0};is.maximum=function(value,others){if(isActualNaN(value)){throw new TypeError("NaN is not a valid value")}else if(!is.arraylike(others)){throw new TypeError("second argument must be array-like")}var len=others.length;while(--len>=0){if(value<others[len]){return false}}return true};is.minimum=function(value,others){if(isActualNaN(value)){throw new TypeError("NaN is not a valid value")}else if(!is.arraylike(others)){throw new TypeError("second argument must be array-like")}var len=others.length;while(--len>=0){if(value>others[len]){return false}}return true};is.nan=function(value){return!is.number(value)||value!==value};is.even=function(value){return is.infinite(value)||is.number(value)&&value===value&&value%2===0};is.odd=function(value){return is.infinite(value)||is.number(value)&&value===value&&value%2!==0};is.ge=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value>=other};is.gt=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value>other};is.le=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value<=other};is.lt=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value<other};is.within=function(value,start,finish){if(isActualNaN(value)||isActualNaN(start)||isActualNaN(finish)){throw new TypeError("NaN is not a valid value")}else if(!is.number(value)||!is.number(start)||!is.number(finish)){throw new TypeError("all arguments must be numbers")}var isAnyInfinite=is.infinite(value)||is.infinite(start)||is.infinite(finish);return isAnyInfinite||value>=start&&value<=finish};is.object=function(value){return toStr.call(value)==="[object Object]"};is.hash=function(value){return is.object(value)&&value.constructor===Object&&!value.nodeType&&!value.setInterval};is.regexp=function(value){return toStr.call(value)==="[object RegExp]"};is.string=function(value){return toStr.call(value)==="[object String]"};is.base64=function(value){return is.string(value)&&(!value.length||base64Regex.test(value))};is.hex=function(value){return is.string(value)&&(!value.length||hexRegex.test(value))};is.symbol=function(value){return typeof Symbol==="function"&&toStr.call(value)==="[object Symbol]"&&typeof symbolValueOf.call(value)==="symbol"}},{}],149:[function(require,module,exports){(function(global){(function(){var isLoader=typeof define==="function"&&define.amd;var objectTypes={function:true,object:true};var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var root=objectTypes[typeof window]&&window||this,freeGlobal=freeExports&&objectTypes[typeof module]&&module&&!module.nodeType&&typeof global=="object"&&global;if(freeGlobal&&(freeGlobal["global"]===freeGlobal||freeGlobal["window"]===freeGlobal||freeGlobal["self"]===freeGlobal)){root=freeGlobal}function runInContext(context,exports){context||(context=root["Object"]());exports||(exports=root["Object"]());var Number=context["Number"]||root["Number"],String=context["String"]||root["String"],Object=context["Object"]||root["Object"],Date=context["Date"]||root["Date"],SyntaxError=context["SyntaxError"]||root["SyntaxError"],TypeError=context["TypeError"]||root["TypeError"],Math=context["Math"]||root["Math"],nativeJSON=context["JSON"]||root["JSON"];if(typeof nativeJSON=="object"&&nativeJSON){exports.stringify=nativeJSON.stringify;exports.parse=nativeJSON.parse}var objectProto=Object.prototype,getClass=objectProto.toString,isProperty,forEach,undef;var isExtended=new Date((-0xc782b5b800cec));try{isExtended=isExtended.getUTCFullYear()==-109252&&isExtended.getUTCMonth()===0&&isExtended.getUTCDate()===1&&isExtended.getUTCHours()==10&&isExtended.getUTCMinutes()==37&&isExtended.getUTCSeconds()==6&&isExtended.getUTCMilliseconds()==708}catch(exception){}function has(name){if(has[name]!==undef){return has[name]}var isSupported;if(name=="bug-string-char-index"){isSupported="a"[0]!="a"}else if(name=="json"){isSupported=has("json-stringify")&&has("json-parse")}else{var value,serialized='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(name=="json-stringify"){var stringify=exports.stringify,stringifySupported=typeof stringify=="function"&&isExtended;if(stringifySupported){(value=function(){return 1}).toJSON=value;try{stringifySupported=stringify(0)==="0"&&stringify(new Number)==="0"&&stringify(new String)=='""'&&stringify(getClass)===undef&&stringify(undef)===undef&&stringify()===undef&&stringify(value)==="1"&&stringify([value])=="[1]"&&stringify([undef])=="[null]"&&stringify(null)=="null"&&stringify([undef,getClass,null])=="[null,null,null]"&&stringify({a:[value,true,false,null,"\0\b\n\f\r\t"]})==serialized&&stringify(null,value)==="1"&&stringify([1,2],null,1)=="[\n 1,\n 2\n]"&&stringify(new Date((-864e13)))=='"-271821-04-20T00:00:00.000Z"'&&stringify(new Date(864e13))=='"+275760-09-13T00:00:00.000Z"'&&stringify(new Date((-621987552e5)))=='"-000001-01-01T00:00:00.000Z"'&&stringify(new Date((-1)))=='"1969-12-31T23:59:59.999Z"'}catch(exception){stringifySupported=false}}isSupported=stringifySupported}if(name=="json-parse"){var parse=exports.parse;if(typeof parse=="function"){try{if(parse("0")===0&&!parse(false)){value=parse(serialized);var parseSupported=value["a"].length==5&&value["a"][0]===1;if(parseSupported){try{parseSupported=!parse('"\t"')}catch(exception){}if(parseSupported){try{parseSupported=parse("01")!==1}catch(exception){}}if(parseSupported){try{parseSupported=parse("1.")!==1}catch(exception){}}}}}catch(exception){parseSupported=false}}isSupported=parseSupported}}return has[name]=!!isSupported}if(!has("json")){var functionClass="[object Function]",dateClass="[object Date]",numberClass="[object Number]",stringClass="[object String]",arrayClass="[object Array]",booleanClass="[object Boolean]";var charIndexBuggy=has("bug-string-char-index");if(!isExtended){var floor=Math.floor;var Months=[0,31,59,90,120,151,181,212,243,273,304,334];var getDay=function(year,month){return Months[month]+365*(year-1970)+floor((year-1969+(month=+(month>1)))/4)-floor((year-1901+month)/100)+floor((year-1601+month)/400)}}if(!(isProperty=objectProto.hasOwnProperty)){isProperty=function(property){var members={},constructor;if((members.__proto__=null,members.__proto__={toString:1},members).toString!=getClass){isProperty=function(property){var original=this.__proto__,result=property in(this.__proto__=null,this);this.__proto__=original;return result}}else{constructor=members.constructor;isProperty=function(property){var parent=(this.constructor||constructor).prototype;return property in this&&!(property in parent&&this[property]===parent[property])}}members=null;return isProperty.call(this,property)}}forEach=function(object,callback){var size=0,Properties,members,property;(Properties=function(){this.valueOf=0}).prototype.valueOf=0;members=new Properties;for(property in members){if(isProperty.call(members,property)){size++}}Properties=members=null;if(!size){members=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];forEach=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,length;var hasProperty=!isFunction&&typeof object.constructor!="function"&&objectTypes[typeof object.hasOwnProperty]&&object.hasOwnProperty||isProperty;for(property in object){if(!(isFunction&&property=="prototype")&&hasProperty.call(object,property)){callback(property)}}for(length=members.length;property=members[--length];hasProperty.call(object,property)&&callback(property));}}else if(size==2){forEach=function(object,callback){var members={},isFunction=getClass.call(object)==functionClass,property;for(property in object){if(!(isFunction&&property=="prototype")&&!isProperty.call(members,property)&&(members[property]=1)&&isProperty.call(object,property)){callback(property)}}}}else{forEach=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,isConstructor;for(property in object){if(!(isFunction&&property=="prototype")&&isProperty.call(object,property)&&!(isConstructor=property==="constructor")){callback(property)}}if(isConstructor||isProperty.call(object,property="constructor")){callback(property)}}}return forEach(object,callback)};if(!has("json-stringify")){var Escapes={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"};var leadingZeroes="000000";var toPaddedString=function(width,value){return(leadingZeroes+(value||0)).slice(-width)};var unicodePrefix="\\u00";var quote=function(value){var result='"',index=0,length=value.length,useCharIndex=!charIndexBuggy||length>10;var symbols=useCharIndex&&(charIndexBuggy?value.split(""):value);for(;index<length;index++){var charCode=value.charCodeAt(index);switch(charCode){case 8:case 9:case 10:case 12:case 13:case 34:case 92:result+=Escapes[charCode];break;default:if(charCode<32){result+=unicodePrefix+toPaddedString(2,charCode.toString(16));break}result+=useCharIndex?symbols[index]:value.charAt(index)}}return result+'"'};var serialize=function(property,object,callback,properties,whitespace,indentation,stack){var value,className,year,month,date,time,hours,minutes,seconds,milliseconds,results,element,index,length,prefix,result;try{value=object[property]}catch(exception){}if(typeof value=="object"&&value){className=getClass.call(value);if(className==dateClass&&!isProperty.call(value,"toJSON")){if(value>-1/0&&value<1/0){if(getDay){date=floor(value/864e5);for(year=floor(date/365.2425)+1970-1;getDay(year+1,0)<=date;year++);for(month=floor((date-getDay(year,0))/30.42);getDay(year,month+1)<=date;month++);date=1+date-getDay(year,month);time=(value%864e5+864e5)%864e5;hours=floor(time/36e5)%24;minutes=floor(time/6e4)%60;seconds=floor(time/1e3)%60;milliseconds=time%1e3}else{year=value.getUTCFullYear();month=value.getUTCMonth();date=value.getUTCDate();hours=value.getUTCHours();minutes=value.getUTCMinutes();seconds=value.getUTCSeconds();milliseconds=value.getUTCMilliseconds()}value=(year<=0||year>=1e4?(year<0?"-":"+")+toPaddedString(6,year<0?-year:year):toPaddedString(4,year))+"-"+toPaddedString(2,month+1)+"-"+toPaddedString(2,date)+"T"+toPaddedString(2,hours)+":"+toPaddedString(2,minutes)+":"+toPaddedString(2,seconds)+"."+toPaddedString(3,milliseconds)+"Z"}else{value=null}}else if(typeof value.toJSON=="function"&&(className!=numberClass&&className!=stringClass&&className!=arrayClass||isProperty.call(value,"toJSON"))){value=value.toJSON(property)}}if(callback){value=callback.call(object,property,value)}if(value===null){return"null"}className=getClass.call(value);if(className==booleanClass){return""+value}else if(className==numberClass){return value>-1/0&&value<1/0?""+value:"null"}else if(className==stringClass){return quote(""+value)}if(typeof value=="object"){for(length=stack.length;length--;){if(stack[length]===value){throw TypeError()}}stack.push(value);results=[];prefix=indentation;indentation+=whitespace;if(className==arrayClass){for(index=0,length=value.length;index<length;index++){element=serialize(index,value,callback,properties,whitespace,indentation,stack);results.push(element===undef?"null":element)}result=results.length?whitespace?"[\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"]":"["+results.join(",")+"]":"[]"}else{forEach(properties||value,function(property){var element=serialize(property,value,callback,properties,whitespace,indentation,stack);if(element!==undef){results.push(quote(property)+":"+(whitespace?" ":"")+element)}});result=results.length?whitespace?"{\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"}":"{"+results.join(",")+"}":"{}"}stack.pop();return result}};exports.stringify=function(source,filter,width){var whitespace,callback,properties,className;if(objectTypes[typeof filter]&&filter){if((className=getClass.call(filter))==functionClass){callback=filter}else if(className==arrayClass){properties={};for(var index=0,length=filter.length,value;index<length;value=filter[index++],(className=getClass.call(value),className==stringClass||className==numberClass)&&(properties[value]=1));}}if(width){if((className=getClass.call(width))==numberClass){if((width-=width%1)>0){for(whitespace="",width>10&&(width=10);whitespace.length<width;whitespace+=" ");}}else if(className==stringClass){whitespace=width.length<=10?width:width.slice(0,10)}}return serialize("",(value={},value[""]=source,value),callback,properties,whitespace,"",[])}}if(!has("json-parse")){var fromCharCode=String.fromCharCode;var Unescapes={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"};var Index,Source;var abort=function(){Index=Source=null;throw SyntaxError()};var lex=function(){var source=Source,length=source.length,value,begin,position,isSigned,charCode;while(Index<length){charCode=source.charCodeAt(Index);switch(charCode){case 9:case 10:case 13:case 32:Index++;break;case 123:case 125:case 91:case 93:case 58:case 44:value=charIndexBuggy?source.charAt(Index):source[Index];Index++;return value;case 34:for(value="@",Index++;Index<length;){charCode=source.charCodeAt(Index);if(charCode<32){abort()}else if(charCode==92){charCode=source.charCodeAt(++Index);switch(charCode){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:value+=Unescapes[charCode];Index++;break;case 117:begin=++Index;for(position=Index+4;Index<position;Index++){charCode=source.charCodeAt(Index);if(!(charCode>=48&&charCode<=57||charCode>=97&&charCode<=102||charCode>=65&&charCode<=70)){abort()}}value+=fromCharCode("0x"+source.slice(begin,Index));break;default:abort()}}else{if(charCode==34){break}charCode=source.charCodeAt(Index);begin=Index;while(charCode>=32&&charCode!=92&&charCode!=34){charCode=source.charCodeAt(++Index)}value+=source.slice(begin,Index)}}if(source.charCodeAt(Index)==34){Index++;return value}abort();default:begin=Index;if(charCode==45){isSigned=true;charCode=source.charCodeAt(++Index)}if(charCode>=48&&charCode<=57){if(charCode==48&&(charCode=source.charCodeAt(Index+1),charCode>=48&&charCode<=57)){abort()}isSigned=false;for(;Index<length&&(charCode=source.charCodeAt(Index),charCode>=48&&charCode<=57);Index++);if(source.charCodeAt(Index)==46){position=++Index;for(;position<length&&(charCode=source.charCodeAt(position),charCode>=48&&charCode<=57);position++);if(position==Index){abort()}Index=position}charCode=source.charCodeAt(Index);if(charCode==101||charCode==69){charCode=source.charCodeAt(++Index);if(charCode==43||charCode==45){Index++}for(position=Index;position<length&&(charCode=source.charCodeAt(position),charCode>=48&&charCode<=57);position++);if(position==Index){abort()}Index=position}return+source.slice(begin,Index)}if(isSigned){abort()}if(source.slice(Index,Index+4)=="true"){Index+=4;return true}else if(source.slice(Index,Index+5)=="false"){Index+=5;return false}else if(source.slice(Index,Index+4)=="null"){Index+=4;return null}abort()}}return"$"};var get=function(value){var results,hasMembers;if(value=="$"){abort()}if(typeof value=="string"){if((charIndexBuggy?value.charAt(0):value[0])=="@"){return value.slice(1)}if(value=="["){results=[];for(;;hasMembers||(hasMembers=true)){value=lex();if(value=="]"){break}if(hasMembers){if(value==","){value=lex();if(value=="]"){abort()}}else{abort()}}if(value==","){abort()}results.push(get(value))}return results}else if(value=="{"){results={};for(;;hasMembers||(hasMembers=true)){value=lex();if(value=="}"){break}if(hasMembers){if(value==","){value=lex();if(value=="}"){abort()}}else{abort()}}if(value==","||typeof value!="string"||(charIndexBuggy?value.charAt(0):value[0])!="@"||lex()!=":"){abort()}results[value.slice(1)]=get(lex())}return results}abort()}return value};var update=function(source,property,callback){var element=walk(source,property,callback);if(element===undef){delete source[property]}else{source[property]=element}};var walk=function(source,property,callback){var value=source[property],length;if(typeof value=="object"&&value){if(getClass.call(value)==arrayClass){for(length=value.length;length--;){update(value,length,callback)}}else{forEach(value,function(property){update(value,property,callback)})}}return callback.call(source,property,value)};exports.parse=function(source,callback){var result,value;Index=0;Source=""+source;result=get(lex());if(lex()!="$"){abort()}Index=Source=null;return callback&&getClass.call(callback)==functionClass?walk((value={},value[""]=result,value),"",callback):result}}}exports["runInContext"]=runInContext;return exports}if(freeExports&&!isLoader){runInContext(root,freeExports)}else{var nativeJSON=root.JSON,previousJSON=root["JSON3"],isRestored=false;var JSON3=runInContext(root,root["JSON3"]={noConflict:function(){if(!isRestored){isRestored=true;root.JSON=nativeJSON;root["JSON3"]=previousJSON;nativeJSON=previousJSON=null}return JSON3}});root.JSON={parse:JSON3.parse,stringify:JSON3.stringify}}if(isLoader){define(function(){return JSON3})}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],150:[function(require,module,exports){var debug=require("debug")("jsonp");module.exports=jsonp;var count=0;function noop(){}function jsonp(url,opts,fn){if("function"==typeof opts){fn=opts;opts={}}if(!opts)opts={};var prefix=opts.prefix||"__jp";var id=opts.name||prefix+count++;var param=opts.param||"callback";var timeout=null!=opts.timeout?opts.timeout:6e4;var enc=encodeURIComponent;var target=document.getElementsByTagName("script")[0]||document.head;var script;var timer;if(timeout){timer=setTimeout(function(){cleanup();if(fn)fn(new Error("Timeout"))},timeout)}function cleanup(){if(script.parentNode)script.parentNode.removeChild(script);window[id]=noop;if(timer)clearTimeout(timer)}function cancel(){if(window[id]){cleanup()}}window[id]=function(data){debug("jsonp got",data);cleanup();if(fn)fn(null,data)};url+=(~url.indexOf("?")?"&":"?")+param+"="+enc(id);url=url.replace("?&","?");debug('jsonp req "%s"',url);script=document.createElement("script");script.src=url;target.parentNode.insertBefore(script,target);return cancel}},{debug:151}],151:[function(require,module,exports){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;var storage;if(typeof chrome!=="undefined"&&typeof chrome.storage!=="undefined")storage=chrome.storage.local;else storage=localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){storage.removeItem("debug")}else{storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=storage.debug}catch(e){}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},{"./debug":152}],152:[function(require,module,exports){arguments[4][36][0].apply(exports,arguments)},{dup:36,ms:153}],153:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},{}],154:[function(require,module,exports){var is=require("is");var onload=require("script-onload");var tick=require("next-tick");module.exports=function loadIframe(options,fn){if(!options)throw new Error("Cant load nothing...");if(is.string(options))options={src:options};var https=document.location.protocol==="https:"||document.location.protocol==="chrome-extension:";if(options.src&&options.src.indexOf("//")===0){
options.src=https?"https:"+options.src:"http:"+options.src}if(https&&options.https)options.src=options.https;else if(!https&&options.http)options.src=options.http;var iframe=document.createElement("iframe");iframe.src=options.src;iframe.width=options.width||1;iframe.height=options.height||1;iframe.style.display="none";if(is.fn(fn)){onload(iframe,fn)}tick(function(){var firstScript=document.getElementsByTagName("script")[0];firstScript.parentNode.insertBefore(iframe,firstScript)});return iframe}},{is:148,"next-tick":160,"script-onload":166}],155:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){str=""+str;if(str.length>1e4)return;var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},{}],156:[function(require,module,exports){"use strict";var is=require("is");var isodate=require("@segment/isodate");var milliseconds=require("./milliseconds");var seconds=require("./seconds");module.exports=function newDate(val){if(is.date(val))return val;if(is.number(val))return new Date(toMs(val));if(isodate.is(val)){return isodate.parse(val)}if(milliseconds.is(val)){return milliseconds.parse(val)}if(seconds.is(val)){return seconds.parse(val)}return new Date(val)};function toMs(num){if(num<315576e5)return num*1e3;return num}},{"./milliseconds":157,"./seconds":158,"@segment/isodate":113,is:159}],157:[function(require,module,exports){"use strict";var matcher=/\d{13}/;exports.is=function(string){return matcher.test(string)};exports.parse=function(millis){millis=parseInt(millis,10);return new Date(millis)}},{}],158:[function(require,module,exports){"use strict";var matcher=/\d{10}/;exports.is=function(string){return matcher.test(string)};exports.parse=function(seconds){var millis=parseInt(seconds,10)*1e3;return new Date(millis)}},{}],159:[function(require,module,exports){var objProto=Object.prototype;var owns=objProto.hasOwnProperty;var toString=objProto.toString;var isActualNaN=function(value){return value!==value};var NON_HOST_TYPES={boolean:1,number:1,string:1,undefined:1};var is=module.exports={};is.a=is.type=function(value,type){return typeof value===type};is.defined=function(value){return value!==undefined};is.empty=function(value){var type=toString.call(value);var key;if("[object Array]"===type||"[object Arguments]"===type){return value.length===0}if("[object Object]"===type){for(key in value)if(owns.call(value,key))return false;return true}if("[object String]"===type){return""===value}return false};is.equal=function(value,other){var type=toString.call(value);var key;if(type!==toString.call(other)){return false}if("[object Object]"===type){for(key in value){if(!is.equal(value[key],other[key])){return false}}return true}if("[object Array]"===type){key=value.length;if(key!==other.length){return false}while(--key){if(!is.equal(value[key],other[key])){return false}}return true}if("[object Function]"===type){return value.prototype===other.prototype}if("[object Date]"===type){return value.getTime()===other.getTime()}return value===other};is.hosted=function(value,host){var type=typeof host[value];return type==="object"?!!host[value]:!NON_HOST_TYPES[type]};is.instance=is["instanceof"]=function(value,constructor){return value instanceof constructor};is["null"]=function(value){return value===null};is.undefined=function(value){return value===undefined};is.arguments=function(value){var isStandardArguments="[object Arguments]"===toString.call(value);var isOldArguments=!is.array(value)&&is.arraylike(value)&&is.object(value)&&is.fn(value.callee);return isStandardArguments||isOldArguments};is.array=function(value){return"[object Array]"===toString.call(value)};is.arguments.empty=function(value){return is.arguments(value)&&value.length===0};is.array.empty=function(value){return is.array(value)&&value.length===0};is.arraylike=function(value){return!!value&&!is.boolean(value)&&owns.call(value,"length")&&isFinite(value.length)&&is.number(value.length)&&value.length>=0};is.boolean=function(value){return"[object Boolean]"===toString.call(value)};is["false"]=function(value){return is.boolean(value)&&(value===false||value.valueOf()===false)};is["true"]=function(value){return is.boolean(value)&&(value===true||value.valueOf()===true)};is.date=function(value){return"[object Date]"===toString.call(value)};is.element=function(value){return value!==undefined&&typeof HTMLElement!=="undefined"&&value instanceof HTMLElement&&value.nodeType===1};is.error=function(value){return"[object Error]"===toString.call(value)};is.fn=is["function"]=function(value){var isAlert=typeof window!=="undefined"&&value===window.alert;return isAlert||"[object Function]"===toString.call(value)};is.number=function(value){return"[object Number]"===toString.call(value)};is.infinite=function(value){return value===Infinity||value===-Infinity};is.decimal=function(value){return is.number(value)&&!isActualNaN(value)&&value%1!==0};is.divisibleBy=function(value,n){var isDividendInfinite=is.infinite(value);var isDivisorInfinite=is.infinite(n);var isNonZeroNumber=is.number(value)&&!isActualNaN(value)&&is.number(n)&&!isActualNaN(n)&&n!==0;return isDividendInfinite||isDivisorInfinite||isNonZeroNumber&&value%n===0};is.int=function(value){return is.number(value)&&!isActualNaN(value)&&value%1===0};is.maximum=function(value,others){if(isActualNaN(value)){throw new TypeError("NaN is not a valid value")}else if(!is.arraylike(others)){throw new TypeError("second argument must be array-like")}var len=others.length;while(--len>=0){if(value<others[len]){return false}}return true};is.minimum=function(value,others){if(isActualNaN(value)){throw new TypeError("NaN is not a valid value")}else if(!is.arraylike(others)){throw new TypeError("second argument must be array-like")}var len=others.length;while(--len>=0){if(value>others[len]){return false}}return true};is.nan=function(value){return!is.number(value)||value!==value};is.even=function(value){return is.infinite(value)||is.number(value)&&value===value&&value%2===0};is.odd=function(value){return is.infinite(value)||is.number(value)&&value===value&&value%2!==0};is.ge=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value>=other};is.gt=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value>other};is.le=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value<=other};is.lt=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value<other};is.within=function(value,start,finish){if(isActualNaN(value)||isActualNaN(start)||isActualNaN(finish)){throw new TypeError("NaN is not a valid value")}else if(!is.number(value)||!is.number(start)||!is.number(finish)){throw new TypeError("all arguments must be numbers")}var isAnyInfinite=is.infinite(value)||is.infinite(start)||is.infinite(finish);return isAnyInfinite||value>=start&&value<=finish};is.object=function(value){return value&&"[object Object]"===toString.call(value)};is.hash=function(value){return is.object(value)&&value.constructor===Object&&!value.nodeType&&!value.setInterval};is.regexp=function(value){return"[object RegExp]"===toString.call(value)};is.string=function(value){return"[object String]"===toString.call(value)}},{}],160:[function(require,module,exports){(function(process){"use strict";var callable,byObserver;callable=function(fn){if(typeof fn!=="function")throw new TypeError(fn+" is not a function");return fn};byObserver=function(Observer){var node=document.createTextNode(""),queue,i=0;new Observer(function(){var data;if(!queue)return;data=queue;queue=null;if(typeof data==="function"){data();return}data.forEach(function(fn){fn()})}).observe(node,{characterData:true});return function(fn){callable(fn);if(queue){if(typeof queue==="function")queue=[queue,fn];else queue.push(fn);return}queue=fn;node.data=i=++i%2}};module.exports=function(){if(typeof process!=="undefined"&&process&&typeof process.nextTick==="function"){return process.nextTick}if(typeof document==="object"&&document){if(typeof MutationObserver==="function"){return byObserver(MutationObserver)}if(typeof WebKitMutationObserver==="function"){return byObserver(WebKitMutationObserver)}}if(typeof setImmediate==="function"){return function(cb){setImmediate(callable(cb))}}if(typeof setTimeout==="function"){return function(cb){setTimeout(callable(cb),0)}}return null}()}).call(this,require("_process"))},{_process:164}],161:[function(require,module,exports){var identity=function(_){return _};module.exports=multiple(find);module.exports.find=module.exports;module.exports.replace=function(obj,key,val,options){multiple(replace).call(this,obj,key,val,options);return obj};module.exports.del=function(obj,key,options){multiple(del).call(this,obj,key,null,options);return obj};function multiple(fn){return function(obj,path,val,options){normalize=options&&isFunction(options.normalizer)?options.normalizer:defaultNormalize;path=normalize(path);var key;var finished=false;while(!finished)loop();function loop(){for(key in obj){var normalizedKey=normalize(key);if(0===path.indexOf(normalizedKey)){var temp=path.substr(normalizedKey.length);if(temp.charAt(0)==="."||temp.length===0){path=temp.substr(1);var child=obj[key];if(null==child){finished=true;return}if(!path.length){finished=true;return}obj=child;return}}}key=undefined;finished=true}if(!key)return;if(null==obj)return obj;return fn(obj,key,val)}}function find(obj,key){if(obj.hasOwnProperty(key))return obj[key]}function del(obj,key){if(obj.hasOwnProperty(key))delete obj[key];return obj}function replace(obj,key,val){if(obj.hasOwnProperty(key))obj[key]=val;return obj}function defaultNormalize(path){return path.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}function isFunction(val){return typeof val==="function"}},{}],162:[function(require,module,exports){var has=Object.prototype.hasOwnProperty;exports.keys=Object.keys||function(obj){var keys=[];for(var key in obj){if(has.call(obj,key)){keys.push(key)}}return keys};exports.values=function(obj){var vals=[];for(var key in obj){if(has.call(obj,key)){vals.push(obj[key])}}return vals};exports.merge=function(a,b){for(var key in b){if(has.call(b,key)){a[key]=b[key]}}return a};exports.length=function(obj){return exports.keys(obj).length};exports.isEmpty=function(obj){return 0==exports.length(obj)}},{}],163:[function(require,module,exports){var each=require("each");var body=false;var callbacks=[];module.exports=function onBody(callback){if(body){call(callback)}else{callbacks.push(callback)}};var interval=setInterval(function(){if(!document.body)return;body=true;each(callbacks,call);clearInterval(interval)},5);function call(callback){callback(document.body)}},{each:126}],164:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;(function(){try{cachedSetTimeout=setTimeout}catch(e){cachedSetTimeout=function(){throw new Error("setTimeout is not defined")}}try{cachedClearTimeout=clearTimeout}catch(e){cachedClearTimeout=function(){throw new Error("clearTimeout is not defined")}}})();var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=cachedSetTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;cachedClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){cachedSetTimeout(drainQueue,0)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],165:[function(require,module,exports){var type=require("type-component");module.exports=reject;function reject(obj,fn){fn=fn||compact;return"array"==type(obj)?reject.array(obj,fn):reject.object(obj,fn)}reject.array=function(arr,fn){var ret=[];for(var i=0;i<arr.length;++i){if(!fn(arr[i],i))ret[ret.length]=arr[i]}return ret};reject.object=function(obj,fn){var ret={};for(var k in obj){if(obj.hasOwnProperty(k)&&!fn(obj[k],k)){ret[k]=obj[k]}}return ret};reject.types=reject.type=function(obj,types){if(!Array.isArray(types))types=[types];return reject(obj,function(value){return-1!=types.indexOf(type(value))})};function compact(value){return null==value}},{"type-component":183}],166:[function(require,module,exports){module.exports=function(el,fn){return el.addEventListener?add(el,fn):attach(el,fn)};function add(el,fn){el.addEventListener("load",function(_,e){fn(null,e)},false);el.addEventListener("error",function(e){var err=new Error('script error "'+el.src+'"');err.event=e;fn(err)},false)}function attach(el,fn){el.attachEvent("onreadystatechange",function(e){if(!/complete|loaded/.test(el.readyState))return;fn(null,e)});el.attachEvent("onerror",function(e){var err=new Error('failed to load the script "'+el.src+'"');err.event=e||window.event;fn(err)})}},{}],167:[function(require,module,exports){"use strict";var get=require("obj-case");module.exports=function(proto){proto.zip=trait("postalCode","zip");proto.country=trait("country");proto.street=trait("street");proto.state=trait("state");proto.city=trait("city");proto.region=trait("region");function trait(a,b){return function(){var traits=this.traits();var props=this.properties?this.properties():{};return get(traits,"address."+a)||get(traits,a)||(b?get(traits,"address."+b):null)||(b?get(traits,b):null)||get(props,"address."+a)||get(props,a)||(b?get(props,"address."+b):null)||(b?get(props,b):null)}}}},{"obj-case":161}],168:[function(require,module,exports){"use strict";var inherit=require("./utils").inherit;var Facade=require("./facade");function Alias(dictionary,opts){Facade.call(this,dictionary,opts)}inherit(Alias,Facade);Alias.prototype.action=function(){return"alias"};Alias.prototype.type=Alias.prototype.action;Alias.prototype.previousId=function(){return this.field("previousId")||this.field("from")};Alias.prototype.from=Alias.prototype.previousId;Alias.prototype.userId=function(){return this.field("userId")||this.field("to")};Alias.prototype.to=Alias.prototype.userId;module.exports=Alias},{"./facade":169,"./utils":177}],169:[function(require,module,exports){"use strict";var address=require("./address");var clone=require("./utils").clone;var isEnabled=require("./is-enabled");var newDate=require("new-date");var objCase=require("obj-case");var traverse=require("@segment/isodate-traverse");var type=require("./utils").type;function Facade(obj,opts){opts=opts||{};if(!("clone"in opts))opts.clone=true;if(opts.clone)obj=clone(obj);if(!("traverse"in opts))opts.traverse=true;if(!("timestamp"in obj))obj.timestamp=new Date;else obj.timestamp=newDate(obj.timestamp);if(opts.traverse)traverse(obj);this.opts=opts;this.obj=obj}address(Facade.prototype);Facade.prototype.proxy=function(field){var fields=field.split(".");field=fields.shift();var obj=this[field]||this.field(field);if(!obj)return obj;if(typeof obj==="function")obj=obj.call(this)||{};if(fields.length===0)return this.opts.clone?transform(obj):obj;obj=objCase(obj,fields.join("."));return this.opts.clone?transform(obj):obj};Facade.prototype.field=function(field){var obj=this.obj[field];return this.opts.clone?transform(obj):obj};Facade.proxy=function(field){return function(){return this.proxy(field)}};Facade.field=function(field){return function(){return this.field(field)}};Facade.multi=function(path){return function(){var multi=this.proxy(path+"s");if(type(multi)==="array")return multi;var one=this.proxy(path);if(one)one=[this.opts.clone?clone(one):one];return one||[]}};Facade.one=function(path){return function(){var one=this.proxy(path);if(one)return one;var multi=this.proxy(path+"s");if(type(multi)==="array")return multi[0]}};Facade.prototype.json=function(){var ret=this.opts.clone?clone(this.obj):this.obj;if(this.type)ret.type=this.type();return ret};Facade.prototype.options=function(integration){var obj=this.obj.options||this.obj.context||{};var options=this.opts.clone?clone(obj):obj;if(!integration)return options;if(!this.enabled(integration))return;var integrations=this.integrations();var value=integrations[integration]||objCase(integrations,integration);if(typeof value!=="object")value=objCase(this.options(),integration);return typeof value==="object"?value:{}};Facade.prototype.context=Facade.prototype.options;Facade.prototype.enabled=function(integration){var allEnabled=this.proxy("options.providers.all");if(typeof allEnabled!=="boolean")allEnabled=this.proxy("options.all");if(typeof allEnabled!=="boolean")allEnabled=this.proxy("integrations.all");if(typeof allEnabled!=="boolean")allEnabled=true;var enabled=allEnabled&&isEnabled(integration);var options=this.integrations();if(options.providers&&options.providers.hasOwnProperty(integration)){enabled=options.providers[integration]}if(options.hasOwnProperty(integration)){var settings=options[integration];if(typeof settings==="boolean"){enabled=settings}else{enabled=true}}return!!enabled};Facade.prototype.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()};Facade.prototype.active=function(){var active=this.proxy("options.active");if(active===null||active===undefined)active=true;return active};Facade.prototype.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")};Facade.prototype.sessionId=Facade.prototype.anonymousId;Facade.prototype.groupId=Facade.proxy("options.groupId");Facade.prototype.traits=function(aliases){var ret=this.proxy("options.traits")||{};var id=this.userId();aliases=aliases||{};if(id)ret.id=id;for(var alias in aliases){var value=this[alias]==null?this.proxy("options.traits."+alias):this[alias]();if(value==null)continue;ret[aliases[alias]]=value;delete ret[alias]}return ret};Facade.prototype.library=function(){var library=this.proxy("options.library");if(!library)return{name:"unknown",version:null};if(typeof library==="string")return{name:library,version:null};return library};Facade.prototype.device=function(){var device=this.proxy("context.device");if(type(device)!=="object")device={};var library=this.library().name;if(device.type)return device;if(library.indexOf("ios")>-1)device.type="ios";if(library.indexOf("android")>-1)device.type="android";return device};Facade.prototype.userAgent=Facade.proxy("context.userAgent");Facade.prototype.timezone=Facade.proxy("context.timezone");Facade.prototype.timestamp=Facade.field("timestamp");Facade.prototype.channel=Facade.field("channel");Facade.prototype.ip=Facade.proxy("context.ip");Facade.prototype.userId=Facade.field("userId");function transform(obj){return clone(obj)}module.exports=Facade},{"./address":167,"./is-enabled":173,"./utils":177,"@segment/isodate-traverse":112,"new-date":156,"obj-case":161}],170:[function(require,module,exports){"use strict";var inherit=require("./utils").inherit;var isEmail=require("is-email");var newDate=require("new-date");var Facade=require("./facade");function Group(dictionary,opts){Facade.call(this,dictionary,opts)}inherit(Group,Facade);Group.prototype.action=function(){return"group"};Group.prototype.type=Group.prototype.action;Group.prototype.groupId=Facade.field("groupId");Group.prototype.created=function(){var created=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(created)return newDate(created)};Group.prototype.email=function(){var email=this.proxy("traits.email");if(email)return email;var groupId=this.groupId();if(isEmail(groupId))return groupId};Group.prototype.traits=function(aliases){var ret=this.properties();var id=this.groupId();aliases=aliases||{};if(id)ret.id=id;for(var alias in aliases){var value=this[alias]==null?this.proxy("traits."+alias):this[alias]();if(value==null)continue;ret[aliases[alias]]=value;delete ret[alias]}return ret};Group.prototype.name=Facade.proxy("traits.name");Group.prototype.industry=Facade.proxy("traits.industry");Group.prototype.employees=Facade.proxy("traits.employees");Group.prototype.properties=function(){return this.field("traits")||this.field("properties")||{}};module.exports=Group},{"./facade":169,"./utils":177,"is-email":146,"new-date":156}],171:[function(require,module,exports){"use strict";var Facade=require("./facade");var get=require("obj-case");var inherit=require("./utils").inherit;var isEmail=require("is-email");var newDate=require("new-date");var trim=require("trim");var type=require("./utils").type;function Identify(dictionary,opts){Facade.call(this,dictionary,opts)}inherit(Identify,Facade);Identify.prototype.action=function(){return"identify"};Identify.prototype.type=Identify.prototype.action;Identify.prototype.traits=function(aliases){var ret=this.field("traits")||{};var id=this.userId();aliases=aliases||{};if(id)ret.id=id;for(var alias in aliases){var value=this[alias]==null?this.proxy("traits."+alias):this[alias]();if(value==null)continue;ret[aliases[alias]]=value;if(alias!==aliases[alias])delete ret[alias]}return ret};Identify.prototype.email=function(){var email=this.proxy("traits.email");if(email)return email;var userId=this.userId();if(isEmail(userId))return userId};Identify.prototype.created=function(){var created=this.proxy("traits.created")||this.proxy("traits.createdAt");if(created)return newDate(created)};Identify.prototype.companyCreated=function(){var created=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(created){return newDate(created)}};Identify.prototype.name=function(){var name=this.proxy("traits.name");if(typeof name==="string"){return trim(name)}var firstName=this.firstName();var lastName=this.lastName();if(firstName&&lastName){return trim(firstName+" "+lastName)}};Identify.prototype.firstName=function(){var firstName=this.proxy("traits.firstName");if(typeof firstName==="string"){return trim(firstName)}var name=this.proxy("traits.name");if(typeof name==="string"){return trim(name).split(" ")[0]}};Identify.prototype.lastName=function(){var lastName=this.proxy("traits.lastName");if(typeof lastName==="string"){return trim(lastName)}var name=this.proxy("traits.name");if(typeof name!=="string"){return}var space=trim(name).indexOf(" ");if(space===-1){return}return trim(name.substr(space+1))};Identify.prototype.uid=function(){return this.userId()||this.username()||this.email()};Identify.prototype.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")};Identify.prototype.age=function(){var date=this.birthday();var age=get(this.traits(),"age");if(age!=null)return age;if(type(date)!=="date")return;var now=new Date;return now.getFullYear()-date.getFullYear()};Identify.prototype.avatar=function(){var traits=this.traits();return get(traits,"avatar")||get(traits,"photoUrl")||get(traits,"avatarUrl")};Identify.prototype.position=function(){var traits=this.traits();return get(traits,"position")||get(traits,"jobTitle")};Identify.prototype.username=Facade.proxy("traits.username");Identify.prototype.website=Facade.one("traits.website");Identify.prototype.websites=Facade.multi("traits.website");Identify.prototype.phone=Facade.one("traits.phone");Identify.prototype.phones=Facade.multi("traits.phone");Identify.prototype.address=Facade.proxy("traits.address");Identify.prototype.gender=Facade.proxy("traits.gender");Identify.prototype.birthday=Facade.proxy("traits.birthday");module.exports=Identify},{"./facade":169,"./utils":177,"is-email":146,"new-date":156,"obj-case":161,trim:182}],172:[function(require,module,exports){"use strict";var Facade=require("./facade");Facade.Alias=require("./alias");Facade.Group=require("./group");Facade.Identify=require("./identify");Facade.Track=require("./track");Facade.Page=require("./page");Facade.Screen=require("./screen");module.exports=Facade},{"./alias":168,"./facade":169,"./group":170,"./identify":171,"./page":174,"./screen":175,"./track":176}],173:[function(require,module,exports){"use strict";var disabled={Salesforce:true};module.exports=function(integration){return!disabled[integration]}},{}],174:[function(require,module,exports){"use strict";var inherit=require("./utils").inherit;var Facade=require("./facade");var Track=require("./track");var isEmail=require("is-email");function Page(dictionary,opts){Facade.call(this,dictionary,opts)}inherit(Page,Facade);Page.prototype.action=function(){return"page"};Page.prototype.type=Page.prototype.action;Page.prototype.category=Facade.field("category");Page.prototype.name=Facade.field("name");Page.prototype.title=Facade.proxy("properties.title");Page.prototype.path=Facade.proxy("properties.path");Page.prototype.url=Facade.proxy("properties.url");Page.prototype.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")};Page.prototype.properties=function(aliases){var props=this.field("properties")||{};var category=this.category();var name=this.name();aliases=aliases||{};if(category)props.category=category;if(name)props.name=name;for(var alias in aliases){var value=this[alias]==null?this.proxy("properties."+alias):this[alias]();if(value==null)continue;props[aliases[alias]]=value;if(alias!==aliases[alias])delete props[alias]}return props};Page.prototype.email=function(){var email=this.proxy("context.traits.email")||this.proxy("properties.email");if(email)return email;var userId=this.userId();if(isEmail(userId))return userId};Page.prototype.fullName=function(){var category=this.category();var name=this.name();return name&&category?category+" "+name:name};Page.prototype.event=function(name){return name?"Viewed "+name+" Page":"Loaded a Page"};Page.prototype.track=function(name){var json=this.json();json.event=this.event(name);json.timestamp=this.timestamp();json.properties=this.properties();return new Track(json,this.opts)};module.exports=Page},{"./facade":169,"./track":176,"./utils":177,"is-email":146}],175:[function(require,module,exports){"use strict";var inherit=require("./utils").inherit;var Page=require("./page");var Track=require("./track");function Screen(dictionary,opts){Page.call(this,dictionary,opts)}inherit(Screen,Page);Screen.prototype.action=function(){return"screen"};Screen.prototype.type=Screen.prototype.action;Screen.prototype.event=function(name){return name?"Viewed "+name+" Screen":"Loaded a Screen"};Screen.prototype.track=function(name){var json=this.json();json.event=this.event(name);json.timestamp=this.timestamp();json.properties=this.properties();return new Track(json,this.opts)};module.exports=Screen},{"./page":174,"./track":176,"./utils":177}],176:[function(require,module,exports){"use strict";var inherit=require("./utils").inherit;var type=require("./utils").type;var Facade=require("./facade");var Identify=require("./identify");var isEmail=require("is-email");var get=require("obj-case");function Track(dictionary,opts){Facade.call(this,dictionary,opts)}inherit(Track,Facade);Track.prototype.action=function(){return"track"};Track.prototype.type=Track.prototype.action;Track.prototype.event=Facade.field("event");Track.prototype.value=Facade.proxy("properties.value");Track.prototype.category=Facade.proxy("properties.category");Track.prototype.id=Facade.proxy("properties.id");Track.prototype.sku=Facade.proxy("properties.sku");Track.prototype.tax=Facade.proxy("properties.tax");Track.prototype.name=Facade.proxy("properties.name");Track.prototype.price=Facade.proxy("properties.price");Track.prototype.total=Facade.proxy("properties.total");Track.prototype.repeat=Facade.proxy("properties.repeat");Track.prototype.coupon=Facade.proxy("properties.coupon");Track.prototype.shipping=Facade.proxy("properties.shipping");Track.prototype.discount=Facade.proxy("properties.discount");Track.prototype.description=Facade.proxy("properties.description");Track.prototype.plan=Facade.proxy("properties.plan");Track.prototype.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.orderId")};Track.prototype.subtotal=function(){var subtotal=get(this.properties(),"subtotal");var total=this.total();if(subtotal)return subtotal;if(!total)return 0;var n=this.tax();if(n)total-=n;n=this.shipping();if(n)total-=n;n=this.discount();if(n)total+=n;return total};Track.prototype.products=function(){var props=this.properties();var products=get(props,"products");return type(products)==="array"?products:[]};Track.prototype.quantity=function(){var props=this.obj.properties||{};return props.quantity||1};Track.prototype.currency=function(){var props=this.obj.properties||{};return props.currency||"USD"};Track.prototype.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")};Track.prototype.query=Facade.proxy("options.query");Track.prototype.properties=function(aliases){var ret=this.field("properties")||{};aliases=aliases||{};for(var alias in aliases){var value=this[alias]==null?this.proxy("properties."+alias):this[alias]();if(value==null)continue;ret[aliases[alias]]=value;delete ret[alias]}return ret};Track.prototype.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()};Track.prototype.email=function(){var email=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(email)return email;var userId=this.userId();if(isEmail(userId))return userId};Track.prototype.revenue=function(){var revenue=this.proxy("properties.revenue");var event=this.event();var orderCompletedRegExp=/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;if(!revenue&&event&&event.match(orderCompletedRegExp)){revenue=this.proxy("properties.total")}return currency(revenue);
};Track.prototype.cents=function(){var revenue=this.revenue();return typeof revenue!=="number"?this.value()||0:revenue*100};Track.prototype.identify=function(){var json=this.json();json.traits=this.traits();return new Identify(json,this.opts)};function currency(val){if(!val)return;if(typeof val==="number"){return val}if(typeof val!=="string"){return}val=val.replace(/\$/g,"");val=parseFloat(val);if(!isNaN(val)){return val}}module.exports=Track},{"./facade":169,"./identify":171,"./utils":177,"is-email":146,"obj-case":161}],177:[function(require,module,exports){"use strict";exports.inherit=require("inherits");exports.clone=require("@ndhoule/clone");exports.type=require("type-component")},{"@ndhoule/clone":5,inherits:144,"type-component":183}],178:[function(require,module,exports){module.exports=function(str,options){options||(options={});return str.toLowerCase().replace(options.replace||/[^a-z0-9]/g," ").replace(/^ +| +$/g,"").replace(/ +/g,options.separator||"-")}},{}],179:[function(require,module,exports){(function(factory){if(typeof exports==="object"){module.exports=factory()}else if(typeof define==="function"&&define.amd){define(factory)}else{var glob;try{glob=window}catch(e){glob=self}glob.SparkMD5=factory()}})(function(undefined){"use strict";var add32=function(a,b){return a+b&4294967295},hex_chr=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function cmn(q,a,b,x,s,t){a=add32(add32(a,q),add32(x,t));return add32(a<<s|a>>>32-s,b)}function ff(a,b,c,d,x,s,t){return cmn(b&c|~b&d,a,b,x,s,t)}function gg(a,b,c,d,x,s,t){return cmn(b&d|c&~d,a,b,x,s,t)}function hh(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)}function ii(a,b,c,d,x,s,t){return cmn(c^(b|~d),a,b,x,s,t)}function md5cycle(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a=ff(a,b,c,d,k[0],7,-680876936);d=ff(d,a,b,c,k[1],12,-389564586);c=ff(c,d,a,b,k[2],17,606105819);b=ff(b,c,d,a,k[3],22,-1044525330);a=ff(a,b,c,d,k[4],7,-176418897);d=ff(d,a,b,c,k[5],12,1200080426);c=ff(c,d,a,b,k[6],17,-1473231341);b=ff(b,c,d,a,k[7],22,-45705983);a=ff(a,b,c,d,k[8],7,1770035416);d=ff(d,a,b,c,k[9],12,-1958414417);c=ff(c,d,a,b,k[10],17,-42063);b=ff(b,c,d,a,k[11],22,-1990404162);a=ff(a,b,c,d,k[12],7,1804603682);d=ff(d,a,b,c,k[13],12,-40341101);c=ff(c,d,a,b,k[14],17,-1502002290);b=ff(b,c,d,a,k[15],22,1236535329);a=gg(a,b,c,d,k[1],5,-165796510);d=gg(d,a,b,c,k[6],9,-1069501632);c=gg(c,d,a,b,k[11],14,643717713);b=gg(b,c,d,a,k[0],20,-373897302);a=gg(a,b,c,d,k[5],5,-701558691);d=gg(d,a,b,c,k[10],9,38016083);c=gg(c,d,a,b,k[15],14,-660478335);b=gg(b,c,d,a,k[4],20,-405537848);a=gg(a,b,c,d,k[9],5,568446438);d=gg(d,a,b,c,k[14],9,-1019803690);c=gg(c,d,a,b,k[3],14,-187363961);b=gg(b,c,d,a,k[8],20,1163531501);a=gg(a,b,c,d,k[13],5,-1444681467);d=gg(d,a,b,c,k[2],9,-51403784);c=gg(c,d,a,b,k[7],14,1735328473);b=gg(b,c,d,a,k[12],20,-1926607734);a=hh(a,b,c,d,k[5],4,-378558);d=hh(d,a,b,c,k[8],11,-2022574463);c=hh(c,d,a,b,k[11],16,1839030562);b=hh(b,c,d,a,k[14],23,-35309556);a=hh(a,b,c,d,k[1],4,-1530992060);d=hh(d,a,b,c,k[4],11,1272893353);c=hh(c,d,a,b,k[7],16,-155497632);b=hh(b,c,d,a,k[10],23,-1094730640);a=hh(a,b,c,d,k[13],4,681279174);d=hh(d,a,b,c,k[0],11,-358537222);c=hh(c,d,a,b,k[3],16,-722521979);b=hh(b,c,d,a,k[6],23,76029189);a=hh(a,b,c,d,k[9],4,-640364487);d=hh(d,a,b,c,k[12],11,-421815835);c=hh(c,d,a,b,k[15],16,530742520);b=hh(b,c,d,a,k[2],23,-995338651);a=ii(a,b,c,d,k[0],6,-198630844);d=ii(d,a,b,c,k[7],10,1126891415);c=ii(c,d,a,b,k[14],15,-1416354905);b=ii(b,c,d,a,k[5],21,-57434055);a=ii(a,b,c,d,k[12],6,1700485571);d=ii(d,a,b,c,k[3],10,-1894986606);c=ii(c,d,a,b,k[10],15,-1051523);b=ii(b,c,d,a,k[1],21,-2054922799);a=ii(a,b,c,d,k[8],6,1873313359);d=ii(d,a,b,c,k[15],10,-30611744);c=ii(c,d,a,b,k[6],15,-1560198380);b=ii(b,c,d,a,k[13],21,1309151649);a=ii(a,b,c,d,k[4],6,-145523070);d=ii(d,a,b,c,k[11],10,-1120210379);c=ii(c,d,a,b,k[2],15,718787259);b=ii(b,c,d,a,k[9],21,-343485551);x[0]=add32(a,x[0]);x[1]=add32(b,x[1]);x[2]=add32(c,x[2]);x[3]=add32(d,x[3])}function md5blk(s){var md5blks=[],i;for(i=0;i<64;i+=4){md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24)}return md5blks}function md5blk_array(a){var md5blks=[],i;for(i=0;i<64;i+=4){md5blks[i>>2]=a[i]+(a[i+1]<<8)+(a[i+2]<<16)+(a[i+3]<<24)}return md5blks}function md51(s){var n=s.length,state=[1732584193,-271733879,-1732584194,271733878],i,length,tail,tmp,lo,hi;for(i=64;i<=n;i+=64){md5cycle(state,md5blk(s.substring(i-64,i)))}s=s.substring(i-64);length=s.length;tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<length;i+=1){tail[i>>2]|=s.charCodeAt(i)<<(i%4<<3)}tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(state,tail);for(i=0;i<16;i+=1){tail[i]=0}}tmp=n*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(state,tail);return state}function md51_array(a){var n=a.length,state=[1732584193,-271733879,-1732584194,271733878],i,length,tail,tmp,lo,hi;for(i=64;i<=n;i+=64){md5cycle(state,md5blk_array(a.subarray(i-64,i)))}a=i-64<n?a.subarray(i-64):new Uint8Array(0);length=a.length;tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<length;i+=1){tail[i>>2]|=a[i]<<(i%4<<3)}tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(state,tail);for(i=0;i<16;i+=1){tail[i]=0}}tmp=n*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(state,tail);return state}function rhex(n){var s="",j;for(j=0;j<4;j+=1){s+=hex_chr[n>>j*8+4&15]+hex_chr[n>>j*8&15]}return s}function hex(x){var i;for(i=0;i<x.length;i+=1){x[i]=rhex(x[i])}return x.join("")}if(hex(md51("hello"))!=="5d41402abc4b2a76b9719d911017c592"){add32=function(x,y){var lsw=(x&65535)+(y&65535),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}}if(typeof ArrayBuffer!=="undefined"&&!ArrayBuffer.prototype.slice){(function(){function clamp(val,length){val=val|0||0;if(val<0){return Math.max(val+length,0)}return Math.min(val,length)}ArrayBuffer.prototype.slice=function(from,to){var length=this.byteLength,begin=clamp(from,length),end=length,num,target,targetArray,sourceArray;if(to!==undefined){end=clamp(to,length)}if(begin>end){return new ArrayBuffer(0)}num=end-begin;target=new ArrayBuffer(num);targetArray=new Uint8Array(target);sourceArray=new Uint8Array(this,begin,num);targetArray.set(sourceArray);return target}})()}function toUtf8(str){if(/[\u0080-\uFFFF]/.test(str)){str=unescape(encodeURIComponent(str))}return str}function utf8Str2ArrayBuffer(str,returnUInt8Array){var length=str.length,buff=new ArrayBuffer(length),arr=new Uint8Array(buff),i;for(i=0;i<length;i+=1){arr[i]=str.charCodeAt(i)}return returnUInt8Array?arr:buff}function arrayBuffer2Utf8Str(buff){return String.fromCharCode.apply(null,new Uint8Array(buff))}function concatenateArrayBuffers(first,second,returnUInt8Array){var result=new Uint8Array(first.byteLength+second.byteLength);result.set(new Uint8Array(first));result.set(new Uint8Array(second),first.byteLength);return returnUInt8Array?result:result.buffer}function hexToBinaryString(hex){var bytes=[],length=hex.length,x;for(x=0;x<length-1;x+=2){bytes.push(parseInt(hex.substr(x,2),16))}return String.fromCharCode.apply(String,bytes)}function SparkMD5(){this.reset()}SparkMD5.prototype.append=function(str){this.appendBinary(toUtf8(str));return this};SparkMD5.prototype.appendBinary=function(contents){this._buff+=contents;this._length+=contents.length;var length=this._buff.length,i;for(i=64;i<=length;i+=64){md5cycle(this._hash,md5blk(this._buff.substring(i-64,i)))}this._buff=this._buff.substring(i-64);return this};SparkMD5.prototype.end=function(raw){var buff=this._buff,length=buff.length,i,tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ret;for(i=0;i<length;i+=1){tail[i>>2]|=buff.charCodeAt(i)<<(i%4<<3)}this._finish(tail,length);ret=hex(this._hash);if(raw){ret=hexToBinaryString(ret)}this.reset();return ret};SparkMD5.prototype.reset=function(){this._buff="";this._length=0;this._hash=[1732584193,-271733879,-1732584194,271733878];return this};SparkMD5.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}};SparkMD5.prototype.setState=function(state){this._buff=state.buff;this._length=state.length;this._hash=state.hash;return this};SparkMD5.prototype.destroy=function(){delete this._hash;delete this._buff;delete this._length};SparkMD5.prototype._finish=function(tail,length){var i=length,tmp,lo,hi;tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(this._hash,tail);for(i=0;i<16;i+=1){tail[i]=0}}tmp=this._length*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(this._hash,tail)};SparkMD5.hash=function(str,raw){return SparkMD5.hashBinary(toUtf8(str),raw)};SparkMD5.hashBinary=function(content,raw){var hash=md51(content),ret=hex(hash);return raw?hexToBinaryString(ret):ret};SparkMD5.ArrayBuffer=function(){this.reset()};SparkMD5.ArrayBuffer.prototype.append=function(arr){var buff=concatenateArrayBuffers(this._buff.buffer,arr,true),length=buff.length,i;this._length+=arr.byteLength;for(i=64;i<=length;i+=64){md5cycle(this._hash,md5blk_array(buff.subarray(i-64,i)))}this._buff=i-64<length?new Uint8Array(buff.buffer.slice(i-64)):new Uint8Array(0);return this};SparkMD5.ArrayBuffer.prototype.end=function(raw){var buff=this._buff,length=buff.length,tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i,ret;for(i=0;i<length;i+=1){tail[i>>2]|=buff[i]<<(i%4<<3)}this._finish(tail,length);ret=hex(this._hash);if(raw){ret=hexToBinaryString(ret)}this.reset();return ret};SparkMD5.ArrayBuffer.prototype.reset=function(){this._buff=new Uint8Array(0);this._length=0;this._hash=[1732584193,-271733879,-1732584194,271733878];return this};SparkMD5.ArrayBuffer.prototype.getState=function(){var state=SparkMD5.prototype.getState.call(this);state.buff=arrayBuffer2Utf8Str(state.buff);return state};SparkMD5.ArrayBuffer.prototype.setState=function(state){state.buff=utf8Str2ArrayBuffer(state.buff,true);return SparkMD5.prototype.setState.call(this,state)};SparkMD5.ArrayBuffer.prototype.destroy=SparkMD5.prototype.destroy;SparkMD5.ArrayBuffer.prototype._finish=SparkMD5.prototype._finish;SparkMD5.ArrayBuffer.hash=function(arr,raw){var hash=md51_array(new Uint8Array(arr)),ret=hex(hash);return raw?hexToBinaryString(ret):ret};return SparkMD5})},{}],180:[function(require,module,exports){var expr;try{expr=require("props")}catch(e){expr=require("component-props")}module.exports=toFunction;function toFunction(obj){switch({}.toString.call(obj)){case"[object Object]":return objectToFunction(obj);case"[object Function]":return obj;case"[object String]":return stringToFunction(obj);case"[object RegExp]":return regexpToFunction(obj);default:return defaultToFunction(obj)}}function defaultToFunction(val){return function(obj){return val===obj}}function regexpToFunction(re){return function(obj){return re.test(obj)}}function stringToFunction(str){if(/^ *\W+/.test(str))return new Function("_","return _ "+str);return new Function("_","return "+get(str))}function objectToFunction(obj){var match={};for(var key in obj){match[key]=typeof obj[key]==="string"?defaultToFunction(obj[key]):toFunction(obj[key])}return function(val){if(typeof val!=="object")return false;for(var key in match){if(!(key in val))return false;if(!match[key](val[key]))return false}return true}}function get(str){var props=expr(str);if(!props.length)return"_."+str;var val,i,prop;for(i=0;i<props.length;i++){prop=props[i];val="_."+prop;val="('function' == typeof "+val+" ? "+val+"() : "+val+")";str=stripNested(prop,str,val)}return str}function stripNested(prop,str,val){return str.replace(new RegExp("(\\.)?"+prop,"g"),function($0,$1){return $1?$0:val})}},{"component-props":131,props:131}],181:[function(require,module,exports){module.exports=toNoCase;var hasSpace=/\s/;var hasSeparator=/[\W_]/;function toNoCase(string){if(hasSpace.test(string))return string.toLowerCase();if(hasSeparator.test(string))return(unseparate(string)||string).toLowerCase();return uncamelize(string).toLowerCase()}var separatorSplitter=/[\W_]+(.|$)/g;function unseparate(string){return string.replace(separatorSplitter,function(m,next){return next?" "+next:""})}var camelSplitter=/(.)([A-Z]+)/g;function uncamelize(string){return string.replace(camelSplitter,function(m,previous,uppers){return previous+" "+uppers.toLowerCase().split("").join(" ")})}},{}],182:[function(require,module,exports){exports=module.exports=trim;function trim(str){return str.replace(/^\s*|\s*$/g,"")}exports.left=function(str){return str.replace(/^\s*/,"")};exports.right=function(str){return str.replace(/\s*$/,"")}},{}],183:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}if(val===null)return"null";if(val===undefined)return"undefined";if(val===Object(val))return"object";return typeof val}},{}],184:[function(require,module,exports){module.exports=function(url){switch(arguments.length){case 0:return check();case 1:return transform(url)}};function transform(url){return check()?"https:"+url:"http:"+url}function check(){return location.protocol=="https:"||location.protocol=="chrome-extension:"}},{}],185:[function(require,module,exports){module.exports=encode;function encode(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c)}else if(c>127&&c<2048){utftext+=String.fromCharCode(c>>6|192);utftext+=String.fromCharCode(c&63|128)}else{utftext+=String.fromCharCode(c>>12|224);utftext+=String.fromCharCode(c>>6&63|128);utftext+=String.fromCharCode(c&63|128)}}return utftext}},{}],186:[function(require,module,exports){(function(global){var rng;if(global.crypto&&crypto.getRandomValues){var _rnds8=new Uint8Array(16);rng=function whatwgRNG(){crypto.getRandomValues(_rnds8);return _rnds8}}if(!rng){var _rnds=new Array(16);rng=function(){for(var i=0,r;i<16;i++){if((i&3)===0)r=Math.random()*4294967296;_rnds[i]=r>>>((i&3)<<3)&255}return _rnds}}module.exports=rng}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],187:[function(require,module,exports){var _rng=require("./rng");var _byteToHex=[];var _hexToByte={};for(var i=0;i<256;i++){_byteToHex[i]=(i+256).toString(16).substr(1);_hexToByte[_byteToHex[i]]=i}function parse(s,buf,offset){var i=buf&&offset||0,ii=0;buf=buf||[];s.toLowerCase().replace(/[0-9a-f]{2}/g,function(oct){if(ii<16){buf[i+ii++]=_hexToByte[oct]}});while(ii<16){buf[i+ii++]=0}return buf}function unparse(buf,offset){var i=offset||0,bth=_byteToHex;return bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]}var _seedBytes=_rng();var _nodeId=[_seedBytes[0]|1,_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]];var _clockseq=(_seedBytes[6]<<8|_seedBytes[7])&16383;var _lastMSecs=0,_lastNSecs=0;function v1(options,buf,offset){var i=buf&&offset||0;var b=buf||[];options=options||{};var clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;var msecs=options.msecs!==undefined?options.msecs:(new Date).getTime();var nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;var dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&16383}if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0}if(nsecs>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;msecs+=122192928e5;var tl=((msecs&268435455)*1e4+nsecs)%4294967296;b[i++]=tl>>>24&255;b[i++]=tl>>>16&255;b[i++]=tl>>>8&255;b[i++]=tl&255;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255;b[i++]=tmh&255;b[i++]=tmh>>>24&15|16;b[i++]=tmh>>>16&255;b[i++]=clockseq>>>8|128;b[i++]=clockseq&255;var node=options.node||_nodeId;for(var n=0;n<6;n++){b[i+n]=node[n]}return buf?buf:unparse(b)}function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=="string"){buf=options=="binary"?new Array(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||_rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;ii++){buf[i+ii]=rnds[ii]}}return buf||unparse(rnds)}var uuid=v4;uuid.v1=v1;uuid.v4=v4;uuid.parse=parse;uuid.unparse=unparse;module.exports=uuid},{"./rng":186}],188:[function(require,module,exports){var unserialize=require("unserialize");var each=require("each");var storage;try{storage=window.localStorage}catch(e){storage=null}module.exports=store;function store(key,value){var length=arguments.length;if(0==length)return all();if(2<=length)return set(key,value);if(1!=length)return;if(null==key)return storage.clear();if("string"==typeof key)return get(key);if("object"==typeof key)return each(key,set)}store.supported=!!storage;function set(key,val){return null==val?storage.removeItem(key):storage.setItem(key,JSON.stringify(val))}function get(key){return unserialize(storage.getItem(key))}function all(){var len=storage.length;var ret={};var key;while(0<=--len){key=storage.key(len);ret[key]=get(key)}return ret}},{each:126,unserialize:189}],189:[function(require,module,exports){module.exports=function(val){try{return JSON.parse(val)}catch(e){return val||undefined}}},{}],190:[function(require,module,exports){module.exports={name:"@segment/analytics.js",author:"Segment <friends@segment.com>",version:"2.11.0",description:"The hassle-free way to integrate analytics into any web application.",keywords:["analytics","analytics.js","segment","segment.io"],main:"analytics.js",scripts:{build:"make build",clean:"make clean",test:"make test"},repository:{type:"git",url:"https://github.com/segmentio/analytics.js.git"},license:"SEE LICENSE IN LICENSE",bugs:{url:"https://github.com/segmentio/analytics.js/issues"},homepage:"https://github.com/segmentio/analytics.js#readme",dependencies:{"@segment/analytics.js-core":"^3.0.0","@segment/analytics.js-integration":"^3.1.0","@segment/analytics.js-integration-adroll":"git+https://github.com/segment-integrations/analytics.js-integration-adroll.git","@segment/analytics.js-integration-adwords":"git+https://github.com/segment-integrations/analytics.js-integration-adwords.git","@segment/analytics.js-integration-alexa":"git+https://github.com/segment-integrations/analytics.js-integration-alexa.git","@segment/analytics.js-integration-amplitude":"git+https://github.com/segment-integrations/analytics.js-integration-amplitude.git","@segment/analytics.js-integration-appcues":"git+https://github.com/segment-integrations/analytics.js-integration-appcues.git","@segment/analytics.js-integration-atatus":"git+https://github.com/segment-integrations/analytics.js-integration-atatus.git","@segment/analytics.js-integration-autosend":"git+https://github.com/segment-integrations/analytics.js-integration-autosend.git","@segment/analytics.js-integration-awesm":"git+https://github.com/segment-integrations/analytics.js-integration-awesm.git","@segment/analytics.js-integration-bing-ads":"git+https://github.com/segment-integrations/analytics.js-integration-bing-ads.git","@segment/analytics.js-integration-blueshift":"git+https://github.com/segment-integrations/analytics.js-integration-blueshift.git","@segment/analytics.js-integration-boomtrain":"git+https://github.com/segment-integrations/analytics.js-integration-boomtrain.git","@segment/analytics.js-integration-bronto":"git+https://github.com/segment-integrations/analytics.js-integration-bronto.git","@segment/analytics.js-integration-bugherd":"git+https://github.com/segment-integrations/analytics.js-integration-bugherd.git","@segment/analytics.js-integration-bugsnag":"git+https://github.com/segment-integrations/analytics.js-integration-bugsnag.git","@segment/analytics.js-integration-chameleon":"git+https://github.com/segment-integrations/analytics.js-integration-chameleon.git","@segment/analytics.js-integration-chartbeat":"git+https://github.com/segment-integrations/analytics.js-integration-chartbeat.git","@segment/analytics.js-integration-clicky":"git+https://github.com/segment-integrations/analytics.js-integration-clicky.git","@segment/analytics.js-integration-comscore":"git+https://github.com/segment-integrations/analytics.js-integration-comscore.git","@segment/analytics.js-integration-crazy-egg":"git+https://github.com/segment-integrations/analytics.js-integration-crazy-egg.git","@segment/analytics.js-integration-curebit":"git+https://github.com/segment-integrations/analytics.js-integration-curebit.git","@segment/analytics.js-integration-customerio":"git+https://github.com/segment-integrations/analytics.js-integration-customerio.git","@segment/analytics.js-integration-drift":"git+https://github.com/segment-integrations/analytics.js-integration-drift.git","@segment/analytics.js-integration-drip":"git+https://github.com/segment-integrations/analytics.js-integration-drip.git","@segment/analytics.js-integration-elevio":"git+https://github.com/segment-integrations/analytics.js-integration-elevio.git","@segment/analytics.js-integration-errorception":"git+https://github.com/segment-integrations/analytics.js-integration-errorception.git","@segment/analytics.js-integration-evergage":"git+https://github.com/segment-integrations/analytics.js-integration-evergage.git","@segment/analytics.js-integration-extole":"git+https://github.com/segment-integrations/analytics.js-integration-extole.git","@segment/analytics.js-integration-facebook-conversion-tracking":"git+https://github.com/segment-integrations/analytics.js-integration-facebook-conversion-tracking.git","@segment/analytics.js-integration-facebook-custom-audiences":"git+https://github.com/segment-integrations/analytics.js-integration-facebook-custom-audiences.git","@segment/analytics.js-integration-facebook-pixel":"git+https://github.com/segment-integrations/analytics.js-integration-facebook-pixel.git","@segment/analytics.js-integration-foxmetrics":"git+https://github.com/segment-integrations/analytics.js-integration-foxmetrics.git","@segment/analytics.js-integration-frontleaf":"git+https://github.com/segment-integrations/analytics.js-integration-frontleaf.git","@segment/analytics.js-integration-gauges":"git+https://github.com/segment-integrations/analytics.js-integration-gauges.git","@segment/analytics.js-integration-get-satisfaction":"git+https://github.com/segment-integrations/analytics.js-integration-get-satisfaction.git","@segment/analytics.js-integration-google-analytics":"git+https://github.com/segment-integrations/analytics.js-integration-google-analytics.git","@segment/analytics.js-integration-google-tag-manager":"git+https://github.com/segment-integrations/analytics.js-integration-google-tag-manager.git","@segment/analytics.js-integration-gosquared":"git+https://github.com/segment-integrations/analytics.js-integration-gosquared.git","@segment/analytics.js-integration-heap":"git+https://github.com/segment-integrations/analytics.js-integration-heap.git","@segment/analytics.js-integration-hellobar":"git+https://github.com/segment-integrations/analytics.js-integration-hellobar.git","@segment/analytics.js-integration-hittail":"git+https://github.com/segment-integrations/analytics.js-integration-hittail.git","@segment/analytics.js-integration-hubspot":"git+https://github.com/segment-integrations/analytics.js-integration-hubspot.git","@segment/analytics.js-integration-improvely":"git+https://github.com/segment-integrations/analytics.js-integration-improvely.git","@segment/analytics.js-integration-inspectlet":"git+https://github.com/segment-integrations/analytics.js-integration-inspectlet.git","@segment/analytics.js-integration-intercom":"git+https://github.com/segment-integrations/analytics.js-integration-intercom.git","@segment/analytics.js-integration-keen-io":"git+https://github.com/segment-integrations/analytics.js-integration-keen-io.git","@segment/analytics.js-integration-kenshoo":"git+https://github.com/segment-integrations/analytics.js-integration-kenshoo.git","@segment/analytics.js-integration-kissmetrics":"git+https://github.com/segment-integrations/analytics.js-integration-kissmetrics.git","@segment/analytics.js-integration-klaviyo":"git+https://github.com/segment-integrations/analytics.js-integration-klaviyo.git","@segment/analytics.js-integration-livechat":"git+https://github.com/segment-integrations/analytics.js-integration-livechat.git","@segment/analytics.js-integration-lucky-orange":"git+https://github.com/segment-integrations/analytics.js-integration-lucky-orange.git","@segment/analytics.js-integration-lytics":"git+https://github.com/segment-integrations/analytics.js-integration-lytics.git","@segment/analytics.js-integration-madkudu":"git+https://github.com/segment-integrations/analytics.js-integration-madkudu.git","@segment/analytics.js-integration-mixpanel":"git+https://github.com/segment-integrations/analytics.js-integration-mixpanel.git","@segment/analytics.js-integration-mojn":"git+https://github.com/segment-integrations/analytics.js-integration-mojn.git","@segment/analytics.js-integration-mouseflow":"git+https://github.com/segment-integrations/analytics.js-integration-mouseflow.git","@segment/analytics.js-integration-mousestats":"git+https://github.com/segment-integrations/analytics.js-integration-mousestats.git","@segment/analytics.js-integration-navilytics":"git+https://github.com/segment-integrations/analytics.js-integration-navilytics.git","@segment/analytics.js-integration-nudgespot":"git+https://github.com/segment-integrations/analytics.js-integration-nudgespot.git","@segment/analytics.js-integration-olark":"git+https://github.com/segment-integrations/analytics.js-integration-olark.git","@segment/analytics.js-integration-optimizely":"git+https://github.com/segment-integrations/analytics.js-integration-optimizely.git","@segment/analytics.js-integration-outbound":"git+https://github.com/segment-integrations/analytics.js-integration-outbound.git","@segment/analytics.js-integration-parsely":"git+https://github.com/segment-integrations/analytics.js-integration-parsely.git","@segment/analytics.js-integration-perfect-audience":"git+https://github.com/segment-integrations/analytics.js-integration-perfect-audience.git","@segment/analytics.js-integration-pingdom":"git+https://github.com/segment-integrations/analytics.js-integration-pingdom.git","@segment/analytics.js-integration-piwik":"git+https://github.com/segment-integrations/analytics.js-integration-piwik.git","@segment/analytics.js-integration-preact":"git+https://github.com/segment-integrations/analytics.js-integration-preact.git","@segment/analytics.js-integration-qualaroo":"git+https://github.com/segment-integrations/analytics.js-integration-qualaroo.git","@segment/analytics.js-integration-quantcast":"git+https://github.com/segment-integrations/analytics.js-integration-quantcast.git","@segment/analytics.js-integration-quanticmind":"git+https://github.com/segment-integrations/analytics.js-integration-quanticmind.git","@segment/analytics.js-integration-ramen":"git+https://github.com/segment-integrations/analytics.js-integration-ramen.git","@segment/analytics.js-integration-rollbar":"git+https://github.com/segment-integrations/analytics.js-integration-rollbar.git","@segment/analytics.js-integration-route":"git+https://github.com/segment-integrations/analytics.js-integration-route.git","@segment/analytics.js-integration-saasquatch":"git+https://github.com/segment-integrations/analytics.js-integration-saasquatch.git","@segment/analytics.js-integration-satismeter":"git+https://github.com/segment-integrations/analytics.js-integration-satismeter.git","@segment/analytics.js-integration-segmentio":"git+https://github.com/segment-integrations/analytics.js-integration-segmentio.git","@segment/analytics.js-integration-sentry":"git+https://github.com/segment-integrations/analytics.js-integration-sentry.git","@segment/analytics.js-integration-simplereach":"git+https://github.com/segment-integrations/analytics.js-integration-simplereach.git","@segment/analytics.js-integration-snapengage":"git+https://github.com/segment-integrations/analytics.js-integration-snapengage.git","@segment/analytics.js-integration-spinnakr":"git+https://github.com/segment-integrations/analytics.js-integration-spinnakr.git","@segment/analytics.js-integration-supporthero":"git+https://github.com/segment-integrations/analytics.js-integration-supporthero.git","@segment/analytics.js-integration-taplytics":"git+https://github.com/segment-integrations/analytics.js-integration-taplytics.git","@segment/analytics.js-integration-tapstream":"git+https://github.com/segment-integrations/analytics.js-integration-tapstream.git","@segment/analytics.js-integration-trakio":"git+https://github.com/segment-integrations/analytics.js-integration-trakio.git","@segment/analytics.js-integration-twitter-ads":"git+https://github.com/segment-integrations/analytics.js-integration-twitter-ads.git","@segment/analytics.js-integration-userlike":"git+https://github.com/segment-integrations/analytics.js-integration-userlike.git","@segment/analytics.js-integration-uservoice":"git+https://github.com/segment-integrations/analytics.js-integration-uservoice.git","@segment/analytics.js-integration-vero":"git+https://github.com/segment-integrations/analytics.js-integration-vero.git","@segment/analytics.js-integration-visual-website-optimizer":"git+https://github.com/segment-integrations/analytics.js-integration-visual-website-optimizer.git","@segment/analytics.js-integration-webengage":"git+https://github.com/segment-integrations/analytics.js-integration-webengage.git","@segment/analytics.js-integration-woopra":"git+https://github.com/segment-integrations/analytics.js-integration-woopra.git","@segment/analytics.js-integration-wootric":"git+https://github.com/segment-integrations/analytics.js-integration-wootric.git","@segment/analytics.js-integration-yandex-metrica":"git+https://github.com/segment-integrations/analytics.js-integration-yandex-metrica.git"},devDependencies:{"@segment/eslint-config":"^3.1.1",browserify:"^13.0.1",eslint:"^2.9.0","eslint-plugin-mocha":"^2.2.0","eslint-plugin-require-path-exists":"^1.1.5","uglify-js":"^2.6.4"}}},{}]},{},[1])(1)});
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}},"package.json":function(require,exports,module){

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                    //
// node_modules/meteor/okgrow_analytics/node_modules/@okgrow/auto-analytics/package.json                              //
//                                                                                                                    //
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                      //
module.exports = {                                                                                                    // 1
  "_args": [                                                                                                          // 2
    [                                                                                                                 // 3
      {                                                                                                               // 4
        "raw": "@okgrow/auto-analytics@1.0.2",                                                                        // 5
        "scope": "@okgrow",                                                                                           // 6
        "escapedName": "@okgrow%2fauto-analytics",                                                                    // 7
        "name": "@okgrow/auto-analytics",                                                                             // 8
        "rawSpec": "1.0.2",                                                                                           // 9
        "spec": "1.0.2",                                                                                              // 10
        "type": "version"                                                                                             // 11
      },                                                                                                              // 12
      "/Users/chris/Projects/OKGROW/analytics/.npm/package-new-hcbe84"                                                // 13
    ]                                                                                                                 // 14
  ],                                                                                                                  // 15
  "_from": "@okgrow/auto-analytics@1.0.2",                                                                            // 16
  "_id": "@okgrow/auto-analytics@1.0.2",                                                                              // 17
  "_inCache": true,                                                                                                   // 18
  "_location": "/@okgrow/auto-analytics",                                                                             // 19
  "_nodeVersion": "7.5.0",                                                                                            // 20
  "_npmOperationalInternal": {                                                                                        // 21
    "host": "s3://npm-registry-packages",                                                                             // 22
    "tmp": "tmp/auto-analytics-1.0.2.tgz_1497027154395_0.5052906477358192"                                            // 23
  },                                                                                                                  // 24
  "_npmUser": {                                                                                                       // 25
    "name": "ccuilla",                                                                                                // 26
    "email": "ccuilla@gmail.com"                                                                                      // 27
  },                                                                                                                  // 28
  "_npmVersion": "5.0.3",                                                                                             // 29
  "_phantomChildren": {},                                                                                             // 30
  "_requested": {                                                                                                     // 31
    "raw": "@okgrow/auto-analytics@1.0.2",                                                                            // 32
    "scope": "@okgrow",                                                                                               // 33
    "escapedName": "@okgrow%2fauto-analytics",                                                                        // 34
    "name": "@okgrow/auto-analytics",                                                                                 // 35
    "rawSpec": "1.0.2",                                                                                               // 36
    "spec": "1.0.2",                                                                                                  // 37
    "type": "version"                                                                                                 // 38
  },                                                                                                                  // 39
  "_requiredBy": [                                                                                                    // 40
    "#USER"                                                                                                           // 41
  ],                                                                                                                  // 42
  "_resolved": "https://registry.npmjs.org/@okgrow/auto-analytics/-/auto-analytics-1.0.2.tgz",                        // 43
  "_shasum": "8281d2e6c06b77cd4e571297a69a0da4e71264ca",                                                              // 44
  "_shrinkwrap": null,                                                                                                // 45
  "_spec": "@okgrow/auto-analytics@1.0.2",                                                                            // 46
  "_where": "/Users/chris/Projects/OKGROW/analytics/.npm/package-new-hcbe84",                                         // 47
  "bugs": {                                                                                                           // 48
    "url": "https://github.com/okgrow/auto-analytics/issues"                                                          // 49
  },                                                                                                                  // 50
  "dependencies": {},                                                                                                 // 51
  "description": "Complete automatic pageview tracking with Google Analytics, Mixpanel, KISSmetrics (and more) integration for JavaScript applications.",
  "devDependencies": {                                                                                                // 53
    "babel-cli": "6.x.x",                                                                                             // 54
    "babel-core": "6.x.x",                                                                                            // 55
    "babel-eslint": "7.x.x",                                                                                          // 56
    "babel-plugin-transform-runtime": "6.x.x",                                                                        // 57
    "babel-polyfill": "6.x.x",                                                                                        // 58
    "babel-preset-es2015": "6.x.x",                                                                                   // 59
    "babel-preset-stage-2": "6.x.x",                                                                                  // 60
    "chai": "3.x.x",                                                                                                  // 61
    "eslint": "^3.14.1",                                                                                              // 62
    "eslint-config-airbnb": "^14.0.0",                                                                                // 63
    "eslint-config-airbnb-base": "^11.0.1",                                                                           // 64
    "eslint-import-resolver-meteor": "^0.3.4",                                                                        // 65
    "eslint-plugin-babel": "4.x.x",                                                                                   // 66
    "eslint-plugin-import": "^2.2.0",                                                                                 // 67
    "eslint-plugin-jsx-a11y": "^4.0.0",                                                                               // 68
    "eslint-plugin-react": "^6.9.0",                                                                                  // 69
    "mocha": "3.x.x",                                                                                                 // 70
    "mock-browser": "^0.92.12",                                                                                       // 71
    "nodemon": "1.11.x"                                                                                               // 72
  },                                                                                                                  // 73
  "directories": {},                                                                                                  // 74
  "dist": {                                                                                                           // 75
    "integrity": "sha512-M89bpMjSkQthuehxVKdtmQMR2eDkWcn+H09r5lIPSNIkRJ/Z/89NTe5ZC5N2tZSRKhIOv4aiM7lMLqNH/hw+rQ==",   // 76
    "shasum": "8281d2e6c06b77cd4e571297a69a0da4e71264ca",                                                             // 77
    "tarball": "https://registry.npmjs.org/@okgrow/auto-analytics/-/auto-analytics-1.0.2.tgz"                         // 78
  },                                                                                                                  // 79
  "gitHead": "2424609c2ccb6c7897beb318aa41ece4193b6e24",                                                              // 80
  "homepage": "https://github.com/okgrow/auto-analytics#readme",                                                      // 81
  "license": "MIT",                                                                                                   // 82
  "maintainers": [                                                                                                    // 83
    {                                                                                                                 // 84
      "name": "ccuilla",                                                                                              // 85
      "email": "ccuilla@gmail.com"                                                                                    // 86
    },                                                                                                                // 87
    {                                                                                                                 // 88
      "name": "rdickert",                                                                                             // 89
      "email": "robert.dickert@gmail.com"                                                                             // 90
    },                                                                                                                // 91
    {                                                                                                                 // 92
      "name": "pauldowman",                                                                                           // 93
      "email": "paul@okgrow.com"                                                                                      // 94
    }                                                                                                                 // 95
  ],                                                                                                                  // 96
  "name": "@okgrow/auto-analytics",                                                                                   // 97
  "optionalDependencies": {},                                                                                         // 98
  "options": {                                                                                                        // 99
    "mocha": "--require scripts/mocha_runner src/**/__tests__/**/*.js"                                                // 100
  },                                                                                                                  // 101
  "readme": "# OK GROW! auto-analytics\nUse one API, thanks to Segment.io's [analytics.js](https://segment.com/docs/libraries/analytics.js/), to **easily and automatically** record and send data from your JavaScript application to your analytics platforms.\n\n**NOTE:** The `@okgrow/auto-analytics` package replaces the **now deprecated** `okgrow-auto-analytics` package.\n\n## Installation\n\n`> npm install @okgrow/auto-analytics --save`\n\n## Currently Supported Analytic Services\n* Amplitude\n* Chartbeat\n* comScore\n* Google Analytics\n* HubSpot\n* Intercom\n* Keen IO\n* KISSmetrics\n* Mixpanel\n* Quantcast\n* Segment.io\n\n## Ad-blocker\n\nIf you, or your users, are running an ad blocker in their browser and the analytics package is not bundled into a single JavaScript file to the browser (i.e., is downloads as analytics.js or something similar) the browser's ad blocker may prevent analytics tracking. This can happen during development mode when all JavaScript files are typically not bundled together.\n\nTo solve this problem with a Meteor application, for example, you can run the application in production mode like this:\n\n`meteor run --production --settings settings.json`\n\n**NOTE:** If an Adblocker is enabled the expected behavior is that your analytic events will not be received. You will see an error message in your console reporting the events being blocked.\n\n## Configuration\n\nAdd various platforms by adding each tool's configuration to the settings object passed to OKGAnalytics:\n\n```\nimport OKGAnalytics, { analytics } from '@okgrow/auto-analytics';\n\nconst settings = {\n  // Add your analytics tracking ids here (remove this line before running)\n  \"Google Analytics\" : {\"trackingId\": \"Your tracking ID\"},\n  \"Amplitude\"        : {\"apiKey\": \"...\"},\n  \"Chartbeat\"        : {\"uid\": \"...\"},\n  \"comScore\"         : {\"c2\": \"...\"},\n  \"HubSpot\"          : {\"portalId\": \"...\"},\n  \"Intercom\"         : {\"appId\": \"...\"},\n  \"Keen IO\"          : {\"projectId\": \"...\", \"writeKey\": \"...\"},\n  \"KISSmetrics\"      : {\"apiKey\": \"...\"},\n  \"Mixpanel\"         : {\"token\":  \"...\", \"people\": true},\n  \"Quantcast\"        : {\"pCode\": \"...\"},\n  \"Segment.io\"       : {\"apiKey\": \"...\"}\n};\n\nOKGAnalytics(settings);\n```\n\nThe service names and API key-names provided above are specific to each platform. Make sure to use the correct service name and key shown for the platform you're adding.\n\nThere are other options which not documented here. To find them search for your specific integration [in this file](https://github.com/okgrow/analytics.js/blob/master/analytics.js) and look at the options and their defaults that are set with `.option(...)`.\n\nIf you use a different service for tracking events or page views and you think it's popular enough that we should add it then please open an issue on the repo and we'll see how many supporters we get. Each additional integration adds a small amount to the file size so we want to support only the most common ones to economize the download size of this package.\n\n### Page views\n\nCompatible with any router, this package will log page views automatically. Each page is logged with the follow parameters:\n\n * `path`: path part of the URL\n * `title`: the page's title\n * `url`: hostname + path\n * `search`: the URL's query string, if provided. blank otherwise\n * `referrer`: hostname + old path, if coming from a previous route\n\nTo disable automatic page view tracking add ```autorun: false``` to your settings object when configuring then manually log a page view by calling `analytics.page('page name')`:\n\n### Event tracking\n\nTrack any event by simply calling the `analytics.track()` function:\n\n```\nanalytics.track(\"Bought Ticket\", {\n  eventName: \"Wine Tasting\",\n  couponValue: 50,\n});\n```\n\nCheck Segment.io's [analytics.js track documentation](https://segment.com/docs/libraries/analytics.js/#track) for a full description of `track()` and all the other functions available in this package.\n\n### Debugging\n\nWhen adding your platforms and setting events to track you may want to keep debug on locally. This will log all the analytics package's activity to the console.\n\nTo turn on debugging, in the console:\n\n`> analytics.debug()`\n\nTurn debugging off, in the console:\n\n`> analytics.debug(false)`\n\n### Example React Router Application\n\nThis package includes an `examples` directory containing a simple (Meteor) application using react-router. This is just an example with a common router and doesn't imply this plugin only works with this router or only with Meteor. This application can be run from its directory with:\n\n`meteor --settings settings.json --production`.\n\n### License\n\nReleased under the [MIT license](https://github.com/okgrow/analytics/blob/master/License.md).\n\n### Contributing\n\nIssues and Pull Requests are always welcome. Please read our [contribution guidelines](https://github.com/okgrow/guides/blob/master/contributing.md).\n",
  "readmeFilename": "README.md",                                                                                      // 103
  "repository": {                                                                                                     // 104
    "type": "git",                                                                                                    // 105
    "url": "git+https://github.com/okgrow/auto-analytics.git"                                                         // 106
  },                                                                                                                  // 107
  "scripts": {                                                                                                        // 108
    "lint": "eslint ./src",                                                                                           // 109
    "lintfix": "eslint ./src --fix",                                                                                  // 110
    "prepublish": ". ./scripts/prepublish.sh",                                                                        // 111
    "start": "babel src -d dist --watch",                                                                             // 112
    "test": "npm run lint && npm run testonly",                                                                       // 113
    "test-watch": "npm run testonly -- --watch --watch-extensions js",                                                // 114
    "testonly": "mocha $npm_package_options_mocha"                                                                    // 115
  },                                                                                                                  // 116
  "version": "1.0.2"                                                                                                  // 117
};                                                                                                                    // 118
                                                                                                                      // 119
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}}}}}}}},{
  "extensions": [
    ".js",
    ".json"
  ]
});
var exports = require("./node_modules/meteor/okgrow:analytics/client/main.js");

/* Exports */
if (typeof Package === 'undefined') Package = {};
(function (pkg, symbols) {
  for (var s in symbols)
    (s in pkg) || (pkg[s] = symbols[s]);
})(Package['okgrow:analytics'] = exports, {
  analytics: analytics
});

})();
