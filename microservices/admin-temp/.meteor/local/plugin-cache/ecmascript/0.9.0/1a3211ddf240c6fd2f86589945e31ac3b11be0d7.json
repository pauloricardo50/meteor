{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","createClass","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"file-saver","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"fileSaver"}]},{"source":"../IconButton","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"IconButton"}]},{"source":"../Translation","imported":["T"],"specifiers":[{"kind":"named","imported":"T","local":"T"}]}],"exports":{"exported":["Download"],"specifiers":[{"kind":"local","local":"Download","exported":"default"}]}}},"options":{"filename":"imports/core/components/UploaderArray/Download.jsx","filenameRelative":"imports/core/components/UploaderArray/Download.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/components/UploaderArray/Download.jsx.map","sourceFileName":"imports/core/components/UploaderArray/Download.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"Download"},"ignored":false,"code":"\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nmodule.export({\n  \"default\": function () {\n    function _default() {\n      return Download;\n    }\n\n    return _default;\n  }()\n});\n\nvar React = void 0,\n    _Component = void 0;\n\nmodule.watch(require(\"react\"), {\n  \"default\": function () {\n    function _default(v) {\n      React = v;\n    }\n\n    return _default;\n  }(),\n  Component: function () {\n    function Component(v) {\n      _Component = v;\n    }\n\n    return Component;\n  }()\n}, 0);\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function () {\n    function _default(v) {\n      PropTypes = v;\n    }\n\n    return _default;\n  }()\n}, 1);\n\nvar _Meteor = void 0;\n\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function () {\n    function Meteor(v) {\n      _Meteor = v;\n    }\n\n    return Meteor;\n  }()\n}, 2);\nvar fileSaver = void 0;\nmodule.watch(require(\"file-saver\"), {\n  \"default\": function () {\n    function _default(v) {\n      fileSaver = v;\n    }\n\n    return _default;\n  }()\n}, 3);\nvar IconButton = void 0;\nmodule.watch(require(\"../IconButton\"), {\n  \"default\": function () {\n    function _default(v) {\n      IconButton = v;\n    }\n\n    return _default;\n  }()\n}, 4);\n\nvar _T = void 0;\n\nmodule.watch(require(\"../Translation\"), {\n  T: function () {\n    function T(v) {\n      _T = v;\n    }\n\n    return T;\n  }()\n}, 5);\n\nvar Download = function (_Component2) {\n  (0, _inherits3.default)(Download, _Component2);\n\n  function Download(props) {\n    (0, _classCallCheck3.default)(this, Download);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Download.__proto__ || Object.getPrototypeOf(Download)).call(this, props));\n\n    _this.handleClick = function () {\n      var _this$props = _this.props,\n          fileKey = _this$props.fileKey,\n          fileName = _this$props.fileName;\n\n      _this.setState({\n        downloading: true\n      }, function () {\n        _Meteor.call('downloadFile', fileKey, function (err, data) {\n          _this.setState({\n            downloading: false\n          });\n\n          if (err) {\n            console.log(err);\n          } else {\n            var blob = new Blob([data.Body], {\n              type: data.ContentType\n            });\n            fileSaver.saveAs(blob, fileName);\n          }\n        });\n      });\n    };\n\n    _this.state = {\n      downloading: false\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(Download, [{\n    key: \"render\",\n    value: function () {\n      function render() {\n        var _props = this.props,\n            fileKey = _props.fileKey,\n            fileName = _props.fileName;\n        var downloading = this.state.downloading;\n        return React.createElement(IconButton, {\n          touch: false,\n          type: downloading ? 'loop-spin' : 'download',\n          tooltip: React.createElement(_T, {\n            id: \"general.download\"\n          }),\n          onClick: this.handleClick,\n          disabled: downloading\n        });\n      }\n\n      return render;\n    }()\n  }]);\n  return Download;\n}(_Component);\n\nDownload.propTypes = {\n  fileName: PropTypes.string.isRequired,\n  fileKey: PropTypes.string.isRequired\n};","map":{"version":3,"sources":["imports/core/components/UploaderArray/Download.jsx"],"names":["module","export","Download","React","Component","watch","require","v","PropTypes","Meteor","fileSaver","IconButton","T","props","handleClick","fileKey","fileName","setState","downloading","call","err","data","console","log","blob","Blob","Body","type","ContentType","saveAs","state","propTypes","string","isRequired"],"mappings":"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","file":"imports/core/components/UploaderArray/Download.jsx.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Meteor } from 'meteor/meteor';\nimport fileSaver from 'file-saver';\n\nimport IconButton from 'core/components/IconButton';\nimport { T } from 'core/components/Translation';\n\nexport default class Download extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { downloading: false };\n  }\n\n  handleClick = () => {\n    const { fileKey, fileName } = this.props;\n    this.setState({ downloading: true }, () => {\n      Meteor.call('downloadFile', fileKey, (err, data) => {\n        this.setState({ downloading: false });\n\n        if (err) {\n          console.log(err);\n        } else {\n          const blob = new Blob([data.Body], { type: data.ContentType });\n          fileSaver.saveAs(blob, fileName);\n        }\n      });\n    });\n  };\n\n  render() {\n    const { fileKey, fileName } = this.props;\n    const { downloading } = this.state;\n\n    return (\n      <IconButton\n        touch={false}\n        type={downloading ? 'loop-spin' : 'download'}\n        tooltip={<T id=\"general.download\" />}\n        onClick={this.handleClick}\n        disabled={downloading}\n      />\n    );\n  }\n}\n\nDownload.propTypes = {\n  fileName: PropTypes.string.isRequired,\n  fileKey: PropTypes.string.isRequired,\n};\n"]},"hash":"1a3211ddf240c6fd2f86589945e31ac3b11be0d7"}
