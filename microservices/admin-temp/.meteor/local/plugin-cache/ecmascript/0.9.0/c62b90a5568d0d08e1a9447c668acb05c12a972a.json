{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"../..","imported":["SecurityService","createMutator"],"specifiers":[{"kind":"named","imported":"SecurityService","local":"SecurityService"},{"kind":"named","imported":"createMutator","local":"createMutator"}]},{"source":"../BorrowerService","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"BorrowerService"}]},{"source":"../mutationDefinitions","imported":["*"],"specifiers":[{"kind":"namespace","local":"defs"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/core/api/borrowers/server/mutations.js","filenameRelative":"imports/core/api/borrowers/server/mutations.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/api/borrowers/server/mutations.js.map","sourceFileName":"imports/core/api/borrowers/server/mutations.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"mutations"},"ignored":false,"code":"\"use strict\";\n\nvar _SecurityService = void 0,\n    _createMutator = void 0;\n\nmodule.watch(require(\"../..\"), {\n  SecurityService: function SecurityService(v) {\n    _SecurityService = v;\n  },\n  createMutator: function createMutator(v) {\n    _createMutator = v;\n  }\n}, 0);\nvar BorrowerService = void 0;\nmodule.watch(require(\"../BorrowerService\"), {\n  default: function _default(v) {\n    BorrowerService = v;\n  }\n}, 1);\nvar defs = void 0;\nmodule.watch(require(\"../mutationDefinitions\"), {\n  \"*\": function _(v) {\n    defs = v;\n  }\n}, 2);\n\n_createMutator(defs.BORROWER_INSERT, function (_ref) {\n  var object = _ref.object,\n      userId = _ref.userId;\n\n  _SecurityService.checkLoggedIn();\n\n  return BorrowerService.insert({\n    object: object,\n    userId: userId\n  });\n});\n\n_createMutator(defs.BORROWER_UPDATE, function (_ref2) {\n  var borrowerId = _ref2.borrowerId,\n      object = _ref2.object;\n\n  _SecurityService.borrowers.isAllowedToUpdate(borrowerId);\n\n  return BorrowerService.update({\n    borrowerId: borrowerId,\n    object: object\n  });\n});\n\n_createMutator(defs.BORROWER_DELETE, function (_ref3) {\n  var borrowerId = _ref3.borrowerId;\n\n  _SecurityService.borrowers.isAllowedToDelete(borrowerId);\n\n  return BorrowerService.remove({\n    borrowerId: borrowerId\n  });\n});","map":{"version":3,"sources":["imports/core/api/borrowers/server/mutations.js"],"names":["SecurityService","createMutator","module","watch","require","v","BorrowerService","default","defs","BORROWER_INSERT","object","userId","checkLoggedIn","insert","BORROWER_UPDATE","borrowerId","borrowers","isAllowedToUpdate","update","BORROWER_DELETE","isAllowedToDelete","remove"],"mappings":";;AAAA,IAAIA,yBAAJ;AAAA,IAAoBC,uBAApB;;AAAkCC,OAAOC,KAAP,CAAaC,QAAQ,OAAR,CAAb,EAA8B;AAACJ,iBAAD,2BAAiBK,CAAjB,EAAmB;AAACL,uBAAgBK,CAAhB;AAAkB,GAAtC;AAAuCJ,eAAvC,yBAAqDI,CAArD,EAAuD;AAACJ,qBAAcI,CAAd;AAAgB;AAAxE,CAA9B,EAAwG,CAAxG;AAA2G,IAAIC,wBAAJ;AAAoBJ,OAAOC,KAAP,CAAaC,QAAQ,oBAAR,CAAb,EAA2C;AAACG,SAAD,oBAASF,CAAT,EAAW;AAACC,sBAAgBD,CAAhB;AAAkB;AAA9B,CAA3C,EAA2E,CAA3E;AAA8E,IAAIG,aAAJ;AAASN,OAAOC,KAAP,CAAaC,QAAQ,wBAAR,CAAb,EAA+C;AAAC,KAAD,aAAKC,CAAL,EAAO;AAACG,WAAKH,CAAL;AAAO;AAAf,CAA/C,EAAgE,CAAhE;;AAIxPJ,eAAcO,KAAKC,eAAnB,EAAoC,gBAAwB;AAAA,MAArBC,MAAqB,QAArBA,MAAqB;AAAA,MAAbC,MAAa,QAAbA,MAAa;;AAC1DX,mBAAgBY,aAAhB;;AACA,SAAON,gBAAgBO,MAAhB,CAAuB;AAAEH,kBAAF;AAAUC;AAAV,GAAvB,CAAP;AACD,CAHD;;AAKAV,eAAcO,KAAKM,eAAnB,EAAoC,iBAA4B;AAAA,MAAzBC,UAAyB,SAAzBA,UAAyB;AAAA,MAAbL,MAAa,SAAbA,MAAa;;AAC9DV,mBAAgBgB,SAAhB,CAA0BC,iBAA1B,CAA4CF,UAA5C;;AACA,SAAOT,gBAAgBY,MAAhB,CAAuB;AAAEH,0BAAF;AAAcL;AAAd,GAAvB,CAAP;AACD,CAHD;;AAKAT,eAAcO,KAAKW,eAAnB,EAAoC,iBAAoB;AAAA,MAAjBJ,UAAiB,SAAjBA,UAAiB;;AACtDf,mBAAgBgB,SAAhB,CAA0BI,iBAA1B,CAA4CL,UAA5C;;AACA,SAAOT,gBAAgBe,MAAhB,CAAuB;AAAEN;AAAF,GAAvB,CAAP;AACD,CAHD","file":"imports/core/api/borrowers/server/mutations.js.map","sourcesContent":["import { SecurityService, createMutator } from '../..';\nimport BorrowerService from '../BorrowerService';\nimport * as defs from '../mutationDefinitions';\n\ncreateMutator(defs.BORROWER_INSERT, ({ object, userId }) => {\n  SecurityService.checkLoggedIn();\n  return BorrowerService.insert({ object, userId });\n});\n\ncreateMutator(defs.BORROWER_UPDATE, ({ borrowerId, object }) => {\n  SecurityService.borrowers.isAllowedToUpdate(borrowerId);\n  return BorrowerService.update({ borrowerId, object });\n});\n\ncreateMutator(defs.BORROWER_DELETE, ({ borrowerId }) => {\n  SecurityService.borrowers.isAllowedToDelete(borrowerId);\n  return BorrowerService.remove({ borrowerId });\n});\n"]},"hash":"c62b90a5568d0d08e1a9447c668acb05c12a972a"}
