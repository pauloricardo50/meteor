{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","createClass","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"react-highcharts","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"ReactHighcharts"}]},{"source":"react-intl","imported":["injectIntl"],"specifiers":[{"kind":"named","imported":"injectIntl","local":"injectIntl"}]},{"source":"../../utils/finance-math","imported":["getAmortization","getInterests"],"specifiers":[{"kind":"named","imported":"getAmortization","local":"getAmortization"},{"kind":"named","imported":"getInterests","local":"getInterests"}]},{"source":"../../utils/loanFunctions","imported":["getLoanValue","getMaintenance","getPropAndWork"],"specifiers":[{"kind":"named","imported":"getLoanValue","local":"getLoanValue"},{"kind":"named","imported":"getMaintenance","local":"getMaintenance"},{"kind":"named","imported":"getPropAndWork","local":"getPropAndWork"}]},{"source":"../../config/colors","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"colors"}]},{"source":"../../containers/withLoan","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"withLoan"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/core/components/charts/AmortizationChart.jsx","filenameRelative":"imports/core/components/charts/AmortizationChart.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/components/charts/AmortizationChart.jsx.map","sourceFileName":"imports/core/components/charts/AmortizationChart.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"AmortizationChart"},"ignored":false,"code":"\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function () {\n    function _default(v) {\n      PropTypes = v;\n    }\n\n    return _default;\n  }()\n}, 0);\n\nvar React = void 0,\n    _Component = void 0;\n\nmodule.watch(require(\"react\"), {\n  \"default\": function () {\n    function _default(v) {\n      React = v;\n    }\n\n    return _default;\n  }(),\n  Component: function () {\n    function Component(v) {\n      _Component = v;\n    }\n\n    return Component;\n  }()\n}, 1);\nvar ReactHighcharts = void 0;\nmodule.watch(require(\"react-highcharts\"), {\n  \"default\": function () {\n    function _default(v) {\n      ReactHighcharts = v;\n    }\n\n    return _default;\n  }()\n}, 2);\n\nvar _injectIntl = void 0;\n\nmodule.watch(require(\"react-intl\"), {\n  injectIntl: function () {\n    function injectIntl(v) {\n      _injectIntl = v;\n    }\n\n    return injectIntl;\n  }()\n}, 3);\n\nvar _getAmortization = void 0,\n    _getInterests = void 0;\n\nmodule.watch(require(\"../../utils/finance-math\"), {\n  getAmortization: function () {\n    function getAmortization(v) {\n      _getAmortization = v;\n    }\n\n    return getAmortization;\n  }(),\n  getInterests: function () {\n    function getInterests(v) {\n      _getInterests = v;\n    }\n\n    return getInterests;\n  }()\n}, 4);\n\nvar _getLoanValue = void 0,\n    _getMaintenance = void 0,\n    _getPropAndWork = void 0;\n\nmodule.watch(require(\"../../utils/loanFunctions\"), {\n  getLoanValue: function () {\n    function getLoanValue(v) {\n      _getLoanValue = v;\n    }\n\n    return getLoanValue;\n  }(),\n  getMaintenance: function () {\n    function getMaintenance(v) {\n      _getMaintenance = v;\n    }\n\n    return getMaintenance;\n  }(),\n  getPropAndWork: function () {\n    function getPropAndWork(v) {\n      _getPropAndWork = v;\n    }\n\n    return getPropAndWork;\n  }()\n}, 5);\nvar colors = void 0;\nmodule.watch(require(\"../../config/colors\"), {\n  \"default\": function () {\n    function _default(v) {\n      colors = v;\n    }\n\n    return _default;\n  }()\n}, 6);\nvar withLoan = void 0;\nmodule.watch(require(\"../../containers/withLoan\"), {\n  \"default\": function () {\n    function _default(v) {\n      withLoan = v;\n    }\n\n    return _default;\n  }()\n}, 7);\nvar chartColors = {\n  debt: colors.charts[0],\n  fortune: colors.charts[2],\n  payment: colors.charts[1],\n  amortization: colors.charts[4]\n};\n\nvar getData = function () {\n  function getData(_ref) {\n    var loan = _ref.loan,\n        borrowers = _ref.borrowers,\n        totalYears = _ref.totalYears,\n        interestRates = _ref.interestRates,\n        property = _ref.property;\n\n    var _getAmortization2 = _getAmortization({\n      loan: loan,\n      borrowers: borrowers,\n      property: property\n    }),\n        amortization = _getAmortization2.amortization,\n        years = _getAmortization2.years;\n\n    var maintenance = _getMaintenance({\n      loan: loan,\n      property: property\n    });\n\n    var loanValue = _getLoanValue({\n      loan: loan,\n      property: property\n    });\n\n    var propAndWork = _getPropAndWork({\n      loan: loan,\n      property: property\n    });\n\n    var debt = [];\n    var fortune = [];\n    var payment = [];\n    var amortizationChart = [];\n\n    for (var i = 0; i <= totalYears; i += 1) {\n      var value = void 0;\n      var amort = void 0;\n\n      if (i <= years) {\n        value = loanValue - i * (amortization * 12);\n        amort = amortization;\n      } else if (i > 0) {\n        // make sure we're not trying to access debt[-1]\n        value = debt[i - 1];\n        amort = 0;\n      } else {\n        value = loanValue;\n        amort = 0;\n      }\n\n      debt[i] = Math.round(value);\n      fortune[i] = Math.round(propAndWork - value);\n      payment[i] = Math.round(amort + maintenance + _getInterests({\n        loan: loan,\n        property: property\n      }, interestRates[i], value));\n      amortizationChart[i] = Math.round(amort);\n    }\n\n    return {\n      debt: debt,\n      fortune: fortune,\n      payment: payment,\n      amortization: amortizationChart\n    };\n  }\n\n  return getData;\n}();\n\nvar AmortizationChart = function (_Component2) {\n  (0, _inherits3.default)(AmortizationChart, _Component2);\n\n  function AmortizationChart() {\n    var _ref2;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, AmortizationChart);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref2 = AmortizationChart.__proto__ || Object.getPrototypeOf(AmortizationChart)).call.apply(_ref2, [this].concat(args))), _this), _this.getConfig = function () {\n      var f = _this.props.intl.formatMessage;\n\n      var _getData = getData(_this.props),\n          debt = _getData.debt,\n          fortune = _getData.fortune,\n          payment = _getData.payment,\n          amortization = _getData.amortization;\n\n      return {\n        chart: {\n          height: 600\n        },\n        title: {\n          text: f({\n            id: 'AmortizationChart.title'\n          })\n        },\n        plotOptions: {\n          area: {\n            stacking: 'normal'\n          },\n          series: {\n            pointStart: new Date().getFullYear()\n          }\n        },\n        yAxis: [{\n          // Primary axis\n          title: {\n            text: f({\n              id: 'AmortizationChart.yAxis1'\n            })\n          }\n        }, {\n          // Secondary axis\n          title: {\n            text: f({\n              id: 'AmortizationChart.yAxis2'\n            }),\n            style: {\n              color: chartColors.payment\n            }\n          },\n          opposite: true,\n          max: Math.max.apply(Math, _toConsumableArray(payment)) * 1.5,\n          min: 0\n        }],\n        tooltip: {\n          shared: true\n        },\n        series: [{\n          name: f({\n            id: 'AmortizationChart.fortuneSeries'\n          }),\n          type: 'area',\n          data: fortune,\n          yAxis: 0,\n          color: chartColors.fortune\n        }, {\n          name: f({\n            id: 'AmortizationChart.debtSeries'\n          }),\n          type: 'area',\n          data: debt,\n          yAxis: 0,\n          color: chartColors.debt\n        }, {\n          name: f({\n            id: 'AmortizationChart.paymentSeries'\n          }),\n          type: 'line',\n          data: payment,\n          yAxis: 1,\n          color: chartColors.payment\n        }, {\n          name: f({\n            id: 'AmortizationChart.amortizationSeries'\n          }),\n          type: 'line',\n          data: amortization,\n          yAxis: 1,\n          color: chartColors.amortization\n        }],\n        responsive: {\n          rules: [{\n            condition: {\n              maxWidth: 768\n            },\n            chartOptions: {\n              yAxis: [{\n                labels: {\n                  enabled: false\n                },\n                title: {\n                  text: null\n                }\n              }, {\n                labels: {\n                  enabled: false\n                },\n                title: {\n                  text: null\n                }\n              }]\n            }\n          }, {\n            condition: {\n              minWidth: 769\n            },\n            chartOptions: {\n              yAxis: [{\n                labels: {\n                  enabled: true\n                },\n                title: {\n                  text: f({\n                    id: 'AmortizationChart.yAxis1'\n                  })\n                }\n              }, {\n                labels: {\n                  enabled: true\n                },\n                title: {\n                  text: f({\n                    id: 'AmortizationChart.yAxis2'\n                  })\n                }\n              }]\n            }\n          }]\n        },\n        credits: {\n          enabled: false\n        }\n      };\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n\n  (0, _createClass3.default)(AmortizationChart, [{\n    key: \"render\",\n    value: function () {\n      function render() {\n        var _this2 = this;\n\n        return React.createElement(\n          \"div\",\n          {\n            id: \"amortizationChart\"\n          },\n          React.createElement(ReactHighcharts, {\n            config: this.getConfig(),\n            ref: function () {\n              function ref(c) {\n                _this2.chart = c;\n              }\n\n              return ref;\n            }()\n          })\n        );\n      }\n\n      return render;\n    }()\n  }]);\n  return AmortizationChart;\n}(_Component);\n\nAmortizationChart.propTypes = {\n  loan: PropTypes.objectOf(PropTypes.any).isRequired,\n  borrowers: PropTypes.arrayOf(PropTypes.object).isRequired,\n  property: PropTypes.objectOf(PropTypes.any).isRequired,\n  totalYears: PropTypes.number\n};\nAmortizationChart.defaultProps = {\n  totalYears: 20\n};\nmodule.exportDefault(_injectIntl(withLoan(AmortizationChart)));","map":{"version":3,"sources":["imports/core/components/charts/AmortizationChart.jsx"],"names":["PropTypes","module","watch","require","v","React","Component","ReactHighcharts","injectIntl","getAmortization","getInterests","getLoanValue","getMaintenance","getPropAndWork","colors","withLoan","chartColors","debt","charts","fortune","payment","amortization","getData","loan","borrowers","totalYears","interestRates","property","years","maintenance","loanValue","propAndWork","amortizationChart","i","value","amort","Math","round","AmortizationChart","getConfig","f","props","intl","formatMessage","chart","height","title","text","id","plotOptions","area","stacking","series","pointStart","Date","getFullYear","yAxis","style","color","opposite","max","min","tooltip","shared","name","type","data","responsive","rules","condition","maxWidth","chartOptions","labels","enabled","minWidth","credits","c","propTypes","objectOf","any","isRequired","arrayOf","object","number","defaultProps","exportDefault"],"mappings":"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","file":"imports/core/components/charts/AmortizationChart.jsx.map","sourcesContent":["import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport ReactHighcharts from 'react-highcharts';\n// import ReactHighstock from 'react-highcharts/ReactHighstock';\n// const ReactHighcharts = require('react-highcharts').withHighcharts(ReactHighstock);\n\nimport { injectIntl } from 'react-intl';\n\nimport { getAmortization, getInterests } from 'core/utils/finance-math';\nimport {\n  getLoanValue,\n  getMaintenance,\n  getPropAndWork,\n} from 'core/utils/loanFunctions';\nimport colors from 'core/config/colors';\nimport withLoan from 'core/containers/withLoan';\n\nconst chartColors = {\n  debt: colors.charts[0],\n  fortune: colors.charts[2],\n  payment: colors.charts[1],\n  amortization: colors.charts[4],\n};\n\nconst getData = ({ loan, borrowers, totalYears, interestRates, property }) => {\n  const { amortization, years } = getAmortization({\n    loan,\n    borrowers,\n    property,\n  });\n  const maintenance = getMaintenance({ loan, property });\n  const loanValue = getLoanValue({ loan, property });\n  const propAndWork = getPropAndWork({ loan, property });\n\n  const debt = [];\n  const fortune = [];\n  const payment = [];\n  const amortizationChart = [];\n\n  for (let i = 0; i <= totalYears; i += 1) {\n    let value;\n    let amort;\n    if (i <= years) {\n      value = loanValue - i * (amortization * 12);\n      amort = amortization;\n    } else if (i > 0) {\n      // make sure we're not trying to access debt[-1]\n      value = debt[i - 1];\n      amort = 0;\n    } else {\n      value = loanValue;\n      amort = 0;\n    }\n\n    debt[i] = Math.round(value);\n    fortune[i] = Math.round(propAndWork - value);\n    payment[i] = Math.round(amort +\n        maintenance +\n        getInterests({ loan, property }, interestRates[i], value));\n    amortizationChart[i] = Math.round(amort);\n  }\n\n  return {\n    debt,\n    fortune,\n    payment,\n    amortization: amortizationChart,\n  };\n};\n\nclass AmortizationChart extends Component {\n  getConfig = () => {\n    const f = this.props.intl.formatMessage;\n    const { debt, fortune, payment, amortization } = getData(this.props);\n\n    return {\n      chart: {\n        height: 600,\n      },\n      title: { text: f({ id: 'AmortizationChart.title' }) },\n      plotOptions: {\n        area: { stacking: 'normal' },\n        series: { pointStart: new Date().getFullYear() },\n      },\n      yAxis: [\n        {\n          // Primary axis\n          title: { text: f({ id: 'AmortizationChart.yAxis1' }) },\n        },\n        {\n          // Secondary axis\n          title: {\n            text: f({ id: 'AmortizationChart.yAxis2' }),\n            style: { color: chartColors.payment },\n          },\n          opposite: true,\n          max: Math.max(...payment) * 1.5,\n          min: 0,\n        },\n      ],\n      tooltip: { shared: true },\n      series: [\n        {\n          name: f({ id: 'AmortizationChart.fortuneSeries' }),\n          type: 'area',\n          data: fortune,\n          yAxis: 0,\n          color: chartColors.fortune,\n        },\n        {\n          name: f({ id: 'AmortizationChart.debtSeries' }),\n          type: 'area',\n          data: debt,\n          yAxis: 0,\n          color: chartColors.debt,\n        },\n        {\n          name: f({ id: 'AmortizationChart.paymentSeries' }),\n          type: 'line',\n          data: payment,\n          yAxis: 1,\n          color: chartColors.payment,\n        },\n        {\n          name: f({ id: 'AmortizationChart.amortizationSeries' }),\n          type: 'line',\n          data: amortization,\n          yAxis: 1,\n          color: chartColors.amortization,\n        },\n        // {\n        //   name: f({ id: 'AmortizationChart.refinancingFlag' }),\n        //   type: 'flags',\n        //   y: 0,\n        //   data: [{ x: new Date().getFullYear() + 10 }],\n        //   shape: 'squarepin',\n        // },\n      ],\n      responsive: {\n        rules: [\n          {\n            condition: { maxWidth: 768 },\n            chartOptions: {\n              yAxis: [\n                { labels: { enabled: false }, title: { text: null } },\n                { labels: { enabled: false }, title: { text: null } },\n              ],\n            },\n          },\n          {\n            condition: { minWidth: 769 },\n            chartOptions: {\n              yAxis: [\n                {\n                  labels: { enabled: true },\n                  title: { text: f({ id: 'AmortizationChart.yAxis1' }) },\n                },\n                {\n                  labels: { enabled: true },\n                  title: { text: f({ id: 'AmortizationChart.yAxis2' }) },\n                },\n              ],\n            },\n          },\n        ],\n      },\n      credits: { enabled: false },\n    };\n  };\n\n  render() {\n    return (\n      <div id=\"amortizationChart\">\n        <ReactHighcharts\n          config={this.getConfig()}\n          ref={(c) => {\n            this.chart = c;\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nAmortizationChart.propTypes = {\n  loan: PropTypes.objectOf(PropTypes.any).isRequired,\n  borrowers: PropTypes.arrayOf(PropTypes.object).isRequired,\n  property: PropTypes.objectOf(PropTypes.any).isRequired,\n  totalYears: PropTypes.number,\n};\n\nAmortizationChart.defaultProps = {\n  totalYears: 20,\n};\n\nexport default injectIntl(withLoan(AmortizationChart));\n"]},"hash":"26833f9016bf7d32573efa414356dc537d1a7fd4"}
