{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"../../users/userConstants","imported":["USER_EVENTS"],"specifiers":[{"kind":"named","imported":"USER_EVENTS","local":"USER_EVENTS"}]},{"source":"../../events","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"EventService"}]},{"source":"../../mutations","imported":["mutations"],"specifiers":[{"kind":"named","imported":"mutations","local":"mutations"}]},{"source":"../TaskService","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"TaskService"}]},{"source":"../tasksConstants","imported":["TASK_TYPE"],"specifiers":[{"kind":"named","imported":"TASK_TYPE","local":"TASK_TYPE"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/core/api/tasks/server/taskListeners.js","filenameRelative":"imports/core/api/tasks/server/taskListeners.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/api/tasks/server/taskListeners.js.map","sourceFileName":"imports/core/api/tasks/server/taskListeners.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"taskListeners"},"ignored":false,"code":"\"use strict\";\n\nvar _USER_EVENTS = void 0;\n\nmodule.watch(require(\"../../users/userConstants\"), {\n  USER_EVENTS: function USER_EVENTS(v) {\n    _USER_EVENTS = v;\n  }\n}, 0);\nvar EventService = void 0;\nmodule.watch(require(\"../../events\"), {\n  default: function _default(v) {\n    EventService = v;\n  }\n}, 1);\n\nvar _mutations = void 0;\n\nmodule.watch(require(\"../../mutations\"), {\n  mutations: function mutations(v) {\n    _mutations = v;\n  }\n}, 2);\nvar TaskService = void 0;\nmodule.watch(require(\"../TaskService\"), {\n  default: function _default(v) {\n    TaskService = v;\n  }\n}, 3);\n\nvar _TASK_TYPE = void 0;\n\nmodule.watch(require(\"../tasksConstants\"), {\n  TASK_TYPE: function TASK_TYPE(v) {\n    _TASK_TYPE = v;\n  }\n}, 4);\nEventService.addMutationListener(_mutations.LOAN_DELETE, function (params) {// TODO: remove parent loan for these tasks\n});\nEventService.addMutationListener(_mutations.REQUEST_LOAN_VERIFICATION, function (params) {// TODO: ADMIN_ACTION_TYPE.VERIFY\n});\nEventService.addMutationListener(_mutations.START_AUCTION, function (params) {// TODO: ADMIN_ACTION_TYPE.AUCTION\n});\nEventService.addMutationListener(_mutations.END_AUCTION, function (params) {// TODO: complete auction task\n});\nEventService.addMutationListener(_mutations.CANCEL_AUCTION, function (params) {// TODO: remove auction task\n});\nEventService.addMutationListener(_mutations.ASSIGN_ADMIN_TO_USER, function (params) {\n  // TODO: reassign all tasks created by user\n  var adminId = params.adminId,\n      userId = params.userId;\n  TaskService.assignAllTasksToAdmin({\n    userId: userId,\n    newAssignee: adminId\n  });\n});\nEventService.addListener(_USER_EVENTS.USER_CREATED, function (params) {\n  var userId = params.userId;\n  var type = _TASK_TYPE.ADD_ASSIGNED_TO;\n  TaskService.insertUserTask({\n    type: type,\n    userId: userId\n  });\n});","map":{"version":3,"sources":["imports/core/api/tasks/server/taskListeners.js"],"names":["USER_EVENTS","module","watch","require","v","EventService","default","mutations","TaskService","TASK_TYPE","addMutationListener","LOAN_DELETE","params","REQUEST_LOAN_VERIFICATION","START_AUCTION","END_AUCTION","CANCEL_AUCTION","ASSIGN_ADMIN_TO_USER","adminId","userId","assignAllTasksToAdmin","newAssignee","addListener","USER_CREATED","type","ADD_ASSIGNED_TO","insertUserTask"],"mappings":";;AAAA,IAAIA,qBAAJ;;AAAgBC,OAAOC,KAAP,CAAaC,QAAQ,2BAAR,CAAb,EAAkD;AAACH,aAAD,uBAAaI,CAAb,EAAe;AAACJ,mBAAYI,CAAZ;AAAc;AAA9B,CAAlD,EAAkF,CAAlF;AAAqF,IAAIC,qBAAJ;AAAiBJ,OAAOC,KAAP,CAAaC,QAAQ,cAAR,CAAb,EAAqC;AAACG,SAAD,oBAASF,CAAT,EAAW;AAACC,mBAAaD,CAAb;AAAe;AAA3B,CAArC,EAAkE,CAAlE;;AAAqE,IAAIG,mBAAJ;;AAAcN,OAAOC,KAAP,CAAaC,QAAQ,iBAAR,CAAb,EAAwC;AAACI,WAAD,qBAAWH,CAAX,EAAa;AAACG,iBAAUH,CAAV;AAAY;AAA1B,CAAxC,EAAoE,CAApE;AAAuE,IAAII,oBAAJ;AAAgBP,OAAOC,KAAP,CAAaC,QAAQ,gBAAR,CAAb,EAAuC;AAACG,SAAD,oBAASF,CAAT,EAAW;AAACI,kBAAYJ,CAAZ;AAAc;AAA1B,CAAvC,EAAmE,CAAnE;;AAAsE,IAAIK,mBAAJ;;AAAcR,OAAOC,KAAP,CAAaC,QAAQ,mBAAR,CAAb,EAA0C;AAACM,WAAD,qBAAWL,CAAX,EAAa;AAACK,iBAAUL,CAAV;AAAY;AAA1B,CAA1C,EAAsE,CAAtE;AAMpXC,aAAaK,mBAAb,CAAiCH,WAAUI,WAA3C,EAAwD,UAACC,MAAD,EAAY,CAClE;AACD,CAFD;AAIAP,aAAaK,mBAAb,CACEH,WAAUM,yBADZ,EAEE,UAACD,MAAD,EAAY,CACV;AACD,CAJH;AAOAP,aAAaK,mBAAb,CAAiCH,WAAUO,aAA3C,EAA0D,UAACF,MAAD,EAAY,CACpE;AACD,CAFD;AAIAP,aAAaK,mBAAb,CAAiCH,WAAUQ,WAA3C,EAAwD,UAACH,MAAD,EAAY,CAClE;AACD,CAFD;AAIAP,aAAaK,mBAAb,CAAiCH,WAAUS,cAA3C,EAA2D,UAACJ,MAAD,EAAY,CACrE;AACD,CAFD;AAIAP,aAAaK,mBAAb,CAAiCH,WAAUU,oBAA3C,EAAiE,UAACL,MAAD,EAAY;AAC3E;AAD2E,MAEnEM,OAFmE,GAE/CN,MAF+C,CAEnEM,OAFmE;AAAA,MAE1DC,MAF0D,GAE/CP,MAF+C,CAE1DO,MAF0D;AAG3EX,cAAYY,qBAAZ,CAAkC;AAAED,kBAAF;AAAUE,iBAAaH;AAAvB,GAAlC;AACD,CAJD;AAMAb,aAAaiB,WAAb,CAAyBtB,aAAYuB,YAArC,EAAmD,UAACX,MAAD,EAAY;AAAA,MACrDO,MADqD,GAC1CP,MAD0C,CACrDO,MADqD;AAE7D,MAAMK,OAAOf,WAAUgB,eAAvB;AACAjB,cAAYkB,cAAZ,CAA2B;AAAEF,cAAF;AAAQL;AAAR,GAA3B;AACD,CAJD","file":"imports/core/api/tasks/server/taskListeners.js.map","sourcesContent":["import { USER_EVENTS } from 'core/api/users/userConstants';\nimport EventService from '../../events';\nimport { mutations } from '../../mutations';\nimport TaskService from '../TaskService';\nimport { TASK_TYPE } from '../tasksConstants';\n\nEventService.addMutationListener(mutations.LOAN_DELETE, (params) => {\n  // TODO: remove parent loan for these tasks\n});\n\nEventService.addMutationListener(\n  mutations.REQUEST_LOAN_VERIFICATION,\n  (params) => {\n    // TODO: ADMIN_ACTION_TYPE.VERIFY\n  },\n);\n\nEventService.addMutationListener(mutations.START_AUCTION, (params) => {\n  // TODO: ADMIN_ACTION_TYPE.AUCTION\n});\n\nEventService.addMutationListener(mutations.END_AUCTION, (params) => {\n  // TODO: complete auction task\n});\n\nEventService.addMutationListener(mutations.CANCEL_AUCTION, (params) => {\n  // TODO: remove auction task\n});\n\nEventService.addMutationListener(mutations.ASSIGN_ADMIN_TO_USER, (params) => {\n  // TODO: reassign all tasks created by user\n  const { adminId, userId } = params;\n  TaskService.assignAllTasksToAdmin({ userId, newAssignee: adminId });\n});\n\nEventService.addListener(USER_EVENTS.USER_CREATED, (params) => {\n  const { userId } = params;\n  const type = TASK_TYPE.ADD_ASSIGNED_TO;\n  TaskService.insertUserTask({ type, userId });\n});\n"]},"hash":"f6a7c598fe0dfceadce8693c537c1f10016acd41"}
