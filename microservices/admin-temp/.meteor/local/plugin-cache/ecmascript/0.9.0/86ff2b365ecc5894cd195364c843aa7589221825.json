{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":["restrictLinks","parentNode","args","getLinks","node","args"],"specifiers":[{"kind":"local","local":"restrictLinks","exported":"default"},{"kind":"local","local":"parentNode","exported":"default"},{"kind":"local","local":"args","exported":"default"},{"kind":"local","local":"getLinks","exported":"getLinks"},{"kind":"local","local":"node","exported":"node"},{"kind":"local","local":"args","exported":"args"}]}}},"options":{"filename":"packages/cultofcoders:grapher/lib/exposure/lib/restrictLinks.js","filenameRelative":"packages/cultofcoders:grapher/lib/exposure/lib/restrictLinks.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/cultofcoders:grapher/lib/exposure/lib/restrictLinks.js.map","sourceFileName":"packages/cultofcoders:grapher/lib/exposure/lib/restrictLinks.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"restrictLinks"},"ignored":false,"code":"module.export({\n    default: () => restrictLinks,\n    getLinks: () => getLinks\n});\n\nfunction restrictLinks(parentNode, ...args) {\n    const restrictedLinks = getLinks(parentNode, ...args);\n\n    if (!restrictedLinks || restrictedLinks.length) {\n        return;\n    }\n\n    _.each(parentNode.collectionNodes, collectionNode => {\n        if (_.contains(restrictedLinks, collectionNode.linkName)) {\n            parentNode.remove(collectionNode);\n        }\n    });\n}\n\nfunction getLinks(node, ...args) {\n    if (node.collection && node.collection.__exposure) {\n        const exposure = node.collection.__exposure;\n\n        if (exposure.config.restrictLinks) {\n            const configRestrictLinks = exposure.config.restrictLinks;\n\n            if (_.isArray(configRestrictLinks)) {\n                return configRestrictLinks;\n            }\n\n            return configRestrictLinks(...args);\n        }\n    }\n}","map":{"version":3,"sources":["packages/cultofcoders:grapher/lib/exposure/lib/restrictLinks.js"],"names":["module","export","default","restrictLinks","getLinks","parentNode","args","restrictedLinks","length","_","each","collectionNodes","collectionNode","contains","linkName","remove","node","collection","__exposure","exposure","config","configRestrictLinks","isArray"],"mappings":"AAAAA,OAAOC,MAAP,CAAc;AAACC,aAAQ,MAAIC,aAAb;AAA2BC,cAAS,MAAIA;AAAxC,CAAd;;AAAe,SAASD,aAAT,CAAuBE,UAAvB,EAAmC,GAAGC,IAAtC,EAA4C;AACvD,UAAMC,kBAAkBH,SAASC,UAAT,EAAqB,GAAGC,IAAxB,CAAxB;;AAEA,QAAI,CAACC,eAAD,IAAoBA,gBAAgBC,MAAxC,EAAgD;AAC5C;AACH;;AAEDC,MAAEC,IAAF,CAAOL,WAAWM,eAAlB,EAAmCC,kBAAkB;AACjD,YAAIH,EAAEI,QAAF,CAAWN,eAAX,EAA4BK,eAAeE,QAA3C,CAAJ,EAA0D;AACtDT,uBAAWU,MAAX,CAAkBH,cAAlB;AACH;AACJ,KAJD;AAKH;;AAEM,SAASR,QAAT,CAAkBY,IAAlB,EAAwB,GAAGV,IAA3B,EAAiC;AACpC,QAAIU,KAAKC,UAAL,IAAmBD,KAAKC,UAAL,CAAgBC,UAAvC,EAAmD;AAC/C,cAAMC,WAAWH,KAAKC,UAAL,CAAgBC,UAAjC;;AAEA,YAAIC,SAASC,MAAT,CAAgBjB,aAApB,EAAmC;AAC/B,kBAAMkB,sBAAsBF,SAASC,MAAT,CAAgBjB,aAA5C;;AAEA,gBAAIM,EAAEa,OAAF,CAAUD,mBAAV,CAAJ,EAAoC;AAChC,uBAAOA,mBAAP;AACH;;AAED,mBAAOA,oBAAoB,GAAGf,IAAvB,CAAP;AACH;AACJ;AACJ","file":"packages/cultofcoders:grapher/lib/exposure/lib/restrictLinks.js.map","sourcesContent":["export default function restrictLinks(parentNode, ...args) {\n    const restrictedLinks = getLinks(parentNode, ...args);\n\n    if (!restrictedLinks || restrictedLinks.length) {\n        return;\n    }\n\n    _.each(parentNode.collectionNodes, collectionNode => {\n        if (_.contains(restrictedLinks, collectionNode.linkName)) {\n            parentNode.remove(collectionNode);\n        }\n    });\n}\n\nexport function getLinks(node, ...args) {\n    if (node.collection && node.collection.__exposure) {\n        const exposure = node.collection.__exposure;\n\n        if (exposure.config.restrictLinks) {\n            const configRestrictLinks = exposure.config.restrictLinks;\n\n            if (_.isArray(configRestrictLinks)) {\n                return configRestrictLinks;\n            }\n\n            return configRestrictLinks(...args);\n        }\n    }\n}"]},"hash":"86ff2b365ecc5894cd195364c843aa7589221825"}
