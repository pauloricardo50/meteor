{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","createClass","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"../../core/components/DateInput","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"DateInput"}]},{"source":"../../core/components/Select","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Select"}]},{"source":"../../core/api/cleanMethods","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"cleanMethod"}]},{"source":"../../core/api/constants","imported":["PAYMENT_SCHEDULES"],"specifiers":[{"kind":"named","imported":"PAYMENT_SCHEDULES","local":"PAYMENT_SCHEDULES"}]}],"exports":{"exported":["ClosingForm"],"specifiers":[{"kind":"local","local":"ClosingForm","exported":"default"}]}}},"options":{"filename":"imports/ui/components/ClosingForm.jsx","filenameRelative":"imports/ui/components/ClosingForm.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/ui/components/ClosingForm.jsx.map","sourceFileName":"imports/ui/components/ClosingForm.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"ClosingForm"},"ignored":false,"code":"\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nmodule.export({\n  \"default\": function () {\n    function _default() {\n      return ClosingForm;\n    }\n\n    return _default;\n  }()\n});\n\nvar React = void 0,\n    _Component = void 0;\n\nmodule.watch(require(\"react\"), {\n  \"default\": function () {\n    function _default(v) {\n      React = v;\n    }\n\n    return _default;\n  }(),\n  Component: function () {\n    function Component(v) {\n      _Component = v;\n    }\n\n    return Component;\n  }()\n}, 0);\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function () {\n    function _default(v) {\n      PropTypes = v;\n    }\n\n    return _default;\n  }()\n}, 1);\nvar DateInput = void 0;\nmodule.watch(require(\"../../core/components/DateInput\"), {\n  \"default\": function () {\n    function _default(v) {\n      DateInput = v;\n    }\n\n    return _default;\n  }()\n}, 2);\nvar Select = void 0;\nmodule.watch(require(\"../../core/components/Select\"), {\n  \"default\": function () {\n    function _default(v) {\n      Select = v;\n    }\n\n    return _default;\n  }()\n}, 3);\nvar cleanMethod = void 0;\nmodule.watch(require(\"../../core/api/cleanMethods\"), {\n  \"default\": function () {\n    function _default(v) {\n      cleanMethod = v;\n    }\n\n    return _default;\n  }()\n}, 4);\n\nvar _PAYMENT_SCHEDULES = void 0;\n\nmodule.watch(require(\"../../core/api/constants\"), {\n  PAYMENT_SCHEDULES: function () {\n    function PAYMENT_SCHEDULES(v) {\n      _PAYMENT_SCHEDULES = v;\n    }\n\n    return PAYMENT_SCHEDULES;\n  }()\n}, 5);\nvar schedules = Object.values(_PAYMENT_SCHEDULES);\n\nvar ClosingForm = function (_Component2) {\n  (0, _inherits3.default)(ClosingForm, _Component2);\n\n  function ClosingForm(props) {\n    (0, _classCallCheck3.default)(this, ClosingForm);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (ClosingForm.__proto__ || Object.getPrototypeOf(ClosingForm)).call(this, props));\n\n    _this.handleDateChange = function (event, date) {\n      return _this.setState({\n        date: date\n      }, _this.validate);\n    };\n\n    _this.handleSelectChange = function (event, index, schedule) {\n      return _this.setState({\n        schedule: schedule\n      }, _this.validate);\n    };\n\n    _this.handleSubmit = function () {\n      if (!(_this.state.date && _this.state.schedule) || _this.props.isCancel) {\n        return;\n      }\n\n      var object = {\n        'logic.firstPaymentDate': _this.state.date,\n        'logic.paymentSchedule': _this.state.schedule\n      };\n      cleanMethod('confirmClosing', {\n        id: _this.props.loan._id,\n        object: object\n      });\n    };\n\n    _this.validate = function () {\n      if (_this.state.date && _this.state.schedule) {\n        _this.props.enableClose();\n      } else {\n        _this.props.disableClose();\n      }\n    };\n\n    _this.state = {\n      date: null,\n      schedule: null\n    };\n\n    _this.props.disableClose();\n\n    return _this;\n  }\n\n  (0, _createClass3.default)(ClosingForm, [{\n    key: \"componentWillUnmount\",\n    value: function () {\n      function componentWillUnmount() {\n        this.handleSubmit();\n      }\n\n      return componentWillUnmount;\n    }()\n  }, {\n    key: \"render\",\n    value: function () {\n      function render() {\n        return React.createElement(\n          \"div\",\n          null,\n          React.createElement(DateInput, {\n            placeholder: \"Premi\\xE8re date de paiement\",\n            value: this.state.date,\n            onChange: this.handleDateChange\n          }),\n          React.createElement(Select, {\n            label: \"Fr\\xE9quence de paiement\",\n            value: this.state.schedule,\n            onChange: this.handleSelectChange,\n            options: schedules.map(function (s) {\n              return {\n                id: s,\n                label: s\n              };\n            }),\n            renderValue: function () {\n              function renderValue(val) {\n                return val;\n              }\n\n              return renderValue;\n            }()\n          })\n        );\n      }\n\n      return render;\n    }()\n  }]);\n  return ClosingForm;\n}(_Component);\n\nClosingForm.propTypes = {\n  loan: PropTypes.objectOf(PropTypes.any).isRequired,\n  enableClose: PropTypes.func,\n  disableClose: PropTypes.func,\n  isCancel: PropTypes.bool\n};\nClosingForm.defaultProps = {\n  enableClose: function () {\n    function enableClose() {}\n\n    return enableClose;\n  }(),\n  disableClose: function () {\n    function disableClose() {}\n\n    return disableClose;\n  }(),\n  isCancel: false\n};","map":{"version":3,"sources":["imports/ui/components/ClosingForm.jsx"],"names":["module","export","ClosingForm","React","Component","watch","require","v","PropTypes","DateInput","Select","cleanMethod","PAYMENT_SCHEDULES","schedules","Object","values","props","handleDateChange","event","date","setState","validate","handleSelectChange","index","schedule","handleSubmit","state","isCancel","object","id","loan","_id","enableClose","disableClose","map","s","label","val","propTypes","objectOf","any","isRequired","func","bool","defaultProps"],"mappings":"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","file":"imports/ui/components/ClosingForm.jsx.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport DateInput from 'core/components/DateInput';\nimport Select from 'core/components/Select';\nimport cleanMethod from 'core/api/cleanMethods';\nimport { PAYMENT_SCHEDULES } from 'core/api/constants';\n\nconst schedules = Object.values(PAYMENT_SCHEDULES);\n\nexport default class ClosingForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { date: null, schedule: null };\n\n    this.props.disableClose();\n  }\n\n  componentWillUnmount() {\n    this.handleSubmit();\n  }\n\n  handleDateChange = (event, date) => this.setState({ date }, this.validate);\n\n  handleSelectChange = (event, index, schedule) =>\n    this.setState({ schedule }, this.validate);\n\n  handleSubmit = () => {\n    if (!(this.state.date && this.state.schedule) || this.props.isCancel) {\n      return;\n    }\n\n    const object = {\n      'logic.firstPaymentDate': this.state.date,\n      'logic.paymentSchedule': this.state.schedule,\n    };\n    cleanMethod('confirmClosing', { id: this.props.loan._id, object });\n  };\n\n  validate = () => {\n    if (this.state.date && this.state.schedule) {\n      this.props.enableClose();\n    } else {\n      this.props.disableClose();\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        <DateInput\n          placeholder=\"Première date de paiement\"\n          value={this.state.date}\n          onChange={this.handleDateChange}\n        />\n        <Select\n          label=\"Fréquence de paiement\"\n          value={this.state.schedule}\n          onChange={this.handleSelectChange}\n          options={schedules.map(s => ({ id: s, label: s }))}\n          renderValue={val => val}\n        />\n      </div>\n    );\n  }\n}\n\nClosingForm.propTypes = {\n  loan: PropTypes.objectOf(PropTypes.any).isRequired,\n  enableClose: PropTypes.func,\n  disableClose: PropTypes.func,\n  isCancel: PropTypes.bool,\n};\n\nClosingForm.defaultProps = {\n  enableClose: () => {},\n  disableClose: () => {},\n  isCancel: false,\n};\n"]},"hash":"6b2f2404b698111e91545bb43c8ae36066075047"}
