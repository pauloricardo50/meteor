{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"../../","imported":["Tasks"],"specifiers":[{"kind":"named","imported":"Tasks","local":"Tasks"}]},{"source":"../tasksConstants","imported":["TASK_QUERIES","TASK_STATUS"],"specifiers":[{"kind":"named","imported":"TASK_QUERIES","local":"TASK_QUERIES"},{"kind":"named","imported":"TASK_STATUS","local":"TASK_STATUS"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/core/api/tasks/queries/loanTasksList.js","filenameRelative":"imports/core/api/tasks/queries/loanTasksList.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/api/tasks/queries/loanTasksList.js.map","sourceFileName":"imports/core/api/tasks/queries/loanTasksList.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"loanTasksList"},"ignored":false,"code":"\"use strict\";\n\nvar _Tasks = void 0;\n\nmodule.watch(require(\"../../\"), {\n  Tasks: function () {\n    function Tasks(v) {\n      _Tasks = v;\n    }\n\n    return Tasks;\n  }()\n}, 0);\n\nvar _TASK_QUERIES = void 0,\n    _TASK_STATUS = void 0;\n\nmodule.watch(require(\"../tasksConstants\"), {\n  TASK_QUERIES: function () {\n    function TASK_QUERIES(v) {\n      _TASK_QUERIES = v;\n    }\n\n    return TASK_QUERIES;\n  }(),\n  TASK_STATUS: function () {\n    function TASK_STATUS(v) {\n      _TASK_STATUS = v;\n    }\n\n    return TASK_STATUS;\n  }()\n}, 1);\nmodule.exportDefault(_Tasks.createQuery(_TASK_QUERIES.LOAN_TASKS_LIST, {\n  $filter: function () {\n    function $filter(_ref) {\n      var filters = _ref.filters,\n          options = _ref.options,\n          params = _ref.params;\n      console.log(params);\n      filters.status = {\n        $in: [_TASK_STATUS.ACTIVE, _TASK_STATUS.COMPLETED]\n      }; // if (params.loanId) {\n      //   filters.loanId = params.loanId;\n      // }\n    }\n\n    return $filter;\n  }(),\n  $postFilter: function () {\n    function $postFilter(results, params) {\n      console.log(results);\n      console.log(params);\n      return results.filter(function (r) {\n        if (r.loan && r.loan._id === params.loanId || r.property && r.propertyId === params.propertyId) {\n          return r;\n        }\n      });\n    }\n\n    return $postFilter;\n  }(),\n  $options: {\n    sort: {\n      createdAt: -1\n    }\n  },\n  $paginate: true,\n  status: 1,\n  type: 1,\n  createdAt: 1,\n  updatedAt: 1,\n  dueAt: 1,\n  assignedUser: {\n    emails: 1,\n    roles: 1,\n    username: 1\n  },\n  user: {\n    emails: 1,\n    username: 1\n  },\n  borrower: {\n    user: {\n      assignedTo: 1\n    }\n  },\n  loan: {\n    user: {\n      assignedTo: 1\n    }\n  },\n  property: {\n    user: {\n      assignedTo: 1\n    }\n  },\n  userId: 1\n}));","map":{"version":3,"sources":["imports/core/api/tasks/queries/loanTasksList.js"],"names":["Tasks","module","watch","require","v","TASK_QUERIES","TASK_STATUS","exportDefault","createQuery","LOAN_TASKS_LIST","$filter","filters","options","params","console","log","status","$in","ACTIVE","COMPLETED","$postFilter","results","filter","r","loan","_id","loanId","property","propertyId","$options","sort","createdAt","$paginate","type","updatedAt","dueAt","assignedUser","emails","roles","username","user","borrower","assignedTo","userId"],"mappings":";;AAAA,IAAIA,eAAJ;;AAAUC,OAAOC,KAAP,CAAaC,QAAQ,QAAR,CAAb,EAA+B;AAACH,OAAD;AAAA,mBAAOI,CAAP,EAAS;AAACJ,eAAMI,CAAN;AAAQ;;AAAlB;AAAA;AAAA,CAA/B,EAAmD,CAAnD;;AAAsD,IAAIC,sBAAJ;AAAA,IAAiBC,qBAAjB;;AAA6BL,OAAOC,KAAP,CAAaC,QAAQ,mBAAR,CAAb,EAA0C;AAACE,cAAD;AAAA,0BAAcD,CAAd,EAAgB;AAACC,sBAAaD,CAAb;AAAe;;AAAhC;AAAA;AAAiCE,aAAjC;AAAA,yBAA6CF,CAA7C,EAA+C;AAACE,qBAAYF,CAAZ;AAAc;;AAA9D;AAAA;AAAA,CAA1C,EAA0G,CAA1G;AAA7FH,OAAOM,aAAP,CAGeP,OAAMQ,WAAN,CAAkBH,cAAaI,eAA/B,EAAgD;AAC7DC,SAD6D;AAAA,2BACvB;AAAA,UAA5BC,OAA4B,QAA5BA,OAA4B;AAAA,UAAnBC,OAAmB,QAAnBA,OAAmB;AAAA,UAAVC,MAAU,QAAVA,MAAU;AACpCC,cAAQC,GAAR,CAAYF,MAAZ;AACAF,cAAQK,MAAR,GAAiB;AAAEC,aAAK,CAACX,aAAYY,MAAb,EAAqBZ,aAAYa,SAAjC;AAAP,OAAjB,CAFoC,CAIpC;AACA;AACA;AACD;;AAR4D;AAAA;AAS7DC,aAT6D;AAAA,yBASjDC,OATiD,EASxCR,MATwC,EAShC;AAC3BC,cAAQC,GAAR,CAAYM,OAAZ;AACAP,cAAQC,GAAR,CAAYF,MAAZ;AACA,aAAOQ,QAAQC,MAAR,CAAe,UAACC,CAAD,EAAO;AAC3B,YAAKA,EAAEC,IAAF,IAAUD,EAAEC,IAAF,CAAOC,GAAP,KAAeZ,OAAOa,MAAjC,IAA6CH,EAAEI,QAAF,IAAcJ,EAAEK,UAAF,KAAiBf,OAAOe,UAAvF,EAAoG;AAClG,iBAAOL,CAAP;AACD;AACF,OAJM,CAAP;AAKD;;AAjB4D;AAAA;AAkB7DM,YAAU;AACRC,UAAM;AACJC,iBAAW,CAAC;AADR;AADE,GAlBmD;AAuB7DC,aAAW,IAvBkD;AAwB7DhB,UAAQ,CAxBqD;AAyB7DiB,QAAM,CAzBuD;AA0B7DF,aAAW,CA1BkD;AA2B7DG,aAAW,CA3BkD;AA4B7DC,SAAO,CA5BsD;AA6B7DC,gBAAc;AACZC,YAAQ,CADI;AAEZC,WAAO,CAFK;AAGZC,cAAU;AAHE,GA7B+C;AAkC7DC,QAAM;AACJH,YAAQ,CADJ;AAEJE,cAAU;AAFN,GAlCuD;AAsC7DE,YAAU;AACRD,UAAM;AACJE,kBAAY;AADR;AADE,GAtCmD;AA2C7DlB,QAAM;AACJgB,UAAM;AACJE,kBAAY;AADR;AADF,GA3CuD;AAgD7Df,YAAU;AACRa,UAAM;AACJE,kBAAY;AADR;AADE,GAhDmD;AAqD7DC,UAAQ;AArDqD,CAAhD,CAHf","file":"imports/core/api/tasks/queries/loanTasksList.js.map","sourcesContent":["import { Tasks } from '../../';\nimport { TASK_QUERIES, TASK_STATUS } from '../tasksConstants';\n\nexport default Tasks.createQuery(TASK_QUERIES.LOAN_TASKS_LIST, {\n  $filter({ filters, options, params }) {\n    console.log(params);\n    filters.status = { $in: [TASK_STATUS.ACTIVE, TASK_STATUS.COMPLETED] };\n\n    // if (params.loanId) {\n    //   filters.loanId = params.loanId;\n    // }\n  },\n  $postFilter(results, params) {\n    console.log(results);\n    console.log(params);\n    return results.filter((r) => {\n      if ((r.loan && r.loan._id === params.loanId) || (r.property && r.propertyId === params.propertyId)) {\n        return r;\n      }\n    });\n  },\n  $options: {\n    sort: {\n      createdAt: -1,\n    },\n  },\n  $paginate: true,\n  status: 1,\n  type: 1,\n  createdAt: 1,\n  updatedAt: 1,\n  dueAt: 1,\n  assignedUser: {\n    emails: 1,\n    roles: 1,\n    username: 1,\n  },\n  user: {\n    emails: 1,\n    username: 1,\n  },\n  borrower: {\n    user: {\n      assignedTo: 1,\n    },\n  },\n  loan: {\n    user: {\n      assignedTo: 1,\n    },\n  },\n  property: {\n    user: {\n      assignedTo: 1,\n    },\n  },\n  userId: 1,\n});\n"]},"hash":"208600c8cabfd61cd59111b95f3c9e334cbfe745"}
