{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","createClass","classCallCheck","extends","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"../../../../../core/api/cleanMethods","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"cleanMethod"}]},{"source":"../../../../../core/api/constants","imported":["CLOSING_STEPS_TYPE"],"specifiers":[{"kind":"named","imported":"CLOSING_STEPS_TYPE","local":"CLOSING_STEPS_TYPE"}]},{"source":"./FileVerificator","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"FileVerificator"}]},{"source":"./ItemVerificator","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"ItemVerificator"}]}],"exports":{"exported":["ClosingVerification"],"specifiers":[{"kind":"local","local":"ClosingVerification","exported":"default"}]}}},"options":{"filename":"imports/ui/pages/SingleLoanPage/LoanTabs/FormsTab/ClosingVerification.jsx","filenameRelative":"imports/ui/pages/SingleLoanPage/LoanTabs/FormsTab/ClosingVerification.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/ui/pages/SingleLoanPage/LoanTabs/FormsTab/ClosingVerification.jsx.map","sourceFileName":"imports/ui/pages/SingleLoanPage/LoanTabs/FormsTab/ClosingVerification.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"ClosingVerification"},"ignored":false,"code":"\"use strict\";\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nmodule.export({\n  \"default\": function () {\n    function _default() {\n      return ClosingVerification;\n    }\n\n    return _default;\n  }()\n});\n\nvar React = void 0,\n    _Component = void 0;\n\nmodule.watch(require(\"react\"), {\n  \"default\": function () {\n    function _default(v) {\n      React = v;\n    }\n\n    return _default;\n  }(),\n  Component: function () {\n    function Component(v) {\n      _Component = v;\n    }\n\n    return Component;\n  }()\n}, 0);\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function () {\n    function _default(v) {\n      PropTypes = v;\n    }\n\n    return _default;\n  }()\n}, 1);\nvar cleanMethod = void 0;\nmodule.watch(require(\"../../../../../core/api/cleanMethods\"), {\n  \"default\": function () {\n    function _default(v) {\n      cleanMethod = v;\n    }\n\n    return _default;\n  }()\n}, 2);\n\nvar _CLOSING_STEPS_TYPE = void 0;\n\nmodule.watch(require(\"../../../../../core/api/constants\"), {\n  CLOSING_STEPS_TYPE: function () {\n    function CLOSING_STEPS_TYPE(v) {\n      _CLOSING_STEPS_TYPE = v;\n    }\n\n    return CLOSING_STEPS_TYPE;\n  }()\n}, 3);\nvar FileVerificator = void 0;\nmodule.watch(require(\"./FileVerificator\"), {\n  \"default\": function () {\n    function _default(v) {\n      FileVerificator = v;\n    }\n\n    return _default;\n  }()\n}, 4);\nvar ItemVerificator = void 0;\nmodule.watch(require(\"./ItemVerificator\"), {\n  \"default\": function () {\n    function _default(v) {\n      ItemVerificator = v;\n    }\n\n    return _default;\n  }()\n}, 5);\n\nvar ClosingVerification = function (_Component2) {\n  (0, _inherits3.default)(ClosingVerification, _Component2);\n\n  function ClosingVerification() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, ClosingVerification);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = ClosingVerification.__proto__ || Object.getPrototypeOf(ClosingVerification)).call.apply(_ref, [this].concat(args))), _this), _this.setStatus = function (id, newStatus) {\n      var loan = _this.props.loan;\n      var steps = loan.logic.closingSteps;\n      var step = steps.find(function (s) {\n        return s.id === id;\n      });\n      cleanMethod('updateLoan', {\n        object: {\n          'logic.closingSteps': [].concat(_toConsumableArray(steps.filter(function (s) {\n            return s.id !== id;\n          })), [(0, _extends3.default)({}, step, {\n            status: newStatus\n          })])\n        },\n        id: loan._id\n      });\n    }, _this.saveError = function (id, error) {\n      var loan = _this.props.loan;\n      var steps = loan.logic.closingSteps;\n      var step = steps.find(function (s) {\n        return s.id === id;\n      });\n      cleanMethod('updateLoan', {\n        object: {\n          'logic.closingSteps': [].concat(_toConsumableArray(steps.filter(function (s) {\n            return s.id !== id;\n          })), [(0, _extends3.default)({}, step, {\n            error: error\n          })])\n        },\n        id: loan._id\n      });\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n\n  (0, _createClass3.default)(ClosingVerification, [{\n    key: \"render\",\n    value: function () {\n      function render() {\n        var _this2 = this;\n\n        var loan = this.props.loan;\n        var steps = loan.logic.closingSteps;\n        return React.createElement(\n          \"div\",\n          {\n            style: {\n              padding: '0 16px'\n            }\n          },\n          steps && steps.length ? steps.map(function (step) {\n            return step.type === _CLOSING_STEPS_TYPE.UPLOAD ? React.createElement(FileVerificator, {\n              currentValue: loan.files[step.id],\n              id: step.id,\n              closingSteps: steps,\n              key: step.id,\n              docId: loan._id\n            }) : React.createElement(\n              \"div\",\n              {\n                className: \"mask1 flex-col\",\n                key: step.id,\n                style: {\n                  marginBottom: 8\n                }\n              },\n              React.createElement(\n                \"h4\",\n                null,\n                step.title\n              ),\n              React.createElement(\n                \"p\",\n                null,\n                step.description\n              ),\n              React.createElement(ItemVerificator, {\n                item: {\n                  key: step.id,\n                  status: step.status,\n                  error: step.error\n                },\n                setStatus: _this2.setStatus,\n                saveError: _this2.saveError\n              })\n            );\n          }) : React.createElement(\n            \"h3\",\n            null,\n            \"Pas d'\\xE9tapes \\xE0 v\\xE9rifier\"\n          )\n        );\n      }\n\n      return render;\n    }()\n  }]);\n  return ClosingVerification;\n}(_Component);\n\nClosingVerification.propTypes = {\n  loan: PropTypes.objectOf(PropTypes.any).isRequired\n};","map":{"version":3,"sources":["imports/ui/pages/SingleLoanPage/LoanTabs/FormsTab/ClosingVerification.jsx"],"names":["module","export","ClosingVerification","React","Component","watch","require","v","PropTypes","cleanMethod","CLOSING_STEPS_TYPE","FileVerificator","ItemVerificator","setStatus","id","newStatus","loan","props","steps","logic","closingSteps","step","find","s","object","filter","status","_id","saveError","error","padding","length","map","type","UPLOAD","files","marginBottom","title","description","key","propTypes","objectOf","any","isRequired"],"mappings":"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","file":"imports/ui/pages/SingleLoanPage/LoanTabs/FormsTab/ClosingVerification.jsx.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport cleanMethod from 'core/api/cleanMethods';\nimport { CLOSING_STEPS_TYPE } from 'core/api/constants';\nimport FileVerificator from './FileVerificator';\nimport ItemVerificator from './ItemVerificator';\n\nexport default class ClosingVerification extends Component {\n  setStatus = (id, newStatus) => {\n    const { loan } = this.props;\n    const steps = loan.logic.closingSteps;\n    const step = steps.find(s => s.id === id);\n\n    cleanMethod('updateLoan', {\n      object: {\n        'logic.closingSteps': [\n          ...steps.filter(s => s.id !== id),\n          { ...step, status: newStatus },\n        ],\n      },\n      id: loan._id,\n    });\n  };\n\n  saveError = (id, error) => {\n    const { loan } = this.props;\n    const steps = loan.logic.closingSteps;\n    const step = steps.find(s => s.id === id);\n\n    cleanMethod('updateLoan', {\n      object: {\n        'logic.closingSteps': [\n          ...steps.filter(s => s.id !== id),\n          { ...step, error },\n        ],\n      },\n      id: loan._id,\n    });\n  };\n\n  render() {\n    const { loan } = this.props;\n    const steps = loan.logic.closingSteps;\n    return (\n      <div style={{ padding: '0 16px' }}>\n        {steps && steps.length ? (\n          steps.map(step =>\n            (step.type === CLOSING_STEPS_TYPE.UPLOAD ? (\n              <FileVerificator\n                currentValue={loan.files[step.id]}\n                id={step.id}\n                closingSteps={steps}\n                key={step.id}\n                docId={loan._id}\n              />\n            ) : (\n              <div\n                className=\"mask1 flex-col\"\n                key={step.id}\n                style={{ marginBottom: 8 }}\n              >\n                <h4>{step.title}</h4>\n                <p>{step.description}</p>\n\n                <ItemVerificator\n                  item={{\n                    key: step.id,\n                    status: step.status,\n                    error: step.error,\n                  }}\n                  setStatus={this.setStatus}\n                  saveError={this.saveError}\n                />\n              </div>\n            )))\n        ) : (\n          <h3>Pas d&apos;étapes à vérifier</h3>\n        )}\n      </div>\n    );\n  }\n}\n\nClosingVerification.propTypes = {\n  loan: PropTypes.objectOf(PropTypes.any).isRequired,\n};\n"]},"hash":"023ef02a4f4bc5a4c57f65f28f31e274400eaefa"}
