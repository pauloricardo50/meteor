{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","createClass","classCallCheck","extends","objectWithoutProperties","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]}],"exports":{"exported":["contextTypes"],"specifiers":[{"kind":"local","local":"contextTypes","exported":"contextTypes"}]}}},"options":{"filename":"imports/core/containers/LoanContainer.jsx","filenameRelative":"imports/core/containers/LoanContainer.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/containers/LoanContainer.jsx.map","sourceFileName":"imports/core/containers/LoanContainer.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"LoanContainer"},"ignored":false,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.contextTypes = undefined;\n\nvar _objectWithoutProperties2 = require(\"babel-runtime/helpers/objectWithoutProperties\");\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nmodule.export({\n  contextTypes: function () {\n    function contextTypes() {\n      return _contextTypes;\n    }\n\n    return contextTypes;\n  }()\n});\n\nvar React = void 0,\n    _Component = void 0;\n\nmodule.watch(require(\"react\"), {\n  \"default\": function () {\n    function _default(v) {\n      React = v;\n    }\n\n    return _default;\n  }(),\n  Component: function () {\n    function Component(v) {\n      _Component = v;\n    }\n\n    return Component;\n  }()\n}, 0);\nexports.contextTypes = _contextTypes;\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function () {\n    function _default(v) {\n      PropTypes = v;\n    }\n\n    return _default;\n  }()\n}, 1);\nvar _contextTypes = {\n  loan: PropTypes.object,\n  borrowers: PropTypes.array,\n  offers: PropTypes.array,\n  property: PropTypes.object\n};\n\nvar loanWrapper = function () {\n  function loanWrapper(WrappedComponent) {\n    var LoanContainer = function (_Component2) {\n      (0, _inherits3.default)(LoanContainer, _Component2);\n\n      function LoanContainer(props) {\n        (0, _classCallCheck3.default)(this, LoanContainer);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (LoanContainer.__proto__ || Object.getPrototypeOf(LoanContainer)).call(this));\n\n        _initialiseProps.call(_this);\n\n        _this.state = (0, _extends3.default)({}, _this.getData(props));\n        return _this;\n      }\n\n      (0, _createClass3.default)(LoanContainer, [{\n        key: \"getChildContext\",\n        value: function () {\n          function getChildContext() {\n            var _state = this.state,\n                loan = _state.loan,\n                loanBorrowers = _state.loanBorrowers,\n                loanOffers = _state.loanOffers,\n                loanProperty = _state.loanProperty;\n            return {\n              loan: loan,\n              borrowers: loanBorrowers,\n              offers: loanOffers,\n              property: loanProperty\n            };\n          }\n\n          return getChildContext;\n        }()\n      }, {\n        key: \"componentWillReceiveProps\",\n        value: function () {\n          function componentWillReceiveProps(nextProps) {\n            this.setState((0, _extends3.default)({}, this.getData(nextProps)));\n          }\n\n          return componentWillReceiveProps;\n        }()\n      }, {\n        key: \"render\",\n        value: function () {\n          function render() {\n            var _state2 = this.state,\n                loan = _state2.loan,\n                loanBorrowers = _state2.loanBorrowers,\n                loanOffers = _state2.loanOffers,\n                loanProperty = _state2.loanProperty,\n                rest = _state2.rest;\n            return React.createElement(WrappedComponent, (0, _extends3.default)({\n              loan: loan,\n              borrowers: loanBorrowers,\n              offers: loanOffers,\n              property: loanProperty\n            }, rest));\n          }\n\n          return render;\n        }()\n      }]);\n      return LoanContainer;\n    }(_Component);\n\n    var _initialiseProps = function () {\n      function _initialiseProps() {\n        this.getData = function (props) {\n          var loans = props.loans,\n              borrowers = props.borrowers,\n              properties = props.properties,\n              offers = props.offers,\n              rest = (0, _objectWithoutProperties3.default)(props, [\"loans\", \"borrowers\", \"properties\", \"offers\"]); // match has to be passed to children\n\n          var loanId = props.match.params.loanId;\n          var loan = {};\n          var loanBorrowers = [];\n          var loanOffers = [];\n          var loanProperty = {};\n\n          if (loanId) {\n            loan = loans && loans.find(function (loan) {\n              return loan._id === loanId;\n            });\n            loanBorrowers = loan && loan.borrowerIds.map(function (borrowerId) {\n              return borrowers.find(function (borrower) {\n                return borrower._id === borrowerId;\n              });\n            });\n            loanOffers = offers && offers.filter(function (offer) {\n              return offer.loanId === loanId;\n            });\n            loanProperty = properties && properties.find(function (property) {\n              // Add this check while transitioning from nested to separate property\n              if (typeof loan.propertyId === 'string') {\n                return property._id === loan.propertyId;\n              }\n\n              return false;\n            });\n          }\n\n          return {\n            loan: loan,\n            loanBorrowers: loanBorrowers,\n            loanOffers: loanOffers,\n            loanProperty: loanProperty,\n            rest: rest\n          };\n        };\n      }\n\n      return _initialiseProps;\n    }();\n\n    LoanContainer.childContextTypes = _contextTypes;\n    return LoanContainer;\n  }\n\n  return loanWrapper;\n}();\n\nmodule.exportDefault(loanWrapper);","map":{"version":3,"sources":["imports/core/containers/LoanContainer.jsx"],"names":["module","export","contextTypes","React","Component","watch","require","v","PropTypes","loan","object","borrowers","array","offers","property","loanWrapper","WrappedComponent","LoanContainer","props","state","getData","loanBorrowers","loanOffers","loanProperty","nextProps","setState","rest","loans","properties","loanId","match","params","find","_id","borrowerIds","map","borrower","borrowerId","filter","offer","propertyId","childContextTypes","exportDefault"],"mappings":"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","file":"imports/core/containers/LoanContainer.jsx.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport const contextTypes = {\n  loan: PropTypes.object,\n  borrowers: PropTypes.array,\n  offers: PropTypes.array,\n  property: PropTypes.object,\n};\n\nconst loanWrapper = (WrappedComponent) => {\n  class LoanContainer extends Component {\n    constructor(props) {\n      super();\n      this.state = { ...this.getData(props) };\n    }\n\n    getChildContext() {\n      const { loan, loanBorrowers, loanOffers, loanProperty } = this.state;\n\n      return {\n        loan,\n        borrowers: loanBorrowers,\n        offers: loanOffers,\n        property: loanProperty,\n      };\n    }\n\n    componentWillReceiveProps(nextProps) {\n      this.setState({ ...this.getData(nextProps) });\n    }\n\n    getData = (props) => {\n      const { loans, borrowers, properties, offers, ...rest } = props;\n\n      // match has to be passed to children\n      const { loanId } = props.match.params;\n\n      let loan = {};\n      let loanBorrowers = [];\n      let loanOffers = [];\n      let loanProperty = {};\n\n      if (loanId) {\n        loan = loans && loans.find(loan => loan._id === loanId);\n        loanBorrowers =\n          loan &&\n          loan.borrowerIds.map(borrowerId =>\n            borrowers.find(borrower => borrower._id === borrowerId));\n        loanOffers = offers && offers.filter(offer => offer.loanId === loanId);\n        loanProperty =\n          properties &&\n          properties.find((property) => {\n            // Add this check while transitioning from nested to separate property\n            if (typeof loan.propertyId === 'string') {\n              return property._id === loan.propertyId;\n            }\n\n            return false;\n          });\n      }\n\n      return {\n        loan,\n        loanBorrowers,\n        loanOffers,\n        loanProperty,\n        rest,\n      };\n    };\n\n    render() {\n      const {\n        loan,\n        loanBorrowers,\n        loanOffers,\n        loanProperty,\n        rest,\n      } = this.state;\n\n      return (\n        <WrappedComponent\n          loan={loan}\n          borrowers={loanBorrowers}\n          offers={loanOffers}\n          property={loanProperty}\n          {...rest}\n        />\n      );\n    }\n  }\n\n  LoanContainer.childContextTypes = contextTypes;\n\n  return LoanContainer;\n};\n\nexport default loanWrapper;\n"]},"hash":"0516c824aab0e2032d16d11c66e2fc3c1ff21ec3"}
