{"metadata":{"usedHelpers":["objectWithoutProperties","extends","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"react","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"React"}]},{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/alanning:roles","imported":["Roles"],"specifiers":[{"kind":"named","imported":"Roles","local":"Roles"}]},{"source":"../../utils/analytics","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"track"}]},{"source":"../Translation","imported":["T"],"specifiers":[{"kind":"named","imported":"T","local":"T"}]},{"source":"../DropdownMenu","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"DropdownMenu"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/core/components/TopNav/TopNavDropdown.jsx","filenameRelative":"imports/core/components/TopNav/TopNavDropdown.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/components/TopNav/TopNavDropdown.jsx.map","sourceFileName":"imports/core/components/TopNav/TopNavDropdown.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"TopNavDropdown"},"ignored":false,"code":"\"use strict\";\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require(\"babel-runtime/helpers/objectWithoutProperties\");\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function () {\n    function _default(v) {\n      PropTypes = v;\n    }\n\n    return _default;\n  }()\n}, 0);\nvar React = void 0;\nmodule.watch(require(\"react\"), {\n  \"default\": function () {\n    function _default(v) {\n      React = v;\n    }\n\n    return _default;\n  }()\n}, 1);\n\nvar _Meteor = void 0;\n\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function () {\n    function Meteor(v) {\n      _Meteor = v;\n    }\n\n    return Meteor;\n  }()\n}, 2);\n\nvar _Roles = void 0;\n\nmodule.watch(require(\"meteor/alanning:roles\"), {\n  Roles: function () {\n    function Roles(v) {\n      _Roles = v;\n    }\n\n    return Roles;\n  }()\n}, 3);\nvar track = void 0;\nmodule.watch(require(\"../../utils/analytics\"), {\n  \"default\": function () {\n    function _default(v) {\n      track = v;\n    }\n\n    return _default;\n  }()\n}, 4);\n\nvar _T = void 0;\n\nmodule.watch(require(\"../Translation\"), {\n  T: function () {\n    function T(v) {\n      _T = v;\n    }\n\n    return T;\n  }()\n}, 5);\nvar DropdownMenu = void 0;\nmodule.watch(require(\"../DropdownMenu\"), {\n  \"default\": function () {\n    function _default(v) {\n      DropdownMenu = v;\n    }\n\n    return _default;\n  }()\n}, 6);\n\n// Shows a sign out link for all types of users, but:\n// an admin link for admins,\n// a partner link for partners,\n// a home, settings, and contact link for regular users\nvar getMenuItems = function () {\n  function getMenuItems(currentUser, history) {\n    var isDev = _Roles.userIsInRole(currentUser._id, 'dev');\n\n    var isAdmin = _Roles.userIsInRole(currentUser._id, 'admin');\n\n    var isPartner = _Roles.userIsInRole(currentUser._id, 'partner');\n\n    return [{\n      id: 'admin',\n      link: '/admin',\n      show: isAdmin,\n      icon: 'app'\n    }, {\n      id: 'partner',\n      link: '/partner',\n      show: isPartner,\n      icon: 'app'\n    }, {\n      id: 'app',\n      link: '/',\n      show: !isAdmin && !isPartner,\n      icon: 'app'\n    }, {\n      id: 'account',\n      link: '/profile',\n      show: !isAdmin && !isPartner,\n      icon: 'accountCircle'\n    }, {\n      id: 'dev',\n      link: '/dev',\n      show: isDev\n    }, {\n      id: 'logout',\n      label: React.createElement(_T, {\n        id: \"general.logout\"\n      }),\n      onClick: function () {\n        function onClick() {\n          track('TopNavDropdown - logged out', {});\n\n          _Meteor.logout(function () {\n            return window.location.replace(\"\" + _Meteor.settings.public.subdomains.www);\n          });\n        }\n\n        return onClick;\n      }(),\n      link: '/',\n      show: true,\n      dividerTop: true,\n      icon: 'powerOff'\n    }];\n  }\n\n  return getMenuItems;\n}();\n\nvar TopNavDropdown = function () {\n  function TopNavDropdown(props) {\n    var currentUser = props.currentUser,\n        history = props.history;\n    return React.createElement(DropdownMenu, {\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'left'\n      },\n      transformOrigin: {\n        vertical: 'bottom',\n        horizontal: 'left'\n      },\n      iconType: \"person\",\n      options: getMenuItems(currentUser, history) // Allow the Divider to go through\n      .filter(function (o) {\n        return !!o.show;\n      }).map(function (_ref) {\n        var optionId = _ref.id,\n            link = _ref.link,\n            label = _ref.label,\n            rest = (0, _objectWithoutProperties3.default)(_ref, [\"id\", \"link\", \"label\"]);\n        return (0, _extends3.default)({}, rest, {\n          id: optionId,\n          link: true,\n          to: link,\n          label: label || React.createElement(_T, {\n            id: \"TopNavDropdown.\" + optionId\n          }),\n          history: history // required for Link to work\n\n        });\n      }) // tooltip={currentUser.emails[0].address}\n      // tooltipPosition=\"bottom-end\"\n\n    });\n  }\n\n  return TopNavDropdown;\n}();\n\nTopNavDropdown.propTypes = {\n  currentUser: PropTypes.objectOf(PropTypes.any).isRequired,\n  history: PropTypes.object.isRequired\n};\nmodule.exportDefault(TopNavDropdown);","map":{"version":3,"sources":["imports/core/components/TopNav/TopNavDropdown.jsx"],"names":["PropTypes","module","watch","require","v","React","Meteor","Roles","track","T","DropdownMenu","getMenuItems","currentUser","history","isDev","userIsInRole","_id","isAdmin","isPartner","id","link","show","icon","label","onClick","logout","window","location","replace","settings","public","subdomains","www","dividerTop","TopNavDropdown","props","vertical","horizontal","filter","o","map","optionId","rest","to","propTypes","objectOf","any","isRequired","object","exportDefault"],"mappings":"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","file":"imports/core/components/TopNav/TopNavDropdown.jsx.map","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Meteor } from 'meteor/meteor';\nimport { Roles } from 'meteor/alanning:roles';\n\nimport track from '../../utils/analytics';\nimport { T } from '../Translation';\nimport DropdownMenu from '../DropdownMenu';\n\n// Shows a sign out link for all types of users, but:\n// an admin link for admins,\n// a partner link for partners,\n// a home, settings, and contact link for regular users\nconst getMenuItems = (currentUser, history) => {\n  const isDev = Roles.userIsInRole(currentUser._id, 'dev');\n  const isAdmin = Roles.userIsInRole(currentUser._id, 'admin');\n  const isPartner = Roles.userIsInRole(currentUser._id, 'partner');\n  return [\n    {\n      id: 'admin',\n      link: '/admin',\n      show: isAdmin,\n      icon: 'app',\n    },\n    {\n      id: 'partner',\n      link: '/partner',\n      show: isPartner,\n      icon: 'app',\n    },\n    {\n      id: 'app',\n      link: '/',\n      show: !isAdmin && !isPartner,\n      icon: 'app',\n    },\n    {\n      id: 'account',\n      link: '/profile',\n      show: !isAdmin && !isPartner,\n      icon: 'accountCircle',\n    },\n    {\n      id: 'dev',\n      link: '/dev',\n      show: isDev,\n    },\n    {\n      id: 'logout',\n      label: <T id=\"general.logout\" />,\n      onClick: () => {\n        track('TopNavDropdown - logged out', {});\n        Meteor.logout(() =>\n          window.location.replace(`${Meteor.settings.public.subdomains.www}`));\n      },\n      link: '/',\n      show: true,\n      dividerTop: true,\n      icon: 'powerOff',\n    },\n  ];\n};\n\nconst TopNavDropdown = (props) => {\n  const { currentUser, history } = props;\n\n  return (\n    <DropdownMenu\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'left',\n      }}\n      transformOrigin={{\n        vertical: 'bottom',\n        horizontal: 'left',\n      }}\n      iconType=\"person\"\n      options={getMenuItems(currentUser, history)\n        // Allow the Divider to go through\n        .filter(o => !!o.show)\n        .map(({ id: optionId, link, label, ...rest }) => ({\n          ...rest,\n          id: optionId,\n          link: true,\n          to: link,\n          label: label || <T id={`TopNavDropdown.${optionId}`} />,\n          history, // required for Link to work\n        }))}\n      // tooltip={currentUser.emails[0].address}\n      // tooltipPosition=\"bottom-end\"\n    />\n  );\n};\n\nTopNavDropdown.propTypes = {\n  currentUser: PropTypes.objectOf(PropTypes.any).isRequired,\n  history: PropTypes.object.isRequired,\n};\n\nexport default TopNavDropdown;\n"]},"hash":"2731d0a7343459cff7d4ecde96f69f4bb2c2ba8e"}
