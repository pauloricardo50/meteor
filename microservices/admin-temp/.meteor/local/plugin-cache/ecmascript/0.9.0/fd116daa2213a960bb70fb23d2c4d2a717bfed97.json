{"metadata":{"usedHelpers":["createClass","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"events","imported":["EventEmitter"],"specifiers":[{"kind":"named","imported":"EventEmitter","local":"EventEmitter"}]},{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]}],"exports":{"exported":["EventService"],"specifiers":[{"kind":"local","local":"EventService","exported":"EventService"}]}}},"options":{"filename":"imports/core/api/events/EventService.js","filenameRelative":"imports/core/api/events/EventService.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/api/events/EventService.js.map","sourceFileName":"imports/core/api/events/EventService.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"EventService"},"ignored":false,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EventService = undefined;\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nmodule.export({\n  EventService: function () {\n    function EventService() {\n      return _EventService;\n    }\n\n    return EventService;\n  }()\n});\n\nvar _EventEmitter = void 0;\n\nmodule.watch(require(\"events\"), {\n  EventEmitter: function () {\n    function EventEmitter(v) {\n      _EventEmitter = v;\n    }\n\n    return EventEmitter;\n  }()\n}, 0);\n\nvar _Meteor = void 0;\n\nexports.EventService = _EventService;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function () {\n    function Meteor(v) {\n      _Meteor = v;\n    }\n\n    return Meteor;\n  }()\n}, 1);\nvar IS_LOGGING = true;\n\nvar _EventService = function () {\n  function _EventService(_ref) {\n    var emmitter = _ref.emmitter;\n    (0, _classCallCheck3.default)(this, _EventService);\n    this.emmitter = emmitter;\n    this.addErrorListener();\n  }\n\n  (0, _createClass3.default)(_EventService, [{\n    key: \"emit\",\n    value: function () {\n      function emit(eventName, params) {\n        this.logEmittedEvent(eventName, params);\n        this.emmitter.emit(eventName, params);\n      }\n\n      return emit;\n    }()\n  }, {\n    key: \"emitMutation\",\n    value: function () {\n      function emitMutation(_ref2, params) {\n        var name = _ref2.name;\n        this.emit(name, params);\n      }\n\n      return emitMutation;\n    }()\n  }, {\n    key: \"addListener\",\n    value: function () {\n      function addListener(eventName, listenerFunction) {\n        var _this = this;\n\n        this.emmitter.addListener(eventName, function (params) {\n          _this.logListener(eventName, params);\n\n          listenerFunction(params);\n        });\n      }\n\n      return addListener;\n    }()\n  }, {\n    key: \"addMutationListener\",\n    value: function () {\n      function addMutationListener(_ref3, listenerFunction) {\n        var name = _ref3.name;\n        this.addListener(name, listenerFunction);\n      }\n\n      return addMutationListener;\n    }()\n  }, {\n    key: \"addErrorListener\",\n    value: function () {\n      function addErrorListener() {\n        this.addListener('error', function (error) {\n          console.log('An error occured in an event listener:');\n          console.log(error);\n          throw error;\n        });\n      }\n\n      return addErrorListener;\n    }()\n  }, {\n    key: \"logEmittedEvent\",\n    value: function () {\n      function logEmittedEvent(eventName, params) {\n        if (IS_LOGGING && _Meteor.isDevelopment && !_Meteor.isTest) {\n          console.log(\"Event \\\"\" + eventName + \"\\\" triggered with params:\");\n          console.log(params);\n        }\n      }\n\n      return logEmittedEvent;\n    }()\n  }, {\n    key: \"logListener\",\n    value: function () {\n      function logListener(eventName, params) {\n        if (IS_LOGGING && _Meteor.isDevelopment && !_Meteor.isTest) {\n          console.log(\"Event \\\"\" + eventName + \"\\\" listened to with params:\");\n          console.log(params);\n        }\n      }\n\n      return logListener;\n    }()\n  }]);\n  return _EventService;\n}();\n\nvar defaultEmmitter = new _EventEmitter();\nmodule.exportDefault(new _EventService({\n  emmitter: defaultEmmitter\n}));","map":{"version":3,"sources":["imports/core/api/events/EventService.js"],"names":["module","export","EventService","EventEmitter","watch","require","v","Meteor","IS_LOGGING","emmitter","addErrorListener","eventName","params","logEmittedEvent","emit","name","listenerFunction","addListener","logListener","error","console","log","isDevelopment","isTest","defaultEmmitter","exportDefault"],"mappings":";;;;;;;;;;;;;;;;;AAAAA,OAAOC,MAAP,CAAc;AAACC;AAAa;AAAA,aAAIA,aAAJ;AAAA;;AAAb;AAAA;AAAD,CAAd;;AAA+C,IAAIC,sBAAJ;;AAAiBH,OAAOI,KAAP,CAAaC,QAAQ,QAAR,CAAb,EAA+B;AAACF,cAAD;AAAA,0BAAcG,CAAd,EAAgB;AAACH,sBAAaG,CAAb;AAAe;;AAAhC;AAAA;AAAA,CAA/B,EAAiE,CAAjE;;AAAoE,IAAIC,gBAAJ;;;AAAWP,OAAOI,KAAP,CAAaC,QAAQ,eAAR,CAAb,EAAsC;AAACE,QAAD;AAAA,oBAAQD,CAAR,EAAU;AAACC,gBAAOD,CAAP;AAAS;;AAApB;AAAA;AAAA,CAAtC,EAA4D,CAA5D;AAG/I,IAAME,aAAa,IAAnB;;IAEaN,a;AACX,+BAA0B;AAAA,QAAZO,QAAY,QAAZA,QAAY;AAAA;AACxB,SAAKA,QAAL,GAAgBA,QAAhB;AACA,SAAKC,gBAAL;AACD;;;;;oBAEIC,S,EAAWC,M,EAAQ;AACtB,aAAKC,eAAL,CAAqBF,SAArB,EAAgCC,MAAhC;AACA,aAAKH,QAAL,CAAcK,IAAd,CAAmBH,SAAnB,EAA8BC,MAA9B;AACD;;;;;;;mCAEsBA,M,EAAQ;AAAA,YAAhBG,IAAgB,SAAhBA,IAAgB;AAC7B,aAAKD,IAAL,CAAUC,IAAV,EAAgBH,MAAhB;AACD;;;;;;;2BAEWD,S,EAAWK,gB,EAAkB;AAAA;;AACvC,aAAKP,QAAL,CAAcQ,WAAd,CAA0BN,SAA1B,EAAqC,UAACC,MAAD,EAAY;AAC/C,gBAAKM,WAAL,CAAiBP,SAAjB,EAA4BC,MAA5B;;AACAI,2BAAiBJ,MAAjB;AACD,SAHD;AAID;;;;;;;0CAE6BI,gB,EAAkB;AAAA,YAA1BD,IAA0B,SAA1BA,IAA0B;AAC9C,aAAKE,WAAL,CAAiBF,IAAjB,EAAuBC,gBAAvB;AACD;;;;;;;kCAEkB;AACjB,aAAKC,WAAL,CAAiB,OAAjB,EAA0B,UAACE,KAAD,EAAW;AACnCC,kBAAQC,GAAR,CAAY,wCAAZ;AACAD,kBAAQC,GAAR,CAAYF,KAAZ;AACA,gBAAMA,KAAN;AACD,SAJD;AAKD;;;;;;;+BAEeR,S,EAAWC,M,EAAQ;AACjC,YAAIJ,cAAcD,QAAOe,aAArB,IAAsC,CAACf,QAAOgB,MAAlD,EAA0D;AACxDH,kBAAQC,GAAR,cAAsBV,SAAtB;AACAS,kBAAQC,GAAR,CAAYT,MAAZ;AACD;AACF;;;;;;;2BAEWD,S,EAAWC,M,EAAQ;AAC7B,YAAIJ,cAAcD,QAAOe,aAArB,IAAsC,CAACf,QAAOgB,MAAlD,EAA0D;AACxDH,kBAAQC,GAAR,cAAsBV,SAAtB;AACAS,kBAAQC,GAAR,CAAYT,MAAZ;AACD;AACF;;;;;;;;AAGH,IAAMY,kBAAkB,IAAIrB,aAAJ,EAAxB;AAtDAH,OAAOyB,aAAP,CAuDe,IAAIvB,aAAJ,CAAiB;AAAEO,YAAUe;AAAZ,CAAjB,CAvDf","file":"imports/core/api/events/EventService.js.map","sourcesContent":["import { EventEmitter } from 'events';\nimport { Meteor } from 'meteor/meteor';\n\nconst IS_LOGGING = true;\n\nexport class EventService {\n  constructor({ emmitter }) {\n    this.emmitter = emmitter;\n    this.addErrorListener();\n  }\n\n  emit(eventName, params) {\n    this.logEmittedEvent(eventName, params);\n    this.emmitter.emit(eventName, params);\n  }\n\n  emitMutation({ name }, params) {\n    this.emit(name, params);\n  }\n\n  addListener(eventName, listenerFunction) {\n    this.emmitter.addListener(eventName, (params) => {\n      this.logListener(eventName, params);\n      listenerFunction(params);\n    });\n  }\n\n  addMutationListener({ name }, listenerFunction) {\n    this.addListener(name, listenerFunction);\n  }\n\n  addErrorListener() {\n    this.addListener('error', (error) => {\n      console.log('An error occured in an event listener:');\n      console.log(error);\n      throw error;\n    });\n  }\n\n  logEmittedEvent(eventName, params) {\n    if (IS_LOGGING && Meteor.isDevelopment && !Meteor.isTest) {\n      console.log(`Event \"${eventName}\" triggered with params:`);\n      console.log(params);\n    }\n  }\n\n  logListener(eventName, params) {\n    if (IS_LOGGING && Meteor.isDevelopment && !Meteor.isTest) {\n      console.log(`Event \"${eventName}\" listened to with params:`);\n      console.log(params);\n    }\n  }\n}\n\nconst defaultEmmitter = new EventEmitter();\nexport default new EventService({ emmitter: defaultEmmitter });\n"]},"hash":"fd116daa2213a960bb70fb23d2c4d2a717bfed97"}
