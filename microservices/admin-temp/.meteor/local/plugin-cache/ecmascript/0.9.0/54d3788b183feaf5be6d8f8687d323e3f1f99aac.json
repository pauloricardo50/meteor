{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"../../api","imported":["Loans","Offers","Borrowers","AdminActions","Properties"],"specifiers":[{"kind":"named","imported":"Loans","local":"Loans"},{"kind":"named","imported":"Offers","local":"Offers"},{"kind":"named","imported":"Borrowers","local":"Borrowers"},{"kind":"named","imported":"AdminActions","local":"AdminActions"},{"kind":"named","imported":"Properties","local":"Properties"}]}],"exports":{"exported":["adminLoansComposer","props","onData","adminUsersComposer","props","onData","adminOffersComposer","props","onData","adminActionsComposer","props","onData","adminPropertiesComposer","props","onData","adminLoanComposer","props","onData","adminUserComposer","props","onData","adminOfferComposer","props","onData"],"specifiers":[{"kind":"local","local":"adminLoansComposer","exported":"adminLoansComposer"},{"kind":"local","local":"props","exported":"props"},{"kind":"local","local":"onData","exported":"onData"},{"kind":"local","local":"adminUsersComposer","exported":"adminUsersComposer"},{"kind":"local","local":"props","exported":"props"},{"kind":"local","local":"onData","exported":"onData"},{"kind":"local","local":"adminOffersComposer","exported":"adminOffersComposer"},{"kind":"local","local":"props","exported":"props"},{"kind":"local","local":"onData","exported":"onData"},{"kind":"local","local":"adminActionsComposer","exported":"adminActionsComposer"},{"kind":"local","local":"props","exported":"props"},{"kind":"local","local":"onData","exported":"onData"},{"kind":"local","local":"adminPropertiesComposer","exported":"adminPropertiesComposer"},{"kind":"local","local":"props","exported":"props"},{"kind":"local","local":"onData","exported":"onData"},{"kind":"local","local":"adminLoanComposer","exported":"adminLoanComposer"},{"kind":"local","local":"props","exported":"props"},{"kind":"local","local":"onData","exported":"onData"},{"kind":"local","local":"adminUserComposer","exported":"adminUserComposer"},{"kind":"local","local":"props","exported":"props"},{"kind":"local","local":"onData","exported":"onData"},{"kind":"local","local":"adminOfferComposer","exported":"adminOfferComposer"},{"kind":"local","local":"props","exported":"props"},{"kind":"local","local":"onData","exported":"onData"}]}}},"options":{"filename":"imports/core/containers/composers/AdminComposers.js","filenameRelative":"imports/core/containers/composers/AdminComposers.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/containers/composers/AdminComposers.js.map","sourceFileName":"imports/core/containers/composers/AdminComposers.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"AdminComposers"},"ignored":false,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nmodule.export({\n  adminLoansComposer: function adminLoansComposer() {\n    return _adminLoansComposer;\n  },\n  adminUsersComposer: function adminUsersComposer() {\n    return _adminUsersComposer;\n  },\n  adminOffersComposer: function adminOffersComposer() {\n    return _adminOffersComposer;\n  },\n  adminActionsComposer: function adminActionsComposer() {\n    return _adminActionsComposer;\n  },\n  adminPropertiesComposer: function adminPropertiesComposer() {\n    return _adminPropertiesComposer;\n  },\n  adminLoanComposer: function adminLoanComposer() {\n    return _adminLoanComposer;\n  },\n  adminUserComposer: function adminUserComposer() {\n    return _adminUserComposer;\n  },\n  adminOfferComposer: function adminOfferComposer() {\n    return _adminOfferComposer;\n  }\n});\n\nvar _Meteor = void 0;\n\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function Meteor(v) {\n    _Meteor = v;\n  }\n}, 0);\nexports.adminLoansComposer = _adminLoansComposer;\n\nvar _Loans = void 0,\n    _Offers = void 0,\n    _Borrowers = void 0,\n    _AdminActions = void 0,\n    _Properties = void 0;\n\nexports.adminUsersComposer = _adminUsersComposer;\nmodule.watch(require(\"../../api\"), {\n  Loans: function Loans(v) {\n    _Loans = v;\n  },\n  Offers: function Offers(v) {\n    _Offers = v;\n  },\n  Borrowers: function Borrowers(v) {\n    _Borrowers = v;\n  },\n  AdminActions: function AdminActions(v) {\n    _AdminActions = v;\n  },\n  Properties: function Properties(v) {\n    _Properties = v;\n  }\n}, 1);\nexports.adminOffersComposer = _adminOffersComposer;\n\nfunction _adminLoansComposer(props, onData) {\n  if (_Meteor.subscribe('allLoans').ready()) {\n    var loans = _Loans.find({}).fetch();\n\n    onData(null, {\n      loans: loans\n    });\n  }\n}\n\nexports.adminActionsComposer = _adminActionsComposer;\n\nfunction _adminUsersComposer(props, onData) {\n  if (_Meteor.subscribe('allUsers').ready()) {\n    var users = _Meteor.users.find({}).fetch();\n\n    onData(null, {\n      users: users\n    });\n  }\n}\n\nexports.adminPropertiesComposer = _adminPropertiesComposer;\n\nfunction _adminOffersComposer(props, onData) {\n  if (_Meteor.subscribe('allOffers').ready()) {\n    var offers = _Offers.find({}).fetch();\n\n    onData(null, {\n      offers: offers\n    });\n  }\n}\n\nexports.adminLoanComposer = _adminLoanComposer;\n\nfunction _adminActionsComposer(props, onData) {\n  if (_Meteor.subscribe('allAdminActions').ready()) {\n    var adminActions = _AdminActions.find({}).fetch();\n\n    onData(null, {\n      adminActions: adminActions\n    });\n  }\n}\n\nexports.adminUserComposer = _adminUserComposer;\n\nfunction _adminPropertiesComposer(props, onData) {\n  if (_Meteor.subscribe('allProperties').ready()) {\n    var properties = _Properties.find({}).fetch();\n\n    onData(null, {\n      properties: properties\n    });\n  }\n} // Get the loan specified in the URL, the user and the offers for it\n\n\nexports.adminOfferComposer = _adminOfferComposer;\n\nfunction _adminLoanComposer(props, onData) {\n  var loanId = props.match.params.loanId;\n\n  if (_Meteor.subscribe('loan', loanId).ready()) {\n    var loan = _Loans.find({\n      _id: loanId\n    }).fetch()[0];\n\n    if (_Meteor.subscribe('user', loan.userId).ready() && _Meteor.subscribe('loanOffers', loanId).ready() && _Meteor.subscribe('loanBorrowers', loan.borrowerIds).ready() && _Meteor.subscribe('property', loan.propertyId).ready()) {\n      var user = _Meteor.users.find({\n        _id: loan.userId\n      }).fetch()[0];\n\n      var offers = _Offers.find({\n        loanId: loanId\n      }).fetch();\n\n      var borrowers = _Borrowers.find({}).fetch();\n\n      var property = _Properties.find({}).fetch()[0];\n\n      onData(null, {\n        loan: loan,\n        user: user,\n        offers: offers,\n        borrowers: borrowers,\n        property: property\n      });\n    }\n  }\n} // Get the user and its associated loans and borrowers\n\n\nfunction _adminUserComposer(props, onData) {\n  var userId = props.match.params.userId;\n\n  if (_Meteor.subscribe('user', userId).ready()) {\n    var user = _Meteor.users.findOne(userId);\n\n    if (_Meteor.subscribe('userLoans', userId).ready() && _Meteor.subscribe('userBorrowers', userId).ready()) {\n      var loans = _Loans.find().fetch();\n\n      var propertyIds = loans && loans.map(function (r) {\n        return r.propertyId;\n      });\n\n      if (_Meteor.subscribe('userProperties', userId, propertyIds).ready()) {\n        var borrowers = _Borrowers.find().fetch();\n\n        var properties = _Properties.find().fetch();\n\n        onData(null, {\n          loans: loans,\n          user: user,\n          borrowers: borrowers,\n          properties: properties\n        });\n      }\n    }\n  }\n}\n\nfunction _adminOfferComposer(props, onData) {\n  var offerId = props.match.params.offerId;\n\n  if (_Meteor.subscribe('offer', offerId).ready()) {\n    var offer = _Offers.findOne({}); // .fetch();\n\n\n    onData(null, {\n      offer: offer\n    });\n  }\n}","map":{"version":3,"sources":["imports/core/containers/composers/AdminComposers.js"],"names":["module","export","adminLoansComposer","adminUsersComposer","adminOffersComposer","adminActionsComposer","adminPropertiesComposer","adminLoanComposer","adminUserComposer","adminOfferComposer","Meteor","watch","require","v","Loans","Offers","Borrowers","AdminActions","Properties","props","onData","subscribe","ready","loans","find","fetch","users","offers","adminActions","properties","loanId","match","params","loan","_id","userId","borrowerIds","propertyId","user","borrowers","property","findOne","propertyIds","map","r","offerId","offer"],"mappings":"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","file":"imports/core/containers/composers/AdminComposers.js.map","sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport { Loans, Offers, Borrowers, AdminActions, Properties } from '../../api';\n\nexport function adminLoansComposer(props, onData) {\n  if (Meteor.subscribe('allLoans').ready()) {\n    const loans = Loans.find({}).fetch();\n    onData(null, { loans });\n  }\n}\n\nexport function adminUsersComposer(props, onData) {\n  if (Meteor.subscribe('allUsers').ready()) {\n    const users = Meteor.users.find({}).fetch();\n    onData(null, { users });\n  }\n}\n\nexport function adminOffersComposer(props, onData) {\n  if (Meteor.subscribe('allOffers').ready()) {\n    const offers = Offers.find({}).fetch();\n    onData(null, { offers });\n  }\n}\n\nexport function adminActionsComposer(props, onData) {\n  if (Meteor.subscribe('allAdminActions').ready()) {\n    const adminActions = AdminActions.find({}).fetch();\n    onData(null, { adminActions });\n  }\n}\n\nexport function adminPropertiesComposer(props, onData) {\n  if (Meteor.subscribe('allProperties').ready()) {\n    const properties = Properties.find({}).fetch();\n    onData(null, { properties });\n  }\n}\n\n// Get the loan specified in the URL, the user and the offers for it\nexport function adminLoanComposer(props, onData) {\n  const { loanId } = props.match.params;\n\n  if (Meteor.subscribe('loan', loanId).ready()) {\n    const loan = Loans.find({ _id: loanId }).fetch()[0];\n\n    if (\n      Meteor.subscribe('user', loan.userId).ready() &&\n      Meteor.subscribe('loanOffers', loanId).ready() &&\n      Meteor.subscribe('loanBorrowers', loan.borrowerIds).ready() &&\n      Meteor.subscribe('property', loan.propertyId).ready()\n    ) {\n      const user = Meteor.users.find({ _id: loan.userId }).fetch()[0];\n      const offers = Offers.find({ loanId }).fetch();\n      const borrowers = Borrowers.find({}).fetch();\n      const property = Properties.find({}).fetch()[0];\n\n      onData(null, {\n        loan,\n        user,\n        offers,\n        borrowers,\n        property,\n      });\n    }\n  }\n}\n\n// Get the user and its associated loans and borrowers\nexport function adminUserComposer(props, onData) {\n  const { userId } = props.match.params;\n\n  if (Meteor.subscribe('user', userId).ready()) {\n    const user = Meteor.users.findOne(userId);\n    if (\n      Meteor.subscribe('userLoans', userId).ready() &&\n      Meteor.subscribe('userBorrowers', userId).ready()\n    ) {\n      const loans = Loans.find().fetch();\n      const propertyIds = loans && loans.map(r => r.propertyId);\n      if (Meteor.subscribe('userProperties', userId, propertyIds).ready()) {\n        const borrowers = Borrowers.find().fetch();\n        const properties = Properties.find().fetch();\n\n        onData(null, {\n          loans,\n          user,\n          borrowers,\n          properties,\n        });\n      }\n    }\n  }\n}\n\nexport function adminOfferComposer(props, onData) {\n  const { offerId } = props.match.params;\n\n  if (Meteor.subscribe('offer', offerId).ready()) {\n    const offer = Offers.findOne({}); // .fetch();\n\n    onData(null, { offer });\n  }\n}\n"]},"hash":"54d3788b183feaf5be6d8f8687d323e3f1f99aac"}
