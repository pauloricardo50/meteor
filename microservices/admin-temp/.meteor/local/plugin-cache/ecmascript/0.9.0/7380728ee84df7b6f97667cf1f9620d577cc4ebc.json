{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"../constants","imported":["SAFE_DOTTED_FIELD_REPLACEMENT"],"specifiers":[{"kind":"named","imported":"SAFE_DOTTED_FIELD_REPLACEMENT","local":"SAFE_DOTTED_FIELD_REPLACEMENT"}]},{"source":"dot-object","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"dot"}]}],"exports":{"exported":["aggregationResult"],"specifiers":[{"kind":"local","local":"aggregationResult","exported":"default"}]}}},"options":{"filename":"packages/cultofcoders:grapher/lib/query/hypernova/lib/snapBackDottedFields.js","filenameRelative":"packages/cultofcoders:grapher/lib/query/hypernova/lib/snapBackDottedFields.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/cultofcoders:grapher/lib/query/hypernova/lib/snapBackDottedFields.js.map","sourceFileName":"packages/cultofcoders:grapher/lib/query/hypernova/lib/snapBackDottedFields.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"snapBackDottedFields"},"ignored":false,"code":"let SAFE_DOTTED_FIELD_REPLACEMENT;\nmodule.watch(require(\"../constants\"), {\n    SAFE_DOTTED_FIELD_REPLACEMENT(v) {\n        SAFE_DOTTED_FIELD_REPLACEMENT = v;\n    }\n\n}, 0);\nlet dot;\nmodule.watch(require(\"dot-object\"), {\n    default(v) {\n        dot = v;\n    }\n\n}, 1);\nmodule.exportDefault(function (aggregationResult) {\n    aggregationResult.forEach(result => {\n        result.data = result.data.map(document => {\n            _.each(document, (value, key) => {\n                if (key.indexOf(SAFE_DOTTED_FIELD_REPLACEMENT) >= 0) {\n                    document[key.replace(SAFE_DOTTED_FIELD_REPLACEMENT, '.')] = value;\n                    delete document[key];\n                }\n            });\n\n            return dot.object(document);\n        });\n    });\n});","map":{"version":3,"sources":["packages/cultofcoders:grapher/lib/query/hypernova/lib/snapBackDottedFields.js"],"names":["SAFE_DOTTED_FIELD_REPLACEMENT","module","watch","require","v","dot","default","exportDefault","aggregationResult","forEach","result","data","map","document","_","each","value","key","indexOf","replace","object"],"mappings":"AAAA,IAAIA,6BAAJ;AAAkCC,OAAOC,KAAP,CAAaC,QAAQ,cAAR,CAAb,EAAqC;AAACH,kCAA8BI,CAA9B,EAAgC;AAACJ,wCAA8BI,CAA9B;AAAgC;;AAAlE,CAArC,EAAyG,CAAzG;AAA4G,IAAIC,GAAJ;AAAQJ,OAAOC,KAAP,CAAaC,QAAQ,YAAR,CAAb,EAAmC;AAACG,YAAQF,CAAR,EAAU;AAACC,cAAID,CAAJ;AAAM;;AAAlB,CAAnC,EAAuD,CAAvD;AAAtJH,OAAOM,aAAP,CAGe,UAAUC,iBAAV,EAA6B;AACxCA,sBAAkBC,OAAlB,CAA0BC,UAAU;AAChCA,eAAOC,IAAP,GAAcD,OAAOC,IAAP,CAAYC,GAAZ,CAAgBC,YAAY;AACtCC,cAAEC,IAAF,CAAOF,QAAP,EAAiB,CAACG,KAAD,EAAQC,GAAR,KAAgB;AAC7B,oBAAIA,IAAIC,OAAJ,CAAYlB,6BAAZ,KAA8C,CAAlD,EAAqD;AACjDa,6BAASI,IAAIE,OAAJ,CAAYnB,6BAAZ,EAA2C,GAA3C,CAAT,IAA4DgB,KAA5D;AACA,2BAAOH,SAASI,GAAT,CAAP;AACH;AACJ,aALD;;AAOA,mBAAOZ,IAAIe,MAAJ,CAAWP,QAAX,CAAP;AACH,SATa,CAAd;AAUH,KAXD;AAYH,CAhBD","file":"packages/cultofcoders:grapher/lib/query/hypernova/lib/snapBackDottedFields.js.map","sourcesContent":["import {SAFE_DOTTED_FIELD_REPLACEMENT} from '../constants';\nimport dot from 'dot-object';\n\nexport default function (aggregationResult) {\n    aggregationResult.forEach(result => {\n        result.data = result.data.map(document => {\n            _.each(document, (value, key) => {\n                if (key.indexOf(SAFE_DOTTED_FIELD_REPLACEMENT) >= 0) {\n                    document[key.replace(SAFE_DOTTED_FIELD_REPLACEMENT, '.')] = value;\n                    delete document[key];\n                }\n            });\n\n            return dot.object(document);\n        })\n    })\n}"]},"hash":"7380728ee84df7b6f97667cf1f9620d577cc4ebc"}
