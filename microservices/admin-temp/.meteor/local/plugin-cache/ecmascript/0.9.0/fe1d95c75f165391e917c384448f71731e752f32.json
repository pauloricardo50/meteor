{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","createClass","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"material-ui/Table","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"MuiTable"}]},{"source":"../Translation","imported":["T"],"specifiers":[{"kind":"named","imported":"T","local":"T"}]},{"source":"./TableHeader","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"TableHeader"}]},{"source":"./TableBody","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"TableBody"}]},{"source":"./TableFooter","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"TableFooter"}]}],"exports":{"exported":["Table"],"specifiers":[{"kind":"local","local":"Table","exported":"default"}]}}},"options":{"filename":"imports/core/components/Table/Table.jsx","filenameRelative":"imports/core/components/Table/Table.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/components/Table/Table.jsx.map","sourceFileName":"imports/core/components/Table/Table.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"Table"},"ignored":false,"code":"\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nmodule.export({\n  \"default\": function () {\n    function _default() {\n      return Table;\n    }\n\n    return _default;\n  }()\n});\n\nvar React = void 0,\n    _Component = void 0;\n\nmodule.watch(require(\"react\"), {\n  \"default\": function () {\n    function _default(v) {\n      React = v;\n    }\n\n    return _default;\n  }(),\n  Component: function () {\n    function Component(v) {\n      _Component = v;\n    }\n\n    return Component;\n  }()\n}, 0);\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function () {\n    function _default(v) {\n      PropTypes = v;\n    }\n\n    return _default;\n  }()\n}, 1);\nvar MuiTable = void 0;\nmodule.watch(require(\"material-ui/Table\"), {\n  \"default\": function () {\n    function _default(v) {\n      MuiTable = v;\n    }\n\n    return _default;\n  }()\n}, 2);\n\nvar _T = void 0;\n\nmodule.watch(require(\"../Translation\"), {\n  T: function () {\n    function T(v) {\n      _T = v;\n    }\n\n    return T;\n  }()\n}, 3);\nvar TableHeader = void 0;\nmodule.watch(require(\"./TableHeader\"), {\n  \"default\": function () {\n    function _default(v) {\n      TableHeader = v;\n    }\n\n    return _default;\n  }()\n}, 4);\nvar TableBody = void 0;\nmodule.watch(require(\"./TableBody\"), {\n  \"default\": function () {\n    function _default(v) {\n      TableBody = v;\n    }\n\n    return _default;\n  }()\n}, 5);\nvar TableFooter = void 0;\nmodule.watch(require(\"./TableFooter\"), {\n  \"default\": function () {\n    function _default(v) {\n      TableFooter = v;\n    }\n\n    return _default;\n  }()\n}, 6);\nvar ORDER = {\n  ASC: 'asc',\n  DESC: 'desc'\n};\n\nvar Table = function (_Component2) {\n  (0, _inherits3.default)(Table, _Component2);\n\n  function Table(props) {\n    (0, _classCallCheck3.default)(this, Table);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Table.__proto__ || Object.getPrototypeOf(Table)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.state = {\n      data: [],\n      selected: [],\n      order: ORDER.ASC,\n      orderBy: 0,\n      rowsPerPage: 10,\n      page: 0\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(Table, [{\n    key: \"componentDidMount\",\n    value: function () {\n      function componentDidMount() {\n        this.handleNewData(this.props);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function () {\n      function componentWillReceiveProps(nextProps) {\n        var _this2 = this;\n\n        var currentLength = this.state.data.length;\n        var nextLength = nextProps.rows.length; // Lazy check to see if data has different length\n        // FIXME should also check if all the data is the same, careful with sorting\n\n        if (nextLength !== currentLength) {\n          this.handleNewData(nextProps);\n        } else if (this.state.data && nextProps.rows) {\n          var differentProps = false;\n          nextProps.rows.every(function (row) {\n            if (!_this2.state.data.includes(row)) {\n              differentProps = true;\n            }\n          });\n\n          if (differentProps) {\n            this.handleNewData(nextProps);\n          }\n        } // If pagination is currently going on, make sure it is still needed\n\n\n        if (currentLength > 10 && nextLength <= 10) {\n          this.setState({\n            page: 0\n          });\n        }\n      }\n\n      return componentWillReceiveProps;\n    }()\n  }, {\n    key: \"render\",\n    value: function () {\n      function render() {\n        var _props = this.props,\n            columnOptions = _props.columnOptions,\n            selectable = _props.selectable,\n            sortable = _props.sortable,\n            selectAll = _props.selectAll,\n            style = _props.style,\n            noIntl = _props.noIntl,\n            clickable = _props.clickable;\n        var _state = this.state,\n            data = _state.data,\n            rowsPerPage = _state.rowsPerPage,\n            page = _state.page,\n            selected = _state.selected,\n            order = _state.order,\n            orderBy = _state.orderBy;\n        var rowCount = data.length;\n        return React.createElement(\n          \"div\",\n          {\n            className: \"mui-table\",\n            style: style\n          },\n          React.createElement(\n            MuiTable,\n            null,\n            React.createElement(TableHeader, {\n              columnOptions: columnOptions,\n              sortable: sortable,\n              onSelectAll: this.handleSelectAll,\n              onSort: this.handleSort,\n              selectAll: selectAll,\n              numSelected: selected ? selected.length : 0,\n              rowCount: rowCount,\n              noIntl: noIntl,\n              order: order,\n              orderBy: orderBy\n            }),\n            React.createElement(TableBody, {\n              data: data,\n              selectalbe: selectable,\n              columnOptions: columnOptions,\n              page: page,\n              rowsPerPage: rowsPerPage,\n              clickable: clickable\n            }),\n            rowCount > rowsPerPage && React.createElement(TableFooter, {\n              rowCount: rowCount,\n              rowsPerPage: rowsPerPage,\n              page: page,\n              onChangePage: this.handleChangePage,\n              onChangeRowsPerPage: this.handleChangeRowsPerPage\n            })\n          ),\n          data.length === 0 && React.createElement(\n            \"h3\",\n            {\n              className: \"secondary flex center\",\n              style: {\n                width: '100%',\n                padding: 32\n              }\n            },\n            React.createElement(_T, {\n              id: \"Table.empty\"\n            })\n          )\n        );\n      }\n\n      return render;\n    }()\n  }]);\n  return Table;\n}(_Component);\n\nvar _initialiseProps = function () {\n  function _initialiseProps() {\n    var _this3 = this;\n\n    this.handleNewData = function (props) {\n      var rows = props.rows,\n          columnOptions = props.columnOptions; // Make sure columns and rows are the same length\n\n      if (rows.length && columnOptions.length !== rows[0].columns.length) {\n        throw new Error('column length has to be correct in Table');\n      }\n\n      _this3.setState({\n        data: rows\n      }, function () {\n        return _this3.handleSort(_this3.state.orderBy);\n      });\n    };\n\n    this.handleSort = function (columnNb) {\n      var _state2 = _this3.state,\n          data = _state2.data,\n          order = _state2.order,\n          orderBy = _state2.orderBy;\n      var newOrderBy = columnNb;\n      var isReversed = void 0;\n\n      if (orderBy === newOrderBy) {\n        // Clicked a second time, reverse order\n        isReversed = order === ORDER.ASC;\n      } else {\n        // Initial order\n        isReversed = false;\n      }\n\n      var sortedData = data.sort(function (a, b) {\n        return b.columns[newOrderBy] > a.columns[newOrderBy] ? 1 : -1;\n      });\n      var sortedDataInCorrectOrder = isReversed ? sortedData.slice().reverse() : sortedData;\n\n      _this3.setState({\n        data: sortedDataInCorrectOrder,\n        order: isReversed ? ORDER.DESC : ORDER.ASC,\n        orderBy: newOrderBy\n      });\n    };\n\n    this.handleSelect = function (rowId) {\n      var selected = _this3.state.selected;\n      var selectedIndex = selected.indexOf(rowId);\n      var newSelected = [];\n\n      if (selectedIndex === -1) {\n        newSelected = newSelected.concat(selected, rowId);\n      } else if (selectedIndex === 0) {\n        newSelected = newSelected.concat(selected.slice(1));\n      } else if (selectedIndex === selected.length - 1) {\n        newSelected = newSelected.concat(selected.slice(0, -1));\n      } else if (selectedIndex > 0) {\n        newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\n      }\n\n      _this3.setState({\n        selected: newSelected\n      }, function () {\n        return _this3.props.onRowSelect(_this3.state.selected);\n      });\n    };\n\n    this.handleSelectAllClick = function (event, checked) {\n      if (checked) {\n        _this3.setState({\n          selected: _this3.state.data.map(function (n) {\n            return n.id;\n          })\n        });\n\n        return;\n      }\n\n      _this3.setState({\n        selected: []\n      });\n    };\n\n    this.handleChangePage = function (_, page) {\n      return _this3.setState({\n        page: page\n      });\n    };\n\n    this.handleChangeRowsPerPage = function (event) {\n      return _this3.setState({\n        rowsPerPage: event.target.value\n      });\n    };\n\n    this.isSelected = function (id) {\n      if (_this3.props.multiSelectable) {\n        return _this3.state.selected.indexOf(id) !== -1;\n      }\n\n      return _this3.props.selected === id;\n    };\n  }\n\n  return _initialiseProps;\n}();\n\nTable.propTypes = {\n  columnOptions: PropTypes.arrayOf(PropTypes.object).isRequired,\n  rows: PropTypes.arrayOf(PropTypes.object).isRequired,\n  selectable: PropTypes.bool,\n  multiSelectable: PropTypes.bool,\n  selectAll: PropTypes.bool,\n  onRowSelect: PropTypes.func,\n  selected: PropTypes.string,\n  sortable: PropTypes.bool,\n  style: PropTypes.object,\n  noIntl: PropTypes.bool,\n  clickable: PropTypes.bool // sets rows to change color on hover\n\n};\nTable.defaultProps = {\n  selectable: false,\n  multiSelectable: false,\n  selectAll: false,\n  onRowSelect: function () {\n    function onRowSelect() {}\n\n    return onRowSelect;\n  }(),\n  selected: undefined,\n  sortable: true,\n  style: {},\n  noIntl: false,\n  clickable: false\n};","map":{"version":3,"sources":["imports/core/components/Table/Table.jsx"],"names":["module","export","Table","React","Component","watch","require","v","PropTypes","MuiTable","T","TableHeader","TableBody","TableFooter","ORDER","ASC","DESC","props","state","data","selected","order","orderBy","rowsPerPage","page","handleNewData","nextProps","currentLength","length","nextLength","rows","differentProps","every","row","includes","setState","columnOptions","selectable","sortable","selectAll","style","noIntl","clickable","rowCount","handleSelectAll","handleSort","handleChangePage","handleChangeRowsPerPage","width","padding","columns","Error","columnNb","newOrderBy","isReversed","sortedData","sort","a","b","sortedDataInCorrectOrder","slice","reverse","handleSelect","rowId","selectedIndex","indexOf","newSelected","concat","onRowSelect","handleSelectAllClick","event","checked","map","n","id","_","target","value","isSelected","multiSelectable","propTypes","arrayOf","object","isRequired","bool","func","string","defaultProps","undefined"],"mappings":"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","file":"imports/core/components/Table/Table.jsx.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport MuiTable from 'material-ui/Table';\n\nimport { T } from 'core/components/Translation';\n\nimport TableHeader from './TableHeader';\nimport TableBody from './TableBody';\nimport TableFooter from './TableFooter';\n\nconst ORDER = {\n  ASC: 'asc',\n  DESC: 'desc',\n};\n\nexport default class Table extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      selected: [],\n      order: ORDER.ASC,\n      orderBy: 0,\n      rowsPerPage: 10,\n      page: 0,\n    };\n  }\n\n  componentDidMount() {\n    this.handleNewData(this.props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const currentLength = this.state.data.length;\n    const nextLength = nextProps.rows.length;\n    // Lazy check to see if data has different length\n    // FIXME should also check if all the data is the same, careful with sorting\n    if (nextLength !== currentLength) {\n      this.handleNewData(nextProps);\n    } else if (this.state.data && nextProps.rows) {\n      let differentProps = false;\n      nextProps.rows.every((row) => {\n        if (!this.state.data.includes(row)) {\n          differentProps = true;\n        }\n      });\n\n      if (differentProps) {\n        this.handleNewData(nextProps);\n      }\n    }\n\n    // If pagination is currently going on, make sure it is still needed\n    if (currentLength > 10 && nextLength <= 10) {\n      this.setState({ page: 0 });\n    }\n  }\n\n  handleNewData = (props) => {\n    const { rows, columnOptions } = props;\n    // Make sure columns and rows are the same length\n    if (rows.length && columnOptions.length !== rows[0].columns.length) {\n      throw new Error('column length has to be correct in Table');\n    }\n\n    this.setState({ data: rows }, () => this.handleSort(this.state.orderBy));\n  };\n\n  handleSort = (columnNb) => {\n    const { data, order, orderBy } = this.state;\n    const newOrderBy = columnNb;\n    let isReversed;\n\n    if (orderBy === newOrderBy) {\n      // Clicked a second time, reverse order\n      isReversed = order === ORDER.ASC;\n    } else {\n      // Initial order\n      isReversed = false;\n    }\n\n    const sortedData = data.sort((a, b) => (b.columns[newOrderBy] > a.columns[newOrderBy] ? 1 : -1));\n    const sortedDataInCorrectOrder = isReversed\n      ? sortedData.slice().reverse()\n      : sortedData;\n\n    this.setState({\n      data: sortedDataInCorrectOrder,\n      order: isReversed ? ORDER.DESC : ORDER.ASC,\n      orderBy: newOrderBy,\n    });\n  };\n\n  handleSelect = (rowId) => {\n    const { selected } = this.state;\n    const selectedIndex = selected.indexOf(rowId);\n    let newSelected = [];\n\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, rowId);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(\n        selected.slice(0, selectedIndex),\n        selected.slice(selectedIndex + 1),\n      );\n    }\n\n    this.setState({ selected: newSelected }, () =>\n      this.props.onRowSelect(this.state.selected));\n  };\n\n  handleSelectAllClick = (event, checked) => {\n    if (checked) {\n      this.setState({ selected: this.state.data.map(n => n.id) });\n      return;\n    }\n    this.setState({ selected: [] });\n  };\n\n  handleChangePage = (_, page) => this.setState({ page });\n\n  handleChangeRowsPerPage = event =>\n    this.setState({ rowsPerPage: event.target.value });\n\n  isSelected = (id) => {\n    if (this.props.multiSelectable) {\n      return this.state.selected.indexOf(id) !== -1;\n    }\n\n    return this.props.selected === id;\n  };\n\n  render() {\n    const {\n      columnOptions,\n      selectable,\n      sortable,\n      selectAll,\n      style,\n      noIntl,\n      clickable,\n    } = this.props;\n    const { data, rowsPerPage, page, selected, order, orderBy } = this.state;\n    const rowCount = data.length;\n\n    return (\n      <div className=\"mui-table\" style={style}>\n        <MuiTable>\n          <TableHeader\n            columnOptions={columnOptions}\n            sortable={sortable}\n            onSelectAll={this.handleSelectAll}\n            onSort={this.handleSort}\n            selectAll={selectAll}\n            numSelected={selected ? selected.length : 0}\n            rowCount={rowCount}\n            noIntl={noIntl}\n            order={order}\n            orderBy={orderBy}\n          />\n          <TableBody\n            data={data}\n            selectalbe={selectable}\n            columnOptions={columnOptions}\n            page={page}\n            rowsPerPage={rowsPerPage}\n            clickable={clickable}\n          />\n          {rowCount > rowsPerPage && (\n            <TableFooter\n              rowCount={rowCount}\n              rowsPerPage={rowsPerPage}\n              page={page}\n              onChangePage={this.handleChangePage}\n              onChangeRowsPerPage={this.handleChangeRowsPerPage}\n            />\n          )}\n        </MuiTable>\n        {data.length === 0 && (\n          <h3\n            className=\"secondary flex center\"\n            style={{ width: '100%', padding: 32 }}\n          >\n            <T id=\"Table.empty\" />\n          </h3>\n        )}\n      </div>\n    );\n  }\n}\n\nTable.propTypes = {\n  columnOptions: PropTypes.arrayOf(PropTypes.object).isRequired,\n  rows: PropTypes.arrayOf(PropTypes.object).isRequired,\n  selectable: PropTypes.bool,\n  multiSelectable: PropTypes.bool,\n  selectAll: PropTypes.bool,\n  onRowSelect: PropTypes.func,\n  selected: PropTypes.string,\n  sortable: PropTypes.bool,\n  style: PropTypes.object,\n  noIntl: PropTypes.bool,\n  clickable: PropTypes.bool, // sets rows to change color on hover\n};\n\nTable.defaultProps = {\n  selectable: false,\n  multiSelectable: false,\n  selectAll: false,\n  onRowSelect: () => {},\n  selected: undefined,\n  sortable: true,\n  style: {},\n  noIntl: false,\n  clickable: false,\n};\n"]},"hash":"fe1d95c75f165391e917c384448f71731e752f32"}
