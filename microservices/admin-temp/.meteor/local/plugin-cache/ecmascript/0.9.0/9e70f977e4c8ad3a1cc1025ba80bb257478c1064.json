{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"react-dom/server","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"ReactDOMServer"}]},{"source":"html-pdf","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"pdf"}]},{"source":"fs","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"fs"}]}],"exports":{"exported":["generateComponentAsPDF"],"specifiers":[{"kind":"local","local":"generateComponentAsPDF","exported":"generateComponentAsPDF"}]}}},"options":{"filename":"imports/core/utils/generate-pdf.js","filenameRelative":"imports/core/utils/generate-pdf.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/utils/generate-pdf.js.map","sourceFileName":"imports/core/utils/generate-pdf.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"generate-pdf"},"ignored":false,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nmodule.export({\n  generateComponentAsPDF: function generateComponentAsPDF() {\n    return _generateComponentAsPDF;\n  }\n});\nvar ReactDOMServer = void 0;\nmodule.watch(require(\"react-dom/server\"), {\n  default: function _default(v) {\n    ReactDOMServer = v;\n  }\n}, 0);\nvar pdf = void 0;\nmodule.watch(require(\"html-pdf\"), {\n  default: function _default(v) {\n    pdf = v;\n  }\n}, 1);\nvar fs = void 0;\nmodule.watch(require(\"fs\"), {\n  default: function _default(v) {\n    fs = v;\n  }\n}, 2);\nvar thisModule = void 0;\n\nvar getBase64String = function getBase64String(path) {\n  try {\n    var file = fs.readFileSync(path);\n    return new Buffer(file).toString('base64');\n  } catch (exception) {\n    thisModule.reject(exception);\n  }\n};\n\nexports.generateComponentAsPDF = _generateComponentAsPDF;\n\nvar generatePDF = function generatePDF(html, fileName) {\n  try {\n    pdf.create(html, {\n      format: 'A4',\n      border: {\n        top: '1in',\n        right: '1in',\n        bottom: '1in',\n        left: '1in'\n      }\n    }).toFile(\"./tmp/\" + fileName, function (error, response) {\n      if (error) {\n        thisModule.reject(error);\n      } else {\n        thisModule.resolve({\n          fileName: fileName,\n          base64: getBase64String(response.filename)\n        });\n        fs.unlink(response.filename);\n      }\n    });\n  } catch (exception) {\n    thisModule.reject(exception);\n  }\n};\n\nvar getComponentAsHTML = function getComponentAsHTML(component, props) {\n  try {\n    return ReactDOMServer.renderToStaticMarkup(component(props));\n  } catch (exception) {\n    thisModule.reject(exception);\n  }\n};\n\nvar handler = function handler(_ref, promise) {\n  var component = _ref.component,\n      props = _ref.props,\n      fileName = _ref.fileName;\n  thisModule = promise;\n  var html = getComponentAsHTML(component, props);\n\n  if (html && fileName) {\n    generatePDF(html, fileName);\n  }\n};\n\nvar _generateComponentAsPDF = function _generateComponentAsPDF(options) {\n  return new Promise(function (resolve, reject) {\n    return handler(options, {\n      resolve: resolve,\n      reject: reject\n    });\n  });\n};","map":{"version":3,"sources":["imports/core/utils/generate-pdf.js"],"names":["module","export","generateComponentAsPDF","ReactDOMServer","watch","require","default","v","pdf","fs","thisModule","getBase64String","path","file","readFileSync","Buffer","toString","exception","reject","generatePDF","html","fileName","create","format","border","top","right","bottom","left","toFile","error","response","resolve","base64","filename","unlink","getComponentAsHTML","component","props","renderToStaticMarkup","handler","promise","Promise","options"],"mappings":";;;;;AAAAA,OAAOC,MAAP,CAAc;AAACC,0BAAuB;AAAA,WAAIA,uBAAJ;AAAA;AAAxB,CAAd;AAAmE,IAAIC,uBAAJ;AAAmBH,OAAOI,KAAP,CAAaC,QAAQ,kBAAR,CAAb,EAAyC;AAACC,SAAD,oBAASC,CAAT,EAAW;AAACJ,qBAAeI,CAAf;AAAiB;AAA7B,CAAzC,EAAwE,CAAxE;AAA2E,IAAIC,YAAJ;AAAQR,OAAOI,KAAP,CAAaC,QAAQ,UAAR,CAAb,EAAiC;AAACC,SAAD,oBAASC,CAAT,EAAW;AAACC,UAAID,CAAJ;AAAM;AAAlB,CAAjC,EAAqD,CAArD;AAAwD,IAAIE,WAAJ;AAAOT,OAAOI,KAAP,CAAaC,QAAQ,IAAR,CAAb,EAA2B;AAACC,SAAD,oBAASC,CAAT,EAAW;AAACE,SAAGF,CAAH;AAAK;AAAjB,CAA3B,EAA8C,CAA9C;AAIxO,IAAIG,mBAAJ;;AAEA,IAAMC,kBAAkB,SAAlBA,eAAkB,CAACC,IAAD,EAAU;AAChC,MAAI;AACF,QAAMC,OAAOJ,GAAGK,YAAH,CAAgBF,IAAhB,CAAb;AACA,WAAO,IAAIG,MAAJ,CAAWF,IAAX,EAAiBG,QAAjB,CAA0B,QAA1B,CAAP;AACD,GAHD,CAGE,OAAOC,SAAP,EAAkB;AAClBP,eAAWQ,MAAX,CAAkBD,SAAlB;AACD;AACF,CAPD;;;;AASA,IAAME,cAAc,SAAdA,WAAc,CAACC,IAAD,EAAOC,QAAP,EAAoB;AACtC,MAAI;AACFb,QACGc,MADH,CACUF,IADV,EACgB;AACZG,cAAQ,IADI;AAEZC,cAAQ;AAAEC,aAAK,KAAP;AAAcC,eAAO,KAArB;AAA4BC,gBAAQ,KAApC;AAA2CC,cAAM;AAAjD;AAFI,KADhB,EAKGC,MALH,YAKmBR,QALnB,EAK+B,UAACS,KAAD,EAAQC,QAAR,EAAqB;AAChD,UAAID,KAAJ,EAAW;AACTpB,mBAAWQ,MAAX,CAAkBY,KAAlB;AACD,OAFD,MAEO;AACLpB,mBAAWsB,OAAX,CAAmB;AACjBX,4BADiB;AAEjBY,kBAAQtB,gBAAgBoB,SAASG,QAAzB;AAFS,SAAnB;AAIAzB,WAAG0B,MAAH,CAAUJ,SAASG,QAAnB;AACD;AACF,KAfH;AAgBD,GAjBD,CAiBE,OAAOjB,SAAP,EAAkB;AAClBP,eAAWQ,MAAX,CAAkBD,SAAlB;AACD;AACF,CArBD;;AAuBA,IAAMmB,qBAAqB,SAArBA,kBAAqB,CAACC,SAAD,EAAYC,KAAZ,EAAsB;AAC/C,MAAI;AACF,WAAOnC,eAAeoC,oBAAf,CAAoCF,UAAUC,KAAV,CAApC,CAAP;AACD,GAFD,CAEE,OAAOrB,SAAP,EAAkB;AAClBP,eAAWQ,MAAX,CAAkBD,SAAlB;AACD;AACF,CAND;;AAQA,IAAMuB,UAAU,SAAVA,OAAU,OAAiCC,OAAjC,EAA6C;AAAA,MAA1CJ,SAA0C,QAA1CA,SAA0C;AAAA,MAA/BC,KAA+B,QAA/BA,KAA+B;AAAA,MAAxBjB,QAAwB,QAAxBA,QAAwB;AAC3DX,eAAa+B,OAAb;AACA,MAAMrB,OAAOgB,mBAAmBC,SAAnB,EAA8BC,KAA9B,CAAb;;AACA,MAAIlB,QAAQC,QAAZ,EAAsB;AACpBF,gBAAYC,IAAZ,EAAkBC,QAAlB;AACD;AACF,CAND;;AAQO,IAAMnB,0BAAyB,SAAzBA,uBAAyB;AAAA,SACpC,IAAIwC,OAAJ,CAAY,UAACV,OAAD,EAAUd,MAAV;AAAA,WAAqBsB,QAAQG,OAAR,EAAiB;AAAEX,sBAAF;AAAWd;AAAX,KAAjB,CAArB;AAAA,GAAZ,CADoC;AAAA,CAA/B","file":"imports/core/utils/generate-pdf.js.map","sourcesContent":["import ReactDOMServer from 'react-dom/server';\nimport pdf from 'html-pdf';\nimport fs from 'fs';\n\nlet thisModule;\n\nconst getBase64String = (path) => {\n  try {\n    const file = fs.readFileSync(path);\n    return new Buffer(file).toString('base64');\n  } catch (exception) {\n    thisModule.reject(exception);\n  }\n};\n\nconst generatePDF = (html, fileName) => {\n  try {\n    pdf\n      .create(html, {\n        format: 'A4',\n        border: { top: '1in', right: '1in', bottom: '1in', left: '1in' },\n      })\n      .toFile(`./tmp/${fileName}`, (error, response) => {\n        if (error) {\n          thisModule.reject(error);\n        } else {\n          thisModule.resolve({\n            fileName,\n            base64: getBase64String(response.filename),\n          });\n          fs.unlink(response.filename);\n        }\n      });\n  } catch (exception) {\n    thisModule.reject(exception);\n  }\n};\n\nconst getComponentAsHTML = (component, props) => {\n  try {\n    return ReactDOMServer.renderToStaticMarkup(component(props));\n  } catch (exception) {\n    thisModule.reject(exception);\n  }\n};\n\nconst handler = ({ component, props, fileName }, promise) => {\n  thisModule = promise;\n  const html = getComponentAsHTML(component, props);\n  if (html && fileName) {\n    generatePDF(html, fileName);\n  }\n};\n\nexport const generateComponentAsPDF = options =>\n  new Promise((resolve, reject) => handler(options, { resolve, reject }));\n"]},"hash":"9e70f977e4c8ad3a1cc1025ba80bb257478c1064"}
