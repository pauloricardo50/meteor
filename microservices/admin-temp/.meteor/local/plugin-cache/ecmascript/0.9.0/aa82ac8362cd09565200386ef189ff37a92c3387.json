{"metadata":{"usedHelpers":["classCallCheck","extends","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"..","imported":["Offers"],"specifiers":[{"kind":"named","imported":"Offers","local":"Offers"}]},{"source":"../security","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Security"}]}],"exports":{"exported":["_class"],"specifiers":[{"kind":"local","local":"_class","exported":"default"}]}}},"options":{"filename":"imports/core/api/offers/OfferService.js","filenameRelative":"imports/core/api/offers/OfferService.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/api/offers/OfferService.js.map","sourceFileName":"imports/core/api/offers/OfferService.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"OfferService"},"ignored":false,"code":"\"use strict\";\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.export({\n  default: function _default() {\n    return _class;\n  }\n});\n\nvar _Offers = void 0;\n\nmodule.watch(require(\"..\"), {\n  Offers: function Offers(v) {\n    _Offers = v;\n  }\n}, 0);\nvar Security = void 0;\nmodule.watch(require(\"../security\"), {\n  default: function _default(v) {\n    Security = v;\n  }\n}, 1);\n\nvar _class = function _class() {\n  (0, _classCallCheck3.default)(this, _class);\n};\n\n_class.update = function (_ref) {\n  var offerId = _ref.offerId,\n      offer = _ref.offer;\n  return _Offers.update(offerId, {\n    $set: offer\n  });\n};\n\n_class.insert = function (_ref2) {\n  var offer = _ref2.offer,\n      userId = _ref2.userId;\n  return _Offers.insert((0, _extends3.default)({}, offer, {\n    userId: userId\n  }));\n};\n\n_class.insertAdminOffer = function (_ref3) {\n  var offer = _ref3.offer,\n      loan = _ref3.loan,\n      userId = _ref3.userId;\n  return _Offers.insert((0, _extends3.default)({}, offer, {\n    userId: userId,\n    isAdmin: true,\n    auctionEndTime: loan.logic.auction.endTime,\n    // this doesn't update when the loan is ended prematurely by an admin\n    canton: 'GE',\n    loanId: loan._id\n  }));\n};\n\n_class.remove = function (_ref4) {\n  var offerId = _ref4.offerId;\n  return _Offers.remove(offerId);\n};","map":{"version":3,"sources":["imports/core/api/offers/OfferService.js"],"names":["module","export","default","_class","Offers","watch","require","v","Security","update","offerId","offer","$set","insert","userId","insertAdminOffer","loan","isAdmin","auctionEndTime","logic","auction","endTime","canton","loanId","_id","remove"],"mappings":";;;;;;;;;;;;AAAAA,OAAOC,MAAP,CAAc;AAACC,WAAQ;AAAA,WAAIC,MAAJ;AAAA;AAAT,CAAd;;AAAoC,IAAIC,gBAAJ;;AAAWJ,OAAOK,KAAP,CAAaC,QAAQ,IAAR,CAAb,EAA2B;AAACF,QAAD,kBAAQG,CAAR,EAAU;AAACH,cAAOG,CAAP;AAAS;AAApB,CAA3B,EAAiD,CAAjD;AAAoD,IAAIC,iBAAJ;AAAaR,OAAOK,KAAP,CAAaC,QAAQ,aAAR,CAAb,EAAoC;AAACJ,SAAD,oBAASK,CAAT,EAAW;AAACC,eAASD,CAAT;AAAW;AAAvB,CAApC,EAA6D,CAA7D;;;;;;OAIvGE,M,GAAS;AAAA,MAAGC,OAAH,QAAGA,OAAH;AAAA,MAAYC,KAAZ,QAAYA,KAAZ;AAAA,SACdP,QAAOK,MAAP,CAAcC,OAAd,EAAuB;AAAEE,UAAMD;AAAR,GAAvB,CADc;AAAA,C;;OAGTE,M,GAAS;AAAA,MAAGF,KAAH,SAAGA,KAAH;AAAA,MAAUG,MAAV,SAAUA,MAAV;AAAA,SAAuBV,QAAOS,MAAP,4BAAmBF,KAAnB;AAA0BG;AAA1B,KAAvB;AAAA,C;;OAETC,gB,GAAmB;AAAA,MAAGJ,KAAH,SAAGA,KAAH;AAAA,MAAUK,IAAV,SAAUA,IAAV;AAAA,MAAgBF,MAAhB,SAAgBA,MAAhB;AAAA,SACxBV,QAAOS,MAAP,4BACKF,KADL;AAEEG,kBAFF;AAGEG,aAAS,IAHX;AAIEC,oBAAgBF,KAAKG,KAAL,CAAWC,OAAX,CAAmBC,OAJrC;AAKE;AACAC,YAAQ,IANV;AAOEC,YAAQP,KAAKQ;AAPf,KADwB;AAAA,C;;OAWnBC,M,GAAS;AAAA,MAAGf,OAAH,SAAGA,OAAH;AAAA,SAAiBN,QAAOqB,MAAP,CAAcf,OAAd,CAAjB;AAAA,C","file":"imports/core/api/offers/OfferService.js.map","sourcesContent":["import { Offers } from 'core/api';\nimport Security from 'core/api/security';\n\nexport default class {\n  static update = ({ offerId, offer }) =>\n    Offers.update(offerId, { $set: offer });\n\n  static insert = ({ offer, userId }) => Offers.insert({ ...offer, userId });\n\n  static insertAdminOffer = ({ offer, loan, userId }) =>\n    Offers.insert({\n      ...offer,\n      userId,\n      isAdmin: true,\n      auctionEndTime: loan.logic.auction.endTime,\n      // this doesn't update when the loan is ended prematurely by an admin\n      canton: 'GE',\n      loanId: loan._id,\n    });\n\n  static remove = ({ offerId }) => Offers.remove(offerId);\n}\n"]},"hash":"aa82ac8362cd09565200386ef189ff37a92c3387"}
