{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","createClass","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"react-highcharts","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"ReactHighcharts"}]},{"source":"react-intl","imported":["injectIntl"],"specifiers":[{"kind":"named","imported":"injectIntl","local":"injectIntl"}]},{"source":"../../utils/finance-math","imported":["getAmortization","getInterests"],"specifiers":[{"kind":"named","imported":"getAmortization","local":"getAmortization"},{"kind":"named","imported":"getInterests","local":"getInterests"}]},{"source":"../../utils/loanFunctions","imported":["getLoanValue","getMaintenance","getPropAndWork"],"specifiers":[{"kind":"named","imported":"getLoanValue","local":"getLoanValue"},{"kind":"named","imported":"getMaintenance","local":"getMaintenance"},{"kind":"named","imported":"getPropAndWork","local":"getPropAndWork"}]},{"source":"../../config/colors","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"colors"}]},{"source":"../../containers/withLoan","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"withLoan"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/core/components/charts/AmortizationChart.jsx","filenameRelative":"imports/core/components/charts/AmortizationChart.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/components/charts/AmortizationChart.jsx.map","sourceFileName":"imports/core/components/charts/AmortizationChart.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"AmortizationChart"},"ignored":false,"code":"\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  default: function _default(v) {\n    PropTypes = v;\n  }\n}, 0);\n\nvar React = void 0,\n    _Component = void 0;\n\nmodule.watch(require(\"react\"), {\n  default: function _default(v) {\n    React = v;\n  },\n  Component: function Component(v) {\n    _Component = v;\n  }\n}, 1);\nvar ReactHighcharts = void 0;\nmodule.watch(require(\"react-highcharts\"), {\n  default: function _default(v) {\n    ReactHighcharts = v;\n  }\n}, 2);\n\nvar _injectIntl = void 0;\n\nmodule.watch(require(\"react-intl\"), {\n  injectIntl: function injectIntl(v) {\n    _injectIntl = v;\n  }\n}, 3);\n\nvar _getAmortization = void 0,\n    _getInterests = void 0;\n\nmodule.watch(require(\"../../utils/finance-math\"), {\n  getAmortization: function getAmortization(v) {\n    _getAmortization = v;\n  },\n  getInterests: function getInterests(v) {\n    _getInterests = v;\n  }\n}, 4);\n\nvar _getLoanValue = void 0,\n    _getMaintenance = void 0,\n    _getPropAndWork = void 0;\n\nmodule.watch(require(\"../../utils/loanFunctions\"), {\n  getLoanValue: function getLoanValue(v) {\n    _getLoanValue = v;\n  },\n  getMaintenance: function getMaintenance(v) {\n    _getMaintenance = v;\n  },\n  getPropAndWork: function getPropAndWork(v) {\n    _getPropAndWork = v;\n  }\n}, 5);\nvar colors = void 0;\nmodule.watch(require(\"../../config/colors\"), {\n  default: function _default(v) {\n    colors = v;\n  }\n}, 6);\nvar withLoan = void 0;\nmodule.watch(require(\"../../containers/withLoan\"), {\n  default: function _default(v) {\n    withLoan = v;\n  }\n}, 7);\nvar chartColors = {\n  debt: colors.charts[0],\n  fortune: colors.charts[2],\n  payment: colors.charts[1],\n  amortization: colors.charts[4]\n};\n\nvar getData = function getData(_ref) {\n  var loan = _ref.loan,\n      borrowers = _ref.borrowers,\n      totalYears = _ref.totalYears,\n      interestRates = _ref.interestRates,\n      property = _ref.property;\n\n  var _getAmortization2 = _getAmortization({\n    loan: loan,\n    borrowers: borrowers,\n    property: property\n  }),\n      amortization = _getAmortization2.amortization,\n      years = _getAmortization2.years;\n\n  var maintenance = _getMaintenance({\n    loan: loan,\n    property: property\n  });\n\n  var loanValue = _getLoanValue({\n    loan: loan,\n    property: property\n  });\n\n  var propAndWork = _getPropAndWork({\n    loan: loan,\n    property: property\n  });\n\n  var debt = [];\n  var fortune = [];\n  var payment = [];\n  var amortizationChart = [];\n\n  for (var i = 0; i <= totalYears; i += 1) {\n    var value = void 0;\n    var amort = void 0;\n\n    if (i <= years) {\n      value = loanValue - i * (amortization * 12);\n      amort = amortization;\n    } else if (i > 0) {\n      // make sure we're not trying to access debt[-1]\n      value = debt[i - 1];\n      amort = 0;\n    } else {\n      value = loanValue;\n      amort = 0;\n    }\n\n    debt[i] = Math.round(value);\n    fortune[i] = Math.round(propAndWork - value);\n    payment[i] = Math.round(amort + maintenance + _getInterests({\n      loan: loan,\n      property: property\n    }, interestRates[i], value));\n    amortizationChart[i] = Math.round(amort);\n  }\n\n  return {\n    debt: debt,\n    fortune: fortune,\n    payment: payment,\n    amortization: amortizationChart\n  };\n};\n\nvar AmortizationChart = function (_Component2) {\n  (0, _inherits3.default)(AmortizationChart, _Component2);\n\n  function AmortizationChart() {\n    var _ref2;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, AmortizationChart);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref2 = AmortizationChart.__proto__ || Object.getPrototypeOf(AmortizationChart)).call.apply(_ref2, [this].concat(args))), _this), _this.getConfig = function () {\n      var f = _this.props.intl.formatMessage;\n\n      var _getData = getData(_this.props),\n          debt = _getData.debt,\n          fortune = _getData.fortune,\n          payment = _getData.payment,\n          amortization = _getData.amortization;\n\n      return {\n        chart: {\n          height: 600\n        },\n        title: {\n          text: f({\n            id: 'AmortizationChart.title'\n          })\n        },\n        plotOptions: {\n          area: {\n            stacking: 'normal'\n          },\n          series: {\n            pointStart: new Date().getFullYear()\n          }\n        },\n        yAxis: [{\n          // Primary axis\n          title: {\n            text: f({\n              id: 'AmortizationChart.yAxis1'\n            })\n          }\n        }, {\n          // Secondary axis\n          title: {\n            text: f({\n              id: 'AmortizationChart.yAxis2'\n            }),\n            style: {\n              color: chartColors.payment\n            }\n          },\n          opposite: true,\n          max: Math.max.apply(Math, _toConsumableArray(payment)) * 1.5,\n          min: 0\n        }],\n        tooltip: {\n          shared: true\n        },\n        series: [{\n          name: f({\n            id: 'AmortizationChart.fortuneSeries'\n          }),\n          type: 'area',\n          data: fortune,\n          yAxis: 0,\n          color: chartColors.fortune\n        }, {\n          name: f({\n            id: 'AmortizationChart.debtSeries'\n          }),\n          type: 'area',\n          data: debt,\n          yAxis: 0,\n          color: chartColors.debt\n        }, {\n          name: f({\n            id: 'AmortizationChart.paymentSeries'\n          }),\n          type: 'line',\n          data: payment,\n          yAxis: 1,\n          color: chartColors.payment\n        }, {\n          name: f({\n            id: 'AmortizationChart.amortizationSeries'\n          }),\n          type: 'line',\n          data: amortization,\n          yAxis: 1,\n          color: chartColors.amortization\n        }],\n        responsive: {\n          rules: [{\n            condition: {\n              maxWidth: 768\n            },\n            chartOptions: {\n              yAxis: [{\n                labels: {\n                  enabled: false\n                },\n                title: {\n                  text: null\n                }\n              }, {\n                labels: {\n                  enabled: false\n                },\n                title: {\n                  text: null\n                }\n              }]\n            }\n          }, {\n            condition: {\n              minWidth: 769\n            },\n            chartOptions: {\n              yAxis: [{\n                labels: {\n                  enabled: true\n                },\n                title: {\n                  text: f({\n                    id: 'AmortizationChart.yAxis1'\n                  })\n                }\n              }, {\n                labels: {\n                  enabled: true\n                },\n                title: {\n                  text: f({\n                    id: 'AmortizationChart.yAxis2'\n                  })\n                }\n              }]\n            }\n          }]\n        },\n        credits: {\n          enabled: false\n        }\n      };\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n\n  (0, _createClass3.default)(AmortizationChart, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\n        \"div\",\n        {\n          id: \"amortizationChart\"\n        },\n        React.createElement(ReactHighcharts, {\n          config: this.getConfig(),\n          ref: function ref(c) {\n            _this2.chart = c;\n          }\n        })\n      );\n    }\n  }]);\n  return AmortizationChart;\n}(_Component);\n\nAmortizationChart.propTypes = {\n  loan: PropTypes.objectOf(PropTypes.any).isRequired,\n  borrowers: PropTypes.arrayOf(PropTypes.object).isRequired,\n  property: PropTypes.objectOf(PropTypes.any).isRequired,\n  totalYears: PropTypes.number\n};\nAmortizationChart.defaultProps = {\n  totalYears: 20\n};\nmodule.exportDefault(_injectIntl(withLoan(AmortizationChart)));","map":{"version":3,"sources":["imports/core/components/charts/AmortizationChart.jsx"],"names":["PropTypes","module","watch","require","default","v","React","Component","ReactHighcharts","injectIntl","getAmortization","getInterests","getLoanValue","getMaintenance","getPropAndWork","colors","withLoan","chartColors","debt","charts","fortune","payment","amortization","getData","loan","borrowers","totalYears","interestRates","property","years","maintenance","loanValue","propAndWork","amortizationChart","i","value","amort","Math","round","AmortizationChart","getConfig","f","props","intl","formatMessage","chart","height","title","text","id","plotOptions","area","stacking","series","pointStart","Date","getFullYear","yAxis","style","color","opposite","max","min","tooltip","shared","name","type","data","responsive","rules","condition","maxWidth","chartOptions","labels","enabled","minWidth","credits","c","propTypes","objectOf","any","isRequired","arrayOf","object","number","defaultProps","exportDefault"],"mappings":"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","file":"imports/core/components/charts/AmortizationChart.jsx.map","sourcesContent":["import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport ReactHighcharts from 'react-highcharts';\n// import ReactHighstock from 'react-highcharts/ReactHighstock';\n// const ReactHighcharts = require('react-highcharts').withHighcharts(ReactHighstock);\n\nimport { injectIntl } from 'react-intl';\n\nimport { getAmortization, getInterests } from 'core/utils/finance-math';\nimport {\n  getLoanValue,\n  getMaintenance,\n  getPropAndWork,\n} from 'core/utils/loanFunctions';\nimport colors from 'core/config/colors';\nimport withLoan from 'core/containers/withLoan';\n\nconst chartColors = {\n  debt: colors.charts[0],\n  fortune: colors.charts[2],\n  payment: colors.charts[1],\n  amortization: colors.charts[4],\n};\n\nconst getData = ({ loan, borrowers, totalYears, interestRates, property }) => {\n  const { amortization, years } = getAmortization({\n    loan,\n    borrowers,\n    property,\n  });\n  const maintenance = getMaintenance({ loan, property });\n  const loanValue = getLoanValue({ loan, property });\n  const propAndWork = getPropAndWork({ loan, property });\n\n  const debt = [];\n  const fortune = [];\n  const payment = [];\n  const amortizationChart = [];\n\n  for (let i = 0; i <= totalYears; i += 1) {\n    let value;\n    let amort;\n    if (i <= years) {\n      value = loanValue - i * (amortization * 12);\n      amort = amortization;\n    } else if (i > 0) {\n      // make sure we're not trying to access debt[-1]\n      value = debt[i - 1];\n      amort = 0;\n    } else {\n      value = loanValue;\n      amort = 0;\n    }\n\n    debt[i] = Math.round(value);\n    fortune[i] = Math.round(propAndWork - value);\n    payment[i] = Math.round(amort +\n        maintenance +\n        getInterests({ loan, property }, interestRates[i], value));\n    amortizationChart[i] = Math.round(amort);\n  }\n\n  return {\n    debt,\n    fortune,\n    payment,\n    amortization: amortizationChart,\n  };\n};\n\nclass AmortizationChart extends Component {\n  getConfig = () => {\n    const f = this.props.intl.formatMessage;\n    const { debt, fortune, payment, amortization } = getData(this.props);\n\n    return {\n      chart: {\n        height: 600,\n      },\n      title: { text: f({ id: 'AmortizationChart.title' }) },\n      plotOptions: {\n        area: { stacking: 'normal' },\n        series: { pointStart: new Date().getFullYear() },\n      },\n      yAxis: [\n        {\n          // Primary axis\n          title: { text: f({ id: 'AmortizationChart.yAxis1' }) },\n        },\n        {\n          // Secondary axis\n          title: {\n            text: f({ id: 'AmortizationChart.yAxis2' }),\n            style: { color: chartColors.payment },\n          },\n          opposite: true,\n          max: Math.max(...payment) * 1.5,\n          min: 0,\n        },\n      ],\n      tooltip: { shared: true },\n      series: [\n        {\n          name: f({ id: 'AmortizationChart.fortuneSeries' }),\n          type: 'area',\n          data: fortune,\n          yAxis: 0,\n          color: chartColors.fortune,\n        },\n        {\n          name: f({ id: 'AmortizationChart.debtSeries' }),\n          type: 'area',\n          data: debt,\n          yAxis: 0,\n          color: chartColors.debt,\n        },\n        {\n          name: f({ id: 'AmortizationChart.paymentSeries' }),\n          type: 'line',\n          data: payment,\n          yAxis: 1,\n          color: chartColors.payment,\n        },\n        {\n          name: f({ id: 'AmortizationChart.amortizationSeries' }),\n          type: 'line',\n          data: amortization,\n          yAxis: 1,\n          color: chartColors.amortization,\n        },\n        // {\n        //   name: f({ id: 'AmortizationChart.refinancingFlag' }),\n        //   type: 'flags',\n        //   y: 0,\n        //   data: [{ x: new Date().getFullYear() + 10 }],\n        //   shape: 'squarepin',\n        // },\n      ],\n      responsive: {\n        rules: [\n          {\n            condition: { maxWidth: 768 },\n            chartOptions: {\n              yAxis: [\n                { labels: { enabled: false }, title: { text: null } },\n                { labels: { enabled: false }, title: { text: null } },\n              ],\n            },\n          },\n          {\n            condition: { minWidth: 769 },\n            chartOptions: {\n              yAxis: [\n                {\n                  labels: { enabled: true },\n                  title: { text: f({ id: 'AmortizationChart.yAxis1' }) },\n                },\n                {\n                  labels: { enabled: true },\n                  title: { text: f({ id: 'AmortizationChart.yAxis2' }) },\n                },\n              ],\n            },\n          },\n        ],\n      },\n      credits: { enabled: false },\n    };\n  };\n\n  render() {\n    return (\n      <div id=\"amortizationChart\">\n        <ReactHighcharts\n          config={this.getConfig()}\n          ref={(c) => {\n            this.chart = c;\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nAmortizationChart.propTypes = {\n  loan: PropTypes.objectOf(PropTypes.any).isRequired,\n  borrowers: PropTypes.arrayOf(PropTypes.object).isRequired,\n  property: PropTypes.objectOf(PropTypes.any).isRequired,\n  totalYears: PropTypes.number,\n};\n\nAmortizationChart.defaultProps = {\n  totalYears: 20,\n};\n\nexport default injectIntl(withLoan(AmortizationChart));\n"]},"hash":"28d23ff88e9acbe2e6e42073c9b411db686435a0"}
