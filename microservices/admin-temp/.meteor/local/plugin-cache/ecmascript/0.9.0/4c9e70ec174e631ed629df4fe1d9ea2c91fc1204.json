{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","createClass","classCallCheck","extends","objectWithoutProperties","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]}],"exports":{"exported":["contextTypes"],"specifiers":[{"kind":"local","local":"contextTypes","exported":"contextTypes"}]}}},"options":{"filename":"imports/core/containers/LoanContainer.jsx","filenameRelative":"imports/core/containers/LoanContainer.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/containers/LoanContainer.jsx.map","sourceFileName":"imports/core/containers/LoanContainer.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"LoanContainer"},"ignored":false,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.contextTypes = undefined;\n\nvar _objectWithoutProperties2 = require(\"babel-runtime/helpers/objectWithoutProperties\");\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.export({\n  contextTypes: function contextTypes() {\n    return _contextTypes;\n  }\n});\n\nvar React = void 0,\n    _Component = void 0;\n\nmodule.watch(require(\"react\"), {\n  default: function _default(v) {\n    React = v;\n  },\n  Component: function Component(v) {\n    _Component = v;\n  }\n}, 0);\nexports.contextTypes = _contextTypes;\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  default: function _default(v) {\n    PropTypes = v;\n  }\n}, 1);\nvar _contextTypes = {\n  loan: PropTypes.object,\n  borrowers: PropTypes.array,\n  offers: PropTypes.array,\n  property: PropTypes.object\n};\n\nvar loanWrapper = function loanWrapper(WrappedComponent) {\n  var LoanContainer = function (_Component2) {\n    (0, _inherits3.default)(LoanContainer, _Component2);\n\n    function LoanContainer(props) {\n      (0, _classCallCheck3.default)(this, LoanContainer);\n\n      var _this = (0, _possibleConstructorReturn3.default)(this, (LoanContainer.__proto__ || Object.getPrototypeOf(LoanContainer)).call(this));\n\n      _initialiseProps.call(_this);\n\n      _this.state = (0, _extends3.default)({}, _this.getData(props));\n      return _this;\n    }\n\n    (0, _createClass3.default)(LoanContainer, [{\n      key: \"getChildContext\",\n      value: function getChildContext() {\n        var _state = this.state,\n            loan = _state.loan,\n            loanBorrowers = _state.loanBorrowers,\n            loanOffers = _state.loanOffers,\n            loanProperty = _state.loanProperty;\n        return {\n          loan: loan,\n          borrowers: loanBorrowers,\n          offers: loanOffers,\n          property: loanProperty\n        };\n      }\n    }, {\n      key: \"componentWillReceiveProps\",\n      value: function componentWillReceiveProps(nextProps) {\n        this.setState((0, _extends3.default)({}, this.getData(nextProps)));\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _state2 = this.state,\n            loan = _state2.loan,\n            loanBorrowers = _state2.loanBorrowers,\n            loanOffers = _state2.loanOffers,\n            loanProperty = _state2.loanProperty,\n            rest = _state2.rest;\n        return React.createElement(WrappedComponent, (0, _extends3.default)({\n          loan: loan,\n          borrowers: loanBorrowers,\n          offers: loanOffers,\n          property: loanProperty\n        }, rest));\n      }\n    }]);\n    return LoanContainer;\n  }(_Component);\n\n  var _initialiseProps = function _initialiseProps() {\n    this.getData = function (props) {\n      var loans = props.loans,\n          borrowers = props.borrowers,\n          properties = props.properties,\n          offers = props.offers,\n          rest = (0, _objectWithoutProperties3.default)(props, [\"loans\", \"borrowers\", \"properties\", \"offers\"]); // match has to be passed to children\n\n      var loanId = props.match.params.loanId;\n      var loan = {};\n      var loanBorrowers = [];\n      var loanOffers = [];\n      var loanProperty = {};\n\n      if (loanId) {\n        loan = loans && loans.find(function (loan) {\n          return loan._id === loanId;\n        });\n        loanBorrowers = loan && loan.borrowerIds.map(function (borrowerId) {\n          return borrowers.find(function (borrower) {\n            return borrower._id === borrowerId;\n          });\n        });\n        loanOffers = offers && offers.filter(function (offer) {\n          return offer.loanId === loanId;\n        });\n        loanProperty = properties && properties.find(function (property) {\n          // Add this check while transitioning from nested to separate property\n          if (typeof loan.propertyId === 'string') {\n            return property._id === loan.propertyId;\n          }\n\n          return false;\n        });\n      }\n\n      return {\n        loan: loan,\n        loanBorrowers: loanBorrowers,\n        loanOffers: loanOffers,\n        loanProperty: loanProperty,\n        rest: rest\n      };\n    };\n  };\n\n  LoanContainer.childContextTypes = _contextTypes;\n  return LoanContainer;\n};\n\nmodule.exportDefault(loanWrapper);","map":{"version":3,"sources":["imports/core/containers/LoanContainer.jsx"],"names":["module","export","contextTypes","React","Component","watch","require","default","v","PropTypes","loan","object","borrowers","array","offers","property","loanWrapper","WrappedComponent","LoanContainer","props","state","getData","loanBorrowers","loanOffers","loanProperty","nextProps","setState","rest","loans","properties","loanId","match","params","find","_id","borrowerIds","map","borrower","borrowerId","filter","offer","propertyId","childContextTypes","exportDefault"],"mappings":"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","file":"imports/core/containers/LoanContainer.jsx.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport const contextTypes = {\n  loan: PropTypes.object,\n  borrowers: PropTypes.array,\n  offers: PropTypes.array,\n  property: PropTypes.object,\n};\n\nconst loanWrapper = (WrappedComponent) => {\n  class LoanContainer extends Component {\n    constructor(props) {\n      super();\n      this.state = { ...this.getData(props) };\n    }\n\n    getChildContext() {\n      const { loan, loanBorrowers, loanOffers, loanProperty } = this.state;\n\n      return {\n        loan,\n        borrowers: loanBorrowers,\n        offers: loanOffers,\n        property: loanProperty,\n      };\n    }\n\n    componentWillReceiveProps(nextProps) {\n      this.setState({ ...this.getData(nextProps) });\n    }\n\n    getData = (props) => {\n      const { loans, borrowers, properties, offers, ...rest } = props;\n\n      // match has to be passed to children\n      const { loanId } = props.match.params;\n\n      let loan = {};\n      let loanBorrowers = [];\n      let loanOffers = [];\n      let loanProperty = {};\n\n      if (loanId) {\n        loan = loans && loans.find(loan => loan._id === loanId);\n        loanBorrowers =\n          loan &&\n          loan.borrowerIds.map(borrowerId =>\n            borrowers.find(borrower => borrower._id === borrowerId));\n        loanOffers = offers && offers.filter(offer => offer.loanId === loanId);\n        loanProperty =\n          properties &&\n          properties.find((property) => {\n            // Add this check while transitioning from nested to separate property\n            if (typeof loan.propertyId === 'string') {\n              return property._id === loan.propertyId;\n            }\n\n            return false;\n          });\n      }\n\n      return {\n        loan,\n        loanBorrowers,\n        loanOffers,\n        loanProperty,\n        rest,\n      };\n    };\n\n    render() {\n      const {\n        loan,\n        loanBorrowers,\n        loanOffers,\n        loanProperty,\n        rest,\n      } = this.state;\n\n      return (\n        <WrappedComponent\n          loan={loan}\n          borrowers={loanBorrowers}\n          offers={loanOffers}\n          property={loanProperty}\n          {...rest}\n        />\n      );\n    }\n  }\n\n  LoanContainer.childContextTypes = contextTypes;\n\n  return LoanContainer;\n};\n\nexport default loanWrapper;\n"]},"hash":"4c9e70ec174e631ed629df4fe1d9ea2c91fc1204"}
