{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","createClass","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"material-ui/Table","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"MuiTable"}]},{"source":"../Translation","imported":["T"],"specifiers":[{"kind":"named","imported":"T","local":"T"}]},{"source":"./TableHeader","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"TableHeader"}]},{"source":"./TableBody","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"TableBody"}]},{"source":"./TableFooter","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"TableFooter"}]}],"exports":{"exported":["Table"],"specifiers":[{"kind":"local","local":"Table","exported":"default"}]}}},"options":{"filename":"imports/core/components/Table/Table.jsx","filenameRelative":"imports/core/components/Table/Table.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/components/Table/Table.jsx.map","sourceFileName":"imports/core/components/Table/Table.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"Table"},"ignored":false,"code":"\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.export({\n  default: function _default() {\n    return Table;\n  }\n});\n\nvar React = void 0,\n    _Component = void 0;\n\nmodule.watch(require(\"react\"), {\n  default: function _default(v) {\n    React = v;\n  },\n  Component: function Component(v) {\n    _Component = v;\n  }\n}, 0);\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  default: function _default(v) {\n    PropTypes = v;\n  }\n}, 1);\nvar MuiTable = void 0;\nmodule.watch(require(\"material-ui/Table\"), {\n  default: function _default(v) {\n    MuiTable = v;\n  }\n}, 2);\n\nvar _T = void 0;\n\nmodule.watch(require(\"../Translation\"), {\n  T: function T(v) {\n    _T = v;\n  }\n}, 3);\nvar TableHeader = void 0;\nmodule.watch(require(\"./TableHeader\"), {\n  default: function _default(v) {\n    TableHeader = v;\n  }\n}, 4);\nvar TableBody = void 0;\nmodule.watch(require(\"./TableBody\"), {\n  default: function _default(v) {\n    TableBody = v;\n  }\n}, 5);\nvar TableFooter = void 0;\nmodule.watch(require(\"./TableFooter\"), {\n  default: function _default(v) {\n    TableFooter = v;\n  }\n}, 6);\nvar ORDER = {\n  ASC: 'asc',\n  DESC: 'desc'\n};\n\nvar Table = function (_Component2) {\n  (0, _inherits3.default)(Table, _Component2);\n\n  function Table(props) {\n    (0, _classCallCheck3.default)(this, Table);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Table.__proto__ || Object.getPrototypeOf(Table)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.state = {\n      data: [],\n      selected: [],\n      order: ORDER.ASC,\n      orderBy: 0,\n      rowsPerPage: 40,\n      page: 0\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(Table, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.handleNewData(this.props);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n\n      var currentLength = this.state.data.length;\n      var nextLength = nextProps.rows.length; // Lazy check to see if data has different length\n      // FIXME should also check if all the data is the same, careful with sorting\n\n      if (nextLength !== currentLength) {\n        this.handleNewData(nextProps);\n      } else if (this.state.data && nextProps.rows) {\n        var differentProps = false;\n        nextProps.rows.every(function (row) {\n          if (!_this2.state.data.includes(row)) {\n            differentProps = true;\n          }\n        });\n\n        if (differentProps) {\n          this.handleNewData(nextProps);\n        }\n      } // If pagination is currently going on, make sure it is still needed\n\n\n      if (currentLength > 10 && nextLength <= 10) {\n        this.setState({\n          page: 0\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props = this.props,\n          columnOptions = _props.columnOptions,\n          selectable = _props.selectable,\n          sortable = _props.sortable,\n          selectAll = _props.selectAll,\n          style = _props.style,\n          noIntl = _props.noIntl,\n          clickable = _props.clickable;\n      var _state = this.state,\n          data = _state.data,\n          rowsPerPage = _state.rowsPerPage,\n          page = _state.page,\n          selected = _state.selected,\n          order = _state.order,\n          orderBy = _state.orderBy;\n      var rowCount = data.length;\n      return React.createElement(\n        \"div\",\n        {\n          className: \"mui-table\",\n          style: style\n        },\n        React.createElement(\n          MuiTable,\n          null,\n          React.createElement(TableHeader, {\n            columnOptions: columnOptions,\n            sortable: sortable,\n            onSelectAll: this.handleSelectAll,\n            onSort: this.handleSort,\n            selectAll: selectAll,\n            numSelected: selected ? selected.length : 0,\n            rowCount: rowCount,\n            noIntl: noIntl,\n            order: order,\n            orderBy: orderBy\n          }),\n          React.createElement(TableBody, {\n            data: data,\n            selectalbe: selectable,\n            columnOptions: columnOptions,\n            page: page,\n            rowsPerPage: rowsPerPage,\n            clickable: clickable\n          }),\n          rowCount > rowsPerPage && React.createElement(TableFooter, {\n            rowCount: rowCount,\n            rowsPerPage: rowsPerPage,\n            page: page,\n            onChangePage: this.handleChangePage,\n            onChangeRowsPerPage: this.handleChangeRowsPerPage\n          })\n        ),\n        data.length === 0 && React.createElement(\n          \"h3\",\n          {\n            className: \"secondary flex center\",\n            style: {\n              width: '100%',\n              padding: 32\n            }\n          },\n          React.createElement(_T, {\n            id: \"Table.empty\"\n          })\n        )\n      );\n    }\n  }]);\n  return Table;\n}(_Component);\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.handleNewData = function (props) {\n    var rows = props.rows,\n        columnOptions = props.columnOptions; // Make sure columns and rows are the same length\n\n    if (rows.length && columnOptions.length !== rows[0].columns.length) {\n      throw new Error('column length has to be correct in Table');\n    }\n\n    _this3.setState({\n      data: rows\n    }, function () {\n      return _this3.handleSort(_this3.state.orderBy);\n    });\n  };\n\n  this.handleSort = function (columnNb) {\n    var _state2 = _this3.state,\n        data = _state2.data,\n        order = _state2.order,\n        orderBy = _state2.orderBy;\n    var newOrderBy = columnNb;\n    var isReversed = void 0;\n\n    if (orderBy === newOrderBy) {\n      // Clicked a second time, reverse order\n      isReversed = order === ORDER.ASC;\n    } else {\n      // Initial order\n      isReversed = false;\n    }\n\n    var sortedData = data.sort(function (a, b) {\n      return b.columns[newOrderBy] > a.columns[newOrderBy] ? 1 : -1;\n    });\n    var sortedDataInCorrectOrder = isReversed ? sortedData.slice().reverse() : sortedData;\n\n    _this3.setState({\n      data: sortedDataInCorrectOrder,\n      order: isReversed ? ORDER.DESC : ORDER.ASC,\n      orderBy: newOrderBy\n    });\n  };\n\n  this.handleSelect = function (rowId) {\n    var selected = _this3.state.selected;\n    var selectedIndex = selected.indexOf(rowId);\n    var newSelected = [];\n\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, rowId);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\n    }\n\n    _this3.setState({\n      selected: newSelected\n    }, function () {\n      return _this3.props.onRowSelect(_this3.state.selected);\n    });\n  };\n\n  this.handleSelectAllClick = function (event, checked) {\n    if (checked) {\n      _this3.setState({\n        selected: _this3.state.data.map(function (n) {\n          return n.id;\n        })\n      });\n\n      return;\n    }\n\n    _this3.setState({\n      selected: []\n    });\n  };\n\n  this.handleChangePage = function (_, page) {\n    return _this3.setState({\n      page: page\n    });\n  };\n\n  this.handleChangeRowsPerPage = function (event) {\n    return _this3.setState({\n      rowsPerPage: event.target.value\n    });\n  };\n\n  this.isSelected = function (id) {\n    if (_this3.props.multiSelectable) {\n      return _this3.state.selected.indexOf(id) !== -1;\n    }\n\n    return _this3.props.selected === id;\n  };\n};\n\nTable.propTypes = {\n  columnOptions: PropTypes.arrayOf(PropTypes.object).isRequired,\n  rows: PropTypes.arrayOf(PropTypes.object).isRequired,\n  selectable: PropTypes.bool,\n  multiSelectable: PropTypes.bool,\n  selectAll: PropTypes.bool,\n  onRowSelect: PropTypes.func,\n  selected: PropTypes.string,\n  sortable: PropTypes.bool,\n  style: PropTypes.object,\n  noIntl: PropTypes.bool,\n  clickable: PropTypes.bool // sets rows to change color on hover\n\n};\nTable.defaultProps = {\n  selectable: false,\n  multiSelectable: false,\n  selectAll: false,\n  onRowSelect: function onRowSelect() {},\n  selected: undefined,\n  sortable: true,\n  style: {},\n  noIntl: false,\n  clickable: false\n};","map":{"version":3,"sources":["imports/core/components/Table/Table.jsx"],"names":["module","export","default","Table","React","Component","watch","require","v","PropTypes","MuiTable","T","TableHeader","TableBody","TableFooter","ORDER","ASC","DESC","props","state","data","selected","order","orderBy","rowsPerPage","page","handleNewData","nextProps","currentLength","length","nextLength","rows","differentProps","every","row","includes","setState","columnOptions","selectable","sortable","selectAll","style","noIntl","clickable","rowCount","handleSelectAll","handleSort","handleChangePage","handleChangeRowsPerPage","width","padding","columns","Error","columnNb","newOrderBy","isReversed","sortedData","sort","a","b","sortedDataInCorrectOrder","slice","reverse","handleSelect","rowId","selectedIndex","indexOf","newSelected","concat","onRowSelect","handleSelectAllClick","event","checked","map","n","id","_","target","value","isSelected","multiSelectable","propTypes","arrayOf","object","isRequired","bool","func","string","defaultProps","undefined"],"mappings":"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","file":"imports/core/components/Table/Table.jsx.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport MuiTable from 'material-ui/Table';\n\nimport { T } from 'core/components/Translation';\n\nimport TableHeader from './TableHeader';\nimport TableBody from './TableBody';\nimport TableFooter from './TableFooter';\n\nconst ORDER = {\n  ASC: 'asc',\n  DESC: 'desc',\n};\n\nexport default class Table extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      selected: [],\n      order: ORDER.ASC,\n      orderBy: 0,\n      rowsPerPage: 40,\n      page: 0,\n    };\n  }\n\n  componentDidMount() {\n    this.handleNewData(this.props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const currentLength = this.state.data.length;\n    const nextLength = nextProps.rows.length;\n    // Lazy check to see if data has different length\n    // FIXME should also check if all the data is the same, careful with sorting\n    if (nextLength !== currentLength) {\n      this.handleNewData(nextProps);\n    } else if (this.state.data && nextProps.rows) {\n      let differentProps = false;\n      nextProps.rows.every((row) => {\n        if (!this.state.data.includes(row)) {\n          differentProps = true;\n        }\n      });\n\n      if (differentProps) {\n        this.handleNewData(nextProps);\n      }\n    }\n\n    // If pagination is currently going on, make sure it is still needed\n    if (currentLength > 10 && nextLength <= 10) {\n      this.setState({ page: 0 });\n    }\n  }\n\n  handleNewData = (props) => {\n    const { rows, columnOptions } = props;\n    // Make sure columns and rows are the same length\n    if (rows.length && columnOptions.length !== rows[0].columns.length) {\n      throw new Error('column length has to be correct in Table');\n    }\n\n    this.setState({ data: rows }, () => this.handleSort(this.state.orderBy));\n  };\n\n  handleSort = (columnNb) => {\n    const { data, order, orderBy } = this.state;\n    const newOrderBy = columnNb;\n    let isReversed;\n\n    if (orderBy === newOrderBy) {\n      // Clicked a second time, reverse order\n      isReversed = order === ORDER.ASC;\n    } else {\n      // Initial order\n      isReversed = false;\n    }\n\n    const sortedData = data.sort((a, b) => (b.columns[newOrderBy] > a.columns[newOrderBy] ? 1 : -1));\n    const sortedDataInCorrectOrder = isReversed\n      ? sortedData.slice().reverse()\n      : sortedData;\n\n    this.setState({\n      data: sortedDataInCorrectOrder,\n      order: isReversed ? ORDER.DESC : ORDER.ASC,\n      orderBy: newOrderBy,\n    });\n  };\n\n  handleSelect = (rowId) => {\n    const { selected } = this.state;\n    const selectedIndex = selected.indexOf(rowId);\n    let newSelected = [];\n\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, rowId);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(\n        selected.slice(0, selectedIndex),\n        selected.slice(selectedIndex + 1),\n      );\n    }\n\n    this.setState({ selected: newSelected }, () =>\n      this.props.onRowSelect(this.state.selected));\n  };\n\n  handleSelectAllClick = (event, checked) => {\n    if (checked) {\n      this.setState({ selected: this.state.data.map(n => n.id) });\n      return;\n    }\n    this.setState({ selected: [] });\n  };\n\n  handleChangePage = (_, page) => this.setState({ page });\n\n  handleChangeRowsPerPage = event =>\n    this.setState({ rowsPerPage: event.target.value });\n\n  isSelected = (id) => {\n    if (this.props.multiSelectable) {\n      return this.state.selected.indexOf(id) !== -1;\n    }\n\n    return this.props.selected === id;\n  };\n\n  render() {\n    const {\n      columnOptions,\n      selectable,\n      sortable,\n      selectAll,\n      style,\n      noIntl,\n      clickable,\n    } = this.props;\n    const { data, rowsPerPage, page, selected, order, orderBy } = this.state;\n    const rowCount = data.length;\n\n    return (\n      <div className=\"mui-table\" style={style}>\n        <MuiTable>\n          <TableHeader\n            columnOptions={columnOptions}\n            sortable={sortable}\n            onSelectAll={this.handleSelectAll}\n            onSort={this.handleSort}\n            selectAll={selectAll}\n            numSelected={selected ? selected.length : 0}\n            rowCount={rowCount}\n            noIntl={noIntl}\n            order={order}\n            orderBy={orderBy}\n          />\n          <TableBody\n            data={data}\n            selectalbe={selectable}\n            columnOptions={columnOptions}\n            page={page}\n            rowsPerPage={rowsPerPage}\n            clickable={clickable}\n          />\n          {rowCount > rowsPerPage && (\n            <TableFooter\n              rowCount={rowCount}\n              rowsPerPage={rowsPerPage}\n              page={page}\n              onChangePage={this.handleChangePage}\n              onChangeRowsPerPage={this.handleChangeRowsPerPage}\n            />\n          )}\n        </MuiTable>\n        {data.length === 0 && (\n          <h3\n            className=\"secondary flex center\"\n            style={{ width: '100%', padding: 32 }}\n          >\n            <T id=\"Table.empty\" />\n          </h3>\n        )}\n      </div>\n    );\n  }\n}\n\nTable.propTypes = {\n  columnOptions: PropTypes.arrayOf(PropTypes.object).isRequired,\n  rows: PropTypes.arrayOf(PropTypes.object).isRequired,\n  selectable: PropTypes.bool,\n  multiSelectable: PropTypes.bool,\n  selectAll: PropTypes.bool,\n  onRowSelect: PropTypes.func,\n  selected: PropTypes.string,\n  sortable: PropTypes.bool,\n  style: PropTypes.object,\n  noIntl: PropTypes.bool,\n  clickable: PropTypes.bool, // sets rows to change color on hover\n};\n\nTable.defaultProps = {\n  selectable: false,\n  multiSelectable: false,\n  selectAll: false,\n  onRowSelect: () => {},\n  selected: undefined,\n  sortable: true,\n  style: {},\n  noIntl: false,\n  clickable: false,\n};\n"]},"hash":"412eee6b343a215c59ef0598ddc46096fa2c93d4"}
