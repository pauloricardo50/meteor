{"metadata":{"usedHelpers":["createClass","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"events","imported":["EventEmitter"],"specifiers":[{"kind":"named","imported":"EventEmitter","local":"EventEmitter"}]},{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]}],"exports":{"exported":["EventService"],"specifiers":[{"kind":"local","local":"EventService","exported":"EventService"}]}}},"options":{"filename":"imports/core/api/events/EventService.js","filenameRelative":"imports/core/api/events/EventService.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/api/events/EventService.js.map","sourceFileName":"imports/core/api/events/EventService.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"EventService"},"ignored":false,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EventService = undefined;\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.export({\n  EventService: function EventService() {\n    return _EventService;\n  }\n});\n\nvar _EventEmitter = void 0;\n\nmodule.watch(require(\"events\"), {\n  EventEmitter: function EventEmitter(v) {\n    _EventEmitter = v;\n  }\n}, 0);\n\nvar _Meteor = void 0;\n\nexports.EventService = _EventService;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function Meteor(v) {\n    _Meteor = v;\n  }\n}, 1);\nvar IS_LOGGING = true;\n\nvar _EventService = function () {\n  function _EventService(_ref) {\n    var emmitter = _ref.emmitter;\n    (0, _classCallCheck3.default)(this, _EventService);\n    this.emmitter = emmitter;\n    this.addErrorListener();\n  }\n\n  (0, _createClass3.default)(_EventService, [{\n    key: \"emit\",\n    value: function emit(eventName, params) {\n      this.logEmittedEvent(eventName, params);\n      this.emmitter.emit(eventName, params);\n    }\n  }, {\n    key: \"emitMutation\",\n    value: function emitMutation(_ref2, params) {\n      var name = _ref2.name;\n      this.emit(name, params);\n    }\n  }, {\n    key: \"addListener\",\n    value: function addListener(eventName, listenerFunction) {\n      var _this = this;\n\n      this.emmitter.addListener(eventName, function (params) {\n        _this.logListener(eventName, params);\n\n        listenerFunction(params);\n      });\n    }\n  }, {\n    key: \"addMutationListener\",\n    value: function addMutationListener(_ref3, listenerFunction) {\n      var name = _ref3.name;\n      this.addListener(name, listenerFunction);\n    }\n  }, {\n    key: \"addErrorListener\",\n    value: function addErrorListener() {\n      this.addListener('error', function (error) {\n        console.log('An error occured in an event listener:');\n        console.log(error);\n        throw error;\n      });\n    }\n  }, {\n    key: \"logEmittedEvent\",\n    value: function logEmittedEvent(eventName, params) {\n      if (IS_LOGGING && _Meteor.isDevelopment && !_Meteor.isTest) {\n        console.log(\"Event \\\"\" + eventName + \"\\\" triggered with params:\");\n        console.log(params);\n      }\n    }\n  }, {\n    key: \"logListener\",\n    value: function logListener(eventName, params) {\n      if (IS_LOGGING && _Meteor.isDevelopment && !_Meteor.isTest) {\n        console.log(\"Event \\\"\" + eventName + \"\\\" listened to with params:\");\n        console.log(params);\n      }\n    }\n  }]);\n  return _EventService;\n}();\n\nvar defaultEmmitter = new _EventEmitter();\nmodule.exportDefault(new _EventService({\n  emmitter: defaultEmmitter\n}));","map":{"version":3,"sources":["imports/core/api/events/EventService.js"],"names":["module","export","EventService","EventEmitter","watch","require","v","Meteor","IS_LOGGING","emmitter","addErrorListener","eventName","params","logEmittedEvent","emit","name","listenerFunction","addListener","logListener","error","console","log","isDevelopment","isTest","defaultEmmitter","exportDefault"],"mappings":";;;;;;;;;;;;;;;;;AAAAA,OAAOC,MAAP,CAAc;AAACC,gBAAa;AAAA,WAAIA,aAAJ;AAAA;AAAd,CAAd;;AAA+C,IAAIC,sBAAJ;;AAAiBH,OAAOI,KAAP,CAAaC,QAAQ,QAAR,CAAb,EAA+B;AAACF,cAAD,wBAAcG,CAAd,EAAgB;AAACH,oBAAaG,CAAb;AAAe;AAAhC,CAA/B,EAAiE,CAAjE;;AAAoE,IAAIC,gBAAJ;;;AAAWP,OAAOI,KAAP,CAAaC,QAAQ,eAAR,CAAb,EAAsC;AAACE,QAAD,kBAAQD,CAAR,EAAU;AAACC,cAAOD,CAAP;AAAS;AAApB,CAAtC,EAA4D,CAA5D;AAG/I,IAAME,aAAa,IAAnB;;IAEaN,a;AACX,+BAA0B;AAAA,QAAZO,QAAY,QAAZA,QAAY;AAAA;AACxB,SAAKA,QAAL,GAAgBA,QAAhB;AACA,SAAKC,gBAAL;AACD;;;;yBAEIC,S,EAAWC,M,EAAQ;AACtB,WAAKC,eAAL,CAAqBF,SAArB,EAAgCC,MAAhC;AACA,WAAKH,QAAL,CAAcK,IAAd,CAAmBH,SAAnB,EAA8BC,MAA9B;AACD;;;wCAEsBA,M,EAAQ;AAAA,UAAhBG,IAAgB,SAAhBA,IAAgB;AAC7B,WAAKD,IAAL,CAAUC,IAAV,EAAgBH,MAAhB;AACD;;;gCAEWD,S,EAAWK,gB,EAAkB;AAAA;;AACvC,WAAKP,QAAL,CAAcQ,WAAd,CAA0BN,SAA1B,EAAqC,UAACC,MAAD,EAAY;AAC/C,cAAKM,WAAL,CAAiBP,SAAjB,EAA4BC,MAA5B;;AACAI,yBAAiBJ,MAAjB;AACD,OAHD;AAID;;;+CAE6BI,gB,EAAkB;AAAA,UAA1BD,IAA0B,SAA1BA,IAA0B;AAC9C,WAAKE,WAAL,CAAiBF,IAAjB,EAAuBC,gBAAvB;AACD;;;uCAEkB;AACjB,WAAKC,WAAL,CAAiB,OAAjB,EAA0B,UAACE,KAAD,EAAW;AACnCC,gBAAQC,GAAR,CAAY,wCAAZ;AACAD,gBAAQC,GAAR,CAAYF,KAAZ;AACA,cAAMA,KAAN;AACD,OAJD;AAKD;;;oCAEeR,S,EAAWC,M,EAAQ;AACjC,UAAIJ,cAAcD,QAAOe,aAArB,IAAsC,CAACf,QAAOgB,MAAlD,EAA0D;AACxDH,gBAAQC,GAAR,cAAsBV,SAAtB;AACAS,gBAAQC,GAAR,CAAYT,MAAZ;AACD;AACF;;;gCAEWD,S,EAAWC,M,EAAQ;AAC7B,UAAIJ,cAAcD,QAAOe,aAArB,IAAsC,CAACf,QAAOgB,MAAlD,EAA0D;AACxDH,gBAAQC,GAAR,cAAsBV,SAAtB;AACAS,gBAAQC,GAAR,CAAYT,MAAZ;AACD;AACF;;;;;AAGH,IAAMY,kBAAkB,IAAIrB,aAAJ,EAAxB;AAtDAH,OAAOyB,aAAP,CAuDe,IAAIvB,aAAJ,CAAiB;AAAEO,YAAUe;AAAZ,CAAjB,CAvDf","file":"imports/core/api/events/EventService.js.map","sourcesContent":["import { EventEmitter } from 'events';\nimport { Meteor } from 'meteor/meteor';\n\nconst IS_LOGGING = true;\n\nexport class EventService {\n  constructor({ emmitter }) {\n    this.emmitter = emmitter;\n    this.addErrorListener();\n  }\n\n  emit(eventName, params) {\n    this.logEmittedEvent(eventName, params);\n    this.emmitter.emit(eventName, params);\n  }\n\n  emitMutation({ name }, params) {\n    this.emit(name, params);\n  }\n\n  addListener(eventName, listenerFunction) {\n    this.emmitter.addListener(eventName, (params) => {\n      this.logListener(eventName, params);\n      listenerFunction(params);\n    });\n  }\n\n  addMutationListener({ name }, listenerFunction) {\n    this.addListener(name, listenerFunction);\n  }\n\n  addErrorListener() {\n    this.addListener('error', (error) => {\n      console.log('An error occured in an event listener:');\n      console.log(error);\n      throw error;\n    });\n  }\n\n  logEmittedEvent(eventName, params) {\n    if (IS_LOGGING && Meteor.isDevelopment && !Meteor.isTest) {\n      console.log(`Event \"${eventName}\" triggered with params:`);\n      console.log(params);\n    }\n  }\n\n  logListener(eventName, params) {\n    if (IS_LOGGING && Meteor.isDevelopment && !Meteor.isTest) {\n      console.log(`Event \"${eventName}\" listened to with params:`);\n      console.log(params);\n    }\n  }\n}\n\nconst defaultEmmitter = new EventEmitter();\nexport default new EventService({ emmitter: defaultEmmitter });\n"]},"hash":"8a41b04458599767d658437d8dfe8141b0b03728"}
