{"metadata":{"usedHelpers":["extends","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"react","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"React"}]},{"source":"meteor/alanning:roles","imported":["Roles"],"specifiers":[{"kind":"named","imported":"Roles","local":"Roles"}]},{"source":"react-router-dom","imported":["Redirect"],"specifiers":[{"kind":"named","imported":"Redirect","local":"Redirect"}]},{"source":"../../../core/components/ErrorBoundary","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"ErrorBoundary"}]},{"source":"./AdminTopNav","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"AdminTopNav"}]},{"source":"./AdminSideNav","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"AdminSideNav"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/ui/layouts/AdminLayout/AdminLayout.jsx","filenameRelative":"imports/ui/layouts/AdminLayout/AdminLayout.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/ui/layouts/AdminLayout/AdminLayout.jsx.map","sourceFileName":"imports/ui/layouts/AdminLayout/AdminLayout.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"AdminLayout"},"ignored":false,"code":"\"use strict\";\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  default: function _default(v) {\n    PropTypes = v;\n  }\n}, 0);\nvar React = void 0;\nmodule.watch(require(\"react\"), {\n  default: function _default(v) {\n    React = v;\n  }\n}, 1);\n\nvar _Roles = void 0;\n\nmodule.watch(require(\"meteor/alanning:roles\"), {\n  Roles: function Roles(v) {\n    _Roles = v;\n  }\n}, 2);\n\nvar _Redirect = void 0;\n\nmodule.watch(require(\"react-router-dom\"), {\n  Redirect: function Redirect(v) {\n    _Redirect = v;\n  }\n}, 3);\nvar ErrorBoundary = void 0;\nmodule.watch(require(\"../../../core/components/ErrorBoundary\"), {\n  default: function _default(v) {\n    ErrorBoundary = v;\n  }\n}, 4);\nvar AdminTopNav = void 0;\nmodule.watch(require(\"./AdminTopNav\"), {\n  default: function _default(v) {\n    AdminTopNav = v;\n  }\n}, 5);\nvar AdminSideNav = void 0;\nmodule.watch(require(\"./AdminSideNav\"), {\n  default: function _default(v) {\n    AdminSideNav = v;\n  }\n}, 6);\n\nvar getRedirect = function getRedirect(_ref) {\n  var currentUser = _ref.currentUser,\n      pathname = _ref.history.location.pathname;\n\n  var userIsAdmin = _Roles.userIsInRole(currentUser, 'admin');\n\n  var userIsDev = _Roles.userIsInRole(currentUser, 'dev');\n\n  if (!currentUser) {\n    return \"/login?path=\" + pathname;\n  }\n\n  if (!(userIsAdmin || userIsDev)) {// TODO: Redirect to app subdomain\n  }\n\n  return false;\n};\n\nvar AdminLayout = function AdminLayout(props) {\n  var history = props.history,\n      children = props.children;\n  var redirect = getRedirect(props);\n  var path = history.location.pathname;\n  var isLogin = path.slice(0, 6) === '/login';\n\n  if (redirect && !isLogin) {\n    return React.createElement(_Redirect, {\n      to: redirect\n    });\n  }\n\n  return React.createElement(\n    \"div\",\n    {\n      className: \"admin-layout\"\n    },\n    React.createElement(AdminTopNav, props),\n    React.createElement(\n      \"div\",\n      {\n        className: \"main-row\"\n      },\n      React.createElement(AdminSideNav, props),\n      React.createElement(\n        \"main\",\n        null,\n        React.createElement(\n          ErrorBoundary,\n          {\n            helper: \"layout\",\n            pathname: history.location.pathname\n          },\n          React.cloneElement(children, (0, _extends3.default)({}, props))\n        )\n      )\n    )\n  );\n};\n\nAdminLayout.defaultProps = {\n  currentUser: undefined\n};\nAdminLayout.propTypes = {\n  currentUser: PropTypes.objectOf(PropTypes.any),\n  history: PropTypes.objectOf(PropTypes.any).isRequired,\n  children: PropTypes.any.isRequired\n};\nmodule.exportDefault(AdminLayout);","map":{"version":3,"sources":["imports/ui/layouts/AdminLayout/AdminLayout.jsx"],"names":["PropTypes","module","watch","require","default","v","React","Roles","Redirect","ErrorBoundary","AdminTopNav","AdminSideNav","getRedirect","currentUser","pathname","history","location","userIsAdmin","userIsInRole","userIsDev","AdminLayout","props","children","redirect","path","isLogin","slice","cloneElement","defaultProps","undefined","propTypes","objectOf","any","isRequired","exportDefault"],"mappings":"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","file":"imports/ui/layouts/AdminLayout/AdminLayout.jsx.map","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Roles } from 'meteor/alanning:roles';\nimport { Redirect } from 'react-router-dom';\n\nimport ErrorBoundary from 'core/components/ErrorBoundary';\nimport AdminTopNav from './AdminTopNav';\nimport AdminSideNav from './AdminSideNav';\n\nconst getRedirect = ({ currentUser, history: { location: { pathname } } }) => {\n  const userIsAdmin = Roles.userIsInRole(currentUser, 'admin');\n  const userIsDev = Roles.userIsInRole(currentUser, 'dev');\n\n  if (!currentUser) {\n    return `/login?path=${pathname}`;\n  }\n\n  if (!(userIsAdmin || userIsDev)) {\n    // TODO: Redirect to app subdomain\n  }\n\n  return false;\n};\n\nconst AdminLayout = (props) => {\n  const { history, children } = props;\n  const redirect = getRedirect(props);\n  const path = history.location.pathname;\n  const isLogin = path.slice(0, 6) === '/login';\n\n  if (redirect && !isLogin) {\n    return <Redirect to={redirect} />;\n  }\n\n  return (\n    <div className=\"admin-layout\">\n      <AdminTopNav {...props} />\n\n      <div className=\"main-row\">\n        <AdminSideNav {...props} />\n\n        <main>\n          <ErrorBoundary helper=\"layout\" pathname={history.location.pathname}>\n            {React.cloneElement(children, { ...props })}\n          </ErrorBoundary>\n        </main>\n      </div>\n    </div>\n  );\n};\n\nAdminLayout.defaultProps = {\n  currentUser: undefined,\n};\n\nAdminLayout.propTypes = {\n  currentUser: PropTypes.objectOf(PropTypes.any),\n  history: PropTypes.objectOf(PropTypes.any).isRequired,\n  children: PropTypes.any.isRequired,\n};\n\nexport default AdminLayout;\n"]},"hash":"e1914309c7c1ac05e52e63a06f63ec65e7903b60"}
