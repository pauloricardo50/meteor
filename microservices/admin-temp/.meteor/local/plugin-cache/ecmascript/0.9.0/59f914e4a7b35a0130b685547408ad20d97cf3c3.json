{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","createClass","classCallCheck","extends","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"../../../core/api/cleanMethods","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"cleanMethod"}]},{"source":"../../../core/api/constants","imported":["CLOSING_STEPS_TYPE"],"specifiers":[{"kind":"named","imported":"CLOSING_STEPS_TYPE","local":"CLOSING_STEPS_TYPE"}]},{"source":"./FileVerificator","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"FileVerificator"}]},{"source":"./ItemVerificator","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"ItemVerificator"}]}],"exports":{"exported":["ClosingVerification"],"specifiers":[{"kind":"local","local":"ClosingVerification","exported":"default"}]}}},"options":{"filename":"imports/ui/pages/SingleLoanPage/ClosingVerification.jsx","filenameRelative":"imports/ui/pages/SingleLoanPage/ClosingVerification.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/ui/pages/SingleLoanPage/ClosingVerification.jsx.map","sourceFileName":"imports/ui/pages/SingleLoanPage/ClosingVerification.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"ClosingVerification"},"ignored":false,"code":"\"use strict\";\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nmodule.export({\n  default: function _default() {\n    return ClosingVerification;\n  }\n});\n\nvar React = void 0,\n    _Component = void 0;\n\nmodule.watch(require(\"react\"), {\n  default: function _default(v) {\n    React = v;\n  },\n  Component: function Component(v) {\n    _Component = v;\n  }\n}, 0);\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  default: function _default(v) {\n    PropTypes = v;\n  }\n}, 1);\nvar cleanMethod = void 0;\nmodule.watch(require(\"../../../core/api/cleanMethods\"), {\n  default: function _default(v) {\n    cleanMethod = v;\n  }\n}, 2);\n\nvar _CLOSING_STEPS_TYPE = void 0;\n\nmodule.watch(require(\"../../../core/api/constants\"), {\n  CLOSING_STEPS_TYPE: function CLOSING_STEPS_TYPE(v) {\n    _CLOSING_STEPS_TYPE = v;\n  }\n}, 3);\nvar FileVerificator = void 0;\nmodule.watch(require(\"./FileVerificator\"), {\n  default: function _default(v) {\n    FileVerificator = v;\n  }\n}, 4);\nvar ItemVerificator = void 0;\nmodule.watch(require(\"./ItemVerificator\"), {\n  default: function _default(v) {\n    ItemVerificator = v;\n  }\n}, 5);\n\nvar ClosingVerification = function (_Component2) {\n  (0, _inherits3.default)(ClosingVerification, _Component2);\n\n  function ClosingVerification() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, ClosingVerification);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = ClosingVerification.__proto__ || Object.getPrototypeOf(ClosingVerification)).call.apply(_ref, [this].concat(args))), _this), _this.setStatus = function (id, newStatus) {\n      var loan = _this.props.loan;\n      var steps = loan.logic.closingSteps;\n      var step = steps.find(function (s) {\n        return s.id === id;\n      });\n      cleanMethod('updateLoan', {\n        object: {\n          'logic.closingSteps': [].concat(_toConsumableArray(steps.filter(function (s) {\n            return s.id !== id;\n          })), [(0, _extends3.default)({}, step, {\n            status: newStatus\n          })])\n        },\n        id: loan._id\n      });\n    }, _this.saveError = function (id, error) {\n      var loan = _this.props.loan;\n      var steps = loan.logic.closingSteps;\n      var step = steps.find(function (s) {\n        return s.id === id;\n      });\n      cleanMethod('updateLoan', {\n        object: {\n          'logic.closingSteps': [].concat(_toConsumableArray(steps.filter(function (s) {\n            return s.id !== id;\n          })), [(0, _extends3.default)({}, step, {\n            error: error\n          })])\n        },\n        id: loan._id\n      });\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n\n  (0, _createClass3.default)(ClosingVerification, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var loan = this.props.loan;\n      var steps = loan.logic.closingSteps;\n      return React.createElement(\n        \"div\",\n        {\n          style: {\n            padding: '0 16px'\n          }\n        },\n        steps && steps.length ? steps.map(function (step) {\n          return step.type === _CLOSING_STEPS_TYPE.UPLOAD ? React.createElement(FileVerificator, {\n            currentValue: loan.files[step.id],\n            id: step.id,\n            closingSteps: steps,\n            key: step.id,\n            docId: loan._id\n          }) : React.createElement(\n            \"div\",\n            {\n              className: \"mask1 flex-col\",\n              key: step.id,\n              style: {\n                marginBottom: 8\n              }\n            },\n            React.createElement(\n              \"h4\",\n              null,\n              step.title\n            ),\n            React.createElement(\n              \"p\",\n              null,\n              step.description\n            ),\n            React.createElement(ItemVerificator, {\n              item: {\n                key: step.id,\n                status: step.status,\n                error: step.error\n              },\n              setStatus: _this2.setStatus,\n              saveError: _this2.saveError\n            })\n          );\n        }) : React.createElement(\n          \"h3\",\n          null,\n          \"Pas d'\\xE9tapes \\xE0 v\\xE9rifier\"\n        )\n      );\n    }\n  }]);\n  return ClosingVerification;\n}(_Component);\n\nClosingVerification.propTypes = {\n  loan: PropTypes.objectOf(PropTypes.any).isRequired\n};","map":{"version":3,"sources":["imports/ui/pages/SingleLoanPage/ClosingVerification.jsx"],"names":["module","export","default","ClosingVerification","React","Component","watch","require","v","PropTypes","cleanMethod","CLOSING_STEPS_TYPE","FileVerificator","ItemVerificator","setStatus","id","newStatus","loan","props","steps","logic","closingSteps","step","find","s","object","filter","status","_id","saveError","error","padding","length","map","type","UPLOAD","files","marginBottom","title","description","key","propTypes","objectOf","any","isRequired"],"mappings":"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","file":"imports/ui/pages/SingleLoanPage/ClosingVerification.jsx.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport cleanMethod from 'core/api/cleanMethods';\nimport { CLOSING_STEPS_TYPE } from 'core/api/constants';\nimport FileVerificator from './FileVerificator';\nimport ItemVerificator from './ItemVerificator';\n\nexport default class ClosingVerification extends Component {\n  setStatus = (id, newStatus) => {\n    const { loan } = this.props;\n    const steps = loan.logic.closingSteps;\n    const step = steps.find(s => s.id === id);\n\n    cleanMethod('updateLoan', {\n      object: {\n        'logic.closingSteps': [\n          ...steps.filter(s => s.id !== id),\n          { ...step, status: newStatus },\n        ],\n      },\n      id: loan._id,\n    });\n  };\n\n  saveError = (id, error) => {\n    const { loan } = this.props;\n    const steps = loan.logic.closingSteps;\n    const step = steps.find(s => s.id === id);\n\n    cleanMethod('updateLoan', {\n      object: {\n        'logic.closingSteps': [\n          ...steps.filter(s => s.id !== id),\n          { ...step, error },\n        ],\n      },\n      id: loan._id,\n    });\n  };\n\n  render() {\n    const { loan } = this.props;\n    const steps = loan.logic.closingSteps;\n    return (\n      <div style={{ padding: '0 16px' }}>\n        {steps && steps.length ? (\n          steps.map(step =>\n            (step.type === CLOSING_STEPS_TYPE.UPLOAD ? (\n              <FileVerificator\n                currentValue={loan.files[step.id]}\n                id={step.id}\n                closingSteps={steps}\n                key={step.id}\n                docId={loan._id}\n              />\n            ) : (\n              <div\n                className=\"mask1 flex-col\"\n                key={step.id}\n                style={{ marginBottom: 8 }}\n              >\n                <h4>{step.title}</h4>\n                <p>{step.description}</p>\n\n                <ItemVerificator\n                  item={{\n                    key: step.id,\n                    status: step.status,\n                    error: step.error,\n                  }}\n                  setStatus={this.setStatus}\n                  saveError={this.saveError}\n                />\n              </div>\n            )))\n        ) : (\n          <h3>Pas d&apos;étapes à vérifier</h3>\n        )}\n      </div>\n    );\n  }\n}\n\nClosingVerification.propTypes = {\n  loan: PropTypes.objectOf(PropTypes.any).isRequired,\n};\n"]},"hash":"59f914e4a7b35a0130b685547408ad20d97cf3c3"}
