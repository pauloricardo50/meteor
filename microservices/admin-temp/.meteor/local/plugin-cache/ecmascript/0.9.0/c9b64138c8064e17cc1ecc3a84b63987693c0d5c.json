{"metadata":{"usedHelpers":["extends","inherits","possibleConstructorReturn","createClass","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"../../../core/api/cleanMethods","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"cleanMethod"}]},{"source":"meteor/alanning:roles","imported":["Roles"],"specifiers":[{"kind":"named","imported":"Roles","local":"Roles"}]},{"source":"../../../core/api/borrowers/fakes","imported":["completeFakeBorrower"],"specifiers":[{"kind":"named","imported":"completeFakeBorrower","local":"completeFakeBorrower"}]},{"source":"../../../core/api/loans/fakes","imported":["loanStep1","loanStep2","loanStep3"],"specifiers":[{"kind":"named","imported":"loanStep1","local":"loanStep1"},{"kind":"named","imported":"loanStep2","local":"loanStep2"},{"kind":"named","imported":"loanStep3","local":"loanStep3"}]},{"source":"../../../core/api/offers/fakes","imported":["getRandomOffer"],"specifiers":[{"kind":"named","imported":"getRandomOffer","local":"getRandomOffer"}]},{"source":"../../../core/api/properties/fakes","imported":["fakeProperty"],"specifiers":[{"kind":"named","imported":"fakeProperty","local":"fakeProperty"}]}],"exports":{"exported":["DevPage"],"specifiers":[{"kind":"local","local":"DevPage","exported":"default"}]}}},"options":{"filename":"imports/ui/pages/DevPage/DevPage.jsx","filenameRelative":"imports/ui/pages/DevPage/DevPage.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/ui/pages/DevPage/DevPage.jsx.map","sourceFileName":"imports/ui/pages/DevPage/DevPage.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"DevPage"},"ignored":false,"code":"\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nmodule.export({\n  \"default\": function () {\n    function _default() {\n      return DevPage;\n    }\n\n    return _default;\n  }()\n});\n\nvar React = void 0,\n    _Component = void 0;\n\nmodule.watch(require(\"react\"), {\n  \"default\": function () {\n    function _default(v) {\n      React = v;\n    }\n\n    return _default;\n  }(),\n  Component: function () {\n    function Component(v) {\n      _Component = v;\n    }\n\n    return Component;\n  }()\n}, 0);\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function () {\n    function _default(v) {\n      PropTypes = v;\n    }\n\n    return _default;\n  }()\n}, 1);\nvar cleanMethod = void 0;\nmodule.watch(require(\"../../../core/api/cleanMethods\"), {\n  \"default\": function () {\n    function _default(v) {\n      cleanMethod = v;\n    }\n\n    return _default;\n  }()\n}, 2);\n\nvar _Roles = void 0;\n\nmodule.watch(require(\"meteor/alanning:roles\"), {\n  Roles: function () {\n    function Roles(v) {\n      _Roles = v;\n    }\n\n    return Roles;\n  }()\n}, 3);\n\nvar _completeFakeBorrower = void 0;\n\nmodule.watch(require(\"../../../core/api/borrowers/fakes\"), {\n  completeFakeBorrower: function () {\n    function completeFakeBorrower(v) {\n      _completeFakeBorrower = v;\n    }\n\n    return completeFakeBorrower;\n  }()\n}, 4);\n\nvar _loanStep = void 0,\n    _loanStep2 = void 0,\n    _loanStep3 = void 0;\n\nmodule.watch(require(\"../../../core/api/loans/fakes\"), {\n  loanStep1: function () {\n    function loanStep1(v) {\n      _loanStep = v;\n    }\n\n    return loanStep1;\n  }(),\n  loanStep2: function () {\n    function loanStep2(v) {\n      _loanStep2 = v;\n    }\n\n    return loanStep2;\n  }(),\n  loanStep3: function () {\n    function loanStep3(v) {\n      _loanStep3 = v;\n    }\n\n    return loanStep3;\n  }()\n}, 5);\n\nvar _getRandomOffer = void 0;\n\nmodule.watch(require(\"../../../core/api/offers/fakes\"), {\n  getRandomOffer: function () {\n    function getRandomOffer(v) {\n      _getRandomOffer = v;\n    }\n\n    return getRandomOffer;\n  }()\n}, 6);\n\nvar _fakeProperty = void 0;\n\nmodule.watch(require(\"../../../core/api/properties/fakes\"), {\n  fakeProperty: function () {\n    function fakeProperty(v) {\n      _fakeProperty = v;\n    }\n\n    return fakeProperty;\n  }()\n}, 7);\n\nvar addStep1Loan = function () {\n  function addStep1Loan(twoBorrowers) {\n    var borrowerIds = [];\n    cleanMethod('insertBorrower', {\n      object: _completeFakeBorrower\n    }).then(function (id1) {\n      borrowerIds.push(id1);\n      return twoBorrowers ? cleanMethod('insertBorrower', {\n        object: _completeFakeBorrower\n      }) : false;\n    }).then(function (id2) {\n      if (id2) {\n        borrowerIds.push(id2);\n      }\n\n      return cleanMethod('insertProperty', {\n        object: _fakeProperty\n      });\n    }).then(function (propertyId) {\n      var loan = _loanStep;\n      loan.borrowers = borrowerIds;\n      loan.property = propertyId;\n      cleanMethod('insertLoan', {\n        object: loan\n      });\n    }).catch(console.log);\n  }\n\n  return addStep1Loan;\n}();\n\nvar addStep2Loan = function () {\n  function addStep2Loan(twoBorrowers) {\n    var borrowerIds = [];\n    cleanMethod('insertBorrower', {\n      object: _completeFakeBorrower\n    }).then(function (id1) {\n      borrowerIds.push(id1);\n      return twoBorrowers ? cleanMethod('insertBorrower', {\n        object: _completeFakeBorrower\n      }) : false;\n    }).then(function (id2) {\n      if (id2) {\n        borrowerIds.push(id2);\n      }\n\n      return cleanMethod('insertProperty', {\n        object: _fakeProperty\n      });\n    }).then(function (propertyId) {\n      var loan = _loanStep2;\n      loan.borrowers = borrowerIds;\n      loan.property = propertyId;\n      cleanMethod('insertLoan', {\n        object: loan\n      });\n    }).catch(console.log);\n  }\n\n  return addStep2Loan;\n}();\n\nvar addStep3Loan = function () {\n  function addStep3Loan(twoBorrowers) {\n    var completeFiles = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var borrowerIds = [];\n\n    var loan = _loanStep3(completeFiles);\n\n    var loanId = void 0;\n    cleanMethod('insertBorrower', {\n      object: _completeFakeBorrower\n    }).then(function (id1) {\n      borrowerIds.push(id1);\n      return twoBorrowers ? cleanMethod('insertBorrower', {\n        object: _completeFakeBorrower\n      }) : false;\n    }).then(function (id2) {\n      if (id2) {\n        borrowerIds.push(id2);\n      }\n\n      return cleanMethod('insertProperty', {\n        object: _fakeProperty\n      });\n    }).then(function (propertyId) {\n      loan.borrowers = borrowerIds;\n      loan.property = propertyId;\n    }).then(function () {\n      return cleanMethod('insertLoan', {\n        object: loan\n      });\n    }).then(function (id) {\n      loanId = id;\n\n      var object = _getRandomOffer({\n        loan: (0, _extends3.default)({}, loan, {\n          _id: id\n        }),\n        property: _fakeProperty\n      }, true);\n\n      return cleanMethod('insertAdminOffer', {\n        object: object\n      });\n    }).then(function (offerId) {\n      return cleanMethod('updateLoan', {\n        object: {\n          'logic.lender.offerId': offerId,\n          'logic.lender.chosenTime': new Date()\n        },\n        id: loanId\n      });\n    }).then(function () {\n      // Weird bug with offers publications that forces me to reload TODO: fix it\n      location.reload();\n    }).catch(console.log);\n  }\n\n  return addStep3Loan;\n}();\n\nvar purge = function () {\n  function purge(_ref) {\n    var loans = _ref.loans,\n        borrowers = _ref.borrowers,\n        offers = _ref.offers,\n        properties = _ref.properties;\n    loans.forEach(function (r) {\n      return cleanMethod('deleteLoan', {\n        id: r._id\n      });\n    });\n    borrowers.forEach(function (r) {\n      return cleanMethod('deleteBorrower', {\n        id: r._id\n      });\n    });\n    offers.forEach(function (r) {\n      return cleanMethod('deleteOffer', {\n        id: r._id\n      });\n    });\n    properties.forEach(function (r) {\n      return cleanMethod('deleteProperty', {\n        id: r._id\n      });\n    });\n  }\n\n  return purge;\n}();\n\nvar DevPage = function (_Component2) {\n  (0, _inherits3.default)(DevPage, _Component2);\n\n  function DevPage(props) {\n    (0, _classCallCheck3.default)(this, DevPage);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (DevPage.__proto__ || Object.getPrototypeOf(DevPage)).call(this, props));\n\n    _this.handleChange = function () {\n      return _this.setState(function (prev) {\n        return {\n          twoBorrowers: !prev.twoBorrowers\n        };\n      });\n    };\n\n    _this.state = {\n      twoBorrowers: false\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(DevPage, [{\n    key: \"componentDidMount\",\n    value: function () {\n      function componentDidMount() {\n        if (!_Roles.userIsInRole(this.props.currentUser, 'dev')) {\n          this.props.history.push('/');\n        }\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function () {\n      function render() {\n        var _this2 = this;\n\n        var twoBorrowers = this.state.twoBorrowers;\n        return React.createElement(\n          \"div\",\n          null,\n          React.createElement(\"input\", {\n            type: \"checkbox\",\n            name: \"vehicle\",\n            value: twoBorrowers,\n            onChange: this.handleChange\n          }),\n          \"2 borrowers\",\n          React.createElement(\"br\", null),\n          React.createElement(\n            \"button\",\n            {\n              onClick: function () {\n                function onClick() {\n                  return addStep1Loan(twoBorrowers);\n                }\n\n                return onClick;\n              }()\n            },\n            \"step 1 Loan\"\n          ),\n          React.createElement(\n            \"button\",\n            {\n              onClick: function () {\n                function onClick() {\n                  return addStep2Loan(twoBorrowers);\n                }\n\n                return onClick;\n              }()\n            },\n            \"step 2 Loan\"\n          ),\n          React.createElement(\n            \"button\",\n            {\n              onClick: function () {\n                function onClick() {\n                  return addStep3Loan(twoBorrowers);\n                }\n\n                return onClick;\n              }()\n            },\n            \"step 3 Loan\"\n          ),\n          React.createElement(\n            \"button\",\n            {\n              onClick: function () {\n                function onClick() {\n                  return addStep3Loan(twoBorrowers, false);\n                }\n\n                return onClick;\n              }()\n            },\n            \"step 3 Loan, few files\"\n          ),\n          React.createElement(\n            \"button\",\n            {\n              onClick: function () {\n                function onClick() {\n                  return purge(_this2.props);\n                }\n\n                return onClick;\n              }()\n            },\n            \"Purge\"\n          )\n        );\n      }\n\n      return render;\n    }()\n  }]);\n  return DevPage;\n}(_Component);\n\nDevPage.propTypes = {\n  loans: PropTypes.arrayOf(PropTypes.object),\n  borrowers: PropTypes.arrayOf(PropTypes.object),\n  offers: PropTypes.arrayOf(PropTypes.object)\n};\nDevPage.defaultProps = {\n  loans: [],\n  borrowers: [],\n  offers: []\n};","map":{"version":3,"sources":["imports/ui/pages/DevPage/DevPage.jsx"],"names":["module","export","DevPage","React","Component","watch","require","v","PropTypes","cleanMethod","Roles","completeFakeBorrower","loanStep1","loanStep2","loanStep3","getRandomOffer","fakeProperty","addStep1Loan","twoBorrowers","borrowerIds","object","then","id1","push","id2","propertyId","loan","borrowers","property","catch","console","log","addStep2Loan","addStep3Loan","completeFiles","loanId","id","_id","offerId","Date","location","reload","purge","loans","offers","properties","forEach","r","props","handleChange","setState","prev","state","userIsInRole","currentUser","history","propTypes","arrayOf","defaultProps"],"mappings":"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","file":"imports/ui/pages/DevPage/DevPage.jsx.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport cleanMethod from 'core/api/cleanMethods';\nimport { Roles } from 'meteor/alanning:roles';\n\nimport { completeFakeBorrower } from 'core/api/borrowers/fakes';\nimport { loanStep1, loanStep2, loanStep3 } from 'core/api/loans/fakes';\nimport { getRandomOffer } from 'core/api/offers/fakes';\nimport { fakeProperty } from 'core/api/properties/fakes';\n\nconst addStep1Loan = (twoBorrowers) => {\n  const borrowerIds = [];\n\n  cleanMethod('insertBorrower', { object: completeFakeBorrower })\n    .then((id1) => {\n      borrowerIds.push(id1);\n      return twoBorrowers\n        ? cleanMethod('insertBorrower', {\n          object: completeFakeBorrower,\n        })\n        : false;\n    })\n    .then((id2) => {\n      if (id2) {\n        borrowerIds.push(id2);\n      }\n\n      return cleanMethod('insertProperty', { object: fakeProperty });\n    })\n    .then((propertyId) => {\n      const loan = loanStep1;\n      loan.borrowers = borrowerIds;\n      loan.property = propertyId;\n      cleanMethod('insertLoan', { object: loan });\n    })\n    .catch(console.log);\n};\n\nconst addStep2Loan = (twoBorrowers) => {\n  const borrowerIds = [];\n\n  cleanMethod('insertBorrower', { object: completeFakeBorrower })\n    .then((id1) => {\n      borrowerIds.push(id1);\n      return twoBorrowers\n        ? cleanMethod('insertBorrower', {\n          object: completeFakeBorrower,\n        })\n        : false;\n    })\n    .then((id2) => {\n      if (id2) {\n        borrowerIds.push(id2);\n      }\n\n      return cleanMethod('insertProperty', { object: fakeProperty });\n    })\n    .then((propertyId) => {\n      const loan = loanStep2;\n      loan.borrowers = borrowerIds;\n      loan.property = propertyId;\n      cleanMethod('insertLoan', { object: loan });\n    })\n    .catch(console.log);\n};\n\nconst addStep3Loan = (twoBorrowers, completeFiles = true) => {\n  const borrowerIds = [];\n  const loan = loanStep3(completeFiles);\n  let loanId;\n  cleanMethod('insertBorrower', { object: completeFakeBorrower })\n    .then((id1) => {\n      borrowerIds.push(id1);\n      return twoBorrowers\n        ? cleanMethod('insertBorrower', {\n          object: completeFakeBorrower,\n        })\n        : false;\n    })\n    .then((id2) => {\n      if (id2) {\n        borrowerIds.push(id2);\n      }\n\n      return cleanMethod('insertProperty', { object: fakeProperty });\n    })\n    .then((propertyId) => {\n      loan.borrowers = borrowerIds;\n      loan.property = propertyId;\n    })\n    .then(() => cleanMethod('insertLoan', { object: loan }))\n    .then((id) => {\n      loanId = id;\n      const object = getRandomOffer(\n        { loan: { ...loan, _id: id }, property: fakeProperty },\n        true,\n      );\n      return cleanMethod('insertAdminOffer', { object });\n    })\n    .then(offerId =>\n      cleanMethod('updateLoan', {\n        object: {\n          'logic.lender.offerId': offerId,\n          'logic.lender.chosenTime': new Date(),\n        },\n        id: loanId,\n      }))\n    .then(() => {\n      // Weird bug with offers publications that forces me to reload TODO: fix it\n      location.reload();\n    })\n    .catch(console.log);\n};\n\nconst purge = ({ loans, borrowers, offers, properties }) => {\n  loans.forEach(r => cleanMethod('deleteLoan', { id: r._id }));\n  borrowers.forEach(r => cleanMethod('deleteBorrower', { id: r._id }));\n  offers.forEach(r => cleanMethod('deleteOffer', { id: r._id }));\n  properties.forEach(r => cleanMethod('deleteProperty', { id: r._id }));\n};\n\nexport default class DevPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { twoBorrowers: false };\n  }\n\n  componentDidMount() {\n    if (!Roles.userIsInRole(this.props.currentUser, 'dev')) {\n      this.props.history.push('/');\n    }\n  }\n\n  handleChange = () =>\n    this.setState(prev => ({ twoBorrowers: !prev.twoBorrowers }));\n\n  render() {\n    const { twoBorrowers } = this.state;\n\n    return (\n      <div>\n        <input\n          type=\"checkbox\"\n          name=\"vehicle\"\n          value={twoBorrowers}\n          onChange={this.handleChange}\n        />\n        2 borrowers<br />\n        <button onClick={() => addStep1Loan(twoBorrowers)}>step 1 Loan</button>\n        <button onClick={() => addStep2Loan(twoBorrowers)}>step 2 Loan</button>\n        <button onClick={() => addStep3Loan(twoBorrowers)}>step 3 Loan</button>\n        <button onClick={() => addStep3Loan(twoBorrowers, false)}>\n          step 3 Loan, few files\n        </button>\n        <button onClick={() => purge(this.props)}>Purge</button>\n      </div>\n    );\n  }\n}\n\nDevPage.propTypes = {\n  loans: PropTypes.arrayOf(PropTypes.object),\n  borrowers: PropTypes.arrayOf(PropTypes.object),\n  offers: PropTypes.arrayOf(PropTypes.object),\n};\n\nDevPage.defaultProps = {\n  loans: [],\n  borrowers: [],\n  offers: [],\n};\n"]},"hash":"c9b64138c8064e17cc1ecc3a84b63987693c0d5c"}
