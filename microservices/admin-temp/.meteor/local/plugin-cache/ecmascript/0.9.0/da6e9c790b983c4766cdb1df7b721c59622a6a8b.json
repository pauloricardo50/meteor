{"metadata":{"usedHelpers":["extends","inherits","possibleConstructorReturn","createClass","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"../../api/cleanMethods","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"cleanMethod"}]},{"source":"meteor/alanning:roles","imported":["Roles"],"specifiers":[{"kind":"named","imported":"Roles","local":"Roles"}]},{"source":"../../api/borrowers/fakes","imported":["completeFakeBorrower"],"specifiers":[{"kind":"named","imported":"completeFakeBorrower","local":"completeFakeBorrower"}]},{"source":"../../api/loans/fakes","imported":["loanStep1","loanStep2","loanStep3"],"specifiers":[{"kind":"named","imported":"loanStep1","local":"loanStep1"},{"kind":"named","imported":"loanStep2","local":"loanStep2"},{"kind":"named","imported":"loanStep3","local":"loanStep3"}]},{"source":"../../api/offers/fakes","imported":["getRandomOffer"],"specifiers":[{"kind":"named","imported":"getRandomOffer","local":"getRandomOffer"}]},{"source":"../../api/properties/fakes","imported":["fakeProperty"],"specifiers":[{"kind":"named","imported":"fakeProperty","local":"fakeProperty"}]}],"exports":{"exported":["DevPage"],"specifiers":[{"kind":"local","local":"DevPage","exported":"default"}]}}},"options":{"filename":"imports/core/components/DevPage/DevPage.jsx","filenameRelative":"imports/core/components/DevPage/DevPage.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/components/DevPage/DevPage.jsx.map","sourceFileName":"imports/core/components/DevPage/DevPage.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"DevPage"},"ignored":false,"code":"\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.export({\n  default: function _default() {\n    return DevPage;\n  }\n});\n\nvar _Meteor = void 0;\n\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function Meteor(v) {\n    _Meteor = v;\n  }\n}, 0);\n\nvar React = void 0,\n    _Component = void 0;\n\nmodule.watch(require(\"react\"), {\n  default: function _default(v) {\n    React = v;\n  },\n  Component: function Component(v) {\n    _Component = v;\n  }\n}, 1);\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  default: function _default(v) {\n    PropTypes = v;\n  }\n}, 2);\nvar cleanMethod = void 0;\nmodule.watch(require(\"../../api/cleanMethods\"), {\n  default: function _default(v) {\n    cleanMethod = v;\n  }\n}, 3);\n\nvar _Roles = void 0;\n\nmodule.watch(require(\"meteor/alanning:roles\"), {\n  Roles: function Roles(v) {\n    _Roles = v;\n  }\n}, 4);\n\nvar _completeFakeBorrower = void 0;\n\nmodule.watch(require(\"../../api/borrowers/fakes\"), {\n  completeFakeBorrower: function completeFakeBorrower(v) {\n    _completeFakeBorrower = v;\n  }\n}, 5);\n\nvar _loanStep = void 0,\n    _loanStep2 = void 0,\n    _loanStep3 = void 0;\n\nmodule.watch(require(\"../../api/loans/fakes\"), {\n  loanStep1: function loanStep1(v) {\n    _loanStep = v;\n  },\n  loanStep2: function loanStep2(v) {\n    _loanStep2 = v;\n  },\n  loanStep3: function loanStep3(v) {\n    _loanStep3 = v;\n  }\n}, 6);\n\nvar _getRandomOffer = void 0;\n\nmodule.watch(require(\"../../api/offers/fakes\"), {\n  getRandomOffer: function getRandomOffer(v) {\n    _getRandomOffer = v;\n  }\n}, 7);\n\nvar _fakeProperty = void 0;\n\nmodule.watch(require(\"../../api/properties/fakes\"), {\n  fakeProperty: function fakeProperty(v) {\n    _fakeProperty = v;\n  }\n}, 8);\n\nvar addStep1Loan = function addStep1Loan(twoBorrowers) {\n  var borrowerIds = [];\n  cleanMethod('insertBorrower', {\n    object: _completeFakeBorrower\n  }).then(function (id1) {\n    borrowerIds.push(id1);\n    return twoBorrowers ? cleanMethod('insertBorrower', {\n      object: _completeFakeBorrower\n    }) : false;\n  }).then(function (id2) {\n    if (id2) {\n      borrowerIds.push(id2);\n    }\n\n    return cleanMethod('insertProperty', {\n      object: _fakeProperty\n    });\n  }).then(function (propertyId) {\n    var loan = _loanStep;\n    loan.borrowerIds = borrowerIds;\n    loan.propertyId = propertyId;\n    cleanMethod('insertLoan', {\n      object: loan\n    });\n  }).catch(console.log);\n};\n\nvar addStep2Loan = function addStep2Loan(twoBorrowers) {\n  var borrowerIds = [];\n  cleanMethod('insertBorrower', {\n    object: _completeFakeBorrower\n  }).then(function (id1) {\n    borrowerIds.push(id1);\n    return twoBorrowers ? cleanMethod('insertBorrower', {\n      object: _completeFakeBorrower\n    }) : false;\n  }).then(function (id2) {\n    if (id2) {\n      borrowerIds.push(id2);\n    }\n\n    return cleanMethod('insertProperty', {\n      object: _fakeProperty\n    });\n  }).then(function (propertyId) {\n    var loan = _loanStep2;\n    loan.borrowerIds = borrowerIds;\n    loan.propertyId = propertyId;\n    cleanMethod('insertLoan', {\n      object: loan\n    });\n  }).catch(console.log);\n};\n\nvar addStep3Loan = function addStep3Loan(twoBorrowers) {\n  var completeFiles = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var borrowerIds = [];\n\n  var loan = _loanStep3(completeFiles);\n\n  var loanId = void 0;\n  cleanMethod('insertBorrower', {\n    object: _completeFakeBorrower\n  }).then(function (id1) {\n    borrowerIds.push(id1);\n    return twoBorrowers ? cleanMethod('insertBorrower', {\n      object: _completeFakeBorrower\n    }) : false;\n  }).then(function (id2) {\n    if (id2) {\n      borrowerIds.push(id2);\n    }\n\n    return cleanMethod('insertProperty', {\n      object: _fakeProperty\n    });\n  }).then(function (propertyId) {\n    loan.borrowerIds = borrowerIds;\n    loan.propertyId = propertyId;\n  }).then(function () {\n    return cleanMethod('insertLoan', {\n      object: loan\n    });\n  }).then(function (id) {\n    loanId = id;\n\n    var object = _getRandomOffer({\n      loan: (0, _extends3.default)({}, loan, {\n        _id: id\n      }),\n      property: _fakeProperty\n    }, true);\n\n    return cleanMethod('insertAdminOffer', {\n      object: object\n    });\n  }).then(function (offerId) {\n    return cleanMethod('updateLoan', {\n      object: {\n        'logic.lender.offerId': offerId,\n        'logic.lender.chosenTime': new Date()\n      },\n      id: loanId\n    });\n  }).then(function () {\n    // Weird bug with offers publications that forces me to reload TODO: fix it\n    location.reload();\n  }).catch(console.log);\n};\n\nvar DevPage = function (_Component2) {\n  (0, _inherits3.default)(DevPage, _Component2);\n\n  function DevPage(props) {\n    (0, _classCallCheck3.default)(this, DevPage);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (DevPage.__proto__ || Object.getPrototypeOf(DevPage)).call(this, props));\n\n    _this.handleChange = function () {\n      return _this.setState(function (prev) {\n        return {\n          twoBorrowers: !prev.twoBorrowers\n        };\n      });\n    };\n\n    _this.state = {\n      twoBorrowers: false\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(DevPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!_Roles.userIsInRole(this.props.currentUser, 'dev')) {\n        this.props.history.push('/');\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var twoBorrowers = this.state.twoBorrowers;\n      var currentUser = this.props.currentUser;\n\n      if (!_Meteor.isProduction) {\n        return React.createElement(\n          \"div\",\n          null,\n          React.createElement(\"input\", {\n            type: \"checkbox\",\n            name: \"vehicle\",\n            value: twoBorrowers,\n            onChange: this.handleChange\n          }),\n          \"2 borrowers\",\n          React.createElement(\"br\", null),\n          React.createElement(\n            \"button\",\n            {\n              onClick: function onClick() {\n                return addStep1Loan(twoBorrowers);\n              }\n            },\n            \"step 1 Loan\"\n          ),\n          React.createElement(\n            \"button\",\n            {\n              onClick: function onClick() {\n                return addStep2Loan(twoBorrowers);\n              }\n            },\n            \"step 2 Loan\"\n          ),\n          React.createElement(\n            \"button\",\n            {\n              onClick: function onClick() {\n                return addStep3Loan(twoBorrowers);\n              }\n            },\n            \"step 3 Loan\"\n          ),\n          React.createElement(\n            \"button\",\n            {\n              onClick: function onClick() {\n                return addStep3Loan(twoBorrowers, false);\n              }\n            },\n            \"step 3 Loan, few files\"\n          ),\n          React.createElement(\n            \"button\",\n            {\n              onClick: function onClick() {\n                return _Meteor.call('generateTestData');\n              }\n            },\n            \"Generate test data\"\n          ),\n          React.createElement(\n            \"button\",\n            {\n              onClick: function onClick() {\n                return _Meteor.call('purgeDatabase', currentUser._id);\n              }\n            },\n            \"Purge\"\n          )\n        );\n      }\n\n      return null;\n    }\n  }]);\n  return DevPage;\n}(_Component);\n\nDevPage.propTypes = {\n  currentUser: PropTypes.object\n};\nDevPage.defaultProps = {\n  currentUser: {}\n};","map":{"version":3,"sources":["imports/core/components/DevPage/DevPage.jsx"],"names":["module","export","default","DevPage","Meteor","watch","require","v","React","Component","PropTypes","cleanMethod","Roles","completeFakeBorrower","loanStep1","loanStep2","loanStep3","getRandomOffer","fakeProperty","addStep1Loan","twoBorrowers","borrowerIds","object","then","id1","push","id2","propertyId","loan","catch","console","log","addStep2Loan","addStep3Loan","completeFiles","loanId","id","_id","property","offerId","Date","location","reload","props","handleChange","setState","prev","state","userIsInRole","currentUser","history","isProduction","call","propTypes","defaultProps"],"mappings":"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","file":"imports/core/components/DevPage/DevPage.jsx.map","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport cleanMethod from 'core/api/cleanMethods';\nimport { Roles } from 'meteor/alanning:roles';\n\nimport { completeFakeBorrower } from 'core/api/borrowers/fakes';\nimport { loanStep1, loanStep2, loanStep3 } from 'core/api/loans/fakes';\nimport { getRandomOffer } from 'core/api/offers/fakes';\nimport { fakeProperty } from 'core/api/properties/fakes';\n\nconst addStep1Loan = (twoBorrowers) => {\n  const borrowerIds = [];\n  cleanMethod('insertBorrower', { object: completeFakeBorrower })\n    .then((id1) => {\n      borrowerIds.push(id1);\n      return twoBorrowers\n        ? cleanMethod('insertBorrower', {\n          object: completeFakeBorrower,\n        })\n        : false;\n    })\n    .then((id2) => {\n      if (id2) {\n        borrowerIds.push(id2);\n      }\n\n      return cleanMethod('insertProperty', { object: fakeProperty });\n    })\n    .then((propertyId) => {\n      const loan = loanStep1;\n      loan.borrowerIds = borrowerIds;\n      loan.propertyId = propertyId;\n      cleanMethod('insertLoan', { object: loan });\n    })\n    .catch(console.log);\n};\n\nconst addStep2Loan = (twoBorrowers) => {\n  const borrowerIds = [];\n\n  cleanMethod('insertBorrower', { object: completeFakeBorrower })\n    .then((id1) => {\n      borrowerIds.push(id1);\n      return twoBorrowers\n        ? cleanMethod('insertBorrower', {\n          object: completeFakeBorrower,\n        })\n        : false;\n    })\n    .then((id2) => {\n      if (id2) {\n        borrowerIds.push(id2);\n      }\n\n      return cleanMethod('insertProperty', { object: fakeProperty });\n    })\n    .then((propertyId) => {\n      const loan = loanStep2;\n      loan.borrowerIds = borrowerIds;\n      loan.propertyId = propertyId;\n      cleanMethod('insertLoan', { object: loan });\n    })\n    .catch(console.log);\n};\n\nconst addStep3Loan = (twoBorrowers, completeFiles = true) => {\n  const borrowerIds = [];\n  const loan = loanStep3(completeFiles);\n  let loanId;\n  cleanMethod('insertBorrower', { object: completeFakeBorrower })\n    .then((id1) => {\n      borrowerIds.push(id1);\n      return twoBorrowers\n        ? cleanMethod('insertBorrower', {\n          object: completeFakeBorrower,\n        })\n        : false;\n    })\n    .then((id2) => {\n      if (id2) {\n        borrowerIds.push(id2);\n      }\n\n      return cleanMethod('insertProperty', { object: fakeProperty });\n    })\n    .then((propertyId) => {\n      loan.borrowerIds = borrowerIds;\n      loan.propertyId = propertyId;\n    })\n    .then(() => cleanMethod('insertLoan', { object: loan }))\n    .then((id) => {\n      loanId = id;\n      const object = getRandomOffer(\n        { loan: { ...loan, _id: id }, property: fakeProperty },\n        true,\n      );\n      return cleanMethod('insertAdminOffer', { object });\n    })\n    .then(offerId =>\n      cleanMethod('updateLoan', {\n        object: {\n          'logic.lender.offerId': offerId,\n          'logic.lender.chosenTime': new Date(),\n        },\n        id: loanId,\n      }))\n    .then(() => {\n      // Weird bug with offers publications that forces me to reload TODO: fix it\n      location.reload();\n    })\n    .catch(console.log);\n};\nexport default class DevPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { twoBorrowers: false };\n  }\n\n  componentDidMount() {\n    if (!Roles.userIsInRole(this.props.currentUser, 'dev')) {\n      this.props.history.push('/');\n    }\n  }\n\n  handleChange = () =>\n    this.setState(prev => ({ twoBorrowers: !prev.twoBorrowers }));\n\n  render() {\n    const { twoBorrowers } = this.state;\n    const { currentUser } = this.props;\n       \n    if (!Meteor.isProduction) {\n      return (\n        <div>\n          <input\n            type=\"checkbox\"\n            name=\"vehicle\"\n            value={twoBorrowers}\n            onChange={this.handleChange}\n          />\n          2 borrowers<br />\n          <button onClick={() => addStep1Loan(twoBorrowers)}>step 1 Loan</button>\n          <button onClick={() => addStep2Loan(twoBorrowers)}>step 2 Loan</button>\n          <button onClick={() => addStep3Loan(twoBorrowers)}>step 3 Loan</button>\n          <button onClick={() => addStep3Loan(twoBorrowers, false)}>\n            step 3 Loan, few files\n          </button>\n          <button onClick={() => Meteor.call('generateTestData')}>Generate test data</button>\n          <button onClick={() => Meteor.call('purgeDatabase', currentUser._id)}>Purge</button>\n        </div>\n      );\n    }\n    return null;\n  }\n}\n\nDevPage.propTypes = {\n  currentUser: PropTypes.object,\n};\n\nDevPage.defaultProps = {\n  currentUser: {},\n};\n\n"]},"hash":"da6e9c790b983c4766cdb1df7b721c59622a6a8b"}
