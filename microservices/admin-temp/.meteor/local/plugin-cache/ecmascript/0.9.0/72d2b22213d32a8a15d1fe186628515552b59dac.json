{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","createClass","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"meteor/tracker","imported":["Tracker"],"specifiers":[{"kind":"named","imported":"Tracker","local":"Tracker"}]},{"source":"meteor/edgee:slingshot","imported":["Slingshot"],"specifiers":[{"kind":"named","imported":"Slingshot","local":"Slingshot"}]},{"source":"material-ui/Progress","imported":["CircularProgress","LinearProgress"],"specifiers":[{"kind":"named","imported":"CircularProgress","local":"CircularProgress"},{"kind":"named","imported":"LinearProgress","local":"LinearProgress"}]}],"exports":{"exported":["TempFile"],"specifiers":[{"kind":"local","local":"TempFile","exported":"default"}]}}},"options":{"filename":"imports/core/components/UploaderArray/TempFile.jsx","filenameRelative":"imports/core/components/UploaderArray/TempFile.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/components/UploaderArray/TempFile.jsx.map","sourceFileName":"imports/core/components/UploaderArray/TempFile.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"TempFile"},"ignored":false,"code":"\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.export({\n  default: function _default() {\n    return TempFile;\n  }\n});\n\nvar React = void 0,\n    _Component = void 0;\n\nmodule.watch(require(\"react\"), {\n  default: function _default(v) {\n    React = v;\n  },\n  Component: function Component(v) {\n    _Component = v;\n  }\n}, 0);\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  default: function _default(v) {\n    PropTypes = v;\n  }\n}, 1);\n\nvar _Tracker = void 0;\n\nmodule.watch(require(\"meteor/tracker\"), {\n  Tracker: function Tracker(v) {\n    _Tracker = v;\n  }\n}, 2);\n\nvar _Slingshot = void 0;\n\nmodule.watch(require(\"meteor/edgee:slingshot\"), {\n  Slingshot: function Slingshot(v) {\n    _Slingshot = v;\n  }\n}, 3);\n\nvar _CircularProgress = void 0,\n    _LinearProgress = void 0;\n\nmodule.watch(require(\"material-ui/Progress\"), {\n  CircularProgress: function CircularProgress(v) {\n    _CircularProgress = v;\n  },\n  LinearProgress: function LinearProgress(v) {\n    _LinearProgress = v;\n  }\n}, 4);\n\nvar TempFile = function (_Component2) {\n  (0, _inherits3.default)(TempFile, _Component2);\n\n  function TempFile(props) {\n    (0, _classCallCheck3.default)(this, TempFile);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (TempFile.__proto__ || Object.getPrototypeOf(TempFile)).call(this, props));\n\n    _this.state = {\n      progress: 0,\n      error: ''\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(TempFile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.uploader = new _Slingshot.Upload('myFileUploads', {\n        currentValue: this.props.currentValue,\n        collection: this.props.collection,\n        docId: this.props.docId,\n        id: this.props.id\n      });\n\n      var progressSetter = _Tracker.autorun(function () {\n        _this2.setState({\n          progress: _this2.uploader.progress()\n        });\n      });\n\n      this.uploader.send(this.props.file, function (error, downloadUrl) {\n        progressSetter.stop();\n\n        if (error) {\n          _this2.setState({\n            error: error.message\n          });\n        } else {\n          _this2.props.handleSave(_this2.props.file, downloadUrl);\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var name = this.props.file.name;\n      var _state = this.state,\n          progress = _state.progress,\n          error = _state.error;\n      return React.createElement(\n        \"div\",\n        {\n          className: \"flex-col\"\n        },\n        React.createElement(\n          \"div\",\n          {\n            className: \"file\",\n            style: {\n              height: 48,\n              justifyContent: 'flex-start'\n            }\n          },\n          React.createElement(\n            \"h5\",\n            {\n              className: \"secondary bold\"\n            },\n            name\n          ),\n          !Number.isNaN(progress) ? React.createElement(\n            \"div\",\n            {\n              style: {\n                paddingLeft: 16,\n                flexGrow: 1\n              }\n            },\n            React.createElement(_LinearProgress, {\n              color: \"primary\",\n              variant: \"determinate\",\n              value: Math.round(progress * 100)\n            })\n          ) : React.createElement(\n            \"div\",\n            {\n              style: {\n                paddingLeft: 16\n              }\n            },\n            React.createElement(_CircularProgress, {\n              size: 24,\n              color: \"primary\"\n            })\n          )\n        ),\n        !error && React.createElement(\n          \"p\",\n          {\n            className: \"error\"\n          },\n          error\n        )\n      );\n    }\n  }]);\n  return TempFile;\n}(_Component);\n\nTempFile.propTypes = {\n  file: PropTypes.objectOf(PropTypes.any).isRequired,\n  handleSave: PropTypes.func.isRequired,\n  docId: PropTypes.string.isRequired,\n  collection: PropTypes.string.isRequired,\n  id: PropTypes.string.isRequired,\n  currentValue: PropTypes.arrayOf(PropTypes.object).isRequired\n};","map":{"version":3,"sources":["imports/core/components/UploaderArray/TempFile.jsx"],"names":["module","export","default","TempFile","React","Component","watch","require","v","PropTypes","Tracker","Slingshot","CircularProgress","LinearProgress","props","state","progress","error","uploader","Upload","currentValue","collection","docId","id","progressSetter","autorun","setState","send","file","downloadUrl","stop","message","handleSave","name","height","justifyContent","Number","isNaN","paddingLeft","flexGrow","Math","round","propTypes","objectOf","any","isRequired","func","string","arrayOf","object"],"mappings":"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","file":"imports/core/components/UploaderArray/TempFile.jsx.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Tracker } from 'meteor/tracker';\nimport { Slingshot } from 'meteor/edgee:slingshot';\n\nimport { CircularProgress, LinearProgress } from 'material-ui/Progress';\n\nexport default class TempFile extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { progress: 0, error: '' };\n  }\n\n  componentDidMount() {\n    this.uploader = new Slingshot.Upload('myFileUploads', {\n      currentValue: this.props.currentValue,\n      collection: this.props.collection,\n      docId: this.props.docId,\n      id: this.props.id,\n    });\n\n    const progressSetter = Tracker.autorun(() => {\n      this.setState({ progress: this.uploader.progress() });\n    });\n\n    this.uploader.send(this.props.file, (error, downloadUrl) => {\n      progressSetter.stop();\n      if (error) {\n        this.setState({ error: error.message });\n      } else {\n        this.props.handleSave(this.props.file, downloadUrl);\n      }\n    });\n  }\n\n  render() {\n    const { name } = this.props.file;\n    const { progress, error } = this.state;\n\n    return (\n      <div className=\"flex-col\">\n        <div\n          className=\"file\"\n          style={{ height: 48, justifyContent: 'flex-start' }}\n        >\n          <h5 className=\"secondary bold\">{name}</h5>\n          {!Number.isNaN(progress) ? (\n            <div style={{ paddingLeft: 16, flexGrow: 1 }}>\n              <LinearProgress\n                color=\"primary\"\n                variant=\"determinate\"\n                value={Math.round(progress * 100)}\n              />\n            </div>\n          ) : (\n            <div style={{ paddingLeft: 16 }}>\n              <CircularProgress size={24} color=\"primary\" />\n            </div>\n          )}\n        </div>\n        {!error && <p className=\"error\">{error}</p>}\n      </div>\n    );\n  }\n}\n\nTempFile.propTypes = {\n  file: PropTypes.objectOf(PropTypes.any).isRequired,\n  handleSave: PropTypes.func.isRequired,\n  docId: PropTypes.string.isRequired,\n  collection: PropTypes.string.isRequired,\n  id: PropTypes.string.isRequired,\n  currentValue: PropTypes.arrayOf(PropTypes.object).isRequired,\n};\n"]},"hash":"72d2b22213d32a8a15d1fe186628515552b59dac"}
