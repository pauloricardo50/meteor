{"metadata":{"usedHelpers":["extends","inherits","possibleConstructorReturn","createClass","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"../../../core/api/cleanMethods","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"cleanMethod"}]},{"source":"meteor/alanning:roles","imported":["Roles"],"specifiers":[{"kind":"named","imported":"Roles","local":"Roles"}]},{"source":"../../../core/api/borrowers/fakes","imported":["completeFakeBorrower"],"specifiers":[{"kind":"named","imported":"completeFakeBorrower","local":"completeFakeBorrower"}]},{"source":"../../../core/api/loans/fakes","imported":["loanStep1","loanStep2","loanStep3"],"specifiers":[{"kind":"named","imported":"loanStep1","local":"loanStep1"},{"kind":"named","imported":"loanStep2","local":"loanStep2"},{"kind":"named","imported":"loanStep3","local":"loanStep3"}]},{"source":"../../../core/api/offers/fakes","imported":["getRandomOffer"],"specifiers":[{"kind":"named","imported":"getRandomOffer","local":"getRandomOffer"}]},{"source":"../../../core/api/properties/fakes","imported":["fakeProperty"],"specifiers":[{"kind":"named","imported":"fakeProperty","local":"fakeProperty"}]}],"exports":{"exported":["DevPage"],"specifiers":[{"kind":"local","local":"DevPage","exported":"default"}]}}},"options":{"filename":"imports/ui/pages/DevPage/DevPage.jsx","filenameRelative":"imports/ui/pages/DevPage/DevPage.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/ui/pages/DevPage/DevPage.jsx.map","sourceFileName":"imports/ui/pages/DevPage/DevPage.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"DevPage"},"ignored":false,"code":"\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.export({\n  default: function _default() {\n    return DevPage;\n  }\n});\n\nvar React = void 0,\n    _Component = void 0;\n\nmodule.watch(require(\"react\"), {\n  default: function _default(v) {\n    React = v;\n  },\n  Component: function Component(v) {\n    _Component = v;\n  }\n}, 0);\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  default: function _default(v) {\n    PropTypes = v;\n  }\n}, 1);\nvar cleanMethod = void 0;\nmodule.watch(require(\"../../../core/api/cleanMethods\"), {\n  default: function _default(v) {\n    cleanMethod = v;\n  }\n}, 2);\n\nvar _Roles = void 0;\n\nmodule.watch(require(\"meteor/alanning:roles\"), {\n  Roles: function Roles(v) {\n    _Roles = v;\n  }\n}, 3);\n\nvar _completeFakeBorrower = void 0;\n\nmodule.watch(require(\"../../../core/api/borrowers/fakes\"), {\n  completeFakeBorrower: function completeFakeBorrower(v) {\n    _completeFakeBorrower = v;\n  }\n}, 4);\n\nvar _loanStep = void 0,\n    _loanStep2 = void 0,\n    _loanStep3 = void 0;\n\nmodule.watch(require(\"../../../core/api/loans/fakes\"), {\n  loanStep1: function loanStep1(v) {\n    _loanStep = v;\n  },\n  loanStep2: function loanStep2(v) {\n    _loanStep2 = v;\n  },\n  loanStep3: function loanStep3(v) {\n    _loanStep3 = v;\n  }\n}, 5);\n\nvar _getRandomOffer = void 0;\n\nmodule.watch(require(\"../../../core/api/offers/fakes\"), {\n  getRandomOffer: function getRandomOffer(v) {\n    _getRandomOffer = v;\n  }\n}, 6);\n\nvar _fakeProperty = void 0;\n\nmodule.watch(require(\"../../../core/api/properties/fakes\"), {\n  fakeProperty: function fakeProperty(v) {\n    _fakeProperty = v;\n  }\n}, 7);\n\nvar addStep1Loan = function addStep1Loan(twoBorrowers) {\n  var borrowerIds = [];\n  cleanMethod('insertBorrower', {\n    object: _completeFakeBorrower\n  }).then(function (id1) {\n    borrowerIds.push(id1);\n    return twoBorrowers ? cleanMethod('insertBorrower', {\n      object: _completeFakeBorrower\n    }) : false;\n  }).then(function (id2) {\n    if (id2) {\n      borrowerIds.push(id2);\n    }\n\n    return cleanMethod('insertProperty', {\n      object: _fakeProperty\n    });\n  }).then(function (propertyId) {\n    var loan = _loanStep;\n    loan.borrowers = borrowerIds;\n    loan.property = propertyId;\n    cleanMethod('insertLoan', {\n      object: loan\n    });\n  }).catch(console.log);\n};\n\nvar addStep2Loan = function addStep2Loan(twoBorrowers) {\n  var borrowerIds = [];\n  cleanMethod('insertBorrower', {\n    object: _completeFakeBorrower\n  }).then(function (id1) {\n    borrowerIds.push(id1);\n    return twoBorrowers ? cleanMethod('insertBorrower', {\n      object: _completeFakeBorrower\n    }) : false;\n  }).then(function (id2) {\n    if (id2) {\n      borrowerIds.push(id2);\n    }\n\n    return cleanMethod('insertProperty', {\n      object: _fakeProperty\n    });\n  }).then(function (propertyId) {\n    var loan = _loanStep2;\n    loan.borrowers = borrowerIds;\n    loan.property = propertyId;\n    cleanMethod('insertLoan', {\n      object: loan\n    });\n  }).catch(console.log);\n};\n\nvar addStep3Loan = function addStep3Loan(twoBorrowers) {\n  var completeFiles = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var borrowerIds = [];\n\n  var loan = _loanStep3(completeFiles);\n\n  var loanId = void 0;\n  cleanMethod('insertBorrower', {\n    object: _completeFakeBorrower\n  }).then(function (id1) {\n    borrowerIds.push(id1);\n    return twoBorrowers ? cleanMethod('insertBorrower', {\n      object: _completeFakeBorrower\n    }) : false;\n  }).then(function (id2) {\n    if (id2) {\n      borrowerIds.push(id2);\n    }\n\n    return cleanMethod('insertProperty', {\n      object: _fakeProperty\n    });\n  }).then(function (propertyId) {\n    loan.borrowers = borrowerIds;\n    loan.property = propertyId;\n  }).then(function () {\n    return cleanMethod('insertLoan', {\n      object: loan\n    });\n  }).then(function (id) {\n    loanId = id;\n\n    var object = _getRandomOffer({\n      loan: (0, _extends3.default)({}, loan, {\n        _id: id\n      }),\n      property: _fakeProperty\n    }, true);\n\n    return cleanMethod('insertAdminOffer', {\n      object: object\n    });\n  }).then(function (offerId) {\n    return cleanMethod('updateLoan', {\n      object: {\n        'logic.lender.offerId': offerId,\n        'logic.lender.chosenTime': new Date()\n      },\n      id: loanId\n    });\n  }).then(function () {\n    // Weird bug with offers publications that forces me to reload TODO: fix it\n    location.reload();\n  }).catch(console.log);\n};\n\nvar purge = function purge(_ref) {\n  var loans = _ref.loans,\n      borrowers = _ref.borrowers,\n      offers = _ref.offers,\n      properties = _ref.properties;\n  loans.forEach(function (r) {\n    return cleanMethod('deleteLoan', {\n      id: r._id\n    });\n  });\n  borrowers.forEach(function (r) {\n    return cleanMethod('deleteBorrower', {\n      id: r._id\n    });\n  });\n  offers.forEach(function (r) {\n    return cleanMethod('deleteOffer', {\n      id: r._id\n    });\n  });\n  properties.forEach(function (r) {\n    return cleanMethod('deleteProperty', {\n      id: r._id\n    });\n  });\n};\n\nvar DevPage = function (_Component2) {\n  (0, _inherits3.default)(DevPage, _Component2);\n\n  function DevPage(props) {\n    (0, _classCallCheck3.default)(this, DevPage);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (DevPage.__proto__ || Object.getPrototypeOf(DevPage)).call(this, props));\n\n    _this.handleChange = function () {\n      return _this.setState(function (prev) {\n        return {\n          twoBorrowers: !prev.twoBorrowers\n        };\n      });\n    };\n\n    _this.state = {\n      twoBorrowers: false\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(DevPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!_Roles.userIsInRole(this.props.currentUser, 'dev')) {\n        this.props.history.push('/');\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var twoBorrowers = this.state.twoBorrowers;\n      return React.createElement(\n        \"div\",\n        null,\n        React.createElement(\"input\", {\n          type: \"checkbox\",\n          name: \"vehicle\",\n          value: twoBorrowers,\n          onChange: this.handleChange\n        }),\n        \"2 borrowers\",\n        React.createElement(\"br\", null),\n        React.createElement(\n          \"button\",\n          {\n            onClick: function onClick() {\n              return addStep1Loan(twoBorrowers);\n            }\n          },\n          \"step 1 Loan\"\n        ),\n        React.createElement(\n          \"button\",\n          {\n            onClick: function onClick() {\n              return addStep2Loan(twoBorrowers);\n            }\n          },\n          \"step 2 Loan\"\n        ),\n        React.createElement(\n          \"button\",\n          {\n            onClick: function onClick() {\n              return addStep3Loan(twoBorrowers);\n            }\n          },\n          \"step 3 Loan\"\n        ),\n        React.createElement(\n          \"button\",\n          {\n            onClick: function onClick() {\n              return addStep3Loan(twoBorrowers, false);\n            }\n          },\n          \"step 3 Loan, few files\"\n        ),\n        React.createElement(\n          \"button\",\n          {\n            onClick: function onClick() {\n              return purge(_this2.props);\n            }\n          },\n          \"Purge\"\n        )\n      );\n    }\n  }]);\n  return DevPage;\n}(_Component);\n\nDevPage.propTypes = {\n  loans: PropTypes.arrayOf(PropTypes.object),\n  borrowers: PropTypes.arrayOf(PropTypes.object),\n  offers: PropTypes.arrayOf(PropTypes.object)\n};\nDevPage.defaultProps = {\n  loans: [],\n  borrowers: [],\n  offers: []\n};","map":{"version":3,"sources":["imports/ui/pages/DevPage/DevPage.jsx"],"names":["module","export","default","DevPage","React","Component","watch","require","v","PropTypes","cleanMethod","Roles","completeFakeBorrower","loanStep1","loanStep2","loanStep3","getRandomOffer","fakeProperty","addStep1Loan","twoBorrowers","borrowerIds","object","then","id1","push","id2","propertyId","loan","borrowers","property","catch","console","log","addStep2Loan","addStep3Loan","completeFiles","loanId","id","_id","offerId","Date","location","reload","purge","loans","offers","properties","forEach","r","props","handleChange","setState","prev","state","userIsInRole","currentUser","history","propTypes","arrayOf","defaultProps"],"mappings":"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","file":"imports/ui/pages/DevPage/DevPage.jsx.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport cleanMethod from 'core/api/cleanMethods';\nimport { Roles } from 'meteor/alanning:roles';\n\nimport { completeFakeBorrower } from 'core/api/borrowers/fakes';\nimport { loanStep1, loanStep2, loanStep3 } from 'core/api/loans/fakes';\nimport { getRandomOffer } from 'core/api/offers/fakes';\nimport { fakeProperty } from 'core/api/properties/fakes';\n\nconst addStep1Loan = (twoBorrowers) => {\n  const borrowerIds = [];\n\n  cleanMethod('insertBorrower', { object: completeFakeBorrower })\n    .then((id1) => {\n      borrowerIds.push(id1);\n      return twoBorrowers\n        ? cleanMethod('insertBorrower', {\n          object: completeFakeBorrower,\n        })\n        : false;\n    })\n    .then((id2) => {\n      if (id2) {\n        borrowerIds.push(id2);\n      }\n\n      return cleanMethod('insertProperty', { object: fakeProperty });\n    })\n    .then((propertyId) => {\n      const loan = loanStep1;\n      loan.borrowers = borrowerIds;\n      loan.property = propertyId;\n      cleanMethod('insertLoan', { object: loan });\n    })\n    .catch(console.log);\n};\n\nconst addStep2Loan = (twoBorrowers) => {\n  const borrowerIds = [];\n\n  cleanMethod('insertBorrower', { object: completeFakeBorrower })\n    .then((id1) => {\n      borrowerIds.push(id1);\n      return twoBorrowers\n        ? cleanMethod('insertBorrower', {\n          object: completeFakeBorrower,\n        })\n        : false;\n    })\n    .then((id2) => {\n      if (id2) {\n        borrowerIds.push(id2);\n      }\n\n      return cleanMethod('insertProperty', { object: fakeProperty });\n    })\n    .then((propertyId) => {\n      const loan = loanStep2;\n      loan.borrowers = borrowerIds;\n      loan.property = propertyId;\n      cleanMethod('insertLoan', { object: loan });\n    })\n    .catch(console.log);\n};\n\nconst addStep3Loan = (twoBorrowers, completeFiles = true) => {\n  const borrowerIds = [];\n  const loan = loanStep3(completeFiles);\n  let loanId;\n  cleanMethod('insertBorrower', { object: completeFakeBorrower })\n    .then((id1) => {\n      borrowerIds.push(id1);\n      return twoBorrowers\n        ? cleanMethod('insertBorrower', {\n          object: completeFakeBorrower,\n        })\n        : false;\n    })\n    .then((id2) => {\n      if (id2) {\n        borrowerIds.push(id2);\n      }\n\n      return cleanMethod('insertProperty', { object: fakeProperty });\n    })\n    .then((propertyId) => {\n      loan.borrowers = borrowerIds;\n      loan.property = propertyId;\n    })\n    .then(() => cleanMethod('insertLoan', { object: loan }))\n    .then((id) => {\n      loanId = id;\n      const object = getRandomOffer(\n        { loan: { ...loan, _id: id }, property: fakeProperty },\n        true,\n      );\n      return cleanMethod('insertAdminOffer', { object });\n    })\n    .then(offerId =>\n      cleanMethod('updateLoan', {\n        object: {\n          'logic.lender.offerId': offerId,\n          'logic.lender.chosenTime': new Date(),\n        },\n        id: loanId,\n      }))\n    .then(() => {\n      // Weird bug with offers publications that forces me to reload TODO: fix it\n      location.reload();\n    })\n    .catch(console.log);\n};\n\nconst purge = ({ loans, borrowers, offers, properties }) => {\n  loans.forEach(r => cleanMethod('deleteLoan', { id: r._id }));\n  borrowers.forEach(r => cleanMethod('deleteBorrower', { id: r._id }));\n  offers.forEach(r => cleanMethod('deleteOffer', { id: r._id }));\n  properties.forEach(r => cleanMethod('deleteProperty', { id: r._id }));\n};\n\nexport default class DevPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { twoBorrowers: false };\n  }\n\n  componentDidMount() {\n    if (!Roles.userIsInRole(this.props.currentUser, 'dev')) {\n      this.props.history.push('/');\n    }\n  }\n\n  handleChange = () =>\n    this.setState(prev => ({ twoBorrowers: !prev.twoBorrowers }));\n\n  render() {\n    const { twoBorrowers } = this.state;\n\n    return (\n      <div>\n        <input\n          type=\"checkbox\"\n          name=\"vehicle\"\n          value={twoBorrowers}\n          onChange={this.handleChange}\n        />\n        2 borrowers<br />\n        <button onClick={() => addStep1Loan(twoBorrowers)}>step 1 Loan</button>\n        <button onClick={() => addStep2Loan(twoBorrowers)}>step 2 Loan</button>\n        <button onClick={() => addStep3Loan(twoBorrowers)}>step 3 Loan</button>\n        <button onClick={() => addStep3Loan(twoBorrowers, false)}>\n          step 3 Loan, few files\n        </button>\n        <button onClick={() => purge(this.props)}>Purge</button>\n      </div>\n    );\n  }\n}\n\nDevPage.propTypes = {\n  loans: PropTypes.arrayOf(PropTypes.object),\n  borrowers: PropTypes.arrayOf(PropTypes.object),\n  offers: PropTypes.arrayOf(PropTypes.object),\n};\n\nDevPage.defaultProps = {\n  loans: [],\n  borrowers: [],\n  offers: [],\n};\n"]},"hash":"0054094ecf66794f113079c9dcc9988ef288821e"}
