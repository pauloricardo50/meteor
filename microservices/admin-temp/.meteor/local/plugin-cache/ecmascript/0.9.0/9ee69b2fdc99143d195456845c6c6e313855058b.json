{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/mongo","imported":["Mongo"],"specifiers":[{"kind":"named","imported":"Mongo","local":"Mongo"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"packages/okgrow:analytics/server/publications.js","filenameRelative":"packages/okgrow:analytics/server/publications.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/okgrow:analytics/server/publications.js.map","sourceFileName":"packages/okgrow:analytics/server/publications.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"publications"},"ignored":false,"code":"let Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet Mongo;\nmodule.watch(require(\"meteor/mongo\"), {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 1);\n// eslint-disable-line import/no-extraneous-dependencies, import/extensions\nMeteor.publish(null, function analyticsUsersPublish() {\n  if (this.userId) {\n    const self = this;\n    const query = Meteor.users.find({\n      _id: this.userId\n    }, {\n      fields: {\n        emails: 1,\n        'services.google.email': 1,\n        'services.github.email': 1,\n        'services.facebook.email': 1\n      }\n    });\n\n    Mongo.Collection._publishCursor(query, self, 'AnalyticsUsers');\n\n    return self.ready();\n  }\n\n  this.ready();\n});","map":{"version":3,"sources":["packages/okgrow:analytics/server/publications.js"],"names":["Meteor","module","watch","require","v","Mongo","publish","analyticsUsersPublish","userId","self","query","users","find","_id","fields","emails","Collection","_publishCursor","ready"],"mappings":"AAAA,IAAIA,MAAJ;AAAWC,OAAOC,KAAP,CAAaC,QAAQ,eAAR,CAAb,EAAsC;AAACH,SAAOI,CAAP,EAAS;AAACJ,aAAOI,CAAP;AAAS;;AAApB,CAAtC,EAA4D,CAA5D;AAA+D,IAAIC,KAAJ;AAAUJ,OAAOC,KAAP,CAAaC,QAAQ,cAAR,CAAb,EAAqC;AAACE,QAAMD,CAAN,EAAQ;AAACC,YAAMD,CAAN;AAAQ;;AAAlB,CAArC,EAAyD,CAAzD;AAC9C;AAEtCJ,OAAOM,OAAP,CAAe,IAAf,EAAqB,SAASC,qBAAT,GAAiC;AACpD,MAAI,KAAKC,MAAT,EAAiB;AACf,UAAMC,OAAO,IAAb;AACA,UAAMC,QAAQV,OAAOW,KAAP,CACXC,IADW,CACN;AACJC,WAAK,KAAKL;AADN,KADM,EAGT;AACDM,cAAQ;AACNC,gBAAQ,CADF;AAEN,iCAAyB,CAFnB;AAGN,iCAAyB,CAHnB;AAIN,mCAA2B;AAJrB;AADP,KAHS,CAAd;;AAWAV,UAAMW,UAAN,CAAiBC,cAAjB,CAAgCP,KAAhC,EAAuCD,IAAvC,EAA6C,gBAA7C;;AACA,WAAOA,KAAKS,KAAL,EAAP;AACD;;AAED,OAAKA,KAAL;AACD,CAnBD","file":"packages/okgrow:analytics/server/publications.js.map","sourcesContent":["import { Meteor } from 'meteor/meteor'; // eslint-disable-line import/no-extraneous-dependencies, import/extensions\nimport { Mongo } from 'meteor/mongo'; // eslint-disable-line import/no-extraneous-dependencies, import/extensions\n\nMeteor.publish(null, function analyticsUsersPublish() {\n  if (this.userId) {\n    const self = this;\n    const query = Meteor.users\n      .find({\n        _id: this.userId,\n      }, {\n        fields: {\n          emails: 1,\n          'services.google.email': 1,\n          'services.github.email': 1,\n          'services.facebook.email': 1,\n        },\n      });\n    Mongo.Collection._publishCursor(query, self, 'AnalyticsUsers');\n    return self.ready();\n  }\n\n  this.ready();\n});\n"]},"hash":"9ee69b2fdc99143d195456845c6c6e313855058b"}
