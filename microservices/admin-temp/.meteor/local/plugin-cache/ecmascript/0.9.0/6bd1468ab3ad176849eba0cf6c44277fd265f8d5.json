{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"moment","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"moment"}]},{"source":"../../events","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"EventService"}]},{"source":"../../mutations","imported":["mutations"],"specifiers":[{"kind":"named","imported":"mutations","local":"mutations"}]},{"source":"./JobService","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"JobService"}]},{"source":"../../../utils/loanFunctions","imported":["getAuctionEndTime"],"specifiers":[{"kind":"named","imported":"getAuctionEndTime","local":"getAuctionEndTime"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/core/api/jobs/server/jobListeners.js","filenameRelative":"imports/core/api/jobs/server/jobListeners.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/api/jobs/server/jobListeners.js.map","sourceFileName":"imports/core/api/jobs/server/jobListeners.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"jobListeners"},"ignored":false,"code":"\"use strict\";\n\nvar moment = void 0;\nmodule.watch(require(\"moment\"), {\n  default: function _default(v) {\n    moment = v;\n  }\n}, 0);\nvar EventService = void 0;\nmodule.watch(require(\"../../events\"), {\n  default: function _default(v) {\n    EventService = v;\n  }\n}, 1);\n\nvar _mutations = void 0;\n\nmodule.watch(require(\"../../mutations\"), {\n  mutations: function mutations(v) {\n    _mutations = v;\n  }\n}, 2);\nvar JobService = void 0;\nmodule.watch(require(\"./JobService\"), {\n  default: function _default(v) {\n    JobService = v;\n  }\n}, 3);\n\nvar _getAuctionEndTime = void 0;\n\nmodule.watch(require(\"../../../utils/loanFunctions\"), {\n  getAuctionEndTime: function getAuctionEndTime(v) {\n    _getAuctionEndTime = v;\n  }\n}, 4);\nEventService.addMutationListener(_mutations.START_AUCTION, function (params) {\n  JobService.cancelExistingMutationJob({\n    mutation: _mutations.END_AUCTION,\n    params: params\n  });\n  JobService.scheduleMutation({\n    mutation: _mutations.END_AUCTION,\n    params: params,\n    date: _getAuctionEndTime(moment())\n  });\n});","map":{"version":3,"sources":["imports/core/api/jobs/server/jobListeners.js"],"names":["moment","module","watch","require","default","v","EventService","mutations","JobService","getAuctionEndTime","addMutationListener","START_AUCTION","params","cancelExistingMutationJob","mutation","END_AUCTION","scheduleMutation","date"],"mappings":";;AAAA,IAAIA,eAAJ;AAAWC,OAAOC,KAAP,CAAaC,QAAQ,QAAR,CAAb,EAA+B;AAACC,SAAD,oBAASC,CAAT,EAAW;AAACL,aAAOK,CAAP;AAAS;AAArB,CAA/B,EAAsD,CAAtD;AAAyD,IAAIC,qBAAJ;AAAiBL,OAAOC,KAAP,CAAaC,QAAQ,cAAR,CAAb,EAAqC;AAACC,SAAD,oBAASC,CAAT,EAAW;AAACC,mBAAaD,CAAb;AAAe;AAA3B,CAArC,EAAkE,CAAlE;;AAAqE,IAAIE,mBAAJ;;AAAcN,OAAOC,KAAP,CAAaC,QAAQ,iBAAR,CAAb,EAAwC;AAACI,WAAD,qBAAWF,CAAX,EAAa;AAACE,iBAAUF,CAAV;AAAY;AAA1B,CAAxC,EAAoE,CAApE;AAAuE,IAAIG,mBAAJ;AAAeP,OAAOC,KAAP,CAAaC,QAAQ,cAAR,CAAb,EAAqC;AAACC,SAAD,oBAASC,CAAT,EAAW;AAACG,iBAAWH,CAAX;AAAa;AAAzB,CAArC,EAAgE,CAAhE;;AAAmE,IAAII,2BAAJ;;AAAsBR,OAAOC,KAAP,CAAaC,QAAQ,8BAAR,CAAb,EAAqD;AAACM,mBAAD,6BAAmBJ,CAAnB,EAAqB;AAACI,yBAAkBJ,CAAlB;AAAoB;AAA1C,CAArD,EAAiG,CAAjG;AAMvVC,aAAaI,mBAAb,CAAiCH,WAAUI,aAA3C,EAA0D,UAACC,MAAD,EAAY;AACpEJ,aAAWK,yBAAX,CAAqC;AACnCC,cAAUP,WAAUQ,WADe;AAEnCH;AAFmC,GAArC;AAKAJ,aAAWQ,gBAAX,CAA4B;AAC1BF,cAAUP,WAAUQ,WADM;AAE1BH,kBAF0B;AAG1BK,UAAMR,mBAAkBT,QAAlB;AAHoB,GAA5B;AAKD,CAXD","file":"imports/core/api/jobs/server/jobListeners.js.map","sourcesContent":["import moment from 'moment';\nimport EventService from '../../events';\nimport { mutations } from '../../mutations';\nimport JobService from './JobService';\nimport { getAuctionEndTime } from '../../../utils/loanFunctions';\n\nEventService.addMutationListener(mutations.START_AUCTION, (params) => {\n  JobService.cancelExistingMutationJob({\n    mutation: mutations.END_AUCTION,\n    params,\n  });\n\n  JobService.scheduleMutation({\n    mutation: mutations.END_AUCTION,\n    params,\n    date: getAuctionEndTime(moment()),\n  });\n});\n"]},"hash":"6bd1468ab3ad176849eba0cf6c44277fd265f8d5"}
