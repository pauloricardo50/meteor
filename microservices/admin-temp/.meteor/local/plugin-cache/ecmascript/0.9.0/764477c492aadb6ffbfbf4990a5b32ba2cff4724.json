{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","createClass","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"js-search","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"JsSearch"}]},{"source":"react-intl","imported":["injectIntl"],"specifiers":[{"kind":"named","imported":"injectIntl","local":"injectIntl"}]},{"source":"material-ui/List","imported":["default","ListItem","ListItemText"],"specifiers":[{"kind":"named","imported":"default","local":"List"},{"kind":"named","imported":"ListItem","local":"ListItem"},{"kind":"named","imported":"ListItemText","local":"ListItemText"}]},{"source":"../Translation","imported":["T"],"specifiers":[{"kind":"named","imported":"T","local":"T"}]},{"source":"../../arrays/tooltips","imported":["generalTooltips"],"specifiers":[{"kind":"named","imported":"generalTooltips","local":"generalTooltips"}]},{"source":"../Button","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Button"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/core/components/SearchModal/SearchResults.jsx","filenameRelative":"imports/core/components/SearchModal/SearchResults.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/components/SearchModal/SearchResults.jsx.map","sourceFileName":"imports/core/components/SearchModal/SearchResults.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"SearchResults"},"ignored":false,"code":"\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar React = void 0,\n    _Component = void 0;\n\nmodule.watch(require(\"react\"), {\n  default: function _default(v) {\n    React = v;\n  },\n  Component: function Component(v) {\n    _Component = v;\n  }\n}, 0);\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  default: function _default(v) {\n    PropTypes = v;\n  }\n}, 1);\nvar JsSearch = void 0;\nmodule.watch(require(\"js-search\"), {\n  default: function _default(v) {\n    JsSearch = v;\n  }\n}, 2);\n\nvar _injectIntl = void 0;\n\nmodule.watch(require(\"react-intl\"), {\n  injectIntl: function injectIntl(v) {\n    _injectIntl = v;\n  }\n}, 3);\n\nvar List = void 0,\n    _ListItem = void 0,\n    _ListItemText = void 0;\n\nmodule.watch(require(\"material-ui/List\"), {\n  default: function _default(v) {\n    List = v;\n  },\n  ListItem: function ListItem(v) {\n    _ListItem = v;\n  },\n  ListItemText: function ListItemText(v) {\n    _ListItemText = v;\n  }\n}, 4);\n\nvar _T = void 0;\n\nmodule.watch(require(\"../Translation\"), {\n  T: function T(v) {\n    _T = v;\n  }\n}, 5);\n\nvar _generalTooltips = void 0;\n\nmodule.watch(require(\"../../arrays/tooltips\"), {\n  generalTooltips: function generalTooltips(v) {\n    _generalTooltips = v;\n  }\n}, 6);\nvar Button = void 0;\nmodule.watch(require(\"../Button\"), {\n  default: function _default(v) {\n    Button = v;\n  }\n}, 7);\nvar styles = {\n  list: {\n    width: '100%',\n    maxWidth: 800\n  },\n  selected: {\n    width: '100%',\n    maxWidth: 800\n  }\n};\n\nvar SearchResults = function (_Component2) {\n  (0, _inherits3.default)(SearchResults, _Component2);\n\n  function SearchResults(props) {\n    (0, _classCallCheck3.default)(this, SearchResults);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (SearchResults.__proto__ || Object.getPrototypeOf(SearchResults)).call(this, props));\n\n    _this.setupSearch = function () {\n      _this.search = new JsSearch.Search('id');\n\n      _this.search.addIndex('tooltipMatch');\n\n      _this.search.addIndex('tooltipValue1');\n\n      _this.search.addIndex('tooltipValue2');\n\n      _this.search.addDocuments(_this.getTooltips());\n    };\n\n    _this.getTooltips = function () {\n      var f = _this.props.intl.formatMessage;\n      var intlValues = {\n        verticalSpace: ' '\n      };\n      return Object.keys(_generalTooltips).map(function (match) {\n        var tooltipId = _generalTooltips[match];\n        var tooltip = {\n          id: tooltipId,\n          tooltipMatch: match,\n          tooltipValue1: f({\n            id: \"tooltip.\" + tooltipId\n          }, intlValues)\n        };\n\n        if (typeof _generalTooltips[match] !== 'string') {\n          tooltip.tooltipValue2 = f({\n            id: \"tooltip2.\" + tooltipId\n          }, intlValues);\n        }\n\n        return tooltip;\n      });\n    };\n\n    _this.state = {\n      showId: ''\n    };\n\n    _this.setupSearch();\n\n    return _this;\n  }\n\n  (0, _createClass3.default)(SearchResults, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      // Cancel viewing results if something new is typed/deleted\n      if (nextProps.search !== this.props.search && this.state.showId) {\n        this.setState({\n          showId: ''\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var search = this.props.search;\n      var showId = this.state.showId;\n      var results = this.search.search(search);\n\n      if (search && results.length === 0) {\n        return React.createElement(\n          \"div\",\n          {\n            className: \"description\"\n          },\n          React.createElement(\n            \"p\",\n            null,\n            React.createElement(_T, {\n              id: \"SearchResults.none\"\n            })\n          )\n        );\n      }\n\n      if (showId) {\n        var selectedResult = results.filter(function (result) {\n          return result.id === showId;\n        })[0];\n        return React.createElement(\n          \"div\",\n          {\n            className: \"flex-col\",\n            style: styles.selected\n          },\n          React.createElement(\n            \"h3\",\n            null,\n            selectedResult.tooltipMatch\n          ),\n          React.createElement(\n            \"p\",\n            null,\n            selectedResult.tooltipValue1\n          ),\n          React.createElement(\"br\", null),\n          React.createElement(\n            \"p\",\n            null,\n            selectedResult.tooltipValue2\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"text-center\",\n              style: {\n                paddingTop: 16\n              }\n            },\n            React.createElement(Button, {\n              primary: true,\n              label: React.createElement(_T, {\n                id: \"general.ok\"\n              }),\n              onClick: function onClick() {\n                return _this2.setState({\n                  showId: ''\n                });\n              }\n            })\n          )\n        );\n      }\n\n      return React.createElement(\n        List,\n        {\n          style: styles.list\n        },\n        results.slice(0, 5).map(function (result) {\n          return React.createElement(\n            _ListItem,\n            {\n              button: true,\n              divider: true,\n              onClick: function onClick() {\n                return _this2.setState({\n                  showId: result.id\n                });\n              },\n              key: result.id\n            },\n            React.createElement(_ListItemText, {\n              primary: result.tooltipMatch,\n              secondary: result.tooltipValue1\n            })\n          );\n        })\n      );\n    }\n  }]);\n  return SearchResults;\n}(_Component);\n\nSearchResults.propTypes = {\n  search: PropTypes.string.isRequired,\n  intl: PropTypes.object.isRequired\n};\nmodule.exportDefault(_injectIntl(SearchResults));","map":{"version":3,"sources":["imports/core/components/SearchModal/SearchResults.jsx"],"names":["React","Component","module","watch","require","default","v","PropTypes","JsSearch","injectIntl","List","ListItem","ListItemText","T","generalTooltips","Button","styles","list","width","maxWidth","selected","SearchResults","props","setupSearch","search","Search","addIndex","addDocuments","getTooltips","f","intl","formatMessage","intlValues","verticalSpace","Object","keys","map","match","tooltipId","tooltip","id","tooltipMatch","tooltipValue1","tooltipValue2","state","showId","nextProps","setState","results","length","selectedResult","filter","result","paddingTop","slice","propTypes","string","isRequired","object","exportDefault"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,IAAIA,cAAJ;AAAA,IAAUC,mBAAV;;AAAoBC,OAAOC,KAAP,CAAaC,QAAQ,OAAR,CAAb,EAA8B;AAACC,SAAD,oBAASC,CAAT,EAAW;AAACN,YAAMM,CAAN;AAAQ,GAApB;AAAqBL,WAArB,qBAA+BK,CAA/B,EAAiC;AAACL,iBAAUK,CAAV;AAAY;AAA9C,CAA9B,EAA8E,CAA9E;AAAiF,IAAIC,kBAAJ;AAAcL,OAAOC,KAAP,CAAaC,QAAQ,YAAR,CAAb,EAAmC;AAACC,SAAD,oBAASC,CAAT,EAAW;AAACC,gBAAUD,CAAV;AAAY;AAAxB,CAAnC,EAA6D,CAA7D;AAAgE,IAAIE,iBAAJ;AAAaN,OAAOC,KAAP,CAAaC,QAAQ,WAAR,CAAb,EAAkC;AAACC,SAAD,oBAASC,CAAT,EAAW;AAACE,eAASF,CAAT;AAAW;AAAvB,CAAlC,EAA2D,CAA3D;;AAA8D,IAAIG,oBAAJ;;AAAeP,OAAOC,KAAP,CAAaC,QAAQ,YAAR,CAAb,EAAmC;AAACK,YAAD,sBAAYH,CAAZ,EAAc;AAACG,kBAAWH,CAAX;AAAa;AAA5B,CAAnC,EAAiE,CAAjE;;AAAoE,IAAII,aAAJ;AAAA,IAASC,kBAAT;AAAA,IAAkBC,sBAAlB;;AAA+BV,OAAOC,KAAP,CAAaC,QAAQ,kBAAR,CAAb,EAAyC;AAACC,SAAD,oBAASC,CAAT,EAAW;AAACI,WAAKJ,CAAL;AAAO,GAAnB;AAAoBK,UAApB,oBAA6BL,CAA7B,EAA+B;AAACK,gBAASL,CAAT;AAAW,GAA3C;AAA4CM,cAA5C,wBAAyDN,CAAzD,EAA2D;AAACM,oBAAaN,CAAb;AAAe;AAA3E,CAAzC,EAAsH,CAAtH;;AAAyH,IAAIO,WAAJ;;AAAMX,OAAOC,KAAP,CAAaC,QAAQ,gBAAR,CAAb,EAAuC;AAACS,GAAD,aAAGP,CAAH,EAAK;AAACO,SAAEP,CAAF;AAAI;AAAV,CAAvC,EAAmD,CAAnD;;AAAsD,IAAIQ,yBAAJ;;AAAoBZ,OAAOC,KAAP,CAAaC,QAAQ,uBAAR,CAAb,EAA8C;AAACU,iBAAD,2BAAiBR,CAAjB,EAAmB;AAACQ,uBAAgBR,CAAhB;AAAkB;AAAtC,CAA9C,EAAsF,CAAtF;AAAyF,IAAIS,eAAJ;AAAWb,OAAOC,KAAP,CAAaC,QAAQ,WAAR,CAAb,EAAkC;AAACC,SAAD,oBAASC,CAAT,EAAW;AAACS,aAAOT,CAAP;AAAS;AAArB,CAAlC,EAAyD,CAAzD;AAW7pB,IAAMU,SAAS;AACbC,QAAM;AACJC,WAAO,MADH;AAEJC,cAAU;AAFN,GADO;AAKbC,YAAU;AACRF,WAAO,MADC;AAERC,cAAU;AAFF;AALG,CAAf;;IAWME,a;;;AACJ,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA,4IACXA,KADW;;AAAA,UAcnBC,WAdmB,GAcL,YAAM;AAClB,YAAKC,MAAL,GAAc,IAAIhB,SAASiB,MAAb,CAAoB,IAApB,CAAd;;AACA,YAAKD,MAAL,CAAYE,QAAZ,CAAqB,cAArB;;AACA,YAAKF,MAAL,CAAYE,QAAZ,CAAqB,eAArB;;AACA,YAAKF,MAAL,CAAYE,QAAZ,CAAqB,eAArB;;AACA,YAAKF,MAAL,CAAYG,YAAZ,CAAyB,MAAKC,WAAL,EAAzB;AACD,KApBkB;;AAAA,UAsBnBA,WAtBmB,GAsBL,YAAM;AAClB,UAAMC,IAAI,MAAKP,KAAL,CAAWQ,IAAX,CAAgBC,aAA1B;AACA,UAAMC,aAAa;AACjBC,uBAAe;AADE,OAAnB;AAIA,aAAOC,OAAOC,IAAP,CAAYrB,gBAAZ,EAA6BsB,GAA7B,CAAiC,UAACC,KAAD,EAAW;AACjD,YAAMC,YAAYxB,iBAAgBuB,KAAhB,CAAlB;AACA,YAAME,UAAU;AACdC,cAAIF,SADU;AAEdG,wBAAcJ,KAFA;AAGdK,yBAAeb,EAAE;AAAEW,6BAAeF;AAAjB,WAAF,EAAkCN,UAAlC;AAHD,SAAhB;;AAKA,YAAI,OAAOlB,iBAAgBuB,KAAhB,CAAP,KAAkC,QAAtC,EAAgD;AAC9CE,kBAAQI,aAAR,GAAwBd,EAAE;AAAEW,8BAAgBF;AAAlB,WAAF,EAAmCN,UAAnC,CAAxB;AACD;;AAED,eAAOO,OAAP;AACD,OAZM,CAAP;AAaD,KAzCkB;;AAGjB,UAAKK,KAAL,GAAa;AAAEC,cAAQ;AAAV,KAAb;;AACA,UAAKtB,WAAL;;AAJiB;AAKlB;;;;8CAEyBuB,S,EAAW;AACnC;AACA,UAAIA,UAAUtB,MAAV,KAAqB,KAAKF,KAAL,CAAWE,MAAhC,IAA0C,KAAKoB,KAAL,CAAWC,MAAzD,EAAiE;AAC/D,aAAKE,QAAL,CAAc;AAAEF,kBAAQ;AAAV,SAAd;AACD;AACF;;;6BA+BQ;AAAA;;AAAA,UACCrB,MADD,GACY,KAAKF,KADjB,CACCE,MADD;AAAA,UAECqB,MAFD,GAEY,KAAKD,KAFjB,CAECC,MAFD;AAGP,UAAMG,UAAU,KAAKxB,MAAL,CAAYA,MAAZ,CAAmBA,MAAnB,CAAhB;;AAEA,UAAIA,UAAUwB,QAAQC,MAAR,KAAmB,CAAjC,EAAoC;AAClC,eACE;AAAA;AAAA;AAAK,uBAAU;AAAf;AACE;AAAA;AAAA;AACE,gCAAC,EAAD;AAAG,kBAAG;AAAN;AADF;AADF,SADF;AAOD;;AAED,UAAIJ,MAAJ,EAAY;AACV,YAAMK,iBAAiBF,QAAQG,MAAR,CAAe;AAAA,iBAAUC,OAAOZ,EAAP,KAAcK,MAAxB;AAAA,SAAf,EAA+C,CAA/C,CAAvB;AACA,eACE;AAAA;AAAA;AAAK,uBAAU,UAAf;AAA0B,mBAAO7B,OAAOI;AAAxC;AACE;AAAA;AAAA;AAAK8B,2BAAeT;AAApB,WADF;AAEE;AAAA;AAAA;AAAIS,2BAAeR;AAAnB,WAFF;AAGE,yCAHF;AAIE;AAAA;AAAA;AAAIQ,2BAAeP;AAAnB,WAJF;AAKE;AAAA;AAAA;AAAK,yBAAU,aAAf;AAA6B,qBAAO;AAAEU,4BAAY;AAAd;AAApC;AACE,gCAAC,MAAD;AACE,2BADF;AAEE,qBAAO,oBAAC,EAAD;AAAG,oBAAG;AAAN,gBAFT;AAGE,uBAAS;AAAA,uBAAM,OAAKN,QAAL,CAAc;AAAEF,0BAAQ;AAAV,iBAAd,CAAN;AAAA;AAHX;AADF;AALF,SADF;AAeD;;AAED,aACE;AAAC,YAAD;AAAA;AAAM,iBAAO7B,OAAOC;AAApB;AACG+B,gBAAQM,KAAR,CAAc,CAAd,EAAiB,CAAjB,EAAoBlB,GAApB,CAAwB;AAAA,iBACvB;AAAC,qBAAD;AAAA;AACE,0BADF;AAEE,2BAFF;AAGE,uBAAS;AAAA,uBAAM,OAAKW,QAAL,CAAc;AAAEF,0BAAQO,OAAOZ;AAAjB,iBAAd,CAAN;AAAA,eAHX;AAIE,mBAAKY,OAAOZ;AAJd;AAME,gCAAC,aAAD;AACE,uBAASY,OAAOX,YADlB;AAEE,yBAAWW,OAAOV;AAFpB;AANF,WADuB;AAAA,SAAxB;AADH,OADF;AAiBD;;;EA/FyBzC,U;;AAkG5BoB,cAAckC,SAAd,GAA0B;AACxB/B,UAAQjB,UAAUiD,MAAV,CAAiBC,UADD;AAExB3B,QAAMvB,UAAUmD,MAAV,CAAiBD;AAFC,CAA1B;AAxHAvD,OAAOyD,aAAP,CA6HelD,YAAWY,aAAX,CA7Hf","file":"imports/core/components/SearchModal/SearchResults.jsx.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport JsSearch from 'js-search';\nimport { injectIntl } from 'react-intl';\n\nimport List, { ListItem, ListItemText } from 'material-ui/List';\n\nimport { T } from 'core/components/Translation';\nimport { generalTooltips } from 'core/arrays/tooltips';\nimport Button from 'core/components/Button';\n\nconst styles = {\n  list: {\n    width: '100%',\n    maxWidth: 800,\n  },\n  selected: {\n    width: '100%',\n    maxWidth: 800,\n  },\n};\n\nclass SearchResults extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { showId: '' };\n    this.setupSearch();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    // Cancel viewing results if something new is typed/deleted\n    if (nextProps.search !== this.props.search && this.state.showId) {\n      this.setState({ showId: '' });\n    }\n  }\n\n  setupSearch = () => {\n    this.search = new JsSearch.Search('id');\n    this.search.addIndex('tooltipMatch');\n    this.search.addIndex('tooltipValue1');\n    this.search.addIndex('tooltipValue2');\n    this.search.addDocuments(this.getTooltips());\n  };\n\n  getTooltips = () => {\n    const f = this.props.intl.formatMessage;\n    const intlValues = {\n      verticalSpace: ' ',\n    };\n\n    return Object.keys(generalTooltips).map((match) => {\n      const tooltipId = generalTooltips[match];\n      const tooltip = {\n        id: tooltipId,\n        tooltipMatch: match,\n        tooltipValue1: f({ id: `tooltip.${tooltipId}` }, intlValues),\n      };\n      if (typeof generalTooltips[match] !== 'string') {\n        tooltip.tooltipValue2 = f({ id: `tooltip2.${tooltipId}` }, intlValues);\n      }\n\n      return tooltip;\n    });\n  };\n\n  render() {\n    const { search } = this.props;\n    const { showId } = this.state;\n    const results = this.search.search(search);\n\n    if (search && results.length === 0) {\n      return (\n        <div className=\"description\">\n          <p>\n            <T id=\"SearchResults.none\" />\n          </p>\n        </div>\n      );\n    }\n\n    if (showId) {\n      const selectedResult = results.filter(result => result.id === showId)[0];\n      return (\n        <div className=\"flex-col\" style={styles.selected}>\n          <h3>{selectedResult.tooltipMatch}</h3>\n          <p>{selectedResult.tooltipValue1}</p>\n          <br />\n          <p>{selectedResult.tooltipValue2}</p>\n          <div className=\"text-center\" style={{ paddingTop: 16 }}>\n            <Button\n              primary\n              label={<T id=\"general.ok\" />}\n              onClick={() => this.setState({ showId: '' })}\n            />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <List style={styles.list}>\n        {results.slice(0, 5).map(result => (\n          <ListItem\n            button\n            divider\n            onClick={() => this.setState({ showId: result.id })}\n            key={result.id}\n          >\n            <ListItemText\n              primary={result.tooltipMatch}\n              secondary={result.tooltipValue1}\n            />\n          </ListItem>\n        ))}\n      </List>\n    );\n  }\n}\n\nSearchResults.propTypes = {\n  search: PropTypes.string.isRequired,\n  intl: PropTypes.object.isRequired,\n};\n\nexport default injectIntl(SearchResults);\n"]},"hash":"764477c492aadb6ffbfbf4990a5b32ba2cff4724"}
