{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"../../security","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"SecurityService"}]},{"source":"../../mutations","imported":["createMutator"],"specifiers":[{"kind":"named","imported":"createMutator","local":"createMutator"}]},{"source":"../PropertyService","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropertyService"}]},{"source":"../mutationDefinitions","imported":["*"],"specifiers":[{"kind":"namespace","local":"defs"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/core/api/properties/server/mutations.js","filenameRelative":"imports/core/api/properties/server/mutations.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/api/properties/server/mutations.js.map","sourceFileName":"imports/core/api/properties/server/mutations.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"mutations"},"ignored":false,"code":"\"use strict\";\n\nvar SecurityService = void 0;\nmodule.watch(require(\"../../security\"), {\n  default: function _default(v) {\n    SecurityService = v;\n  }\n}, 0);\n\nvar _createMutator = void 0;\n\nmodule.watch(require(\"../../mutations\"), {\n  createMutator: function createMutator(v) {\n    _createMutator = v;\n  }\n}, 1);\nvar PropertyService = void 0;\nmodule.watch(require(\"../PropertyService\"), {\n  default: function _default(v) {\n    PropertyService = v;\n  }\n}, 2);\nvar defs = void 0;\nmodule.watch(require(\"../mutationDefinitions\"), {\n  \"*\": function _(v) {\n    defs = v;\n  }\n}, 3);\n\n_createMutator(defs.PROPERTY_INSERT, function (_ref) {\n  var object = _ref.object,\n      userId = _ref.userId;\n  SecurityService.properties.isAllowedToInsert();\n  return PropertyService.insert({\n    object: object,\n    userId: userId\n  });\n});\n\n_createMutator(defs.PROPERTY_UPDATE, function (_ref2) {\n  var propertyId = _ref2.propertyId,\n      object = _ref2.object;\n  SecurityService.properties.isAllowedToUpdate(propertyId);\n  return PropertyService.update({\n    propertyId: propertyId,\n    object: object\n  });\n});\n\n_createMutator(defs.PROPERTY_DELETE, function (_ref3) {\n  var propertyId = _ref3.propertyId;\n  SecurityService.properties.isAllowedToDelete(propertyId);\n  return PropertyService.remove({\n    propertyId: propertyId\n  });\n});","map":{"version":3,"sources":["imports/core/api/properties/server/mutations.js"],"names":["SecurityService","module","watch","require","default","v","createMutator","PropertyService","defs","PROPERTY_INSERT","object","userId","properties","isAllowedToInsert","insert","PROPERTY_UPDATE","propertyId","isAllowedToUpdate","update","PROPERTY_DELETE","isAllowedToDelete","remove"],"mappings":";;AAAA,IAAIA,wBAAJ;AAAoBC,OAAOC,KAAP,CAAaC,QAAQ,gBAAR,CAAb,EAAuC;AAACC,SAAD,oBAASC,CAAT,EAAW;AAACL,sBAAgBK,CAAhB;AAAkB;AAA9B,CAAvC,EAAuE,CAAvE;;AAA0E,IAAIC,uBAAJ;;AAAkBL,OAAOC,KAAP,CAAaC,QAAQ,iBAAR,CAAb,EAAwC;AAACG,eAAD,yBAAeD,CAAf,EAAiB;AAACC,qBAAcD,CAAd;AAAgB;AAAlC,CAAxC,EAA4E,CAA5E;AAA+E,IAAIE,wBAAJ;AAAoBN,OAAOC,KAAP,CAAaC,QAAQ,oBAAR,CAAb,EAA2C;AAACC,SAAD,oBAASC,CAAT,EAAW;AAACE,sBAAgBF,CAAhB;AAAkB;AAA9B,CAA3C,EAA2E,CAA3E;AAA8E,IAAIG,aAAJ;AAASP,OAAOC,KAAP,CAAaC,QAAQ,wBAAR,CAAb,EAA+C;AAAC,KAAD,aAAKE,CAAL,EAAO;AAACG,WAAKH,CAAL;AAAO;AAAf,CAA/C,EAAgE,CAAhE;;AAK1SC,eAAcE,KAAKC,eAAnB,EAAoC,gBAAwB;AAAA,MAArBC,MAAqB,QAArBA,MAAqB;AAAA,MAAbC,MAAa,QAAbA,MAAa;AAC1DX,kBAAgBY,UAAhB,CAA2BC,iBAA3B;AACA,SAAON,gBAAgBO,MAAhB,CAAuB;AAAEJ,kBAAF;AAAUC;AAAV,GAAvB,CAAP;AACD,CAHD;;AAKAL,eAAcE,KAAKO,eAAnB,EAAoC,iBAA4B;AAAA,MAAzBC,UAAyB,SAAzBA,UAAyB;AAAA,MAAbN,MAAa,SAAbA,MAAa;AAC9DV,kBAAgBY,UAAhB,CAA2BK,iBAA3B,CAA6CD,UAA7C;AACA,SAAOT,gBAAgBW,MAAhB,CAAuB;AAAEF,0BAAF;AAAcN;AAAd,GAAvB,CAAP;AACD,CAHD;;AAKAJ,eAAcE,KAAKW,eAAnB,EAAoC,iBAAoB;AAAA,MAAjBH,UAAiB,SAAjBA,UAAiB;AACtDhB,kBAAgBY,UAAhB,CAA2BQ,iBAA3B,CAA6CJ,UAA7C;AACA,SAAOT,gBAAgBc,MAAhB,CAAuB;AAAEL;AAAF,GAAvB,CAAP;AACD,CAHD","file":"imports/core/api/properties/server/mutations.js.map","sourcesContent":["import SecurityService from '../../security';\nimport { createMutator } from '../../mutations';\nimport PropertyService from '../PropertyService';\nimport * as defs from '../mutationDefinitions';\n\ncreateMutator(defs.PROPERTY_INSERT, ({ object, userId }) => {\n  SecurityService.properties.isAllowedToInsert();\n  return PropertyService.insert({ object, userId });\n});\n\ncreateMutator(defs.PROPERTY_UPDATE, ({ propertyId, object }) => {\n  SecurityService.properties.isAllowedToUpdate(propertyId);\n  return PropertyService.update({ propertyId, object });\n});\n\ncreateMutator(defs.PROPERTY_DELETE, ({ propertyId }) => {\n  SecurityService.properties.isAllowedToDelete(propertyId);\n  return PropertyService.remove({ propertyId });\n});\n"]},"hash":"236c77edda6a23a9fee694e6a25456880c12fc47"}
