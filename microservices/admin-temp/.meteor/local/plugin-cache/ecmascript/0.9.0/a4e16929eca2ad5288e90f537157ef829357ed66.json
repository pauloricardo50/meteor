{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","createClass","classCallCheck","extends","defineProperty","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"../../../core/components/Button","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Button"}]},{"source":"../../../core/api/cleanMethods","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"cleanMethod"}]},{"source":"../../../core/api/constants","imported":["CLOSING_STEPS_TYPE"],"specifiers":[{"kind":"named","imported":"CLOSING_STEPS_TYPE","local":"CLOSING_STEPS_TYPE"}]},{"source":"./Adder","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Adder"}]},{"source":"./FileStep","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"FileStep"}]},{"source":"./TodoStep","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"TodoStep"}]}],"exports":{"exported":["ClosingStepsForm"],"specifiers":[{"kind":"local","local":"ClosingStepsForm","exported":"default"}]}}},"options":{"filename":"imports/ui/components/ClosingStepsForm/ClosingStepsForm.jsx","filenameRelative":"imports/ui/components/ClosingStepsForm/ClosingStepsForm.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/ui/components/ClosingStepsForm/ClosingStepsForm.jsx.map","sourceFileName":"imports/ui/components/ClosingStepsForm/ClosingStepsForm.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"ClosingStepsForm"},"ignored":false,"code":"\"use strict\";\n\nvar _defineProperty2 = require(\"babel-runtime/helpers/defineProperty\");\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _extends3 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends4 = _interopRequireDefault(_extends3);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nmodule.export({\n  \"default\": function () {\n    function _default() {\n      return ClosingStepsForm;\n    }\n\n    return _default;\n  }()\n});\n\nvar React = void 0,\n    _Component = void 0;\n\nmodule.watch(require(\"react\"), {\n  \"default\": function () {\n    function _default(v) {\n      React = v;\n    }\n\n    return _default;\n  }(),\n  Component: function () {\n    function Component(v) {\n      _Component = v;\n    }\n\n    return Component;\n  }()\n}, 0);\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function () {\n    function _default(v) {\n      PropTypes = v;\n    }\n\n    return _default;\n  }()\n}, 1);\nvar Button = void 0;\nmodule.watch(require(\"../../../core/components/Button\"), {\n  \"default\": function () {\n    function _default(v) {\n      Button = v;\n    }\n\n    return _default;\n  }()\n}, 2);\nvar cleanMethod = void 0;\nmodule.watch(require(\"../../../core/api/cleanMethods\"), {\n  \"default\": function () {\n    function _default(v) {\n      cleanMethod = v;\n    }\n\n    return _default;\n  }()\n}, 3);\n\nvar _CLOSING_STEPS_TYPE = void 0;\n\nmodule.watch(require(\"../../../core/api/constants\"), {\n  CLOSING_STEPS_TYPE: function () {\n    function CLOSING_STEPS_TYPE(v) {\n      _CLOSING_STEPS_TYPE = v;\n    }\n\n    return CLOSING_STEPS_TYPE;\n  }()\n}, 4);\nvar Adder = void 0;\nmodule.watch(require(\"./Adder\"), {\n  \"default\": function () {\n    function _default(v) {\n      Adder = v;\n    }\n\n    return _default;\n  }()\n}, 5);\nvar FileStep = void 0;\nmodule.watch(require(\"./FileStep\"), {\n  \"default\": function () {\n    function _default(v) {\n      FileStep = v;\n    }\n\n    return _default;\n  }()\n}, 6);\nvar TodoStep = void 0;\nmodule.watch(require(\"./TodoStep\"), {\n  \"default\": function () {\n    function _default(v) {\n      TodoStep = v;\n    }\n\n    return _default;\n  }()\n}, 7);\n\n// Return a new id for a step. Make sure the id's number is larger than all\n// the current ones\nvar createId = function () {\n  function createId(currentSteps, newType) {\n    var currentIds = currentSteps.filter(function (step) {\n      return step.type === newType;\n    }).map(function (step) {\n      return step.id;\n    });\n    var currentCount = currentIds.length;\n    var max = Math.max.apply(Math, _toConsumableArray(currentIds.map(function (id) {\n      return parseInt(id.replace(/[^0-9]/g, ''), 10);\n    })));\n    return newType + (max ? Math.max(currentCount, max + 1) : currentCount);\n  }\n\n  return createId;\n}();\n\nvar ClosingStepsForm = function (_Component2) {\n  (0, _inherits3.default)(ClosingStepsForm, _Component2);\n\n  function ClosingStepsForm(props) {\n    (0, _classCallCheck3.default)(this, ClosingStepsForm);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (ClosingStepsForm.__proto__ || Object.getPrototypeOf(ClosingStepsForm)).call(this, props));\n\n    _this.handleAdd = function (type) {\n      _this.setState(function (prev) {\n        return {\n          closingSteps: [].concat(_toConsumableArray(prev.closingSteps), [{\n            type: type,\n            status: CLOSING_STEPS_STATUS.UNVERIFIED,\n            id: createId(prev.closingSteps, type)\n          }])\n        };\n      }, // stupid fix because dialog is not resizing\n      function () {\n        return window.dispatchEvent(new Event('resize'));\n      });\n    };\n\n    _this.handleRemove = function (stepId) {\n      return _this.setState(function (prev) {\n        return {\n          closingSteps: prev.closingSteps.filter(function (step) {\n            return step.id !== stepId;\n          })\n        };\n      });\n    };\n\n    _this.handleSave = function () {\n      return cleanMethod('updateLoan', {\n        object: {\n          'logic.closingSteps': _this.state.closingSteps\n        },\n        id: _this.props.loan._id\n      });\n    };\n\n    _this.handleChange = function (stepId, key, value) {\n      return _this.setState(function (prev) {\n        return {\n          closingSteps: [].concat(_toConsumableArray(prev.closingSteps.filter(function (s) {\n            return s.id !== stepId;\n          })), [(0, _extends4.default)({}, prev.closingSteps.find(function (s) {\n            return s.id === stepId;\n          }), (0, _defineProperty3.default)({}, key, value))])\n        };\n      });\n    };\n\n    var loan = _this.props.loan;\n    _this.state = {\n      closingSteps: loan.logic.closingSteps && loan.logic.closingSteps.length ? loan.logic.closingSteps : []\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(ClosingStepsForm, [{\n    key: \"render\",\n    value: function () {\n      function render() {\n        var _this2 = this;\n\n        var closingSteps = this.state.closingSteps;\n        var loan = this.props.loan;\n        return React.createElement(\n          \"article\",\n          null,\n          React.createElement(Adder, {\n            handleAdd: this.handleAdd\n          }),\n          React.createElement(\n            \"div\",\n            {\n              style: {\n                display: 'flex',\n                flexWrap: 'wrap',\n                margin: '40px 0'\n              }\n            },\n            closingSteps.sort(function (a, b) {\n              if (a.id < b.id) return -1;\n              if (a.id > b.id) return 1;\n              return 0;\n            }).map(function (step, i) {\n              return step.type === _CLOSING_STEPS_TYPE.TODO ? React.createElement(TodoStep, {\n                step: step,\n                key: step.id,\n                onChange: _this2.handleChange,\n                handleRemove: _this2.handleRemove\n              }) : React.createElement(FileStep, {\n                step: step,\n                key: step.id,\n                onChange: _this2.handleChange,\n                handleRemove: _this2.handleRemove\n              });\n            })\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"text-center\"\n            },\n            React.createElement(Button, {\n              raised: true,\n              primary: JSON.stringify(loan.logic.closingSteps) !== JSON.stringify(closingSteps),\n              label: \"Enregistrer\",\n              onClick: this.handleSave\n            })\n          )\n        );\n      }\n\n      return render;\n    }()\n  }]);\n  return ClosingStepsForm;\n}(_Component);\n\nClosingStepsForm.propTypes = {\n  loan: PropTypes.objectOf(PropTypes.any).isRequired\n};","map":{"version":3,"sources":["imports/ui/components/ClosingStepsForm/ClosingStepsForm.jsx"],"names":["module","export","ClosingStepsForm","React","Component","watch","require","v","PropTypes","Button","cleanMethod","CLOSING_STEPS_TYPE","Adder","FileStep","TodoStep","createId","currentSteps","newType","currentIds","filter","step","type","map","id","currentCount","length","max","Math","parseInt","replace","props","handleAdd","setState","closingSteps","prev","status","CLOSING_STEPS_STATUS","UNVERIFIED","window","dispatchEvent","Event","handleRemove","stepId","handleSave","object","state","loan","_id","handleChange","key","value","s","find","logic","display","flexWrap","margin","sort","a","b","i","TODO","JSON","stringify","propTypes","objectOf","any","isRequired"],"mappings":"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","file":"imports/ui/components/ClosingStepsForm/ClosingStepsForm.jsx.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from 'core/components/Button';\n\nimport cleanMethod from 'core/api/cleanMethods';\nimport { CLOSING_STEPS_TYPE } from 'core/api/constants';\n\nimport Adder from './Adder';\nimport FileStep from './FileStep';\nimport TodoStep from './TodoStep';\n\n// Return a new id for a step. Make sure the id's number is larger than all\n// the current ones\nconst createId = (currentSteps, newType) => {\n  const currentIds = currentSteps\n    .filter(step => step.type === newType)\n    .map(step => step.id);\n  const currentCount = currentIds.length;\n  const max = Math.max(...currentIds.map(id => parseInt(id.replace(/[^0-9]/g, ''), 10)));\n\n  return newType + (max ? Math.max(currentCount, max + 1) : currentCount);\n};\n\nexport default class ClosingStepsForm extends Component {\n  constructor(props) {\n    super(props);\n\n    const { loan } = this.props;\n\n    this.state = {\n      closingSteps:\n        loan.logic.closingSteps && loan.logic.closingSteps.length\n          ? loan.logic.closingSteps\n          : [],\n    };\n  }\n\n  handleAdd = (type) => {\n    this.setState(\n      prev => ({\n        closingSteps: [\n          ...prev.closingSteps,\n          {\n            type,\n            status: CLOSING_STEPS_STATUS.UNVERIFIED,\n            id: createId(prev.closingSteps, type),\n          },\n        ],\n      }),\n      // stupid fix because dialog is not resizing\n      () => window.dispatchEvent(new Event('resize')),\n    );\n  };\n\n  handleRemove = stepId =>\n    this.setState(prev => ({\n      closingSteps: prev.closingSteps.filter(step => step.id !== stepId),\n    }));\n\n  handleSave = () =>\n    cleanMethod('updateLoan', {\n      object: { 'logic.closingSteps': this.state.closingSteps },\n      id: this.props.loan._id,\n    });\n\n  handleChange = (stepId, key, value) =>\n    this.setState(prev => ({\n      closingSteps: [\n        ...prev.closingSteps.filter(s => s.id !== stepId),\n        { ...prev.closingSteps.find(s => s.id === stepId), [key]: value },\n      ],\n    }));\n\n  render() {\n    const { closingSteps } = this.state;\n    const { loan } = this.props;\n    return (\n      <article>\n        <Adder handleAdd={this.handleAdd} />\n        <div style={{ display: 'flex', flexWrap: 'wrap', margin: '40px 0' }}>\n          {closingSteps\n            .sort((a, b) => {\n              if (a.id < b.id) return -1;\n              if (a.id > b.id) return 1;\n              return 0;\n            })\n            .map((step, i) =>\n              (step.type === CLOSING_STEPS_TYPE.TODO ? (\n                <TodoStep\n                  step={step}\n                  key={step.id}\n                  onChange={this.handleChange}\n                  handleRemove={this.handleRemove}\n                />\n              ) : (\n                <FileStep\n                  step={step}\n                  key={step.id}\n                  onChange={this.handleChange}\n                  handleRemove={this.handleRemove}\n                />\n              )))}\n        </div>\n        <div className=\"text-center\">\n          <Button\n            raised\n            primary={\n              JSON.stringify(loan.logic.closingSteps) !==\n              JSON.stringify(closingSteps)\n            }\n            label=\"Enregistrer\"\n            onClick={this.handleSave}\n          />\n        </div>\n      </article>\n    );\n  }\n}\n\nClosingStepsForm.propTypes = {\n  loan: PropTypes.objectOf(PropTypes.any).isRequired,\n};\n"]},"hash":"a4e16929eca2ad5288e90f537157ef829357ed66"}
