{"metadata":{"usedHelpers":["extends","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"react","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"React"}]},{"source":"meteor/alanning:roles","imported":["Roles"],"specifiers":[{"kind":"named","imported":"Roles","local":"Roles"}]},{"source":"react-router-dom","imported":["Redirect"],"specifiers":[{"kind":"named","imported":"Redirect","local":"Redirect"}]},{"source":"classnames","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"classnames"}]},{"source":"../../../core/components/ContactButton","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"ContactButton"}]},{"source":"../../../core/components/ErrorBoundary","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"ErrorBoundary"}]},{"source":"../../../core/utils/analytics","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"track"}]},{"source":"../../../core/utils/browserFunctions","imported":["isApp","isAdmin","isPartner"],"specifiers":[{"kind":"named","imported":"isApp","local":"isApp"},{"kind":"named","imported":"isAdmin","local":"isAdmin"},{"kind":"named","imported":"isPartner","local":"isPartner"}]},{"source":"./Navs","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Navs"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/ui/layouts/AdminLayout/AdminLayout.jsx","filenameRelative":"imports/ui/layouts/AdminLayout/AdminLayout.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/ui/layouts/AdminLayout/AdminLayout.jsx.map","sourceFileName":"imports/ui/layouts/AdminLayout/AdminLayout.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"AdminLayout"},"ignored":false,"code":"\"use strict\";\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  default: function _default(v) {\n    PropTypes = v;\n  }\n}, 0);\nvar React = void 0;\nmodule.watch(require(\"react\"), {\n  default: function _default(v) {\n    React = v;\n  }\n}, 1);\n\nvar _Roles = void 0;\n\nmodule.watch(require(\"meteor/alanning:roles\"), {\n  Roles: function Roles(v) {\n    _Roles = v;\n  }\n}, 2);\n\nvar _Redirect = void 0;\n\nmodule.watch(require(\"react-router-dom\"), {\n  Redirect: function Redirect(v) {\n    _Redirect = v;\n  }\n}, 3);\nvar classnames = void 0;\nmodule.watch(require(\"classnames\"), {\n  default: function _default(v) {\n    classnames = v;\n  }\n}, 4);\nvar ContactButton = void 0;\nmodule.watch(require(\"../../../core/components/ContactButton\"), {\n  default: function _default(v) {\n    ContactButton = v;\n  }\n}, 5);\nvar ErrorBoundary = void 0;\nmodule.watch(require(\"../../../core/components/ErrorBoundary\"), {\n  default: function _default(v) {\n    ErrorBoundary = v;\n  }\n}, 6);\nvar track = void 0;\nmodule.watch(require(\"../../../core/utils/analytics\"), {\n  default: function _default(v) {\n    track = v;\n  }\n}, 7);\n\nvar _isApp = void 0,\n    _isAdmin = void 0,\n    _isPartner = void 0;\n\nmodule.watch(require(\"../../../core/utils/browserFunctions\"), {\n  isApp: function isApp(v) {\n    _isApp = v;\n  },\n  isAdmin: function isAdmin(v) {\n    _isAdmin = v;\n  },\n  isPartner: function isPartner(v) {\n    _isPartner = v;\n  }\n}, 8);\nvar Navs = void 0;\nmodule.watch(require(\"./Navs\"), {\n  default: function _default(v) {\n    Navs = v;\n  }\n}, 9);\n// import UserJoyride from '/imports/ui/components/UserJoyride';\nvar allowedRoutesWithoutLoan = ['/', '/compare', '/profile', '/add-loan', '/enroll'];\n\nvar getRedirect = function getRedirect(_ref) {\n  var currentUser = _ref.currentUser,\n      pathname = _ref.history.location.pathname,\n      loans = _ref.loans;\n\n  var userIsAdmin = _Roles.userIsInRole(currentUser, 'admin');\n\n  var userIsPartner = _Roles.userIsInRole(currentUser, 'partner');\n\n  var userIsDev = _Roles.userIsInRole(currentUser, 'dev');\n\n  if (!currentUser) {\n    return \"/login?path=\" + pathname;\n  }\n\n  return false;\n\n  if (userIsDev) {\n    return false;\n  }\n\n  if (userIsAdmin) {\n    return '/admin';\n  } else if (_isPartner) {\n    return '/isPartner';\n  } // If there is no active loan, force route to app page, except if\n  // user is on allowed routes\n\n\n  if (loans && loans.length < 1 && !allowedRoutesWithoutLoan.some(function (route) {\n    return pathname.indexOf(route) === 0;\n  })) {\n    return '/';\n  }\n\n  return false;\n};\n\nvar getShowSideNav = function getShowSideNav(_ref2) {\n  var location = _ref2.location;\n  return !(location.pathname === '/' || location.pathname === '/compare');\n};\n\nvar AdminLayout = function AdminLayout(props) {\n  var type = props.type,\n      history = props.history,\n      children = props.children;\n  var redirect = getRedirect(props);\n  var showSideNav = true; // getShowSideNav(history);\n\n  var classes = classnames({\n    'app-layout': true,\n    'always-side-nav': true // 'no-nav': !showSideNav,\n\n  });\n  var path = history.location.pathname;\n  var isLogin = path.slice(0, 6) === '/login';\n\n  if (redirect && !isLogin) {\n    track('AppLayout - was redirected', {\n      from: history.location.pathname,\n      to: redirect\n    });\n    return React.createElement(_Redirect, {\n      to: redirect\n    });\n  }\n\n  console.log('AdminLayout props:', props);\n  return React.createElement(\n    \"div\",\n    null,\n    React.createElement(Navs, (0, _extends3.default)({}, props, {\n      showSideNav: showSideNav,\n      isApp: type === 'app',\n      isAdmin: type === 'admin'\n    })),\n    React.createElement(\n      \"main\",\n      {\n        className: classes\n      },\n      React.createElement(\n        ErrorBoundary,\n        {\n          helper: \"layout\",\n          pathname: history.location.pathname\n        },\n        React.createElement(\n          \"div\",\n          {\n            x: \"wrapper\"\n          },\n          React.cloneElement(children, (0, _extends3.default)({}, props))\n        )\n      )\n    ),\n    type === 'app' && React.createElement(ContactButton, {\n      history: history\n    })\n  );\n};\n\nAdminLayout.defaultProps = {\n  type: 'user',\n  currentUser: undefined,\n  noNav: false,\n  loans: undefined\n};\nAdminLayout.propTypes = {\n  type: PropTypes.string,\n  currentUser: PropTypes.objectOf(PropTypes.any),\n  noNav: PropTypes.bool,\n  loans: PropTypes.arrayOf(PropTypes.object),\n  history: PropTypes.objectOf(PropTypes.any).isRequired\n};\nmodule.exportDefault(AdminLayout);","map":{"version":3,"sources":["imports/ui/layouts/AdminLayout/AdminLayout.jsx"],"names":["PropTypes","module","watch","require","default","v","React","Roles","Redirect","classnames","ContactButton","ErrorBoundary","track","isApp","isAdmin","isPartner","Navs","allowedRoutesWithoutLoan","getRedirect","currentUser","pathname","history","location","loans","userIsAdmin","userIsInRole","userIsPartner","userIsDev","length","some","indexOf","route","getShowSideNav","AdminLayout","props","type","children","redirect","showSideNav","classes","path","isLogin","slice","from","to","console","log","cloneElement","defaultProps","undefined","noNav","propTypes","string","objectOf","any","bool","arrayOf","object","isRequired","exportDefault"],"mappings":"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","file":"imports/ui/layouts/AdminLayout/AdminLayout.jsx.map","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Roles } from 'meteor/alanning:roles';\nimport { Redirect } from 'react-router-dom';\nimport classnames from 'classnames';\n\nimport ContactButton from 'core/components/ContactButton';\nimport ErrorBoundary from 'core/components/ErrorBoundary';\nimport track from 'core/utils/analytics';\nimport { isApp, isAdmin, isPartner } from 'core/utils/browserFunctions';\nimport Navs from './Navs';\n\n// import UserJoyride from '/imports/ui/components/UserJoyride';\n\nconst allowedRoutesWithoutLoan = [\n  '/',\n  '/compare',\n  '/profile',\n  '/add-loan',\n  '/enroll',\n];\n\nconst getRedirect = ({\n  currentUser,\n  history: { location: { pathname } },\n  loans,\n}) => {\n  const userIsAdmin = Roles.userIsInRole(currentUser, 'admin');\n  const userIsPartner = Roles.userIsInRole(currentUser, 'partner');\n  const userIsDev = Roles.userIsInRole(currentUser, 'dev');\n\n  if (!currentUser) {\n    return `/login?path=${pathname}`;\n  }\n\n  return false;\n\n  if (userIsDev) {\n    return false;\n  }\n\n  if (userIsAdmin) {\n    return '/admin';\n  } else if (isPartner) {\n    return '/isPartner';\n  }\n  // If there is no active loan, force route to app page, except if\n  // user is on allowed routes\n  if (\n    loans &&\n    loans.length < 1 &&\n    !allowedRoutesWithoutLoan.some(route => pathname.indexOf(route) === 0)\n  ) {\n    return '/';\n  }\n\n  return false;\n};\n\nconst getShowSideNav = ({ location }) =>\n  !(location.pathname === '/' || location.pathname === '/compare');\n\nconst AdminLayout = (props) => {\n  const { type, history, children } = props;\n  const redirect = getRedirect(props);\n  const showSideNav = true; // getShowSideNav(history);\n  const classes = classnames({\n    'app-layout': true,\n    'always-side-nav': true,\n    // 'no-nav': !showSideNav,\n  });\n  const path = history.location.pathname;\n  const isLogin = path.slice(0, 6) === '/login';\n\n  if (redirect && !isLogin) {\n    track('AppLayout - was redirected', {\n      from: history.location.pathname,\n      to: redirect,\n    });\n    return <Redirect to={redirect} />;\n  }\n\n  console.log('AdminLayout props:', props);\n\n  return (\n    <div>\n      <Navs\n        {...props}\n        showSideNav={showSideNav}\n        isApp={type === 'app'}\n        isAdmin={type === 'admin'}\n      />\n\n      <main className={classes}>\n        <ErrorBoundary helper=\"layout\" pathname={history.location.pathname}>\n          <div x=\"wrapper\">{React.cloneElement(children, { ...props })}</div>\n        </ErrorBoundary>\n      </main>\n\n      {type === 'app' && <ContactButton history={history} />}\n    </div>\n  );\n};\n\nAdminLayout.defaultProps = {\n  type: 'user',\n  currentUser: undefined,\n  noNav: false,\n  loans: undefined,\n};\n\nAdminLayout.propTypes = {\n  type: PropTypes.string,\n  currentUser: PropTypes.objectOf(PropTypes.any),\n  noNav: PropTypes.bool,\n  loans: PropTypes.arrayOf(PropTypes.object),\n  history: PropTypes.objectOf(PropTypes.any).isRequired,\n};\n\nexport default AdminLayout;\n"]},"hash":"0dbfa3b2bc9226889317604b2ab842e0c2fda88f"}
