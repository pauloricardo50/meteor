{"metadata":{"usedHelpers":["extends","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"React"}]},{"source":"meteor/react-meteor-data","imported":["createContainer"],"specifiers":[{"kind":"named","imported":"createContainer","local":"createContainer"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"packages/cultofcoders:grapher-react/legacy/createQueryContainer.js","filenameRelative":"packages/cultofcoders:grapher-react/legacy/createQueryContainer.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/cultofcoders:grapher-react/legacy/createQueryContainer.js.map","sourceFileName":"packages/cultofcoders:grapher-react/legacy/createQueryContainer.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"createQueryContainer"},"ignored":false,"code":"var _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nlet React;\nmodule.watch(require(\"react\"), {\n    default(v) {\n        React = v;\n    }\n\n}, 0);\nlet createContainer;\nmodule.watch(require(\"meteor/react-meteor-data\"), {\n    createContainer(v) {\n        createContainer = v;\n    }\n\n}, 1);\nmodule.exportDefault((query, component, options = {}) => {\n    if (Meteor.isDevelopment) {\n        console.warn('createQueryContainer() is deprecated, please use withQuery() instead');\n    }\n\n    if (options.reactive) {\n        return createContainer(props => {\n            if (props.params) {\n                query.setParams(props.params);\n            }\n\n            const handler = query.subscribe();\n            return (0, _extends3.default)({\n                query,\n                loading: !handler.ready(),\n                [options.dataProp]: options.single ? _.first(query.fetch()) : query.fetch()\n            }, props);\n        }, component);\n    }\n\n    class MethodQueryComponent extends React.Component {\n        constructor() {\n            super();\n            this.state = {\n                [options.dataProp]: undefined,\n                error: undefined,\n                loading: true\n            };\n        }\n\n        componentWillReceiveProps(nextProps) {\n            this._fetch(nextProps.params);\n        }\n\n        componentDidMount() {\n            this._fetch(this.props.params);\n        }\n\n        _fetch(params) {\n            if (params) {\n                query.setParams(params);\n            }\n\n            query.fetch((error, data) => {\n                const state = {\n                    error,\n                    [options.dataProp]: options.single ? _.first(data) : data,\n                    loading: false\n                };\n                this.setState(state);\n            });\n        }\n\n        render() {\n            const {\n                state,\n                props\n            } = this;\n            return React.createElement(component, (0, _extends3.default)({\n                query\n            }, state, props));\n        }\n\n    }\n\n    MethodQueryComponent.propTypes = {\n        params: React.PropTypes.object\n    };\n    return MethodQueryComponent;\n});","map":{"version":3,"sources":["packages/cultofcoders:grapher-react/legacy/createQueryContainer.js"],"names":["React","module","watch","require","default","v","createContainer","exportDefault","query","component","options","Meteor","isDevelopment","console","warn","reactive","props","params","setParams","handler","subscribe","loading","ready","dataProp","single","_","first","fetch","MethodQueryComponent","Component","constructor","state","undefined","error","componentWillReceiveProps","nextProps","_fetch","componentDidMount","data","setState","render","createElement","propTypes","PropTypes","object"],"mappings":";;;;;;AAAA,IAAIA,KAAJ;AAAUC,OAAOC,KAAP,CAAaC,QAAQ,OAAR,CAAb,EAA8B;AAACC,YAAQC,CAAR,EAAU;AAACL,gBAAMK,CAAN;AAAQ;;AAApB,CAA9B,EAAoD,CAApD;AAAuD,IAAIC,eAAJ;AAAoBL,OAAOC,KAAP,CAAaC,QAAQ,0BAAR,CAAb,EAAiD;AAACG,oBAAgBD,CAAhB,EAAkB;AAACC,0BAAgBD,CAAhB;AAAkB;;AAAtC,CAAjD,EAAyF,CAAzF;AAArFJ,OAAOM,aAAP,CAGe,CAACC,KAAD,EAAQC,SAAR,EAAmBC,UAAU,EAA7B,KAAoC;AAC/C,QAAIC,OAAOC,aAAX,EAA0B;AACtBC,gBAAQC,IAAR,CAAa,sEAAb;AACH;;AAED,QAAIJ,QAAQK,QAAZ,EAAsB;AAClB,eAAOT,gBAAiBU,KAAD,IAAW;AAC9B,gBAAIA,MAAMC,MAAV,EAAkB;AACdT,sBAAMU,SAAN,CAAgBF,MAAMC,MAAtB;AACH;;AAED,kBAAME,UAAUX,MAAMY,SAAN,EAAhB;AAEA;AACIZ,qBADJ;AAEIa,yBAAS,CAACF,QAAQG,KAAR,EAFd;AAGI,iBAACZ,QAAQa,QAAT,GAAoBb,QAAQc,MAAR,GAAiBC,EAAEC,KAAF,CAAQlB,MAAMmB,KAAN,EAAR,CAAjB,GAA0CnB,MAAMmB,KAAN;AAHlE,eAIOX,KAJP;AAMH,SAbM,EAaJP,SAbI,CAAP;AAcH;;AAED,UAAMmB,oBAAN,SAAmC5B,MAAM6B,SAAzC,CAAmD;AAC/CC,sBAAc;AACV;AACA,iBAAKC,KAAL,GAAa;AACT,iBAACrB,QAAQa,QAAT,GAAoBS,SADX;AAETC,uBAAOD,SAFE;AAGTX,yBAAS;AAHA,aAAb;AAKH;;AAEDa,kCAA0BC,SAA1B,EAAqC;AACjC,iBAAKC,MAAL,CAAYD,UAAUlB,MAAtB;AACH;;AAEDoB,4BAAoB;AAChB,iBAAKD,MAAL,CAAY,KAAKpB,KAAL,CAAWC,MAAvB;AACH;;AAEDmB,eAAOnB,MAAP,EAAe;AACX,gBAAIA,MAAJ,EAAY;AACRT,sBAAMU,SAAN,CAAgBD,MAAhB;AACH;;AAEDT,kBAAMmB,KAAN,CAAY,CAACM,KAAD,EAAQK,IAAR,KAAiB;AACzB,sBAAMP,QAAQ;AACVE,yBADU;AAEV,qBAACvB,QAAQa,QAAT,GAAoBb,QAAQc,MAAR,GAAiBC,EAAEC,KAAF,CAAQY,IAAR,CAAjB,GAAiCA,IAF3C;AAGVjB,6BAAS;AAHC,iBAAd;AAMA,qBAAKkB,QAAL,CAAcR,KAAd;AACH,aARD;AASH;;AAEDS,iBAAS;AACL,kBAAM;AAACT,qBAAD;AAAQf;AAAR,gBAAiB,IAAvB;AAEA,mBAAOhB,MAAMyC,aAAN,CAAoBhC,SAApB;AACHD;AADG,eAEAuB,KAFA,EAGAf,KAHA,EAAP;AAKH;;AA1C8C;;AA6CnDY,yBAAqBc,SAArB,GAAiC;AAC7BzB,gBAAQjB,MAAM2C,SAAN,CAAgBC;AADK,KAAjC;AAIA,WAAOhB,oBAAP;AACH,CA3ED","file":"packages/cultofcoders:grapher-react/legacy/createQueryContainer.js.map","sourcesContent":["import React from 'react';\nimport {createContainer} from 'meteor/react-meteor-data';\n\nexport default (query, component, options = {}) => {\n    if (Meteor.isDevelopment) {\n        console.warn('createQueryContainer() is deprecated, please use withQuery() instead')\n    }\n\n    if (options.reactive) {\n        return createContainer((props) => {\n            if (props.params) {\n                query.setParams(props.params);\n            }\n\n            const handler = query.subscribe();\n\n            return {\n                query,\n                loading: !handler.ready(),\n                [options.dataProp]: options.single ? _.first(query.fetch()) : query.fetch(),\n                ...props\n            }\n        }, component);\n    }\n\n    class MethodQueryComponent extends React.Component {\n        constructor() {\n            super();\n            this.state = {\n                [options.dataProp]: undefined,\n                error: undefined,\n                loading: true\n            }\n        }\n\n        componentWillReceiveProps(nextProps) {\n            this._fetch(nextProps.params);\n        }\n\n        componentDidMount() {\n            this._fetch(this.props.params);\n        }\n\n        _fetch(params) {\n            if (params) {\n                query.setParams(params);\n            }\n\n            query.fetch((error, data) => {\n                const state = {\n                    error,\n                    [options.dataProp]: options.single ? _.first(data) : data,\n                    loading: false\n                };\n\n                this.setState(state);\n            });\n        }\n\n        render() {\n            const {state, props} = this;\n\n            return React.createElement(component, {\n                query,\n                ...state,\n                ...props\n            })\n        }\n    }\n\n    MethodQueryComponent.propTypes = {\n        params: React.PropTypes.object\n    };\n\n    return MethodQueryComponent;\n}"]},"hash":"2c0e1829d25306fe0e75327ff83b6b7dd0ad90d5"}
