{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","createClass","classCallCheck","extends","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"moment","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"moment"}]},{"source":"../../../core/api/cleanMethods","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"cleanMethod"}]},{"source":"../../../core/components/ConditionsButton","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"ConditionsButton"}]},{"source":"../../../core/utils/conversionFunctions","imported":["toMoney"],"specifiers":[{"kind":"named","imported":"toMoney","local":"toMoney"}]},{"source":"../../../core/components/Translation","imported":["IntlNumber"],"specifiers":[{"kind":"named","imported":"IntlNumber","local":"IntlNumber"}]},{"source":"./../../components/AdminNewOffer","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"AdminNewOffer"}]},{"source":"./ConfirmMethod","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"ConfirmMethod"}]}],"exports":{"exported":["OffersTab"],"specifiers":[{"kind":"local","local":"OffersTab","exported":"default"}]}}},"options":{"filename":"imports/ui/pages/SingleLoanPage/OffersTab.jsx","filenameRelative":"imports/ui/pages/SingleLoanPage/OffersTab.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/ui/pages/SingleLoanPage/OffersTab.jsx.map","sourceFileName":"imports/ui/pages/SingleLoanPage/OffersTab.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"OffersTab"},"ignored":false,"code":"\"use strict\";\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nmodule.export({\n  \"default\": function () {\n    function _default() {\n      return OffersTab;\n    }\n\n    return _default;\n  }()\n});\n\nvar React = void 0,\n    _Component = void 0;\n\nmodule.watch(require(\"react\"), {\n  \"default\": function () {\n    function _default(v) {\n      React = v;\n    }\n\n    return _default;\n  }(),\n  Component: function () {\n    function Component(v) {\n      _Component = v;\n    }\n\n    return Component;\n  }()\n}, 0);\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function () {\n    function _default(v) {\n      PropTypes = v;\n    }\n\n    return _default;\n  }()\n}, 1);\nvar moment = void 0;\nmodule.watch(require(\"moment\"), {\n  \"default\": function () {\n    function _default(v) {\n      moment = v;\n    }\n\n    return _default;\n  }()\n}, 2);\nvar cleanMethod = void 0;\nmodule.watch(require(\"../../../core/api/cleanMethods\"), {\n  \"default\": function () {\n    function _default(v) {\n      cleanMethod = v;\n    }\n\n    return _default;\n  }()\n}, 3);\nvar ConditionsButton = void 0;\nmodule.watch(require(\"../../../core/components/ConditionsButton\"), {\n  \"default\": function () {\n    function _default(v) {\n      ConditionsButton = v;\n    }\n\n    return _default;\n  }()\n}, 4);\n\nvar _toMoney = void 0;\n\nmodule.watch(require(\"../../../core/utils/conversionFunctions\"), {\n  toMoney: function () {\n    function toMoney(v) {\n      _toMoney = v;\n    }\n\n    return toMoney;\n  }()\n}, 5);\n\nvar _IntlNumber = void 0;\n\nmodule.watch(require(\"../../../core/components/Translation\"), {\n  IntlNumber: function () {\n    function IntlNumber(v) {\n      _IntlNumber = v;\n    }\n\n    return IntlNumber;\n  }()\n}, 6);\nvar AdminNewOffer = void 0;\nmodule.watch(require(\"./../../components/AdminNewOffer\"), {\n  \"default\": function () {\n    function _default(v) {\n      AdminNewOffer = v;\n    }\n\n    return _default;\n  }()\n}, 7);\nvar ConfirmMethod = void 0;\nmodule.watch(require(\"./ConfirmMethod\"), {\n  \"default\": function () {\n    function _default(v) {\n      ConfirmMethod = v;\n    }\n\n    return _default;\n  }()\n}, 8);\n\nvar OffersTab = function (_Component2) {\n  (0, _inherits3.default)(OffersTab, _Component2);\n\n  function OffersTab(props) {\n    (0, _classCallCheck3.default)(this, OffersTab);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (OffersTab.__proto__ || Object.getPrototypeOf(OffersTab)).call(this, props));\n\n    _this.handleToggle = function (i) {\n      if (_this.state.active === i) {\n        _this.setState({\n          active: -1\n        });\n      } else {\n        _this.setState({\n          active: i\n        });\n      }\n    };\n\n    _this.state = {\n      active: -1\n    };\n    return _this;\n  }\n\n  (0, _createClass3.default)(OffersTab, [{\n    key: \"render\",\n    value: function () {\n      function render() {\n        var _this2 = this;\n\n        if (this.props.offers.length <= 0) {\n          return React.createElement(\n            \"div\",\n            {\n              className: \"text-center\"\n            },\n            React.createElement(\n              \"h1\",\n              {\n                className: \"secondary\"\n              },\n              \"Pas d'offres pour l'instant\"\n            ),\n            React.createElement(AdminNewOffer, this.props)\n          );\n        }\n\n        return React.createElement(\n          \"div\",\n          null,\n          React.createElement(\n            \"div\",\n            {\n              className: \"text-center\"\n            },\n            React.createElement(AdminNewOffer, (0, _extends3.default)({}, this.props, {\n              style: {\n                margin: 8\n              }\n            }))\n          ),\n          React.createElement(\n            \"ul\",\n            {\n              className: \"admin-offer-list\"\n            },\n            this.props.offers.map(function (o, i) {\n              return React.createElement(\n                \"li\",\n                {\n                  className: \"mask1\",\n                  key: o._id\n                },\n                React.createElement(\n                  \"div\",\n                  {\n                    className: \"top\",\n                    onClick: function () {\n                      function onClick() {\n                        return _this2.handleToggle(i);\n                      }\n\n                      return onClick;\n                    }(),\n                    onKeyPress: function () {\n                      function onKeyPress() {\n                        return _this2.handleToggle(i);\n                      }\n\n                      return onKeyPress;\n                    }()\n                  },\n                  React.createElement(\n                    \"div\",\n                    {\n                      className: \"title\"\n                    },\n                    React.createElement(\n                      \"h2\",\n                      {\n                        className: \"fixed-size\"\n                      },\n                      React.createElement(\n                        \"span\",\n                        {\n                          className: \"bold\"\n                        },\n                        o.organization\n                      ),\n                      ' ',\n                      React.createElement(\n                        \"small\",\n                        null,\n                        \"Ajout\\xE9e le \",\n                        moment(o.createdAt).format('D MMM à H:mm')\n                      )\n                    ),\n                    (o.conditions.length > 0 || o.counterparts.length > 0) && React.createElement(ConditionsButton, {\n                      conditions: o.conditions,\n                      counterparts: o.counterparts\n                    })\n                  ),\n                  React.createElement(\"hr\", null),\n                  React.createElement(\n                    \"h4\",\n                    {\n                      className: \"fixed-size\",\n                      style: {\n                        marginTop: 0\n                      }\n                    },\n                    \"Offre Standard\"\n                  ),\n                  React.createElement(\n                    \"span\",\n                    null,\n                    \"Montant pr\\xEAt\\xE9: CHF \",\n                    _toMoney(o.standardOffer.maxAmount)\n                  ),\n                  React.createElement(\n                    \"span\",\n                    null,\n                    \"Amortissement demand\\xE9:\",\n                    ' ',\n                    React.createElement(_IntlNumber, {\n                      value: o.standardOffer.amortization,\n                      format: \"percentage\"\n                    })\n                  ),\n                  React.createElement(\n                    \"ul\",\n                    {\n                      className: \"overview\"\n                    },\n                    Object.keys(o.standardOffer).map(function (key) {\n                      return key.includes('interest') && !!o.standardOffer[key] && React.createElement(\n                        \"li\",\n                        {\n                          key: key\n                        },\n                        React.createElement(\n                          \"span\",\n                          null,\n                          key\n                        ),\n                        React.createElement(\n                          \"span\",\n                          {\n                            className: \"bold\"\n                          },\n                          React.createElement(_IntlNumber, {\n                            value: o.standardOffer[key],\n                            format: \"percentage\"\n                          })\n                        )\n                      );\n                    })\n                  ),\n                  o.counterparts.length > 0 && React.createElement(\n                    \"div\",\n                    {\n                      style: {\n                        display: 'flex',\n                        flexDirection: 'column'\n                      }\n                    },\n                    React.createElement(\"hr\", null),\n                    React.createElement(\n                      \"h4\",\n                      {\n                        className: \"fixed-size\",\n                        style: {\n                          marginTop: 0\n                        }\n                      },\n                      \"Offre avec contrepartie\"\n                    ),\n                    React.createElement(\n                      \"span\",\n                      null,\n                      \"Montant pr\\xEAt\\xE9: CHF \",\n                      _toMoney(o.counterpartOffer.maxAmount)\n                    ),\n                    React.createElement(\n                      \"span\",\n                      null,\n                      \"Amortissement demand\\xE9:\",\n                      ' ',\n                      React.createElement(_IntlNumber, {\n                        value: o.counterpartOffer.amortization,\n                        format: \"percentage\"\n                      })\n                    ),\n                    React.createElement(\n                      \"ul\",\n                      {\n                        className: \"overview\"\n                      },\n                      Object.keys(o.counterpartOffer).map(function (key) {\n                        return key.includes('interest') && !!o.counterpartOffer[key] && React.createElement(\n                          \"li\",\n                          {\n                            key: key\n                          },\n                          React.createElement(\n                            \"span\",\n                            null,\n                            key\n                          ),\n                          React.createElement(\n                            \"span\",\n                            {\n                              className: \"bold\"\n                            },\n                            React.createElement(_IntlNumber, {\n                              value: o.counterpartOffer[key],\n                              format: \"percentage\"\n                            })\n                          )\n                        );\n                      })\n                    )\n                  )\n                ),\n                _this2.state.active === i && React.createElement(\n                  \"div\",\n                  null,\n                  React.createElement(ConfirmMethod, {\n                    label: \"Supprimer\",\n                    keyword: \"SUPPRIMER\",\n                    method: function () {\n                      function method(cb) {\n                        return cleanMethod('deleteOffer', {\n                          id: o._id\n                        }).then(cb);\n                      }\n\n                      return method;\n                    }()\n                  })\n                )\n              );\n            })\n          )\n        );\n      }\n\n      return render;\n    }()\n  }]);\n  return OffersTab;\n}(_Component);\n\nOffersTab.propTypes = {\n  offers: PropTypes.arrayOf(PropTypes.object)\n};\nOffersTab.defaultProps = {\n  offers: []\n};","map":{"version":3,"sources":["imports/ui/pages/SingleLoanPage/OffersTab.jsx"],"names":["module","export","OffersTab","React","Component","watch","require","v","PropTypes","moment","cleanMethod","ConditionsButton","toMoney","IntlNumber","AdminNewOffer","ConfirmMethod","props","handleToggle","i","state","active","setState","offers","length","margin","map","o","_id","organization","createdAt","format","conditions","counterparts","marginTop","standardOffer","maxAmount","amortization","Object","keys","key","includes","display","flexDirection","counterpartOffer","id","then","cb","propTypes","arrayOf","object","defaultProps"],"mappings":"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","file":"imports/ui/pages/SingleLoanPage/OffersTab.jsx.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\n\nimport cleanMethod from 'core/api/cleanMethods';\nimport ConditionsButton from 'core/components/ConditionsButton';\nimport { toMoney } from 'core/utils/conversionFunctions';\nimport { IntlNumber } from 'core/components/Translation';\nimport AdminNewOffer from '/imports/ui/components/AdminNewOffer';\nimport ConfirmMethod from './ConfirmMethod';\n\nexport default class OffersTab extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      active: -1,\n    };\n  }\n\n  handleToggle = (i) => {\n    if (this.state.active === i) {\n      this.setState({ active: -1 });\n    } else {\n      this.setState({ active: i });\n    }\n  };\n\n  render() {\n    if (this.props.offers.length <= 0) {\n      return (\n        <div className=\"text-center\">\n          <h1 className=\"secondary\">Pas d&apos;offres pour l&apos;instant</h1>\n          <AdminNewOffer {...this.props} />\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <div className=\"text-center\">\n          <AdminNewOffer {...this.props} style={{ margin: 8 }} />\n        </div>\n        <ul className=\"admin-offer-list\">\n          {this.props.offers.map((o, i) => (\n            <li className=\"mask1\" key={o._id}>\n              <div\n                className=\"top\"\n                onClick={() => this.handleToggle(i)}\n                onKeyPress={() => this.handleToggle(i)}\n              >\n                <div className=\"title\">\n                  <h2 className=\"fixed-size\">\n                    <span className=\"bold\">{o.organization}</span>{' '}\n                    <small>\n                      Ajoutée le {moment(o.createdAt).format('D MMM à H:mm')}\n                    </small>\n                  </h2>\n                  {(o.conditions.length > 0 || o.counterparts.length > 0) && (\n                    <ConditionsButton\n                      conditions={o.conditions}\n                      counterparts={o.counterparts}\n                    />\n                  )}\n                </div>\n\n                <hr />\n                <h4 className=\"fixed-size\" style={{ marginTop: 0 }}>\n                  Offre Standard\n                </h4>\n                <span>\n                  Montant prêté: CHF {toMoney(o.standardOffer.maxAmount)}\n                </span>\n                <span>\n                  Amortissement demandé:{' '}\n                  <IntlNumber\n                    value={o.standardOffer.amortization}\n                    format=\"percentage\"\n                  />\n                </span>\n                <ul className=\"overview\">\n                  {Object.keys(o.standardOffer).map(key =>\n                    key.includes('interest') &&\n                      !!o.standardOffer[key] && (\n                      <li key={key}>\n                        <span>{key}</span>\n                        <span className=\"bold\">\n                          <IntlNumber\n                            value={o.standardOffer[key]}\n                            format=\"percentage\"\n                          />\n                        </span>\n                      </li>\n                    ))}\n                </ul>\n                {o.counterparts.length > 0 && (\n                  <div\n                    style={{\n                      display: 'flex',\n                      flexDirection: 'column',\n                    }}\n                  >\n                    <hr />\n                    <h4 className=\"fixed-size\" style={{ marginTop: 0 }}>\n                      Offre avec contrepartie\n                    </h4>\n                    <span>\n                      Montant prêté: CHF {toMoney(o.counterpartOffer.maxAmount)}\n                    </span>\n                    <span>\n                      Amortissement demandé:{' '}\n                      <IntlNumber\n                        value={o.counterpartOffer.amortization}\n                        format=\"percentage\"\n                      />\n                    </span>\n                    <ul className=\"overview\">\n                      {Object.keys(o.counterpartOffer).map(key =>\n                        key.includes('interest') &&\n                          !!o.counterpartOffer[key] && (\n                          <li key={key}>\n                            <span>{key}</span>\n                            <span className=\"bold\">\n                              <IntlNumber\n                                value={o.counterpartOffer[key]}\n                                format=\"percentage\"\n                              />\n                            </span>\n                          </li>\n                        ))}\n                    </ul>\n                  </div>\n                )}\n              </div>\n              {this.state.active === i && (\n                <div>\n                  <ConfirmMethod\n                    label=\"Supprimer\"\n                    keyword=\"SUPPRIMER\"\n                    method={cb =>\n                      cleanMethod('deleteOffer', { id: o._id }).then(cb)\n                    }\n                  />\n                </div>\n              )}\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n}\n\nOffersTab.propTypes = {\n  offers: PropTypes.arrayOf(PropTypes.object),\n};\n\nOffersTab.defaultProps = {\n  offers: [],\n};\n"]},"hash":"f7bcad16cf3121371490c3aa7f1845ccd9b285f2"}
