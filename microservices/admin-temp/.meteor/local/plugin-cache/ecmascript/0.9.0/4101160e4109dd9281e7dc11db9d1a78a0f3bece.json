{"metadata":{"usedHelpers":["objectWithoutProperties","extends","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"react","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"React"}]},{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/alanning:roles","imported":["Roles"],"specifiers":[{"kind":"named","imported":"Roles","local":"Roles"}]},{"source":"../../utils/analytics","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"track"}]},{"source":"../Translation","imported":["T"],"specifiers":[{"kind":"named","imported":"T","local":"T"}]},{"source":"../DropdownMenu","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"DropdownMenu"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/core/components/TopNav/TopNavDropdown.jsx","filenameRelative":"imports/core/components/TopNav/TopNavDropdown.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/components/TopNav/TopNavDropdown.jsx.map","sourceFileName":"imports/core/components/TopNav/TopNavDropdown.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"TopNavDropdown"},"ignored":false,"code":"\"use strict\";\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require(\"babel-runtime/helpers/objectWithoutProperties\");\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  default: function _default(v) {\n    PropTypes = v;\n  }\n}, 0);\nvar React = void 0;\nmodule.watch(require(\"react\"), {\n  default: function _default(v) {\n    React = v;\n  }\n}, 1);\n\nvar _Meteor = void 0;\n\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function Meteor(v) {\n    _Meteor = v;\n  }\n}, 2);\n\nvar _Roles = void 0;\n\nmodule.watch(require(\"meteor/alanning:roles\"), {\n  Roles: function Roles(v) {\n    _Roles = v;\n  }\n}, 3);\nvar track = void 0;\nmodule.watch(require(\"../../utils/analytics\"), {\n  default: function _default(v) {\n    track = v;\n  }\n}, 4);\n\nvar _T = void 0;\n\nmodule.watch(require(\"../Translation\"), {\n  T: function T(v) {\n    _T = v;\n  }\n}, 5);\nvar DropdownMenu = void 0;\nmodule.watch(require(\"../DropdownMenu\"), {\n  default: function _default(v) {\n    DropdownMenu = v;\n  }\n}, 6);\n\n// Shows a sign out link for all types of users, but:\n// an admin link for admins,\n// a partner link for partners,\n// a home, settings, and contact link for regular users\nvar getMenuItems = function getMenuItems(currentUser, history) {\n  var isDev = _Roles.userIsInRole(currentUser._id, 'dev');\n\n  var isAdmin = _Roles.userIsInRole(currentUser._id, 'admin');\n\n  var isPartner = _Roles.userIsInRole(currentUser._id, 'partner');\n\n  return [{\n    id: 'admin',\n    link: '/admin',\n    show: isAdmin,\n    icon: 'app'\n  }, {\n    id: 'partner',\n    link: '/partner',\n    show: isPartner,\n    icon: 'app'\n  }, {\n    id: 'app',\n    link: '/',\n    show: !isAdmin && !isPartner,\n    icon: 'app'\n  }, {\n    id: 'account',\n    link: '/profile',\n    show: !isAdmin && !isPartner,\n    icon: 'accountCircle'\n  }, {\n    id: 'dev',\n    link: '/dev',\n    show: isDev\n  }, {\n    id: 'logout',\n    label: React.createElement(_T, {\n      id: \"general.logout\"\n    }),\n    onClick: function onClick() {\n      track('TopNavDropdown - logged out', {});\n\n      _Meteor.logout(function () {\n        return window.location.replace(\"\" + _Meteor.settings.public.subdomains.www);\n      });\n    },\n    link: '/',\n    show: true,\n    dividerTop: true,\n    icon: 'powerOff'\n  }];\n};\n\nvar TopNavDropdown = function TopNavDropdown(props) {\n  var currentUser = props.currentUser,\n      history = props.history;\n  return React.createElement(DropdownMenu, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'left'\n    },\n    transformOrigin: {\n      vertical: 'bottom',\n      horizontal: 'left'\n    },\n    iconType: \"person\",\n    options: getMenuItems(currentUser, history) // Allow the Divider to go through\n    .filter(function (o) {\n      return !!o.show;\n    }).map(function (_ref) {\n      var optionId = _ref.id,\n          link = _ref.link,\n          label = _ref.label,\n          rest = (0, _objectWithoutProperties3.default)(_ref, [\"id\", \"link\", \"label\"]);\n      return (0, _extends3.default)({}, rest, {\n        id: optionId,\n        link: true,\n        to: link,\n        label: label || React.createElement(_T, {\n          id: \"TopNavDropdown.\" + optionId\n        }),\n        history: history // required for Link to work\n\n      });\n    }) // tooltip={currentUser.emails[0].address}\n    // tooltipPosition=\"bottom-end\"\n\n  });\n};\n\nTopNavDropdown.propTypes = {\n  currentUser: PropTypes.objectOf(PropTypes.any).isRequired,\n  history: PropTypes.object.isRequired\n};\nmodule.exportDefault(TopNavDropdown);","map":{"version":3,"sources":["imports/core/components/TopNav/TopNavDropdown.jsx"],"names":["PropTypes","module","watch","require","default","v","React","Meteor","Roles","track","T","DropdownMenu","getMenuItems","currentUser","history","isDev","userIsInRole","_id","isAdmin","isPartner","id","link","show","icon","label","onClick","logout","window","location","replace","settings","public","subdomains","www","dividerTop","TopNavDropdown","props","vertical","horizontal","filter","o","map","optionId","rest","to","propTypes","objectOf","any","isRequired","object","exportDefault"],"mappings":"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","file":"imports/core/components/TopNav/TopNavDropdown.jsx.map","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Meteor } from 'meteor/meteor';\nimport { Roles } from 'meteor/alanning:roles';\n\nimport track from '../../utils/analytics';\nimport { T } from '../Translation';\nimport DropdownMenu from '../DropdownMenu';\n\n// Shows a sign out link for all types of users, but:\n// an admin link for admins,\n// a partner link for partners,\n// a home, settings, and contact link for regular users\nconst getMenuItems = (currentUser, history) => {\n  const isDev = Roles.userIsInRole(currentUser._id, 'dev');\n  const isAdmin = Roles.userIsInRole(currentUser._id, 'admin');\n  const isPartner = Roles.userIsInRole(currentUser._id, 'partner');\n  return [\n    {\n      id: 'admin',\n      link: '/admin',\n      show: isAdmin,\n      icon: 'app',\n    },\n    {\n      id: 'partner',\n      link: '/partner',\n      show: isPartner,\n      icon: 'app',\n    },\n    {\n      id: 'app',\n      link: '/',\n      show: !isAdmin && !isPartner,\n      icon: 'app',\n    },\n    {\n      id: 'account',\n      link: '/profile',\n      show: !isAdmin && !isPartner,\n      icon: 'accountCircle',\n    },\n    {\n      id: 'dev',\n      link: '/dev',\n      show: isDev,\n    },\n    {\n      id: 'logout',\n      label: <T id=\"general.logout\" />,\n      onClick: () => {\n        track('TopNavDropdown - logged out', {});\n        Meteor.logout(() =>\n          window.location.replace(`${Meteor.settings.public.subdomains.www}`));\n      },\n      link: '/',\n      show: true,\n      dividerTop: true,\n      icon: 'powerOff',\n    },\n  ];\n};\n\nconst TopNavDropdown = (props) => {\n  const { currentUser, history } = props;\n\n  return (\n    <DropdownMenu\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'left',\n      }}\n      transformOrigin={{\n        vertical: 'bottom',\n        horizontal: 'left',\n      }}\n      iconType=\"person\"\n      options={getMenuItems(currentUser, history)\n        // Allow the Divider to go through\n        .filter(o => !!o.show)\n        .map(({ id: optionId, link, label, ...rest }) => ({\n          ...rest,\n          id: optionId,\n          link: true,\n          to: link,\n          label: label || <T id={`TopNavDropdown.${optionId}`} />,\n          history, // required for Link to work\n        }))}\n      // tooltip={currentUser.emails[0].address}\n      // tooltipPosition=\"bottom-end\"\n    />\n  );\n};\n\nTopNavDropdown.propTypes = {\n  currentUser: PropTypes.objectOf(PropTypes.any).isRequired,\n  history: PropTypes.object.isRequired,\n};\n\nexport default TopNavDropdown;\n"]},"hash":"4101160e4109dd9281e7dc11db9d1a78a0f3bece"}
