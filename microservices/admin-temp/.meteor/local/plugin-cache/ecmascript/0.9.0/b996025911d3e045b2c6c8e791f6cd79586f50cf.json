{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"../..","imported":["SecurityService","createMutator"],"specifiers":[{"kind":"named","imported":"SecurityService","local":"SecurityService"},{"kind":"named","imported":"createMutator","local":"createMutator"}]},{"source":"../OfferService","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"OfferService"}]},{"source":"../mutationDefinitions","imported":["*"],"specifiers":[{"kind":"namespace","local":"defs"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/core/api/offers/server/mutations.js","filenameRelative":"imports/core/api/offers/server/mutations.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/api/offers/server/mutations.js.map","sourceFileName":"imports/core/api/offers/server/mutations.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"mutations"},"ignored":false,"code":"\"use strict\";\n\nvar _SecurityService = void 0,\n    _createMutator = void 0;\n\nmodule.watch(require(\"../..\"), {\n  SecurityService: function SecurityService(v) {\n    _SecurityService = v;\n  },\n  createMutator: function createMutator(v) {\n    _createMutator = v;\n  }\n}, 0);\nvar OfferService = void 0;\nmodule.watch(require(\"../OfferService\"), {\n  default: function _default(v) {\n    OfferService = v;\n  }\n}, 1);\nvar defs = void 0;\nmodule.watch(require(\"../mutationDefinitions\"), {\n  \"*\": function _(v) {\n    defs = v;\n  }\n}, 2);\n\n_createMutator(defs.OFFER_INSERT, function (_ref) {\n  var object = _ref.object,\n      userId = _ref.userId;\n\n  _SecurityService.checkLoggedIn();\n\n  return OfferService.insert({\n    object: object,\n    userId: userId\n  });\n});\n\n_createMutator(defs.OFFER_UPDATE, function (_ref2) {\n  var offerId = _ref2.offerId,\n      object = _ref2.object;\n\n  _SecurityService.offers.isAllowedToUpdate(offerId);\n\n  return OfferService.update({\n    offerId: offerId,\n    object: object\n  });\n});\n\n_createMutator(defs.OFFER_DELETE, function (_ref3) {\n  var offerId = _ref3.offerId;\n\n  _SecurityService.offers.isAllowedToDelete(offerId);\n\n  return OfferService.remove({\n    offerId: offerId\n  });\n});","map":{"version":3,"sources":["imports/core/api/offers/server/mutations.js"],"names":["SecurityService","createMutator","module","watch","require","v","OfferService","default","defs","OFFER_INSERT","object","userId","checkLoggedIn","insert","OFFER_UPDATE","offerId","offers","isAllowedToUpdate","update","OFFER_DELETE","isAllowedToDelete","remove"],"mappings":";;AAAA,IAAIA,yBAAJ;AAAA,IAAoBC,uBAApB;;AAAkCC,OAAOC,KAAP,CAAaC,QAAQ,OAAR,CAAb,EAA8B;AAACJ,iBAAD,2BAAiBK,CAAjB,EAAmB;AAACL,uBAAgBK,CAAhB;AAAkB,GAAtC;AAAuCJ,eAAvC,yBAAqDI,CAArD,EAAuD;AAACJ,qBAAcI,CAAd;AAAgB;AAAxE,CAA9B,EAAwG,CAAxG;AAA2G,IAAIC,qBAAJ;AAAiBJ,OAAOC,KAAP,CAAaC,QAAQ,iBAAR,CAAb,EAAwC;AAACG,SAAD,oBAASF,CAAT,EAAW;AAACC,mBAAaD,CAAb;AAAe;AAA3B,CAAxC,EAAqE,CAArE;AAAwE,IAAIG,aAAJ;AAASN,OAAOC,KAAP,CAAaC,QAAQ,wBAAR,CAAb,EAA+C;AAAC,KAAD,aAAKC,CAAL,EAAO;AAACG,WAAKH,CAAL;AAAO;AAAf,CAA/C,EAAgE,CAAhE;;AAI/OJ,eAAcO,KAAKC,YAAnB,EAAiC,gBAAwB;AAAA,MAArBC,MAAqB,QAArBA,MAAqB;AAAA,MAAbC,MAAa,QAAbA,MAAa;;AACvDX,mBAAgBY,aAAhB;;AACA,SAAON,aAAaO,MAAb,CAAoB;AAAEH,kBAAF;AAAUC;AAAV,GAApB,CAAP;AACD,CAHD;;AAKAV,eAAcO,KAAKM,YAAnB,EAAiC,iBAAyB;AAAA,MAAtBC,OAAsB,SAAtBA,OAAsB;AAAA,MAAbL,MAAa,SAAbA,MAAa;;AACxDV,mBAAgBgB,MAAhB,CAAuBC,iBAAvB,CAAyCF,OAAzC;;AACA,SAAOT,aAAaY,MAAb,CAAoB;AAAEH,oBAAF;AAAWL;AAAX,GAApB,CAAP;AACD,CAHD;;AAKAT,eAAcO,KAAKW,YAAnB,EAAiC,iBAAiB;AAAA,MAAdJ,OAAc,SAAdA,OAAc;;AAChDf,mBAAgBgB,MAAhB,CAAuBI,iBAAvB,CAAyCL,OAAzC;;AACA,SAAOT,aAAae,MAAb,CAAoB;AAAEN;AAAF,GAApB,CAAP;AACD,CAHD","file":"imports/core/api/offers/server/mutations.js.map","sourcesContent":["import { SecurityService, createMutator } from '../..';\nimport OfferService from '../OfferService';\nimport * as defs from '../mutationDefinitions';\n\ncreateMutator(defs.OFFER_INSERT, ({ object, userId }) => {\n  SecurityService.checkLoggedIn();\n  return OfferService.insert({ object, userId });\n});\n\ncreateMutator(defs.OFFER_UPDATE, ({ offerId, object }) => {\n  SecurityService.offers.isAllowedToUpdate(offerId);\n  return OfferService.update({ offerId, object });\n});\n\ncreateMutator(defs.OFFER_DELETE, ({ offerId }) => {\n  SecurityService.offers.isAllowedToDelete(offerId);\n  return OfferService.remove({ offerId });\n});\n"]},"hash":"b996025911d3e045b2c6c8e791f6cd79586f50cf"}
