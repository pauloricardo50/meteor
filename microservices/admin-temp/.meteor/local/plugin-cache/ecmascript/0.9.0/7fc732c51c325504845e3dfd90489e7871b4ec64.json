{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"dot-object","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"dot"}]},{"source":"meteor/underscore","imported":["_"],"specifiers":[{"kind":"named","imported":"_","local":"_"}]}],"exports":{"exported":["allowedBody","clientBody"],"specifiers":[{"kind":"local","local":"allowedBody","exported":"default"},{"kind":"local","local":"clientBody","exported":"default"}]}}},"options":{"filename":"packages/cultofcoders:grapher/lib/query/lib/intersectDeep.js","filenameRelative":"packages/cultofcoders:grapher/lib/query/lib/intersectDeep.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/cultofcoders:grapher/lib/query/lib/intersectDeep.js.map","sourceFileName":"packages/cultofcoders:grapher/lib/query/lib/intersectDeep.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"intersectDeep"},"ignored":false,"code":"var dot = void 0;\nmodule.watch(require(\"dot-object\"), {\n    \"default\": function (v) {\n        dot = v;\n    }\n}, 0);\n\nvar _ = void 0;\n\nmodule.watch(require(\"meteor/underscore\"), {\n    _: function (v) {\n        _ = v;\n    }\n}, 1);\nmodule.exportDefault(function (allowedBody, clientBody) {\n    var allowedBodyDot = _.keys(dot.dot(allowedBody));\n\n    var clientBodyDot = _.keys(dot.dot(clientBody));\n\n    var intersection = _.intersection(allowedBodyDot, clientBodyDot);\n\n    var build = {};\n    intersection.forEach(function (intersectedField) {\n        build[intersectedField] = 1;\n    });\n    return dot.object(build);\n});","map":{"version":3,"sources":["packages/cultofcoders:grapher/lib/query/lib/intersectDeep.js"],"names":["dot","module","watch","require","v","_","exportDefault","allowedBody","clientBody","allowedBodyDot","keys","clientBodyDot","intersection","build","forEach","intersectedField","object"],"mappings":"AAAA,IAAIA,YAAJ;AAAQC,OAAOC,KAAP,CAAaC,QAAQ,YAAR,CAAb,EAAmC;AAAA,yBAASC,CAAT,EAAW;AAACJ,cAAII,CAAJ;AAAM;AAAlB,CAAnC,EAAuD,CAAvD;;AAA0D,IAAIC,UAAJ;;AAAMJ,OAAOC,KAAP,CAAaC,QAAQ,mBAAR,CAAb,EAA0C;AAACE,KAAD,YAAGD,CAAH,EAAK;AAACC,YAAED,CAAF;AAAI;AAAV,CAA1C,EAAsD,CAAtD;AAAxEH,OAAOK,aAAP,CAUe,UAAUC,WAAV,EAAuBC,UAAvB,EAAmC;AAC9C,QAAMC,iBAAiBJ,EAAEK,IAAF,CAAOV,IAAIA,GAAJ,CAAQO,WAAR,CAAP,CAAvB;;AACA,QAAMI,gBAAgBN,EAAEK,IAAF,CAAOV,IAAIA,GAAJ,CAAQQ,UAAR,CAAP,CAAtB;;AAEA,QAAMI,eAAeP,EAAEO,YAAF,CAAeH,cAAf,EAA+BE,aAA/B,CAArB;;AAEA,QAAME,QAAQ,EAAd;AACAD,iBAAaE,OAAb,CAAqB,4BAAoB;AACrCD,cAAME,gBAAN,IAA0B,CAA1B;AACH,KAFD;AAIA,WAAOf,IAAIgB,MAAJ,CAAWH,KAAX,CAAP;AACH,CAtBD","file":"packages/cultofcoders:grapher/lib/query/lib/intersectDeep.js.map","sourcesContent":["import dot from 'dot-object';\nimport {_} from 'meteor/underscore';\n\n/**\n * Given a named query that has a specific body, you can query its subbody\n * This performs an intersection of the bodies allowed in each\n *\n * @param allowedBody\n * @param clientBody\n */\nexport default function (allowedBody, clientBody) {\n    const allowedBodyDot = _.keys(dot.dot(allowedBody));\n    const clientBodyDot = _.keys(dot.dot(clientBody));\n\n    const intersection = _.intersection(allowedBodyDot, clientBodyDot);\n\n    const build = {};\n    intersection.forEach(intersectedField => {\n        build[intersectedField] = 1;\n    });\n\n    return dot.object(build);\n}"]},"hash":"7fc732c51c325504845e3dfd90489e7871b4ec64"}
