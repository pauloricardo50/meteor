{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"../../api/loans/loans","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Loans"}]},{"source":"../../api/offers/offers","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"Offers"}]}],"exports":{"exported":["partnerOffersComposer","props","onData","partnerLoansComposer","props","onData","partnerOfferComposer","props","onData","partnerLoanComposer","props","onData"],"specifiers":[{"kind":"local","local":"partnerOffersComposer","exported":"partnerOffersComposer"},{"kind":"local","local":"props","exported":"props"},{"kind":"local","local":"onData","exported":"onData"},{"kind":"local","local":"partnerLoansComposer","exported":"partnerLoansComposer"},{"kind":"local","local":"props","exported":"props"},{"kind":"local","local":"onData","exported":"onData"},{"kind":"local","local":"partnerOfferComposer","exported":"partnerOfferComposer"},{"kind":"local","local":"props","exported":"props"},{"kind":"local","local":"onData","exported":"onData"},{"kind":"local","local":"partnerLoanComposer","exported":"partnerLoanComposer"},{"kind":"local","local":"props","exported":"props"},{"kind":"local","local":"onData","exported":"onData"}]}}},"options":{"filename":"imports/core/containers/composers/PartnerComposers.js","filenameRelative":"imports/core/containers/composers/PartnerComposers.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/containers/composers/PartnerComposers.js.map","sourceFileName":"imports/core/containers/composers/PartnerComposers.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"PartnerComposers"},"ignored":false,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nmodule.export({\n  partnerOffersComposer: function () {\n    function partnerOffersComposer() {\n      return _partnerOffersComposer;\n    }\n\n    return partnerOffersComposer;\n  }(),\n  partnerLoansComposer: function () {\n    function partnerLoansComposer() {\n      return _partnerLoansComposer;\n    }\n\n    return partnerLoansComposer;\n  }(),\n  partnerOfferComposer: function () {\n    function partnerOfferComposer() {\n      return _partnerOfferComposer;\n    }\n\n    return partnerOfferComposer;\n  }(),\n  partnerLoanComposer: function () {\n    function partnerLoanComposer() {\n      return _partnerLoanComposer;\n    }\n\n    return partnerLoanComposer;\n  }()\n});\n\nvar _Meteor = void 0;\n\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function () {\n    function Meteor(v) {\n      _Meteor = v;\n    }\n\n    return Meteor;\n  }()\n}, 0);\nvar Loans = void 0;\nexports.partnerOffersComposer = _partnerOffersComposer;\nmodule.watch(require(\"../../api/loans/loans\"), {\n  \"default\": function () {\n    function _default(v) {\n      Loans = v;\n    }\n\n    return _default;\n  }()\n}, 1);\nexports.partnerLoansComposer = _partnerLoansComposer;\nvar Offers = void 0;\nexports.partnerOfferComposer = _partnerOfferComposer;\nmodule.watch(require(\"../../api/offers/offers\"), {\n  \"default\": function () {\n    function _default(v) {\n      Offers = v;\n    }\n\n    return _default;\n  }()\n}, 2);\nexports.partnerLoanComposer = _partnerLoanComposer;\n\nfunction _partnerOffersComposer(props, onData) {\n  if (_Meteor.subscribe('partnerOffers').ready()) {\n    // TODO make sure this works in any time zone\n    var currentOffers = Offers.find({\n      auctionEndTime: {\n        $gte: new Date()\n      }\n    }).fetch(); // auction end time is less than current time\n\n    var oldOffers = Offers.find({\n      auctionEndTime: {\n        $lt: new Date()\n      }\n    }).fetch();\n    onData(null, {\n      currentOffers: currentOffers,\n      oldOffers: oldOffers\n    });\n  }\n}\n\nfunction _partnerLoansComposer(props, onData) {\n  if (_Meteor.subscribe('partnerLoansAuction').ready()) {\n    if (_Meteor.subscribe('partnerLoansCompleted').ready()) {\n      var loans = Loans.find({}).fetch();\n      onData(null, {\n        loans: loans\n      });\n    }\n  }\n}\n\nfunction _partnerOfferComposer(props, onData) {\n  var offerId = props.match.params.offerId;\n\n  if (_Meteor.subscribe('offer', offerId).ready()) {\n    var offer = Offers.findOne({}).fetch();\n    onData(null, {\n      offer: offer\n    });\n  }\n}\n\nfunction _partnerLoanComposer(props, onData) {\n  var loanId = props.match.params.loanId;\n\n  if (_Meteor.subscribe('partnerSingleLoan', loanId).ready()) {\n    var loan = Loans.findOne({}).fetch();\n    onData(null, {\n      loan: loan\n    });\n  }\n}","map":{"version":3,"sources":["imports/core/containers/composers/PartnerComposers.js"],"names":["module","export","partnerOffersComposer","partnerLoansComposer","partnerOfferComposer","partnerLoanComposer","Meteor","watch","require","v","Loans","Offers","props","onData","subscribe","ready","currentOffers","find","auctionEndTime","$gte","Date","fetch","oldOffers","$lt","loans","offerId","match","params","offer","findOne","loanId","loan"],"mappings":";;;;;AAAAA,OAAOC,MAAP,CAAc;AAACC;AAAsB;AAAA,aAAIA,sBAAJ;AAAA;;AAAtB;AAAA,KAAD;AAAiDC;AAAqB;AAAA,aAAIA,qBAAJ;AAAA;;AAArB;AAAA,KAAjD;AAA+FC;AAAqB;AAAA,aAAIA,qBAAJ;AAAA;;AAArB;AAAA,KAA/F;AAA6IC;AAAoB;AAAA,aAAIA,oBAAJ;AAAA;;AAApB;AAAA;AAA7I,CAAd;;AAAyM,IAAIC,gBAAJ;;AAAWN,OAAOO,KAAP,CAAaC,QAAQ,eAAR,CAAb,EAAsC;AAACF,QAAD;AAAA,oBAAQG,CAAR,EAAU;AAACH,gBAAOG,CAAP;AAAS;;AAApB;AAAA;AAAA,CAAtC,EAA4D,CAA5D;AAA+D,IAAIC,cAAJ;;AAAUV,OAAOO,KAAP,CAAaC,QAAQ,uBAAR,CAAb,EAA8C;AAAA;AAAA,sBAASC,CAAT,EAAW;AAACC,cAAMD,CAAN;AAAQ;;AAApB;AAAA;AAAA,CAA9C,EAAoE,CAApE;;AAAuE,IAAIE,eAAJ;;AAAWX,OAAOO,KAAP,CAAaC,QAAQ,yBAAR,CAAb,EAAgD;AAAA;AAAA,sBAASC,CAAT,EAAW;AAACE,eAAOF,CAAP;AAAS;;AAArB;AAAA;AAAA,CAAhD,EAAuE,CAAvE;;;AAKxW,SAASP,sBAAT,CAA+BU,KAA/B,EAAsCC,MAAtC,EAA8C;AACnD,MAAIP,QAAOQ,SAAP,CAAiB,eAAjB,EAAkCC,KAAlC,EAAJ,EAA+C;AAC7C;AACA,QAAMC,gBAAgBL,OAAOM,IAAP,CAAY;AAChCC,sBAAgB;AAAEC,cAAM,IAAIC,IAAJ;AAAR;AADgB,KAAZ,EAEnBC,KAFmB,EAAtB,CAF6C,CAM7C;;AACA,QAAMC,YAAYX,OAAOM,IAAP,CAAY;AAC5BC,sBAAgB;AAAEK,aAAK,IAAIH,IAAJ;AAAP;AADY,KAAZ,EAEfC,KAFe,EAAlB;AAIAR,WAAO,IAAP,EAAa;AAAEG,kCAAF;AAAiBM;AAAjB,KAAb;AACD;AACF;;AAEM,SAASnB,qBAAT,CAA8BS,KAA9B,EAAqCC,MAArC,EAA6C;AAClD,MAAIP,QAAOQ,SAAP,CAAiB,qBAAjB,EAAwCC,KAAxC,EAAJ,EAAqD;AACnD,QAAIT,QAAOQ,SAAP,CAAiB,uBAAjB,EAA0CC,KAA1C,EAAJ,EAAuD;AACrD,UAAMS,QAAQd,MAAMO,IAAN,CAAW,EAAX,EAAeI,KAAf,EAAd;AAEAR,aAAO,IAAP,EAAa;AAAEW;AAAF,OAAb;AACD;AACF;AACF;;AAEM,SAASpB,qBAAT,CAA8BQ,KAA9B,EAAqCC,MAArC,EAA6C;AAClD,MAAMY,UAAUb,MAAMc,KAAN,CAAYC,MAAZ,CAAmBF,OAAnC;;AAEA,MAAInB,QAAOQ,SAAP,CAAiB,OAAjB,EAA0BW,OAA1B,EAAmCV,KAAnC,EAAJ,EAAgD;AAC9C,QAAMa,QAAQjB,OAAOkB,OAAP,CAAe,EAAf,EAAmBR,KAAnB,EAAd;AAEAR,WAAO,IAAP,EAAa;AAAEe;AAAF,KAAb;AACD;AACF;;AAEM,SAASvB,oBAAT,CAA6BO,KAA7B,EAAoCC,MAApC,EAA4C;AACjD,MAAMiB,SAASlB,MAAMc,KAAN,CAAYC,MAAZ,CAAmBG,MAAlC;;AAEA,MAAIxB,QAAOQ,SAAP,CAAiB,mBAAjB,EAAsCgB,MAAtC,EAA8Cf,KAA9C,EAAJ,EAA2D;AACzD,QAAMgB,OAAOrB,MAAMmB,OAAN,CAAc,EAAd,EAAkBR,KAAlB,EAAb;AAEAR,WAAO,IAAP,EAAa;AAAEkB;AAAF,KAAb;AACD;AACF","file":"imports/core/containers/composers/PartnerComposers.js.map","sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport Loans from '../../api/loans/loans';\nimport Offers from '../../api/offers/offers';\n\nexport function partnerOffersComposer(props, onData) {\n  if (Meteor.subscribe('partnerOffers').ready()) {\n    // TODO make sure this works in any time zone\n    const currentOffers = Offers.find({\n      auctionEndTime: { $gte: new Date() },\n    }).fetch();\n\n    // auction end time is less than current time\n    const oldOffers = Offers.find({\n      auctionEndTime: { $lt: new Date() },\n    }).fetch();\n\n    onData(null, { currentOffers, oldOffers });\n  }\n}\n\nexport function partnerLoansComposer(props, onData) {\n  if (Meteor.subscribe('partnerLoansAuction').ready()) {\n    if (Meteor.subscribe('partnerLoansCompleted').ready()) {\n      const loans = Loans.find({}).fetch();\n\n      onData(null, { loans });\n    }\n  }\n}\n\nexport function partnerOfferComposer(props, onData) {\n  const offerId = props.match.params.offerId;\n\n  if (Meteor.subscribe('offer', offerId).ready()) {\n    const offer = Offers.findOne({}).fetch();\n\n    onData(null, { offer });\n  }\n}\n\nexport function partnerLoanComposer(props, onData) {\n  const loanId = props.match.params.loanId;\n\n  if (Meteor.subscribe('partnerSingleLoan', loanId).ready()) {\n    const loan = Loans.findOne({}).fetch();\n\n    onData(null, { loan });\n  }\n}\n"]},"hash":"485b1a101064e835924d7841c61b7934828cdfc2"}
