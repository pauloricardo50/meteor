{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"../query/lib/createGraph.js","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"createGraph"}]},{"source":"meteor/check","imported":["Match"],"specifiers":[{"kind":"named","imported":"Match","local":"Match"}]}],"exports":{"exported":["ExposureDefaults","ExposureSchema","validateBody","collection","body"],"specifiers":[{"kind":"local","local":"ExposureDefaults","exported":"ExposureDefaults"},{"kind":"local","local":"ExposureSchema","exported":"ExposureSchema"},{"kind":"local","local":"validateBody","exported":"validateBody"},{"kind":"local","local":"collection","exported":"collection"},{"kind":"local","local":"body","exported":"body"}]}}},"options":{"filename":"packages/cultofcoders:grapher/lib/exposure/exposure.config.schema.js","filenameRelative":"packages/cultofcoders:grapher/lib/exposure/exposure.config.schema.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/cultofcoders:grapher/lib/exposure/exposure.config.schema.js.map","sourceFileName":"packages/cultofcoders:grapher/lib/exposure/exposure.config.schema.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"exposure.config.schema"},"ignored":false,"code":"module.export({\n    ExposureDefaults: () => ExposureDefaults,\n    ExposureSchema: () => ExposureSchema,\n    validateBody: () => validateBody\n});\nlet createGraph;\nmodule.watch(require(\"../query/lib/createGraph.js\"), {\n    default(v) {\n        createGraph = v;\n    }\n\n}, 0);\nlet Match;\nmodule.watch(require(\"meteor/check\"), {\n    Match(v) {\n        Match = v;\n    }\n\n}, 1);\nconst ExposureDefaults = {\n    blocking: false,\n    method: true,\n    publication: true\n};\nconst ExposureSchema = {\n    firewall: Match.Maybe(Match.OneOf(Function, [Function])),\n    maxLimit: Match.Maybe(Match.Integer),\n    maxDepth: Match.Maybe(Match.Integer),\n    publication: Match.Maybe(Boolean),\n    method: Match.Maybe(Boolean),\n    blocking: Match.Maybe(Boolean),\n    body: Match.Maybe(Object),\n    restrictedFields: Match.Maybe([String]),\n    restrictLinks: Match.Maybe(Match.OneOf(Function, [String]))\n};\n\nfunction validateBody(collection, body) {\n    try {\n        createGraph(collection, body);\n    } catch (e) {\n        throw new Meteor.Error('invalid-body', 'We could not build a valid graph when trying to create your exposure: ' + e.toString());\n    }\n}","map":{"version":3,"sources":["packages/cultofcoders:grapher/lib/exposure/exposure.config.schema.js"],"names":["module","export","ExposureDefaults","ExposureSchema","validateBody","createGraph","watch","require","default","v","Match","blocking","method","publication","firewall","Maybe","OneOf","Function","maxLimit","Integer","maxDepth","Boolean","body","Object","restrictedFields","String","restrictLinks","collection","e","Meteor","Error","toString"],"mappings":"AAAAA,OAAOC,MAAP,CAAc;AAACC,sBAAiB,MAAIA,gBAAtB;AAAuCC,oBAAe,MAAIA,cAA1D;AAAyEC,kBAAa,MAAIA;AAA1F,CAAd;AAAuH,IAAIC,WAAJ;AAAgBL,OAAOM,KAAP,CAAaC,QAAQ,6BAAR,CAAb,EAAoD;AAACC,YAAQC,CAAR,EAAU;AAACJ,sBAAYI,CAAZ;AAAc;;AAA1B,CAApD,EAAgF,CAAhF;AAAmF,IAAIC,KAAJ;AAAUV,OAAOM,KAAP,CAAaC,QAAQ,cAAR,CAAb,EAAqC;AAACG,UAAMD,CAAN,EAAQ;AAACC,gBAAMD,CAAN;AAAQ;;AAAlB,CAArC,EAAyD,CAAzD;AAG7N,MAAMP,mBAAmB;AAC5BS,cAAU,KADkB;AAE5BC,YAAQ,IAFoB;AAG5BC,iBAAa;AAHe,CAAzB;AAMA,MAAMV,iBAAiB;AAC1BW,cAAUJ,MAAMK,KAAN,CACNL,MAAMM,KAAN,CAAYC,QAAZ,EAAsB,CAACA,QAAD,CAAtB,CADM,CADgB;AAI1BC,cAAUR,MAAMK,KAAN,CAAYL,MAAMS,OAAlB,CAJgB;AAK1BC,cAAUV,MAAMK,KAAN,CAAYL,MAAMS,OAAlB,CALgB;AAM1BN,iBAAaH,MAAMK,KAAN,CAAYM,OAAZ,CANa;AAO1BT,YAAQF,MAAMK,KAAN,CAAYM,OAAZ,CAPkB;AAQ1BV,cAAUD,MAAMK,KAAN,CAAYM,OAAZ,CARgB;AAS1BC,UAAMZ,MAAMK,KAAN,CAAYQ,MAAZ,CAToB;AAU1BC,sBAAkBd,MAAMK,KAAN,CAAY,CAACU,MAAD,CAAZ,CAVQ;AAW1BC,mBAAehB,MAAMK,KAAN,CACXL,MAAMM,KAAN,CAAYC,QAAZ,EAAsB,CAACQ,MAAD,CAAtB,CADW;AAXW,CAAvB;;AAgBA,SAASrB,YAAT,CAAsBuB,UAAtB,EAAkCL,IAAlC,EAAwC;AAC3C,QAAI;AACAjB,oBAAYsB,UAAZ,EAAwBL,IAAxB;AACH,KAFD,CAEE,OAAOM,CAAP,EAAU;AACR,cAAM,IAAIC,OAAOC,KAAX,CAAiB,cAAjB,EAAiC,2EAA2EF,EAAEG,QAAF,EAA5G,CAAN;AACH;AACJ","file":"packages/cultofcoders:grapher/lib/exposure/exposure.config.schema.js.map","sourcesContent":["import createGraph from '../query/lib/createGraph.js';\nimport {Match} from 'meteor/check';\n\nexport const ExposureDefaults = {\n    blocking: false,\n    method: true,\n    publication: true,\n};\n\nexport const ExposureSchema = {\n    firewall: Match.Maybe(\n        Match.OneOf(Function, [Function])\n    ),\n    maxLimit: Match.Maybe(Match.Integer),\n    maxDepth: Match.Maybe(Match.Integer),\n    publication: Match.Maybe(Boolean),\n    method: Match.Maybe(Boolean),\n    blocking: Match.Maybe(Boolean),\n    body: Match.Maybe(Object),\n    restrictedFields: Match.Maybe([String]),\n    restrictLinks: Match.Maybe(\n        Match.OneOf(Function, [String])\n    ),\n};\n\nexport function validateBody(collection, body) {\n    try {\n        createGraph(collection, body);\n    } catch (e) {\n        throw new Meteor.Error('invalid-body', 'We could not build a valid graph when trying to create your exposure: ' + e.toString())\n    }\n}"]},"hash":"d5e73f7659e7697bae484df88ae3faadac3dc1b6"}
