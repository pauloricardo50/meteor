{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"dot-object","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"dot"}]},{"source":"meteor/underscore","imported":["_"],"specifiers":[{"kind":"named","imported":"_","local":"_"}]}],"exports":{"exported":["allowedBody","clientBody"],"specifiers":[{"kind":"local","local":"allowedBody","exported":"default"},{"kind":"local","local":"clientBody","exported":"default"}]}}},"options":{"filename":"packages/cultofcoders:grapher/lib/query/lib/intersectDeep.js","filenameRelative":"packages/cultofcoders:grapher/lib/query/lib/intersectDeep.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/cultofcoders:grapher/lib/query/lib/intersectDeep.js.map","sourceFileName":"packages/cultofcoders:grapher/lib/query/lib/intersectDeep.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"intersectDeep"},"ignored":false,"code":"let dot;\nmodule.watch(require(\"dot-object\"), {\n    default(v) {\n        dot = v;\n    }\n\n}, 0);\n\nlet _;\n\nmodule.watch(require(\"meteor/underscore\"), {\n    _(v) {\n        _ = v;\n    }\n\n}, 1);\nmodule.exportDefault(function (allowedBody, clientBody) {\n    const allowedBodyDot = _.keys(dot.dot(allowedBody));\n\n    const clientBodyDot = _.keys(dot.dot(clientBody));\n\n    const intersection = _.intersection(allowedBodyDot, clientBodyDot);\n\n    const build = {};\n    intersection.forEach(intersectedField => {\n        build[intersectedField] = 1;\n    });\n    return dot.object(build);\n});","map":{"version":3,"sources":["packages/cultofcoders:grapher/lib/query/lib/intersectDeep.js"],"names":["dot","module","watch","require","default","v","_","exportDefault","allowedBody","clientBody","allowedBodyDot","keys","clientBodyDot","intersection","build","forEach","intersectedField","object"],"mappings":"AAAA,IAAIA,GAAJ;AAAQC,OAAOC,KAAP,CAAaC,QAAQ,YAAR,CAAb,EAAmC;AAACC,YAAQC,CAAR,EAAU;AAACL,cAAIK,CAAJ;AAAM;;AAAlB,CAAnC,EAAuD,CAAvD;;AAA0D,IAAIC,CAAJ;;AAAML,OAAOC,KAAP,CAAaC,QAAQ,mBAAR,CAAb,EAA0C;AAACG,MAAED,CAAF,EAAI;AAACC,YAAED,CAAF;AAAI;;AAAV,CAA1C,EAAsD,CAAtD;AAAxEJ,OAAOM,aAAP,CAUe,UAAUC,WAAV,EAAuBC,UAAvB,EAAmC;AAC9C,UAAMC,iBAAiBJ,EAAEK,IAAF,CAAOX,IAAIA,GAAJ,CAAQQ,WAAR,CAAP,CAAvB;;AACA,UAAMI,gBAAgBN,EAAEK,IAAF,CAAOX,IAAIA,GAAJ,CAAQS,UAAR,CAAP,CAAtB;;AAEA,UAAMI,eAAeP,EAAEO,YAAF,CAAeH,cAAf,EAA+BE,aAA/B,CAArB;;AAEA,UAAME,QAAQ,EAAd;AACAD,iBAAaE,OAAb,CAAqBC,oBAAoB;AACrCF,cAAME,gBAAN,IAA0B,CAA1B;AACH,KAFD;AAIA,WAAOhB,IAAIiB,MAAJ,CAAWH,KAAX,CAAP;AACH,CAtBD","file":"packages/cultofcoders:grapher/lib/query/lib/intersectDeep.js.map","sourcesContent":["import dot from 'dot-object';\nimport {_} from 'meteor/underscore';\n\n/**\n * Given a named query that has a specific body, you can query its subbody\n * This performs an intersection of the bodies allowed in each\n *\n * @param allowedBody\n * @param clientBody\n */\nexport default function (allowedBody, clientBody) {\n    const allowedBodyDot = _.keys(dot.dot(allowedBody));\n    const clientBodyDot = _.keys(dot.dot(clientBody));\n\n    const intersection = _.intersection(allowedBodyDot, clientBodyDot);\n\n    const build = {};\n    intersection.forEach(intersectedField => {\n        build[intersectedField] = 1;\n    });\n\n    return dot.object(build);\n}"]},"hash":"06b63d4d4a38cdaedc757fc37bcb5e599145a5fa"}
