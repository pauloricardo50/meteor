{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/alanning:roles","imported":["Roles"],"specifiers":[{"kind":"named","imported":"Roles","local":"Roles"}]},{"source":"meteor/check","imported":["check"],"specifiers":[{"kind":"named","imported":"check","local":"check"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"imports/core/api/users/server/publications.js","filenameRelative":"imports/core/api/users/server/publications.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"useNativeAsyncAwait":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/core/api/users/server/publications.js.map","sourceFileName":"imports/core/api/users/server/publications.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"publications"},"ignored":false,"code":"\"use strict\";\n\nvar _Meteor = void 0;\n\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function Meteor(v) {\n    _Meteor = v;\n  }\n}, 0);\n\nvar _Roles = void 0;\n\nmodule.watch(require(\"meteor/alanning:roles\"), {\n  Roles: function Roles(v) {\n    _Roles = v;\n  }\n}, 1);\n\nvar _check = void 0;\n\nmodule.watch(require(\"meteor/check\"), {\n  check: function check(v) {\n    _check = v;\n  }\n}, 2);\n\n_Meteor.publish('allUsers', function publish() {\n  // Verify if the current user is an admin\n  if (_Roles.userIsInRole(_Meteor.userId(), 'admin') || _Roles.userIsInRole(_Meteor.userId(), 'dev')) {\n    // Return all users\n    return _Meteor.users.find();\n  }\n\n  return this.ready();\n});\n\n_Meteor.publish('currentUser', function publish() {\n  if (_Meteor.userId()) {\n    return _Meteor.users.find({\n      _id: _Meteor.userId()\n    });\n  } // Return an empy cursor if not logged in\n\n\n  return this.ready();\n});\n\n_Meteor.publish('user', function publish(userId) {\n  _check(userId, String);\n\n  if (_Roles.userIsInRole(_Meteor.userId(), 'admin') || _Roles.userIsInRole(_Meteor.userId(), 'dev')) {\n    return _Meteor.users.find({\n      _id: userId\n    });\n  } // Return an empy cursor if not logged in\n\n\n  return this.ready();\n});","map":{"version":3,"sources":["imports/core/api/users/server/publications.js"],"names":["Meteor","module","watch","require","v","Roles","check","publish","userIsInRole","userId","users","find","ready","_id","String"],"mappings":";;AAAA,IAAIA,gBAAJ;;AAAWC,OAAOC,KAAP,CAAaC,QAAQ,eAAR,CAAb,EAAsC;AAACH,QAAD,kBAAQI,CAAR,EAAU;AAACJ,cAAOI,CAAP;AAAS;AAApB,CAAtC,EAA4D,CAA5D;;AAA+D,IAAIC,eAAJ;;AAAUJ,OAAOC,KAAP,CAAaC,QAAQ,uBAAR,CAAb,EAA8C;AAACE,OAAD,iBAAOD,CAAP,EAAS;AAACC,aAAMD,CAAN;AAAQ;AAAlB,CAA9C,EAAkE,CAAlE;;AAAqE,IAAIE,eAAJ;;AAAUL,OAAOC,KAAP,CAAaC,QAAQ,cAAR,CAAb,EAAqC;AAACG,OAAD,iBAAOF,CAAP,EAAS;AAACE,aAAMF,CAAN;AAAQ;AAAlB,CAArC,EAAyD,CAAzD;;AAInKJ,QAAOO,OAAP,CAAe,UAAf,EAA2B,SAASA,OAAT,GAAmB;AAC5C;AACA,MACEF,OAAMG,YAAN,CAAmBR,QAAOS,MAAP,EAAnB,EAAoC,OAApC,KACAJ,OAAMG,YAAN,CAAmBR,QAAOS,MAAP,EAAnB,EAAoC,KAApC,CAFF,EAGE;AACA;AACA,WAAOT,QAAOU,KAAP,CAAaC,IAAb,EAAP;AACD;;AAED,SAAO,KAAKC,KAAL,EAAP;AACD,CAXD;;AAaAZ,QAAOO,OAAP,CAAe,aAAf,EAA8B,SAASA,OAAT,GAAmB;AAC/C,MAAIP,QAAOS,MAAP,EAAJ,EAAqB;AACnB,WAAOT,QAAOU,KAAP,CAAaC,IAAb,CAAkB;AAAEE,WAAKb,QAAOS,MAAP;AAAP,KAAlB,CAAP;AACD,GAH8C,CAI/C;;;AACA,SAAO,KAAKG,KAAL,EAAP;AACD,CAND;;AAQAZ,QAAOO,OAAP,CAAe,MAAf,EAAuB,SAASA,OAAT,CAAiBE,MAAjB,EAAyB;AAC9CH,SAAMG,MAAN,EAAcK,MAAd;;AACA,MACET,OAAMG,YAAN,CAAmBR,QAAOS,MAAP,EAAnB,EAAoC,OAApC,KACAJ,OAAMG,YAAN,CAAmBR,QAAOS,MAAP,EAAnB,EAAoC,KAApC,CAFF,EAGE;AACA,WAAOT,QAAOU,KAAP,CAAaC,IAAb,CAAkB;AAAEE,WAAKJ;AAAP,KAAlB,CAAP;AACD,GAP6C,CAQ9C;;;AACA,SAAO,KAAKG,KAAL,EAAP;AACD,CAVD","file":"imports/core/api/users/server/publications.js.map","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Roles } from 'meteor/alanning:roles';\nimport { check } from 'meteor/check';\n\nMeteor.publish('allUsers', function publish() {\n  // Verify if the current user is an admin\n  if (\n    Roles.userIsInRole(Meteor.userId(), 'admin') ||\n    Roles.userIsInRole(Meteor.userId(), 'dev')\n  ) {\n    // Return all users\n    return Meteor.users.find();\n  }\n\n  return this.ready();\n});\n\nMeteor.publish('currentUser', function publish() {\n  if (Meteor.userId()) {\n    return Meteor.users.find({ _id: Meteor.userId() });\n  }\n  // Return an empy cursor if not logged in\n  return this.ready();\n});\n\nMeteor.publish('user', function publish(userId) {\n  check(userId, String);\n  if (\n    Roles.userIsInRole(Meteor.userId(), 'admin') ||\n    Roles.userIsInRole(Meteor.userId(), 'dev')\n  ) {\n    return Meteor.users.find({ _id: userId });\n  }\n  // Return an empy cursor if not logged in\n  return this.ready();\n});\n"]},"hash":"40086fccd434de69a8d882279a8ccfc0c58d8c8b"}
