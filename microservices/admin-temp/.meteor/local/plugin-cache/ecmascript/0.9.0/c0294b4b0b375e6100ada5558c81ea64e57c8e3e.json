{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","createClass","classCallCheck","extends","defineProperty","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"}]},{"source":"prop-types","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"PropTypes"}]},{"source":"../../../core/components/Translation","imported":["T"],"specifiers":[{"kind":"named","imported":"T","local":"T"}]},{"source":"../../../core/api/cleanMethods","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"cleanMethod"}]},{"source":"./ItemVerificator","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"ItemVerificator"}]}],"exports":{"exported":["FileVerificator"],"specifiers":[{"kind":"local","local":"FileVerificator","exported":"default"}]}}},"options":{"filename":"imports/ui/pages/SingleLoanPage/FileVerificator.jsx","filenameRelative":"imports/ui/pages/SingleLoanPage/FileVerificator.jsx","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"spec":false,"loose":false}],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"imports/ui/pages/SingleLoanPage/FileVerificator.jsx.map","sourceFileName":"imports/ui/pages/SingleLoanPage/FileVerificator.jsx","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"FileVerificator"},"ignored":false,"code":"\"use strict\";\n\nvar _defineProperty2 = require(\"babel-runtime/helpers/defineProperty\");\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nmodule.export({\n  \"default\": function () {\n    function _default() {\n      return FileVerificator;\n    }\n\n    return _default;\n  }()\n});\n\nvar React = void 0,\n    _Component = void 0;\n\nmodule.watch(require(\"react\"), {\n  \"default\": function () {\n    function _default(v) {\n      React = v;\n    }\n\n    return _default;\n  }(),\n  Component: function () {\n    function Component(v) {\n      _Component = v;\n    }\n\n    return Component;\n  }()\n}, 0);\nvar PropTypes = void 0;\nmodule.watch(require(\"prop-types\"), {\n  \"default\": function () {\n    function _default(v) {\n      PropTypes = v;\n    }\n\n    return _default;\n  }()\n}, 1);\n\nvar _T = void 0;\n\nmodule.watch(require(\"../../../core/components/Translation\"), {\n  T: function () {\n    function T(v) {\n      _T = v;\n    }\n\n    return T;\n  }()\n}, 2);\nvar cleanMethod = void 0;\nmodule.watch(require(\"../../../core/api/cleanMethods\"), {\n  \"default\": function () {\n    function _default(v) {\n      cleanMethod = v;\n    }\n\n    return _default;\n  }()\n}, 3);\nvar ItemVerificator = void 0;\nmodule.watch(require(\"./ItemVerificator\"), {\n  \"default\": function () {\n    function _default(v) {\n      ItemVerificator = v;\n    }\n\n    return _default;\n  }()\n}, 4);\n\nvar FileVerificator = function (_Component2) {\n  (0, _inherits3.default)(FileVerificator, _Component2);\n\n  function FileVerificator() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, FileVerificator);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = FileVerificator.__proto__ || Object.getPrototypeOf(FileVerificator)).call.apply(_ref, [this].concat(args))), _this), _this.setStatus = function (fileKey, newStatus) {\n      var _this$props = _this.props,\n          currentValue = _this$props.currentValue,\n          id = _this$props.id,\n          docId = _this$props.docId;\n      var file = currentValue.find(function (f) {\n        return f.key === fileKey;\n      });\n      cleanMethod(_this.updateFunc(), {\n        object: (0, _defineProperty3.default)({}, \"files.\" + id, [].concat(_toConsumableArray(currentValue.filter(function (f) {\n          return f.key !== fileKey;\n        })), [(0, _extends3.default)({}, file, {\n          status: newStatus\n        })])),\n        id: docId\n      });\n    }, _this.saveError = function (fileKey, error) {\n      var _this$props2 = _this.props,\n          currentValue = _this$props2.currentValue,\n          id = _this$props2.id,\n          docId = _this$props2.docId;\n      var file = currentValue.find(function (f) {\n        return f.key === fileKey;\n      });\n      cleanMethod(_this.updateFunc(), {\n        object: (0, _defineProperty3.default)({}, \"files.\" + id, [].concat(_toConsumableArray(currentValue.filter(function (f) {\n          return f.key !== fileKey;\n        })), [(0, _extends3.default)({}, file, {\n          error: error\n        })])),\n        id: docId\n      });\n    }, _this.updateFunc = function () {\n      if (_this.props.isBorrower) return 'updateBorrower';\n      if (_this.props.isProperty) return 'updateProperty';\n      return 'updateLoan';\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n\n  (0, _createClass3.default)(FileVerificator, [{\n    key: \"render\",\n    value: function () {\n      function render() {\n        var _this2 = this;\n\n        var _props = this.props,\n            currentValue = _props.currentValue,\n            id = _props.id,\n            closingSteps = _props.closingSteps;\n        return React.createElement(\n          \"div\",\n          {\n            className: \"mask1 flex-col\",\n            style: {\n              marginBottom: 8\n            }\n          },\n          React.createElement(\n            \"h4\",\n            null,\n            id.indexOf('upload') >= 0 ? closingSteps.find(function (s) {\n              return s.id === id;\n            }) && closingSteps.find(function (s) {\n              return s.id === id;\n            }).title || id : React.createElement(_T, {\n              id: \"files.\" + id\n            })\n          ),\n          currentValue && currentValue.sort(function (a, b) {\n            return a.fileCount > b.fileCount;\n          }).map(function (f) {\n            return React.createElement(ItemVerificator, {\n              item: f,\n              key: f.key,\n              id: id,\n              setStatus: _this2.setStatus,\n              saveError: _this2.saveError\n            });\n          })\n        );\n      }\n\n      return render;\n    }()\n  }]);\n  return FileVerificator;\n}(_Component);\n\nFileVerificator.propTypes = {\n  isBorrower: PropTypes.bool,\n  isProperty: PropTypes.bool,\n  currentValue: PropTypes.arrayOf(PropTypes.object),\n  closingSteps: PropTypes.arrayOf(PropTypes.object),\n  id: PropTypes.string.isRequired,\n  docId: PropTypes.string.isRequired\n};\nFileVerificator.defaultProps = {\n  isBorrower: false,\n  isProperty: false,\n  currentValue: [],\n  closingSteps: []\n};","map":{"version":3,"sources":["imports/ui/pages/SingleLoanPage/FileVerificator.jsx"],"names":["module","export","FileVerificator","React","Component","watch","require","v","PropTypes","T","cleanMethod","ItemVerificator","setStatus","fileKey","newStatus","props","currentValue","id","docId","file","find","f","key","updateFunc","object","filter","status","saveError","error","isBorrower","isProperty","closingSteps","marginBottom","indexOf","s","title","sort","a","b","fileCount","map","propTypes","bool","arrayOf","string","isRequired","defaultProps"],"mappings":"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","file":"imports/ui/pages/SingleLoanPage/FileVerificator.jsx.map","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { T } from 'core/components/Translation';\nimport cleanMethod from 'core/api/cleanMethods';\n\nimport ItemVerificator from './ItemVerificator';\n\nexport default class FileVerificator extends Component {\n  setStatus = (fileKey, newStatus) => {\n    const { currentValue, id, docId } = this.props;\n    const file = currentValue.find(f => f.key === fileKey);\n\n    cleanMethod(this.updateFunc(), {\n      object: {\n        [`files.${id}`]: [\n          ...currentValue.filter(f => f.key !== fileKey),\n          { ...file, status: newStatus },\n        ],\n      },\n      id: docId,\n    });\n  };\n\n  saveError = (fileKey, error) => {\n    const { currentValue, id, docId } = this.props;\n    const file = currentValue.find(f => f.key === fileKey);\n\n    cleanMethod(this.updateFunc(), {\n      object: {\n        [`files.${id}`]: [\n          ...currentValue.filter(f => f.key !== fileKey),\n          { ...file, error },\n        ],\n      },\n      id: docId,\n    });\n  };\n\n  updateFunc = () => {\n    if (this.props.isBorrower) return 'updateBorrower';\n    if (this.props.isProperty) return 'updateProperty';\n    return 'updateLoan';\n  };\n\n  render() {\n    const { currentValue, id, closingSteps } = this.props;\n    return (\n      <div className=\"mask1 flex-col\" style={{ marginBottom: 8 }}>\n        <h4>\n          {/* If this is a custom uploadX file,\n                    get title in the loan's last steps */}\n          {id.indexOf('upload') >= 0 ? (\n            (closingSteps.find(s => s.id === id) &&\n              closingSteps.find(s => s.id === id).title) ||\n            id\n          ) : (\n            <T id={`files.${id}`} />\n          )}\n        </h4>\n        {currentValue &&\n          currentValue\n            .sort((a, b) => a.fileCount > b.fileCount)\n            .map(f => (\n              <ItemVerificator\n                item={f}\n                key={f.key}\n                id={id}\n                setStatus={this.setStatus}\n                saveError={this.saveError}\n              />\n            ))}\n      </div>\n    );\n  }\n}\n\nFileVerificator.propTypes = {\n  isBorrower: PropTypes.bool,\n  isProperty: PropTypes.bool,\n  currentValue: PropTypes.arrayOf(PropTypes.object),\n  closingSteps: PropTypes.arrayOf(PropTypes.object),\n  id: PropTypes.string.isRequired,\n  docId: PropTypes.string.isRequired,\n};\n\nFileVerificator.defaultProps = {\n  isBorrower: false,\n  isProperty: false,\n  currentValue: [],\n  closingSteps: [],\n};\n"]},"hash":"c0294b4b0b375e6100ada5558c81ea64e57c8e3e"}
