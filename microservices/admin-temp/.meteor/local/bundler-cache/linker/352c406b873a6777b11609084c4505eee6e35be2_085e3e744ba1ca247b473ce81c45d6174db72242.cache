[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar Mongo = Package.mongo.Mongo;\nvar _ = Package.underscore._;\nvar meteorInstall = Package.modules.meteorInstall;\nvar meteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;\nvar Promise = Package.promise.Promise;\nvar Symbol = Package['ecmascript-runtime-client'].Symbol;\nvar Map = Package['ecmascript-runtime-client'].Map;\nvar Set = Package['ecmascript-runtime-client'].Set;\n\nvar require = meteorInstall({\"node_modules\":{\"meteor\":{\"hwillson:stub-collections\":{\"stub_collections.js\":function(require,exports,module){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                    //\n// packages/hwillson_stub-collections/stub_collections.js                                                             //\n//                                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                      //\nvar _toConsumableArray2 = require(\"babel-runtime/helpers/toConsumableArray\");                                         //\n                                                                                                                      //\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);                                                //\n                                                                                                                      //\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }                     //\n                                                                                                                      //\nvar _ = void 0;                                                                                                       // 1\n                                                                                                                      //\nmodule.watch(require(\"meteor/underscore\"), {                                                                          // 1\n  _: function (v) {                                                                                                   // 1\n    _ = v;                                                                                                            // 1\n  }                                                                                                                   // 1\n}, 0);                                                                                                                // 1\nvar Mongo = void 0;                                                                                                   // 1\nmodule.watch(require(\"meteor/mongo\"), {                                                                               // 1\n  Mongo: function (v) {                                                                                               // 1\n    Mongo = v;                                                                                                        // 1\n  }                                                                                                                   // 1\n}, 1);                                                                                                                // 1\nvar sinon = void 0;                                                                                                   // 1\nmodule.watch(require(\"meteor/practicalmeteor:sinon\"), {                                                               // 1\n  sinon: function (v) {                                                                                               // 1\n    sinon = v;                                                                                                        // 1\n  }                                                                                                                   // 1\n}, 2);                                                                                                                // 1\n                                                                                                                      //\nvar StubCollections = function () {                                                                                   // 5\n  var publicApi = {};                                                                                                 // 6\n  var privateApi = {}; /* Public API */                                                                               // 7\n                                                                                                                      //\n  publicApi.add = function (collections) {                                                                            // 11\n    var _privateApi$collectio;                                                                                        // 11\n                                                                                                                      //\n    (_privateApi$collectio = privateApi.collections).push.apply(_privateApi$collectio, (0, _toConsumableArray3.default)(collections));\n  };                                                                                                                  // 13\n                                                                                                                      //\n  publicApi.stub = function (collections) {                                                                           // 15\n    var pendingCollections = collections || privateApi.collections;                                                   // 16\n    [].concat(pendingCollections).forEach(function (collection) {                                                     // 17\n      if (!privateApi.pairs[collection._name]) {                                                                      // 18\n        var options = {                                                                                               // 19\n          transform: collection._transform                                                                            // 20\n        };                                                                                                            // 19\n        var pair = {                                                                                                  // 22\n          localCollection: new collection.constructor(null, options),                                                 // 23\n          collection: collection                                                                                      // 24\n        };                                                                                                            // 22\n        privateApi.stubPair(pair);                                                                                    // 26\n        privateApi.pairs[collection._name] = pair;                                                                    // 27\n      }                                                                                                               // 28\n    });                                                                                                               // 29\n  };                                                                                                                  // 30\n                                                                                                                      //\n  publicApi.restore = function () {                                                                                   // 32\n    privateApi.sandbox.restore();                                                                                     // 33\n    privateApi.pairs = {};                                                                                            // 34\n  }; /* Private API */                                                                                                // 35\n                                                                                                                      //\n  privateApi.sandbox = sinon.sandbox.create();                                                                        // 39\n  privateApi.pairs = {};                                                                                              // 40\n  privateApi.collections = [];                                                                                        // 41\n  privateApi.symbols = [];                                                                                            // 42\n                                                                                                                      //\n  for (var symbol in meteorBabelHelpers.sanitizeForInObject(Mongo.Collection.prototype)) {                            // 43\n    privateApi.symbols.push(symbol);                                                                                  // 44\n  }                                                                                                                   // 45\n                                                                                                                      //\n  privateApi.stubPair = function (pair) {                                                                             // 47\n    privateApi.symbols.forEach(function (symbol) {                                                                    // 48\n      if (_.isFunction(pair.localCollection[symbol]) && symbol != 'simpleSchema') {                                   // 49\n        privateApi.sandbox.stub(pair.collection, symbol, _.bind(pair.localCollection[symbol], pair.localCollection));\n      }                                                                                                               // 56\n    });                                                                                                               // 57\n  };                                                                                                                  // 58\n                                                                                                                      //\n  return publicApi;                                                                                                   // 60\n}();                                                                                                                  // 61\n                                                                                                                      //\nmodule.exportDefault(StubCollections);                                                                                // 1\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}}}},{\n  \"extensions\": [\n    \".js\",\n    \".json\"\n  ]\n});\nvar exports = require(\"./node_modules/meteor/hwillson:stub-collections/stub_collections.js\");\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\nPackage['hwillson:stub-collections'] = exports;\n\n})();\n","servePath":"/packages/hwillson_stub-collections.js","sourceMap":{"version":3,"sources":["packages/hwillson:stub-collections/stub_collections.js"],"names":["_","module","watch","require","v","Mongo","sinon","StubCollections","publicApi","privateApi","add","collections","push","stub","pendingCollections","concat","forEach","collection","pairs","_name","options","transform","_transform","pair","localCollection","constructor","stubPair","restore","sandbox","create","symbols","symbol","Collection","prototype","isFunction","bind","exportDefault"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAIA,UAAJ;;AAAMC,OAAOC,KAAP,CAAaC,QAAQ,mBAAR,CAAb,EAA0C;AAACH,GAAD,YAAGI,CAAH,EAAK;AAACJ,QAAEI,CAAF;AAAI;AAAV,CAA1C,EAAsD,CAAtD;AAAyD,IAAIC,cAAJ;AAAUJ,OAAOC,KAAP,CAAaC,QAAQ,cAAR,CAAb,EAAqC;AAACE,OAAD,YAAOD,CAAP,EAAS;AAACC,YAAMD,CAAN;AAAQ;AAAlB,CAArC,EAAyD,CAAzD;AAA4D,IAAIE,cAAJ;AAAUL,OAAOC,KAAP,CAAaC,QAAQ,8BAAR,CAAb,EAAqD;AAACG,OAAD,YAAOF,CAAP,EAAS;AAACE,YAAMF,CAAN;AAAQ;AAAlB,CAArD,EAAyE,CAAzE;;AAI/I,IAAMG,kBAAmB,YAAM;AAC7B,MAAMC,YAAY,EAAlB;AACA,MAAMC,aAAa,EAAnB,CAF6B,CAI7B;;AAEAD,YAAUE,GAAV,GAAgB,UAACC,WAAD,EAAiB;AAAA;;AAC/B,wCAAWA,WAAX,EAAuBC,IAAvB,+DAA+BD,WAA/B;AACD,GAFD;;AAIAH,YAAUK,IAAV,GAAiB,UAACF,WAAD,EAAiB;AAChC,QAAMG,qBAAqBH,eAAeF,WAAWE,WAArD;AACA,OAAGI,MAAH,CAAUD,kBAAV,EAA8BE,OAA9B,CAAsC,UAACC,UAAD,EAAgB;AACpD,UAAI,CAACR,WAAWS,KAAX,CAAiBD,WAAWE,KAA5B,CAAL,EAAyC;AACvC,YAAMC,UAAU;AACdC,qBAAWJ,WAAWK;AADR,SAAhB;AAGA,YAAMC,OAAO;AACXC,2BAAiB,IAAIP,WAAWQ,WAAf,CAA2B,IAA3B,EAAiCL,OAAjC,CADN;AAEXH;AAFW,SAAb;AAIAR,mBAAWiB,QAAX,CAAoBH,IAApB;AACAd,mBAAWS,KAAX,CAAiBD,WAAWE,KAA5B,IAAqCI,IAArC;AACD;AACF,KAZD;AAaD,GAfD;;AAiBAf,YAAUmB,OAAV,GAAoB,YAAM;AACxBlB,eAAWmB,OAAX,CAAmBD,OAAnB;AACAlB,eAAWS,KAAX,GAAmB,EAAnB;AACD,GAHD,CA3B6B,CAgC7B;;AAEAT,aAAWmB,OAAX,GAAqBtB,MAAMsB,OAAN,CAAcC,MAAd,EAArB;AACApB,aAAWS,KAAX,GAAmB,EAAnB;AACAT,aAAWE,WAAX,GAAyB,EAAzB;AACAF,aAAWqB,OAAX,GAAqB,EAArB;;AACA,OAAK,IAAIC,MAAT,2CAAmB1B,MAAM2B,UAAN,CAAiBC,SAApC,GAA+C;AAC7CxB,eAAWqB,OAAX,CAAmBlB,IAAnB,CAAwBmB,MAAxB;AACD;;AAEDtB,aAAWiB,QAAX,GAAsB,UAACH,IAAD,EAAU;AAC9Bd,eAAWqB,OAAX,CAAmBd,OAAnB,CAA2B,UAACe,MAAD,EAAY;AACrC,UAAI/B,EAAEkC,UAAF,CAAaX,KAAKC,eAAL,CAAqBO,MAArB,CAAb,KACGA,UAAU,cADjB,EACiC;AAC/BtB,mBAAWmB,OAAX,CAAmBf,IAAnB,CACEU,KAAKN,UADP,EAEEc,MAFF,EAGE/B,EAAEmC,IAAF,CAAOZ,KAAKC,eAAL,CAAqBO,MAArB,CAAP,EAAqCR,KAAKC,eAA1C,CAHF;AAKD;AACF,KATD;AAUD,GAXD;;AAaA,SAAOhB,SAAP;AACD,CAxDuB,EAAxB;;AAJAP,OAAOmC,aAAP,CA8De7B,eA9Df,sF","file":"/packages/hwillson_stub-collections.js","sourcesContent":["import { _ } from 'meteor/underscore';\nimport { Mongo } from 'meteor/mongo';\nimport { sinon } from 'meteor/practicalmeteor:sinon';\n\nconst StubCollections = (() => {\n  const publicApi = {};\n  const privateApi = {};\n\n  /* Public API */\n\n  publicApi.add = (collections) => {\n    privateApi.collections.push(...collections);\n  };\n\n  publicApi.stub = (collections) => {\n    const pendingCollections = collections || privateApi.collections;\n    [].concat(pendingCollections).forEach((collection) => {\n      if (!privateApi.pairs[collection._name]) {\n        const options = {\n          transform: collection._transform,\n        };\n        const pair = {\n          localCollection: new collection.constructor(null, options),\n          collection,\n        };\n        privateApi.stubPair(pair);\n        privateApi.pairs[collection._name] = pair;\n      }\n    });\n  };\n\n  publicApi.restore = () => {\n    privateApi.sandbox.restore();\n    privateApi.pairs = {};\n  };\n\n  /* Private API */\n\n  privateApi.sandbox = sinon.sandbox.create();\n  privateApi.pairs = {};\n  privateApi.collections = [];\n  privateApi.symbols = [];\n  for (let symbol in Mongo.Collection.prototype) {\n    privateApi.symbols.push(symbol);\n  }\n\n  privateApi.stubPair = (pair) => {\n    privateApi.symbols.forEach((symbol) => {\n      if (_.isFunction(pair.localCollection[symbol]) \n          && symbol != 'simpleSchema') {\n        privateApi.sandbox.stub(\n          pair.collection,\n          symbol,\n          _.bind(pair.localCollection[symbol], pair.localCollection)\n        );\n      }\n    });\n  };\n\n  return publicApi;\n})();\n\nexport default StubCollections;\n"]}}]